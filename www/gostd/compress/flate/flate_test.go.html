<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/flate</h2>
<ul>
<li><a href="/gostd/compress/flate/copy.go.html">copy.go</a></li>
<li><a href="/gostd/compress/flate/copy_test.go.html">copy_test.go</a></li>
<li><a href="/gostd/compress/flate/deflate.go.html">deflate.go</a></li>
<li><a href="/gostd/compress/flate/deflate_test.go.html">deflate_test.go</a></li>
<li><a href="/gostd/compress/flate/fixedhuff.go.html">fixedhuff.go</a></li>
<li><a href="/gostd/compress/flate/flate_test.go.html" class="current">flate_test.go</a></li>
<li><a href="/gostd/compress/flate/huffman_bit_writer.go.html">huffman_bit_writer.go</a></li>
<li><a href="/gostd/compress/flate/huffman_code.go.html">huffman_code.go</a></li>
<li><a href="/gostd/compress/flate/inflate.go.html">inflate.go</a></li>
<li><a href="/gostd/compress/flate/inflate_test.go.html">inflate_test.go</a></li>
<li><a href="/gostd/compress/flate/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/flate/reverse_bits.go.html">reverse_bits.go</a></li>
<li><a href="/gostd/compress/flate/token.go.html">token.go</a></li>
<li><a href="/gostd/compress/flate/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6430777">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6430832">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6430886">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6430937">//&nbsp;This&nbsp;test&nbsp;tests&nbsp;some&nbsp;internals&nbsp;of&nbsp;the&nbsp;flate&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="6430993">//&nbsp;The&nbsp;tests&nbsp;in&nbsp;package&nbsp;compress/gzip&nbsp;serve&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6431044">//&nbsp;end-to-end&nbsp;test&nbsp;of&nbsp;the&nbsp;decompressor.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6431085">package</span>&nbsp;<span class="ident" id="6431093">flate</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6431100">import</span>&nbsp;<span class="op" id="6431107">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6431110">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6431119">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6431129">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6431132">func</span>&nbsp;<span class="ident" id="6431137">TestUncompressedSource</span><span class="op" id="6431159">(</span><span class="ident" id="6431160">t</span>&nbsp;<span class="op" id="6431162">*</span><span class="ident" id="6431163"><a href="/gostd/compress/flate/flate_test.go.html#6431119">testing</a></span><span class="op" id="6431170">.</span><span class="ident" id="6431171"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6431172">)</span>&nbsp;<span class="op" id="6431174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6431177">decoder</span>&nbsp;<span class="op" id="6431185">:=</span>&nbsp;<span class="ident" id="6431188"><a href="/gostd/compress/flate/inflate.go.html#4850562">NewReader</a></span><span class="op" id="6431197">(</span><span class="ident" id="6431198"><a href="/gostd/compress/flate/flate_test.go.html#6431110">bytes</a></span><span class="op" id="6431203">.</span><span class="ident" id="6431204"><a href="/gostd/bytes/reader.go.html#1418136">NewReader</a></span><span class="op" id="6431213">(</span><span class="op" id="6431214">[</span><span class="op" id="6431215">]</span><span class="builtintype" id="6431216">byte</span><span class="op" id="6431220">{</span><span class="num" id="6431221">0x01</span><span class="op" id="6431225">,</span>&nbsp;<span class="num" id="6431227">0x01</span><span class="op" id="6431231">,</span>&nbsp;<span class="num" id="6431233">0x00</span><span class="op" id="6431237">,</span>&nbsp;<span class="num" id="6431239">0xfe</span><span class="op" id="6431243">,</span>&nbsp;<span class="num" id="6431245">0xff</span><span class="op" id="6431249">,</span>&nbsp;<span class="num" id="6431251">0x11</span><span class="op" id="6431255">}</span><span class="op" id="6431256">)</span><span class="op" id="6431257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6431260">output</span>&nbsp;<span class="op" id="6431267">:=</span>&nbsp;<span class="builtinfunc" id="6431270">make</span><span class="op" id="6431274">(</span><span class="op" id="6431275">[</span><span class="op" id="6431276">]</span><span class="builtintype" id="6431277">byte</span><span class="op" id="6431281">,</span>&nbsp;<span class="num" id="6431283">1</span><span class="op" id="6431284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6431287">n</span><span class="op" id="6431288">,</span>&nbsp;<span class="builtintype" id="6431290">error</span>&nbsp;<span class="op" id="6431296">:=</span>&nbsp;<span class="ident" id="6431299"><a href="/gostd/compress/flate/flate_test.go.html#6431177">decoder</a></span><span class="op" id="6431306">.</span><span class="ident" id="6431307"><a href="/gostd/io/io.go.html#1421843">Read</a></span><span class="op" id="6431311">(</span><span class="ident" id="6431312"><a href="/gostd/compress/flate/flate_test.go.html#6431260">output</a></span><span class="op" id="6431318">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6431321">if</span>&nbsp;<span class="ident" id="6431324"><a href="/gostd/compress/flate/flate_test.go.html#6431287">n</a></span>&nbsp;<span class="op" id="6431326">!=</span>&nbsp;<span class="num" id="6431329">1</span>&nbsp;<span class="op" id="6431331">||</span>&nbsp;<span class="builtintype" id="6431334"><a href="/gostd/compress/flate/flate_test.go.html#6431290">error</a></span>&nbsp;<span class="op" id="6431340">!=</span>&nbsp;<span class="builtintype" id="6431343">nil</span>&nbsp;<span class="op" id="6431347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6431351"><a href="/gostd/compress/flate/flate_test.go.html#6431160">t</a></span><span class="op" id="6431352">.</span><span class="ident" id="6431353"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6431359">(</span><span class="string" id="6431360">&#34;decoder.Read()&nbsp;=&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;1,&nbsp;nil&#34;</span><span class="op" id="6431398">,</span>&nbsp;<span class="ident" id="6431400"><a href="/gostd/compress/flate/flate_test.go.html#6431287">n</a></span><span class="op" id="6431401">,</span>&nbsp;<span class="builtintype" id="6431403"><a href="/gostd/compress/flate/flate_test.go.html#6431290">error</a></span><span class="op" id="6431408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6431411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6431414">if</span>&nbsp;<span class="ident" id="6431417"><a href="/gostd/compress/flate/flate_test.go.html#6431260">output</a></span><span class="op" id="6431423">[</span><span class="num" id="6431424">0</span><span class="op" id="6431425">]</span>&nbsp;<span class="op" id="6431427">!=</span>&nbsp;<span class="num" id="6431430">0x11</span>&nbsp;<span class="op" id="6431435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6431439"><a href="/gostd/compress/flate/flate_test.go.html#6431160">t</a></span><span class="op" id="6431440">.</span><span class="ident" id="6431441"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6431447">(</span><span class="string" id="6431448">&#34;output[0]&nbsp;=&nbsp;%x,&nbsp;want&nbsp;0x11&#34;</span><span class="op" id="6431475">,</span>&nbsp;<span class="ident" id="6431477"><a href="/gostd/compress/flate/flate_test.go.html#6431260">output</a></span><span class="op" id="6431483">[</span><span class="num" id="6431484">0</span><span class="op" id="6431485">]</span><span class="op" id="6431486">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6431489">}</span><br>
<span class="lineno"></span><span class="op" id="6431491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6431494">//&nbsp;The&nbsp;following&nbsp;test&nbsp;should&nbsp;not&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="6431534">func</span>&nbsp;<span class="ident" id="6431539">TestIssue5915</span><span class="op" id="6431552">(</span><span class="ident" id="6431553">t</span>&nbsp;<span class="op" id="6431555">*</span><span class="ident" id="6431556"><a href="/gostd/compress/flate/flate_test.go.html#6431119">testing</a></span><span class="op" id="6431563">.</span><span class="ident" id="6431564"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6431565">)</span>&nbsp;<span class="op" id="6431567">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6431570">bits</span>&nbsp;<span class="op" id="6431575">:=</span>&nbsp;<span class="op" id="6431578">[</span><span class="op" id="6431579">]</span><span class="builtintype" id="6431580">int</span><span class="op" id="6431583">{</span><span class="num" id="6431584">4</span><span class="op" id="6431585">,</span>&nbsp;<span class="num" id="6431587">0</span><span class="op" id="6431588">,</span>&nbsp;<span class="num" id="6431590">0</span><span class="op" id="6431591">,</span>&nbsp;<span class="num" id="6431593">6</span><span class="op" id="6431594">,</span>&nbsp;<span class="num" id="6431596">4</span><span class="op" id="6431597">,</span>&nbsp;<span class="num" id="6431599">3</span><span class="op" id="6431600">,</span>&nbsp;<span class="num" id="6431602">2</span><span class="op" id="6431603">,</span>&nbsp;<span class="num" id="6431605">3</span><span class="op" id="6431606">,</span>&nbsp;<span class="num" id="6431608">3</span><span class="op" id="6431609">,</span>&nbsp;<span class="num" id="6431611">4</span><span class="op" id="6431612">,</span>&nbsp;<span class="num" id="6431614">4</span><span class="op" id="6431615">,</span>&nbsp;<span class="num" id="6431617">5</span><span class="op" id="6431618">,</span>&nbsp;<span class="num" id="6431620">0</span><span class="op" id="6431621">,</span>&nbsp;<span class="num" id="6431623">0</span><span class="op" id="6431624">,</span>&nbsp;<span class="num" id="6431626">0</span><span class="op" id="6431627">,</span>&nbsp;<span class="num" id="6431629">0</span><span class="op" id="6431630">,</span>&nbsp;<span class="num" id="6431632">5</span><span class="op" id="6431633">,</span>&nbsp;<span class="num" id="6431635">5</span><span class="op" id="6431636">,</span>&nbsp;<span class="num" id="6431638">6</span><span class="op" id="6431639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6431643">0</span><span class="op" id="6431644">,</span>&nbsp;<span class="num" id="6431646">0</span><span class="op" id="6431647">,</span>&nbsp;<span class="num" id="6431649">0</span><span class="op" id="6431650">,</span>&nbsp;<span class="num" id="6431652">0</span><span class="op" id="6431653">,</span>&nbsp;<span class="num" id="6431655">0</span><span class="op" id="6431656">,</span>&nbsp;<span class="num" id="6431658">0</span><span class="op" id="6431659">,</span>&nbsp;<span class="num" id="6431661">0</span><span class="op" id="6431662">,</span>&nbsp;<span class="num" id="6431664">0</span><span class="op" id="6431665">,</span>&nbsp;<span class="num" id="6431667">0</span><span class="op" id="6431668">,</span>&nbsp;<span class="num" id="6431670">0</span><span class="op" id="6431671">,</span>&nbsp;<span class="num" id="6431673">11</span><span class="op" id="6431675">,</span>&nbsp;<span class="num" id="6431677">0</span><span class="op" id="6431678">,</span>&nbsp;<span class="num" id="6431680">0</span><span class="op" id="6431681">,</span>&nbsp;<span class="num" id="6431683">0</span><span class="op" id="6431684">,</span>&nbsp;<span class="num" id="6431686">0</span><span class="op" id="6431687">,</span>&nbsp;<span class="num" id="6431689">0</span><span class="op" id="6431690">,</span>&nbsp;<span class="num" id="6431692">0</span><span class="op" id="6431693">,</span>&nbsp;<span class="num" id="6431695">0</span><span class="op" id="6431696">,</span>&nbsp;<span class="num" id="6431698">0</span><span class="op" id="6431699">,</span>&nbsp;<span class="num" id="6431701">0</span><span class="op" id="6431702">,</span>&nbsp;<span class="num" id="6431704">0</span><span class="op" id="6431705">,</span>&nbsp;<span class="num" id="6431707">0</span><span class="op" id="6431708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6431712">0</span><span class="op" id="6431713">,</span>&nbsp;<span class="num" id="6431715">0</span><span class="op" id="6431716">,</span>&nbsp;<span class="num" id="6431718">0</span><span class="op" id="6431719">,</span>&nbsp;<span class="num" id="6431721">0</span><span class="op" id="6431722">,</span>&nbsp;<span class="num" id="6431724">0</span><span class="op" id="6431725">,</span>&nbsp;<span class="num" id="6431727">0</span><span class="op" id="6431728">,</span>&nbsp;<span class="num" id="6431730">0</span><span class="op" id="6431731">,</span>&nbsp;<span class="num" id="6431733">0</span><span class="op" id="6431734">,</span>&nbsp;<span class="num" id="6431736">0</span><span class="op" id="6431737">,</span>&nbsp;<span class="num" id="6431739">0</span><span class="op" id="6431740">,</span>&nbsp;<span class="num" id="6431742">7</span><span class="op" id="6431743">,</span>&nbsp;<span class="num" id="6431745">8</span><span class="op" id="6431746">,</span>&nbsp;<span class="num" id="6431748">6</span><span class="op" id="6431749">,</span>&nbsp;<span class="num" id="6431751">0</span><span class="op" id="6431752">,</span>&nbsp;<span class="num" id="6431754">11</span><span class="op" id="6431756">,</span>&nbsp;<span class="num" id="6431758">0</span><span class="op" id="6431759">,</span>&nbsp;<span class="num" id="6431761">8</span><span class="op" id="6431762">,</span>&nbsp;<span class="num" id="6431764">0</span><span class="op" id="6431765">,</span>&nbsp;<span class="num" id="6431767">6</span><span class="op" id="6431768">,</span>&nbsp;<span class="num" id="6431770">6</span><span class="op" id="6431771">,</span>&nbsp;<span class="num" id="6431773">10</span><span class="op" id="6431775">,</span>&nbsp;<span class="num" id="6431777">8</span><span class="op" id="6431778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6431781">h</span>&nbsp;<span class="op" id="6431783">:=</span>&nbsp;<span class="builtinfunc" id="6431786">new</span><span class="op" id="6431789">(</span><span class="ident" id="6431790"><a href="/gostd/compress/flate/inflate.go.html#4837816">huffmanDecoder</a></span><span class="op" id="6431804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6431807">ok</span>&nbsp;<span class="op" id="6431810">:=</span>&nbsp;<span class="ident" id="6431813"><a href="/gostd/compress/flate/flate_test.go.html#6431781">h</a></span><span class="op" id="6431814">.</span><span class="ident" id="6431815"><a href="/gostd/compress/flate/inflate.go.html#4838184">init</a></span><span class="op" id="6431819">(</span><span class="ident" id="6431820"><a href="/gostd/compress/flate/flate_test.go.html#6431570">bits</a></span><span class="op" id="6431824">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6431827">if</span>&nbsp;<span class="ident" id="6431830"><a href="/gostd/compress/flate/flate_test.go.html#6431807">ok</a></span>&nbsp;<span class="op" id="6431833">==</span>&nbsp;<span class="builtintype" id="6431836">true</span>&nbsp;<span class="op" id="6431841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6431845"><a href="/gostd/compress/flate/flate_test.go.html#6431553">t</a></span><span class="op" id="6431846">.</span><span class="ident" id="6431847"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6431853">(</span><span class="string" id="6431854">&#34;Given&nbsp;sequence&nbsp;of&nbsp;bits&nbsp;is&nbsp;bad,&nbsp;and&nbsp;should&nbsp;not&nbsp;succeed.&#34;</span><span class="op" id="6431910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6431913">}</span><br>
<span class="lineno"></span><span class="op" id="6431915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="6431918">//&nbsp;The&nbsp;following&nbsp;test&nbsp;should&nbsp;not&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="6431958">func</span>&nbsp;<span class="ident" id="6431963">TestIssue5962</span><span class="op" id="6431976">(</span><span class="ident" id="6431977">t</span>&nbsp;<span class="op" id="6431979">*</span><span class="ident" id="6431980"><a href="/gostd/compress/flate/flate_test.go.html#6431119">testing</a></span><span class="op" id="6431987">.</span><span class="ident" id="6431988"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6431989">)</span>&nbsp;<span class="op" id="6431991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6431994">bits</span>&nbsp;<span class="op" id="6431999">:=</span>&nbsp;<span class="op" id="6432002">[</span><span class="op" id="6432003">]</span><span class="builtintype" id="6432004">int</span><span class="op" id="6432007">{</span><span class="num" id="6432008">4</span><span class="op" id="6432009">,</span>&nbsp;<span class="num" id="6432011">0</span><span class="op" id="6432012">,</span>&nbsp;<span class="num" id="6432014">0</span><span class="op" id="6432015">,</span>&nbsp;<span class="num" id="6432017">6</span><span class="op" id="6432018">,</span>&nbsp;<span class="num" id="6432020">4</span><span class="op" id="6432021">,</span>&nbsp;<span class="num" id="6432023">3</span><span class="op" id="6432024">,</span>&nbsp;<span class="num" id="6432026">2</span><span class="op" id="6432027">,</span>&nbsp;<span class="num" id="6432029">3</span><span class="op" id="6432030">,</span>&nbsp;<span class="num" id="6432032">3</span><span class="op" id="6432033">,</span>&nbsp;<span class="num" id="6432035">4</span><span class="op" id="6432036">,</span>&nbsp;<span class="num" id="6432038">4</span><span class="op" id="6432039">,</span>&nbsp;<span class="num" id="6432041">5</span><span class="op" id="6432042">,</span>&nbsp;<span class="num" id="6432044">0</span><span class="op" id="6432045">,</span>&nbsp;<span class="num" id="6432047">0</span><span class="op" id="6432048">,</span>&nbsp;<span class="num" id="6432050">0</span><span class="op" id="6432051">,</span>&nbsp;<span class="num" id="6432053">0</span><span class="op" id="6432054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6432058">5</span><span class="op" id="6432059">,</span>&nbsp;<span class="num" id="6432061">5</span><span class="op" id="6432062">,</span>&nbsp;<span class="num" id="6432064">6</span><span class="op" id="6432065">,</span>&nbsp;<span class="num" id="6432067">0</span><span class="op" id="6432068">,</span>&nbsp;<span class="num" id="6432070">0</span><span class="op" id="6432071">,</span>&nbsp;<span class="num" id="6432073">0</span><span class="op" id="6432074">,</span>&nbsp;<span class="num" id="6432076">0</span><span class="op" id="6432077">,</span>&nbsp;<span class="num" id="6432079">0</span><span class="op" id="6432080">,</span>&nbsp;<span class="num" id="6432082">0</span><span class="op" id="6432083">,</span>&nbsp;<span class="num" id="6432085">0</span><span class="op" id="6432086">,</span>&nbsp;<span class="num" id="6432088">0</span><span class="op" id="6432089">,</span>&nbsp;<span class="num" id="6432091">0</span><span class="op" id="6432092">,</span>&nbsp;<span class="num" id="6432094">0</span><span class="op" id="6432095">,</span>&nbsp;<span class="num" id="6432097">11</span><span class="op" id="6432099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6432102">h</span>&nbsp;<span class="op" id="6432104">:=</span>&nbsp;<span class="builtinfunc" id="6432107">new</span><span class="op" id="6432110">(</span><span class="ident" id="6432111"><a href="/gostd/compress/flate/inflate.go.html#4837816">huffmanDecoder</a></span><span class="op" id="6432125">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6432128">ok</span>&nbsp;<span class="op" id="6432131">:=</span>&nbsp;<span class="ident" id="6432134"><a href="/gostd/compress/flate/flate_test.go.html#6432102">h</a></span><span class="op" id="6432135">.</span><span class="ident" id="6432136"><a href="/gostd/compress/flate/inflate.go.html#4838184">init</a></span><span class="op" id="6432140">(</span><span class="ident" id="6432141"><a href="/gostd/compress/flate/flate_test.go.html#6431994">bits</a></span><span class="op" id="6432145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6432148">if</span>&nbsp;<span class="ident" id="6432151"><a href="/gostd/compress/flate/flate_test.go.html#6432128">ok</a></span>&nbsp;<span class="op" id="6432154">==</span>&nbsp;<span class="builtintype" id="6432157">true</span>&nbsp;<span class="op" id="6432162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6432166"><a href="/gostd/compress/flate/flate_test.go.html#6431977">t</a></span><span class="op" id="6432167">.</span><span class="ident" id="6432168"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6432174">(</span><span class="string" id="6432175">&#34;Given&nbsp;sequence&nbsp;of&nbsp;bits&nbsp;is&nbsp;bad,&nbsp;and&nbsp;should&nbsp;not&nbsp;succeed.&#34;</span><span class="op" id="6432231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6432234">}</span><br>
<span class="lineno"></span><span class="op" id="6432236">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="6432239">//&nbsp;The&nbsp;following&nbsp;test&nbsp;should&nbsp;not&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="6432279">func</span>&nbsp;<span class="ident" id="6432284">TestIssue6255</span><span class="op" id="6432297">(</span><span class="ident" id="6432298">t</span>&nbsp;<span class="op" id="6432300">*</span><span class="ident" id="6432301"><a href="/gostd/compress/flate/flate_test.go.html#6431119">testing</a></span><span class="op" id="6432308">.</span><span class="ident" id="6432309"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6432310">)</span>&nbsp;<span class="op" id="6432312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6432315">bits1</span>&nbsp;<span class="op" id="6432321">:=</span>&nbsp;<span class="op" id="6432324">[</span><span class="op" id="6432325">]</span><span class="builtintype" id="6432326">int</span><span class="op" id="6432329">{</span><span class="num" id="6432330">1</span><span class="op" id="6432331">,</span>&nbsp;<span class="num" id="6432333">2</span><span class="op" id="6432334">,</span>&nbsp;<span class="num" id="6432336">3</span><span class="op" id="6432337">,</span>&nbsp;<span class="num" id="6432339">4</span><span class="op" id="6432340">,</span>&nbsp;<span class="num" id="6432342">5</span><span class="op" id="6432343">,</span>&nbsp;<span class="num" id="6432345">6</span><span class="op" id="6432346">,</span>&nbsp;<span class="num" id="6432348">7</span><span class="op" id="6432349">,</span>&nbsp;<span class="num" id="6432351">8</span><span class="op" id="6432352">,</span>&nbsp;<span class="num" id="6432354">9</span><span class="op" id="6432355">,</span>&nbsp;<span class="num" id="6432357">10</span><span class="op" id="6432359">,</span>&nbsp;<span class="num" id="6432361">11</span><span class="op" id="6432363">,</span>&nbsp;<span class="num" id="6432365">11</span><span class="op" id="6432367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6432370">bits2</span>&nbsp;<span class="op" id="6432376">:=</span>&nbsp;<span class="op" id="6432379">[</span><span class="op" id="6432380">]</span><span class="builtintype" id="6432381">int</span><span class="op" id="6432384">{</span><span class="num" id="6432385">11</span><span class="op" id="6432387">,</span>&nbsp;<span class="num" id="6432389">13</span><span class="op" id="6432391">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6432394">h</span>&nbsp;<span class="op" id="6432396">:=</span>&nbsp;<span class="builtinfunc" id="6432399">new</span><span class="op" id="6432402">(</span><span class="ident" id="6432403"><a href="/gostd/compress/flate/inflate.go.html#4837816">huffmanDecoder</a></span><span class="op" id="6432417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6432420">if</span>&nbsp;<span class="op" id="6432423">!</span><span class="ident" id="6432424"><a href="/gostd/compress/flate/flate_test.go.html#6432394">h</a></span><span class="op" id="6432425">.</span><span class="ident" id="6432426"><a href="/gostd/compress/flate/inflate.go.html#4838184">init</a></span><span class="op" id="6432430">(</span><span class="ident" id="6432431"><a href="/gostd/compress/flate/flate_test.go.html#6432315">bits1</a></span><span class="op" id="6432436">)</span>&nbsp;<span class="op" id="6432438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6432442"><a href="/gostd/compress/flate/flate_test.go.html#6432298">t</a></span><span class="op" id="6432443">.</span><span class="ident" id="6432444"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6432450">(</span><span class="string" id="6432451">&#34;Given&nbsp;sequence&nbsp;of&nbsp;bits&nbsp;is&nbsp;good&nbsp;and&nbsp;should&nbsp;succeed.&#34;</span><span class="op" id="6432503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6432506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6432509">if</span>&nbsp;<span class="ident" id="6432512"><a href="/gostd/compress/flate/flate_test.go.html#6432394">h</a></span><span class="op" id="6432513">.</span><span class="ident" id="6432514"><a href="/gostd/compress/flate/inflate.go.html#4838184">init</a></span><span class="op" id="6432518">(</span><span class="ident" id="6432519"><a href="/gostd/compress/flate/flate_test.go.html#6432370">bits2</a></span><span class="op" id="6432524">)</span>&nbsp;<span class="op" id="6432526">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6432530"><a href="/gostd/compress/flate/flate_test.go.html#6432298">t</a></span><span class="op" id="6432531">.</span><span class="ident" id="6432532"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6432538">(</span><span class="string" id="6432539">&#34;Given&nbsp;sequence&nbsp;of&nbsp;bits&nbsp;is&nbsp;bad&nbsp;and&nbsp;should&nbsp;not&nbsp;succeed.&#34;</span><span class="op" id="6432594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6432597">}</span><br>
<span class="lineno"></span><span class="op" id="6432599">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
