<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2235615">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2235670">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2235724">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2235775">package</span>&nbsp;<span class="ident" id="2235783">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2235792">import</span>&nbsp;<span class="string" id="2235799">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2235809">//&nbsp;ErrRange&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno">10</span><span class="keyword" id="2235881">var</span>&nbsp;<span class="ident" id="2235885">ErrRange</span>&nbsp;<span class="op" id="2235894">=</span>&nbsp;<span class="ident" id="2235896">errors</span><span class="op" id="2235902">.</span><span class="ident" id="2235903">New</span><span class="op" id="2235906">(</span><span class="string" id="2235907">&#34;value&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2235927">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2235930">//&nbsp;ErrSyntax&nbsp;indicates&nbsp;that&nbsp;a&nbsp;value&nbsp;does&nbsp;not&nbsp;have&nbsp;the&nbsp;right&nbsp;syntax&nbsp;for&nbsp;the&nbsp;target&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2236018">var</span>&nbsp;<span class="ident" id="2236022">ErrSyntax</span>&nbsp;<span class="op" id="2236032">=</span>&nbsp;<span class="ident" id="2236034">errors</span><span class="op" id="2236040">.</span><span class="ident" id="2236041">New</span><span class="op" id="2236044">(</span><span class="string" id="2236045">&#34;invalid&nbsp;syntax&#34;</span><span class="op" id="2236061">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2236064">//&nbsp;A&nbsp;NumError&nbsp;records&nbsp;a&nbsp;failed&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="2236107">type</span>&nbsp;<span class="ident" id="2236112">NumError</span>&nbsp;<span class="keyword" id="2236121">struct</span>&nbsp;<span class="op" id="2236128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2236131">Func</span>&nbsp;<span class="builtintype" id="2236136">string</span>&nbsp;<span class="comment" id="2236143">//&nbsp;the&nbsp;failing&nbsp;function&nbsp;(ParseBool,&nbsp;ParseInt,&nbsp;ParseUint,&nbsp;ParseFloat)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2236213">Num</span>&nbsp;&nbsp;<span class="builtintype" id="2236218">string</span>&nbsp;<span class="comment" id="2236225">//&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2236239">Err</span>&nbsp;&nbsp;<span class="builtintype" id="2236244">error</span>&nbsp;&nbsp;<span class="comment" id="2236251">//&nbsp;the&nbsp;reason&nbsp;the&nbsp;conversion&nbsp;failed&nbsp;(ErrRange,&nbsp;ErrSyntax)</span><br>
<span class="lineno">20</span><span class="op" id="2236309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2236312">func</span>&nbsp;<span class="op" id="2236317">(</span><span class="ident" id="2236318">e</span>&nbsp;<span class="op" id="2236320">*</span><span class="ident" id="2236321">NumError</span><span class="op" id="2236329">)</span>&nbsp;<span class="ident" id="2236331">Error</span><span class="op" id="2236336">(</span><span class="op" id="2236337">)</span>&nbsp;<span class="builtintype" id="2236339">string</span>&nbsp;<span class="op" id="2236346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2236349">return</span>&nbsp;<span class="string" id="2236356">&#34;strconv.&#34;</span>&nbsp;<span class="op" id="2236367">+</span>&nbsp;<span class="ident" id="2236369">e</span><span class="op" id="2236370">.</span><span class="ident" id="2236371">Func</span>&nbsp;<span class="op" id="2236376">+</span>&nbsp;<span class="string" id="2236378">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2236383">+</span>&nbsp;<span class="string" id="2236385">&#34;parsing&nbsp;&#34;</span>&nbsp;<span class="op" id="2236396">+</span>&nbsp;<span class="ident" id="2236398">Quote</span><span class="op" id="2236403">(</span><span class="ident" id="2236404">e</span><span class="op" id="2236405">.</span><span class="ident" id="2236406">Num</span><span class="op" id="2236409">)</span>&nbsp;<span class="op" id="2236411">+</span>&nbsp;<span class="string" id="2236413">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2236418">+</span>&nbsp;<span class="ident" id="2236420">e</span><span class="op" id="2236421">.</span><span class="ident" id="2236422">Err</span><span class="op" id="2236425">.</span><span class="ident" id="2236426">Error</span><span class="op" id="2236431">(</span><span class="op" id="2236432">)</span><br>
<span class="lineno"></span><span class="op" id="2236434">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="2236437">func</span>&nbsp;<span class="ident" id="2236442">syntaxError</span><span class="op" id="2236453">(</span><span class="ident" id="2236454">fn</span><span class="op" id="2236456">,</span>&nbsp;<span class="ident" id="2236458">str</span>&nbsp;<span class="builtintype" id="2236462">string</span><span class="op" id="2236468">)</span>&nbsp;<span class="op" id="2236470">*</span><span class="ident" id="2236471">NumError</span>&nbsp;<span class="op" id="2236480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2236483">return</span>&nbsp;<span class="op" id="2236490">&amp;</span><span class="ident" id="2236491">NumError</span><span class="op" id="2236499">{</span><span class="ident" id="2236500">fn</span><span class="op" id="2236502">,</span>&nbsp;<span class="ident" id="2236504">str</span><span class="op" id="2236507">,</span>&nbsp;<span class="ident" id="2236509">ErrSyntax</span><span class="op" id="2236518">}</span><br>
<span class="lineno"></span><span class="op" id="2236520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="2236523">func</span>&nbsp;<span class="ident" id="2236528">rangeError</span><span class="op" id="2236538">(</span><span class="ident" id="2236539">fn</span><span class="op" id="2236541">,</span>&nbsp;<span class="ident" id="2236543">str</span>&nbsp;<span class="builtintype" id="2236547">string</span><span class="op" id="2236553">)</span>&nbsp;<span class="op" id="2236555">*</span><span class="ident" id="2236556">NumError</span>&nbsp;<span class="op" id="2236565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2236568">return</span>&nbsp;<span class="op" id="2236575">&amp;</span><span class="ident" id="2236576">NumError</span><span class="op" id="2236584">{</span><span class="ident" id="2236585">fn</span><span class="op" id="2236587">,</span>&nbsp;<span class="ident" id="2236589">str</span><span class="op" id="2236592">,</span>&nbsp;<span class="ident" id="2236594">ErrRange</span><span class="op" id="2236602">}</span><br>
<span class="lineno"></span><span class="op" id="2236604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2236607">const</span>&nbsp;<span class="ident" id="2236613">intSize</span>&nbsp;<span class="op" id="2236621">=</span>&nbsp;<span class="num" id="2236623">32</span>&nbsp;<span class="op" id="2236626">&lt;&lt;</span>&nbsp;<span class="op" id="2236629">(</span><span class="op" id="2236630">^</span><span class="builtintype" id="2236631">uint</span><span class="op" id="2236635">(</span><span class="num" id="2236636">0</span><span class="op" id="2236637">)</span>&nbsp;<span class="op" id="2236639">&gt;&gt;</span>&nbsp;<span class="num" id="2236642">63</span><span class="op" id="2236644">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2236647">//&nbsp;IntSize&nbsp;is&nbsp;the&nbsp;size&nbsp;in&nbsp;bits&nbsp;of&nbsp;an&nbsp;int&nbsp;or&nbsp;uint&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2236703">const</span>&nbsp;<span class="ident" id="2236709">IntSize</span>&nbsp;<span class="op" id="2236717">=</span>&nbsp;<span class="ident" id="2236719">intSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2236728">//&nbsp;Return&nbsp;the&nbsp;first&nbsp;number&nbsp;n&nbsp;such&nbsp;that&nbsp;n*base&nbsp;&gt;=&nbsp;1&lt;&lt;64.</span><br>
<span class="lineno">40</span><span class="keyword" id="2236784">func</span>&nbsp;<span class="ident" id="2236789">cutoff64</span><span class="op" id="2236797">(</span><span class="ident" id="2236798">base</span>&nbsp;<span class="builtintype" id="2236803">int</span><span class="op" id="2236806">)</span>&nbsp;<span class="ident" id="2236808">uint64</span>&nbsp;<span class="op" id="2236815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2236818">if</span>&nbsp;<span class="ident" id="2236821">base</span>&nbsp;<span class="op" id="2236826">&lt;</span>&nbsp;<span class="num" id="2236828">2</span>&nbsp;<span class="op" id="2236830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2236834">return</span>&nbsp;<span class="num" id="2236841">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2236844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2236847">return</span>&nbsp;<span class="op" id="2236854">(</span><span class="num" id="2236855">1</span><span class="op" id="2236856">&lt;&lt;</span><span class="num" id="2236858">64</span><span class="op" id="2236860">-</span><span class="num" id="2236861">1</span><span class="op" id="2236862">)</span><span class="op" id="2236863">/</span><span class="ident" id="2236864">uint64</span><span class="op" id="2236870">(</span><span class="ident" id="2236871">base</span><span class="op" id="2236875">)</span>&nbsp;<span class="op" id="2236877">+</span>&nbsp;<span class="num" id="2236879">1</span><br>
<span class="lineno">45</span><span class="op" id="2236881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2236884">//&nbsp;ParseUint&nbsp;is&nbsp;like&nbsp;ParseInt&nbsp;but&nbsp;for&nbsp;unsigned&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="keyword" id="2236940">func</span>&nbsp;<span class="ident" id="2236945">ParseUint</span><span class="op" id="2236954">(</span><span class="ident" id="2236955">s</span>&nbsp;<span class="builtintype" id="2236957">string</span><span class="op" id="2236963">,</span>&nbsp;<span class="ident" id="2236965">base</span>&nbsp;<span class="builtintype" id="2236970">int</span><span class="op" id="2236973">,</span>&nbsp;<span class="ident" id="2236975">bitSize</span>&nbsp;<span class="builtintype" id="2236983">int</span><span class="op" id="2236986">)</span>&nbsp;<span class="op" id="2236988">(</span><span class="ident" id="2236989">n</span>&nbsp;<span class="ident" id="2236991">uint64</span><span class="op" id="2236997">,</span>&nbsp;<span class="ident" id="2236999">err</span>&nbsp;<span class="builtintype" id="2237003">error</span><span class="op" id="2237008">)</span>&nbsp;<span class="op" id="2237010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237013">var</span>&nbsp;<span class="ident" id="2237017">cutoff</span><span class="op" id="2237023">,</span>&nbsp;<span class="ident" id="2237025">maxVal</span>&nbsp;<span class="ident" id="2237032">uint64</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237041">if</span>&nbsp;<span class="ident" id="2237044">bitSize</span>&nbsp;<span class="op" id="2237052">==</span>&nbsp;<span class="num" id="2237055">0</span>&nbsp;<span class="op" id="2237057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237061">bitSize</span>&nbsp;<span class="op" id="2237069">=</span>&nbsp;<span class="builtintype" id="2237071">int</span><span class="op" id="2237074">(</span><span class="ident" id="2237075">IntSize</span><span class="op" id="2237082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2237085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237089">s0</span>&nbsp;<span class="op" id="2237092">:=</span>&nbsp;<span class="ident" id="2237095">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237098">switch</span>&nbsp;<span class="op" id="2237105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237108">case</span>&nbsp;<span class="builtinfunc" id="2237113">len</span><span class="op" id="2237116">(</span><span class="ident" id="2237117">s</span><span class="op" id="2237118">)</span>&nbsp;<span class="op" id="2237120">&lt;</span>&nbsp;<span class="num" id="2237122">1</span><span class="op" id="2237123">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237127">err</span>&nbsp;<span class="op" id="2237131">=</span>&nbsp;<span class="ident" id="2237133">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237145">goto</span>&nbsp;<span class="ident" id="2237150">Error</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237158">case</span>&nbsp;<span class="num" id="2237163">2</span>&nbsp;<span class="op" id="2237165">&lt;=</span>&nbsp;<span class="ident" id="2237168">base</span>&nbsp;<span class="op" id="2237173">&amp;&amp;</span>&nbsp;<span class="ident" id="2237176">base</span>&nbsp;<span class="op" id="2237181">&lt;=</span>&nbsp;<span class="num" id="2237184">36</span><span class="op" id="2237186">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2237190">//&nbsp;valid&nbsp;base;&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237221">case</span>&nbsp;<span class="ident" id="2237226">base</span>&nbsp;<span class="op" id="2237231">==</span>&nbsp;<span class="num" id="2237234">0</span><span class="op" id="2237235">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2237239">//&nbsp;Look&nbsp;for&nbsp;octal,&nbsp;hex&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237272">switch</span>&nbsp;<span class="op" id="2237279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237283">case</span>&nbsp;<span class="ident" id="2237288">s</span><span class="op" id="2237289">[</span><span class="num" id="2237290">0</span><span class="op" id="2237291">]</span>&nbsp;<span class="op" id="2237293">==</span>&nbsp;<span class="string" id="2237296">&#39;0&#39;</span>&nbsp;<span class="op" id="2237300">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2237303">len</span><span class="op" id="2237306">(</span><span class="ident" id="2237307">s</span><span class="op" id="2237308">)</span>&nbsp;<span class="op" id="2237310">&gt;</span>&nbsp;<span class="num" id="2237312">1</span>&nbsp;<span class="op" id="2237314">&amp;&amp;</span>&nbsp;<span class="op" id="2237317">(</span><span class="ident" id="2237318">s</span><span class="op" id="2237319">[</span><span class="num" id="2237320">1</span><span class="op" id="2237321">]</span>&nbsp;<span class="op" id="2237323">==</span>&nbsp;<span class="string" id="2237326">&#39;x&#39;</span>&nbsp;<span class="op" id="2237330">||</span>&nbsp;<span class="ident" id="2237333">s</span><span class="op" id="2237334">[</span><span class="num" id="2237335">1</span><span class="op" id="2237336">]</span>&nbsp;<span class="op" id="2237338">==</span>&nbsp;<span class="string" id="2237341">&#39;X&#39;</span><span class="op" id="2237344">)</span><span class="op" id="2237345">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237350">base</span>&nbsp;<span class="op" id="2237355">=</span>&nbsp;<span class="num" id="2237357">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237363">s</span>&nbsp;<span class="op" id="2237365">=</span>&nbsp;<span class="ident" id="2237367">s</span><span class="op" id="2237368">[</span><span class="num" id="2237369">2</span><span class="op" id="2237370">:</span><span class="op" id="2237371">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237376">if</span>&nbsp;<span class="builtinfunc" id="2237379">len</span><span class="op" id="2237382">(</span><span class="ident" id="2237383">s</span><span class="op" id="2237384">)</span>&nbsp;<span class="op" id="2237386">&lt;</span>&nbsp;<span class="num" id="2237388">1</span>&nbsp;<span class="op" id="2237390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237396">err</span>&nbsp;<span class="op" id="2237400">=</span>&nbsp;<span class="ident" id="2237402">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237416">goto</span>&nbsp;<span class="ident" id="2237421">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2237430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237434">case</span>&nbsp;<span class="ident" id="2237439">s</span><span class="op" id="2237440">[</span><span class="num" id="2237441">0</span><span class="op" id="2237442">]</span>&nbsp;<span class="op" id="2237444">==</span>&nbsp;<span class="string" id="2237447">&#39;0&#39;</span><span class="op" id="2237450">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237455">base</span>&nbsp;<span class="op" id="2237460">=</span>&nbsp;<span class="num" id="2237462">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237466">default</span><span class="op" id="2237473">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237478">base</span>&nbsp;<span class="op" id="2237483">=</span>&nbsp;<span class="num" id="2237485">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2237490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237494">default</span><span class="op" id="2237501">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237505">err</span>&nbsp;<span class="op" id="2237509">=</span>&nbsp;<span class="ident" id="2237511">errors</span><span class="op" id="2237517">.</span><span class="ident" id="2237518">New</span><span class="op" id="2237521">(</span><span class="string" id="2237522">&#34;invalid&nbsp;base&nbsp;&#34;</span>&nbsp;<span class="op" id="2237538">+</span>&nbsp;<span class="ident" id="2237540">Itoa</span><span class="op" id="2237544">(</span><span class="ident" id="2237545">base</span><span class="op" id="2237549">)</span><span class="op" id="2237550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237554">goto</span>&nbsp;<span class="ident" id="2237559">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2237566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237570">n</span>&nbsp;<span class="op" id="2237572">=</span>&nbsp;<span class="num" id="2237574">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237577">cutoff</span>&nbsp;<span class="op" id="2237584">=</span>&nbsp;<span class="ident" id="2237586">cutoff64</span><span class="op" id="2237594">(</span><span class="ident" id="2237595">base</span><span class="op" id="2237599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237602">maxVal</span>&nbsp;<span class="op" id="2237609">=</span>&nbsp;<span class="num" id="2237611">1</span><span class="op" id="2237612">&lt;&lt;</span><span class="builtintype" id="2237614">uint</span><span class="op" id="2237618">(</span><span class="ident" id="2237619">bitSize</span><span class="op" id="2237626">)</span>&nbsp;<span class="op" id="2237628">-</span>&nbsp;<span class="num" id="2237630">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237634">for</span>&nbsp;<span class="ident" id="2237638">i</span>&nbsp;<span class="op" id="2237640">:=</span>&nbsp;<span class="num" id="2237643">0</span><span class="op" id="2237644">;</span>&nbsp;<span class="ident" id="2237646">i</span>&nbsp;<span class="op" id="2237648">&lt;</span>&nbsp;<span class="builtinfunc" id="2237650">len</span><span class="op" id="2237653">(</span><span class="ident" id="2237654">s</span><span class="op" id="2237655">)</span><span class="op" id="2237656">;</span>&nbsp;<span class="ident" id="2237658">i</span><span class="op" id="2237659">++</span>&nbsp;<span class="op" id="2237662">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237666">var</span>&nbsp;<span class="ident" id="2237670">v</span>&nbsp;<span class="builtintype" id="2237672">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237679">d</span>&nbsp;<span class="op" id="2237681">:=</span>&nbsp;<span class="ident" id="2237684">s</span><span class="op" id="2237685">[</span><span class="ident" id="2237686">i</span><span class="op" id="2237687">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237691">switch</span>&nbsp;<span class="op" id="2237698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237702">case</span>&nbsp;<span class="string" id="2237707">&#39;0&#39;</span>&nbsp;<span class="op" id="2237711">&lt;=</span>&nbsp;<span class="ident" id="2237714">d</span>&nbsp;<span class="op" id="2237716">&amp;&amp;</span>&nbsp;<span class="ident" id="2237719">d</span>&nbsp;<span class="op" id="2237721">&lt;=</span>&nbsp;<span class="string" id="2237724">&#39;9&#39;</span><span class="op" id="2237727">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237732">v</span>&nbsp;<span class="op" id="2237734">=</span>&nbsp;<span class="ident" id="2237736">d</span>&nbsp;<span class="op" id="2237738">-</span>&nbsp;<span class="string" id="2237740">&#39;0&#39;</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237746">case</span>&nbsp;<span class="string" id="2237751">&#39;a&#39;</span>&nbsp;<span class="op" id="2237755">&lt;=</span>&nbsp;<span class="ident" id="2237758">d</span>&nbsp;<span class="op" id="2237760">&amp;&amp;</span>&nbsp;<span class="ident" id="2237763">d</span>&nbsp;<span class="op" id="2237765">&lt;=</span>&nbsp;<span class="string" id="2237768">&#39;z&#39;</span><span class="op" id="2237771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237776">v</span>&nbsp;<span class="op" id="2237778">=</span>&nbsp;<span class="ident" id="2237780">d</span>&nbsp;<span class="op" id="2237782">-</span>&nbsp;<span class="string" id="2237784">&#39;a&#39;</span>&nbsp;<span class="op" id="2237788">+</span>&nbsp;<span class="num" id="2237790">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237795">case</span>&nbsp;<span class="string" id="2237800">&#39;A&#39;</span>&nbsp;<span class="op" id="2237804">&lt;=</span>&nbsp;<span class="ident" id="2237807">d</span>&nbsp;<span class="op" id="2237809">&amp;&amp;</span>&nbsp;<span class="ident" id="2237812">d</span>&nbsp;<span class="op" id="2237814">&lt;=</span>&nbsp;<span class="string" id="2237817">&#39;Z&#39;</span><span class="op" id="2237820">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237825">v</span>&nbsp;<span class="op" id="2237827">=</span>&nbsp;<span class="ident" id="2237829">d</span>&nbsp;<span class="op" id="2237831">-</span>&nbsp;<span class="string" id="2237833">&#39;A&#39;</span>&nbsp;<span class="op" id="2237837">+</span>&nbsp;<span class="num" id="2237839">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237844">default</span><span class="op" id="2237851">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237856">n</span>&nbsp;<span class="op" id="2237858">=</span>&nbsp;<span class="num" id="2237860">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237865">err</span>&nbsp;<span class="op" id="2237869">=</span>&nbsp;<span class="ident" id="2237871">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237884">goto</span>&nbsp;<span class="ident" id="2237889">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2237897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237901">if</span>&nbsp;<span class="builtintype" id="2237904">int</span><span class="op" id="2237907">(</span><span class="ident" id="2237908">v</span><span class="op" id="2237909">)</span>&nbsp;<span class="op" id="2237911">&gt;=</span>&nbsp;<span class="ident" id="2237914">base</span>&nbsp;<span class="op" id="2237919">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237924">n</span>&nbsp;<span class="op" id="2237926">=</span>&nbsp;<span class="num" id="2237928">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2237933">err</span>&nbsp;<span class="op" id="2237937">=</span>&nbsp;<span class="ident" id="2237939">ErrSyntax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237952">goto</span>&nbsp;<span class="ident" id="2237957">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2237965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2237970">if</span>&nbsp;<span class="ident" id="2237973">n</span>&nbsp;<span class="op" id="2237975">&gt;=</span>&nbsp;<span class="ident" id="2237978">cutoff</span>&nbsp;<span class="op" id="2237985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2237990">//&nbsp;n*base&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238013">n</span>&nbsp;<span class="op" id="2238015">=</span>&nbsp;<span class="num" id="2238017">1</span><span class="op" id="2238018">&lt;&lt;</span><span class="num" id="2238020">64</span>&nbsp;<span class="op" id="2238023">-</span>&nbsp;<span class="num" id="2238025">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238030">err</span>&nbsp;<span class="op" id="2238034">=</span>&nbsp;<span class="ident" id="2238036">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2238048">goto</span>&nbsp;<span class="ident" id="2238053">Error</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2238061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238065">n</span>&nbsp;<span class="op" id="2238067">*=</span>&nbsp;<span class="ident" id="2238070">uint64</span><span class="op" id="2238076">(</span><span class="ident" id="2238077">base</span><span class="op" id="2238081">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238086">n1</span>&nbsp;<span class="op" id="2238089">:=</span>&nbsp;<span class="ident" id="2238092">n</span>&nbsp;<span class="op" id="2238094">+</span>&nbsp;<span class="ident" id="2238096">uint64</span><span class="op" id="2238102">(</span><span class="ident" id="2238103">v</span><span class="op" id="2238104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2238108">if</span>&nbsp;<span class="ident" id="2238111">n1</span>&nbsp;<span class="op" id="2238114">&lt;</span>&nbsp;<span class="ident" id="2238116">n</span>&nbsp;<span class="op" id="2238118">||</span>&nbsp;<span class="ident" id="2238121">n1</span>&nbsp;<span class="op" id="2238124">&gt;</span>&nbsp;<span class="ident" id="2238126">maxVal</span>&nbsp;<span class="op" id="2238133">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2238138">//&nbsp;n+v&nbsp;overflows</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238158">n</span>&nbsp;<span class="op" id="2238160">=</span>&nbsp;<span class="num" id="2238162">1</span><span class="op" id="2238163">&lt;&lt;</span><span class="num" id="2238165">64</span>&nbsp;<span class="op" id="2238168">-</span>&nbsp;<span class="num" id="2238170">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238175">err</span>&nbsp;<span class="op" id="2238179">=</span>&nbsp;<span class="ident" id="2238181">ErrRange</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2238193">goto</span>&nbsp;<span class="ident" id="2238198">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2238206">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2238210">n</span>&nbsp;<span class="op" id="2238212">=</span>&nbsp;<span class="ident" id="2238214">n1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2238218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2238222">return</span>&nbsp;<span class="ident" id="2238229">n</span><span class="op" id="2238230">,</span>&nbsp;<span class="ident" id="2238232">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="ident" id="2238237">Error</span><span class="op" id="2238242">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2238245">return</span>&nbsp;<span class="ident" id="2238252">n</span><span class="op" id="2238253">,</span>&nbsp;<span class="op" id="2238255">&amp;</span><span class="ident" id="2238256">NumError</span><span class="op" id="2238264">{</span><span class="string" id="2238265">&#34;ParseUint&#34;</span><span class="op" id="2238276">,</span>&nbsp;<span class="ident" id="2238278">s0</span><span class="op" id="2238280">,</span>&nbsp;<span class="ident" id="2238282">err</span><span class="op" id="2238285">}</span><br>
<span class="lineno"></span><span class="op" id="2238287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2238290">//&nbsp;ParseInt&nbsp;interprets&nbsp;a&nbsp;string&nbsp;s&nbsp;in&nbsp;the&nbsp;given&nbsp;base&nbsp;(2&nbsp;to&nbsp;36)&nbsp;and</span><br>
<span class="lineno">135</span><span class="comment" id="2238356">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;value&nbsp;i.&nbsp;&nbsp;If&nbsp;base&nbsp;==&nbsp;0,&nbsp;the&nbsp;base&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2238421">//&nbsp;implied&nbsp;by&nbsp;the&nbsp;string&#39;s&nbsp;prefix:&nbsp;base&nbsp;16&nbsp;for&nbsp;&#34;0x&#34;,&nbsp;base&nbsp;8&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2238485">//&nbsp;&#34;0&#34;,&nbsp;and&nbsp;base&nbsp;10&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2238516">//</span><br>
<span class="lineno"></span><span class="comment" id="2238519">//&nbsp;The&nbsp;bitSize&nbsp;argument&nbsp;specifies&nbsp;the&nbsp;integer&nbsp;type</span><br>
<span class="lineno">140</span><span class="comment" id="2238570">//&nbsp;that&nbsp;the&nbsp;result&nbsp;must&nbsp;fit&nbsp;into.&nbsp;&nbsp;Bit&nbsp;sizes&nbsp;0,&nbsp;8,&nbsp;16,&nbsp;32,&nbsp;and&nbsp;64</span><br>
<span class="lineno"></span><span class="comment" id="2238636">//&nbsp;correspond&nbsp;to&nbsp;int,&nbsp;int8,&nbsp;int16,&nbsp;int32,&nbsp;and&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2238689">//</span><br>
<span class="lineno"></span><span class="comment" id="2238692">//&nbsp;The&nbsp;errors&nbsp;that&nbsp;ParseInt&nbsp;returns&nbsp;have&nbsp;concrete&nbsp;type&nbsp;*NumError</span><br>
<span class="lineno"></span><span class="comment" id="2238757">//&nbsp;and&nbsp;include&nbsp;err.Num&nbsp;=&nbsp;s.&nbsp;&nbsp;If&nbsp;s&nbsp;is&nbsp;empty&nbsp;or&nbsp;contains&nbsp;invalid</span><br>
<span class="lineno">145</span><span class="comment" id="2238820">//&nbsp;digits,&nbsp;err.Err&nbsp;=&nbsp;ErrSyntax&nbsp;and&nbsp;the&nbsp;returned&nbsp;value&nbsp;is&nbsp;0;</span><br>
<span class="lineno"></span><span class="comment" id="2238880">//&nbsp;if&nbsp;the&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;s&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2238942">//&nbsp;signed&nbsp;integer&nbsp;of&nbsp;the&nbsp;given&nbsp;size,&nbsp;err.Err&nbsp;=&nbsp;ErrRange&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2239006">//&nbsp;returned&nbsp;value&nbsp;is&nbsp;the&nbsp;maximum&nbsp;magnitude&nbsp;integer&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2239064">//&nbsp;appropriate&nbsp;bitSize&nbsp;and&nbsp;sign.</span><br>
<span class="lineno">150</span><span class="keyword" id="2239097">func</span>&nbsp;<span class="ident" id="2239102">ParseInt</span><span class="op" id="2239110">(</span><span class="ident" id="2239111">s</span>&nbsp;<span class="builtintype" id="2239113">string</span><span class="op" id="2239119">,</span>&nbsp;<span class="ident" id="2239121">base</span>&nbsp;<span class="builtintype" id="2239126">int</span><span class="op" id="2239129">,</span>&nbsp;<span class="ident" id="2239131">bitSize</span>&nbsp;<span class="builtintype" id="2239139">int</span><span class="op" id="2239142">)</span>&nbsp;<span class="op" id="2239144">(</span><span class="ident" id="2239145">i</span>&nbsp;<span class="ident" id="2239147">int64</span><span class="op" id="2239152">,</span>&nbsp;<span class="ident" id="2239154">err</span>&nbsp;<span class="builtintype" id="2239158">error</span><span class="op" id="2239163">)</span>&nbsp;<span class="op" id="2239165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239168">const</span>&nbsp;<span class="ident" id="2239174">fnParseInt</span>&nbsp;<span class="op" id="2239185">=</span>&nbsp;<span class="string" id="2239187">&#34;ParseInt&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239200">if</span>&nbsp;<span class="ident" id="2239203">bitSize</span>&nbsp;<span class="op" id="2239211">==</span>&nbsp;<span class="num" id="2239214">0</span>&nbsp;<span class="op" id="2239216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239220">bitSize</span>&nbsp;<span class="op" id="2239228">=</span>&nbsp;<span class="builtintype" id="2239230">int</span><span class="op" id="2239233">(</span><span class="ident" id="2239234">IntSize</span><span class="op" id="2239241">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2239248">//&nbsp;Empty&nbsp;string&nbsp;bad.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239270">if</span>&nbsp;<span class="builtinfunc" id="2239273">len</span><span class="op" id="2239276">(</span><span class="ident" id="2239277">s</span><span class="op" id="2239278">)</span>&nbsp;<span class="op" id="2239280">==</span>&nbsp;<span class="num" id="2239283">0</span>&nbsp;<span class="op" id="2239285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239289">return</span>&nbsp;<span class="num" id="2239296">0</span><span class="op" id="2239297">,</span>&nbsp;<span class="ident" id="2239299">syntaxError</span><span class="op" id="2239310">(</span><span class="ident" id="2239311">fnParseInt</span><span class="op" id="2239321">,</span>&nbsp;<span class="ident" id="2239323">s</span><span class="op" id="2239324">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239327">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2239331">//&nbsp;Pick&nbsp;off&nbsp;leading&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239358">s0</span>&nbsp;<span class="op" id="2239361">:=</span>&nbsp;<span class="ident" id="2239364">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239367">neg</span>&nbsp;<span class="op" id="2239371">:=</span>&nbsp;<span class="builtintype" id="2239374">false</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239381">if</span>&nbsp;<span class="ident" id="2239384">s</span><span class="op" id="2239385">[</span><span class="num" id="2239386">0</span><span class="op" id="2239387">]</span>&nbsp;<span class="op" id="2239389">==</span>&nbsp;<span class="string" id="2239392">&#39;+&#39;</span>&nbsp;<span class="op" id="2239396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239400">s</span>&nbsp;<span class="op" id="2239402">=</span>&nbsp;<span class="ident" id="2239404">s</span><span class="op" id="2239405">[</span><span class="num" id="2239406">1</span><span class="op" id="2239407">:</span><span class="op" id="2239408">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239411">}</span>&nbsp;<span class="keyword" id="2239413">else</span>&nbsp;<span class="keyword" id="2239418">if</span>&nbsp;<span class="ident" id="2239421">s</span><span class="op" id="2239422">[</span><span class="num" id="2239423">0</span><span class="op" id="2239424">]</span>&nbsp;<span class="op" id="2239426">==</span>&nbsp;<span class="string" id="2239429">&#39;-&#39;</span>&nbsp;<span class="op" id="2239433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239437">neg</span>&nbsp;<span class="op" id="2239441">=</span>&nbsp;<span class="builtintype" id="2239443">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239450">s</span>&nbsp;<span class="op" id="2239452">=</span>&nbsp;<span class="ident" id="2239454">s</span><span class="op" id="2239455">[</span><span class="num" id="2239456">1</span><span class="op" id="2239457">:</span><span class="op" id="2239458">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239461">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2239465">//&nbsp;Convert&nbsp;unsigned&nbsp;and&nbsp;check&nbsp;range.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239503">var</span>&nbsp;<span class="ident" id="2239507">un</span>&nbsp;<span class="ident" id="2239510">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239518">un</span><span class="op" id="2239520">,</span>&nbsp;<span class="ident" id="2239522">err</span>&nbsp;<span class="op" id="2239526">=</span>&nbsp;<span class="ident" id="2239528">ParseUint</span><span class="op" id="2239537">(</span><span class="ident" id="2239538">s</span><span class="op" id="2239539">,</span>&nbsp;<span class="ident" id="2239541">base</span><span class="op" id="2239545">,</span>&nbsp;<span class="ident" id="2239547">bitSize</span><span class="op" id="2239554">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239557">if</span>&nbsp;<span class="ident" id="2239560">err</span>&nbsp;<span class="op" id="2239564">!=</span>&nbsp;<span class="ident" id="2239567">nil</span>&nbsp;<span class="op" id="2239571">&amp;&amp;</span>&nbsp;<span class="ident" id="2239574">err</span><span class="op" id="2239577">.</span><span class="op" id="2239578">(</span><span class="op" id="2239579">*</span><span class="ident" id="2239580">NumError</span><span class="op" id="2239588">)</span><span class="op" id="2239589">.</span><span class="ident" id="2239590">Err</span>&nbsp;<span class="op" id="2239594">!=</span>&nbsp;<span class="ident" id="2239597">ErrRange</span>&nbsp;<span class="op" id="2239606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239610">err</span><span class="op" id="2239613">.</span><span class="op" id="2239614">(</span><span class="op" id="2239615">*</span><span class="ident" id="2239616">NumError</span><span class="op" id="2239624">)</span><span class="op" id="2239625">.</span><span class="ident" id="2239626">Func</span>&nbsp;<span class="op" id="2239631">=</span>&nbsp;<span class="ident" id="2239633">fnParseInt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239646">err</span><span class="op" id="2239649">.</span><span class="op" id="2239650">(</span><span class="op" id="2239651">*</span><span class="ident" id="2239652">NumError</span><span class="op" id="2239660">)</span><span class="op" id="2239661">.</span><span class="ident" id="2239662">Num</span>&nbsp;<span class="op" id="2239666">=</span>&nbsp;<span class="ident" id="2239668">s0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239673">return</span>&nbsp;<span class="num" id="2239680">0</span><span class="op" id="2239681">,</span>&nbsp;<span class="ident" id="2239683">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239688">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239691">cutoff</span>&nbsp;<span class="op" id="2239698">:=</span>&nbsp;<span class="ident" id="2239701">uint64</span><span class="op" id="2239707">(</span><span class="num" id="2239708">1</span>&nbsp;<span class="op" id="2239710">&lt;&lt;</span>&nbsp;<span class="builtintype" id="2239713">uint</span><span class="op" id="2239717">(</span><span class="ident" id="2239718">bitSize</span><span class="op" id="2239725">-</span><span class="num" id="2239726">1</span><span class="op" id="2239727">)</span><span class="op" id="2239728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239731">if</span>&nbsp;<span class="op" id="2239734">!</span><span class="ident" id="2239735">neg</span>&nbsp;<span class="op" id="2239739">&amp;&amp;</span>&nbsp;<span class="ident" id="2239742">un</span>&nbsp;<span class="op" id="2239745">&gt;=</span>&nbsp;<span class="ident" id="2239748">cutoff</span>&nbsp;<span class="op" id="2239755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239759">return</span>&nbsp;<span class="ident" id="2239766">int64</span><span class="op" id="2239771">(</span><span class="ident" id="2239772">cutoff</span>&nbsp;<span class="op" id="2239779">-</span>&nbsp;<span class="num" id="2239781">1</span><span class="op" id="2239782">)</span><span class="op" id="2239783">,</span>&nbsp;<span class="ident" id="2239785">rangeError</span><span class="op" id="2239795">(</span><span class="ident" id="2239796">fnParseInt</span><span class="op" id="2239806">,</span>&nbsp;<span class="ident" id="2239808">s0</span><span class="op" id="2239810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239816">if</span>&nbsp;<span class="ident" id="2239819">neg</span>&nbsp;<span class="op" id="2239823">&amp;&amp;</span>&nbsp;<span class="ident" id="2239826">un</span>&nbsp;<span class="op" id="2239829">&gt;</span>&nbsp;<span class="ident" id="2239831">cutoff</span>&nbsp;<span class="op" id="2239838">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239842">return</span>&nbsp;<span class="op" id="2239849">-</span><span class="ident" id="2239850">int64</span><span class="op" id="2239855">(</span><span class="ident" id="2239856">cutoff</span><span class="op" id="2239862">)</span><span class="op" id="2239863">,</span>&nbsp;<span class="ident" id="2239865">rangeError</span><span class="op" id="2239875">(</span><span class="ident" id="2239876">fnParseInt</span><span class="op" id="2239886">,</span>&nbsp;<span class="ident" id="2239888">s0</span><span class="op" id="2239890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239896">n</span>&nbsp;<span class="op" id="2239898">:=</span>&nbsp;<span class="ident" id="2239901">int64</span><span class="op" id="2239906">(</span><span class="ident" id="2239907">un</span><span class="op" id="2239909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239912">if</span>&nbsp;<span class="ident" id="2239915">neg</span>&nbsp;<span class="op" id="2239919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2239923">n</span>&nbsp;<span class="op" id="2239925">=</span>&nbsp;<span class="op" id="2239927">-</span><span class="ident" id="2239928">n</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2239931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2239934">return</span>&nbsp;<span class="ident" id="2239941">n</span><span class="op" id="2239942">,</span>&nbsp;<span class="ident" id="2239944">nil</span><br>
<span class="lineno"></span><span class="op" id="2239948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2239951">//&nbsp;Atoi&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;ParseInt(s,&nbsp;10,&nbsp;0).</span><br>
<span class="lineno">195</span><span class="keyword" id="2239996">func</span>&nbsp;<span class="ident" id="2240001">Atoi</span><span class="op" id="2240005">(</span><span class="ident" id="2240006">s</span>&nbsp;<span class="builtintype" id="2240008">string</span><span class="op" id="2240014">)</span>&nbsp;<span class="op" id="2240016">(</span><span class="ident" id="2240017">i</span>&nbsp;<span class="builtintype" id="2240019">int</span><span class="op" id="2240022">,</span>&nbsp;<span class="ident" id="2240024">err</span>&nbsp;<span class="builtintype" id="2240028">error</span><span class="op" id="2240033">)</span>&nbsp;<span class="op" id="2240035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2240038">i64</span><span class="op" id="2240041">,</span>&nbsp;<span class="ident" id="2240043">err</span>&nbsp;<span class="op" id="2240047">:=</span>&nbsp;<span class="ident" id="2240050">ParseInt</span><span class="op" id="2240058">(</span><span class="ident" id="2240059">s</span><span class="op" id="2240060">,</span>&nbsp;<span class="num" id="2240062">10</span><span class="op" id="2240064">,</span>&nbsp;<span class="num" id="2240066">0</span><span class="op" id="2240067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2240070">return</span>&nbsp;<span class="builtintype" id="2240077">int</span><span class="op" id="2240080">(</span><span class="ident" id="2240081">i64</span><span class="op" id="2240084">)</span><span class="op" id="2240085">,</span>&nbsp;<span class="ident" id="2240087">err</span><br>
<span class="lineno"></span><span class="op" id="2240091">}</span>
</div>
</body>
</html>
