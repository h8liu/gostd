<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7313944">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7314000">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7314054">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7314105">package</span>&nbsp;<span class="ident" id="7314113">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7314119">import</span>&nbsp;<span class="op" id="7314126">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314129">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314138">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314147">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314154">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314160">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314171">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314182">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314193">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7314203">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7314206">type</span>&nbsp;<span class="ident" id="7314211">reqTest</span>&nbsp;<span class="keyword" id="7314219">struct</span>&nbsp;<span class="op" id="7314226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314229">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7314237">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314245">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7314253">*</span><span class="ident" id="7314254">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314263">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7314271">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314279">Trailer</span>&nbsp;<span class="ident" id="7314287">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314295">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7314303">string</span><br>
<span class="lineno"></span><span class="op" id="7314310">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7314313">var</span>&nbsp;<span class="ident" id="7314317">noError</span>&nbsp;<span class="op" id="7314325">=</span>&nbsp;<span class="string" id="7314327">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="7314330">var</span>&nbsp;<span class="ident" id="7314334">noBody</span>&nbsp;<span class="op" id="7314341">=</span>&nbsp;<span class="string" id="7314343">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="7314346">var</span>&nbsp;<span class="ident" id="7314350">noTrailer</span>&nbsp;<span class="ident" id="7314360">Header</span>&nbsp;<span class="op" id="7314367">=</span>&nbsp;<span class="ident" id="7314369">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7314374">var</span>&nbsp;<span class="ident" id="7314378">reqTests</span>&nbsp;<span class="op" id="7314387">=</span>&nbsp;<span class="op" id="7314389">[</span><span class="op" id="7314390">]</span><span class="ident" id="7314391">reqTest</span><span class="op" id="7314398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7314401">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7314465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314469">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7314515">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314520">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="7314551">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314556">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="7314579">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314584">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="7314662">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314667">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="7314705">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314710">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="7314746">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314751">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="7314804">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314809">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="7314831">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314836">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="7314860">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314865">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7314904">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7314909">&#34;abcdef\n???&#34;</span><span class="op" id="7314922">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7314927">&amp;</span><span class="ident" id="7314928">Request</span><span class="op" id="7314935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314940">Method</span><span class="op" id="7314946">:</span>&nbsp;<span class="string" id="7314948">&#34;GET&#34;</span><span class="op" id="7314953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314958">URL</span><span class="op" id="7314961">:</span>&nbsp;<span class="op" id="7314963">&amp;</span><span class="ident" id="7314964">url</span><span class="op" id="7314967">.</span><span class="ident" id="7314968">URL</span><span class="op" id="7314971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314977">Scheme</span><span class="op" id="7314983">:</span>&nbsp;<span class="string" id="7314985">&#34;http&#34;</span><span class="op" id="7314991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7314997">Host</span><span class="op" id="7315001">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7315005">&#34;www.techcrunch.com&#34;</span><span class="op" id="7315025">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315031">Path</span><span class="op" id="7315035">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7315039">&#34;/&#34;</span><span class="op" id="7315042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315047">}</span><span class="op" id="7315048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315053">Proto</span><span class="op" id="7315058">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7315065">&#34;HTTP/1.1&#34;</span><span class="op" id="7315075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315080">ProtoMajor</span><span class="op" id="7315090">:</span>&nbsp;<span class="num" id="7315092">1</span><span class="op" id="7315093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315098">ProtoMinor</span><span class="op" id="7315108">:</span>&nbsp;<span class="num" id="7315110">1</span><span class="op" id="7315111">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315116">Header</span><span class="op" id="7315122">:</span>&nbsp;<span class="ident" id="7315124">Header</span><span class="op" id="7315130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315136">&#34;Accept&#34;</span><span class="op" id="7315144">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315156">{</span><span class="string" id="7315157">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="7315222">}</span><span class="op" id="7315223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315229">&#34;Accept-Language&#34;</span><span class="op" id="7315246">:</span>&nbsp;&nbsp;<span class="op" id="7315249">{</span><span class="string" id="7315250">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="7315266">}</span><span class="op" id="7315267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315273">&#34;Accept-Encoding&#34;</span><span class="op" id="7315290">:</span>&nbsp;&nbsp;<span class="op" id="7315293">{</span><span class="string" id="7315294">&#34;gzip,deflate&#34;</span><span class="op" id="7315308">}</span><span class="op" id="7315309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315315">&#34;Accept-Charset&#34;</span><span class="op" id="7315331">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7315335">{</span><span class="string" id="7315336">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="7315368">}</span><span class="op" id="7315369">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315375">&#34;Keep-Alive&#34;</span><span class="op" id="7315387">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315395">{</span><span class="string" id="7315396">&#34;300&#34;</span><span class="op" id="7315401">}</span><span class="op" id="7315402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315408">&#34;Proxy-Connection&#34;</span><span class="op" id="7315426">:</span>&nbsp;<span class="op" id="7315428">{</span><span class="string" id="7315429">&#34;keep-alive&#34;</span><span class="op" id="7315441">}</span><span class="op" id="7315442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315448">&#34;Content-Length&#34;</span><span class="op" id="7315464">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7315468">{</span><span class="string" id="7315469">&#34;7&#34;</span><span class="op" id="7315472">}</span><span class="op" id="7315473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315479">&#34;User-Agent&#34;</span><span class="op" id="7315491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7315499">{</span><span class="string" id="7315500">&#34;Fake&#34;</span><span class="op" id="7315506">}</span><span class="op" id="7315507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315512">}</span><span class="op" id="7315513">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315518">Close</span><span class="op" id="7315523">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7315533">false</span><span class="op" id="7315538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315543">ContentLength</span><span class="op" id="7315556">:</span>&nbsp;<span class="num" id="7315558">7</span><span class="op" id="7315559">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315564">Host</span><span class="op" id="7315568">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7315579">&#34;www.techcrunch.com&#34;</span><span class="op" id="7315599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315604">RequestURI</span><span class="op" id="7315614">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7315619">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="7315647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315651">}</span><span class="op" id="7315652">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315657">&#34;abcdef\n&#34;</span><span class="op" id="7315667">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315672">noTrailer</span><span class="op" id="7315681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315685">noError</span><span class="op" id="7315692">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315695">}</span><span class="op" id="7315696">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7315700">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315751">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7315772">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7315777">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="7315800">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315805">&amp;</span><span class="ident" id="7315806">Request</span><span class="op" id="7315813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315818">Method</span><span class="op" id="7315824">:</span>&nbsp;<span class="string" id="7315826">&#34;GET&#34;</span><span class="op" id="7315831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315836">URL</span><span class="op" id="7315839">:</span>&nbsp;<span class="op" id="7315841">&amp;</span><span class="ident" id="7315842">url</span><span class="op" id="7315845">.</span><span class="ident" id="7315846">URL</span><span class="op" id="7315849">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315855">Path</span><span class="op" id="7315859">:</span>&nbsp;<span class="string" id="7315861">&#34;/&#34;</span><span class="op" id="7315864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7315869">}</span><span class="op" id="7315870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315875">Proto</span><span class="op" id="7315880">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7315890">&#34;HTTP/1.1&#34;</span><span class="op" id="7315900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315905">ProtoMajor</span><span class="op" id="7315915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7315920">1</span><span class="op" id="7315921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315926">ProtoMinor</span><span class="op" id="7315936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7315941">1</span><span class="op" id="7315942">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315947">Header</span><span class="op" id="7315953">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7315962">Header</span><span class="op" id="7315968">{</span><span class="op" id="7315969">}</span><span class="op" id="7315970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7315975">Close</span><span class="op" id="7315980">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7315990">false</span><span class="op" id="7315995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316000">ContentLength</span><span class="op" id="7316013">:</span>&nbsp;<span class="num" id="7316015">0</span><span class="op" id="7316016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316021">Host</span><span class="op" id="7316025">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7316036">&#34;foo.com&#34;</span><span class="op" id="7316045">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316050">RequestURI</span><span class="op" id="7316060">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7316065">&#34;/&#34;</span><span class="op" id="7316068">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316072">}</span><span class="op" id="7316073">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316078">noBody</span><span class="op" id="7316084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316088">noTrailer</span><span class="op" id="7316097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316101">noError</span><span class="op" id="7316108">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316111">}</span><span class="op" id="7316112">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7316116">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7316171">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316221">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7316225">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7316276">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7316281">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7316301">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316306">&amp;</span><span class="ident" id="7316307">Request</span><span class="op" id="7316314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316319">Method</span><span class="op" id="7316325">:</span>&nbsp;<span class="string" id="7316327">&#34;GET&#34;</span><span class="op" id="7316332">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316337">URL</span><span class="op" id="7316340">:</span>&nbsp;<span class="op" id="7316342">&amp;</span><span class="ident" id="7316343">url</span><span class="op" id="7316346">.</span><span class="ident" id="7316347">URL</span><span class="op" id="7316350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316356">Path</span><span class="op" id="7316360">:</span>&nbsp;<span class="string" id="7316362">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="7316395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316400">}</span><span class="op" id="7316401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316406">Proto</span><span class="op" id="7316411">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7316421">&#34;HTTP/1.1&#34;</span><span class="op" id="7316431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316436">ProtoMajor</span><span class="op" id="7316446">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7316451">1</span><span class="op" id="7316452">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316457">ProtoMinor</span><span class="op" id="7316467">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7316472">1</span><span class="op" id="7316473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316478">Header</span><span class="op" id="7316484">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7316493">Header</span><span class="op" id="7316499">{</span><span class="op" id="7316500">}</span><span class="op" id="7316501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316506">Close</span><span class="op" id="7316511">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7316521">false</span><span class="op" id="7316526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316531">ContentLength</span><span class="op" id="7316544">:</span>&nbsp;<span class="num" id="7316546">0</span><span class="op" id="7316547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316552">Host</span><span class="op" id="7316556">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7316567">&#34;test&#34;</span><span class="op" id="7316573">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316578">RequestURI</span><span class="op" id="7316588">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7316593">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="7316626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316630">}</span><span class="op" id="7316631">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316636">noBody</span><span class="op" id="7316642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316646">noTrailer</span><span class="op" id="7316655">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316659">noError</span><span class="op" id="7316666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316669">}</span><span class="op" id="7316670">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7316674">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316746">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7316750">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7316792">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7316797">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7316817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316821">nil</span><span class="op" id="7316824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316828">noBody</span><span class="op" id="7316834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316838">noTrailer</span><span class="op" id="7316847">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7316851">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="7316906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316909">}</span><span class="op" id="7316910">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7316914">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7316937">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7316941">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7316961">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7316966">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7316986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316990">nil</span><span class="op" id="7316993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7316997">noBody</span><span class="op" id="7317003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317007">noTrailer</span><span class="op" id="7317016">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317020">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="7317039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317042">}</span><span class="op" id="7317043">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7317047">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317084">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317088">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7317110">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317115">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="7317135">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317140">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7317177">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317182">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="7317197">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317202">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="7317217">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317222">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7317230">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317235">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="7317268">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317273">&#34;\r\n&#34;</span><span class="op" id="7317279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317283">&amp;</span><span class="ident" id="7317284">Request</span><span class="op" id="7317291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317296">Method</span><span class="op" id="7317302">:</span>&nbsp;<span class="string" id="7317304">&#34;POST&#34;</span><span class="op" id="7317310">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317315">URL</span><span class="op" id="7317318">:</span>&nbsp;<span class="op" id="7317320">&amp;</span><span class="ident" id="7317321">url</span><span class="op" id="7317324">.</span><span class="ident" id="7317325">URL</span><span class="op" id="7317328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317334">Path</span><span class="op" id="7317338">:</span>&nbsp;<span class="string" id="7317340">&#34;/&#34;</span><span class="op" id="7317343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317348">}</span><span class="op" id="7317349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317354">TransferEncoding</span><span class="op" id="7317370">:</span>&nbsp;<span class="op" id="7317372">[</span><span class="op" id="7317373">]</span><span class="builtintype" id="7317374">string</span><span class="op" id="7317380">{</span><span class="string" id="7317381">&#34;chunked&#34;</span><span class="op" id="7317390">}</span><span class="op" id="7317391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317396">Proto</span><span class="op" id="7317401">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7317414">&#34;HTTP/1.1&#34;</span><span class="op" id="7317424">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317429">ProtoMajor</span><span class="op" id="7317439">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7317447">1</span><span class="op" id="7317448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317453">ProtoMinor</span><span class="op" id="7317463">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7317471">1</span><span class="op" id="7317472">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317477">Header</span><span class="op" id="7317483">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7317495">Header</span><span class="op" id="7317501">{</span><span class="op" id="7317502">}</span><span class="op" id="7317503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317508">ContentLength</span><span class="op" id="7317521">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7317526">-</span><span class="num" id="7317527">1</span><span class="op" id="7317528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317533">Host</span><span class="op" id="7317537">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7317551">&#34;foo.com&#34;</span><span class="op" id="7317560">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317565">RequestURI</span><span class="op" id="7317575">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7317583">&#34;/&#34;</span><span class="op" id="7317586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317590">}</span><span class="op" id="7317591">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317596">&#34;foobar&#34;</span><span class="op" id="7317604">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317608">Header</span><span class="op" id="7317614">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317619">&#34;Trailer-Key&#34;</span><span class="op" id="7317632">:</span>&nbsp;<span class="op" id="7317634">{</span><span class="string" id="7317635">&#34;Trailer-Value&#34;</span><span class="op" id="7317650">}</span><span class="op" id="7317651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317655">}</span><span class="op" id="7317656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317660">noError</span><span class="op" id="7317667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317670">}</span><span class="op" id="7317671">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7317675">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7317717">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7317762">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317767">&amp;</span><span class="ident" id="7317768">Request</span><span class="op" id="7317775">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317780">Method</span><span class="op" id="7317786">:</span>&nbsp;<span class="string" id="7317788">&#34;CONNECT&#34;</span><span class="op" id="7317797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317802">URL</span><span class="op" id="7317805">:</span>&nbsp;<span class="op" id="7317807">&amp;</span><span class="ident" id="7317808">url</span><span class="op" id="7317811">.</span><span class="ident" id="7317812">URL</span><span class="op" id="7317815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317821">Host</span><span class="op" id="7317825">:</span>&nbsp;<span class="string" id="7317827">&#34;www.google.com:443&#34;</span><span class="op" id="7317847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7317852">}</span><span class="op" id="7317853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317858">Proto</span><span class="op" id="7317863">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7317873">&#34;HTTP/1.1&#34;</span><span class="op" id="7317883">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317888">ProtoMajor</span><span class="op" id="7317898">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7317903">1</span><span class="op" id="7317904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317909">ProtoMinor</span><span class="op" id="7317919">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7317924">1</span><span class="op" id="7317925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317930">Header</span><span class="op" id="7317936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7317945">Header</span><span class="op" id="7317951">{</span><span class="op" id="7317952">}</span><span class="op" id="7317953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317958">Close</span><span class="op" id="7317963">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7317973">false</span><span class="op" id="7317978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7317983">ContentLength</span><span class="op" id="7317996">:</span>&nbsp;<span class="num" id="7317998">0</span><span class="op" id="7317999">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318004">Host</span><span class="op" id="7318008">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7318019">&#34;www.google.com:443&#34;</span><span class="op" id="7318039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318044">RequestURI</span><span class="op" id="7318054">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7318059">&#34;www.google.com:443&#34;</span><span class="op" id="7318079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318083">}</span><span class="op" id="7318084">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318089">noBody</span><span class="op" id="7318095">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318099">noTrailer</span><span class="op" id="7318108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318112">noError</span><span class="op" id="7318119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318122">}</span><span class="op" id="7318123">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7318127">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7318168">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7318209">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318214">&amp;</span><span class="ident" id="7318215">Request</span><span class="op" id="7318222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318227">Method</span><span class="op" id="7318233">:</span>&nbsp;<span class="string" id="7318235">&#34;CONNECT&#34;</span><span class="op" id="7318244">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318249">URL</span><span class="op" id="7318252">:</span>&nbsp;<span class="op" id="7318254">&amp;</span><span class="ident" id="7318255">url</span><span class="op" id="7318258">.</span><span class="ident" id="7318259">URL</span><span class="op" id="7318262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318268">Host</span><span class="op" id="7318272">:</span>&nbsp;<span class="string" id="7318274">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7318290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318295">}</span><span class="op" id="7318296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318301">Proto</span><span class="op" id="7318306">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7318316">&#34;HTTP/1.1&#34;</span><span class="op" id="7318326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318331">ProtoMajor</span><span class="op" id="7318341">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7318346">1</span><span class="op" id="7318347">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318352">ProtoMinor</span><span class="op" id="7318362">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7318367">1</span><span class="op" id="7318368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318373">Header</span><span class="op" id="7318379">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7318388">Header</span><span class="op" id="7318394">{</span><span class="op" id="7318395">}</span><span class="op" id="7318396">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318401">Close</span><span class="op" id="7318406">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7318416">false</span><span class="op" id="7318421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318426">ContentLength</span><span class="op" id="7318439">:</span>&nbsp;<span class="num" id="7318441">0</span><span class="op" id="7318442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318447">Host</span><span class="op" id="7318451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7318462">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7318478">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318483">RequestURI</span><span class="op" id="7318493">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7318498">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7318514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318518">}</span><span class="op" id="7318519">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318524">noBody</span><span class="op" id="7318530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318534">noTrailer</span><span class="op" id="7318543">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318547">noError</span><span class="op" id="7318554">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318557">}</span><span class="op" id="7318558">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7318562">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318591">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7318595">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7318630">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318635">&amp;</span><span class="ident" id="7318636">Request</span><span class="op" id="7318643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318648">Method</span><span class="op" id="7318654">:</span>&nbsp;<span class="string" id="7318656">&#34;CONNECT&#34;</span><span class="op" id="7318665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318670">URL</span><span class="op" id="7318673">:</span>&nbsp;<span class="op" id="7318675">&amp;</span><span class="ident" id="7318676">url</span><span class="op" id="7318679">.</span><span class="ident" id="7318680">URL</span><span class="op" id="7318683">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318689">Path</span><span class="op" id="7318693">:</span>&nbsp;<span class="string" id="7318695">&#34;/_goRPC_&#34;</span><span class="op" id="7318705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318710">}</span><span class="op" id="7318711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318716">Proto</span><span class="op" id="7318721">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7318731">&#34;HTTP/1.1&#34;</span><span class="op" id="7318741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318746">ProtoMajor</span><span class="op" id="7318756">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7318761">1</span><span class="op" id="7318762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318767">ProtoMinor</span><span class="op" id="7318777">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7318782">1</span><span class="op" id="7318783">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318788">Header</span><span class="op" id="7318794">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7318803">Header</span><span class="op" id="7318809">{</span><span class="op" id="7318810">}</span><span class="op" id="7318811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318816">Close</span><span class="op" id="7318821">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7318831">false</span><span class="op" id="7318836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318841">ContentLength</span><span class="op" id="7318854">:</span>&nbsp;<span class="num" id="7318856">0</span><span class="op" id="7318857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318862">Host</span><span class="op" id="7318866">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7318877">&#34;&#34;</span><span class="op" id="7318879">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318884">RequestURI</span><span class="op" id="7318894">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7318899">&#34;/_goRPC_&#34;</span><span class="op" id="7318909">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318913">}</span><span class="op" id="7318914">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318919">noBody</span><span class="op" id="7318925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318929">noTrailer</span><span class="op" id="7318938">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7318942">noError</span><span class="op" id="7318949">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7318952">}</span><span class="op" id="7318953">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7318957">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319008">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="7319050">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319054">&amp;</span><span class="ident" id="7319055">Request</span><span class="op" id="7319062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319067">Method</span><span class="op" id="7319073">:</span>&nbsp;<span class="string" id="7319075">&#34;NOTIFY&#34;</span><span class="op" id="7319083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319088">URL</span><span class="op" id="7319091">:</span>&nbsp;<span class="op" id="7319093">&amp;</span><span class="ident" id="7319094">url</span><span class="op" id="7319097">.</span><span class="ident" id="7319098">URL</span><span class="op" id="7319101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319107">Path</span><span class="op" id="7319111">:</span>&nbsp;<span class="string" id="7319113">&#34;*&#34;</span><span class="op" id="7319116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319121">}</span><span class="op" id="7319122">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319127">Proto</span><span class="op" id="7319132">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7319139">&#34;HTTP/1.1&#34;</span><span class="op" id="7319149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319154">ProtoMajor</span><span class="op" id="7319164">:</span>&nbsp;<span class="num" id="7319166">1</span><span class="op" id="7319167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319172">ProtoMinor</span><span class="op" id="7319182">:</span>&nbsp;<span class="num" id="7319184">1</span><span class="op" id="7319185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319190">Header</span><span class="op" id="7319196">:</span>&nbsp;<span class="ident" id="7319198">Header</span><span class="op" id="7319204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319210">&#34;Server&#34;</span><span class="op" id="7319218">:</span>&nbsp;<span class="op" id="7319220">[</span><span class="op" id="7319221">]</span><span class="builtintype" id="7319222">string</span><span class="op" id="7319228">{</span><span class="string" id="7319229">&#34;foo&#34;</span><span class="op" id="7319234">}</span><span class="op" id="7319235">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319240">}</span><span class="op" id="7319241">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319246">Close</span><span class="op" id="7319251">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7319261">false</span><span class="op" id="7319266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319271">ContentLength</span><span class="op" id="7319284">:</span>&nbsp;<span class="num" id="7319286">0</span><span class="op" id="7319287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319292">RequestURI</span><span class="op" id="7319302">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7319307">&#34;*&#34;</span><span class="op" id="7319310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319314">}</span><span class="op" id="7319315">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319320">noBody</span><span class="op" id="7319326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319330">noTrailer</span><span class="op" id="7319339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319343">noError</span><span class="op" id="7319350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319353">}</span><span class="op" id="7319354">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7319358">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319416">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="7319459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319463">&amp;</span><span class="ident" id="7319464">Request</span><span class="op" id="7319471">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319476">Method</span><span class="op" id="7319482">:</span>&nbsp;<span class="string" id="7319484">&#34;OPTIONS&#34;</span><span class="op" id="7319493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319498">URL</span><span class="op" id="7319501">:</span>&nbsp;<span class="op" id="7319503">&amp;</span><span class="ident" id="7319504">url</span><span class="op" id="7319507">.</span><span class="ident" id="7319508">URL</span><span class="op" id="7319511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319517">Path</span><span class="op" id="7319521">:</span>&nbsp;<span class="string" id="7319523">&#34;*&#34;</span><span class="op" id="7319526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319531">}</span><span class="op" id="7319532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319537">Proto</span><span class="op" id="7319542">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7319549">&#34;HTTP/1.1&#34;</span><span class="op" id="7319559">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319564">ProtoMajor</span><span class="op" id="7319574">:</span>&nbsp;<span class="num" id="7319576">1</span><span class="op" id="7319577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319582">ProtoMinor</span><span class="op" id="7319592">:</span>&nbsp;<span class="num" id="7319594">1</span><span class="op" id="7319595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319600">Header</span><span class="op" id="7319606">:</span>&nbsp;<span class="ident" id="7319608">Header</span><span class="op" id="7319614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319620">&#34;Server&#34;</span><span class="op" id="7319628">:</span>&nbsp;<span class="op" id="7319630">[</span><span class="op" id="7319631">]</span><span class="builtintype" id="7319632">string</span><span class="op" id="7319638">{</span><span class="string" id="7319639">&#34;foo&#34;</span><span class="op" id="7319644">}</span><span class="op" id="7319645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319650">}</span><span class="op" id="7319651">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319656">Close</span><span class="op" id="7319661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7319671">false</span><span class="op" id="7319676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319681">ContentLength</span><span class="op" id="7319694">:</span>&nbsp;<span class="num" id="7319696">0</span><span class="op" id="7319697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319702">RequestURI</span><span class="op" id="7319712">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7319717">&#34;*&#34;</span><span class="op" id="7319720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319724">}</span><span class="op" id="7319725">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319730">noBody</span><span class="op" id="7319736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319740">noTrailer</span><span class="op" id="7319749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319753">noError</span><span class="op" id="7319760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319763">}</span><span class="op" id="7319764">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7319768">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7319817">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="7319885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319889">&amp;</span><span class="ident" id="7319890">Request</span><span class="op" id="7319897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319902">Method</span><span class="op" id="7319908">:</span>&nbsp;<span class="string" id="7319910">&#34;GET&#34;</span><span class="op" id="7319915">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319920">URL</span><span class="op" id="7319923">:</span>&nbsp;<span class="op" id="7319925">&amp;</span><span class="ident" id="7319926">url</span><span class="op" id="7319929">.</span><span class="ident" id="7319930">URL</span><span class="op" id="7319933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319939">Path</span><span class="op" id="7319943">:</span>&nbsp;<span class="string" id="7319945">&#34;/&#34;</span><span class="op" id="7319948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7319953">}</span><span class="op" id="7319954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7319959">Header</span><span class="op" id="7319965">:</span>&nbsp;<span class="ident" id="7319967">Header</span><span class="op" id="7319973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7319979">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7320021">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7320061">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7320079">&#34;Connection&#34;</span><span class="op" id="7320091">:</span>&nbsp;<span class="op" id="7320093">[</span><span class="op" id="7320094">]</span><span class="builtintype" id="7320095">string</span><span class="op" id="7320101">{</span><span class="string" id="7320102">&#34;close&#34;</span><span class="op" id="7320109">}</span><span class="op" id="7320110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320115">}</span><span class="op" id="7320116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320121">Host</span><span class="op" id="7320125">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7320133">&#34;issue8261.com&#34;</span><span class="op" id="7320148">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320153">Proto</span><span class="op" id="7320158">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7320165">&#34;HTTP/1.1&#34;</span><span class="op" id="7320175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320180">ProtoMajor</span><span class="op" id="7320190">:</span>&nbsp;<span class="num" id="7320192">1</span><span class="op" id="7320193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320198">ProtoMinor</span><span class="op" id="7320208">:</span>&nbsp;<span class="num" id="7320210">1</span><span class="op" id="7320211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320216">Close</span><span class="op" id="7320221">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7320228">true</span><span class="op" id="7320232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320237">RequestURI</span><span class="op" id="7320247">:</span>&nbsp;<span class="string" id="7320249">&#34;/&#34;</span><span class="op" id="7320252">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320256">}</span><span class="op" id="7320257">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320262">noBody</span><span class="op" id="7320268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320272">noTrailer</span><span class="op" id="7320281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320285">noError</span><span class="op" id="7320292">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320295">}</span><span class="op" id="7320296">,</span><br>
<span class="lineno"></span><span class="op" id="7320298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7320301">func</span>&nbsp;<span class="ident" id="7320306">TestReadRequest</span><span class="op" id="7320321">(</span><span class="ident" id="7320322">t</span>&nbsp;<span class="op" id="7320324">*</span><span class="ident" id="7320325">testing</span><span class="op" id="7320332">.</span><span class="ident" id="7320333">T</span><span class="op" id="7320334">)</span>&nbsp;<span class="op" id="7320336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320339">for</span>&nbsp;<span class="ident" id="7320343">i</span>&nbsp;<span class="op" id="7320345">:=</span>&nbsp;<span class="keyword" id="7320348">range</span>&nbsp;<span class="ident" id="7320354">reqTests</span>&nbsp;<span class="op" id="7320363">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320367">tt</span>&nbsp;<span class="op" id="7320370">:=</span>&nbsp;<span class="op" id="7320373">&amp;</span><span class="ident" id="7320374">reqTests</span><span class="op" id="7320382">[</span><span class="ident" id="7320383">i</span><span class="op" id="7320384">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320388">req</span><span class="op" id="7320391">,</span>&nbsp;<span class="ident" id="7320393">err</span>&nbsp;<span class="op" id="7320397">:=</span>&nbsp;<span class="ident" id="7320400">ReadRequest</span><span class="op" id="7320411">(</span><span class="ident" id="7320412">bufio</span><span class="op" id="7320417">.</span><span class="ident" id="7320418">NewReader</span><span class="op" id="7320427">(</span><span class="ident" id="7320428">strings</span><span class="op" id="7320435">.</span><span class="ident" id="7320436">NewReader</span><span class="op" id="7320445">(</span><span class="ident" id="7320446">tt</span><span class="op" id="7320448">.</span><span class="ident" id="7320449">Raw</span><span class="op" id="7320452">)</span><span class="op" id="7320453">)</span><span class="op" id="7320454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320458">if</span>&nbsp;<span class="ident" id="7320461">err</span>&nbsp;<span class="op" id="7320465">!=</span>&nbsp;<span class="ident" id="7320468">nil</span>&nbsp;<span class="op" id="7320472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320477">if</span>&nbsp;<span class="ident" id="7320480">err</span><span class="op" id="7320483">.</span><span class="ident" id="7320484">Error</span><span class="op" id="7320489">(</span><span class="op" id="7320490">)</span>&nbsp;<span class="op" id="7320492">!=</span>&nbsp;<span class="ident" id="7320495">tt</span><span class="op" id="7320497">.</span><span class="ident" id="7320498">Error</span>&nbsp;<span class="op" id="7320504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320510">t</span><span class="op" id="7320511">.</span><span class="ident" id="7320512">Errorf</span><span class="op" id="7320518">(</span><span class="string" id="7320519">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="7320549">,</span>&nbsp;<span class="ident" id="7320551">i</span><span class="op" id="7320552">,</span>&nbsp;<span class="ident" id="7320554">err</span><span class="op" id="7320557">.</span><span class="ident" id="7320558">Error</span><span class="op" id="7320563">(</span><span class="op" id="7320564">)</span><span class="op" id="7320565">,</span>&nbsp;<span class="ident" id="7320567">tt</span><span class="op" id="7320569">.</span><span class="ident" id="7320570">Error</span><span class="op" id="7320575">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320585">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320600">rbody</span>&nbsp;<span class="op" id="7320606">:=</span>&nbsp;<span class="ident" id="7320609">req</span><span class="op" id="7320612">.</span><span class="ident" id="7320613">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320620">req</span><span class="op" id="7320623">.</span><span class="ident" id="7320624">Body</span>&nbsp;<span class="op" id="7320629">=</span>&nbsp;<span class="ident" id="7320631">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320637">testName</span>&nbsp;<span class="op" id="7320646">:=</span>&nbsp;<span class="ident" id="7320649">fmt</span><span class="op" id="7320652">.</span><span class="ident" id="7320653">Sprintf</span><span class="op" id="7320660">(</span><span class="string" id="7320661">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="7320675">,</span>&nbsp;<span class="ident" id="7320677">i</span><span class="op" id="7320678">,</span>&nbsp;<span class="ident" id="7320680">tt</span><span class="op" id="7320682">.</span><span class="ident" id="7320683">Raw</span><span class="op" id="7320686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320690">diff</span><span class="op" id="7320694">(</span><span class="ident" id="7320695">t</span><span class="op" id="7320696">,</span>&nbsp;<span class="ident" id="7320698">testName</span><span class="op" id="7320706">,</span>&nbsp;<span class="ident" id="7320708">req</span><span class="op" id="7320711">,</span>&nbsp;<span class="ident" id="7320713">tt</span><span class="op" id="7320715">.</span><span class="ident" id="7320716">Req</span><span class="op" id="7320719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320723">var</span>&nbsp;<span class="ident" id="7320727">bout</span>&nbsp;<span class="ident" id="7320732">bytes</span><span class="op" id="7320737">.</span><span class="ident" id="7320738">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320747">if</span>&nbsp;<span class="ident" id="7320750">rbody</span>&nbsp;<span class="op" id="7320756">!=</span>&nbsp;<span class="ident" id="7320759">nil</span>&nbsp;<span class="op" id="7320763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320768">_</span><span class="op" id="7320769">,</span>&nbsp;<span class="ident" id="7320771">err</span>&nbsp;<span class="op" id="7320775">:=</span>&nbsp;<span class="ident" id="7320778">io</span><span class="op" id="7320780">.</span><span class="ident" id="7320781">Copy</span><span class="op" id="7320785">(</span><span class="op" id="7320786">&amp;</span><span class="ident" id="7320787">bout</span><span class="op" id="7320791">,</span>&nbsp;<span class="ident" id="7320793">rbody</span><span class="op" id="7320798">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320803">if</span>&nbsp;<span class="ident" id="7320806">err</span>&nbsp;<span class="op" id="7320810">!=</span>&nbsp;<span class="ident" id="7320813">nil</span>&nbsp;<span class="op" id="7320817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320823">t</span><span class="op" id="7320824">.</span><span class="ident" id="7320825">Fatalf</span><span class="op" id="7320831">(</span><span class="string" id="7320832">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="7320854">,</span>&nbsp;<span class="ident" id="7320856">testName</span><span class="op" id="7320864">,</span>&nbsp;<span class="ident" id="7320866">err</span><span class="op" id="7320869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320879">rbody</span><span class="op" id="7320884">.</span><span class="ident" id="7320885">Close</span><span class="op" id="7320890">(</span><span class="op" id="7320891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7320895">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320899">body</span>&nbsp;<span class="op" id="7320904">:=</span>&nbsp;<span class="ident" id="7320907">bout</span><span class="op" id="7320911">.</span><span class="ident" id="7320912">String</span><span class="op" id="7320918">(</span><span class="op" id="7320919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7320923">if</span>&nbsp;<span class="ident" id="7320926">body</span>&nbsp;<span class="op" id="7320931">!=</span>&nbsp;<span class="ident" id="7320934">tt</span><span class="op" id="7320936">.</span><span class="ident" id="7320937">Body</span>&nbsp;<span class="op" id="7320942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7320947">t</span><span class="op" id="7320948">.</span><span class="ident" id="7320949">Errorf</span><span class="op" id="7320955">(</span><span class="string" id="7320956">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7320979">,</span>&nbsp;<span class="ident" id="7320981">testName</span><span class="op" id="7320989">,</span>&nbsp;<span class="ident" id="7320991">body</span><span class="op" id="7320995">,</span>&nbsp;<span class="ident" id="7320997">tt</span><span class="op" id="7320999">.</span><span class="ident" id="7321000">Body</span><span class="op" id="7321004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7321012">if</span>&nbsp;<span class="op" id="7321015">!</span><span class="ident" id="7321016">reflect</span><span class="op" id="7321023">.</span><span class="ident" id="7321024">DeepEqual</span><span class="op" id="7321033">(</span><span class="ident" id="7321034">tt</span><span class="op" id="7321036">.</span><span class="ident" id="7321037">Trailer</span><span class="op" id="7321044">,</span>&nbsp;<span class="ident" id="7321046">req</span><span class="op" id="7321049">.</span><span class="ident" id="7321050">Trailer</span><span class="op" id="7321057">)</span>&nbsp;<span class="op" id="7321059">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7321064">t</span><span class="op" id="7321065">.</span><span class="ident" id="7321066">Errorf</span><span class="op" id="7321072">(</span><span class="string" id="7321073">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7321115">,</span>&nbsp;<span class="ident" id="7321117">testName</span><span class="op" id="7321125">,</span>&nbsp;<span class="ident" id="7321127">req</span><span class="op" id="7321130">.</span><span class="ident" id="7321131">Trailer</span><span class="op" id="7321138">,</span>&nbsp;<span class="ident" id="7321140">tt</span><span class="op" id="7321142">.</span><span class="ident" id="7321143">Trailer</span><span class="op" id="7321150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7321157">}</span><br>
<span class="lineno"></span><span class="op" id="7321159">}</span>
</div>
</body>
</html>
