<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>regexp</h2>
<ul>
<li><a href="/gostd/regexp/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/regexp/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/regexp/exec.go.html">exec.go</a></li>
<li><a href="/gostd/regexp/exec2_test.go.html">exec2_test.go</a></li>
<li><a href="/gostd/regexp/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/regexp/find_test.go.html">find_test.go</a></li>
<li><a href="/gostd/regexp/onepass.go.html">onepass.go</a></li>
<li><a href="/gostd/regexp/onepass_test.go.html">onepass_test.go</a></li>
<li><a href="/gostd/regexp/regexp.go.html" class="current">regexp.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3563729">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3563784">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3563838">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3563889">//&nbsp;Package&nbsp;regexp&nbsp;implements&nbsp;regular&nbsp;expression&nbsp;search.</span><br>
<span class="lineno"></span><span class="comment" id="3563945">//</span><br>
<span class="lineno"></span><span class="comment" id="3563948">//&nbsp;The&nbsp;syntax&nbsp;of&nbsp;the&nbsp;regular&nbsp;expressions&nbsp;accepted&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="3564010">//&nbsp;general&nbsp;syntax&nbsp;used&nbsp;by&nbsp;Perl,&nbsp;Python,&nbsp;and&nbsp;other&nbsp;languages.</span><br>
<span class="lineno"></span><span class="comment" id="3564071">//&nbsp;More&nbsp;precisely,&nbsp;it&nbsp;is&nbsp;the&nbsp;syntax&nbsp;accepted&nbsp;by&nbsp;RE2&nbsp;and&nbsp;described&nbsp;at</span><br>
<span class="lineno">10</span><span class="comment" id="3564140">//&nbsp;http://code.google.com/p/re2/wiki/Syntax,&nbsp;except&nbsp;for&nbsp;\C.</span><br>
<span class="lineno"></span><span class="comment" id="3564200">//&nbsp;For&nbsp;an&nbsp;overview&nbsp;of&nbsp;the&nbsp;syntax,&nbsp;run</span><br>
<span class="lineno"></span><span class="comment" id="3564238">//&nbsp;&nbsp;&nbsp;godoc&nbsp;regexp/syntax</span><br>
<span class="lineno"></span><span class="comment" id="3564263">//</span><br>
<span class="lineno"></span><span class="comment" id="3564266">//&nbsp;The&nbsp;regexp&nbsp;implementation&nbsp;provided&nbsp;by&nbsp;this&nbsp;package&nbsp;is</span><br>
<span class="lineno">15</span><span class="comment" id="3564323">//&nbsp;guaranteed&nbsp;to&nbsp;run&nbsp;in&nbsp;time&nbsp;linear&nbsp;in&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="3564385">//&nbsp;(This&nbsp;is&nbsp;a&nbsp;property&nbsp;not&nbsp;guaranteed&nbsp;by&nbsp;most&nbsp;open&nbsp;source</span><br>
<span class="lineno"></span><span class="comment" id="3564443">//&nbsp;implementations&nbsp;of&nbsp;regular&nbsp;expressions.)&nbsp;For&nbsp;more&nbsp;information</span><br>
<span class="lineno"></span><span class="comment" id="3564508">//&nbsp;about&nbsp;this&nbsp;property,&nbsp;see</span><br>
<span class="lineno"></span><span class="comment" id="3564536">//&nbsp;&nbsp;&nbsp;&nbsp;http://swtch.com/~rsc/regexp/regexp1.html</span><br>
<span class="lineno">20</span><span class="comment" id="3564581">//&nbsp;or&nbsp;any&nbsp;book&nbsp;about&nbsp;automata&nbsp;theory.</span><br>
<span class="lineno"></span><span class="comment" id="3564619">//</span><br>
<span class="lineno"></span><span class="comment" id="3564622">//&nbsp;All&nbsp;characters&nbsp;are&nbsp;UTF-8-encoded&nbsp;code&nbsp;points.</span><br>
<span class="lineno"></span><span class="comment" id="3564671">//</span><br>
<span class="lineno"></span><span class="comment" id="3564674">//&nbsp;There&nbsp;are&nbsp;16&nbsp;methods&nbsp;of&nbsp;Regexp&nbsp;that&nbsp;match&nbsp;a&nbsp;regular&nbsp;expression&nbsp;and&nbsp;identify</span><br>
<span class="lineno">25</span><span class="comment" id="3564753">//&nbsp;the&nbsp;matched&nbsp;text.&nbsp;&nbsp;Their&nbsp;names&nbsp;are&nbsp;matched&nbsp;by&nbsp;this&nbsp;regular&nbsp;expression:</span><br>
<span class="lineno"></span><span class="comment" id="3564827">//</span><br>
<span class="lineno"></span><span class="comment" id="3564830">//&nbsp;&nbsp;&nbsp;&nbsp;Find(All)?(String)?(Submatch)?(Index)?</span><br>
<span class="lineno"></span><span class="comment" id="3564872">//</span><br>
<span class="lineno"></span><span class="comment" id="3564875">//&nbsp;If&nbsp;&#39;All&#39;&nbsp;is&nbsp;present,&nbsp;the&nbsp;routine&nbsp;matches&nbsp;successive&nbsp;non-overlapping</span><br>
<span class="lineno">30</span><span class="comment" id="3564946">//&nbsp;matches&nbsp;of&nbsp;the&nbsp;entire&nbsp;expression.&nbsp;&nbsp;Empty&nbsp;matches&nbsp;abutting&nbsp;a&nbsp;preceding</span><br>
<span class="lineno"></span><span class="comment" id="3565019">//&nbsp;match&nbsp;are&nbsp;ignored.&nbsp;&nbsp;The&nbsp;return&nbsp;value&nbsp;is&nbsp;a&nbsp;slice&nbsp;containing&nbsp;the&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="3565096">//&nbsp;return&nbsp;values&nbsp;of&nbsp;the&nbsp;corresponding&nbsp;non-&#39;All&#39;&nbsp;routine.&nbsp;&nbsp;These&nbsp;routines&nbsp;take</span><br>
<span class="lineno"></span><span class="comment" id="3565174">//&nbsp;an&nbsp;extra&nbsp;integer&nbsp;argument,&nbsp;n;&nbsp;if&nbsp;n&nbsp;&gt;=&nbsp;0,&nbsp;the&nbsp;function&nbsp;returns&nbsp;at&nbsp;most&nbsp;n</span><br>
<span class="lineno"></span><span class="comment" id="3565249">//&nbsp;matches/submatches.</span><br>
<span class="lineno">35</span><span class="comment" id="3565272">//</span><br>
<span class="lineno"></span><span class="comment" id="3565275">//&nbsp;If&nbsp;&#39;String&#39;&nbsp;is&nbsp;present,&nbsp;the&nbsp;argument&nbsp;is&nbsp;a&nbsp;string;&nbsp;otherwise&nbsp;it&nbsp;is&nbsp;a&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="3565352">//&nbsp;of&nbsp;bytes;&nbsp;return&nbsp;values&nbsp;are&nbsp;adjusted&nbsp;as&nbsp;appropriate.</span><br>
<span class="lineno"></span><span class="comment" id="3565408">//</span><br>
<span class="lineno"></span><span class="comment" id="3565411">//&nbsp;If&nbsp;&#39;Submatch&#39;&nbsp;is&nbsp;present,&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;a&nbsp;slice&nbsp;identifying&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="3565484">//&nbsp;successive&nbsp;submatches&nbsp;of&nbsp;the&nbsp;expression.&nbsp;Submatches&nbsp;are&nbsp;matches&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3565554">//&nbsp;parenthesized&nbsp;subexpressions&nbsp;(also&nbsp;known&nbsp;as&nbsp;capturing&nbsp;groups)&nbsp;within&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3565630">//&nbsp;regular&nbsp;expression,&nbsp;numbered&nbsp;from&nbsp;left&nbsp;to&nbsp;right&nbsp;in&nbsp;order&nbsp;of&nbsp;opening</span><br>
<span class="lineno"></span><span class="comment" id="3565701">//&nbsp;parenthesis.&nbsp;Submatch&nbsp;0&nbsp;is&nbsp;the&nbsp;match&nbsp;of&nbsp;the&nbsp;entire&nbsp;expression,&nbsp;submatch&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="3565778">//&nbsp;the&nbsp;match&nbsp;of&nbsp;the&nbsp;first&nbsp;parenthesized&nbsp;subexpression,&nbsp;and&nbsp;so&nbsp;on.</span><br>
<span class="lineno">45</span><span class="comment" id="3565844">//</span><br>
<span class="lineno"></span><span class="comment" id="3565847">//&nbsp;If&nbsp;&#39;Index&#39;&nbsp;is&nbsp;present,&nbsp;matches&nbsp;and&nbsp;submatches&nbsp;are&nbsp;identified&nbsp;by&nbsp;byte&nbsp;index</span><br>
<span class="lineno"></span><span class="comment" id="3565925">//&nbsp;pairs&nbsp;within&nbsp;the&nbsp;input&nbsp;string:&nbsp;result[2*n:2*n+1]&nbsp;identifies&nbsp;the&nbsp;indexes&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3566003">//&nbsp;the&nbsp;nth&nbsp;submatch.&nbsp;&nbsp;The&nbsp;pair&nbsp;for&nbsp;n==0&nbsp;identifies&nbsp;the&nbsp;match&nbsp;of&nbsp;the&nbsp;entire</span><br>
<span class="lineno"></span><span class="comment" id="3566078">//&nbsp;expression.&nbsp;&nbsp;If&nbsp;&#39;Index&#39;&nbsp;is&nbsp;not&nbsp;present,&nbsp;the&nbsp;match&nbsp;is&nbsp;identified&nbsp;by&nbsp;the</span><br>
<span class="lineno">50</span><span class="comment" id="3566152">//&nbsp;text&nbsp;of&nbsp;the&nbsp;match/submatch.&nbsp;&nbsp;If&nbsp;an&nbsp;index&nbsp;is&nbsp;negative,&nbsp;it&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3566223">//&nbsp;subexpression&nbsp;did&nbsp;not&nbsp;match&nbsp;any&nbsp;string&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="3566279">//</span><br>
<span class="lineno"></span><span class="comment" id="3566282">//&nbsp;There&nbsp;is&nbsp;also&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;methods&nbsp;that&nbsp;can&nbsp;be&nbsp;applied&nbsp;to&nbsp;text&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="3566356">//&nbsp;from&nbsp;a&nbsp;RuneReader:</span><br>
<span class="lineno">55</span><span class="comment" id="3566378">//</span><br>
<span class="lineno"></span><span class="comment" id="3566381">//&nbsp;&nbsp;&nbsp;&nbsp;MatchReader,&nbsp;FindReaderIndex,&nbsp;FindReaderSubmatchIndex</span><br>
<span class="lineno"></span><span class="comment" id="3566438">//</span><br>
<span class="lineno"></span><span class="comment" id="3566441">//&nbsp;This&nbsp;set&nbsp;may&nbsp;grow.&nbsp;&nbsp;Note&nbsp;that&nbsp;regular&nbsp;expression&nbsp;matches&nbsp;may&nbsp;need&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3566513">//&nbsp;examine&nbsp;text&nbsp;beyond&nbsp;the&nbsp;text&nbsp;returned&nbsp;by&nbsp;a&nbsp;match,&nbsp;so&nbsp;the&nbsp;methods&nbsp;that</span><br>
<span class="lineno">60</span><span class="comment" id="3566586">//&nbsp;match&nbsp;text&nbsp;from&nbsp;a&nbsp;RuneReader&nbsp;may&nbsp;read&nbsp;arbitrarily&nbsp;far&nbsp;into&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="3566658">//&nbsp;before&nbsp;returning.</span><br>
<span class="lineno"></span><span class="comment" id="3566679">//</span><br>
<span class="lineno"></span><span class="comment" id="3566682">//&nbsp;(There&nbsp;are&nbsp;a&nbsp;few&nbsp;other&nbsp;methods&nbsp;that&nbsp;do&nbsp;not&nbsp;match&nbsp;this&nbsp;pattern.)</span><br>
<span class="lineno"></span><span class="comment" id="3566749">//</span><br>
<span class="lineno">65</span><span class="keyword" id="3566752">package</span>&nbsp;<span class="ident" id="3566760">regexp</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3566768">import</span>&nbsp;<span class="op" id="3566775">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3566778">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3566787">&#34;io&#34;</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3566793">&#34;regexp/syntax&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3566810">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3566821">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3566832">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3566840">&#34;unicode&#34;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3566851">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3566866">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3566869">var</span>&nbsp;<span class="ident" id="3566873">debug</span>&nbsp;<span class="op" id="3566879">=</span>&nbsp;<span class="builtintype" id="3566881">false</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="3566888">//&nbsp;Regexp&nbsp;is&nbsp;the&nbsp;representation&nbsp;of&nbsp;a&nbsp;compiled&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="comment" id="3566954">//&nbsp;A&nbsp;Regexp&nbsp;is&nbsp;safe&nbsp;for&nbsp;concurrent&nbsp;use&nbsp;by&nbsp;multiple&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="keyword" id="3567017">type</span>&nbsp;<span class="ident" id="3567022">Regexp</span>&nbsp;<span class="keyword" id="3567029">struct</span>&nbsp;<span class="op" id="3567036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3567039">//&nbsp;read-only&nbsp;after&nbsp;Compile</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567067">expr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3567082">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3567097">//&nbsp;as&nbsp;passed&nbsp;to&nbsp;Compile</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567122">prog</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3567137">*</span><span class="ident" id="3567138"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3567144">.</span><span class="ident" id="3567145"><a href="/gostd/regexp/syntax/prog.go.html#3659010">Prog</a></span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3567152">//&nbsp;compiled&nbsp;program</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567173">onepass</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3567188">*</span><span class="ident" id="3567189"><a href="/gostd/regexp/onepass.go.html#3548182">onePassProg</a></span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3567203">//&nbsp;onpass&nbsp;program&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567229">prefix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3567244">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3567259">//&nbsp;required&nbsp;prefix&nbsp;in&nbsp;unanchored&nbsp;matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567301">prefixBytes</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3567316">[</span><span class="op" id="3567317">]</span><span class="builtintype" id="3567318">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3567331">//&nbsp;prefix,&nbsp;as&nbsp;a&nbsp;[]byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567355">prefixComplete</span>&nbsp;<span class="builtintype" id="3567370">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3567385">//&nbsp;prefix&nbsp;is&nbsp;the&nbsp;entire&nbsp;regexp</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567417">prefixRune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3567432">rune</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3567447">//&nbsp;first&nbsp;rune&nbsp;in&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567472">prefixEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3567487">uint32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3567502">//&nbsp;pc&nbsp;for&nbsp;last&nbsp;rune&nbsp;in&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567533">cond</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567548"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3567554">.</span><span class="ident" id="3567555"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span>&nbsp;<span class="comment" id="3567563">//&nbsp;empty-width&nbsp;conditions&nbsp;required&nbsp;at&nbsp;start&nbsp;of&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567617">numSubexp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3567632">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567637">subexpNames</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3567652">[</span><span class="op" id="3567653">]</span><span class="builtintype" id="3567654">string</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567662">longest</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3567677">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3567684">//&nbsp;cache&nbsp;of&nbsp;machines&nbsp;for&nbsp;running&nbsp;regexp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567725">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567733"><a href="/gostd/regexp/regexp.go.html#3566832">sync</a></span><span class="op" id="3567737">.</span><span class="ident" id="3567738"><a href="/gostd/sync/mutex.go.html#1443974">Mutex</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3567745">machine</span>&nbsp;<span class="op" id="3567753">[</span><span class="op" id="3567754">]</span><span class="op" id="3567755">*</span><span class="ident" id="3567756"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><br>
<span class="lineno">100</span><span class="op" id="3567764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3567767">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;source&nbsp;text&nbsp;used&nbsp;to&nbsp;compile&nbsp;the&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="keyword" id="3567841">func</span>&nbsp;<span class="op" id="3567846">(</span><span class="ident" id="3567847">re</span>&nbsp;<span class="op" id="3567850">*</span><span class="ident" id="3567851"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3567857">)</span>&nbsp;<span class="ident" id="3567859">String</span><span class="op" id="3567865">(</span><span class="op" id="3567866">)</span>&nbsp;<span class="builtintype" id="3567868">string</span>&nbsp;<span class="op" id="3567875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3567878">return</span>&nbsp;<span class="ident" id="3567885"><a href="/gostd/regexp/regexp.go.html#3567847">re</a></span><span class="op" id="3567887">.</span><span class="ident" id="3567888"><a href="/gostd/regexp/regexp.go.html#3567067">expr</a></span><br>
<span class="lineno">105</span><span class="op" id="3567893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3567896">//&nbsp;Compile&nbsp;parses&nbsp;a&nbsp;regular&nbsp;expression&nbsp;and&nbsp;returns,&nbsp;if&nbsp;successful,</span><br>
<span class="lineno"></span><span class="comment" id="3567963">//&nbsp;a&nbsp;Regexp&nbsp;object&nbsp;that&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;match&nbsp;against&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="3568022">//</span><br>
<span class="lineno">110</span><span class="comment" id="3568025">//&nbsp;When&nbsp;matching&nbsp;against&nbsp;text,&nbsp;the&nbsp;regexp&nbsp;returns&nbsp;a&nbsp;match&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3568088">//&nbsp;begins&nbsp;as&nbsp;early&nbsp;as&nbsp;possible&nbsp;in&nbsp;the&nbsp;input&nbsp;(leftmost),&nbsp;and&nbsp;among&nbsp;those</span><br>
<span class="lineno"></span><span class="comment" id="3568160">//&nbsp;it&nbsp;chooses&nbsp;the&nbsp;one&nbsp;that&nbsp;a&nbsp;backtracking&nbsp;search&nbsp;would&nbsp;have&nbsp;found&nbsp;first.</span><br>
<span class="lineno"></span><span class="comment" id="3568233">//&nbsp;This&nbsp;so-called&nbsp;leftmost-first&nbsp;matching&nbsp;is&nbsp;the&nbsp;same&nbsp;semantics</span><br>
<span class="lineno"></span><span class="comment" id="3568297">//&nbsp;that&nbsp;Perl,&nbsp;Python,&nbsp;and&nbsp;other&nbsp;implementations&nbsp;use,&nbsp;although&nbsp;this</span><br>
<span class="lineno">115</span><span class="comment" id="3568364">//&nbsp;package&nbsp;implements&nbsp;it&nbsp;without&nbsp;the&nbsp;expense&nbsp;of&nbsp;backtracking.</span><br>
<span class="lineno"></span><span class="comment" id="3568426">//&nbsp;For&nbsp;POSIX&nbsp;leftmost-longest&nbsp;matching,&nbsp;see&nbsp;CompilePOSIX.</span><br>
<span class="lineno"></span><span class="keyword" id="3568484">func</span>&nbsp;<span class="ident" id="3568489">Compile</span><span class="op" id="3568496">(</span><span class="ident" id="3568497">expr</span>&nbsp;<span class="builtintype" id="3568502">string</span><span class="op" id="3568508">)</span>&nbsp;<span class="op" id="3568510">(</span><span class="op" id="3568511">*</span><span class="ident" id="3568512"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3568518">,</span>&nbsp;<span class="builtintype" id="3568520">error</span><span class="op" id="3568525">)</span>&nbsp;<span class="op" id="3568527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3568530">return</span>&nbsp;<span class="ident" id="3568537"><a href="/gostd/regexp/regexp.go.html#3570060">compile</a></span><span class="op" id="3568544">(</span><span class="ident" id="3568545"><a href="/gostd/regexp/regexp.go.html#3568497">expr</a></span><span class="op" id="3568549">,</span>&nbsp;<span class="ident" id="3568551"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3568557">.</span><span class="ident" id="3568558"><a href="/gostd/regexp/syntax/parse.go.html#3611963">Perl</a></span><span class="op" id="3568562">,</span>&nbsp;<span class="builtintype" id="3568564">false</span><span class="op" id="3568569">)</span><br>
<span class="lineno"></span><span class="op" id="3568571">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3568574">//&nbsp;CompilePOSIX&nbsp;is&nbsp;like&nbsp;Compile&nbsp;but&nbsp;restricts&nbsp;the&nbsp;regular&nbsp;expression</span><br>
<span class="lineno"></span><span class="comment" id="3568643">//&nbsp;to&nbsp;POSIX&nbsp;ERE&nbsp;(egrep)&nbsp;syntax&nbsp;and&nbsp;changes&nbsp;the&nbsp;match&nbsp;semantics&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3568709">//&nbsp;leftmost-longest.</span><br>
<span class="lineno"></span><span class="comment" id="3568730">//</span><br>
<span class="lineno">125</span><span class="comment" id="3568733">//&nbsp;That&nbsp;is,&nbsp;when&nbsp;matching&nbsp;against&nbsp;text,&nbsp;the&nbsp;regexp&nbsp;returns&nbsp;a&nbsp;match&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3568805">//&nbsp;begins&nbsp;as&nbsp;early&nbsp;as&nbsp;possible&nbsp;in&nbsp;the&nbsp;input&nbsp;(leftmost),&nbsp;and&nbsp;among&nbsp;those</span><br>
<span class="lineno"></span><span class="comment" id="3568877">//&nbsp;it&nbsp;chooses&nbsp;a&nbsp;match&nbsp;that&nbsp;is&nbsp;as&nbsp;long&nbsp;as&nbsp;possible.</span><br>
<span class="lineno"></span><span class="comment" id="3568928">//&nbsp;This&nbsp;so-called&nbsp;leftmost-longest&nbsp;matching&nbsp;is&nbsp;the&nbsp;same&nbsp;semantics</span><br>
<span class="lineno"></span><span class="comment" id="3568994">//&nbsp;that&nbsp;early&nbsp;regular&nbsp;expression&nbsp;implementations&nbsp;used&nbsp;and&nbsp;that&nbsp;POSIX</span><br>
<span class="lineno">130</span><span class="comment" id="3569063">//&nbsp;specifies.</span><br>
<span class="lineno"></span><span class="comment" id="3569077">//</span><br>
<span class="lineno"></span><span class="comment" id="3569080">//&nbsp;However,&nbsp;there&nbsp;can&nbsp;be&nbsp;multiple&nbsp;leftmost-longest&nbsp;matches,&nbsp;with&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="3569155">//&nbsp;submatch&nbsp;choices,&nbsp;and&nbsp;here&nbsp;this&nbsp;package&nbsp;diverges&nbsp;from&nbsp;POSIX.</span><br>
<span class="lineno"></span><span class="comment" id="3569219">//&nbsp;Among&nbsp;the&nbsp;possible&nbsp;leftmost-longest&nbsp;matches,&nbsp;this&nbsp;package&nbsp;chooses</span><br>
<span class="lineno">135</span><span class="comment" id="3569288">//&nbsp;the&nbsp;one&nbsp;that&nbsp;a&nbsp;backtracking&nbsp;search&nbsp;would&nbsp;have&nbsp;found&nbsp;first,&nbsp;while&nbsp;POSIX</span><br>
<span class="lineno"></span><span class="comment" id="3569362">//&nbsp;specifies&nbsp;that&nbsp;the&nbsp;match&nbsp;be&nbsp;chosen&nbsp;to&nbsp;maximize&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="3569436">//&nbsp;subexpression,&nbsp;then&nbsp;the&nbsp;second,&nbsp;and&nbsp;so&nbsp;on&nbsp;from&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span><span class="comment" id="3569501">//&nbsp;The&nbsp;POSIX&nbsp;rule&nbsp;is&nbsp;computationally&nbsp;prohibitive&nbsp;and&nbsp;not&nbsp;even&nbsp;well-defined.</span><br>
<span class="lineno"></span><span class="comment" id="3569577">//&nbsp;See&nbsp;http://swtch.com/~rsc/regexp/regexp2.html#posix&nbsp;for&nbsp;details.</span><br>
<span class="lineno">140</span><span class="keyword" id="3569645">func</span>&nbsp;<span class="ident" id="3569650">CompilePOSIX</span><span class="op" id="3569662">(</span><span class="ident" id="3569663">expr</span>&nbsp;<span class="builtintype" id="3569668">string</span><span class="op" id="3569674">)</span>&nbsp;<span class="op" id="3569676">(</span><span class="op" id="3569677">*</span><span class="ident" id="3569678"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3569684">,</span>&nbsp;<span class="builtintype" id="3569686">error</span><span class="op" id="3569691">)</span>&nbsp;<span class="op" id="3569693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3569696">return</span>&nbsp;<span class="ident" id="3569703"><a href="/gostd/regexp/regexp.go.html#3570060">compile</a></span><span class="op" id="3569710">(</span><span class="ident" id="3569711"><a href="/gostd/regexp/regexp.go.html#3569663">expr</a></span><span class="op" id="3569715">,</span>&nbsp;<span class="ident" id="3569717"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3569723">.</span><span class="ident" id="3569724"><a href="/gostd/regexp/syntax/parse.go.html#3612052">POSIX</a></span><span class="op" id="3569729">,</span>&nbsp;<span class="builtintype" id="3569731">true</span><span class="op" id="3569735">)</span><br>
<span class="lineno"></span><span class="op" id="3569737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3569740">//&nbsp;Longest&nbsp;makes&nbsp;future&nbsp;searches&nbsp;prefer&nbsp;the&nbsp;leftmost-longest&nbsp;match.</span><br>
<span class="lineno">145</span><span class="comment" id="3569808">//&nbsp;That&nbsp;is,&nbsp;when&nbsp;matching&nbsp;against&nbsp;text,&nbsp;the&nbsp;regexp&nbsp;returns&nbsp;a&nbsp;match&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3569880">//&nbsp;begins&nbsp;as&nbsp;early&nbsp;as&nbsp;possible&nbsp;in&nbsp;the&nbsp;input&nbsp;(leftmost),&nbsp;and&nbsp;among&nbsp;those</span><br>
<span class="lineno"></span><span class="comment" id="3569952">//&nbsp;it&nbsp;chooses&nbsp;a&nbsp;match&nbsp;that&nbsp;is&nbsp;as&nbsp;long&nbsp;as&nbsp;possible.</span><br>
<span class="lineno"></span><span class="keyword" id="3570003">func</span>&nbsp;<span class="op" id="3570008">(</span><span class="ident" id="3570009">re</span>&nbsp;<span class="op" id="3570012">*</span><span class="ident" id="3570013"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3570019">)</span>&nbsp;<span class="ident" id="3570021">Longest</span><span class="op" id="3570028">(</span><span class="op" id="3570029">)</span>&nbsp;<span class="op" id="3570031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570034"><a href="/gostd/regexp/regexp.go.html#3570009">re</a></span><span class="op" id="3570036">.</span><span class="ident" id="3570037"><a href="/gostd/regexp/regexp.go.html#3567662">longest</a></span>&nbsp;<span class="op" id="3570045">=</span>&nbsp;<span class="builtintype" id="3570047">true</span><br>
<span class="lineno">150</span><span class="op" id="3570052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3570055">func</span>&nbsp;<span class="ident" id="3570060">compile</span><span class="op" id="3570067">(</span><span class="ident" id="3570068">expr</span>&nbsp;<span class="builtintype" id="3570073">string</span><span class="op" id="3570079">,</span>&nbsp;<span class="ident" id="3570081">mode</span>&nbsp;<span class="ident" id="3570086"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3570092">.</span><span class="ident" id="3570093"><a href="/gostd/regexp/syntax/parse.go.html#3611149">Flags</a></span><span class="op" id="3570098">,</span>&nbsp;<span class="ident" id="3570100">longest</span>&nbsp;<span class="builtintype" id="3570108">bool</span><span class="op" id="3570112">)</span>&nbsp;<span class="op" id="3570114">(</span><span class="op" id="3570115">*</span><span class="ident" id="3570116"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3570122">,</span>&nbsp;<span class="builtintype" id="3570124">error</span><span class="op" id="3570129">)</span>&nbsp;<span class="op" id="3570131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570134">re</span><span class="op" id="3570136">,</span>&nbsp;<span class="ident" id="3570138">err</span>&nbsp;<span class="op" id="3570142">:=</span>&nbsp;<span class="ident" id="3570145"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3570151">.</span><span class="ident" id="3570152"><a href="/gostd/regexp/syntax/parse.go.html#3628333">Parse</a></span><span class="op" id="3570157">(</span><span class="ident" id="3570158"><a href="/gostd/regexp/regexp.go.html#3570068">expr</a></span><span class="op" id="3570162">,</span>&nbsp;<span class="ident" id="3570164"><a href="/gostd/regexp/regexp.go.html#3570081">mode</a></span><span class="op" id="3570168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3570171">if</span>&nbsp;<span class="ident" id="3570174"><a href="/gostd/regexp/regexp.go.html#3570138">err</a></span>&nbsp;<span class="op" id="3570178">!=</span>&nbsp;<span class="builtintype" id="3570181">nil</span>&nbsp;<span class="op" id="3570185">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3570189">return</span>&nbsp;<span class="builtintype" id="3570196">nil</span><span class="op" id="3570199">,</span>&nbsp;<span class="ident" id="3570201"><a href="/gostd/regexp/regexp.go.html#3570138">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3570206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570209">maxCap</span>&nbsp;<span class="op" id="3570216">:=</span>&nbsp;<span class="ident" id="3570219"><a href="/gostd/regexp/regexp.go.html#3570134">re</a></span><span class="op" id="3570221">.</span><span class="ident" id="3570222"><a href="/gostd/regexp/syntax/regexp.go.html#3673763">MaxCap</a></span><span class="op" id="3570228">(</span><span class="op" id="3570229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570232">capNames</span>&nbsp;<span class="op" id="3570241">:=</span>&nbsp;<span class="ident" id="3570244"><a href="/gostd/regexp/regexp.go.html#3570134">re</a></span><span class="op" id="3570246">.</span><span class="ident" id="3570247"><a href="/gostd/regexp/syntax/regexp.go.html#3674004">CapNames</a></span><span class="op" id="3570255">(</span><span class="op" id="3570256">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570260"><a href="/gostd/regexp/regexp.go.html#3570134">re</a></span>&nbsp;<span class="op" id="3570263">=</span>&nbsp;<span class="ident" id="3570265"><a href="/gostd/regexp/regexp.go.html#3570134">re</a></span><span class="op" id="3570267">.</span><span class="ident" id="3570268"><a href="/gostd/regexp/syntax/simplify.go.html#3674970">Simplify</a></span><span class="op" id="3570276">(</span><span class="op" id="3570277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570280">prog</span><span class="op" id="3570284">,</span>&nbsp;<span class="ident" id="3570286"><a href="/gostd/regexp/regexp.go.html#3570138">err</a></span>&nbsp;<span class="op" id="3570290">:=</span>&nbsp;<span class="ident" id="3570293"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3570299">.</span><span class="ident" id="3570300"><a href="/gostd/regexp/syntax/compile.go.html#3599632">Compile</a></span><span class="op" id="3570307">(</span><span class="ident" id="3570308"><a href="/gostd/regexp/regexp.go.html#3570134">re</a></span><span class="op" id="3570310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3570313">if</span>&nbsp;<span class="ident" id="3570316"><a href="/gostd/regexp/regexp.go.html#3570138">err</a></span>&nbsp;<span class="op" id="3570320">!=</span>&nbsp;<span class="builtintype" id="3570323">nil</span>&nbsp;<span class="op" id="3570327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3570331">return</span>&nbsp;<span class="builtintype" id="3570338">nil</span><span class="op" id="3570341">,</span>&nbsp;<span class="ident" id="3570343"><a href="/gostd/regexp/regexp.go.html#3570138">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3570348">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570351">regexp</span>&nbsp;<span class="op" id="3570358">:=</span>&nbsp;<span class="op" id="3570361">&amp;</span><span class="ident" id="3570362"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3570368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570372"><a href="/gostd/regexp/regexp.go.html#3567067">expr</a></span><span class="op" id="3570376">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570385"><a href="/gostd/regexp/regexp.go.html#3570068">expr</a></span><span class="op" id="3570389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570393"><a href="/gostd/regexp/regexp.go.html#3567122">prog</a></span><span class="op" id="3570397">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570406"><a href="/gostd/regexp/regexp.go.html#3570280">prog</a></span><span class="op" id="3570410">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570414"><a href="/gostd/regexp/regexp.go.html#3567173">onepass</a></span><span class="op" id="3570421">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570427"><a href="/gostd/regexp/onepass.go.html#3562557">compileOnePass</a></span><span class="op" id="3570441">(</span><span class="ident" id="3570442"><a href="/gostd/regexp/regexp.go.html#3570280">prog</a></span><span class="op" id="3570446">)</span><span class="op" id="3570447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570451"><a href="/gostd/regexp/regexp.go.html#3567617">numSubexp</a></span><span class="op" id="3570460">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3570464"><a href="/gostd/regexp/regexp.go.html#3570209">maxCap</a></span><span class="op" id="3570470">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570474"><a href="/gostd/regexp/regexp.go.html#3567637">subexpNames</a></span><span class="op" id="3570485">:</span>&nbsp;<span class="ident" id="3570487"><a href="/gostd/regexp/regexp.go.html#3570232">capNames</a></span><span class="op" id="3570495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570499"><a href="/gostd/regexp/regexp.go.html#3567533">cond</a></span><span class="op" id="3570503">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570512"><a href="/gostd/regexp/regexp.go.html#3570280">prog</a></span><span class="op" id="3570516">.</span><span class="ident" id="3570517"><a href="/gostd/regexp/syntax/prog.go.html#3662528">StartCond</a></span><span class="op" id="3570526">(</span><span class="op" id="3570527">)</span><span class="op" id="3570528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570532"><a href="/gostd/regexp/regexp.go.html#3567662">longest</a></span><span class="op" id="3570539">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570545"><a href="/gostd/regexp/regexp.go.html#3570100">longest</a></span><span class="op" id="3570552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3570555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3570558">if</span>&nbsp;<span class="ident" id="3570561"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570567">.</span><span class="ident" id="3570568"><a href="/gostd/regexp/regexp.go.html#3567173">onepass</a></span>&nbsp;<span class="op" id="3570576">==</span>&nbsp;<span class="ident" id="3570579"><a href="/gostd/regexp/onepass.go.html#3562168">notOnePass</a></span>&nbsp;<span class="op" id="3570590">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570594"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570600">.</span><span class="ident" id="3570601"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span><span class="op" id="3570607">,</span>&nbsp;<span class="ident" id="3570609"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570615">.</span><span class="ident" id="3570616"><a href="/gostd/regexp/regexp.go.html#3567355">prefixComplete</a></span>&nbsp;<span class="op" id="3570631">=</span>&nbsp;<span class="ident" id="3570633"><a href="/gostd/regexp/regexp.go.html#3570280">prog</a></span><span class="op" id="3570637">.</span><span class="ident" id="3570638"><a href="/gostd/regexp/syntax/prog.go.html#3661927">Prefix</a></span><span class="op" id="3570644">(</span><span class="op" id="3570645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3570648">}</span>&nbsp;<span class="keyword" id="3570650">else</span>&nbsp;<span class="op" id="3570655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570659"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570665">.</span><span class="ident" id="3570666"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span><span class="op" id="3570672">,</span>&nbsp;<span class="ident" id="3570674"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570680">.</span><span class="ident" id="3570681"><a href="/gostd/regexp/regexp.go.html#3567355">prefixComplete</a></span><span class="op" id="3570695">,</span>&nbsp;<span class="ident" id="3570697"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570703">.</span><span class="ident" id="3570704"><a href="/gostd/regexp/regexp.go.html#3567472">prefixEnd</a></span>&nbsp;<span class="op" id="3570714">=</span>&nbsp;<span class="ident" id="3570716"><a href="/gostd/regexp/onepass.go.html#3548804">onePassPrefix</a></span><span class="op" id="3570729">(</span><span class="ident" id="3570730"><a href="/gostd/regexp/regexp.go.html#3570280">prog</a></span><span class="op" id="3570734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3570737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3570740">if</span>&nbsp;<span class="ident" id="3570743"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570749">.</span><span class="ident" id="3570750"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span>&nbsp;<span class="op" id="3570757">!=</span>&nbsp;<span class="string" id="3570760">&#34;&#34;</span>&nbsp;<span class="op" id="3570763">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3570767">//&nbsp;TODO(rsc):&nbsp;Remove&nbsp;this&nbsp;allocation&nbsp;by&nbsp;adding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3570816">//&nbsp;IndexString&nbsp;to&nbsp;package&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570851"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570857">.</span><span class="ident" id="3570858"><a href="/gostd/regexp/regexp.go.html#3567301">prefixBytes</a></span>&nbsp;<span class="op" id="3570870">=</span>&nbsp;<span class="op" id="3570872">[</span><span class="op" id="3570873">]</span><span class="builtintype" id="3570874">byte</span><span class="op" id="3570878">(</span><span class="ident" id="3570879"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570885">.</span><span class="ident" id="3570886"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span><span class="op" id="3570892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3570896"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570902">.</span><span class="ident" id="3570903"><a href="/gostd/regexp/regexp.go.html#3567417">prefixRune</a></span><span class="op" id="3570913">,</span>&nbsp;<span class="ident" id="3570915">_</span>&nbsp;<span class="op" id="3570917">=</span>&nbsp;<span class="ident" id="3570919"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3570923">.</span><span class="ident" id="3570924"><a href="/gostd/unicode/utf8/utf8.go.html#1810428">DecodeRuneInString</a></span><span class="op" id="3570942">(</span><span class="ident" id="3570943"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570949">.</span><span class="ident" id="3570950"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span><span class="op" id="3570956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3570959">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3570962">return</span>&nbsp;<span class="ident" id="3570969"><a href="/gostd/regexp/regexp.go.html#3570351">regexp</a></span><span class="op" id="3570975">,</span>&nbsp;<span class="builtintype" id="3570977">nil</span><br>
<span class="lineno"></span><span class="op" id="3570981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3570984">//&nbsp;get&nbsp;returns&nbsp;a&nbsp;machine&nbsp;to&nbsp;use&nbsp;for&nbsp;matching&nbsp;re.</span><br>
<span class="lineno"></span><span class="comment" id="3571033">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;re&#39;s&nbsp;machine&nbsp;cache&nbsp;if&nbsp;possible,&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">190</span><span class="comment" id="3571089">//&nbsp;unnecessary&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="3571116">func</span>&nbsp;<span class="op" id="3571121">(</span><span class="ident" id="3571122">re</span>&nbsp;<span class="op" id="3571125">*</span><span class="ident" id="3571126"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3571132">)</span>&nbsp;<span class="ident" id="3571134">get</span><span class="op" id="3571137">(</span><span class="op" id="3571138">)</span>&nbsp;<span class="op" id="3571140">*</span><span class="ident" id="3571141"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span>&nbsp;<span class="op" id="3571149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571152"><a href="/gostd/regexp/regexp.go.html#3571122">re</a></span><span class="op" id="3571154">.</span><span class="ident" id="3571155"><a href="/gostd/regexp/regexp.go.html#3567725">mu</a></span><span class="op" id="3571157">.</span><span class="ident" id="3571158"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="3571162">(</span><span class="op" id="3571163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3571166">if</span>&nbsp;<span class="ident" id="3571169">n</span>&nbsp;<span class="op" id="3571171">:=</span>&nbsp;<span class="builtinfunc" id="3571174">len</span><span class="op" id="3571177">(</span><span class="ident" id="3571178"><a href="/gostd/regexp/regexp.go.html#3571122">re</a></span><span class="op" id="3571180">.</span><span class="ident" id="3571181"><a href="/gostd/regexp/regexp.go.html#3567745">machine</a></span><span class="op" id="3571188">)</span><span class="op" id="3571189">;</span>&nbsp;<span class="ident" id="3571191"><a href="/gostd/regexp/regexp.go.html#3571169">n</a></span>&nbsp;<span class="op" id="3571193">&gt;</span>&nbsp;<span class="num" id="3571195">0</span>&nbsp;<span class="op" id="3571197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571201">z</span>&nbsp;<span class="op" id="3571203">:=</span>&nbsp;<span class="ident" id="3571206"><a href="/gostd/regexp/regexp.go.html#3571122">re</a></span><span class="op" id="3571208">.</span><span class="ident" id="3571209"><a href="/gostd/regexp/regexp.go.html#3567745">machine</a></span><span class="op" id="3571216">[</span><span class="ident" id="3571217"><a href="/gostd/regexp/regexp.go.html#3571169">n</a></span><span class="op" id="3571218">-</span><span class="num" id="3571219">1</span><span class="op" id="3571220">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571224"><a href="/gostd/regexp/regexp.go.html#3571122">re</a></span><span class="op" id="3571226">.</span><span class="ident" id="3571227"><a href="/gostd/regexp/regexp.go.html#3567745">machine</a></span>&nbsp;<span class="op" id="3571235">=</span>&nbsp;<span class="ident" id="3571237"><a href="/gostd/regexp/regexp.go.html#3571122">re</a></span><span class="op" id="3571239">.</span><span class="ident" id="3571240"><a href="/gostd/regexp/regexp.go.html#3567745">machine</a></span><span class="op" id="3571247">[</span><span class="op" id="3571248">:</span><span class="ident" id="3571249"><a href="/gostd/regexp/regexp.go.html#3571169">n</a></span><span class="op" id="3571250">-</span><span class="num" id="3571251">1</span><span class="op" id="3571252">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571256"><a href="/gostd/regexp/regexp.go.html#3571122">re</a></span><span class="op" id="3571258">.</span><span class="ident" id="3571259"><a href="/gostd/regexp/regexp.go.html#3567725">mu</a></span><span class="op" id="3571261">.</span><span class="ident" id="3571262"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="3571268">(</span><span class="op" id="3571269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3571273">return</span>&nbsp;<span class="ident" id="3571280"><a href="/gostd/regexp/regexp.go.html#3571201">z</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3571283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571286"><a href="/gostd/regexp/regexp.go.html#3571122">re</a></span><span class="op" id="3571288">.</span><span class="ident" id="3571289"><a href="/gostd/regexp/regexp.go.html#3567725">mu</a></span><span class="op" id="3571291">.</span><span class="ident" id="3571292"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="3571298">(</span><span class="op" id="3571299">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571302">z</span>&nbsp;<span class="op" id="3571304">:=</span>&nbsp;<span class="ident" id="3571307"><a href="/gostd/regexp/exec.go.html#3538527">progMachine</a></span><span class="op" id="3571318">(</span><span class="ident" id="3571319"><a href="/gostd/regexp/regexp.go.html#3571122">re</a></span><span class="op" id="3571321">.</span><span class="ident" id="3571322"><a href="/gostd/regexp/regexp.go.html#3567122">prog</a></span><span class="op" id="3571326">,</span>&nbsp;<span class="ident" id="3571328"><a href="/gostd/regexp/regexp.go.html#3571122">re</a></span><span class="op" id="3571330">.</span><span class="ident" id="3571331"><a href="/gostd/regexp/regexp.go.html#3567173">onepass</a></span><span class="op" id="3571338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571341"><a href="/gostd/regexp/regexp.go.html#3571302">z</a></span><span class="op" id="3571342">.</span><span class="ident" id="3571343"><a href="/gostd/regexp/exec.go.html#3537622">re</a></span>&nbsp;<span class="op" id="3571346">=</span>&nbsp;<span class="ident" id="3571348"><a href="/gostd/regexp/regexp.go.html#3571122">re</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3571352">return</span>&nbsp;<span class="ident" id="3571359"><a href="/gostd/regexp/regexp.go.html#3571302">z</a></span><br>
<span class="lineno"></span><span class="op" id="3571361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="comment" id="3571364">//&nbsp;put&nbsp;returns&nbsp;a&nbsp;machine&nbsp;to&nbsp;the&nbsp;re&#39;s&nbsp;machine&nbsp;cache.</span><br>
<span class="lineno"></span><span class="comment" id="3571416">//&nbsp;There&nbsp;is&nbsp;no&nbsp;attempt&nbsp;to&nbsp;limit&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;cache,&nbsp;so&nbsp;it&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="3571482">//&nbsp;grow&nbsp;to&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;simultaneous&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="3571536">//&nbsp;run&nbsp;using&nbsp;re.&nbsp;&nbsp;(The&nbsp;cache&nbsp;empties&nbsp;when&nbsp;re&nbsp;gets&nbsp;garbage&nbsp;collected.)</span><br>
<span class="lineno"></span><span class="keyword" id="3571606">func</span>&nbsp;<span class="op" id="3571611">(</span><span class="ident" id="3571612">re</span>&nbsp;<span class="op" id="3571615">*</span><span class="ident" id="3571616"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3571622">)</span>&nbsp;<span class="ident" id="3571624">put</span><span class="op" id="3571627">(</span><span class="ident" id="3571628">z</span>&nbsp;<span class="op" id="3571630">*</span><span class="ident" id="3571631"><a href="/gostd/regexp/exec.go.html#3537604">machine</a></span><span class="op" id="3571638">)</span>&nbsp;<span class="op" id="3571640">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571643"><a href="/gostd/regexp/regexp.go.html#3571612">re</a></span><span class="op" id="3571645">.</span><span class="ident" id="3571646"><a href="/gostd/regexp/regexp.go.html#3567725">mu</a></span><span class="op" id="3571648">.</span><span class="ident" id="3571649"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="3571653">(</span><span class="op" id="3571654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571657"><a href="/gostd/regexp/regexp.go.html#3571612">re</a></span><span class="op" id="3571659">.</span><span class="ident" id="3571660"><a href="/gostd/regexp/regexp.go.html#3567745">machine</a></span>&nbsp;<span class="op" id="3571668">=</span>&nbsp;<span class="builtinfunc" id="3571670">append</span><span class="op" id="3571676">(</span><span class="ident" id="3571677"><a href="/gostd/regexp/regexp.go.html#3571612">re</a></span><span class="op" id="3571679">.</span><span class="ident" id="3571680"><a href="/gostd/regexp/regexp.go.html#3567745">machine</a></span><span class="op" id="3571687">,</span>&nbsp;<span class="ident" id="3571689"><a href="/gostd/regexp/regexp.go.html#3571628">z</a></span><span class="op" id="3571690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571693"><a href="/gostd/regexp/regexp.go.html#3571612">re</a></span><span class="op" id="3571695">.</span><span class="ident" id="3571696"><a href="/gostd/regexp/regexp.go.html#3567725">mu</a></span><span class="op" id="3571698">.</span><span class="ident" id="3571699"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="3571705">(</span><span class="op" id="3571706">)</span><br>
<span class="lineno"></span><span class="op" id="3571708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="comment" id="3571711">//&nbsp;MustCompile&nbsp;is&nbsp;like&nbsp;Compile&nbsp;but&nbsp;panics&nbsp;if&nbsp;the&nbsp;expression&nbsp;cannot&nbsp;be&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="comment" id="3571789">//&nbsp;It&nbsp;simplifies&nbsp;safe&nbsp;initialization&nbsp;of&nbsp;global&nbsp;variables&nbsp;holding&nbsp;compiled&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="3571871">//&nbsp;expressions.</span><br>
<span class="lineno"></span><span class="keyword" id="3571887">func</span>&nbsp;<span class="ident" id="3571892">MustCompile</span><span class="op" id="3571903">(</span><span class="ident" id="3571904">str</span>&nbsp;<span class="builtintype" id="3571908">string</span><span class="op" id="3571914">)</span>&nbsp;<span class="op" id="3571916">*</span><span class="ident" id="3571917"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span>&nbsp;<span class="op" id="3571924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3571927">regexp</span><span class="op" id="3571933">,</span>&nbsp;<span class="builtintype" id="3571935">error</span>&nbsp;<span class="op" id="3571941">:=</span>&nbsp;<span class="ident" id="3571944"><a href="/gostd/regexp/regexp.go.html#3568489">Compile</a></span><span class="op" id="3571951">(</span><span class="ident" id="3571952"><a href="/gostd/regexp/regexp.go.html#3571904">str</a></span><span class="op" id="3571955">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3571958">if</span>&nbsp;<span class="builtintype" id="3571961"><a href="/gostd/regexp/regexp.go.html#3571935">error</a></span>&nbsp;<span class="op" id="3571967">!=</span>&nbsp;<span class="builtintype" id="3571970">nil</span>&nbsp;<span class="op" id="3571974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3571978">panic</span><span class="op" id="3571983">(</span><span class="string" id="3571984">`regexp:&nbsp;Compile(`</span>&nbsp;<span class="op" id="3572003">+</span>&nbsp;<span class="ident" id="3572005"><a href="/gostd/regexp/regexp.go.html#3572443">quote</a></span><span class="op" id="3572010">(</span><span class="ident" id="3572011"><a href="/gostd/regexp/regexp.go.html#3571904">str</a></span><span class="op" id="3572014">)</span>&nbsp;<span class="op" id="3572016">+</span>&nbsp;<span class="string" id="3572018">`):&nbsp;`</span>&nbsp;<span class="op" id="3572024">+</span>&nbsp;<span class="builtintype" id="3572026"><a href="/gostd/regexp/regexp.go.html#3571935">error</a></span><span class="op" id="3572031">.</span><span class="ident" id="3572032">Error</span><span class="op" id="3572037">(</span><span class="op" id="3572038">)</span><span class="op" id="3572039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3572042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3572045">return</span>&nbsp;<span class="ident" id="3572052"><a href="/gostd/regexp/regexp.go.html#3571927">regexp</a></span><br>
<span class="lineno"></span><span class="op" id="3572059">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3572062">//&nbsp;MustCompilePOSIX&nbsp;is&nbsp;like&nbsp;CompilePOSIX&nbsp;but&nbsp;panics&nbsp;if&nbsp;the&nbsp;expression&nbsp;cannot&nbsp;be&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="comment" id="3572150">//&nbsp;It&nbsp;simplifies&nbsp;safe&nbsp;initialization&nbsp;of&nbsp;global&nbsp;variables&nbsp;holding&nbsp;compiled&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="3572232">//&nbsp;expressions.</span><br>
<span class="lineno"></span><span class="keyword" id="3572248">func</span>&nbsp;<span class="ident" id="3572253">MustCompilePOSIX</span><span class="op" id="3572269">(</span><span class="ident" id="3572270">str</span>&nbsp;<span class="builtintype" id="3572274">string</span><span class="op" id="3572280">)</span>&nbsp;<span class="op" id="3572282">*</span><span class="ident" id="3572283"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span>&nbsp;<span class="op" id="3572290">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3572293">regexp</span><span class="op" id="3572299">,</span>&nbsp;<span class="builtintype" id="3572301">error</span>&nbsp;<span class="op" id="3572307">:=</span>&nbsp;<span class="ident" id="3572310"><a href="/gostd/regexp/regexp.go.html#3569650">CompilePOSIX</a></span><span class="op" id="3572322">(</span><span class="ident" id="3572323"><a href="/gostd/regexp/regexp.go.html#3572270">str</a></span><span class="op" id="3572326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3572329">if</span>&nbsp;<span class="builtintype" id="3572332"><a href="/gostd/regexp/regexp.go.html#3572301">error</a></span>&nbsp;<span class="op" id="3572338">!=</span>&nbsp;<span class="builtintype" id="3572341">nil</span>&nbsp;<span class="op" id="3572345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3572349">panic</span><span class="op" id="3572354">(</span><span class="string" id="3572355">`regexp:&nbsp;CompilePOSIX(`</span>&nbsp;<span class="op" id="3572379">+</span>&nbsp;<span class="ident" id="3572381"><a href="/gostd/regexp/regexp.go.html#3572443">quote</a></span><span class="op" id="3572386">(</span><span class="ident" id="3572387"><a href="/gostd/regexp/regexp.go.html#3572270">str</a></span><span class="op" id="3572390">)</span>&nbsp;<span class="op" id="3572392">+</span>&nbsp;<span class="string" id="3572394">`):&nbsp;`</span>&nbsp;<span class="op" id="3572400">+</span>&nbsp;<span class="builtintype" id="3572402"><a href="/gostd/regexp/regexp.go.html#3572301">error</a></span><span class="op" id="3572407">.</span><span class="ident" id="3572408">Error</span><span class="op" id="3572413">(</span><span class="op" id="3572414">)</span><span class="op" id="3572415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3572418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3572421">return</span>&nbsp;<span class="ident" id="3572428"><a href="/gostd/regexp/regexp.go.html#3572293">regexp</a></span><br>
<span class="lineno">235</span><span class="op" id="3572435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3572438">func</span>&nbsp;<span class="ident" id="3572443">quote</span><span class="op" id="3572448">(</span><span class="ident" id="3572449">s</span>&nbsp;<span class="builtintype" id="3572451">string</span><span class="op" id="3572457">)</span>&nbsp;<span class="builtintype" id="3572459">string</span>&nbsp;<span class="op" id="3572466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3572469">if</span>&nbsp;<span class="ident" id="3572472"><a href="/gostd/regexp/regexp.go.html#3566810">strconv</a></span><span class="op" id="3572479">.</span><span class="ident" id="3572480"><a href="/gostd/strconv/quote.go.html#2414257">CanBackquote</a></span><span class="op" id="3572492">(</span><span class="ident" id="3572493"><a href="/gostd/regexp/regexp.go.html#3572449">s</a></span><span class="op" id="3572494">)</span>&nbsp;<span class="op" id="3572496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3572500">return</span>&nbsp;<span class="string" id="3572507">&#34;`&#34;</span>&nbsp;<span class="op" id="3572511">+</span>&nbsp;<span class="ident" id="3572513"><a href="/gostd/regexp/regexp.go.html#3572449">s</a></span>&nbsp;<span class="op" id="3572515">+</span>&nbsp;<span class="string" id="3572517">&#34;`&#34;</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3572522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3572525">return</span>&nbsp;<span class="ident" id="3572532"><a href="/gostd/regexp/regexp.go.html#3566810">strconv</a></span><span class="op" id="3572539">.</span><span class="ident" id="3572540"><a href="/gostd/strconv/quote.go.html#2412032">Quote</a></span><span class="op" id="3572545">(</span><span class="ident" id="3572546"><a href="/gostd/regexp/regexp.go.html#3572449">s</a></span><span class="op" id="3572547">)</span><br>
<span class="lineno"></span><span class="op" id="3572549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3572552">//&nbsp;NumSubexp&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;parenthesized&nbsp;subexpressions&nbsp;in&nbsp;this&nbsp;Regexp.</span><br>
<span class="lineno">245</span><span class="keyword" id="3572632">func</span>&nbsp;<span class="op" id="3572637">(</span><span class="ident" id="3572638">re</span>&nbsp;<span class="op" id="3572641">*</span><span class="ident" id="3572642"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3572648">)</span>&nbsp;<span class="ident" id="3572650">NumSubexp</span><span class="op" id="3572659">(</span><span class="op" id="3572660">)</span>&nbsp;<span class="builtintype" id="3572662">int</span>&nbsp;<span class="op" id="3572666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3572669">return</span>&nbsp;<span class="ident" id="3572676"><a href="/gostd/regexp/regexp.go.html#3572638">re</a></span><span class="op" id="3572678">.</span><span class="ident" id="3572679"><a href="/gostd/regexp/regexp.go.html#3567617">numSubexp</a></span><br>
<span class="lineno"></span><span class="op" id="3572689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3572692">//&nbsp;SubexpNames&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;the&nbsp;parenthesized&nbsp;subexpressions</span><br>
<span class="lineno">250</span><span class="comment" id="3572761">//&nbsp;in&nbsp;this&nbsp;Regexp.&nbsp;&nbsp;The&nbsp;name&nbsp;for&nbsp;the&nbsp;first&nbsp;sub-expression&nbsp;is&nbsp;names[1],</span><br>
<span class="lineno"></span><span class="comment" id="3572832">//&nbsp;so&nbsp;that&nbsp;if&nbsp;m&nbsp;is&nbsp;a&nbsp;match&nbsp;slice,&nbsp;the&nbsp;name&nbsp;for&nbsp;m[i]&nbsp;is&nbsp;SubexpNames()[i].</span><br>
<span class="lineno"></span><span class="comment" id="3572905">//&nbsp;Since&nbsp;the&nbsp;Regexp&nbsp;as&nbsp;a&nbsp;whole&nbsp;cannot&nbsp;be&nbsp;named,&nbsp;names[0]&nbsp;is&nbsp;always</span><br>
<span class="lineno"></span><span class="comment" id="3572972">//&nbsp;the&nbsp;empty&nbsp;string.&nbsp;&nbsp;The&nbsp;slice&nbsp;should&nbsp;not&nbsp;be&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="3573028">func</span>&nbsp;<span class="op" id="3573033">(</span><span class="ident" id="3573034">re</span>&nbsp;<span class="op" id="3573037">*</span><span class="ident" id="3573038"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3573044">)</span>&nbsp;<span class="ident" id="3573046">SubexpNames</span><span class="op" id="3573057">(</span><span class="op" id="3573058">)</span>&nbsp;<span class="op" id="3573060">[</span><span class="op" id="3573061">]</span><span class="builtintype" id="3573062">string</span>&nbsp;<span class="op" id="3573069">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3573072">return</span>&nbsp;<span class="ident" id="3573079"><a href="/gostd/regexp/regexp.go.html#3573034">re</a></span><span class="op" id="3573081">.</span><span class="ident" id="3573082"><a href="/gostd/regexp/regexp.go.html#3567637">subexpNames</a></span><br>
<span class="lineno"></span><span class="op" id="3573094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3573097">const</span>&nbsp;<span class="ident" id="3573103">endOfText</span>&nbsp;<span class="builtintype" id="3573113">rune</span>&nbsp;<span class="op" id="3573118">=</span>&nbsp;<span class="op" id="3573120">-</span><span class="num" id="3573121">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="3573124">//&nbsp;input&nbsp;abstracts&nbsp;different&nbsp;representations&nbsp;of&nbsp;the&nbsp;input&nbsp;text.&nbsp;It&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="3573200">//&nbsp;one-character&nbsp;lookahead.</span><br>
<span class="lineno"></span><span class="keyword" id="3573228">type</span>&nbsp;<span class="ident" id="3573233">input</span>&nbsp;<span class="keyword" id="3573239">interface</span>&nbsp;<span class="op" id="3573249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3573252">step</span><span class="op" id="3573256">(</span><span class="ident" id="3573257">pos</span>&nbsp;<span class="builtintype" id="3573261">int</span><span class="op" id="3573264">)</span>&nbsp;<span class="op" id="3573266">(</span><span class="ident" id="3573267">r</span>&nbsp;<span class="builtintype" id="3573269">rune</span><span class="op" id="3573273">,</span>&nbsp;<span class="ident" id="3573275">width</span>&nbsp;<span class="builtintype" id="3573281">int</span><span class="op" id="3573284">)</span>&nbsp;<span class="comment" id="3573286">//&nbsp;advance&nbsp;one&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3573307">canCheckPrefix</span><span class="op" id="3573321">(</span><span class="op" id="3573322">)</span>&nbsp;<span class="builtintype" id="3573324">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3573341">//&nbsp;can&nbsp;we&nbsp;look&nbsp;ahead&nbsp;without&nbsp;losing&nbsp;info?</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3573384">hasPrefix</span><span class="op" id="3573393">(</span><span class="ident" id="3573394">re</span>&nbsp;<span class="op" id="3573397">*</span><span class="ident" id="3573398"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3573404">)</span>&nbsp;<span class="builtintype" id="3573406">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3573412">index</span><span class="op" id="3573417">(</span><span class="ident" id="3573418">re</span>&nbsp;<span class="op" id="3573421">*</span><span class="ident" id="3573422"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3573428">,</span>&nbsp;<span class="ident" id="3573430">pos</span>&nbsp;<span class="builtintype" id="3573434">int</span><span class="op" id="3573437">)</span>&nbsp;<span class="builtintype" id="3573439">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3573444">context</span><span class="op" id="3573451">(</span><span class="ident" id="3573452">pos</span>&nbsp;<span class="builtintype" id="3573456">int</span><span class="op" id="3573459">)</span>&nbsp;<span class="ident" id="3573461"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3573467">.</span><span class="ident" id="3573468"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span><br>
<span class="lineno"></span><span class="op" id="3573476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3573479">//&nbsp;inputString&nbsp;scans&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3573510">type</span>&nbsp;<span class="ident" id="3573515">inputString</span>&nbsp;<span class="keyword" id="3573527">struct</span>&nbsp;<span class="op" id="3573534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3573537">str</span>&nbsp;<span class="builtintype" id="3573541">string</span><br>
<span class="lineno"></span><span class="op" id="3573548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="keyword" id="3573551">func</span>&nbsp;<span class="op" id="3573556">(</span><span class="ident" id="3573557">i</span>&nbsp;<span class="op" id="3573559">*</span><span class="ident" id="3573560"><a href="/gostd/regexp/regexp.go.html#3573515">inputString</a></span><span class="op" id="3573571">)</span>&nbsp;<span class="ident" id="3573573">step</span><span class="op" id="3573577">(</span><span class="ident" id="3573578">pos</span>&nbsp;<span class="builtintype" id="3573582">int</span><span class="op" id="3573585">)</span>&nbsp;<span class="op" id="3573587">(</span><span class="builtintype" id="3573588">rune</span><span class="op" id="3573592">,</span>&nbsp;<span class="builtintype" id="3573594">int</span><span class="op" id="3573597">)</span>&nbsp;<span class="op" id="3573599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3573602">if</span>&nbsp;<span class="ident" id="3573605"><a href="/gostd/regexp/regexp.go.html#3573578">pos</a></span>&nbsp;<span class="op" id="3573609">&lt;</span>&nbsp;<span class="builtinfunc" id="3573611">len</span><span class="op" id="3573614">(</span><span class="ident" id="3573615"><a href="/gostd/regexp/regexp.go.html#3573557">i</a></span><span class="op" id="3573616">.</span><span class="ident" id="3573617"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span><span class="op" id="3573620">)</span>&nbsp;<span class="op" id="3573622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3573626">c</span>&nbsp;<span class="op" id="3573628">:=</span>&nbsp;<span class="ident" id="3573631"><a href="/gostd/regexp/regexp.go.html#3573557">i</a></span><span class="op" id="3573632">.</span><span class="ident" id="3573633"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span><span class="op" id="3573636">[</span><span class="ident" id="3573637"><a href="/gostd/regexp/regexp.go.html#3573578">pos</a></span><span class="op" id="3573640">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3573644">if</span>&nbsp;<span class="ident" id="3573647"><a href="/gostd/regexp/regexp.go.html#3573626">c</a></span>&nbsp;<span class="op" id="3573649">&lt;</span>&nbsp;<span class="ident" id="3573651"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3573655">.</span><span class="ident" id="3573656"><a href="/gostd/unicode/utf8/utf8.go.html#1805451">RuneSelf</a></span>&nbsp;<span class="op" id="3573665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3573670">return</span>&nbsp;<span class="builtintype" id="3573677">rune</span><span class="op" id="3573681">(</span><span class="ident" id="3573682"><a href="/gostd/regexp/regexp.go.html#3573626">c</a></span><span class="op" id="3573683">)</span><span class="op" id="3573684">,</span>&nbsp;<span class="num" id="3573686">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3573690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3573694">return</span>&nbsp;<span class="ident" id="3573701"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3573705">.</span><span class="ident" id="3573706"><a href="/gostd/unicode/utf8/utf8.go.html#1810428">DecodeRuneInString</a></span><span class="op" id="3573724">(</span><span class="ident" id="3573725"><a href="/gostd/regexp/regexp.go.html#3573557">i</a></span><span class="op" id="3573726">.</span><span class="ident" id="3573727"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span><span class="op" id="3573730">[</span><span class="ident" id="3573731"><a href="/gostd/regexp/regexp.go.html#3573578">pos</a></span><span class="op" id="3573734">:</span><span class="op" id="3573735">]</span><span class="op" id="3573736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3573739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3573742">return</span>&nbsp;<span class="ident" id="3573749"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><span class="op" id="3573758">,</span>&nbsp;<span class="num" id="3573760">0</span><br>
<span class="lineno"></span><span class="op" id="3573762">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span><span class="keyword" id="3573765">func</span>&nbsp;<span class="op" id="3573770">(</span><span class="ident" id="3573771">i</span>&nbsp;<span class="op" id="3573773">*</span><span class="ident" id="3573774"><a href="/gostd/regexp/regexp.go.html#3573515">inputString</a></span><span class="op" id="3573785">)</span>&nbsp;<span class="ident" id="3573787">canCheckPrefix</span><span class="op" id="3573801">(</span><span class="op" id="3573802">)</span>&nbsp;<span class="builtintype" id="3573804">bool</span>&nbsp;<span class="op" id="3573809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3573812">return</span>&nbsp;<span class="builtintype" id="3573819">true</span><br>
<span class="lineno"></span><span class="op" id="3573824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="3573827">func</span>&nbsp;<span class="op" id="3573832">(</span><span class="ident" id="3573833">i</span>&nbsp;<span class="op" id="3573835">*</span><span class="ident" id="3573836"><a href="/gostd/regexp/regexp.go.html#3573515">inputString</a></span><span class="op" id="3573847">)</span>&nbsp;<span class="ident" id="3573849">hasPrefix</span><span class="op" id="3573858">(</span><span class="ident" id="3573859">re</span>&nbsp;<span class="op" id="3573862">*</span><span class="ident" id="3573863"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3573869">)</span>&nbsp;<span class="builtintype" id="3573871">bool</span>&nbsp;<span class="op" id="3573876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3573879">return</span>&nbsp;<span class="ident" id="3573886"><a href="/gostd/regexp/regexp.go.html#3566821">strings</a></span><span class="op" id="3573893">.</span><span class="ident" id="3573894"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="3573903">(</span><span class="ident" id="3573904"><a href="/gostd/regexp/regexp.go.html#3573833">i</a></span><span class="op" id="3573905">.</span><span class="ident" id="3573906"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span><span class="op" id="3573909">,</span>&nbsp;<span class="ident" id="3573911"><a href="/gostd/regexp/regexp.go.html#3573859">re</a></span><span class="op" id="3573913">.</span><span class="ident" id="3573914"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span><span class="op" id="3573920">)</span><br>
<span class="lineno"></span><span class="op" id="3573922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3573925">func</span>&nbsp;<span class="op" id="3573930">(</span><span class="ident" id="3573931">i</span>&nbsp;<span class="op" id="3573933">*</span><span class="ident" id="3573934"><a href="/gostd/regexp/regexp.go.html#3573515">inputString</a></span><span class="op" id="3573945">)</span>&nbsp;<span class="ident" id="3573947">index</span><span class="op" id="3573952">(</span><span class="ident" id="3573953">re</span>&nbsp;<span class="op" id="3573956">*</span><span class="ident" id="3573957"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3573963">,</span>&nbsp;<span class="ident" id="3573965">pos</span>&nbsp;<span class="builtintype" id="3573969">int</span><span class="op" id="3573972">)</span>&nbsp;<span class="builtintype" id="3573974">int</span>&nbsp;<span class="op" id="3573978">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3573981">return</span>&nbsp;<span class="ident" id="3573988"><a href="/gostd/regexp/regexp.go.html#3566821">strings</a></span><span class="op" id="3573995">.</span><span class="ident" id="3573996"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="3574001">(</span><span class="ident" id="3574002"><a href="/gostd/regexp/regexp.go.html#3573931">i</a></span><span class="op" id="3574003">.</span><span class="ident" id="3574004"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span><span class="op" id="3574007">[</span><span class="ident" id="3574008"><a href="/gostd/regexp/regexp.go.html#3573965">pos</a></span><span class="op" id="3574011">:</span><span class="op" id="3574012">]</span><span class="op" id="3574013">,</span>&nbsp;<span class="ident" id="3574015"><a href="/gostd/regexp/regexp.go.html#3573953">re</a></span><span class="op" id="3574017">.</span><span class="ident" id="3574018"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span><span class="op" id="3574024">)</span><br>
<span class="lineno"></span><span class="op" id="3574026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3574029">func</span>&nbsp;<span class="op" id="3574034">(</span><span class="ident" id="3574035">i</span>&nbsp;<span class="op" id="3574037">*</span><span class="ident" id="3574038"><a href="/gostd/regexp/regexp.go.html#3573515">inputString</a></span><span class="op" id="3574049">)</span>&nbsp;<span class="ident" id="3574051">context</span><span class="op" id="3574058">(</span><span class="ident" id="3574059">pos</span>&nbsp;<span class="builtintype" id="3574063">int</span><span class="op" id="3574066">)</span>&nbsp;<span class="ident" id="3574068"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3574074">.</span><span class="ident" id="3574075"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span>&nbsp;<span class="op" id="3574083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3574086">r1</span><span class="op" id="3574088">,</span>&nbsp;<span class="ident" id="3574090">r2</span>&nbsp;<span class="op" id="3574093">:=</span>&nbsp;<span class="ident" id="3574096"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><span class="op" id="3574105">,</span>&nbsp;<span class="ident" id="3574107"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574118">if</span>&nbsp;<span class="ident" id="3574121"><a href="/gostd/regexp/regexp.go.html#3574059">pos</a></span>&nbsp;<span class="op" id="3574125">&gt;</span>&nbsp;<span class="num" id="3574127">0</span>&nbsp;<span class="op" id="3574129">&amp;&amp;</span>&nbsp;<span class="ident" id="3574132"><a href="/gostd/regexp/regexp.go.html#3574059">pos</a></span>&nbsp;<span class="op" id="3574136">&lt;=</span>&nbsp;<span class="builtinfunc" id="3574139">len</span><span class="op" id="3574142">(</span><span class="ident" id="3574143"><a href="/gostd/regexp/regexp.go.html#3574035">i</a></span><span class="op" id="3574144">.</span><span class="ident" id="3574145"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span><span class="op" id="3574148">)</span>&nbsp;<span class="op" id="3574150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3574154"><a href="/gostd/regexp/regexp.go.html#3574086">r1</a></span><span class="op" id="3574156">,</span>&nbsp;<span class="ident" id="3574158">_</span>&nbsp;<span class="op" id="3574160">=</span>&nbsp;<span class="ident" id="3574162"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3574166">.</span><span class="ident" id="3574167"><a href="/gostd/unicode/utf8/utf8.go.html#1811991">DecodeLastRuneInString</a></span><span class="op" id="3574189">(</span><span class="ident" id="3574190"><a href="/gostd/regexp/regexp.go.html#3574035">i</a></span><span class="op" id="3574191">.</span><span class="ident" id="3574192"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span><span class="op" id="3574195">[</span><span class="op" id="3574196">:</span><span class="ident" id="3574197"><a href="/gostd/regexp/regexp.go.html#3574059">pos</a></span><span class="op" id="3574200">]</span><span class="op" id="3574201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3574204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574207">if</span>&nbsp;<span class="ident" id="3574210"><a href="/gostd/regexp/regexp.go.html#3574059">pos</a></span>&nbsp;<span class="op" id="3574214">&lt;</span>&nbsp;<span class="builtinfunc" id="3574216">len</span><span class="op" id="3574219">(</span><span class="ident" id="3574220"><a href="/gostd/regexp/regexp.go.html#3574035">i</a></span><span class="op" id="3574221">.</span><span class="ident" id="3574222"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span><span class="op" id="3574225">)</span>&nbsp;<span class="op" id="3574227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3574231"><a href="/gostd/regexp/regexp.go.html#3574090">r2</a></span><span class="op" id="3574233">,</span>&nbsp;<span class="ident" id="3574235">_</span>&nbsp;<span class="op" id="3574237">=</span>&nbsp;<span class="ident" id="3574239"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3574243">.</span><span class="ident" id="3574244"><a href="/gostd/unicode/utf8/utf8.go.html#1810428">DecodeRuneInString</a></span><span class="op" id="3574262">(</span><span class="ident" id="3574263"><a href="/gostd/regexp/regexp.go.html#3574035">i</a></span><span class="op" id="3574264">.</span><span class="ident" id="3574265"><a href="/gostd/regexp/regexp.go.html#3573537">str</a></span><span class="op" id="3574268">[</span><span class="ident" id="3574269"><a href="/gostd/regexp/regexp.go.html#3574059">pos</a></span><span class="op" id="3574272">:</span><span class="op" id="3574273">]</span><span class="op" id="3574274">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3574277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574280">return</span>&nbsp;<span class="ident" id="3574287"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3574293">.</span><span class="ident" id="3574294"><a href="/gostd/regexp/syntax/prog.go.html#3660159">EmptyOpContext</a></span><span class="op" id="3574308">(</span><span class="ident" id="3574309"><a href="/gostd/regexp/regexp.go.html#3574086">r1</a></span><span class="op" id="3574311">,</span>&nbsp;<span class="ident" id="3574313"><a href="/gostd/regexp/regexp.go.html#3574090">r2</a></span><span class="op" id="3574315">)</span><br>
<span class="lineno"></span><span class="op" id="3574317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3574320">//&nbsp;inputBytes&nbsp;scans&nbsp;a&nbsp;byte&nbsp;slice.</span><br>
<span class="lineno">310</span><span class="keyword" id="3574354">type</span>&nbsp;<span class="ident" id="3574359">inputBytes</span>&nbsp;<span class="keyword" id="3574370">struct</span>&nbsp;<span class="op" id="3574377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3574380">str</span>&nbsp;<span class="op" id="3574384">[</span><span class="op" id="3574385">]</span><span class="builtintype" id="3574386">byte</span><br>
<span class="lineno"></span><span class="op" id="3574391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3574394">func</span>&nbsp;<span class="op" id="3574399">(</span><span class="ident" id="3574400">i</span>&nbsp;<span class="op" id="3574402">*</span><span class="ident" id="3574403"><a href="/gostd/regexp/regexp.go.html#3574359">inputBytes</a></span><span class="op" id="3574413">)</span>&nbsp;<span class="ident" id="3574415">step</span><span class="op" id="3574419">(</span><span class="ident" id="3574420">pos</span>&nbsp;<span class="builtintype" id="3574424">int</span><span class="op" id="3574427">)</span>&nbsp;<span class="op" id="3574429">(</span><span class="builtintype" id="3574430">rune</span><span class="op" id="3574434">,</span>&nbsp;<span class="builtintype" id="3574436">int</span><span class="op" id="3574439">)</span>&nbsp;<span class="op" id="3574441">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574444">if</span>&nbsp;<span class="ident" id="3574447"><a href="/gostd/regexp/regexp.go.html#3574420">pos</a></span>&nbsp;<span class="op" id="3574451">&lt;</span>&nbsp;<span class="builtinfunc" id="3574453">len</span><span class="op" id="3574456">(</span><span class="ident" id="3574457"><a href="/gostd/regexp/regexp.go.html#3574400">i</a></span><span class="op" id="3574458">.</span><span class="ident" id="3574459"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span><span class="op" id="3574462">)</span>&nbsp;<span class="op" id="3574464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3574468">c</span>&nbsp;<span class="op" id="3574470">:=</span>&nbsp;<span class="ident" id="3574473"><a href="/gostd/regexp/regexp.go.html#3574400">i</a></span><span class="op" id="3574474">.</span><span class="ident" id="3574475"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span><span class="op" id="3574478">[</span><span class="ident" id="3574479"><a href="/gostd/regexp/regexp.go.html#3574420">pos</a></span><span class="op" id="3574482">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574486">if</span>&nbsp;<span class="ident" id="3574489"><a href="/gostd/regexp/regexp.go.html#3574468">c</a></span>&nbsp;<span class="op" id="3574491">&lt;</span>&nbsp;<span class="ident" id="3574493"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3574497">.</span><span class="ident" id="3574498"><a href="/gostd/unicode/utf8/utf8.go.html#1805451">RuneSelf</a></span>&nbsp;<span class="op" id="3574507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574512">return</span>&nbsp;<span class="builtintype" id="3574519">rune</span><span class="op" id="3574523">(</span><span class="ident" id="3574524"><a href="/gostd/regexp/regexp.go.html#3574468">c</a></span><span class="op" id="3574525">)</span><span class="op" id="3574526">,</span>&nbsp;<span class="num" id="3574528">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3574532">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574536">return</span>&nbsp;<span class="ident" id="3574543"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3574547">.</span><span class="ident" id="3574548"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="3574558">(</span><span class="ident" id="3574559"><a href="/gostd/regexp/regexp.go.html#3574400">i</a></span><span class="op" id="3574560">.</span><span class="ident" id="3574561"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span><span class="op" id="3574564">[</span><span class="ident" id="3574565"><a href="/gostd/regexp/regexp.go.html#3574420">pos</a></span><span class="op" id="3574568">:</span><span class="op" id="3574569">]</span><span class="op" id="3574570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3574573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574576">return</span>&nbsp;<span class="ident" id="3574583"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><span class="op" id="3574592">,</span>&nbsp;<span class="num" id="3574594">0</span><br>
<span class="lineno"></span><span class="op" id="3574596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="keyword" id="3574599">func</span>&nbsp;<span class="op" id="3574604">(</span><span class="ident" id="3574605">i</span>&nbsp;<span class="op" id="3574607">*</span><span class="ident" id="3574608"><a href="/gostd/regexp/regexp.go.html#3574359">inputBytes</a></span><span class="op" id="3574618">)</span>&nbsp;<span class="ident" id="3574620">canCheckPrefix</span><span class="op" id="3574634">(</span><span class="op" id="3574635">)</span>&nbsp;<span class="builtintype" id="3574637">bool</span>&nbsp;<span class="op" id="3574642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574645">return</span>&nbsp;<span class="builtintype" id="3574652">true</span><br>
<span class="lineno"></span><span class="op" id="3574657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3574660">func</span>&nbsp;<span class="op" id="3574665">(</span><span class="ident" id="3574666">i</span>&nbsp;<span class="op" id="3574668">*</span><span class="ident" id="3574669"><a href="/gostd/regexp/regexp.go.html#3574359">inputBytes</a></span><span class="op" id="3574679">)</span>&nbsp;<span class="ident" id="3574681">hasPrefix</span><span class="op" id="3574690">(</span><span class="ident" id="3574691">re</span>&nbsp;<span class="op" id="3574694">*</span><span class="ident" id="3574695"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3574701">)</span>&nbsp;<span class="builtintype" id="3574703">bool</span>&nbsp;<span class="op" id="3574708">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574711">return</span>&nbsp;<span class="ident" id="3574718"><a href="/gostd/regexp/regexp.go.html#3566778">bytes</a></span><span class="op" id="3574723">.</span><span class="ident" id="3574724"><a href="/gostd/bytes/bytes.go.html#1403977">HasPrefix</a></span><span class="op" id="3574733">(</span><span class="ident" id="3574734"><a href="/gostd/regexp/regexp.go.html#3574666">i</a></span><span class="op" id="3574735">.</span><span class="ident" id="3574736"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span><span class="op" id="3574739">,</span>&nbsp;<span class="ident" id="3574741"><a href="/gostd/regexp/regexp.go.html#3574691">re</a></span><span class="op" id="3574743">.</span><span class="ident" id="3574744"><a href="/gostd/regexp/regexp.go.html#3567301">prefixBytes</a></span><span class="op" id="3574755">)</span><br>
<span class="lineno"></span><span class="op" id="3574757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3574760">func</span>&nbsp;<span class="op" id="3574765">(</span><span class="ident" id="3574766">i</span>&nbsp;<span class="op" id="3574768">*</span><span class="ident" id="3574769"><a href="/gostd/regexp/regexp.go.html#3574359">inputBytes</a></span><span class="op" id="3574779">)</span>&nbsp;<span class="ident" id="3574781">index</span><span class="op" id="3574786">(</span><span class="ident" id="3574787">re</span>&nbsp;<span class="op" id="3574790">*</span><span class="ident" id="3574791"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3574797">,</span>&nbsp;<span class="ident" id="3574799">pos</span>&nbsp;<span class="builtintype" id="3574803">int</span><span class="op" id="3574806">)</span>&nbsp;<span class="builtintype" id="3574808">int</span>&nbsp;<span class="op" id="3574812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574815">return</span>&nbsp;<span class="ident" id="3574822"><a href="/gostd/regexp/regexp.go.html#3566778">bytes</a></span><span class="op" id="3574827">.</span><span class="ident" id="3574828"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="3574833">(</span><span class="ident" id="3574834"><a href="/gostd/regexp/regexp.go.html#3574766">i</a></span><span class="op" id="3574835">.</span><span class="ident" id="3574836"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span><span class="op" id="3574839">[</span><span class="ident" id="3574840"><a href="/gostd/regexp/regexp.go.html#3574799">pos</a></span><span class="op" id="3574843">:</span><span class="op" id="3574844">]</span><span class="op" id="3574845">,</span>&nbsp;<span class="ident" id="3574847"><a href="/gostd/regexp/regexp.go.html#3574787">re</a></span><span class="op" id="3574849">.</span><span class="ident" id="3574850"><a href="/gostd/regexp/regexp.go.html#3567301">prefixBytes</a></span><span class="op" id="3574861">)</span><br>
<span class="lineno">335</span><span class="op" id="3574863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3574866">func</span>&nbsp;<span class="op" id="3574871">(</span><span class="ident" id="3574872">i</span>&nbsp;<span class="op" id="3574874">*</span><span class="ident" id="3574875"><a href="/gostd/regexp/regexp.go.html#3574359">inputBytes</a></span><span class="op" id="3574885">)</span>&nbsp;<span class="ident" id="3574887">context</span><span class="op" id="3574894">(</span><span class="ident" id="3574895">pos</span>&nbsp;<span class="builtintype" id="3574899">int</span><span class="op" id="3574902">)</span>&nbsp;<span class="ident" id="3574904"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3574910">.</span><span class="ident" id="3574911"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span>&nbsp;<span class="op" id="3574919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3574922">r1</span><span class="op" id="3574924">,</span>&nbsp;<span class="ident" id="3574926">r2</span>&nbsp;<span class="op" id="3574929">:=</span>&nbsp;<span class="ident" id="3574932"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><span class="op" id="3574941">,</span>&nbsp;<span class="ident" id="3574943"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3574954">if</span>&nbsp;<span class="ident" id="3574957"><a href="/gostd/regexp/regexp.go.html#3574895">pos</a></span>&nbsp;<span class="op" id="3574961">&gt;</span>&nbsp;<span class="num" id="3574963">0</span>&nbsp;<span class="op" id="3574965">&amp;&amp;</span>&nbsp;<span class="ident" id="3574968"><a href="/gostd/regexp/regexp.go.html#3574895">pos</a></span>&nbsp;<span class="op" id="3574972">&lt;=</span>&nbsp;<span class="builtinfunc" id="3574975">len</span><span class="op" id="3574978">(</span><span class="ident" id="3574979"><a href="/gostd/regexp/regexp.go.html#3574872">i</a></span><span class="op" id="3574980">.</span><span class="ident" id="3574981"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span><span class="op" id="3574984">)</span>&nbsp;<span class="op" id="3574986">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3574990"><a href="/gostd/regexp/regexp.go.html#3574922">r1</a></span><span class="op" id="3574992">,</span>&nbsp;<span class="ident" id="3574994">_</span>&nbsp;<span class="op" id="3574996">=</span>&nbsp;<span class="ident" id="3574998"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3575002">.</span><span class="ident" id="3575003"><a href="/gostd/unicode/utf8/utf8.go.html#1810995">DecodeLastRune</a></span><span class="op" id="3575017">(</span><span class="ident" id="3575018"><a href="/gostd/regexp/regexp.go.html#3574872">i</a></span><span class="op" id="3575019">.</span><span class="ident" id="3575020"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span><span class="op" id="3575023">[</span><span class="op" id="3575024">:</span><span class="ident" id="3575025"><a href="/gostd/regexp/regexp.go.html#3574895">pos</a></span><span class="op" id="3575028">]</span><span class="op" id="3575029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3575032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575035">if</span>&nbsp;<span class="ident" id="3575038"><a href="/gostd/regexp/regexp.go.html#3574895">pos</a></span>&nbsp;<span class="op" id="3575042">&lt;</span>&nbsp;<span class="builtinfunc" id="3575044">len</span><span class="op" id="3575047">(</span><span class="ident" id="3575048"><a href="/gostd/regexp/regexp.go.html#3574872">i</a></span><span class="op" id="3575049">.</span><span class="ident" id="3575050"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span><span class="op" id="3575053">)</span>&nbsp;<span class="op" id="3575055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575059"><a href="/gostd/regexp/regexp.go.html#3574926">r2</a></span><span class="op" id="3575061">,</span>&nbsp;<span class="ident" id="3575063">_</span>&nbsp;<span class="op" id="3575065">=</span>&nbsp;<span class="ident" id="3575067"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3575071">.</span><span class="ident" id="3575072"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="3575082">(</span><span class="ident" id="3575083"><a href="/gostd/regexp/regexp.go.html#3574872">i</a></span><span class="op" id="3575084">.</span><span class="ident" id="3575085"><a href="/gostd/regexp/regexp.go.html#3574380">str</a></span><span class="op" id="3575088">[</span><span class="ident" id="3575089"><a href="/gostd/regexp/regexp.go.html#3574895">pos</a></span><span class="op" id="3575092">:</span><span class="op" id="3575093">]</span><span class="op" id="3575094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3575097">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575100">return</span>&nbsp;<span class="ident" id="3575107"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3575113">.</span><span class="ident" id="3575114"><a href="/gostd/regexp/syntax/prog.go.html#3660159">EmptyOpContext</a></span><span class="op" id="3575128">(</span><span class="ident" id="3575129"><a href="/gostd/regexp/regexp.go.html#3574922">r1</a></span><span class="op" id="3575131">,</span>&nbsp;<span class="ident" id="3575133"><a href="/gostd/regexp/regexp.go.html#3574926">r2</a></span><span class="op" id="3575135">)</span><br>
<span class="lineno"></span><span class="op" id="3575137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3575140">//&nbsp;inputReader&nbsp;scans&nbsp;a&nbsp;RuneReader.</span><br>
<span class="lineno"></span><span class="keyword" id="3575175">type</span>&nbsp;<span class="ident" id="3575180">inputReader</span>&nbsp;<span class="keyword" id="3575192">struct</span>&nbsp;<span class="op" id="3575199">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575202">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575208"><a href="/gostd/regexp/regexp.go.html#3566787">io</a></span><span class="op" id="3575210">.</span><span class="ident" id="3575211"><a href="/gostd/io/io.go.html#1427733">RuneReader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575223">atEOT</span>&nbsp;<span class="builtintype" id="3575229">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575235">pos</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3575241">int</span><br>
<span class="lineno"></span><span class="op" id="3575245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="keyword" id="3575248">func</span>&nbsp;<span class="op" id="3575253">(</span><span class="ident" id="3575254">i</span>&nbsp;<span class="op" id="3575256">*</span><span class="ident" id="3575257"><a href="/gostd/regexp/regexp.go.html#3575180">inputReader</a></span><span class="op" id="3575268">)</span>&nbsp;<span class="ident" id="3575270">step</span><span class="op" id="3575274">(</span><span class="ident" id="3575275">pos</span>&nbsp;<span class="builtintype" id="3575279">int</span><span class="op" id="3575282">)</span>&nbsp;<span class="op" id="3575284">(</span><span class="builtintype" id="3575285">rune</span><span class="op" id="3575289">,</span>&nbsp;<span class="builtintype" id="3575291">int</span><span class="op" id="3575294">)</span>&nbsp;<span class="op" id="3575296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575299">if</span>&nbsp;<span class="op" id="3575302">!</span><span class="ident" id="3575303"><a href="/gostd/regexp/regexp.go.html#3575254">i</a></span><span class="op" id="3575304">.</span><span class="ident" id="3575305"><a href="/gostd/regexp/regexp.go.html#3575223">atEOT</a></span>&nbsp;<span class="op" id="3575311">&amp;&amp;</span>&nbsp;<span class="ident" id="3575314"><a href="/gostd/regexp/regexp.go.html#3575275">pos</a></span>&nbsp;<span class="op" id="3575318">!=</span>&nbsp;<span class="ident" id="3575321"><a href="/gostd/regexp/regexp.go.html#3575254">i</a></span><span class="op" id="3575322">.</span><span class="ident" id="3575323"><a href="/gostd/regexp/regexp.go.html#3575235">pos</a></span>&nbsp;<span class="op" id="3575327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575331">return</span>&nbsp;<span class="ident" id="3575338"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><span class="op" id="3575347">,</span>&nbsp;<span class="num" id="3575349">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3575353">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575356">r</span><span class="op" id="3575357">,</span>&nbsp;<span class="ident" id="3575359">w</span><span class="op" id="3575360">,</span>&nbsp;<span class="ident" id="3575362">err</span>&nbsp;<span class="op" id="3575366">:=</span>&nbsp;<span class="ident" id="3575369"><a href="/gostd/regexp/regexp.go.html#3575254">i</a></span><span class="op" id="3575370">.</span><span class="ident" id="3575371"><a href="/gostd/regexp/regexp.go.html#3575202">r</a></span><span class="op" id="3575372">.</span><span class="ident" id="3575373"><a href="/gostd/io/io.go.html#1427757">ReadRune</a></span><span class="op" id="3575381">(</span><span class="op" id="3575382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575385">if</span>&nbsp;<span class="ident" id="3575388"><a href="/gostd/regexp/regexp.go.html#3575362">err</a></span>&nbsp;<span class="op" id="3575392">!=</span>&nbsp;<span class="builtintype" id="3575395">nil</span>&nbsp;<span class="op" id="3575399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575403"><a href="/gostd/regexp/regexp.go.html#3575254">i</a></span><span class="op" id="3575404">.</span><span class="ident" id="3575405"><a href="/gostd/regexp/regexp.go.html#3575223">atEOT</a></span>&nbsp;<span class="op" id="3575411">=</span>&nbsp;<span class="builtintype" id="3575413">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575420">return</span>&nbsp;<span class="ident" id="3575427"><a href="/gostd/regexp/regexp.go.html#3573103">endOfText</a></span><span class="op" id="3575436">,</span>&nbsp;<span class="num" id="3575438">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3575441">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575444"><a href="/gostd/regexp/regexp.go.html#3575254">i</a></span><span class="op" id="3575445">.</span><span class="ident" id="3575446"><a href="/gostd/regexp/regexp.go.html#3575235">pos</a></span>&nbsp;<span class="op" id="3575450">+=</span>&nbsp;<span class="ident" id="3575453"><a href="/gostd/regexp/regexp.go.html#3575359">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575456">return</span>&nbsp;<span class="ident" id="3575463"><a href="/gostd/regexp/regexp.go.html#3575356">r</a></span><span class="op" id="3575464">,</span>&nbsp;<span class="ident" id="3575466"><a href="/gostd/regexp/regexp.go.html#3575359">w</a></span><br>
<span class="lineno"></span><span class="op" id="3575468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3575471">func</span>&nbsp;<span class="op" id="3575476">(</span><span class="ident" id="3575477">i</span>&nbsp;<span class="op" id="3575479">*</span><span class="ident" id="3575480"><a href="/gostd/regexp/regexp.go.html#3575180">inputReader</a></span><span class="op" id="3575491">)</span>&nbsp;<span class="ident" id="3575493">canCheckPrefix</span><span class="op" id="3575507">(</span><span class="op" id="3575508">)</span>&nbsp;<span class="builtintype" id="3575510">bool</span>&nbsp;<span class="op" id="3575515">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575518">return</span>&nbsp;<span class="builtintype" id="3575525">false</span><br>
<span class="lineno"></span><span class="op" id="3575531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3575534">func</span>&nbsp;<span class="op" id="3575539">(</span><span class="ident" id="3575540">i</span>&nbsp;<span class="op" id="3575542">*</span><span class="ident" id="3575543"><a href="/gostd/regexp/regexp.go.html#3575180">inputReader</a></span><span class="op" id="3575554">)</span>&nbsp;<span class="ident" id="3575556">hasPrefix</span><span class="op" id="3575565">(</span><span class="ident" id="3575566">re</span>&nbsp;<span class="op" id="3575569">*</span><span class="ident" id="3575570"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3575576">)</span>&nbsp;<span class="builtintype" id="3575578">bool</span>&nbsp;<span class="op" id="3575583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575586">return</span>&nbsp;<span class="builtintype" id="3575593">false</span><br>
<span class="lineno">375</span><span class="op" id="3575599">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3575602">func</span>&nbsp;<span class="op" id="3575607">(</span><span class="ident" id="3575608">i</span>&nbsp;<span class="op" id="3575610">*</span><span class="ident" id="3575611"><a href="/gostd/regexp/regexp.go.html#3575180">inputReader</a></span><span class="op" id="3575622">)</span>&nbsp;<span class="ident" id="3575624">index</span><span class="op" id="3575629">(</span><span class="ident" id="3575630">re</span>&nbsp;<span class="op" id="3575633">*</span><span class="ident" id="3575634"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3575640">,</span>&nbsp;<span class="ident" id="3575642">pos</span>&nbsp;<span class="builtintype" id="3575646">int</span><span class="op" id="3575649">)</span>&nbsp;<span class="builtintype" id="3575651">int</span>&nbsp;<span class="op" id="3575655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575658">return</span>&nbsp;<span class="op" id="3575665">-</span><span class="num" id="3575666">1</span><br>
<span class="lineno"></span><span class="op" id="3575668">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span><span class="keyword" id="3575671">func</span>&nbsp;<span class="op" id="3575676">(</span><span class="ident" id="3575677">i</span>&nbsp;<span class="op" id="3575679">*</span><span class="ident" id="3575680"><a href="/gostd/regexp/regexp.go.html#3575180">inputReader</a></span><span class="op" id="3575691">)</span>&nbsp;<span class="ident" id="3575693">context</span><span class="op" id="3575700">(</span><span class="ident" id="3575701">pos</span>&nbsp;<span class="builtintype" id="3575705">int</span><span class="op" id="3575708">)</span>&nbsp;<span class="ident" id="3575710"><a href="/gostd/regexp/regexp.go.html#3566793">syntax</a></span><span class="op" id="3575716">.</span><span class="ident" id="3575717"><a href="/gostd/regexp/syntax/prog.go.html#3659736">EmptyOp</a></span>&nbsp;<span class="op" id="3575725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3575728">return</span>&nbsp;<span class="num" id="3575735">0</span><br>
<span class="lineno"></span><span class="op" id="3575737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="comment" id="3575740">//&nbsp;LiteralPrefix&nbsp;returns&nbsp;a&nbsp;literal&nbsp;string&nbsp;that&nbsp;must&nbsp;begin&nbsp;any&nbsp;match</span><br>
<span class="lineno"></span><span class="comment" id="3575808">//&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;re.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;boolean&nbsp;true&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3575877">//&nbsp;literal&nbsp;string&nbsp;comprises&nbsp;the&nbsp;entire&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="keyword" id="3575936">func</span>&nbsp;<span class="op" id="3575941">(</span><span class="ident" id="3575942">re</span>&nbsp;<span class="op" id="3575945">*</span><span class="ident" id="3575946"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3575952">)</span>&nbsp;<span class="ident" id="3575954">LiteralPrefix</span><span class="op" id="3575967">(</span><span class="op" id="3575968">)</span>&nbsp;<span class="op" id="3575970">(</span><span class="ident" id="3575971">prefix</span>&nbsp;<span class="builtintype" id="3575978">string</span><span class="op" id="3575984">,</span>&nbsp;<span class="ident" id="3575986">complete</span>&nbsp;<span class="builtintype" id="3575995">bool</span><span class="op" id="3575999">)</span>&nbsp;<span class="op" id="3576001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576004">return</span>&nbsp;<span class="ident" id="3576011"><a href="/gostd/regexp/regexp.go.html#3575942">re</a></span><span class="op" id="3576013">.</span><span class="ident" id="3576014"><a href="/gostd/regexp/regexp.go.html#3567229">prefix</a></span><span class="op" id="3576020">,</span>&nbsp;<span class="ident" id="3576022"><a href="/gostd/regexp/regexp.go.html#3575942">re</a></span><span class="op" id="3576024">.</span><span class="ident" id="3576025"><a href="/gostd/regexp/regexp.go.html#3567355">prefixComplete</a></span><br>
<span class="lineno">390</span><span class="op" id="3576040">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3576043">//&nbsp;MatchReader&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Regexp&nbsp;matches&nbsp;the&nbsp;text&nbsp;read&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3576114">//&nbsp;RuneReader.</span><br>
<span class="lineno"></span><span class="keyword" id="3576129">func</span>&nbsp;<span class="op" id="3576134">(</span><span class="ident" id="3576135">re</span>&nbsp;<span class="op" id="3576138">*</span><span class="ident" id="3576139"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3576145">)</span>&nbsp;<span class="ident" id="3576147">MatchReader</span><span class="op" id="3576158">(</span><span class="ident" id="3576159">r</span>&nbsp;<span class="ident" id="3576161"><a href="/gostd/regexp/regexp.go.html#3566787">io</a></span><span class="op" id="3576163">.</span><span class="ident" id="3576164"><a href="/gostd/io/io.go.html#1427733">RuneReader</a></span><span class="op" id="3576174">)</span>&nbsp;<span class="builtintype" id="3576176">bool</span>&nbsp;<span class="op" id="3576181">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576184">return</span>&nbsp;<span class="ident" id="3576191"><a href="/gostd/regexp/regexp.go.html#3576135">re</a></span><span class="op" id="3576193">.</span><span class="ident" id="3576194"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3576203">(</span><span class="ident" id="3576204"><a href="/gostd/regexp/regexp.go.html#3576159">r</a></span><span class="op" id="3576205">,</span>&nbsp;<span class="builtintype" id="3576207">nil</span><span class="op" id="3576210">,</span>&nbsp;<span class="string" id="3576212">&#34;&#34;</span><span class="op" id="3576214">,</span>&nbsp;<span class="num" id="3576216">0</span><span class="op" id="3576217">,</span>&nbsp;<span class="num" id="3576219">0</span><span class="op" id="3576220">)</span>&nbsp;<span class="op" id="3576222">!=</span>&nbsp;<span class="builtintype" id="3576225">nil</span><br>
<span class="lineno"></span><span class="op" id="3576229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3576232">//&nbsp;MatchString&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Regexp&nbsp;matches&nbsp;the&nbsp;string&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3576296">func</span>&nbsp;<span class="op" id="3576301">(</span><span class="ident" id="3576302">re</span>&nbsp;<span class="op" id="3576305">*</span><span class="ident" id="3576306"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3576312">)</span>&nbsp;<span class="ident" id="3576314">MatchString</span><span class="op" id="3576325">(</span><span class="ident" id="3576326">s</span>&nbsp;<span class="builtintype" id="3576328">string</span><span class="op" id="3576334">)</span>&nbsp;<span class="builtintype" id="3576336">bool</span>&nbsp;<span class="op" id="3576341">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576344">return</span>&nbsp;<span class="ident" id="3576351"><a href="/gostd/regexp/regexp.go.html#3576302">re</a></span><span class="op" id="3576353">.</span><span class="ident" id="3576354"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3576363">(</span><span class="builtintype" id="3576364">nil</span><span class="op" id="3576367">,</span>&nbsp;<span class="builtintype" id="3576369">nil</span><span class="op" id="3576372">,</span>&nbsp;<span class="ident" id="3576374"><a href="/gostd/regexp/regexp.go.html#3576326">s</a></span><span class="op" id="3576375">,</span>&nbsp;<span class="num" id="3576377">0</span><span class="op" id="3576378">,</span>&nbsp;<span class="num" id="3576380">0</span><span class="op" id="3576381">)</span>&nbsp;<span class="op" id="3576383">!=</span>&nbsp;<span class="builtintype" id="3576386">nil</span><br>
<span class="lineno"></span><span class="op" id="3576390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3576393">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Regexp&nbsp;matches&nbsp;the&nbsp;byte&nbsp;slice&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3576455">func</span>&nbsp;<span class="op" id="3576460">(</span><span class="ident" id="3576461">re</span>&nbsp;<span class="op" id="3576464">*</span><span class="ident" id="3576465"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3576471">)</span>&nbsp;<span class="ident" id="3576473">Match</span><span class="op" id="3576478">(</span><span class="ident" id="3576479">b</span>&nbsp;<span class="op" id="3576481">[</span><span class="op" id="3576482">]</span><span class="builtintype" id="3576483">byte</span><span class="op" id="3576487">)</span>&nbsp;<span class="builtintype" id="3576489">bool</span>&nbsp;<span class="op" id="3576494">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576497">return</span>&nbsp;<span class="ident" id="3576504"><a href="/gostd/regexp/regexp.go.html#3576461">re</a></span><span class="op" id="3576506">.</span><span class="ident" id="3576507"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3576516">(</span><span class="builtintype" id="3576517">nil</span><span class="op" id="3576520">,</span>&nbsp;<span class="ident" id="3576522"><a href="/gostd/regexp/regexp.go.html#3576479">b</a></span><span class="op" id="3576523">,</span>&nbsp;<span class="string" id="3576525">&#34;&#34;</span><span class="op" id="3576527">,</span>&nbsp;<span class="num" id="3576529">0</span><span class="op" id="3576530">,</span>&nbsp;<span class="num" id="3576532">0</span><span class="op" id="3576533">)</span>&nbsp;<span class="op" id="3576535">!=</span>&nbsp;<span class="builtintype" id="3576538">nil</span><br>
<span class="lineno"></span><span class="op" id="3576542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3576545">//&nbsp;MatchReader&nbsp;checks&nbsp;whether&nbsp;a&nbsp;textual&nbsp;regular&nbsp;expression&nbsp;matches&nbsp;the&nbsp;text</span><br>
<span class="lineno"></span><span class="comment" id="3576621">//&nbsp;read&nbsp;by&nbsp;the&nbsp;RuneReader.&nbsp;&nbsp;More&nbsp;complicated&nbsp;queries&nbsp;need&nbsp;to&nbsp;use&nbsp;Compile&nbsp;and</span><br>
<span class="lineno">410</span><span class="comment" id="3576698">//&nbsp;the&nbsp;full&nbsp;Regexp&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3576728">func</span>&nbsp;<span class="ident" id="3576733">MatchReader</span><span class="op" id="3576744">(</span><span class="ident" id="3576745">pattern</span>&nbsp;<span class="builtintype" id="3576753">string</span><span class="op" id="3576759">,</span>&nbsp;<span class="ident" id="3576761">r</span>&nbsp;<span class="ident" id="3576763"><a href="/gostd/regexp/regexp.go.html#3566787">io</a></span><span class="op" id="3576765">.</span><span class="ident" id="3576766"><a href="/gostd/io/io.go.html#1427733">RuneReader</a></span><span class="op" id="3576776">)</span>&nbsp;<span class="op" id="3576778">(</span><span class="ident" id="3576779">matched</span>&nbsp;<span class="builtintype" id="3576787">bool</span><span class="op" id="3576791">,</span>&nbsp;<span class="ident" id="3576793">err</span>&nbsp;<span class="builtintype" id="3576797">error</span><span class="op" id="3576802">)</span>&nbsp;<span class="op" id="3576804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3576807">re</span><span class="op" id="3576809">,</span>&nbsp;<span class="ident" id="3576811"><a href="/gostd/regexp/regexp.go.html#3576793">err</a></span>&nbsp;<span class="op" id="3576815">:=</span>&nbsp;<span class="ident" id="3576818"><a href="/gostd/regexp/regexp.go.html#3568489">Compile</a></span><span class="op" id="3576825">(</span><span class="ident" id="3576826"><a href="/gostd/regexp/regexp.go.html#3576745">pattern</a></span><span class="op" id="3576833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576836">if</span>&nbsp;<span class="ident" id="3576839"><a href="/gostd/regexp/regexp.go.html#3576793">err</a></span>&nbsp;<span class="op" id="3576843">!=</span>&nbsp;<span class="builtintype" id="3576846">nil</span>&nbsp;<span class="op" id="3576850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576854">return</span>&nbsp;<span class="builtintype" id="3576861">false</span><span class="op" id="3576866">,</span>&nbsp;<span class="ident" id="3576868"><a href="/gostd/regexp/regexp.go.html#3576793">err</a></span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3576873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576876">return</span>&nbsp;<span class="ident" id="3576883"><a href="/gostd/regexp/regexp.go.html#3576807">re</a></span><span class="op" id="3576885">.</span><span class="ident" id="3576886"><a href="/gostd/regexp/regexp.go.html#3576147">MatchReader</a></span><span class="op" id="3576897">(</span><span class="ident" id="3576898"><a href="/gostd/regexp/regexp.go.html#3576761">r</a></span><span class="op" id="3576899">)</span><span class="op" id="3576900">,</span>&nbsp;<span class="builtintype" id="3576902">nil</span><br>
<span class="lineno"></span><span class="op" id="3576906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3576909">//&nbsp;MatchString&nbsp;checks&nbsp;whether&nbsp;a&nbsp;textual&nbsp;regular&nbsp;expression</span><br>
<span class="lineno">420</span><span class="comment" id="3576968">//&nbsp;matches&nbsp;a&nbsp;string.&nbsp;&nbsp;More&nbsp;complicated&nbsp;queries&nbsp;need</span><br>
<span class="lineno"></span><span class="comment" id="3577020">//&nbsp;to&nbsp;use&nbsp;Compile&nbsp;and&nbsp;the&nbsp;full&nbsp;Regexp&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3577069">func</span>&nbsp;<span class="ident" id="3577074">MatchString</span><span class="op" id="3577085">(</span><span class="ident" id="3577086">pattern</span>&nbsp;<span class="builtintype" id="3577094">string</span><span class="op" id="3577100">,</span>&nbsp;<span class="ident" id="3577102">s</span>&nbsp;<span class="builtintype" id="3577104">string</span><span class="op" id="3577110">)</span>&nbsp;<span class="op" id="3577112">(</span><span class="ident" id="3577113">matched</span>&nbsp;<span class="builtintype" id="3577121">bool</span><span class="op" id="3577125">,</span>&nbsp;<span class="ident" id="3577127">err</span>&nbsp;<span class="builtintype" id="3577131">error</span><span class="op" id="3577136">)</span>&nbsp;<span class="op" id="3577138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3577141">re</span><span class="op" id="3577143">,</span>&nbsp;<span class="ident" id="3577145"><a href="/gostd/regexp/regexp.go.html#3577127">err</a></span>&nbsp;<span class="op" id="3577149">:=</span>&nbsp;<span class="ident" id="3577152"><a href="/gostd/regexp/regexp.go.html#3568489">Compile</a></span><span class="op" id="3577159">(</span><span class="ident" id="3577160"><a href="/gostd/regexp/regexp.go.html#3577086">pattern</a></span><span class="op" id="3577167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577170">if</span>&nbsp;<span class="ident" id="3577173"><a href="/gostd/regexp/regexp.go.html#3577127">err</a></span>&nbsp;<span class="op" id="3577177">!=</span>&nbsp;<span class="builtintype" id="3577180">nil</span>&nbsp;<span class="op" id="3577184">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577188">return</span>&nbsp;<span class="builtintype" id="3577195">false</span><span class="op" id="3577200">,</span>&nbsp;<span class="ident" id="3577202"><a href="/gostd/regexp/regexp.go.html#3577127">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3577207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577210">return</span>&nbsp;<span class="ident" id="3577217"><a href="/gostd/regexp/regexp.go.html#3577141">re</a></span><span class="op" id="3577219">.</span><span class="ident" id="3577220"><a href="/gostd/regexp/regexp.go.html#3576314">MatchString</a></span><span class="op" id="3577231">(</span><span class="ident" id="3577232"><a href="/gostd/regexp/regexp.go.html#3577102">s</a></span><span class="op" id="3577233">)</span><span class="op" id="3577234">,</span>&nbsp;<span class="builtintype" id="3577236">nil</span><br>
<span class="lineno"></span><span class="op" id="3577240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="3577243">//&nbsp;Match&nbsp;checks&nbsp;whether&nbsp;a&nbsp;textual&nbsp;regular&nbsp;expression</span><br>
<span class="lineno"></span><span class="comment" id="3577296">//&nbsp;matches&nbsp;a&nbsp;byte&nbsp;slice.&nbsp;&nbsp;More&nbsp;complicated&nbsp;queries&nbsp;need</span><br>
<span class="lineno"></span><span class="comment" id="3577352">//&nbsp;to&nbsp;use&nbsp;Compile&nbsp;and&nbsp;the&nbsp;full&nbsp;Regexp&nbsp;interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3577401">func</span>&nbsp;<span class="ident" id="3577406">Match</span><span class="op" id="3577411">(</span><span class="ident" id="3577412">pattern</span>&nbsp;<span class="builtintype" id="3577420">string</span><span class="op" id="3577426">,</span>&nbsp;<span class="ident" id="3577428">b</span>&nbsp;<span class="op" id="3577430">[</span><span class="op" id="3577431">]</span><span class="builtintype" id="3577432">byte</span><span class="op" id="3577436">)</span>&nbsp;<span class="op" id="3577438">(</span><span class="ident" id="3577439">matched</span>&nbsp;<span class="builtintype" id="3577447">bool</span><span class="op" id="3577451">,</span>&nbsp;<span class="ident" id="3577453">err</span>&nbsp;<span class="builtintype" id="3577457">error</span><span class="op" id="3577462">)</span>&nbsp;<span class="op" id="3577464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3577467">re</span><span class="op" id="3577469">,</span>&nbsp;<span class="ident" id="3577471"><a href="/gostd/regexp/regexp.go.html#3577453">err</a></span>&nbsp;<span class="op" id="3577475">:=</span>&nbsp;<span class="ident" id="3577478"><a href="/gostd/regexp/regexp.go.html#3568489">Compile</a></span><span class="op" id="3577485">(</span><span class="ident" id="3577486"><a href="/gostd/regexp/regexp.go.html#3577412">pattern</a></span><span class="op" id="3577493">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577496">if</span>&nbsp;<span class="ident" id="3577499"><a href="/gostd/regexp/regexp.go.html#3577453">err</a></span>&nbsp;<span class="op" id="3577503">!=</span>&nbsp;<span class="builtintype" id="3577506">nil</span>&nbsp;<span class="op" id="3577510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577514">return</span>&nbsp;<span class="builtintype" id="3577521">false</span><span class="op" id="3577526">,</span>&nbsp;<span class="ident" id="3577528"><a href="/gostd/regexp/regexp.go.html#3577453">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3577533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577536">return</span>&nbsp;<span class="ident" id="3577543"><a href="/gostd/regexp/regexp.go.html#3577467">re</a></span><span class="op" id="3577545">.</span><span class="ident" id="3577546"><a href="/gostd/regexp/regexp.go.html#3576473">Match</a></span><span class="op" id="3577551">(</span><span class="ident" id="3577552"><a href="/gostd/regexp/regexp.go.html#3577428">b</a></span><span class="op" id="3577553">)</span><span class="op" id="3577554">,</span>&nbsp;<span class="builtintype" id="3577556">nil</span><br>
<span class="lineno"></span><span class="op" id="3577560">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="3577563">//&nbsp;ReplaceAllString&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="3577638">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;string&nbsp;repl.&nbsp;&nbsp;Inside&nbsp;repl,&nbsp;$&nbsp;signs&nbsp;are&nbsp;interpreted&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3577716">//&nbsp;in&nbsp;Expand,&nbsp;so&nbsp;for&nbsp;instance&nbsp;$1&nbsp;represents&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;first&nbsp;submatch.</span><br>
<span class="lineno"></span><span class="keyword" id="3577792">func</span>&nbsp;<span class="op" id="3577797">(</span><span class="ident" id="3577798">re</span>&nbsp;<span class="op" id="3577801">*</span><span class="ident" id="3577802"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3577808">)</span>&nbsp;<span class="ident" id="3577810">ReplaceAllString</span><span class="op" id="3577826">(</span><span class="ident" id="3577827">src</span><span class="op" id="3577830">,</span>&nbsp;<span class="ident" id="3577832">repl</span>&nbsp;<span class="builtintype" id="3577837">string</span><span class="op" id="3577843">)</span>&nbsp;<span class="builtintype" id="3577845">string</span>&nbsp;<span class="op" id="3577852">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3577855">n</span>&nbsp;<span class="op" id="3577857">:=</span>&nbsp;<span class="num" id="3577860">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577863">if</span>&nbsp;<span class="ident" id="3577866"><a href="/gostd/regexp/regexp.go.html#3566821">strings</a></span><span class="op" id="3577873">.</span><span class="ident" id="3577874"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="3577879">(</span><span class="ident" id="3577880"><a href="/gostd/regexp/regexp.go.html#3577832">repl</a></span><span class="op" id="3577884">,</span>&nbsp;<span class="string" id="3577886">&#34;$&#34;</span><span class="op" id="3577889">)</span>&nbsp;<span class="op" id="3577891">&gt;=</span>&nbsp;<span class="num" id="3577894">0</span>&nbsp;<span class="op" id="3577896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3577900"><a href="/gostd/regexp/regexp.go.html#3577855">n</a></span>&nbsp;<span class="op" id="3577902">=</span>&nbsp;<span class="num" id="3577904">2</span>&nbsp;<span class="op" id="3577906">*</span>&nbsp;<span class="op" id="3577908">(</span><span class="ident" id="3577909"><a href="/gostd/regexp/regexp.go.html#3577798">re</a></span><span class="op" id="3577911">.</span><span class="ident" id="3577912"><a href="/gostd/regexp/regexp.go.html#3567617">numSubexp</a></span>&nbsp;<span class="op" id="3577922">+</span>&nbsp;<span class="num" id="3577924">1</span><span class="op" id="3577925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3577928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3577931">b</span>&nbsp;<span class="op" id="3577933">:=</span>&nbsp;<span class="ident" id="3577936"><a href="/gostd/regexp/regexp.go.html#3577798">re</a></span><span class="op" id="3577938">.</span><span class="ident" id="3577939"><a href="/gostd/regexp/regexp.go.html#3578969">replaceAll</a></span><span class="op" id="3577949">(</span><span class="builtintype" id="3577950">nil</span><span class="op" id="3577953">,</span>&nbsp;<span class="ident" id="3577955"><a href="/gostd/regexp/regexp.go.html#3577827">src</a></span><span class="op" id="3577958">,</span>&nbsp;<span class="ident" id="3577960"><a href="/gostd/regexp/regexp.go.html#3577855">n</a></span><span class="op" id="3577961">,</span>&nbsp;<span class="keyword" id="3577963">func</span><span class="op" id="3577967">(</span><span class="ident" id="3577968">dst</span>&nbsp;<span class="op" id="3577972">[</span><span class="op" id="3577973">]</span><span class="builtintype" id="3577974">byte</span><span class="op" id="3577978">,</span>&nbsp;<span class="ident" id="3577980">match</span>&nbsp;<span class="op" id="3577986">[</span><span class="op" id="3577987">]</span><span class="builtintype" id="3577988">int</span><span class="op" id="3577991">)</span>&nbsp;<span class="op" id="3577993">[</span><span class="op" id="3577994">]</span><span class="builtintype" id="3577995">byte</span>&nbsp;<span class="op" id="3578000">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578004">return</span>&nbsp;<span class="ident" id="3578011"><a href="/gostd/regexp/regexp.go.html#3577798">re</a></span><span class="op" id="3578013">.</span><span class="ident" id="3578014"><a href="/gostd/regexp/regexp.go.html#3588014">expand</a></span><span class="op" id="3578020">(</span><span class="ident" id="3578021"><a href="/gostd/regexp/regexp.go.html#3577968">dst</a></span><span class="op" id="3578024">,</span>&nbsp;<span class="ident" id="3578026"><a href="/gostd/regexp/regexp.go.html#3577832">repl</a></span><span class="op" id="3578030">,</span>&nbsp;<span class="builtintype" id="3578032">nil</span><span class="op" id="3578035">,</span>&nbsp;<span class="ident" id="3578037"><a href="/gostd/regexp/regexp.go.html#3577827">src</a></span><span class="op" id="3578040">,</span>&nbsp;<span class="ident" id="3578042"><a href="/gostd/regexp/regexp.go.html#3577980">match</a></span><span class="op" id="3578047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3578050">}</span><span class="op" id="3578051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578054">return</span>&nbsp;<span class="builtintype" id="3578061">string</span><span class="op" id="3578067">(</span><span class="ident" id="3578068"><a href="/gostd/regexp/regexp.go.html#3577931">b</a></span><span class="op" id="3578069">)</span><br>
<span class="lineno"></span><span class="op" id="3578071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">455</span><span class="comment" id="3578074">//&nbsp;ReplaceAllLiteralString&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="3578156">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;string&nbsp;repl.&nbsp;&nbsp;The&nbsp;replacement&nbsp;repl&nbsp;is&nbsp;substituted&nbsp;directly,</span><br>
<span class="lineno"></span><span class="comment" id="3578240">//&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="3578265">func</span>&nbsp;<span class="op" id="3578270">(</span><span class="ident" id="3578271">re</span>&nbsp;<span class="op" id="3578274">*</span><span class="ident" id="3578275"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3578281">)</span>&nbsp;<span class="ident" id="3578283">ReplaceAllLiteralString</span><span class="op" id="3578306">(</span><span class="ident" id="3578307">src</span><span class="op" id="3578310">,</span>&nbsp;<span class="ident" id="3578312">repl</span>&nbsp;<span class="builtintype" id="3578317">string</span><span class="op" id="3578323">)</span>&nbsp;<span class="builtintype" id="3578325">string</span>&nbsp;<span class="op" id="3578332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578335">return</span>&nbsp;<span class="builtintype" id="3578342">string</span><span class="op" id="3578348">(</span><span class="ident" id="3578349"><a href="/gostd/regexp/regexp.go.html#3578271">re</a></span><span class="op" id="3578351">.</span><span class="ident" id="3578352"><a href="/gostd/regexp/regexp.go.html#3578969">replaceAll</a></span><span class="op" id="3578362">(</span><span class="builtintype" id="3578363">nil</span><span class="op" id="3578366">,</span>&nbsp;<span class="ident" id="3578368"><a href="/gostd/regexp/regexp.go.html#3578307">src</a></span><span class="op" id="3578371">,</span>&nbsp;<span class="num" id="3578373">2</span><span class="op" id="3578374">,</span>&nbsp;<span class="keyword" id="3578376">func</span><span class="op" id="3578380">(</span><span class="ident" id="3578381">dst</span>&nbsp;<span class="op" id="3578385">[</span><span class="op" id="3578386">]</span><span class="builtintype" id="3578387">byte</span><span class="op" id="3578391">,</span>&nbsp;<span class="ident" id="3578393">match</span>&nbsp;<span class="op" id="3578399">[</span><span class="op" id="3578400">]</span><span class="builtintype" id="3578401">int</span><span class="op" id="3578404">)</span>&nbsp;<span class="op" id="3578406">[</span><span class="op" id="3578407">]</span><span class="builtintype" id="3578408">byte</span>&nbsp;<span class="op" id="3578413">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578417">return</span>&nbsp;<span class="builtinfunc" id="3578424">append</span><span class="op" id="3578430">(</span><span class="ident" id="3578431"><a href="/gostd/regexp/regexp.go.html#3578381">dst</a></span><span class="op" id="3578434">,</span>&nbsp;<span class="ident" id="3578436"><a href="/gostd/regexp/regexp.go.html#3578312">repl</a></span><span class="op" id="3578440">...</span><span class="op" id="3578443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3578446">}</span><span class="op" id="3578447">)</span><span class="op" id="3578448">)</span><br>
<span class="lineno"></span><span class="op" id="3578450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3578453">//&nbsp;ReplaceAllStringFunc&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src&nbsp;in&nbsp;which&nbsp;all&nbsp;matches&nbsp;of&nbsp;the</span><br>
<span class="lineno">465</span><span class="comment" id="3578527">//&nbsp;Regexp&nbsp;have&nbsp;been&nbsp;replaced&nbsp;by&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;function&nbsp;repl&nbsp;applied</span><br>
<span class="lineno"></span><span class="comment" id="3578601">//&nbsp;to&nbsp;the&nbsp;matched&nbsp;substring.&nbsp;&nbsp;The&nbsp;replacement&nbsp;returned&nbsp;by&nbsp;repl&nbsp;is&nbsp;substituted</span><br>
<span class="lineno"></span><span class="comment" id="3578679">//&nbsp;directly,&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="3578714">func</span>&nbsp;<span class="op" id="3578719">(</span><span class="ident" id="3578720">re</span>&nbsp;<span class="op" id="3578723">*</span><span class="ident" id="3578724"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3578730">)</span>&nbsp;<span class="ident" id="3578732">ReplaceAllStringFunc</span><span class="op" id="3578752">(</span><span class="ident" id="3578753">src</span>&nbsp;<span class="builtintype" id="3578757">string</span><span class="op" id="3578763">,</span>&nbsp;<span class="ident" id="3578765">repl</span>&nbsp;<span class="keyword" id="3578770">func</span><span class="op" id="3578774">(</span><span class="builtintype" id="3578775">string</span><span class="op" id="3578781">)</span>&nbsp;<span class="builtintype" id="3578783">string</span><span class="op" id="3578789">)</span>&nbsp;<span class="builtintype" id="3578791">string</span>&nbsp;<span class="op" id="3578798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3578801">b</span>&nbsp;<span class="op" id="3578803">:=</span>&nbsp;<span class="ident" id="3578806"><a href="/gostd/regexp/regexp.go.html#3578720">re</a></span><span class="op" id="3578808">.</span><span class="ident" id="3578809"><a href="/gostd/regexp/regexp.go.html#3578969">replaceAll</a></span><span class="op" id="3578819">(</span><span class="builtintype" id="3578820">nil</span><span class="op" id="3578823">,</span>&nbsp;<span class="ident" id="3578825"><a href="/gostd/regexp/regexp.go.html#3578753">src</a></span><span class="op" id="3578828">,</span>&nbsp;<span class="num" id="3578830">2</span><span class="op" id="3578831">,</span>&nbsp;<span class="keyword" id="3578833">func</span><span class="op" id="3578837">(</span><span class="ident" id="3578838">dst</span>&nbsp;<span class="op" id="3578842">[</span><span class="op" id="3578843">]</span><span class="builtintype" id="3578844">byte</span><span class="op" id="3578848">,</span>&nbsp;<span class="ident" id="3578850">match</span>&nbsp;<span class="op" id="3578856">[</span><span class="op" id="3578857">]</span><span class="builtintype" id="3578858">int</span><span class="op" id="3578861">)</span>&nbsp;<span class="op" id="3578863">[</span><span class="op" id="3578864">]</span><span class="builtintype" id="3578865">byte</span>&nbsp;<span class="op" id="3578870">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578874">return</span>&nbsp;<span class="builtinfunc" id="3578881">append</span><span class="op" id="3578887">(</span><span class="ident" id="3578888"><a href="/gostd/regexp/regexp.go.html#3578838">dst</a></span><span class="op" id="3578891">,</span>&nbsp;<span class="ident" id="3578893"><a href="/gostd/regexp/regexp.go.html#3578765">repl</a></span><span class="op" id="3578897">(</span><span class="ident" id="3578898"><a href="/gostd/regexp/regexp.go.html#3578753">src</a></span><span class="op" id="3578901">[</span><span class="ident" id="3578902"><a href="/gostd/regexp/regexp.go.html#3578850">match</a></span><span class="op" id="3578907">[</span><span class="num" id="3578908">0</span><span class="op" id="3578909">]</span><span class="op" id="3578910">:</span><span class="ident" id="3578911"><a href="/gostd/regexp/regexp.go.html#3578850">match</a></span><span class="op" id="3578916">[</span><span class="num" id="3578917">1</span><span class="op" id="3578918">]</span><span class="op" id="3578919">]</span><span class="op" id="3578920">)</span><span class="op" id="3578921">...</span><span class="op" id="3578924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3578927">}</span><span class="op" id="3578928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578931">return</span>&nbsp;<span class="builtintype" id="3578938">string</span><span class="op" id="3578944">(</span><span class="ident" id="3578945"><a href="/gostd/regexp/regexp.go.html#3578801">b</a></span><span class="op" id="3578946">)</span><br>
<span class="lineno"></span><span class="op" id="3578948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span><span class="keyword" id="3578951">func</span>&nbsp;<span class="op" id="3578956">(</span><span class="ident" id="3578957">re</span>&nbsp;<span class="op" id="3578960">*</span><span class="ident" id="3578961"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3578967">)</span>&nbsp;<span class="ident" id="3578969">replaceAll</span><span class="op" id="3578979">(</span><span class="ident" id="3578980">bsrc</span>&nbsp;<span class="op" id="3578985">[</span><span class="op" id="3578986">]</span><span class="builtintype" id="3578987">byte</span><span class="op" id="3578991">,</span>&nbsp;<span class="ident" id="3578993">src</span>&nbsp;<span class="builtintype" id="3578997">string</span><span class="op" id="3579003">,</span>&nbsp;<span class="ident" id="3579005">nmatch</span>&nbsp;<span class="builtintype" id="3579012">int</span><span class="op" id="3579015">,</span>&nbsp;<span class="ident" id="3579017">repl</span>&nbsp;<span class="keyword" id="3579022">func</span><span class="op" id="3579026">(</span><span class="ident" id="3579027">dst</span>&nbsp;<span class="op" id="3579031">[</span><span class="op" id="3579032">]</span><span class="builtintype" id="3579033">byte</span><span class="op" id="3579037">,</span>&nbsp;<span class="ident" id="3579039">m</span>&nbsp;<span class="op" id="3579041">[</span><span class="op" id="3579042">]</span><span class="builtintype" id="3579043">int</span><span class="op" id="3579046">)</span>&nbsp;<span class="op" id="3579048">[</span><span class="op" id="3579049">]</span><span class="builtintype" id="3579050">byte</span><span class="op" id="3579054">)</span>&nbsp;<span class="op" id="3579056">[</span><span class="op" id="3579057">]</span><span class="builtintype" id="3579058">byte</span>&nbsp;<span class="op" id="3579063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579066">lastMatchEnd</span>&nbsp;<span class="op" id="3579079">:=</span>&nbsp;<span class="num" id="3579082">0</span>&nbsp;<span class="comment" id="3579084">//&nbsp;end&nbsp;position&nbsp;of&nbsp;the&nbsp;most&nbsp;recent&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579126">searchPos</span>&nbsp;<span class="op" id="3579136">:=</span>&nbsp;<span class="num" id="3579139">0</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3579144">//&nbsp;position&nbsp;where&nbsp;we&nbsp;next&nbsp;look&nbsp;for&nbsp;a&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579188">var</span>&nbsp;<span class="ident" id="3579192">buf</span>&nbsp;<span class="op" id="3579196">[</span><span class="op" id="3579197">]</span><span class="builtintype" id="3579198">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579204">var</span>&nbsp;<span class="ident" id="3579208">endPos</span>&nbsp;<span class="builtintype" id="3579215">int</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579220">if</span>&nbsp;<span class="ident" id="3579223"><a href="/gostd/regexp/regexp.go.html#3578980">bsrc</a></span>&nbsp;<span class="op" id="3579228">!=</span>&nbsp;<span class="builtintype" id="3579231">nil</span>&nbsp;<span class="op" id="3579235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579239"><a href="/gostd/regexp/regexp.go.html#3579208">endPos</a></span>&nbsp;<span class="op" id="3579246">=</span>&nbsp;<span class="builtinfunc" id="3579248">len</span><span class="op" id="3579251">(</span><span class="ident" id="3579252"><a href="/gostd/regexp/regexp.go.html#3578980">bsrc</a></span><span class="op" id="3579256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579259">}</span>&nbsp;<span class="keyword" id="3579261">else</span>&nbsp;<span class="op" id="3579266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579270"><a href="/gostd/regexp/regexp.go.html#3579208">endPos</a></span>&nbsp;<span class="op" id="3579277">=</span>&nbsp;<span class="builtinfunc" id="3579279">len</span><span class="op" id="3579282">(</span><span class="ident" id="3579283"><a href="/gostd/regexp/regexp.go.html#3578993">src</a></span><span class="op" id="3579286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579289">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579292">for</span>&nbsp;<span class="ident" id="3579296"><a href="/gostd/regexp/regexp.go.html#3579126">searchPos</a></span>&nbsp;<span class="op" id="3579306">&lt;=</span>&nbsp;<span class="ident" id="3579309"><a href="/gostd/regexp/regexp.go.html#3579208">endPos</a></span>&nbsp;<span class="op" id="3579316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579320">a</span>&nbsp;<span class="op" id="3579322">:=</span>&nbsp;<span class="ident" id="3579325"><a href="/gostd/regexp/regexp.go.html#3578957">re</a></span><span class="op" id="3579327">.</span><span class="ident" id="3579328"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3579337">(</span><span class="builtintype" id="3579338">nil</span><span class="op" id="3579341">,</span>&nbsp;<span class="ident" id="3579343"><a href="/gostd/regexp/regexp.go.html#3578980">bsrc</a></span><span class="op" id="3579347">,</span>&nbsp;<span class="ident" id="3579349"><a href="/gostd/regexp/regexp.go.html#3578993">src</a></span><span class="op" id="3579352">,</span>&nbsp;<span class="ident" id="3579354"><a href="/gostd/regexp/regexp.go.html#3579126">searchPos</a></span><span class="op" id="3579363">,</span>&nbsp;<span class="ident" id="3579365"><a href="/gostd/regexp/regexp.go.html#3579005">nmatch</a></span><span class="op" id="3579371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579375">if</span>&nbsp;<span class="builtinfunc" id="3579378">len</span><span class="op" id="3579381">(</span><span class="ident" id="3579382"><a href="/gostd/regexp/regexp.go.html#3579320">a</a></span><span class="op" id="3579383">)</span>&nbsp;<span class="op" id="3579385">==</span>&nbsp;<span class="num" id="3579388">0</span>&nbsp;<span class="op" id="3579390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579395">break</span>&nbsp;<span class="comment" id="3579401">//&nbsp;no&nbsp;more&nbsp;matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579422">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3579427">//&nbsp;Copy&nbsp;the&nbsp;unmatched&nbsp;characters&nbsp;before&nbsp;this&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579481">if</span>&nbsp;<span class="ident" id="3579484"><a href="/gostd/regexp/regexp.go.html#3578980">bsrc</a></span>&nbsp;<span class="op" id="3579489">!=</span>&nbsp;<span class="builtintype" id="3579492">nil</span>&nbsp;<span class="op" id="3579496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579501"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span>&nbsp;<span class="op" id="3579505">=</span>&nbsp;<span class="builtinfunc" id="3579507">append</span><span class="op" id="3579513">(</span><span class="ident" id="3579514"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span><span class="op" id="3579517">,</span>&nbsp;<span class="ident" id="3579519"><a href="/gostd/regexp/regexp.go.html#3578980">bsrc</a></span><span class="op" id="3579523">[</span><span class="ident" id="3579524"><a href="/gostd/regexp/regexp.go.html#3579066">lastMatchEnd</a></span><span class="op" id="3579536">:</span><span class="ident" id="3579537"><a href="/gostd/regexp/regexp.go.html#3579320">a</a></span><span class="op" id="3579538">[</span><span class="num" id="3579539">0</span><span class="op" id="3579540">]</span><span class="op" id="3579541">]</span><span class="op" id="3579542">...</span><span class="op" id="3579545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579549">}</span>&nbsp;<span class="keyword" id="3579551">else</span>&nbsp;<span class="op" id="3579556">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579561"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span>&nbsp;<span class="op" id="3579565">=</span>&nbsp;<span class="builtinfunc" id="3579567">append</span><span class="op" id="3579573">(</span><span class="ident" id="3579574"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span><span class="op" id="3579577">,</span>&nbsp;<span class="ident" id="3579579"><a href="/gostd/regexp/regexp.go.html#3578993">src</a></span><span class="op" id="3579582">[</span><span class="ident" id="3579583"><a href="/gostd/regexp/regexp.go.html#3579066">lastMatchEnd</a></span><span class="op" id="3579595">:</span><span class="ident" id="3579596"><a href="/gostd/regexp/regexp.go.html#3579320">a</a></span><span class="op" id="3579597">[</span><span class="num" id="3579598">0</span><span class="op" id="3579599">]</span><span class="op" id="3579600">]</span><span class="op" id="3579601">...</span><span class="op" id="3579604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3579613">//&nbsp;Now&nbsp;insert&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;replacement&nbsp;string,&nbsp;but&nbsp;not&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3579677">//&nbsp;match&nbsp;of&nbsp;the&nbsp;empty&nbsp;string&nbsp;immediately&nbsp;after&nbsp;another&nbsp;match.</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3579741">//&nbsp;(Otherwise,&nbsp;we&nbsp;get&nbsp;double&nbsp;replacement&nbsp;for&nbsp;patterns&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3579802">//&nbsp;match&nbsp;both&nbsp;empty&nbsp;and&nbsp;nonempty&nbsp;strings.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579847">if</span>&nbsp;<span class="ident" id="3579850"><a href="/gostd/regexp/regexp.go.html#3579320">a</a></span><span class="op" id="3579851">[</span><span class="num" id="3579852">1</span><span class="op" id="3579853">]</span>&nbsp;<span class="op" id="3579855">&gt;</span>&nbsp;<span class="ident" id="3579857"><a href="/gostd/regexp/regexp.go.html#3579066">lastMatchEnd</a></span>&nbsp;<span class="op" id="3579870">||</span>&nbsp;<span class="ident" id="3579873"><a href="/gostd/regexp/regexp.go.html#3579320">a</a></span><span class="op" id="3579874">[</span><span class="num" id="3579875">0</span><span class="op" id="3579876">]</span>&nbsp;<span class="op" id="3579878">==</span>&nbsp;<span class="num" id="3579881">0</span>&nbsp;<span class="op" id="3579883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579888"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span>&nbsp;<span class="op" id="3579892">=</span>&nbsp;<span class="ident" id="3579894"><a href="/gostd/regexp/regexp.go.html#3579017">repl</a></span><span class="op" id="3579898">(</span><span class="ident" id="3579899"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span><span class="op" id="3579902">,</span>&nbsp;<span class="ident" id="3579904"><a href="/gostd/regexp/regexp.go.html#3579320">a</a></span><span class="op" id="3579905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579909">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579913"><a href="/gostd/regexp/regexp.go.html#3579066">lastMatchEnd</a></span>&nbsp;<span class="op" id="3579926">=</span>&nbsp;<span class="ident" id="3579928"><a href="/gostd/regexp/regexp.go.html#3579320">a</a></span><span class="op" id="3579929">[</span><span class="num" id="3579930">1</span><span class="op" id="3579931">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3579936">//&nbsp;Advance&nbsp;past&nbsp;this&nbsp;match;&nbsp;always&nbsp;advance&nbsp;at&nbsp;least&nbsp;one&nbsp;character.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580005">var</span>&nbsp;<span class="ident" id="3580009">width</span>&nbsp;<span class="builtintype" id="3580015">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580021">if</span>&nbsp;<span class="ident" id="3580024"><a href="/gostd/regexp/regexp.go.html#3578980">bsrc</a></span>&nbsp;<span class="op" id="3580029">!=</span>&nbsp;<span class="builtintype" id="3580032">nil</span>&nbsp;<span class="op" id="3580036">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580041">_</span><span class="op" id="3580042">,</span>&nbsp;<span class="ident" id="3580044"><a href="/gostd/regexp/regexp.go.html#3580009">width</a></span>&nbsp;<span class="op" id="3580050">=</span>&nbsp;<span class="ident" id="3580052"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3580056">.</span><span class="ident" id="3580057"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="3580067">(</span><span class="ident" id="3580068"><a href="/gostd/regexp/regexp.go.html#3578980">bsrc</a></span><span class="op" id="3580072">[</span><span class="ident" id="3580073"><a href="/gostd/regexp/regexp.go.html#3579126">searchPos</a></span><span class="op" id="3580082">:</span><span class="op" id="3580083">]</span><span class="op" id="3580084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580088">}</span>&nbsp;<span class="keyword" id="3580090">else</span>&nbsp;<span class="op" id="3580095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580100">_</span><span class="op" id="3580101">,</span>&nbsp;<span class="ident" id="3580103"><a href="/gostd/regexp/regexp.go.html#3580009">width</a></span>&nbsp;<span class="op" id="3580109">=</span>&nbsp;<span class="ident" id="3580111"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3580115">.</span><span class="ident" id="3580116"><a href="/gostd/unicode/utf8/utf8.go.html#1810428">DecodeRuneInString</a></span><span class="op" id="3580134">(</span><span class="ident" id="3580135"><a href="/gostd/regexp/regexp.go.html#3578993">src</a></span><span class="op" id="3580138">[</span><span class="ident" id="3580139"><a href="/gostd/regexp/regexp.go.html#3579126">searchPos</a></span><span class="op" id="3580148">:</span><span class="op" id="3580149">]</span><span class="op" id="3580150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580158">if</span>&nbsp;<span class="ident" id="3580161"><a href="/gostd/regexp/regexp.go.html#3579126">searchPos</a></span><span class="op" id="3580170">+</span><span class="ident" id="3580171"><a href="/gostd/regexp/regexp.go.html#3580009">width</a></span>&nbsp;<span class="op" id="3580177">&gt;</span>&nbsp;<span class="ident" id="3580179"><a href="/gostd/regexp/regexp.go.html#3579320">a</a></span><span class="op" id="3580180">[</span><span class="num" id="3580181">1</span><span class="op" id="3580182">]</span>&nbsp;<span class="op" id="3580184">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580189"><a href="/gostd/regexp/regexp.go.html#3579126">searchPos</a></span>&nbsp;<span class="op" id="3580199">+=</span>&nbsp;<span class="ident" id="3580202"><a href="/gostd/regexp/regexp.go.html#3580009">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580210">}</span>&nbsp;<span class="keyword" id="3580212">else</span>&nbsp;<span class="keyword" id="3580217">if</span>&nbsp;<span class="ident" id="3580220"><a href="/gostd/regexp/regexp.go.html#3579126">searchPos</a></span><span class="op" id="3580229">+</span><span class="num" id="3580230">1</span>&nbsp;<span class="op" id="3580232">&gt;</span>&nbsp;<span class="ident" id="3580234"><a href="/gostd/regexp/regexp.go.html#3579320">a</a></span><span class="op" id="3580235">[</span><span class="num" id="3580236">1</span><span class="op" id="3580237">]</span>&nbsp;<span class="op" id="3580239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3580244">//&nbsp;This&nbsp;clause&nbsp;is&nbsp;only&nbsp;needed&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3580301">//&nbsp;string.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;DecodeRuneInString&nbsp;returns&nbsp;width=0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580366"><a href="/gostd/regexp/regexp.go.html#3579126">searchPos</a></span><span class="op" id="3580375">++</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580380">}</span>&nbsp;<span class="keyword" id="3580382">else</span>&nbsp;<span class="op" id="3580387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580392"><a href="/gostd/regexp/regexp.go.html#3579126">searchPos</a></span>&nbsp;<span class="op" id="3580402">=</span>&nbsp;<span class="ident" id="3580404"><a href="/gostd/regexp/regexp.go.html#3579320">a</a></span><span class="op" id="3580405">[</span><span class="num" id="3580406">1</span><span class="op" id="3580407">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3580418">//&nbsp;Copy&nbsp;the&nbsp;unmatched&nbsp;characters&nbsp;after&nbsp;the&nbsp;last&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580474">if</span>&nbsp;<span class="ident" id="3580477"><a href="/gostd/regexp/regexp.go.html#3578980">bsrc</a></span>&nbsp;<span class="op" id="3580482">!=</span>&nbsp;<span class="builtintype" id="3580485">nil</span>&nbsp;<span class="op" id="3580489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580493"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span>&nbsp;<span class="op" id="3580497">=</span>&nbsp;<span class="builtinfunc" id="3580499">append</span><span class="op" id="3580505">(</span><span class="ident" id="3580506"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span><span class="op" id="3580509">,</span>&nbsp;<span class="ident" id="3580511"><a href="/gostd/regexp/regexp.go.html#3578980">bsrc</a></span><span class="op" id="3580515">[</span><span class="ident" id="3580516"><a href="/gostd/regexp/regexp.go.html#3579066">lastMatchEnd</a></span><span class="op" id="3580528">:</span><span class="op" id="3580529">]</span><span class="op" id="3580530">...</span><span class="op" id="3580533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580536">}</span>&nbsp;<span class="keyword" id="3580538">else</span>&nbsp;<span class="op" id="3580543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580547"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span>&nbsp;<span class="op" id="3580551">=</span>&nbsp;<span class="builtinfunc" id="3580553">append</span><span class="op" id="3580559">(</span><span class="ident" id="3580560"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span><span class="op" id="3580563">,</span>&nbsp;<span class="ident" id="3580565"><a href="/gostd/regexp/regexp.go.html#3578993">src</a></span><span class="op" id="3580568">[</span><span class="ident" id="3580569"><a href="/gostd/regexp/regexp.go.html#3579066">lastMatchEnd</a></span><span class="op" id="3580581">:</span><span class="op" id="3580582">]</span><span class="op" id="3580583">...</span><span class="op" id="3580586">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580593">return</span>&nbsp;<span class="ident" id="3580600"><a href="/gostd/regexp/regexp.go.html#3579192">buf</a></span><br>
<span class="lineno"></span><span class="op" id="3580604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span><span class="comment" id="3580607">//&nbsp;ReplaceAll&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="3580676">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;text&nbsp;repl.&nbsp;&nbsp;Inside&nbsp;repl,&nbsp;$&nbsp;signs&nbsp;are&nbsp;interpreted&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3580752">//&nbsp;in&nbsp;Expand,&nbsp;so&nbsp;for&nbsp;instance&nbsp;$1&nbsp;represents&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;first&nbsp;submatch.</span><br>
<span class="lineno"></span><span class="keyword" id="3580828">func</span>&nbsp;<span class="op" id="3580833">(</span><span class="ident" id="3580834">re</span>&nbsp;<span class="op" id="3580837">*</span><span class="ident" id="3580838"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3580844">)</span>&nbsp;<span class="ident" id="3580846">ReplaceAll</span><span class="op" id="3580856">(</span><span class="ident" id="3580857">src</span><span class="op" id="3580860">,</span>&nbsp;<span class="ident" id="3580862">repl</span>&nbsp;<span class="op" id="3580867">[</span><span class="op" id="3580868">]</span><span class="builtintype" id="3580869">byte</span><span class="op" id="3580873">)</span>&nbsp;<span class="op" id="3580875">[</span><span class="op" id="3580876">]</span><span class="builtintype" id="3580877">byte</span>&nbsp;<span class="op" id="3580882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580885">n</span>&nbsp;<span class="op" id="3580887">:=</span>&nbsp;<span class="num" id="3580890">2</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580893">if</span>&nbsp;<span class="ident" id="3580896"><a href="/gostd/regexp/regexp.go.html#3566778">bytes</a></span><span class="op" id="3580901">.</span><span class="ident" id="3580902"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="3580911">(</span><span class="ident" id="3580912"><a href="/gostd/regexp/regexp.go.html#3580862">repl</a></span><span class="op" id="3580916">,</span>&nbsp;<span class="string" id="3580918">&#39;$&#39;</span><span class="op" id="3580921">)</span>&nbsp;<span class="op" id="3580923">&gt;=</span>&nbsp;<span class="num" id="3580926">0</span>&nbsp;<span class="op" id="3580928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580932"><a href="/gostd/regexp/regexp.go.html#3580885">n</a></span>&nbsp;<span class="op" id="3580934">=</span>&nbsp;<span class="num" id="3580936">2</span>&nbsp;<span class="op" id="3580938">*</span>&nbsp;<span class="op" id="3580940">(</span><span class="ident" id="3580941"><a href="/gostd/regexp/regexp.go.html#3580834">re</a></span><span class="op" id="3580943">.</span><span class="ident" id="3580944"><a href="/gostd/regexp/regexp.go.html#3567617">numSubexp</a></span>&nbsp;<span class="op" id="3580954">+</span>&nbsp;<span class="num" id="3580956">1</span><span class="op" id="3580957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580963">srepl</span>&nbsp;<span class="op" id="3580969">:=</span>&nbsp;<span class="string" id="3580972">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580976">b</span>&nbsp;<span class="op" id="3580978">:=</span>&nbsp;<span class="ident" id="3580981"><a href="/gostd/regexp/regexp.go.html#3580834">re</a></span><span class="op" id="3580983">.</span><span class="ident" id="3580984"><a href="/gostd/regexp/regexp.go.html#3578969">replaceAll</a></span><span class="op" id="3580994">(</span><span class="ident" id="3580995"><a href="/gostd/regexp/regexp.go.html#3580857">src</a></span><span class="op" id="3580998">,</span>&nbsp;<span class="string" id="3581000">&#34;&#34;</span><span class="op" id="3581002">,</span>&nbsp;<span class="ident" id="3581004"><a href="/gostd/regexp/regexp.go.html#3580885">n</a></span><span class="op" id="3581005">,</span>&nbsp;<span class="keyword" id="3581007">func</span><span class="op" id="3581011">(</span><span class="ident" id="3581012">dst</span>&nbsp;<span class="op" id="3581016">[</span><span class="op" id="3581017">]</span><span class="builtintype" id="3581018">byte</span><span class="op" id="3581022">,</span>&nbsp;<span class="ident" id="3581024">match</span>&nbsp;<span class="op" id="3581030">[</span><span class="op" id="3581031">]</span><span class="builtintype" id="3581032">int</span><span class="op" id="3581035">)</span>&nbsp;<span class="op" id="3581037">[</span><span class="op" id="3581038">]</span><span class="builtintype" id="3581039">byte</span>&nbsp;<span class="op" id="3581044">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581048">if</span>&nbsp;<span class="builtinfunc" id="3581051">len</span><span class="op" id="3581054">(</span><span class="ident" id="3581055"><a href="/gostd/regexp/regexp.go.html#3580963">srepl</a></span><span class="op" id="3581060">)</span>&nbsp;<span class="op" id="3581062">!=</span>&nbsp;<span class="builtinfunc" id="3581065">len</span><span class="op" id="3581068">(</span><span class="ident" id="3581069"><a href="/gostd/regexp/regexp.go.html#3580862">repl</a></span><span class="op" id="3581073">)</span>&nbsp;<span class="op" id="3581075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3581080"><a href="/gostd/regexp/regexp.go.html#3580963">srepl</a></span>&nbsp;<span class="op" id="3581086">=</span>&nbsp;<span class="builtintype" id="3581088">string</span><span class="op" id="3581094">(</span><span class="ident" id="3581095"><a href="/gostd/regexp/regexp.go.html#3580862">repl</a></span><span class="op" id="3581099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581107">return</span>&nbsp;<span class="ident" id="3581114"><a href="/gostd/regexp/regexp.go.html#3580834">re</a></span><span class="op" id="3581116">.</span><span class="ident" id="3581117"><a href="/gostd/regexp/regexp.go.html#3588014">expand</a></span><span class="op" id="3581123">(</span><span class="ident" id="3581124"><a href="/gostd/regexp/regexp.go.html#3581012">dst</a></span><span class="op" id="3581127">,</span>&nbsp;<span class="ident" id="3581129"><a href="/gostd/regexp/regexp.go.html#3580963">srepl</a></span><span class="op" id="3581134">,</span>&nbsp;<span class="ident" id="3581136"><a href="/gostd/regexp/regexp.go.html#3580857">src</a></span><span class="op" id="3581139">,</span>&nbsp;<span class="string" id="3581141">&#34;&#34;</span><span class="op" id="3581143">,</span>&nbsp;<span class="ident" id="3581145"><a href="/gostd/regexp/regexp.go.html#3581024">match</a></span><span class="op" id="3581150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581153">}</span><span class="op" id="3581154">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581157">return</span>&nbsp;<span class="ident" id="3581164"><a href="/gostd/regexp/regexp.go.html#3580976">b</a></span><br>
<span class="lineno"></span><span class="op" id="3581166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3581169">//&nbsp;ReplaceAllLiteral&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src,&nbsp;replacing&nbsp;matches&nbsp;of&nbsp;the&nbsp;Regexp</span><br>
<span class="lineno"></span><span class="comment" id="3581245">//&nbsp;with&nbsp;the&nbsp;replacement&nbsp;bytes&nbsp;repl.&nbsp;&nbsp;The&nbsp;replacement&nbsp;repl&nbsp;is&nbsp;substituted&nbsp;directly,</span><br>
<span class="lineno">555</span><span class="comment" id="3581328">//&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="3581353">func</span>&nbsp;<span class="op" id="3581358">(</span><span class="ident" id="3581359">re</span>&nbsp;<span class="op" id="3581362">*</span><span class="ident" id="3581363"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3581369">)</span>&nbsp;<span class="ident" id="3581371">ReplaceAllLiteral</span><span class="op" id="3581388">(</span><span class="ident" id="3581389">src</span><span class="op" id="3581392">,</span>&nbsp;<span class="ident" id="3581394">repl</span>&nbsp;<span class="op" id="3581399">[</span><span class="op" id="3581400">]</span><span class="builtintype" id="3581401">byte</span><span class="op" id="3581405">)</span>&nbsp;<span class="op" id="3581407">[</span><span class="op" id="3581408">]</span><span class="builtintype" id="3581409">byte</span>&nbsp;<span class="op" id="3581414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581417">return</span>&nbsp;<span class="ident" id="3581424"><a href="/gostd/regexp/regexp.go.html#3581359">re</a></span><span class="op" id="3581426">.</span><span class="ident" id="3581427"><a href="/gostd/regexp/regexp.go.html#3578969">replaceAll</a></span><span class="op" id="3581437">(</span><span class="ident" id="3581438"><a href="/gostd/regexp/regexp.go.html#3581389">src</a></span><span class="op" id="3581441">,</span>&nbsp;<span class="string" id="3581443">&#34;&#34;</span><span class="op" id="3581445">,</span>&nbsp;<span class="num" id="3581447">2</span><span class="op" id="3581448">,</span>&nbsp;<span class="keyword" id="3581450">func</span><span class="op" id="3581454">(</span><span class="ident" id="3581455">dst</span>&nbsp;<span class="op" id="3581459">[</span><span class="op" id="3581460">]</span><span class="builtintype" id="3581461">byte</span><span class="op" id="3581465">,</span>&nbsp;<span class="ident" id="3581467">match</span>&nbsp;<span class="op" id="3581473">[</span><span class="op" id="3581474">]</span><span class="builtintype" id="3581475">int</span><span class="op" id="3581478">)</span>&nbsp;<span class="op" id="3581480">[</span><span class="op" id="3581481">]</span><span class="builtintype" id="3581482">byte</span>&nbsp;<span class="op" id="3581487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581491">return</span>&nbsp;<span class="builtinfunc" id="3581498">append</span><span class="op" id="3581504">(</span><span class="ident" id="3581505"><a href="/gostd/regexp/regexp.go.html#3581455">dst</a></span><span class="op" id="3581508">,</span>&nbsp;<span class="ident" id="3581510"><a href="/gostd/regexp/regexp.go.html#3581394">repl</a></span><span class="op" id="3581514">...</span><span class="op" id="3581517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581520">}</span><span class="op" id="3581521">)</span><br>
<span class="lineno">560</span><span class="op" id="3581523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3581526">//&nbsp;ReplaceAllFunc&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;src&nbsp;in&nbsp;which&nbsp;all&nbsp;matches&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3581594">//&nbsp;Regexp&nbsp;have&nbsp;been&nbsp;replaced&nbsp;by&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;function&nbsp;repl&nbsp;applied</span><br>
<span class="lineno"></span><span class="comment" id="3581668">//&nbsp;to&nbsp;the&nbsp;matched&nbsp;byte&nbsp;slice.&nbsp;&nbsp;The&nbsp;replacement&nbsp;returned&nbsp;by&nbsp;repl&nbsp;is&nbsp;substituted</span><br>
<span class="lineno">565</span><span class="comment" id="3581747">//&nbsp;directly,&nbsp;without&nbsp;using&nbsp;Expand.</span><br>
<span class="lineno"></span><span class="keyword" id="3581782">func</span>&nbsp;<span class="op" id="3581787">(</span><span class="ident" id="3581788">re</span>&nbsp;<span class="op" id="3581791">*</span><span class="ident" id="3581792"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3581798">)</span>&nbsp;<span class="ident" id="3581800">ReplaceAllFunc</span><span class="op" id="3581814">(</span><span class="ident" id="3581815">src</span>&nbsp;<span class="op" id="3581819">[</span><span class="op" id="3581820">]</span><span class="builtintype" id="3581821">byte</span><span class="op" id="3581825">,</span>&nbsp;<span class="ident" id="3581827">repl</span>&nbsp;<span class="keyword" id="3581832">func</span><span class="op" id="3581836">(</span><span class="op" id="3581837">[</span><span class="op" id="3581838">]</span><span class="builtintype" id="3581839">byte</span><span class="op" id="3581843">)</span>&nbsp;<span class="op" id="3581845">[</span><span class="op" id="3581846">]</span><span class="builtintype" id="3581847">byte</span><span class="op" id="3581851">)</span>&nbsp;<span class="op" id="3581853">[</span><span class="op" id="3581854">]</span><span class="builtintype" id="3581855">byte</span>&nbsp;<span class="op" id="3581860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581863">return</span>&nbsp;<span class="ident" id="3581870"><a href="/gostd/regexp/regexp.go.html#3581788">re</a></span><span class="op" id="3581872">.</span><span class="ident" id="3581873"><a href="/gostd/regexp/regexp.go.html#3578969">replaceAll</a></span><span class="op" id="3581883">(</span><span class="ident" id="3581884"><a href="/gostd/regexp/regexp.go.html#3581815">src</a></span><span class="op" id="3581887">,</span>&nbsp;<span class="string" id="3581889">&#34;&#34;</span><span class="op" id="3581891">,</span>&nbsp;<span class="num" id="3581893">2</span><span class="op" id="3581894">,</span>&nbsp;<span class="keyword" id="3581896">func</span><span class="op" id="3581900">(</span><span class="ident" id="3581901">dst</span>&nbsp;<span class="op" id="3581905">[</span><span class="op" id="3581906">]</span><span class="builtintype" id="3581907">byte</span><span class="op" id="3581911">,</span>&nbsp;<span class="ident" id="3581913">match</span>&nbsp;<span class="op" id="3581919">[</span><span class="op" id="3581920">]</span><span class="builtintype" id="3581921">int</span><span class="op" id="3581924">)</span>&nbsp;<span class="op" id="3581926">[</span><span class="op" id="3581927">]</span><span class="builtintype" id="3581928">byte</span>&nbsp;<span class="op" id="3581933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581937">return</span>&nbsp;<span class="builtinfunc" id="3581944">append</span><span class="op" id="3581950">(</span><span class="ident" id="3581951"><a href="/gostd/regexp/regexp.go.html#3581901">dst</a></span><span class="op" id="3581954">,</span>&nbsp;<span class="ident" id="3581956"><a href="/gostd/regexp/regexp.go.html#3581827">repl</a></span><span class="op" id="3581960">(</span><span class="ident" id="3581961"><a href="/gostd/regexp/regexp.go.html#3581815">src</a></span><span class="op" id="3581964">[</span><span class="ident" id="3581965"><a href="/gostd/regexp/regexp.go.html#3581913">match</a></span><span class="op" id="3581970">[</span><span class="num" id="3581971">0</span><span class="op" id="3581972">]</span><span class="op" id="3581973">:</span><span class="ident" id="3581974"><a href="/gostd/regexp/regexp.go.html#3581913">match</a></span><span class="op" id="3581979">[</span><span class="num" id="3581980">1</span><span class="op" id="3581981">]</span><span class="op" id="3581982">]</span><span class="op" id="3581983">)</span><span class="op" id="3581984">...</span><span class="op" id="3581987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581990">}</span><span class="op" id="3581991">)</span><br>
<span class="lineno">570</span><span class="op" id="3581993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3581996">var</span>&nbsp;<span class="ident" id="3582000">specialBytes</span>&nbsp;<span class="op" id="3582013">=</span>&nbsp;<span class="op" id="3582015">[</span><span class="op" id="3582016">]</span><span class="builtintype" id="3582017">byte</span><span class="op" id="3582021">(</span><span class="string" id="3582022">`\.+*?()|[]{}^$`</span><span class="op" id="3582038">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3582041">func</span>&nbsp;<span class="ident" id="3582046">special</span><span class="op" id="3582053">(</span><span class="ident" id="3582054">b</span>&nbsp;<span class="builtintype" id="3582056">byte</span><span class="op" id="3582060">)</span>&nbsp;<span class="builtintype" id="3582062">bool</span>&nbsp;<span class="op" id="3582067">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582070">return</span>&nbsp;<span class="ident" id="3582077"><a href="/gostd/regexp/regexp.go.html#3566778">bytes</a></span><span class="op" id="3582082">.</span><span class="ident" id="3582083"><a href="/gostd/bytes/bytes_decl.go.html#1414570">IndexByte</a></span><span class="op" id="3582092">(</span><span class="ident" id="3582093"><a href="/gostd/regexp/regexp.go.html#3582000">specialBytes</a></span><span class="op" id="3582105">,</span>&nbsp;<span class="ident" id="3582107"><a href="/gostd/regexp/regexp.go.html#3582054">b</a></span><span class="op" id="3582108">)</span>&nbsp;<span class="op" id="3582110">&gt;=</span>&nbsp;<span class="num" id="3582113">0</span><br>
<span class="lineno"></span><span class="op" id="3582115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3582118">//&nbsp;QuoteMeta&nbsp;returns&nbsp;a&nbsp;string&nbsp;that&nbsp;quotes&nbsp;all&nbsp;regular&nbsp;expression&nbsp;metacharacters</span><br>
<span class="lineno"></span><span class="comment" id="3582198">//&nbsp;inside&nbsp;the&nbsp;argument&nbsp;text;&nbsp;the&nbsp;returned&nbsp;string&nbsp;is&nbsp;a&nbsp;regular&nbsp;expression&nbsp;matching</span><br>
<span class="lineno">580</span><span class="comment" id="3582280">//&nbsp;the&nbsp;literal&nbsp;text.&nbsp;&nbsp;For&nbsp;example,&nbsp;QuoteMeta(`[foo]`)&nbsp;returns&nbsp;`\[foo\]`.</span><br>
<span class="lineno"></span><span class="keyword" id="3582353">func</span>&nbsp;<span class="ident" id="3582358">QuoteMeta</span><span class="op" id="3582367">(</span><span class="ident" id="3582368">s</span>&nbsp;<span class="builtintype" id="3582370">string</span><span class="op" id="3582376">)</span>&nbsp;<span class="builtintype" id="3582378">string</span>&nbsp;<span class="op" id="3582385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582388">b</span>&nbsp;<span class="op" id="3582390">:=</span>&nbsp;<span class="builtinfunc" id="3582393">make</span><span class="op" id="3582397">(</span><span class="op" id="3582398">[</span><span class="op" id="3582399">]</span><span class="builtintype" id="3582400">byte</span><span class="op" id="3582404">,</span>&nbsp;<span class="num" id="3582406">2</span><span class="op" id="3582407">*</span><span class="builtinfunc" id="3582408">len</span><span class="op" id="3582411">(</span><span class="ident" id="3582412"><a href="/gostd/regexp/regexp.go.html#3582368">s</a></span><span class="op" id="3582413">)</span><span class="op" id="3582414">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3582418">//&nbsp;A&nbsp;byte&nbsp;loop&nbsp;is&nbsp;correct&nbsp;because&nbsp;all&nbsp;metacharacters&nbsp;are&nbsp;ASCII.</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582483">j</span>&nbsp;<span class="op" id="3582485">:=</span>&nbsp;<span class="num" id="3582488">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582491">for</span>&nbsp;<span class="ident" id="3582495">i</span>&nbsp;<span class="op" id="3582497">:=</span>&nbsp;<span class="num" id="3582500">0</span><span class="op" id="3582501">;</span>&nbsp;<span class="ident" id="3582503"><a href="/gostd/regexp/regexp.go.html#3582495">i</a></span>&nbsp;<span class="op" id="3582505">&lt;</span>&nbsp;<span class="builtinfunc" id="3582507">len</span><span class="op" id="3582510">(</span><span class="ident" id="3582511"><a href="/gostd/regexp/regexp.go.html#3582368">s</a></span><span class="op" id="3582512">)</span><span class="op" id="3582513">;</span>&nbsp;<span class="ident" id="3582515"><a href="/gostd/regexp/regexp.go.html#3582495">i</a></span><span class="op" id="3582516">++</span>&nbsp;<span class="op" id="3582519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582523">if</span>&nbsp;<span class="ident" id="3582526"><a href="/gostd/regexp/regexp.go.html#3582046">special</a></span><span class="op" id="3582533">(</span><span class="ident" id="3582534"><a href="/gostd/regexp/regexp.go.html#3582368">s</a></span><span class="op" id="3582535">[</span><span class="ident" id="3582536"><a href="/gostd/regexp/regexp.go.html#3582495">i</a></span><span class="op" id="3582537">]</span><span class="op" id="3582538">)</span>&nbsp;<span class="op" id="3582540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582545"><a href="/gostd/regexp/regexp.go.html#3582388">b</a></span><span class="op" id="3582546">[</span><span class="ident" id="3582547"><a href="/gostd/regexp/regexp.go.html#3582483">j</a></span><span class="op" id="3582548">]</span>&nbsp;<span class="op" id="3582550">=</span>&nbsp;<span class="string" id="3582552">&#39;\\&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582560"><a href="/gostd/regexp/regexp.go.html#3582483">j</a></span><span class="op" id="3582561">++</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3582566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582570"><a href="/gostd/regexp/regexp.go.html#3582388">b</a></span><span class="op" id="3582571">[</span><span class="ident" id="3582572"><a href="/gostd/regexp/regexp.go.html#3582483">j</a></span><span class="op" id="3582573">]</span>&nbsp;<span class="op" id="3582575">=</span>&nbsp;<span class="ident" id="3582577"><a href="/gostd/regexp/regexp.go.html#3582368">s</a></span><span class="op" id="3582578">[</span><span class="ident" id="3582579"><a href="/gostd/regexp/regexp.go.html#3582495">i</a></span><span class="op" id="3582580">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582584"><a href="/gostd/regexp/regexp.go.html#3582483">j</a></span><span class="op" id="3582585">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3582589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582592">return</span>&nbsp;<span class="builtintype" id="3582599">string</span><span class="op" id="3582605">(</span><span class="ident" id="3582606"><a href="/gostd/regexp/regexp.go.html#3582388">b</a></span><span class="op" id="3582607">[</span><span class="num" id="3582608">0</span><span class="op" id="3582609">:</span><span class="ident" id="3582610"><a href="/gostd/regexp/regexp.go.html#3582483">j</a></span><span class="op" id="3582611">]</span><span class="op" id="3582612">)</span><br>
<span class="lineno">595</span><span class="op" id="3582614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3582617">//&nbsp;The&nbsp;number&nbsp;of&nbsp;capture&nbsp;values&nbsp;in&nbsp;the&nbsp;program&nbsp;may&nbsp;correspond</span><br>
<span class="lineno"></span><span class="comment" id="3582679">//&nbsp;to&nbsp;fewer&nbsp;capturing&nbsp;expressions&nbsp;than&nbsp;are&nbsp;in&nbsp;the&nbsp;regexp.</span><br>
<span class="lineno"></span><span class="comment" id="3582737">//&nbsp;For&nbsp;example,&nbsp;&#34;(a){0}&#34;&nbsp;turns&nbsp;into&nbsp;an&nbsp;empty&nbsp;program,&nbsp;so&nbsp;the</span><br>
<span class="lineno">600</span><span class="comment" id="3582798">//&nbsp;maximum&nbsp;capture&nbsp;in&nbsp;the&nbsp;program&nbsp;is&nbsp;0&nbsp;but&nbsp;we&nbsp;need&nbsp;to&nbsp;return</span><br>
<span class="lineno"></span><span class="comment" id="3582859">//&nbsp;an&nbsp;expression&nbsp;for&nbsp;\1.&nbsp;&nbsp;Pad&nbsp;appends&nbsp;-1s&nbsp;to&nbsp;the&nbsp;slice&nbsp;a&nbsp;as&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="3582927">func</span>&nbsp;<span class="op" id="3582932">(</span><span class="ident" id="3582933">re</span>&nbsp;<span class="op" id="3582936">*</span><span class="ident" id="3582937"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3582943">)</span>&nbsp;<span class="ident" id="3582945">pad</span><span class="op" id="3582948">(</span><span class="ident" id="3582949">a</span>&nbsp;<span class="op" id="3582951">[</span><span class="op" id="3582952">]</span><span class="builtintype" id="3582953">int</span><span class="op" id="3582956">)</span>&nbsp;<span class="op" id="3582958">[</span><span class="op" id="3582959">]</span><span class="builtintype" id="3582960">int</span>&nbsp;<span class="op" id="3582964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582967">if</span>&nbsp;<span class="ident" id="3582970"><a href="/gostd/regexp/regexp.go.html#3582949">a</a></span>&nbsp;<span class="op" id="3582972">==</span>&nbsp;<span class="builtintype" id="3582975">nil</span>&nbsp;<span class="op" id="3582979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3582983">//&nbsp;No&nbsp;match.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582998">return</span>&nbsp;<span class="builtintype" id="3583005">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583013">n</span>&nbsp;<span class="op" id="3583015">:=</span>&nbsp;<span class="op" id="3583018">(</span><span class="num" id="3583019">1</span>&nbsp;<span class="op" id="3583021">+</span>&nbsp;<span class="ident" id="3583023"><a href="/gostd/regexp/regexp.go.html#3582933">re</a></span><span class="op" id="3583025">.</span><span class="ident" id="3583026"><a href="/gostd/regexp/regexp.go.html#3567617">numSubexp</a></span><span class="op" id="3583035">)</span>&nbsp;<span class="op" id="3583037">*</span>&nbsp;<span class="num" id="3583039">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583042">for</span>&nbsp;<span class="builtinfunc" id="3583046">len</span><span class="op" id="3583049">(</span><span class="ident" id="3583050"><a href="/gostd/regexp/regexp.go.html#3582949">a</a></span><span class="op" id="3583051">)</span>&nbsp;<span class="op" id="3583053">&lt;</span>&nbsp;<span class="ident" id="3583055"><a href="/gostd/regexp/regexp.go.html#3583013">n</a></span>&nbsp;<span class="op" id="3583057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583061"><a href="/gostd/regexp/regexp.go.html#3582949">a</a></span>&nbsp;<span class="op" id="3583063">=</span>&nbsp;<span class="builtinfunc" id="3583065">append</span><span class="op" id="3583071">(</span><span class="ident" id="3583072"><a href="/gostd/regexp/regexp.go.html#3582949">a</a></span><span class="op" id="3583073">,</span>&nbsp;<span class="op" id="3583075">-</span><span class="num" id="3583076">1</span><span class="op" id="3583077">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583083">return</span>&nbsp;<span class="ident" id="3583090"><a href="/gostd/regexp/regexp.go.html#3582949">a</a></span><br>
<span class="lineno"></span><span class="op" id="3583092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3583095">//&nbsp;Find&nbsp;matches&nbsp;in&nbsp;slice&nbsp;b&nbsp;if&nbsp;b&nbsp;is&nbsp;non-nil,&nbsp;otherwise&nbsp;find&nbsp;matches&nbsp;in&nbsp;string&nbsp;s.</span><br>
<span class="lineno">615</span><span class="keyword" id="3583175">func</span>&nbsp;<span class="op" id="3583180">(</span><span class="ident" id="3583181">re</span>&nbsp;<span class="op" id="3583184">*</span><span class="ident" id="3583185"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3583191">)</span>&nbsp;<span class="ident" id="3583193">allMatches</span><span class="op" id="3583203">(</span><span class="ident" id="3583204">s</span>&nbsp;<span class="builtintype" id="3583206">string</span><span class="op" id="3583212">,</span>&nbsp;<span class="ident" id="3583214">b</span>&nbsp;<span class="op" id="3583216">[</span><span class="op" id="3583217">]</span><span class="builtintype" id="3583218">byte</span><span class="op" id="3583222">,</span>&nbsp;<span class="ident" id="3583224">n</span>&nbsp;<span class="builtintype" id="3583226">int</span><span class="op" id="3583229">,</span>&nbsp;<span class="ident" id="3583231">deliver</span>&nbsp;<span class="keyword" id="3583239">func</span><span class="op" id="3583243">(</span><span class="op" id="3583244">[</span><span class="op" id="3583245">]</span><span class="builtintype" id="3583246">int</span><span class="op" id="3583249">)</span><span class="op" id="3583250">)</span>&nbsp;<span class="op" id="3583252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583255">var</span>&nbsp;<span class="ident" id="3583259">end</span>&nbsp;<span class="builtintype" id="3583263">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583268">if</span>&nbsp;<span class="ident" id="3583271"><a href="/gostd/regexp/regexp.go.html#3583214">b</a></span>&nbsp;<span class="op" id="3583273">==</span>&nbsp;<span class="builtintype" id="3583276">nil</span>&nbsp;<span class="op" id="3583280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583284"><a href="/gostd/regexp/regexp.go.html#3583259">end</a></span>&nbsp;<span class="op" id="3583288">=</span>&nbsp;<span class="builtinfunc" id="3583290">len</span><span class="op" id="3583293">(</span><span class="ident" id="3583294"><a href="/gostd/regexp/regexp.go.html#3583204">s</a></span><span class="op" id="3583295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583298">}</span>&nbsp;<span class="keyword" id="3583300">else</span>&nbsp;<span class="op" id="3583305">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583309"><a href="/gostd/regexp/regexp.go.html#3583259">end</a></span>&nbsp;<span class="op" id="3583313">=</span>&nbsp;<span class="builtinfunc" id="3583315">len</span><span class="op" id="3583318">(</span><span class="ident" id="3583319"><a href="/gostd/regexp/regexp.go.html#3583214">b</a></span><span class="op" id="3583320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583327">for</span>&nbsp;<span class="ident" id="3583331">pos</span><span class="op" id="3583334">,</span>&nbsp;<span class="ident" id="3583336">i</span><span class="op" id="3583337">,</span>&nbsp;<span class="ident" id="3583339">prevMatchEnd</span>&nbsp;<span class="op" id="3583352">:=</span>&nbsp;<span class="num" id="3583355">0</span><span class="op" id="3583356">,</span>&nbsp;<span class="num" id="3583358">0</span><span class="op" id="3583359">,</span>&nbsp;<span class="op" id="3583361">-</span><span class="num" id="3583362">1</span><span class="op" id="3583363">;</span>&nbsp;<span class="ident" id="3583365"><a href="/gostd/regexp/regexp.go.html#3583336">i</a></span>&nbsp;<span class="op" id="3583367">&lt;</span>&nbsp;<span class="ident" id="3583369"><a href="/gostd/regexp/regexp.go.html#3583224">n</a></span>&nbsp;<span class="op" id="3583371">&amp;&amp;</span>&nbsp;<span class="ident" id="3583374"><a href="/gostd/regexp/regexp.go.html#3583331">pos</a></span>&nbsp;<span class="op" id="3583378">&lt;=</span>&nbsp;<span class="ident" id="3583381"><a href="/gostd/regexp/regexp.go.html#3583259">end</a></span><span class="op" id="3583384">;</span>&nbsp;<span class="op" id="3583386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583390">matches</span>&nbsp;<span class="op" id="3583398">:=</span>&nbsp;<span class="ident" id="3583401"><a href="/gostd/regexp/regexp.go.html#3583181">re</a></span><span class="op" id="3583403">.</span><span class="ident" id="3583404"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3583413">(</span><span class="builtintype" id="3583414">nil</span><span class="op" id="3583417">,</span>&nbsp;<span class="ident" id="3583419"><a href="/gostd/regexp/regexp.go.html#3583214">b</a></span><span class="op" id="3583420">,</span>&nbsp;<span class="ident" id="3583422"><a href="/gostd/regexp/regexp.go.html#3583204">s</a></span><span class="op" id="3583423">,</span>&nbsp;<span class="ident" id="3583425"><a href="/gostd/regexp/regexp.go.html#3583331">pos</a></span><span class="op" id="3583428">,</span>&nbsp;<span class="ident" id="3583430"><a href="/gostd/regexp/regexp.go.html#3583181">re</a></span><span class="op" id="3583432">.</span><span class="ident" id="3583433"><a href="/gostd/regexp/regexp.go.html#3567122">prog</a></span><span class="op" id="3583437">.</span><span class="ident" id="3583438"><a href="/gostd/regexp/syntax/prog.go.html#3659082">NumCap</a></span><span class="op" id="3583444">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583448">if</span>&nbsp;<span class="builtinfunc" id="3583451">len</span><span class="op" id="3583454">(</span><span class="ident" id="3583455"><a href="/gostd/regexp/regexp.go.html#3583390">matches</a></span><span class="op" id="3583462">)</span>&nbsp;<span class="op" id="3583464">==</span>&nbsp;<span class="num" id="3583467">0</span>&nbsp;<span class="op" id="3583469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583474">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583487">accept</span>&nbsp;<span class="op" id="3583494">:=</span>&nbsp;<span class="builtintype" id="3583497">true</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583504">if</span>&nbsp;<span class="ident" id="3583507"><a href="/gostd/regexp/regexp.go.html#3583390">matches</a></span><span class="op" id="3583514">[</span><span class="num" id="3583515">1</span><span class="op" id="3583516">]</span>&nbsp;<span class="op" id="3583518">==</span>&nbsp;<span class="ident" id="3583521"><a href="/gostd/regexp/regexp.go.html#3583331">pos</a></span>&nbsp;<span class="op" id="3583525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3583530">//&nbsp;We&#39;ve&nbsp;found&nbsp;an&nbsp;empty&nbsp;match.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583564">if</span>&nbsp;<span class="ident" id="3583567"><a href="/gostd/regexp/regexp.go.html#3583390">matches</a></span><span class="op" id="3583574">[</span><span class="num" id="3583575">0</span><span class="op" id="3583576">]</span>&nbsp;<span class="op" id="3583578">==</span>&nbsp;<span class="ident" id="3583581"><a href="/gostd/regexp/regexp.go.html#3583339">prevMatchEnd</a></span>&nbsp;<span class="op" id="3583594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3583600">//&nbsp;We&nbsp;don&#39;t&nbsp;allow&nbsp;an&nbsp;empty&nbsp;match&nbsp;right</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3583643">//&nbsp;after&nbsp;a&nbsp;previous&nbsp;match,&nbsp;so&nbsp;ignore&nbsp;it.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583688"><a href="/gostd/regexp/regexp.go.html#3583487">accept</a></span>&nbsp;<span class="op" id="3583695">=</span>&nbsp;<span class="builtintype" id="3583697">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583711">var</span>&nbsp;<span class="ident" id="3583715">width</span>&nbsp;<span class="builtintype" id="3583721">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3583728">//&nbsp;TODO:&nbsp;use&nbsp;step()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583751">if</span>&nbsp;<span class="ident" id="3583754"><a href="/gostd/regexp/regexp.go.html#3583214">b</a></span>&nbsp;<span class="op" id="3583756">==</span>&nbsp;<span class="builtintype" id="3583759">nil</span>&nbsp;<span class="op" id="3583763">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583769">_</span><span class="op" id="3583770">,</span>&nbsp;<span class="ident" id="3583772"><a href="/gostd/regexp/regexp.go.html#3583715">width</a></span>&nbsp;<span class="op" id="3583778">=</span>&nbsp;<span class="ident" id="3583780"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3583784">.</span><span class="ident" id="3583785"><a href="/gostd/unicode/utf8/utf8.go.html#1810428">DecodeRuneInString</a></span><span class="op" id="3583803">(</span><span class="ident" id="3583804"><a href="/gostd/regexp/regexp.go.html#3583204">s</a></span><span class="op" id="3583805">[</span><span class="ident" id="3583806"><a href="/gostd/regexp/regexp.go.html#3583331">pos</a></span><span class="op" id="3583809">:</span><span class="ident" id="3583810"><a href="/gostd/regexp/regexp.go.html#3583259">end</a></span><span class="op" id="3583813">]</span><span class="op" id="3583814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583819">}</span>&nbsp;<span class="keyword" id="3583821">else</span>&nbsp;<span class="op" id="3583826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583832">_</span><span class="op" id="3583833">,</span>&nbsp;<span class="ident" id="3583835"><a href="/gostd/regexp/regexp.go.html#3583715">width</a></span>&nbsp;<span class="op" id="3583841">=</span>&nbsp;<span class="ident" id="3583843"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3583847">.</span><span class="ident" id="3583848"><a href="/gostd/unicode/utf8/utf8.go.html#1809912">DecodeRune</a></span><span class="op" id="3583858">(</span><span class="ident" id="3583859"><a href="/gostd/regexp/regexp.go.html#3583214">b</a></span><span class="op" id="3583860">[</span><span class="ident" id="3583861"><a href="/gostd/regexp/regexp.go.html#3583331">pos</a></span><span class="op" id="3583864">:</span><span class="ident" id="3583865"><a href="/gostd/regexp/regexp.go.html#3583259">end</a></span><span class="op" id="3583868">]</span><span class="op" id="3583869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583879">if</span>&nbsp;<span class="ident" id="3583882"><a href="/gostd/regexp/regexp.go.html#3583715">width</a></span>&nbsp;<span class="op" id="3583888">&gt;</span>&nbsp;<span class="num" id="3583890">0</span>&nbsp;<span class="op" id="3583892">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583898"><a href="/gostd/regexp/regexp.go.html#3583331">pos</a></span>&nbsp;<span class="op" id="3583902">+=</span>&nbsp;<span class="ident" id="3583905"><a href="/gostd/regexp/regexp.go.html#3583715">width</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583914">}</span>&nbsp;<span class="keyword" id="3583916">else</span>&nbsp;<span class="op" id="3583921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583927"><a href="/gostd/regexp/regexp.go.html#3583331">pos</a></span>&nbsp;<span class="op" id="3583931">=</span>&nbsp;<span class="ident" id="3583933"><a href="/gostd/regexp/regexp.go.html#3583259">end</a></span>&nbsp;<span class="op" id="3583937">+</span>&nbsp;<span class="num" id="3583939">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583948">}</span>&nbsp;<span class="keyword" id="3583950">else</span>&nbsp;<span class="op" id="3583955">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583960"><a href="/gostd/regexp/regexp.go.html#3583331">pos</a></span>&nbsp;<span class="op" id="3583964">=</span>&nbsp;<span class="ident" id="3583966"><a href="/gostd/regexp/regexp.go.html#3583390">matches</a></span><span class="op" id="3583973">[</span><span class="num" id="3583974">1</span><span class="op" id="3583975">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583983"><a href="/gostd/regexp/regexp.go.html#3583339">prevMatchEnd</a></span>&nbsp;<span class="op" id="3583996">=</span>&nbsp;<span class="ident" id="3583998"><a href="/gostd/regexp/regexp.go.html#3583390">matches</a></span><span class="op" id="3584005">[</span><span class="num" id="3584006">1</span><span class="op" id="3584007">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584012">if</span>&nbsp;<span class="ident" id="3584015"><a href="/gostd/regexp/regexp.go.html#3583487">accept</a></span>&nbsp;<span class="op" id="3584022">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584027"><a href="/gostd/regexp/regexp.go.html#3583231">deliver</a></span><span class="op" id="3584034">(</span><span class="ident" id="3584035"><a href="/gostd/regexp/regexp.go.html#3583181">re</a></span><span class="op" id="3584037">.</span><span class="ident" id="3584038"><a href="/gostd/regexp/regexp.go.html#3582945">pad</a></span><span class="op" id="3584041">(</span><span class="ident" id="3584042"><a href="/gostd/regexp/regexp.go.html#3583390">matches</a></span><span class="op" id="3584049">)</span><span class="op" id="3584050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584055"><a href="/gostd/regexp/regexp.go.html#3583336">i</a></span><span class="op" id="3584056">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3584061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3584064">}</span><br>
<span class="lineno"></span><span class="op" id="3584066">}</span><br>
<span class="lineno">660</span><br>
<span class="lineno"></span><span class="comment" id="3584069">//&nbsp;Find&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;b&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression.</span><br>
<span class="lineno"></span><span class="comment" id="3584164">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3584209">func</span>&nbsp;<span class="op" id="3584214">(</span><span class="ident" id="3584215">re</span>&nbsp;<span class="op" id="3584218">*</span><span class="ident" id="3584219"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3584225">)</span>&nbsp;<span class="ident" id="3584227">Find</span><span class="op" id="3584231">(</span><span class="ident" id="3584232">b</span>&nbsp;<span class="op" id="3584234">[</span><span class="op" id="3584235">]</span><span class="builtintype" id="3584236">byte</span><span class="op" id="3584240">)</span>&nbsp;<span class="op" id="3584242">[</span><span class="op" id="3584243">]</span><span class="builtintype" id="3584244">byte</span>&nbsp;<span class="op" id="3584249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584252">a</span>&nbsp;<span class="op" id="3584254">:=</span>&nbsp;<span class="ident" id="3584257"><a href="/gostd/regexp/regexp.go.html#3584215">re</a></span><span class="op" id="3584259">.</span><span class="ident" id="3584260"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3584269">(</span><span class="builtintype" id="3584270">nil</span><span class="op" id="3584273">,</span>&nbsp;<span class="ident" id="3584275"><a href="/gostd/regexp/regexp.go.html#3584232">b</a></span><span class="op" id="3584276">,</span>&nbsp;<span class="string" id="3584278">&#34;&#34;</span><span class="op" id="3584280">,</span>&nbsp;<span class="num" id="3584282">0</span><span class="op" id="3584283">,</span>&nbsp;<span class="num" id="3584285">2</span><span class="op" id="3584286">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584289">if</span>&nbsp;<span class="ident" id="3584292"><a href="/gostd/regexp/regexp.go.html#3584252">a</a></span>&nbsp;<span class="op" id="3584294">==</span>&nbsp;<span class="builtintype" id="3584297">nil</span>&nbsp;<span class="op" id="3584301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584305">return</span>&nbsp;<span class="builtintype" id="3584312">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3584317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584320">return</span>&nbsp;<span class="ident" id="3584327"><a href="/gostd/regexp/regexp.go.html#3584232">b</a></span><span class="op" id="3584328">[</span><span class="ident" id="3584329"><a href="/gostd/regexp/regexp.go.html#3584252">a</a></span><span class="op" id="3584330">[</span><span class="num" id="3584331">0</span><span class="op" id="3584332">]</span><span class="op" id="3584333">:</span><span class="ident" id="3584334"><a href="/gostd/regexp/regexp.go.html#3584252">a</a></span><span class="op" id="3584335">[</span><span class="num" id="3584336">1</span><span class="op" id="3584337">]</span><span class="op" id="3584338">]</span><br>
<span class="lineno"></span><span class="op" id="3584340">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="3584343">//&nbsp;FindIndex&nbsp;returns&nbsp;a&nbsp;two-element&nbsp;slice&nbsp;of&nbsp;integers&nbsp;defining&nbsp;the&nbsp;location&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3584421">//&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;b&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression.&nbsp;&nbsp;The&nbsp;match&nbsp;itself&nbsp;is&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="3584499">//&nbsp;b[loc[0]:loc[1]].</span><br>
<span class="lineno"></span><span class="comment" id="3584520">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">675</span><span class="keyword" id="3584565">func</span>&nbsp;<span class="op" id="3584570">(</span><span class="ident" id="3584571">re</span>&nbsp;<span class="op" id="3584574">*</span><span class="ident" id="3584575"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3584581">)</span>&nbsp;<span class="ident" id="3584583">FindIndex</span><span class="op" id="3584592">(</span><span class="ident" id="3584593">b</span>&nbsp;<span class="op" id="3584595">[</span><span class="op" id="3584596">]</span><span class="builtintype" id="3584597">byte</span><span class="op" id="3584601">)</span>&nbsp;<span class="op" id="3584603">(</span><span class="ident" id="3584604">loc</span>&nbsp;<span class="op" id="3584608">[</span><span class="op" id="3584609">]</span><span class="builtintype" id="3584610">int</span><span class="op" id="3584613">)</span>&nbsp;<span class="op" id="3584615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584618">a</span>&nbsp;<span class="op" id="3584620">:=</span>&nbsp;<span class="ident" id="3584623"><a href="/gostd/regexp/regexp.go.html#3584571">re</a></span><span class="op" id="3584625">.</span><span class="ident" id="3584626"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3584635">(</span><span class="builtintype" id="3584636">nil</span><span class="op" id="3584639">,</span>&nbsp;<span class="ident" id="3584641"><a href="/gostd/regexp/regexp.go.html#3584593">b</a></span><span class="op" id="3584642">,</span>&nbsp;<span class="string" id="3584644">&#34;&#34;</span><span class="op" id="3584646">,</span>&nbsp;<span class="num" id="3584648">0</span><span class="op" id="3584649">,</span>&nbsp;<span class="num" id="3584651">2</span><span class="op" id="3584652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584655">if</span>&nbsp;<span class="ident" id="3584658"><a href="/gostd/regexp/regexp.go.html#3584618">a</a></span>&nbsp;<span class="op" id="3584660">==</span>&nbsp;<span class="builtintype" id="3584663">nil</span>&nbsp;<span class="op" id="3584667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584671">return</span>&nbsp;<span class="builtintype" id="3584678">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3584683">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584686">return</span>&nbsp;<span class="ident" id="3584693"><a href="/gostd/regexp/regexp.go.html#3584618">a</a></span><span class="op" id="3584694">[</span><span class="num" id="3584695">0</span><span class="op" id="3584696">:</span><span class="num" id="3584697">2</span><span class="op" id="3584698">]</span><br>
<span class="lineno"></span><span class="op" id="3584700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3584703">//&nbsp;FindString&nbsp;returns&nbsp;a&nbsp;string&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;s&nbsp;of&nbsp;the&nbsp;regular</span><br>
<span class="lineno"></span><span class="comment" id="3584793">//&nbsp;expression.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;match,&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,</span><br>
<span class="lineno">685</span><span class="comment" id="3584868">//&nbsp;but&nbsp;it&nbsp;will&nbsp;also&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;regular&nbsp;expression&nbsp;successfully&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="3584944">//&nbsp;an&nbsp;empty&nbsp;string.&nbsp;&nbsp;Use&nbsp;FindStringIndex&nbsp;or&nbsp;FindStringSubmatch&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3585016">//&nbsp;necessary&nbsp;to&nbsp;distinguish&nbsp;these&nbsp;cases.</span><br>
<span class="lineno"></span><span class="keyword" id="3585057">func</span>&nbsp;<span class="op" id="3585062">(</span><span class="ident" id="3585063">re</span>&nbsp;<span class="op" id="3585066">*</span><span class="ident" id="3585067"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3585073">)</span>&nbsp;<span class="ident" id="3585075">FindString</span><span class="op" id="3585085">(</span><span class="ident" id="3585086">s</span>&nbsp;<span class="builtintype" id="3585088">string</span><span class="op" id="3585094">)</span>&nbsp;<span class="builtintype" id="3585096">string</span>&nbsp;<span class="op" id="3585103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3585106">a</span>&nbsp;<span class="op" id="3585108">:=</span>&nbsp;<span class="ident" id="3585111"><a href="/gostd/regexp/regexp.go.html#3585063">re</a></span><span class="op" id="3585113">.</span><span class="ident" id="3585114"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3585123">(</span><span class="builtintype" id="3585124">nil</span><span class="op" id="3585127">,</span>&nbsp;<span class="builtintype" id="3585129">nil</span><span class="op" id="3585132">,</span>&nbsp;<span class="ident" id="3585134"><a href="/gostd/regexp/regexp.go.html#3585086">s</a></span><span class="op" id="3585135">,</span>&nbsp;<span class="num" id="3585137">0</span><span class="op" id="3585138">,</span>&nbsp;<span class="num" id="3585140">2</span><span class="op" id="3585141">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585144">if</span>&nbsp;<span class="ident" id="3585147"><a href="/gostd/regexp/regexp.go.html#3585106">a</a></span>&nbsp;<span class="op" id="3585149">==</span>&nbsp;<span class="builtintype" id="3585152">nil</span>&nbsp;<span class="op" id="3585156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585160">return</span>&nbsp;<span class="string" id="3585167">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3585171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585174">return</span>&nbsp;<span class="ident" id="3585181"><a href="/gostd/regexp/regexp.go.html#3585086">s</a></span><span class="op" id="3585182">[</span><span class="ident" id="3585183"><a href="/gostd/regexp/regexp.go.html#3585106">a</a></span><span class="op" id="3585184">[</span><span class="num" id="3585185">0</span><span class="op" id="3585186">]</span><span class="op" id="3585187">:</span><span class="ident" id="3585188"><a href="/gostd/regexp/regexp.go.html#3585106">a</a></span><span class="op" id="3585189">[</span><span class="num" id="3585190">1</span><span class="op" id="3585191">]</span><span class="op" id="3585192">]</span><br>
<span class="lineno"></span><span class="op" id="3585194">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="comment" id="3585197">//&nbsp;FindStringIndex&nbsp;returns&nbsp;a&nbsp;two-element&nbsp;slice&nbsp;of&nbsp;integers&nbsp;defining&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3585269">//&nbsp;location&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;in&nbsp;s&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression.&nbsp;&nbsp;The&nbsp;match</span><br>
<span class="lineno"></span><span class="comment" id="3585346">//&nbsp;itself&nbsp;is&nbsp;at&nbsp;s[loc[0]:loc[1]].</span><br>
<span class="lineno"></span><span class="comment" id="3585380">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">700</span><span class="keyword" id="3585425">func</span>&nbsp;<span class="op" id="3585430">(</span><span class="ident" id="3585431">re</span>&nbsp;<span class="op" id="3585434">*</span><span class="ident" id="3585435"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3585441">)</span>&nbsp;<span class="ident" id="3585443">FindStringIndex</span><span class="op" id="3585458">(</span><span class="ident" id="3585459">s</span>&nbsp;<span class="builtintype" id="3585461">string</span><span class="op" id="3585467">)</span>&nbsp;<span class="op" id="3585469">(</span><span class="ident" id="3585470">loc</span>&nbsp;<span class="op" id="3585474">[</span><span class="op" id="3585475">]</span><span class="builtintype" id="3585476">int</span><span class="op" id="3585479">)</span>&nbsp;<span class="op" id="3585481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3585484">a</span>&nbsp;<span class="op" id="3585486">:=</span>&nbsp;<span class="ident" id="3585489"><a href="/gostd/regexp/regexp.go.html#3585431">re</a></span><span class="op" id="3585491">.</span><span class="ident" id="3585492"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3585501">(</span><span class="builtintype" id="3585502">nil</span><span class="op" id="3585505">,</span>&nbsp;<span class="builtintype" id="3585507">nil</span><span class="op" id="3585510">,</span>&nbsp;<span class="ident" id="3585512"><a href="/gostd/regexp/regexp.go.html#3585459">s</a></span><span class="op" id="3585513">,</span>&nbsp;<span class="num" id="3585515">0</span><span class="op" id="3585516">,</span>&nbsp;<span class="num" id="3585518">2</span><span class="op" id="3585519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585522">if</span>&nbsp;<span class="ident" id="3585525"><a href="/gostd/regexp/regexp.go.html#3585484">a</a></span>&nbsp;<span class="op" id="3585527">==</span>&nbsp;<span class="builtintype" id="3585530">nil</span>&nbsp;<span class="op" id="3585534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585538">return</span>&nbsp;<span class="builtintype" id="3585545">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3585550">}</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585553">return</span>&nbsp;<span class="ident" id="3585560"><a href="/gostd/regexp/regexp.go.html#3585484">a</a></span><span class="op" id="3585561">[</span><span class="num" id="3585562">0</span><span class="op" id="3585563">:</span><span class="num" id="3585564">2</span><span class="op" id="3585565">]</span><br>
<span class="lineno"></span><span class="op" id="3585567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3585570">//&nbsp;FindReaderIndex&nbsp;returns&nbsp;a&nbsp;two-element&nbsp;slice&nbsp;of&nbsp;integers&nbsp;defining&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3585642">//&nbsp;location&nbsp;of&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;text&nbsp;read&nbsp;from</span><br>
<span class="lineno">710</span><span class="comment" id="3585720">//&nbsp;the&nbsp;RuneReader.&nbsp;&nbsp;The&nbsp;match&nbsp;text&nbsp;was&nbsp;found&nbsp;in&nbsp;the&nbsp;input&nbsp;stream&nbsp;at</span><br>
<span class="lineno"></span><span class="comment" id="3585788">//&nbsp;byte&nbsp;offset&nbsp;loc[0]&nbsp;through&nbsp;loc[1]-1.</span><br>
<span class="lineno"></span><span class="comment" id="3585828">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3585873">func</span>&nbsp;<span class="op" id="3585878">(</span><span class="ident" id="3585879">re</span>&nbsp;<span class="op" id="3585882">*</span><span class="ident" id="3585883"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3585889">)</span>&nbsp;<span class="ident" id="3585891">FindReaderIndex</span><span class="op" id="3585906">(</span><span class="ident" id="3585907">r</span>&nbsp;<span class="ident" id="3585909"><a href="/gostd/regexp/regexp.go.html#3566787">io</a></span><span class="op" id="3585911">.</span><span class="ident" id="3585912"><a href="/gostd/io/io.go.html#1427733">RuneReader</a></span><span class="op" id="3585922">)</span>&nbsp;<span class="op" id="3585924">(</span><span class="ident" id="3585925">loc</span>&nbsp;<span class="op" id="3585929">[</span><span class="op" id="3585930">]</span><span class="builtintype" id="3585931">int</span><span class="op" id="3585934">)</span>&nbsp;<span class="op" id="3585936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3585939">a</span>&nbsp;<span class="op" id="3585941">:=</span>&nbsp;<span class="ident" id="3585944"><a href="/gostd/regexp/regexp.go.html#3585879">re</a></span><span class="op" id="3585946">.</span><span class="ident" id="3585947"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3585956">(</span><span class="ident" id="3585957"><a href="/gostd/regexp/regexp.go.html#3585907">r</a></span><span class="op" id="3585958">,</span>&nbsp;<span class="builtintype" id="3585960">nil</span><span class="op" id="3585963">,</span>&nbsp;<span class="string" id="3585965">&#34;&#34;</span><span class="op" id="3585967">,</span>&nbsp;<span class="num" id="3585969">0</span><span class="op" id="3585970">,</span>&nbsp;<span class="num" id="3585972">2</span><span class="op" id="3585973">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585976">if</span>&nbsp;<span class="ident" id="3585979"><a href="/gostd/regexp/regexp.go.html#3585939">a</a></span>&nbsp;<span class="op" id="3585981">==</span>&nbsp;<span class="builtintype" id="3585984">nil</span>&nbsp;<span class="op" id="3585988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585992">return</span>&nbsp;<span class="builtintype" id="3585999">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3586004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586007">return</span>&nbsp;<span class="ident" id="3586014"><a href="/gostd/regexp/regexp.go.html#3585939">a</a></span><span class="op" id="3586015">[</span><span class="num" id="3586016">0</span><span class="op" id="3586017">:</span><span class="num" id="3586018">2</span><span class="op" id="3586019">]</span><br>
<span class="lineno"></span><span class="op" id="3586021">}</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="3586024">//&nbsp;FindSubmatch&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;slices&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the&nbsp;leftmost</span><br>
<span class="lineno"></span><span class="comment" id="3586099">//&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;b&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="3586171">//&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;descriptions&nbsp;in&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="3586247">//&nbsp;comment.</span><br>
<span class="lineno">725</span><span class="comment" id="3586259">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3586304">func</span>&nbsp;<span class="op" id="3586309">(</span><span class="ident" id="3586310">re</span>&nbsp;<span class="op" id="3586313">*</span><span class="ident" id="3586314"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3586320">)</span>&nbsp;<span class="ident" id="3586322">FindSubmatch</span><span class="op" id="3586334">(</span><span class="ident" id="3586335">b</span>&nbsp;<span class="op" id="3586337">[</span><span class="op" id="3586338">]</span><span class="builtintype" id="3586339">byte</span><span class="op" id="3586343">)</span>&nbsp;<span class="op" id="3586345">[</span><span class="op" id="3586346">]</span><span class="op" id="3586347">[</span><span class="op" id="3586348">]</span><span class="builtintype" id="3586349">byte</span>&nbsp;<span class="op" id="3586354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586357">a</span>&nbsp;<span class="op" id="3586359">:=</span>&nbsp;<span class="ident" id="3586362"><a href="/gostd/regexp/regexp.go.html#3586310">re</a></span><span class="op" id="3586364">.</span><span class="ident" id="3586365"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3586374">(</span><span class="builtintype" id="3586375">nil</span><span class="op" id="3586378">,</span>&nbsp;<span class="ident" id="3586380"><a href="/gostd/regexp/regexp.go.html#3586335">b</a></span><span class="op" id="3586381">,</span>&nbsp;<span class="string" id="3586383">&#34;&#34;</span><span class="op" id="3586385">,</span>&nbsp;<span class="num" id="3586387">0</span><span class="op" id="3586388">,</span>&nbsp;<span class="ident" id="3586390"><a href="/gostd/regexp/regexp.go.html#3586310">re</a></span><span class="op" id="3586392">.</span><span class="ident" id="3586393"><a href="/gostd/regexp/regexp.go.html#3567122">prog</a></span><span class="op" id="3586397">.</span><span class="ident" id="3586398"><a href="/gostd/regexp/syntax/prog.go.html#3659082">NumCap</a></span><span class="op" id="3586404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586407">if</span>&nbsp;<span class="ident" id="3586410"><a href="/gostd/regexp/regexp.go.html#3586357">a</a></span>&nbsp;<span class="op" id="3586412">==</span>&nbsp;<span class="builtintype" id="3586415">nil</span>&nbsp;<span class="op" id="3586419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586423">return</span>&nbsp;<span class="builtintype" id="3586430">nil</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3586435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586438">ret</span>&nbsp;<span class="op" id="3586442">:=</span>&nbsp;<span class="builtinfunc" id="3586445">make</span><span class="op" id="3586449">(</span><span class="op" id="3586450">[</span><span class="op" id="3586451">]</span><span class="op" id="3586452">[</span><span class="op" id="3586453">]</span><span class="builtintype" id="3586454">byte</span><span class="op" id="3586458">,</span>&nbsp;<span class="num" id="3586460">1</span><span class="op" id="3586461">+</span><span class="ident" id="3586462"><a href="/gostd/regexp/regexp.go.html#3586310">re</a></span><span class="op" id="3586464">.</span><span class="ident" id="3586465"><a href="/gostd/regexp/regexp.go.html#3567617">numSubexp</a></span><span class="op" id="3586474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586477">for</span>&nbsp;<span class="ident" id="3586481">i</span>&nbsp;<span class="op" id="3586483">:=</span>&nbsp;<span class="keyword" id="3586486">range</span>&nbsp;<span class="ident" id="3586492"><a href="/gostd/regexp/regexp.go.html#3586438">ret</a></span>&nbsp;<span class="op" id="3586496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586500">if</span>&nbsp;<span class="num" id="3586503">2</span><span class="op" id="3586504">*</span><span class="ident" id="3586505"><a href="/gostd/regexp/regexp.go.html#3586481">i</a></span>&nbsp;<span class="op" id="3586507">&lt;</span>&nbsp;<span class="builtinfunc" id="3586509">len</span><span class="op" id="3586512">(</span><span class="ident" id="3586513"><a href="/gostd/regexp/regexp.go.html#3586357">a</a></span><span class="op" id="3586514">)</span>&nbsp;<span class="op" id="3586516">&amp;&amp;</span>&nbsp;<span class="ident" id="3586519"><a href="/gostd/regexp/regexp.go.html#3586357">a</a></span><span class="op" id="3586520">[</span><span class="num" id="3586521">2</span><span class="op" id="3586522">*</span><span class="ident" id="3586523"><a href="/gostd/regexp/regexp.go.html#3586481">i</a></span><span class="op" id="3586524">]</span>&nbsp;<span class="op" id="3586526">&gt;=</span>&nbsp;<span class="num" id="3586529">0</span>&nbsp;<span class="op" id="3586531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586536"><a href="/gostd/regexp/regexp.go.html#3586438">ret</a></span><span class="op" id="3586539">[</span><span class="ident" id="3586540"><a href="/gostd/regexp/regexp.go.html#3586481">i</a></span><span class="op" id="3586541">]</span>&nbsp;<span class="op" id="3586543">=</span>&nbsp;<span class="ident" id="3586545"><a href="/gostd/regexp/regexp.go.html#3586335">b</a></span><span class="op" id="3586546">[</span><span class="ident" id="3586547"><a href="/gostd/regexp/regexp.go.html#3586357">a</a></span><span class="op" id="3586548">[</span><span class="num" id="3586549">2</span><span class="op" id="3586550">*</span><span class="ident" id="3586551"><a href="/gostd/regexp/regexp.go.html#3586481">i</a></span><span class="op" id="3586552">]</span><span class="op" id="3586553">:</span><span class="ident" id="3586554"><a href="/gostd/regexp/regexp.go.html#3586357">a</a></span><span class="op" id="3586555">[</span><span class="num" id="3586556">2</span><span class="op" id="3586557">*</span><span class="ident" id="3586558"><a href="/gostd/regexp/regexp.go.html#3586481">i</a></span><span class="op" id="3586559">+</span><span class="num" id="3586560">1</span><span class="op" id="3586561">]</span><span class="op" id="3586562">]</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3586566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3586569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586572">return</span>&nbsp;<span class="ident" id="3586579"><a href="/gostd/regexp/regexp.go.html#3586438">ret</a></span><br>
<span class="lineno"></span><span class="op" id="3586583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="comment" id="3586586">//&nbsp;Expand&nbsp;appends&nbsp;template&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;result;&nbsp;during&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3586655">//&nbsp;append,&nbsp;Expand&nbsp;replaces&nbsp;variables&nbsp;in&nbsp;the&nbsp;template&nbsp;with&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="3586727">//&nbsp;matches&nbsp;drawn&nbsp;from&nbsp;src.&nbsp;&nbsp;The&nbsp;match&nbsp;slice&nbsp;should&nbsp;have&nbsp;been&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3586800">//&nbsp;FindSubmatchIndex.</span><br>
<span class="lineno"></span><span class="comment" id="3586822">//</span><br>
<span class="lineno">745</span><span class="comment" id="3586825">//&nbsp;In&nbsp;the&nbsp;template,&nbsp;a&nbsp;variable&nbsp;is&nbsp;denoted&nbsp;by&nbsp;a&nbsp;substring&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="3586894">//&nbsp;$name&nbsp;or&nbsp;${name},&nbsp;where&nbsp;name&nbsp;is&nbsp;a&nbsp;non-empty&nbsp;sequence&nbsp;of&nbsp;letters,</span><br>
<span class="lineno"></span><span class="comment" id="3586962">//&nbsp;digits,&nbsp;and&nbsp;underscores.&nbsp;&nbsp;A&nbsp;purely&nbsp;numeric&nbsp;name&nbsp;like&nbsp;$1&nbsp;refers&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3587031">//&nbsp;the&nbsp;submatch&nbsp;with&nbsp;the&nbsp;corresponding&nbsp;index;&nbsp;other&nbsp;names&nbsp;refer&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3587098">//&nbsp;capturing&nbsp;parentheses&nbsp;named&nbsp;with&nbsp;the&nbsp;(?P&lt;name&gt;...)&nbsp;syntax.&nbsp;&nbsp;A</span><br>
<span class="lineno">750</span><span class="comment" id="3587163">//&nbsp;reference&nbsp;to&nbsp;an&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;unmatched&nbsp;index&nbsp;or&nbsp;a&nbsp;name&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3587236">//&nbsp;present&nbsp;in&nbsp;the&nbsp;regular&nbsp;expression&nbsp;is&nbsp;replaced&nbsp;with&nbsp;an&nbsp;empty&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="3587306">//</span><br>
<span class="lineno"></span><span class="comment" id="3587309">//&nbsp;In&nbsp;the&nbsp;$name&nbsp;form,&nbsp;name&nbsp;is&nbsp;taken&nbsp;to&nbsp;be&nbsp;as&nbsp;long&nbsp;as&nbsp;possible:&nbsp;$1x&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3587379">//&nbsp;equivalent&nbsp;to&nbsp;${1x},&nbsp;not&nbsp;${1}x,&nbsp;and,&nbsp;$10&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;${10},&nbsp;not&nbsp;${1}0.</span><br>
<span class="lineno">755</span><span class="comment" id="3587458">//</span><br>
<span class="lineno"></span><span class="comment" id="3587461">//&nbsp;To&nbsp;insert&nbsp;a&nbsp;literal&nbsp;$&nbsp;in&nbsp;the&nbsp;output,&nbsp;use&nbsp;$$&nbsp;in&nbsp;the&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="3587525">func</span>&nbsp;<span class="op" id="3587530">(</span><span class="ident" id="3587531">re</span>&nbsp;<span class="op" id="3587534">*</span><span class="ident" id="3587535"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3587541">)</span>&nbsp;<span class="ident" id="3587543">Expand</span><span class="op" id="3587549">(</span><span class="ident" id="3587550">dst</span>&nbsp;<span class="op" id="3587554">[</span><span class="op" id="3587555">]</span><span class="builtintype" id="3587556">byte</span><span class="op" id="3587560">,</span>&nbsp;<span class="ident" id="3587562">template</span>&nbsp;<span class="op" id="3587571">[</span><span class="op" id="3587572">]</span><span class="builtintype" id="3587573">byte</span><span class="op" id="3587577">,</span>&nbsp;<span class="ident" id="3587579">src</span>&nbsp;<span class="op" id="3587583">[</span><span class="op" id="3587584">]</span><span class="builtintype" id="3587585">byte</span><span class="op" id="3587589">,</span>&nbsp;<span class="ident" id="3587591">match</span>&nbsp;<span class="op" id="3587597">[</span><span class="op" id="3587598">]</span><span class="builtintype" id="3587599">int</span><span class="op" id="3587602">)</span>&nbsp;<span class="op" id="3587604">[</span><span class="op" id="3587605">]</span><span class="builtintype" id="3587606">byte</span>&nbsp;<span class="op" id="3587611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587614">return</span>&nbsp;<span class="ident" id="3587621"><a href="/gostd/regexp/regexp.go.html#3587531">re</a></span><span class="op" id="3587623">.</span><span class="ident" id="3587624"><a href="/gostd/regexp/regexp.go.html#3588014">expand</a></span><span class="op" id="3587630">(</span><span class="ident" id="3587631"><a href="/gostd/regexp/regexp.go.html#3587550">dst</a></span><span class="op" id="3587634">,</span>&nbsp;<span class="builtintype" id="3587636">string</span><span class="op" id="3587642">(</span><span class="ident" id="3587643"><a href="/gostd/regexp/regexp.go.html#3587562">template</a></span><span class="op" id="3587651">)</span><span class="op" id="3587652">,</span>&nbsp;<span class="ident" id="3587654"><a href="/gostd/regexp/regexp.go.html#3587579">src</a></span><span class="op" id="3587657">,</span>&nbsp;<span class="string" id="3587659">&#34;&#34;</span><span class="op" id="3587661">,</span>&nbsp;<span class="ident" id="3587663"><a href="/gostd/regexp/regexp.go.html#3587591">match</a></span><span class="op" id="3587668">)</span><br>
<span class="lineno"></span><span class="op" id="3587670">}</span><br>
<span class="lineno">760</span><br>
<span class="lineno"></span><span class="comment" id="3587673">//&nbsp;ExpandString&nbsp;is&nbsp;like&nbsp;Expand&nbsp;but&nbsp;the&nbsp;template&nbsp;and&nbsp;source&nbsp;are&nbsp;strings.</span><br>
<span class="lineno"></span><span class="comment" id="3587745">//&nbsp;It&nbsp;appends&nbsp;to&nbsp;and&nbsp;returns&nbsp;a&nbsp;byte&nbsp;slice&nbsp;in&nbsp;order&nbsp;to&nbsp;give&nbsp;the&nbsp;calling</span><br>
<span class="lineno"></span><span class="comment" id="3587816">//&nbsp;code&nbsp;control&nbsp;over&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="3587849">func</span>&nbsp;<span class="op" id="3587854">(</span><span class="ident" id="3587855">re</span>&nbsp;<span class="op" id="3587858">*</span><span class="ident" id="3587859"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3587865">)</span>&nbsp;<span class="ident" id="3587867">ExpandString</span><span class="op" id="3587879">(</span><span class="ident" id="3587880">dst</span>&nbsp;<span class="op" id="3587884">[</span><span class="op" id="3587885">]</span><span class="builtintype" id="3587886">byte</span><span class="op" id="3587890">,</span>&nbsp;<span class="ident" id="3587892">template</span>&nbsp;<span class="builtintype" id="3587901">string</span><span class="op" id="3587907">,</span>&nbsp;<span class="ident" id="3587909">src</span>&nbsp;<span class="builtintype" id="3587913">string</span><span class="op" id="3587919">,</span>&nbsp;<span class="ident" id="3587921">match</span>&nbsp;<span class="op" id="3587927">[</span><span class="op" id="3587928">]</span><span class="builtintype" id="3587929">int</span><span class="op" id="3587932">)</span>&nbsp;<span class="op" id="3587934">[</span><span class="op" id="3587935">]</span><span class="builtintype" id="3587936">byte</span>&nbsp;<span class="op" id="3587941">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587944">return</span>&nbsp;<span class="ident" id="3587951"><a href="/gostd/regexp/regexp.go.html#3587855">re</a></span><span class="op" id="3587953">.</span><span class="ident" id="3587954"><a href="/gostd/regexp/regexp.go.html#3588014">expand</a></span><span class="op" id="3587960">(</span><span class="ident" id="3587961"><a href="/gostd/regexp/regexp.go.html#3587880">dst</a></span><span class="op" id="3587964">,</span>&nbsp;<span class="ident" id="3587966"><a href="/gostd/regexp/regexp.go.html#3587892">template</a></span><span class="op" id="3587974">,</span>&nbsp;<span class="builtintype" id="3587976">nil</span><span class="op" id="3587979">,</span>&nbsp;<span class="ident" id="3587981"><a href="/gostd/regexp/regexp.go.html#3587909">src</a></span><span class="op" id="3587984">,</span>&nbsp;<span class="ident" id="3587986"><a href="/gostd/regexp/regexp.go.html#3587921">match</a></span><span class="op" id="3587991">)</span><br>
<span class="lineno"></span><span class="op" id="3587993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3587996">func</span>&nbsp;<span class="op" id="3588001">(</span><span class="ident" id="3588002">re</span>&nbsp;<span class="op" id="3588005">*</span><span class="ident" id="3588006"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3588012">)</span>&nbsp;<span class="ident" id="3588014">expand</span><span class="op" id="3588020">(</span><span class="ident" id="3588021">dst</span>&nbsp;<span class="op" id="3588025">[</span><span class="op" id="3588026">]</span><span class="builtintype" id="3588027">byte</span><span class="op" id="3588031">,</span>&nbsp;<span class="ident" id="3588033">template</span>&nbsp;<span class="builtintype" id="3588042">string</span><span class="op" id="3588048">,</span>&nbsp;<span class="ident" id="3588050">bsrc</span>&nbsp;<span class="op" id="3588055">[</span><span class="op" id="3588056">]</span><span class="builtintype" id="3588057">byte</span><span class="op" id="3588061">,</span>&nbsp;<span class="ident" id="3588063">src</span>&nbsp;<span class="builtintype" id="3588067">string</span><span class="op" id="3588073">,</span>&nbsp;<span class="ident" id="3588075">match</span>&nbsp;<span class="op" id="3588081">[</span><span class="op" id="3588082">]</span><span class="builtintype" id="3588083">int</span><span class="op" id="3588086">)</span>&nbsp;<span class="op" id="3588088">[</span><span class="op" id="3588089">]</span><span class="builtintype" id="3588090">byte</span>&nbsp;<span class="op" id="3588095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588098">for</span>&nbsp;<span class="builtinfunc" id="3588102">len</span><span class="op" id="3588105">(</span><span class="ident" id="3588106"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span><span class="op" id="3588114">)</span>&nbsp;<span class="op" id="3588116">&gt;</span>&nbsp;<span class="num" id="3588118">0</span>&nbsp;<span class="op" id="3588120">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588124">i</span>&nbsp;<span class="op" id="3588126">:=</span>&nbsp;<span class="ident" id="3588129"><a href="/gostd/regexp/regexp.go.html#3566821">strings</a></span><span class="op" id="3588136">.</span><span class="ident" id="3588137"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="3588142">(</span><span class="ident" id="3588143"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span><span class="op" id="3588151">,</span>&nbsp;<span class="string" id="3588153">&#34;$&#34;</span><span class="op" id="3588156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588160">if</span>&nbsp;<span class="ident" id="3588163"><a href="/gostd/regexp/regexp.go.html#3588124">i</a></span>&nbsp;<span class="op" id="3588165">&lt;</span>&nbsp;<span class="num" id="3588167">0</span>&nbsp;<span class="op" id="3588169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588174">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588186"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span>&nbsp;<span class="op" id="3588190">=</span>&nbsp;<span class="builtinfunc" id="3588192">append</span><span class="op" id="3588198">(</span><span class="ident" id="3588199"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span><span class="op" id="3588202">,</span>&nbsp;<span class="ident" id="3588204"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span><span class="op" id="3588212">[</span><span class="op" id="3588213">:</span><span class="ident" id="3588214"><a href="/gostd/regexp/regexp.go.html#3588124">i</a></span><span class="op" id="3588215">]</span><span class="op" id="3588216">...</span><span class="op" id="3588219">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588223"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span>&nbsp;<span class="op" id="3588232">=</span>&nbsp;<span class="ident" id="3588234"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span><span class="op" id="3588242">[</span><span class="ident" id="3588243"><a href="/gostd/regexp/regexp.go.html#3588124">i</a></span><span class="op" id="3588244">:</span><span class="op" id="3588245">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588249">if</span>&nbsp;<span class="builtinfunc" id="3588252">len</span><span class="op" id="3588255">(</span><span class="ident" id="3588256"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span><span class="op" id="3588264">)</span>&nbsp;<span class="op" id="3588266">&gt;</span>&nbsp;<span class="num" id="3588268">1</span>&nbsp;<span class="op" id="3588270">&amp;&amp;</span>&nbsp;<span class="ident" id="3588273"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span><span class="op" id="3588281">[</span><span class="num" id="3588282">1</span><span class="op" id="3588283">]</span>&nbsp;<span class="op" id="3588285">==</span>&nbsp;<span class="string" id="3588288">&#39;$&#39;</span>&nbsp;<span class="op" id="3588292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3588297">//&nbsp;Treat&nbsp;$$&nbsp;as&nbsp;$.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588318"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span>&nbsp;<span class="op" id="3588322">=</span>&nbsp;<span class="builtinfunc" id="3588324">append</span><span class="op" id="3588330">(</span><span class="ident" id="3588331"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span><span class="op" id="3588334">,</span>&nbsp;<span class="string" id="3588336">&#39;$&#39;</span><span class="op" id="3588339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588344"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span>&nbsp;<span class="op" id="3588353">=</span>&nbsp;<span class="ident" id="3588355"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span><span class="op" id="3588363">[</span><span class="num" id="3588364">2</span><span class="op" id="3588365">:</span><span class="op" id="3588366">]</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588371">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588386">name</span><span class="op" id="3588390">,</span>&nbsp;<span class="ident" id="3588392">num</span><span class="op" id="3588395">,</span>&nbsp;<span class="ident" id="3588397">rest</span><span class="op" id="3588401">,</span>&nbsp;<span class="ident" id="3588403">ok</span>&nbsp;<span class="op" id="3588406">:=</span>&nbsp;<span class="ident" id="3588409"><a href="/gostd/regexp/regexp.go.html#3589305">extract</a></span><span class="op" id="3588416">(</span><span class="ident" id="3588417"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span><span class="op" id="3588425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588429">if</span>&nbsp;<span class="op" id="3588432">!</span><span class="ident" id="3588433"><a href="/gostd/regexp/regexp.go.html#3588403">ok</a></span>&nbsp;<span class="op" id="3588436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3588441">//&nbsp;Malformed;&nbsp;treat&nbsp;$&nbsp;as&nbsp;raw&nbsp;text.</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588479"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span>&nbsp;<span class="op" id="3588483">=</span>&nbsp;<span class="builtinfunc" id="3588485">append</span><span class="op" id="3588491">(</span><span class="ident" id="3588492"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span><span class="op" id="3588495">,</span>&nbsp;<span class="string" id="3588497">&#39;$&#39;</span><span class="op" id="3588500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588505"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span>&nbsp;<span class="op" id="3588514">=</span>&nbsp;<span class="ident" id="3588516"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span><span class="op" id="3588524">[</span><span class="num" id="3588525">1</span><span class="op" id="3588526">:</span><span class="op" id="3588527">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588532">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588547"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span>&nbsp;<span class="op" id="3588556">=</span>&nbsp;<span class="ident" id="3588558"><a href="/gostd/regexp/regexp.go.html#3588397">rest</a></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588565">if</span>&nbsp;<span class="ident" id="3588568"><a href="/gostd/regexp/regexp.go.html#3588392">num</a></span>&nbsp;<span class="op" id="3588572">&gt;=</span>&nbsp;<span class="num" id="3588575">0</span>&nbsp;<span class="op" id="3588577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588582">if</span>&nbsp;<span class="num" id="3588585">2</span><span class="op" id="3588586">*</span><span class="ident" id="3588587"><a href="/gostd/regexp/regexp.go.html#3588392">num</a></span><span class="op" id="3588590">+</span><span class="num" id="3588591">1</span>&nbsp;<span class="op" id="3588593">&lt;</span>&nbsp;<span class="builtinfunc" id="3588595">len</span><span class="op" id="3588598">(</span><span class="ident" id="3588599"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3588604">)</span>&nbsp;<span class="op" id="3588606">&amp;&amp;</span>&nbsp;<span class="ident" id="3588609"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3588614">[</span><span class="num" id="3588615">2</span><span class="op" id="3588616">*</span><span class="ident" id="3588617"><a href="/gostd/regexp/regexp.go.html#3588392">num</a></span><span class="op" id="3588620">]</span>&nbsp;<span class="op" id="3588622">&gt;=</span>&nbsp;<span class="num" id="3588625">0</span>&nbsp;<span class="op" id="3588627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588633">if</span>&nbsp;<span class="ident" id="3588636"><a href="/gostd/regexp/regexp.go.html#3588050">bsrc</a></span>&nbsp;<span class="op" id="3588641">!=</span>&nbsp;<span class="builtintype" id="3588644">nil</span>&nbsp;<span class="op" id="3588648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588655"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span>&nbsp;<span class="op" id="3588659">=</span>&nbsp;<span class="builtinfunc" id="3588661">append</span><span class="op" id="3588667">(</span><span class="ident" id="3588668"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span><span class="op" id="3588671">,</span>&nbsp;<span class="ident" id="3588673"><a href="/gostd/regexp/regexp.go.html#3588050">bsrc</a></span><span class="op" id="3588677">[</span><span class="ident" id="3588678"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3588683">[</span><span class="num" id="3588684">2</span><span class="op" id="3588685">*</span><span class="ident" id="3588686"><a href="/gostd/regexp/regexp.go.html#3588392">num</a></span><span class="op" id="3588689">]</span><span class="op" id="3588690">:</span><span class="ident" id="3588691"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3588696">[</span><span class="num" id="3588697">2</span><span class="op" id="3588698">*</span><span class="ident" id="3588699"><a href="/gostd/regexp/regexp.go.html#3588392">num</a></span><span class="op" id="3588702">+</span><span class="num" id="3588703">1</span><span class="op" id="3588704">]</span><span class="op" id="3588705">]</span><span class="op" id="3588706">...</span><span class="op" id="3588709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588715">}</span>&nbsp;<span class="keyword" id="3588717">else</span>&nbsp;<span class="op" id="3588722">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588729"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span>&nbsp;<span class="op" id="3588733">=</span>&nbsp;<span class="builtinfunc" id="3588735">append</span><span class="op" id="3588741">(</span><span class="ident" id="3588742"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span><span class="op" id="3588745">,</span>&nbsp;<span class="ident" id="3588747"><a href="/gostd/regexp/regexp.go.html#3588063">src</a></span><span class="op" id="3588750">[</span><span class="ident" id="3588751"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3588756">[</span><span class="num" id="3588757">2</span><span class="op" id="3588758">*</span><span class="ident" id="3588759"><a href="/gostd/regexp/regexp.go.html#3588392">num</a></span><span class="op" id="3588762">]</span><span class="op" id="3588763">:</span><span class="ident" id="3588764"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3588769">[</span><span class="num" id="3588770">2</span><span class="op" id="3588771">*</span><span class="ident" id="3588772"><a href="/gostd/regexp/regexp.go.html#3588392">num</a></span><span class="op" id="3588775">+</span><span class="num" id="3588776">1</span><span class="op" id="3588777">]</span><span class="op" id="3588778">]</span><span class="op" id="3588779">...</span><span class="op" id="3588782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588797">}</span>&nbsp;<span class="keyword" id="3588799">else</span>&nbsp;<span class="op" id="3588804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588809">for</span>&nbsp;<span class="ident" id="3588813">i</span><span class="op" id="3588814">,</span>&nbsp;<span class="ident" id="3588816">namei</span>&nbsp;<span class="op" id="3588822">:=</span>&nbsp;<span class="keyword" id="3588825">range</span>&nbsp;<span class="ident" id="3588831"><a href="/gostd/regexp/regexp.go.html#3588002">re</a></span><span class="op" id="3588833">.</span><span class="ident" id="3588834"><a href="/gostd/regexp/regexp.go.html#3567637">subexpNames</a></span>&nbsp;<span class="op" id="3588846">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588852">if</span>&nbsp;<span class="ident" id="3588855"><a href="/gostd/regexp/regexp.go.html#3588386">name</a></span>&nbsp;<span class="op" id="3588860">==</span>&nbsp;<span class="ident" id="3588863"><a href="/gostd/regexp/regexp.go.html#3588816">namei</a></span>&nbsp;<span class="op" id="3588869">&amp;&amp;</span>&nbsp;<span class="num" id="3588872">2</span><span class="op" id="3588873">*</span><span class="ident" id="3588874"><a href="/gostd/regexp/regexp.go.html#3588813">i</a></span><span class="op" id="3588875">+</span><span class="num" id="3588876">1</span>&nbsp;<span class="op" id="3588878">&lt;</span>&nbsp;<span class="builtinfunc" id="3588880">len</span><span class="op" id="3588883">(</span><span class="ident" id="3588884"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3588889">)</span>&nbsp;<span class="op" id="3588891">&amp;&amp;</span>&nbsp;<span class="ident" id="3588894"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3588899">[</span><span class="num" id="3588900">2</span><span class="op" id="3588901">*</span><span class="ident" id="3588902"><a href="/gostd/regexp/regexp.go.html#3588813">i</a></span><span class="op" id="3588903">]</span>&nbsp;<span class="op" id="3588905">&gt;=</span>&nbsp;<span class="num" id="3588908">0</span>&nbsp;<span class="op" id="3588910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588917">if</span>&nbsp;<span class="ident" id="3588920"><a href="/gostd/regexp/regexp.go.html#3588050">bsrc</a></span>&nbsp;<span class="op" id="3588925">!=</span>&nbsp;<span class="builtintype" id="3588928">nil</span>&nbsp;<span class="op" id="3588932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588940"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span>&nbsp;<span class="op" id="3588944">=</span>&nbsp;<span class="builtinfunc" id="3588946">append</span><span class="op" id="3588952">(</span><span class="ident" id="3588953"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span><span class="op" id="3588956">,</span>&nbsp;<span class="ident" id="3588958"><a href="/gostd/regexp/regexp.go.html#3588050">bsrc</a></span><span class="op" id="3588962">[</span><span class="ident" id="3588963"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3588968">[</span><span class="num" id="3588969">2</span><span class="op" id="3588970">*</span><span class="ident" id="3588971"><a href="/gostd/regexp/regexp.go.html#3588813">i</a></span><span class="op" id="3588972">]</span><span class="op" id="3588973">:</span><span class="ident" id="3588974"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3588979">[</span><span class="num" id="3588980">2</span><span class="op" id="3588981">*</span><span class="ident" id="3588982"><a href="/gostd/regexp/regexp.go.html#3588813">i</a></span><span class="op" id="3588983">+</span><span class="num" id="3588984">1</span><span class="op" id="3588985">]</span><span class="op" id="3588986">]</span><span class="op" id="3588987">...</span><span class="op" id="3588990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588997">}</span>&nbsp;<span class="keyword" id="3588999">else</span>&nbsp;<span class="op" id="3589004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589012"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span>&nbsp;<span class="op" id="3589016">=</span>&nbsp;<span class="builtinfunc" id="3589018">append</span><span class="op" id="3589024">(</span><span class="ident" id="3589025"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span><span class="op" id="3589028">,</span>&nbsp;<span class="ident" id="3589030"><a href="/gostd/regexp/regexp.go.html#3588063">src</a></span><span class="op" id="3589033">[</span><span class="ident" id="3589034"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3589039">[</span><span class="num" id="3589040">2</span><span class="op" id="3589041">*</span><span class="ident" id="3589042"><a href="/gostd/regexp/regexp.go.html#3588813">i</a></span><span class="op" id="3589043">]</span><span class="op" id="3589044">:</span><span class="ident" id="3589045"><a href="/gostd/regexp/regexp.go.html#3588075">match</a></span><span class="op" id="3589050">[</span><span class="num" id="3589051">2</span><span class="op" id="3589052">*</span><span class="ident" id="3589053"><a href="/gostd/regexp/regexp.go.html#3588813">i</a></span><span class="op" id="3589054">+</span><span class="num" id="3589055">1</span><span class="op" id="3589056">]</span><span class="op" id="3589057">]</span><span class="op" id="3589058">...</span><span class="op" id="3589061">)</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589075">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589094">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589100"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span>&nbsp;<span class="op" id="3589104">=</span>&nbsp;<span class="builtinfunc" id="3589106">append</span><span class="op" id="3589112">(</span><span class="ident" id="3589113"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span><span class="op" id="3589116">,</span>&nbsp;<span class="ident" id="3589118"><a href="/gostd/regexp/regexp.go.html#3588033">template</a></span><span class="op" id="3589126">...</span><span class="op" id="3589129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589132">return</span>&nbsp;<span class="ident" id="3589139"><a href="/gostd/regexp/regexp.go.html#3588021">dst</a></span><br>
<span class="lineno"></span><span class="op" id="3589143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span><span class="comment" id="3589146">//&nbsp;extract&nbsp;returns&nbsp;the&nbsp;name&nbsp;from&nbsp;a&nbsp;leading&nbsp;&#34;$name&#34;&nbsp;or&nbsp;&#34;${name}&#34;&nbsp;in&nbsp;str.</span><br>
<span class="lineno"></span><span class="comment" id="3589218">//&nbsp;If&nbsp;it&nbsp;is&nbsp;a&nbsp;number,&nbsp;extract&nbsp;returns&nbsp;num&nbsp;set&nbsp;to&nbsp;that&nbsp;number;&nbsp;otherwise&nbsp;num&nbsp;=&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="3589300">func</span>&nbsp;<span class="ident" id="3589305">extract</span><span class="op" id="3589312">(</span><span class="ident" id="3589313">str</span>&nbsp;<span class="builtintype" id="3589317">string</span><span class="op" id="3589323">)</span>&nbsp;<span class="op" id="3589325">(</span><span class="ident" id="3589326">name</span>&nbsp;<span class="builtintype" id="3589331">string</span><span class="op" id="3589337">,</span>&nbsp;<span class="ident" id="3589339">num</span>&nbsp;<span class="builtintype" id="3589343">int</span><span class="op" id="3589346">,</span>&nbsp;<span class="ident" id="3589348">rest</span>&nbsp;<span class="builtintype" id="3589353">string</span><span class="op" id="3589359">,</span>&nbsp;<span class="ident" id="3589361">ok</span>&nbsp;<span class="builtintype" id="3589364">bool</span><span class="op" id="3589368">)</span>&nbsp;<span class="op" id="3589370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589373">if</span>&nbsp;<span class="builtinfunc" id="3589376">len</span><span class="op" id="3589379">(</span><span class="ident" id="3589380"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3589383">)</span>&nbsp;<span class="op" id="3589385">&lt;</span>&nbsp;<span class="num" id="3589387">2</span>&nbsp;<span class="op" id="3589389">||</span>&nbsp;<span class="ident" id="3589392"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3589395">[</span><span class="num" id="3589396">0</span><span class="op" id="3589397">]</span>&nbsp;<span class="op" id="3589399">!=</span>&nbsp;<span class="string" id="3589402">&#39;$&#39;</span>&nbsp;<span class="op" id="3589406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589410">return</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589421">brace</span>&nbsp;<span class="op" id="3589427">:=</span>&nbsp;<span class="builtintype" id="3589430">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589437">if</span>&nbsp;<span class="ident" id="3589440"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3589443">[</span><span class="num" id="3589444">1</span><span class="op" id="3589445">]</span>&nbsp;<span class="op" id="3589447">==</span>&nbsp;<span class="string" id="3589450">&#39;{&#39;</span>&nbsp;<span class="op" id="3589454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589458"><a href="/gostd/regexp/regexp.go.html#3589421">brace</a></span>&nbsp;<span class="op" id="3589464">=</span>&nbsp;<span class="builtintype" id="3589466">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589473"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span>&nbsp;<span class="op" id="3589477">=</span>&nbsp;<span class="ident" id="3589479"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3589482">[</span><span class="num" id="3589483">2</span><span class="op" id="3589484">:</span><span class="op" id="3589485">]</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589488">}</span>&nbsp;<span class="keyword" id="3589490">else</span>&nbsp;<span class="op" id="3589495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589499"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span>&nbsp;<span class="op" id="3589503">=</span>&nbsp;<span class="ident" id="3589505"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3589508">[</span><span class="num" id="3589509">1</span><span class="op" id="3589510">:</span><span class="op" id="3589511">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589517">i</span>&nbsp;<span class="op" id="3589519">:=</span>&nbsp;<span class="num" id="3589522">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589525">for</span>&nbsp;<span class="ident" id="3589529"><a href="/gostd/regexp/regexp.go.html#3589517">i</a></span>&nbsp;<span class="op" id="3589531">&lt;</span>&nbsp;<span class="builtinfunc" id="3589533">len</span><span class="op" id="3589536">(</span><span class="ident" id="3589537"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3589540">)</span>&nbsp;<span class="op" id="3589542">{</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3589546">rune</span><span class="op" id="3589550">,</span>&nbsp;<span class="ident" id="3589552">size</span>&nbsp;<span class="op" id="3589557">:=</span>&nbsp;<span class="ident" id="3589560"><a href="/gostd/regexp/regexp.go.html#3566851">utf8</a></span><span class="op" id="3589564">.</span><span class="ident" id="3589565"><a href="/gostd/unicode/utf8/utf8.go.html#1810428">DecodeRuneInString</a></span><span class="op" id="3589583">(</span><span class="ident" id="3589584"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3589587">[</span><span class="ident" id="3589588"><a href="/gostd/regexp/regexp.go.html#3589517">i</a></span><span class="op" id="3589589">:</span><span class="op" id="3589590">]</span><span class="op" id="3589591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589595">if</span>&nbsp;<span class="op" id="3589598">!</span><span class="ident" id="3589599"><a href="/gostd/regexp/regexp.go.html#3566840">unicode</a></span><span class="op" id="3589606">.</span><span class="ident" id="3589607"><a href="/gostd/unicode/graphic.go.html#1819623">IsLetter</a></span><span class="op" id="3589615">(</span><span class="builtintype" id="3589616"><a href="/gostd/regexp/regexp.go.html#3589546">rune</a></span><span class="op" id="3589620">)</span>&nbsp;<span class="op" id="3589622">&amp;&amp;</span>&nbsp;<span class="op" id="3589625">!</span><span class="ident" id="3589626"><a href="/gostd/regexp/regexp.go.html#3566840">unicode</a></span><span class="op" id="3589633">.</span><span class="ident" id="3589634"><a href="/gostd/unicode/digit.go.html#1816545">IsDigit</a></span><span class="op" id="3589641">(</span><span class="builtintype" id="3589642"><a href="/gostd/regexp/regexp.go.html#3589546">rune</a></span><span class="op" id="3589646">)</span>&nbsp;<span class="op" id="3589648">&amp;&amp;</span>&nbsp;<span class="builtintype" id="3589651"><a href="/gostd/regexp/regexp.go.html#3589546">rune</a></span>&nbsp;<span class="op" id="3589656">!=</span>&nbsp;<span class="string" id="3589659">&#39;_&#39;</span>&nbsp;<span class="op" id="3589663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589668">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589680"><a href="/gostd/regexp/regexp.go.html#3589517">i</a></span>&nbsp;<span class="op" id="3589682">+=</span>&nbsp;<span class="ident" id="3589685"><a href="/gostd/regexp/regexp.go.html#3589552">size</a></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589694">if</span>&nbsp;<span class="ident" id="3589697"><a href="/gostd/regexp/regexp.go.html#3589517">i</a></span>&nbsp;<span class="op" id="3589699">==</span>&nbsp;<span class="num" id="3589702">0</span>&nbsp;<span class="op" id="3589704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3589708">//&nbsp;empty&nbsp;name&nbsp;is&nbsp;not&nbsp;okay</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589736">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589744">}</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589747"><a href="/gostd/regexp/regexp.go.html#3589326">name</a></span>&nbsp;<span class="op" id="3589752">=</span>&nbsp;<span class="ident" id="3589754"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3589757">[</span><span class="op" id="3589758">:</span><span class="ident" id="3589759"><a href="/gostd/regexp/regexp.go.html#3589517">i</a></span><span class="op" id="3589760">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589763">if</span>&nbsp;<span class="ident" id="3589766"><a href="/gostd/regexp/regexp.go.html#3589421">brace</a></span>&nbsp;<span class="op" id="3589772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589776">if</span>&nbsp;<span class="ident" id="3589779"><a href="/gostd/regexp/regexp.go.html#3589517">i</a></span>&nbsp;<span class="op" id="3589781">&gt;=</span>&nbsp;<span class="builtinfunc" id="3589784">len</span><span class="op" id="3589787">(</span><span class="ident" id="3589788"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3589791">)</span>&nbsp;<span class="op" id="3589793">||</span>&nbsp;<span class="ident" id="3589796"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3589799">[</span><span class="ident" id="3589800"><a href="/gostd/regexp/regexp.go.html#3589517">i</a></span><span class="op" id="3589801">]</span>&nbsp;<span class="op" id="3589803">!=</span>&nbsp;<span class="string" id="3589806">&#39;}&#39;</span>&nbsp;<span class="op" id="3589810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3589815">//&nbsp;missing&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589843">return</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589856"><a href="/gostd/regexp/regexp.go.html#3589517">i</a></span><span class="op" id="3589857">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3589865">//&nbsp;Parse&nbsp;number.</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589883"><a href="/gostd/regexp/regexp.go.html#3589339">num</a></span>&nbsp;<span class="op" id="3589887">=</span>&nbsp;<span class="num" id="3589889">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589892">for</span>&nbsp;<span class="ident" id="3589896">i</span>&nbsp;<span class="op" id="3589898">:=</span>&nbsp;<span class="num" id="3589901">0</span><span class="op" id="3589902">;</span>&nbsp;<span class="ident" id="3589904"><a href="/gostd/regexp/regexp.go.html#3589896">i</a></span>&nbsp;<span class="op" id="3589906">&lt;</span>&nbsp;<span class="builtinfunc" id="3589908">len</span><span class="op" id="3589911">(</span><span class="ident" id="3589912"><a href="/gostd/regexp/regexp.go.html#3589326">name</a></span><span class="op" id="3589916">)</span><span class="op" id="3589917">;</span>&nbsp;<span class="ident" id="3589919"><a href="/gostd/regexp/regexp.go.html#3589896">i</a></span><span class="op" id="3589920">++</span>&nbsp;<span class="op" id="3589923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589927">if</span>&nbsp;<span class="ident" id="3589930"><a href="/gostd/regexp/regexp.go.html#3589326">name</a></span><span class="op" id="3589934">[</span><span class="ident" id="3589935"><a href="/gostd/regexp/regexp.go.html#3589896">i</a></span><span class="op" id="3589936">]</span>&nbsp;<span class="op" id="3589938">&lt;</span>&nbsp;<span class="string" id="3589940">&#39;0&#39;</span>&nbsp;<span class="op" id="3589944">||</span>&nbsp;<span class="string" id="3589947">&#39;9&#39;</span>&nbsp;<span class="op" id="3589951">&lt;</span>&nbsp;<span class="ident" id="3589953"><a href="/gostd/regexp/regexp.go.html#3589326">name</a></span><span class="op" id="3589957">[</span><span class="ident" id="3589958"><a href="/gostd/regexp/regexp.go.html#3589896">i</a></span><span class="op" id="3589959">]</span>&nbsp;<span class="op" id="3589961">||</span>&nbsp;<span class="ident" id="3589964"><a href="/gostd/regexp/regexp.go.html#3589339">num</a></span>&nbsp;<span class="op" id="3589968">&gt;=</span>&nbsp;<span class="num" id="3589971">1e8</span>&nbsp;<span class="op" id="3589975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589980"><a href="/gostd/regexp/regexp.go.html#3589339">num</a></span>&nbsp;<span class="op" id="3589984">=</span>&nbsp;<span class="op" id="3589986">-</span><span class="num" id="3589987">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589992">break</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3590000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3590004"><a href="/gostd/regexp/regexp.go.html#3589339">num</a></span>&nbsp;<span class="op" id="3590008">=</span>&nbsp;<span class="ident" id="3590010"><a href="/gostd/regexp/regexp.go.html#3589339">num</a></span><span class="op" id="3590013">*</span><span class="num" id="3590014">10</span>&nbsp;<span class="op" id="3590017">+</span>&nbsp;<span class="builtintype" id="3590019">int</span><span class="op" id="3590022">(</span><span class="ident" id="3590023"><a href="/gostd/regexp/regexp.go.html#3589326">name</a></span><span class="op" id="3590027">[</span><span class="ident" id="3590028"><a href="/gostd/regexp/regexp.go.html#3589896">i</a></span><span class="op" id="3590029">]</span><span class="op" id="3590030">)</span>&nbsp;<span class="op" id="3590032">-</span>&nbsp;<span class="string" id="3590034">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3590039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3590042">//&nbsp;Disallow&nbsp;leading&nbsp;zeros.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3590070">if</span>&nbsp;<span class="ident" id="3590073"><a href="/gostd/regexp/regexp.go.html#3589326">name</a></span><span class="op" id="3590077">[</span><span class="num" id="3590078">0</span><span class="op" id="3590079">]</span>&nbsp;<span class="op" id="3590081">==</span>&nbsp;<span class="string" id="3590084">&#39;0&#39;</span>&nbsp;<span class="op" id="3590088">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3590091">len</span><span class="op" id="3590094">(</span><span class="ident" id="3590095"><a href="/gostd/regexp/regexp.go.html#3589326">name</a></span><span class="op" id="3590099">)</span>&nbsp;<span class="op" id="3590101">&gt;</span>&nbsp;<span class="num" id="3590103">1</span>&nbsp;<span class="op" id="3590105">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3590109"><a href="/gostd/regexp/regexp.go.html#3589339">num</a></span>&nbsp;<span class="op" id="3590113">=</span>&nbsp;<span class="op" id="3590115">-</span><span class="num" id="3590116">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3590119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3590123"><a href="/gostd/regexp/regexp.go.html#3589348">rest</a></span>&nbsp;<span class="op" id="3590128">=</span>&nbsp;<span class="ident" id="3590130"><a href="/gostd/regexp/regexp.go.html#3589313">str</a></span><span class="op" id="3590133">[</span><span class="ident" id="3590134"><a href="/gostd/regexp/regexp.go.html#3589517">i</a></span><span class="op" id="3590135">:</span><span class="op" id="3590136">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3590139"><a href="/gostd/regexp/regexp.go.html#3589361">ok</a></span>&nbsp;<span class="op" id="3590142">=</span>&nbsp;<span class="builtintype" id="3590144">true</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3590150">return</span><br>
<span class="lineno"></span><span class="op" id="3590157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3590160">//&nbsp;FindSubmatchIndex&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;index&nbsp;pairs&nbsp;identifying&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3590237">//&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;b&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of</span><br>
<span class="lineno">870</span><span class="comment" id="3590314">//&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;and&nbsp;&#39;Index&#39;&nbsp;descriptions</span><br>
<span class="lineno"></span><span class="comment" id="3590391">//&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="3590418">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3590463">func</span>&nbsp;<span class="op" id="3590468">(</span><span class="ident" id="3590469">re</span>&nbsp;<span class="op" id="3590472">*</span><span class="ident" id="3590473"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3590479">)</span>&nbsp;<span class="ident" id="3590481">FindSubmatchIndex</span><span class="op" id="3590498">(</span><span class="ident" id="3590499">b</span>&nbsp;<span class="op" id="3590501">[</span><span class="op" id="3590502">]</span><span class="builtintype" id="3590503">byte</span><span class="op" id="3590507">)</span>&nbsp;<span class="op" id="3590509">[</span><span class="op" id="3590510">]</span><span class="builtintype" id="3590511">int</span>&nbsp;<span class="op" id="3590515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3590518">return</span>&nbsp;<span class="ident" id="3590525"><a href="/gostd/regexp/regexp.go.html#3590469">re</a></span><span class="op" id="3590527">.</span><span class="ident" id="3590528"><a href="/gostd/regexp/regexp.go.html#3582945">pad</a></span><span class="op" id="3590531">(</span><span class="ident" id="3590532"><a href="/gostd/regexp/regexp.go.html#3590469">re</a></span><span class="op" id="3590534">.</span><span class="ident" id="3590535"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3590544">(</span><span class="builtintype" id="3590545">nil</span><span class="op" id="3590548">,</span>&nbsp;<span class="ident" id="3590550"><a href="/gostd/regexp/regexp.go.html#3590499">b</a></span><span class="op" id="3590551">,</span>&nbsp;<span class="string" id="3590553">&#34;&#34;</span><span class="op" id="3590555">,</span>&nbsp;<span class="num" id="3590557">0</span><span class="op" id="3590558">,</span>&nbsp;<span class="ident" id="3590560"><a href="/gostd/regexp/regexp.go.html#3590469">re</a></span><span class="op" id="3590562">.</span><span class="ident" id="3590563"><a href="/gostd/regexp/regexp.go.html#3567122">prog</a></span><span class="op" id="3590567">.</span><span class="ident" id="3590568"><a href="/gostd/regexp/syntax/prog.go.html#3659082">NumCap</a></span><span class="op" id="3590574">)</span><span class="op" id="3590575">)</span><br>
<span class="lineno">875</span><span class="op" id="3590577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3590580">//&nbsp;FindStringSubmatch&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;holding&nbsp;the&nbsp;text&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3590653">//&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;s&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3590730">//&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;description&nbsp;in&nbsp;the</span><br>
<span class="lineno">880</span><span class="comment" id="3590801">//&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="3590821">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3590866">func</span>&nbsp;<span class="op" id="3590871">(</span><span class="ident" id="3590872">re</span>&nbsp;<span class="op" id="3590875">*</span><span class="ident" id="3590876"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3590882">)</span>&nbsp;<span class="ident" id="3590884">FindStringSubmatch</span><span class="op" id="3590902">(</span><span class="ident" id="3590903">s</span>&nbsp;<span class="builtintype" id="3590905">string</span><span class="op" id="3590911">)</span>&nbsp;<span class="op" id="3590913">[</span><span class="op" id="3590914">]</span><span class="builtintype" id="3590915">string</span>&nbsp;<span class="op" id="3590922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3590925">a</span>&nbsp;<span class="op" id="3590927">:=</span>&nbsp;<span class="ident" id="3590930"><a href="/gostd/regexp/regexp.go.html#3590872">re</a></span><span class="op" id="3590932">.</span><span class="ident" id="3590933"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3590942">(</span><span class="builtintype" id="3590943">nil</span><span class="op" id="3590946">,</span>&nbsp;<span class="builtintype" id="3590948">nil</span><span class="op" id="3590951">,</span>&nbsp;<span class="ident" id="3590953"><a href="/gostd/regexp/regexp.go.html#3590903">s</a></span><span class="op" id="3590954">,</span>&nbsp;<span class="num" id="3590956">0</span><span class="op" id="3590957">,</span>&nbsp;<span class="ident" id="3590959"><a href="/gostd/regexp/regexp.go.html#3590872">re</a></span><span class="op" id="3590961">.</span><span class="ident" id="3590962"><a href="/gostd/regexp/regexp.go.html#3567122">prog</a></span><span class="op" id="3590966">.</span><span class="ident" id="3590967"><a href="/gostd/regexp/syntax/prog.go.html#3659082">NumCap</a></span><span class="op" id="3590973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3590976">if</span>&nbsp;<span class="ident" id="3590979"><a href="/gostd/regexp/regexp.go.html#3590925">a</a></span>&nbsp;<span class="op" id="3590981">==</span>&nbsp;<span class="builtintype" id="3590984">nil</span>&nbsp;<span class="op" id="3590988">{</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3590992">return</span>&nbsp;<span class="builtintype" id="3590999">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3591004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3591007">ret</span>&nbsp;<span class="op" id="3591011">:=</span>&nbsp;<span class="builtinfunc" id="3591014">make</span><span class="op" id="3591018">(</span><span class="op" id="3591019">[</span><span class="op" id="3591020">]</span><span class="builtintype" id="3591021">string</span><span class="op" id="3591027">,</span>&nbsp;<span class="num" id="3591029">1</span><span class="op" id="3591030">+</span><span class="ident" id="3591031"><a href="/gostd/regexp/regexp.go.html#3590872">re</a></span><span class="op" id="3591033">.</span><span class="ident" id="3591034"><a href="/gostd/regexp/regexp.go.html#3567617">numSubexp</a></span><span class="op" id="3591043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3591046">for</span>&nbsp;<span class="ident" id="3591050">i</span>&nbsp;<span class="op" id="3591052">:=</span>&nbsp;<span class="keyword" id="3591055">range</span>&nbsp;<span class="ident" id="3591061"><a href="/gostd/regexp/regexp.go.html#3591007">ret</a></span>&nbsp;<span class="op" id="3591065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3591069">if</span>&nbsp;<span class="num" id="3591072">2</span><span class="op" id="3591073">*</span><span class="ident" id="3591074"><a href="/gostd/regexp/regexp.go.html#3591050">i</a></span>&nbsp;<span class="op" id="3591076">&lt;</span>&nbsp;<span class="builtinfunc" id="3591078">len</span><span class="op" id="3591081">(</span><span class="ident" id="3591082"><a href="/gostd/regexp/regexp.go.html#3590925">a</a></span><span class="op" id="3591083">)</span>&nbsp;<span class="op" id="3591085">&amp;&amp;</span>&nbsp;<span class="ident" id="3591088"><a href="/gostd/regexp/regexp.go.html#3590925">a</a></span><span class="op" id="3591089">[</span><span class="num" id="3591090">2</span><span class="op" id="3591091">*</span><span class="ident" id="3591092"><a href="/gostd/regexp/regexp.go.html#3591050">i</a></span><span class="op" id="3591093">]</span>&nbsp;<span class="op" id="3591095">&gt;=</span>&nbsp;<span class="num" id="3591098">0</span>&nbsp;<span class="op" id="3591100">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3591105"><a href="/gostd/regexp/regexp.go.html#3591007">ret</a></span><span class="op" id="3591108">[</span><span class="ident" id="3591109"><a href="/gostd/regexp/regexp.go.html#3591050">i</a></span><span class="op" id="3591110">]</span>&nbsp;<span class="op" id="3591112">=</span>&nbsp;<span class="ident" id="3591114"><a href="/gostd/regexp/regexp.go.html#3590903">s</a></span><span class="op" id="3591115">[</span><span class="ident" id="3591116"><a href="/gostd/regexp/regexp.go.html#3590925">a</a></span><span class="op" id="3591117">[</span><span class="num" id="3591118">2</span><span class="op" id="3591119">*</span><span class="ident" id="3591120"><a href="/gostd/regexp/regexp.go.html#3591050">i</a></span><span class="op" id="3591121">]</span><span class="op" id="3591122">:</span><span class="ident" id="3591123"><a href="/gostd/regexp/regexp.go.html#3590925">a</a></span><span class="op" id="3591124">[</span><span class="num" id="3591125">2</span><span class="op" id="3591126">*</span><span class="ident" id="3591127"><a href="/gostd/regexp/regexp.go.html#3591050">i</a></span><span class="op" id="3591128">+</span><span class="num" id="3591129">1</span><span class="op" id="3591130">]</span><span class="op" id="3591131">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3591135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3591138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3591141">return</span>&nbsp;<span class="ident" id="3591148"><a href="/gostd/regexp/regexp.go.html#3591007">ret</a></span><br>
<span class="lineno"></span><span class="op" id="3591152">}</span><br>
<span class="lineno">895</span><br>
<span class="lineno"></span><span class="comment" id="3591155">//&nbsp;FindStringSubmatchIndex&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;index&nbsp;pairs</span><br>
<span class="lineno"></span><span class="comment" id="3591222">//&nbsp;identifying&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;in&nbsp;s&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3591295">//&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3591371">//&nbsp;&#39;Index&#39;&nbsp;descriptions&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno">900</span><span class="comment" id="3591419">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3591464">func</span>&nbsp;<span class="op" id="3591469">(</span><span class="ident" id="3591470">re</span>&nbsp;<span class="op" id="3591473">*</span><span class="ident" id="3591474"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3591480">)</span>&nbsp;<span class="ident" id="3591482">FindStringSubmatchIndex</span><span class="op" id="3591505">(</span><span class="ident" id="3591506">s</span>&nbsp;<span class="builtintype" id="3591508">string</span><span class="op" id="3591514">)</span>&nbsp;<span class="op" id="3591516">[</span><span class="op" id="3591517">]</span><span class="builtintype" id="3591518">int</span>&nbsp;<span class="op" id="3591522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3591525">return</span>&nbsp;<span class="ident" id="3591532"><a href="/gostd/regexp/regexp.go.html#3591470">re</a></span><span class="op" id="3591534">.</span><span class="ident" id="3591535"><a href="/gostd/regexp/regexp.go.html#3582945">pad</a></span><span class="op" id="3591538">(</span><span class="ident" id="3591539"><a href="/gostd/regexp/regexp.go.html#3591470">re</a></span><span class="op" id="3591541">.</span><span class="ident" id="3591542"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3591551">(</span><span class="builtintype" id="3591552">nil</span><span class="op" id="3591555">,</span>&nbsp;<span class="builtintype" id="3591557">nil</span><span class="op" id="3591560">,</span>&nbsp;<span class="ident" id="3591562"><a href="/gostd/regexp/regexp.go.html#3591506">s</a></span><span class="op" id="3591563">,</span>&nbsp;<span class="num" id="3591565">0</span><span class="op" id="3591566">,</span>&nbsp;<span class="ident" id="3591568"><a href="/gostd/regexp/regexp.go.html#3591470">re</a></span><span class="op" id="3591570">.</span><span class="ident" id="3591571"><a href="/gostd/regexp/regexp.go.html#3567122">prog</a></span><span class="op" id="3591575">.</span><span class="ident" id="3591576"><a href="/gostd/regexp/syntax/prog.go.html#3659082">NumCap</a></span><span class="op" id="3591582">)</span><span class="op" id="3591583">)</span><br>
<span class="lineno"></span><span class="op" id="3591585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="3591588">//&nbsp;FindReaderSubmatchIndex&nbsp;returns&nbsp;a&nbsp;slice&nbsp;holding&nbsp;the&nbsp;index&nbsp;pairs</span><br>
<span class="lineno"></span><span class="comment" id="3591655">//&nbsp;identifying&nbsp;the&nbsp;leftmost&nbsp;match&nbsp;of&nbsp;the&nbsp;regular&nbsp;expression&nbsp;of&nbsp;text&nbsp;read&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3591731">//&nbsp;the&nbsp;RuneReader,&nbsp;and&nbsp;the&nbsp;matches,&nbsp;if&nbsp;any,&nbsp;of&nbsp;its&nbsp;subexpressions,&nbsp;as&nbsp;defined</span><br>
<span class="lineno"></span><span class="comment" id="3591809">//&nbsp;by&nbsp;the&nbsp;&#39;Submatch&#39;&nbsp;and&nbsp;&#39;Index&#39;&nbsp;descriptions&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.&nbsp;&nbsp;A</span><br>
<span class="lineno"></span><span class="comment" id="3591882">//&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">910</span><span class="keyword" id="3591925">func</span>&nbsp;<span class="op" id="3591930">(</span><span class="ident" id="3591931">re</span>&nbsp;<span class="op" id="3591934">*</span><span class="ident" id="3591935"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3591941">)</span>&nbsp;<span class="ident" id="3591943">FindReaderSubmatchIndex</span><span class="op" id="3591966">(</span><span class="ident" id="3591967">r</span>&nbsp;<span class="ident" id="3591969"><a href="/gostd/regexp/regexp.go.html#3566787">io</a></span><span class="op" id="3591971">.</span><span class="ident" id="3591972"><a href="/gostd/io/io.go.html#1427733">RuneReader</a></span><span class="op" id="3591982">)</span>&nbsp;<span class="op" id="3591984">[</span><span class="op" id="3591985">]</span><span class="builtintype" id="3591986">int</span>&nbsp;<span class="op" id="3591990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3591993">return</span>&nbsp;<span class="ident" id="3592000"><a href="/gostd/regexp/regexp.go.html#3591931">re</a></span><span class="op" id="3592002">.</span><span class="ident" id="3592003"><a href="/gostd/regexp/regexp.go.html#3582945">pad</a></span><span class="op" id="3592006">(</span><span class="ident" id="3592007"><a href="/gostd/regexp/regexp.go.html#3591931">re</a></span><span class="op" id="3592009">.</span><span class="ident" id="3592010"><a href="/gostd/regexp/exec.go.html#3546988">doExecute</a></span><span class="op" id="3592019">(</span><span class="ident" id="3592020"><a href="/gostd/regexp/regexp.go.html#3591967">r</a></span><span class="op" id="3592021">,</span>&nbsp;<span class="builtintype" id="3592023">nil</span><span class="op" id="3592026">,</span>&nbsp;<span class="string" id="3592028">&#34;&#34;</span><span class="op" id="3592030">,</span>&nbsp;<span class="num" id="3592032">0</span><span class="op" id="3592033">,</span>&nbsp;<span class="ident" id="3592035"><a href="/gostd/regexp/regexp.go.html#3591931">re</a></span><span class="op" id="3592037">.</span><span class="ident" id="3592038"><a href="/gostd/regexp/regexp.go.html#3567122">prog</a></span><span class="op" id="3592042">.</span><span class="ident" id="3592043"><a href="/gostd/regexp/syntax/prog.go.html#3659082">NumCap</a></span><span class="op" id="3592049">)</span><span class="op" id="3592050">)</span><br>
<span class="lineno"></span><span class="op" id="3592052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3592055">const</span>&nbsp;<span class="ident" id="3592061">startSize</span>&nbsp;<span class="op" id="3592071">=</span>&nbsp;<span class="num" id="3592073">10</span>&nbsp;<span class="comment" id="3592076">//&nbsp;The&nbsp;size&nbsp;at&nbsp;which&nbsp;to&nbsp;start&nbsp;a&nbsp;slice&nbsp;in&nbsp;the&nbsp;&#39;All&#39;&nbsp;routines.</span><br>
<span class="lineno">915</span><br>
<span class="lineno"></span><span class="comment" id="3592138">//&nbsp;FindAll&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;Find;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive</span><br>
<span class="lineno"></span><span class="comment" id="3592216">//&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3592289">//&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="3592309">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno">920</span><span class="keyword" id="3592354">func</span>&nbsp;<span class="op" id="3592359">(</span><span class="ident" id="3592360">re</span>&nbsp;<span class="op" id="3592363">*</span><span class="ident" id="3592364"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3592370">)</span>&nbsp;<span class="ident" id="3592372">FindAll</span><span class="op" id="3592379">(</span><span class="ident" id="3592380">b</span>&nbsp;<span class="op" id="3592382">[</span><span class="op" id="3592383">]</span><span class="builtintype" id="3592384">byte</span><span class="op" id="3592388">,</span>&nbsp;<span class="ident" id="3592390">n</span>&nbsp;<span class="builtintype" id="3592392">int</span><span class="op" id="3592395">)</span>&nbsp;<span class="op" id="3592397">[</span><span class="op" id="3592398">]</span><span class="op" id="3592399">[</span><span class="op" id="3592400">]</span><span class="builtintype" id="3592401">byte</span>&nbsp;<span class="op" id="3592406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3592409">if</span>&nbsp;<span class="ident" id="3592412"><a href="/gostd/regexp/regexp.go.html#3592390">n</a></span>&nbsp;<span class="op" id="3592414">&lt;</span>&nbsp;<span class="num" id="3592416">0</span>&nbsp;<span class="op" id="3592418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3592422"><a href="/gostd/regexp/regexp.go.html#3592390">n</a></span>&nbsp;<span class="op" id="3592424">=</span>&nbsp;<span class="builtinfunc" id="3592426">len</span><span class="op" id="3592429">(</span><span class="ident" id="3592430"><a href="/gostd/regexp/regexp.go.html#3592380">b</a></span><span class="op" id="3592431">)</span>&nbsp;<span class="op" id="3592433">+</span>&nbsp;<span class="num" id="3592435">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3592438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3592441">result</span>&nbsp;<span class="op" id="3592448">:=</span>&nbsp;<span class="builtinfunc" id="3592451">make</span><span class="op" id="3592455">(</span><span class="op" id="3592456">[</span><span class="op" id="3592457">]</span><span class="op" id="3592458">[</span><span class="op" id="3592459">]</span><span class="builtintype" id="3592460">byte</span><span class="op" id="3592464">,</span>&nbsp;<span class="num" id="3592466">0</span><span class="op" id="3592467">,</span>&nbsp;<span class="ident" id="3592469"><a href="/gostd/regexp/regexp.go.html#3592061">startSize</a></span><span class="op" id="3592478">)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3592481"><a href="/gostd/regexp/regexp.go.html#3592360">re</a></span><span class="op" id="3592483">.</span><span class="ident" id="3592484"><a href="/gostd/regexp/regexp.go.html#3583193">allMatches</a></span><span class="op" id="3592494">(</span><span class="string" id="3592495">&#34;&#34;</span><span class="op" id="3592497">,</span>&nbsp;<span class="ident" id="3592499"><a href="/gostd/regexp/regexp.go.html#3592380">b</a></span><span class="op" id="3592500">,</span>&nbsp;<span class="ident" id="3592502"><a href="/gostd/regexp/regexp.go.html#3592390">n</a></span><span class="op" id="3592503">,</span>&nbsp;<span class="keyword" id="3592505">func</span><span class="op" id="3592509">(</span><span class="ident" id="3592510">match</span>&nbsp;<span class="op" id="3592516">[</span><span class="op" id="3592517">]</span><span class="builtintype" id="3592518">int</span><span class="op" id="3592521">)</span>&nbsp;<span class="op" id="3592523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3592527"><a href="/gostd/regexp/regexp.go.html#3592441">result</a></span>&nbsp;<span class="op" id="3592534">=</span>&nbsp;<span class="builtinfunc" id="3592536">append</span><span class="op" id="3592542">(</span><span class="ident" id="3592543"><a href="/gostd/regexp/regexp.go.html#3592441">result</a></span><span class="op" id="3592549">,</span>&nbsp;<span class="ident" id="3592551"><a href="/gostd/regexp/regexp.go.html#3592380">b</a></span><span class="op" id="3592552">[</span><span class="ident" id="3592553"><a href="/gostd/regexp/regexp.go.html#3592510">match</a></span><span class="op" id="3592558">[</span><span class="num" id="3592559">0</span><span class="op" id="3592560">]</span><span class="op" id="3592561">:</span><span class="ident" id="3592562"><a href="/gostd/regexp/regexp.go.html#3592510">match</a></span><span class="op" id="3592567">[</span><span class="num" id="3592568">1</span><span class="op" id="3592569">]</span><span class="op" id="3592570">]</span><span class="op" id="3592571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3592574">}</span><span class="op" id="3592575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3592578">if</span>&nbsp;<span class="builtinfunc" id="3592581">len</span><span class="op" id="3592584">(</span><span class="ident" id="3592585"><a href="/gostd/regexp/regexp.go.html#3592441">result</a></span><span class="op" id="3592591">)</span>&nbsp;<span class="op" id="3592593">==</span>&nbsp;<span class="num" id="3592596">0</span>&nbsp;<span class="op" id="3592598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3592602">return</span>&nbsp;<span class="builtintype" id="3592609">nil</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3592614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3592617">return</span>&nbsp;<span class="ident" id="3592624"><a href="/gostd/regexp/regexp.go.html#3592441">result</a></span><br>
<span class="lineno"></span><span class="op" id="3592631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3592634">//&nbsp;FindAllIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindIndex;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all</span><br>
<span class="lineno">935</span><span class="comment" id="3592711">//&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description</span><br>
<span class="lineno"></span><span class="comment" id="3592788">//&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="3592815">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3592860">func</span>&nbsp;<span class="op" id="3592865">(</span><span class="ident" id="3592866">re</span>&nbsp;<span class="op" id="3592869">*</span><span class="ident" id="3592870"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3592876">)</span>&nbsp;<span class="ident" id="3592878">FindAllIndex</span><span class="op" id="3592890">(</span><span class="ident" id="3592891">b</span>&nbsp;<span class="op" id="3592893">[</span><span class="op" id="3592894">]</span><span class="builtintype" id="3592895">byte</span><span class="op" id="3592899">,</span>&nbsp;<span class="ident" id="3592901">n</span>&nbsp;<span class="builtintype" id="3592903">int</span><span class="op" id="3592906">)</span>&nbsp;<span class="op" id="3592908">[</span><span class="op" id="3592909">]</span><span class="op" id="3592910">[</span><span class="op" id="3592911">]</span><span class="builtintype" id="3592912">int</span>&nbsp;<span class="op" id="3592916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3592919">if</span>&nbsp;<span class="ident" id="3592922"><a href="/gostd/regexp/regexp.go.html#3592901">n</a></span>&nbsp;<span class="op" id="3592924">&lt;</span>&nbsp;<span class="num" id="3592926">0</span>&nbsp;<span class="op" id="3592928">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3592932"><a href="/gostd/regexp/regexp.go.html#3592901">n</a></span>&nbsp;<span class="op" id="3592934">=</span>&nbsp;<span class="builtinfunc" id="3592936">len</span><span class="op" id="3592939">(</span><span class="ident" id="3592940"><a href="/gostd/regexp/regexp.go.html#3592891">b</a></span><span class="op" id="3592941">)</span>&nbsp;<span class="op" id="3592943">+</span>&nbsp;<span class="num" id="3592945">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3592948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3592951">result</span>&nbsp;<span class="op" id="3592958">:=</span>&nbsp;<span class="builtinfunc" id="3592961">make</span><span class="op" id="3592965">(</span><span class="op" id="3592966">[</span><span class="op" id="3592967">]</span><span class="op" id="3592968">[</span><span class="op" id="3592969">]</span><span class="builtintype" id="3592970">int</span><span class="op" id="3592973">,</span>&nbsp;<span class="num" id="3592975">0</span><span class="op" id="3592976">,</span>&nbsp;<span class="ident" id="3592978"><a href="/gostd/regexp/regexp.go.html#3592061">startSize</a></span><span class="op" id="3592987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3592990"><a href="/gostd/regexp/regexp.go.html#3592866">re</a></span><span class="op" id="3592992">.</span><span class="ident" id="3592993"><a href="/gostd/regexp/regexp.go.html#3583193">allMatches</a></span><span class="op" id="3593003">(</span><span class="string" id="3593004">&#34;&#34;</span><span class="op" id="3593006">,</span>&nbsp;<span class="ident" id="3593008"><a href="/gostd/regexp/regexp.go.html#3592891">b</a></span><span class="op" id="3593009">,</span>&nbsp;<span class="ident" id="3593011"><a href="/gostd/regexp/regexp.go.html#3592901">n</a></span><span class="op" id="3593012">,</span>&nbsp;<span class="keyword" id="3593014">func</span><span class="op" id="3593018">(</span><span class="ident" id="3593019">match</span>&nbsp;<span class="op" id="3593025">[</span><span class="op" id="3593026">]</span><span class="builtintype" id="3593027">int</span><span class="op" id="3593030">)</span>&nbsp;<span class="op" id="3593032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3593036"><a href="/gostd/regexp/regexp.go.html#3592951">result</a></span>&nbsp;<span class="op" id="3593043">=</span>&nbsp;<span class="builtinfunc" id="3593045">append</span><span class="op" id="3593051">(</span><span class="ident" id="3593052"><a href="/gostd/regexp/regexp.go.html#3592951">result</a></span><span class="op" id="3593058">,</span>&nbsp;<span class="ident" id="3593060"><a href="/gostd/regexp/regexp.go.html#3593019">match</a></span><span class="op" id="3593065">[</span><span class="num" id="3593066">0</span><span class="op" id="3593067">:</span><span class="num" id="3593068">2</span><span class="op" id="3593069">]</span><span class="op" id="3593070">)</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3593073">}</span><span class="op" id="3593074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3593077">if</span>&nbsp;<span class="builtinfunc" id="3593080">len</span><span class="op" id="3593083">(</span><span class="ident" id="3593084"><a href="/gostd/regexp/regexp.go.html#3592951">result</a></span><span class="op" id="3593090">)</span>&nbsp;<span class="op" id="3593092">==</span>&nbsp;<span class="num" id="3593095">0</span>&nbsp;<span class="op" id="3593097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3593101">return</span>&nbsp;<span class="builtintype" id="3593108">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3593113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3593116">return</span>&nbsp;<span class="ident" id="3593123"><a href="/gostd/regexp/regexp.go.html#3592951">result</a></span><br>
<span class="lineno">950</span><span class="op" id="3593130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3593133">//&nbsp;FindAllString&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindString;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="3593212">//&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description</span><br>
<span class="lineno"></span><span class="comment" id="3593289">//&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno">955</span><span class="comment" id="3593316">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3593361">func</span>&nbsp;<span class="op" id="3593366">(</span><span class="ident" id="3593367">re</span>&nbsp;<span class="op" id="3593370">*</span><span class="ident" id="3593371"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3593377">)</span>&nbsp;<span class="ident" id="3593379">FindAllString</span><span class="op" id="3593392">(</span><span class="ident" id="3593393">s</span>&nbsp;<span class="builtintype" id="3593395">string</span><span class="op" id="3593401">,</span>&nbsp;<span class="ident" id="3593403">n</span>&nbsp;<span class="builtintype" id="3593405">int</span><span class="op" id="3593408">)</span>&nbsp;<span class="op" id="3593410">[</span><span class="op" id="3593411">]</span><span class="builtintype" id="3593412">string</span>&nbsp;<span class="op" id="3593419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3593422">if</span>&nbsp;<span class="ident" id="3593425"><a href="/gostd/regexp/regexp.go.html#3593403">n</a></span>&nbsp;<span class="op" id="3593427">&lt;</span>&nbsp;<span class="num" id="3593429">0</span>&nbsp;<span class="op" id="3593431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3593435"><a href="/gostd/regexp/regexp.go.html#3593403">n</a></span>&nbsp;<span class="op" id="3593437">=</span>&nbsp;<span class="builtinfunc" id="3593439">len</span><span class="op" id="3593442">(</span><span class="ident" id="3593443"><a href="/gostd/regexp/regexp.go.html#3593393">s</a></span><span class="op" id="3593444">)</span>&nbsp;<span class="op" id="3593446">+</span>&nbsp;<span class="num" id="3593448">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3593451">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3593454">result</span>&nbsp;<span class="op" id="3593461">:=</span>&nbsp;<span class="builtinfunc" id="3593464">make</span><span class="op" id="3593468">(</span><span class="op" id="3593469">[</span><span class="op" id="3593470">]</span><span class="builtintype" id="3593471">string</span><span class="op" id="3593477">,</span>&nbsp;<span class="num" id="3593479">0</span><span class="op" id="3593480">,</span>&nbsp;<span class="ident" id="3593482"><a href="/gostd/regexp/regexp.go.html#3592061">startSize</a></span><span class="op" id="3593491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3593494"><a href="/gostd/regexp/regexp.go.html#3593367">re</a></span><span class="op" id="3593496">.</span><span class="ident" id="3593497"><a href="/gostd/regexp/regexp.go.html#3583193">allMatches</a></span><span class="op" id="3593507">(</span><span class="ident" id="3593508"><a href="/gostd/regexp/regexp.go.html#3593393">s</a></span><span class="op" id="3593509">,</span>&nbsp;<span class="builtintype" id="3593511">nil</span><span class="op" id="3593514">,</span>&nbsp;<span class="ident" id="3593516"><a href="/gostd/regexp/regexp.go.html#3593403">n</a></span><span class="op" id="3593517">,</span>&nbsp;<span class="keyword" id="3593519">func</span><span class="op" id="3593523">(</span><span class="ident" id="3593524">match</span>&nbsp;<span class="op" id="3593530">[</span><span class="op" id="3593531">]</span><span class="builtintype" id="3593532">int</span><span class="op" id="3593535">)</span>&nbsp;<span class="op" id="3593537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3593541"><a href="/gostd/regexp/regexp.go.html#3593454">result</a></span>&nbsp;<span class="op" id="3593548">=</span>&nbsp;<span class="builtinfunc" id="3593550">append</span><span class="op" id="3593556">(</span><span class="ident" id="3593557"><a href="/gostd/regexp/regexp.go.html#3593454">result</a></span><span class="op" id="3593563">,</span>&nbsp;<span class="ident" id="3593565"><a href="/gostd/regexp/regexp.go.html#3593393">s</a></span><span class="op" id="3593566">[</span><span class="ident" id="3593567"><a href="/gostd/regexp/regexp.go.html#3593524">match</a></span><span class="op" id="3593572">[</span><span class="num" id="3593573">0</span><span class="op" id="3593574">]</span><span class="op" id="3593575">:</span><span class="ident" id="3593576"><a href="/gostd/regexp/regexp.go.html#3593524">match</a></span><span class="op" id="3593581">[</span><span class="num" id="3593582">1</span><span class="op" id="3593583">]</span><span class="op" id="3593584">]</span><span class="op" id="3593585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3593588">}</span><span class="op" id="3593589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3593592">if</span>&nbsp;<span class="builtinfunc" id="3593595">len</span><span class="op" id="3593598">(</span><span class="ident" id="3593599"><a href="/gostd/regexp/regexp.go.html#3593454">result</a></span><span class="op" id="3593605">)</span>&nbsp;<span class="op" id="3593607">==</span>&nbsp;<span class="num" id="3593610">0</span>&nbsp;<span class="op" id="3593612">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3593616">return</span>&nbsp;<span class="builtintype" id="3593623">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3593628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3593631">return</span>&nbsp;<span class="ident" id="3593638"><a href="/gostd/regexp/regexp.go.html#3593454">result</a></span><br>
<span class="lineno"></span><span class="op" id="3593645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">970</span><span class="comment" id="3593648">//&nbsp;FindAllStringIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindStringIndex;&nbsp;it&nbsp;returns&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3593724">//&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3593802">//&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="3593841">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3593886">func</span>&nbsp;<span class="op" id="3593891">(</span><span class="ident" id="3593892">re</span>&nbsp;<span class="op" id="3593895">*</span><span class="ident" id="3593896"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3593902">)</span>&nbsp;<span class="ident" id="3593904">FindAllStringIndex</span><span class="op" id="3593922">(</span><span class="ident" id="3593923">s</span>&nbsp;<span class="builtintype" id="3593925">string</span><span class="op" id="3593931">,</span>&nbsp;<span class="ident" id="3593933">n</span>&nbsp;<span class="builtintype" id="3593935">int</span><span class="op" id="3593938">)</span>&nbsp;<span class="op" id="3593940">[</span><span class="op" id="3593941">]</span><span class="op" id="3593942">[</span><span class="op" id="3593943">]</span><span class="builtintype" id="3593944">int</span>&nbsp;<span class="op" id="3593948">{</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3593951">if</span>&nbsp;<span class="ident" id="3593954"><a href="/gostd/regexp/regexp.go.html#3593933">n</a></span>&nbsp;<span class="op" id="3593956">&lt;</span>&nbsp;<span class="num" id="3593958">0</span>&nbsp;<span class="op" id="3593960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3593964"><a href="/gostd/regexp/regexp.go.html#3593933">n</a></span>&nbsp;<span class="op" id="3593966">=</span>&nbsp;<span class="builtinfunc" id="3593968">len</span><span class="op" id="3593971">(</span><span class="ident" id="3593972"><a href="/gostd/regexp/regexp.go.html#3593923">s</a></span><span class="op" id="3593973">)</span>&nbsp;<span class="op" id="3593975">+</span>&nbsp;<span class="num" id="3593977">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3593980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3593983">result</span>&nbsp;<span class="op" id="3593990">:=</span>&nbsp;<span class="builtinfunc" id="3593993">make</span><span class="op" id="3593997">(</span><span class="op" id="3593998">[</span><span class="op" id="3593999">]</span><span class="op" id="3594000">[</span><span class="op" id="3594001">]</span><span class="builtintype" id="3594002">int</span><span class="op" id="3594005">,</span>&nbsp;<span class="num" id="3594007">0</span><span class="op" id="3594008">,</span>&nbsp;<span class="ident" id="3594010"><a href="/gostd/regexp/regexp.go.html#3592061">startSize</a></span><span class="op" id="3594019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3594022"><a href="/gostd/regexp/regexp.go.html#3593892">re</a></span><span class="op" id="3594024">.</span><span class="ident" id="3594025"><a href="/gostd/regexp/regexp.go.html#3583193">allMatches</a></span><span class="op" id="3594035">(</span><span class="ident" id="3594036"><a href="/gostd/regexp/regexp.go.html#3593923">s</a></span><span class="op" id="3594037">,</span>&nbsp;<span class="builtintype" id="3594039">nil</span><span class="op" id="3594042">,</span>&nbsp;<span class="ident" id="3594044"><a href="/gostd/regexp/regexp.go.html#3593933">n</a></span><span class="op" id="3594045">,</span>&nbsp;<span class="keyword" id="3594047">func</span><span class="op" id="3594051">(</span><span class="ident" id="3594052">match</span>&nbsp;<span class="op" id="3594058">[</span><span class="op" id="3594059">]</span><span class="builtintype" id="3594060">int</span><span class="op" id="3594063">)</span>&nbsp;<span class="op" id="3594065">{</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3594069"><a href="/gostd/regexp/regexp.go.html#3593983">result</a></span>&nbsp;<span class="op" id="3594076">=</span>&nbsp;<span class="builtinfunc" id="3594078">append</span><span class="op" id="3594084">(</span><span class="ident" id="3594085"><a href="/gostd/regexp/regexp.go.html#3593983">result</a></span><span class="op" id="3594091">,</span>&nbsp;<span class="ident" id="3594093"><a href="/gostd/regexp/regexp.go.html#3594052">match</a></span><span class="op" id="3594098">[</span><span class="num" id="3594099">0</span><span class="op" id="3594100">:</span><span class="num" id="3594101">2</span><span class="op" id="3594102">]</span><span class="op" id="3594103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3594106">}</span><span class="op" id="3594107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3594110">if</span>&nbsp;<span class="builtinfunc" id="3594113">len</span><span class="op" id="3594116">(</span><span class="ident" id="3594117"><a href="/gostd/regexp/regexp.go.html#3593983">result</a></span><span class="op" id="3594123">)</span>&nbsp;<span class="op" id="3594125">==</span>&nbsp;<span class="num" id="3594128">0</span>&nbsp;<span class="op" id="3594130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3594134">return</span>&nbsp;<span class="builtintype" id="3594141">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3594146">}</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3594149">return</span>&nbsp;<span class="ident" id="3594156"><a href="/gostd/regexp/regexp.go.html#3593983">result</a></span><br>
<span class="lineno"></span><span class="op" id="3594163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3594166">//&nbsp;FindAllSubmatch&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindSubmatch;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="3594242">//&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;</span><br>
<span class="lineno">990</span><span class="comment" id="3594314">//&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="3594353">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3594398">func</span>&nbsp;<span class="op" id="3594403">(</span><span class="ident" id="3594404">re</span>&nbsp;<span class="op" id="3594407">*</span><span class="ident" id="3594408"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3594414">)</span>&nbsp;<span class="ident" id="3594416">FindAllSubmatch</span><span class="op" id="3594431">(</span><span class="ident" id="3594432">b</span>&nbsp;<span class="op" id="3594434">[</span><span class="op" id="3594435">]</span><span class="builtintype" id="3594436">byte</span><span class="op" id="3594440">,</span>&nbsp;<span class="ident" id="3594442">n</span>&nbsp;<span class="builtintype" id="3594444">int</span><span class="op" id="3594447">)</span>&nbsp;<span class="op" id="3594449">[</span><span class="op" id="3594450">]</span><span class="op" id="3594451">[</span><span class="op" id="3594452">]</span><span class="op" id="3594453">[</span><span class="op" id="3594454">]</span><span class="builtintype" id="3594455">byte</span>&nbsp;<span class="op" id="3594460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3594463">if</span>&nbsp;<span class="ident" id="3594466"><a href="/gostd/regexp/regexp.go.html#3594442">n</a></span>&nbsp;<span class="op" id="3594468">&lt;</span>&nbsp;<span class="num" id="3594470">0</span>&nbsp;<span class="op" id="3594472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3594476"><a href="/gostd/regexp/regexp.go.html#3594442">n</a></span>&nbsp;<span class="op" id="3594478">=</span>&nbsp;<span class="builtinfunc" id="3594480">len</span><span class="op" id="3594483">(</span><span class="ident" id="3594484"><a href="/gostd/regexp/regexp.go.html#3594432">b</a></span><span class="op" id="3594485">)</span>&nbsp;<span class="op" id="3594487">+</span>&nbsp;<span class="num" id="3594489">1</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3594492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3594495">result</span>&nbsp;<span class="op" id="3594502">:=</span>&nbsp;<span class="builtinfunc" id="3594505">make</span><span class="op" id="3594509">(</span><span class="op" id="3594510">[</span><span class="op" id="3594511">]</span><span class="op" id="3594512">[</span><span class="op" id="3594513">]</span><span class="op" id="3594514">[</span><span class="op" id="3594515">]</span><span class="builtintype" id="3594516">byte</span><span class="op" id="3594520">,</span>&nbsp;<span class="num" id="3594522">0</span><span class="op" id="3594523">,</span>&nbsp;<span class="ident" id="3594525"><a href="/gostd/regexp/regexp.go.html#3592061">startSize</a></span><span class="op" id="3594534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3594537"><a href="/gostd/regexp/regexp.go.html#3594404">re</a></span><span class="op" id="3594539">.</span><span class="ident" id="3594540"><a href="/gostd/regexp/regexp.go.html#3583193">allMatches</a></span><span class="op" id="3594550">(</span><span class="string" id="3594551">&#34;&#34;</span><span class="op" id="3594553">,</span>&nbsp;<span class="ident" id="3594555"><a href="/gostd/regexp/regexp.go.html#3594432">b</a></span><span class="op" id="3594556">,</span>&nbsp;<span class="ident" id="3594558"><a href="/gostd/regexp/regexp.go.html#3594442">n</a></span><span class="op" id="3594559">,</span>&nbsp;<span class="keyword" id="3594561">func</span><span class="op" id="3594565">(</span><span class="ident" id="3594566">match</span>&nbsp;<span class="op" id="3594572">[</span><span class="op" id="3594573">]</span><span class="builtintype" id="3594574">int</span><span class="op" id="3594577">)</span>&nbsp;<span class="op" id="3594579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3594583">slice</span>&nbsp;<span class="op" id="3594589">:=</span>&nbsp;<span class="builtinfunc" id="3594592">make</span><span class="op" id="3594596">(</span><span class="op" id="3594597">[</span><span class="op" id="3594598">]</span><span class="op" id="3594599">[</span><span class="op" id="3594600">]</span><span class="builtintype" id="3594601">byte</span><span class="op" id="3594605">,</span>&nbsp;<span class="builtinfunc" id="3594607">len</span><span class="op" id="3594610">(</span><span class="ident" id="3594611"><a href="/gostd/regexp/regexp.go.html#3594566">match</a></span><span class="op" id="3594616">)</span><span class="op" id="3594617">/</span><span class="num" id="3594618">2</span><span class="op" id="3594619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3594623">for</span>&nbsp;<span class="ident" id="3594627">j</span>&nbsp;<span class="op" id="3594629">:=</span>&nbsp;<span class="keyword" id="3594632">range</span>&nbsp;<span class="ident" id="3594638"><a href="/gostd/regexp/regexp.go.html#3594583">slice</a></span>&nbsp;<span class="op" id="3594644">{</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3594649">if</span>&nbsp;<span class="ident" id="3594652"><a href="/gostd/regexp/regexp.go.html#3594566">match</a></span><span class="op" id="3594657">[</span><span class="num" id="3594658">2</span><span class="op" id="3594659">*</span><span class="ident" id="3594660"><a href="/gostd/regexp/regexp.go.html#3594627">j</a></span><span class="op" id="3594661">]</span>&nbsp;<span class="op" id="3594663">&gt;=</span>&nbsp;<span class="num" id="3594666">0</span>&nbsp;<span class="op" id="3594668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3594674"><a href="/gostd/regexp/regexp.go.html#3594583">slice</a></span><span class="op" id="3594679">[</span><span class="ident" id="3594680"><a href="/gostd/regexp/regexp.go.html#3594627">j</a></span><span class="op" id="3594681">]</span>&nbsp;<span class="op" id="3594683">=</span>&nbsp;<span class="ident" id="3594685"><a href="/gostd/regexp/regexp.go.html#3594432">b</a></span><span class="op" id="3594686">[</span><span class="ident" id="3594687"><a href="/gostd/regexp/regexp.go.html#3594566">match</a></span><span class="op" id="3594692">[</span><span class="num" id="3594693">2</span><span class="op" id="3594694">*</span><span class="ident" id="3594695"><a href="/gostd/regexp/regexp.go.html#3594627">j</a></span><span class="op" id="3594696">]</span><span class="op" id="3594697">:</span><span class="ident" id="3594698"><a href="/gostd/regexp/regexp.go.html#3594566">match</a></span><span class="op" id="3594703">[</span><span class="num" id="3594704">2</span><span class="op" id="3594705">*</span><span class="ident" id="3594706"><a href="/gostd/regexp/regexp.go.html#3594627">j</a></span><span class="op" id="3594707">+</span><span class="num" id="3594708">1</span><span class="op" id="3594709">]</span><span class="op" id="3594710">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3594715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3594719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3594723"><a href="/gostd/regexp/regexp.go.html#3594495">result</a></span>&nbsp;<span class="op" id="3594730">=</span>&nbsp;<span class="builtinfunc" id="3594732">append</span><span class="op" id="3594738">(</span><span class="ident" id="3594739"><a href="/gostd/regexp/regexp.go.html#3594495">result</a></span><span class="op" id="3594745">,</span>&nbsp;<span class="ident" id="3594747"><a href="/gostd/regexp/regexp.go.html#3594583">slice</a></span><span class="op" id="3594752">)</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3594755">}</span><span class="op" id="3594756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3594759">if</span>&nbsp;<span class="builtinfunc" id="3594762">len</span><span class="op" id="3594765">(</span><span class="ident" id="3594766"><a href="/gostd/regexp/regexp.go.html#3594495">result</a></span><span class="op" id="3594772">)</span>&nbsp;<span class="op" id="3594774">==</span>&nbsp;<span class="num" id="3594777">0</span>&nbsp;<span class="op" id="3594779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3594783">return</span>&nbsp;<span class="builtintype" id="3594790">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3594795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3594798">return</span>&nbsp;<span class="ident" id="3594805"><a href="/gostd/regexp/regexp.go.html#3594495">result</a></span><br>
<span class="lineno">1010</span><span class="op" id="3594812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3594815">//&nbsp;FindAllSubmatchIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindSubmatchIndex;&nbsp;it&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3594893">//&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3594967">//&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno">1015</span><span class="comment" id="3595012">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3595057">func</span>&nbsp;<span class="op" id="3595062">(</span><span class="ident" id="3595063">re</span>&nbsp;<span class="op" id="3595066">*</span><span class="ident" id="3595067"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3595073">)</span>&nbsp;<span class="ident" id="3595075">FindAllSubmatchIndex</span><span class="op" id="3595095">(</span><span class="ident" id="3595096">b</span>&nbsp;<span class="op" id="3595098">[</span><span class="op" id="3595099">]</span><span class="builtintype" id="3595100">byte</span><span class="op" id="3595104">,</span>&nbsp;<span class="ident" id="3595106">n</span>&nbsp;<span class="builtintype" id="3595108">int</span><span class="op" id="3595111">)</span>&nbsp;<span class="op" id="3595113">[</span><span class="op" id="3595114">]</span><span class="op" id="3595115">[</span><span class="op" id="3595116">]</span><span class="builtintype" id="3595117">int</span>&nbsp;<span class="op" id="3595121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3595124">if</span>&nbsp;<span class="ident" id="3595127"><a href="/gostd/regexp/regexp.go.html#3595106">n</a></span>&nbsp;<span class="op" id="3595129">&lt;</span>&nbsp;<span class="num" id="3595131">0</span>&nbsp;<span class="op" id="3595133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3595137"><a href="/gostd/regexp/regexp.go.html#3595106">n</a></span>&nbsp;<span class="op" id="3595139">=</span>&nbsp;<span class="builtinfunc" id="3595141">len</span><span class="op" id="3595144">(</span><span class="ident" id="3595145"><a href="/gostd/regexp/regexp.go.html#3595096">b</a></span><span class="op" id="3595146">)</span>&nbsp;<span class="op" id="3595148">+</span>&nbsp;<span class="num" id="3595150">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3595153">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3595156">result</span>&nbsp;<span class="op" id="3595163">:=</span>&nbsp;<span class="builtinfunc" id="3595166">make</span><span class="op" id="3595170">(</span><span class="op" id="3595171">[</span><span class="op" id="3595172">]</span><span class="op" id="3595173">[</span><span class="op" id="3595174">]</span><span class="builtintype" id="3595175">int</span><span class="op" id="3595178">,</span>&nbsp;<span class="num" id="3595180">0</span><span class="op" id="3595181">,</span>&nbsp;<span class="ident" id="3595183"><a href="/gostd/regexp/regexp.go.html#3592061">startSize</a></span><span class="op" id="3595192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3595195"><a href="/gostd/regexp/regexp.go.html#3595063">re</a></span><span class="op" id="3595197">.</span><span class="ident" id="3595198"><a href="/gostd/regexp/regexp.go.html#3583193">allMatches</a></span><span class="op" id="3595208">(</span><span class="string" id="3595209">&#34;&#34;</span><span class="op" id="3595211">,</span>&nbsp;<span class="ident" id="3595213"><a href="/gostd/regexp/regexp.go.html#3595096">b</a></span><span class="op" id="3595214">,</span>&nbsp;<span class="ident" id="3595216"><a href="/gostd/regexp/regexp.go.html#3595106">n</a></span><span class="op" id="3595217">,</span>&nbsp;<span class="keyword" id="3595219">func</span><span class="op" id="3595223">(</span><span class="ident" id="3595224">match</span>&nbsp;<span class="op" id="3595230">[</span><span class="op" id="3595231">]</span><span class="builtintype" id="3595232">int</span><span class="op" id="3595235">)</span>&nbsp;<span class="op" id="3595237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3595241"><a href="/gostd/regexp/regexp.go.html#3595156">result</a></span>&nbsp;<span class="op" id="3595248">=</span>&nbsp;<span class="builtinfunc" id="3595250">append</span><span class="op" id="3595256">(</span><span class="ident" id="3595257"><a href="/gostd/regexp/regexp.go.html#3595156">result</a></span><span class="op" id="3595263">,</span>&nbsp;<span class="ident" id="3595265"><a href="/gostd/regexp/regexp.go.html#3595224">match</a></span><span class="op" id="3595270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3595273">}</span><span class="op" id="3595274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3595277">if</span>&nbsp;<span class="builtinfunc" id="3595280">len</span><span class="op" id="3595283">(</span><span class="ident" id="3595284"><a href="/gostd/regexp/regexp.go.html#3595156">result</a></span><span class="op" id="3595290">)</span>&nbsp;<span class="op" id="3595292">==</span>&nbsp;<span class="num" id="3595295">0</span>&nbsp;<span class="op" id="3595297">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3595301">return</span>&nbsp;<span class="builtintype" id="3595308">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3595313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3595316">return</span>&nbsp;<span class="ident" id="3595323"><a href="/gostd/regexp/regexp.go.html#3595156">result</a></span><br>
<span class="lineno"></span><span class="op" id="3595330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1030</span><span class="comment" id="3595333">//&nbsp;FindAllStringSubmatch&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of&nbsp;FindStringSubmatch;&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3595405">//&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3595483">//&nbsp;the&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the&nbsp;package&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="3595532">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3595577">func</span>&nbsp;<span class="op" id="3595582">(</span><span class="ident" id="3595583">re</span>&nbsp;<span class="op" id="3595586">*</span><span class="ident" id="3595587"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3595593">)</span>&nbsp;<span class="ident" id="3595595">FindAllStringSubmatch</span><span class="op" id="3595616">(</span><span class="ident" id="3595617">s</span>&nbsp;<span class="builtintype" id="3595619">string</span><span class="op" id="3595625">,</span>&nbsp;<span class="ident" id="3595627">n</span>&nbsp;<span class="builtintype" id="3595629">int</span><span class="op" id="3595632">)</span>&nbsp;<span class="op" id="3595634">[</span><span class="op" id="3595635">]</span><span class="op" id="3595636">[</span><span class="op" id="3595637">]</span><span class="builtintype" id="3595638">string</span>&nbsp;<span class="op" id="3595645">{</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3595648">if</span>&nbsp;<span class="ident" id="3595651"><a href="/gostd/regexp/regexp.go.html#3595627">n</a></span>&nbsp;<span class="op" id="3595653">&lt;</span>&nbsp;<span class="num" id="3595655">0</span>&nbsp;<span class="op" id="3595657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3595661"><a href="/gostd/regexp/regexp.go.html#3595627">n</a></span>&nbsp;<span class="op" id="3595663">=</span>&nbsp;<span class="builtinfunc" id="3595665">len</span><span class="op" id="3595668">(</span><span class="ident" id="3595669"><a href="/gostd/regexp/regexp.go.html#3595617">s</a></span><span class="op" id="3595670">)</span>&nbsp;<span class="op" id="3595672">+</span>&nbsp;<span class="num" id="3595674">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3595677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3595680">result</span>&nbsp;<span class="op" id="3595687">:=</span>&nbsp;<span class="builtinfunc" id="3595690">make</span><span class="op" id="3595694">(</span><span class="op" id="3595695">[</span><span class="op" id="3595696">]</span><span class="op" id="3595697">[</span><span class="op" id="3595698">]</span><span class="builtintype" id="3595699">string</span><span class="op" id="3595705">,</span>&nbsp;<span class="num" id="3595707">0</span><span class="op" id="3595708">,</span>&nbsp;<span class="ident" id="3595710"><a href="/gostd/regexp/regexp.go.html#3592061">startSize</a></span><span class="op" id="3595719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3595722"><a href="/gostd/regexp/regexp.go.html#3595583">re</a></span><span class="op" id="3595724">.</span><span class="ident" id="3595725"><a href="/gostd/regexp/regexp.go.html#3583193">allMatches</a></span><span class="op" id="3595735">(</span><span class="ident" id="3595736"><a href="/gostd/regexp/regexp.go.html#3595617">s</a></span><span class="op" id="3595737">,</span>&nbsp;<span class="builtintype" id="3595739">nil</span><span class="op" id="3595742">,</span>&nbsp;<span class="ident" id="3595744"><a href="/gostd/regexp/regexp.go.html#3595627">n</a></span><span class="op" id="3595745">,</span>&nbsp;<span class="keyword" id="3595747">func</span><span class="op" id="3595751">(</span><span class="ident" id="3595752">match</span>&nbsp;<span class="op" id="3595758">[</span><span class="op" id="3595759">]</span><span class="builtintype" id="3595760">int</span><span class="op" id="3595763">)</span>&nbsp;<span class="op" id="3595765">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3595769">slice</span>&nbsp;<span class="op" id="3595775">:=</span>&nbsp;<span class="builtinfunc" id="3595778">make</span><span class="op" id="3595782">(</span><span class="op" id="3595783">[</span><span class="op" id="3595784">]</span><span class="builtintype" id="3595785">string</span><span class="op" id="3595791">,</span>&nbsp;<span class="builtinfunc" id="3595793">len</span><span class="op" id="3595796">(</span><span class="ident" id="3595797"><a href="/gostd/regexp/regexp.go.html#3595752">match</a></span><span class="op" id="3595802">)</span><span class="op" id="3595803">/</span><span class="num" id="3595804">2</span><span class="op" id="3595805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3595809">for</span>&nbsp;<span class="ident" id="3595813">j</span>&nbsp;<span class="op" id="3595815">:=</span>&nbsp;<span class="keyword" id="3595818">range</span>&nbsp;<span class="ident" id="3595824"><a href="/gostd/regexp/regexp.go.html#3595769">slice</a></span>&nbsp;<span class="op" id="3595830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3595835">if</span>&nbsp;<span class="ident" id="3595838"><a href="/gostd/regexp/regexp.go.html#3595752">match</a></span><span class="op" id="3595843">[</span><span class="num" id="3595844">2</span><span class="op" id="3595845">*</span><span class="ident" id="3595846"><a href="/gostd/regexp/regexp.go.html#3595813">j</a></span><span class="op" id="3595847">]</span>&nbsp;<span class="op" id="3595849">&gt;=</span>&nbsp;<span class="num" id="3595852">0</span>&nbsp;<span class="op" id="3595854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3595860"><a href="/gostd/regexp/regexp.go.html#3595769">slice</a></span><span class="op" id="3595865">[</span><span class="ident" id="3595866"><a href="/gostd/regexp/regexp.go.html#3595813">j</a></span><span class="op" id="3595867">]</span>&nbsp;<span class="op" id="3595869">=</span>&nbsp;<span class="ident" id="3595871"><a href="/gostd/regexp/regexp.go.html#3595617">s</a></span><span class="op" id="3595872">[</span><span class="ident" id="3595873"><a href="/gostd/regexp/regexp.go.html#3595752">match</a></span><span class="op" id="3595878">[</span><span class="num" id="3595879">2</span><span class="op" id="3595880">*</span><span class="ident" id="3595881"><a href="/gostd/regexp/regexp.go.html#3595813">j</a></span><span class="op" id="3595882">]</span><span class="op" id="3595883">:</span><span class="ident" id="3595884"><a href="/gostd/regexp/regexp.go.html#3595752">match</a></span><span class="op" id="3595889">[</span><span class="num" id="3595890">2</span><span class="op" id="3595891">*</span><span class="ident" id="3595892"><a href="/gostd/regexp/regexp.go.html#3595813">j</a></span><span class="op" id="3595893">+</span><span class="num" id="3595894">1</span><span class="op" id="3595895">]</span><span class="op" id="3595896">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3595901">}</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3595905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3595909"><a href="/gostd/regexp/regexp.go.html#3595680">result</a></span>&nbsp;<span class="op" id="3595916">=</span>&nbsp;<span class="builtinfunc" id="3595918">append</span><span class="op" id="3595924">(</span><span class="ident" id="3595925"><a href="/gostd/regexp/regexp.go.html#3595680">result</a></span><span class="op" id="3595931">,</span>&nbsp;<span class="ident" id="3595933"><a href="/gostd/regexp/regexp.go.html#3595769">slice</a></span><span class="op" id="3595938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3595941">}</span><span class="op" id="3595942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3595945">if</span>&nbsp;<span class="builtinfunc" id="3595948">len</span><span class="op" id="3595951">(</span><span class="ident" id="3595952"><a href="/gostd/regexp/regexp.go.html#3595680">result</a></span><span class="op" id="3595958">)</span>&nbsp;<span class="op" id="3595960">==</span>&nbsp;<span class="num" id="3595963">0</span>&nbsp;<span class="op" id="3595965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3595969">return</span>&nbsp;<span class="builtintype" id="3595976">nil</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3595981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3595984">return</span>&nbsp;<span class="ident" id="3595991"><a href="/gostd/regexp/regexp.go.html#3595680">result</a></span><br>
<span class="lineno"></span><span class="op" id="3595998">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3596001">//&nbsp;FindAllStringSubmatchIndex&nbsp;is&nbsp;the&nbsp;&#39;All&#39;&nbsp;version&nbsp;of</span><br>
<span class="lineno">1055</span><span class="comment" id="3596055">//&nbsp;FindStringSubmatchIndex;&nbsp;it&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;all&nbsp;successive&nbsp;matches&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3596131">//&nbsp;the&nbsp;expression,&nbsp;as&nbsp;defined&nbsp;by&nbsp;the&nbsp;&#39;All&#39;&nbsp;description&nbsp;in&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="3596201">//&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="3596213">//&nbsp;A&nbsp;return&nbsp;value&nbsp;of&nbsp;nil&nbsp;indicates&nbsp;no&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="3596258">func</span>&nbsp;<span class="op" id="3596263">(</span><span class="ident" id="3596264">re</span>&nbsp;<span class="op" id="3596267">*</span><span class="ident" id="3596268"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3596274">)</span>&nbsp;<span class="ident" id="3596276">FindAllStringSubmatchIndex</span><span class="op" id="3596302">(</span><span class="ident" id="3596303">s</span>&nbsp;<span class="builtintype" id="3596305">string</span><span class="op" id="3596311">,</span>&nbsp;<span class="ident" id="3596313">n</span>&nbsp;<span class="builtintype" id="3596315">int</span><span class="op" id="3596318">)</span>&nbsp;<span class="op" id="3596320">[</span><span class="op" id="3596321">]</span><span class="op" id="3596322">[</span><span class="op" id="3596323">]</span><span class="builtintype" id="3596324">int</span>&nbsp;<span class="op" id="3596328">{</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3596331">if</span>&nbsp;<span class="ident" id="3596334"><a href="/gostd/regexp/regexp.go.html#3596313">n</a></span>&nbsp;<span class="op" id="3596336">&lt;</span>&nbsp;<span class="num" id="3596338">0</span>&nbsp;<span class="op" id="3596340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3596344"><a href="/gostd/regexp/regexp.go.html#3596313">n</a></span>&nbsp;<span class="op" id="3596346">=</span>&nbsp;<span class="builtinfunc" id="3596348">len</span><span class="op" id="3596351">(</span><span class="ident" id="3596352"><a href="/gostd/regexp/regexp.go.html#3596303">s</a></span><span class="op" id="3596353">)</span>&nbsp;<span class="op" id="3596355">+</span>&nbsp;<span class="num" id="3596357">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3596360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3596363">result</span>&nbsp;<span class="op" id="3596370">:=</span>&nbsp;<span class="builtinfunc" id="3596373">make</span><span class="op" id="3596377">(</span><span class="op" id="3596378">[</span><span class="op" id="3596379">]</span><span class="op" id="3596380">[</span><span class="op" id="3596381">]</span><span class="builtintype" id="3596382">int</span><span class="op" id="3596385">,</span>&nbsp;<span class="num" id="3596387">0</span><span class="op" id="3596388">,</span>&nbsp;<span class="ident" id="3596390"><a href="/gostd/regexp/regexp.go.html#3592061">startSize</a></span><span class="op" id="3596399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3596402"><a href="/gostd/regexp/regexp.go.html#3596264">re</a></span><span class="op" id="3596404">.</span><span class="ident" id="3596405"><a href="/gostd/regexp/regexp.go.html#3583193">allMatches</a></span><span class="op" id="3596415">(</span><span class="ident" id="3596416"><a href="/gostd/regexp/regexp.go.html#3596303">s</a></span><span class="op" id="3596417">,</span>&nbsp;<span class="builtintype" id="3596419">nil</span><span class="op" id="3596422">,</span>&nbsp;<span class="ident" id="3596424"><a href="/gostd/regexp/regexp.go.html#3596313">n</a></span><span class="op" id="3596425">,</span>&nbsp;<span class="keyword" id="3596427">func</span><span class="op" id="3596431">(</span><span class="ident" id="3596432">match</span>&nbsp;<span class="op" id="3596438">[</span><span class="op" id="3596439">]</span><span class="builtintype" id="3596440">int</span><span class="op" id="3596443">)</span>&nbsp;<span class="op" id="3596445">{</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3596449"><a href="/gostd/regexp/regexp.go.html#3596363">result</a></span>&nbsp;<span class="op" id="3596456">=</span>&nbsp;<span class="builtinfunc" id="3596458">append</span><span class="op" id="3596464">(</span><span class="ident" id="3596465"><a href="/gostd/regexp/regexp.go.html#3596363">result</a></span><span class="op" id="3596471">,</span>&nbsp;<span class="ident" id="3596473"><a href="/gostd/regexp/regexp.go.html#3596432">match</a></span><span class="op" id="3596478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3596481">}</span><span class="op" id="3596482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3596485">if</span>&nbsp;<span class="builtinfunc" id="3596488">len</span><span class="op" id="3596491">(</span><span class="ident" id="3596492"><a href="/gostd/regexp/regexp.go.html#3596363">result</a></span><span class="op" id="3596498">)</span>&nbsp;<span class="op" id="3596500">==</span>&nbsp;<span class="num" id="3596503">0</span>&nbsp;<span class="op" id="3596505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3596509">return</span>&nbsp;<span class="builtintype" id="3596516">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3596521">}</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3596524">return</span>&nbsp;<span class="ident" id="3596531"><a href="/gostd/regexp/regexp.go.html#3596363">result</a></span><br>
<span class="lineno"></span><span class="op" id="3596538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3596541">//&nbsp;Split&nbsp;slices&nbsp;s&nbsp;into&nbsp;substrings&nbsp;separated&nbsp;by&nbsp;the&nbsp;expression&nbsp;and&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3596626">//&nbsp;the&nbsp;substrings&nbsp;between&nbsp;those&nbsp;expression&nbsp;matches.</span><br>
<span class="lineno">1075</span><span class="comment" id="3596678">//</span><br>
<span class="lineno"></span><span class="comment" id="3596681">//&nbsp;The&nbsp;slice&nbsp;returned&nbsp;by&nbsp;this&nbsp;method&nbsp;consists&nbsp;of&nbsp;all&nbsp;the&nbsp;substrings&nbsp;of&nbsp;s</span><br>
<span class="lineno"></span><span class="comment" id="3596754">//&nbsp;not&nbsp;contained&nbsp;in&nbsp;the&nbsp;slice&nbsp;returned&nbsp;by&nbsp;FindAllString.&nbsp;When&nbsp;called&nbsp;on&nbsp;an&nbsp;expression</span><br>
<span class="lineno"></span><span class="comment" id="3596840">//&nbsp;that&nbsp;contains&nbsp;no&nbsp;metacharacters,&nbsp;it&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;strings.SplitN.</span><br>
<span class="lineno"></span><span class="comment" id="3596912">//</span><br>
<span class="lineno">1080</span><span class="comment" id="3596915">//&nbsp;Example:</span><br>
<span class="lineno"></span><span class="comment" id="3596927">//&nbsp;&nbsp;&nbsp;s&nbsp;:=&nbsp;regexp.MustCompile(&#34;a*&#34;).Split(&#34;abaabaccadaaae&#34;,&nbsp;5)</span><br>
<span class="lineno"></span><span class="comment" id="3596989">//&nbsp;&nbsp;&nbsp;//&nbsp;s:&nbsp;[&#34;&#34;,&nbsp;&#34;b&#34;,&nbsp;&#34;b&#34;,&nbsp;&#34;c&#34;,&nbsp;&#34;cadaaae&#34;]</span><br>
<span class="lineno"></span><span class="comment" id="3597031">//</span><br>
<span class="lineno"></span><span class="comment" id="3597034">//&nbsp;The&nbsp;count&nbsp;determines&nbsp;the&nbsp;number&nbsp;of&nbsp;substrings&nbsp;to&nbsp;return:</span><br>
<span class="lineno">1085</span><span class="comment" id="3597094">//&nbsp;&nbsp;&nbsp;n&nbsp;&gt;&nbsp;0:&nbsp;at&nbsp;most&nbsp;n&nbsp;substrings;&nbsp;the&nbsp;last&nbsp;substring&nbsp;will&nbsp;be&nbsp;the&nbsp;unsplit&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="3597178">//&nbsp;&nbsp;&nbsp;n&nbsp;==&nbsp;0:&nbsp;the&nbsp;result&nbsp;is&nbsp;nil&nbsp;(zero&nbsp;substrings)</span><br>
<span class="lineno"></span><span class="comment" id="3597227">//&nbsp;&nbsp;&nbsp;n&nbsp;&lt;&nbsp;0:&nbsp;all&nbsp;substrings</span><br>
<span class="lineno"></span><span class="keyword" id="3597254">func</span>&nbsp;<span class="op" id="3597259">(</span><span class="ident" id="3597260">re</span>&nbsp;<span class="op" id="3597263">*</span><span class="ident" id="3597264"><a href="/gostd/regexp/regexp.go.html#3567022">Regexp</a></span><span class="op" id="3597270">)</span>&nbsp;<span class="ident" id="3597272">Split</span><span class="op" id="3597277">(</span><span class="ident" id="3597278">s</span>&nbsp;<span class="builtintype" id="3597280">string</span><span class="op" id="3597286">,</span>&nbsp;<span class="ident" id="3597288">n</span>&nbsp;<span class="builtintype" id="3597290">int</span><span class="op" id="3597293">)</span>&nbsp;<span class="op" id="3597295">[</span><span class="op" id="3597296">]</span><span class="builtintype" id="3597297">string</span>&nbsp;<span class="op" id="3597304">{</span><br>
<span class="lineno"></span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597308">if</span>&nbsp;<span class="ident" id="3597311"><a href="/gostd/regexp/regexp.go.html#3597288">n</a></span>&nbsp;<span class="op" id="3597313">==</span>&nbsp;<span class="num" id="3597316">0</span>&nbsp;<span class="op" id="3597318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597322">return</span>&nbsp;<span class="builtintype" id="3597329">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597338">if</span>&nbsp;<span class="builtinfunc" id="3597341">len</span><span class="op" id="3597344">(</span><span class="ident" id="3597345"><a href="/gostd/regexp/regexp.go.html#3597260">re</a></span><span class="op" id="3597347">.</span><span class="ident" id="3597348"><a href="/gostd/regexp/regexp.go.html#3567067">expr</a></span><span class="op" id="3597352">)</span>&nbsp;<span class="op" id="3597354">&gt;</span>&nbsp;<span class="num" id="3597356">0</span>&nbsp;<span class="op" id="3597358">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3597361">len</span><span class="op" id="3597364">(</span><span class="ident" id="3597365"><a href="/gostd/regexp/regexp.go.html#3597278">s</a></span><span class="op" id="3597366">)</span>&nbsp;<span class="op" id="3597368">==</span>&nbsp;<span class="num" id="3597371">0</span>&nbsp;<span class="op" id="3597373">{</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597377">return</span>&nbsp;<span class="op" id="3597384">[</span><span class="op" id="3597385">]</span><span class="builtintype" id="3597386">string</span><span class="op" id="3597392">{</span><span class="string" id="3597393">&#34;&#34;</span><span class="op" id="3597395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597402">matches</span>&nbsp;<span class="op" id="3597410">:=</span>&nbsp;<span class="ident" id="3597413"><a href="/gostd/regexp/regexp.go.html#3597260">re</a></span><span class="op" id="3597415">.</span><span class="ident" id="3597416"><a href="/gostd/regexp/regexp.go.html#3593904">FindAllStringIndex</a></span><span class="op" id="3597434">(</span><span class="ident" id="3597435"><a href="/gostd/regexp/regexp.go.html#3597278">s</a></span><span class="op" id="3597436">,</span>&nbsp;<span class="ident" id="3597438"><a href="/gostd/regexp/regexp.go.html#3597288">n</a></span><span class="op" id="3597439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597442">strings</span>&nbsp;<span class="op" id="3597450">:=</span>&nbsp;<span class="builtinfunc" id="3597453">make</span><span class="op" id="3597457">(</span><span class="op" id="3597458">[</span><span class="op" id="3597459">]</span><span class="builtintype" id="3597460">string</span><span class="op" id="3597466">,</span>&nbsp;<span class="num" id="3597468">0</span><span class="op" id="3597469">,</span>&nbsp;<span class="builtinfunc" id="3597471">len</span><span class="op" id="3597474">(</span><span class="ident" id="3597475"><a href="/gostd/regexp/regexp.go.html#3597402">matches</a></span><span class="op" id="3597482">)</span><span class="op" id="3597483">)</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597487">beg</span>&nbsp;<span class="op" id="3597491">:=</span>&nbsp;<span class="num" id="3597494">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597497">end</span>&nbsp;<span class="op" id="3597501">:=</span>&nbsp;<span class="num" id="3597504">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597507">for</span>&nbsp;<span class="ident" id="3597511">_</span><span class="op" id="3597512">,</span>&nbsp;<span class="ident" id="3597514">match</span>&nbsp;<span class="op" id="3597520">:=</span>&nbsp;<span class="keyword" id="3597523">range</span>&nbsp;<span class="ident" id="3597529"><a href="/gostd/regexp/regexp.go.html#3597402">matches</a></span>&nbsp;<span class="op" id="3597537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597541">if</span>&nbsp;<span class="ident" id="3597544"><a href="/gostd/regexp/regexp.go.html#3597288">n</a></span>&nbsp;<span class="op" id="3597546">&gt;</span>&nbsp;<span class="num" id="3597548">0</span>&nbsp;<span class="op" id="3597550">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3597553">len</span><span class="op" id="3597556">(</span><span class="ident" id="3597557"><a href="/gostd/regexp/regexp.go.html#3597442">strings</a></span><span class="op" id="3597564">)</span>&nbsp;<span class="op" id="3597566">&gt;=</span>&nbsp;<span class="ident" id="3597569"><a href="/gostd/regexp/regexp.go.html#3597288">n</a></span><span class="op" id="3597570">-</span><span class="num" id="3597571">1</span>&nbsp;<span class="op" id="3597573">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597578">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597591"><a href="/gostd/regexp/regexp.go.html#3597497">end</a></span>&nbsp;<span class="op" id="3597595">=</span>&nbsp;<span class="ident" id="3597597"><a href="/gostd/regexp/regexp.go.html#3597514">match</a></span><span class="op" id="3597602">[</span><span class="num" id="3597603">0</span><span class="op" id="3597604">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597608">if</span>&nbsp;<span class="ident" id="3597611"><a href="/gostd/regexp/regexp.go.html#3597514">match</a></span><span class="op" id="3597616">[</span><span class="num" id="3597617">1</span><span class="op" id="3597618">]</span>&nbsp;<span class="op" id="3597620">!=</span>&nbsp;<span class="num" id="3597623">0</span>&nbsp;<span class="op" id="3597625">{</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597630"><a href="/gostd/regexp/regexp.go.html#3597442">strings</a></span>&nbsp;<span class="op" id="3597638">=</span>&nbsp;<span class="builtinfunc" id="3597640">append</span><span class="op" id="3597646">(</span><span class="ident" id="3597647"><a href="/gostd/regexp/regexp.go.html#3597442">strings</a></span><span class="op" id="3597654">,</span>&nbsp;<span class="ident" id="3597656"><a href="/gostd/regexp/regexp.go.html#3597278">s</a></span><span class="op" id="3597657">[</span><span class="ident" id="3597658"><a href="/gostd/regexp/regexp.go.html#3597487">beg</a></span><span class="op" id="3597661">:</span><span class="ident" id="3597662"><a href="/gostd/regexp/regexp.go.html#3597497">end</a></span><span class="op" id="3597665">]</span><span class="op" id="3597666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597674"><a href="/gostd/regexp/regexp.go.html#3597487">beg</a></span>&nbsp;<span class="op" id="3597678">=</span>&nbsp;<span class="ident" id="3597680"><a href="/gostd/regexp/regexp.go.html#3597514">match</a></span><span class="op" id="3597685">[</span><span class="num" id="3597686">1</span><span class="op" id="3597687">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597694">if</span>&nbsp;<span class="ident" id="3597697"><a href="/gostd/regexp/regexp.go.html#3597497">end</a></span>&nbsp;<span class="op" id="3597701">!=</span>&nbsp;<span class="builtinfunc" id="3597704">len</span><span class="op" id="3597707">(</span><span class="ident" id="3597708"><a href="/gostd/regexp/regexp.go.html#3597278">s</a></span><span class="op" id="3597709">)</span>&nbsp;<span class="op" id="3597711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3597715"><a href="/gostd/regexp/regexp.go.html#3597442">strings</a></span>&nbsp;<span class="op" id="3597723">=</span>&nbsp;<span class="builtinfunc" id="3597725">append</span><span class="op" id="3597731">(</span><span class="ident" id="3597732"><a href="/gostd/regexp/regexp.go.html#3597442">strings</a></span><span class="op" id="3597739">,</span>&nbsp;<span class="ident" id="3597741"><a href="/gostd/regexp/regexp.go.html#3597278">s</a></span><span class="op" id="3597742">[</span><span class="ident" id="3597743"><a href="/gostd/regexp/regexp.go.html#3597487">beg</a></span><span class="op" id="3597746">:</span><span class="op" id="3597747">]</span><span class="op" id="3597748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3597751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3597755">return</span>&nbsp;<span class="ident" id="3597762"><a href="/gostd/regexp/regexp.go.html#3597442">strings</a></span><br>
<span class="lineno">1120</span><span class="op" id="3597770">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
