<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/fnv</h2>
<ul>
<li><a href="/gostd/hash/fnv/fnv.go.html">fnv.go</a></li>
<li><a href="/gostd/hash/fnv/fnv_test.go.html">fnv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5113421">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5113476">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5113530">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5113581">//&nbsp;Package&nbsp;fnv&nbsp;implements&nbsp;FNV-1&nbsp;and&nbsp;FNV-1a,&nbsp;non-cryptographic&nbsp;hash&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="5113658">//&nbsp;created&nbsp;by&nbsp;Glenn&nbsp;Fowler,&nbsp;Landon&nbsp;Curt&nbsp;Noll,&nbsp;and&nbsp;Phong&nbsp;Vo.</span><br>
<span class="lineno"></span><span class="comment" id="5113718">//&nbsp;See</span><br>
<span class="lineno"></span><span class="comment" id="5113725">//&nbsp;http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function.</span><br>
<span class="lineno"></span><span class="keyword" id="5113803">package</span>&nbsp;<span class="ident" id="5113811">fnv</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5113816">import</span>&nbsp;<span class="op" id="5113823">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5113826">&#34;hash&#34;</span><br>
<span class="lineno"></span><span class="op" id="5113833">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5113836">type</span>&nbsp;<span class="op" id="5113841">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113844">sum32</span>&nbsp;&nbsp;<span class="builtintype" id="5113851">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113859">sum32a</span>&nbsp;<span class="builtintype" id="5113866">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113874">sum64</span>&nbsp;&nbsp;<span class="ident" id="5113881">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113889">sum64a</span>&nbsp;<span class="ident" id="5113896">uint64</span><br>
<span class="lineno">20</span><span class="op" id="5113903">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5113906">const</span>&nbsp;<span class="op" id="5113912">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113915">offset32</span>&nbsp;<span class="op" id="5113924">=</span>&nbsp;<span class="num" id="5113926">2166136261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113938">offset64</span>&nbsp;<span class="op" id="5113947">=</span>&nbsp;<span class="num" id="5113949">14695981039346656037</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113971">prime32</span>&nbsp;&nbsp;<span class="op" id="5113980">=</span>&nbsp;<span class="num" id="5113982">16777619</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5113992">prime64</span>&nbsp;&nbsp;<span class="op" id="5114001">=</span>&nbsp;<span class="num" id="5114003">1099511628211</span><br>
<span class="lineno"></span><span class="op" id="5114017">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5114020">//&nbsp;New32&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno">30</span><span class="keyword" id="5114067">func</span>&nbsp;<span class="ident" id="5114072">New32</span><span class="op" id="5114077">(</span><span class="op" id="5114078">)</span>&nbsp;<span class="ident" id="5114080">hash</span><span class="op" id="5114084">.</span><span class="ident" id="5114085">Hash32</span>&nbsp;<span class="op" id="5114092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114095">var</span>&nbsp;<span class="ident" id="5114099">s</span>&nbsp;<span class="ident" id="5114101">sum32</span>&nbsp;<span class="op" id="5114107">=</span>&nbsp;<span class="ident" id="5114109">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114119">return</span>&nbsp;<span class="op" id="5114126">&amp;</span><span class="ident" id="5114127">s</span><br>
<span class="lineno"></span><span class="op" id="5114129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5114132">//&nbsp;New32a&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="5114181">func</span>&nbsp;<span class="ident" id="5114186">New32a</span><span class="op" id="5114192">(</span><span class="op" id="5114193">)</span>&nbsp;<span class="ident" id="5114195">hash</span><span class="op" id="5114199">.</span><span class="ident" id="5114200">Hash32</span>&nbsp;<span class="op" id="5114207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114210">var</span>&nbsp;<span class="ident" id="5114214">s</span>&nbsp;<span class="ident" id="5114216">sum32a</span>&nbsp;<span class="op" id="5114223">=</span>&nbsp;<span class="ident" id="5114225">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114235">return</span>&nbsp;<span class="op" id="5114242">&amp;</span><span class="ident" id="5114243">s</span><br>
<span class="lineno"></span><span class="op" id="5114245">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="5114248">//&nbsp;New64&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="5114295">func</span>&nbsp;<span class="ident" id="5114300">New64</span><span class="op" id="5114305">(</span><span class="op" id="5114306">)</span>&nbsp;<span class="ident" id="5114308">hash</span><span class="op" id="5114312">.</span><span class="ident" id="5114313">Hash64</span>&nbsp;<span class="op" id="5114320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114323">var</span>&nbsp;<span class="ident" id="5114327">s</span>&nbsp;<span class="ident" id="5114329">sum64</span>&nbsp;<span class="op" id="5114335">=</span>&nbsp;<span class="ident" id="5114337">offset64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114347">return</span>&nbsp;<span class="op" id="5114354">&amp;</span><span class="ident" id="5114355">s</span><br>
<span class="lineno">45</span><span class="op" id="5114357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5114360">//&nbsp;New64a&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="5114409">func</span>&nbsp;<span class="ident" id="5114414">New64a</span><span class="op" id="5114420">(</span><span class="op" id="5114421">)</span>&nbsp;<span class="ident" id="5114423">hash</span><span class="op" id="5114427">.</span><span class="ident" id="5114428">Hash64</span>&nbsp;<span class="op" id="5114435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114438">var</span>&nbsp;<span class="ident" id="5114442">s</span>&nbsp;<span class="ident" id="5114444">sum64a</span>&nbsp;<span class="op" id="5114451">=</span>&nbsp;<span class="ident" id="5114453">offset64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114463">return</span>&nbsp;<span class="op" id="5114470">&amp;</span><span class="ident" id="5114471">s</span><br>
<span class="lineno"></span><span class="op" id="5114473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5114476">func</span>&nbsp;<span class="op" id="5114481">(</span><span class="ident" id="5114482">s</span>&nbsp;<span class="op" id="5114484">*</span><span class="ident" id="5114485">sum32</span><span class="op" id="5114490">)</span>&nbsp;<span class="ident" id="5114492">Reset</span><span class="op" id="5114497">(</span><span class="op" id="5114498">)</span>&nbsp;&nbsp;<span class="op" id="5114501">{</span>&nbsp;<span class="op" id="5114503">*</span><span class="ident" id="5114504">s</span>&nbsp;<span class="op" id="5114506">=</span>&nbsp;<span class="ident" id="5114508">offset32</span>&nbsp;<span class="op" id="5114517">}</span><br>
<span class="lineno"></span><span class="keyword" id="5114519">func</span>&nbsp;<span class="op" id="5114524">(</span><span class="ident" id="5114525">s</span>&nbsp;<span class="op" id="5114527">*</span><span class="ident" id="5114528">sum32a</span><span class="op" id="5114534">)</span>&nbsp;<span class="ident" id="5114536">Reset</span><span class="op" id="5114541">(</span><span class="op" id="5114542">)</span>&nbsp;<span class="op" id="5114544">{</span>&nbsp;<span class="op" id="5114546">*</span><span class="ident" id="5114547">s</span>&nbsp;<span class="op" id="5114549">=</span>&nbsp;<span class="ident" id="5114551">offset32</span>&nbsp;<span class="op" id="5114560">}</span><br>
<span class="lineno">55</span><span class="keyword" id="5114562">func</span>&nbsp;<span class="op" id="5114567">(</span><span class="ident" id="5114568">s</span>&nbsp;<span class="op" id="5114570">*</span><span class="ident" id="5114571">sum64</span><span class="op" id="5114576">)</span>&nbsp;<span class="ident" id="5114578">Reset</span><span class="op" id="5114583">(</span><span class="op" id="5114584">)</span>&nbsp;&nbsp;<span class="op" id="5114587">{</span>&nbsp;<span class="op" id="5114589">*</span><span class="ident" id="5114590">s</span>&nbsp;<span class="op" id="5114592">=</span>&nbsp;<span class="ident" id="5114594">offset64</span>&nbsp;<span class="op" id="5114603">}</span><br>
<span class="lineno"></span><span class="keyword" id="5114605">func</span>&nbsp;<span class="op" id="5114610">(</span><span class="ident" id="5114611">s</span>&nbsp;<span class="op" id="5114613">*</span><span class="ident" id="5114614">sum64a</span><span class="op" id="5114620">)</span>&nbsp;<span class="ident" id="5114622">Reset</span><span class="op" id="5114627">(</span><span class="op" id="5114628">)</span>&nbsp;<span class="op" id="5114630">{</span>&nbsp;<span class="op" id="5114632">*</span><span class="ident" id="5114633">s</span>&nbsp;<span class="op" id="5114635">=</span>&nbsp;<span class="ident" id="5114637">offset64</span>&nbsp;<span class="op" id="5114646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5114649">func</span>&nbsp;<span class="op" id="5114654">(</span><span class="ident" id="5114655">s</span>&nbsp;<span class="op" id="5114657">*</span><span class="ident" id="5114658">sum32</span><span class="op" id="5114663">)</span>&nbsp;<span class="ident" id="5114665">Sum32</span><span class="op" id="5114670">(</span><span class="op" id="5114671">)</span>&nbsp;<span class="builtintype" id="5114673">uint32</span>&nbsp;&nbsp;<span class="op" id="5114681">{</span>&nbsp;<span class="keyword" id="5114683">return</span>&nbsp;<span class="builtintype" id="5114690">uint32</span><span class="op" id="5114696">(</span><span class="op" id="5114697">*</span><span class="ident" id="5114698">s</span><span class="op" id="5114699">)</span>&nbsp;<span class="op" id="5114701">}</span><br>
<span class="lineno"></span><span class="keyword" id="5114703">func</span>&nbsp;<span class="op" id="5114708">(</span><span class="ident" id="5114709">s</span>&nbsp;<span class="op" id="5114711">*</span><span class="ident" id="5114712">sum32a</span><span class="op" id="5114718">)</span>&nbsp;<span class="ident" id="5114720">Sum32</span><span class="op" id="5114725">(</span><span class="op" id="5114726">)</span>&nbsp;<span class="builtintype" id="5114728">uint32</span>&nbsp;<span class="op" id="5114735">{</span>&nbsp;<span class="keyword" id="5114737">return</span>&nbsp;<span class="builtintype" id="5114744">uint32</span><span class="op" id="5114750">(</span><span class="op" id="5114751">*</span><span class="ident" id="5114752">s</span><span class="op" id="5114753">)</span>&nbsp;<span class="op" id="5114755">}</span><br>
<span class="lineno">60</span><span class="keyword" id="5114757">func</span>&nbsp;<span class="op" id="5114762">(</span><span class="ident" id="5114763">s</span>&nbsp;<span class="op" id="5114765">*</span><span class="ident" id="5114766">sum64</span><span class="op" id="5114771">)</span>&nbsp;<span class="ident" id="5114773">Sum64</span><span class="op" id="5114778">(</span><span class="op" id="5114779">)</span>&nbsp;<span class="ident" id="5114781">uint64</span>&nbsp;&nbsp;<span class="op" id="5114789">{</span>&nbsp;<span class="keyword" id="5114791">return</span>&nbsp;<span class="ident" id="5114798">uint64</span><span class="op" id="5114804">(</span><span class="op" id="5114805">*</span><span class="ident" id="5114806">s</span><span class="op" id="5114807">)</span>&nbsp;<span class="op" id="5114809">}</span><br>
<span class="lineno"></span><span class="keyword" id="5114811">func</span>&nbsp;<span class="op" id="5114816">(</span><span class="ident" id="5114817">s</span>&nbsp;<span class="op" id="5114819">*</span><span class="ident" id="5114820">sum64a</span><span class="op" id="5114826">)</span>&nbsp;<span class="ident" id="5114828">Sum64</span><span class="op" id="5114833">(</span><span class="op" id="5114834">)</span>&nbsp;<span class="ident" id="5114836">uint64</span>&nbsp;<span class="op" id="5114843">{</span>&nbsp;<span class="keyword" id="5114845">return</span>&nbsp;<span class="ident" id="5114852">uint64</span><span class="op" id="5114858">(</span><span class="op" id="5114859">*</span><span class="ident" id="5114860">s</span><span class="op" id="5114861">)</span>&nbsp;<span class="op" id="5114863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5114866">func</span>&nbsp;<span class="op" id="5114871">(</span><span class="ident" id="5114872">s</span>&nbsp;<span class="op" id="5114874">*</span><span class="ident" id="5114875">sum32</span><span class="op" id="5114880">)</span>&nbsp;<span class="ident" id="5114882">Write</span><span class="op" id="5114887">(</span><span class="ident" id="5114888">data</span>&nbsp;<span class="op" id="5114893">[</span><span class="op" id="5114894">]</span><span class="builtintype" id="5114895">byte</span><span class="op" id="5114899">)</span>&nbsp;<span class="op" id="5114901">(</span><span class="builtintype" id="5114902">int</span><span class="op" id="5114905">,</span>&nbsp;<span class="builtintype" id="5114907">error</span><span class="op" id="5114912">)</span>&nbsp;<span class="op" id="5114914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114917">hash</span>&nbsp;<span class="op" id="5114922">:=</span>&nbsp;<span class="op" id="5114925">*</span><span class="ident" id="5114926">s</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5114929">for</span>&nbsp;<span class="ident" id="5114933">_</span><span class="op" id="5114934">,</span>&nbsp;<span class="ident" id="5114936">c</span>&nbsp;<span class="op" id="5114938">:=</span>&nbsp;<span class="keyword" id="5114941">range</span>&nbsp;<span class="ident" id="5114947">data</span>&nbsp;<span class="op" id="5114952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114956">hash</span>&nbsp;<span class="op" id="5114961">*=</span>&nbsp;<span class="ident" id="5114964">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5114974">hash</span>&nbsp;<span class="op" id="5114979">^=</span>&nbsp;<span class="ident" id="5114982">sum32</span><span class="op" id="5114987">(</span><span class="ident" id="5114988">c</span><span class="op" id="5114989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5114992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5114995">*</span><span class="ident" id="5114996">s</span>&nbsp;<span class="op" id="5114998">=</span>&nbsp;<span class="ident" id="5115000">hash</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115006">return</span>&nbsp;<span class="builtinfunc" id="5115013">len</span><span class="op" id="5115016">(</span><span class="ident" id="5115017">data</span><span class="op" id="5115021">)</span><span class="op" id="5115022">,</span>&nbsp;<span class="ident" id="5115024">nil</span><br>
<span class="lineno"></span><span class="op" id="5115028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5115031">func</span>&nbsp;<span class="op" id="5115036">(</span><span class="ident" id="5115037">s</span>&nbsp;<span class="op" id="5115039">*</span><span class="ident" id="5115040">sum32a</span><span class="op" id="5115046">)</span>&nbsp;<span class="ident" id="5115048">Write</span><span class="op" id="5115053">(</span><span class="ident" id="5115054">data</span>&nbsp;<span class="op" id="5115059">[</span><span class="op" id="5115060">]</span><span class="builtintype" id="5115061">byte</span><span class="op" id="5115065">)</span>&nbsp;<span class="op" id="5115067">(</span><span class="builtintype" id="5115068">int</span><span class="op" id="5115071">,</span>&nbsp;<span class="builtintype" id="5115073">error</span><span class="op" id="5115078">)</span>&nbsp;<span class="op" id="5115080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115083">hash</span>&nbsp;<span class="op" id="5115088">:=</span>&nbsp;<span class="op" id="5115091">*</span><span class="ident" id="5115092">s</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115095">for</span>&nbsp;<span class="ident" id="5115099">_</span><span class="op" id="5115100">,</span>&nbsp;<span class="ident" id="5115102">c</span>&nbsp;<span class="op" id="5115104">:=</span>&nbsp;<span class="keyword" id="5115107">range</span>&nbsp;<span class="ident" id="5115113">data</span>&nbsp;<span class="op" id="5115118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115122">hash</span>&nbsp;<span class="op" id="5115127">^=</span>&nbsp;<span class="ident" id="5115130">sum32a</span><span class="op" id="5115136">(</span><span class="ident" id="5115137">c</span><span class="op" id="5115138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115142">hash</span>&nbsp;<span class="op" id="5115147">*=</span>&nbsp;<span class="ident" id="5115150">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5115159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5115162">*</span><span class="ident" id="5115163">s</span>&nbsp;<span class="op" id="5115165">=</span>&nbsp;<span class="ident" id="5115167">hash</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115173">return</span>&nbsp;<span class="builtinfunc" id="5115180">len</span><span class="op" id="5115183">(</span><span class="ident" id="5115184">data</span><span class="op" id="5115188">)</span><span class="op" id="5115189">,</span>&nbsp;<span class="ident" id="5115191">nil</span><br>
<span class="lineno"></span><span class="op" id="5115195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5115198">func</span>&nbsp;<span class="op" id="5115203">(</span><span class="ident" id="5115204">s</span>&nbsp;<span class="op" id="5115206">*</span><span class="ident" id="5115207">sum64</span><span class="op" id="5115212">)</span>&nbsp;<span class="ident" id="5115214">Write</span><span class="op" id="5115219">(</span><span class="ident" id="5115220">data</span>&nbsp;<span class="op" id="5115225">[</span><span class="op" id="5115226">]</span><span class="builtintype" id="5115227">byte</span><span class="op" id="5115231">)</span>&nbsp;<span class="op" id="5115233">(</span><span class="builtintype" id="5115234">int</span><span class="op" id="5115237">,</span>&nbsp;<span class="builtintype" id="5115239">error</span><span class="op" id="5115244">)</span>&nbsp;<span class="op" id="5115246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115249">hash</span>&nbsp;<span class="op" id="5115254">:=</span>&nbsp;<span class="op" id="5115257">*</span><span class="ident" id="5115258">s</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115261">for</span>&nbsp;<span class="ident" id="5115265">_</span><span class="op" id="5115266">,</span>&nbsp;<span class="ident" id="5115268">c</span>&nbsp;<span class="op" id="5115270">:=</span>&nbsp;<span class="keyword" id="5115273">range</span>&nbsp;<span class="ident" id="5115279">data</span>&nbsp;<span class="op" id="5115284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115288">hash</span>&nbsp;<span class="op" id="5115293">*=</span>&nbsp;<span class="ident" id="5115296">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115306">hash</span>&nbsp;<span class="op" id="5115311">^=</span>&nbsp;<span class="ident" id="5115314">sum64</span><span class="op" id="5115319">(</span><span class="ident" id="5115320">c</span><span class="op" id="5115321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5115324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5115327">*</span><span class="ident" id="5115328">s</span>&nbsp;<span class="op" id="5115330">=</span>&nbsp;<span class="ident" id="5115332">hash</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115338">return</span>&nbsp;<span class="builtinfunc" id="5115345">len</span><span class="op" id="5115348">(</span><span class="ident" id="5115349">data</span><span class="op" id="5115353">)</span><span class="op" id="5115354">,</span>&nbsp;<span class="ident" id="5115356">nil</span><br>
<span class="lineno"></span><span class="op" id="5115360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5115363">func</span>&nbsp;<span class="op" id="5115368">(</span><span class="ident" id="5115369">s</span>&nbsp;<span class="op" id="5115371">*</span><span class="ident" id="5115372">sum64a</span><span class="op" id="5115378">)</span>&nbsp;<span class="ident" id="5115380">Write</span><span class="op" id="5115385">(</span><span class="ident" id="5115386">data</span>&nbsp;<span class="op" id="5115391">[</span><span class="op" id="5115392">]</span><span class="builtintype" id="5115393">byte</span><span class="op" id="5115397">)</span>&nbsp;<span class="op" id="5115399">(</span><span class="builtintype" id="5115400">int</span><span class="op" id="5115403">,</span>&nbsp;<span class="builtintype" id="5115405">error</span><span class="op" id="5115410">)</span>&nbsp;<span class="op" id="5115412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115415">hash</span>&nbsp;<span class="op" id="5115420">:=</span>&nbsp;<span class="op" id="5115423">*</span><span class="ident" id="5115424">s</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115427">for</span>&nbsp;<span class="ident" id="5115431">_</span><span class="op" id="5115432">,</span>&nbsp;<span class="ident" id="5115434">c</span>&nbsp;<span class="op" id="5115436">:=</span>&nbsp;<span class="keyword" id="5115439">range</span>&nbsp;<span class="ident" id="5115445">data</span>&nbsp;<span class="op" id="5115450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115454">hash</span>&nbsp;<span class="op" id="5115459">^=</span>&nbsp;<span class="ident" id="5115462">sum64a</span><span class="op" id="5115468">(</span><span class="ident" id="5115469">c</span><span class="op" id="5115470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115474">hash</span>&nbsp;<span class="op" id="5115479">*=</span>&nbsp;<span class="ident" id="5115482">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5115491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5115494">*</span><span class="ident" id="5115495">s</span>&nbsp;<span class="op" id="5115497">=</span>&nbsp;<span class="ident" id="5115499">hash</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115505">return</span>&nbsp;<span class="builtinfunc" id="5115512">len</span><span class="op" id="5115515">(</span><span class="ident" id="5115516">data</span><span class="op" id="5115520">)</span><span class="op" id="5115521">,</span>&nbsp;<span class="ident" id="5115523">nil</span><br>
<span class="lineno"></span><span class="op" id="5115527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5115530">func</span>&nbsp;<span class="op" id="5115535">(</span><span class="ident" id="5115536">s</span>&nbsp;<span class="op" id="5115538">*</span><span class="ident" id="5115539">sum32</span><span class="op" id="5115544">)</span>&nbsp;<span class="ident" id="5115546">Size</span><span class="op" id="5115550">(</span><span class="op" id="5115551">)</span>&nbsp;<span class="builtintype" id="5115553">int</span>&nbsp;&nbsp;<span class="op" id="5115558">{</span>&nbsp;<span class="keyword" id="5115560">return</span>&nbsp;<span class="num" id="5115567">4</span>&nbsp;<span class="op" id="5115569">}</span><br>
<span class="lineno"></span><span class="keyword" id="5115571">func</span>&nbsp;<span class="op" id="5115576">(</span><span class="ident" id="5115577">s</span>&nbsp;<span class="op" id="5115579">*</span><span class="ident" id="5115580">sum32a</span><span class="op" id="5115586">)</span>&nbsp;<span class="ident" id="5115588">Size</span><span class="op" id="5115592">(</span><span class="op" id="5115593">)</span>&nbsp;<span class="builtintype" id="5115595">int</span>&nbsp;<span class="op" id="5115599">{</span>&nbsp;<span class="keyword" id="5115601">return</span>&nbsp;<span class="num" id="5115608">4</span>&nbsp;<span class="op" id="5115610">}</span><br>
<span class="lineno">105</span><span class="keyword" id="5115612">func</span>&nbsp;<span class="op" id="5115617">(</span><span class="ident" id="5115618">s</span>&nbsp;<span class="op" id="5115620">*</span><span class="ident" id="5115621">sum64</span><span class="op" id="5115626">)</span>&nbsp;<span class="ident" id="5115628">Size</span><span class="op" id="5115632">(</span><span class="op" id="5115633">)</span>&nbsp;<span class="builtintype" id="5115635">int</span>&nbsp;&nbsp;<span class="op" id="5115640">{</span>&nbsp;<span class="keyword" id="5115642">return</span>&nbsp;<span class="num" id="5115649">8</span>&nbsp;<span class="op" id="5115651">}</span><br>
<span class="lineno"></span><span class="keyword" id="5115653">func</span>&nbsp;<span class="op" id="5115658">(</span><span class="ident" id="5115659">s</span>&nbsp;<span class="op" id="5115661">*</span><span class="ident" id="5115662">sum64a</span><span class="op" id="5115668">)</span>&nbsp;<span class="ident" id="5115670">Size</span><span class="op" id="5115674">(</span><span class="op" id="5115675">)</span>&nbsp;<span class="builtintype" id="5115677">int</span>&nbsp;<span class="op" id="5115681">{</span>&nbsp;<span class="keyword" id="5115683">return</span>&nbsp;<span class="num" id="5115690">8</span>&nbsp;<span class="op" id="5115692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5115695">func</span>&nbsp;<span class="op" id="5115700">(</span><span class="ident" id="5115701">s</span>&nbsp;<span class="op" id="5115703">*</span><span class="ident" id="5115704">sum32</span><span class="op" id="5115709">)</span>&nbsp;<span class="ident" id="5115711">BlockSize</span><span class="op" id="5115720">(</span><span class="op" id="5115721">)</span>&nbsp;<span class="builtintype" id="5115723">int</span>&nbsp;&nbsp;<span class="op" id="5115728">{</span>&nbsp;<span class="keyword" id="5115730">return</span>&nbsp;<span class="num" id="5115737">1</span>&nbsp;<span class="op" id="5115739">}</span><br>
<span class="lineno"></span><span class="keyword" id="5115741">func</span>&nbsp;<span class="op" id="5115746">(</span><span class="ident" id="5115747">s</span>&nbsp;<span class="op" id="5115749">*</span><span class="ident" id="5115750">sum32a</span><span class="op" id="5115756">)</span>&nbsp;<span class="ident" id="5115758">BlockSize</span><span class="op" id="5115767">(</span><span class="op" id="5115768">)</span>&nbsp;<span class="builtintype" id="5115770">int</span>&nbsp;<span class="op" id="5115774">{</span>&nbsp;<span class="keyword" id="5115776">return</span>&nbsp;<span class="num" id="5115783">1</span>&nbsp;<span class="op" id="5115785">}</span><br>
<span class="lineno">110</span><span class="keyword" id="5115787">func</span>&nbsp;<span class="op" id="5115792">(</span><span class="ident" id="5115793">s</span>&nbsp;<span class="op" id="5115795">*</span><span class="ident" id="5115796">sum64</span><span class="op" id="5115801">)</span>&nbsp;<span class="ident" id="5115803">BlockSize</span><span class="op" id="5115812">(</span><span class="op" id="5115813">)</span>&nbsp;<span class="builtintype" id="5115815">int</span>&nbsp;&nbsp;<span class="op" id="5115820">{</span>&nbsp;<span class="keyword" id="5115822">return</span>&nbsp;<span class="num" id="5115829">1</span>&nbsp;<span class="op" id="5115831">}</span><br>
<span class="lineno"></span><span class="keyword" id="5115833">func</span>&nbsp;<span class="op" id="5115838">(</span><span class="ident" id="5115839">s</span>&nbsp;<span class="op" id="5115841">*</span><span class="ident" id="5115842">sum64a</span><span class="op" id="5115848">)</span>&nbsp;<span class="ident" id="5115850">BlockSize</span><span class="op" id="5115859">(</span><span class="op" id="5115860">)</span>&nbsp;<span class="builtintype" id="5115862">int</span>&nbsp;<span class="op" id="5115866">{</span>&nbsp;<span class="keyword" id="5115868">return</span>&nbsp;<span class="num" id="5115875">1</span>&nbsp;<span class="op" id="5115877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5115880">func</span>&nbsp;<span class="op" id="5115885">(</span><span class="ident" id="5115886">s</span>&nbsp;<span class="op" id="5115888">*</span><span class="ident" id="5115889">sum32</span><span class="op" id="5115894">)</span>&nbsp;<span class="ident" id="5115896">Sum</span><span class="op" id="5115899">(</span><span class="ident" id="5115900">in</span>&nbsp;<span class="op" id="5115903">[</span><span class="op" id="5115904">]</span><span class="builtintype" id="5115905">byte</span><span class="op" id="5115909">)</span>&nbsp;<span class="op" id="5115911">[</span><span class="op" id="5115912">]</span><span class="builtintype" id="5115913">byte</span>&nbsp;<span class="op" id="5115918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5115921">v</span>&nbsp;<span class="op" id="5115923">:=</span>&nbsp;<span class="builtintype" id="5115926">uint32</span><span class="op" id="5115932">(</span><span class="op" id="5115933">*</span><span class="ident" id="5115934">s</span><span class="op" id="5115935">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5115938">return</span>&nbsp;<span class="builtinfunc" id="5115945">append</span><span class="op" id="5115951">(</span><span class="ident" id="5115952">in</span><span class="op" id="5115954">,</span>&nbsp;<span class="builtintype" id="5115956">byte</span><span class="op" id="5115960">(</span><span class="ident" id="5115961">v</span><span class="op" id="5115962">&gt;&gt;</span><span class="num" id="5115964">24</span><span class="op" id="5115966">)</span><span class="op" id="5115967">,</span>&nbsp;<span class="builtintype" id="5115969">byte</span><span class="op" id="5115973">(</span><span class="ident" id="5115974">v</span><span class="op" id="5115975">&gt;&gt;</span><span class="num" id="5115977">16</span><span class="op" id="5115979">)</span><span class="op" id="5115980">,</span>&nbsp;<span class="builtintype" id="5115982">byte</span><span class="op" id="5115986">(</span><span class="ident" id="5115987">v</span><span class="op" id="5115988">&gt;&gt;</span><span class="num" id="5115990">8</span><span class="op" id="5115991">)</span><span class="op" id="5115992">,</span>&nbsp;<span class="builtintype" id="5115994">byte</span><span class="op" id="5115998">(</span><span class="ident" id="5115999">v</span><span class="op" id="5116000">)</span><span class="op" id="5116001">)</span><br>
<span class="lineno"></span><span class="op" id="5116003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5116006">func</span>&nbsp;<span class="op" id="5116011">(</span><span class="ident" id="5116012">s</span>&nbsp;<span class="op" id="5116014">*</span><span class="ident" id="5116015">sum32a</span><span class="op" id="5116021">)</span>&nbsp;<span class="ident" id="5116023">Sum</span><span class="op" id="5116026">(</span><span class="ident" id="5116027">in</span>&nbsp;<span class="op" id="5116030">[</span><span class="op" id="5116031">]</span><span class="builtintype" id="5116032">byte</span><span class="op" id="5116036">)</span>&nbsp;<span class="op" id="5116038">[</span><span class="op" id="5116039">]</span><span class="builtintype" id="5116040">byte</span>&nbsp;<span class="op" id="5116045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116048">v</span>&nbsp;<span class="op" id="5116050">:=</span>&nbsp;<span class="builtintype" id="5116053">uint32</span><span class="op" id="5116059">(</span><span class="op" id="5116060">*</span><span class="ident" id="5116061">s</span><span class="op" id="5116062">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116065">return</span>&nbsp;<span class="builtinfunc" id="5116072">append</span><span class="op" id="5116078">(</span><span class="ident" id="5116079">in</span><span class="op" id="5116081">,</span>&nbsp;<span class="builtintype" id="5116083">byte</span><span class="op" id="5116087">(</span><span class="ident" id="5116088">v</span><span class="op" id="5116089">&gt;&gt;</span><span class="num" id="5116091">24</span><span class="op" id="5116093">)</span><span class="op" id="5116094">,</span>&nbsp;<span class="builtintype" id="5116096">byte</span><span class="op" id="5116100">(</span><span class="ident" id="5116101">v</span><span class="op" id="5116102">&gt;&gt;</span><span class="num" id="5116104">16</span><span class="op" id="5116106">)</span><span class="op" id="5116107">,</span>&nbsp;<span class="builtintype" id="5116109">byte</span><span class="op" id="5116113">(</span><span class="ident" id="5116114">v</span><span class="op" id="5116115">&gt;&gt;</span><span class="num" id="5116117">8</span><span class="op" id="5116118">)</span><span class="op" id="5116119">,</span>&nbsp;<span class="builtintype" id="5116121">byte</span><span class="op" id="5116125">(</span><span class="ident" id="5116126">v</span><span class="op" id="5116127">)</span><span class="op" id="5116128">)</span><br>
<span class="lineno"></span><span class="op" id="5116130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5116133">func</span>&nbsp;<span class="op" id="5116138">(</span><span class="ident" id="5116139">s</span>&nbsp;<span class="op" id="5116141">*</span><span class="ident" id="5116142">sum64</span><span class="op" id="5116147">)</span>&nbsp;<span class="ident" id="5116149">Sum</span><span class="op" id="5116152">(</span><span class="ident" id="5116153">in</span>&nbsp;<span class="op" id="5116156">[</span><span class="op" id="5116157">]</span><span class="builtintype" id="5116158">byte</span><span class="op" id="5116162">)</span>&nbsp;<span class="op" id="5116164">[</span><span class="op" id="5116165">]</span><span class="builtintype" id="5116166">byte</span>&nbsp;<span class="op" id="5116171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116174">v</span>&nbsp;<span class="op" id="5116176">:=</span>&nbsp;<span class="ident" id="5116179">uint64</span><span class="op" id="5116185">(</span><span class="op" id="5116186">*</span><span class="ident" id="5116187">s</span><span class="op" id="5116188">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116191">return</span>&nbsp;<span class="builtinfunc" id="5116198">append</span><span class="op" id="5116204">(</span><span class="ident" id="5116205">in</span><span class="op" id="5116207">,</span>&nbsp;<span class="builtintype" id="5116209">byte</span><span class="op" id="5116213">(</span><span class="ident" id="5116214">v</span><span class="op" id="5116215">&gt;&gt;</span><span class="num" id="5116217">56</span><span class="op" id="5116219">)</span><span class="op" id="5116220">,</span>&nbsp;<span class="builtintype" id="5116222">byte</span><span class="op" id="5116226">(</span><span class="ident" id="5116227">v</span><span class="op" id="5116228">&gt;&gt;</span><span class="num" id="5116230">48</span><span class="op" id="5116232">)</span><span class="op" id="5116233">,</span>&nbsp;<span class="builtintype" id="5116235">byte</span><span class="op" id="5116239">(</span><span class="ident" id="5116240">v</span><span class="op" id="5116241">&gt;&gt;</span><span class="num" id="5116243">40</span><span class="op" id="5116245">)</span><span class="op" id="5116246">,</span>&nbsp;<span class="builtintype" id="5116248">byte</span><span class="op" id="5116252">(</span><span class="ident" id="5116253">v</span><span class="op" id="5116254">&gt;&gt;</span><span class="num" id="5116256">32</span><span class="op" id="5116258">)</span><span class="op" id="5116259">,</span>&nbsp;<span class="builtintype" id="5116261">byte</span><span class="op" id="5116265">(</span><span class="ident" id="5116266">v</span><span class="op" id="5116267">&gt;&gt;</span><span class="num" id="5116269">24</span><span class="op" id="5116271">)</span><span class="op" id="5116272">,</span>&nbsp;<span class="builtintype" id="5116274">byte</span><span class="op" id="5116278">(</span><span class="ident" id="5116279">v</span><span class="op" id="5116280">&gt;&gt;</span><span class="num" id="5116282">16</span><span class="op" id="5116284">)</span><span class="op" id="5116285">,</span>&nbsp;<span class="builtintype" id="5116287">byte</span><span class="op" id="5116291">(</span><span class="ident" id="5116292">v</span><span class="op" id="5116293">&gt;&gt;</span><span class="num" id="5116295">8</span><span class="op" id="5116296">)</span><span class="op" id="5116297">,</span>&nbsp;<span class="builtintype" id="5116299">byte</span><span class="op" id="5116303">(</span><span class="ident" id="5116304">v</span><span class="op" id="5116305">)</span><span class="op" id="5116306">)</span><br>
<span class="lineno"></span><span class="op" id="5116308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5116311">func</span>&nbsp;<span class="op" id="5116316">(</span><span class="ident" id="5116317">s</span>&nbsp;<span class="op" id="5116319">*</span><span class="ident" id="5116320">sum64a</span><span class="op" id="5116326">)</span>&nbsp;<span class="ident" id="5116328">Sum</span><span class="op" id="5116331">(</span><span class="ident" id="5116332">in</span>&nbsp;<span class="op" id="5116335">[</span><span class="op" id="5116336">]</span><span class="builtintype" id="5116337">byte</span><span class="op" id="5116341">)</span>&nbsp;<span class="op" id="5116343">[</span><span class="op" id="5116344">]</span><span class="builtintype" id="5116345">byte</span>&nbsp;<span class="op" id="5116350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5116353">v</span>&nbsp;<span class="op" id="5116355">:=</span>&nbsp;<span class="ident" id="5116358">uint64</span><span class="op" id="5116364">(</span><span class="op" id="5116365">*</span><span class="ident" id="5116366">s</span><span class="op" id="5116367">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5116370">return</span>&nbsp;<span class="builtinfunc" id="5116377">append</span><span class="op" id="5116383">(</span><span class="ident" id="5116384">in</span><span class="op" id="5116386">,</span>&nbsp;<span class="builtintype" id="5116388">byte</span><span class="op" id="5116392">(</span><span class="ident" id="5116393">v</span><span class="op" id="5116394">&gt;&gt;</span><span class="num" id="5116396">56</span><span class="op" id="5116398">)</span><span class="op" id="5116399">,</span>&nbsp;<span class="builtintype" id="5116401">byte</span><span class="op" id="5116405">(</span><span class="ident" id="5116406">v</span><span class="op" id="5116407">&gt;&gt;</span><span class="num" id="5116409">48</span><span class="op" id="5116411">)</span><span class="op" id="5116412">,</span>&nbsp;<span class="builtintype" id="5116414">byte</span><span class="op" id="5116418">(</span><span class="ident" id="5116419">v</span><span class="op" id="5116420">&gt;&gt;</span><span class="num" id="5116422">40</span><span class="op" id="5116424">)</span><span class="op" id="5116425">,</span>&nbsp;<span class="builtintype" id="5116427">byte</span><span class="op" id="5116431">(</span><span class="ident" id="5116432">v</span><span class="op" id="5116433">&gt;&gt;</span><span class="num" id="5116435">32</span><span class="op" id="5116437">)</span><span class="op" id="5116438">,</span>&nbsp;<span class="builtintype" id="5116440">byte</span><span class="op" id="5116444">(</span><span class="ident" id="5116445">v</span><span class="op" id="5116446">&gt;&gt;</span><span class="num" id="5116448">24</span><span class="op" id="5116450">)</span><span class="op" id="5116451">,</span>&nbsp;<span class="builtintype" id="5116453">byte</span><span class="op" id="5116457">(</span><span class="ident" id="5116458">v</span><span class="op" id="5116459">&gt;&gt;</span><span class="num" id="5116461">16</span><span class="op" id="5116463">)</span><span class="op" id="5116464">,</span>&nbsp;<span class="builtintype" id="5116466">byte</span><span class="op" id="5116470">(</span><span class="ident" id="5116471">v</span><span class="op" id="5116472">&gt;&gt;</span><span class="num" id="5116474">8</span><span class="op" id="5116475">)</span><span class="op" id="5116476">,</span>&nbsp;<span class="builtintype" id="5116478">byte</span><span class="op" id="5116482">(</span><span class="ident" id="5116483">v</span><span class="op" id="5116484">)</span><span class="op" id="5116485">)</span><br>
<span class="lineno"></span><span class="op" id="5116487">}</span>
</div>
</body>
</html>
