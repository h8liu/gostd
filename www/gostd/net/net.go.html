<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html" class="current">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3320311">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3320366">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3320420">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3320471">/*<br>
<span class="lineno"></span>Package&nbsp;net&nbsp;provides&nbsp;a&nbsp;portable&nbsp;interface&nbsp;for&nbsp;network&nbsp;I/O,&nbsp;including<br>
<span class="lineno"></span>TCP/IP,&nbsp;UDP,&nbsp;domain&nbsp;name&nbsp;resolution,&nbsp;and&nbsp;Unix&nbsp;domain&nbsp;sockets.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Although&nbsp;the&nbsp;package&nbsp;provides&nbsp;access&nbsp;to&nbsp;low-level&nbsp;networking<br>
<span class="lineno">10</span>primitives,&nbsp;most&nbsp;clients&nbsp;will&nbsp;need&nbsp;only&nbsp;the&nbsp;basic&nbsp;interface&nbsp;provided<br>
<span class="lineno"></span>by&nbsp;the&nbsp;Dial,&nbsp;Listen,&nbsp;and&nbsp;Accept&nbsp;functions&nbsp;and&nbsp;the&nbsp;associated<br>
<span class="lineno"></span>Conn&nbsp;and&nbsp;Listener&nbsp;interfaces.&nbsp;The&nbsp;crypto/tls&nbsp;package&nbsp;uses<br>
<span class="lineno"></span>the&nbsp;same&nbsp;interfaces&nbsp;and&nbsp;similar&nbsp;Dial&nbsp;and&nbsp;Listen&nbsp;functions.<br>
<span class="lineno"></span><br>
<span class="lineno">15</span>The&nbsp;Dial&nbsp;function&nbsp;connects&nbsp;to&nbsp;a&nbsp;server:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;conn,&nbsp;err&nbsp;:=&nbsp;net.Dial(&#34;tcp&#34;,&nbsp;&#34;google.com:80&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;handle&nbsp;error<br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Fprintf(conn,&nbsp;&#34;GET&nbsp;/&nbsp;HTTP/1.0\r\n\r\n&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;status,&nbsp;err&nbsp;:=&nbsp;bufio.NewReader(conn).ReadString(&#39;\n&#39;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br>
<span class="lineno"></span><br>
<span class="lineno">25</span>The&nbsp;Listen&nbsp;function&nbsp;creates&nbsp;servers:<br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;ln,&nbsp;err&nbsp;:=&nbsp;net.Listen(&#34;tcp&#34;,&nbsp;&#34;:8080&#34;)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;handle&nbsp;error<br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn,&nbsp;err&nbsp;:=&nbsp;ln.Accept()<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;handle&nbsp;error<br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;go&nbsp;handleConnection(conn)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span class="lineno"></span>*/</span><br>
<span class="lineno"></span><span class="keyword" id="3321374">package</span>&nbsp;<span class="ident" id="3321382">net</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="3321387">//&nbsp;TODO(rsc):</span><br>
<span class="lineno"></span><span class="comment" id="3321401">//&nbsp;&nbsp;&nbsp;&nbsp;support&nbsp;for&nbsp;raw&nbsp;ethernet&nbsp;sockets</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3321438">import</span>&nbsp;<span class="op" id="3321445">(</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3321448">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3321458">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3321464">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3321470">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3321481">&#34;time&#34;</span><br>
<span class="lineno">50</span><span class="op" id="3321488">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3321491">//&nbsp;Addr&nbsp;represents&nbsp;a&nbsp;network&nbsp;end&nbsp;point&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3321539">type</span>&nbsp;<span class="ident" id="3321544">Addr</span>&nbsp;<span class="keyword" id="3321549">interface</span>&nbsp;<span class="op" id="3321559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3321562">Network</span><span class="op" id="3321569">(</span><span class="op" id="3321570">)</span>&nbsp;<span class="builtintype" id="3321572">string</span>&nbsp;<span class="comment" id="3321579">//&nbsp;name&nbsp;of&nbsp;the&nbsp;network</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3321603">String</span><span class="op" id="3321609">(</span><span class="op" id="3321610">)</span>&nbsp;<span class="builtintype" id="3321612">string</span>&nbsp;&nbsp;<span class="comment" id="3321620">//&nbsp;string&nbsp;form&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span><span class="op" id="3321646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3321649">//&nbsp;Conn&nbsp;is&nbsp;a&nbsp;generic&nbsp;stream-oriented&nbsp;network&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="3321706">//</span><br>
<span class="lineno">60</span><span class="comment" id="3321709">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;Conn&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="3321777">type</span>&nbsp;<span class="ident" id="3321782">Conn</span>&nbsp;<span class="keyword" id="3321787">interface</span>&nbsp;<span class="op" id="3321797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3321800">//&nbsp;Read&nbsp;reads&nbsp;data&nbsp;from&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3321841">//&nbsp;Read&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;a&nbsp;Error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3321916">//&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetReadDeadline.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3321983">Read</span><span class="op" id="3321987">(</span><span class="ident" id="3321988">b</span>&nbsp;<span class="op" id="3321990">[</span><span class="op" id="3321991">]</span><span class="builtintype" id="3321992">byte</span><span class="op" id="3321996">)</span>&nbsp;<span class="op" id="3321998">(</span><span class="ident" id="3321999">n</span>&nbsp;<span class="builtintype" id="3322001">int</span><span class="op" id="3322004">,</span>&nbsp;<span class="ident" id="3322006">err</span>&nbsp;<span class="builtintype" id="3322010">error</span><span class="op" id="3322015">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322019">//&nbsp;Write&nbsp;writes&nbsp;data&nbsp;to&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322060">//&nbsp;Write&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return&nbsp;a&nbsp;Error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322136">//&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3322204">Write</span><span class="op" id="3322209">(</span><span class="ident" id="3322210">b</span>&nbsp;<span class="op" id="3322212">[</span><span class="op" id="3322213">]</span><span class="builtintype" id="3322214">byte</span><span class="op" id="3322218">)</span>&nbsp;<span class="op" id="3322220">(</span><span class="ident" id="3322221">n</span>&nbsp;<span class="builtintype" id="3322223">int</span><span class="op" id="3322226">,</span>&nbsp;<span class="ident" id="3322228">err</span>&nbsp;<span class="builtintype" id="3322232">error</span><span class="op" id="3322237">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322241">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322274">//&nbsp;Any&nbsp;blocked&nbsp;Read&nbsp;or&nbsp;Write&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3322352">Close</span><span class="op" id="3322357">(</span><span class="op" id="3322358">)</span>&nbsp;<span class="builtintype" id="3322360">error</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322368">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3322417">LocalAddr</span><span class="op" id="3322426">(</span><span class="op" id="3322427">)</span>&nbsp;<span class="ident" id="3322429">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322436">//&nbsp;RemoteAddr&nbsp;returns&nbsp;the&nbsp;remote&nbsp;network&nbsp;address.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3322487">RemoteAddr</span><span class="op" id="3322497">(</span><span class="op" id="3322498">)</span>&nbsp;<span class="ident" id="3322500">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322507">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;read&nbsp;and&nbsp;write&nbsp;deadlines&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322568">//&nbsp;with&nbsp;the&nbsp;connection.&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;calling&nbsp;both</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322626">//&nbsp;SetReadDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322668">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322672">//&nbsp;A&nbsp;deadline&nbsp;is&nbsp;an&nbsp;absolute&nbsp;time&nbsp;after&nbsp;which&nbsp;I/O&nbsp;operations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322734">//&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322786">//&nbsp;blocking.&nbsp;The&nbsp;deadline&nbsp;applies&nbsp;to&nbsp;all&nbsp;future&nbsp;I/O,&nbsp;not&nbsp;just</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322849">//&nbsp;the&nbsp;immediately&nbsp;following&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;Write.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322902">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322906">//&nbsp;An&nbsp;idle&nbsp;timeout&nbsp;can&nbsp;be&nbsp;implemented&nbsp;by&nbsp;repeatedly&nbsp;extending</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322969">//&nbsp;the&nbsp;deadline&nbsp;after&nbsp;successful&nbsp;Read&nbsp;or&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323024">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323028">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;I/O&nbsp;operations&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323091">SetDeadline</span><span class="op" id="3323102">(</span><span class="ident" id="3323103">t</span>&nbsp;<span class="ident" id="3323105">time</span><span class="op" id="3323109">.</span><span class="ident" id="3323110">Time</span><span class="op" id="3323114">)</span>&nbsp;<span class="builtintype" id="3323116">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323124">//&nbsp;SetReadDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323185">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Read&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323238">SetReadDeadline</span><span class="op" id="3323253">(</span><span class="ident" id="3323254">t</span>&nbsp;<span class="ident" id="3323256">time</span><span class="op" id="3323260">.</span><span class="ident" id="3323261">Time</span><span class="op" id="3323265">)</span>&nbsp;<span class="builtintype" id="3323267">error</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323275">//&nbsp;SetWriteDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323338">//&nbsp;Even&nbsp;if&nbsp;write&nbsp;times&nbsp;out,&nbsp;it&nbsp;may&nbsp;return&nbsp;n&nbsp;&gt;&nbsp;0,&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323404">//&nbsp;some&nbsp;of&nbsp;the&nbsp;data&nbsp;was&nbsp;successfully&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323451">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Write&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323505">SetWriteDeadline</span><span class="op" id="3323521">(</span><span class="ident" id="3323522">t</span>&nbsp;<span class="ident" id="3323524">time</span><span class="op" id="3323528">.</span><span class="ident" id="3323529">Time</span><span class="op" id="3323533">)</span>&nbsp;<span class="builtintype" id="3323535">error</span><br>
<span class="lineno"></span><span class="op" id="3323541">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3323544">type</span>&nbsp;<span class="ident" id="3323549">conn</span>&nbsp;<span class="keyword" id="3323554">struct</span>&nbsp;<span class="op" id="3323561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323564">fd</span>&nbsp;<span class="op" id="3323567">*</span><span class="ident" id="3323568">netFD</span><br>
<span class="lineno">110</span><span class="op" id="3323574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3323577">func</span>&nbsp;<span class="op" id="3323582">(</span><span class="ident" id="3323583">c</span>&nbsp;<span class="op" id="3323585">*</span><span class="ident" id="3323586">conn</span><span class="op" id="3323590">)</span>&nbsp;<span class="ident" id="3323592">ok</span><span class="op" id="3323594">(</span><span class="op" id="3323595">)</span>&nbsp;<span class="builtintype" id="3323597">bool</span>&nbsp;<span class="op" id="3323602">{</span>&nbsp;<span class="keyword" id="3323604">return</span>&nbsp;<span class="ident" id="3323611">c</span>&nbsp;<span class="op" id="3323613">!=</span>&nbsp;<span class="builtintype" id="3323616">nil</span>&nbsp;<span class="op" id="3323620">&amp;&amp;</span>&nbsp;<span class="ident" id="3323623">c</span><span class="op" id="3323624">.</span><span class="ident" id="3323625">fd</span>&nbsp;<span class="op" id="3323628">!=</span>&nbsp;<span class="builtintype" id="3323631">nil</span>&nbsp;<span class="op" id="3323635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3323638">//&nbsp;Implementation&nbsp;of&nbsp;the&nbsp;Conn&nbsp;interface.</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3323680">//&nbsp;Read&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;Read&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3323721">func</span>&nbsp;<span class="op" id="3323726">(</span><span class="ident" id="3323727">c</span>&nbsp;<span class="op" id="3323729">*</span><span class="ident" id="3323730">conn</span><span class="op" id="3323734">)</span>&nbsp;<span class="ident" id="3323736">Read</span><span class="op" id="3323740">(</span><span class="ident" id="3323741">b</span>&nbsp;<span class="op" id="3323743">[</span><span class="op" id="3323744">]</span><span class="builtintype" id="3323745">byte</span><span class="op" id="3323749">)</span>&nbsp;<span class="op" id="3323751">(</span><span class="builtintype" id="3323752">int</span><span class="op" id="3323755">,</span>&nbsp;<span class="builtintype" id="3323757">error</span><span class="op" id="3323762">)</span>&nbsp;<span class="op" id="3323764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323767">if</span>&nbsp;<span class="op" id="3323770">!</span><span class="ident" id="3323771">c</span><span class="op" id="3323772">.</span><span class="ident" id="3323773">ok</span><span class="op" id="3323775">(</span><span class="op" id="3323776">)</span>&nbsp;<span class="op" id="3323778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323782">return</span>&nbsp;<span class="num" id="3323789">0</span><span class="op" id="3323790">,</span>&nbsp;<span class="ident" id="3323792">syscall</span><span class="op" id="3323799">.</span><span class="ident" id="3323800">EINVAL</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3323808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323811">return</span>&nbsp;<span class="ident" id="3323818">c</span><span class="op" id="3323819">.</span><span class="ident" id="3323820">fd</span><span class="op" id="3323822">.</span><span class="ident" id="3323823">Read</span><span class="op" id="3323827">(</span><span class="ident" id="3323828">b</span><span class="op" id="3323829">)</span><br>
<span class="lineno"></span><span class="op" id="3323831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3323834">//&nbsp;Write&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;Write&nbsp;method.</span><br>
<span class="lineno">125</span><span class="keyword" id="3323877">func</span>&nbsp;<span class="op" id="3323882">(</span><span class="ident" id="3323883">c</span>&nbsp;<span class="op" id="3323885">*</span><span class="ident" id="3323886">conn</span><span class="op" id="3323890">)</span>&nbsp;<span class="ident" id="3323892">Write</span><span class="op" id="3323897">(</span><span class="ident" id="3323898">b</span>&nbsp;<span class="op" id="3323900">[</span><span class="op" id="3323901">]</span><span class="builtintype" id="3323902">byte</span><span class="op" id="3323906">)</span>&nbsp;<span class="op" id="3323908">(</span><span class="builtintype" id="3323909">int</span><span class="op" id="3323912">,</span>&nbsp;<span class="builtintype" id="3323914">error</span><span class="op" id="3323919">)</span>&nbsp;<span class="op" id="3323921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323924">if</span>&nbsp;<span class="op" id="3323927">!</span><span class="ident" id="3323928">c</span><span class="op" id="3323929">.</span><span class="ident" id="3323930">ok</span><span class="op" id="3323932">(</span><span class="op" id="3323933">)</span>&nbsp;<span class="op" id="3323935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323939">return</span>&nbsp;<span class="num" id="3323946">0</span><span class="op" id="3323947">,</span>&nbsp;<span class="ident" id="3323949">syscall</span><span class="op" id="3323956">.</span><span class="ident" id="3323957">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3323965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323968">return</span>&nbsp;<span class="ident" id="3323975">c</span><span class="op" id="3323976">.</span><span class="ident" id="3323977">fd</span><span class="op" id="3323979">.</span><span class="ident" id="3323980">Write</span><span class="op" id="3323985">(</span><span class="ident" id="3323986">b</span><span class="op" id="3323987">)</span><br>
<span class="lineno">130</span><span class="op" id="3323989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3323992">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3324024">func</span>&nbsp;<span class="op" id="3324029">(</span><span class="ident" id="3324030">c</span>&nbsp;<span class="op" id="3324032">*</span><span class="ident" id="3324033">conn</span><span class="op" id="3324037">)</span>&nbsp;<span class="ident" id="3324039">Close</span><span class="op" id="3324044">(</span><span class="op" id="3324045">)</span>&nbsp;<span class="builtintype" id="3324047">error</span>&nbsp;<span class="op" id="3324053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324056">if</span>&nbsp;<span class="op" id="3324059">!</span><span class="ident" id="3324060">c</span><span class="op" id="3324061">.</span><span class="ident" id="3324062">ok</span><span class="op" id="3324064">(</span><span class="op" id="3324065">)</span>&nbsp;<span class="op" id="3324067">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324071">return</span>&nbsp;<span class="ident" id="3324078">syscall</span><span class="op" id="3324085">.</span><span class="ident" id="3324086">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3324094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324097">return</span>&nbsp;<span class="ident" id="3324104">c</span><span class="op" id="3324105">.</span><span class="ident" id="3324106">fd</span><span class="op" id="3324108">.</span><span class="ident" id="3324109">Close</span><span class="op" id="3324114">(</span><span class="op" id="3324115">)</span><br>
<span class="lineno"></span><span class="op" id="3324117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="3324120">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3324168">func</span>&nbsp;<span class="op" id="3324173">(</span><span class="ident" id="3324174">c</span>&nbsp;<span class="op" id="3324176">*</span><span class="ident" id="3324177">conn</span><span class="op" id="3324181">)</span>&nbsp;<span class="ident" id="3324183">LocalAddr</span><span class="op" id="3324192">(</span><span class="op" id="3324193">)</span>&nbsp;<span class="ident" id="3324195">Addr</span>&nbsp;<span class="op" id="3324200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324203">if</span>&nbsp;<span class="op" id="3324206">!</span><span class="ident" id="3324207">c</span><span class="op" id="3324208">.</span><span class="ident" id="3324209">ok</span><span class="op" id="3324211">(</span><span class="op" id="3324212">)</span>&nbsp;<span class="op" id="3324214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324218">return</span>&nbsp;<span class="builtintype" id="3324225">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3324230">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324233">return</span>&nbsp;<span class="ident" id="3324240">c</span><span class="op" id="3324241">.</span><span class="ident" id="3324242">fd</span><span class="op" id="3324244">.</span><span class="ident" id="3324245">laddr</span><br>
<span class="lineno"></span><span class="op" id="3324251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3324254">//&nbsp;RemoteAddr&nbsp;returns&nbsp;the&nbsp;remote&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="3324304">func</span>&nbsp;<span class="op" id="3324309">(</span><span class="ident" id="3324310">c</span>&nbsp;<span class="op" id="3324312">*</span><span class="ident" id="3324313">conn</span><span class="op" id="3324317">)</span>&nbsp;<span class="ident" id="3324319">RemoteAddr</span><span class="op" id="3324329">(</span><span class="op" id="3324330">)</span>&nbsp;<span class="ident" id="3324332">Addr</span>&nbsp;<span class="op" id="3324337">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324340">if</span>&nbsp;<span class="op" id="3324343">!</span><span class="ident" id="3324344">c</span><span class="op" id="3324345">.</span><span class="ident" id="3324346">ok</span><span class="op" id="3324348">(</span><span class="op" id="3324349">)</span>&nbsp;<span class="op" id="3324351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324355">return</span>&nbsp;<span class="builtintype" id="3324362">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3324367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324370">return</span>&nbsp;<span class="ident" id="3324377">c</span><span class="op" id="3324378">.</span><span class="ident" id="3324379">fd</span><span class="op" id="3324381">.</span><span class="ident" id="3324382">raddr</span><br>
<span class="lineno"></span><span class="op" id="3324388">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="3324391">//&nbsp;SetDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetDeadline&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3324446">func</span>&nbsp;<span class="op" id="3324451">(</span><span class="ident" id="3324452">c</span>&nbsp;<span class="op" id="3324454">*</span><span class="ident" id="3324455">conn</span><span class="op" id="3324459">)</span>&nbsp;<span class="ident" id="3324461">SetDeadline</span><span class="op" id="3324472">(</span><span class="ident" id="3324473">t</span>&nbsp;<span class="ident" id="3324475">time</span><span class="op" id="3324479">.</span><span class="ident" id="3324480">Time</span><span class="op" id="3324484">)</span>&nbsp;<span class="builtintype" id="3324486">error</span>&nbsp;<span class="op" id="3324492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324495">if</span>&nbsp;<span class="op" id="3324498">!</span><span class="ident" id="3324499">c</span><span class="op" id="3324500">.</span><span class="ident" id="3324501">ok</span><span class="op" id="3324503">(</span><span class="op" id="3324504">)</span>&nbsp;<span class="op" id="3324506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324510">return</span>&nbsp;<span class="ident" id="3324517">syscall</span><span class="op" id="3324524">.</span><span class="ident" id="3324525">EINVAL</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3324533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324536">return</span>&nbsp;<span class="ident" id="3324543">c</span><span class="op" id="3324544">.</span><span class="ident" id="3324545">fd</span><span class="op" id="3324547">.</span><span class="ident" id="3324548">setDeadline</span><span class="op" id="3324559">(</span><span class="ident" id="3324560">t</span><span class="op" id="3324561">)</span><br>
<span class="lineno"></span><span class="op" id="3324563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3324566">//&nbsp;SetReadDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetReadDeadline&nbsp;method.</span><br>
<span class="lineno">165</span><span class="keyword" id="3324629">func</span>&nbsp;<span class="op" id="3324634">(</span><span class="ident" id="3324635">c</span>&nbsp;<span class="op" id="3324637">*</span><span class="ident" id="3324638">conn</span><span class="op" id="3324642">)</span>&nbsp;<span class="ident" id="3324644">SetReadDeadline</span><span class="op" id="3324659">(</span><span class="ident" id="3324660">t</span>&nbsp;<span class="ident" id="3324662">time</span><span class="op" id="3324666">.</span><span class="ident" id="3324667">Time</span><span class="op" id="3324671">)</span>&nbsp;<span class="builtintype" id="3324673">error</span>&nbsp;<span class="op" id="3324679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324682">if</span>&nbsp;<span class="op" id="3324685">!</span><span class="ident" id="3324686">c</span><span class="op" id="3324687">.</span><span class="ident" id="3324688">ok</span><span class="op" id="3324690">(</span><span class="op" id="3324691">)</span>&nbsp;<span class="op" id="3324693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324697">return</span>&nbsp;<span class="ident" id="3324704">syscall</span><span class="op" id="3324711">.</span><span class="ident" id="3324712">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3324720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324723">return</span>&nbsp;<span class="ident" id="3324730">c</span><span class="op" id="3324731">.</span><span class="ident" id="3324732">fd</span><span class="op" id="3324734">.</span><span class="ident" id="3324735">setReadDeadline</span><span class="op" id="3324750">(</span><span class="ident" id="3324751">t</span><span class="op" id="3324752">)</span><br>
<span class="lineno">170</span><span class="op" id="3324754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3324757">//&nbsp;SetWriteDeadline&nbsp;implements&nbsp;the&nbsp;Conn&nbsp;SetWriteDeadline&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="3324822">func</span>&nbsp;<span class="op" id="3324827">(</span><span class="ident" id="3324828">c</span>&nbsp;<span class="op" id="3324830">*</span><span class="ident" id="3324831">conn</span><span class="op" id="3324835">)</span>&nbsp;<span class="ident" id="3324837">SetWriteDeadline</span><span class="op" id="3324853">(</span><span class="ident" id="3324854">t</span>&nbsp;<span class="ident" id="3324856">time</span><span class="op" id="3324860">.</span><span class="ident" id="3324861">Time</span><span class="op" id="3324865">)</span>&nbsp;<span class="builtintype" id="3324867">error</span>&nbsp;<span class="op" id="3324873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324876">if</span>&nbsp;<span class="op" id="3324879">!</span><span class="ident" id="3324880">c</span><span class="op" id="3324881">.</span><span class="ident" id="3324882">ok</span><span class="op" id="3324884">(</span><span class="op" id="3324885">)</span>&nbsp;<span class="op" id="3324887">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324891">return</span>&nbsp;<span class="ident" id="3324898">syscall</span><span class="op" id="3324905">.</span><span class="ident" id="3324906">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3324914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324917">return</span>&nbsp;<span class="ident" id="3324924">c</span><span class="op" id="3324925">.</span><span class="ident" id="3324926">fd</span><span class="op" id="3324928">.</span><span class="ident" id="3324929">setWriteDeadline</span><span class="op" id="3324945">(</span><span class="ident" id="3324946">t</span><span class="op" id="3324947">)</span><br>
<span class="lineno"></span><span class="op" id="3324949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="3324952">//&nbsp;SetReadBuffer&nbsp;sets&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3325009">//&nbsp;receive&nbsp;buffer&nbsp;associated&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3325059">func</span>&nbsp;<span class="op" id="3325064">(</span><span class="ident" id="3325065">c</span>&nbsp;<span class="op" id="3325067">*</span><span class="ident" id="3325068">conn</span><span class="op" id="3325072">)</span>&nbsp;<span class="ident" id="3325074">SetReadBuffer</span><span class="op" id="3325087">(</span><span class="ident" id="3325088">bytes</span>&nbsp;<span class="builtintype" id="3325094">int</span><span class="op" id="3325097">)</span>&nbsp;<span class="builtintype" id="3325099">error</span>&nbsp;<span class="op" id="3325105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325108">if</span>&nbsp;<span class="op" id="3325111">!</span><span class="ident" id="3325112">c</span><span class="op" id="3325113">.</span><span class="ident" id="3325114">ok</span><span class="op" id="3325116">(</span><span class="op" id="3325117">)</span>&nbsp;<span class="op" id="3325119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325123">return</span>&nbsp;<span class="ident" id="3325130">syscall</span><span class="op" id="3325137">.</span><span class="ident" id="3325138">EINVAL</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3325146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325149">return</span>&nbsp;<span class="ident" id="3325156">setReadBuffer</span><span class="op" id="3325169">(</span><span class="ident" id="3325170">c</span><span class="op" id="3325171">.</span><span class="ident" id="3325172">fd</span><span class="op" id="3325174">,</span>&nbsp;<span class="ident" id="3325176">bytes</span><span class="op" id="3325181">)</span><br>
<span class="lineno"></span><span class="op" id="3325183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3325186">//&nbsp;SetWriteBuffer&nbsp;sets&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;operating&nbsp;system&#39;s</span><br>
<span class="lineno">190</span><span class="comment" id="3325244">//&nbsp;transmit&nbsp;buffer&nbsp;associated&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3325295">func</span>&nbsp;<span class="op" id="3325300">(</span><span class="ident" id="3325301">c</span>&nbsp;<span class="op" id="3325303">*</span><span class="ident" id="3325304">conn</span><span class="op" id="3325308">)</span>&nbsp;<span class="ident" id="3325310">SetWriteBuffer</span><span class="op" id="3325324">(</span><span class="ident" id="3325325">bytes</span>&nbsp;<span class="builtintype" id="3325331">int</span><span class="op" id="3325334">)</span>&nbsp;<span class="builtintype" id="3325336">error</span>&nbsp;<span class="op" id="3325342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325345">if</span>&nbsp;<span class="op" id="3325348">!</span><span class="ident" id="3325349">c</span><span class="op" id="3325350">.</span><span class="ident" id="3325351">ok</span><span class="op" id="3325353">(</span><span class="op" id="3325354">)</span>&nbsp;<span class="op" id="3325356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325360">return</span>&nbsp;<span class="ident" id="3325367">syscall</span><span class="op" id="3325374">.</span><span class="ident" id="3325375">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3325383">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325386">return</span>&nbsp;<span class="ident" id="3325393">setWriteBuffer</span><span class="op" id="3325407">(</span><span class="ident" id="3325408">c</span><span class="op" id="3325409">.</span><span class="ident" id="3325410">fd</span><span class="op" id="3325412">,</span>&nbsp;<span class="ident" id="3325414">bytes</span><span class="op" id="3325419">)</span><br>
<span class="lineno"></span><span class="op" id="3325421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3325424">//&nbsp;File&nbsp;sets&nbsp;the&nbsp;underlying&nbsp;os.File&nbsp;to&nbsp;blocking&nbsp;mode&nbsp;and&nbsp;returns&nbsp;a&nbsp;copy.</span><br>
<span class="lineno"></span><span class="comment" id="3325497">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when&nbsp;finished.</span><br>
<span class="lineno">200</span><span class="comment" id="3325560">//&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="comment" id="3325625">//</span><br>
<span class="lineno"></span><span class="comment" id="3325628">//&nbsp;The&nbsp;returned&nbsp;os.File&#39;s&nbsp;file&nbsp;descriptor&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;connection&#39;s.</span><br>
<span class="lineno"></span><span class="comment" id="3325706">//&nbsp;Attempting&nbsp;to&nbsp;change&nbsp;properties&nbsp;of&nbsp;the&nbsp;original&nbsp;using&nbsp;this&nbsp;duplicate</span><br>
<span class="lineno"></span><span class="comment" id="3325778">//&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the&nbsp;desired&nbsp;effect.</span><br>
<span class="lineno">205</span><span class="keyword" id="3325821">func</span>&nbsp;<span class="op" id="3325826">(</span><span class="ident" id="3325827">c</span>&nbsp;<span class="op" id="3325829">*</span><span class="ident" id="3325830">conn</span><span class="op" id="3325834">)</span>&nbsp;<span class="ident" id="3325836">File</span><span class="op" id="3325840">(</span><span class="op" id="3325841">)</span>&nbsp;<span class="op" id="3325843">(</span><span class="ident" id="3325844">f</span>&nbsp;<span class="op" id="3325846">*</span><span class="ident" id="3325847">os</span><span class="op" id="3325849">.</span><span class="ident" id="3325850">File</span><span class="op" id="3325854">,</span>&nbsp;<span class="ident" id="3325856">err</span>&nbsp;<span class="builtintype" id="3325860">error</span><span class="op" id="3325865">)</span>&nbsp;<span class="op" id="3325867">{</span>&nbsp;<span class="keyword" id="3325869">return</span>&nbsp;<span class="ident" id="3325876">c</span><span class="op" id="3325877">.</span><span class="ident" id="3325878">fd</span><span class="op" id="3325880">.</span><span class="ident" id="3325881">dup</span><span class="op" id="3325884">(</span><span class="op" id="3325885">)</span>&nbsp;<span class="op" id="3325887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3325890">//&nbsp;An&nbsp;Error&nbsp;represents&nbsp;a&nbsp;network&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3325930">type</span>&nbsp;<span class="ident" id="3325935">Error</span>&nbsp;<span class="keyword" id="3325941">interface</span>&nbsp;<span class="op" id="3325951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3325954">error</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3325961">Timeout</span><span class="op" id="3325968">(</span><span class="op" id="3325969">)</span>&nbsp;<span class="builtintype" id="3325971">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3325978">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;a&nbsp;timeout?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326006">Temporary</span><span class="op" id="3326015">(</span><span class="op" id="3326016">)</span>&nbsp;<span class="builtintype" id="3326018">bool</span>&nbsp;<span class="comment" id="3326023">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;temporary?</span><br>
<span class="lineno"></span><span class="op" id="3326050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3326053">//&nbsp;PacketConn&nbsp;is&nbsp;a&nbsp;generic&nbsp;packet-oriented&nbsp;network&nbsp;connection.</span><br>
<span class="lineno">215</span><span class="comment" id="3326116">//</span><br>
<span class="lineno"></span><span class="comment" id="3326119">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;PacketConn&nbsp;simultaneously.</span><br>
<span class="lineno"></span><span class="keyword" id="3326193">type</span>&nbsp;<span class="ident" id="3326198">PacketConn</span>&nbsp;<span class="keyword" id="3326209">interface</span>&nbsp;<span class="op" id="3326219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326222">//&nbsp;ReadFrom&nbsp;reads&nbsp;a&nbsp;packet&nbsp;from&nbsp;the&nbsp;connection,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326271">//&nbsp;copying&nbsp;the&nbsp;payload&nbsp;into&nbsp;b.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326329">//&nbsp;bytes&nbsp;copied&nbsp;into&nbsp;b&nbsp;and&nbsp;the&nbsp;return&nbsp;address&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326381">//&nbsp;was&nbsp;on&nbsp;the&nbsp;packet.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326404">//&nbsp;ReadFrom&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326452">//&nbsp;an&nbsp;error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326514">//&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetReadDeadline.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326555">ReadFrom</span><span class="op" id="3326563">(</span><span class="ident" id="3326564">b</span>&nbsp;<span class="op" id="3326566">[</span><span class="op" id="3326567">]</span><span class="builtintype" id="3326568">byte</span><span class="op" id="3326572">)</span>&nbsp;<span class="op" id="3326574">(</span><span class="ident" id="3326575">n</span>&nbsp;<span class="builtintype" id="3326577">int</span><span class="op" id="3326580">,</span>&nbsp;<span class="ident" id="3326582">addr</span>&nbsp;<span class="ident" id="3326587">Addr</span><span class="op" id="3326591">,</span>&nbsp;<span class="ident" id="3326593">err</span>&nbsp;<span class="builtintype" id="3326597">error</span><span class="op" id="3326602">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326606">//&nbsp;WriteTo&nbsp;writes&nbsp;a&nbsp;packet&nbsp;with&nbsp;payload&nbsp;b&nbsp;to&nbsp;addr.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326658">//&nbsp;WriteTo&nbsp;can&nbsp;be&nbsp;made&nbsp;to&nbsp;time&nbsp;out&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326705">//&nbsp;an&nbsp;error&nbsp;with&nbsp;Timeout()&nbsp;==&nbsp;true&nbsp;after&nbsp;a&nbsp;fixed&nbsp;time&nbsp;limit;</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326767">//&nbsp;see&nbsp;SetDeadline&nbsp;and&nbsp;SetWriteDeadline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326809">//&nbsp;On&nbsp;packet-oriented&nbsp;connections,&nbsp;write&nbsp;timeouts&nbsp;are&nbsp;rare.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3326870">WriteTo</span><span class="op" id="3326877">(</span><span class="ident" id="3326878">b</span>&nbsp;<span class="op" id="3326880">[</span><span class="op" id="3326881">]</span><span class="builtintype" id="3326882">byte</span><span class="op" id="3326886">,</span>&nbsp;<span class="ident" id="3326888">addr</span>&nbsp;<span class="ident" id="3326893">Addr</span><span class="op" id="3326897">)</span>&nbsp;<span class="op" id="3326899">(</span><span class="ident" id="3326900">n</span>&nbsp;<span class="builtintype" id="3326902">int</span><span class="op" id="3326905">,</span>&nbsp;<span class="ident" id="3326907">err</span>&nbsp;<span class="builtintype" id="3326911">error</span><span class="op" id="3326916">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326920">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3326953">//&nbsp;Any&nbsp;blocked&nbsp;ReadFrom&nbsp;or&nbsp;WriteTo&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327037">Close</span><span class="op" id="3327042">(</span><span class="op" id="3327043">)</span>&nbsp;<span class="builtintype" id="3327045">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327053">//&nbsp;LocalAddr&nbsp;returns&nbsp;the&nbsp;local&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327102">LocalAddr</span><span class="op" id="3327111">(</span><span class="op" id="3327112">)</span>&nbsp;<span class="ident" id="3327114">Addr</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327121">//&nbsp;SetDeadline&nbsp;sets&nbsp;the&nbsp;read&nbsp;and&nbsp;write&nbsp;deadlines&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327182">//&nbsp;with&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327207">SetDeadline</span><span class="op" id="3327218">(</span><span class="ident" id="3327219">t</span>&nbsp;<span class="ident" id="3327221">time</span><span class="op" id="3327225">.</span><span class="ident" id="3327226">Time</span><span class="op" id="3327230">)</span>&nbsp;<span class="builtintype" id="3327232">error</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327240">//&nbsp;SetReadDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Read&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327301">//&nbsp;If&nbsp;the&nbsp;deadline&nbsp;is&nbsp;reached,&nbsp;Read&nbsp;will&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327363">//&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of&nbsp;blocking.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327405">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Read&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327458">SetReadDeadline</span><span class="op" id="3327473">(</span><span class="ident" id="3327474">t</span>&nbsp;<span class="ident" id="3327476">time</span><span class="op" id="3327480">.</span><span class="ident" id="3327481">Time</span><span class="op" id="3327485">)</span>&nbsp;<span class="builtintype" id="3327487">error</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327495">//&nbsp;SetWriteDeadline&nbsp;sets&nbsp;the&nbsp;deadline&nbsp;for&nbsp;future&nbsp;Write&nbsp;calls.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327558">//&nbsp;If&nbsp;the&nbsp;deadline&nbsp;is&nbsp;reached,&nbsp;Write&nbsp;will&nbsp;fail&nbsp;with&nbsp;a&nbsp;timeout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327621">//&nbsp;(see&nbsp;type&nbsp;Error)&nbsp;instead&nbsp;of&nbsp;blocking.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327663">//&nbsp;A&nbsp;zero&nbsp;value&nbsp;for&nbsp;t&nbsp;means&nbsp;Write&nbsp;will&nbsp;not&nbsp;time&nbsp;out.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327717">//&nbsp;Even&nbsp;if&nbsp;write&nbsp;times&nbsp;out,&nbsp;it&nbsp;may&nbsp;return&nbsp;n&nbsp;&gt;&nbsp;0,&nbsp;indicating&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3327783">//&nbsp;some&nbsp;of&nbsp;the&nbsp;data&nbsp;was&nbsp;successfully&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3327830">SetWriteDeadline</span><span class="op" id="3327846">(</span><span class="ident" id="3327847">t</span>&nbsp;<span class="ident" id="3327849">time</span><span class="op" id="3327853">.</span><span class="ident" id="3327854">Time</span><span class="op" id="3327858">)</span>&nbsp;<span class="builtintype" id="3327860">error</span><br>
<span class="lineno"></span><span class="op" id="3327866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="3327869">var</span>&nbsp;<span class="ident" id="3327873">listenerBacklog</span>&nbsp;<span class="op" id="3327889">=</span>&nbsp;<span class="ident" id="3327891">maxListenerBacklog</span><span class="op" id="3327909">(</span><span class="op" id="3327910">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3327913">//&nbsp;A&nbsp;Listener&nbsp;is&nbsp;a&nbsp;generic&nbsp;network&nbsp;listener&nbsp;for&nbsp;stream-oriented&nbsp;protocols.</span><br>
<span class="lineno"></span><span class="comment" id="3327988">//</span><br>
<span class="lineno"></span><span class="comment" id="3327991">//&nbsp;Multiple&nbsp;goroutines&nbsp;may&nbsp;invoke&nbsp;methods&nbsp;on&nbsp;a&nbsp;Listener&nbsp;simultaneously.</span><br>
<span class="lineno">265</span><span class="keyword" id="3328063">type</span>&nbsp;<span class="ident" id="3328068">Listener</span>&nbsp;<span class="keyword" id="3328077">interface</span>&nbsp;<span class="op" id="3328087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3328090">//&nbsp;Accept&nbsp;waits&nbsp;for&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;connection&nbsp;to&nbsp;the&nbsp;listener.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3328160">Accept</span><span class="op" id="3328166">(</span><span class="op" id="3328167">)</span>&nbsp;<span class="op" id="3328169">(</span><span class="ident" id="3328170">c</span>&nbsp;<span class="ident" id="3328172">Conn</span><span class="op" id="3328176">,</span>&nbsp;<span class="ident" id="3328178">err</span>&nbsp;<span class="builtintype" id="3328182">error</span><span class="op" id="3328187">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3328191">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;listener.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3328222">//&nbsp;Any&nbsp;blocked&nbsp;Accept&nbsp;operations&nbsp;will&nbsp;be&nbsp;unblocked&nbsp;and&nbsp;return&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3328293">Close</span><span class="op" id="3328298">(</span><span class="op" id="3328299">)</span>&nbsp;<span class="builtintype" id="3328301">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3328309">//&nbsp;Addr&nbsp;returns&nbsp;the&nbsp;listener&#39;s&nbsp;network&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3328358">Addr</span><span class="op" id="3328362">(</span><span class="op" id="3328363">)</span>&nbsp;<span class="ident" id="3328365">Addr</span><br>
<span class="lineno">275</span><span class="op" id="3328370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3328373">//&nbsp;Various&nbsp;errors&nbsp;contained&nbsp;in&nbsp;OpError.</span><br>
<span class="lineno"></span><span class="keyword" id="3328413">var</span>&nbsp;<span class="op" id="3328417">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3328420">//&nbsp;For&nbsp;connection&nbsp;setup&nbsp;and&nbsp;write&nbsp;operations.</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3328467">errMissingAddress</span>&nbsp;<span class="op" id="3328485">=</span>&nbsp;<span class="ident" id="3328487">errors</span><span class="op" id="3328493">.</span><span class="ident" id="3328494">New</span><span class="op" id="3328497">(</span><span class="string" id="3328498">&#34;missing&nbsp;address&#34;</span><span class="op" id="3328515">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3328519">//&nbsp;For&nbsp;both&nbsp;read&nbsp;and&nbsp;write&nbsp;operations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3328559">errTimeout</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3328579">error</span>&nbsp;<span class="op" id="3328585">=</span>&nbsp;<span class="op" id="3328587">&amp;</span><span class="ident" id="3328588">timeoutError</span><span class="op" id="3328600">{</span><span class="op" id="3328601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3328604">errClosing</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3328630">=</span>&nbsp;<span class="ident" id="3328632">errors</span><span class="op" id="3328638">.</span><span class="ident" id="3328639">New</span><span class="op" id="3328642">(</span><span class="string" id="3328643">&#34;use&nbsp;of&nbsp;closed&nbsp;network&nbsp;connection&#34;</span><span class="op" id="3328677">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3328680">ErrWriteToConnected</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3328706">=</span>&nbsp;<span class="ident" id="3328708">errors</span><span class="op" id="3328714">.</span><span class="ident" id="3328715">New</span><span class="op" id="3328718">(</span><span class="string" id="3328719">&#34;use&nbsp;of&nbsp;WriteTo&nbsp;with&nbsp;pre-connected&nbsp;connection&#34;</span><span class="op" id="3328765">)</span><br>
<span class="lineno"></span><span class="op" id="3328767">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3328770">//&nbsp;OpError&nbsp;is&nbsp;the&nbsp;error&nbsp;type&nbsp;usually&nbsp;returned&nbsp;by&nbsp;functions&nbsp;in&nbsp;the&nbsp;net</span><br>
<span class="lineno"></span><span class="comment" id="3328840">//&nbsp;package.&nbsp;It&nbsp;describes&nbsp;the&nbsp;operation,&nbsp;network&nbsp;type,&nbsp;and&nbsp;address&nbsp;of</span><br>
<span class="lineno">290</span><span class="comment" id="3328909">//&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3328922">type</span>&nbsp;<span class="ident" id="3328927">OpError</span>&nbsp;<span class="keyword" id="3328935">struct</span>&nbsp;<span class="op" id="3328942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3328945">//&nbsp;Op&nbsp;is&nbsp;the&nbsp;operation&nbsp;which&nbsp;caused&nbsp;the&nbsp;error,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329001">//&nbsp;&#34;read&#34;&nbsp;or&nbsp;&#34;write&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329024">Op</span>&nbsp;<span class="builtintype" id="3329027">string</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329036">//&nbsp;Net&nbsp;is&nbsp;the&nbsp;network&nbsp;type&nbsp;on&nbsp;which&nbsp;this&nbsp;error&nbsp;occurred,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329094">//&nbsp;such&nbsp;as&nbsp;&#34;tcp&#34;&nbsp;or&nbsp;&#34;udp6&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329123">Net</span>&nbsp;<span class="builtintype" id="3329127">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329136">//&nbsp;Addr&nbsp;is&nbsp;the&nbsp;network&nbsp;address&nbsp;on&nbsp;which&nbsp;this&nbsp;error&nbsp;occurred.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329198">Addr</span>&nbsp;<span class="ident" id="3329203">Addr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3329210">//&nbsp;Err&nbsp;is&nbsp;the&nbsp;error&nbsp;that&nbsp;occurred&nbsp;during&nbsp;the&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329267">Err</span>&nbsp;<span class="builtintype" id="3329271">error</span><br>
<span class="lineno">305</span><span class="op" id="3329277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3329280">func</span>&nbsp;<span class="op" id="3329285">(</span><span class="ident" id="3329286">e</span>&nbsp;<span class="op" id="3329288">*</span><span class="ident" id="3329289">OpError</span><span class="op" id="3329296">)</span>&nbsp;<span class="ident" id="3329298">Error</span><span class="op" id="3329303">(</span><span class="op" id="3329304">)</span>&nbsp;<span class="builtintype" id="3329306">string</span>&nbsp;<span class="op" id="3329313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329316">if</span>&nbsp;<span class="ident" id="3329319">e</span>&nbsp;<span class="op" id="3329321">==</span>&nbsp;<span class="builtintype" id="3329324">nil</span>&nbsp;<span class="op" id="3329328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329332">return</span>&nbsp;<span class="string" id="3329339">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3329348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329351">s</span>&nbsp;<span class="op" id="3329353">:=</span>&nbsp;<span class="ident" id="3329356">e</span><span class="op" id="3329357">.</span><span class="ident" id="3329358">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329362">if</span>&nbsp;<span class="ident" id="3329365">e</span><span class="op" id="3329366">.</span><span class="ident" id="3329367">Net</span>&nbsp;<span class="op" id="3329371">!=</span>&nbsp;<span class="string" id="3329374">&#34;&#34;</span>&nbsp;<span class="op" id="3329377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329381">s</span>&nbsp;<span class="op" id="3329383">+=</span>&nbsp;<span class="string" id="3329386">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3329390">+</span>&nbsp;<span class="ident" id="3329392">e</span><span class="op" id="3329393">.</span><span class="ident" id="3329394">Net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3329399">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329402">if</span>&nbsp;<span class="ident" id="3329405">e</span><span class="op" id="3329406">.</span><span class="ident" id="3329407">Addr</span>&nbsp;<span class="op" id="3329412">!=</span>&nbsp;<span class="builtintype" id="3329415">nil</span>&nbsp;<span class="op" id="3329419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329423">s</span>&nbsp;<span class="op" id="3329425">+=</span>&nbsp;<span class="string" id="3329428">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3329432">+</span>&nbsp;<span class="ident" id="3329434">e</span><span class="op" id="3329435">.</span><span class="ident" id="3329436">Addr</span><span class="op" id="3329440">.</span><span class="ident" id="3329441">String</span><span class="op" id="3329447">(</span><span class="op" id="3329448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3329451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329454">s</span>&nbsp;<span class="op" id="3329456">+=</span>&nbsp;<span class="string" id="3329459">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3329464">+</span>&nbsp;<span class="ident" id="3329466">e</span><span class="op" id="3329467">.</span><span class="ident" id="3329468">Err</span><span class="op" id="3329471">.</span><span class="ident" id="3329472">Error</span><span class="op" id="3329477">(</span><span class="op" id="3329478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329481">return</span>&nbsp;<span class="ident" id="3329488">s</span><br>
<span class="lineno">320</span><span class="op" id="3329490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3329493">type</span>&nbsp;<span class="ident" id="3329498">temporary</span>&nbsp;<span class="keyword" id="3329508">interface</span>&nbsp;<span class="op" id="3329518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329521">Temporary</span><span class="op" id="3329530">(</span><span class="op" id="3329531">)</span>&nbsp;<span class="builtintype" id="3329533">bool</span><br>
<span class="lineno"></span><span class="op" id="3329538">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="3329541">func</span>&nbsp;<span class="op" id="3329546">(</span><span class="ident" id="3329547">e</span>&nbsp;<span class="op" id="3329549">*</span><span class="ident" id="3329550">OpError</span><span class="op" id="3329557">)</span>&nbsp;<span class="ident" id="3329559">Temporary</span><span class="op" id="3329568">(</span><span class="op" id="3329569">)</span>&nbsp;<span class="builtintype" id="3329571">bool</span>&nbsp;<span class="op" id="3329576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329579">t</span><span class="op" id="3329580">,</span>&nbsp;<span class="ident" id="3329582">ok</span>&nbsp;<span class="op" id="3329585">:=</span>&nbsp;<span class="ident" id="3329588">e</span><span class="op" id="3329589">.</span><span class="ident" id="3329590">Err</span><span class="op" id="3329593">.</span><span class="op" id="3329594">(</span><span class="ident" id="3329595">temporary</span><span class="op" id="3329604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329607">return</span>&nbsp;<span class="ident" id="3329614">ok</span>&nbsp;<span class="op" id="3329617">&amp;&amp;</span>&nbsp;<span class="ident" id="3329620">t</span><span class="op" id="3329621">.</span><span class="ident" id="3329622">Temporary</span><span class="op" id="3329631">(</span><span class="op" id="3329632">)</span><br>
<span class="lineno"></span><span class="op" id="3329634">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="3329637">var</span>&nbsp;<span class="ident" id="3329641">noDeadline</span>&nbsp;<span class="op" id="3329652">=</span>&nbsp;<span class="ident" id="3329654">time</span><span class="op" id="3329658">.</span><span class="ident" id="3329659">Time</span><span class="op" id="3329663">{</span><span class="op" id="3329664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3329667">type</span>&nbsp;<span class="ident" id="3329672">timeout</span>&nbsp;<span class="keyword" id="3329680">interface</span>&nbsp;<span class="op" id="3329690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329693">Timeout</span><span class="op" id="3329700">(</span><span class="op" id="3329701">)</span>&nbsp;<span class="builtintype" id="3329703">bool</span><br>
<span class="lineno">335</span><span class="op" id="3329708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3329711">func</span>&nbsp;<span class="op" id="3329716">(</span><span class="ident" id="3329717">e</span>&nbsp;<span class="op" id="3329719">*</span><span class="ident" id="3329720">OpError</span><span class="op" id="3329727">)</span>&nbsp;<span class="ident" id="3329729">Timeout</span><span class="op" id="3329736">(</span><span class="op" id="3329737">)</span>&nbsp;<span class="builtintype" id="3329739">bool</span>&nbsp;<span class="op" id="3329744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3329747">t</span><span class="op" id="3329748">,</span>&nbsp;<span class="ident" id="3329750">ok</span>&nbsp;<span class="op" id="3329753">:=</span>&nbsp;<span class="ident" id="3329756">e</span><span class="op" id="3329757">.</span><span class="ident" id="3329758">Err</span><span class="op" id="3329761">.</span><span class="op" id="3329762">(</span><span class="ident" id="3329763">timeout</span><span class="op" id="3329770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3329773">return</span>&nbsp;<span class="ident" id="3329780">ok</span>&nbsp;<span class="op" id="3329783">&amp;&amp;</span>&nbsp;<span class="ident" id="3329786">t</span><span class="op" id="3329787">.</span><span class="ident" id="3329788">Timeout</span><span class="op" id="3329795">(</span><span class="op" id="3329796">)</span><br>
<span class="lineno">340</span><span class="op" id="3329798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3329801">type</span>&nbsp;<span class="ident" id="3329806">timeoutError</span>&nbsp;<span class="keyword" id="3329819">struct</span><span class="op" id="3329825">{</span><span class="op" id="3329826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3329829">func</span>&nbsp;<span class="op" id="3329834">(</span><span class="ident" id="3329835">e</span>&nbsp;<span class="op" id="3329837">*</span><span class="ident" id="3329838">timeoutError</span><span class="op" id="3329850">)</span>&nbsp;<span class="ident" id="3329852">Error</span><span class="op" id="3329857">(</span><span class="op" id="3329858">)</span>&nbsp;<span class="builtintype" id="3329860">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3329869">{</span>&nbsp;<span class="keyword" id="3329871">return</span>&nbsp;<span class="string" id="3329878">&#34;i/o&nbsp;timeout&#34;</span>&nbsp;<span class="op" id="3329892">}</span><br>
<span class="lineno">345</span><span class="keyword" id="3329894">func</span>&nbsp;<span class="op" id="3329899">(</span><span class="ident" id="3329900">e</span>&nbsp;<span class="op" id="3329902">*</span><span class="ident" id="3329903">timeoutError</span><span class="op" id="3329915">)</span>&nbsp;<span class="ident" id="3329917">Timeout</span><span class="op" id="3329924">(</span><span class="op" id="3329925">)</span>&nbsp;<span class="builtintype" id="3329927">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3329934">{</span>&nbsp;<span class="keyword" id="3329936">return</span>&nbsp;<span class="builtintype" id="3329943">true</span>&nbsp;<span class="op" id="3329948">}</span><br>
<span class="lineno"></span><span class="keyword" id="3329950">func</span>&nbsp;<span class="op" id="3329955">(</span><span class="ident" id="3329956">e</span>&nbsp;<span class="op" id="3329958">*</span><span class="ident" id="3329959">timeoutError</span><span class="op" id="3329971">)</span>&nbsp;<span class="ident" id="3329973">Temporary</span><span class="op" id="3329982">(</span><span class="op" id="3329983">)</span>&nbsp;<span class="builtintype" id="3329985">bool</span>&nbsp;<span class="op" id="3329990">{</span>&nbsp;<span class="keyword" id="3329992">return</span>&nbsp;<span class="builtintype" id="3329999">true</span>&nbsp;<span class="op" id="3330004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3330007">type</span>&nbsp;<span class="ident" id="3330012">AddrError</span>&nbsp;<span class="keyword" id="3330022">struct</span>&nbsp;<span class="op" id="3330029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330032">Err</span>&nbsp;&nbsp;<span class="builtintype" id="3330037">string</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330045">Addr</span>&nbsp;<span class="builtintype" id="3330050">string</span><br>
<span class="lineno"></span><span class="op" id="3330057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3330060">func</span>&nbsp;<span class="op" id="3330065">(</span><span class="ident" id="3330066">e</span>&nbsp;<span class="op" id="3330068">*</span><span class="ident" id="3330069">AddrError</span><span class="op" id="3330078">)</span>&nbsp;<span class="ident" id="3330080">Error</span><span class="op" id="3330085">(</span><span class="op" id="3330086">)</span>&nbsp;<span class="builtintype" id="3330088">string</span>&nbsp;<span class="op" id="3330095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330098">if</span>&nbsp;<span class="ident" id="3330101">e</span>&nbsp;<span class="op" id="3330103">==</span>&nbsp;<span class="builtintype" id="3330106">nil</span>&nbsp;<span class="op" id="3330110">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330114">return</span>&nbsp;<span class="string" id="3330121">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330133">s</span>&nbsp;<span class="op" id="3330135">:=</span>&nbsp;<span class="ident" id="3330138">e</span><span class="op" id="3330139">.</span><span class="ident" id="3330140">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330145">if</span>&nbsp;<span class="ident" id="3330148">e</span><span class="op" id="3330149">.</span><span class="ident" id="3330150">Addr</span>&nbsp;<span class="op" id="3330155">!=</span>&nbsp;<span class="string" id="3330158">&#34;&#34;</span>&nbsp;<span class="op" id="3330161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330165">s</span>&nbsp;<span class="op" id="3330167">+=</span>&nbsp;<span class="string" id="3330170">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3330174">+</span>&nbsp;<span class="ident" id="3330176">e</span><span class="op" id="3330177">.</span><span class="ident" id="3330178">Addr</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3330184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330187">return</span>&nbsp;<span class="ident" id="3330194">s</span><br>
<span class="lineno"></span><span class="op" id="3330196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3330199">func</span>&nbsp;<span class="op" id="3330204">(</span><span class="ident" id="3330205">e</span>&nbsp;<span class="op" id="3330207">*</span><span class="ident" id="3330208">AddrError</span><span class="op" id="3330217">)</span>&nbsp;<span class="ident" id="3330219">Temporary</span><span class="op" id="3330228">(</span><span class="op" id="3330229">)</span>&nbsp;<span class="builtintype" id="3330231">bool</span>&nbsp;<span class="op" id="3330236">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330239">return</span>&nbsp;<span class="builtintype" id="3330246">false</span><br>
<span class="lineno"></span><span class="op" id="3330252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3330255">func</span>&nbsp;<span class="op" id="3330260">(</span><span class="ident" id="3330261">e</span>&nbsp;<span class="op" id="3330263">*</span><span class="ident" id="3330264">AddrError</span><span class="op" id="3330273">)</span>&nbsp;<span class="ident" id="3330275">Timeout</span><span class="op" id="3330282">(</span><span class="op" id="3330283">)</span>&nbsp;<span class="builtintype" id="3330285">bool</span>&nbsp;<span class="op" id="3330290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330293">return</span>&nbsp;<span class="builtintype" id="3330300">false</span><br>
<span class="lineno">370</span><span class="op" id="3330306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3330309">type</span>&nbsp;<span class="ident" id="3330314">UnknownNetworkError</span>&nbsp;<span class="builtintype" id="3330334">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3330342">func</span>&nbsp;<span class="op" id="3330347">(</span><span class="ident" id="3330348">e</span>&nbsp;<span class="ident" id="3330350">UnknownNetworkError</span><span class="op" id="3330369">)</span>&nbsp;<span class="ident" id="3330371">Error</span><span class="op" id="3330376">(</span><span class="op" id="3330377">)</span>&nbsp;<span class="builtintype" id="3330379">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3330388">{</span>&nbsp;<span class="keyword" id="3330390">return</span>&nbsp;<span class="string" id="3330397">&#34;unknown&nbsp;network&nbsp;&#34;</span>&nbsp;<span class="op" id="3330416">+</span>&nbsp;<span class="builtintype" id="3330418">string</span><span class="op" id="3330424">(</span><span class="ident" id="3330425">e</span><span class="op" id="3330426">)</span>&nbsp;<span class="op" id="3330428">}</span><br>
<span class="lineno">375</span><span class="keyword" id="3330430">func</span>&nbsp;<span class="op" id="3330435">(</span><span class="ident" id="3330436">e</span>&nbsp;<span class="ident" id="3330438">UnknownNetworkError</span><span class="op" id="3330457">)</span>&nbsp;<span class="ident" id="3330459">Temporary</span><span class="op" id="3330468">(</span><span class="op" id="3330469">)</span>&nbsp;<span class="builtintype" id="3330471">bool</span>&nbsp;<span class="op" id="3330476">{</span>&nbsp;<span class="keyword" id="3330478">return</span>&nbsp;<span class="builtintype" id="3330485">false</span>&nbsp;<span class="op" id="3330491">}</span><br>
<span class="lineno"></span><span class="keyword" id="3330493">func</span>&nbsp;<span class="op" id="3330498">(</span><span class="ident" id="3330499">e</span>&nbsp;<span class="ident" id="3330501">UnknownNetworkError</span><span class="op" id="3330520">)</span>&nbsp;<span class="ident" id="3330522">Timeout</span><span class="op" id="3330529">(</span><span class="op" id="3330530">)</span>&nbsp;<span class="builtintype" id="3330532">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3330539">{</span>&nbsp;<span class="keyword" id="3330541">return</span>&nbsp;<span class="builtintype" id="3330548">false</span>&nbsp;<span class="op" id="3330554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3330557">type</span>&nbsp;<span class="ident" id="3330562">InvalidAddrError</span>&nbsp;<span class="builtintype" id="3330579">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span><span class="keyword" id="3330587">func</span>&nbsp;<span class="op" id="3330592">(</span><span class="ident" id="3330593">e</span>&nbsp;<span class="ident" id="3330595">InvalidAddrError</span><span class="op" id="3330611">)</span>&nbsp;<span class="ident" id="3330613">Error</span><span class="op" id="3330618">(</span><span class="op" id="3330619">)</span>&nbsp;<span class="builtintype" id="3330621">string</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3330630">{</span>&nbsp;<span class="keyword" id="3330632">return</span>&nbsp;<span class="builtintype" id="3330639">string</span><span class="op" id="3330645">(</span><span class="ident" id="3330646">e</span><span class="op" id="3330647">)</span>&nbsp;<span class="op" id="3330649">}</span><br>
<span class="lineno"></span><span class="keyword" id="3330651">func</span>&nbsp;<span class="op" id="3330656">(</span><span class="ident" id="3330657">e</span>&nbsp;<span class="ident" id="3330659">InvalidAddrError</span><span class="op" id="3330675">)</span>&nbsp;<span class="ident" id="3330677">Timeout</span><span class="op" id="3330684">(</span><span class="op" id="3330685">)</span>&nbsp;<span class="builtintype" id="3330687">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3330694">{</span>&nbsp;<span class="keyword" id="3330696">return</span>&nbsp;<span class="builtintype" id="3330703">false</span>&nbsp;<span class="op" id="3330709">}</span><br>
<span class="lineno"></span><span class="keyword" id="3330711">func</span>&nbsp;<span class="op" id="3330716">(</span><span class="ident" id="3330717">e</span>&nbsp;<span class="ident" id="3330719">InvalidAddrError</span><span class="op" id="3330735">)</span>&nbsp;<span class="ident" id="3330737">Temporary</span><span class="op" id="3330746">(</span><span class="op" id="3330747">)</span>&nbsp;<span class="builtintype" id="3330749">bool</span>&nbsp;<span class="op" id="3330754">{</span>&nbsp;<span class="keyword" id="3330756">return</span>&nbsp;<span class="builtintype" id="3330763">false</span>&nbsp;<span class="op" id="3330769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3330772">//&nbsp;DNSConfigError&nbsp;represents&nbsp;an&nbsp;error&nbsp;reading&nbsp;the&nbsp;machine&#39;s&nbsp;DNS&nbsp;configuration.</span><br>
<span class="lineno">385</span><span class="keyword" id="3330851">type</span>&nbsp;<span class="ident" id="3330856">DNSConfigError</span>&nbsp;<span class="keyword" id="3330871">struct</span>&nbsp;<span class="op" id="3330878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3330881">Err</span>&nbsp;<span class="builtintype" id="3330885">error</span><br>
<span class="lineno"></span><span class="op" id="3330891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3330894">func</span>&nbsp;<span class="op" id="3330899">(</span><span class="ident" id="3330900">e</span>&nbsp;<span class="op" id="3330902">*</span><span class="ident" id="3330903">DNSConfigError</span><span class="op" id="3330917">)</span>&nbsp;<span class="ident" id="3330919">Error</span><span class="op" id="3330924">(</span><span class="op" id="3330925">)</span>&nbsp;<span class="builtintype" id="3330927">string</span>&nbsp;<span class="op" id="3330934">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3330937">return</span>&nbsp;<span class="string" id="3330944">&#34;error&nbsp;reading&nbsp;DNS&nbsp;config:&nbsp;&#34;</span>&nbsp;<span class="op" id="3330973">+</span>&nbsp;<span class="ident" id="3330975">e</span><span class="op" id="3330976">.</span><span class="ident" id="3330977">Err</span><span class="op" id="3330980">.</span><span class="ident" id="3330981">Error</span><span class="op" id="3330986">(</span><span class="op" id="3330987">)</span><br>
<span class="lineno"></span><span class="op" id="3330989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3330992">func</span>&nbsp;<span class="op" id="3330997">(</span><span class="ident" id="3330998">e</span>&nbsp;<span class="op" id="3331000">*</span><span class="ident" id="3331001">DNSConfigError</span><span class="op" id="3331015">)</span>&nbsp;<span class="ident" id="3331017">Timeout</span><span class="op" id="3331024">(</span><span class="op" id="3331025">)</span>&nbsp;<span class="builtintype" id="3331027">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3331034">{</span>&nbsp;<span class="keyword" id="3331036">return</span>&nbsp;<span class="builtintype" id="3331043">false</span>&nbsp;<span class="op" id="3331049">}</span><br>
<span class="lineno"></span><span class="keyword" id="3331051">func</span>&nbsp;<span class="op" id="3331056">(</span><span class="ident" id="3331057">e</span>&nbsp;<span class="op" id="3331059">*</span><span class="ident" id="3331060">DNSConfigError</span><span class="op" id="3331074">)</span>&nbsp;<span class="ident" id="3331076">Temporary</span><span class="op" id="3331085">(</span><span class="op" id="3331086">)</span>&nbsp;<span class="builtintype" id="3331088">bool</span>&nbsp;<span class="op" id="3331093">{</span>&nbsp;<span class="keyword" id="3331095">return</span>&nbsp;<span class="builtintype" id="3331102">false</span>&nbsp;<span class="op" id="3331108">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="keyword" id="3331111">type</span>&nbsp;<span class="ident" id="3331116">writerOnly</span>&nbsp;<span class="keyword" id="3331127">struct</span>&nbsp;<span class="op" id="3331134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331137">io</span><span class="op" id="3331139">.</span><span class="ident" id="3331140">Writer</span><br>
<span class="lineno"></span><span class="op" id="3331147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="comment" id="3331150">//&nbsp;Fallback&nbsp;implementation&nbsp;of&nbsp;io.ReaderFrom&#39;s&nbsp;ReadFrom,&nbsp;when&nbsp;sendfile&nbsp;isn&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="3331226">//&nbsp;applicable.</span><br>
<span class="lineno"></span><span class="keyword" id="3331241">func</span>&nbsp;<span class="ident" id="3331246">genericReadFrom</span><span class="op" id="3331261">(</span><span class="ident" id="3331262">w</span>&nbsp;<span class="ident" id="3331264">io</span><span class="op" id="3331266">.</span><span class="ident" id="3331267">Writer</span><span class="op" id="3331273">,</span>&nbsp;<span class="ident" id="3331275">r</span>&nbsp;<span class="ident" id="3331277">io</span><span class="op" id="3331279">.</span><span class="ident" id="3331280">Reader</span><span class="op" id="3331286">)</span>&nbsp;<span class="op" id="3331288">(</span><span class="ident" id="3331289">n</span>&nbsp;<span class="ident" id="3331291">int64</span><span class="op" id="3331296">,</span>&nbsp;<span class="ident" id="3331298">err</span>&nbsp;<span class="builtintype" id="3331302">error</span><span class="op" id="3331307">)</span>&nbsp;<span class="op" id="3331309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3331312">//&nbsp;Use&nbsp;wrapper&nbsp;to&nbsp;hide&nbsp;existing&nbsp;r.ReadFrom&nbsp;from&nbsp;io.Copy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3331370">return</span>&nbsp;<span class="ident" id="3331377">io</span><span class="op" id="3331379">.</span><span class="ident" id="3331380">Copy</span><span class="op" id="3331384">(</span><span class="ident" id="3331385">writerOnly</span><span class="op" id="3331395">{</span><span class="ident" id="3331396">w</span><span class="op" id="3331397">}</span><span class="op" id="3331398">,</span>&nbsp;<span class="ident" id="3331400">r</span><span class="op" id="3331401">)</span><br>
<span class="lineno">405</span><span class="op" id="3331403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3331406">//&nbsp;Limit&nbsp;the&nbsp;number&nbsp;of&nbsp;concurrent&nbsp;cgo-using&nbsp;goroutines,&nbsp;because</span><br>
<span class="lineno"></span><span class="comment" id="3331470">//&nbsp;each&nbsp;will&nbsp;block&nbsp;an&nbsp;entire&nbsp;operating&nbsp;system&nbsp;thread.&nbsp;The&nbsp;usual&nbsp;culprit</span><br>
<span class="lineno"></span><span class="comment" id="3331542">//&nbsp;is&nbsp;resolving&nbsp;many&nbsp;DNS&nbsp;names&nbsp;in&nbsp;separate&nbsp;goroutines&nbsp;but&nbsp;the&nbsp;DNS</span><br>
<span class="lineno">410</span><span class="comment" id="3331608">//&nbsp;server&nbsp;is&nbsp;not&nbsp;responding.&nbsp;Then&nbsp;the&nbsp;many&nbsp;lookups&nbsp;each&nbsp;use&nbsp;a&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="3331680">//&nbsp;thread,&nbsp;and&nbsp;the&nbsp;system&nbsp;or&nbsp;the&nbsp;program&nbsp;runs&nbsp;out&nbsp;of&nbsp;threads.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3331743">var</span>&nbsp;<span class="ident" id="3331747">threadLimit</span>&nbsp;<span class="op" id="3331759">=</span>&nbsp;<span class="builtinfunc" id="3331761">make</span><span class="op" id="3331765">(</span><span class="keyword" id="3331766">chan</span>&nbsp;<span class="keyword" id="3331771">struct</span><span class="op" id="3331777">{</span><span class="op" id="3331778">}</span><span class="op" id="3331779">,</span>&nbsp;<span class="num" id="3331781">500</span><span class="op" id="3331784">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">415</span><span class="comment" id="3331787">//&nbsp;Using&nbsp;send&nbsp;for&nbsp;acquire&nbsp;is&nbsp;fine&nbsp;here&nbsp;because&nbsp;we&nbsp;are&nbsp;not&nbsp;using&nbsp;this</span><br>
<span class="lineno"></span><span class="comment" id="3331856">//&nbsp;to&nbsp;protect&nbsp;any&nbsp;memory.&nbsp;All&nbsp;we&nbsp;care&nbsp;about&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;goroutines</span><br>
<span class="lineno"></span><span class="comment" id="3331928">//&nbsp;making&nbsp;calls&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3331956">func</span>&nbsp;<span class="ident" id="3331961">acquireThread</span><span class="op" id="3331974">(</span><span class="op" id="3331975">)</span>&nbsp;<span class="op" id="3331977">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3331980">threadLimit</span>&nbsp;<span class="op" id="3331992">&lt;-</span>&nbsp;<span class="keyword" id="3331995">struct</span><span class="op" id="3332001">{</span><span class="op" id="3332002">}</span><span class="op" id="3332003">{</span><span class="op" id="3332004">}</span><br>
<span class="lineno"></span><span class="op" id="3332006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3332009">func</span>&nbsp;<span class="ident" id="3332014">releaseThread</span><span class="op" id="3332027">(</span><span class="op" id="3332028">)</span>&nbsp;<span class="op" id="3332030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3332033">&lt;-</span><span class="ident" id="3332035">threadLimit</span><br>
<span class="lineno">425</span><span class="op" id="3332047">}</span>
</div>
</body>
</html>
