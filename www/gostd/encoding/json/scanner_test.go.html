<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7640983">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7641039">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7641093">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7641144">package</span>&nbsp;<span class="ident" id="7641152">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7641158">import</span>&nbsp;<span class="op" id="7641165">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7641168">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7641177">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7641185">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7641198">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7641209">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7641219">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="7641222">//&nbsp;Tests&nbsp;of&nbsp;simple&nbsp;examples.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7641252">type</span>&nbsp;<span class="ident" id="7641257">example</span>&nbsp;<span class="keyword" id="7641265">struct</span>&nbsp;<span class="op" id="7641272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7641275">compact</span>&nbsp;<span class="builtintype" id="7641283">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7641291">indent</span>&nbsp;&nbsp;<span class="builtintype" id="7641299">string</span><br>
<span class="lineno">20</span><span class="op" id="7641306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7641309">var</span>&nbsp;<span class="ident" id="7641313">examples</span>&nbsp;<span class="op" id="7641322">=</span>&nbsp;<span class="op" id="7641324">[</span><span class="op" id="7641325">]</span><span class="ident" id="7641326">example</span><span class="op" id="7641333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641336">{</span><span class="string" id="7641337">`1`</span><span class="op" id="7641340">,</span>&nbsp;<span class="string" id="7641342">`1`</span><span class="op" id="7641345">}</span><span class="op" id="7641346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641349">{</span><span class="string" id="7641350">`{}`</span><span class="op" id="7641354">,</span>&nbsp;<span class="string" id="7641356">`{}`</span><span class="op" id="7641360">}</span><span class="op" id="7641361">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641364">{</span><span class="string" id="7641365">`[]`</span><span class="op" id="7641369">,</span>&nbsp;<span class="string" id="7641371">`[]`</span><span class="op" id="7641375">}</span><span class="op" id="7641376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641379">{</span><span class="string" id="7641380">`{&#34;&#34;:2}`</span><span class="op" id="7641388">,</span>&nbsp;<span class="string" id="7641390">&#34;{\n\t\&#34;\&#34;:&nbsp;2\n}&#34;</span><span class="op" id="7641407">}</span><span class="op" id="7641408">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641411">{</span><span class="string" id="7641412">`[3]`</span><span class="op" id="7641417">,</span>&nbsp;<span class="string" id="7641419">&#34;[\n\t3\n]&#34;</span><span class="op" id="7641430">}</span><span class="op" id="7641431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641434">{</span><span class="string" id="7641435">`[1,2,3]`</span><span class="op" id="7641444">,</span>&nbsp;<span class="string" id="7641446">&#34;[\n\t1,\n\t2,\n\t3\n]&#34;</span><span class="op" id="7641469">}</span><span class="op" id="7641470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641473">{</span><span class="string" id="7641474">`{&#34;x&#34;:1}`</span><span class="op" id="7641483">,</span>&nbsp;<span class="string" id="7641485">&#34;{\n\t\&#34;x\&#34;:&nbsp;1\n}&#34;</span><span class="op" id="7641503">}</span><span class="op" id="7641504">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641507">{</span><span class="ident" id="7641508">ex1</span><span class="op" id="7641511">,</span>&nbsp;<span class="ident" id="7641513">ex1i</span><span class="op" id="7641517">}</span><span class="op" id="7641518">,</span><br>
<span class="lineno"></span><span class="op" id="7641520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7641523">var</span>&nbsp;<span class="ident" id="7641527">ex1</span>&nbsp;<span class="op" id="7641531">=</span>&nbsp;<span class="string" id="7641533">`[true,false,null,&#34;x&#34;,1,1.5,0,-5e+2]`</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="7641572">var</span>&nbsp;<span class="ident" id="7641576">ex1i</span>&nbsp;<span class="op" id="7641581">=</span>&nbsp;<span class="string" id="7641583">`[<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsptrue,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspfalse,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbspnull,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&#34;x&#34;,<br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp1,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp1.5,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp0,<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp-5e+2<br>
<span class="lineno"></span>]`</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="7641639">func</span>&nbsp;<span class="ident" id="7641644">TestCompact</span><span class="op" id="7641655">(</span><span class="ident" id="7641656">t</span>&nbsp;<span class="op" id="7641658">*</span><span class="ident" id="7641659">testing</span><span class="op" id="7641666">.</span><span class="ident" id="7641667">T</span><span class="op" id="7641668">)</span>&nbsp;<span class="op" id="7641670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7641673">var</span>&nbsp;<span class="ident" id="7641677">buf</span>&nbsp;<span class="ident" id="7641681">bytes</span><span class="op" id="7641686">.</span><span class="ident" id="7641687">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7641695">for</span>&nbsp;<span class="ident" id="7641699">_</span><span class="op" id="7641700">,</span>&nbsp;<span class="ident" id="7641702">tt</span>&nbsp;<span class="op" id="7641705">:=</span>&nbsp;<span class="keyword" id="7641708">range</span>&nbsp;<span class="ident" id="7641714">examples</span>&nbsp;<span class="op" id="7641723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7641727">buf</span><span class="op" id="7641730">.</span><span class="ident" id="7641731">Reset</span><span class="op" id="7641736">(</span><span class="op" id="7641737">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7641741">if</span>&nbsp;<span class="ident" id="7641744">err</span>&nbsp;<span class="op" id="7641748">:=</span>&nbsp;<span class="ident" id="7641751">Compact</span><span class="op" id="7641758">(</span><span class="op" id="7641759">&amp;</span><span class="ident" id="7641760">buf</span><span class="op" id="7641763">,</span>&nbsp;<span class="op" id="7641765">[</span><span class="op" id="7641766">]</span><span class="builtintype" id="7641767">byte</span><span class="op" id="7641771">(</span><span class="ident" id="7641772">tt</span><span class="op" id="7641774">.</span><span class="ident" id="7641775">compact</span><span class="op" id="7641782">)</span><span class="op" id="7641783">)</span><span class="op" id="7641784">;</span>&nbsp;<span class="ident" id="7641786">err</span>&nbsp;<span class="op" id="7641790">!=</span>&nbsp;<span class="ident" id="7641793">nil</span>&nbsp;<span class="op" id="7641797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7641802">t</span><span class="op" id="7641803">.</span><span class="ident" id="7641804">Errorf</span><span class="op" id="7641810">(</span><span class="string" id="7641811">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="7641829">,</span>&nbsp;<span class="ident" id="7641831">tt</span><span class="op" id="7641833">.</span><span class="ident" id="7641834">compact</span><span class="op" id="7641841">,</span>&nbsp;<span class="ident" id="7641843">err</span><span class="op" id="7641846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641850">}</span>&nbsp;<span class="keyword" id="7641852">else</span>&nbsp;<span class="keyword" id="7641857">if</span>&nbsp;<span class="ident" id="7641860">s</span>&nbsp;<span class="op" id="7641862">:=</span>&nbsp;<span class="ident" id="7641865">buf</span><span class="op" id="7641868">.</span><span class="ident" id="7641869">String</span><span class="op" id="7641875">(</span><span class="op" id="7641876">)</span><span class="op" id="7641877">;</span>&nbsp;<span class="ident" id="7641879">s</span>&nbsp;<span class="op" id="7641881">!=</span>&nbsp;<span class="ident" id="7641884">tt</span><span class="op" id="7641886">.</span><span class="ident" id="7641887">compact</span>&nbsp;<span class="op" id="7641895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7641900">t</span><span class="op" id="7641901">.</span><span class="ident" id="7641902">Errorf</span><span class="op" id="7641908">(</span><span class="string" id="7641909">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="7641944">,</span>&nbsp;<span class="ident" id="7641946">tt</span><span class="op" id="7641948">.</span><span class="ident" id="7641949">compact</span><span class="op" id="7641956">,</span>&nbsp;<span class="ident" id="7641958">s</span><span class="op" id="7641959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7641963">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7641968">buf</span><span class="op" id="7641971">.</span><span class="ident" id="7641972">Reset</span><span class="op" id="7641977">(</span><span class="op" id="7641978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7641982">if</span>&nbsp;<span class="ident" id="7641985">err</span>&nbsp;<span class="op" id="7641989">:=</span>&nbsp;<span class="ident" id="7641992">Compact</span><span class="op" id="7641999">(</span><span class="op" id="7642000">&amp;</span><span class="ident" id="7642001">buf</span><span class="op" id="7642004">,</span>&nbsp;<span class="op" id="7642006">[</span><span class="op" id="7642007">]</span><span class="builtintype" id="7642008">byte</span><span class="op" id="7642012">(</span><span class="ident" id="7642013">tt</span><span class="op" id="7642015">.</span><span class="ident" id="7642016">indent</span><span class="op" id="7642022">)</span><span class="op" id="7642023">)</span><span class="op" id="7642024">;</span>&nbsp;<span class="ident" id="7642026">err</span>&nbsp;<span class="op" id="7642030">!=</span>&nbsp;<span class="ident" id="7642033">nil</span>&nbsp;<span class="op" id="7642037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7642042">t</span><span class="op" id="7642043">.</span><span class="ident" id="7642044">Errorf</span><span class="op" id="7642050">(</span><span class="string" id="7642051">&#34;Compact(%#q):&nbsp;%v&#34;</span><span class="op" id="7642069">,</span>&nbsp;<span class="ident" id="7642071">tt</span><span class="op" id="7642073">.</span><span class="ident" id="7642074">indent</span><span class="op" id="7642080">,</span>&nbsp;<span class="ident" id="7642082">err</span><span class="op" id="7642085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7642090">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642101">}</span>&nbsp;<span class="keyword" id="7642103">else</span>&nbsp;<span class="keyword" id="7642108">if</span>&nbsp;<span class="ident" id="7642111">s</span>&nbsp;<span class="op" id="7642113">:=</span>&nbsp;<span class="ident" id="7642116">buf</span><span class="op" id="7642119">.</span><span class="ident" id="7642120">String</span><span class="op" id="7642126">(</span><span class="op" id="7642127">)</span><span class="op" id="7642128">;</span>&nbsp;<span class="ident" id="7642130">s</span>&nbsp;<span class="op" id="7642132">!=</span>&nbsp;<span class="ident" id="7642135">tt</span><span class="op" id="7642137">.</span><span class="ident" id="7642138">compact</span>&nbsp;<span class="op" id="7642146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7642151">t</span><span class="op" id="7642152">.</span><span class="ident" id="7642153">Errorf</span><span class="op" id="7642159">(</span><span class="string" id="7642160">&#34;Compact(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7642190">,</span>&nbsp;<span class="ident" id="7642192">tt</span><span class="op" id="7642194">.</span><span class="ident" id="7642195">indent</span><span class="op" id="7642201">,</span>&nbsp;<span class="ident" id="7642203">s</span><span class="op" id="7642204">,</span>&nbsp;<span class="ident" id="7642206">tt</span><span class="op" id="7642208">.</span><span class="ident" id="7642209">compact</span><span class="op" id="7642216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642223">}</span><br>
<span class="lineno"></span><span class="op" id="7642225">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="7642228">func</span>&nbsp;<span class="ident" id="7642233">TestCompactSeparators</span><span class="op" id="7642254">(</span><span class="ident" id="7642255">t</span>&nbsp;<span class="op" id="7642257">*</span><span class="ident" id="7642258">testing</span><span class="op" id="7642265">.</span><span class="ident" id="7642266">T</span><span class="op" id="7642267">)</span>&nbsp;<span class="op" id="7642269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7642272">//&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;should&nbsp;be&nbsp;escaped&nbsp;inside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7642328">//&nbsp;They&nbsp;should&nbsp;not&nbsp;appear&nbsp;outside&nbsp;strings.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7642372">tests</span>&nbsp;<span class="op" id="7642378">:=</span>&nbsp;<span class="op" id="7642381">[</span><span class="op" id="7642382">]</span><span class="keyword" id="7642383">struct</span>&nbsp;<span class="op" id="7642390">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7642394">in</span><span class="op" id="7642396">,</span>&nbsp;<span class="ident" id="7642398">compact</span>&nbsp;<span class="builtintype" id="7642406">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642414">}</span><span class="op" id="7642415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642419">{</span><span class="string" id="7642420">&#34;{\&#34;\u2028\&#34;:&nbsp;1}&#34;</span><span class="op" id="7642437">,</span>&nbsp;<span class="string" id="7642439">`{&#34;\u2028&#34;:1}`</span><span class="op" id="7642453">}</span><span class="op" id="7642454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642458">{</span><span class="string" id="7642459">&#34;{\&#34;\u2029\&#34;&nbsp;:2}&#34;</span><span class="op" id="7642476">,</span>&nbsp;<span class="string" id="7642478">`{&#34;\u2029&#34;:2}`</span><span class="op" id="7642492">}</span><span class="op" id="7642493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642496">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7642499">for</span>&nbsp;<span class="ident" id="7642503">_</span><span class="op" id="7642504">,</span>&nbsp;<span class="ident" id="7642506">tt</span>&nbsp;<span class="op" id="7642509">:=</span>&nbsp;<span class="keyword" id="7642512">range</span>&nbsp;<span class="ident" id="7642518">tests</span>&nbsp;<span class="op" id="7642524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7642528">var</span>&nbsp;<span class="ident" id="7642532">buf</span>&nbsp;<span class="ident" id="7642536">bytes</span><span class="op" id="7642541">.</span><span class="ident" id="7642542">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7642551">if</span>&nbsp;<span class="ident" id="7642554">err</span>&nbsp;<span class="op" id="7642558">:=</span>&nbsp;<span class="ident" id="7642561">Compact</span><span class="op" id="7642568">(</span><span class="op" id="7642569">&amp;</span><span class="ident" id="7642570">buf</span><span class="op" id="7642573">,</span>&nbsp;<span class="op" id="7642575">[</span><span class="op" id="7642576">]</span><span class="builtintype" id="7642577">byte</span><span class="op" id="7642581">(</span><span class="ident" id="7642582">tt</span><span class="op" id="7642584">.</span><span class="ident" id="7642585">in</span><span class="op" id="7642587">)</span><span class="op" id="7642588">)</span><span class="op" id="7642589">;</span>&nbsp;<span class="ident" id="7642591">err</span>&nbsp;<span class="op" id="7642595">!=</span>&nbsp;<span class="ident" id="7642598">nil</span>&nbsp;<span class="op" id="7642602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7642607">t</span><span class="op" id="7642608">.</span><span class="ident" id="7642609">Errorf</span><span class="op" id="7642615">(</span><span class="string" id="7642616">&#34;Compact(%q):&nbsp;%v&#34;</span><span class="op" id="7642633">,</span>&nbsp;<span class="ident" id="7642635">tt</span><span class="op" id="7642637">.</span><span class="ident" id="7642638">in</span><span class="op" id="7642640">,</span>&nbsp;<span class="ident" id="7642642">err</span><span class="op" id="7642645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642649">}</span>&nbsp;<span class="keyword" id="7642651">else</span>&nbsp;<span class="keyword" id="7642656">if</span>&nbsp;<span class="ident" id="7642659">s</span>&nbsp;<span class="op" id="7642661">:=</span>&nbsp;<span class="ident" id="7642664">buf</span><span class="op" id="7642667">.</span><span class="ident" id="7642668">String</span><span class="op" id="7642674">(</span><span class="op" id="7642675">)</span><span class="op" id="7642676">;</span>&nbsp;<span class="ident" id="7642678">s</span>&nbsp;<span class="op" id="7642680">!=</span>&nbsp;<span class="ident" id="7642683">tt</span><span class="op" id="7642685">.</span><span class="ident" id="7642686">compact</span>&nbsp;<span class="op" id="7642694">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7642699">t</span><span class="op" id="7642700">.</span><span class="ident" id="7642701">Errorf</span><span class="op" id="7642707">(</span><span class="string" id="7642708">&#34;Compact(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7642735">,</span>&nbsp;<span class="ident" id="7642737">tt</span><span class="op" id="7642739">.</span><span class="ident" id="7642740">in</span><span class="op" id="7642742">,</span>&nbsp;<span class="ident" id="7642744">s</span><span class="op" id="7642745">,</span>&nbsp;<span class="ident" id="7642747">tt</span><span class="op" id="7642749">.</span><span class="ident" id="7642750">compact</span><span class="op" id="7642757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642764">}</span><br>
<span class="lineno"></span><span class="op" id="7642766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="7642769">func</span>&nbsp;<span class="ident" id="7642774">TestIndent</span><span class="op" id="7642784">(</span><span class="ident" id="7642785">t</span>&nbsp;<span class="op" id="7642787">*</span><span class="ident" id="7642788">testing</span><span class="op" id="7642795">.</span><span class="ident" id="7642796">T</span><span class="op" id="7642797">)</span>&nbsp;<span class="op" id="7642799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7642802">var</span>&nbsp;<span class="ident" id="7642806">buf</span>&nbsp;<span class="ident" id="7642810">bytes</span><span class="op" id="7642815">.</span><span class="ident" id="7642816">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7642824">for</span>&nbsp;<span class="ident" id="7642828">_</span><span class="op" id="7642829">,</span>&nbsp;<span class="ident" id="7642831">tt</span>&nbsp;<span class="op" id="7642834">:=</span>&nbsp;<span class="keyword" id="7642837">range</span>&nbsp;<span class="ident" id="7642843">examples</span>&nbsp;<span class="op" id="7642852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7642856">buf</span><span class="op" id="7642859">.</span><span class="ident" id="7642860">Reset</span><span class="op" id="7642865">(</span><span class="op" id="7642866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7642870">if</span>&nbsp;<span class="ident" id="7642873">err</span>&nbsp;<span class="op" id="7642877">:=</span>&nbsp;<span class="ident" id="7642880">Indent</span><span class="op" id="7642886">(</span><span class="op" id="7642887">&amp;</span><span class="ident" id="7642888">buf</span><span class="op" id="7642891">,</span>&nbsp;<span class="op" id="7642893">[</span><span class="op" id="7642894">]</span><span class="builtintype" id="7642895">byte</span><span class="op" id="7642899">(</span><span class="ident" id="7642900">tt</span><span class="op" id="7642902">.</span><span class="ident" id="7642903">indent</span><span class="op" id="7642909">)</span><span class="op" id="7642910">,</span>&nbsp;<span class="string" id="7642912">&#34;&#34;</span><span class="op" id="7642914">,</span>&nbsp;<span class="string" id="7642916">&#34;\t&#34;</span><span class="op" id="7642920">)</span><span class="op" id="7642921">;</span>&nbsp;<span class="ident" id="7642923">err</span>&nbsp;<span class="op" id="7642927">!=</span>&nbsp;<span class="ident" id="7642930">nil</span>&nbsp;<span class="op" id="7642934">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7642939">t</span><span class="op" id="7642940">.</span><span class="ident" id="7642941">Errorf</span><span class="op" id="7642947">(</span><span class="string" id="7642948">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="7642965">,</span>&nbsp;<span class="ident" id="7642967">tt</span><span class="op" id="7642969">.</span><span class="ident" id="7642970">indent</span><span class="op" id="7642976">,</span>&nbsp;<span class="ident" id="7642978">err</span><span class="op" id="7642981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7642985">}</span>&nbsp;<span class="keyword" id="7642987">else</span>&nbsp;<span class="keyword" id="7642992">if</span>&nbsp;<span class="ident" id="7642995">s</span>&nbsp;<span class="op" id="7642997">:=</span>&nbsp;<span class="ident" id="7643000">buf</span><span class="op" id="7643003">.</span><span class="ident" id="7643004">String</span><span class="op" id="7643010">(</span><span class="op" id="7643011">)</span><span class="op" id="7643012">;</span>&nbsp;<span class="ident" id="7643014">s</span>&nbsp;<span class="op" id="7643016">!=</span>&nbsp;<span class="ident" id="7643019">tt</span><span class="op" id="7643021">.</span><span class="ident" id="7643022">indent</span>&nbsp;<span class="op" id="7643029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643034">t</span><span class="op" id="7643035">.</span><span class="ident" id="7643036">Errorf</span><span class="op" id="7643042">(</span><span class="string" id="7643043">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;original&#34;</span><span class="op" id="7643077">,</span>&nbsp;<span class="ident" id="7643079">tt</span><span class="op" id="7643081">.</span><span class="ident" id="7643082">indent</span><span class="op" id="7643088">,</span>&nbsp;<span class="ident" id="7643090">s</span><span class="op" id="7643091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643100">buf</span><span class="op" id="7643103">.</span><span class="ident" id="7643104">Reset</span><span class="op" id="7643109">(</span><span class="op" id="7643110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7643114">if</span>&nbsp;<span class="ident" id="7643117">err</span>&nbsp;<span class="op" id="7643121">:=</span>&nbsp;<span class="ident" id="7643124">Indent</span><span class="op" id="7643130">(</span><span class="op" id="7643131">&amp;</span><span class="ident" id="7643132">buf</span><span class="op" id="7643135">,</span>&nbsp;<span class="op" id="7643137">[</span><span class="op" id="7643138">]</span><span class="builtintype" id="7643139">byte</span><span class="op" id="7643143">(</span><span class="ident" id="7643144">tt</span><span class="op" id="7643146">.</span><span class="ident" id="7643147">compact</span><span class="op" id="7643154">)</span><span class="op" id="7643155">,</span>&nbsp;<span class="string" id="7643157">&#34;&#34;</span><span class="op" id="7643159">,</span>&nbsp;<span class="string" id="7643161">&#34;\t&#34;</span><span class="op" id="7643165">)</span><span class="op" id="7643166">;</span>&nbsp;<span class="ident" id="7643168">err</span>&nbsp;<span class="op" id="7643172">!=</span>&nbsp;<span class="ident" id="7643175">nil</span>&nbsp;<span class="op" id="7643179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643184">t</span><span class="op" id="7643185">.</span><span class="ident" id="7643186">Errorf</span><span class="op" id="7643192">(</span><span class="string" id="7643193">&#34;Indent(%#q):&nbsp;%v&#34;</span><span class="op" id="7643210">,</span>&nbsp;<span class="ident" id="7643212">tt</span><span class="op" id="7643214">.</span><span class="ident" id="7643215">compact</span><span class="op" id="7643222">,</span>&nbsp;<span class="ident" id="7643224">err</span><span class="op" id="7643227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7643232">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643243">}</span>&nbsp;<span class="keyword" id="7643245">else</span>&nbsp;<span class="keyword" id="7643250">if</span>&nbsp;<span class="ident" id="7643253">s</span>&nbsp;<span class="op" id="7643255">:=</span>&nbsp;<span class="ident" id="7643258">buf</span><span class="op" id="7643261">.</span><span class="ident" id="7643262">String</span><span class="op" id="7643268">(</span><span class="op" id="7643269">)</span><span class="op" id="7643270">;</span>&nbsp;<span class="ident" id="7643272">s</span>&nbsp;<span class="op" id="7643274">!=</span>&nbsp;<span class="ident" id="7643277">tt</span><span class="op" id="7643279">.</span><span class="ident" id="7643280">indent</span>&nbsp;<span class="op" id="7643287">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643292">t</span><span class="op" id="7643293">.</span><span class="ident" id="7643294">Errorf</span><span class="op" id="7643300">(</span><span class="string" id="7643301">&#34;Indent(%#q)&nbsp;=&nbsp;%#q,&nbsp;want&nbsp;%#q&#34;</span><span class="op" id="7643330">,</span>&nbsp;<span class="ident" id="7643332">tt</span><span class="op" id="7643334">.</span><span class="ident" id="7643335">compact</span><span class="op" id="7643342">,</span>&nbsp;<span class="ident" id="7643344">s</span><span class="op" id="7643345">,</span>&nbsp;<span class="ident" id="7643347">tt</span><span class="op" id="7643349">.</span><span class="ident" id="7643350">indent</span><span class="op" id="7643356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643363">}</span><br>
<span class="lineno"></span><span class="op" id="7643365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="7643368">//&nbsp;Tests&nbsp;of&nbsp;a&nbsp;large&nbsp;random&nbsp;structure.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7643407">func</span>&nbsp;<span class="ident" id="7643412">TestCompactBig</span><span class="op" id="7643426">(</span><span class="ident" id="7643427">t</span>&nbsp;<span class="op" id="7643429">*</span><span class="ident" id="7643430">testing</span><span class="op" id="7643437">.</span><span class="ident" id="7643438">T</span><span class="op" id="7643439">)</span>&nbsp;<span class="op" id="7643441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643444">initBig</span><span class="op" id="7643451">(</span><span class="op" id="7643452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7643455">var</span>&nbsp;<span class="ident" id="7643459">buf</span>&nbsp;<span class="ident" id="7643463">bytes</span><span class="op" id="7643468">.</span><span class="ident" id="7643469">Buffer</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7643477">if</span>&nbsp;<span class="ident" id="7643480">err</span>&nbsp;<span class="op" id="7643484">:=</span>&nbsp;<span class="ident" id="7643487">Compact</span><span class="op" id="7643494">(</span><span class="op" id="7643495">&amp;</span><span class="ident" id="7643496">buf</span><span class="op" id="7643499">,</span>&nbsp;<span class="ident" id="7643501">jsonBig</span><span class="op" id="7643508">)</span><span class="op" id="7643509">;</span>&nbsp;<span class="ident" id="7643511">err</span>&nbsp;<span class="op" id="7643515">!=</span>&nbsp;<span class="ident" id="7643518">nil</span>&nbsp;<span class="op" id="7643522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643526">t</span><span class="op" id="7643527">.</span><span class="ident" id="7643528">Fatalf</span><span class="op" id="7643534">(</span><span class="string" id="7643535">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="7643548">,</span>&nbsp;<span class="ident" id="7643550">err</span><span class="op" id="7643553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643559">b</span>&nbsp;<span class="op" id="7643561">:=</span>&nbsp;<span class="ident" id="7643564">buf</span><span class="op" id="7643567">.</span><span class="ident" id="7643568">Bytes</span><span class="op" id="7643573">(</span><span class="op" id="7643574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7643577">if</span>&nbsp;<span class="op" id="7643580">!</span><span class="ident" id="7643581">bytes</span><span class="op" id="7643586">.</span><span class="ident" id="7643587">Equal</span><span class="op" id="7643592">(</span><span class="ident" id="7643593">b</span><span class="op" id="7643594">,</span>&nbsp;<span class="ident" id="7643596">jsonBig</span><span class="op" id="7643603">)</span>&nbsp;<span class="op" id="7643605">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643609">t</span><span class="op" id="7643610">.</span><span class="ident" id="7643611">Error</span><span class="op" id="7643616">(</span><span class="string" id="7643617">&#34;Compact(jsonBig)&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="7643646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643650">diff</span><span class="op" id="7643654">(</span><span class="ident" id="7643655">t</span><span class="op" id="7643656">,</span>&nbsp;<span class="ident" id="7643658">b</span><span class="op" id="7643659">,</span>&nbsp;<span class="ident" id="7643661">jsonBig</span><span class="op" id="7643668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7643672">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643680">}</span><br>
<span class="lineno"></span><span class="op" id="7643682">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="7643685">func</span>&nbsp;<span class="ident" id="7643690">TestIndentBig</span><span class="op" id="7643703">(</span><span class="ident" id="7643704">t</span>&nbsp;<span class="op" id="7643706">*</span><span class="ident" id="7643707">testing</span><span class="op" id="7643714">.</span><span class="ident" id="7643715">T</span><span class="op" id="7643716">)</span>&nbsp;<span class="op" id="7643718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643721">initBig</span><span class="op" id="7643728">(</span><span class="op" id="7643729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7643732">var</span>&nbsp;<span class="ident" id="7643736">buf</span>&nbsp;<span class="ident" id="7643740">bytes</span><span class="op" id="7643745">.</span><span class="ident" id="7643746">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7643754">if</span>&nbsp;<span class="ident" id="7643757">err</span>&nbsp;<span class="op" id="7643761">:=</span>&nbsp;<span class="ident" id="7643764">Indent</span><span class="op" id="7643770">(</span><span class="op" id="7643771">&amp;</span><span class="ident" id="7643772">buf</span><span class="op" id="7643775">,</span>&nbsp;<span class="ident" id="7643777">jsonBig</span><span class="op" id="7643784">,</span>&nbsp;<span class="string" id="7643786">&#34;&#34;</span><span class="op" id="7643788">,</span>&nbsp;<span class="string" id="7643790">&#34;\t&#34;</span><span class="op" id="7643794">)</span><span class="op" id="7643795">;</span>&nbsp;<span class="ident" id="7643797">err</span>&nbsp;<span class="op" id="7643801">!=</span>&nbsp;<span class="ident" id="7643804">nil</span>&nbsp;<span class="op" id="7643808">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643812">t</span><span class="op" id="7643813">.</span><span class="ident" id="7643814">Fatalf</span><span class="op" id="7643820">(</span><span class="string" id="7643821">&#34;Indent1:&nbsp;%v&#34;</span><span class="op" id="7643834">,</span>&nbsp;<span class="ident" id="7643836">err</span><span class="op" id="7643839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643845">b</span>&nbsp;<span class="op" id="7643847">:=</span>&nbsp;<span class="ident" id="7643850">buf</span><span class="op" id="7643853">.</span><span class="ident" id="7643854">Bytes</span><span class="op" id="7643859">(</span><span class="op" id="7643860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7643863">if</span>&nbsp;<span class="builtinfunc" id="7643866">len</span><span class="op" id="7643869">(</span><span class="ident" id="7643870">b</span><span class="op" id="7643871">)</span>&nbsp;<span class="op" id="7643873">==</span>&nbsp;<span class="builtinfunc" id="7643876">len</span><span class="op" id="7643879">(</span><span class="ident" id="7643880">jsonBig</span><span class="op" id="7643887">)</span>&nbsp;<span class="op" id="7643889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7643893">//&nbsp;jsonBig&nbsp;is&nbsp;compact&nbsp;(no&nbsp;unnecessary&nbsp;spaces);</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7643942">//&nbsp;indenting&nbsp;should&nbsp;make&nbsp;it&nbsp;bigger</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7643979">t</span><span class="op" id="7643980">.</span><span class="ident" id="7643981">Fatalf</span><span class="op" id="7643987">(</span><span class="string" id="7643988">&#34;Indent(jsonBig)&nbsp;did&nbsp;not&nbsp;get&nbsp;bigger&#34;</span><span class="op" id="7644024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7644031">//&nbsp;should&nbsp;be&nbsp;idempotent</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7644056">var</span>&nbsp;<span class="ident" id="7644060">buf1</span>&nbsp;<span class="ident" id="7644065">bytes</span><span class="op" id="7644070">.</span><span class="ident" id="7644071">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7644079">if</span>&nbsp;<span class="ident" id="7644082">err</span>&nbsp;<span class="op" id="7644086">:=</span>&nbsp;<span class="ident" id="7644089">Indent</span><span class="op" id="7644095">(</span><span class="op" id="7644096">&amp;</span><span class="ident" id="7644097">buf1</span><span class="op" id="7644101">,</span>&nbsp;<span class="ident" id="7644103">b</span><span class="op" id="7644104">,</span>&nbsp;<span class="string" id="7644106">&#34;&#34;</span><span class="op" id="7644108">,</span>&nbsp;<span class="string" id="7644110">&#34;\t&#34;</span><span class="op" id="7644114">)</span><span class="op" id="7644115">;</span>&nbsp;<span class="ident" id="7644117">err</span>&nbsp;<span class="op" id="7644121">!=</span>&nbsp;<span class="ident" id="7644124">nil</span>&nbsp;<span class="op" id="7644128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644132">t</span><span class="op" id="7644133">.</span><span class="ident" id="7644134">Fatalf</span><span class="op" id="7644140">(</span><span class="string" id="7644141">&#34;Indent2:&nbsp;%v&#34;</span><span class="op" id="7644154">,</span>&nbsp;<span class="ident" id="7644156">err</span><span class="op" id="7644159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644165">b1</span>&nbsp;<span class="op" id="7644168">:=</span>&nbsp;<span class="ident" id="7644171">buf1</span><span class="op" id="7644175">.</span><span class="ident" id="7644176">Bytes</span><span class="op" id="7644181">(</span><span class="op" id="7644182">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7644185">if</span>&nbsp;<span class="op" id="7644188">!</span><span class="ident" id="7644189">bytes</span><span class="op" id="7644194">.</span><span class="ident" id="7644195">Equal</span><span class="op" id="7644200">(</span><span class="ident" id="7644201">b1</span><span class="op" id="7644203">,</span>&nbsp;<span class="ident" id="7644205">b</span><span class="op" id="7644206">)</span>&nbsp;<span class="op" id="7644208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644212">t</span><span class="op" id="7644213">.</span><span class="ident" id="7644214">Error</span><span class="op" id="7644219">(</span><span class="string" id="7644220">&#34;Indent(Indent(jsonBig))&nbsp;!=&nbsp;Indent(jsonBig)&#34;</span><span class="op" id="7644264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644268">diff</span><span class="op" id="7644272">(</span><span class="ident" id="7644273">t</span><span class="op" id="7644274">,</span>&nbsp;<span class="ident" id="7644276">b1</span><span class="op" id="7644278">,</span>&nbsp;<span class="ident" id="7644280">b</span><span class="op" id="7644281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7644285">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644293">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7644297">//&nbsp;should&nbsp;get&nbsp;back&nbsp;to&nbsp;original</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644329">buf1</span><span class="op" id="7644333">.</span><span class="ident" id="7644334">Reset</span><span class="op" id="7644339">(</span><span class="op" id="7644340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7644343">if</span>&nbsp;<span class="ident" id="7644346">err</span>&nbsp;<span class="op" id="7644350">:=</span>&nbsp;<span class="ident" id="7644353">Compact</span><span class="op" id="7644360">(</span><span class="op" id="7644361">&amp;</span><span class="ident" id="7644362">buf1</span><span class="op" id="7644366">,</span>&nbsp;<span class="ident" id="7644368">b</span><span class="op" id="7644369">)</span><span class="op" id="7644370">;</span>&nbsp;<span class="ident" id="7644372">err</span>&nbsp;<span class="op" id="7644376">!=</span>&nbsp;<span class="ident" id="7644379">nil</span>&nbsp;<span class="op" id="7644383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644387">t</span><span class="op" id="7644388">.</span><span class="ident" id="7644389">Fatalf</span><span class="op" id="7644395">(</span><span class="string" id="7644396">&#34;Compact:&nbsp;%v&#34;</span><span class="op" id="7644409">,</span>&nbsp;<span class="ident" id="7644411">err</span><span class="op" id="7644414">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644420">b1</span>&nbsp;<span class="op" id="7644423">=</span>&nbsp;<span class="ident" id="7644425">buf1</span><span class="op" id="7644429">.</span><span class="ident" id="7644430">Bytes</span><span class="op" id="7644435">(</span><span class="op" id="7644436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7644439">if</span>&nbsp;<span class="op" id="7644442">!</span><span class="ident" id="7644443">bytes</span><span class="op" id="7644448">.</span><span class="ident" id="7644449">Equal</span><span class="op" id="7644454">(</span><span class="ident" id="7644455">b1</span><span class="op" id="7644457">,</span>&nbsp;<span class="ident" id="7644459">jsonBig</span><span class="op" id="7644466">)</span>&nbsp;<span class="op" id="7644468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644472">t</span><span class="op" id="7644473">.</span><span class="ident" id="7644474">Error</span><span class="op" id="7644479">(</span><span class="string" id="7644480">&#34;Compact(Indent(jsonBig))&nbsp;!=&nbsp;jsonBig&#34;</span><span class="op" id="7644517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644521">diff</span><span class="op" id="7644525">(</span><span class="ident" id="7644526">t</span><span class="op" id="7644527">,</span>&nbsp;<span class="ident" id="7644529">b1</span><span class="op" id="7644531">,</span>&nbsp;<span class="ident" id="7644533">jsonBig</span><span class="op" id="7644540">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7644544">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644552">}</span><br>
<span class="lineno"></span><span class="op" id="7644554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7644557">type</span>&nbsp;<span class="ident" id="7644562">indentErrorTest</span>&nbsp;<span class="keyword" id="7644578">struct</span>&nbsp;<span class="op" id="7644585">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644588">in</span>&nbsp;&nbsp;<span class="builtintype" id="7644592">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644600">err</span>&nbsp;<span class="builtintype" id="7644604">error</span><br>
<span class="lineno"></span><span class="op" id="7644610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7644613">var</span>&nbsp;<span class="ident" id="7644617">indentErrorTests</span>&nbsp;<span class="op" id="7644634">=</span>&nbsp;<span class="op" id="7644636">[</span><span class="op" id="7644637">]</span><span class="ident" id="7644638">indentErrorTest</span><span class="op" id="7644653">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644656">{</span><span class="string" id="7644657">`{&#34;X&#34;:&nbsp;&#34;foo&#34;,&nbsp;&#34;Y&#34;}`</span><span class="op" id="7644676">,</span>&nbsp;<span class="op" id="7644678">&amp;</span><span class="ident" id="7644679">SyntaxError</span><span class="op" id="7644690">{</span><span class="string" id="7644691">&#34;invalid&nbsp;character&nbsp;&#39;}&#39;&nbsp;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="7644731">,</span>&nbsp;<span class="num" id="7644733">17</span><span class="op" id="7644735">}</span><span class="op" id="7644736">}</span><span class="op" id="7644737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7644740">{</span><span class="string" id="7644741">`{&#34;X&#34;:&nbsp;&#34;foo&#34;&nbsp;&#34;Y&#34;:&nbsp;&#34;bar&#34;}`</span><span class="op" id="7644766">,</span>&nbsp;<span class="op" id="7644768">&amp;</span><span class="ident" id="7644769">SyntaxError</span><span class="op" id="7644780">{</span><span class="string" id="7644781">&#34;invalid&nbsp;character&nbsp;&#39;\&#34;&#39;&nbsp;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="7644833">,</span>&nbsp;<span class="num" id="7644835">13</span><span class="op" id="7644837">}</span><span class="op" id="7644838">}</span><span class="op" id="7644839">,</span><br>
<span class="lineno"></span><span class="op" id="7644841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7644844">func</span>&nbsp;<span class="ident" id="7644849">TestIndentErrors</span><span class="op" id="7644865">(</span><span class="ident" id="7644866">t</span>&nbsp;<span class="op" id="7644868">*</span><span class="ident" id="7644869">testing</span><span class="op" id="7644876">.</span><span class="ident" id="7644877">T</span><span class="op" id="7644878">)</span>&nbsp;<span class="op" id="7644880">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7644883">for</span>&nbsp;<span class="ident" id="7644887">i</span><span class="op" id="7644888">,</span>&nbsp;<span class="ident" id="7644890">tt</span>&nbsp;<span class="op" id="7644893">:=</span>&nbsp;<span class="keyword" id="7644896">range</span>&nbsp;<span class="ident" id="7644902">indentErrorTests</span>&nbsp;<span class="op" id="7644919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644923">slice</span>&nbsp;<span class="op" id="7644929">:=</span>&nbsp;<span class="builtinfunc" id="7644932">make</span><span class="op" id="7644936">(</span><span class="op" id="7644937">[</span><span class="op" id="7644938">]</span><span class="builtintype" id="7644939">uint8</span><span class="op" id="7644944">,</span>&nbsp;<span class="num" id="7644946">0</span><span class="op" id="7644947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7644951">buf</span>&nbsp;<span class="op" id="7644955">:=</span>&nbsp;<span class="ident" id="7644958">bytes</span><span class="op" id="7644963">.</span><span class="ident" id="7644964">NewBuffer</span><span class="op" id="7644973">(</span><span class="ident" id="7644974">slice</span><span class="op" id="7644979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7644983">if</span>&nbsp;<span class="ident" id="7644986">err</span>&nbsp;<span class="op" id="7644990">:=</span>&nbsp;<span class="ident" id="7644993">Indent</span><span class="op" id="7644999">(</span><span class="ident" id="7645000">buf</span><span class="op" id="7645003">,</span>&nbsp;<span class="op" id="7645005">[</span><span class="op" id="7645006">]</span><span class="builtintype" id="7645007">uint8</span><span class="op" id="7645012">(</span><span class="ident" id="7645013">tt</span><span class="op" id="7645015">.</span><span class="ident" id="7645016">in</span><span class="op" id="7645018">)</span><span class="op" id="7645019">,</span>&nbsp;<span class="string" id="7645021">&#34;&#34;</span><span class="op" id="7645023">,</span>&nbsp;<span class="string" id="7645025">&#34;&#34;</span><span class="op" id="7645027">)</span><span class="op" id="7645028">;</span>&nbsp;<span class="ident" id="7645030">err</span>&nbsp;<span class="op" id="7645034">!=</span>&nbsp;<span class="ident" id="7645037">nil</span>&nbsp;<span class="op" id="7645041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645046">if</span>&nbsp;<span class="op" id="7645049">!</span><span class="ident" id="7645050">reflect</span><span class="op" id="7645057">.</span><span class="ident" id="7645058">DeepEqual</span><span class="op" id="7645067">(</span><span class="ident" id="7645068">err</span><span class="op" id="7645071">,</span>&nbsp;<span class="ident" id="7645073">tt</span><span class="op" id="7645075">.</span><span class="ident" id="7645076">err</span><span class="op" id="7645079">)</span>&nbsp;<span class="op" id="7645081">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645087">t</span><span class="op" id="7645088">.</span><span class="ident" id="7645089">Errorf</span><span class="op" id="7645095">(</span><span class="string" id="7645096">&#34;#%d:&nbsp;Indent:&nbsp;%#v&#34;</span><span class="op" id="7645114">,</span>&nbsp;<span class="ident" id="7645116">i</span><span class="op" id="7645117">,</span>&nbsp;<span class="ident" id="7645119">err</span><span class="op" id="7645122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645128">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645147">}</span><br>
<span class="lineno">180</span><span class="op" id="7645149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7645152">func</span>&nbsp;<span class="ident" id="7645157">TestNextValueBig</span><span class="op" id="7645173">(</span><span class="ident" id="7645174">t</span>&nbsp;<span class="op" id="7645176">*</span><span class="ident" id="7645177">testing</span><span class="op" id="7645184">.</span><span class="ident" id="7645185">T</span><span class="op" id="7645186">)</span>&nbsp;<span class="op" id="7645188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645191">initBig</span><span class="op" id="7645198">(</span><span class="op" id="7645199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645202">var</span>&nbsp;<span class="ident" id="7645206">scan</span>&nbsp;<span class="ident" id="7645211">scanner</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645220">item</span><span class="op" id="7645224">,</span>&nbsp;<span class="ident" id="7645226">rest</span><span class="op" id="7645230">,</span>&nbsp;<span class="ident" id="7645232">err</span>&nbsp;<span class="op" id="7645236">:=</span>&nbsp;<span class="ident" id="7645239">nextValue</span><span class="op" id="7645248">(</span><span class="ident" id="7645249">jsonBig</span><span class="op" id="7645256">,</span>&nbsp;<span class="op" id="7645258">&amp;</span><span class="ident" id="7645259">scan</span><span class="op" id="7645263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645266">if</span>&nbsp;<span class="ident" id="7645269">err</span>&nbsp;<span class="op" id="7645273">!=</span>&nbsp;<span class="ident" id="7645276">nil</span>&nbsp;<span class="op" id="7645280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645284">t</span><span class="op" id="7645285">.</span><span class="ident" id="7645286">Fatalf</span><span class="op" id="7645292">(</span><span class="string" id="7645293">&#34;nextValue:&nbsp;%s&#34;</span><span class="op" id="7645308">,</span>&nbsp;<span class="ident" id="7645310">err</span><span class="op" id="7645313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645319">if</span>&nbsp;<span class="builtinfunc" id="7645322">len</span><span class="op" id="7645325">(</span><span class="ident" id="7645326">item</span><span class="op" id="7645330">)</span>&nbsp;<span class="op" id="7645332">!=</span>&nbsp;<span class="builtinfunc" id="7645335">len</span><span class="op" id="7645338">(</span><span class="ident" id="7645339">jsonBig</span><span class="op" id="7645346">)</span>&nbsp;<span class="op" id="7645348">||</span>&nbsp;<span class="op" id="7645351">&amp;</span><span class="ident" id="7645352">item</span><span class="op" id="7645356">[</span><span class="num" id="7645357">0</span><span class="op" id="7645358">]</span>&nbsp;<span class="op" id="7645360">!=</span>&nbsp;<span class="op" id="7645363">&amp;</span><span class="ident" id="7645364">jsonBig</span><span class="op" id="7645371">[</span><span class="num" id="7645372">0</span><span class="op" id="7645373">]</span>&nbsp;<span class="op" id="7645375">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645379">t</span><span class="op" id="7645380">.</span><span class="ident" id="7645381">Errorf</span><span class="op" id="7645387">(</span><span class="string" id="7645388">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="7645409">,</span>&nbsp;<span class="builtinfunc" id="7645411">len</span><span class="op" id="7645414">(</span><span class="ident" id="7645415">item</span><span class="op" id="7645419">)</span><span class="op" id="7645420">,</span>&nbsp;<span class="builtinfunc" id="7645422">len</span><span class="op" id="7645425">(</span><span class="ident" id="7645426">jsonBig</span><span class="op" id="7645433">)</span><span class="op" id="7645434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645440">if</span>&nbsp;<span class="builtinfunc" id="7645443">len</span><span class="op" id="7645446">(</span><span class="ident" id="7645447">rest</span><span class="op" id="7645451">)</span>&nbsp;<span class="op" id="7645453">!=</span>&nbsp;<span class="num" id="7645456">0</span>&nbsp;<span class="op" id="7645458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645462">t</span><span class="op" id="7645463">.</span><span class="ident" id="7645464">Errorf</span><span class="op" id="7645470">(</span><span class="string" id="7645471">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="7645489">,</span>&nbsp;<span class="builtinfunc" id="7645491">len</span><span class="op" id="7645494">(</span><span class="ident" id="7645495">rest</span><span class="op" id="7645499">)</span><span class="op" id="7645500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645503">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645507">item</span><span class="op" id="7645511">,</span>&nbsp;<span class="ident" id="7645513">rest</span><span class="op" id="7645517">,</span>&nbsp;<span class="ident" id="7645519">err</span>&nbsp;<span class="op" id="7645523">=</span>&nbsp;<span class="ident" id="7645525">nextValue</span><span class="op" id="7645534">(</span><span class="builtinfunc" id="7645535">append</span><span class="op" id="7645541">(</span><span class="ident" id="7645542">jsonBig</span><span class="op" id="7645549">,</span>&nbsp;<span class="string" id="7645551">&#34;HELLO&nbsp;WORLD&#34;</span><span class="op" id="7645564">...</span><span class="op" id="7645567">)</span><span class="op" id="7645568">,</span>&nbsp;<span class="op" id="7645570">&amp;</span><span class="ident" id="7645571">scan</span><span class="op" id="7645575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645578">if</span>&nbsp;<span class="ident" id="7645581">err</span>&nbsp;<span class="op" id="7645585">!=</span>&nbsp;<span class="ident" id="7645588">nil</span>&nbsp;<span class="op" id="7645592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645596">t</span><span class="op" id="7645597">.</span><span class="ident" id="7645598">Fatalf</span><span class="op" id="7645604">(</span><span class="string" id="7645605">&#34;nextValue&nbsp;extra:&nbsp;%s&#34;</span><span class="op" id="7645626">,</span>&nbsp;<span class="ident" id="7645628">err</span><span class="op" id="7645631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645634">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645637">if</span>&nbsp;<span class="builtinfunc" id="7645640">len</span><span class="op" id="7645643">(</span><span class="ident" id="7645644">item</span><span class="op" id="7645648">)</span>&nbsp;<span class="op" id="7645650">!=</span>&nbsp;<span class="builtinfunc" id="7645653">len</span><span class="op" id="7645656">(</span><span class="ident" id="7645657">jsonBig</span><span class="op" id="7645664">)</span>&nbsp;<span class="op" id="7645666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645670">t</span><span class="op" id="7645671">.</span><span class="ident" id="7645672">Errorf</span><span class="op" id="7645678">(</span><span class="string" id="7645679">&#34;invalid&nbsp;item:&nbsp;%d&nbsp;%d&#34;</span><span class="op" id="7645700">,</span>&nbsp;<span class="builtinfunc" id="7645702">len</span><span class="op" id="7645705">(</span><span class="ident" id="7645706">item</span><span class="op" id="7645710">)</span><span class="op" id="7645711">,</span>&nbsp;<span class="builtinfunc" id="7645713">len</span><span class="op" id="7645716">(</span><span class="ident" id="7645717">jsonBig</span><span class="op" id="7645724">)</span><span class="op" id="7645725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645731">if</span>&nbsp;<span class="builtintype" id="7645734">string</span><span class="op" id="7645740">(</span><span class="ident" id="7645741">rest</span><span class="op" id="7645745">)</span>&nbsp;<span class="op" id="7645747">!=</span>&nbsp;<span class="string" id="7645750">&#34;HELLO&nbsp;WORLD&#34;</span>&nbsp;<span class="op" id="7645764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645768">t</span><span class="op" id="7645769">.</span><span class="ident" id="7645770">Errorf</span><span class="op" id="7645776">(</span><span class="string" id="7645777">&#34;invalid&nbsp;rest:&nbsp;%d&#34;</span><span class="op" id="7645795">,</span>&nbsp;<span class="builtinfunc" id="7645797">len</span><span class="op" id="7645800">(</span><span class="ident" id="7645801">rest</span><span class="op" id="7645805">)</span><span class="op" id="7645806">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645809">}</span><br>
<span class="lineno"></span><span class="op" id="7645811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7645814">var</span>&nbsp;<span class="ident" id="7645818">benchScan</span>&nbsp;<span class="ident" id="7645828">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="keyword" id="7645837">func</span>&nbsp;<span class="ident" id="7645842">BenchmarkSkipValue</span><span class="op" id="7645860">(</span><span class="ident" id="7645861">b</span>&nbsp;<span class="op" id="7645863">*</span><span class="ident" id="7645864">testing</span><span class="op" id="7645871">.</span><span class="ident" id="7645872">B</span><span class="op" id="7645873">)</span>&nbsp;<span class="op" id="7645875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645878">initBig</span><span class="op" id="7645885">(</span><span class="op" id="7645886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7645889">for</span>&nbsp;<span class="ident" id="7645893">i</span>&nbsp;<span class="op" id="7645895">:=</span>&nbsp;<span class="num" id="7645898">0</span><span class="op" id="7645899">;</span>&nbsp;<span class="ident" id="7645901">i</span>&nbsp;<span class="op" id="7645903">&lt;</span>&nbsp;<span class="ident" id="7645905">b</span><span class="op" id="7645906">.</span><span class="ident" id="7645907">N</span><span class="op" id="7645908">;</span>&nbsp;<span class="ident" id="7645910">i</span><span class="op" id="7645911">++</span>&nbsp;<span class="op" id="7645914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645918">nextValue</span><span class="op" id="7645927">(</span><span class="ident" id="7645928">jsonBig</span><span class="op" id="7645935">,</span>&nbsp;<span class="op" id="7645937">&amp;</span><span class="ident" id="7645938">benchScan</span><span class="op" id="7645947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7645950">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7645953">b</span><span class="op" id="7645954">.</span><span class="ident" id="7645955">SetBytes</span><span class="op" id="7645963">(</span><span class="ident" id="7645964">int64</span><span class="op" id="7645969">(</span><span class="builtinfunc" id="7645970">len</span><span class="op" id="7645973">(</span><span class="ident" id="7645974">jsonBig</span><span class="op" id="7645981">)</span><span class="op" id="7645982">)</span><span class="op" id="7645983">)</span><br>
<span class="lineno"></span><span class="op" id="7645985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7645988">func</span>&nbsp;<span class="ident" id="7645993">diff</span><span class="op" id="7645997">(</span><span class="ident" id="7645998">t</span>&nbsp;<span class="op" id="7646000">*</span><span class="ident" id="7646001">testing</span><span class="op" id="7646008">.</span><span class="ident" id="7646009">T</span><span class="op" id="7646010">,</span>&nbsp;<span class="ident" id="7646012">a</span><span class="op" id="7646013">,</span>&nbsp;<span class="ident" id="7646015">b</span>&nbsp;<span class="op" id="7646017">[</span><span class="op" id="7646018">]</span><span class="builtintype" id="7646019">byte</span><span class="op" id="7646023">)</span>&nbsp;<span class="op" id="7646025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646028">for</span>&nbsp;<span class="ident" id="7646032">i</span>&nbsp;<span class="op" id="7646034">:=</span>&nbsp;<span class="num" id="7646037">0</span><span class="op" id="7646038">;</span>&nbsp;<span class="op" id="7646040">;</span>&nbsp;<span class="ident" id="7646042">i</span><span class="op" id="7646043">++</span>&nbsp;<span class="op" id="7646046">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646050">if</span>&nbsp;<span class="ident" id="7646053">i</span>&nbsp;<span class="op" id="7646055">&gt;=</span>&nbsp;<span class="builtinfunc" id="7646058">len</span><span class="op" id="7646061">(</span><span class="ident" id="7646062">a</span><span class="op" id="7646063">)</span>&nbsp;<span class="op" id="7646065">||</span>&nbsp;<span class="ident" id="7646068">i</span>&nbsp;<span class="op" id="7646070">&gt;=</span>&nbsp;<span class="builtinfunc" id="7646073">len</span><span class="op" id="7646076">(</span><span class="ident" id="7646077">b</span><span class="op" id="7646078">)</span>&nbsp;<span class="op" id="7646080">||</span>&nbsp;<span class="ident" id="7646083">a</span><span class="op" id="7646084">[</span><span class="ident" id="7646085">i</span><span class="op" id="7646086">]</span>&nbsp;<span class="op" id="7646088">!=</span>&nbsp;<span class="ident" id="7646091">b</span><span class="op" id="7646092">[</span><span class="ident" id="7646093">i</span><span class="op" id="7646094">]</span>&nbsp;<span class="op" id="7646096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646101">j</span>&nbsp;<span class="op" id="7646103">:=</span>&nbsp;<span class="ident" id="7646106">i</span>&nbsp;<span class="op" id="7646108">-</span>&nbsp;<span class="num" id="7646110">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646116">if</span>&nbsp;<span class="ident" id="7646119">j</span>&nbsp;<span class="op" id="7646121">&lt;</span>&nbsp;<span class="num" id="7646123">0</span>&nbsp;<span class="op" id="7646125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646131">j</span>&nbsp;<span class="op" id="7646133">=</span>&nbsp;<span class="num" id="7646135">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646140">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646145">t</span><span class="op" id="7646146">.</span><span class="ident" id="7646147">Errorf</span><span class="op" id="7646153">(</span><span class="string" id="7646154">&#34;diverge&nbsp;at&nbsp;%d:&nbsp;«%s»&nbsp;vs&nbsp;«%s»&#34;</span><span class="op" id="7646187">,</span>&nbsp;<span class="ident" id="7646189">i</span><span class="op" id="7646190">,</span>&nbsp;<span class="ident" id="7646192">trim</span><span class="op" id="7646196">(</span><span class="ident" id="7646197">a</span><span class="op" id="7646198">[</span><span class="ident" id="7646199">j</span><span class="op" id="7646200">:</span><span class="op" id="7646201">]</span><span class="op" id="7646202">)</span><span class="op" id="7646203">,</span>&nbsp;<span class="ident" id="7646205">trim</span><span class="op" id="7646209">(</span><span class="ident" id="7646210">b</span><span class="op" id="7646211">[</span><span class="ident" id="7646212">j</span><span class="op" id="7646213">:</span><span class="op" id="7646214">]</span><span class="op" id="7646215">)</span><span class="op" id="7646216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646221">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646233">}</span><br>
<span class="lineno"></span><span class="op" id="7646235">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="7646238">func</span>&nbsp;<span class="ident" id="7646243">trim</span><span class="op" id="7646247">(</span><span class="ident" id="7646248">b</span>&nbsp;<span class="op" id="7646250">[</span><span class="op" id="7646251">]</span><span class="builtintype" id="7646252">byte</span><span class="op" id="7646256">)</span>&nbsp;<span class="op" id="7646258">[</span><span class="op" id="7646259">]</span><span class="builtintype" id="7646260">byte</span>&nbsp;<span class="op" id="7646265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646268">if</span>&nbsp;<span class="builtinfunc" id="7646271">len</span><span class="op" id="7646274">(</span><span class="ident" id="7646275">b</span><span class="op" id="7646276">)</span>&nbsp;<span class="op" id="7646278">&gt;</span>&nbsp;<span class="num" id="7646280">20</span>&nbsp;<span class="op" id="7646283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646287">return</span>&nbsp;<span class="ident" id="7646294">b</span><span class="op" id="7646295">[</span><span class="num" id="7646296">0</span><span class="op" id="7646297">:</span><span class="num" id="7646298">20</span><span class="op" id="7646300">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646303">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646306">return</span>&nbsp;<span class="ident" id="7646313">b</span><br>
<span class="lineno"></span><span class="op" id="7646315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7646318">//&nbsp;Generate&nbsp;a&nbsp;random&nbsp;JSON&nbsp;object.</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7646353">var</span>&nbsp;<span class="ident" id="7646357">jsonBig</span>&nbsp;<span class="op" id="7646365">[</span><span class="op" id="7646366">]</span><span class="builtintype" id="7646367">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7646373">func</span>&nbsp;<span class="ident" id="7646378">initBig</span><span class="op" id="7646385">(</span><span class="op" id="7646386">)</span>&nbsp;<span class="op" id="7646388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646391">n</span>&nbsp;<span class="op" id="7646393">:=</span>&nbsp;<span class="num" id="7646396">10000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646403">if</span>&nbsp;<span class="ident" id="7646406">testing</span><span class="op" id="7646413">.</span><span class="ident" id="7646414">Short</span><span class="op" id="7646419">(</span><span class="op" id="7646420">)</span>&nbsp;<span class="op" id="7646422">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646426">n</span>&nbsp;<span class="op" id="7646428">=</span>&nbsp;<span class="num" id="7646430">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646438">b</span><span class="op" id="7646439">,</span>&nbsp;<span class="ident" id="7646441">err</span>&nbsp;<span class="op" id="7646445">:=</span>&nbsp;<span class="ident" id="7646448">Marshal</span><span class="op" id="7646455">(</span><span class="ident" id="7646456">genValue</span><span class="op" id="7646464">(</span><span class="ident" id="7646465">n</span><span class="op" id="7646466">)</span><span class="op" id="7646467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646470">if</span>&nbsp;<span class="ident" id="7646473">err</span>&nbsp;<span class="op" id="7646477">!=</span>&nbsp;<span class="ident" id="7646480">nil</span>&nbsp;<span class="op" id="7646484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7646488">panic</span><span class="op" id="7646493">(</span><span class="ident" id="7646494">err</span><span class="op" id="7646497">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646503">jsonBig</span>&nbsp;<span class="op" id="7646511">=</span>&nbsp;<span class="ident" id="7646513">b</span><br>
<span class="lineno"></span><span class="op" id="7646515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7646518">func</span>&nbsp;<span class="ident" id="7646523">genValue</span><span class="op" id="7646531">(</span><span class="ident" id="7646532">n</span>&nbsp;<span class="builtintype" id="7646534">int</span><span class="op" id="7646537">)</span>&nbsp;<span class="keyword" id="7646539">interface</span><span class="op" id="7646548">{</span><span class="op" id="7646549">}</span>&nbsp;<span class="op" id="7646551">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646554">if</span>&nbsp;<span class="ident" id="7646557">n</span>&nbsp;<span class="op" id="7646559">&gt;</span>&nbsp;<span class="num" id="7646561">1</span>&nbsp;<span class="op" id="7646563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646567">switch</span>&nbsp;<span class="ident" id="7646574">rand</span><span class="op" id="7646578">.</span><span class="ident" id="7646579">Intn</span><span class="op" id="7646583">(</span><span class="num" id="7646584">2</span><span class="op" id="7646585">)</span>&nbsp;<span class="op" id="7646587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646591">case</span>&nbsp;<span class="num" id="7646596">0</span><span class="op" id="7646597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646602">return</span>&nbsp;<span class="ident" id="7646609">genArray</span><span class="op" id="7646617">(</span><span class="ident" id="7646618">n</span><span class="op" id="7646619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646623">case</span>&nbsp;<span class="num" id="7646628">1</span><span class="op" id="7646629">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646634">return</span>&nbsp;<span class="ident" id="7646641">genMap</span><span class="op" id="7646647">(</span><span class="ident" id="7646648">n</span><span class="op" id="7646649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646659">switch</span>&nbsp;<span class="ident" id="7646666">rand</span><span class="op" id="7646670">.</span><span class="ident" id="7646671">Intn</span><span class="op" id="7646675">(</span><span class="num" id="7646676">3</span><span class="op" id="7646677">)</span>&nbsp;<span class="op" id="7646679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646682">case</span>&nbsp;<span class="num" id="7646687">0</span><span class="op" id="7646688">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646692">return</span>&nbsp;<span class="ident" id="7646699">rand</span><span class="op" id="7646703">.</span><span class="ident" id="7646704">Intn</span><span class="op" id="7646708">(</span><span class="num" id="7646709">2</span><span class="op" id="7646710">)</span>&nbsp;<span class="op" id="7646712">==</span>&nbsp;<span class="num" id="7646715">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646718">case</span>&nbsp;<span class="num" id="7646723">1</span><span class="op" id="7646724">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646728">return</span>&nbsp;<span class="ident" id="7646735">rand</span><span class="op" id="7646739">.</span><span class="ident" id="7646740">NormFloat64</span><span class="op" id="7646751">(</span><span class="op" id="7646752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646755">case</span>&nbsp;<span class="num" id="7646760">2</span><span class="op" id="7646761">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646765">return</span>&nbsp;<span class="ident" id="7646772">genString</span><span class="op" id="7646781">(</span><span class="num" id="7646782">30</span><span class="op" id="7646784">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7646787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7646790">panic</span><span class="op" id="7646795">(</span><span class="string" id="7646796">&#34;unreachable&#34;</span><span class="op" id="7646809">)</span><br>
<span class="lineno"></span><span class="op" id="7646811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7646814">func</span>&nbsp;<span class="ident" id="7646819">genString</span><span class="op" id="7646828">(</span><span class="ident" id="7646829">stddev</span>&nbsp;<span class="builtintype" id="7646836">float64</span><span class="op" id="7646843">)</span>&nbsp;<span class="builtintype" id="7646845">string</span>&nbsp;<span class="op" id="7646852">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646855">n</span>&nbsp;<span class="op" id="7646857">:=</span>&nbsp;<span class="builtintype" id="7646860">int</span><span class="op" id="7646863">(</span><span class="ident" id="7646864">math</span><span class="op" id="7646868">.</span><span class="ident" id="7646869">Abs</span><span class="op" id="7646872">(</span><span class="ident" id="7646873">rand</span><span class="op" id="7646877">.</span><span class="ident" id="7646878">NormFloat64</span><span class="op" id="7646889">(</span><span class="op" id="7646890">)</span><span class="op" id="7646891">*</span><span class="ident" id="7646892">stddev</span>&nbsp;<span class="op" id="7646899">+</span>&nbsp;<span class="ident" id="7646901">stddev</span><span class="op" id="7646907">/</span><span class="num" id="7646908">2</span><span class="op" id="7646909">)</span><span class="op" id="7646910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646913">c</span>&nbsp;<span class="op" id="7646915">:=</span>&nbsp;<span class="builtinfunc" id="7646918">make</span><span class="op" id="7646922">(</span><span class="op" id="7646923">[</span><span class="op" id="7646924">]</span><span class="builtintype" id="7646925">rune</span><span class="op" id="7646929">,</span>&nbsp;<span class="ident" id="7646931">n</span><span class="op" id="7646932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646935">for</span>&nbsp;<span class="ident" id="7646939">i</span>&nbsp;<span class="op" id="7646941">:=</span>&nbsp;<span class="keyword" id="7646944">range</span>&nbsp;<span class="ident" id="7646950">c</span>&nbsp;<span class="op" id="7646952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7646956">f</span>&nbsp;<span class="op" id="7646958">:=</span>&nbsp;<span class="ident" id="7646961">math</span><span class="op" id="7646965">.</span><span class="ident" id="7646966">Abs</span><span class="op" id="7646969">(</span><span class="ident" id="7646970">rand</span><span class="op" id="7646974">.</span><span class="ident" id="7646975">NormFloat64</span><span class="op" id="7646986">(</span><span class="op" id="7646987">)</span><span class="op" id="7646988">*</span><span class="num" id="7646989">64</span>&nbsp;<span class="op" id="7646992">+</span>&nbsp;<span class="num" id="7646994">32</span><span class="op" id="7646996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647000">if</span>&nbsp;<span class="ident" id="7647003">f</span>&nbsp;<span class="op" id="7647005">&gt;</span>&nbsp;<span class="num" id="7647007">0x10ffff</span>&nbsp;<span class="op" id="7647016">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647021">f</span>&nbsp;<span class="op" id="7647023">=</span>&nbsp;<span class="num" id="7647025">0x10ffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647040">c</span><span class="op" id="7647041">[</span><span class="ident" id="7647042">i</span><span class="op" id="7647043">]</span>&nbsp;<span class="op" id="7647045">=</span>&nbsp;<span class="builtintype" id="7647047">rune</span><span class="op" id="7647051">(</span><span class="ident" id="7647052">f</span><span class="op" id="7647053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647059">return</span>&nbsp;<span class="builtintype" id="7647066">string</span><span class="op" id="7647072">(</span><span class="ident" id="7647073">c</span><span class="op" id="7647074">)</span><br>
<span class="lineno">285</span><span class="op" id="7647076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7647079">func</span>&nbsp;<span class="ident" id="7647084">genArray</span><span class="op" id="7647092">(</span><span class="ident" id="7647093">n</span>&nbsp;<span class="builtintype" id="7647095">int</span><span class="op" id="7647098">)</span>&nbsp;<span class="op" id="7647100">[</span><span class="op" id="7647101">]</span><span class="keyword" id="7647102">interface</span><span class="op" id="7647111">{</span><span class="op" id="7647112">}</span>&nbsp;<span class="op" id="7647114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647117">f</span>&nbsp;<span class="op" id="7647119">:=</span>&nbsp;<span class="builtintype" id="7647122">int</span><span class="op" id="7647125">(</span><span class="ident" id="7647126">math</span><span class="op" id="7647130">.</span><span class="ident" id="7647131">Abs</span><span class="op" id="7647134">(</span><span class="ident" id="7647135">rand</span><span class="op" id="7647139">.</span><span class="ident" id="7647140">NormFloat64</span><span class="op" id="7647151">(</span><span class="op" id="7647152">)</span><span class="op" id="7647153">)</span>&nbsp;<span class="op" id="7647155">*</span>&nbsp;<span class="ident" id="7647157">math</span><span class="op" id="7647161">.</span><span class="ident" id="7647162">Min</span><span class="op" id="7647165">(</span><span class="num" id="7647166">10</span><span class="op" id="7647168">,</span>&nbsp;<span class="builtintype" id="7647170">float64</span><span class="op" id="7647177">(</span><span class="ident" id="7647178">n</span><span class="op" id="7647179">/</span><span class="num" id="7647180">2</span><span class="op" id="7647181">)</span><span class="op" id="7647182">)</span><span class="op" id="7647183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647186">if</span>&nbsp;<span class="ident" id="7647189">f</span>&nbsp;<span class="op" id="7647191">&gt;</span>&nbsp;<span class="ident" id="7647193">n</span>&nbsp;<span class="op" id="7647195">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647199">f</span>&nbsp;<span class="op" id="7647201">=</span>&nbsp;<span class="ident" id="7647203">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647209">if</span>&nbsp;<span class="ident" id="7647212">f</span>&nbsp;<span class="op" id="7647214">&lt;</span>&nbsp;<span class="num" id="7647216">1</span>&nbsp;<span class="op" id="7647218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647222">f</span>&nbsp;<span class="op" id="7647224">=</span>&nbsp;<span class="num" id="7647226">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647229">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647232">x</span>&nbsp;<span class="op" id="7647234">:=</span>&nbsp;<span class="builtinfunc" id="7647237">make</span><span class="op" id="7647241">(</span><span class="op" id="7647242">[</span><span class="op" id="7647243">]</span><span class="keyword" id="7647244">interface</span><span class="op" id="7647253">{</span><span class="op" id="7647254">}</span><span class="op" id="7647255">,</span>&nbsp;<span class="ident" id="7647257">f</span><span class="op" id="7647258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647261">for</span>&nbsp;<span class="ident" id="7647265">i</span>&nbsp;<span class="op" id="7647267">:=</span>&nbsp;<span class="keyword" id="7647270">range</span>&nbsp;<span class="ident" id="7647276">x</span>&nbsp;<span class="op" id="7647278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647282">x</span><span class="op" id="7647283">[</span><span class="ident" id="7647284">i</span><span class="op" id="7647285">]</span>&nbsp;<span class="op" id="7647287">=</span>&nbsp;<span class="ident" id="7647289">genValue</span><span class="op" id="7647297">(</span><span class="op" id="7647298">(</span><span class="op" id="7647299">(</span><span class="ident" id="7647300">i</span><span class="op" id="7647301">+</span><span class="num" id="7647302">1</span><span class="op" id="7647303">)</span><span class="op" id="7647304">*</span><span class="ident" id="7647305">n</span><span class="op" id="7647306">)</span><span class="op" id="7647307">/</span><span class="ident" id="7647308">f</span>&nbsp;<span class="op" id="7647310">-</span>&nbsp;<span class="op" id="7647312">(</span><span class="ident" id="7647313">i</span><span class="op" id="7647314">*</span><span class="ident" id="7647315">n</span><span class="op" id="7647316">)</span><span class="op" id="7647317">/</span><span class="ident" id="7647318">f</span><span class="op" id="7647319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647325">return</span>&nbsp;<span class="ident" id="7647332">x</span><br>
<span class="lineno">300</span><span class="op" id="7647334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7647337">func</span>&nbsp;<span class="ident" id="7647342">genMap</span><span class="op" id="7647348">(</span><span class="ident" id="7647349">n</span>&nbsp;<span class="builtintype" id="7647351">int</span><span class="op" id="7647354">)</span>&nbsp;<span class="keyword" id="7647356">map</span><span class="op" id="7647359">[</span><span class="builtintype" id="7647360">string</span><span class="op" id="7647366">]</span><span class="keyword" id="7647367">interface</span><span class="op" id="7647376">{</span><span class="op" id="7647377">}</span>&nbsp;<span class="op" id="7647379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647382">f</span>&nbsp;<span class="op" id="7647384">:=</span>&nbsp;<span class="builtintype" id="7647387">int</span><span class="op" id="7647390">(</span><span class="ident" id="7647391">math</span><span class="op" id="7647395">.</span><span class="ident" id="7647396">Abs</span><span class="op" id="7647399">(</span><span class="ident" id="7647400">rand</span><span class="op" id="7647404">.</span><span class="ident" id="7647405">NormFloat64</span><span class="op" id="7647416">(</span><span class="op" id="7647417">)</span><span class="op" id="7647418">)</span>&nbsp;<span class="op" id="7647420">*</span>&nbsp;<span class="ident" id="7647422">math</span><span class="op" id="7647426">.</span><span class="ident" id="7647427">Min</span><span class="op" id="7647430">(</span><span class="num" id="7647431">10</span><span class="op" id="7647433">,</span>&nbsp;<span class="builtintype" id="7647435">float64</span><span class="op" id="7647442">(</span><span class="ident" id="7647443">n</span><span class="op" id="7647444">/</span><span class="num" id="7647445">2</span><span class="op" id="7647446">)</span><span class="op" id="7647447">)</span><span class="op" id="7647448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647451">if</span>&nbsp;<span class="ident" id="7647454">f</span>&nbsp;<span class="op" id="7647456">&gt;</span>&nbsp;<span class="ident" id="7647458">n</span>&nbsp;<span class="op" id="7647460">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647464">f</span>&nbsp;<span class="op" id="7647466">=</span>&nbsp;<span class="ident" id="7647468">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647474">if</span>&nbsp;<span class="ident" id="7647477">n</span>&nbsp;<span class="op" id="7647479">&gt;</span>&nbsp;<span class="num" id="7647481">0</span>&nbsp;<span class="op" id="7647483">&amp;&amp;</span>&nbsp;<span class="ident" id="7647486">f</span>&nbsp;<span class="op" id="7647488">==</span>&nbsp;<span class="num" id="7647491">0</span>&nbsp;<span class="op" id="7647493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647497">f</span>&nbsp;<span class="op" id="7647499">=</span>&nbsp;<span class="num" id="7647501">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647504">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647507">x</span>&nbsp;<span class="op" id="7647509">:=</span>&nbsp;<span class="builtinfunc" id="7647512">make</span><span class="op" id="7647516">(</span><span class="keyword" id="7647517">map</span><span class="op" id="7647520">[</span><span class="builtintype" id="7647521">string</span><span class="op" id="7647527">]</span><span class="keyword" id="7647528">interface</span><span class="op" id="7647537">{</span><span class="op" id="7647538">}</span><span class="op" id="7647539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647542">for</span>&nbsp;<span class="ident" id="7647546">i</span>&nbsp;<span class="op" id="7647548">:=</span>&nbsp;<span class="num" id="7647551">0</span><span class="op" id="7647552">;</span>&nbsp;<span class="ident" id="7647554">i</span>&nbsp;<span class="op" id="7647556">&lt;</span>&nbsp;<span class="ident" id="7647558">f</span><span class="op" id="7647559">;</span>&nbsp;<span class="ident" id="7647561">i</span><span class="op" id="7647562">++</span>&nbsp;<span class="op" id="7647565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7647569">x</span><span class="op" id="7647570">[</span><span class="ident" id="7647571">genString</span><span class="op" id="7647580">(</span><span class="num" id="7647581">10</span><span class="op" id="7647583">)</span><span class="op" id="7647584">]</span>&nbsp;<span class="op" id="7647586">=</span>&nbsp;<span class="ident" id="7647588">genValue</span><span class="op" id="7647596">(</span><span class="op" id="7647597">(</span><span class="op" id="7647598">(</span><span class="ident" id="7647599">i</span><span class="op" id="7647600">+</span><span class="num" id="7647601">1</span><span class="op" id="7647602">)</span><span class="op" id="7647603">*</span><span class="ident" id="7647604">n</span><span class="op" id="7647605">)</span><span class="op" id="7647606">/</span><span class="ident" id="7647607">f</span>&nbsp;<span class="op" id="7647609">-</span>&nbsp;<span class="op" id="7647611">(</span><span class="ident" id="7647612">i</span><span class="op" id="7647613">*</span><span class="ident" id="7647614">n</span><span class="op" id="7647615">)</span><span class="op" id="7647616">/</span><span class="ident" id="7647617">f</span><span class="op" id="7647618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7647621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7647624">return</span>&nbsp;<span class="ident" id="7647631">x</span><br>
<span class="lineno">315</span><span class="op" id="7647633">}</span>
</div>
</body>
</html>
