<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/color</h2>
<ul>
<li><a href="/gostd/image/color/color.go.html" class="current">color.go</a></li>
<li><a href="/gostd/image/color/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/color/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3397400">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3397455">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3397509">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3397560">//&nbsp;Package&nbsp;color&nbsp;implements&nbsp;a&nbsp;basic&nbsp;color&nbsp;library.</span><br>
<span class="lineno"></span><span class="keyword" id="3397611">package</span>&nbsp;<span class="ident" id="3397619">color</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3397626">//&nbsp;Color&nbsp;can&nbsp;convert&nbsp;itself&nbsp;to&nbsp;alpha-premultiplied&nbsp;16-bits&nbsp;per&nbsp;channel&nbsp;RGBA.</span><br>
<span class="lineno"></span><span class="comment" id="3397703">//&nbsp;The&nbsp;conversion&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno">10</span><span class="keyword" id="3397735">type</span>&nbsp;<span class="ident" id="3397740">Color</span>&nbsp;<span class="keyword" id="3397746">interface</span>&nbsp;<span class="op" id="3397756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3397759">//&nbsp;RGBA&nbsp;returns&nbsp;the&nbsp;alpha-premultiplied&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3397834">//&nbsp;for&nbsp;the&nbsp;color.&nbsp;Each&nbsp;value&nbsp;ranges&nbsp;within&nbsp;[0,&nbsp;0xFFFF],&nbsp;but&nbsp;is&nbsp;represented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3397910">//&nbsp;by&nbsp;a&nbsp;uint32&nbsp;so&nbsp;that&nbsp;multiplying&nbsp;by&nbsp;a&nbsp;blend&nbsp;factor&nbsp;up&nbsp;to&nbsp;0xFFFF&nbsp;will&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3397986">//&nbsp;overflow.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398000">RGBA</span><span class="op" id="3398004">(</span><span class="op" id="3398005">)</span>&nbsp;<span class="op" id="3398007">(</span><span class="ident" id="3398008">r</span><span class="op" id="3398009">,</span>&nbsp;<span class="ident" id="3398011">g</span><span class="op" id="3398012">,</span>&nbsp;<span class="ident" id="3398014">b</span><span class="op" id="3398015">,</span>&nbsp;<span class="ident" id="3398017">a</span>&nbsp;<span class="builtintype" id="3398019">uint32</span><span class="op" id="3398025">)</span><br>
<span class="lineno"></span><span class="op" id="3398027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3398030">//&nbsp;RGBA&nbsp;represents&nbsp;a&nbsp;traditional&nbsp;32-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="3398097">//&nbsp;having&nbsp;8&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno">20</span><span class="keyword" id="3398154">type</span>&nbsp;<span class="ident" id="3398159">RGBA</span>&nbsp;<span class="keyword" id="3398164">struct</span>&nbsp;<span class="op" id="3398171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398174">R</span><span class="op" id="3398175">,</span>&nbsp;<span class="ident" id="3398177">G</span><span class="op" id="3398178">,</span>&nbsp;<span class="ident" id="3398180">B</span><span class="op" id="3398181">,</span>&nbsp;<span class="ident" id="3398183">A</span>&nbsp;<span class="builtintype" id="3398185">uint8</span><br>
<span class="lineno"></span><span class="op" id="3398191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3398194">func</span>&nbsp;<span class="op" id="3398199">(</span><span class="ident" id="3398200">c</span>&nbsp;<span class="ident" id="3398202">RGBA</span><span class="op" id="3398206">)</span>&nbsp;<span class="ident" id="3398208">RGBA</span><span class="op" id="3398212">(</span><span class="op" id="3398213">)</span>&nbsp;<span class="op" id="3398215">(</span><span class="ident" id="3398216">r</span><span class="op" id="3398217">,</span>&nbsp;<span class="ident" id="3398219">g</span><span class="op" id="3398220">,</span>&nbsp;<span class="ident" id="3398222">b</span><span class="op" id="3398223">,</span>&nbsp;<span class="ident" id="3398225">a</span>&nbsp;<span class="builtintype" id="3398227">uint32</span><span class="op" id="3398233">)</span>&nbsp;<span class="op" id="3398235">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398238">r</span>&nbsp;<span class="op" id="3398240">=</span>&nbsp;<span class="builtintype" id="3398242">uint32</span><span class="op" id="3398248">(</span><span class="ident" id="3398249">c</span><span class="op" id="3398250">.</span><span class="ident" id="3398251">R</span><span class="op" id="3398252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398255">r</span>&nbsp;<span class="op" id="3398257">|=</span>&nbsp;<span class="ident" id="3398260">r</span>&nbsp;<span class="op" id="3398262">&lt;&lt;</span>&nbsp;<span class="num" id="3398265">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398268">g</span>&nbsp;<span class="op" id="3398270">=</span>&nbsp;<span class="builtintype" id="3398272">uint32</span><span class="op" id="3398278">(</span><span class="ident" id="3398279">c</span><span class="op" id="3398280">.</span><span class="ident" id="3398281">G</span><span class="op" id="3398282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398285">g</span>&nbsp;<span class="op" id="3398287">|=</span>&nbsp;<span class="ident" id="3398290">g</span>&nbsp;<span class="op" id="3398292">&lt;&lt;</span>&nbsp;<span class="num" id="3398295">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398298">b</span>&nbsp;<span class="op" id="3398300">=</span>&nbsp;<span class="builtintype" id="3398302">uint32</span><span class="op" id="3398308">(</span><span class="ident" id="3398309">c</span><span class="op" id="3398310">.</span><span class="ident" id="3398311">B</span><span class="op" id="3398312">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398315">b</span>&nbsp;<span class="op" id="3398317">|=</span>&nbsp;<span class="ident" id="3398320">b</span>&nbsp;<span class="op" id="3398322">&lt;&lt;</span>&nbsp;<span class="num" id="3398325">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398328">a</span>&nbsp;<span class="op" id="3398330">=</span>&nbsp;<span class="builtintype" id="3398332">uint32</span><span class="op" id="3398338">(</span><span class="ident" id="3398339">c</span><span class="op" id="3398340">.</span><span class="ident" id="3398341">A</span><span class="op" id="3398342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398345">a</span>&nbsp;<span class="op" id="3398347">|=</span>&nbsp;<span class="ident" id="3398350">a</span>&nbsp;<span class="op" id="3398352">&lt;&lt;</span>&nbsp;<span class="num" id="3398355">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398358">return</span><br>
<span class="lineno"></span><span class="op" id="3398365">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="3398368">//&nbsp;RGBA64&nbsp;represents&nbsp;a&nbsp;64-bit&nbsp;alpha-premultiplied&nbsp;color,</span><br>
<span class="lineno"></span><span class="comment" id="3398425">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="3398483">type</span>&nbsp;<span class="ident" id="3398488">RGBA64</span>&nbsp;<span class="keyword" id="3398495">struct</span>&nbsp;<span class="op" id="3398502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398505">R</span><span class="op" id="3398506">,</span>&nbsp;<span class="ident" id="3398508">G</span><span class="op" id="3398509">,</span>&nbsp;<span class="ident" id="3398511">B</span><span class="op" id="3398512">,</span>&nbsp;<span class="ident" id="3398514">A</span>&nbsp;<span class="builtintype" id="3398516">uint16</span><br>
<span class="lineno">40</span><span class="op" id="3398523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3398526">func</span>&nbsp;<span class="op" id="3398531">(</span><span class="ident" id="3398532">c</span>&nbsp;<span class="ident" id="3398534">RGBA64</span><span class="op" id="3398540">)</span>&nbsp;<span class="ident" id="3398542">RGBA</span><span class="op" id="3398546">(</span><span class="op" id="3398547">)</span>&nbsp;<span class="op" id="3398549">(</span><span class="ident" id="3398550">r</span><span class="op" id="3398551">,</span>&nbsp;<span class="ident" id="3398553">g</span><span class="op" id="3398554">,</span>&nbsp;<span class="ident" id="3398556">b</span><span class="op" id="3398557">,</span>&nbsp;<span class="ident" id="3398559">a</span>&nbsp;<span class="builtintype" id="3398561">uint32</span><span class="op" id="3398567">)</span>&nbsp;<span class="op" id="3398569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398572">return</span>&nbsp;<span class="builtintype" id="3398579">uint32</span><span class="op" id="3398585">(</span><span class="ident" id="3398586">c</span><span class="op" id="3398587">.</span><span class="ident" id="3398588">R</span><span class="op" id="3398589">)</span><span class="op" id="3398590">,</span>&nbsp;<span class="builtintype" id="3398592">uint32</span><span class="op" id="3398598">(</span><span class="ident" id="3398599">c</span><span class="op" id="3398600">.</span><span class="ident" id="3398601">G</span><span class="op" id="3398602">)</span><span class="op" id="3398603">,</span>&nbsp;<span class="builtintype" id="3398605">uint32</span><span class="op" id="3398611">(</span><span class="ident" id="3398612">c</span><span class="op" id="3398613">.</span><span class="ident" id="3398614">B</span><span class="op" id="3398615">)</span><span class="op" id="3398616">,</span>&nbsp;<span class="builtintype" id="3398618">uint32</span><span class="op" id="3398624">(</span><span class="ident" id="3398625">c</span><span class="op" id="3398626">.</span><span class="ident" id="3398627">A</span><span class="op" id="3398628">)</span><br>
<span class="lineno"></span><span class="op" id="3398630">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="3398633">//&nbsp;NRGBA&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;32-bit&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3398693">type</span>&nbsp;<span class="ident" id="3398698">NRGBA</span>&nbsp;<span class="keyword" id="3398704">struct</span>&nbsp;<span class="op" id="3398711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398714">R</span><span class="op" id="3398715">,</span>&nbsp;<span class="ident" id="3398717">G</span><span class="op" id="3398718">,</span>&nbsp;<span class="ident" id="3398720">B</span><span class="op" id="3398721">,</span>&nbsp;<span class="ident" id="3398723">A</span>&nbsp;<span class="builtintype" id="3398725">uint8</span><br>
<span class="lineno"></span><span class="op" id="3398731">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3398734">func</span>&nbsp;<span class="op" id="3398739">(</span><span class="ident" id="3398740">c</span>&nbsp;<span class="ident" id="3398742">NRGBA</span><span class="op" id="3398747">)</span>&nbsp;<span class="ident" id="3398749">RGBA</span><span class="op" id="3398753">(</span><span class="op" id="3398754">)</span>&nbsp;<span class="op" id="3398756">(</span><span class="ident" id="3398757">r</span><span class="op" id="3398758">,</span>&nbsp;<span class="ident" id="3398760">g</span><span class="op" id="3398761">,</span>&nbsp;<span class="ident" id="3398763">b</span><span class="op" id="3398764">,</span>&nbsp;<span class="ident" id="3398766">a</span>&nbsp;<span class="builtintype" id="3398768">uint32</span><span class="op" id="3398774">)</span>&nbsp;<span class="op" id="3398776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398779">r</span>&nbsp;<span class="op" id="3398781">=</span>&nbsp;<span class="builtintype" id="3398783">uint32</span><span class="op" id="3398789">(</span><span class="ident" id="3398790">c</span><span class="op" id="3398791">.</span><span class="ident" id="3398792">R</span><span class="op" id="3398793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398796">r</span>&nbsp;<span class="op" id="3398798">|=</span>&nbsp;<span class="ident" id="3398801">r</span>&nbsp;<span class="op" id="3398803">&lt;&lt;</span>&nbsp;<span class="num" id="3398806">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398809">r</span>&nbsp;<span class="op" id="3398811">*=</span>&nbsp;<span class="builtintype" id="3398814">uint32</span><span class="op" id="3398820">(</span><span class="ident" id="3398821">c</span><span class="op" id="3398822">.</span><span class="ident" id="3398823">A</span><span class="op" id="3398824">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398827">r</span>&nbsp;<span class="op" id="3398829">/=</span>&nbsp;<span class="num" id="3398832">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398838">g</span>&nbsp;<span class="op" id="3398840">=</span>&nbsp;<span class="builtintype" id="3398842">uint32</span><span class="op" id="3398848">(</span><span class="ident" id="3398849">c</span><span class="op" id="3398850">.</span><span class="ident" id="3398851">G</span><span class="op" id="3398852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398855">g</span>&nbsp;<span class="op" id="3398857">|=</span>&nbsp;<span class="ident" id="3398860">g</span>&nbsp;<span class="op" id="3398862">&lt;&lt;</span>&nbsp;<span class="num" id="3398865">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398868">g</span>&nbsp;<span class="op" id="3398870">*=</span>&nbsp;<span class="builtintype" id="3398873">uint32</span><span class="op" id="3398879">(</span><span class="ident" id="3398880">c</span><span class="op" id="3398881">.</span><span class="ident" id="3398882">A</span><span class="op" id="3398883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398886">g</span>&nbsp;<span class="op" id="3398888">/=</span>&nbsp;<span class="num" id="3398891">0xff</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398897">b</span>&nbsp;<span class="op" id="3398899">=</span>&nbsp;<span class="builtintype" id="3398901">uint32</span><span class="op" id="3398907">(</span><span class="ident" id="3398908">c</span><span class="op" id="3398909">.</span><span class="ident" id="3398910">B</span><span class="op" id="3398911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398914">b</span>&nbsp;<span class="op" id="3398916">|=</span>&nbsp;<span class="ident" id="3398919">b</span>&nbsp;<span class="op" id="3398921">&lt;&lt;</span>&nbsp;<span class="num" id="3398924">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398927">b</span>&nbsp;<span class="op" id="3398929">*=</span>&nbsp;<span class="builtintype" id="3398932">uint32</span><span class="op" id="3398938">(</span><span class="ident" id="3398939">c</span><span class="op" id="3398940">.</span><span class="ident" id="3398941">A</span><span class="op" id="3398942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398945">b</span>&nbsp;<span class="op" id="3398947">/=</span>&nbsp;<span class="num" id="3398950">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398956">a</span>&nbsp;<span class="op" id="3398958">=</span>&nbsp;<span class="builtintype" id="3398960">uint32</span><span class="op" id="3398966">(</span><span class="ident" id="3398967">c</span><span class="op" id="3398968">.</span><span class="ident" id="3398969">A</span><span class="op" id="3398970">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3398973">a</span>&nbsp;<span class="op" id="3398975">|=</span>&nbsp;<span class="ident" id="3398978">a</span>&nbsp;<span class="op" id="3398980">&lt;&lt;</span>&nbsp;<span class="num" id="3398983">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3398986">return</span><br>
<span class="lineno"></span><span class="op" id="3398993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3398996">//&nbsp;NRGBA64&nbsp;represents&nbsp;a&nbsp;non-alpha-premultiplied&nbsp;64-bit&nbsp;color,</span><br>
<span class="lineno">70</span><span class="comment" id="3399058">//&nbsp;having&nbsp;16&nbsp;bits&nbsp;for&nbsp;each&nbsp;of&nbsp;red,&nbsp;green,&nbsp;blue&nbsp;and&nbsp;alpha.</span><br>
<span class="lineno"></span><span class="keyword" id="3399116">type</span>&nbsp;<span class="ident" id="3399121">NRGBA64</span>&nbsp;<span class="keyword" id="3399129">struct</span>&nbsp;<span class="op" id="3399136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399139">R</span><span class="op" id="3399140">,</span>&nbsp;<span class="ident" id="3399142">G</span><span class="op" id="3399143">,</span>&nbsp;<span class="ident" id="3399145">B</span><span class="op" id="3399146">,</span>&nbsp;<span class="ident" id="3399148">A</span>&nbsp;<span class="builtintype" id="3399150">uint16</span><br>
<span class="lineno"></span><span class="op" id="3399157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="3399160">func</span>&nbsp;<span class="op" id="3399165">(</span><span class="ident" id="3399166">c</span>&nbsp;<span class="ident" id="3399168">NRGBA64</span><span class="op" id="3399175">)</span>&nbsp;<span class="ident" id="3399177">RGBA</span><span class="op" id="3399181">(</span><span class="op" id="3399182">)</span>&nbsp;<span class="op" id="3399184">(</span><span class="ident" id="3399185">r</span><span class="op" id="3399186">,</span>&nbsp;<span class="ident" id="3399188">g</span><span class="op" id="3399189">,</span>&nbsp;<span class="ident" id="3399191">b</span><span class="op" id="3399192">,</span>&nbsp;<span class="ident" id="3399194">a</span>&nbsp;<span class="builtintype" id="3399196">uint32</span><span class="op" id="3399202">)</span>&nbsp;<span class="op" id="3399204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399207">r</span>&nbsp;<span class="op" id="3399209">=</span>&nbsp;<span class="builtintype" id="3399211">uint32</span><span class="op" id="3399217">(</span><span class="ident" id="3399218">c</span><span class="op" id="3399219">.</span><span class="ident" id="3399220">R</span><span class="op" id="3399221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399224">r</span>&nbsp;<span class="op" id="3399226">*=</span>&nbsp;<span class="builtintype" id="3399229">uint32</span><span class="op" id="3399235">(</span><span class="ident" id="3399236">c</span><span class="op" id="3399237">.</span><span class="ident" id="3399238">A</span><span class="op" id="3399239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399242">r</span>&nbsp;<span class="op" id="3399244">/=</span>&nbsp;<span class="num" id="3399247">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399255">g</span>&nbsp;<span class="op" id="3399257">=</span>&nbsp;<span class="builtintype" id="3399259">uint32</span><span class="op" id="3399265">(</span><span class="ident" id="3399266">c</span><span class="op" id="3399267">.</span><span class="ident" id="3399268">G</span><span class="op" id="3399269">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399272">g</span>&nbsp;<span class="op" id="3399274">*=</span>&nbsp;<span class="builtintype" id="3399277">uint32</span><span class="op" id="3399283">(</span><span class="ident" id="3399284">c</span><span class="op" id="3399285">.</span><span class="ident" id="3399286">A</span><span class="op" id="3399287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399290">g</span>&nbsp;<span class="op" id="3399292">/=</span>&nbsp;<span class="num" id="3399295">0xffff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399303">b</span>&nbsp;<span class="op" id="3399305">=</span>&nbsp;<span class="builtintype" id="3399307">uint32</span><span class="op" id="3399313">(</span><span class="ident" id="3399314">c</span><span class="op" id="3399315">.</span><span class="ident" id="3399316">B</span><span class="op" id="3399317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399320">b</span>&nbsp;<span class="op" id="3399322">*=</span>&nbsp;<span class="builtintype" id="3399325">uint32</span><span class="op" id="3399331">(</span><span class="ident" id="3399332">c</span><span class="op" id="3399333">.</span><span class="ident" id="3399334">A</span><span class="op" id="3399335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399338">b</span>&nbsp;<span class="op" id="3399340">/=</span>&nbsp;<span class="num" id="3399343">0xffff</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399351">a</span>&nbsp;<span class="op" id="3399353">=</span>&nbsp;<span class="builtintype" id="3399355">uint32</span><span class="op" id="3399361">(</span><span class="ident" id="3399362">c</span><span class="op" id="3399363">.</span><span class="ident" id="3399364">A</span><span class="op" id="3399365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399368">return</span><br>
<span class="lineno"></span><span class="op" id="3399375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3399378">//&nbsp;Alpha&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno">90</span><span class="keyword" id="3399420">type</span>&nbsp;<span class="ident" id="3399425">Alpha</span>&nbsp;<span class="keyword" id="3399431">struct</span>&nbsp;<span class="op" id="3399438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399441">A</span>&nbsp;<span class="builtintype" id="3399443">uint8</span><br>
<span class="lineno"></span><span class="op" id="3399449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3399452">func</span>&nbsp;<span class="op" id="3399457">(</span><span class="ident" id="3399458">c</span>&nbsp;<span class="ident" id="3399460">Alpha</span><span class="op" id="3399465">)</span>&nbsp;<span class="ident" id="3399467">RGBA</span><span class="op" id="3399471">(</span><span class="op" id="3399472">)</span>&nbsp;<span class="op" id="3399474">(</span><span class="ident" id="3399475">r</span><span class="op" id="3399476">,</span>&nbsp;<span class="ident" id="3399478">g</span><span class="op" id="3399479">,</span>&nbsp;<span class="ident" id="3399481">b</span><span class="op" id="3399482">,</span>&nbsp;<span class="ident" id="3399484">a</span>&nbsp;<span class="builtintype" id="3399486">uint32</span><span class="op" id="3399492">)</span>&nbsp;<span class="op" id="3399494">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399497">a</span>&nbsp;<span class="op" id="3399499">=</span>&nbsp;<span class="builtintype" id="3399501">uint32</span><span class="op" id="3399507">(</span><span class="ident" id="3399508">c</span><span class="op" id="3399509">.</span><span class="ident" id="3399510">A</span><span class="op" id="3399511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399514">a</span>&nbsp;<span class="op" id="3399516">|=</span>&nbsp;<span class="ident" id="3399519">a</span>&nbsp;<span class="op" id="3399521">&lt;&lt;</span>&nbsp;<span class="num" id="3399524">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399527">return</span>&nbsp;<span class="ident" id="3399534">a</span><span class="op" id="3399535">,</span>&nbsp;<span class="ident" id="3399537">a</span><span class="op" id="3399538">,</span>&nbsp;<span class="ident" id="3399540">a</span><span class="op" id="3399541">,</span>&nbsp;<span class="ident" id="3399543">a</span><br>
<span class="lineno"></span><span class="op" id="3399545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="3399548">//&nbsp;Alpha16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;alpha&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3399592">type</span>&nbsp;<span class="ident" id="3399597">Alpha16</span>&nbsp;<span class="keyword" id="3399605">struct</span>&nbsp;<span class="op" id="3399612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399615">A</span>&nbsp;<span class="builtintype" id="3399617">uint16</span><br>
<span class="lineno"></span><span class="op" id="3399624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="3399627">func</span>&nbsp;<span class="op" id="3399632">(</span><span class="ident" id="3399633">c</span>&nbsp;<span class="ident" id="3399635">Alpha16</span><span class="op" id="3399642">)</span>&nbsp;<span class="ident" id="3399644">RGBA</span><span class="op" id="3399648">(</span><span class="op" id="3399649">)</span>&nbsp;<span class="op" id="3399651">(</span><span class="ident" id="3399652">r</span><span class="op" id="3399653">,</span>&nbsp;<span class="ident" id="3399655">g</span><span class="op" id="3399656">,</span>&nbsp;<span class="ident" id="3399658">b</span><span class="op" id="3399659">,</span>&nbsp;<span class="ident" id="3399661">a</span>&nbsp;<span class="builtintype" id="3399663">uint32</span><span class="op" id="3399669">)</span>&nbsp;<span class="op" id="3399671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399674">a</span>&nbsp;<span class="op" id="3399676">=</span>&nbsp;<span class="builtintype" id="3399678">uint32</span><span class="op" id="3399684">(</span><span class="ident" id="3399685">c</span><span class="op" id="3399686">.</span><span class="ident" id="3399687">A</span><span class="op" id="3399688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399691">return</span>&nbsp;<span class="ident" id="3399698">a</span><span class="op" id="3399699">,</span>&nbsp;<span class="ident" id="3399701">a</span><span class="op" id="3399702">,</span>&nbsp;<span class="ident" id="3399704">a</span><span class="op" id="3399705">,</span>&nbsp;<span class="ident" id="3399707">a</span><br>
<span class="lineno"></span><span class="op" id="3399709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="3399712">//&nbsp;Gray&nbsp;represents&nbsp;an&nbsp;8-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3399757">type</span>&nbsp;<span class="ident" id="3399762">Gray</span>&nbsp;<span class="keyword" id="3399767">struct</span>&nbsp;<span class="op" id="3399774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399777">Y</span>&nbsp;<span class="builtintype" id="3399779">uint8</span><br>
<span class="lineno"></span><span class="op" id="3399785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="3399788">func</span>&nbsp;<span class="op" id="3399793">(</span><span class="ident" id="3399794">c</span>&nbsp;<span class="ident" id="3399796">Gray</span><span class="op" id="3399800">)</span>&nbsp;<span class="ident" id="3399802">RGBA</span><span class="op" id="3399806">(</span><span class="op" id="3399807">)</span>&nbsp;<span class="op" id="3399809">(</span><span class="ident" id="3399810">r</span><span class="op" id="3399811">,</span>&nbsp;<span class="ident" id="3399813">g</span><span class="op" id="3399814">,</span>&nbsp;<span class="ident" id="3399816">b</span><span class="op" id="3399817">,</span>&nbsp;<span class="ident" id="3399819">a</span>&nbsp;<span class="builtintype" id="3399821">uint32</span><span class="op" id="3399827">)</span>&nbsp;<span class="op" id="3399829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399832">y</span>&nbsp;<span class="op" id="3399834">:=</span>&nbsp;<span class="builtintype" id="3399837">uint32</span><span class="op" id="3399843">(</span><span class="ident" id="3399844">c</span><span class="op" id="3399845">.</span><span class="ident" id="3399846">Y</span><span class="op" id="3399847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399850">y</span>&nbsp;<span class="op" id="3399852">|=</span>&nbsp;<span class="ident" id="3399855">y</span>&nbsp;<span class="op" id="3399857">&lt;&lt;</span>&nbsp;<span class="num" id="3399860">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3399863">return</span>&nbsp;<span class="ident" id="3399870">y</span><span class="op" id="3399871">,</span>&nbsp;<span class="ident" id="3399873">y</span><span class="op" id="3399874">,</span>&nbsp;<span class="ident" id="3399876">y</span><span class="op" id="3399877">,</span>&nbsp;<span class="num" id="3399879">0xffff</span><br>
<span class="lineno"></span><span class="op" id="3399886">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3399889">//&nbsp;Gray16&nbsp;represents&nbsp;a&nbsp;16-bit&nbsp;grayscale&nbsp;color.</span><br>
<span class="lineno"></span><span class="keyword" id="3399936">type</span>&nbsp;<span class="ident" id="3399941">Gray16</span>&nbsp;<span class="keyword" id="3399948">struct</span>&nbsp;<span class="op" id="3399955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3399958">Y</span>&nbsp;<span class="builtintype" id="3399960">uint16</span><br>
<span class="lineno"></span><span class="op" id="3399967">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="3399970">func</span>&nbsp;<span class="op" id="3399975">(</span><span class="ident" id="3399976">c</span>&nbsp;<span class="ident" id="3399978">Gray16</span><span class="op" id="3399984">)</span>&nbsp;<span class="ident" id="3399986">RGBA</span><span class="op" id="3399990">(</span><span class="op" id="3399991">)</span>&nbsp;<span class="op" id="3399993">(</span><span class="ident" id="3399994">r</span><span class="op" id="3399995">,</span>&nbsp;<span class="ident" id="3399997">g</span><span class="op" id="3399998">,</span>&nbsp;<span class="ident" id="3400000">b</span><span class="op" id="3400001">,</span>&nbsp;<span class="ident" id="3400003">a</span>&nbsp;<span class="builtintype" id="3400005">uint32</span><span class="op" id="3400011">)</span>&nbsp;<span class="op" id="3400013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400016">y</span>&nbsp;<span class="op" id="3400018">:=</span>&nbsp;<span class="builtintype" id="3400021">uint32</span><span class="op" id="3400027">(</span><span class="ident" id="3400028">c</span><span class="op" id="3400029">.</span><span class="ident" id="3400030">Y</span><span class="op" id="3400031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400034">return</span>&nbsp;<span class="ident" id="3400041">y</span><span class="op" id="3400042">,</span>&nbsp;<span class="ident" id="3400044">y</span><span class="op" id="3400045">,</span>&nbsp;<span class="ident" id="3400047">y</span><span class="op" id="3400048">,</span>&nbsp;<span class="num" id="3400050">0xffff</span><br>
<span class="lineno"></span><span class="op" id="3400057">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="3400060">//&nbsp;Model&nbsp;can&nbsp;convert&nbsp;any&nbsp;Color&nbsp;to&nbsp;one&nbsp;from&nbsp;its&nbsp;own&nbsp;color&nbsp;model.&nbsp;The&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="3400139">//&nbsp;may&nbsp;be&nbsp;lossy.</span><br>
<span class="lineno"></span><span class="keyword" id="3400156">type</span>&nbsp;<span class="ident" id="3400161">Model</span>&nbsp;<span class="keyword" id="3400167">interface</span>&nbsp;<span class="op" id="3400177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400180">Convert</span><span class="op" id="3400187">(</span><span class="ident" id="3400188">c</span>&nbsp;<span class="ident" id="3400190">Color</span><span class="op" id="3400195">)</span>&nbsp;<span class="ident" id="3400197">Color</span><br>
<span class="lineno">135</span><span class="op" id="3400203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3400206">//&nbsp;ModelFunc&nbsp;returns&nbsp;a&nbsp;Model&nbsp;that&nbsp;invokes&nbsp;f&nbsp;to&nbsp;implement&nbsp;the&nbsp;conversion.</span><br>
<span class="lineno"></span><span class="keyword" id="3400279">func</span>&nbsp;<span class="ident" id="3400284">ModelFunc</span><span class="op" id="3400293">(</span><span class="ident" id="3400294">f</span>&nbsp;<span class="keyword" id="3400296">func</span><span class="op" id="3400300">(</span><span class="ident" id="3400301">Color</span><span class="op" id="3400306">)</span>&nbsp;<span class="ident" id="3400308">Color</span><span class="op" id="3400313">)</span>&nbsp;<span class="ident" id="3400315">Model</span>&nbsp;<span class="op" id="3400321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3400324">//&nbsp;Note:&nbsp;using&nbsp;*modelFunc&nbsp;as&nbsp;the&nbsp;implementation</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3400373">//&nbsp;means&nbsp;that&nbsp;callers&nbsp;can&nbsp;still&nbsp;use&nbsp;comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3400422">//&nbsp;like&nbsp;m&nbsp;==&nbsp;RGBAModel.&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;possible&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3400472">//&nbsp;we&nbsp;use&nbsp;the&nbsp;func&nbsp;value&nbsp;directly,&nbsp;because&nbsp;funcs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3400522">//&nbsp;are&nbsp;no&nbsp;longer&nbsp;comparable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400552">return</span>&nbsp;<span class="op" id="3400559">&amp;</span><span class="ident" id="3400560">modelFunc</span><span class="op" id="3400569">{</span><span class="ident" id="3400570">f</span><span class="op" id="3400571">}</span><br>
<span class="lineno">145</span><span class="op" id="3400573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3400576">type</span>&nbsp;<span class="ident" id="3400581">modelFunc</span>&nbsp;<span class="keyword" id="3400591">struct</span>&nbsp;<span class="op" id="3400598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400601">f</span>&nbsp;<span class="keyword" id="3400603">func</span><span class="op" id="3400607">(</span><span class="ident" id="3400608">Color</span><span class="op" id="3400613">)</span>&nbsp;<span class="ident" id="3400615">Color</span><br>
<span class="lineno"></span><span class="op" id="3400621">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3400624">func</span>&nbsp;<span class="op" id="3400629">(</span><span class="ident" id="3400630">m</span>&nbsp;<span class="op" id="3400632">*</span><span class="ident" id="3400633">modelFunc</span><span class="op" id="3400642">)</span>&nbsp;<span class="ident" id="3400644">Convert</span><span class="op" id="3400651">(</span><span class="ident" id="3400652">c</span>&nbsp;<span class="ident" id="3400654">Color</span><span class="op" id="3400659">)</span>&nbsp;<span class="ident" id="3400661">Color</span>&nbsp;<span class="op" id="3400667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3400670">return</span>&nbsp;<span class="ident" id="3400677">m</span><span class="op" id="3400678">.</span><span class="ident" id="3400679">f</span><span class="op" id="3400680">(</span><span class="ident" id="3400681">c</span><span class="op" id="3400682">)</span><br>
<span class="lineno"></span><span class="op" id="3400684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="3400687">//&nbsp;Models&nbsp;for&nbsp;the&nbsp;standard&nbsp;color&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="3400727">var</span>&nbsp;<span class="op" id="3400731">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400734">RGBAModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400747">Model</span>&nbsp;<span class="op" id="3400753">=</span>&nbsp;<span class="ident" id="3400755">ModelFunc</span><span class="op" id="3400764">(</span><span class="ident" id="3400765">rgbaModel</span><span class="op" id="3400774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400777">RGBA64Model</span>&nbsp;&nbsp;<span class="ident" id="3400790">Model</span>&nbsp;<span class="op" id="3400796">=</span>&nbsp;<span class="ident" id="3400798">ModelFunc</span><span class="op" id="3400807">(</span><span class="ident" id="3400808">rgba64Model</span><span class="op" id="3400819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400822">NRGBAModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3400835">Model</span>&nbsp;<span class="op" id="3400841">=</span>&nbsp;<span class="ident" id="3400843">ModelFunc</span><span class="op" id="3400852">(</span><span class="ident" id="3400853">nrgbaModel</span><span class="op" id="3400863">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400866">NRGBA64Model</span>&nbsp;<span class="ident" id="3400879">Model</span>&nbsp;<span class="op" id="3400885">=</span>&nbsp;<span class="ident" id="3400887">ModelFunc</span><span class="op" id="3400896">(</span><span class="ident" id="3400897">nrgba64Model</span><span class="op" id="3400909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400912">AlphaModel</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3400925">Model</span>&nbsp;<span class="op" id="3400931">=</span>&nbsp;<span class="ident" id="3400933">ModelFunc</span><span class="op" id="3400942">(</span><span class="ident" id="3400943">alphaModel</span><span class="op" id="3400953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3400956">Alpha16Model</span>&nbsp;<span class="ident" id="3400969">Model</span>&nbsp;<span class="op" id="3400975">=</span>&nbsp;<span class="ident" id="3400977">ModelFunc</span><span class="op" id="3400986">(</span><span class="ident" id="3400987">alpha16Model</span><span class="op" id="3400999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401002">GrayModel</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401015">Model</span>&nbsp;<span class="op" id="3401021">=</span>&nbsp;<span class="ident" id="3401023">ModelFunc</span><span class="op" id="3401032">(</span><span class="ident" id="3401033">grayModel</span><span class="op" id="3401042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401045">Gray16Model</span>&nbsp;&nbsp;<span class="ident" id="3401058">Model</span>&nbsp;<span class="op" id="3401064">=</span>&nbsp;<span class="ident" id="3401066">ModelFunc</span><span class="op" id="3401075">(</span><span class="ident" id="3401076">gray16Model</span><span class="op" id="3401087">)</span><br>
<span class="lineno">165</span><span class="op" id="3401089">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3401092">func</span>&nbsp;<span class="ident" id="3401097">rgbaModel</span><span class="op" id="3401106">(</span><span class="ident" id="3401107">c</span>&nbsp;<span class="ident" id="3401109">Color</span><span class="op" id="3401114">)</span>&nbsp;<span class="ident" id="3401116">Color</span>&nbsp;<span class="op" id="3401122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401125">if</span>&nbsp;<span class="ident" id="3401128">_</span><span class="op" id="3401129">,</span>&nbsp;<span class="ident" id="3401131">ok</span>&nbsp;<span class="op" id="3401134">:=</span>&nbsp;<span class="ident" id="3401137">c</span><span class="op" id="3401138">.</span><span class="op" id="3401139">(</span><span class="ident" id="3401140">RGBA</span><span class="op" id="3401144">)</span><span class="op" id="3401145">;</span>&nbsp;<span class="ident" id="3401147">ok</span>&nbsp;<span class="op" id="3401150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401154">return</span>&nbsp;<span class="ident" id="3401161">c</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401167">r</span><span class="op" id="3401168">,</span>&nbsp;<span class="ident" id="3401170">g</span><span class="op" id="3401171">,</span>&nbsp;<span class="ident" id="3401173">b</span><span class="op" id="3401174">,</span>&nbsp;<span class="ident" id="3401176">a</span>&nbsp;<span class="op" id="3401178">:=</span>&nbsp;<span class="ident" id="3401181">c</span><span class="op" id="3401182">.</span><span class="ident" id="3401183">RGBA</span><span class="op" id="3401187">(</span><span class="op" id="3401188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401191">return</span>&nbsp;<span class="ident" id="3401198">RGBA</span><span class="op" id="3401202">{</span><span class="builtintype" id="3401203">uint8</span><span class="op" id="3401208">(</span><span class="ident" id="3401209">r</span>&nbsp;<span class="op" id="3401211">&gt;&gt;</span>&nbsp;<span class="num" id="3401214">8</span><span class="op" id="3401215">)</span><span class="op" id="3401216">,</span>&nbsp;<span class="builtintype" id="3401218">uint8</span><span class="op" id="3401223">(</span><span class="ident" id="3401224">g</span>&nbsp;<span class="op" id="3401226">&gt;&gt;</span>&nbsp;<span class="num" id="3401229">8</span><span class="op" id="3401230">)</span><span class="op" id="3401231">,</span>&nbsp;<span class="builtintype" id="3401233">uint8</span><span class="op" id="3401238">(</span><span class="ident" id="3401239">b</span>&nbsp;<span class="op" id="3401241">&gt;&gt;</span>&nbsp;<span class="num" id="3401244">8</span><span class="op" id="3401245">)</span><span class="op" id="3401246">,</span>&nbsp;<span class="builtintype" id="3401248">uint8</span><span class="op" id="3401253">(</span><span class="ident" id="3401254">a</span>&nbsp;<span class="op" id="3401256">&gt;&gt;</span>&nbsp;<span class="num" id="3401259">8</span><span class="op" id="3401260">)</span><span class="op" id="3401261">}</span><br>
<span class="lineno"></span><span class="op" id="3401263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="3401266">func</span>&nbsp;<span class="ident" id="3401271">rgba64Model</span><span class="op" id="3401282">(</span><span class="ident" id="3401283">c</span>&nbsp;<span class="ident" id="3401285">Color</span><span class="op" id="3401290">)</span>&nbsp;<span class="ident" id="3401292">Color</span>&nbsp;<span class="op" id="3401298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401301">if</span>&nbsp;<span class="ident" id="3401304">_</span><span class="op" id="3401305">,</span>&nbsp;<span class="ident" id="3401307">ok</span>&nbsp;<span class="op" id="3401310">:=</span>&nbsp;<span class="ident" id="3401313">c</span><span class="op" id="3401314">.</span><span class="op" id="3401315">(</span><span class="ident" id="3401316">RGBA64</span><span class="op" id="3401322">)</span><span class="op" id="3401323">;</span>&nbsp;<span class="ident" id="3401325">ok</span>&nbsp;<span class="op" id="3401328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401332">return</span>&nbsp;<span class="ident" id="3401339">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401345">r</span><span class="op" id="3401346">,</span>&nbsp;<span class="ident" id="3401348">g</span><span class="op" id="3401349">,</span>&nbsp;<span class="ident" id="3401351">b</span><span class="op" id="3401352">,</span>&nbsp;<span class="ident" id="3401354">a</span>&nbsp;<span class="op" id="3401356">:=</span>&nbsp;<span class="ident" id="3401359">c</span><span class="op" id="3401360">.</span><span class="ident" id="3401361">RGBA</span><span class="op" id="3401365">(</span><span class="op" id="3401366">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401369">return</span>&nbsp;<span class="ident" id="3401376">RGBA64</span><span class="op" id="3401382">{</span><span class="builtintype" id="3401383">uint16</span><span class="op" id="3401389">(</span><span class="ident" id="3401390">r</span><span class="op" id="3401391">)</span><span class="op" id="3401392">,</span>&nbsp;<span class="builtintype" id="3401394">uint16</span><span class="op" id="3401400">(</span><span class="ident" id="3401401">g</span><span class="op" id="3401402">)</span><span class="op" id="3401403">,</span>&nbsp;<span class="builtintype" id="3401405">uint16</span><span class="op" id="3401411">(</span><span class="ident" id="3401412">b</span><span class="op" id="3401413">)</span><span class="op" id="3401414">,</span>&nbsp;<span class="builtintype" id="3401416">uint16</span><span class="op" id="3401422">(</span><span class="ident" id="3401423">a</span><span class="op" id="3401424">)</span><span class="op" id="3401425">}</span><br>
<span class="lineno"></span><span class="op" id="3401427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3401430">func</span>&nbsp;<span class="ident" id="3401435">nrgbaModel</span><span class="op" id="3401445">(</span><span class="ident" id="3401446">c</span>&nbsp;<span class="ident" id="3401448">Color</span><span class="op" id="3401453">)</span>&nbsp;<span class="ident" id="3401455">Color</span>&nbsp;<span class="op" id="3401461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401464">if</span>&nbsp;<span class="ident" id="3401467">_</span><span class="op" id="3401468">,</span>&nbsp;<span class="ident" id="3401470">ok</span>&nbsp;<span class="op" id="3401473">:=</span>&nbsp;<span class="ident" id="3401476">c</span><span class="op" id="3401477">.</span><span class="op" id="3401478">(</span><span class="ident" id="3401479">NRGBA</span><span class="op" id="3401484">)</span><span class="op" id="3401485">;</span>&nbsp;<span class="ident" id="3401487">ok</span>&nbsp;<span class="op" id="3401490">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401494">return</span>&nbsp;<span class="ident" id="3401501">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401507">r</span><span class="op" id="3401508">,</span>&nbsp;<span class="ident" id="3401510">g</span><span class="op" id="3401511">,</span>&nbsp;<span class="ident" id="3401513">b</span><span class="op" id="3401514">,</span>&nbsp;<span class="ident" id="3401516">a</span>&nbsp;<span class="op" id="3401518">:=</span>&nbsp;<span class="ident" id="3401521">c</span><span class="op" id="3401522">.</span><span class="ident" id="3401523">RGBA</span><span class="op" id="3401527">(</span><span class="op" id="3401528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401531">if</span>&nbsp;<span class="ident" id="3401534">a</span>&nbsp;<span class="op" id="3401536">==</span>&nbsp;<span class="num" id="3401539">0xffff</span>&nbsp;<span class="op" id="3401546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401550">return</span>&nbsp;<span class="ident" id="3401557">NRGBA</span><span class="op" id="3401562">{</span><span class="builtintype" id="3401563">uint8</span><span class="op" id="3401568">(</span><span class="ident" id="3401569">r</span>&nbsp;<span class="op" id="3401571">&gt;&gt;</span>&nbsp;<span class="num" id="3401574">8</span><span class="op" id="3401575">)</span><span class="op" id="3401576">,</span>&nbsp;<span class="builtintype" id="3401578">uint8</span><span class="op" id="3401583">(</span><span class="ident" id="3401584">g</span>&nbsp;<span class="op" id="3401586">&gt;&gt;</span>&nbsp;<span class="num" id="3401589">8</span><span class="op" id="3401590">)</span><span class="op" id="3401591">,</span>&nbsp;<span class="builtintype" id="3401593">uint8</span><span class="op" id="3401598">(</span><span class="ident" id="3401599">b</span>&nbsp;<span class="op" id="3401601">&gt;&gt;</span>&nbsp;<span class="num" id="3401604">8</span><span class="op" id="3401605">)</span><span class="op" id="3401606">,</span>&nbsp;<span class="num" id="3401608">0xff</span><span class="op" id="3401612">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401618">if</span>&nbsp;<span class="ident" id="3401621">a</span>&nbsp;<span class="op" id="3401623">==</span>&nbsp;<span class="num" id="3401626">0</span>&nbsp;<span class="op" id="3401628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401632">return</span>&nbsp;<span class="ident" id="3401639">NRGBA</span><span class="op" id="3401644">{</span><span class="num" id="3401645">0</span><span class="op" id="3401646">,</span>&nbsp;<span class="num" id="3401648">0</span><span class="op" id="3401649">,</span>&nbsp;<span class="num" id="3401651">0</span><span class="op" id="3401652">,</span>&nbsp;<span class="num" id="3401654">0</span><span class="op" id="3401655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3401661">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401762">r</span>&nbsp;<span class="op" id="3401764">=</span>&nbsp;<span class="op" id="3401766">(</span><span class="ident" id="3401767">r</span>&nbsp;<span class="op" id="3401769">*</span>&nbsp;<span class="num" id="3401771">0xffff</span><span class="op" id="3401777">)</span>&nbsp;<span class="op" id="3401779">/</span>&nbsp;<span class="ident" id="3401781">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401784">g</span>&nbsp;<span class="op" id="3401786">=</span>&nbsp;<span class="op" id="3401788">(</span><span class="ident" id="3401789">g</span>&nbsp;<span class="op" id="3401791">*</span>&nbsp;<span class="num" id="3401793">0xffff</span><span class="op" id="3401799">)</span>&nbsp;<span class="op" id="3401801">/</span>&nbsp;<span class="ident" id="3401803">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401806">b</span>&nbsp;<span class="op" id="3401808">=</span>&nbsp;<span class="op" id="3401810">(</span><span class="ident" id="3401811">b</span>&nbsp;<span class="op" id="3401813">*</span>&nbsp;<span class="num" id="3401815">0xffff</span><span class="op" id="3401821">)</span>&nbsp;<span class="op" id="3401823">/</span>&nbsp;<span class="ident" id="3401825">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401828">return</span>&nbsp;<span class="ident" id="3401835">NRGBA</span><span class="op" id="3401840">{</span><span class="builtintype" id="3401841">uint8</span><span class="op" id="3401846">(</span><span class="ident" id="3401847">r</span>&nbsp;<span class="op" id="3401849">&gt;&gt;</span>&nbsp;<span class="num" id="3401852">8</span><span class="op" id="3401853">)</span><span class="op" id="3401854">,</span>&nbsp;<span class="builtintype" id="3401856">uint8</span><span class="op" id="3401861">(</span><span class="ident" id="3401862">g</span>&nbsp;<span class="op" id="3401864">&gt;&gt;</span>&nbsp;<span class="num" id="3401867">8</span><span class="op" id="3401868">)</span><span class="op" id="3401869">,</span>&nbsp;<span class="builtintype" id="3401871">uint8</span><span class="op" id="3401876">(</span><span class="ident" id="3401877">b</span>&nbsp;<span class="op" id="3401879">&gt;&gt;</span>&nbsp;<span class="num" id="3401882">8</span><span class="op" id="3401883">)</span><span class="op" id="3401884">,</span>&nbsp;<span class="builtintype" id="3401886">uint8</span><span class="op" id="3401891">(</span><span class="ident" id="3401892">a</span>&nbsp;<span class="op" id="3401894">&gt;&gt;</span>&nbsp;<span class="num" id="3401897">8</span><span class="op" id="3401898">)</span><span class="op" id="3401899">}</span><br>
<span class="lineno"></span><span class="op" id="3401901">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="3401904">func</span>&nbsp;<span class="ident" id="3401909">nrgba64Model</span><span class="op" id="3401921">(</span><span class="ident" id="3401922">c</span>&nbsp;<span class="ident" id="3401924">Color</span><span class="op" id="3401929">)</span>&nbsp;<span class="ident" id="3401931">Color</span>&nbsp;<span class="op" id="3401937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401940">if</span>&nbsp;<span class="ident" id="3401943">_</span><span class="op" id="3401944">,</span>&nbsp;<span class="ident" id="3401946">ok</span>&nbsp;<span class="op" id="3401949">:=</span>&nbsp;<span class="ident" id="3401952">c</span><span class="op" id="3401953">.</span><span class="op" id="3401954">(</span><span class="ident" id="3401955">NRGBA64</span><span class="op" id="3401962">)</span><span class="op" id="3401963">;</span>&nbsp;<span class="ident" id="3401965">ok</span>&nbsp;<span class="op" id="3401968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3401972">return</span>&nbsp;<span class="ident" id="3401979">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3401982">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3401985">r</span><span class="op" id="3401986">,</span>&nbsp;<span class="ident" id="3401988">g</span><span class="op" id="3401989">,</span>&nbsp;<span class="ident" id="3401991">b</span><span class="op" id="3401992">,</span>&nbsp;<span class="ident" id="3401994">a</span>&nbsp;<span class="op" id="3401996">:=</span>&nbsp;<span class="ident" id="3401999">c</span><span class="op" id="3402000">.</span><span class="ident" id="3402001">RGBA</span><span class="op" id="3402005">(</span><span class="op" id="3402006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402009">if</span>&nbsp;<span class="ident" id="3402012">a</span>&nbsp;<span class="op" id="3402014">==</span>&nbsp;<span class="num" id="3402017">0xffff</span>&nbsp;<span class="op" id="3402024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402028">return</span>&nbsp;<span class="ident" id="3402035">NRGBA64</span><span class="op" id="3402042">{</span><span class="builtintype" id="3402043">uint16</span><span class="op" id="3402049">(</span><span class="ident" id="3402050">r</span><span class="op" id="3402051">)</span><span class="op" id="3402052">,</span>&nbsp;<span class="builtintype" id="3402054">uint16</span><span class="op" id="3402060">(</span><span class="ident" id="3402061">g</span><span class="op" id="3402062">)</span><span class="op" id="3402063">,</span>&nbsp;<span class="builtintype" id="3402065">uint16</span><span class="op" id="3402071">(</span><span class="ident" id="3402072">b</span><span class="op" id="3402073">)</span><span class="op" id="3402074">,</span>&nbsp;<span class="num" id="3402076">0xffff</span><span class="op" id="3402082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3402085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402088">if</span>&nbsp;<span class="ident" id="3402091">a</span>&nbsp;<span class="op" id="3402093">==</span>&nbsp;<span class="num" id="3402096">0</span>&nbsp;<span class="op" id="3402098">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402102">return</span>&nbsp;<span class="ident" id="3402109">NRGBA64</span><span class="op" id="3402116">{</span><span class="num" id="3402117">0</span><span class="op" id="3402118">,</span>&nbsp;<span class="num" id="3402120">0</span><span class="op" id="3402121">,</span>&nbsp;<span class="num" id="3402123">0</span><span class="op" id="3402124">,</span>&nbsp;<span class="num" id="3402126">0</span><span class="op" id="3402127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3402130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3402133">//&nbsp;Since&nbsp;Color.RGBA&nbsp;returns&nbsp;a&nbsp;alpha-premultiplied&nbsp;color,&nbsp;we&nbsp;should&nbsp;have&nbsp;r&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;g&nbsp;&lt;=&nbsp;a&nbsp;&amp;&amp;&nbsp;b&nbsp;&lt;=&nbsp;a.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3402234">r</span>&nbsp;<span class="op" id="3402236">=</span>&nbsp;<span class="op" id="3402238">(</span><span class="ident" id="3402239">r</span>&nbsp;<span class="op" id="3402241">*</span>&nbsp;<span class="num" id="3402243">0xffff</span><span class="op" id="3402249">)</span>&nbsp;<span class="op" id="3402251">/</span>&nbsp;<span class="ident" id="3402253">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3402256">g</span>&nbsp;<span class="op" id="3402258">=</span>&nbsp;<span class="op" id="3402260">(</span><span class="ident" id="3402261">g</span>&nbsp;<span class="op" id="3402263">*</span>&nbsp;<span class="num" id="3402265">0xffff</span><span class="op" id="3402271">)</span>&nbsp;<span class="op" id="3402273">/</span>&nbsp;<span class="ident" id="3402275">a</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3402278">b</span>&nbsp;<span class="op" id="3402280">=</span>&nbsp;<span class="op" id="3402282">(</span><span class="ident" id="3402283">b</span>&nbsp;<span class="op" id="3402285">*</span>&nbsp;<span class="num" id="3402287">0xffff</span><span class="op" id="3402293">)</span>&nbsp;<span class="op" id="3402295">/</span>&nbsp;<span class="ident" id="3402297">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402300">return</span>&nbsp;<span class="ident" id="3402307">NRGBA64</span><span class="op" id="3402314">{</span><span class="builtintype" id="3402315">uint16</span><span class="op" id="3402321">(</span><span class="ident" id="3402322">r</span><span class="op" id="3402323">)</span><span class="op" id="3402324">,</span>&nbsp;<span class="builtintype" id="3402326">uint16</span><span class="op" id="3402332">(</span><span class="ident" id="3402333">g</span><span class="op" id="3402334">)</span><span class="op" id="3402335">,</span>&nbsp;<span class="builtintype" id="3402337">uint16</span><span class="op" id="3402343">(</span><span class="ident" id="3402344">b</span><span class="op" id="3402345">)</span><span class="op" id="3402346">,</span>&nbsp;<span class="builtintype" id="3402348">uint16</span><span class="op" id="3402354">(</span><span class="ident" id="3402355">a</span><span class="op" id="3402356">)</span><span class="op" id="3402357">}</span><br>
<span class="lineno"></span><span class="op" id="3402359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3402362">func</span>&nbsp;<span class="ident" id="3402367">alphaModel</span><span class="op" id="3402377">(</span><span class="ident" id="3402378">c</span>&nbsp;<span class="ident" id="3402380">Color</span><span class="op" id="3402385">)</span>&nbsp;<span class="ident" id="3402387">Color</span>&nbsp;<span class="op" id="3402393">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402396">if</span>&nbsp;<span class="ident" id="3402399">_</span><span class="op" id="3402400">,</span>&nbsp;<span class="ident" id="3402402">ok</span>&nbsp;<span class="op" id="3402405">:=</span>&nbsp;<span class="ident" id="3402408">c</span><span class="op" id="3402409">.</span><span class="op" id="3402410">(</span><span class="ident" id="3402411">Alpha</span><span class="op" id="3402416">)</span><span class="op" id="3402417">;</span>&nbsp;<span class="ident" id="3402419">ok</span>&nbsp;<span class="op" id="3402422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402426">return</span>&nbsp;<span class="ident" id="3402433">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3402436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3402439">_</span><span class="op" id="3402440">,</span>&nbsp;<span class="ident" id="3402442">_</span><span class="op" id="3402443">,</span>&nbsp;<span class="ident" id="3402445">_</span><span class="op" id="3402446">,</span>&nbsp;<span class="ident" id="3402448">a</span>&nbsp;<span class="op" id="3402450">:=</span>&nbsp;<span class="ident" id="3402453">c</span><span class="op" id="3402454">.</span><span class="ident" id="3402455">RGBA</span><span class="op" id="3402459">(</span><span class="op" id="3402460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402463">return</span>&nbsp;<span class="ident" id="3402470">Alpha</span><span class="op" id="3402475">{</span><span class="builtintype" id="3402476">uint8</span><span class="op" id="3402481">(</span><span class="ident" id="3402482">a</span>&nbsp;<span class="op" id="3402484">&gt;&gt;</span>&nbsp;<span class="num" id="3402487">8</span><span class="op" id="3402488">)</span><span class="op" id="3402489">}</span><br>
<span class="lineno">225</span><span class="op" id="3402491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3402494">func</span>&nbsp;<span class="ident" id="3402499">alpha16Model</span><span class="op" id="3402511">(</span><span class="ident" id="3402512">c</span>&nbsp;<span class="ident" id="3402514">Color</span><span class="op" id="3402519">)</span>&nbsp;<span class="ident" id="3402521">Color</span>&nbsp;<span class="op" id="3402527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402530">if</span>&nbsp;<span class="ident" id="3402533">_</span><span class="op" id="3402534">,</span>&nbsp;<span class="ident" id="3402536">ok</span>&nbsp;<span class="op" id="3402539">:=</span>&nbsp;<span class="ident" id="3402542">c</span><span class="op" id="3402543">.</span><span class="op" id="3402544">(</span><span class="ident" id="3402545">Alpha16</span><span class="op" id="3402552">)</span><span class="op" id="3402553">;</span>&nbsp;<span class="ident" id="3402555">ok</span>&nbsp;<span class="op" id="3402558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402562">return</span>&nbsp;<span class="ident" id="3402569">c</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3402572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3402575">_</span><span class="op" id="3402576">,</span>&nbsp;<span class="ident" id="3402578">_</span><span class="op" id="3402579">,</span>&nbsp;<span class="ident" id="3402581">_</span><span class="op" id="3402582">,</span>&nbsp;<span class="ident" id="3402584">a</span>&nbsp;<span class="op" id="3402586">:=</span>&nbsp;<span class="ident" id="3402589">c</span><span class="op" id="3402590">.</span><span class="ident" id="3402591">RGBA</span><span class="op" id="3402595">(</span><span class="op" id="3402596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402599">return</span>&nbsp;<span class="ident" id="3402606">Alpha16</span><span class="op" id="3402613">{</span><span class="builtintype" id="3402614">uint16</span><span class="op" id="3402620">(</span><span class="ident" id="3402621">a</span><span class="op" id="3402622">)</span><span class="op" id="3402623">}</span><br>
<span class="lineno"></span><span class="op" id="3402625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="3402628">func</span>&nbsp;<span class="ident" id="3402633">grayModel</span><span class="op" id="3402642">(</span><span class="ident" id="3402643">c</span>&nbsp;<span class="ident" id="3402645">Color</span><span class="op" id="3402650">)</span>&nbsp;<span class="ident" id="3402652">Color</span>&nbsp;<span class="op" id="3402658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402661">if</span>&nbsp;<span class="ident" id="3402664">_</span><span class="op" id="3402665">,</span>&nbsp;<span class="ident" id="3402667">ok</span>&nbsp;<span class="op" id="3402670">:=</span>&nbsp;<span class="ident" id="3402673">c</span><span class="op" id="3402674">.</span><span class="op" id="3402675">(</span><span class="ident" id="3402676">Gray</span><span class="op" id="3402680">)</span><span class="op" id="3402681">;</span>&nbsp;<span class="ident" id="3402683">ok</span>&nbsp;<span class="op" id="3402686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402690">return</span>&nbsp;<span class="ident" id="3402697">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3402700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3402703">r</span><span class="op" id="3402704">,</span>&nbsp;<span class="ident" id="3402706">g</span><span class="op" id="3402707">,</span>&nbsp;<span class="ident" id="3402709">b</span><span class="op" id="3402710">,</span>&nbsp;<span class="ident" id="3402712">_</span>&nbsp;<span class="op" id="3402714">:=</span>&nbsp;<span class="ident" id="3402717">c</span><span class="op" id="3402718">.</span><span class="ident" id="3402719">RGBA</span><span class="op" id="3402723">(</span><span class="op" id="3402724">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3402727">y</span>&nbsp;<span class="op" id="3402729">:=</span>&nbsp;<span class="op" id="3402732">(</span><span class="num" id="3402733">299</span><span class="op" id="3402736">*</span><span class="ident" id="3402737">r</span>&nbsp;<span class="op" id="3402739">+</span>&nbsp;<span class="num" id="3402741">587</span><span class="op" id="3402744">*</span><span class="ident" id="3402745">g</span>&nbsp;<span class="op" id="3402747">+</span>&nbsp;<span class="num" id="3402749">114</span><span class="op" id="3402752">*</span><span class="ident" id="3402753">b</span>&nbsp;<span class="op" id="3402755">+</span>&nbsp;<span class="num" id="3402757">500</span><span class="op" id="3402760">)</span>&nbsp;<span class="op" id="3402762">/</span>&nbsp;<span class="num" id="3402764">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402770">return</span>&nbsp;<span class="ident" id="3402777">Gray</span><span class="op" id="3402781">{</span><span class="builtintype" id="3402782">uint8</span><span class="op" id="3402787">(</span><span class="ident" id="3402788">y</span>&nbsp;<span class="op" id="3402790">&gt;&gt;</span>&nbsp;<span class="num" id="3402793">8</span><span class="op" id="3402794">)</span><span class="op" id="3402795">}</span><br>
<span class="lineno"></span><span class="op" id="3402797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3402800">func</span>&nbsp;<span class="ident" id="3402805">gray16Model</span><span class="op" id="3402816">(</span><span class="ident" id="3402817">c</span>&nbsp;<span class="ident" id="3402819">Color</span><span class="op" id="3402824">)</span>&nbsp;<span class="ident" id="3402826">Color</span>&nbsp;<span class="op" id="3402832">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402835">if</span>&nbsp;<span class="ident" id="3402838">_</span><span class="op" id="3402839">,</span>&nbsp;<span class="ident" id="3402841">ok</span>&nbsp;<span class="op" id="3402844">:=</span>&nbsp;<span class="ident" id="3402847">c</span><span class="op" id="3402848">.</span><span class="op" id="3402849">(</span><span class="ident" id="3402850">Gray16</span><span class="op" id="3402856">)</span><span class="op" id="3402857">;</span>&nbsp;<span class="ident" id="3402859">ok</span>&nbsp;<span class="op" id="3402862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402866">return</span>&nbsp;<span class="ident" id="3402873">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3402876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3402879">r</span><span class="op" id="3402880">,</span>&nbsp;<span class="ident" id="3402882">g</span><span class="op" id="3402883">,</span>&nbsp;<span class="ident" id="3402885">b</span><span class="op" id="3402886">,</span>&nbsp;<span class="ident" id="3402888">_</span>&nbsp;<span class="op" id="3402890">:=</span>&nbsp;<span class="ident" id="3402893">c</span><span class="op" id="3402894">.</span><span class="ident" id="3402895">RGBA</span><span class="op" id="3402899">(</span><span class="op" id="3402900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3402903">y</span>&nbsp;<span class="op" id="3402905">:=</span>&nbsp;<span class="op" id="3402908">(</span><span class="num" id="3402909">299</span><span class="op" id="3402912">*</span><span class="ident" id="3402913">r</span>&nbsp;<span class="op" id="3402915">+</span>&nbsp;<span class="num" id="3402917">587</span><span class="op" id="3402920">*</span><span class="ident" id="3402921">g</span>&nbsp;<span class="op" id="3402923">+</span>&nbsp;<span class="num" id="3402925">114</span><span class="op" id="3402928">*</span><span class="ident" id="3402929">b</span>&nbsp;<span class="op" id="3402931">+</span>&nbsp;<span class="num" id="3402933">500</span><span class="op" id="3402936">)</span>&nbsp;<span class="op" id="3402938">/</span>&nbsp;<span class="num" id="3402940">1000</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3402946">return</span>&nbsp;<span class="ident" id="3402953">Gray16</span><span class="op" id="3402959">{</span><span class="builtintype" id="3402960">uint16</span><span class="op" id="3402966">(</span><span class="ident" id="3402967">y</span><span class="op" id="3402968">)</span><span class="op" id="3402969">}</span><br>
<span class="lineno"></span><span class="op" id="3402971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3402974">//&nbsp;Palette&nbsp;is&nbsp;a&nbsp;palette&nbsp;of&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="3403009">type</span>&nbsp;<span class="ident" id="3403014">Palette</span>&nbsp;<span class="op" id="3403022">[</span><span class="op" id="3403023">]</span><span class="ident" id="3403024">Color</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="3403031">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="3403107">func</span>&nbsp;<span class="op" id="3403112">(</span><span class="ident" id="3403113">p</span>&nbsp;<span class="ident" id="3403115">Palette</span><span class="op" id="3403122">)</span>&nbsp;<span class="ident" id="3403124">Convert</span><span class="op" id="3403131">(</span><span class="ident" id="3403132">c</span>&nbsp;<span class="ident" id="3403134">Color</span><span class="op" id="3403139">)</span>&nbsp;<span class="ident" id="3403141">Color</span>&nbsp;<span class="op" id="3403147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403150">if</span>&nbsp;<span class="builtinfunc" id="3403153">len</span><span class="op" id="3403156">(</span><span class="ident" id="3403157">p</span><span class="op" id="3403158">)</span>&nbsp;<span class="op" id="3403160">==</span>&nbsp;<span class="num" id="3403163">0</span>&nbsp;<span class="op" id="3403165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403169">return</span>&nbsp;<span class="ident" id="3403176">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3403181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403184">return</span>&nbsp;<span class="ident" id="3403191">p</span><span class="op" id="3403192">[</span><span class="ident" id="3403193">p</span><span class="op" id="3403194">.</span><span class="ident" id="3403195">Index</span><span class="op" id="3403200">(</span><span class="ident" id="3403201">c</span><span class="op" id="3403202">)</span><span class="op" id="3403203">]</span><br>
<span class="lineno"></span><span class="op" id="3403205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3403208">//&nbsp;Index&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;palette&nbsp;color&nbsp;closest&nbsp;to&nbsp;c&nbsp;in&nbsp;Euclidean</span><br>
<span class="lineno">265</span><span class="comment" id="3403282">//&nbsp;R,G,B&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="3403298">func</span>&nbsp;<span class="op" id="3403303">(</span><span class="ident" id="3403304">p</span>&nbsp;<span class="ident" id="3403306">Palette</span><span class="op" id="3403313">)</span>&nbsp;<span class="ident" id="3403315">Index</span><span class="op" id="3403320">(</span><span class="ident" id="3403321">c</span>&nbsp;<span class="ident" id="3403323">Color</span><span class="op" id="3403328">)</span>&nbsp;<span class="builtintype" id="3403330">int</span>&nbsp;<span class="op" id="3403334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3403337">//&nbsp;A&nbsp;batch&nbsp;version&nbsp;of&nbsp;this&nbsp;computation&nbsp;is&nbsp;in&nbsp;image/draw/draw.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403404">cr</span><span class="op" id="3403406">,</span>&nbsp;<span class="ident" id="3403408">cg</span><span class="op" id="3403410">,</span>&nbsp;<span class="ident" id="3403412">cb</span><span class="op" id="3403414">,</span>&nbsp;<span class="ident" id="3403416">_</span>&nbsp;<span class="op" id="3403418">:=</span>&nbsp;<span class="ident" id="3403421">c</span><span class="op" id="3403422">.</span><span class="ident" id="3403423">RGBA</span><span class="op" id="3403427">(</span><span class="op" id="3403428">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403431">ret</span><span class="op" id="3403434">,</span>&nbsp;<span class="ident" id="3403436">bestSSD</span>&nbsp;<span class="op" id="3403444">:=</span>&nbsp;<span class="num" id="3403447">0</span><span class="op" id="3403448">,</span>&nbsp;<span class="builtintype" id="3403450">uint32</span><span class="op" id="3403456">(</span><span class="num" id="3403457">1</span><span class="op" id="3403458">&lt;&lt;</span><span class="num" id="3403460">32</span><span class="op" id="3403462">-</span><span class="num" id="3403463">1</span><span class="op" id="3403464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403467">for</span>&nbsp;<span class="ident" id="3403471">i</span><span class="op" id="3403472">,</span>&nbsp;<span class="ident" id="3403474">v</span>&nbsp;<span class="op" id="3403476">:=</span>&nbsp;<span class="keyword" id="3403479">range</span>&nbsp;<span class="ident" id="3403485">p</span>&nbsp;<span class="op" id="3403487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403491">vr</span><span class="op" id="3403493">,</span>&nbsp;<span class="ident" id="3403495">vg</span><span class="op" id="3403497">,</span>&nbsp;<span class="ident" id="3403499">vb</span><span class="op" id="3403501">,</span>&nbsp;<span class="ident" id="3403503">_</span>&nbsp;<span class="op" id="3403505">:=</span>&nbsp;<span class="ident" id="3403508">v</span><span class="op" id="3403509">.</span><span class="ident" id="3403510">RGBA</span><span class="op" id="3403514">(</span><span class="op" id="3403515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3403519">//&nbsp;We&nbsp;shift&nbsp;by&nbsp;1&nbsp;bit&nbsp;to&nbsp;avoid&nbsp;potential&nbsp;uint32&nbsp;overflow&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3403580">//&nbsp;sum-squared-difference.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403609">delta</span>&nbsp;<span class="op" id="3403615">:=</span>&nbsp;<span class="op" id="3403618">(</span><span class="builtintype" id="3403619">int32</span><span class="op" id="3403624">(</span><span class="ident" id="3403625">cr</span><span class="op" id="3403627">)</span>&nbsp;<span class="op" id="3403629">-</span>&nbsp;<span class="builtintype" id="3403631">int32</span><span class="op" id="3403636">(</span><span class="ident" id="3403637">vr</span><span class="op" id="3403639">)</span><span class="op" id="3403640">)</span>&nbsp;<span class="op" id="3403642">&gt;&gt;</span>&nbsp;<span class="num" id="3403645">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403649">ssd</span>&nbsp;<span class="op" id="3403653">:=</span>&nbsp;<span class="builtintype" id="3403656">uint32</span><span class="op" id="3403662">(</span><span class="ident" id="3403663">delta</span>&nbsp;<span class="op" id="3403669">*</span>&nbsp;<span class="ident" id="3403671">delta</span><span class="op" id="3403676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403680">delta</span>&nbsp;<span class="op" id="3403686">=</span>&nbsp;<span class="op" id="3403688">(</span><span class="builtintype" id="3403689">int32</span><span class="op" id="3403694">(</span><span class="ident" id="3403695">cg</span><span class="op" id="3403697">)</span>&nbsp;<span class="op" id="3403699">-</span>&nbsp;<span class="builtintype" id="3403701">int32</span><span class="op" id="3403706">(</span><span class="ident" id="3403707">vg</span><span class="op" id="3403709">)</span><span class="op" id="3403710">)</span>&nbsp;<span class="op" id="3403712">&gt;&gt;</span>&nbsp;<span class="num" id="3403715">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403719">ssd</span>&nbsp;<span class="op" id="3403723">+=</span>&nbsp;<span class="builtintype" id="3403726">uint32</span><span class="op" id="3403732">(</span><span class="ident" id="3403733">delta</span>&nbsp;<span class="op" id="3403739">*</span>&nbsp;<span class="ident" id="3403741">delta</span><span class="op" id="3403746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403750">delta</span>&nbsp;<span class="op" id="3403756">=</span>&nbsp;<span class="op" id="3403758">(</span><span class="builtintype" id="3403759">int32</span><span class="op" id="3403764">(</span><span class="ident" id="3403765">cb</span><span class="op" id="3403767">)</span>&nbsp;<span class="op" id="3403769">-</span>&nbsp;<span class="builtintype" id="3403771">int32</span><span class="op" id="3403776">(</span><span class="ident" id="3403777">vb</span><span class="op" id="3403779">)</span><span class="op" id="3403780">)</span>&nbsp;<span class="op" id="3403782">&gt;&gt;</span>&nbsp;<span class="num" id="3403785">1</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403789">ssd</span>&nbsp;<span class="op" id="3403793">+=</span>&nbsp;<span class="builtintype" id="3403796">uint32</span><span class="op" id="3403802">(</span><span class="ident" id="3403803">delta</span>&nbsp;<span class="op" id="3403809">*</span>&nbsp;<span class="ident" id="3403811">delta</span><span class="op" id="3403816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403820">if</span>&nbsp;<span class="ident" id="3403823">ssd</span>&nbsp;<span class="op" id="3403827">&lt;</span>&nbsp;<span class="ident" id="3403829">bestSSD</span>&nbsp;<span class="op" id="3403837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403842">if</span>&nbsp;<span class="ident" id="3403845">ssd</span>&nbsp;<span class="op" id="3403849">==</span>&nbsp;<span class="num" id="3403852">0</span>&nbsp;<span class="op" id="3403854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403860">return</span>&nbsp;<span class="ident" id="3403867">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3403872">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403877">ret</span><span class="op" id="3403880">,</span>&nbsp;<span class="ident" id="3403882">bestSSD</span>&nbsp;<span class="op" id="3403890">=</span>&nbsp;<span class="ident" id="3403892">i</span><span class="op" id="3403893">,</span>&nbsp;<span class="ident" id="3403895">ssd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3403901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3403904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3403907">return</span>&nbsp;<span class="ident" id="3403914">ret</span><br>
<span class="lineno"></span><span class="op" id="3403918">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="3403921">//&nbsp;Standard&nbsp;colors.</span><br>
<span class="lineno"></span><span class="keyword" id="3403941">var</span>&nbsp;<span class="op" id="3403945">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403948">Black</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3403960">=</span>&nbsp;<span class="ident" id="3403962">Gray16</span><span class="op" id="3403968">{</span><span class="num" id="3403969">0</span><span class="op" id="3403970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3403973">White</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3403985">=</span>&nbsp;<span class="ident" id="3403987">Gray16</span><span class="op" id="3403993">{</span><span class="num" id="3403994">0xffff</span><span class="op" id="3404000">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3404003">Transparent</span>&nbsp;<span class="op" id="3404015">=</span>&nbsp;<span class="ident" id="3404017">Alpha16</span><span class="op" id="3404024">{</span><span class="num" id="3404025">0</span><span class="op" id="3404026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3404029">Opaque</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3404041">=</span>&nbsp;<span class="ident" id="3404043">Alpha16</span><span class="op" id="3404050">{</span><span class="num" id="3404051">0xffff</span><span class="op" id="3404057">}</span><br>
<span class="lineno"></span><span class="op" id="3404059">)</span>
</div>
</body>
</html>
