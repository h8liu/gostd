<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2077323">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2077378">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2077432">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2077483">package</span>&nbsp;<span class="ident" id="2077491">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2077495">import</span>&nbsp;<span class="op" id="2077502">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2077505">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2077511">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><span class="op" id="2077521">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2077524">//&nbsp;MkdirAll&nbsp;creates&nbsp;a&nbsp;directory&nbsp;named&nbsp;path,</span><br>
<span class="lineno"></span><span class="comment" id="2077568">//&nbsp;along&nbsp;with&nbsp;any&nbsp;necessary&nbsp;parents,&nbsp;and&nbsp;returns&nbsp;nil,</span><br>
<span class="lineno"></span><span class="comment" id="2077622">//&nbsp;or&nbsp;else&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno">15</span><span class="comment" id="2077651">//&nbsp;The&nbsp;permission&nbsp;bits&nbsp;perm&nbsp;are&nbsp;used&nbsp;for&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2077696">//&nbsp;directories&nbsp;that&nbsp;MkdirAll&nbsp;creates.</span><br>
<span class="lineno"></span><span class="comment" id="2077734">//&nbsp;If&nbsp;path&nbsp;is&nbsp;already&nbsp;a&nbsp;directory,&nbsp;MkdirAll&nbsp;does&nbsp;nothing</span><br>
<span class="lineno"></span><span class="comment" id="2077791">//&nbsp;and&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2077811">func</span>&nbsp;<span class="ident" id="2077816">MkdirAll</span><span class="op" id="2077824">(</span><span class="ident" id="2077825">path</span>&nbsp;<span class="builtintype" id="2077830">string</span><span class="op" id="2077836">,</span>&nbsp;<span class="ident" id="2077838">perm</span>&nbsp;<span class="ident" id="2077843"><a href="/os/types.go.html#2086441">FileMode</a></span><span class="op" id="2077851">)</span>&nbsp;<span class="builtintype" id="2077853">error</span>&nbsp;<span class="op" id="2077859">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2077862">//&nbsp;Fast&nbsp;path:&nbsp;if&nbsp;we&nbsp;can&nbsp;tell&nbsp;whether&nbsp;path&nbsp;is&nbsp;a&nbsp;directory&nbsp;or&nbsp;file,&nbsp;stop&nbsp;with&nbsp;success&nbsp;or&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2077957">dir</span><span class="op" id="2077960">,</span>&nbsp;<span class="ident" id="2077962">err</span>&nbsp;<span class="op" id="2077966">:=</span>&nbsp;<span class="ident" id="2077969"><a href="/os/file_unix.go.html#2068839">Stat</a></span><span class="op" id="2077973">(</span><span class="ident" id="2077974"><a href="/os/path.go.html#2077825">path</a></span><span class="op" id="2077978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2077981">if</span>&nbsp;<span class="ident" id="2077984"><a href="/os/path.go.html#2077962">err</a></span>&nbsp;<span class="op" id="2077988">==</span>&nbsp;<span class="ident" id="2077991">nil</span>&nbsp;<span class="op" id="2077995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2077999">if</span>&nbsp;<span class="ident" id="2078002"><a href="/os/path.go.html#2077957">dir</a></span><span class="op" id="2078005">.</span><span class="ident" id="2078006">IsDir</span><span class="op" id="2078011">(</span><span class="op" id="2078012">)</span>&nbsp;<span class="op" id="2078014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078019">return</span>&nbsp;<span class="ident" id="2078026">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2078032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078036">return</span>&nbsp;<span class="op" id="2078043">&amp;</span><span class="ident" id="2078044"><a href="/os/error.go.html#2044260">PathError</a></span><span class="op" id="2078053">{</span><span class="string" id="2078054">&#34;mkdir&#34;</span><span class="op" id="2078061">,</span>&nbsp;<span class="ident" id="2078063"><a href="/os/path.go.html#2077825">path</a></span><span class="op" id="2078067">,</span>&nbsp;<span class="ident" id="2078069"><a href="/os/path.go.html#2077511">syscall</a></span><span class="op" id="2078076">.</span><span class="ident" id="2078077">ENOTDIR</span><span class="op" id="2078084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2078087">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2078091">//&nbsp;Slow&nbsp;path:&nbsp;make&nbsp;sure&nbsp;parent&nbsp;exists&nbsp;and&nbsp;then&nbsp;call&nbsp;Mkdir&nbsp;for&nbsp;path.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2078160">i</span>&nbsp;<span class="op" id="2078162">:=</span>&nbsp;<span class="builtinfunc" id="2078165">len</span><span class="op" id="2078168">(</span><span class="ident" id="2078169"><a href="/os/path.go.html#2077825">path</a></span><span class="op" id="2078173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078176">for</span>&nbsp;<span class="ident" id="2078180"><a href="/os/path.go.html#2078160">i</a></span>&nbsp;<span class="op" id="2078182">&gt;</span>&nbsp;<span class="num" id="2078184">0</span>&nbsp;<span class="op" id="2078186">&amp;&amp;</span>&nbsp;<span class="ident" id="2078189"><a href="/os/path_unix.go.html#2080708">IsPathSeparator</a></span><span class="op" id="2078204">(</span><span class="ident" id="2078205"><a href="/os/path.go.html#2077825">path</a></span><span class="op" id="2078209">[</span><span class="ident" id="2078210"><a href="/os/path.go.html#2078160">i</a></span><span class="op" id="2078211">-</span><span class="num" id="2078212">1</span><span class="op" id="2078213">]</span><span class="op" id="2078214">)</span>&nbsp;<span class="op" id="2078216">{</span>&nbsp;<span class="comment" id="2078218">//&nbsp;Skip&nbsp;trailing&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2078253"><a href="/os/path.go.html#2078160">i</a></span><span class="op" id="2078254">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2078258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2078262">j</span>&nbsp;<span class="op" id="2078264">:=</span>&nbsp;<span class="ident" id="2078267"><a href="/os/path.go.html#2078160">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078270">for</span>&nbsp;<span class="ident" id="2078274"><a href="/os/path.go.html#2078262">j</a></span>&nbsp;<span class="op" id="2078276">&gt;</span>&nbsp;<span class="num" id="2078278">0</span>&nbsp;<span class="op" id="2078280">&amp;&amp;</span>&nbsp;<span class="op" id="2078283">!</span><span class="ident" id="2078284"><a href="/os/path_unix.go.html#2080708">IsPathSeparator</a></span><span class="op" id="2078299">(</span><span class="ident" id="2078300"><a href="/os/path.go.html#2077825">path</a></span><span class="op" id="2078304">[</span><span class="ident" id="2078305"><a href="/os/path.go.html#2078262">j</a></span><span class="op" id="2078306">-</span><span class="num" id="2078307">1</span><span class="op" id="2078308">]</span><span class="op" id="2078309">)</span>&nbsp;<span class="op" id="2078311">{</span>&nbsp;<span class="comment" id="2078313">//&nbsp;Scan&nbsp;backward&nbsp;over&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2078346"><a href="/os/path.go.html#2078262">j</a></span><span class="op" id="2078347">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2078351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078355">if</span>&nbsp;<span class="ident" id="2078358"><a href="/os/path.go.html#2078262">j</a></span>&nbsp;<span class="op" id="2078360">&gt;</span>&nbsp;<span class="num" id="2078362">1</span>&nbsp;<span class="op" id="2078364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2078368">//&nbsp;Create&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2078387"><a href="/os/path.go.html#2077962">err</a></span>&nbsp;<span class="op" id="2078391">=</span>&nbsp;<span class="ident" id="2078393"><a href="/os/path.go.html#2077816">MkdirAll</a></span><span class="op" id="2078401">(</span><span class="ident" id="2078402"><a href="/os/path.go.html#2077825">path</a></span><span class="op" id="2078406">[</span><span class="num" id="2078407">0</span><span class="op" id="2078408">:</span><span class="ident" id="2078409"><a href="/os/path.go.html#2078262">j</a></span><span class="op" id="2078410">-</span><span class="num" id="2078411">1</span><span class="op" id="2078412">]</span><span class="op" id="2078413">,</span>&nbsp;<span class="ident" id="2078415"><a href="/os/path.go.html#2077838">perm</a></span><span class="op" id="2078419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078423">if</span>&nbsp;<span class="ident" id="2078426"><a href="/os/path.go.html#2077962">err</a></span>&nbsp;<span class="op" id="2078430">!=</span>&nbsp;<span class="ident" id="2078433">nil</span>&nbsp;<span class="op" id="2078437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078442">return</span>&nbsp;<span class="ident" id="2078449"><a href="/os/path.go.html#2077962">err</a></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2078455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2078458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2078462">//&nbsp;Parent&nbsp;now&nbsp;exists;&nbsp;invoke&nbsp;Mkdir&nbsp;and&nbsp;use&nbsp;its&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2078518"><a href="/os/path.go.html#2077962">err</a></span>&nbsp;<span class="op" id="2078522">=</span>&nbsp;<span class="ident" id="2078524"><a href="/os/file.go.html#2059236">Mkdir</a></span><span class="op" id="2078529">(</span><span class="ident" id="2078530"><a href="/os/path.go.html#2077825">path</a></span><span class="op" id="2078534">,</span>&nbsp;<span class="ident" id="2078536"><a href="/os/path.go.html#2077838">perm</a></span><span class="op" id="2078540">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078543">if</span>&nbsp;<span class="ident" id="2078546"><a href="/os/path.go.html#2077962">err</a></span>&nbsp;<span class="op" id="2078550">!=</span>&nbsp;<span class="ident" id="2078553">nil</span>&nbsp;<span class="op" id="2078557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2078561">//&nbsp;Handle&nbsp;arguments&nbsp;like&nbsp;&#34;foo/.&#34;&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2078599">//&nbsp;double-checking&nbsp;that&nbsp;directory&nbsp;doesn&#39;t&nbsp;exist.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2078650">dir</span><span class="op" id="2078653">,</span>&nbsp;<span class="ident" id="2078655">err1</span>&nbsp;<span class="op" id="2078660">:=</span>&nbsp;<span class="ident" id="2078663"><a href="/os/file_unix.go.html#2069301">Lstat</a></span><span class="op" id="2078668">(</span><span class="ident" id="2078669"><a href="/os/path.go.html#2077825">path</a></span><span class="op" id="2078673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078677">if</span>&nbsp;<span class="ident" id="2078680"><a href="/os/path.go.html#2078655">err1</a></span>&nbsp;<span class="op" id="2078685">==</span>&nbsp;<span class="ident" id="2078688">nil</span>&nbsp;<span class="op" id="2078692">&amp;&amp;</span>&nbsp;<span class="ident" id="2078695"><a href="/os/path.go.html#2078650">dir</a></span><span class="op" id="2078698">.</span><span class="ident" id="2078699">IsDir</span><span class="op" id="2078704">(</span><span class="op" id="2078705">)</span>&nbsp;<span class="op" id="2078707">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078712">return</span>&nbsp;<span class="ident" id="2078719">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2078725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078729">return</span>&nbsp;<span class="ident" id="2078736"><a href="/os/path.go.html#2077962">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2078741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2078744">return</span>&nbsp;<span class="ident" id="2078751">nil</span><br>
<span class="lineno">60</span><span class="op" id="2078755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2078758">//&nbsp;RemoveAll&nbsp;removes&nbsp;path&nbsp;and&nbsp;any&nbsp;children&nbsp;it&nbsp;contains.</span><br>
<span class="lineno"></span><span class="comment" id="2078814">//&nbsp;It&nbsp;removes&nbsp;everything&nbsp;it&nbsp;can&nbsp;but&nbsp;returns&nbsp;the&nbsp;first&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="2078874">//&nbsp;it&nbsp;encounters.&nbsp;&nbsp;If&nbsp;the&nbsp;path&nbsp;does&nbsp;not&nbsp;exist,&nbsp;RemoveAll</span><br>
<span class="lineno">65</span><span class="comment" id="2078931">//&nbsp;returns&nbsp;nil&nbsp;(no&nbsp;error).</span><br>
<span class="lineno"></span><span class="keyword" id="2078958">func</span>&nbsp;<span class="ident" id="2078963">RemoveAll</span><span class="op" id="2078972">(</span><span class="ident" id="2078973">path</span>&nbsp;<span class="builtintype" id="2078978">string</span><span class="op" id="2078984">)</span>&nbsp;<span class="builtintype" id="2078986">error</span>&nbsp;<span class="op" id="2078992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2078995">//&nbsp;Simple&nbsp;case:&nbsp;if&nbsp;Remove&nbsp;works,&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2079041">err</span>&nbsp;<span class="op" id="2079045">:=</span>&nbsp;<span class="ident" id="2079048"><a href="/os/file_unix.go.html#2072722">Remove</a></span><span class="op" id="2079054">(</span><span class="ident" id="2079055"><a href="/os/path.go.html#2078973">path</a></span><span class="op" id="2079059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079062">if</span>&nbsp;<span class="ident" id="2079065"><a href="/os/path.go.html#2079041">err</a></span>&nbsp;<span class="op" id="2079069">==</span>&nbsp;<span class="ident" id="2079072">nil</span>&nbsp;<span class="op" id="2079076">||</span>&nbsp;<span class="ident" id="2079079"><a href="/os/error.go.html#2045357">IsNotExist</a></span><span class="op" id="2079089">(</span><span class="ident" id="2079090"><a href="/os/path.go.html#2079041">err</a></span><span class="op" id="2079093">)</span>&nbsp;<span class="op" id="2079095">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079099">return</span>&nbsp;<span class="ident" id="2079106">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2079111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2079115">//&nbsp;Otherwise,&nbsp;is&nbsp;this&nbsp;a&nbsp;directory&nbsp;we&nbsp;need&nbsp;to&nbsp;recurse&nbsp;into?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2079175">dir</span><span class="op" id="2079178">,</span>&nbsp;<span class="ident" id="2079180">serr</span>&nbsp;<span class="op" id="2079185">:=</span>&nbsp;<span class="ident" id="2079188"><a href="/os/file_unix.go.html#2069301">Lstat</a></span><span class="op" id="2079193">(</span><span class="ident" id="2079194"><a href="/os/path.go.html#2078973">path</a></span><span class="op" id="2079198">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079201">if</span>&nbsp;<span class="ident" id="2079204"><a href="/os/path.go.html#2079180">serr</a></span>&nbsp;<span class="op" id="2079209">!=</span>&nbsp;<span class="ident" id="2079212">nil</span>&nbsp;<span class="op" id="2079216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079220">if</span>&nbsp;<span class="ident" id="2079223">serr</span><span class="op" id="2079227">,</span>&nbsp;<span class="ident" id="2079229">ok</span>&nbsp;<span class="op" id="2079232">:=</span>&nbsp;<span class="ident" id="2079235"><a href="/os/path.go.html#2079180">serr</a></span><span class="op" id="2079239">.</span><span class="op" id="2079240">(</span><span class="op" id="2079241">*</span><span class="ident" id="2079242"><a href="/os/error.go.html#2044260">PathError</a></span><span class="op" id="2079251">)</span><span class="op" id="2079252">;</span>&nbsp;<span class="ident" id="2079254"><a href="/os/path.go.html#2079229">ok</a></span>&nbsp;<span class="op" id="2079257">&amp;&amp;</span>&nbsp;<span class="op" id="2079260">(</span><span class="ident" id="2079261"><a href="/os/error.go.html#2045357">IsNotExist</a></span><span class="op" id="2079271">(</span><span class="ident" id="2079272"><a href="/os/path.go.html#2079223">serr</a></span><span class="op" id="2079276">.</span><span class="ident" id="2079277">Err</span><span class="op" id="2079280">)</span>&nbsp;<span class="op" id="2079282">||</span>&nbsp;<span class="ident" id="2079285"><a href="/os/path.go.html#2079223">serr</a></span><span class="op" id="2079289">.</span><span class="ident" id="2079290">Err</span>&nbsp;<span class="op" id="2079294">==</span>&nbsp;<span class="ident" id="2079297"><a href="/os/path.go.html#2077511">syscall</a></span><span class="op" id="2079304">.</span><span class="ident" id="2079305">ENOTDIR</span><span class="op" id="2079312">)</span>&nbsp;<span class="op" id="2079314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079319">return</span>&nbsp;<span class="ident" id="2079326">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2079332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079336">return</span>&nbsp;<span class="ident" id="2079343"><a href="/os/path.go.html#2079180">serr</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2079349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079352">if</span>&nbsp;<span class="op" id="2079355">!</span><span class="ident" id="2079356"><a href="/os/path.go.html#2079175">dir</a></span><span class="op" id="2079359">.</span><span class="ident" id="2079360">IsDir</span><span class="op" id="2079365">(</span><span class="op" id="2079366">)</span>&nbsp;<span class="op" id="2079368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2079372">//&nbsp;Not&nbsp;a&nbsp;directory;&nbsp;return&nbsp;the&nbsp;error&nbsp;from&nbsp;Remove.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079424">return</span>&nbsp;<span class="ident" id="2079431"><a href="/os/path.go.html#2079041">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2079436">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2079440">//&nbsp;Directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2079455">fd</span><span class="op" id="2079457">,</span>&nbsp;<span class="ident" id="2079459"><a href="/os/path.go.html#2079041">err</a></span>&nbsp;<span class="op" id="2079463">:=</span>&nbsp;<span class="ident" id="2079466"><a href="/os/file.go.html#2060191">Open</a></span><span class="op" id="2079470">(</span><span class="ident" id="2079471"><a href="/os/path.go.html#2078973">path</a></span><span class="op" id="2079475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079478">if</span>&nbsp;<span class="ident" id="2079481"><a href="/os/path.go.html#2079041">err</a></span>&nbsp;<span class="op" id="2079485">!=</span>&nbsp;<span class="ident" id="2079488">nil</span>&nbsp;<span class="op" id="2079492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079496">if</span>&nbsp;<span class="ident" id="2079499"><a href="/os/error.go.html#2045357">IsNotExist</a></span><span class="op" id="2079509">(</span><span class="ident" id="2079510"><a href="/os/path.go.html#2079041">err</a></span><span class="op" id="2079513">)</span>&nbsp;<span class="op" id="2079515">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2079520">//&nbsp;Race.&nbsp;It&nbsp;was&nbsp;deleted&nbsp;between&nbsp;the&nbsp;Lstat&nbsp;and&nbsp;Open.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2079575">//&nbsp;Return&nbsp;nil&nbsp;per&nbsp;RemoveAll&#39;s&nbsp;docs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079614">return</span>&nbsp;<span class="ident" id="2079621">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2079627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079631">return</span>&nbsp;<span class="ident" id="2079638"><a href="/os/path.go.html#2079041">err</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2079643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2079647">//&nbsp;Remove&nbsp;contents&nbsp;&amp;&nbsp;return&nbsp;first&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2079689"><a href="/os/path.go.html#2079041">err</a></span>&nbsp;<span class="op" id="2079693">=</span>&nbsp;<span class="ident" id="2079695">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079700">for</span>&nbsp;<span class="op" id="2079704">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2079708">names</span><span class="op" id="2079713">,</span>&nbsp;<span class="ident" id="2079715">err1</span>&nbsp;<span class="op" id="2079720">:=</span>&nbsp;<span class="ident" id="2079723"><a href="/os/path.go.html#2079455">fd</a></span><span class="op" id="2079725">.</span><span class="ident" id="2079726">Readdirnames</span><span class="op" id="2079738">(</span><span class="num" id="2079739">100</span><span class="op" id="2079742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079746">for</span>&nbsp;<span class="ident" id="2079750">_</span><span class="op" id="2079751">,</span>&nbsp;<span class="ident" id="2079753">name</span>&nbsp;<span class="op" id="2079758">:=</span>&nbsp;<span class="keyword" id="2079761">range</span>&nbsp;<span class="ident" id="2079767"><a href="/os/path.go.html#2079708">names</a></span>&nbsp;<span class="op" id="2079773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2079778">err1</span>&nbsp;<span class="op" id="2079783">:=</span>&nbsp;<span class="ident" id="2079786"><a href="/os/path.go.html#2078963">RemoveAll</a></span><span class="op" id="2079795">(</span><span class="ident" id="2079796"><a href="/os/path.go.html#2078973">path</a></span>&nbsp;<span class="op" id="2079801">+</span>&nbsp;<span class="builtintype" id="2079803">string</span><span class="op" id="2079809">(</span><span class="ident" id="2079810"><a href="/os/path_unix.go.html#2080513">PathSeparator</a></span><span class="op" id="2079823">)</span>&nbsp;<span class="op" id="2079825">+</span>&nbsp;<span class="ident" id="2079827"><a href="/os/path.go.html#2079753">name</a></span><span class="op" id="2079831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079836">if</span>&nbsp;<span class="ident" id="2079839"><a href="/os/path.go.html#2079041">err</a></span>&nbsp;<span class="op" id="2079843">==</span>&nbsp;<span class="ident" id="2079846">nil</span>&nbsp;<span class="op" id="2079850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2079856"><a href="/os/path.go.html#2079041">err</a></span>&nbsp;<span class="op" id="2079860">=</span>&nbsp;<span class="ident" id="2079862"><a href="/os/path.go.html#2079778">err1</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2079870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2079874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079878">if</span>&nbsp;<span class="ident" id="2079881"><a href="/os/path.go.html#2079715">err1</a></span>&nbsp;<span class="op" id="2079886">==</span>&nbsp;<span class="ident" id="2079889"><a href="/os/path.go.html#2077505">io</a></span><span class="op" id="2079891">.</span><span class="ident" id="2079892">EOF</span>&nbsp;<span class="op" id="2079896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079901">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2079909">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2079913">//&nbsp;If&nbsp;Readdirnames&nbsp;returned&nbsp;an&nbsp;error,&nbsp;use&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079961">if</span>&nbsp;<span class="ident" id="2079964"><a href="/os/path.go.html#2079041">err</a></span>&nbsp;<span class="op" id="2079968">==</span>&nbsp;<span class="ident" id="2079971">nil</span>&nbsp;<span class="op" id="2079975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2079980"><a href="/os/path.go.html#2079041">err</a></span>&nbsp;<span class="op" id="2079984">=</span>&nbsp;<span class="ident" id="2079986"><a href="/os/path.go.html#2079715">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2079993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2079997">if</span>&nbsp;<span class="builtinfunc" id="2080000">len</span><span class="op" id="2080003">(</span><span class="ident" id="2080004"><a href="/os/path.go.html#2079708">names</a></span><span class="op" id="2080009">)</span>&nbsp;<span class="op" id="2080011">==</span>&nbsp;<span class="num" id="2080014">0</span>&nbsp;<span class="op" id="2080016">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2080021">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2080029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2080032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2080036">//&nbsp;Close&nbsp;directory,&nbsp;because&nbsp;windows&nbsp;won&#39;t&nbsp;remove&nbsp;opened&nbsp;directory.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2080104"><a href="/os/path.go.html#2079455">fd</a></span><span class="op" id="2080106">.</span><span class="ident" id="2080107">Close</span><span class="op" id="2080112">(</span><span class="op" id="2080113">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2080117">//&nbsp;Remove&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2080139">err1</span>&nbsp;<span class="op" id="2080144">:=</span>&nbsp;<span class="ident" id="2080147"><a href="/os/file_unix.go.html#2072722">Remove</a></span><span class="op" id="2080153">(</span><span class="ident" id="2080154"><a href="/os/path.go.html#2078973">path</a></span><span class="op" id="2080158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2080161">if</span>&nbsp;<span class="ident" id="2080164"><a href="/os/path.go.html#2080139">err1</a></span>&nbsp;<span class="op" id="2080169">==</span>&nbsp;<span class="ident" id="2080172">nil</span>&nbsp;<span class="op" id="2080176">||</span>&nbsp;<span class="ident" id="2080179"><a href="/os/error.go.html#2045357">IsNotExist</a></span><span class="op" id="2080189">(</span><span class="ident" id="2080190"><a href="/os/path.go.html#2080139">err1</a></span><span class="op" id="2080194">)</span>&nbsp;<span class="op" id="2080196">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2080200">return</span>&nbsp;<span class="ident" id="2080207">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2080212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2080215">if</span>&nbsp;<span class="ident" id="2080218"><a href="/os/path.go.html#2079041">err</a></span>&nbsp;<span class="op" id="2080222">==</span>&nbsp;<span class="ident" id="2080225">nil</span>&nbsp;<span class="op" id="2080229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2080233"><a href="/os/path.go.html#2079041">err</a></span>&nbsp;<span class="op" id="2080237">=</span>&nbsp;<span class="ident" id="2080239"><a href="/os/path.go.html#2080139">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2080245">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2080248">return</span>&nbsp;<span class="ident" id="2080255"><a href="/os/path.go.html#2079041">err</a></span><br>
<span class="lineno"></span><span class="op" id="2080259">}</span>
</div>
</body>
</html>
