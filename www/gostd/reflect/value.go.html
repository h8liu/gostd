<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2717079">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2717134">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2717188">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2717239">package</span>&nbsp;<span class="ident" id="2717247">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2717256">import</span>&nbsp;<span class="op" id="2717263">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2717266">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2717274">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2717285">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="2717294">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2717297">const</span>&nbsp;<span class="ident" id="2717303">ptrSize</span>&nbsp;<span class="op" id="2717311">=</span>&nbsp;<span class="ident" id="2717313">unsafe</span><span class="op" id="2717319">.</span><span class="ident" id="2717320">Sizeof</span><span class="op" id="2717326">(</span><span class="op" id="2717327">(</span><span class="op" id="2717328">*</span><span class="builtintype" id="2717329">byte</span><span class="op" id="2717333">)</span><span class="op" id="2717334">(</span><span class="ident" id="2717335">nil</span><span class="op" id="2717338">)</span><span class="op" id="2717339">)</span><br>
<span class="lineno"></span><span class="keyword" id="2717341">const</span>&nbsp;<span class="ident" id="2717347">cannotSet</span>&nbsp;<span class="op" id="2717357">=</span>&nbsp;<span class="string" id="2717359">&#34;cannot&nbsp;set&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;struct&nbsp;field&#34;</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="2717417">//&nbsp;Value&nbsp;is&nbsp;the&nbsp;reflection&nbsp;interface&nbsp;to&nbsp;a&nbsp;Go&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2717469">//</span><br>
<span class="lineno"></span><span class="comment" id="2717472">//&nbsp;Not&nbsp;all&nbsp;methods&nbsp;apply&nbsp;to&nbsp;all&nbsp;kinds&nbsp;of&nbsp;values.&nbsp;&nbsp;Restrictions,</span><br>
<span class="lineno"></span><span class="comment" id="2717536">//&nbsp;if&nbsp;any,&nbsp;are&nbsp;noted&nbsp;in&nbsp;the&nbsp;documentation&nbsp;for&nbsp;each&nbsp;method.</span><br>
<span class="lineno">20</span><span class="comment" id="2717595">//&nbsp;Use&nbsp;the&nbsp;Kind&nbsp;method&nbsp;to&nbsp;find&nbsp;out&nbsp;the&nbsp;kind&nbsp;of&nbsp;value&nbsp;before</span><br>
<span class="lineno"></span><span class="comment" id="2717655">//&nbsp;calling&nbsp;kind-specific&nbsp;methods.&nbsp;&nbsp;Calling&nbsp;a&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2717707">//&nbsp;inappropriate&nbsp;to&nbsp;the&nbsp;kind&nbsp;of&nbsp;type&nbsp;causes&nbsp;a&nbsp;run&nbsp;time&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2717769">//</span><br>
<span class="lineno"></span><span class="comment" id="2717772">//&nbsp;The&nbsp;zero&nbsp;Value&nbsp;represents&nbsp;no&nbsp;value.</span><br>
<span class="lineno">25</span><span class="comment" id="2717811">//&nbsp;Its&nbsp;IsValid&nbsp;method&nbsp;returns&nbsp;false,&nbsp;its&nbsp;Kind&nbsp;method&nbsp;returns&nbsp;Invalid,</span><br>
<span class="lineno"></span><span class="comment" id="2717881">//&nbsp;its&nbsp;String&nbsp;method&nbsp;returns&nbsp;&#34;&lt;invalid&nbsp;Value&gt;&#34;,&nbsp;and&nbsp;all&nbsp;other&nbsp;methods&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2717958">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2718019">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno"></span><span class="comment" id="2718087">//</span><br>
<span class="lineno">30</span><span class="comment" id="2718090">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;by&nbsp;multiple&nbsp;goroutines&nbsp;provided&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2718163">//&nbsp;the&nbsp;underlying&nbsp;Go&nbsp;value&nbsp;can&nbsp;be&nbsp;used&nbsp;concurrently&nbsp;for&nbsp;the&nbsp;equivalent</span><br>
<span class="lineno"></span><span class="comment" id="2718234">//&nbsp;direct&nbsp;operations.</span><br>
<span class="lineno"></span><span class="keyword" id="2718256">type</span>&nbsp;<span class="ident" id="2718261">Value</span>&nbsp;<span class="keyword" id="2718267">struct</span>&nbsp;<span class="op" id="2718274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718277">//&nbsp;typ&nbsp;holds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;a&nbsp;Value.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718337">typ</span>&nbsp;<span class="op" id="2718341">*</span><span class="ident" id="2718342">rtype</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718350">//&nbsp;Pointer-valued&nbsp;data&nbsp;or,&nbsp;if&nbsp;flagIndir&nbsp;is&nbsp;set,&nbsp;pointer&nbsp;to&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718416">//&nbsp;Valid&nbsp;when&nbsp;either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;or&nbsp;typ.pointers()&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2718482">ptr</span>&nbsp;<span class="ident" id="2718486">unsafe</span><span class="op" id="2718492">.</span><span class="ident" id="2718493">Pointer</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718503">//&nbsp;flag&nbsp;holds&nbsp;metadata&nbsp;about&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718544">//&nbsp;The&nbsp;lowest&nbsp;bits&nbsp;are&nbsp;flag&nbsp;bits:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718579">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagRO:&nbsp;obtained&nbsp;via&nbsp;unexported&nbsp;field,&nbsp;so&nbsp;read-only</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718637">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagIndir:&nbsp;val&nbsp;holds&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;data</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718686">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagAddr:&nbsp;v.CanAddr&nbsp;is&nbsp;true&nbsp;(implies&nbsp;flagIndir)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718740">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;flagMethod:&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718779">//&nbsp;The&nbsp;next&nbsp;five&nbsp;bits&nbsp;give&nbsp;the&nbsp;Kind&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718830">//&nbsp;This&nbsp;repeats&nbsp;typ.Kind()&nbsp;except&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718884">//&nbsp;The&nbsp;remaining&nbsp;23+&nbsp;bits&nbsp;give&nbsp;a&nbsp;method&nbsp;number&nbsp;for&nbsp;method&nbsp;values.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2718951">//&nbsp;If&nbsp;flag.kind()&nbsp;!=&nbsp;Func,&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagMethod&nbsp;is&nbsp;unset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719021">//&nbsp;If&nbsp;ifaceIndir(typ),&nbsp;code&nbsp;can&nbsp;assume&nbsp;that&nbsp;flagIndir&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719084">flag</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719091">//&nbsp;A&nbsp;method&nbsp;value&nbsp;represents&nbsp;a&nbsp;curried&nbsp;method&nbsp;invocation</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719149">//&nbsp;like&nbsp;r.Read&nbsp;for&nbsp;some&nbsp;receiver&nbsp;r.&nbsp;&nbsp;The&nbsp;typ+val+flag&nbsp;bits&nbsp;describe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719218">//&nbsp;the&nbsp;receiver&nbsp;r,&nbsp;but&nbsp;the&nbsp;flag&#39;s&nbsp;Kind&nbsp;bits&nbsp;say&nbsp;Func&nbsp;(methods&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719285">//&nbsp;functions),&nbsp;and&nbsp;the&nbsp;top&nbsp;bits&nbsp;of&nbsp;the&nbsp;flag&nbsp;give&nbsp;the&nbsp;method&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2719353">//&nbsp;in&nbsp;r&#39;s&nbsp;type&#39;s&nbsp;method&nbsp;table.</span><br>
<span class="lineno"></span><span class="op" id="2719384">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2719387">type</span>&nbsp;<span class="ident" id="2719392">flag</span>&nbsp;<span class="builtintype" id="2719397">uintptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2719406">const</span>&nbsp;<span class="op" id="2719412">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719415">flagKindWidth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2719436">=</span>&nbsp;<span class="num" id="2719438">5</span>&nbsp;<span class="comment" id="2719440">//&nbsp;there&nbsp;are&nbsp;27&nbsp;kinds</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719463">flagKindMask</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2719479">flag</span>&nbsp;<span class="op" id="2719484">=</span>&nbsp;<span class="num" id="2719486">1</span><span class="op" id="2719487">&lt;&lt;</span><span class="ident" id="2719489">flagKindWidth</span>&nbsp;<span class="op" id="2719503">-</span>&nbsp;<span class="num" id="2719505">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719508">flagRO</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2719524">flag</span>&nbsp;<span class="op" id="2719529">=</span>&nbsp;<span class="num" id="2719531">1</span>&nbsp;<span class="op" id="2719533">&lt;&lt;</span>&nbsp;<span class="num" id="2719536">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719539">flagIndir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2719555">flag</span>&nbsp;<span class="op" id="2719560">=</span>&nbsp;<span class="num" id="2719562">1</span>&nbsp;<span class="op" id="2719564">&lt;&lt;</span>&nbsp;<span class="num" id="2719567">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719570">flagAddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2719586">flag</span>&nbsp;<span class="op" id="2719591">=</span>&nbsp;<span class="num" id="2719593">1</span>&nbsp;<span class="op" id="2719595">&lt;&lt;</span>&nbsp;<span class="num" id="2719598">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719601">flagMethod</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2719617">flag</span>&nbsp;<span class="op" id="2719622">=</span>&nbsp;<span class="num" id="2719624">1</span>&nbsp;<span class="op" id="2719626">&lt;&lt;</span>&nbsp;<span class="num" id="2719629">8</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2719632">flagMethodShift</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2719653">=</span>&nbsp;<span class="num" id="2719655">9</span><br>
<span class="lineno"></span><span class="op" id="2719657">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2719660">func</span>&nbsp;<span class="op" id="2719665">(</span><span class="ident" id="2719666">f</span>&nbsp;<span class="ident" id="2719668">flag</span><span class="op" id="2719672">)</span>&nbsp;<span class="ident" id="2719674">kind</span><span class="op" id="2719678">(</span><span class="op" id="2719679">)</span>&nbsp;<span class="ident" id="2719681">Kind</span>&nbsp;<span class="op" id="2719686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719689">return</span>&nbsp;<span class="ident" id="2719696">Kind</span><span class="op" id="2719700">(</span><span class="ident" id="2719701">f</span>&nbsp;<span class="op" id="2719703">&amp;</span>&nbsp;<span class="ident" id="2719705">flagKindMask</span><span class="op" id="2719717">)</span><br>
<span class="lineno">75</span><span class="op" id="2719719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2719722">//&nbsp;pointer&nbsp;returns&nbsp;the&nbsp;underlying&nbsp;pointer&nbsp;represented&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2719782">//&nbsp;v.Kind()&nbsp;must&nbsp;be&nbsp;Ptr,&nbsp;Map,&nbsp;Chan,&nbsp;Func,&nbsp;or&nbsp;UnsafePointer</span><br>
<span class="lineno"></span><span class="keyword" id="2719841">func</span>&nbsp;<span class="op" id="2719846">(</span><span class="ident" id="2719847">v</span>&nbsp;<span class="ident" id="2719849">Value</span><span class="op" id="2719854">)</span>&nbsp;<span class="ident" id="2719856">pointer</span><span class="op" id="2719863">(</span><span class="op" id="2719864">)</span>&nbsp;<span class="ident" id="2719866">unsafe</span><span class="op" id="2719872">.</span><span class="ident" id="2719873">Pointer</span>&nbsp;<span class="op" id="2719881">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719884">if</span>&nbsp;<span class="ident" id="2719887">v</span><span class="op" id="2719888">.</span><span class="ident" id="2719889">typ</span><span class="op" id="2719892">.</span><span class="ident" id="2719893">size</span>&nbsp;<span class="op" id="2719898">!=</span>&nbsp;<span class="ident" id="2719901">ptrSize</span>&nbsp;<span class="op" id="2719909">||</span>&nbsp;<span class="op" id="2719912">!</span><span class="ident" id="2719913">v</span><span class="op" id="2719914">.</span><span class="ident" id="2719915">typ</span><span class="op" id="2719918">.</span><span class="ident" id="2719919">pointers</span><span class="op" id="2719927">(</span><span class="op" id="2719928">)</span>&nbsp;<span class="op" id="2719930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2719934">panic</span><span class="op" id="2719939">(</span><span class="string" id="2719940">&#34;can&#39;t&nbsp;call&nbsp;pointer&nbsp;on&nbsp;a&nbsp;non-pointer&nbsp;Value&#34;</span><span class="op" id="2719983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2719986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2719989">if</span>&nbsp;<span class="ident" id="2719992">v</span><span class="op" id="2719993">.</span><span class="ident" id="2719994">flag</span><span class="op" id="2719998">&amp;</span><span class="ident" id="2719999">flagIndir</span>&nbsp;<span class="op" id="2720009">!=</span>&nbsp;<span class="num" id="2720012">0</span>&nbsp;<span class="op" id="2720014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720018">return</span>&nbsp;<span class="op" id="2720025">*</span><span class="op" id="2720026">(</span><span class="op" id="2720027">*</span><span class="ident" id="2720028">unsafe</span><span class="op" id="2720034">.</span><span class="ident" id="2720035">Pointer</span><span class="op" id="2720042">)</span><span class="op" id="2720043">(</span><span class="ident" id="2720044">v</span><span class="op" id="2720045">.</span><span class="ident" id="2720046">ptr</span><span class="op" id="2720049">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2720052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720055">return</span>&nbsp;<span class="ident" id="2720062">v</span><span class="op" id="2720063">.</span><span class="ident" id="2720064">ptr</span><br>
<span class="lineno"></span><span class="op" id="2720068">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2720071">//&nbsp;packEface&nbsp;converts&nbsp;v&nbsp;to&nbsp;the&nbsp;empty&nbsp;interface.</span><br>
<span class="lineno">90</span><span class="keyword" id="2720119">func</span>&nbsp;<span class="ident" id="2720124">packEface</span><span class="op" id="2720133">(</span><span class="ident" id="2720134">v</span>&nbsp;<span class="ident" id="2720136">Value</span><span class="op" id="2720141">)</span>&nbsp;<span class="keyword" id="2720143">interface</span><span class="op" id="2720152">{</span><span class="op" id="2720153">}</span>&nbsp;<span class="op" id="2720155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720158">t</span>&nbsp;<span class="op" id="2720160">:=</span>&nbsp;<span class="ident" id="2720163">v</span><span class="op" id="2720164">.</span><span class="ident" id="2720165">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720170">var</span>&nbsp;<span class="ident" id="2720174">i</span>&nbsp;<span class="keyword" id="2720176">interface</span><span class="op" id="2720185">{</span><span class="op" id="2720186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720189">e</span>&nbsp;<span class="op" id="2720191">:=</span>&nbsp;<span class="op" id="2720194">(</span><span class="op" id="2720195">*</span><span class="ident" id="2720196">emptyInterface</span><span class="op" id="2720210">)</span><span class="op" id="2720211">(</span><span class="ident" id="2720212">unsafe</span><span class="op" id="2720218">.</span><span class="ident" id="2720219">Pointer</span><span class="op" id="2720226">(</span><span class="op" id="2720227">&amp;</span><span class="ident" id="2720228">i</span><span class="op" id="2720229">)</span><span class="op" id="2720230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2720233">//&nbsp;First,&nbsp;fill&nbsp;in&nbsp;the&nbsp;data&nbsp;portion&nbsp;of&nbsp;the&nbsp;interface.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720287">switch</span>&nbsp;<span class="op" id="2720294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720297">case</span>&nbsp;<span class="ident" id="2720302">ifaceIndir</span><span class="op" id="2720312">(</span><span class="ident" id="2720313">t</span><span class="op" id="2720314">)</span><span class="op" id="2720315">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720319">if</span>&nbsp;<span class="ident" id="2720322">v</span><span class="op" id="2720323">.</span><span class="ident" id="2720324">flag</span><span class="op" id="2720328">&amp;</span><span class="ident" id="2720329">flagIndir</span>&nbsp;<span class="op" id="2720339">==</span>&nbsp;<span class="num" id="2720342">0</span>&nbsp;<span class="op" id="2720344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2720349">panic</span><span class="op" id="2720354">(</span><span class="string" id="2720355">&#34;bad&nbsp;indir&#34;</span><span class="op" id="2720366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2720370">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2720374">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface&nbsp;we&#39;re&nbsp;making.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720436">ptr</span>&nbsp;<span class="op" id="2720440">:=</span>&nbsp;<span class="ident" id="2720443">v</span><span class="op" id="2720444">.</span><span class="ident" id="2720445">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720451">if</span>&nbsp;<span class="ident" id="2720454">v</span><span class="op" id="2720455">.</span><span class="ident" id="2720456">flag</span><span class="op" id="2720460">&amp;</span><span class="ident" id="2720461">flagAddr</span>&nbsp;<span class="op" id="2720470">!=</span>&nbsp;<span class="num" id="2720473">0</span>&nbsp;<span class="op" id="2720475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2720480">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;boolean&nbsp;from&nbsp;valueInterface&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2720533">//&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720576">c</span>&nbsp;<span class="op" id="2720578">:=</span>&nbsp;<span class="ident" id="2720581">unsafe_New</span><span class="op" id="2720591">(</span><span class="ident" id="2720592">t</span><span class="op" id="2720593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720598">memmove</span><span class="op" id="2720605">(</span><span class="ident" id="2720606">c</span><span class="op" id="2720607">,</span>&nbsp;<span class="ident" id="2720609">ptr</span><span class="op" id="2720612">,</span>&nbsp;<span class="ident" id="2720614">t</span><span class="op" id="2720615">.</span><span class="ident" id="2720616">size</span><span class="op" id="2720620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720625">ptr</span>&nbsp;<span class="op" id="2720629">=</span>&nbsp;<span class="ident" id="2720631">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2720635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720639">e</span><span class="op" id="2720640">.</span><span class="ident" id="2720641">word</span>&nbsp;<span class="op" id="2720646">=</span>&nbsp;<span class="ident" id="2720648">ptr</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720653">case</span>&nbsp;<span class="ident" id="2720658">v</span><span class="op" id="2720659">.</span><span class="ident" id="2720660">flag</span><span class="op" id="2720664">&amp;</span><span class="ident" id="2720665">flagIndir</span>&nbsp;<span class="op" id="2720675">!=</span>&nbsp;<span class="num" id="2720678">0</span><span class="op" id="2720679">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2720683">//&nbsp;Value&nbsp;is&nbsp;indirect,&nbsp;but&nbsp;interface&nbsp;is&nbsp;direct.&nbsp;&nbsp;We&nbsp;need</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2720741">//&nbsp;to&nbsp;load&nbsp;the&nbsp;data&nbsp;at&nbsp;v.ptr&nbsp;into&nbsp;the&nbsp;interface&nbsp;data&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720802">e</span><span class="op" id="2720803">.</span><span class="ident" id="2720804">word</span>&nbsp;<span class="op" id="2720809">=</span>&nbsp;<span class="op" id="2720811">*</span><span class="op" id="2720812">(</span><span class="op" id="2720813">*</span><span class="ident" id="2720814">unsafe</span><span class="op" id="2720820">.</span><span class="ident" id="2720821">Pointer</span><span class="op" id="2720828">)</span><span class="op" id="2720829">(</span><span class="ident" id="2720830">v</span><span class="op" id="2720831">.</span><span class="ident" id="2720832">ptr</span><span class="op" id="2720835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2720838">default</span><span class="op" id="2720845">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2720849">//&nbsp;Value&nbsp;is&nbsp;direct,&nbsp;and&nbsp;so&nbsp;is&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2720896">e</span><span class="op" id="2720897">.</span><span class="ident" id="2720898">word</span>&nbsp;<span class="op" id="2720903">=</span>&nbsp;<span class="ident" id="2720905">v</span><span class="op" id="2720906">.</span><span class="ident" id="2720907">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2720912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2720915">//&nbsp;Now,&nbsp;fill&nbsp;in&nbsp;the&nbsp;type&nbsp;portion.&nbsp;&nbsp;We&#39;re&nbsp;very&nbsp;careful&nbsp;here&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2720979">//&nbsp;to&nbsp;have&nbsp;any&nbsp;operation&nbsp;between&nbsp;the&nbsp;e.word&nbsp;and&nbsp;e.typ&nbsp;assignments</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2721046">//&nbsp;that&nbsp;would&nbsp;let&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;observe&nbsp;the&nbsp;partially-built</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2721115">//&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2721136">e</span><span class="op" id="2721137">.</span><span class="ident" id="2721138">typ</span>&nbsp;<span class="op" id="2721142">=</span>&nbsp;<span class="ident" id="2721144">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721147">return</span>&nbsp;<span class="ident" id="2721154">i</span><br>
<span class="lineno"></span><span class="op" id="2721156">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="2721159">//&nbsp;unpackEface&nbsp;converts&nbsp;the&nbsp;empty&nbsp;interface&nbsp;i&nbsp;to&nbsp;a&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2721217">func</span>&nbsp;<span class="ident" id="2721222">unpackEface</span><span class="op" id="2721233">(</span><span class="ident" id="2721234">i</span>&nbsp;<span class="keyword" id="2721236">interface</span><span class="op" id="2721245">{</span><span class="op" id="2721246">}</span><span class="op" id="2721247">)</span>&nbsp;<span class="ident" id="2721249">Value</span>&nbsp;<span class="op" id="2721255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2721258">e</span>&nbsp;<span class="op" id="2721260">:=</span>&nbsp;<span class="op" id="2721263">(</span><span class="op" id="2721264">*</span><span class="ident" id="2721265">emptyInterface</span><span class="op" id="2721279">)</span><span class="op" id="2721280">(</span><span class="ident" id="2721281">unsafe</span><span class="op" id="2721287">.</span><span class="ident" id="2721288">Pointer</span><span class="op" id="2721295">(</span><span class="op" id="2721296">&amp;</span><span class="ident" id="2721297">i</span><span class="op" id="2721298">)</span><span class="op" id="2721299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2721302">//&nbsp;NOTE:&nbsp;don&#39;t&nbsp;read&nbsp;e.word&nbsp;until&nbsp;we&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;a&nbsp;pointer&nbsp;or&nbsp;not.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2721383">t</span>&nbsp;<span class="op" id="2721385">:=</span>&nbsp;<span class="ident" id="2721388">e</span><span class="op" id="2721389">.</span><span class="ident" id="2721390">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721395">if</span>&nbsp;<span class="ident" id="2721398">t</span>&nbsp;<span class="op" id="2721400">==</span>&nbsp;<span class="ident" id="2721403">nil</span>&nbsp;<span class="op" id="2721407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721411">return</span>&nbsp;<span class="ident" id="2721418">Value</span><span class="op" id="2721423">{</span><span class="op" id="2721424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2721430">f</span>&nbsp;<span class="op" id="2721432">:=</span>&nbsp;<span class="ident" id="2721435">flag</span><span class="op" id="2721439">(</span><span class="ident" id="2721440">t</span><span class="op" id="2721441">.</span><span class="ident" id="2721442">Kind</span><span class="op" id="2721446">(</span><span class="op" id="2721447">)</span><span class="op" id="2721448">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721451">if</span>&nbsp;<span class="ident" id="2721454">ifaceIndir</span><span class="op" id="2721464">(</span><span class="ident" id="2721465">t</span><span class="op" id="2721466">)</span>&nbsp;<span class="op" id="2721468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2721472">f</span>&nbsp;<span class="op" id="2721474">|=</span>&nbsp;<span class="ident" id="2721477">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721491">return</span>&nbsp;<span class="ident" id="2721498">Value</span><span class="op" id="2721503">{</span><span class="ident" id="2721504">t</span><span class="op" id="2721505">,</span>&nbsp;<span class="ident" id="2721507">unsafe</span><span class="op" id="2721513">.</span><span class="ident" id="2721514">Pointer</span><span class="op" id="2721521">(</span><span class="ident" id="2721522">e</span><span class="op" id="2721523">.</span><span class="ident" id="2721524">word</span><span class="op" id="2721528">)</span><span class="op" id="2721529">,</span>&nbsp;<span class="ident" id="2721531">f</span><span class="op" id="2721532">}</span><br>
<span class="lineno"></span><span class="op" id="2721534">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="2721537">//&nbsp;A&nbsp;ValueError&nbsp;occurs&nbsp;when&nbsp;a&nbsp;Value&nbsp;method&nbsp;is&nbsp;invoked&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2721594">//&nbsp;a&nbsp;Value&nbsp;that&nbsp;does&nbsp;not&nbsp;support&nbsp;it.&nbsp;&nbsp;Such&nbsp;cases&nbsp;are&nbsp;documented</span><br>
<span class="lineno"></span><span class="comment" id="2721658">//&nbsp;in&nbsp;the&nbsp;description&nbsp;of&nbsp;each&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="2721696">type</span>&nbsp;<span class="ident" id="2721701">ValueError</span>&nbsp;<span class="keyword" id="2721712">struct</span>&nbsp;<span class="op" id="2721719">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2721722">Method</span>&nbsp;<span class="builtintype" id="2721729">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2721737">Kind</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2721744">Kind</span><br>
<span class="lineno"></span><span class="op" id="2721749">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2721752">func</span>&nbsp;<span class="op" id="2721757">(</span><span class="ident" id="2721758">e</span>&nbsp;<span class="op" id="2721760">*</span><span class="ident" id="2721761">ValueError</span><span class="op" id="2721771">)</span>&nbsp;<span class="ident" id="2721773">Error</span><span class="op" id="2721778">(</span><span class="op" id="2721779">)</span>&nbsp;<span class="builtintype" id="2721781">string</span>&nbsp;<span class="op" id="2721788">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721791">if</span>&nbsp;<span class="ident" id="2721794">e</span><span class="op" id="2721795">.</span><span class="ident" id="2721796">Kind</span>&nbsp;<span class="op" id="2721801">==</span>&nbsp;<span class="num" id="2721804">0</span>&nbsp;<span class="op" id="2721806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721810">return</span>&nbsp;<span class="string" id="2721817">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2721837">+</span>&nbsp;<span class="ident" id="2721839">e</span><span class="op" id="2721840">.</span><span class="ident" id="2721841">Method</span>&nbsp;<span class="op" id="2721848">+</span>&nbsp;<span class="string" id="2721850">&#34;&nbsp;on&nbsp;zero&nbsp;Value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2721868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2721871">return</span>&nbsp;<span class="string" id="2721878">&#34;reflect:&nbsp;call&nbsp;of&nbsp;&#34;</span>&nbsp;<span class="op" id="2721898">+</span>&nbsp;<span class="ident" id="2721900">e</span><span class="op" id="2721901">.</span><span class="ident" id="2721902">Method</span>&nbsp;<span class="op" id="2721909">+</span>&nbsp;<span class="string" id="2721911">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="2721918">+</span>&nbsp;<span class="ident" id="2721920">e</span><span class="op" id="2721921">.</span><span class="ident" id="2721922">Kind</span><span class="op" id="2721926">.</span><span class="ident" id="2721927">String</span><span class="op" id="2721933">(</span><span class="op" id="2721934">)</span>&nbsp;<span class="op" id="2721936">+</span>&nbsp;<span class="string" id="2721938">&#34;&nbsp;Value&#34;</span><br>
<span class="lineno"></span><span class="op" id="2721947">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="2721950">//&nbsp;methodName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;calling&nbsp;method,</span><br>
<span class="lineno"></span><span class="comment" id="2722004">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;two&nbsp;stack&nbsp;frames&nbsp;above.</span><br>
<span class="lineno"></span><span class="keyword" id="2722045">func</span>&nbsp;<span class="ident" id="2722050">methodName</span><span class="op" id="2722060">(</span><span class="op" id="2722061">)</span>&nbsp;<span class="builtintype" id="2722063">string</span>&nbsp;<span class="op" id="2722070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722073">pc</span><span class="op" id="2722075">,</span>&nbsp;<span class="ident" id="2722077">_</span><span class="op" id="2722078">,</span>&nbsp;<span class="ident" id="2722080">_</span><span class="op" id="2722081">,</span>&nbsp;<span class="ident" id="2722083">_</span>&nbsp;<span class="op" id="2722085">:=</span>&nbsp;<span class="ident" id="2722088">runtime</span><span class="op" id="2722095">.</span><span class="ident" id="2722096">Caller</span><span class="op" id="2722102">(</span><span class="num" id="2722103">2</span><span class="op" id="2722104">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722107">f</span>&nbsp;<span class="op" id="2722109">:=</span>&nbsp;<span class="ident" id="2722112">runtime</span><span class="op" id="2722119">.</span><span class="ident" id="2722120">FuncForPC</span><span class="op" id="2722129">(</span><span class="ident" id="2722130">pc</span><span class="op" id="2722132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722135">if</span>&nbsp;<span class="ident" id="2722138">f</span>&nbsp;<span class="op" id="2722140">==</span>&nbsp;<span class="ident" id="2722143">nil</span>&nbsp;<span class="op" id="2722147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722151">return</span>&nbsp;<span class="string" id="2722158">&#34;unknown&nbsp;method&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2722176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2722179">return</span>&nbsp;<span class="ident" id="2722186">f</span><span class="op" id="2722187">.</span><span class="ident" id="2722188">Name</span><span class="op" id="2722192">(</span><span class="op" id="2722193">)</span><br>
<span class="lineno">165</span><span class="op" id="2722195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2722198">//&nbsp;emptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;an&nbsp;interface{}&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2722256">type</span>&nbsp;<span class="ident" id="2722261">emptyInterface</span>&nbsp;<span class="keyword" id="2722276">struct</span>&nbsp;<span class="op" id="2722283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722286">typ</span>&nbsp;&nbsp;<span class="op" id="2722291">*</span><span class="ident" id="2722292">rtype</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722299">word</span>&nbsp;<span class="ident" id="2722304">unsafe</span><span class="op" id="2722310">.</span><span class="ident" id="2722311">Pointer</span><br>
<span class="lineno"></span><span class="op" id="2722319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2722322">//&nbsp;nonEmptyInterface&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;interface&nbsp;value&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="2722393">type</span>&nbsp;<span class="ident" id="2722398">nonEmptyInterface</span>&nbsp;<span class="keyword" id="2722416">struct</span>&nbsp;<span class="op" id="2722423">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2722426">//&nbsp;see&nbsp;../runtime/iface.c:/Itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722459">itab</span>&nbsp;<span class="op" id="2722464">*</span><span class="keyword" id="2722465">struct</span>&nbsp;<span class="op" id="2722472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722476">ityp</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2722483">*</span><span class="ident" id="2722484">rtype</span>&nbsp;<span class="comment" id="2722490">//&nbsp;static&nbsp;interface&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722517">typ</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2722524">*</span><span class="ident" id="2722525">rtype</span>&nbsp;<span class="comment" id="2722531">//&nbsp;dynamic&nbsp;concrete&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722558">link</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="2722565">unsafe</span><span class="op" id="2722571">.</span><span class="ident" id="2722572">Pointer</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722582">bad</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2722589">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722597">unused</span>&nbsp;<span class="builtintype" id="2722604">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722612">fun</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2722619">[</span><span class="num" id="2722620">100000</span><span class="op" id="2722626">]</span><span class="ident" id="2722627">unsafe</span><span class="op" id="2722633">.</span><span class="ident" id="2722634">Pointer</span>&nbsp;<span class="comment" id="2722642">//&nbsp;method&nbsp;table</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2722659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2722662">word</span>&nbsp;<span class="ident" id="2722667">unsafe</span><span class="op" id="2722673">.</span><span class="ident" id="2722674">Pointer</span><br>
<span class="lineno">185</span><span class="op" id="2722682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2722685">//&nbsp;mustBe&nbsp;panics&nbsp;if&nbsp;f&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;expected.</span><br>
<span class="lineno"></span><span class="comment" id="2722731">//&nbsp;Making&nbsp;this&nbsp;a&nbsp;method&nbsp;on&nbsp;flag&nbsp;instead&nbsp;of&nbsp;on&nbsp;Value</span><br>
<span class="lineno"></span><span class="comment" id="2722783">//&nbsp;(and&nbsp;embedding&nbsp;flag&nbsp;in&nbsp;Value)&nbsp;means&nbsp;that&nbsp;we&nbsp;can&nbsp;write</span><br>
<span class="lineno">190</span><span class="comment" id="2722840">//&nbsp;the&nbsp;very&nbsp;clear&nbsp;v.mustBe(Bool)&nbsp;and&nbsp;have&nbsp;it&nbsp;compile&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="2722898">//&nbsp;v.flag.mustBe(Bool),&nbsp;which&nbsp;will&nbsp;only&nbsp;bother&nbsp;to&nbsp;copy&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2722957">//&nbsp;single&nbsp;important&nbsp;word&nbsp;for&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2723000">func</span>&nbsp;<span class="op" id="2723005">(</span><span class="ident" id="2723006">f</span>&nbsp;<span class="ident" id="2723008">flag</span><span class="op" id="2723012">)</span>&nbsp;<span class="ident" id="2723014">mustBe</span><span class="op" id="2723020">(</span><span class="ident" id="2723021">expected</span>&nbsp;<span class="ident" id="2723030">Kind</span><span class="op" id="2723034">)</span>&nbsp;<span class="op" id="2723036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723039">if</span>&nbsp;<span class="ident" id="2723042">f</span><span class="op" id="2723043">.</span><span class="ident" id="2723044">kind</span><span class="op" id="2723048">(</span><span class="op" id="2723049">)</span>&nbsp;<span class="op" id="2723051">!=</span>&nbsp;<span class="ident" id="2723054">expected</span>&nbsp;<span class="op" id="2723063">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2723067">panic</span><span class="op" id="2723072">(</span><span class="op" id="2723073">&amp;</span><span class="ident" id="2723074">ValueError</span><span class="op" id="2723084">{</span><span class="ident" id="2723085">methodName</span><span class="op" id="2723095">(</span><span class="op" id="2723096">)</span><span class="op" id="2723097">,</span>&nbsp;<span class="ident" id="2723099">f</span><span class="op" id="2723100">.</span><span class="ident" id="2723101">kind</span><span class="op" id="2723105">(</span><span class="op" id="2723106">)</span><span class="op" id="2723107">}</span><span class="op" id="2723108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2723111">}</span><br>
<span class="lineno"></span><span class="op" id="2723113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2723116">//&nbsp;mustBeExported&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;was&nbsp;obtained&nbsp;using</span><br>
<span class="lineno">200</span><span class="comment" id="2723188">//&nbsp;an&nbsp;unexported&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="2723212">func</span>&nbsp;<span class="op" id="2723217">(</span><span class="ident" id="2723218">f</span>&nbsp;<span class="ident" id="2723220">flag</span><span class="op" id="2723224">)</span>&nbsp;<span class="ident" id="2723226">mustBeExported</span><span class="op" id="2723240">(</span><span class="op" id="2723241">)</span>&nbsp;<span class="op" id="2723243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723246">if</span>&nbsp;<span class="ident" id="2723249">f</span>&nbsp;<span class="op" id="2723251">==</span>&nbsp;<span class="num" id="2723254">0</span>&nbsp;<span class="op" id="2723256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2723260">panic</span><span class="op" id="2723265">(</span><span class="op" id="2723266">&amp;</span><span class="ident" id="2723267">ValueError</span><span class="op" id="2723277">{</span><span class="ident" id="2723278">methodName</span><span class="op" id="2723288">(</span><span class="op" id="2723289">)</span><span class="op" id="2723290">,</span>&nbsp;<span class="num" id="2723292">0</span><span class="op" id="2723293">}</span><span class="op" id="2723294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2723297">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723300">if</span>&nbsp;<span class="ident" id="2723303">f</span><span class="op" id="2723304">&amp;</span><span class="ident" id="2723305">flagRO</span>&nbsp;<span class="op" id="2723312">!=</span>&nbsp;<span class="num" id="2723315">0</span>&nbsp;<span class="op" id="2723317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2723321">panic</span><span class="op" id="2723326">(</span><span class="string" id="2723327">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2723339">+</span>&nbsp;<span class="ident" id="2723341">methodName</span><span class="op" id="2723351">(</span><span class="op" id="2723352">)</span>&nbsp;<span class="op" id="2723354">+</span>&nbsp;<span class="string" id="2723356">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2723402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2723405">}</span><br>
<span class="lineno"></span><span class="op" id="2723407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span><span class="comment" id="2723410">//&nbsp;mustBeAssignable&nbsp;panics&nbsp;if&nbsp;f&nbsp;records&nbsp;that&nbsp;the&nbsp;value&nbsp;is&nbsp;not&nbsp;assignable,</span><br>
<span class="lineno"></span><span class="comment" id="2723484">//&nbsp;which&nbsp;is&nbsp;to&nbsp;say&nbsp;that&nbsp;either&nbsp;it&nbsp;was&nbsp;obtained&nbsp;using&nbsp;an&nbsp;unexported&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2723557">//&nbsp;or&nbsp;it&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2723586">func</span>&nbsp;<span class="op" id="2723591">(</span><span class="ident" id="2723592">f</span>&nbsp;<span class="ident" id="2723594">flag</span><span class="op" id="2723598">)</span>&nbsp;<span class="ident" id="2723600">mustBeAssignable</span><span class="op" id="2723616">(</span><span class="op" id="2723617">)</span>&nbsp;<span class="op" id="2723619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723622">if</span>&nbsp;<span class="ident" id="2723625">f</span>&nbsp;<span class="op" id="2723627">==</span>&nbsp;<span class="num" id="2723630">0</span>&nbsp;<span class="op" id="2723632">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2723636">panic</span><span class="op" id="2723641">(</span><span class="op" id="2723642">&amp;</span><span class="ident" id="2723643">ValueError</span><span class="op" id="2723653">{</span><span class="ident" id="2723654">methodName</span><span class="op" id="2723664">(</span><span class="op" id="2723665">)</span><span class="op" id="2723666">,</span>&nbsp;<span class="ident" id="2723668">Invalid</span><span class="op" id="2723675">}</span><span class="op" id="2723676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2723679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2723682">//&nbsp;Assignable&nbsp;if&nbsp;addressable&nbsp;and&nbsp;not&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723731">if</span>&nbsp;<span class="ident" id="2723734">f</span><span class="op" id="2723735">&amp;</span><span class="ident" id="2723736">flagRO</span>&nbsp;<span class="op" id="2723743">!=</span>&nbsp;<span class="num" id="2723746">0</span>&nbsp;<span class="op" id="2723748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2723752">panic</span><span class="op" id="2723757">(</span><span class="string" id="2723758">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2723770">+</span>&nbsp;<span class="ident" id="2723772">methodName</span><span class="op" id="2723782">(</span><span class="op" id="2723783">)</span>&nbsp;<span class="op" id="2723785">+</span>&nbsp;<span class="string" id="2723787">&#34;&nbsp;using&nbsp;value&nbsp;obtained&nbsp;using&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2723833">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2723836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2723839">if</span>&nbsp;<span class="ident" id="2723842">f</span><span class="op" id="2723843">&amp;</span><span class="ident" id="2723844">flagAddr</span>&nbsp;<span class="op" id="2723853">==</span>&nbsp;<span class="num" id="2723856">0</span>&nbsp;<span class="op" id="2723858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2723862">panic</span><span class="op" id="2723867">(</span><span class="string" id="2723868">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2723880">+</span>&nbsp;<span class="ident" id="2723882">methodName</span><span class="op" id="2723892">(</span><span class="op" id="2723893">)</span>&nbsp;<span class="op" id="2723895">+</span>&nbsp;<span class="string" id="2723897">&#34;&nbsp;using&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2723925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2723928">}</span><br>
<span class="lineno"></span><span class="op" id="2723930">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="2723933">//&nbsp;Addr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;value&nbsp;representing&nbsp;the&nbsp;address&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2723996">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanAddr()&nbsp;returns&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2724037">//&nbsp;Addr&nbsp;is&nbsp;typically&nbsp;used&nbsp;to&nbsp;obtain&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;struct&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="2724101">//&nbsp;or&nbsp;slice&nbsp;element&nbsp;in&nbsp;order&nbsp;to&nbsp;call&nbsp;a&nbsp;method&nbsp;that&nbsp;requires&nbsp;a</span><br>
<span class="lineno">230</span><span class="comment" id="2724163">//&nbsp;pointer&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2724184">func</span>&nbsp;<span class="op" id="2724189">(</span><span class="ident" id="2724190">v</span>&nbsp;<span class="ident" id="2724192">Value</span><span class="op" id="2724197">)</span>&nbsp;<span class="ident" id="2724199">Addr</span><span class="op" id="2724203">(</span><span class="op" id="2724204">)</span>&nbsp;<span class="ident" id="2724206">Value</span>&nbsp;<span class="op" id="2724212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724215">if</span>&nbsp;<span class="ident" id="2724218">v</span><span class="op" id="2724219">.</span><span class="ident" id="2724220">flag</span><span class="op" id="2724224">&amp;</span><span class="ident" id="2724225">flagAddr</span>&nbsp;<span class="op" id="2724234">==</span>&nbsp;<span class="num" id="2724237">0</span>&nbsp;<span class="op" id="2724239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2724243">panic</span><span class="op" id="2724248">(</span><span class="string" id="2724249">&#34;reflect.Value.Addr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2724292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2724295">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724298">return</span>&nbsp;<span class="ident" id="2724305">Value</span><span class="op" id="2724310">{</span><span class="ident" id="2724311">v</span><span class="op" id="2724312">.</span><span class="ident" id="2724313">typ</span><span class="op" id="2724316">.</span><span class="ident" id="2724317">ptrTo</span><span class="op" id="2724322">(</span><span class="op" id="2724323">)</span><span class="op" id="2724324">,</span>&nbsp;<span class="ident" id="2724326">v</span><span class="op" id="2724327">.</span><span class="ident" id="2724328">ptr</span><span class="op" id="2724331">,</span>&nbsp;<span class="op" id="2724333">(</span><span class="ident" id="2724334">v</span><span class="op" id="2724335">.</span><span class="ident" id="2724336">flag</span>&nbsp;<span class="op" id="2724341">&amp;</span>&nbsp;<span class="ident" id="2724343">flagRO</span><span class="op" id="2724349">)</span>&nbsp;<span class="op" id="2724351">|</span>&nbsp;<span class="ident" id="2724353">flag</span><span class="op" id="2724357">(</span><span class="ident" id="2724358">Ptr</span><span class="op" id="2724361">)</span><span class="op" id="2724362">}</span><br>
<span class="lineno"></span><span class="op" id="2724364">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2724367">//&nbsp;Bool&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2724405">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Bool.</span><br>
<span class="lineno">240</span><span class="keyword" id="2724443">func</span>&nbsp;<span class="op" id="2724448">(</span><span class="ident" id="2724449">v</span>&nbsp;<span class="ident" id="2724451">Value</span><span class="op" id="2724456">)</span>&nbsp;<span class="ident" id="2724458">Bool</span><span class="op" id="2724462">(</span><span class="op" id="2724463">)</span>&nbsp;<span class="builtintype" id="2724465">bool</span>&nbsp;<span class="op" id="2724470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724473">v</span><span class="op" id="2724474">.</span><span class="ident" id="2724475">mustBe</span><span class="op" id="2724481">(</span><span class="ident" id="2724482">Bool</span><span class="op" id="2724486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724489">return</span>&nbsp;<span class="op" id="2724496">*</span><span class="op" id="2724497">(</span><span class="op" id="2724498">*</span><span class="builtintype" id="2724499">bool</span><span class="op" id="2724503">)</span><span class="op" id="2724504">(</span><span class="ident" id="2724505">v</span><span class="op" id="2724506">.</span><span class="ident" id="2724507">ptr</span><span class="op" id="2724510">)</span><br>
<span class="lineno"></span><span class="op" id="2724512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="2724515">//&nbsp;Bytes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2724554">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2724616">func</span>&nbsp;<span class="op" id="2724621">(</span><span class="ident" id="2724622">v</span>&nbsp;<span class="ident" id="2724624">Value</span><span class="op" id="2724629">)</span>&nbsp;<span class="ident" id="2724631">Bytes</span><span class="op" id="2724636">(</span><span class="op" id="2724637">)</span>&nbsp;<span class="op" id="2724639">[</span><span class="op" id="2724640">]</span><span class="builtintype" id="2724641">byte</span>&nbsp;<span class="op" id="2724646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724649">v</span><span class="op" id="2724650">.</span><span class="ident" id="2724651">mustBe</span><span class="op" id="2724657">(</span><span class="ident" id="2724658">Slice</span><span class="op" id="2724663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724666">if</span>&nbsp;<span class="ident" id="2724669">v</span><span class="op" id="2724670">.</span><span class="ident" id="2724671">typ</span><span class="op" id="2724674">.</span><span class="ident" id="2724675">Elem</span><span class="op" id="2724679">(</span><span class="op" id="2724680">)</span><span class="op" id="2724681">.</span><span class="ident" id="2724682">Kind</span><span class="op" id="2724686">(</span><span class="op" id="2724687">)</span>&nbsp;<span class="op" id="2724689">!=</span>&nbsp;<span class="ident" id="2724692">Uint8</span>&nbsp;<span class="op" id="2724698">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2724702">panic</span><span class="op" id="2724707">(</span><span class="string" id="2724708">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2724747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2724750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2724753">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724811">return</span>&nbsp;<span class="op" id="2724818">*</span><span class="op" id="2724819">(</span><span class="op" id="2724820">*</span><span class="op" id="2724821">[</span><span class="op" id="2724822">]</span><span class="builtintype" id="2724823">byte</span><span class="op" id="2724827">)</span><span class="op" id="2724828">(</span><span class="ident" id="2724829">v</span><span class="op" id="2724830">.</span><span class="ident" id="2724831">ptr</span><span class="op" id="2724834">)</span><br>
<span class="lineno"></span><span class="op" id="2724836">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="comment" id="2724839">//&nbsp;runes&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2724878">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2724949">func</span>&nbsp;<span class="op" id="2724954">(</span><span class="ident" id="2724955">v</span>&nbsp;<span class="ident" id="2724957">Value</span><span class="op" id="2724962">)</span>&nbsp;<span class="ident" id="2724964">runes</span><span class="op" id="2724969">(</span><span class="op" id="2724970">)</span>&nbsp;<span class="op" id="2724972">[</span><span class="op" id="2724973">]</span><span class="builtintype" id="2724974">rune</span>&nbsp;<span class="op" id="2724979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2724982">v</span><span class="op" id="2724983">.</span><span class="ident" id="2724984">mustBe</span><span class="op" id="2724990">(</span><span class="ident" id="2724991">Slice</span><span class="op" id="2724996">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2724999">if</span>&nbsp;<span class="ident" id="2725002">v</span><span class="op" id="2725003">.</span><span class="ident" id="2725004">typ</span><span class="op" id="2725007">.</span><span class="ident" id="2725008">Elem</span><span class="op" id="2725012">(</span><span class="op" id="2725013">)</span><span class="op" id="2725014">.</span><span class="ident" id="2725015">Kind</span><span class="op" id="2725019">(</span><span class="op" id="2725020">)</span>&nbsp;<span class="op" id="2725022">!=</span>&nbsp;<span class="ident" id="2725025">Int32</span>&nbsp;<span class="op" id="2725031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2725035">panic</span><span class="op" id="2725040">(</span><span class="string" id="2725041">&#34;reflect.Value.Bytes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2725080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2725083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2725086">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725144">return</span>&nbsp;<span class="op" id="2725151">*</span><span class="op" id="2725152">(</span><span class="op" id="2725153">*</span><span class="op" id="2725154">[</span><span class="op" id="2725155">]</span><span class="builtintype" id="2725156">rune</span><span class="op" id="2725160">)</span><span class="op" id="2725161">(</span><span class="ident" id="2725162">v</span><span class="op" id="2725163">.</span><span class="ident" id="2725164">ptr</span><span class="op" id="2725167">)</span><br>
<span class="lineno">265</span><span class="op" id="2725169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2725172">//&nbsp;CanAddr&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&#39;s&nbsp;address&nbsp;can&nbsp;be&nbsp;obtained&nbsp;with&nbsp;Addr.</span><br>
<span class="lineno"></span><span class="comment" id="2725246">//&nbsp;Such&nbsp;values&nbsp;are&nbsp;called&nbsp;addressable.&nbsp;&nbsp;A&nbsp;value&nbsp;is&nbsp;addressable&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2725318">//&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;slice,&nbsp;an&nbsp;element&nbsp;of&nbsp;an&nbsp;addressable&nbsp;array,</span><br>
<span class="lineno">270</span><span class="comment" id="2725380">//&nbsp;a&nbsp;field&nbsp;of&nbsp;an&nbsp;addressable&nbsp;struct,&nbsp;or&nbsp;the&nbsp;result&nbsp;of&nbsp;dereferencing&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="comment" id="2725459">//&nbsp;If&nbsp;CanAddr&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Addr&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2725513">func</span>&nbsp;<span class="op" id="2725518">(</span><span class="ident" id="2725519">v</span>&nbsp;<span class="ident" id="2725521">Value</span><span class="op" id="2725526">)</span>&nbsp;<span class="ident" id="2725528">CanAddr</span><span class="op" id="2725535">(</span><span class="op" id="2725536">)</span>&nbsp;<span class="builtintype" id="2725538">bool</span>&nbsp;<span class="op" id="2725543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725546">return</span>&nbsp;<span class="ident" id="2725553">v</span><span class="op" id="2725554">.</span><span class="ident" id="2725555">flag</span><span class="op" id="2725559">&amp;</span><span class="ident" id="2725560">flagAddr</span>&nbsp;<span class="op" id="2725569">!=</span>&nbsp;<span class="num" id="2725572">0</span><br>
<span class="lineno"></span><span class="op" id="2725574">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="2725577">//&nbsp;CanSet&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;of&nbsp;v&nbsp;can&nbsp;be&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="2725634">//&nbsp;A&nbsp;Value&nbsp;can&nbsp;be&nbsp;changed&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;addressable&nbsp;and&nbsp;was&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2725698">//&nbsp;obtained&nbsp;by&nbsp;the&nbsp;use&nbsp;of&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="2725750">//&nbsp;If&nbsp;CanSet&nbsp;returns&nbsp;false,&nbsp;calling&nbsp;Set&nbsp;or&nbsp;any&nbsp;type-specific</span><br>
<span class="lineno">280</span><span class="comment" id="2725811">//&nbsp;setter&nbsp;(e.g.,&nbsp;SetBool,&nbsp;SetInt64)&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="2725859">func</span>&nbsp;<span class="op" id="2725864">(</span><span class="ident" id="2725865">v</span>&nbsp;<span class="ident" id="2725867">Value</span><span class="op" id="2725872">)</span>&nbsp;<span class="ident" id="2725874">CanSet</span><span class="op" id="2725880">(</span><span class="op" id="2725881">)</span>&nbsp;<span class="builtintype" id="2725883">bool</span>&nbsp;<span class="op" id="2725888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2725891">return</span>&nbsp;<span class="ident" id="2725898">v</span><span class="op" id="2725899">.</span><span class="ident" id="2725900">flag</span><span class="op" id="2725904">&amp;</span><span class="op" id="2725905">(</span><span class="ident" id="2725906">flagAddr</span><span class="op" id="2725914">|</span><span class="ident" id="2725915">flagRO</span><span class="op" id="2725921">)</span>&nbsp;<span class="op" id="2725923">==</span>&nbsp;<span class="ident" id="2725926">flagAddr</span><br>
<span class="lineno"></span><span class="op" id="2725935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="comment" id="2725938">//&nbsp;Call&nbsp;calls&nbsp;the&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in.</span><br>
<span class="lineno"></span><span class="comment" id="2725996">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]).</span><br>
<span class="lineno"></span><span class="comment" id="2726087">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func.</span><br>
<span class="lineno"></span><span class="comment" id="2726127">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2726171">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">290</span><span class="comment" id="2726230">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="comment" id="2726287">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;variadic&nbsp;function,&nbsp;Call&nbsp;creates&nbsp;the&nbsp;variadic&nbsp;slice&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="2726361">//&nbsp;itself,&nbsp;copying&nbsp;in&nbsp;the&nbsp;corresponding&nbsp;values.</span><br>
<span class="lineno"></span><span class="keyword" id="2726409">func</span>&nbsp;<span class="op" id="2726414">(</span><span class="ident" id="2726415">v</span>&nbsp;<span class="ident" id="2726417">Value</span><span class="op" id="2726422">)</span>&nbsp;<span class="ident" id="2726424">Call</span><span class="op" id="2726428">(</span><span class="ident" id="2726429">in</span>&nbsp;<span class="op" id="2726432">[</span><span class="op" id="2726433">]</span><span class="ident" id="2726434">Value</span><span class="op" id="2726439">)</span>&nbsp;<span class="op" id="2726441">[</span><span class="op" id="2726442">]</span><span class="ident" id="2726443">Value</span>&nbsp;<span class="op" id="2726449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726452">v</span><span class="op" id="2726453">.</span><span class="ident" id="2726454">mustBe</span><span class="op" id="2726460">(</span><span class="ident" id="2726461">Func</span><span class="op" id="2726465">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2726468">v</span><span class="op" id="2726469">.</span><span class="ident" id="2726470">mustBeExported</span><span class="op" id="2726484">(</span><span class="op" id="2726485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2726488">return</span>&nbsp;<span class="ident" id="2726495">v</span><span class="op" id="2726496">.</span><span class="ident" id="2726497">call</span><span class="op" id="2726501">(</span><span class="string" id="2726502">&#34;Call&#34;</span><span class="op" id="2726508">,</span>&nbsp;<span class="ident" id="2726510">in</span><span class="op" id="2726512">)</span><br>
<span class="lineno"></span><span class="op" id="2726514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2726517">//&nbsp;CallSlice&nbsp;calls&nbsp;the&nbsp;variadic&nbsp;function&nbsp;v&nbsp;with&nbsp;the&nbsp;input&nbsp;arguments&nbsp;in,</span><br>
<span class="lineno">300</span><span class="comment" id="2726589">//&nbsp;assigning&nbsp;the&nbsp;slice&nbsp;in[len(in)-1]&nbsp;to&nbsp;v&#39;s&nbsp;final&nbsp;variadic&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2726658">//&nbsp;For&nbsp;example,&nbsp;if&nbsp;len(in)&nbsp;==&nbsp;3,&nbsp;v.Call(in)&nbsp;represents&nbsp;the&nbsp;Go&nbsp;call&nbsp;v(in[0],&nbsp;in[1],&nbsp;in[2]...).</span><br>
<span class="lineno"></span><span class="comment" id="2726752">//&nbsp;Call&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Func&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;variadic.</span><br>
<span class="lineno"></span><span class="comment" id="2726816">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;output&nbsp;results&nbsp;as&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2726860">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;input&nbsp;argument&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the</span><br>
<span class="lineno">305</span><span class="comment" id="2726919">//&nbsp;type&nbsp;of&nbsp;the&nbsp;function&#39;s&nbsp;corresponding&nbsp;input&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="2726976">func</span>&nbsp;<span class="op" id="2726981">(</span><span class="ident" id="2726982">v</span>&nbsp;<span class="ident" id="2726984">Value</span><span class="op" id="2726989">)</span>&nbsp;<span class="ident" id="2726991">CallSlice</span><span class="op" id="2727000">(</span><span class="ident" id="2727001">in</span>&nbsp;<span class="op" id="2727004">[</span><span class="op" id="2727005">]</span><span class="ident" id="2727006">Value</span><span class="op" id="2727011">)</span>&nbsp;<span class="op" id="2727013">[</span><span class="op" id="2727014">]</span><span class="ident" id="2727015">Value</span>&nbsp;<span class="op" id="2727021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727024">v</span><span class="op" id="2727025">.</span><span class="ident" id="2727026">mustBe</span><span class="op" id="2727032">(</span><span class="ident" id="2727033">Func</span><span class="op" id="2727037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727040">v</span><span class="op" id="2727041">.</span><span class="ident" id="2727042">mustBeExported</span><span class="op" id="2727056">(</span><span class="op" id="2727057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727060">return</span>&nbsp;<span class="ident" id="2727067">v</span><span class="op" id="2727068">.</span><span class="ident" id="2727069">call</span><span class="op" id="2727073">(</span><span class="string" id="2727074">&#34;CallSlice&#34;</span><span class="op" id="2727085">,</span>&nbsp;<span class="ident" id="2727087">in</span><span class="op" id="2727089">)</span><br>
<span class="lineno">310</span><span class="op" id="2727091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2727094">var</span>&nbsp;<span class="ident" id="2727098">callGC</span>&nbsp;<span class="builtintype" id="2727105">bool</span>&nbsp;<span class="comment" id="2727110">//&nbsp;for&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2727150">func</span>&nbsp;<span class="op" id="2727155">(</span><span class="ident" id="2727156">v</span>&nbsp;<span class="ident" id="2727158">Value</span><span class="op" id="2727163">)</span>&nbsp;<span class="ident" id="2727165">call</span><span class="op" id="2727169">(</span><span class="ident" id="2727170">op</span>&nbsp;<span class="builtintype" id="2727173">string</span><span class="op" id="2727179">,</span>&nbsp;<span class="ident" id="2727181">in</span>&nbsp;<span class="op" id="2727184">[</span><span class="op" id="2727185">]</span><span class="ident" id="2727186">Value</span><span class="op" id="2727191">)</span>&nbsp;<span class="op" id="2727193">[</span><span class="op" id="2727194">]</span><span class="ident" id="2727195">Value</span>&nbsp;<span class="op" id="2727201">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2727204">//&nbsp;Get&nbsp;function&nbsp;pointer,&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727236">t</span>&nbsp;<span class="op" id="2727238">:=</span>&nbsp;<span class="ident" id="2727241">v</span><span class="op" id="2727242">.</span><span class="ident" id="2727243">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727248">var</span>&nbsp;<span class="op" id="2727252">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727256">fn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2727265">unsafe</span><span class="op" id="2727271">.</span><span class="ident" id="2727272">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727282">rcvr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2727291">Value</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727299">rcvrtype</span>&nbsp;<span class="op" id="2727308">*</span><span class="ident" id="2727309">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727319">if</span>&nbsp;<span class="ident" id="2727322">v</span><span class="op" id="2727323">.</span><span class="ident" id="2727324">flag</span><span class="op" id="2727328">&amp;</span><span class="ident" id="2727329">flagMethod</span>&nbsp;<span class="op" id="2727340">!=</span>&nbsp;<span class="num" id="2727343">0</span>&nbsp;<span class="op" id="2727345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727349">rcvr</span>&nbsp;<span class="op" id="2727354">=</span>&nbsp;<span class="ident" id="2727356">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727360">rcvrtype</span><span class="op" id="2727368">,</span>&nbsp;<span class="ident" id="2727370">t</span><span class="op" id="2727371">,</span>&nbsp;<span class="ident" id="2727373">fn</span>&nbsp;<span class="op" id="2727376">=</span>&nbsp;<span class="ident" id="2727378">methodReceiver</span><span class="op" id="2727392">(</span><span class="ident" id="2727393">op</span><span class="op" id="2727395">,</span>&nbsp;<span class="ident" id="2727397">v</span><span class="op" id="2727398">,</span>&nbsp;<span class="builtintype" id="2727400">int</span><span class="op" id="2727403">(</span><span class="ident" id="2727404">v</span><span class="op" id="2727405">.</span><span class="ident" id="2727406">flag</span><span class="op" id="2727410">)</span><span class="op" id="2727411">&gt;&gt;</span><span class="ident" id="2727413">flagMethodShift</span><span class="op" id="2727428">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727431">}</span>&nbsp;<span class="keyword" id="2727433">else</span>&nbsp;<span class="keyword" id="2727438">if</span>&nbsp;<span class="ident" id="2727441">v</span><span class="op" id="2727442">.</span><span class="ident" id="2727443">flag</span><span class="op" id="2727447">&amp;</span><span class="ident" id="2727448">flagIndir</span>&nbsp;<span class="op" id="2727458">!=</span>&nbsp;<span class="num" id="2727461">0</span>&nbsp;<span class="op" id="2727463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727467">fn</span>&nbsp;<span class="op" id="2727470">=</span>&nbsp;<span class="op" id="2727472">*</span><span class="op" id="2727473">(</span><span class="op" id="2727474">*</span><span class="ident" id="2727475">unsafe</span><span class="op" id="2727481">.</span><span class="ident" id="2727482">Pointer</span><span class="op" id="2727489">)</span><span class="op" id="2727490">(</span><span class="ident" id="2727491">v</span><span class="op" id="2727492">.</span><span class="ident" id="2727493">ptr</span><span class="op" id="2727496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727499">}</span>&nbsp;<span class="keyword" id="2727501">else</span>&nbsp;<span class="op" id="2727506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727510">fn</span>&nbsp;<span class="op" id="2727513">=</span>&nbsp;<span class="ident" id="2727515">v</span><span class="op" id="2727516">.</span><span class="ident" id="2727517">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727522">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727526">if</span>&nbsp;<span class="ident" id="2727529">fn</span>&nbsp;<span class="op" id="2727532">==</span>&nbsp;<span class="ident" id="2727535">nil</span>&nbsp;<span class="op" id="2727539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2727543">panic</span><span class="op" id="2727548">(</span><span class="string" id="2727549">&#34;reflect.Value.Call:&nbsp;call&nbsp;of&nbsp;nil&nbsp;function&#34;</span><span class="op" id="2727591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727598">isSlice</span>&nbsp;<span class="op" id="2727606">:=</span>&nbsp;<span class="ident" id="2727609">op</span>&nbsp;<span class="op" id="2727612">==</span>&nbsp;<span class="string" id="2727615">&#34;CallSlice&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727628">n</span>&nbsp;<span class="op" id="2727630">:=</span>&nbsp;<span class="ident" id="2727633">t</span><span class="op" id="2727634">.</span><span class="ident" id="2727635">NumIn</span><span class="op" id="2727640">(</span><span class="op" id="2727641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727644">if</span>&nbsp;<span class="ident" id="2727647">isSlice</span>&nbsp;<span class="op" id="2727655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727659">if</span>&nbsp;<span class="op" id="2727662">!</span><span class="ident" id="2727663">t</span><span class="op" id="2727664">.</span><span class="ident" id="2727665">IsVariadic</span><span class="op" id="2727675">(</span><span class="op" id="2727676">)</span>&nbsp;<span class="op" id="2727678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2727683">panic</span><span class="op" id="2727688">(</span><span class="string" id="2727689">&#34;reflect:&nbsp;CallSlice&nbsp;of&nbsp;non-variadic&nbsp;function&#34;</span><span class="op" id="2727734">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727742">if</span>&nbsp;<span class="builtinfunc" id="2727745">len</span><span class="op" id="2727748">(</span><span class="ident" id="2727749">in</span><span class="op" id="2727751">)</span>&nbsp;<span class="op" id="2727753">&lt;</span>&nbsp;<span class="ident" id="2727755">n</span>&nbsp;<span class="op" id="2727757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2727762">panic</span><span class="op" id="2727767">(</span><span class="string" id="2727768">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2727817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727825">if</span>&nbsp;<span class="builtinfunc" id="2727828">len</span><span class="op" id="2727831">(</span><span class="ident" id="2727832">in</span><span class="op" id="2727834">)</span>&nbsp;<span class="op" id="2727836">&gt;</span>&nbsp;<span class="ident" id="2727838">n</span>&nbsp;<span class="op" id="2727840">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2727845">panic</span><span class="op" id="2727850">(</span><span class="string" id="2727851">&#34;reflect:&nbsp;CallSlice&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2727901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727908">}</span>&nbsp;<span class="keyword" id="2727910">else</span>&nbsp;<span class="op" id="2727915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727919">if</span>&nbsp;<span class="ident" id="2727922">t</span><span class="op" id="2727923">.</span><span class="ident" id="2727924">IsVariadic</span><span class="op" id="2727934">(</span><span class="op" id="2727935">)</span>&nbsp;<span class="op" id="2727937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2727942">n</span><span class="op" id="2727943">--</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2727948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2727952">if</span>&nbsp;<span class="builtinfunc" id="2727955">len</span><span class="op" id="2727958">(</span><span class="ident" id="2727959">in</span><span class="op" id="2727961">)</span>&nbsp;<span class="op" id="2727963">&lt;</span>&nbsp;<span class="ident" id="2727965">n</span>&nbsp;<span class="op" id="2727967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2727972">panic</span><span class="op" id="2727977">(</span><span class="string" id="2727978">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;few&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2728022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728030">if</span>&nbsp;<span class="op" id="2728033">!</span><span class="ident" id="2728034">t</span><span class="op" id="2728035">.</span><span class="ident" id="2728036">IsVariadic</span><span class="op" id="2728046">(</span><span class="op" id="2728047">)</span>&nbsp;<span class="op" id="2728049">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="2728052">len</span><span class="op" id="2728055">(</span><span class="ident" id="2728056">in</span><span class="op" id="2728058">)</span>&nbsp;<span class="op" id="2728060">&gt;</span>&nbsp;<span class="ident" id="2728062">n</span>&nbsp;<span class="op" id="2728064">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728069">panic</span><span class="op" id="2728074">(</span><span class="string" id="2728075">&#34;reflect:&nbsp;Call&nbsp;with&nbsp;too&nbsp;many&nbsp;input&nbsp;arguments&#34;</span><span class="op" id="2728120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728130">for</span>&nbsp;<span class="ident" id="2728134">_</span><span class="op" id="2728135">,</span>&nbsp;<span class="ident" id="2728137">x</span>&nbsp;<span class="op" id="2728139">:=</span>&nbsp;<span class="keyword" id="2728142">range</span>&nbsp;<span class="ident" id="2728148">in</span>&nbsp;<span class="op" id="2728151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728155">if</span>&nbsp;<span class="ident" id="2728158">x</span><span class="op" id="2728159">.</span><span class="ident" id="2728160">Kind</span><span class="op" id="2728164">(</span><span class="op" id="2728165">)</span>&nbsp;<span class="op" id="2728167">==</span>&nbsp;<span class="ident" id="2728170">Invalid</span>&nbsp;<span class="op" id="2728178">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728183">panic</span><span class="op" id="2728188">(</span><span class="string" id="2728189">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2728201">+</span>&nbsp;<span class="ident" id="2728203">op</span>&nbsp;<span class="op" id="2728206">+</span>&nbsp;<span class="string" id="2728208">&#34;&nbsp;using&nbsp;zero&nbsp;Value&nbsp;argument&#34;</span><span class="op" id="2728236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728246">for</span>&nbsp;<span class="ident" id="2728250">i</span>&nbsp;<span class="op" id="2728252">:=</span>&nbsp;<span class="num" id="2728255">0</span><span class="op" id="2728256">;</span>&nbsp;<span class="ident" id="2728258">i</span>&nbsp;<span class="op" id="2728260">&lt;</span>&nbsp;<span class="ident" id="2728262">n</span><span class="op" id="2728263">;</span>&nbsp;<span class="ident" id="2728265">i</span><span class="op" id="2728266">++</span>&nbsp;<span class="op" id="2728269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728273">if</span>&nbsp;<span class="ident" id="2728276">xt</span><span class="op" id="2728278">,</span>&nbsp;<span class="ident" id="2728280">targ</span>&nbsp;<span class="op" id="2728285">:=</span>&nbsp;<span class="ident" id="2728288">in</span><span class="op" id="2728290">[</span><span class="ident" id="2728291">i</span><span class="op" id="2728292">]</span><span class="op" id="2728293">.</span><span class="ident" id="2728294">Type</span><span class="op" id="2728298">(</span><span class="op" id="2728299">)</span><span class="op" id="2728300">,</span>&nbsp;<span class="ident" id="2728302">t</span><span class="op" id="2728303">.</span><span class="ident" id="2728304">In</span><span class="op" id="2728306">(</span><span class="ident" id="2728307">i</span><span class="op" id="2728308">)</span><span class="op" id="2728309">;</span>&nbsp;<span class="op" id="2728311">!</span><span class="ident" id="2728312">xt</span><span class="op" id="2728314">.</span><span class="ident" id="2728315">AssignableTo</span><span class="op" id="2728327">(</span><span class="ident" id="2728328">targ</span><span class="op" id="2728332">)</span>&nbsp;<span class="op" id="2728334">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728339">panic</span><span class="op" id="2728344">(</span><span class="string" id="2728345">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2728357">+</span>&nbsp;<span class="ident" id="2728359">op</span>&nbsp;<span class="op" id="2728362">+</span>&nbsp;<span class="string" id="2728364">&#34;&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2728374">+</span>&nbsp;<span class="ident" id="2728376">xt</span><span class="op" id="2728378">.</span><span class="ident" id="2728379">String</span><span class="op" id="2728385">(</span><span class="op" id="2728386">)</span>&nbsp;<span class="op" id="2728388">+</span>&nbsp;<span class="string" id="2728390">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2728402">+</span>&nbsp;<span class="ident" id="2728404">targ</span><span class="op" id="2728408">.</span><span class="ident" id="2728409">String</span><span class="op" id="2728415">(</span><span class="op" id="2728416">)</span><span class="op" id="2728417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728421">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728427">if</span>&nbsp;<span class="op" id="2728430">!</span><span class="ident" id="2728431">isSlice</span>&nbsp;<span class="op" id="2728439">&amp;&amp;</span>&nbsp;<span class="ident" id="2728442">t</span><span class="op" id="2728443">.</span><span class="ident" id="2728444">IsVariadic</span><span class="op" id="2728454">(</span><span class="op" id="2728455">)</span>&nbsp;<span class="op" id="2728457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2728461">//&nbsp;prepare&nbsp;slice&nbsp;for&nbsp;remaining&nbsp;values</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728501">m</span>&nbsp;<span class="op" id="2728503">:=</span>&nbsp;<span class="builtinfunc" id="2728506">len</span><span class="op" id="2728509">(</span><span class="ident" id="2728510">in</span><span class="op" id="2728512">)</span>&nbsp;<span class="op" id="2728514">-</span>&nbsp;<span class="ident" id="2728516">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728520">slice</span>&nbsp;<span class="op" id="2728526">:=</span>&nbsp;<span class="ident" id="2728529">MakeSlice</span><span class="op" id="2728538">(</span><span class="ident" id="2728539">t</span><span class="op" id="2728540">.</span><span class="ident" id="2728541">In</span><span class="op" id="2728543">(</span><span class="ident" id="2728544">n</span><span class="op" id="2728545">)</span><span class="op" id="2728546">,</span>&nbsp;<span class="ident" id="2728548">m</span><span class="op" id="2728549">,</span>&nbsp;<span class="ident" id="2728551">m</span><span class="op" id="2728552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728556">elem</span>&nbsp;<span class="op" id="2728561">:=</span>&nbsp;<span class="ident" id="2728564">t</span><span class="op" id="2728565">.</span><span class="ident" id="2728566">In</span><span class="op" id="2728568">(</span><span class="ident" id="2728569">n</span><span class="op" id="2728570">)</span><span class="op" id="2728571">.</span><span class="ident" id="2728572">Elem</span><span class="op" id="2728576">(</span><span class="op" id="2728577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728581">for</span>&nbsp;<span class="ident" id="2728585">i</span>&nbsp;<span class="op" id="2728587">:=</span>&nbsp;<span class="num" id="2728590">0</span><span class="op" id="2728591">;</span>&nbsp;<span class="ident" id="2728593">i</span>&nbsp;<span class="op" id="2728595">&lt;</span>&nbsp;<span class="ident" id="2728597">m</span><span class="op" id="2728598">;</span>&nbsp;<span class="ident" id="2728600">i</span><span class="op" id="2728601">++</span>&nbsp;<span class="op" id="2728604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728609">x</span>&nbsp;<span class="op" id="2728611">:=</span>&nbsp;<span class="ident" id="2728614">in</span><span class="op" id="2728616">[</span><span class="ident" id="2728617">n</span><span class="op" id="2728618">+</span><span class="ident" id="2728619">i</span><span class="op" id="2728620">]</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728625">if</span>&nbsp;<span class="ident" id="2728628">xt</span>&nbsp;<span class="op" id="2728631">:=</span>&nbsp;<span class="ident" id="2728634">x</span><span class="op" id="2728635">.</span><span class="ident" id="2728636">Type</span><span class="op" id="2728640">(</span><span class="op" id="2728641">)</span><span class="op" id="2728642">;</span>&nbsp;<span class="op" id="2728644">!</span><span class="ident" id="2728645">xt</span><span class="op" id="2728647">.</span><span class="ident" id="2728648">AssignableTo</span><span class="op" id="2728660">(</span><span class="ident" id="2728661">elem</span><span class="op" id="2728665">)</span>&nbsp;<span class="op" id="2728667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728673">panic</span><span class="op" id="2728678">(</span><span class="string" id="2728679">&#34;reflect:&nbsp;cannot&nbsp;use&nbsp;&#34;</span>&nbsp;<span class="op" id="2728702">+</span>&nbsp;<span class="ident" id="2728704">xt</span><span class="op" id="2728706">.</span><span class="ident" id="2728707">String</span><span class="op" id="2728713">(</span><span class="op" id="2728714">)</span>&nbsp;<span class="op" id="2728716">+</span>&nbsp;<span class="string" id="2728718">&#34;&nbsp;as&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2728730">+</span>&nbsp;<span class="ident" id="2728732">elem</span><span class="op" id="2728736">.</span><span class="ident" id="2728737">String</span><span class="op" id="2728743">(</span><span class="op" id="2728744">)</span>&nbsp;<span class="op" id="2728746">+</span>&nbsp;<span class="string" id="2728748">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="2728755">+</span>&nbsp;<span class="ident" id="2728757">op</span><span class="op" id="2728759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728769">slice</span><span class="op" id="2728774">.</span><span class="ident" id="2728775">Index</span><span class="op" id="2728780">(</span><span class="ident" id="2728781">i</span><span class="op" id="2728782">)</span><span class="op" id="2728783">.</span><span class="ident" id="2728784">Set</span><span class="op" id="2728787">(</span><span class="ident" id="2728788">x</span><span class="op" id="2728789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728793">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728797">origIn</span>&nbsp;<span class="op" id="2728804">:=</span>&nbsp;<span class="ident" id="2728807">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728812">in</span>&nbsp;<span class="op" id="2728815">=</span>&nbsp;<span class="builtinfunc" id="2728817">make</span><span class="op" id="2728821">(</span><span class="op" id="2728822">[</span><span class="op" id="2728823">]</span><span class="ident" id="2728824">Value</span><span class="op" id="2728829">,</span>&nbsp;<span class="ident" id="2728831">n</span><span class="op" id="2728832">+</span><span class="num" id="2728833">1</span><span class="op" id="2728834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728838">copy</span><span class="op" id="2728842">(</span><span class="ident" id="2728843">in</span><span class="op" id="2728845">[</span><span class="op" id="2728846">:</span><span class="ident" id="2728847">n</span><span class="op" id="2728848">]</span><span class="op" id="2728849">,</span>&nbsp;<span class="ident" id="2728851">origIn</span><span class="op" id="2728857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728861">in</span><span class="op" id="2728863">[</span><span class="ident" id="2728864">n</span><span class="op" id="2728865">]</span>&nbsp;<span class="op" id="2728867">=</span>&nbsp;<span class="ident" id="2728869">slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728876">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728880">nin</span>&nbsp;<span class="op" id="2728884">:=</span>&nbsp;<span class="builtinfunc" id="2728887">len</span><span class="op" id="2728890">(</span><span class="ident" id="2728891">in</span><span class="op" id="2728893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2728896">if</span>&nbsp;<span class="ident" id="2728899">nin</span>&nbsp;<span class="op" id="2728903">!=</span>&nbsp;<span class="ident" id="2728906">t</span><span class="op" id="2728907">.</span><span class="ident" id="2728908">NumIn</span><span class="op" id="2728913">(</span><span class="op" id="2728914">)</span>&nbsp;<span class="op" id="2728916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2728920">panic</span><span class="op" id="2728925">(</span><span class="string" id="2728926">&#34;reflect.Value.Call:&nbsp;wrong&nbsp;argument&nbsp;count&#34;</span><span class="op" id="2728968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2728971">}</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2728974">nout</span>&nbsp;<span class="op" id="2728979">:=</span>&nbsp;<span class="ident" id="2728982">t</span><span class="op" id="2728983">.</span><span class="ident" id="2728984">NumOut</span><span class="op" id="2728990">(</span><span class="op" id="2728991">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2728995">//&nbsp;Compute&nbsp;frame&nbsp;type,&nbsp;allocate&nbsp;a&nbsp;chunk&nbsp;of&nbsp;memory&nbsp;for&nbsp;frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729056">frametype</span><span class="op" id="2729065">,</span>&nbsp;<span class="ident" id="2729067">_</span><span class="op" id="2729068">,</span>&nbsp;<span class="ident" id="2729070">retOffset</span><span class="op" id="2729079">,</span>&nbsp;<span class="ident" id="2729081">_</span>&nbsp;<span class="op" id="2729083">:=</span>&nbsp;<span class="ident" id="2729086">funcLayout</span><span class="op" id="2729096">(</span><span class="ident" id="2729097">t</span><span class="op" id="2729098">,</span>&nbsp;<span class="ident" id="2729100">rcvrtype</span><span class="op" id="2729108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729111">args</span>&nbsp;<span class="op" id="2729116">:=</span>&nbsp;<span class="ident" id="2729119">unsafe_New</span><span class="op" id="2729129">(</span><span class="ident" id="2729130">frametype</span><span class="op" id="2729139">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729142">off</span>&nbsp;<span class="op" id="2729146">:=</span>&nbsp;<span class="builtintype" id="2729149">uintptr</span><span class="op" id="2729156">(</span><span class="num" id="2729157">0</span><span class="op" id="2729158">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729162">//&nbsp;Copy&nbsp;inputs&nbsp;into&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729189">if</span>&nbsp;<span class="ident" id="2729192">rcvrtype</span>&nbsp;<span class="op" id="2729201">!=</span>&nbsp;<span class="ident" id="2729204">nil</span>&nbsp;<span class="op" id="2729208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729212">storeRcvr</span><span class="op" id="2729221">(</span><span class="ident" id="2729222">rcvr</span><span class="op" id="2729226">,</span>&nbsp;<span class="ident" id="2729228">args</span><span class="op" id="2729232">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729236">off</span>&nbsp;<span class="op" id="2729240">=</span>&nbsp;<span class="ident" id="2729242">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729254">for</span>&nbsp;<span class="ident" id="2729258">i</span><span class="op" id="2729259">,</span>&nbsp;<span class="ident" id="2729261">v</span>&nbsp;<span class="op" id="2729263">:=</span>&nbsp;<span class="keyword" id="2729266">range</span>&nbsp;<span class="ident" id="2729272">in</span>&nbsp;<span class="op" id="2729275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729279">v</span><span class="op" id="2729280">.</span><span class="ident" id="2729281">mustBeExported</span><span class="op" id="2729295">(</span><span class="op" id="2729296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729300">targ</span>&nbsp;<span class="op" id="2729305">:=</span>&nbsp;<span class="ident" id="2729308">t</span><span class="op" id="2729309">.</span><span class="ident" id="2729310">In</span><span class="op" id="2729312">(</span><span class="ident" id="2729313">i</span><span class="op" id="2729314">)</span><span class="op" id="2729315">.</span><span class="op" id="2729316">(</span><span class="op" id="2729317">*</span><span class="ident" id="2729318">rtype</span><span class="op" id="2729323">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729327">a</span>&nbsp;<span class="op" id="2729329">:=</span>&nbsp;<span class="builtintype" id="2729332">uintptr</span><span class="op" id="2729339">(</span><span class="ident" id="2729340">targ</span><span class="op" id="2729344">.</span><span class="ident" id="2729345">align</span><span class="op" id="2729350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729354">off</span>&nbsp;<span class="op" id="2729358">=</span>&nbsp;<span class="op" id="2729360">(</span><span class="ident" id="2729361">off</span>&nbsp;<span class="op" id="2729365">+</span>&nbsp;<span class="ident" id="2729367">a</span>&nbsp;<span class="op" id="2729369">-</span>&nbsp;<span class="num" id="2729371">1</span><span class="op" id="2729372">)</span>&nbsp;<span class="op" id="2729374">&amp;^</span>&nbsp;<span class="op" id="2729377">(</span><span class="ident" id="2729378">a</span>&nbsp;<span class="op" id="2729380">-</span>&nbsp;<span class="num" id="2729382">1</span><span class="op" id="2729383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729387">n</span>&nbsp;<span class="op" id="2729389">:=</span>&nbsp;<span class="ident" id="2729392">targ</span><span class="op" id="2729396">.</span><span class="ident" id="2729397">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729404">addr</span>&nbsp;<span class="op" id="2729409">:=</span>&nbsp;<span class="ident" id="2729412">unsafe</span><span class="op" id="2729418">.</span><span class="ident" id="2729419">Pointer</span><span class="op" id="2729426">(</span><span class="builtintype" id="2729427">uintptr</span><span class="op" id="2729434">(</span><span class="ident" id="2729435">args</span><span class="op" id="2729439">)</span>&nbsp;<span class="op" id="2729441">+</span>&nbsp;<span class="ident" id="2729443">off</span><span class="op" id="2729446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729450">v</span>&nbsp;<span class="op" id="2729452">=</span>&nbsp;<span class="ident" id="2729454">v</span><span class="op" id="2729455">.</span><span class="ident" id="2729456">assignTo</span><span class="op" id="2729464">(</span><span class="string" id="2729465">&#34;reflect.Value.Call&#34;</span><span class="op" id="2729485">,</span>&nbsp;<span class="ident" id="2729487">targ</span><span class="op" id="2729491">,</span>&nbsp;<span class="ident" id="2729493">addr</span><span class="op" id="2729497">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729501">if</span>&nbsp;<span class="ident" id="2729504">v</span><span class="op" id="2729505">.</span><span class="ident" id="2729506">flag</span><span class="op" id="2729510">&amp;</span><span class="ident" id="2729511">flagIndir</span>&nbsp;<span class="op" id="2729521">!=</span>&nbsp;<span class="num" id="2729524">0</span>&nbsp;<span class="op" id="2729526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729531">memmove</span><span class="op" id="2729538">(</span><span class="ident" id="2729539">addr</span><span class="op" id="2729543">,</span>&nbsp;<span class="ident" id="2729545">v</span><span class="op" id="2729546">.</span><span class="ident" id="2729547">ptr</span><span class="op" id="2729550">,</span>&nbsp;<span class="ident" id="2729552">n</span><span class="op" id="2729553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729557">}</span>&nbsp;<span class="keyword" id="2729559">else</span>&nbsp;<span class="op" id="2729564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729569">*</span><span class="op" id="2729570">(</span><span class="op" id="2729571">*</span><span class="ident" id="2729572">unsafe</span><span class="op" id="2729578">.</span><span class="ident" id="2729579">Pointer</span><span class="op" id="2729586">)</span><span class="op" id="2729587">(</span><span class="ident" id="2729588">addr</span><span class="op" id="2729592">)</span>&nbsp;<span class="op" id="2729594">=</span>&nbsp;<span class="ident" id="2729596">v</span><span class="op" id="2729597">.</span><span class="ident" id="2729598">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729604">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729608">off</span>&nbsp;<span class="op" id="2729612">+=</span>&nbsp;<span class="ident" id="2729615">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729622">//&nbsp;Call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729632">call</span><span class="op" id="2729636">(</span><span class="ident" id="2729637">fn</span><span class="op" id="2729639">,</span>&nbsp;<span class="ident" id="2729641">args</span><span class="op" id="2729645">,</span>&nbsp;<span class="builtintype" id="2729647">uint32</span><span class="op" id="2729653">(</span><span class="ident" id="2729654">frametype</span><span class="op" id="2729663">.</span><span class="ident" id="2729664">size</span><span class="op" id="2729668">)</span><span class="op" id="2729669">,</span>&nbsp;<span class="builtintype" id="2729671">uint32</span><span class="op" id="2729677">(</span><span class="ident" id="2729678">retOffset</span><span class="op" id="2729687">)</span><span class="op" id="2729688">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729692">//&nbsp;For&nbsp;testing;&nbsp;see&nbsp;TestCallMethodJump.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729733">if</span>&nbsp;<span class="ident" id="2729736">callGC</span>&nbsp;<span class="op" id="2729743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729747">runtime</span><span class="op" id="2729754">.</span><span class="ident" id="2729755">GC</span><span class="op" id="2729757">(</span><span class="op" id="2729758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2729761">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2729765">//&nbsp;Copy&nbsp;return&nbsp;values&nbsp;out&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729801">ret</span>&nbsp;<span class="op" id="2729805">:=</span>&nbsp;<span class="builtinfunc" id="2729808">make</span><span class="op" id="2729812">(</span><span class="op" id="2729813">[</span><span class="op" id="2729814">]</span><span class="ident" id="2729815">Value</span><span class="op" id="2729820">,</span>&nbsp;<span class="ident" id="2729822">nout</span><span class="op" id="2729826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729829">off</span>&nbsp;<span class="op" id="2729833">=</span>&nbsp;<span class="ident" id="2729835">retOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2729846">for</span>&nbsp;<span class="ident" id="2729850">i</span>&nbsp;<span class="op" id="2729852">:=</span>&nbsp;<span class="num" id="2729855">0</span><span class="op" id="2729856">;</span>&nbsp;<span class="ident" id="2729858">i</span>&nbsp;<span class="op" id="2729860">&lt;</span>&nbsp;<span class="ident" id="2729862">nout</span><span class="op" id="2729866">;</span>&nbsp;<span class="ident" id="2729868">i</span><span class="op" id="2729869">++</span>&nbsp;<span class="op" id="2729872">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729876">tv</span>&nbsp;<span class="op" id="2729879">:=</span>&nbsp;<span class="ident" id="2729882">t</span><span class="op" id="2729883">.</span><span class="ident" id="2729884">Out</span><span class="op" id="2729887">(</span><span class="ident" id="2729888">i</span><span class="op" id="2729889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729893">a</span>&nbsp;<span class="op" id="2729895">:=</span>&nbsp;<span class="builtintype" id="2729898">uintptr</span><span class="op" id="2729905">(</span><span class="ident" id="2729906">tv</span><span class="op" id="2729908">.</span><span class="ident" id="2729909">Align</span><span class="op" id="2729914">(</span><span class="op" id="2729915">)</span><span class="op" id="2729916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729920">off</span>&nbsp;<span class="op" id="2729924">=</span>&nbsp;<span class="op" id="2729926">(</span><span class="ident" id="2729927">off</span>&nbsp;<span class="op" id="2729931">+</span>&nbsp;<span class="ident" id="2729933">a</span>&nbsp;<span class="op" id="2729935">-</span>&nbsp;<span class="num" id="2729937">1</span><span class="op" id="2729938">)</span>&nbsp;<span class="op" id="2729940">&amp;^</span>&nbsp;<span class="op" id="2729943">(</span><span class="ident" id="2729944">a</span>&nbsp;<span class="op" id="2729946">-</span>&nbsp;<span class="num" id="2729948">1</span><span class="op" id="2729949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729953">fl</span>&nbsp;<span class="op" id="2729956">:=</span>&nbsp;<span class="ident" id="2729959">flagIndir</span>&nbsp;<span class="op" id="2729969">|</span>&nbsp;<span class="ident" id="2729971">flag</span><span class="op" id="2729975">(</span><span class="ident" id="2729976">tv</span><span class="op" id="2729978">.</span><span class="ident" id="2729979">Kind</span><span class="op" id="2729983">(</span><span class="op" id="2729984">)</span><span class="op" id="2729985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2729989">ret</span><span class="op" id="2729992">[</span><span class="ident" id="2729993">i</span><span class="op" id="2729994">]</span>&nbsp;<span class="op" id="2729996">=</span>&nbsp;<span class="ident" id="2729998">Value</span><span class="op" id="2730003">{</span><span class="ident" id="2730004">tv</span><span class="op" id="2730006">.</span><span class="ident" id="2730007">common</span><span class="op" id="2730013">(</span><span class="op" id="2730014">)</span><span class="op" id="2730015">,</span>&nbsp;<span class="ident" id="2730017">unsafe</span><span class="op" id="2730023">.</span><span class="ident" id="2730024">Pointer</span><span class="op" id="2730031">(</span><span class="builtintype" id="2730032">uintptr</span><span class="op" id="2730039">(</span><span class="ident" id="2730040">args</span><span class="op" id="2730044">)</span>&nbsp;<span class="op" id="2730046">+</span>&nbsp;<span class="ident" id="2730048">off</span><span class="op" id="2730051">)</span><span class="op" id="2730052">,</span>&nbsp;<span class="ident" id="2730054">fl</span><span class="op" id="2730056">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730060">off</span>&nbsp;<span class="op" id="2730064">+=</span>&nbsp;<span class="ident" id="2730067">tv</span><span class="op" id="2730069">.</span><span class="ident" id="2730070">Size</span><span class="op" id="2730074">(</span><span class="op" id="2730075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2730078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2730082">return</span>&nbsp;<span class="ident" id="2730089">ret</span><br>
<span class="lineno"></span><span class="op" id="2730093">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="2730096">//&nbsp;callReflect&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="2730157">//&nbsp;returned&nbsp;by&nbsp;MakeFunc.&nbsp;In&nbsp;many&nbsp;ways&nbsp;it&nbsp;is&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2730221">//&nbsp;method&nbsp;Value.call&nbsp;above.&nbsp;The&nbsp;method&nbsp;above&nbsp;converts&nbsp;a&nbsp;call&nbsp;using&nbsp;Values</span><br>
<span class="lineno"></span><span class="comment" id="2730295">//&nbsp;into&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument&nbsp;frame,&nbsp;while</span><br>
<span class="lineno">445</span><span class="comment" id="2730362">//&nbsp;callReflect&nbsp;converts&nbsp;a&nbsp;call&nbsp;of&nbsp;a&nbsp;function&nbsp;with&nbsp;a&nbsp;concrete&nbsp;argument</span><br>
<span class="lineno"></span><span class="comment" id="2730432">//&nbsp;frame&nbsp;into&nbsp;a&nbsp;call&nbsp;using&nbsp;Values.</span><br>
<span class="lineno"></span><span class="comment" id="2730467">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;call&nbsp;method&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2730538">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;MakeFunc&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2730605">//</span><br>
<span class="lineno">450</span><span class="comment" id="2730608">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno"></span><span class="comment" id="2730684">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2730756">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callReflect&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2730828">func</span>&nbsp;<span class="ident" id="2730833">callReflect</span><span class="op" id="2730844">(</span><span class="ident" id="2730845">ctxt</span>&nbsp;<span class="op" id="2730850">*</span><span class="ident" id="2730851">makeFuncImpl</span><span class="op" id="2730863">,</span>&nbsp;<span class="ident" id="2730865">frame</span>&nbsp;<span class="ident" id="2730871">unsafe</span><span class="op" id="2730877">.</span><span class="ident" id="2730878">Pointer</span><span class="op" id="2730885">)</span>&nbsp;<span class="op" id="2730887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730890">ftyp</span>&nbsp;<span class="op" id="2730895">:=</span>&nbsp;<span class="ident" id="2730898">ctxt</span><span class="op" id="2730902">.</span><span class="ident" id="2730903">typ</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730908">f</span>&nbsp;<span class="op" id="2730910">:=</span>&nbsp;<span class="ident" id="2730913">ctxt</span><span class="op" id="2730917">.</span><span class="ident" id="2730918">fn</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2730923">//&nbsp;Copy&nbsp;argument&nbsp;frame&nbsp;into&nbsp;Values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730960">ptr</span>&nbsp;<span class="op" id="2730964">:=</span>&nbsp;<span class="ident" id="2730967">frame</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730974">off</span>&nbsp;<span class="op" id="2730978">:=</span>&nbsp;<span class="builtintype" id="2730981">uintptr</span><span class="op" id="2730988">(</span><span class="num" id="2730989">0</span><span class="op" id="2730990">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2730993">in</span>&nbsp;<span class="op" id="2730996">:=</span>&nbsp;<span class="builtinfunc" id="2730999">make</span><span class="op" id="2731003">(</span><span class="op" id="2731004">[</span><span class="op" id="2731005">]</span><span class="ident" id="2731006">Value</span><span class="op" id="2731011">,</span>&nbsp;<span class="num" id="2731013">0</span><span class="op" id="2731014">,</span>&nbsp;<span class="builtinfunc" id="2731016">len</span><span class="op" id="2731019">(</span><span class="ident" id="2731020">ftyp</span><span class="op" id="2731024">.</span><span class="ident" id="2731025">in</span><span class="op" id="2731027">)</span><span class="op" id="2731028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731031">for</span>&nbsp;<span class="ident" id="2731035">_</span><span class="op" id="2731036">,</span>&nbsp;<span class="ident" id="2731038">arg</span>&nbsp;<span class="op" id="2731042">:=</span>&nbsp;<span class="keyword" id="2731045">range</span>&nbsp;<span class="ident" id="2731051">ftyp</span><span class="op" id="2731055">.</span><span class="ident" id="2731056">in</span>&nbsp;<span class="op" id="2731059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731063">typ</span>&nbsp;<span class="op" id="2731067">:=</span>&nbsp;<span class="ident" id="2731070">arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731076">off</span>&nbsp;<span class="op" id="2731080">+=</span>&nbsp;<span class="op" id="2731083">-</span><span class="ident" id="2731084">off</span>&nbsp;<span class="op" id="2731088">&amp;</span>&nbsp;<span class="builtintype" id="2731090">uintptr</span><span class="op" id="2731097">(</span><span class="ident" id="2731098">typ</span><span class="op" id="2731101">.</span><span class="ident" id="2731102">align</span><span class="op" id="2731107">-</span><span class="num" id="2731108">1</span><span class="op" id="2731109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731113">addr</span>&nbsp;<span class="op" id="2731118">:=</span>&nbsp;<span class="ident" id="2731121">unsafe</span><span class="op" id="2731127">.</span><span class="ident" id="2731128">Pointer</span><span class="op" id="2731135">(</span><span class="builtintype" id="2731136">uintptr</span><span class="op" id="2731143">(</span><span class="ident" id="2731144">ptr</span><span class="op" id="2731147">)</span>&nbsp;<span class="op" id="2731149">+</span>&nbsp;<span class="ident" id="2731151">off</span><span class="op" id="2731154">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731158">v</span>&nbsp;<span class="op" id="2731160">:=</span>&nbsp;<span class="ident" id="2731163">Value</span><span class="op" id="2731168">{</span><span class="ident" id="2731169">typ</span><span class="op" id="2731172">,</span>&nbsp;<span class="ident" id="2731174">nil</span><span class="op" id="2731177">,</span>&nbsp;<span class="ident" id="2731179">flag</span><span class="op" id="2731183">(</span><span class="ident" id="2731184">typ</span><span class="op" id="2731187">.</span><span class="ident" id="2731188">Kind</span><span class="op" id="2731192">(</span><span class="op" id="2731193">)</span><span class="op" id="2731194">)</span><span class="op" id="2731195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731199">if</span>&nbsp;<span class="ident" id="2731202">ifaceIndir</span><span class="op" id="2731212">(</span><span class="ident" id="2731213">typ</span><span class="op" id="2731216">)</span>&nbsp;<span class="op" id="2731218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2731223">//&nbsp;value&nbsp;cannot&nbsp;be&nbsp;inlined&nbsp;in&nbsp;interface&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2731272">//&nbsp;Must&nbsp;make&nbsp;a&nbsp;copy,&nbsp;because&nbsp;f&nbsp;might&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;it,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2731336">//&nbsp;and&nbsp;we&nbsp;cannot&nbsp;let&nbsp;f&nbsp;keep&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;stack&nbsp;frame</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2731398">//&nbsp;after&nbsp;this&nbsp;function&nbsp;returns,&nbsp;not&nbsp;even&nbsp;a&nbsp;read-only&nbsp;reference.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731465">v</span><span class="op" id="2731466">.</span><span class="ident" id="2731467">ptr</span>&nbsp;<span class="op" id="2731471">=</span>&nbsp;<span class="ident" id="2731473">unsafe_New</span><span class="op" id="2731483">(</span><span class="ident" id="2731484">typ</span><span class="op" id="2731487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731492">memmove</span><span class="op" id="2731499">(</span><span class="ident" id="2731500">v</span><span class="op" id="2731501">.</span><span class="ident" id="2731502">ptr</span><span class="op" id="2731505">,</span>&nbsp;<span class="ident" id="2731507">addr</span><span class="op" id="2731511">,</span>&nbsp;<span class="ident" id="2731513">typ</span><span class="op" id="2731516">.</span><span class="ident" id="2731517">size</span><span class="op" id="2731521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731526">v</span><span class="op" id="2731527">.</span><span class="ident" id="2731528">flag</span>&nbsp;<span class="op" id="2731533">|=</span>&nbsp;<span class="ident" id="2731536">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2731548">}</span>&nbsp;<span class="keyword" id="2731550">else</span>&nbsp;<span class="op" id="2731555">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731560">v</span><span class="op" id="2731561">.</span><span class="ident" id="2731562">ptr</span>&nbsp;<span class="op" id="2731566">=</span>&nbsp;<span class="op" id="2731568">*</span><span class="op" id="2731569">(</span><span class="op" id="2731570">*</span><span class="ident" id="2731571">unsafe</span><span class="op" id="2731577">.</span><span class="ident" id="2731578">Pointer</span><span class="op" id="2731585">)</span><span class="op" id="2731586">(</span><span class="ident" id="2731587">addr</span><span class="op" id="2731591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2731595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731599">in</span>&nbsp;<span class="op" id="2731602">=</span>&nbsp;<span class="builtinfunc" id="2731604">append</span><span class="op" id="2731610">(</span><span class="ident" id="2731611">in</span><span class="op" id="2731613">,</span>&nbsp;<span class="ident" id="2731615">v</span><span class="op" id="2731616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731620">off</span>&nbsp;<span class="op" id="2731624">+=</span>&nbsp;<span class="ident" id="2731627">typ</span><span class="op" id="2731630">.</span><span class="ident" id="2731631">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2731637">}</span><br>
<span class="lineno">480</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2731641">//&nbsp;Call&nbsp;underlying&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731671">out</span>&nbsp;<span class="op" id="2731675">:=</span>&nbsp;<span class="ident" id="2731678">f</span><span class="op" id="2731679">(</span><span class="ident" id="2731680">in</span><span class="op" id="2731682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731685">if</span>&nbsp;<span class="builtinfunc" id="2731688">len</span><span class="op" id="2731691">(</span><span class="ident" id="2731692">out</span><span class="op" id="2731695">)</span>&nbsp;<span class="op" id="2731697">!=</span>&nbsp;<span class="builtinfunc" id="2731700">len</span><span class="op" id="2731703">(</span><span class="ident" id="2731704">ftyp</span><span class="op" id="2731708">.</span><span class="ident" id="2731709">out</span><span class="op" id="2731712">)</span>&nbsp;<span class="op" id="2731714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2731718">panic</span><span class="op" id="2731723">(</span><span class="string" id="2731724">&#34;reflect:&nbsp;wrong&nbsp;return&nbsp;count&nbsp;from&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&#34;</span><span class="op" id="2731787">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2731790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2731794">//&nbsp;Copy&nbsp;results&nbsp;back&nbsp;into&nbsp;argument&nbsp;frame.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731837">if</span>&nbsp;<span class="builtinfunc" id="2731840">len</span><span class="op" id="2731843">(</span><span class="ident" id="2731844">ftyp</span><span class="op" id="2731848">.</span><span class="ident" id="2731849">out</span><span class="op" id="2731852">)</span>&nbsp;<span class="op" id="2731854">&gt;</span>&nbsp;<span class="num" id="2731856">0</span>&nbsp;<span class="op" id="2731858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731862">off</span>&nbsp;<span class="op" id="2731866">+=</span>&nbsp;<span class="op" id="2731869">-</span><span class="ident" id="2731870">off</span>&nbsp;<span class="op" id="2731874">&amp;</span>&nbsp;<span class="op" id="2731876">(</span><span class="ident" id="2731877">ptrSize</span>&nbsp;<span class="op" id="2731885">-</span>&nbsp;<span class="num" id="2731887">1</span><span class="op" id="2731888">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731892">if</span>&nbsp;<span class="ident" id="2731895">runtime</span><span class="op" id="2731902">.</span><span class="ident" id="2731903">GOARCH</span>&nbsp;<span class="op" id="2731910">==</span>&nbsp;<span class="string" id="2731913">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2731924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731929">off</span>&nbsp;<span class="op" id="2731933">=</span>&nbsp;<span class="ident" id="2731935">align</span><span class="op" id="2731940">(</span><span class="ident" id="2731941">off</span><span class="op" id="2731944">,</span>&nbsp;<span class="num" id="2731946">8</span><span class="op" id="2731947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2731951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2731955">for</span>&nbsp;<span class="ident" id="2731959">i</span><span class="op" id="2731960">,</span>&nbsp;<span class="ident" id="2731962">arg</span>&nbsp;<span class="op" id="2731966">:=</span>&nbsp;<span class="keyword" id="2731969">range</span>&nbsp;<span class="ident" id="2731975">ftyp</span><span class="op" id="2731979">.</span><span class="ident" id="2731980">out</span>&nbsp;<span class="op" id="2731984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2731989">typ</span>&nbsp;<span class="op" id="2731993">:=</span>&nbsp;<span class="ident" id="2731996">arg</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732003">v</span>&nbsp;<span class="op" id="2732005">:=</span>&nbsp;<span class="ident" id="2732008">out</span><span class="op" id="2732011">[</span><span class="ident" id="2732012">i</span><span class="op" id="2732013">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732018">if</span>&nbsp;<span class="ident" id="2732021">v</span><span class="op" id="2732022">.</span><span class="ident" id="2732023">typ</span>&nbsp;<span class="op" id="2732027">!=</span>&nbsp;<span class="ident" id="2732030">typ</span>&nbsp;<span class="op" id="2732034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2732040">panic</span><span class="op" id="2732045">(</span><span class="string" id="2732046">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2732093">+</span>&nbsp;<span class="ident" id="2732095">funcName</span><span class="op" id="2732103">(</span><span class="ident" id="2732104">f</span><span class="op" id="2732105">)</span>&nbsp;<span class="op" id="2732107">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2732114">&#34;&nbsp;returned&nbsp;wrong&nbsp;type:&nbsp;have&nbsp;&#34;</span>&nbsp;<span class="op" id="2732144">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732151">out</span><span class="op" id="2732154">[</span><span class="ident" id="2732155">i</span><span class="op" id="2732156">]</span><span class="op" id="2732157">.</span><span class="ident" id="2732158">typ</span><span class="op" id="2732161">.</span><span class="ident" id="2732162">String</span><span class="op" id="2732168">(</span><span class="op" id="2732169">)</span>&nbsp;<span class="op" id="2732171">+</span>&nbsp;<span class="string" id="2732173">&#34;&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="2732181">+</span>&nbsp;<span class="ident" id="2732183">typ</span><span class="op" id="2732186">.</span><span class="ident" id="2732187">String</span><span class="op" id="2732193">(</span><span class="op" id="2732194">)</span><span class="op" id="2732195">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732205">if</span>&nbsp;<span class="ident" id="2732208">v</span><span class="op" id="2732209">.</span><span class="ident" id="2732210">flag</span><span class="op" id="2732214">&amp;</span><span class="ident" id="2732215">flagRO</span>&nbsp;<span class="op" id="2732222">!=</span>&nbsp;<span class="num" id="2732225">0</span>&nbsp;<span class="op" id="2732227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2732233">panic</span><span class="op" id="2732238">(</span><span class="string" id="2732239">&#34;reflect:&nbsp;function&nbsp;created&nbsp;by&nbsp;MakeFunc&nbsp;using&nbsp;&#34;</span>&nbsp;<span class="op" id="2732286">+</span>&nbsp;<span class="ident" id="2732288">funcName</span><span class="op" id="2732296">(</span><span class="ident" id="2732297">f</span><span class="op" id="2732298">)</span>&nbsp;<span class="op" id="2732300">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2732307">&#34;&nbsp;returned&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&#34;</span><span class="op" id="2732355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732360">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732365">off</span>&nbsp;<span class="op" id="2732369">+=</span>&nbsp;<span class="op" id="2732372">-</span><span class="ident" id="2732373">off</span>&nbsp;<span class="op" id="2732377">&amp;</span>&nbsp;<span class="builtintype" id="2732379">uintptr</span><span class="op" id="2732386">(</span><span class="ident" id="2732387">typ</span><span class="op" id="2732390">.</span><span class="ident" id="2732391">align</span><span class="op" id="2732396">-</span><span class="num" id="2732397">1</span><span class="op" id="2732398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732403">addr</span>&nbsp;<span class="op" id="2732408">:=</span>&nbsp;<span class="ident" id="2732411">unsafe</span><span class="op" id="2732417">.</span><span class="ident" id="2732418">Pointer</span><span class="op" id="2732425">(</span><span class="builtintype" id="2732426">uintptr</span><span class="op" id="2732433">(</span><span class="ident" id="2732434">ptr</span><span class="op" id="2732437">)</span>&nbsp;<span class="op" id="2732439">+</span>&nbsp;<span class="ident" id="2732441">off</span><span class="op" id="2732444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2732449">if</span>&nbsp;<span class="ident" id="2732452">v</span><span class="op" id="2732453">.</span><span class="ident" id="2732454">flag</span><span class="op" id="2732458">&amp;</span><span class="ident" id="2732459">flagIndir</span>&nbsp;<span class="op" id="2732469">!=</span>&nbsp;<span class="num" id="2732472">0</span>&nbsp;<span class="op" id="2732474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732480">memmove</span><span class="op" id="2732487">(</span><span class="ident" id="2732488">addr</span><span class="op" id="2732492">,</span>&nbsp;<span class="ident" id="2732494">v</span><span class="op" id="2732495">.</span><span class="ident" id="2732496">ptr</span><span class="op" id="2732499">,</span>&nbsp;<span class="ident" id="2732501">typ</span><span class="op" id="2732504">.</span><span class="ident" id="2732505">size</span><span class="op" id="2732509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732514">}</span>&nbsp;<span class="keyword" id="2732516">else</span>&nbsp;<span class="op" id="2732521">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732527">*</span><span class="op" id="2732528">(</span><span class="op" id="2732529">*</span><span class="ident" id="2732530">unsafe</span><span class="op" id="2732536">.</span><span class="ident" id="2732537">Pointer</span><span class="op" id="2732544">)</span><span class="op" id="2732545">(</span><span class="ident" id="2732546">addr</span><span class="op" id="2732550">)</span>&nbsp;<span class="op" id="2732552">=</span>&nbsp;<span class="ident" id="2732554">v</span><span class="op" id="2732555">.</span><span class="ident" id="2732556">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2732568">off</span>&nbsp;<span class="op" id="2732572">+=</span>&nbsp;<span class="ident" id="2732575">typ</span><span class="op" id="2732578">.</span><span class="ident" id="2732579">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2732589">}</span><br>
<span class="lineno">515</span><span class="op" id="2732591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2732594">//&nbsp;methodReceiver&nbsp;returns&nbsp;information&nbsp;about&nbsp;the&nbsp;receiver</span><br>
<span class="lineno"></span><span class="comment" id="2732651">//&nbsp;described&nbsp;by&nbsp;v.&nbsp;The&nbsp;Value&nbsp;v&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;have&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2732706">//&nbsp;flagMethod&nbsp;bit&nbsp;set,&nbsp;so&nbsp;the&nbsp;kind&nbsp;cached&nbsp;in&nbsp;v.flag&nbsp;should</span><br>
<span class="lineno">520</span><span class="comment" id="2732765">//&nbsp;not&nbsp;be&nbsp;used.</span><br>
<span class="lineno"></span><span class="comment" id="2732781">//&nbsp;The&nbsp;return&nbsp;value&nbsp;rcvrtype&nbsp;gives&nbsp;the&nbsp;method&#39;s&nbsp;actual&nbsp;receiver&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2732851">//&nbsp;The&nbsp;return&nbsp;value&nbsp;t&nbsp;gives&nbsp;the&nbsp;method&nbsp;type&nbsp;signature&nbsp;(without&nbsp;the&nbsp;receiver).</span><br>
<span class="lineno"></span><span class="comment" id="2732929">//&nbsp;The&nbsp;return&nbsp;value&nbsp;fn&nbsp;is&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;method&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="2732985">func</span>&nbsp;<span class="ident" id="2732990">methodReceiver</span><span class="op" id="2733004">(</span><span class="ident" id="2733005">op</span>&nbsp;<span class="builtintype" id="2733008">string</span><span class="op" id="2733014">,</span>&nbsp;<span class="ident" id="2733016">v</span>&nbsp;<span class="ident" id="2733018">Value</span><span class="op" id="2733023">,</span>&nbsp;<span class="ident" id="2733025">methodIndex</span>&nbsp;<span class="builtintype" id="2733037">int</span><span class="op" id="2733040">)</span>&nbsp;<span class="op" id="2733042">(</span><span class="ident" id="2733043">rcvrtype</span><span class="op" id="2733051">,</span>&nbsp;<span class="ident" id="2733053">t</span>&nbsp;<span class="op" id="2733055">*</span><span class="ident" id="2733056">rtype</span><span class="op" id="2733061">,</span>&nbsp;<span class="ident" id="2733063">fn</span>&nbsp;<span class="ident" id="2733066">unsafe</span><span class="op" id="2733072">.</span><span class="ident" id="2733073">Pointer</span><span class="op" id="2733080">)</span>&nbsp;<span class="op" id="2733082">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733085">i</span>&nbsp;<span class="op" id="2733087">:=</span>&nbsp;<span class="ident" id="2733090">methodIndex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733103">if</span>&nbsp;<span class="ident" id="2733106">v</span><span class="op" id="2733107">.</span><span class="ident" id="2733108">typ</span><span class="op" id="2733111">.</span><span class="ident" id="2733112">Kind</span><span class="op" id="2733116">(</span><span class="op" id="2733117">)</span>&nbsp;<span class="op" id="2733119">==</span>&nbsp;<span class="ident" id="2733122">Interface</span>&nbsp;<span class="op" id="2733132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733136">tt</span>&nbsp;<span class="op" id="2733139">:=</span>&nbsp;<span class="op" id="2733142">(</span><span class="op" id="2733143">*</span><span class="ident" id="2733144">interfaceType</span><span class="op" id="2733157">)</span><span class="op" id="2733158">(</span><span class="ident" id="2733159">unsafe</span><span class="op" id="2733165">.</span><span class="ident" id="2733166">Pointer</span><span class="op" id="2733173">(</span><span class="ident" id="2733174">v</span><span class="op" id="2733175">.</span><span class="ident" id="2733176">typ</span><span class="op" id="2733179">)</span><span class="op" id="2733180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733184">if</span>&nbsp;<span class="builtintype" id="2733187">uint</span><span class="op" id="2733191">(</span><span class="ident" id="2733192">i</span><span class="op" id="2733193">)</span>&nbsp;<span class="op" id="2733195">&gt;=</span>&nbsp;<span class="builtintype" id="2733198">uint</span><span class="op" id="2733202">(</span><span class="builtinfunc" id="2733203">len</span><span class="op" id="2733206">(</span><span class="ident" id="2733207">tt</span><span class="op" id="2733209">.</span><span class="ident" id="2733210">methods</span><span class="op" id="2733217">)</span><span class="op" id="2733218">)</span>&nbsp;<span class="op" id="2733220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733225">panic</span><span class="op" id="2733230">(</span><span class="string" id="2733231">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2733278">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733286">m</span>&nbsp;<span class="op" id="2733288">:=</span>&nbsp;<span class="op" id="2733291">&amp;</span><span class="ident" id="2733292">tt</span><span class="op" id="2733294">.</span><span class="ident" id="2733295">methods</span><span class="op" id="2733302">[</span><span class="ident" id="2733303">i</span><span class="op" id="2733304">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733308">if</span>&nbsp;<span class="ident" id="2733311">m</span><span class="op" id="2733312">.</span><span class="ident" id="2733313">pkgPath</span>&nbsp;<span class="op" id="2733321">!=</span>&nbsp;<span class="ident" id="2733324">nil</span>&nbsp;<span class="op" id="2733328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733333">panic</span><span class="op" id="2733338">(</span><span class="string" id="2733339">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2733351">+</span>&nbsp;<span class="ident" id="2733353">op</span>&nbsp;<span class="op" id="2733356">+</span>&nbsp;<span class="string" id="2733358">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2733381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733385">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733389">iface</span>&nbsp;<span class="op" id="2733395">:=</span>&nbsp;<span class="op" id="2733398">(</span><span class="op" id="2733399">*</span><span class="ident" id="2733400">nonEmptyInterface</span><span class="op" id="2733417">)</span><span class="op" id="2733418">(</span><span class="ident" id="2733419">v</span><span class="op" id="2733420">.</span><span class="ident" id="2733421">ptr</span><span class="op" id="2733424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733428">if</span>&nbsp;<span class="ident" id="2733431">iface</span><span class="op" id="2733436">.</span><span class="ident" id="2733437">itab</span>&nbsp;<span class="op" id="2733442">==</span>&nbsp;<span class="ident" id="2733445">nil</span>&nbsp;<span class="op" id="2733449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733454">panic</span><span class="op" id="2733459">(</span><span class="string" id="2733460">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2733472">+</span>&nbsp;<span class="ident" id="2733474">op</span>&nbsp;<span class="op" id="2733477">+</span>&nbsp;<span class="string" id="2733479">&#34;&nbsp;of&nbsp;method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2733514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733522">rcvrtype</span>&nbsp;<span class="op" id="2733531">=</span>&nbsp;<span class="ident" id="2733533">iface</span><span class="op" id="2733538">.</span><span class="ident" id="2733539">itab</span><span class="op" id="2733543">.</span><span class="ident" id="2733544">typ</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733550">fn</span>&nbsp;<span class="op" id="2733553">=</span>&nbsp;<span class="ident" id="2733555">unsafe</span><span class="op" id="2733561">.</span><span class="ident" id="2733562">Pointer</span><span class="op" id="2733569">(</span><span class="op" id="2733570">&amp;</span><span class="ident" id="2733571">iface</span><span class="op" id="2733576">.</span><span class="ident" id="2733577">itab</span><span class="op" id="2733581">.</span><span class="ident" id="2733582">fun</span><span class="op" id="2733585">[</span><span class="ident" id="2733586">i</span><span class="op" id="2733587">]</span><span class="op" id="2733588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733592">t</span>&nbsp;<span class="op" id="2733594">=</span>&nbsp;<span class="ident" id="2733596">m</span><span class="op" id="2733597">.</span><span class="ident" id="2733598">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733603">}</span>&nbsp;<span class="keyword" id="2733605">else</span>&nbsp;<span class="op" id="2733610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733614">rcvrtype</span>&nbsp;<span class="op" id="2733623">=</span>&nbsp;<span class="ident" id="2733625">v</span><span class="op" id="2733626">.</span><span class="ident" id="2733627">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733633">ut</span>&nbsp;<span class="op" id="2733636">:=</span>&nbsp;<span class="ident" id="2733639">v</span><span class="op" id="2733640">.</span><span class="ident" id="2733641">typ</span><span class="op" id="2733644">.</span><span class="ident" id="2733645">uncommon</span><span class="op" id="2733653">(</span><span class="op" id="2733654">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733658">if</span>&nbsp;<span class="ident" id="2733661">ut</span>&nbsp;<span class="op" id="2733664">==</span>&nbsp;<span class="ident" id="2733667">nil</span>&nbsp;<span class="op" id="2733671">||</span>&nbsp;<span class="builtintype" id="2733674">uint</span><span class="op" id="2733678">(</span><span class="ident" id="2733679">i</span><span class="op" id="2733680">)</span>&nbsp;<span class="op" id="2733682">&gt;=</span>&nbsp;<span class="builtintype" id="2733685">uint</span><span class="op" id="2733689">(</span><span class="builtinfunc" id="2733690">len</span><span class="op" id="2733693">(</span><span class="ident" id="2733694">ut</span><span class="op" id="2733696">.</span><span class="ident" id="2733697">methods</span><span class="op" id="2733704">)</span><span class="op" id="2733705">)</span>&nbsp;<span class="op" id="2733707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733712">panic</span><span class="op" id="2733717">(</span><span class="string" id="2733718">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2733765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733773">m</span>&nbsp;<span class="op" id="2733775">:=</span>&nbsp;<span class="op" id="2733778">&amp;</span><span class="ident" id="2733779">ut</span><span class="op" id="2733781">.</span><span class="ident" id="2733782">methods</span><span class="op" id="2733789">[</span><span class="ident" id="2733790">i</span><span class="op" id="2733791">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733795">if</span>&nbsp;<span class="ident" id="2733798">m</span><span class="op" id="2733799">.</span><span class="ident" id="2733800">pkgPath</span>&nbsp;<span class="op" id="2733808">!=</span>&nbsp;<span class="ident" id="2733811">nil</span>&nbsp;<span class="op" id="2733815">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2733820">panic</span><span class="op" id="2733825">(</span><span class="string" id="2733826">&#34;reflect:&nbsp;&#34;</span>&nbsp;<span class="op" id="2733838">+</span>&nbsp;<span class="ident" id="2733840">op</span>&nbsp;<span class="op" id="2733843">+</span>&nbsp;<span class="string" id="2733845">&#34;&nbsp;of&nbsp;unexported&nbsp;method&#34;</span><span class="op" id="2733868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733876">fn</span>&nbsp;<span class="op" id="2733879">=</span>&nbsp;<span class="ident" id="2733881">unsafe</span><span class="op" id="2733887">.</span><span class="ident" id="2733888">Pointer</span><span class="op" id="2733895">(</span><span class="op" id="2733896">&amp;</span><span class="ident" id="2733897">m</span><span class="op" id="2733898">.</span><span class="ident" id="2733899">ifn</span><span class="op" id="2733902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2733906">t</span>&nbsp;<span class="op" id="2733908">=</span>&nbsp;<span class="ident" id="2733910">m</span><span class="op" id="2733911">.</span><span class="ident" id="2733912">mtyp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2733918">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2733921">return</span><br>
<span class="lineno"></span><span class="op" id="2733928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2733931">//&nbsp;v&nbsp;is&nbsp;a&nbsp;method&nbsp;receiver.&nbsp;&nbsp;Store&nbsp;at&nbsp;p&nbsp;the&nbsp;word&nbsp;which&nbsp;is&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2733996">//&nbsp;encode&nbsp;that&nbsp;receiver&nbsp;at&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;argument&nbsp;list.</span><br>
<span class="lineno">560</span><span class="comment" id="2734055">//&nbsp;Reflect&nbsp;uses&nbsp;the&nbsp;&#34;interface&#34;&nbsp;calling&nbsp;convention&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="2734110">//&nbsp;methods,&nbsp;which&nbsp;always&nbsp;uses&nbsp;one&nbsp;word&nbsp;to&nbsp;record&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="2734173">func</span>&nbsp;<span class="ident" id="2734178">storeRcvr</span><span class="op" id="2734187">(</span><span class="ident" id="2734188">v</span>&nbsp;<span class="ident" id="2734190">Value</span><span class="op" id="2734195">,</span>&nbsp;<span class="ident" id="2734197">p</span>&nbsp;<span class="ident" id="2734199">unsafe</span><span class="op" id="2734205">.</span><span class="ident" id="2734206">Pointer</span><span class="op" id="2734213">)</span>&nbsp;<span class="op" id="2734215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734218">t</span>&nbsp;<span class="op" id="2734220">:=</span>&nbsp;<span class="ident" id="2734223">v</span><span class="op" id="2734224">.</span><span class="ident" id="2734225">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734230">if</span>&nbsp;<span class="ident" id="2734233">t</span><span class="op" id="2734234">.</span><span class="ident" id="2734235">Kind</span><span class="op" id="2734239">(</span><span class="op" id="2734240">)</span>&nbsp;<span class="op" id="2734242">==</span>&nbsp;<span class="ident" id="2734245">Interface</span>&nbsp;<span class="op" id="2734255">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2734259">//&nbsp;the&nbsp;interface&nbsp;data&nbsp;word&nbsp;becomes&nbsp;the&nbsp;receiver&nbsp;word</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2734314">iface</span>&nbsp;<span class="op" id="2734320">:=</span>&nbsp;<span class="op" id="2734323">(</span><span class="op" id="2734324">*</span><span class="ident" id="2734325">nonEmptyInterface</span><span class="op" id="2734342">)</span><span class="op" id="2734343">(</span><span class="ident" id="2734344">v</span><span class="op" id="2734345">.</span><span class="ident" id="2734346">ptr</span><span class="op" id="2734349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734353">*</span><span class="op" id="2734354">(</span><span class="op" id="2734355">*</span><span class="ident" id="2734356">unsafe</span><span class="op" id="2734362">.</span><span class="ident" id="2734363">Pointer</span><span class="op" id="2734370">)</span><span class="op" id="2734371">(</span><span class="ident" id="2734372">p</span><span class="op" id="2734373">)</span>&nbsp;<span class="op" id="2734375">=</span>&nbsp;<span class="ident" id="2734377">unsafe</span><span class="op" id="2734383">.</span><span class="ident" id="2734384">Pointer</span><span class="op" id="2734391">(</span><span class="ident" id="2734392">iface</span><span class="op" id="2734397">.</span><span class="ident" id="2734398">word</span><span class="op" id="2734402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734405">}</span>&nbsp;<span class="keyword" id="2734407">else</span>&nbsp;<span class="keyword" id="2734412">if</span>&nbsp;<span class="ident" id="2734415">v</span><span class="op" id="2734416">.</span><span class="ident" id="2734417">flag</span><span class="op" id="2734421">&amp;</span><span class="ident" id="2734422">flagIndir</span>&nbsp;<span class="op" id="2734432">!=</span>&nbsp;<span class="num" id="2734435">0</span>&nbsp;<span class="op" id="2734437">&amp;&amp;</span>&nbsp;<span class="op" id="2734440">!</span><span class="ident" id="2734441">ifaceIndir</span><span class="op" id="2734451">(</span><span class="ident" id="2734452">t</span><span class="op" id="2734453">)</span>&nbsp;<span class="op" id="2734455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734459">*</span><span class="op" id="2734460">(</span><span class="op" id="2734461">*</span><span class="ident" id="2734462">unsafe</span><span class="op" id="2734468">.</span><span class="ident" id="2734469">Pointer</span><span class="op" id="2734476">)</span><span class="op" id="2734477">(</span><span class="ident" id="2734478">p</span><span class="op" id="2734479">)</span>&nbsp;<span class="op" id="2734481">=</span>&nbsp;<span class="op" id="2734483">*</span><span class="op" id="2734484">(</span><span class="op" id="2734485">*</span><span class="ident" id="2734486">unsafe</span><span class="op" id="2734492">.</span><span class="ident" id="2734493">Pointer</span><span class="op" id="2734500">)</span><span class="op" id="2734501">(</span><span class="ident" id="2734502">v</span><span class="op" id="2734503">.</span><span class="ident" id="2734504">ptr</span><span class="op" id="2734507">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734510">}</span>&nbsp;<span class="keyword" id="2734512">else</span>&nbsp;<span class="op" id="2734517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734521">*</span><span class="op" id="2734522">(</span><span class="op" id="2734523">*</span><span class="ident" id="2734524">unsafe</span><span class="op" id="2734530">.</span><span class="ident" id="2734531">Pointer</span><span class="op" id="2734538">)</span><span class="op" id="2734539">(</span><span class="ident" id="2734540">p</span><span class="op" id="2734541">)</span>&nbsp;<span class="op" id="2734543">=</span>&nbsp;<span class="ident" id="2734545">v</span><span class="op" id="2734546">.</span><span class="ident" id="2734547">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2734552">}</span><br>
<span class="lineno"></span><span class="op" id="2734554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="2734557">//&nbsp;align&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;rounding&nbsp;x&nbsp;up&nbsp;to&nbsp;a&nbsp;multiple&nbsp;of&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2734622">//&nbsp;n&nbsp;must&nbsp;be&nbsp;a&nbsp;power&nbsp;of&nbsp;two.</span><br>
<span class="lineno"></span><span class="keyword" id="2734651">func</span>&nbsp;<span class="ident" id="2734656">align</span><span class="op" id="2734661">(</span><span class="ident" id="2734662">x</span><span class="op" id="2734663">,</span>&nbsp;<span class="ident" id="2734665">n</span>&nbsp;<span class="builtintype" id="2734667">uintptr</span><span class="op" id="2734674">)</span>&nbsp;<span class="builtintype" id="2734676">uintptr</span>&nbsp;<span class="op" id="2734684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2734687">return</span>&nbsp;<span class="op" id="2734694">(</span><span class="ident" id="2734695">x</span>&nbsp;<span class="op" id="2734697">+</span>&nbsp;<span class="ident" id="2734699">n</span>&nbsp;<span class="op" id="2734701">-</span>&nbsp;<span class="num" id="2734703">1</span><span class="op" id="2734704">)</span>&nbsp;<span class="op" id="2734706">&amp;^</span>&nbsp;<span class="op" id="2734709">(</span><span class="ident" id="2734710">n</span>&nbsp;<span class="op" id="2734712">-</span>&nbsp;<span class="num" id="2734714">1</span><span class="op" id="2734715">)</span><br>
<span class="lineno"></span><span class="op" id="2734717">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span><span class="comment" id="2734720">//&nbsp;callMethod&nbsp;is&nbsp;the&nbsp;call&nbsp;implementation&nbsp;used&nbsp;by&nbsp;a&nbsp;function&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="2734789">//&nbsp;by&nbsp;makeMethodValue&nbsp;(used&nbsp;by&nbsp;v.Method(i).Interface()).</span><br>
<span class="lineno"></span><span class="comment" id="2734846">//&nbsp;It&nbsp;is&nbsp;a&nbsp;streamlined&nbsp;version&nbsp;of&nbsp;the&nbsp;usual&nbsp;reflect&nbsp;call:&nbsp;the&nbsp;caller&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="2734919">//&nbsp;already&nbsp;laid&nbsp;out&nbsp;the&nbsp;argument&nbsp;frame&nbsp;for&nbsp;us,&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;have</span><br>
<span class="lineno">585</span><span class="comment" id="2734983">//&nbsp;to&nbsp;deal&nbsp;with&nbsp;individual&nbsp;Values&nbsp;for&nbsp;each&nbsp;argument.</span><br>
<span class="lineno"></span><span class="comment" id="2735036">//&nbsp;It&nbsp;is&nbsp;in&nbsp;this&nbsp;file&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;next&nbsp;to&nbsp;the&nbsp;two&nbsp;similar&nbsp;functions&nbsp;above.</span><br>
<span class="lineno"></span><span class="comment" id="2735117">//&nbsp;The&nbsp;remainder&nbsp;of&nbsp;the&nbsp;makeMethodValue&nbsp;implementation&nbsp;is&nbsp;in&nbsp;makefunc.go.</span><br>
<span class="lineno"></span><span class="comment" id="2735191">//</span><br>
<span class="lineno"></span><span class="comment" id="2735194">//&nbsp;NOTE:&nbsp;This&nbsp;function&nbsp;must&nbsp;be&nbsp;marked&nbsp;as&nbsp;a&nbsp;&#34;wrapper&#34;&nbsp;in&nbsp;the&nbsp;generated&nbsp;code,</span><br>
<span class="lineno">590</span><span class="comment" id="2735270">//&nbsp;so&nbsp;that&nbsp;the&nbsp;linker&nbsp;can&nbsp;make&nbsp;it&nbsp;work&nbsp;correctly&nbsp;for&nbsp;panic&nbsp;and&nbsp;recover.</span><br>
<span class="lineno"></span><span class="comment" id="2735342">//&nbsp;The&nbsp;gc&nbsp;compilers&nbsp;know&nbsp;to&nbsp;do&nbsp;that&nbsp;for&nbsp;the&nbsp;name&nbsp;&#34;reflect.callMethod&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2735413">func</span>&nbsp;<span class="ident" id="2735418">callMethod</span><span class="op" id="2735428">(</span><span class="ident" id="2735429">ctxt</span>&nbsp;<span class="op" id="2735434">*</span><span class="ident" id="2735435">methodValue</span><span class="op" id="2735446">,</span>&nbsp;<span class="ident" id="2735448">frame</span>&nbsp;<span class="ident" id="2735454">unsafe</span><span class="op" id="2735460">.</span><span class="ident" id="2735461">Pointer</span><span class="op" id="2735468">)</span>&nbsp;<span class="op" id="2735470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735473">rcvr</span>&nbsp;<span class="op" id="2735478">:=</span>&nbsp;<span class="ident" id="2735481">ctxt</span><span class="op" id="2735485">.</span><span class="ident" id="2735486">rcvr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735492">rcvrtype</span><span class="op" id="2735500">,</span>&nbsp;<span class="ident" id="2735502">t</span><span class="op" id="2735503">,</span>&nbsp;<span class="ident" id="2735505">fn</span>&nbsp;<span class="op" id="2735508">:=</span>&nbsp;<span class="ident" id="2735511">methodReceiver</span><span class="op" id="2735525">(</span><span class="string" id="2735526">&#34;call&#34;</span><span class="op" id="2735532">,</span>&nbsp;<span class="ident" id="2735534">rcvr</span><span class="op" id="2735538">,</span>&nbsp;<span class="ident" id="2735540">ctxt</span><span class="op" id="2735544">.</span><span class="ident" id="2735545">method</span><span class="op" id="2735551">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735554">frametype</span><span class="op" id="2735563">,</span>&nbsp;<span class="ident" id="2735565">argSize</span><span class="op" id="2735572">,</span>&nbsp;<span class="ident" id="2735574">retOffset</span><span class="op" id="2735583">,</span>&nbsp;<span class="ident" id="2735585">_</span>&nbsp;<span class="op" id="2735587">:=</span>&nbsp;<span class="ident" id="2735590">funcLayout</span><span class="op" id="2735600">(</span><span class="ident" id="2735601">t</span><span class="op" id="2735602">,</span>&nbsp;<span class="ident" id="2735604">rcvrtype</span><span class="op" id="2735612">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2735616">//&nbsp;Make&nbsp;a&nbsp;new&nbsp;frame&nbsp;that&nbsp;is&nbsp;one&nbsp;word&nbsp;bigger&nbsp;so&nbsp;we&nbsp;can&nbsp;store&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735691">args</span>&nbsp;<span class="op" id="2735696">:=</span>&nbsp;<span class="ident" id="2735699">unsafe_New</span><span class="op" id="2735709">(</span><span class="ident" id="2735710">frametype</span><span class="op" id="2735719">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2735723">//&nbsp;Copy&nbsp;in&nbsp;receiver&nbsp;and&nbsp;rest&nbsp;of&nbsp;args.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735762">storeRcvr</span><span class="op" id="2735771">(</span><span class="ident" id="2735772">rcvr</span><span class="op" id="2735776">,</span>&nbsp;<span class="ident" id="2735778">args</span><span class="op" id="2735782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735785">memmove</span><span class="op" id="2735792">(</span><span class="ident" id="2735793">unsafe</span><span class="op" id="2735799">.</span><span class="ident" id="2735800">Pointer</span><span class="op" id="2735807">(</span><span class="builtintype" id="2735808">uintptr</span><span class="op" id="2735815">(</span><span class="ident" id="2735816">args</span><span class="op" id="2735820">)</span><span class="op" id="2735821">+</span><span class="ident" id="2735822">ptrSize</span><span class="op" id="2735829">)</span><span class="op" id="2735830">,</span>&nbsp;<span class="ident" id="2735832">frame</span><span class="op" id="2735837">,</span>&nbsp;<span class="ident" id="2735839">argSize</span><span class="op" id="2735846">-</span><span class="ident" id="2735847">ptrSize</span><span class="op" id="2735854">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2735858">//&nbsp;Call.</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2735868">call</span><span class="op" id="2735872">(</span><span class="ident" id="2735873">fn</span><span class="op" id="2735875">,</span>&nbsp;<span class="ident" id="2735877">args</span><span class="op" id="2735881">,</span>&nbsp;<span class="builtintype" id="2735883">uint32</span><span class="op" id="2735889">(</span><span class="ident" id="2735890">frametype</span><span class="op" id="2735899">.</span><span class="ident" id="2735900">size</span><span class="op" id="2735904">)</span><span class="op" id="2735905">,</span>&nbsp;<span class="builtintype" id="2735907">uint32</span><span class="op" id="2735913">(</span><span class="ident" id="2735914">retOffset</span><span class="op" id="2735923">)</span><span class="op" id="2735924">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2735928">//&nbsp;Copy&nbsp;return&nbsp;values.&nbsp;On&nbsp;amd64p32,&nbsp;the&nbsp;beginning&nbsp;of&nbsp;return&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2735996">//&nbsp;is&nbsp;64-bit&nbsp;aligned,&nbsp;so&nbsp;the&nbsp;caller&#39;s&nbsp;frame&nbsp;layout&nbsp;(which&nbsp;doesn&#39;t&nbsp;have</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736068">//&nbsp;a&nbsp;receiver)&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;layout&nbsp;of&nbsp;the&nbsp;fn&nbsp;call,&nbsp;which&nbsp;has</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736139">//&nbsp;a&nbsp;receiver.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736155">//&nbsp;Ignore&nbsp;any&nbsp;changes&nbsp;to&nbsp;args&nbsp;and&nbsp;just&nbsp;copy&nbsp;return&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736215">callerRetOffset</span>&nbsp;<span class="op" id="2736231">:=</span>&nbsp;<span class="ident" id="2736234">retOffset</span>&nbsp;<span class="op" id="2736244">-</span>&nbsp;<span class="ident" id="2736246">ptrSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736255">if</span>&nbsp;<span class="ident" id="2736258">runtime</span><span class="op" id="2736265">.</span><span class="ident" id="2736266">GOARCH</span>&nbsp;<span class="op" id="2736273">==</span>&nbsp;<span class="string" id="2736276">&#34;amd64p32&#34;</span>&nbsp;<span class="op" id="2736287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736291">callerRetOffset</span>&nbsp;<span class="op" id="2736307">=</span>&nbsp;<span class="ident" id="2736309">align</span><span class="op" id="2736314">(</span><span class="ident" id="2736315">argSize</span><span class="op" id="2736322">-</span><span class="ident" id="2736323">ptrSize</span><span class="op" id="2736330">,</span>&nbsp;<span class="num" id="2736332">8</span><span class="op" id="2736333">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736339">memmove</span><span class="op" id="2736346">(</span><span class="ident" id="2736347">unsafe</span><span class="op" id="2736353">.</span><span class="ident" id="2736354">Pointer</span><span class="op" id="2736361">(</span><span class="builtintype" id="2736362">uintptr</span><span class="op" id="2736369">(</span><span class="ident" id="2736370">frame</span><span class="op" id="2736375">)</span><span class="op" id="2736376">+</span><span class="ident" id="2736377">callerRetOffset</span><span class="op" id="2736392">)</span><span class="op" id="2736393">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736397">unsafe</span><span class="op" id="2736403">.</span><span class="ident" id="2736404">Pointer</span><span class="op" id="2736411">(</span><span class="builtintype" id="2736412">uintptr</span><span class="op" id="2736419">(</span><span class="ident" id="2736420">args</span><span class="op" id="2736424">)</span><span class="op" id="2736425">+</span><span class="ident" id="2736426">retOffset</span><span class="op" id="2736435">)</span><span class="op" id="2736436">,</span>&nbsp;<span class="ident" id="2736438">frametype</span><span class="op" id="2736447">.</span><span class="ident" id="2736448">size</span><span class="op" id="2736452">-</span><span class="ident" id="2736453">retOffset</span><span class="op" id="2736462">)</span><br>
<span class="lineno"></span><span class="op" id="2736464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">620</span><span class="comment" id="2736467">//&nbsp;funcName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;f,&nbsp;for&nbsp;use&nbsp;in&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="2736529">func</span>&nbsp;<span class="ident" id="2736534">funcName</span><span class="op" id="2736542">(</span><span class="ident" id="2736543">f</span>&nbsp;<span class="keyword" id="2736545">func</span><span class="op" id="2736549">(</span><span class="op" id="2736550">[</span><span class="op" id="2736551">]</span><span class="ident" id="2736552">Value</span><span class="op" id="2736557">)</span>&nbsp;<span class="op" id="2736559">[</span><span class="op" id="2736560">]</span><span class="ident" id="2736561">Value</span><span class="op" id="2736566">)</span>&nbsp;<span class="builtintype" id="2736568">string</span>&nbsp;<span class="op" id="2736575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736578">pc</span>&nbsp;<span class="op" id="2736581">:=</span>&nbsp;<span class="op" id="2736584">*</span><span class="op" id="2736585">(</span><span class="op" id="2736586">*</span><span class="builtintype" id="2736587">uintptr</span><span class="op" id="2736594">)</span><span class="op" id="2736595">(</span><span class="ident" id="2736596">unsafe</span><span class="op" id="2736602">.</span><span class="ident" id="2736603">Pointer</span><span class="op" id="2736610">(</span><span class="op" id="2736611">&amp;</span><span class="ident" id="2736612">f</span><span class="op" id="2736613">)</span><span class="op" id="2736614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736617">rf</span>&nbsp;<span class="op" id="2736620">:=</span>&nbsp;<span class="ident" id="2736623">runtime</span><span class="op" id="2736630">.</span><span class="ident" id="2736631">FuncForPC</span><span class="op" id="2736640">(</span><span class="ident" id="2736641">pc</span><span class="op" id="2736643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736646">if</span>&nbsp;<span class="ident" id="2736649">rf</span>&nbsp;<span class="op" id="2736652">!=</span>&nbsp;<span class="ident" id="2736655">nil</span>&nbsp;<span class="op" id="2736659">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736663">return</span>&nbsp;<span class="ident" id="2736670">rf</span><span class="op" id="2736672">.</span><span class="ident" id="2736673">Name</span><span class="op" id="2736677">(</span><span class="op" id="2736678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2736681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736684">return</span>&nbsp;<span class="string" id="2736691">&#34;closure&#34;</span><br>
<span class="lineno"></span><span class="op" id="2736701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">630</span><span class="comment" id="2736704">//&nbsp;Cap&nbsp;returns&nbsp;v&#39;s&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="comment" id="2736733">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;or&nbsp;Slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2736788">func</span>&nbsp;<span class="op" id="2736793">(</span><span class="ident" id="2736794">v</span>&nbsp;<span class="ident" id="2736796">Value</span><span class="op" id="2736801">)</span>&nbsp;<span class="ident" id="2736803">Cap</span><span class="op" id="2736806">(</span><span class="op" id="2736807">)</span>&nbsp;<span class="builtintype" id="2736809">int</span>&nbsp;<span class="op" id="2736813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2736816">k</span>&nbsp;<span class="op" id="2736818">:=</span>&nbsp;<span class="ident" id="2736821">v</span><span class="op" id="2736822">.</span><span class="ident" id="2736823">kind</span><span class="op" id="2736827">(</span><span class="op" id="2736828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736831">switch</span>&nbsp;<span class="ident" id="2736838">k</span>&nbsp;<span class="op" id="2736840">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736843">case</span>&nbsp;<span class="ident" id="2736848">Array</span><span class="op" id="2736853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736857">return</span>&nbsp;<span class="ident" id="2736864">v</span><span class="op" id="2736865">.</span><span class="ident" id="2736866">typ</span><span class="op" id="2736869">.</span><span class="ident" id="2736870">Len</span><span class="op" id="2736873">(</span><span class="op" id="2736874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736877">case</span>&nbsp;<span class="ident" id="2736882">Chan</span><span class="op" id="2736886">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736890">return</span>&nbsp;<span class="builtintype" id="2736897">int</span><span class="op" id="2736900">(</span><span class="ident" id="2736901">chancap</span><span class="op" id="2736908">(</span><span class="ident" id="2736909">v</span><span class="op" id="2736910">.</span><span class="ident" id="2736911">pointer</span><span class="op" id="2736918">(</span><span class="op" id="2736919">)</span><span class="op" id="2736920">)</span><span class="op" id="2736921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736924">case</span>&nbsp;<span class="ident" id="2736929">Slice</span><span class="op" id="2736934">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2736938">//&nbsp;Slice&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2736997">return</span>&nbsp;<span class="op" id="2737004">(</span><span class="op" id="2737005">*</span><span class="ident" id="2737006">sliceHeader</span><span class="op" id="2737017">)</span><span class="op" id="2737018">(</span><span class="ident" id="2737019">v</span><span class="op" id="2737020">.</span><span class="ident" id="2737021">ptr</span><span class="op" id="2737024">)</span><span class="op" id="2737025">.</span><span class="ident" id="2737026">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2737034">panic</span><span class="op" id="2737039">(</span><span class="op" id="2737040">&amp;</span><span class="ident" id="2737041">ValueError</span><span class="op" id="2737051">{</span><span class="string" id="2737052">&#34;reflect.Value.Cap&#34;</span><span class="op" id="2737071">,</span>&nbsp;<span class="ident" id="2737073">v</span><span class="op" id="2737074">.</span><span class="ident" id="2737075">kind</span><span class="op" id="2737079">(</span><span class="op" id="2737080">)</span><span class="op" id="2737081">}</span><span class="op" id="2737082">)</span><br>
<span class="lineno"></span><span class="op" id="2737084">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="comment" id="2737087">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2737118">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="keyword" id="2737156">func</span>&nbsp;<span class="op" id="2737161">(</span><span class="ident" id="2737162">v</span>&nbsp;<span class="ident" id="2737164">Value</span><span class="op" id="2737169">)</span>&nbsp;<span class="ident" id="2737171">Close</span><span class="op" id="2737176">(</span><span class="op" id="2737177">)</span>&nbsp;<span class="op" id="2737179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737182">v</span><span class="op" id="2737183">.</span><span class="ident" id="2737184">mustBe</span><span class="op" id="2737190">(</span><span class="ident" id="2737191">Chan</span><span class="op" id="2737195">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737198">v</span><span class="op" id="2737199">.</span><span class="ident" id="2737200">mustBeExported</span><span class="op" id="2737214">(</span><span class="op" id="2737215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737218">chanclose</span><span class="op" id="2737227">(</span><span class="ident" id="2737228">v</span><span class="op" id="2737229">.</span><span class="ident" id="2737230">pointer</span><span class="op" id="2737237">(</span><span class="op" id="2737238">)</span><span class="op" id="2737239">)</span><br>
<span class="lineno"></span><span class="op" id="2737241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2737244">//&nbsp;Complex&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;complex128.</span><br>
<span class="lineno">655</span><span class="comment" id="2737302">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128</span><br>
<span class="lineno"></span><span class="keyword" id="2737358">func</span>&nbsp;<span class="op" id="2737363">(</span><span class="ident" id="2737364">v</span>&nbsp;<span class="ident" id="2737366">Value</span><span class="op" id="2737371">)</span>&nbsp;<span class="ident" id="2737373">Complex</span><span class="op" id="2737380">(</span><span class="op" id="2737381">)</span>&nbsp;<span class="builtintype" id="2737383">complex128</span>&nbsp;<span class="op" id="2737394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737397">k</span>&nbsp;<span class="op" id="2737399">:=</span>&nbsp;<span class="ident" id="2737402">v</span><span class="op" id="2737403">.</span><span class="ident" id="2737404">kind</span><span class="op" id="2737408">(</span><span class="op" id="2737409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737412">switch</span>&nbsp;<span class="ident" id="2737419">k</span>&nbsp;<span class="op" id="2737421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737424">case</span>&nbsp;<span class="ident" id="2737429">Complex64</span><span class="op" id="2737438">:</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737442">return</span>&nbsp;<span class="builtintype" id="2737449">complex128</span><span class="op" id="2737459">(</span><span class="op" id="2737460">*</span><span class="op" id="2737461">(</span><span class="op" id="2737462">*</span><span class="builtintype" id="2737463">complex64</span><span class="op" id="2737472">)</span><span class="op" id="2737473">(</span><span class="ident" id="2737474">v</span><span class="op" id="2737475">.</span><span class="ident" id="2737476">ptr</span><span class="op" id="2737479">)</span><span class="op" id="2737480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737483">case</span>&nbsp;<span class="ident" id="2737488">Complex128</span><span class="op" id="2737498">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737502">return</span>&nbsp;<span class="op" id="2737509">*</span><span class="op" id="2737510">(</span><span class="op" id="2737511">*</span><span class="builtintype" id="2737512">complex128</span><span class="op" id="2737522">)</span><span class="op" id="2737523">(</span><span class="ident" id="2737524">v</span><span class="op" id="2737525">.</span><span class="ident" id="2737526">ptr</span><span class="op" id="2737529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2737535">panic</span><span class="op" id="2737540">(</span><span class="op" id="2737541">&amp;</span><span class="ident" id="2737542">ValueError</span><span class="op" id="2737552">{</span><span class="string" id="2737553">&#34;reflect.Value.Complex&#34;</span><span class="op" id="2737576">,</span>&nbsp;<span class="ident" id="2737578">v</span><span class="op" id="2737579">.</span><span class="ident" id="2737580">kind</span><span class="op" id="2737584">(</span><span class="op" id="2737585">)</span><span class="op" id="2737586">}</span><span class="op" id="2737587">)</span><br>
<span class="lineno">665</span><span class="op" id="2737589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2737592">//&nbsp;Elem&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;the&nbsp;interface&nbsp;v&nbsp;contains</span><br>
<span class="lineno"></span><span class="comment" id="2737648">//&nbsp;or&nbsp;that&nbsp;the&nbsp;pointer&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2737684">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface&nbsp;or&nbsp;Ptr.</span><br>
<span class="lineno">670</span><span class="comment" id="2737734">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;v&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2737776">func</span>&nbsp;<span class="op" id="2737781">(</span><span class="ident" id="2737782">v</span>&nbsp;<span class="ident" id="2737784">Value</span><span class="op" id="2737789">)</span>&nbsp;<span class="ident" id="2737791">Elem</span><span class="op" id="2737795">(</span><span class="op" id="2737796">)</span>&nbsp;<span class="ident" id="2737798">Value</span>&nbsp;<span class="op" id="2737804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737807">k</span>&nbsp;<span class="op" id="2737809">:=</span>&nbsp;<span class="ident" id="2737812">v</span><span class="op" id="2737813">.</span><span class="ident" id="2737814">kind</span><span class="op" id="2737818">(</span><span class="op" id="2737819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737822">switch</span>&nbsp;<span class="ident" id="2737829">k</span>&nbsp;<span class="op" id="2737831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737834">case</span>&nbsp;<span class="ident" id="2737839">Interface</span><span class="op" id="2737848">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737852">var</span>&nbsp;<span class="ident" id="2737856">eface</span>&nbsp;<span class="keyword" id="2737862">interface</span><span class="op" id="2737871">{</span><span class="op" id="2737872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2737876">if</span>&nbsp;<span class="ident" id="2737879">v</span><span class="op" id="2737880">.</span><span class="ident" id="2737881">typ</span><span class="op" id="2737884">.</span><span class="ident" id="2737885">NumMethod</span><span class="op" id="2737894">(</span><span class="op" id="2737895">)</span>&nbsp;<span class="op" id="2737897">==</span>&nbsp;<span class="num" id="2737900">0</span>&nbsp;<span class="op" id="2737902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737907">eface</span>&nbsp;<span class="op" id="2737913">=</span>&nbsp;<span class="op" id="2737915">*</span><span class="op" id="2737916">(</span><span class="op" id="2737917">*</span><span class="keyword" id="2737918">interface</span><span class="op" id="2737927">{</span><span class="op" id="2737928">}</span><span class="op" id="2737929">)</span><span class="op" id="2737930">(</span><span class="ident" id="2737931">v</span><span class="op" id="2737932">.</span><span class="ident" id="2737933">ptr</span><span class="op" id="2737936">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2737940">}</span>&nbsp;<span class="keyword" id="2737942">else</span>&nbsp;<span class="op" id="2737947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737952">eface</span>&nbsp;<span class="op" id="2737958">=</span>&nbsp;<span class="op" id="2737960">(</span><span class="keyword" id="2737961">interface</span><span class="op" id="2737970">{</span><span class="op" id="2737971">}</span><span class="op" id="2737972">)</span><span class="op" id="2737973">(</span><span class="op" id="2737974">*</span><span class="op" id="2737975">(</span><span class="op" id="2737976">*</span><span class="keyword" id="2737977">interface</span>&nbsp;<span class="op" id="2737987">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2737993">M</span><span class="op" id="2737994">(</span><span class="op" id="2737995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738000">}</span><span class="op" id="2738001">)</span><span class="op" id="2738002">(</span><span class="ident" id="2738003">v</span><span class="op" id="2738004">.</span><span class="ident" id="2738005">ptr</span><span class="op" id="2738008">)</span><span class="op" id="2738009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738017">x</span>&nbsp;<span class="op" id="2738019">:=</span>&nbsp;<span class="ident" id="2738022">unpackEface</span><span class="op" id="2738033">(</span><span class="ident" id="2738034">eface</span><span class="op" id="2738039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738043">if</span>&nbsp;<span class="ident" id="2738046">x</span><span class="op" id="2738047">.</span><span class="ident" id="2738048">flag</span>&nbsp;<span class="op" id="2738053">!=</span>&nbsp;<span class="num" id="2738056">0</span>&nbsp;<span class="op" id="2738058">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738063">x</span><span class="op" id="2738064">.</span><span class="ident" id="2738065">flag</span>&nbsp;<span class="op" id="2738070">|=</span>&nbsp;<span class="ident" id="2738073">v</span><span class="op" id="2738074">.</span><span class="ident" id="2738075">flag</span>&nbsp;<span class="op" id="2738080">&amp;</span>&nbsp;<span class="ident" id="2738082">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738095">return</span>&nbsp;<span class="ident" id="2738102">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738105">case</span>&nbsp;<span class="ident" id="2738110">Ptr</span><span class="op" id="2738113">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738117">ptr</span>&nbsp;<span class="op" id="2738121">:=</span>&nbsp;<span class="ident" id="2738124">v</span><span class="op" id="2738125">.</span><span class="ident" id="2738126">ptr</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738132">if</span>&nbsp;<span class="ident" id="2738135">v</span><span class="op" id="2738136">.</span><span class="ident" id="2738137">flag</span><span class="op" id="2738141">&amp;</span><span class="ident" id="2738142">flagIndir</span>&nbsp;<span class="op" id="2738152">!=</span>&nbsp;<span class="num" id="2738155">0</span>&nbsp;<span class="op" id="2738157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738162">ptr</span>&nbsp;<span class="op" id="2738166">=</span>&nbsp;<span class="op" id="2738168">*</span><span class="op" id="2738169">(</span><span class="op" id="2738170">*</span><span class="ident" id="2738171">unsafe</span><span class="op" id="2738177">.</span><span class="ident" id="2738178">Pointer</span><span class="op" id="2738185">)</span><span class="op" id="2738186">(</span><span class="ident" id="2738187">ptr</span><span class="op" id="2738190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2738198">//&nbsp;The&nbsp;returned&nbsp;value&#39;s&nbsp;address&nbsp;is&nbsp;v&#39;s&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738246">if</span>&nbsp;<span class="ident" id="2738249">ptr</span>&nbsp;<span class="op" id="2738253">==</span>&nbsp;<span class="ident" id="2738256">nil</span>&nbsp;<span class="op" id="2738260">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738265">return</span>&nbsp;<span class="ident" id="2738272">Value</span><span class="op" id="2738277">{</span><span class="op" id="2738278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738286">tt</span>&nbsp;<span class="op" id="2738289">:=</span>&nbsp;<span class="op" id="2738292">(</span><span class="op" id="2738293">*</span><span class="ident" id="2738294">ptrType</span><span class="op" id="2738301">)</span><span class="op" id="2738302">(</span><span class="ident" id="2738303">unsafe</span><span class="op" id="2738309">.</span><span class="ident" id="2738310">Pointer</span><span class="op" id="2738317">(</span><span class="ident" id="2738318">v</span><span class="op" id="2738319">.</span><span class="ident" id="2738320">typ</span><span class="op" id="2738323">)</span><span class="op" id="2738324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738328">typ</span>&nbsp;<span class="op" id="2738332">:=</span>&nbsp;<span class="ident" id="2738335">tt</span><span class="op" id="2738337">.</span><span class="ident" id="2738338">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738345">fl</span>&nbsp;<span class="op" id="2738348">:=</span>&nbsp;<span class="ident" id="2738351">v</span><span class="op" id="2738352">.</span><span class="ident" id="2738353">flag</span><span class="op" id="2738357">&amp;</span><span class="ident" id="2738358">flagRO</span>&nbsp;<span class="op" id="2738365">|</span>&nbsp;<span class="ident" id="2738367">flagIndir</span>&nbsp;<span class="op" id="2738377">|</span>&nbsp;<span class="ident" id="2738379">flagAddr</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738390">fl</span>&nbsp;<span class="op" id="2738393">|=</span>&nbsp;<span class="ident" id="2738396">flag</span><span class="op" id="2738400">(</span><span class="ident" id="2738401">typ</span><span class="op" id="2738404">.</span><span class="ident" id="2738405">Kind</span><span class="op" id="2738409">(</span><span class="op" id="2738410">)</span><span class="op" id="2738411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738415">return</span>&nbsp;<span class="ident" id="2738422">Value</span><span class="op" id="2738427">{</span><span class="ident" id="2738428">typ</span><span class="op" id="2738431">,</span>&nbsp;<span class="ident" id="2738433">ptr</span><span class="op" id="2738436">,</span>&nbsp;<span class="ident" id="2738438">fl</span><span class="op" id="2738440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2738446">panic</span><span class="op" id="2738451">(</span><span class="op" id="2738452">&amp;</span><span class="ident" id="2738453">ValueError</span><span class="op" id="2738463">{</span><span class="string" id="2738464">&#34;reflect.Value.Elem&#34;</span><span class="op" id="2738484">,</span>&nbsp;<span class="ident" id="2738486">v</span><span class="op" id="2738487">.</span><span class="ident" id="2738488">kind</span><span class="op" id="2738492">(</span><span class="op" id="2738493">)</span><span class="op" id="2738494">}</span><span class="op" id="2738495">)</span><br>
<span class="lineno"></span><span class="op" id="2738497">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="comment" id="2738500">//&nbsp;Field&nbsp;returns&nbsp;the&nbsp;i&#39;th&nbsp;field&nbsp;of&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2738549">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2738610">func</span>&nbsp;<span class="op" id="2738615">(</span><span class="ident" id="2738616">v</span>&nbsp;<span class="ident" id="2738618">Value</span><span class="op" id="2738623">)</span>&nbsp;<span class="ident" id="2738625">Field</span><span class="op" id="2738630">(</span><span class="ident" id="2738631">i</span>&nbsp;<span class="builtintype" id="2738633">int</span><span class="op" id="2738636">)</span>&nbsp;<span class="ident" id="2738638">Value</span>&nbsp;<span class="op" id="2738644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738647">if</span>&nbsp;<span class="ident" id="2738650">v</span><span class="op" id="2738651">.</span><span class="ident" id="2738652">kind</span><span class="op" id="2738656">(</span><span class="op" id="2738657">)</span>&nbsp;<span class="op" id="2738659">!=</span>&nbsp;<span class="ident" id="2738662">Struct</span>&nbsp;<span class="op" id="2738669">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2738673">panic</span><span class="op" id="2738678">(</span><span class="op" id="2738679">&amp;</span><span class="ident" id="2738680">ValueError</span><span class="op" id="2738690">{</span><span class="string" id="2738691">&#34;reflect.Value.Field&#34;</span><span class="op" id="2738712">,</span>&nbsp;<span class="ident" id="2738714">v</span><span class="op" id="2738715">.</span><span class="ident" id="2738716">kind</span><span class="op" id="2738720">(</span><span class="op" id="2738721">)</span><span class="op" id="2738722">}</span><span class="op" id="2738723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738729">tt</span>&nbsp;<span class="op" id="2738732">:=</span>&nbsp;<span class="op" id="2738735">(</span><span class="op" id="2738736">*</span><span class="ident" id="2738737">structType</span><span class="op" id="2738747">)</span><span class="op" id="2738748">(</span><span class="ident" id="2738749">unsafe</span><span class="op" id="2738755">.</span><span class="ident" id="2738756">Pointer</span><span class="op" id="2738763">(</span><span class="ident" id="2738764">v</span><span class="op" id="2738765">.</span><span class="ident" id="2738766">typ</span><span class="op" id="2738769">)</span><span class="op" id="2738770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2738773">if</span>&nbsp;<span class="builtintype" id="2738776">uint</span><span class="op" id="2738780">(</span><span class="ident" id="2738781">i</span><span class="op" id="2738782">)</span>&nbsp;<span class="op" id="2738784">&gt;=</span>&nbsp;<span class="builtintype" id="2738787">uint</span><span class="op" id="2738791">(</span><span class="builtinfunc" id="2738792">len</span><span class="op" id="2738795">(</span><span class="ident" id="2738796">tt</span><span class="op" id="2738798">.</span><span class="ident" id="2738799">fields</span><span class="op" id="2738805">)</span><span class="op" id="2738806">)</span>&nbsp;<span class="op" id="2738808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2738812">panic</span><span class="op" id="2738817">(</span><span class="string" id="2738818">&#34;reflect:&nbsp;Field&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2738853">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2738856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738859">field</span>&nbsp;<span class="op" id="2738865">:=</span>&nbsp;<span class="op" id="2738868">&amp;</span><span class="ident" id="2738869">tt</span><span class="op" id="2738871">.</span><span class="ident" id="2738872">fields</span><span class="op" id="2738878">[</span><span class="ident" id="2738879">i</span><span class="op" id="2738880">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738883">typ</span>&nbsp;<span class="op" id="2738887">:=</span>&nbsp;<span class="ident" id="2738890">field</span><span class="op" id="2738895">.</span><span class="ident" id="2738896">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2738902">//&nbsp;Inherit&nbsp;permission&nbsp;bits&nbsp;from&nbsp;v.</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2738938">fl</span>&nbsp;<span class="op" id="2738941">:=</span>&nbsp;<span class="ident" id="2738944">v</span><span class="op" id="2738945">.</span><span class="ident" id="2738946">flag</span><span class="op" id="2738950">&amp;</span><span class="op" id="2738951">(</span><span class="ident" id="2738952">flagRO</span><span class="op" id="2738958">|</span><span class="ident" id="2738959">flagIndir</span><span class="op" id="2738968">|</span><span class="ident" id="2738969">flagAddr</span><span class="op" id="2738977">)</span>&nbsp;<span class="op" id="2738979">|</span>&nbsp;<span class="ident" id="2738981">flag</span><span class="op" id="2738985">(</span><span class="ident" id="2738986">typ</span><span class="op" id="2738989">.</span><span class="ident" id="2738990">Kind</span><span class="op" id="2738994">(</span><span class="op" id="2738995">)</span><span class="op" id="2738996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2738999">//&nbsp;Using&nbsp;an&nbsp;unexported&nbsp;field&nbsp;forces&nbsp;flagRO.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739044">if</span>&nbsp;<span class="ident" id="2739047">field</span><span class="op" id="2739052">.</span><span class="ident" id="2739053">pkgPath</span>&nbsp;<span class="op" id="2739061">!=</span>&nbsp;<span class="ident" id="2739064">nil</span>&nbsp;<span class="op" id="2739068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739072">fl</span>&nbsp;<span class="op" id="2739075">|=</span>&nbsp;<span class="ident" id="2739078">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739086">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739089">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;struct,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739145">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;struct&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739210">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739258">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;have&nbsp;field.offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2739316">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;field.offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739359">ptr</span>&nbsp;<span class="op" id="2739363">:=</span>&nbsp;<span class="ident" id="2739366">unsafe</span><span class="op" id="2739372">.</span><span class="ident" id="2739373">Pointer</span><span class="op" id="2739380">(</span><span class="builtintype" id="2739381">uintptr</span><span class="op" id="2739388">(</span><span class="ident" id="2739389">v</span><span class="op" id="2739390">.</span><span class="ident" id="2739391">ptr</span><span class="op" id="2739394">)</span>&nbsp;<span class="op" id="2739396">+</span>&nbsp;<span class="ident" id="2739398">field</span><span class="op" id="2739403">.</span><span class="ident" id="2739404">offset</span><span class="op" id="2739410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739413">return</span>&nbsp;<span class="ident" id="2739420">Value</span><span class="op" id="2739425">{</span><span class="ident" id="2739426">typ</span><span class="op" id="2739429">,</span>&nbsp;<span class="ident" id="2739431">ptr</span><span class="op" id="2739434">,</span>&nbsp;<span class="ident" id="2739436">fl</span><span class="op" id="2739438">}</span><br>
<span class="lineno"></span><span class="op" id="2739440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2739443">//&nbsp;FieldByIndex&nbsp;returns&nbsp;the&nbsp;nested&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;index.</span><br>
<span class="lineno">735</span><span class="comment" id="2739508">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2739548">func</span>&nbsp;<span class="op" id="2739553">(</span><span class="ident" id="2739554">v</span>&nbsp;<span class="ident" id="2739556">Value</span><span class="op" id="2739561">)</span>&nbsp;<span class="ident" id="2739563">FieldByIndex</span><span class="op" id="2739575">(</span><span class="ident" id="2739576">index</span>&nbsp;<span class="op" id="2739582">[</span><span class="op" id="2739583">]</span><span class="builtintype" id="2739584">int</span><span class="op" id="2739587">)</span>&nbsp;<span class="ident" id="2739589">Value</span>&nbsp;<span class="op" id="2739595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739598">if</span>&nbsp;<span class="builtinfunc" id="2739601">len</span><span class="op" id="2739604">(</span><span class="ident" id="2739605">index</span><span class="op" id="2739610">)</span>&nbsp;<span class="op" id="2739612">==</span>&nbsp;<span class="num" id="2739615">1</span>&nbsp;<span class="op" id="2739617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739621">return</span>&nbsp;<span class="ident" id="2739628">v</span><span class="op" id="2739629">.</span><span class="ident" id="2739630">Field</span><span class="op" id="2739635">(</span><span class="ident" id="2739636">index</span><span class="op" id="2739641">[</span><span class="num" id="2739642">0</span><span class="op" id="2739643">]</span><span class="op" id="2739644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739647">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739650">v</span><span class="op" id="2739651">.</span><span class="ident" id="2739652">mustBe</span><span class="op" id="2739658">(</span><span class="ident" id="2739659">Struct</span><span class="op" id="2739665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739668">for</span>&nbsp;<span class="ident" id="2739672">i</span><span class="op" id="2739673">,</span>&nbsp;<span class="ident" id="2739675">x</span>&nbsp;<span class="op" id="2739677">:=</span>&nbsp;<span class="keyword" id="2739680">range</span>&nbsp;<span class="ident" id="2739686">index</span>&nbsp;<span class="op" id="2739692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739696">if</span>&nbsp;<span class="ident" id="2739699">i</span>&nbsp;<span class="op" id="2739701">&gt;</span>&nbsp;<span class="num" id="2739703">0</span>&nbsp;<span class="op" id="2739705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739710">if</span>&nbsp;<span class="ident" id="2739713">v</span><span class="op" id="2739714">.</span><span class="ident" id="2739715">Kind</span><span class="op" id="2739719">(</span><span class="op" id="2739720">)</span>&nbsp;<span class="op" id="2739722">==</span>&nbsp;<span class="ident" id="2739725">Ptr</span>&nbsp;<span class="op" id="2739729">&amp;&amp;</span>&nbsp;<span class="ident" id="2739732">v</span><span class="op" id="2739733">.</span><span class="ident" id="2739734">typ</span><span class="op" id="2739737">.</span><span class="ident" id="2739738">Elem</span><span class="op" id="2739742">(</span><span class="op" id="2739743">)</span><span class="op" id="2739744">.</span><span class="ident" id="2739745">Kind</span><span class="op" id="2739749">(</span><span class="op" id="2739750">)</span>&nbsp;<span class="op" id="2739752">==</span>&nbsp;<span class="ident" id="2739755">Struct</span>&nbsp;<span class="op" id="2739762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739768">if</span>&nbsp;<span class="ident" id="2739771">v</span><span class="op" id="2739772">.</span><span class="ident" id="2739773">IsNil</span><span class="op" id="2739778">(</span><span class="op" id="2739779">)</span>&nbsp;<span class="op" id="2739781">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2739788">panic</span><span class="op" id="2739793">(</span><span class="string" id="2739794">&#34;reflect:&nbsp;indirection&nbsp;through&nbsp;nil&nbsp;pointer&nbsp;to&nbsp;embedded&nbsp;struct&#34;</span><span class="op" id="2739855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739867">v</span>&nbsp;<span class="op" id="2739869">=</span>&nbsp;<span class="ident" id="2739871">v</span><span class="op" id="2739872">.</span><span class="ident" id="2739873">Elem</span><span class="op" id="2739877">(</span><span class="op" id="2739878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739887">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739891">v</span>&nbsp;<span class="op" id="2739893">=</span>&nbsp;<span class="ident" id="2739895">v</span><span class="op" id="2739896">.</span><span class="ident" id="2739897">Field</span><span class="op" id="2739902">(</span><span class="ident" id="2739903">x</span><span class="op" id="2739904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739910">return</span>&nbsp;<span class="ident" id="2739917">v</span><br>
<span class="lineno"></span><span class="op" id="2739919">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="2739922">//&nbsp;FieldByName&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2739983">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno"></span><span class="comment" id="2740035">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2740075">func</span>&nbsp;<span class="op" id="2740080">(</span><span class="ident" id="2740081">v</span>&nbsp;<span class="ident" id="2740083">Value</span><span class="op" id="2740088">)</span>&nbsp;<span class="ident" id="2740090">FieldByName</span><span class="op" id="2740101">(</span><span class="ident" id="2740102">name</span>&nbsp;<span class="builtintype" id="2740107">string</span><span class="op" id="2740113">)</span>&nbsp;<span class="ident" id="2740115">Value</span>&nbsp;<span class="op" id="2740121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740124">v</span><span class="op" id="2740125">.</span><span class="ident" id="2740126">mustBe</span><span class="op" id="2740132">(</span><span class="ident" id="2740133">Struct</span><span class="op" id="2740139">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740142">if</span>&nbsp;<span class="ident" id="2740145">f</span><span class="op" id="2740146">,</span>&nbsp;<span class="ident" id="2740148">ok</span>&nbsp;<span class="op" id="2740151">:=</span>&nbsp;<span class="ident" id="2740154">v</span><span class="op" id="2740155">.</span><span class="ident" id="2740156">typ</span><span class="op" id="2740159">.</span><span class="ident" id="2740160">FieldByName</span><span class="op" id="2740171">(</span><span class="ident" id="2740172">name</span><span class="op" id="2740176">)</span><span class="op" id="2740177">;</span>&nbsp;<span class="ident" id="2740179">ok</span>&nbsp;<span class="op" id="2740182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740186">return</span>&nbsp;<span class="ident" id="2740193">v</span><span class="op" id="2740194">.</span><span class="ident" id="2740195">FieldByIndex</span><span class="op" id="2740207">(</span><span class="ident" id="2740208">f</span><span class="op" id="2740209">.</span><span class="ident" id="2740210">Index</span><span class="op" id="2740215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740221">return</span>&nbsp;<span class="ident" id="2740228">Value</span><span class="op" id="2740233">{</span><span class="op" id="2740234">}</span><br>
<span class="lineno"></span><span class="op" id="2740236">}</span><br>
<span class="lineno">765</span><br>
<span class="lineno"></span><span class="comment" id="2740239">//&nbsp;FieldByNameFunc&nbsp;returns&nbsp;the&nbsp;struct&nbsp;field&nbsp;with&nbsp;a&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="2740295">//&nbsp;that&nbsp;satisfies&nbsp;the&nbsp;match&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2740333">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="2740373">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;field&nbsp;was&nbsp;found.</span><br>
<span class="lineno">770</span><span class="keyword" id="2740425">func</span>&nbsp;<span class="op" id="2740430">(</span><span class="ident" id="2740431">v</span>&nbsp;<span class="ident" id="2740433">Value</span><span class="op" id="2740438">)</span>&nbsp;<span class="ident" id="2740440">FieldByNameFunc</span><span class="op" id="2740455">(</span><span class="ident" id="2740456">match</span>&nbsp;<span class="keyword" id="2740462">func</span><span class="op" id="2740466">(</span><span class="builtintype" id="2740467">string</span><span class="op" id="2740473">)</span>&nbsp;<span class="builtintype" id="2740475">bool</span><span class="op" id="2740479">)</span>&nbsp;<span class="ident" id="2740481">Value</span>&nbsp;<span class="op" id="2740487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740490">if</span>&nbsp;<span class="ident" id="2740493">f</span><span class="op" id="2740494">,</span>&nbsp;<span class="ident" id="2740496">ok</span>&nbsp;<span class="op" id="2740499">:=</span>&nbsp;<span class="ident" id="2740502">v</span><span class="op" id="2740503">.</span><span class="ident" id="2740504">typ</span><span class="op" id="2740507">.</span><span class="ident" id="2740508">FieldByNameFunc</span><span class="op" id="2740523">(</span><span class="ident" id="2740524">match</span><span class="op" id="2740529">)</span><span class="op" id="2740530">;</span>&nbsp;<span class="ident" id="2740532">ok</span>&nbsp;<span class="op" id="2740535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740539">return</span>&nbsp;<span class="ident" id="2740546">v</span><span class="op" id="2740547">.</span><span class="ident" id="2740548">FieldByIndex</span><span class="op" id="2740560">(</span><span class="ident" id="2740561">f</span><span class="op" id="2740562">.</span><span class="ident" id="2740563">Index</span><span class="op" id="2740568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740574">return</span>&nbsp;<span class="ident" id="2740581">Value</span><span class="op" id="2740586">{</span><span class="op" id="2740587">}</span><br>
<span class="lineno">775</span><span class="op" id="2740589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2740592">//&nbsp;Float&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno"></span><span class="comment" id="2740645">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64</span><br>
<span class="lineno"></span><span class="keyword" id="2740696">func</span>&nbsp;<span class="op" id="2740701">(</span><span class="ident" id="2740702">v</span>&nbsp;<span class="ident" id="2740704">Value</span><span class="op" id="2740709">)</span>&nbsp;<span class="ident" id="2740711">Float</span><span class="op" id="2740716">(</span><span class="op" id="2740717">)</span>&nbsp;<span class="builtintype" id="2740719">float64</span>&nbsp;<span class="op" id="2740727">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740730">k</span>&nbsp;<span class="op" id="2740732">:=</span>&nbsp;<span class="ident" id="2740735">v</span><span class="op" id="2740736">.</span><span class="ident" id="2740737">kind</span><span class="op" id="2740741">(</span><span class="op" id="2740742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740745">switch</span>&nbsp;<span class="ident" id="2740752">k</span>&nbsp;<span class="op" id="2740754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740757">case</span>&nbsp;<span class="ident" id="2740762">Float32</span><span class="op" id="2740769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740773">return</span>&nbsp;<span class="builtintype" id="2740780">float64</span><span class="op" id="2740787">(</span><span class="op" id="2740788">*</span><span class="op" id="2740789">(</span><span class="op" id="2740790">*</span><span class="builtintype" id="2740791">float32</span><span class="op" id="2740798">)</span><span class="op" id="2740799">(</span><span class="ident" id="2740800">v</span><span class="op" id="2740801">.</span><span class="ident" id="2740802">ptr</span><span class="op" id="2740805">)</span><span class="op" id="2740806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740809">case</span>&nbsp;<span class="ident" id="2740814">Float64</span><span class="op" id="2740821">:</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740825">return</span>&nbsp;<span class="op" id="2740832">*</span><span class="op" id="2740833">(</span><span class="op" id="2740834">*</span><span class="builtintype" id="2740835">float64</span><span class="op" id="2740842">)</span><span class="op" id="2740843">(</span><span class="ident" id="2740844">v</span><span class="op" id="2740845">.</span><span class="ident" id="2740846">ptr</span><span class="op" id="2740849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2740855">panic</span><span class="op" id="2740860">(</span><span class="op" id="2740861">&amp;</span><span class="ident" id="2740862">ValueError</span><span class="op" id="2740872">{</span><span class="string" id="2740873">&#34;reflect.Value.Float&#34;</span><span class="op" id="2740894">,</span>&nbsp;<span class="ident" id="2740896">v</span><span class="op" id="2740897">.</span><span class="ident" id="2740898">kind</span><span class="op" id="2740902">(</span><span class="op" id="2740903">)</span><span class="op" id="2740904">}</span><span class="op" id="2740905">)</span><br>
<span class="lineno"></span><span class="op" id="2740907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="2740910">var</span>&nbsp;<span class="ident" id="2740914">uint8Type</span>&nbsp;<span class="op" id="2740924">=</span>&nbsp;<span class="ident" id="2740926">TypeOf</span><span class="op" id="2740932">(</span><span class="builtintype" id="2740933">uint8</span><span class="op" id="2740938">(</span><span class="num" id="2740939">0</span><span class="op" id="2740940">)</span><span class="op" id="2740941">)</span><span class="op" id="2740942">.</span><span class="op" id="2740943">(</span><span class="op" id="2740944">*</span><span class="ident" id="2740945">rtype</span><span class="op" id="2740950">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2740953">//&nbsp;Index&nbsp;returns&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="2740988">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice,&nbsp;or&nbsp;String&nbsp;or&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range.</span><br>
<span class="lineno"></span><span class="keyword" id="2741066">func</span>&nbsp;<span class="op" id="2741071">(</span><span class="ident" id="2741072">v</span>&nbsp;<span class="ident" id="2741074">Value</span><span class="op" id="2741079">)</span>&nbsp;<span class="ident" id="2741081">Index</span><span class="op" id="2741086">(</span><span class="ident" id="2741087">i</span>&nbsp;<span class="builtintype" id="2741089">int</span><span class="op" id="2741092">)</span>&nbsp;<span class="ident" id="2741094">Value</span>&nbsp;<span class="op" id="2741100">{</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741103">switch</span>&nbsp;<span class="ident" id="2741110">v</span><span class="op" id="2741111">.</span><span class="ident" id="2741112">kind</span><span class="op" id="2741116">(</span><span class="op" id="2741117">)</span>&nbsp;<span class="op" id="2741119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741122">case</span>&nbsp;<span class="ident" id="2741127">Array</span><span class="op" id="2741132">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741136">tt</span>&nbsp;<span class="op" id="2741139">:=</span>&nbsp;<span class="op" id="2741142">(</span><span class="op" id="2741143">*</span><span class="ident" id="2741144">arrayType</span><span class="op" id="2741153">)</span><span class="op" id="2741154">(</span><span class="ident" id="2741155">unsafe</span><span class="op" id="2741161">.</span><span class="ident" id="2741162">Pointer</span><span class="op" id="2741169">(</span><span class="ident" id="2741170">v</span><span class="op" id="2741171">.</span><span class="ident" id="2741172">typ</span><span class="op" id="2741175">)</span><span class="op" id="2741176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741180">if</span>&nbsp;<span class="builtintype" id="2741183">uint</span><span class="op" id="2741187">(</span><span class="ident" id="2741188">i</span><span class="op" id="2741189">)</span>&nbsp;<span class="op" id="2741191">&gt;=</span>&nbsp;<span class="builtintype" id="2741194">uint</span><span class="op" id="2741198">(</span><span class="ident" id="2741199">tt</span><span class="op" id="2741201">.</span><span class="builtinfunc" id="2741202">len</span><span class="op" id="2741205">)</span>&nbsp;<span class="op" id="2741207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2741212">panic</span><span class="op" id="2741217">(</span><span class="string" id="2741218">&#34;reflect:&nbsp;array&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2741253">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2741257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741261">typ</span>&nbsp;<span class="op" id="2741265">:=</span>&nbsp;<span class="ident" id="2741268">tt</span><span class="op" id="2741270">.</span><span class="ident" id="2741271">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741278">offset</span>&nbsp;<span class="op" id="2741285">:=</span>&nbsp;<span class="builtintype" id="2741288">uintptr</span><span class="op" id="2741295">(</span><span class="ident" id="2741296">i</span><span class="op" id="2741297">)</span>&nbsp;<span class="op" id="2741299">*</span>&nbsp;<span class="ident" id="2741301">typ</span><span class="op" id="2741304">.</span><span class="ident" id="2741305">size</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741313">//&nbsp;Either&nbsp;flagIndir&nbsp;is&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;points&nbsp;at&nbsp;array,</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741369">//&nbsp;or&nbsp;flagIndir&nbsp;is&nbsp;not&nbsp;set&nbsp;and&nbsp;v.ptr&nbsp;is&nbsp;the&nbsp;actual&nbsp;array&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741434">//&nbsp;In&nbsp;the&nbsp;former&nbsp;case,&nbsp;we&nbsp;want&nbsp;v.ptr&nbsp;+&nbsp;offset.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741483">//&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;we&nbsp;must&nbsp;be&nbsp;doing&nbsp;Index(0),&nbsp;so&nbsp;offset&nbsp;=&nbsp;0,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741550">//&nbsp;so&nbsp;v.ptr&nbsp;+&nbsp;offset&nbsp;is&nbsp;still&nbsp;okay.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741588">val</span>&nbsp;<span class="op" id="2741592">:=</span>&nbsp;<span class="ident" id="2741595">unsafe</span><span class="op" id="2741601">.</span><span class="ident" id="2741602">Pointer</span><span class="op" id="2741609">(</span><span class="builtintype" id="2741610">uintptr</span><span class="op" id="2741617">(</span><span class="ident" id="2741618">v</span><span class="op" id="2741619">.</span><span class="ident" id="2741620">ptr</span><span class="op" id="2741623">)</span>&nbsp;<span class="op" id="2741625">+</span>&nbsp;<span class="ident" id="2741627">offset</span><span class="op" id="2741633">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741637">fl</span>&nbsp;<span class="op" id="2741640">:=</span>&nbsp;<span class="ident" id="2741643">v</span><span class="op" id="2741644">.</span><span class="ident" id="2741645">flag</span><span class="op" id="2741649">&amp;</span><span class="op" id="2741650">(</span><span class="ident" id="2741651">flagRO</span><span class="op" id="2741657">|</span><span class="ident" id="2741658">flagIndir</span><span class="op" id="2741667">|</span><span class="ident" id="2741668">flagAddr</span><span class="op" id="2741676">)</span>&nbsp;<span class="op" id="2741678">|</span>&nbsp;<span class="ident" id="2741680">flag</span><span class="op" id="2741684">(</span><span class="ident" id="2741685">typ</span><span class="op" id="2741688">.</span><span class="ident" id="2741689">Kind</span><span class="op" id="2741693">(</span><span class="op" id="2741694">)</span><span class="op" id="2741695">)</span>&nbsp;<span class="comment" id="2741697">//&nbsp;bits&nbsp;same&nbsp;as&nbsp;overall&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741729">return</span>&nbsp;<span class="ident" id="2741736">Value</span><span class="op" id="2741741">{</span><span class="ident" id="2741742">typ</span><span class="op" id="2741745">,</span>&nbsp;<span class="ident" id="2741747">val</span><span class="op" id="2741750">,</span>&nbsp;<span class="ident" id="2741752">fl</span><span class="op" id="2741754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741758">case</span>&nbsp;<span class="ident" id="2741763">Slice</span><span class="op" id="2741768">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741772">//&nbsp;Element&nbsp;flag&nbsp;same&nbsp;as&nbsp;Elem&nbsp;of&nbsp;Ptr.</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2741811">//&nbsp;Addressable,&nbsp;indirect,&nbsp;possibly&nbsp;read-only.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741859">s</span>&nbsp;<span class="op" id="2741861">:=</span>&nbsp;<span class="op" id="2741864">(</span><span class="op" id="2741865">*</span><span class="ident" id="2741866">sliceHeader</span><span class="op" id="2741877">)</span><span class="op" id="2741878">(</span><span class="ident" id="2741879">v</span><span class="op" id="2741880">.</span><span class="ident" id="2741881">ptr</span><span class="op" id="2741884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2741888">if</span>&nbsp;<span class="builtintype" id="2741891">uint</span><span class="op" id="2741895">(</span><span class="ident" id="2741896">i</span><span class="op" id="2741897">)</span>&nbsp;<span class="op" id="2741899">&gt;=</span>&nbsp;<span class="builtintype" id="2741902">uint</span><span class="op" id="2741906">(</span><span class="ident" id="2741907">s</span><span class="op" id="2741908">.</span><span class="ident" id="2741909">Len</span><span class="op" id="2741912">)</span>&nbsp;<span class="op" id="2741914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2741919">panic</span><span class="op" id="2741924">(</span><span class="string" id="2741925">&#34;reflect:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2741960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2741964">}</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2741968">tt</span>&nbsp;<span class="op" id="2741971">:=</span>&nbsp;<span class="op" id="2741974">(</span><span class="op" id="2741975">*</span><span class="ident" id="2741976">sliceType</span><span class="op" id="2741985">)</span><span class="op" id="2741986">(</span><span class="ident" id="2741987">unsafe</span><span class="op" id="2741993">.</span><span class="ident" id="2741994">Pointer</span><span class="op" id="2742001">(</span><span class="ident" id="2742002">v</span><span class="op" id="2742003">.</span><span class="ident" id="2742004">typ</span><span class="op" id="2742007">)</span><span class="op" id="2742008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742012">typ</span>&nbsp;<span class="op" id="2742016">:=</span>&nbsp;<span class="ident" id="2742019">tt</span><span class="op" id="2742021">.</span><span class="ident" id="2742022">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742029">val</span>&nbsp;<span class="op" id="2742033">:=</span>&nbsp;<span class="ident" id="2742036">unsafe</span><span class="op" id="2742042">.</span><span class="ident" id="2742043">Pointer</span><span class="op" id="2742050">(</span><span class="builtintype" id="2742051">uintptr</span><span class="op" id="2742058">(</span><span class="ident" id="2742059">s</span><span class="op" id="2742060">.</span><span class="ident" id="2742061">Data</span><span class="op" id="2742065">)</span>&nbsp;<span class="op" id="2742067">+</span>&nbsp;<span class="builtintype" id="2742069">uintptr</span><span class="op" id="2742076">(</span><span class="ident" id="2742077">i</span><span class="op" id="2742078">)</span><span class="op" id="2742079">*</span><span class="ident" id="2742080">typ</span><span class="op" id="2742083">.</span><span class="ident" id="2742084">size</span><span class="op" id="2742088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742092">fl</span>&nbsp;<span class="op" id="2742095">:=</span>&nbsp;<span class="ident" id="2742098">flagAddr</span>&nbsp;<span class="op" id="2742107">|</span>&nbsp;<span class="ident" id="2742109">flagIndir</span>&nbsp;<span class="op" id="2742119">|</span>&nbsp;<span class="ident" id="2742121">v</span><span class="op" id="2742122">.</span><span class="ident" id="2742123">flag</span><span class="op" id="2742127">&amp;</span><span class="ident" id="2742128">flagRO</span>&nbsp;<span class="op" id="2742135">|</span>&nbsp;<span class="ident" id="2742137">flag</span><span class="op" id="2742141">(</span><span class="ident" id="2742142">typ</span><span class="op" id="2742145">.</span><span class="ident" id="2742146">Kind</span><span class="op" id="2742150">(</span><span class="op" id="2742151">)</span><span class="op" id="2742152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742156">return</span>&nbsp;<span class="ident" id="2742163">Value</span><span class="op" id="2742168">{</span><span class="ident" id="2742169">typ</span><span class="op" id="2742172">,</span>&nbsp;<span class="ident" id="2742174">val</span><span class="op" id="2742177">,</span>&nbsp;<span class="ident" id="2742179">fl</span><span class="op" id="2742181">}</span><br>
<span class="lineno">825</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742185">case</span>&nbsp;<span class="ident" id="2742190">String</span><span class="op" id="2742196">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742200">s</span>&nbsp;<span class="op" id="2742202">:=</span>&nbsp;<span class="op" id="2742205">(</span><span class="op" id="2742206">*</span><span class="ident" id="2742207">stringHeader</span><span class="op" id="2742219">)</span><span class="op" id="2742220">(</span><span class="ident" id="2742221">v</span><span class="op" id="2742222">.</span><span class="ident" id="2742223">ptr</span><span class="op" id="2742226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742230">if</span>&nbsp;<span class="builtintype" id="2742233">uint</span><span class="op" id="2742237">(</span><span class="ident" id="2742238">i</span><span class="op" id="2742239">)</span>&nbsp;<span class="op" id="2742241">&gt;=</span>&nbsp;<span class="builtintype" id="2742244">uint</span><span class="op" id="2742248">(</span><span class="ident" id="2742249">s</span><span class="op" id="2742250">.</span><span class="ident" id="2742251">Len</span><span class="op" id="2742254">)</span>&nbsp;<span class="op" id="2742256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2742261">panic</span><span class="op" id="2742266">(</span><span class="string" id="2742267">&#34;reflect:&nbsp;string&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2742303">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2742307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742311">p</span>&nbsp;<span class="op" id="2742313">:=</span>&nbsp;<span class="ident" id="2742316">unsafe</span><span class="op" id="2742322">.</span><span class="ident" id="2742323">Pointer</span><span class="op" id="2742330">(</span><span class="builtintype" id="2742331">uintptr</span><span class="op" id="2742338">(</span><span class="ident" id="2742339">s</span><span class="op" id="2742340">.</span><span class="ident" id="2742341">Data</span><span class="op" id="2742345">)</span>&nbsp;<span class="op" id="2742347">+</span>&nbsp;<span class="builtintype" id="2742349">uintptr</span><span class="op" id="2742356">(</span><span class="ident" id="2742357">i</span><span class="op" id="2742358">)</span><span class="op" id="2742359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742363">fl</span>&nbsp;<span class="op" id="2742366">:=</span>&nbsp;<span class="ident" id="2742369">v</span><span class="op" id="2742370">.</span><span class="ident" id="2742371">flag</span><span class="op" id="2742375">&amp;</span><span class="ident" id="2742376">flagRO</span>&nbsp;<span class="op" id="2742383">|</span>&nbsp;<span class="ident" id="2742385">flag</span><span class="op" id="2742389">(</span><span class="ident" id="2742390">Uint8</span><span class="op" id="2742395">)</span>&nbsp;<span class="op" id="2742397">|</span>&nbsp;<span class="ident" id="2742399">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742411">return</span>&nbsp;<span class="ident" id="2742418">Value</span><span class="op" id="2742423">{</span><span class="ident" id="2742424">uint8Type</span><span class="op" id="2742433">,</span>&nbsp;<span class="ident" id="2742435">p</span><span class="op" id="2742436">,</span>&nbsp;<span class="ident" id="2742438">fl</span><span class="op" id="2742440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2742443">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2742446">panic</span><span class="op" id="2742451">(</span><span class="op" id="2742452">&amp;</span><span class="ident" id="2742453">ValueError</span><span class="op" id="2742463">{</span><span class="string" id="2742464">&#34;reflect.Value.Index&#34;</span><span class="op" id="2742485">,</span>&nbsp;<span class="ident" id="2742487">v</span><span class="op" id="2742488">.</span><span class="ident" id="2742489">kind</span><span class="op" id="2742493">(</span><span class="op" id="2742494">)</span><span class="op" id="2742495">}</span><span class="op" id="2742496">)</span><br>
<span class="lineno"></span><span class="op" id="2742498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2742501">//&nbsp;Int&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno"></span><span class="comment" id="2742551">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno">840</span><span class="keyword" id="2742618">func</span>&nbsp;<span class="op" id="2742623">(</span><span class="ident" id="2742624">v</span>&nbsp;<span class="ident" id="2742626">Value</span><span class="op" id="2742631">)</span>&nbsp;<span class="ident" id="2742633">Int</span><span class="op" id="2742636">(</span><span class="op" id="2742637">)</span>&nbsp;<span class="ident" id="2742639">int64</span>&nbsp;<span class="op" id="2742645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742648">k</span>&nbsp;<span class="op" id="2742650">:=</span>&nbsp;<span class="ident" id="2742653">v</span><span class="op" id="2742654">.</span><span class="ident" id="2742655">kind</span><span class="op" id="2742659">(</span><span class="op" id="2742660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2742663">p</span>&nbsp;<span class="op" id="2742665">:=</span>&nbsp;<span class="ident" id="2742668">v</span><span class="op" id="2742669">.</span><span class="ident" id="2742670">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742675">switch</span>&nbsp;<span class="ident" id="2742682">k</span>&nbsp;<span class="op" id="2742684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742687">case</span>&nbsp;<span class="ident" id="2742692">Int</span><span class="op" id="2742695">:</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742699">return</span>&nbsp;<span class="ident" id="2742706">int64</span><span class="op" id="2742711">(</span><span class="op" id="2742712">*</span><span class="op" id="2742713">(</span><span class="op" id="2742714">*</span><span class="builtintype" id="2742715">int</span><span class="op" id="2742718">)</span><span class="op" id="2742719">(</span><span class="ident" id="2742720">p</span><span class="op" id="2742721">)</span><span class="op" id="2742722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742725">case</span>&nbsp;<span class="ident" id="2742730">Int8</span><span class="op" id="2742734">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742738">return</span>&nbsp;<span class="ident" id="2742745">int64</span><span class="op" id="2742750">(</span><span class="op" id="2742751">*</span><span class="op" id="2742752">(</span><span class="op" id="2742753">*</span><span class="builtintype" id="2742754">int8</span><span class="op" id="2742758">)</span><span class="op" id="2742759">(</span><span class="ident" id="2742760">p</span><span class="op" id="2742761">)</span><span class="op" id="2742762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742765">case</span>&nbsp;<span class="ident" id="2742770">Int16</span><span class="op" id="2742775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742779">return</span>&nbsp;<span class="ident" id="2742786">int64</span><span class="op" id="2742791">(</span><span class="op" id="2742792">*</span><span class="op" id="2742793">(</span><span class="op" id="2742794">*</span><span class="builtintype" id="2742795">int16</span><span class="op" id="2742800">)</span><span class="op" id="2742801">(</span><span class="ident" id="2742802">p</span><span class="op" id="2742803">)</span><span class="op" id="2742804">)</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742807">case</span>&nbsp;<span class="ident" id="2742812">Int32</span><span class="op" id="2742817">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742821">return</span>&nbsp;<span class="ident" id="2742828">int64</span><span class="op" id="2742833">(</span><span class="op" id="2742834">*</span><span class="op" id="2742835">(</span><span class="op" id="2742836">*</span><span class="builtintype" id="2742837">int32</span><span class="op" id="2742842">)</span><span class="op" id="2742843">(</span><span class="ident" id="2742844">p</span><span class="op" id="2742845">)</span><span class="op" id="2742846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742849">case</span>&nbsp;<span class="ident" id="2742854">Int64</span><span class="op" id="2742859">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2742863">return</span>&nbsp;<span class="ident" id="2742870">int64</span><span class="op" id="2742875">(</span><span class="op" id="2742876">*</span><span class="op" id="2742877">(</span><span class="op" id="2742878">*</span><span class="ident" id="2742879">int64</span><span class="op" id="2742884">)</span><span class="op" id="2742885">(</span><span class="ident" id="2742886">p</span><span class="op" id="2742887">)</span><span class="op" id="2742888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2742891">}</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2742894">panic</span><span class="op" id="2742899">(</span><span class="op" id="2742900">&amp;</span><span class="ident" id="2742901">ValueError</span><span class="op" id="2742911">{</span><span class="string" id="2742912">&#34;reflect.Value.Int&#34;</span><span class="op" id="2742931">,</span>&nbsp;<span class="ident" id="2742933">v</span><span class="op" id="2742934">.</span><span class="ident" id="2742935">kind</span><span class="op" id="2742939">(</span><span class="op" id="2742940">)</span><span class="op" id="2742941">}</span><span class="op" id="2742942">)</span><br>
<span class="lineno"></span><span class="op" id="2742944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2742947">//&nbsp;CanInterface&nbsp;returns&nbsp;true&nbsp;if&nbsp;Interface&nbsp;can&nbsp;be&nbsp;used&nbsp;without&nbsp;panicking.</span><br>
<span class="lineno"></span><span class="keyword" id="2743020">func</span>&nbsp;<span class="op" id="2743025">(</span><span class="ident" id="2743026">v</span>&nbsp;<span class="ident" id="2743028">Value</span><span class="op" id="2743033">)</span>&nbsp;<span class="ident" id="2743035">CanInterface</span><span class="op" id="2743047">(</span><span class="op" id="2743048">)</span>&nbsp;<span class="builtintype" id="2743050">bool</span>&nbsp;<span class="op" id="2743055">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743058">if</span>&nbsp;<span class="ident" id="2743061">v</span><span class="op" id="2743062">.</span><span class="ident" id="2743063">flag</span>&nbsp;<span class="op" id="2743068">==</span>&nbsp;<span class="num" id="2743071">0</span>&nbsp;<span class="op" id="2743073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2743077">panic</span><span class="op" id="2743082">(</span><span class="op" id="2743083">&amp;</span><span class="ident" id="2743084">ValueError</span><span class="op" id="2743094">{</span><span class="string" id="2743095">&#34;reflect.Value.CanInterface&#34;</span><span class="op" id="2743123">,</span>&nbsp;<span class="ident" id="2743125">Invalid</span><span class="op" id="2743132">}</span><span class="op" id="2743133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743136">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743139">return</span>&nbsp;<span class="ident" id="2743146">v</span><span class="op" id="2743147">.</span><span class="ident" id="2743148">flag</span><span class="op" id="2743152">&amp;</span><span class="ident" id="2743153">flagRO</span>&nbsp;<span class="op" id="2743160">==</span>&nbsp;<span class="num" id="2743163">0</span><br>
<span class="lineno"></span><span class="op" id="2743165">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="comment" id="2743168">//&nbsp;Interface&nbsp;returns&nbsp;v&#39;s&nbsp;current&nbsp;value&nbsp;as&nbsp;an&nbsp;interface{}.</span><br>
<span class="lineno"></span><span class="comment" id="2743226">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to:</span><br>
<span class="lineno"></span><span class="comment" id="2743250">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;i&nbsp;interface{}&nbsp;=&nbsp;(v&#39;s&nbsp;underlying&nbsp;value)</span><br>
<span class="lineno"></span><span class="comment" id="2743296">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;the&nbsp;Value&nbsp;was&nbsp;obtained&nbsp;by&nbsp;accessing</span><br>
<span class="lineno">870</span><span class="comment" id="2743348">//&nbsp;unexported&nbsp;struct&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="2743377">func</span>&nbsp;<span class="op" id="2743382">(</span><span class="ident" id="2743383">v</span>&nbsp;<span class="ident" id="2743385">Value</span><span class="op" id="2743390">)</span>&nbsp;<span class="ident" id="2743392">Interface</span><span class="op" id="2743401">(</span><span class="op" id="2743402">)</span>&nbsp;<span class="op" id="2743404">(</span><span class="ident" id="2743405">i</span>&nbsp;<span class="keyword" id="2743407">interface</span><span class="op" id="2743416">{</span><span class="op" id="2743417">}</span><span class="op" id="2743418">)</span>&nbsp;<span class="op" id="2743420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743423">return</span>&nbsp;<span class="ident" id="2743430">valueInterface</span><span class="op" id="2743444">(</span><span class="ident" id="2743445">v</span><span class="op" id="2743446">,</span>&nbsp;<span class="builtintype" id="2743448">true</span><span class="op" id="2743452">)</span><br>
<span class="lineno"></span><span class="op" id="2743454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">875</span><span class="keyword" id="2743457">func</span>&nbsp;<span class="ident" id="2743462">valueInterface</span><span class="op" id="2743476">(</span><span class="ident" id="2743477">v</span>&nbsp;<span class="ident" id="2743479">Value</span><span class="op" id="2743484">,</span>&nbsp;<span class="ident" id="2743486">safe</span>&nbsp;<span class="builtintype" id="2743491">bool</span><span class="op" id="2743495">)</span>&nbsp;<span class="keyword" id="2743497">interface</span><span class="op" id="2743506">{</span><span class="op" id="2743507">}</span>&nbsp;<span class="op" id="2743509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743512">if</span>&nbsp;<span class="ident" id="2743515">v</span><span class="op" id="2743516">.</span><span class="ident" id="2743517">flag</span>&nbsp;<span class="op" id="2743522">==</span>&nbsp;<span class="num" id="2743525">0</span>&nbsp;<span class="op" id="2743527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2743531">panic</span><span class="op" id="2743536">(</span><span class="op" id="2743537">&amp;</span><span class="ident" id="2743538">ValueError</span><span class="op" id="2743548">{</span><span class="string" id="2743549">&#34;reflect.Value.Interface&#34;</span><span class="op" id="2743574">,</span>&nbsp;<span class="num" id="2743576">0</span><span class="op" id="2743577">}</span><span class="op" id="2743578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743584">if</span>&nbsp;<span class="ident" id="2743587">safe</span>&nbsp;<span class="op" id="2743592">&amp;&amp;</span>&nbsp;<span class="ident" id="2743595">v</span><span class="op" id="2743596">.</span><span class="ident" id="2743597">flag</span><span class="op" id="2743601">&amp;</span><span class="ident" id="2743602">flagRO</span>&nbsp;<span class="op" id="2743609">!=</span>&nbsp;<span class="num" id="2743612">0</span>&nbsp;<span class="op" id="2743614">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743618">//&nbsp;Do&nbsp;not&nbsp;allow&nbsp;access&nbsp;to&nbsp;unexported&nbsp;values&nbsp;via&nbsp;Interface,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743679">//&nbsp;because&nbsp;they&nbsp;might&nbsp;be&nbsp;pointers&nbsp;that&nbsp;should&nbsp;not&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743734">//&nbsp;writable&nbsp;or&nbsp;methods&nbsp;or&nbsp;function&nbsp;that&nbsp;should&nbsp;not&nbsp;be&nbsp;callable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2743800">panic</span><span class="op" id="2743805">(</span><span class="string" id="2743806">&#34;reflect.Value.Interface:&nbsp;cannot&nbsp;return&nbsp;value&nbsp;obtained&nbsp;from&nbsp;unexported&nbsp;field&nbsp;or&nbsp;method&#34;</span><span class="op" id="2743893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743896">}</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743899">if</span>&nbsp;<span class="ident" id="2743902">v</span><span class="op" id="2743903">.</span><span class="ident" id="2743904">flag</span><span class="op" id="2743908">&amp;</span><span class="ident" id="2743909">flagMethod</span>&nbsp;<span class="op" id="2743920">!=</span>&nbsp;<span class="num" id="2743923">0</span>&nbsp;<span class="op" id="2743925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2743929">v</span>&nbsp;<span class="op" id="2743931">=</span>&nbsp;<span class="ident" id="2743933">makeMethodValue</span><span class="op" id="2743948">(</span><span class="string" id="2743949">&#34;Interface&#34;</span><span class="op" id="2743960">,</span>&nbsp;<span class="ident" id="2743962">v</span><span class="op" id="2743963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2743966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2743970">if</span>&nbsp;<span class="ident" id="2743973">v</span><span class="op" id="2743974">.</span><span class="ident" id="2743975">kind</span><span class="op" id="2743979">(</span><span class="op" id="2743980">)</span>&nbsp;<span class="op" id="2743982">==</span>&nbsp;<span class="ident" id="2743985">Interface</span>&nbsp;<span class="op" id="2743995">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2743999">//&nbsp;Special&nbsp;case:&nbsp;return&nbsp;the&nbsp;element&nbsp;inside&nbsp;the&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744059">//&nbsp;Empty&nbsp;interface&nbsp;has&nbsp;one&nbsp;layout,&nbsp;all&nbsp;interfaces&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744116">//&nbsp;methods&nbsp;have&nbsp;a&nbsp;second&nbsp;layout.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744151">if</span>&nbsp;<span class="ident" id="2744154">v</span><span class="op" id="2744155">.</span><span class="ident" id="2744156">NumMethod</span><span class="op" id="2744165">(</span><span class="op" id="2744166">)</span>&nbsp;<span class="op" id="2744168">==</span>&nbsp;<span class="num" id="2744171">0</span>&nbsp;<span class="op" id="2744173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744178">return</span>&nbsp;<span class="op" id="2744185">*</span><span class="op" id="2744186">(</span><span class="op" id="2744187">*</span><span class="keyword" id="2744188">interface</span><span class="op" id="2744197">{</span><span class="op" id="2744198">}</span><span class="op" id="2744199">)</span><span class="op" id="2744200">(</span><span class="ident" id="2744201">v</span><span class="op" id="2744202">.</span><span class="ident" id="2744203">ptr</span><span class="op" id="2744206">)</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2744210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744214">return</span>&nbsp;<span class="op" id="2744221">*</span><span class="op" id="2744222">(</span><span class="op" id="2744223">*</span><span class="keyword" id="2744224">interface</span>&nbsp;<span class="op" id="2744234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744239">M</span><span class="op" id="2744240">(</span><span class="op" id="2744241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2744245">}</span><span class="op" id="2744246">)</span><span class="op" id="2744247">(</span><span class="ident" id="2744248">v</span><span class="op" id="2744249">.</span><span class="ident" id="2744250">ptr</span><span class="op" id="2744253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2744256">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744260">//&nbsp;TODO:&nbsp;pass&nbsp;safe&nbsp;to&nbsp;packEface&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;copy&nbsp;if&nbsp;safe==true?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744333">return</span>&nbsp;<span class="ident" id="2744340">packEface</span><span class="op" id="2744349">(</span><span class="ident" id="2744350">v</span><span class="op" id="2744351">)</span><br>
<span class="lineno"></span><span class="op" id="2744353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">905</span><span class="comment" id="2744356">//&nbsp;InterfaceData&nbsp;returns&nbsp;the&nbsp;interface&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr&nbsp;pair.</span><br>
<span class="lineno"></span><span class="comment" id="2744424">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="2744467">func</span>&nbsp;<span class="op" id="2744472">(</span><span class="ident" id="2744473">v</span>&nbsp;<span class="ident" id="2744475">Value</span><span class="op" id="2744480">)</span>&nbsp;<span class="ident" id="2744482">InterfaceData</span><span class="op" id="2744495">(</span><span class="op" id="2744496">)</span>&nbsp;<span class="op" id="2744498">[</span><span class="num" id="2744499">2</span><span class="op" id="2744500">]</span><span class="builtintype" id="2744501">uintptr</span>&nbsp;<span class="op" id="2744509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744512">//&nbsp;TODO:&nbsp;deprecate&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2744537">v</span><span class="op" id="2744538">.</span><span class="ident" id="2744539">mustBe</span><span class="op" id="2744545">(</span><span class="ident" id="2744546">Interface</span><span class="op" id="2744555">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744558">//&nbsp;We&nbsp;treat&nbsp;this&nbsp;as&nbsp;a&nbsp;read&nbsp;operation,&nbsp;so&nbsp;we&nbsp;allow</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744609">//&nbsp;it&nbsp;even&nbsp;for&nbsp;unexported&nbsp;data,&nbsp;because&nbsp;the&nbsp;caller</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744661">//&nbsp;has&nbsp;to&nbsp;import&nbsp;&#34;unsafe&#34;&nbsp;to&nbsp;turn&nbsp;it&nbsp;into&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744714">//&nbsp;that&nbsp;can&nbsp;be&nbsp;abused.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2744738">//&nbsp;Interface&nbsp;value&nbsp;is&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2744806">return</span>&nbsp;<span class="op" id="2744813">*</span><span class="op" id="2744814">(</span><span class="op" id="2744815">*</span><span class="op" id="2744816">[</span><span class="num" id="2744817">2</span><span class="op" id="2744818">]</span><span class="builtintype" id="2744819">uintptr</span><span class="op" id="2744826">)</span><span class="op" id="2744827">(</span><span class="ident" id="2744828">v</span><span class="op" id="2744829">.</span><span class="ident" id="2744830">ptr</span><span class="op" id="2744833">)</span><br>
<span class="lineno"></span><span class="op" id="2744835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2744838">//&nbsp;IsNil&nbsp;reports&nbsp;whether&nbsp;its&nbsp;argument&nbsp;v&nbsp;is&nbsp;nil.&nbsp;The&nbsp;argument&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2744907">//&nbsp;a&nbsp;chan,&nbsp;func,&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice&nbsp;value;&nbsp;if&nbsp;it&nbsp;is</span><br>
<span class="lineno">920</span><span class="comment" id="2744974">//&nbsp;not,&nbsp;IsNil&nbsp;panics.&nbsp;Note&nbsp;that&nbsp;IsNil&nbsp;is&nbsp;not&nbsp;always&nbsp;equivalent&nbsp;to&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2745042">//&nbsp;regular&nbsp;comparison&nbsp;with&nbsp;nil&nbsp;in&nbsp;Go.&nbsp;For&nbsp;example,&nbsp;if&nbsp;v&nbsp;was&nbsp;created</span><br>
<span class="lineno"></span><span class="comment" id="2745110">//&nbsp;by&nbsp;calling&nbsp;ValueOf&nbsp;with&nbsp;an&nbsp;uninitialized&nbsp;interface&nbsp;variable&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2745176">//&nbsp;i==nil&nbsp;will&nbsp;be&nbsp;true&nbsp;but&nbsp;v.IsNil&nbsp;will&nbsp;panic&nbsp;as&nbsp;v&nbsp;will&nbsp;be&nbsp;the&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="2745244">//&nbsp;Value.</span><br>
<span class="lineno">925</span><span class="keyword" id="2745254">func</span>&nbsp;<span class="op" id="2745259">(</span><span class="ident" id="2745260">v</span>&nbsp;<span class="ident" id="2745262">Value</span><span class="op" id="2745267">)</span>&nbsp;<span class="ident" id="2745269">IsNil</span><span class="op" id="2745274">(</span><span class="op" id="2745275">)</span>&nbsp;<span class="builtintype" id="2745277">bool</span>&nbsp;<span class="op" id="2745282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745285">k</span>&nbsp;<span class="op" id="2745287">:=</span>&nbsp;<span class="ident" id="2745290">v</span><span class="op" id="2745291">.</span><span class="ident" id="2745292">kind</span><span class="op" id="2745296">(</span><span class="op" id="2745297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745300">switch</span>&nbsp;<span class="ident" id="2745307">k</span>&nbsp;<span class="op" id="2745309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745312">case</span>&nbsp;<span class="ident" id="2745317">Chan</span><span class="op" id="2745321">,</span>&nbsp;<span class="ident" id="2745323">Func</span><span class="op" id="2745327">,</span>&nbsp;<span class="ident" id="2745329">Map</span><span class="op" id="2745332">,</span>&nbsp;<span class="ident" id="2745334">Ptr</span><span class="op" id="2745337">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745341">if</span>&nbsp;<span class="ident" id="2745344">v</span><span class="op" id="2745345">.</span><span class="ident" id="2745346">flag</span><span class="op" id="2745350">&amp;</span><span class="ident" id="2745351">flagMethod</span>&nbsp;<span class="op" id="2745362">!=</span>&nbsp;<span class="num" id="2745365">0</span>&nbsp;<span class="op" id="2745367">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745372">return</span>&nbsp;<span class="builtintype" id="2745379">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745391">ptr</span>&nbsp;<span class="op" id="2745395">:=</span>&nbsp;<span class="ident" id="2745398">v</span><span class="op" id="2745399">.</span><span class="ident" id="2745400">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745406">if</span>&nbsp;<span class="ident" id="2745409">v</span><span class="op" id="2745410">.</span><span class="ident" id="2745411">flag</span><span class="op" id="2745415">&amp;</span><span class="ident" id="2745416">flagIndir</span>&nbsp;<span class="op" id="2745426">!=</span>&nbsp;<span class="num" id="2745429">0</span>&nbsp;<span class="op" id="2745431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2745436">ptr</span>&nbsp;<span class="op" id="2745440">=</span>&nbsp;<span class="op" id="2745442">*</span><span class="op" id="2745443">(</span><span class="op" id="2745444">*</span><span class="ident" id="2745445">unsafe</span><span class="op" id="2745451">.</span><span class="ident" id="2745452">Pointer</span><span class="op" id="2745459">)</span><span class="op" id="2745460">(</span><span class="ident" id="2745461">ptr</span><span class="op" id="2745464">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745472">return</span>&nbsp;<span class="ident" id="2745479">ptr</span>&nbsp;<span class="op" id="2745483">==</span>&nbsp;<span class="ident" id="2745486">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745491">case</span>&nbsp;<span class="ident" id="2745496">Interface</span><span class="op" id="2745505">,</span>&nbsp;<span class="ident" id="2745507">Slice</span><span class="op" id="2745512">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2745516">//&nbsp;Both&nbsp;interface&nbsp;and&nbsp;slice&nbsp;are&nbsp;nil&nbsp;if&nbsp;first&nbsp;word&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2745574">//&nbsp;Both&nbsp;are&nbsp;always&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2745633">return</span>&nbsp;<span class="op" id="2745640">*</span><span class="op" id="2745641">(</span><span class="op" id="2745642">*</span><span class="ident" id="2745643">unsafe</span><span class="op" id="2745649">.</span><span class="ident" id="2745650">Pointer</span><span class="op" id="2745657">)</span><span class="op" id="2745658">(</span><span class="ident" id="2745659">v</span><span class="op" id="2745660">.</span><span class="ident" id="2745661">ptr</span><span class="op" id="2745664">)</span>&nbsp;<span class="op" id="2745666">==</span>&nbsp;<span class="ident" id="2745669">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2745674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2745677">panic</span><span class="op" id="2745682">(</span><span class="op" id="2745683">&amp;</span><span class="ident" id="2745684">ValueError</span><span class="op" id="2745694">{</span><span class="string" id="2745695">&#34;reflect.Value.IsNil&#34;</span><span class="op" id="2745716">,</span>&nbsp;<span class="ident" id="2745718">v</span><span class="op" id="2745719">.</span><span class="ident" id="2745720">kind</span><span class="op" id="2745724">(</span><span class="op" id="2745725">)</span><span class="op" id="2745726">}</span><span class="op" id="2745727">)</span><br>
<span class="lineno"></span><span class="op" id="2745729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span><span class="comment" id="2745732">//&nbsp;IsValid&nbsp;returns&nbsp;true&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2745781">//&nbsp;It&nbsp;returns&nbsp;false&nbsp;if&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2745825">//&nbsp;If&nbsp;IsValid&nbsp;returns&nbsp;false,&nbsp;all&nbsp;other&nbsp;methods&nbsp;except&nbsp;String&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2745893">//&nbsp;Most&nbsp;functions&nbsp;and&nbsp;methods&nbsp;never&nbsp;return&nbsp;an&nbsp;invalid&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2745954">//&nbsp;If&nbsp;one&nbsp;does,&nbsp;its&nbsp;documentation&nbsp;states&nbsp;the&nbsp;conditions&nbsp;explicitly.</span><br>
<span class="lineno">950</span><span class="keyword" id="2746022">func</span>&nbsp;<span class="op" id="2746027">(</span><span class="ident" id="2746028">v</span>&nbsp;<span class="ident" id="2746030">Value</span><span class="op" id="2746035">)</span>&nbsp;<span class="ident" id="2746037">IsValid</span><span class="op" id="2746044">(</span><span class="op" id="2746045">)</span>&nbsp;<span class="builtintype" id="2746047">bool</span>&nbsp;<span class="op" id="2746052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746055">return</span>&nbsp;<span class="ident" id="2746062">v</span><span class="op" id="2746063">.</span><span class="ident" id="2746064">flag</span>&nbsp;<span class="op" id="2746069">!=</span>&nbsp;<span class="num" id="2746072">0</span><br>
<span class="lineno"></span><span class="op" id="2746074">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2746077">//&nbsp;Kind&nbsp;returns&nbsp;v&#39;s&nbsp;Kind.</span><br>
<span class="lineno">955</span><span class="comment" id="2746103">//&nbsp;If&nbsp;v&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;(IsValid&nbsp;returns&nbsp;false),&nbsp;Kind&nbsp;returns&nbsp;Invalid.</span><br>
<span class="lineno"></span><span class="keyword" id="2746176">func</span>&nbsp;<span class="op" id="2746181">(</span><span class="ident" id="2746182">v</span>&nbsp;<span class="ident" id="2746184">Value</span><span class="op" id="2746189">)</span>&nbsp;<span class="ident" id="2746191">Kind</span><span class="op" id="2746195">(</span><span class="op" id="2746196">)</span>&nbsp;<span class="ident" id="2746198">Kind</span>&nbsp;<span class="op" id="2746203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746206">return</span>&nbsp;<span class="ident" id="2746213">v</span><span class="op" id="2746214">.</span><span class="ident" id="2746215">kind</span><span class="op" id="2746219">(</span><span class="op" id="2746220">)</span><br>
<span class="lineno"></span><span class="op" id="2746222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">960</span><span class="comment" id="2746225">//&nbsp;Len&nbsp;returns&nbsp;v&#39;s&nbsp;length.</span><br>
<span class="lineno"></span><span class="comment" id="2746252">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Chan,&nbsp;Map,&nbsp;Slice,&nbsp;or&nbsp;String.</span><br>
<span class="lineno"></span><span class="keyword" id="2746320">func</span>&nbsp;<span class="op" id="2746325">(</span><span class="ident" id="2746326">v</span>&nbsp;<span class="ident" id="2746328">Value</span><span class="op" id="2746333">)</span>&nbsp;<span class="ident" id="2746335">Len</span><span class="op" id="2746338">(</span><span class="op" id="2746339">)</span>&nbsp;<span class="builtintype" id="2746341">int</span>&nbsp;<span class="op" id="2746345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746348">k</span>&nbsp;<span class="op" id="2746350">:=</span>&nbsp;<span class="ident" id="2746353">v</span><span class="op" id="2746354">.</span><span class="ident" id="2746355">kind</span><span class="op" id="2746359">(</span><span class="op" id="2746360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746363">switch</span>&nbsp;<span class="ident" id="2746370">k</span>&nbsp;<span class="op" id="2746372">{</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746375">case</span>&nbsp;<span class="ident" id="2746380">Array</span><span class="op" id="2746385">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2746389">tt</span>&nbsp;<span class="op" id="2746392">:=</span>&nbsp;<span class="op" id="2746395">(</span><span class="op" id="2746396">*</span><span class="ident" id="2746397">arrayType</span><span class="op" id="2746406">)</span><span class="op" id="2746407">(</span><span class="ident" id="2746408">unsafe</span><span class="op" id="2746414">.</span><span class="ident" id="2746415">Pointer</span><span class="op" id="2746422">(</span><span class="ident" id="2746423">v</span><span class="op" id="2746424">.</span><span class="ident" id="2746425">typ</span><span class="op" id="2746428">)</span><span class="op" id="2746429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746433">return</span>&nbsp;<span class="builtintype" id="2746440">int</span><span class="op" id="2746443">(</span><span class="ident" id="2746444">tt</span><span class="op" id="2746446">.</span><span class="builtinfunc" id="2746447">len</span><span class="op" id="2746450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746453">case</span>&nbsp;<span class="ident" id="2746458">Chan</span><span class="op" id="2746462">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746466">return</span>&nbsp;<span class="ident" id="2746473">chanlen</span><span class="op" id="2746480">(</span><span class="ident" id="2746481">v</span><span class="op" id="2746482">.</span><span class="ident" id="2746483">pointer</span><span class="op" id="2746490">(</span><span class="op" id="2746491">)</span><span class="op" id="2746492">)</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746495">case</span>&nbsp;<span class="ident" id="2746500">Map</span><span class="op" id="2746503">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746507">return</span>&nbsp;<span class="ident" id="2746514">maplen</span><span class="op" id="2746520">(</span><span class="ident" id="2746521">v</span><span class="op" id="2746522">.</span><span class="ident" id="2746523">pointer</span><span class="op" id="2746530">(</span><span class="op" id="2746531">)</span><span class="op" id="2746532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746535">case</span>&nbsp;<span class="ident" id="2746540">Slice</span><span class="op" id="2746545">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746549">//&nbsp;Slice&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746601">return</span>&nbsp;<span class="op" id="2746608">(</span><span class="op" id="2746609">*</span><span class="ident" id="2746610">sliceHeader</span><span class="op" id="2746621">)</span><span class="op" id="2746622">(</span><span class="ident" id="2746623">v</span><span class="op" id="2746624">.</span><span class="ident" id="2746625">ptr</span><span class="op" id="2746628">)</span><span class="op" id="2746629">.</span><span class="ident" id="2746630">Len</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746635">case</span>&nbsp;<span class="ident" id="2746640">String</span><span class="op" id="2746646">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2746650">//&nbsp;String&nbsp;is&nbsp;bigger&nbsp;than&nbsp;a&nbsp;word;&nbsp;assume&nbsp;flagIndir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2746703">return</span>&nbsp;<span class="op" id="2746710">(</span><span class="op" id="2746711">*</span><span class="ident" id="2746712">stringHeader</span><span class="op" id="2746724">)</span><span class="op" id="2746725">(</span><span class="ident" id="2746726">v</span><span class="op" id="2746727">.</span><span class="ident" id="2746728">ptr</span><span class="op" id="2746731">)</span><span class="op" id="2746732">.</span><span class="ident" id="2746733">Len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2746738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2746741">panic</span><span class="op" id="2746746">(</span><span class="op" id="2746747">&amp;</span><span class="ident" id="2746748">ValueError</span><span class="op" id="2746758">{</span><span class="string" id="2746759">&#34;reflect.Value.Len&#34;</span><span class="op" id="2746778">,</span>&nbsp;<span class="ident" id="2746780">v</span><span class="op" id="2746781">.</span><span class="ident" id="2746782">kind</span><span class="op" id="2746786">(</span><span class="op" id="2746787">)</span><span class="op" id="2746788">}</span><span class="op" id="2746789">)</span><br>
<span class="lineno">980</span><span class="op" id="2746791">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2746794">//&nbsp;MapIndex&nbsp;returns&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2746858">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2746895">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;key&nbsp;is&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;map&nbsp;or&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno">985</span><span class="comment" id="2746985">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;the&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2747056">func</span>&nbsp;<span class="op" id="2747061">(</span><span class="ident" id="2747062">v</span>&nbsp;<span class="ident" id="2747064">Value</span><span class="op" id="2747069">)</span>&nbsp;<span class="ident" id="2747071">MapIndex</span><span class="op" id="2747079">(</span><span class="ident" id="2747080">key</span>&nbsp;<span class="ident" id="2747084">Value</span><span class="op" id="2747089">)</span>&nbsp;<span class="ident" id="2747091">Value</span>&nbsp;<span class="op" id="2747097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747100">v</span><span class="op" id="2747101">.</span><span class="ident" id="2747102">mustBe</span><span class="op" id="2747108">(</span><span class="ident" id="2747109">Map</span><span class="op" id="2747112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747115">tt</span>&nbsp;<span class="op" id="2747118">:=</span>&nbsp;<span class="op" id="2747121">(</span><span class="op" id="2747122">*</span><span class="ident" id="2747123">mapType</span><span class="op" id="2747130">)</span><span class="op" id="2747131">(</span><span class="ident" id="2747132">unsafe</span><span class="op" id="2747138">.</span><span class="ident" id="2747139">Pointer</span><span class="op" id="2747146">(</span><span class="ident" id="2747147">v</span><span class="op" id="2747148">.</span><span class="ident" id="2747149">typ</span><span class="op" id="2747152">)</span><span class="op" id="2747153">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747157">//&nbsp;Do&nbsp;not&nbsp;require&nbsp;key&nbsp;to&nbsp;be&nbsp;exported,&nbsp;so&nbsp;that&nbsp;DeepEqual</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747214">//&nbsp;and&nbsp;other&nbsp;programs&nbsp;can&nbsp;use&nbsp;all&nbsp;the&nbsp;keys&nbsp;returned&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747270">//&nbsp;MapKeys&nbsp;as&nbsp;arguments&nbsp;to&nbsp;MapIndex.&nbsp;&nbsp;If&nbsp;either&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747327">//&nbsp;or&nbsp;the&nbsp;key&nbsp;is&nbsp;unexported,&nbsp;though,&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747384">//&nbsp;considered&nbsp;unexported.&nbsp;&nbsp;This&nbsp;is&nbsp;consistent&nbsp;with&nbsp;the</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747440">//&nbsp;behavior&nbsp;for&nbsp;structs,&nbsp;which&nbsp;allow&nbsp;read&nbsp;but&nbsp;not&nbsp;write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747497">//&nbsp;of&nbsp;unexported&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747523">key</span>&nbsp;<span class="op" id="2747527">=</span>&nbsp;<span class="ident" id="2747529">key</span><span class="op" id="2747532">.</span><span class="ident" id="2747533">assignTo</span><span class="op" id="2747541">(</span><span class="string" id="2747542">&#34;reflect.Value.MapIndex&#34;</span><span class="op" id="2747566">,</span>&nbsp;<span class="ident" id="2747568">tt</span><span class="op" id="2747570">.</span><span class="ident" id="2747571">key</span><span class="op" id="2747574">,</span>&nbsp;<span class="ident" id="2747576">nil</span><span class="op" id="2747579">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747583">var</span>&nbsp;<span class="ident" id="2747587">k</span>&nbsp;<span class="ident" id="2747589">unsafe</span><span class="op" id="2747595">.</span><span class="ident" id="2747596">Pointer</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747605">if</span>&nbsp;<span class="ident" id="2747608">key</span><span class="op" id="2747611">.</span><span class="ident" id="2747612">flag</span><span class="op" id="2747616">&amp;</span><span class="ident" id="2747617">flagIndir</span>&nbsp;<span class="op" id="2747627">!=</span>&nbsp;<span class="num" id="2747630">0</span>&nbsp;<span class="op" id="2747632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747636">k</span>&nbsp;<span class="op" id="2747638">=</span>&nbsp;<span class="ident" id="2747640">key</span><span class="op" id="2747643">.</span><span class="ident" id="2747644">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747649">}</span>&nbsp;<span class="keyword" id="2747651">else</span>&nbsp;<span class="op" id="2747656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747660">k</span>&nbsp;<span class="op" id="2747662">=</span>&nbsp;<span class="ident" id="2747664">unsafe</span><span class="op" id="2747670">.</span><span class="ident" id="2747671">Pointer</span><span class="op" id="2747678">(</span><span class="op" id="2747679">&amp;</span><span class="ident" id="2747680">key</span><span class="op" id="2747683">.</span><span class="ident" id="2747684">ptr</span><span class="op" id="2747687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747690">}</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747693">e</span>&nbsp;<span class="op" id="2747695">:=</span>&nbsp;<span class="ident" id="2747698">mapaccess</span><span class="op" id="2747707">(</span><span class="ident" id="2747708">v</span><span class="op" id="2747709">.</span><span class="ident" id="2747710">typ</span><span class="op" id="2747713">,</span>&nbsp;<span class="ident" id="2747715">v</span><span class="op" id="2747716">.</span><span class="ident" id="2747717">pointer</span><span class="op" id="2747724">(</span><span class="op" id="2747725">)</span><span class="op" id="2747726">,</span>&nbsp;<span class="ident" id="2747728">k</span><span class="op" id="2747729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747732">if</span>&nbsp;<span class="ident" id="2747735">e</span>&nbsp;<span class="op" id="2747737">==</span>&nbsp;<span class="ident" id="2747740">nil</span>&nbsp;<span class="op" id="2747744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747748">return</span>&nbsp;<span class="ident" id="2747755">Value</span><span class="op" id="2747760">{</span><span class="op" id="2747761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2747764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747767">typ</span>&nbsp;<span class="op" id="2747771">:=</span>&nbsp;<span class="ident" id="2747774">tt</span><span class="op" id="2747776">.</span><span class="ident" id="2747777">elem</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747783">fl</span>&nbsp;<span class="op" id="2747786">:=</span>&nbsp;<span class="op" id="2747789">(</span><span class="ident" id="2747790">v</span><span class="op" id="2747791">.</span><span class="ident" id="2747792">flag</span>&nbsp;<span class="op" id="2747797">|</span>&nbsp;<span class="ident" id="2747799">key</span><span class="op" id="2747802">.</span><span class="ident" id="2747803">flag</span><span class="op" id="2747807">)</span>&nbsp;<span class="op" id="2747809">&amp;</span>&nbsp;<span class="ident" id="2747811">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747819">fl</span>&nbsp;<span class="op" id="2747822">|=</span>&nbsp;<span class="ident" id="2747825">flag</span><span class="op" id="2747829">(</span><span class="ident" id="2747830">typ</span><span class="op" id="2747833">.</span><span class="ident" id="2747834">Kind</span><span class="op" id="2747838">(</span><span class="op" id="2747839">)</span><span class="op" id="2747840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2747843">if</span>&nbsp;<span class="ident" id="2747846">ifaceIndir</span><span class="op" id="2747856">(</span><span class="ident" id="2747857">typ</span><span class="op" id="2747860">)</span>&nbsp;<span class="op" id="2747862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747866">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2747912">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747952">c</span>&nbsp;<span class="op" id="2747954">:=</span>&nbsp;<span class="ident" id="2747957">unsafe_New</span><span class="op" id="2747967">(</span><span class="ident" id="2747968">typ</span><span class="op" id="2747971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2747975">memmove</span><span class="op" id="2747982">(</span><span class="ident" id="2747983">c</span><span class="op" id="2747984">,</span>&nbsp;<span class="ident" id="2747986">e</span><span class="op" id="2747987">,</span>&nbsp;<span class="ident" id="2747989">typ</span><span class="op" id="2747992">.</span><span class="ident" id="2747993">size</span><span class="op" id="2747997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748001">return</span>&nbsp;<span class="ident" id="2748008">Value</span><span class="op" id="2748013">{</span><span class="ident" id="2748014">typ</span><span class="op" id="2748017">,</span>&nbsp;<span class="ident" id="2748019">c</span><span class="op" id="2748020">,</span>&nbsp;<span class="ident" id="2748022">fl</span>&nbsp;<span class="op" id="2748025">|</span>&nbsp;<span class="ident" id="2748027">flagIndir</span><span class="op" id="2748036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748039">}</span>&nbsp;<span class="keyword" id="2748041">else</span>&nbsp;<span class="op" id="2748046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748050">return</span>&nbsp;<span class="ident" id="2748057">Value</span><span class="op" id="2748062">{</span><span class="ident" id="2748063">typ</span><span class="op" id="2748066">,</span>&nbsp;<span class="op" id="2748068">*</span><span class="op" id="2748069">(</span><span class="op" id="2748070">*</span><span class="ident" id="2748071">unsafe</span><span class="op" id="2748077">.</span><span class="ident" id="2748078">Pointer</span><span class="op" id="2748085">)</span><span class="op" id="2748086">(</span><span class="ident" id="2748087">e</span><span class="op" id="2748088">)</span><span class="op" id="2748089">,</span>&nbsp;<span class="ident" id="2748091">fl</span><span class="op" id="2748093">}</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748096">}</span><br>
<span class="lineno"></span><span class="op" id="2748098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2748101">//&nbsp;MapKeys&nbsp;returns&nbsp;a&nbsp;slice&nbsp;containing&nbsp;all&nbsp;the&nbsp;keys&nbsp;present&nbsp;in&nbsp;the&nbsp;map,</span><br>
<span class="lineno"></span><span class="comment" id="2748172">//&nbsp;in&nbsp;unspecified&nbsp;order.</span><br>
<span class="lineno">1025</span><span class="comment" id="2748197">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2748234">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;v&nbsp;represents&nbsp;a&nbsp;nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="2748290">func</span>&nbsp;<span class="op" id="2748295">(</span><span class="ident" id="2748296">v</span>&nbsp;<span class="ident" id="2748298">Value</span><span class="op" id="2748303">)</span>&nbsp;<span class="ident" id="2748305">MapKeys</span><span class="op" id="2748312">(</span><span class="op" id="2748313">)</span>&nbsp;<span class="op" id="2748315">[</span><span class="op" id="2748316">]</span><span class="ident" id="2748317">Value</span>&nbsp;<span class="op" id="2748323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748326">v</span><span class="op" id="2748327">.</span><span class="ident" id="2748328">mustBe</span><span class="op" id="2748334">(</span><span class="ident" id="2748335">Map</span><span class="op" id="2748338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748341">tt</span>&nbsp;<span class="op" id="2748344">:=</span>&nbsp;<span class="op" id="2748347">(</span><span class="op" id="2748348">*</span><span class="ident" id="2748349">mapType</span><span class="op" id="2748356">)</span><span class="op" id="2748357">(</span><span class="ident" id="2748358">unsafe</span><span class="op" id="2748364">.</span><span class="ident" id="2748365">Pointer</span><span class="op" id="2748372">(</span><span class="ident" id="2748373">v</span><span class="op" id="2748374">.</span><span class="ident" id="2748375">typ</span><span class="op" id="2748378">)</span><span class="op" id="2748379">)</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748382">keyType</span>&nbsp;<span class="op" id="2748390">:=</span>&nbsp;<span class="ident" id="2748393">tt</span><span class="op" id="2748395">.</span><span class="ident" id="2748396">key</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748402">fl</span>&nbsp;<span class="op" id="2748405">:=</span>&nbsp;<span class="ident" id="2748408">v</span><span class="op" id="2748409">.</span><span class="ident" id="2748410">flag</span><span class="op" id="2748414">&amp;</span><span class="ident" id="2748415">flagRO</span>&nbsp;<span class="op" id="2748422">|</span>&nbsp;<span class="ident" id="2748424">flag</span><span class="op" id="2748428">(</span><span class="ident" id="2748429">keyType</span><span class="op" id="2748436">.</span><span class="ident" id="2748437">Kind</span><span class="op" id="2748441">(</span><span class="op" id="2748442">)</span><span class="op" id="2748443">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748447">m</span>&nbsp;<span class="op" id="2748449">:=</span>&nbsp;<span class="ident" id="2748452">v</span><span class="op" id="2748453">.</span><span class="ident" id="2748454">pointer</span><span class="op" id="2748461">(</span><span class="op" id="2748462">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748465">mlen</span>&nbsp;<span class="op" id="2748470">:=</span>&nbsp;<span class="builtintype" id="2748473">int</span><span class="op" id="2748476">(</span><span class="num" id="2748477">0</span><span class="op" id="2748478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748481">if</span>&nbsp;<span class="ident" id="2748484">m</span>&nbsp;<span class="op" id="2748486">!=</span>&nbsp;<span class="ident" id="2748489">nil</span>&nbsp;<span class="op" id="2748493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748497">mlen</span>&nbsp;<span class="op" id="2748502">=</span>&nbsp;<span class="ident" id="2748504">maplen</span><span class="op" id="2748510">(</span><span class="ident" id="2748511">m</span><span class="op" id="2748512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748515">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748518">it</span>&nbsp;<span class="op" id="2748521">:=</span>&nbsp;<span class="ident" id="2748524">mapiterinit</span><span class="op" id="2748535">(</span><span class="ident" id="2748536">v</span><span class="op" id="2748537">.</span><span class="ident" id="2748538">typ</span><span class="op" id="2748541">,</span>&nbsp;<span class="ident" id="2748543">m</span><span class="op" id="2748544">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748547">a</span>&nbsp;<span class="op" id="2748549">:=</span>&nbsp;<span class="builtinfunc" id="2748552">make</span><span class="op" id="2748556">(</span><span class="op" id="2748557">[</span><span class="op" id="2748558">]</span><span class="ident" id="2748559">Value</span><span class="op" id="2748564">,</span>&nbsp;<span class="ident" id="2748566">mlen</span><span class="op" id="2748570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748573">var</span>&nbsp;<span class="ident" id="2748577">i</span>&nbsp;<span class="builtintype" id="2748579">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748584">for</span>&nbsp;<span class="ident" id="2748588">i</span>&nbsp;<span class="op" id="2748590">=</span>&nbsp;<span class="num" id="2748592">0</span><span class="op" id="2748593">;</span>&nbsp;<span class="ident" id="2748595">i</span>&nbsp;<span class="op" id="2748597">&lt;</span>&nbsp;<span class="builtinfunc" id="2748599">len</span><span class="op" id="2748602">(</span><span class="ident" id="2748603">a</span><span class="op" id="2748604">)</span><span class="op" id="2748605">;</span>&nbsp;<span class="ident" id="2748607">i</span><span class="op" id="2748608">++</span>&nbsp;<span class="op" id="2748611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748615">key</span>&nbsp;<span class="op" id="2748619">:=</span>&nbsp;<span class="ident" id="2748622">mapiterkey</span><span class="op" id="2748632">(</span><span class="ident" id="2748633">it</span><span class="op" id="2748635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748639">if</span>&nbsp;<span class="ident" id="2748642">key</span>&nbsp;<span class="op" id="2748646">==</span>&nbsp;<span class="ident" id="2748649">nil</span>&nbsp;<span class="op" id="2748653">{</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2748658">//&nbsp;Someone&nbsp;deleted&nbsp;an&nbsp;entry&nbsp;from&nbsp;the&nbsp;map&nbsp;since&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2748711">//&nbsp;called&nbsp;maplen&nbsp;above.&nbsp;&nbsp;It&#39;s&nbsp;a&nbsp;data&nbsp;race,&nbsp;but&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2748769">//&nbsp;we&nbsp;can&nbsp;do&nbsp;about&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748795">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2748803">}</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2748807">if</span>&nbsp;<span class="ident" id="2748810">ifaceIndir</span><span class="op" id="2748820">(</span><span class="ident" id="2748821">keyType</span><span class="op" id="2748828">)</span>&nbsp;<span class="op" id="2748830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2748835">//&nbsp;Copy&nbsp;result&nbsp;so&nbsp;future&nbsp;changes&nbsp;to&nbsp;the&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2748882">//&nbsp;won&#39;t&nbsp;change&nbsp;the&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748923">c</span>&nbsp;<span class="op" id="2748925">:=</span>&nbsp;<span class="ident" id="2748928">unsafe_New</span><span class="op" id="2748938">(</span><span class="ident" id="2748939">keyType</span><span class="op" id="2748946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748951">memmove</span><span class="op" id="2748958">(</span><span class="ident" id="2748959">c</span><span class="op" id="2748960">,</span>&nbsp;<span class="ident" id="2748962">key</span><span class="op" id="2748965">,</span>&nbsp;<span class="ident" id="2748967">keyType</span><span class="op" id="2748974">.</span><span class="ident" id="2748975">size</span><span class="op" id="2748979">)</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2748984">a</span><span class="op" id="2748985">[</span><span class="ident" id="2748986">i</span><span class="op" id="2748987">]</span>&nbsp;<span class="op" id="2748989">=</span>&nbsp;<span class="ident" id="2748991">Value</span><span class="op" id="2748996">{</span><span class="ident" id="2748997">keyType</span><span class="op" id="2749004">,</span>&nbsp;<span class="ident" id="2749006">c</span><span class="op" id="2749007">,</span>&nbsp;<span class="ident" id="2749009">fl</span>&nbsp;<span class="op" id="2749012">|</span>&nbsp;<span class="ident" id="2749014">flagIndir</span><span class="op" id="2749023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749027">}</span>&nbsp;<span class="keyword" id="2749029">else</span>&nbsp;<span class="op" id="2749034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749039">a</span><span class="op" id="2749040">[</span><span class="ident" id="2749041">i</span><span class="op" id="2749042">]</span>&nbsp;<span class="op" id="2749044">=</span>&nbsp;<span class="ident" id="2749046">Value</span><span class="op" id="2749051">{</span><span class="ident" id="2749052">keyType</span><span class="op" id="2749059">,</span>&nbsp;<span class="op" id="2749061">*</span><span class="op" id="2749062">(</span><span class="op" id="2749063">*</span><span class="ident" id="2749064">unsafe</span><span class="op" id="2749070">.</span><span class="ident" id="2749071">Pointer</span><span class="op" id="2749078">)</span><span class="op" id="2749079">(</span><span class="ident" id="2749080">key</span><span class="op" id="2749083">)</span><span class="op" id="2749084">,</span>&nbsp;<span class="ident" id="2749086">fl</span><span class="op" id="2749088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749096">mapiternext</span><span class="op" id="2749107">(</span><span class="ident" id="2749108">it</span><span class="op" id="2749110">)</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749116">return</span>&nbsp;<span class="ident" id="2749123">a</span><span class="op" id="2749124">[</span><span class="op" id="2749125">:</span><span class="ident" id="2749126">i</span><span class="op" id="2749127">]</span><br>
<span class="lineno"></span><span class="op" id="2749129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2749132">//&nbsp;Method&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;v&#39;s&nbsp;i&#39;th&nbsp;method.</span><br>
<span class="lineno">1065</span><span class="comment" id="2749201">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2749272">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2749344">//&nbsp;Method&nbsp;panics&nbsp;if&nbsp;i&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="2749416">func</span>&nbsp;<span class="op" id="2749421">(</span><span class="ident" id="2749422">v</span>&nbsp;<span class="ident" id="2749424">Value</span><span class="op" id="2749429">)</span>&nbsp;<span class="ident" id="2749431">Method</span><span class="op" id="2749437">(</span><span class="ident" id="2749438">i</span>&nbsp;<span class="builtintype" id="2749440">int</span><span class="op" id="2749443">)</span>&nbsp;<span class="ident" id="2749445">Value</span>&nbsp;<span class="op" id="2749451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749454">if</span>&nbsp;<span class="ident" id="2749457">v</span><span class="op" id="2749458">.</span><span class="ident" id="2749459">typ</span>&nbsp;<span class="op" id="2749463">==</span>&nbsp;<span class="ident" id="2749466">nil</span>&nbsp;<span class="op" id="2749470">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2749474">panic</span><span class="op" id="2749479">(</span><span class="op" id="2749480">&amp;</span><span class="ident" id="2749481">ValueError</span><span class="op" id="2749491">{</span><span class="string" id="2749492">&#34;reflect.Value.Method&#34;</span><span class="op" id="2749514">,</span>&nbsp;<span class="ident" id="2749516">Invalid</span><span class="op" id="2749523">}</span><span class="op" id="2749524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749530">if</span>&nbsp;<span class="ident" id="2749533">v</span><span class="op" id="2749534">.</span><span class="ident" id="2749535">flag</span><span class="op" id="2749539">&amp;</span><span class="ident" id="2749540">flagMethod</span>&nbsp;<span class="op" id="2749551">!=</span>&nbsp;<span class="num" id="2749554">0</span>&nbsp;<span class="op" id="2749556">||</span>&nbsp;<span class="builtintype" id="2749559">uint</span><span class="op" id="2749563">(</span><span class="ident" id="2749564">i</span><span class="op" id="2749565">)</span>&nbsp;<span class="op" id="2749567">&gt;=</span>&nbsp;<span class="builtintype" id="2749570">uint</span><span class="op" id="2749574">(</span><span class="ident" id="2749575">v</span><span class="op" id="2749576">.</span><span class="ident" id="2749577">typ</span><span class="op" id="2749580">.</span><span class="ident" id="2749581">NumMethod</span><span class="op" id="2749590">(</span><span class="op" id="2749591">)</span><span class="op" id="2749592">)</span>&nbsp;<span class="op" id="2749594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2749598">panic</span><span class="op" id="2749603">(</span><span class="string" id="2749604">&#34;reflect:&nbsp;Method&nbsp;index&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="2749640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749643">}</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749646">if</span>&nbsp;<span class="ident" id="2749649">v</span><span class="op" id="2749650">.</span><span class="ident" id="2749651">typ</span><span class="op" id="2749654">.</span><span class="ident" id="2749655">Kind</span><span class="op" id="2749659">(</span><span class="op" id="2749660">)</span>&nbsp;<span class="op" id="2749662">==</span>&nbsp;<span class="ident" id="2749665">Interface</span>&nbsp;<span class="op" id="2749675">&amp;&amp;</span>&nbsp;<span class="ident" id="2749678">v</span><span class="op" id="2749679">.</span><span class="ident" id="2749680">IsNil</span><span class="op" id="2749685">(</span><span class="op" id="2749686">)</span>&nbsp;<span class="op" id="2749688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2749692">panic</span><span class="op" id="2749697">(</span><span class="string" id="2749698">&#34;reflect:&nbsp;Method&nbsp;on&nbsp;nil&nbsp;interface&nbsp;value&#34;</span><span class="op" id="2749738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2749741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749744">fl</span>&nbsp;<span class="op" id="2749747">:=</span>&nbsp;<span class="ident" id="2749750">v</span><span class="op" id="2749751">.</span><span class="ident" id="2749752">flag</span>&nbsp;<span class="op" id="2749757">&amp;</span>&nbsp;<span class="op" id="2749759">(</span><span class="ident" id="2749760">flagRO</span>&nbsp;<span class="op" id="2749767">|</span>&nbsp;<span class="ident" id="2749769">flagIndir</span><span class="op" id="2749778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749781">fl</span>&nbsp;<span class="op" id="2749784">|=</span>&nbsp;<span class="ident" id="2749787">flag</span><span class="op" id="2749791">(</span><span class="ident" id="2749792">Func</span><span class="op" id="2749796">)</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2749799">fl</span>&nbsp;<span class="op" id="2749802">|=</span>&nbsp;<span class="ident" id="2749805">flag</span><span class="op" id="2749809">(</span><span class="ident" id="2749810">i</span><span class="op" id="2749811">)</span><span class="op" id="2749812">&lt;&lt;</span><span class="ident" id="2749814">flagMethodShift</span>&nbsp;<span class="op" id="2749830">|</span>&nbsp;<span class="ident" id="2749832">flagMethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749844">return</span>&nbsp;<span class="ident" id="2749851">Value</span><span class="op" id="2749856">{</span><span class="ident" id="2749857">v</span><span class="op" id="2749858">.</span><span class="ident" id="2749859">typ</span><span class="op" id="2749862">,</span>&nbsp;<span class="ident" id="2749864">v</span><span class="op" id="2749865">.</span><span class="ident" id="2749866">ptr</span><span class="op" id="2749869">,</span>&nbsp;<span class="ident" id="2749871">fl</span><span class="op" id="2749873">}</span><br>
<span class="lineno"></span><span class="op" id="2749875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2749878">//&nbsp;NumMethod&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;methods&nbsp;in&nbsp;the&nbsp;value&#39;s&nbsp;method&nbsp;set.</span><br>
<span class="lineno">1085</span><span class="keyword" id="2749948">func</span>&nbsp;<span class="op" id="2749953">(</span><span class="ident" id="2749954">v</span>&nbsp;<span class="ident" id="2749956">Value</span><span class="op" id="2749961">)</span>&nbsp;<span class="ident" id="2749963">NumMethod</span><span class="op" id="2749972">(</span><span class="op" id="2749973">)</span>&nbsp;<span class="builtintype" id="2749975">int</span>&nbsp;<span class="op" id="2749979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2749982">if</span>&nbsp;<span class="ident" id="2749985">v</span><span class="op" id="2749986">.</span><span class="ident" id="2749987">typ</span>&nbsp;<span class="op" id="2749991">==</span>&nbsp;<span class="ident" id="2749994">nil</span>&nbsp;<span class="op" id="2749998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2750002">panic</span><span class="op" id="2750007">(</span><span class="op" id="2750008">&amp;</span><span class="ident" id="2750009">ValueError</span><span class="op" id="2750019">{</span><span class="string" id="2750020">&#34;reflect.Value.NumMethod&#34;</span><span class="op" id="2750045">,</span>&nbsp;<span class="ident" id="2750047">Invalid</span><span class="op" id="2750054">}</span><span class="op" id="2750055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750061">if</span>&nbsp;<span class="ident" id="2750064">v</span><span class="op" id="2750065">.</span><span class="ident" id="2750066">flag</span><span class="op" id="2750070">&amp;</span><span class="ident" id="2750071">flagMethod</span>&nbsp;<span class="op" id="2750082">!=</span>&nbsp;<span class="num" id="2750085">0</span>&nbsp;<span class="op" id="2750087">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750091">return</span>&nbsp;<span class="num" id="2750098">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750104">return</span>&nbsp;<span class="ident" id="2750111">v</span><span class="op" id="2750112">.</span><span class="ident" id="2750113">typ</span><span class="op" id="2750116">.</span><span class="ident" id="2750117">NumMethod</span><span class="op" id="2750126">(</span><span class="op" id="2750127">)</span><br>
<span class="lineno"></span><span class="op" id="2750129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span><span class="comment" id="2750132">//&nbsp;MethodByName&nbsp;returns&nbsp;a&nbsp;function&nbsp;value&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span><span class="comment" id="2750201">//&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="2750230">//&nbsp;The&nbsp;arguments&nbsp;to&nbsp;a&nbsp;Call&nbsp;on&nbsp;the&nbsp;returned&nbsp;function&nbsp;should&nbsp;not&nbsp;include</span><br>
<span class="lineno"></span><span class="comment" id="2750301">//&nbsp;a&nbsp;receiver;&nbsp;the&nbsp;returned&nbsp;function&nbsp;will&nbsp;always&nbsp;use&nbsp;v&nbsp;as&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="2750373">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value&nbsp;if&nbsp;no&nbsp;method&nbsp;was&nbsp;found.</span><br>
<span class="lineno">1100</span><span class="keyword" id="2750426">func</span>&nbsp;<span class="op" id="2750431">(</span><span class="ident" id="2750432">v</span>&nbsp;<span class="ident" id="2750434">Value</span><span class="op" id="2750439">)</span>&nbsp;<span class="ident" id="2750441">MethodByName</span><span class="op" id="2750453">(</span><span class="ident" id="2750454">name</span>&nbsp;<span class="builtintype" id="2750459">string</span><span class="op" id="2750465">)</span>&nbsp;<span class="ident" id="2750467">Value</span>&nbsp;<span class="op" id="2750473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750476">if</span>&nbsp;<span class="ident" id="2750479">v</span><span class="op" id="2750480">.</span><span class="ident" id="2750481">typ</span>&nbsp;<span class="op" id="2750485">==</span>&nbsp;<span class="ident" id="2750488">nil</span>&nbsp;<span class="op" id="2750492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2750496">panic</span><span class="op" id="2750501">(</span><span class="op" id="2750502">&amp;</span><span class="ident" id="2750503">ValueError</span><span class="op" id="2750513">{</span><span class="string" id="2750514">&#34;reflect.Value.MethodByName&#34;</span><span class="op" id="2750542">,</span>&nbsp;<span class="ident" id="2750544">Invalid</span><span class="op" id="2750551">}</span><span class="op" id="2750552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750558">if</span>&nbsp;<span class="ident" id="2750561">v</span><span class="op" id="2750562">.</span><span class="ident" id="2750563">flag</span><span class="op" id="2750567">&amp;</span><span class="ident" id="2750568">flagMethod</span>&nbsp;<span class="op" id="2750579">!=</span>&nbsp;<span class="num" id="2750582">0</span>&nbsp;<span class="op" id="2750584">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750588">return</span>&nbsp;<span class="ident" id="2750595">Value</span><span class="op" id="2750600">{</span><span class="op" id="2750601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750607">m</span><span class="op" id="2750608">,</span>&nbsp;<span class="ident" id="2750610">ok</span>&nbsp;<span class="op" id="2750613">:=</span>&nbsp;<span class="ident" id="2750616">v</span><span class="op" id="2750617">.</span><span class="ident" id="2750618">typ</span><span class="op" id="2750621">.</span><span class="ident" id="2750622">MethodByName</span><span class="op" id="2750634">(</span><span class="ident" id="2750635">name</span><span class="op" id="2750639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750642">if</span>&nbsp;<span class="op" id="2750645">!</span><span class="ident" id="2750646">ok</span>&nbsp;<span class="op" id="2750649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750653">return</span>&nbsp;<span class="ident" id="2750660">Value</span><span class="op" id="2750665">{</span><span class="op" id="2750666">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2750669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750672">return</span>&nbsp;<span class="ident" id="2750679">v</span><span class="op" id="2750680">.</span><span class="ident" id="2750681">Method</span><span class="op" id="2750687">(</span><span class="ident" id="2750688">m</span><span class="op" id="2750689">.</span><span class="ident" id="2750690">Index</span><span class="op" id="2750695">)</span><br>
<span class="lineno"></span><span class="op" id="2750697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2750700">//&nbsp;NumField&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;struct&nbsp;v.</span><br>
<span class="lineno">1115</span><span class="comment" id="2750758">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Struct.</span><br>
<span class="lineno"></span><span class="keyword" id="2750798">func</span>&nbsp;<span class="op" id="2750803">(</span><span class="ident" id="2750804">v</span>&nbsp;<span class="ident" id="2750806">Value</span><span class="op" id="2750811">)</span>&nbsp;<span class="ident" id="2750813">NumField</span><span class="op" id="2750821">(</span><span class="op" id="2750822">)</span>&nbsp;<span class="builtintype" id="2750824">int</span>&nbsp;<span class="op" id="2750828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750831">v</span><span class="op" id="2750832">.</span><span class="ident" id="2750833">mustBe</span><span class="op" id="2750839">(</span><span class="ident" id="2750840">Struct</span><span class="op" id="2750846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2750849">tt</span>&nbsp;<span class="op" id="2750852">:=</span>&nbsp;<span class="op" id="2750855">(</span><span class="op" id="2750856">*</span><span class="ident" id="2750857">structType</span><span class="op" id="2750867">)</span><span class="op" id="2750868">(</span><span class="ident" id="2750869">unsafe</span><span class="op" id="2750875">.</span><span class="ident" id="2750876">Pointer</span><span class="op" id="2750883">(</span><span class="ident" id="2750884">v</span><span class="op" id="2750885">.</span><span class="ident" id="2750886">typ</span><span class="op" id="2750889">)</span><span class="op" id="2750890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2750893">return</span>&nbsp;<span class="builtinfunc" id="2750900">len</span><span class="op" id="2750903">(</span><span class="ident" id="2750904">tt</span><span class="op" id="2750906">.</span><span class="ident" id="2750907">fields</span><span class="op" id="2750913">)</span><br>
<span class="lineno">1120</span><span class="op" id="2750915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2750918">//&nbsp;OverflowComplex&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;complex128&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2751005">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128.</span><br>
<span class="lineno"></span><span class="keyword" id="2751062">func</span>&nbsp;<span class="op" id="2751067">(</span><span class="ident" id="2751068">v</span>&nbsp;<span class="ident" id="2751070">Value</span><span class="op" id="2751075">)</span>&nbsp;<span class="ident" id="2751077">OverflowComplex</span><span class="op" id="2751092">(</span><span class="ident" id="2751093">x</span>&nbsp;<span class="builtintype" id="2751095">complex128</span><span class="op" id="2751105">)</span>&nbsp;<span class="builtintype" id="2751107">bool</span>&nbsp;<span class="op" id="2751112">{</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751115">k</span>&nbsp;<span class="op" id="2751117">:=</span>&nbsp;<span class="ident" id="2751120">v</span><span class="op" id="2751121">.</span><span class="ident" id="2751122">kind</span><span class="op" id="2751126">(</span><span class="op" id="2751127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751130">switch</span>&nbsp;<span class="ident" id="2751137">k</span>&nbsp;<span class="op" id="2751139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751142">case</span>&nbsp;<span class="ident" id="2751147">Complex64</span><span class="op" id="2751156">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751160">return</span>&nbsp;<span class="ident" id="2751167">overflowFloat32</span><span class="op" id="2751182">(</span><span class="builtinfunc" id="2751183">real</span><span class="op" id="2751187">(</span><span class="ident" id="2751188">x</span><span class="op" id="2751189">)</span><span class="op" id="2751190">)</span>&nbsp;<span class="op" id="2751192">||</span>&nbsp;<span class="ident" id="2751195">overflowFloat32</span><span class="op" id="2751210">(</span><span class="builtinfunc" id="2751211">imag</span><span class="op" id="2751215">(</span><span class="ident" id="2751216">x</span><span class="op" id="2751217">)</span><span class="op" id="2751218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751221">case</span>&nbsp;<span class="ident" id="2751226">Complex128</span><span class="op" id="2751236">:</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751240">return</span>&nbsp;<span class="builtintype" id="2751247">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2751257">panic</span><span class="op" id="2751262">(</span><span class="op" id="2751263">&amp;</span><span class="ident" id="2751264">ValueError</span><span class="op" id="2751274">{</span><span class="string" id="2751275">&#34;reflect.Value.OverflowComplex&#34;</span><span class="op" id="2751306">,</span>&nbsp;<span class="ident" id="2751308">v</span><span class="op" id="2751309">.</span><span class="ident" id="2751310">kind</span><span class="op" id="2751314">(</span><span class="op" id="2751315">)</span><span class="op" id="2751316">}</span><span class="op" id="2751317">)</span><br>
<span class="lineno"></span><span class="op" id="2751319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1135</span><span class="comment" id="2751322">//&nbsp;OverflowFloat&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;float64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2751404">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64.</span><br>
<span class="lineno"></span><span class="keyword" id="2751456">func</span>&nbsp;<span class="op" id="2751461">(</span><span class="ident" id="2751462">v</span>&nbsp;<span class="ident" id="2751464">Value</span><span class="op" id="2751469">)</span>&nbsp;<span class="ident" id="2751471">OverflowFloat</span><span class="op" id="2751484">(</span><span class="ident" id="2751485">x</span>&nbsp;<span class="builtintype" id="2751487">float64</span><span class="op" id="2751494">)</span>&nbsp;<span class="builtintype" id="2751496">bool</span>&nbsp;<span class="op" id="2751501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751504">k</span>&nbsp;<span class="op" id="2751506">:=</span>&nbsp;<span class="ident" id="2751509">v</span><span class="op" id="2751510">.</span><span class="ident" id="2751511">kind</span><span class="op" id="2751515">(</span><span class="op" id="2751516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751519">switch</span>&nbsp;<span class="ident" id="2751526">k</span>&nbsp;<span class="op" id="2751528">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751531">case</span>&nbsp;<span class="ident" id="2751536">Float32</span><span class="op" id="2751543">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751547">return</span>&nbsp;<span class="ident" id="2751554">overflowFloat32</span><span class="op" id="2751569">(</span><span class="ident" id="2751570">x</span><span class="op" id="2751571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751574">case</span>&nbsp;<span class="ident" id="2751579">Float64</span><span class="op" id="2751586">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751590">return</span>&nbsp;<span class="builtintype" id="2751597">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751604">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2751607">panic</span><span class="op" id="2751612">(</span><span class="op" id="2751613">&amp;</span><span class="ident" id="2751614">ValueError</span><span class="op" id="2751624">{</span><span class="string" id="2751625">&#34;reflect.Value.OverflowFloat&#34;</span><span class="op" id="2751654">,</span>&nbsp;<span class="ident" id="2751656">v</span><span class="op" id="2751657">.</span><span class="ident" id="2751658">kind</span><span class="op" id="2751662">(</span><span class="op" id="2751663">)</span><span class="op" id="2751664">}</span><span class="op" id="2751665">)</span><br>
<span class="lineno"></span><span class="op" id="2751667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2751670">func</span>&nbsp;<span class="ident" id="2751675">overflowFloat32</span><span class="op" id="2751690">(</span><span class="ident" id="2751691">x</span>&nbsp;<span class="builtintype" id="2751693">float64</span><span class="op" id="2751700">)</span>&nbsp;<span class="builtintype" id="2751702">bool</span>&nbsp;<span class="op" id="2751707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751710">if</span>&nbsp;<span class="ident" id="2751713">x</span>&nbsp;<span class="op" id="2751715">&lt;</span>&nbsp;<span class="num" id="2751717">0</span>&nbsp;<span class="op" id="2751719">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751723">x</span>&nbsp;<span class="op" id="2751725">=</span>&nbsp;<span class="op" id="2751727">-</span><span class="ident" id="2751728">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2751731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751734">return</span>&nbsp;<span class="ident" id="2751741">math</span><span class="op" id="2751745">.</span><span class="ident" id="2751746">MaxFloat32</span>&nbsp;<span class="op" id="2751757">&lt;</span>&nbsp;<span class="ident" id="2751759">x</span>&nbsp;<span class="op" id="2751761">&amp;&amp;</span>&nbsp;<span class="ident" id="2751764">x</span>&nbsp;<span class="op" id="2751766">&lt;=</span>&nbsp;<span class="ident" id="2751769">math</span><span class="op" id="2751773">.</span><span class="ident" id="2751774">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="2751785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1155</span><span class="comment" id="2751788">//&nbsp;OverflowInt&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;int64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2751866">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;int16,&nbsp;Int32,&nbsp;or&nbsp;Int64.</span><br>
<span class="lineno"></span><span class="keyword" id="2751933">func</span>&nbsp;<span class="op" id="2751938">(</span><span class="ident" id="2751939">v</span>&nbsp;<span class="ident" id="2751941">Value</span><span class="op" id="2751946">)</span>&nbsp;<span class="ident" id="2751948">OverflowInt</span><span class="op" id="2751959">(</span><span class="ident" id="2751960">x</span>&nbsp;<span class="ident" id="2751962">int64</span><span class="op" id="2751967">)</span>&nbsp;<span class="builtintype" id="2751969">bool</span>&nbsp;<span class="op" id="2751974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2751977">k</span>&nbsp;<span class="op" id="2751979">:=</span>&nbsp;<span class="ident" id="2751982">v</span><span class="op" id="2751983">.</span><span class="ident" id="2751984">kind</span><span class="op" id="2751988">(</span><span class="op" id="2751989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2751992">switch</span>&nbsp;<span class="ident" id="2751999">k</span>&nbsp;<span class="op" id="2752001">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752004">case</span>&nbsp;<span class="ident" id="2752009">Int</span><span class="op" id="2752012">,</span>&nbsp;<span class="ident" id="2752014">Int8</span><span class="op" id="2752018">,</span>&nbsp;<span class="ident" id="2752020">Int16</span><span class="op" id="2752025">,</span>&nbsp;<span class="ident" id="2752027">Int32</span><span class="op" id="2752032">,</span>&nbsp;<span class="ident" id="2752034">Int64</span><span class="op" id="2752039">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752043">bitSize</span>&nbsp;<span class="op" id="2752051">:=</span>&nbsp;<span class="ident" id="2752054">v</span><span class="op" id="2752055">.</span><span class="ident" id="2752056">typ</span><span class="op" id="2752059">.</span><span class="ident" id="2752060">size</span>&nbsp;<span class="op" id="2752065">*</span>&nbsp;<span class="num" id="2752067">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752071">trunc</span>&nbsp;<span class="op" id="2752077">:=</span>&nbsp;<span class="op" id="2752080">(</span><span class="ident" id="2752081">x</span>&nbsp;<span class="op" id="2752083">&lt;&lt;</span>&nbsp;<span class="op" id="2752086">(</span><span class="num" id="2752087">64</span>&nbsp;<span class="op" id="2752090">-</span>&nbsp;<span class="ident" id="2752092">bitSize</span><span class="op" id="2752099">)</span><span class="op" id="2752100">)</span>&nbsp;<span class="op" id="2752102">&gt;&gt;</span>&nbsp;<span class="op" id="2752105">(</span><span class="num" id="2752106">64</span>&nbsp;<span class="op" id="2752109">-</span>&nbsp;<span class="ident" id="2752111">bitSize</span><span class="op" id="2752118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752122">return</span>&nbsp;<span class="ident" id="2752129">x</span>&nbsp;<span class="op" id="2752131">!=</span>&nbsp;<span class="ident" id="2752134">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2752141">}</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2752144">panic</span><span class="op" id="2752149">(</span><span class="op" id="2752150">&amp;</span><span class="ident" id="2752151">ValueError</span><span class="op" id="2752161">{</span><span class="string" id="2752162">&#34;reflect.Value.OverflowInt&#34;</span><span class="op" id="2752189">,</span>&nbsp;<span class="ident" id="2752191">v</span><span class="op" id="2752192">.</span><span class="ident" id="2752193">kind</span><span class="op" id="2752197">(</span><span class="op" id="2752198">)</span><span class="op" id="2752199">}</span><span class="op" id="2752200">)</span><br>
<span class="lineno"></span><span class="op" id="2752202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2752205">//&nbsp;OverflowUint&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;uint64&nbsp;x&nbsp;cannot&nbsp;be&nbsp;represented&nbsp;by&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2752285">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno">1170</span><span class="keyword" id="2752366">func</span>&nbsp;<span class="op" id="2752371">(</span><span class="ident" id="2752372">v</span>&nbsp;<span class="ident" id="2752374">Value</span><span class="op" id="2752379">)</span>&nbsp;<span class="ident" id="2752381">OverflowUint</span><span class="op" id="2752393">(</span><span class="ident" id="2752394">x</span>&nbsp;<span class="ident" id="2752396">uint64</span><span class="op" id="2752402">)</span>&nbsp;<span class="builtintype" id="2752404">bool</span>&nbsp;<span class="op" id="2752409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752412">k</span>&nbsp;<span class="op" id="2752414">:=</span>&nbsp;<span class="ident" id="2752417">v</span><span class="op" id="2752418">.</span><span class="ident" id="2752419">kind</span><span class="op" id="2752423">(</span><span class="op" id="2752424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752427">switch</span>&nbsp;<span class="ident" id="2752434">k</span>&nbsp;<span class="op" id="2752436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752439">case</span>&nbsp;<span class="ident" id="2752444">Uint</span><span class="op" id="2752448">,</span>&nbsp;<span class="ident" id="2752450">Uintptr</span><span class="op" id="2752457">,</span>&nbsp;<span class="ident" id="2752459">Uint8</span><span class="op" id="2752464">,</span>&nbsp;<span class="ident" id="2752466">Uint16</span><span class="op" id="2752472">,</span>&nbsp;<span class="ident" id="2752474">Uint32</span><span class="op" id="2752480">,</span>&nbsp;<span class="ident" id="2752482">Uint64</span><span class="op" id="2752488">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752492">bitSize</span>&nbsp;<span class="op" id="2752500">:=</span>&nbsp;<span class="ident" id="2752503">v</span><span class="op" id="2752504">.</span><span class="ident" id="2752505">typ</span><span class="op" id="2752508">.</span><span class="ident" id="2752509">size</span>&nbsp;<span class="op" id="2752514">*</span>&nbsp;<span class="num" id="2752516">8</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2752520">trunc</span>&nbsp;<span class="op" id="2752526">:=</span>&nbsp;<span class="op" id="2752529">(</span><span class="ident" id="2752530">x</span>&nbsp;<span class="op" id="2752532">&lt;&lt;</span>&nbsp;<span class="op" id="2752535">(</span><span class="num" id="2752536">64</span>&nbsp;<span class="op" id="2752539">-</span>&nbsp;<span class="ident" id="2752541">bitSize</span><span class="op" id="2752548">)</span><span class="op" id="2752549">)</span>&nbsp;<span class="op" id="2752551">&gt;&gt;</span>&nbsp;<span class="op" id="2752554">(</span><span class="num" id="2752555">64</span>&nbsp;<span class="op" id="2752558">-</span>&nbsp;<span class="ident" id="2752560">bitSize</span><span class="op" id="2752567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2752571">return</span>&nbsp;<span class="ident" id="2752578">x</span>&nbsp;<span class="op" id="2752580">!=</span>&nbsp;<span class="ident" id="2752583">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2752590">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2752593">panic</span><span class="op" id="2752598">(</span><span class="op" id="2752599">&amp;</span><span class="ident" id="2752600">ValueError</span><span class="op" id="2752610">{</span><span class="string" id="2752611">&#34;reflect.Value.OverflowUint&#34;</span><span class="op" id="2752639">,</span>&nbsp;<span class="ident" id="2752641">v</span><span class="op" id="2752642">.</span><span class="ident" id="2752643">kind</span><span class="op" id="2752647">(</span><span class="op" id="2752648">)</span><span class="op" id="2752649">}</span><span class="op" id="2752650">)</span><br>
<span class="lineno"></span><span class="op" id="2752652">}</span><br>
<span class="lineno">1180</span><br>
<span class="lineno"></span><span class="comment" id="2752655">//&nbsp;Pointer&nbsp;returns&nbsp;v&#39;s&nbsp;value&nbsp;as&nbsp;a&nbsp;uintptr.</span><br>
<span class="lineno"></span><span class="comment" id="2752698">//&nbsp;It&nbsp;returns&nbsp;uintptr&nbsp;instead&nbsp;of&nbsp;unsafe.Pointer&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2752754">//&nbsp;code&nbsp;using&nbsp;reflect&nbsp;cannot&nbsp;obtain&nbsp;unsafe.Pointers</span><br>
<span class="lineno"></span><span class="comment" id="2752806">//&nbsp;without&nbsp;importing&nbsp;the&nbsp;unsafe&nbsp;package&nbsp;explicitly.</span><br>
<span class="lineno">1185</span><span class="comment" id="2752858">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan,&nbsp;Func,&nbsp;Map,&nbsp;Ptr,&nbsp;Slice,&nbsp;or&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="comment" id="2752937">//</span><br>
<span class="lineno"></span><span class="comment" id="2752940">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Func,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="2753002">//&nbsp;code&nbsp;pointer,&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to&nbsp;identify&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2753060">//&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;The&nbsp;only&nbsp;guarantee&nbsp;is&nbsp;that&nbsp;the</span><br>
<span class="lineno">1190</span><span class="comment" id="2753120">//&nbsp;result&nbsp;is&nbsp;zero&nbsp;if&nbsp;and&nbsp;only&nbsp;if&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;func&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2753176">//</span><br>
<span class="lineno"></span><span class="comment" id="2753179">//&nbsp;If&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;Slice,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;to&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="2753241">//&nbsp;element&nbsp;of&nbsp;the&nbsp;slice.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;nil&nbsp;the&nbsp;returned&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2753306">//&nbsp;is&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;slice&nbsp;is&nbsp;empty&nbsp;but&nbsp;non-nil&nbsp;the&nbsp;return&nbsp;value&nbsp;is&nbsp;non-zero.</span><br>
<span class="lineno">1195</span><span class="keyword" id="2753380">func</span>&nbsp;<span class="op" id="2753385">(</span><span class="ident" id="2753386">v</span>&nbsp;<span class="ident" id="2753388">Value</span><span class="op" id="2753393">)</span>&nbsp;<span class="ident" id="2753395">Pointer</span><span class="op" id="2753402">(</span><span class="op" id="2753403">)</span>&nbsp;<span class="builtintype" id="2753405">uintptr</span>&nbsp;<span class="op" id="2753413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753416">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753436">k</span>&nbsp;<span class="op" id="2753438">:=</span>&nbsp;<span class="ident" id="2753441">v</span><span class="op" id="2753442">.</span><span class="ident" id="2753443">kind</span><span class="op" id="2753447">(</span><span class="op" id="2753448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753451">switch</span>&nbsp;<span class="ident" id="2753458">k</span>&nbsp;<span class="op" id="2753460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753463">case</span>&nbsp;<span class="ident" id="2753468">Chan</span><span class="op" id="2753472">,</span>&nbsp;<span class="ident" id="2753474">Map</span><span class="op" id="2753477">,</span>&nbsp;<span class="ident" id="2753479">Ptr</span><span class="op" id="2753482">,</span>&nbsp;<span class="ident" id="2753484">UnsafePointer</span><span class="op" id="2753497">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753501">return</span>&nbsp;<span class="builtintype" id="2753508">uintptr</span><span class="op" id="2753515">(</span><span class="ident" id="2753516">v</span><span class="op" id="2753517">.</span><span class="ident" id="2753518">pointer</span><span class="op" id="2753525">(</span><span class="op" id="2753526">)</span><span class="op" id="2753527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753530">case</span>&nbsp;<span class="ident" id="2753535">Func</span><span class="op" id="2753539">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753543">if</span>&nbsp;<span class="ident" id="2753546">v</span><span class="op" id="2753547">.</span><span class="ident" id="2753548">flag</span><span class="op" id="2753552">&amp;</span><span class="ident" id="2753553">flagMethod</span>&nbsp;<span class="op" id="2753564">!=</span>&nbsp;<span class="num" id="2753567">0</span>&nbsp;<span class="op" id="2753569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753574">//&nbsp;As&nbsp;the&nbsp;doc&nbsp;comment&nbsp;says,&nbsp;the&nbsp;returned&nbsp;pointer&nbsp;is&nbsp;an</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753632">//&nbsp;underlying&nbsp;code&nbsp;pointer&nbsp;but&nbsp;not&nbsp;necessarily&nbsp;enough&nbsp;to</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753692">//&nbsp;identify&nbsp;a&nbsp;single&nbsp;function&nbsp;uniquely.&nbsp;All&nbsp;method&nbsp;expressions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753758">//&nbsp;created&nbsp;via&nbsp;reflect&nbsp;have&nbsp;the&nbsp;same&nbsp;underlying&nbsp;code&nbsp;pointer,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753823">//&nbsp;so&nbsp;their&nbsp;Pointers&nbsp;are&nbsp;equal.&nbsp;The&nbsp;function&nbsp;used&nbsp;here&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2753886">//&nbsp;match&nbsp;the&nbsp;one&nbsp;used&nbsp;in&nbsp;makeMethodValue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2753931">f</span>&nbsp;<span class="op" id="2753933">:=</span>&nbsp;<span class="ident" id="2753936">methodValueCall</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2753955">return</span>&nbsp;<span class="op" id="2753962">*</span><span class="op" id="2753963">*</span><span class="op" id="2753964">(</span><span class="op" id="2753965">*</span><span class="op" id="2753966">*</span><span class="builtintype" id="2753967">uintptr</span><span class="op" id="2753974">)</span><span class="op" id="2753975">(</span><span class="ident" id="2753976">unsafe</span><span class="op" id="2753982">.</span><span class="ident" id="2753983">Pointer</span><span class="op" id="2753990">(</span><span class="op" id="2753991">&amp;</span><span class="ident" id="2753992">f</span><span class="op" id="2753993">)</span><span class="op" id="2753994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2753998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754002">p</span>&nbsp;<span class="op" id="2754004">:=</span>&nbsp;<span class="ident" id="2754007">v</span><span class="op" id="2754008">.</span><span class="ident" id="2754009">pointer</span><span class="op" id="2754016">(</span><span class="op" id="2754017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2754021">//&nbsp;Non-nil&nbsp;func&nbsp;value&nbsp;points&nbsp;at&nbsp;data&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2754067">//&nbsp;First&nbsp;word&nbsp;of&nbsp;data&nbsp;block&nbsp;is&nbsp;actual&nbsp;code.</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754113">if</span>&nbsp;<span class="ident" id="2754116">p</span>&nbsp;<span class="op" id="2754118">!=</span>&nbsp;<span class="ident" id="2754121">nil</span>&nbsp;<span class="op" id="2754125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754130">p</span>&nbsp;<span class="op" id="2754132">=</span>&nbsp;<span class="op" id="2754134">*</span><span class="op" id="2754135">(</span><span class="op" id="2754136">*</span><span class="ident" id="2754137">unsafe</span><span class="op" id="2754143">.</span><span class="ident" id="2754144">Pointer</span><span class="op" id="2754151">)</span><span class="op" id="2754152">(</span><span class="ident" id="2754153">p</span><span class="op" id="2754154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754162">return</span>&nbsp;<span class="builtintype" id="2754169">uintptr</span><span class="op" id="2754176">(</span><span class="ident" id="2754177">p</span><span class="op" id="2754178">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754182">case</span>&nbsp;<span class="ident" id="2754187">Slice</span><span class="op" id="2754192">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754196">return</span>&nbsp;<span class="op" id="2754203">(</span><span class="op" id="2754204">*</span><span class="ident" id="2754205">SliceHeader</span><span class="op" id="2754216">)</span><span class="op" id="2754217">(</span><span class="ident" id="2754218">v</span><span class="op" id="2754219">.</span><span class="ident" id="2754220">ptr</span><span class="op" id="2754223">)</span><span class="op" id="2754224">.</span><span class="ident" id="2754225">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2754234">panic</span><span class="op" id="2754239">(</span><span class="op" id="2754240">&amp;</span><span class="ident" id="2754241">ValueError</span><span class="op" id="2754251">{</span><span class="string" id="2754252">&#34;reflect.Value.Pointer&#34;</span><span class="op" id="2754275">,</span>&nbsp;<span class="ident" id="2754277">v</span><span class="op" id="2754278">.</span><span class="ident" id="2754279">kind</span><span class="op" id="2754283">(</span><span class="op" id="2754284">)</span><span class="op" id="2754285">}</span><span class="op" id="2754286">)</span><br>
<span class="lineno"></span><span class="op" id="2754288">}</span><br>
<span class="lineno">1225</span><br>
<span class="lineno"></span><span class="comment" id="2754291">//&nbsp;Recv&nbsp;receives&nbsp;and&nbsp;returns&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2754348">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2754386">//&nbsp;The&nbsp;receive&nbsp;blocks&nbsp;until&nbsp;a&nbsp;value&nbsp;is&nbsp;ready.</span><br>
<span class="lineno"></span><span class="comment" id="2754432">//&nbsp;The&nbsp;boolean&nbsp;value&nbsp;ok&nbsp;is&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;x&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send</span><br>
<span class="lineno">1230</span><span class="comment" id="2754501">//&nbsp;on&nbsp;the&nbsp;channel,&nbsp;false&nbsp;if&nbsp;it&nbsp;is&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed.</span><br>
<span class="lineno"></span><span class="keyword" id="2754588">func</span>&nbsp;<span class="op" id="2754593">(</span><span class="ident" id="2754594">v</span>&nbsp;<span class="ident" id="2754596">Value</span><span class="op" id="2754601">)</span>&nbsp;<span class="ident" id="2754603">Recv</span><span class="op" id="2754607">(</span><span class="op" id="2754608">)</span>&nbsp;<span class="op" id="2754610">(</span><span class="ident" id="2754611">x</span>&nbsp;<span class="ident" id="2754613">Value</span><span class="op" id="2754618">,</span>&nbsp;<span class="ident" id="2754620">ok</span>&nbsp;<span class="builtintype" id="2754623">bool</span><span class="op" id="2754627">)</span>&nbsp;<span class="op" id="2754629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754632">v</span><span class="op" id="2754633">.</span><span class="ident" id="2754634">mustBe</span><span class="op" id="2754640">(</span><span class="ident" id="2754641">Chan</span><span class="op" id="2754645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754648">v</span><span class="op" id="2754649">.</span><span class="ident" id="2754650">mustBeExported</span><span class="op" id="2754664">(</span><span class="op" id="2754665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754668">return</span>&nbsp;<span class="ident" id="2754675">v</span><span class="op" id="2754676">.</span><span class="ident" id="2754677">recv</span><span class="op" id="2754681">(</span><span class="builtintype" id="2754682">false</span><span class="op" id="2754687">)</span><br>
<span class="lineno">1235</span><span class="op" id="2754689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2754692">//&nbsp;internal&nbsp;recv,&nbsp;possibly&nbsp;non-blocking&nbsp;(nb).</span><br>
<span class="lineno"></span><span class="comment" id="2754738">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2754769">func</span>&nbsp;<span class="op" id="2754774">(</span><span class="ident" id="2754775">v</span>&nbsp;<span class="ident" id="2754777">Value</span><span class="op" id="2754782">)</span>&nbsp;<span class="ident" id="2754784">recv</span><span class="op" id="2754788">(</span><span class="ident" id="2754789">nb</span>&nbsp;<span class="builtintype" id="2754792">bool</span><span class="op" id="2754796">)</span>&nbsp;<span class="op" id="2754798">(</span><span class="ident" id="2754799">val</span>&nbsp;<span class="ident" id="2754803">Value</span><span class="op" id="2754808">,</span>&nbsp;<span class="ident" id="2754810">ok</span>&nbsp;<span class="builtintype" id="2754813">bool</span><span class="op" id="2754817">)</span>&nbsp;<span class="op" id="2754819">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754822">tt</span>&nbsp;<span class="op" id="2754825">:=</span>&nbsp;<span class="op" id="2754828">(</span><span class="op" id="2754829">*</span><span class="ident" id="2754830">chanType</span><span class="op" id="2754838">)</span><span class="op" id="2754839">(</span><span class="ident" id="2754840">unsafe</span><span class="op" id="2754846">.</span><span class="ident" id="2754847">Pointer</span><span class="op" id="2754854">(</span><span class="ident" id="2754855">v</span><span class="op" id="2754856">.</span><span class="ident" id="2754857">typ</span><span class="op" id="2754860">)</span><span class="op" id="2754861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754864">if</span>&nbsp;<span class="ident" id="2754867">ChanDir</span><span class="op" id="2754874">(</span><span class="ident" id="2754875">tt</span><span class="op" id="2754877">.</span><span class="ident" id="2754878">dir</span><span class="op" id="2754881">)</span><span class="op" id="2754882">&amp;</span><span class="ident" id="2754883">RecvDir</span>&nbsp;<span class="op" id="2754891">==</span>&nbsp;<span class="num" id="2754894">0</span>&nbsp;<span class="op" id="2754896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2754900">panic</span><span class="op" id="2754905">(</span><span class="string" id="2754906">&#34;reflect:&nbsp;recv&nbsp;on&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2754942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2754945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754948">t</span>&nbsp;<span class="op" id="2754950">:=</span>&nbsp;<span class="ident" id="2754953">tt</span><span class="op" id="2754955">.</span><span class="ident" id="2754956">elem</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2754962">val</span>&nbsp;<span class="op" id="2754966">=</span>&nbsp;<span class="ident" id="2754968">Value</span><span class="op" id="2754973">{</span><span class="ident" id="2754974">t</span><span class="op" id="2754975">,</span>&nbsp;<span class="ident" id="2754977">nil</span><span class="op" id="2754980">,</span>&nbsp;<span class="ident" id="2754982">flag</span><span class="op" id="2754986">(</span><span class="ident" id="2754987">t</span><span class="op" id="2754988">.</span><span class="ident" id="2754989">Kind</span><span class="op" id="2754993">(</span><span class="op" id="2754994">)</span><span class="op" id="2754995">)</span><span class="op" id="2754996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2754999">var</span>&nbsp;<span class="ident" id="2755003">p</span>&nbsp;<span class="ident" id="2755005">unsafe</span><span class="op" id="2755011">.</span><span class="ident" id="2755012">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755021">if</span>&nbsp;<span class="ident" id="2755024">ifaceIndir</span><span class="op" id="2755034">(</span><span class="ident" id="2755035">t</span><span class="op" id="2755036">)</span>&nbsp;<span class="op" id="2755038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755042">p</span>&nbsp;<span class="op" id="2755044">=</span>&nbsp;<span class="ident" id="2755046">unsafe_New</span><span class="op" id="2755056">(</span><span class="ident" id="2755057">t</span><span class="op" id="2755058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755062">val</span><span class="op" id="2755065">.</span><span class="ident" id="2755066">ptr</span>&nbsp;<span class="op" id="2755070">=</span>&nbsp;<span class="ident" id="2755072">p</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755076">val</span><span class="op" id="2755079">.</span><span class="ident" id="2755080">flag</span>&nbsp;<span class="op" id="2755085">|=</span>&nbsp;<span class="ident" id="2755088">flagIndir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755099">}</span>&nbsp;<span class="keyword" id="2755101">else</span>&nbsp;<span class="op" id="2755106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755110">p</span>&nbsp;<span class="op" id="2755112">=</span>&nbsp;<span class="ident" id="2755114">unsafe</span><span class="op" id="2755120">.</span><span class="ident" id="2755121">Pointer</span><span class="op" id="2755128">(</span><span class="op" id="2755129">&amp;</span><span class="ident" id="2755130">val</span><span class="op" id="2755133">.</span><span class="ident" id="2755134">ptr</span><span class="op" id="2755137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755143">selected</span><span class="op" id="2755151">,</span>&nbsp;<span class="ident" id="2755153">ok</span>&nbsp;<span class="op" id="2755156">:=</span>&nbsp;<span class="ident" id="2755159">chanrecv</span><span class="op" id="2755167">(</span><span class="ident" id="2755168">v</span><span class="op" id="2755169">.</span><span class="ident" id="2755170">typ</span><span class="op" id="2755173">,</span>&nbsp;<span class="ident" id="2755175">v</span><span class="op" id="2755176">.</span><span class="ident" id="2755177">pointer</span><span class="op" id="2755184">(</span><span class="op" id="2755185">)</span><span class="op" id="2755186">,</span>&nbsp;<span class="ident" id="2755188">nb</span><span class="op" id="2755190">,</span>&nbsp;<span class="ident" id="2755192">p</span><span class="op" id="2755193">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755196">if</span>&nbsp;<span class="op" id="2755199">!</span><span class="ident" id="2755200">selected</span>&nbsp;<span class="op" id="2755209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755213">val</span>&nbsp;<span class="op" id="2755217">=</span>&nbsp;<span class="ident" id="2755219">Value</span><span class="op" id="2755224">{</span><span class="op" id="2755225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755231">return</span><br>
<span class="lineno"></span><span class="op" id="2755238">}</span><br>
<span class="lineno">1260</span><br>
<span class="lineno"></span><span class="comment" id="2755241">//&nbsp;Send&nbsp;sends&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2755275">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;kind&nbsp;is&nbsp;not&nbsp;Chan&nbsp;or&nbsp;if&nbsp;x&#39;s&nbsp;type&nbsp;is&nbsp;not&nbsp;the&nbsp;same&nbsp;type&nbsp;as&nbsp;v&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="2755369">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2755442">func</span>&nbsp;<span class="op" id="2755447">(</span><span class="ident" id="2755448">v</span>&nbsp;<span class="ident" id="2755450">Value</span><span class="op" id="2755455">)</span>&nbsp;<span class="ident" id="2755457">Send</span><span class="op" id="2755461">(</span><span class="ident" id="2755462">x</span>&nbsp;<span class="ident" id="2755464">Value</span><span class="op" id="2755469">)</span>&nbsp;<span class="op" id="2755471">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755474">v</span><span class="op" id="2755475">.</span><span class="ident" id="2755476">mustBe</span><span class="op" id="2755482">(</span><span class="ident" id="2755483">Chan</span><span class="op" id="2755487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755490">v</span><span class="op" id="2755491">.</span><span class="ident" id="2755492">mustBeExported</span><span class="op" id="2755506">(</span><span class="op" id="2755507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755510">v</span><span class="op" id="2755511">.</span><span class="ident" id="2755512">send</span><span class="op" id="2755516">(</span><span class="ident" id="2755517">x</span><span class="op" id="2755518">,</span>&nbsp;<span class="builtintype" id="2755520">false</span><span class="op" id="2755525">)</span><br>
<span class="lineno"></span><span class="op" id="2755527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="2755530">//&nbsp;internal&nbsp;send,&nbsp;possibly&nbsp;non-blocking.</span><br>
<span class="lineno"></span><span class="comment" id="2755571">//&nbsp;v&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;a&nbsp;channel.</span><br>
<span class="lineno"></span><span class="keyword" id="2755602">func</span>&nbsp;<span class="op" id="2755607">(</span><span class="ident" id="2755608">v</span>&nbsp;<span class="ident" id="2755610">Value</span><span class="op" id="2755615">)</span>&nbsp;<span class="ident" id="2755617">send</span><span class="op" id="2755621">(</span><span class="ident" id="2755622">x</span>&nbsp;<span class="ident" id="2755624">Value</span><span class="op" id="2755629">,</span>&nbsp;<span class="ident" id="2755631">nb</span>&nbsp;<span class="builtintype" id="2755634">bool</span><span class="op" id="2755638">)</span>&nbsp;<span class="op" id="2755640">(</span><span class="ident" id="2755641">selected</span>&nbsp;<span class="builtintype" id="2755650">bool</span><span class="op" id="2755654">)</span>&nbsp;<span class="op" id="2755656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755659">tt</span>&nbsp;<span class="op" id="2755662">:=</span>&nbsp;<span class="op" id="2755665">(</span><span class="op" id="2755666">*</span><span class="ident" id="2755667">chanType</span><span class="op" id="2755675">)</span><span class="op" id="2755676">(</span><span class="ident" id="2755677">unsafe</span><span class="op" id="2755683">.</span><span class="ident" id="2755684">Pointer</span><span class="op" id="2755691">(</span><span class="ident" id="2755692">v</span><span class="op" id="2755693">.</span><span class="ident" id="2755694">typ</span><span class="op" id="2755697">)</span><span class="op" id="2755698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755701">if</span>&nbsp;<span class="ident" id="2755704">ChanDir</span><span class="op" id="2755711">(</span><span class="ident" id="2755712">tt</span><span class="op" id="2755714">.</span><span class="ident" id="2755715">dir</span><span class="op" id="2755718">)</span><span class="op" id="2755719">&amp;</span><span class="ident" id="2755720">SendDir</span>&nbsp;<span class="op" id="2755728">==</span>&nbsp;<span class="num" id="2755731">0</span>&nbsp;<span class="op" id="2755733">{</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2755737">panic</span><span class="op" id="2755742">(</span><span class="string" id="2755743">&#34;reflect:&nbsp;send&nbsp;on&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2755779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755785">x</span><span class="op" id="2755786">.</span><span class="ident" id="2755787">mustBeExported</span><span class="op" id="2755801">(</span><span class="op" id="2755802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755805">x</span>&nbsp;<span class="op" id="2755807">=</span>&nbsp;<span class="ident" id="2755809">x</span><span class="op" id="2755810">.</span><span class="ident" id="2755811">assignTo</span><span class="op" id="2755819">(</span><span class="string" id="2755820">&#34;reflect.Value.Send&#34;</span><span class="op" id="2755840">,</span>&nbsp;<span class="ident" id="2755842">tt</span><span class="op" id="2755844">.</span><span class="ident" id="2755845">elem</span><span class="op" id="2755849">,</span>&nbsp;<span class="ident" id="2755851">nil</span><span class="op" id="2755854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755857">var</span>&nbsp;<span class="ident" id="2755861">p</span>&nbsp;<span class="ident" id="2755863">unsafe</span><span class="op" id="2755869">.</span><span class="ident" id="2755870">Pointer</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755879">if</span>&nbsp;<span class="ident" id="2755882">x</span><span class="op" id="2755883">.</span><span class="ident" id="2755884">flag</span><span class="op" id="2755888">&amp;</span><span class="ident" id="2755889">flagIndir</span>&nbsp;<span class="op" id="2755899">!=</span>&nbsp;<span class="num" id="2755902">0</span>&nbsp;<span class="op" id="2755904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755908">p</span>&nbsp;<span class="op" id="2755910">=</span>&nbsp;<span class="ident" id="2755912">x</span><span class="op" id="2755913">.</span><span class="ident" id="2755914">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755919">}</span>&nbsp;<span class="keyword" id="2755921">else</span>&nbsp;<span class="op" id="2755926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2755930">p</span>&nbsp;<span class="op" id="2755932">=</span>&nbsp;<span class="ident" id="2755934">unsafe</span><span class="op" id="2755940">.</span><span class="ident" id="2755941">Pointer</span><span class="op" id="2755948">(</span><span class="op" id="2755949">&amp;</span><span class="ident" id="2755950">x</span><span class="op" id="2755951">.</span><span class="ident" id="2755952">ptr</span><span class="op" id="2755955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2755958">}</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2755961">return</span>&nbsp;<span class="ident" id="2755968">chansend</span><span class="op" id="2755976">(</span><span class="ident" id="2755977">v</span><span class="op" id="2755978">.</span><span class="ident" id="2755979">typ</span><span class="op" id="2755982">,</span>&nbsp;<span class="ident" id="2755984">v</span><span class="op" id="2755985">.</span><span class="ident" id="2755986">pointer</span><span class="op" id="2755993">(</span><span class="op" id="2755994">)</span><span class="op" id="2755995">,</span>&nbsp;<span class="ident" id="2755997">p</span><span class="op" id="2755998">,</span>&nbsp;<span class="ident" id="2756000">nb</span><span class="op" id="2756002">)</span><br>
<span class="lineno"></span><span class="op" id="2756004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2756007">//&nbsp;Set&nbsp;assigns&nbsp;x&nbsp;to&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="2756040">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;CanSet&nbsp;returns&nbsp;false.</span><br>
<span class="lineno">1290</span><span class="comment" id="2756078">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2756133">func</span>&nbsp;<span class="op" id="2756138">(</span><span class="ident" id="2756139">v</span>&nbsp;<span class="ident" id="2756141">Value</span><span class="op" id="2756146">)</span>&nbsp;<span class="ident" id="2756148">Set</span><span class="op" id="2756151">(</span><span class="ident" id="2756152">x</span>&nbsp;<span class="ident" id="2756154">Value</span><span class="op" id="2756159">)</span>&nbsp;<span class="op" id="2756161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756164">v</span><span class="op" id="2756165">.</span><span class="ident" id="2756166">mustBeAssignable</span><span class="op" id="2756182">(</span><span class="op" id="2756183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756186">x</span><span class="op" id="2756187">.</span><span class="ident" id="2756188">mustBeExported</span><span class="op" id="2756202">(</span><span class="op" id="2756203">)</span>&nbsp;<span class="comment" id="2756205">//&nbsp;do&nbsp;not&nbsp;let&nbsp;unexported&nbsp;x&nbsp;leak</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756238">var</span>&nbsp;<span class="ident" id="2756242">target</span>&nbsp;<span class="ident" id="2756249">unsafe</span><span class="op" id="2756255">.</span><span class="ident" id="2756256">Pointer</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756265">if</span>&nbsp;<span class="ident" id="2756268">v</span><span class="op" id="2756269">.</span><span class="ident" id="2756270">kind</span><span class="op" id="2756274">(</span><span class="op" id="2756275">)</span>&nbsp;<span class="op" id="2756277">==</span>&nbsp;<span class="ident" id="2756280">Interface</span>&nbsp;<span class="op" id="2756290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756294">target</span>&nbsp;<span class="op" id="2756301">=</span>&nbsp;<span class="ident" id="2756303">v</span><span class="op" id="2756304">.</span><span class="ident" id="2756305">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756313">x</span>&nbsp;<span class="op" id="2756315">=</span>&nbsp;<span class="ident" id="2756317">x</span><span class="op" id="2756318">.</span><span class="ident" id="2756319">assignTo</span><span class="op" id="2756327">(</span><span class="string" id="2756328">&#34;reflect.Set&#34;</span><span class="op" id="2756341">,</span>&nbsp;<span class="ident" id="2756343">v</span><span class="op" id="2756344">.</span><span class="ident" id="2756345">typ</span><span class="op" id="2756348">,</span>&nbsp;<span class="ident" id="2756350">target</span><span class="op" id="2756356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756359">if</span>&nbsp;<span class="ident" id="2756362">x</span><span class="op" id="2756363">.</span><span class="ident" id="2756364">flag</span><span class="op" id="2756368">&amp;</span><span class="ident" id="2756369">flagIndir</span>&nbsp;<span class="op" id="2756379">!=</span>&nbsp;<span class="num" id="2756382">0</span>&nbsp;<span class="op" id="2756384">{</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756388">memmove</span><span class="op" id="2756395">(</span><span class="ident" id="2756396">v</span><span class="op" id="2756397">.</span><span class="ident" id="2756398">ptr</span><span class="op" id="2756401">,</span>&nbsp;<span class="ident" id="2756403">x</span><span class="op" id="2756404">.</span><span class="ident" id="2756405">ptr</span><span class="op" id="2756408">,</span>&nbsp;<span class="ident" id="2756410">v</span><span class="op" id="2756411">.</span><span class="ident" id="2756412">typ</span><span class="op" id="2756415">.</span><span class="ident" id="2756416">size</span><span class="op" id="2756420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756423">}</span>&nbsp;<span class="keyword" id="2756425">else</span>&nbsp;<span class="op" id="2756430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756434">*</span><span class="op" id="2756435">(</span><span class="op" id="2756436">*</span><span class="ident" id="2756437">unsafe</span><span class="op" id="2756443">.</span><span class="ident" id="2756444">Pointer</span><span class="op" id="2756451">)</span><span class="op" id="2756452">(</span><span class="ident" id="2756453">v</span><span class="op" id="2756454">.</span><span class="ident" id="2756455">ptr</span><span class="op" id="2756458">)</span>&nbsp;<span class="op" id="2756460">=</span>&nbsp;<span class="ident" id="2756462">x</span><span class="op" id="2756463">.</span><span class="ident" id="2756464">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756469">}</span><br>
<span class="lineno"></span><span class="op" id="2756471">}</span><br>
<span class="lineno">1305</span><br>
<span class="lineno"></span><span class="comment" id="2756474">//&nbsp;SetBool&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2756512">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Bool&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2756574">func</span>&nbsp;<span class="op" id="2756579">(</span><span class="ident" id="2756580">v</span>&nbsp;<span class="ident" id="2756582">Value</span><span class="op" id="2756587">)</span>&nbsp;<span class="ident" id="2756589">SetBool</span><span class="op" id="2756596">(</span><span class="ident" id="2756597">x</span>&nbsp;<span class="builtintype" id="2756599">bool</span><span class="op" id="2756603">)</span>&nbsp;<span class="op" id="2756605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756608">v</span><span class="op" id="2756609">.</span><span class="ident" id="2756610">mustBeAssignable</span><span class="op" id="2756626">(</span><span class="op" id="2756627">)</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756630">v</span><span class="op" id="2756631">.</span><span class="ident" id="2756632">mustBe</span><span class="op" id="2756638">(</span><span class="ident" id="2756639">Bool</span><span class="op" id="2756643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756646">*</span><span class="op" id="2756647">(</span><span class="op" id="2756648">*</span><span class="builtintype" id="2756649">bool</span><span class="op" id="2756653">)</span><span class="op" id="2756654">(</span><span class="ident" id="2756655">v</span><span class="op" id="2756656">.</span><span class="ident" id="2756657">ptr</span><span class="op" id="2756660">)</span>&nbsp;<span class="op" id="2756662">=</span>&nbsp;<span class="ident" id="2756664">x</span><br>
<span class="lineno"></span><span class="op" id="2756666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2756669">//&nbsp;SetBytes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno">1315</span><span class="comment" id="2756708">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="2756770">func</span>&nbsp;<span class="op" id="2756775">(</span><span class="ident" id="2756776">v</span>&nbsp;<span class="ident" id="2756778">Value</span><span class="op" id="2756783">)</span>&nbsp;<span class="ident" id="2756785">SetBytes</span><span class="op" id="2756793">(</span><span class="ident" id="2756794">x</span>&nbsp;<span class="op" id="2756796">[</span><span class="op" id="2756797">]</span><span class="builtintype" id="2756798">byte</span><span class="op" id="2756802">)</span>&nbsp;<span class="op" id="2756804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756807">v</span><span class="op" id="2756808">.</span><span class="ident" id="2756809">mustBeAssignable</span><span class="op" id="2756825">(</span><span class="op" id="2756826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2756829">v</span><span class="op" id="2756830">.</span><span class="ident" id="2756831">mustBe</span><span class="op" id="2756837">(</span><span class="ident" id="2756838">Slice</span><span class="op" id="2756843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2756846">if</span>&nbsp;<span class="ident" id="2756849">v</span><span class="op" id="2756850">.</span><span class="ident" id="2756851">typ</span><span class="op" id="2756854">.</span><span class="ident" id="2756855">Elem</span><span class="op" id="2756859">(</span><span class="op" id="2756860">)</span><span class="op" id="2756861">.</span><span class="ident" id="2756862">Kind</span><span class="op" id="2756866">(</span><span class="op" id="2756867">)</span>&nbsp;<span class="op" id="2756869">!=</span>&nbsp;<span class="ident" id="2756872">Uint8</span>&nbsp;<span class="op" id="2756878">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2756882">panic</span><span class="op" id="2756887">(</span><span class="string" id="2756888">&#34;reflect.Value.SetBytes&nbsp;of&nbsp;non-byte&nbsp;slice&#34;</span><span class="op" id="2756930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2756936">*</span><span class="op" id="2756937">(</span><span class="op" id="2756938">*</span><span class="op" id="2756939">[</span><span class="op" id="2756940">]</span><span class="builtintype" id="2756941">byte</span><span class="op" id="2756945">)</span><span class="op" id="2756946">(</span><span class="ident" id="2756947">v</span><span class="op" id="2756948">.</span><span class="ident" id="2756949">ptr</span><span class="op" id="2756952">)</span>&nbsp;<span class="op" id="2756954">=</span>&nbsp;<span class="ident" id="2756956">x</span><br>
<span class="lineno"></span><span class="op" id="2756958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1325</span><span class="comment" id="2756961">//&nbsp;setRunes&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2757000">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;is&nbsp;not&nbsp;a&nbsp;slice&nbsp;of&nbsp;runes&nbsp;(int32s).</span><br>
<span class="lineno"></span><span class="keyword" id="2757071">func</span>&nbsp;<span class="op" id="2757076">(</span><span class="ident" id="2757077">v</span>&nbsp;<span class="ident" id="2757079">Value</span><span class="op" id="2757084">)</span>&nbsp;<span class="ident" id="2757086">setRunes</span><span class="op" id="2757094">(</span><span class="ident" id="2757095">x</span>&nbsp;<span class="op" id="2757097">[</span><span class="op" id="2757098">]</span><span class="builtintype" id="2757099">rune</span><span class="op" id="2757103">)</span>&nbsp;<span class="op" id="2757105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757108">v</span><span class="op" id="2757109">.</span><span class="ident" id="2757110">mustBeAssignable</span><span class="op" id="2757126">(</span><span class="op" id="2757127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757130">v</span><span class="op" id="2757131">.</span><span class="ident" id="2757132">mustBe</span><span class="op" id="2757138">(</span><span class="ident" id="2757139">Slice</span><span class="op" id="2757144">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757147">if</span>&nbsp;<span class="ident" id="2757150">v</span><span class="op" id="2757151">.</span><span class="ident" id="2757152">typ</span><span class="op" id="2757155">.</span><span class="ident" id="2757156">Elem</span><span class="op" id="2757160">(</span><span class="op" id="2757161">)</span><span class="op" id="2757162">.</span><span class="ident" id="2757163">Kind</span><span class="op" id="2757167">(</span><span class="op" id="2757168">)</span>&nbsp;<span class="op" id="2757170">!=</span>&nbsp;<span class="ident" id="2757173">Int32</span>&nbsp;<span class="op" id="2757179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2757183">panic</span><span class="op" id="2757188">(</span><span class="string" id="2757189">&#34;reflect.Value.setRunes&nbsp;of&nbsp;non-rune&nbsp;slice&#34;</span><span class="op" id="2757231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757237">*</span><span class="op" id="2757238">(</span><span class="op" id="2757239">*</span><span class="op" id="2757240">[</span><span class="op" id="2757241">]</span><span class="builtintype" id="2757242">rune</span><span class="op" id="2757246">)</span><span class="op" id="2757247">(</span><span class="ident" id="2757248">v</span><span class="op" id="2757249">.</span><span class="ident" id="2757250">ptr</span><span class="op" id="2757253">)</span>&nbsp;<span class="op" id="2757255">=</span>&nbsp;<span class="ident" id="2757257">x</span><br>
<span class="lineno"></span><span class="op" id="2757259">}</span><br>
<span class="lineno">1335</span><br>
<span class="lineno"></span><span class="comment" id="2757262">//&nbsp;SetComplex&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2757308">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Complex64&nbsp;or&nbsp;Complex128,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2757390">func</span>&nbsp;<span class="op" id="2757395">(</span><span class="ident" id="2757396">v</span>&nbsp;<span class="ident" id="2757398">Value</span><span class="op" id="2757403">)</span>&nbsp;<span class="ident" id="2757405">SetComplex</span><span class="op" id="2757415">(</span><span class="ident" id="2757416">x</span>&nbsp;<span class="builtintype" id="2757418">complex128</span><span class="op" id="2757428">)</span>&nbsp;<span class="op" id="2757430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757433">v</span><span class="op" id="2757434">.</span><span class="ident" id="2757435">mustBeAssignable</span><span class="op" id="2757451">(</span><span class="op" id="2757452">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757455">switch</span>&nbsp;<span class="ident" id="2757462">k</span>&nbsp;<span class="op" id="2757464">:=</span>&nbsp;<span class="ident" id="2757467">v</span><span class="op" id="2757468">.</span><span class="ident" id="2757469">kind</span><span class="op" id="2757473">(</span><span class="op" id="2757474">)</span><span class="op" id="2757475">;</span>&nbsp;<span class="ident" id="2757477">k</span>&nbsp;<span class="op" id="2757479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757482">default</span><span class="op" id="2757489">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2757493">panic</span><span class="op" id="2757498">(</span><span class="op" id="2757499">&amp;</span><span class="ident" id="2757500">ValueError</span><span class="op" id="2757510">{</span><span class="string" id="2757511">&#34;reflect.Value.SetComplex&#34;</span><span class="op" id="2757537">,</span>&nbsp;<span class="ident" id="2757539">v</span><span class="op" id="2757540">.</span><span class="ident" id="2757541">kind</span><span class="op" id="2757545">(</span><span class="op" id="2757546">)</span><span class="op" id="2757547">}</span><span class="op" id="2757548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757551">case</span>&nbsp;<span class="ident" id="2757556">Complex64</span><span class="op" id="2757565">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757569">*</span><span class="op" id="2757570">(</span><span class="op" id="2757571">*</span><span class="builtintype" id="2757572">complex64</span><span class="op" id="2757581">)</span><span class="op" id="2757582">(</span><span class="ident" id="2757583">v</span><span class="op" id="2757584">.</span><span class="ident" id="2757585">ptr</span><span class="op" id="2757588">)</span>&nbsp;<span class="op" id="2757590">=</span>&nbsp;<span class="builtintype" id="2757592">complex64</span><span class="op" id="2757601">(</span><span class="ident" id="2757602">x</span><span class="op" id="2757603">)</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757606">case</span>&nbsp;<span class="ident" id="2757611">Complex128</span><span class="op" id="2757621">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757625">*</span><span class="op" id="2757626">(</span><span class="op" id="2757627">*</span><span class="builtintype" id="2757628">complex128</span><span class="op" id="2757638">)</span><span class="op" id="2757639">(</span><span class="ident" id="2757640">v</span><span class="op" id="2757641">.</span><span class="ident" id="2757642">ptr</span><span class="op" id="2757645">)</span>&nbsp;<span class="op" id="2757647">=</span>&nbsp;<span class="ident" id="2757649">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757652">}</span><br>
<span class="lineno"></span><span class="op" id="2757654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1350</span><span class="comment" id="2757657">//&nbsp;SetFloat&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2757701">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Float32&nbsp;or&nbsp;Float64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2757778">func</span>&nbsp;<span class="op" id="2757783">(</span><span class="ident" id="2757784">v</span>&nbsp;<span class="ident" id="2757786">Value</span><span class="op" id="2757791">)</span>&nbsp;<span class="ident" id="2757793">SetFloat</span><span class="op" id="2757801">(</span><span class="ident" id="2757802">x</span>&nbsp;<span class="builtintype" id="2757804">float64</span><span class="op" id="2757811">)</span>&nbsp;<span class="op" id="2757813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2757816">v</span><span class="op" id="2757817">.</span><span class="ident" id="2757818">mustBeAssignable</span><span class="op" id="2757834">(</span><span class="op" id="2757835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757838">switch</span>&nbsp;<span class="ident" id="2757845">k</span>&nbsp;<span class="op" id="2757847">:=</span>&nbsp;<span class="ident" id="2757850">v</span><span class="op" id="2757851">.</span><span class="ident" id="2757852">kind</span><span class="op" id="2757856">(</span><span class="op" id="2757857">)</span><span class="op" id="2757858">;</span>&nbsp;<span class="ident" id="2757860">k</span>&nbsp;<span class="op" id="2757862">{</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757865">default</span><span class="op" id="2757872">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2757876">panic</span><span class="op" id="2757881">(</span><span class="op" id="2757882">&amp;</span><span class="ident" id="2757883">ValueError</span><span class="op" id="2757893">{</span><span class="string" id="2757894">&#34;reflect.Value.SetFloat&#34;</span><span class="op" id="2757918">,</span>&nbsp;<span class="ident" id="2757920">v</span><span class="op" id="2757921">.</span><span class="ident" id="2757922">kind</span><span class="op" id="2757926">(</span><span class="op" id="2757927">)</span><span class="op" id="2757928">}</span><span class="op" id="2757929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757932">case</span>&nbsp;<span class="ident" id="2757937">Float32</span><span class="op" id="2757944">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757948">*</span><span class="op" id="2757949">(</span><span class="op" id="2757950">*</span><span class="builtintype" id="2757951">float32</span><span class="op" id="2757958">)</span><span class="op" id="2757959">(</span><span class="ident" id="2757960">v</span><span class="op" id="2757961">.</span><span class="ident" id="2757962">ptr</span><span class="op" id="2757965">)</span>&nbsp;<span class="op" id="2757967">=</span>&nbsp;<span class="builtintype" id="2757969">float32</span><span class="op" id="2757976">(</span><span class="ident" id="2757977">x</span><span class="op" id="2757978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2757981">case</span>&nbsp;<span class="ident" id="2757986">Float64</span><span class="op" id="2757993">:</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2757997">*</span><span class="op" id="2757998">(</span><span class="op" id="2757999">*</span><span class="builtintype" id="2758000">float64</span><span class="op" id="2758007">)</span><span class="op" id="2758008">(</span><span class="ident" id="2758009">v</span><span class="op" id="2758010">.</span><span class="ident" id="2758011">ptr</span><span class="op" id="2758014">)</span>&nbsp;<span class="op" id="2758016">=</span>&nbsp;<span class="ident" id="2758018">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758021">}</span><br>
<span class="lineno"></span><span class="op" id="2758023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2758026">//&nbsp;SetInt&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno">1365</span><span class="comment" id="2758068">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Int,&nbsp;Int8,&nbsp;Int16,&nbsp;Int32,&nbsp;or&nbsp;Int64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2758160">func</span>&nbsp;<span class="op" id="2758165">(</span><span class="ident" id="2758166">v</span>&nbsp;<span class="ident" id="2758168">Value</span><span class="op" id="2758173">)</span>&nbsp;<span class="ident" id="2758175">SetInt</span><span class="op" id="2758181">(</span><span class="ident" id="2758182">x</span>&nbsp;<span class="ident" id="2758184">int64</span><span class="op" id="2758189">)</span>&nbsp;<span class="op" id="2758191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758194">v</span><span class="op" id="2758195">.</span><span class="ident" id="2758196">mustBeAssignable</span><span class="op" id="2758212">(</span><span class="op" id="2758213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758216">switch</span>&nbsp;<span class="ident" id="2758223">k</span>&nbsp;<span class="op" id="2758225">:=</span>&nbsp;<span class="ident" id="2758228">v</span><span class="op" id="2758229">.</span><span class="ident" id="2758230">kind</span><span class="op" id="2758234">(</span><span class="op" id="2758235">)</span><span class="op" id="2758236">;</span>&nbsp;<span class="ident" id="2758238">k</span>&nbsp;<span class="op" id="2758240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758243">default</span><span class="op" id="2758250">:</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2758254">panic</span><span class="op" id="2758259">(</span><span class="op" id="2758260">&amp;</span><span class="ident" id="2758261">ValueError</span><span class="op" id="2758271">{</span><span class="string" id="2758272">&#34;reflect.Value.SetInt&#34;</span><span class="op" id="2758294">,</span>&nbsp;<span class="ident" id="2758296">v</span><span class="op" id="2758297">.</span><span class="ident" id="2758298">kind</span><span class="op" id="2758302">(</span><span class="op" id="2758303">)</span><span class="op" id="2758304">}</span><span class="op" id="2758305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758308">case</span>&nbsp;<span class="ident" id="2758313">Int</span><span class="op" id="2758316">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758320">*</span><span class="op" id="2758321">(</span><span class="op" id="2758322">*</span><span class="builtintype" id="2758323">int</span><span class="op" id="2758326">)</span><span class="op" id="2758327">(</span><span class="ident" id="2758328">v</span><span class="op" id="2758329">.</span><span class="ident" id="2758330">ptr</span><span class="op" id="2758333">)</span>&nbsp;<span class="op" id="2758335">=</span>&nbsp;<span class="builtintype" id="2758337">int</span><span class="op" id="2758340">(</span><span class="ident" id="2758341">x</span><span class="op" id="2758342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758345">case</span>&nbsp;<span class="ident" id="2758350">Int8</span><span class="op" id="2758354">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758358">*</span><span class="op" id="2758359">(</span><span class="op" id="2758360">*</span><span class="builtintype" id="2758361">int8</span><span class="op" id="2758365">)</span><span class="op" id="2758366">(</span><span class="ident" id="2758367">v</span><span class="op" id="2758368">.</span><span class="ident" id="2758369">ptr</span><span class="op" id="2758372">)</span>&nbsp;<span class="op" id="2758374">=</span>&nbsp;<span class="builtintype" id="2758376">int8</span><span class="op" id="2758380">(</span><span class="ident" id="2758381">x</span><span class="op" id="2758382">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758385">case</span>&nbsp;<span class="ident" id="2758390">Int16</span><span class="op" id="2758395">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758399">*</span><span class="op" id="2758400">(</span><span class="op" id="2758401">*</span><span class="builtintype" id="2758402">int16</span><span class="op" id="2758407">)</span><span class="op" id="2758408">(</span><span class="ident" id="2758409">v</span><span class="op" id="2758410">.</span><span class="ident" id="2758411">ptr</span><span class="op" id="2758414">)</span>&nbsp;<span class="op" id="2758416">=</span>&nbsp;<span class="builtintype" id="2758418">int16</span><span class="op" id="2758423">(</span><span class="ident" id="2758424">x</span><span class="op" id="2758425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758428">case</span>&nbsp;<span class="ident" id="2758433">Int32</span><span class="op" id="2758438">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758442">*</span><span class="op" id="2758443">(</span><span class="op" id="2758444">*</span><span class="builtintype" id="2758445">int32</span><span class="op" id="2758450">)</span><span class="op" id="2758451">(</span><span class="ident" id="2758452">v</span><span class="op" id="2758453">.</span><span class="ident" id="2758454">ptr</span><span class="op" id="2758457">)</span>&nbsp;<span class="op" id="2758459">=</span>&nbsp;<span class="builtintype" id="2758461">int32</span><span class="op" id="2758466">(</span><span class="ident" id="2758467">x</span><span class="op" id="2758468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758471">case</span>&nbsp;<span class="ident" id="2758476">Int64</span><span class="op" id="2758481">:</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758485">*</span><span class="op" id="2758486">(</span><span class="op" id="2758487">*</span><span class="ident" id="2758488">int64</span><span class="op" id="2758493">)</span><span class="op" id="2758494">(</span><span class="ident" id="2758495">v</span><span class="op" id="2758496">.</span><span class="ident" id="2758497">ptr</span><span class="op" id="2758500">)</span>&nbsp;<span class="op" id="2758502">=</span>&nbsp;<span class="ident" id="2758504">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758507">}</span><br>
<span class="lineno"></span><span class="op" id="2758509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2758512">//&nbsp;SetLen&nbsp;sets&nbsp;v&#39;s&nbsp;length&nbsp;to&nbsp;n.</span><br>
<span class="lineno">1385</span><span class="comment" id="2758544">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;negative&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2758605">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="2758648">func</span>&nbsp;<span class="op" id="2758653">(</span><span class="ident" id="2758654">v</span>&nbsp;<span class="ident" id="2758656">Value</span><span class="op" id="2758661">)</span>&nbsp;<span class="ident" id="2758663">SetLen</span><span class="op" id="2758669">(</span><span class="ident" id="2758670">n</span>&nbsp;<span class="builtintype" id="2758672">int</span><span class="op" id="2758675">)</span>&nbsp;<span class="op" id="2758677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758680">v</span><span class="op" id="2758681">.</span><span class="ident" id="2758682">mustBeAssignable</span><span class="op" id="2758698">(</span><span class="op" id="2758699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758702">v</span><span class="op" id="2758703">.</span><span class="ident" id="2758704">mustBe</span><span class="op" id="2758710">(</span><span class="ident" id="2758711">Slice</span><span class="op" id="2758716">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758719">s</span>&nbsp;<span class="op" id="2758721">:=</span>&nbsp;<span class="op" id="2758724">(</span><span class="op" id="2758725">*</span><span class="ident" id="2758726">sliceHeader</span><span class="op" id="2758737">)</span><span class="op" id="2758738">(</span><span class="ident" id="2758739">v</span><span class="op" id="2758740">.</span><span class="ident" id="2758741">ptr</span><span class="op" id="2758744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2758747">if</span>&nbsp;<span class="builtintype" id="2758750">uint</span><span class="op" id="2758754">(</span><span class="ident" id="2758755">n</span><span class="op" id="2758756">)</span>&nbsp;<span class="op" id="2758758">&gt;</span>&nbsp;<span class="builtintype" id="2758760">uint</span><span class="op" id="2758764">(</span><span class="ident" id="2758765">s</span><span class="op" id="2758766">.</span><span class="ident" id="2758767">Cap</span><span class="op" id="2758770">)</span>&nbsp;<span class="op" id="2758772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2758776">panic</span><span class="op" id="2758781">(</span><span class="string" id="2758782">&#34;reflect:&nbsp;slice&nbsp;length&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetLen&#34;</span><span class="op" id="2758828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2758831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2758834">s</span><span class="op" id="2758835">.</span><span class="ident" id="2758836">Len</span>&nbsp;<span class="op" id="2758840">=</span>&nbsp;<span class="ident" id="2758842">n</span><br>
<span class="lineno">1395</span><span class="op" id="2758844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2758847">//&nbsp;SetCap&nbsp;sets&nbsp;v&#39;s&nbsp;capacity&nbsp;to&nbsp;n.</span><br>
<span class="lineno"></span><span class="comment" id="2758881">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Slice&nbsp;or&nbsp;if&nbsp;n&nbsp;is&nbsp;smaller&nbsp;than&nbsp;the&nbsp;length&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="2758957">//&nbsp;greater&nbsp;than&nbsp;the&nbsp;capacity&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno">1400</span><span class="keyword" id="2759000">func</span>&nbsp;<span class="op" id="2759005">(</span><span class="ident" id="2759006">v</span>&nbsp;<span class="ident" id="2759008">Value</span><span class="op" id="2759013">)</span>&nbsp;<span class="ident" id="2759015">SetCap</span><span class="op" id="2759021">(</span><span class="ident" id="2759022">n</span>&nbsp;<span class="builtintype" id="2759024">int</span><span class="op" id="2759027">)</span>&nbsp;<span class="op" id="2759029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759032">v</span><span class="op" id="2759033">.</span><span class="ident" id="2759034">mustBeAssignable</span><span class="op" id="2759050">(</span><span class="op" id="2759051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759054">v</span><span class="op" id="2759055">.</span><span class="ident" id="2759056">mustBe</span><span class="op" id="2759062">(</span><span class="ident" id="2759063">Slice</span><span class="op" id="2759068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759071">s</span>&nbsp;<span class="op" id="2759073">:=</span>&nbsp;<span class="op" id="2759076">(</span><span class="op" id="2759077">*</span><span class="ident" id="2759078">sliceHeader</span><span class="op" id="2759089">)</span><span class="op" id="2759090">(</span><span class="ident" id="2759091">v</span><span class="op" id="2759092">.</span><span class="ident" id="2759093">ptr</span><span class="op" id="2759096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759099">if</span>&nbsp;<span class="ident" id="2759102">n</span>&nbsp;<span class="op" id="2759104">&lt;</span>&nbsp;<span class="builtintype" id="2759106">int</span><span class="op" id="2759109">(</span><span class="ident" id="2759110">s</span><span class="op" id="2759111">.</span><span class="ident" id="2759112">Len</span><span class="op" id="2759115">)</span>&nbsp;<span class="op" id="2759117">||</span>&nbsp;<span class="ident" id="2759120">n</span>&nbsp;<span class="op" id="2759122">&gt;</span>&nbsp;<span class="builtintype" id="2759124">int</span><span class="op" id="2759127">(</span><span class="ident" id="2759128">s</span><span class="op" id="2759129">.</span><span class="ident" id="2759130">Cap</span><span class="op" id="2759133">)</span>&nbsp;<span class="op" id="2759135">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2759139">panic</span><span class="op" id="2759144">(</span><span class="string" id="2759145">&#34;reflect:&nbsp;slice&nbsp;capacity&nbsp;out&nbsp;of&nbsp;range&nbsp;in&nbsp;SetCap&#34;</span><span class="op" id="2759193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759199">s</span><span class="op" id="2759200">.</span><span class="ident" id="2759201">Cap</span>&nbsp;<span class="op" id="2759205">=</span>&nbsp;<span class="ident" id="2759207">n</span><br>
<span class="lineno"></span><span class="op" id="2759209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1410</span><span class="comment" id="2759212">//&nbsp;SetMapIndex&nbsp;sets&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;key&nbsp;in&nbsp;the&nbsp;map&nbsp;v&nbsp;to&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="2759283">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Map.</span><br>
<span class="lineno"></span><span class="comment" id="2759320">//&nbsp;If&nbsp;val&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value,&nbsp;SetMapIndex&nbsp;deletes&nbsp;the&nbsp;key&nbsp;from&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="2759391">//&nbsp;Otherwise&nbsp;if&nbsp;v&nbsp;holds&nbsp;a&nbsp;nil&nbsp;map,&nbsp;SetMapIndex&nbsp;will&nbsp;panic.</span><br>
<span class="lineno"></span><span class="comment" id="2759450">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;key&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;key&nbsp;type,</span><br>
<span class="lineno">1415</span><span class="comment" id="2759517">//&nbsp;and&nbsp;val&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;map&#39;s&nbsp;value&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2759580">func</span>&nbsp;<span class="op" id="2759585">(</span><span class="ident" id="2759586">v</span>&nbsp;<span class="ident" id="2759588">Value</span><span class="op" id="2759593">)</span>&nbsp;<span class="ident" id="2759595">SetMapIndex</span><span class="op" id="2759606">(</span><span class="ident" id="2759607">key</span><span class="op" id="2759610">,</span>&nbsp;<span class="ident" id="2759612">val</span>&nbsp;<span class="ident" id="2759616">Value</span><span class="op" id="2759621">)</span>&nbsp;<span class="op" id="2759623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759626">v</span><span class="op" id="2759627">.</span><span class="ident" id="2759628">mustBe</span><span class="op" id="2759634">(</span><span class="ident" id="2759635">Map</span><span class="op" id="2759638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759641">v</span><span class="op" id="2759642">.</span><span class="ident" id="2759643">mustBeExported</span><span class="op" id="2759657">(</span><span class="op" id="2759658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759661">key</span><span class="op" id="2759664">.</span><span class="ident" id="2759665">mustBeExported</span><span class="op" id="2759679">(</span><span class="op" id="2759680">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759683">tt</span>&nbsp;<span class="op" id="2759686">:=</span>&nbsp;<span class="op" id="2759689">(</span><span class="op" id="2759690">*</span><span class="ident" id="2759691">mapType</span><span class="op" id="2759698">)</span><span class="op" id="2759699">(</span><span class="ident" id="2759700">unsafe</span><span class="op" id="2759706">.</span><span class="ident" id="2759707">Pointer</span><span class="op" id="2759714">(</span><span class="ident" id="2759715">v</span><span class="op" id="2759716">.</span><span class="ident" id="2759717">typ</span><span class="op" id="2759720">)</span><span class="op" id="2759721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759724">key</span>&nbsp;<span class="op" id="2759728">=</span>&nbsp;<span class="ident" id="2759730">key</span><span class="op" id="2759733">.</span><span class="ident" id="2759734">assignTo</span><span class="op" id="2759742">(</span><span class="string" id="2759743">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2759770">,</span>&nbsp;<span class="ident" id="2759772">tt</span><span class="op" id="2759774">.</span><span class="ident" id="2759775">key</span><span class="op" id="2759778">,</span>&nbsp;<span class="ident" id="2759780">nil</span><span class="op" id="2759783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759786">var</span>&nbsp;<span class="ident" id="2759790">k</span>&nbsp;<span class="ident" id="2759792">unsafe</span><span class="op" id="2759798">.</span><span class="ident" id="2759799">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759808">if</span>&nbsp;<span class="ident" id="2759811">key</span><span class="op" id="2759814">.</span><span class="ident" id="2759815">flag</span><span class="op" id="2759819">&amp;</span><span class="ident" id="2759820">flagIndir</span>&nbsp;<span class="op" id="2759830">!=</span>&nbsp;<span class="num" id="2759833">0</span>&nbsp;<span class="op" id="2759835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759839">k</span>&nbsp;<span class="op" id="2759841">=</span>&nbsp;<span class="ident" id="2759843">key</span><span class="op" id="2759846">.</span><span class="ident" id="2759847">ptr</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759852">}</span>&nbsp;<span class="keyword" id="2759854">else</span>&nbsp;<span class="op" id="2759859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759863">k</span>&nbsp;<span class="op" id="2759865">=</span>&nbsp;<span class="ident" id="2759867">unsafe</span><span class="op" id="2759873">.</span><span class="ident" id="2759874">Pointer</span><span class="op" id="2759881">(</span><span class="op" id="2759882">&amp;</span><span class="ident" id="2759883">key</span><span class="op" id="2759886">.</span><span class="ident" id="2759887">ptr</span><span class="op" id="2759890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759896">if</span>&nbsp;<span class="ident" id="2759899">val</span><span class="op" id="2759902">.</span><span class="ident" id="2759903">typ</span>&nbsp;<span class="op" id="2759907">==</span>&nbsp;<span class="ident" id="2759910">nil</span>&nbsp;<span class="op" id="2759914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759918">mapdelete</span><span class="op" id="2759927">(</span><span class="ident" id="2759928">v</span><span class="op" id="2759929">.</span><span class="ident" id="2759930">typ</span><span class="op" id="2759933">,</span>&nbsp;<span class="ident" id="2759935">v</span><span class="op" id="2759936">.</span><span class="ident" id="2759937">pointer</span><span class="op" id="2759944">(</span><span class="op" id="2759945">)</span><span class="op" id="2759946">,</span>&nbsp;<span class="ident" id="2759948">k</span><span class="op" id="2759949">)</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2759953">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2759961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759964">val</span><span class="op" id="2759967">.</span><span class="ident" id="2759968">mustBeExported</span><span class="op" id="2759982">(</span><span class="op" id="2759983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2759986">val</span>&nbsp;<span class="op" id="2759990">=</span>&nbsp;<span class="ident" id="2759992">val</span><span class="op" id="2759995">.</span><span class="ident" id="2759996">assignTo</span><span class="op" id="2760004">(</span><span class="string" id="2760005">&#34;reflect.Value.SetMapIndex&#34;</span><span class="op" id="2760032">,</span>&nbsp;<span class="ident" id="2760034">tt</span><span class="op" id="2760036">.</span><span class="ident" id="2760037">elem</span><span class="op" id="2760041">,</span>&nbsp;<span class="ident" id="2760043">nil</span><span class="op" id="2760046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760049">var</span>&nbsp;<span class="ident" id="2760053">e</span>&nbsp;<span class="ident" id="2760055">unsafe</span><span class="op" id="2760061">.</span><span class="ident" id="2760062">Pointer</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760071">if</span>&nbsp;<span class="ident" id="2760074">val</span><span class="op" id="2760077">.</span><span class="ident" id="2760078">flag</span><span class="op" id="2760082">&amp;</span><span class="ident" id="2760083">flagIndir</span>&nbsp;<span class="op" id="2760093">!=</span>&nbsp;<span class="num" id="2760096">0</span>&nbsp;<span class="op" id="2760098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760102">e</span>&nbsp;<span class="op" id="2760104">=</span>&nbsp;<span class="ident" id="2760106">val</span><span class="op" id="2760109">.</span><span class="ident" id="2760110">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760115">}</span>&nbsp;<span class="keyword" id="2760117">else</span>&nbsp;<span class="op" id="2760122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760126">e</span>&nbsp;<span class="op" id="2760128">=</span>&nbsp;<span class="ident" id="2760130">unsafe</span><span class="op" id="2760136">.</span><span class="ident" id="2760137">Pointer</span><span class="op" id="2760144">(</span><span class="op" id="2760145">&amp;</span><span class="ident" id="2760146">val</span><span class="op" id="2760149">.</span><span class="ident" id="2760150">ptr</span><span class="op" id="2760153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760156">}</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760159">mapassign</span><span class="op" id="2760168">(</span><span class="ident" id="2760169">v</span><span class="op" id="2760170">.</span><span class="ident" id="2760171">typ</span><span class="op" id="2760174">,</span>&nbsp;<span class="ident" id="2760176">v</span><span class="op" id="2760177">.</span><span class="ident" id="2760178">pointer</span><span class="op" id="2760185">(</span><span class="op" id="2760186">)</span><span class="op" id="2760187">,</span>&nbsp;<span class="ident" id="2760189">k</span><span class="op" id="2760190">,</span>&nbsp;<span class="ident" id="2760192">e</span><span class="op" id="2760193">)</span><br>
<span class="lineno"></span><span class="op" id="2760195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2760198">//&nbsp;SetUint&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2760241">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64,&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1445</span><span class="keyword" id="2760347">func</span>&nbsp;<span class="op" id="2760352">(</span><span class="ident" id="2760353">v</span>&nbsp;<span class="ident" id="2760355">Value</span><span class="op" id="2760360">)</span>&nbsp;<span class="ident" id="2760362">SetUint</span><span class="op" id="2760369">(</span><span class="ident" id="2760370">x</span>&nbsp;<span class="ident" id="2760372">uint64</span><span class="op" id="2760378">)</span>&nbsp;<span class="op" id="2760380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760383">v</span><span class="op" id="2760384">.</span><span class="ident" id="2760385">mustBeAssignable</span><span class="op" id="2760401">(</span><span class="op" id="2760402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760405">switch</span>&nbsp;<span class="ident" id="2760412">k</span>&nbsp;<span class="op" id="2760414">:=</span>&nbsp;<span class="ident" id="2760417">v</span><span class="op" id="2760418">.</span><span class="ident" id="2760419">kind</span><span class="op" id="2760423">(</span><span class="op" id="2760424">)</span><span class="op" id="2760425">;</span>&nbsp;<span class="ident" id="2760427">k</span>&nbsp;<span class="op" id="2760429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760432">default</span><span class="op" id="2760439">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2760443">panic</span><span class="op" id="2760448">(</span><span class="op" id="2760449">&amp;</span><span class="ident" id="2760450">ValueError</span><span class="op" id="2760460">{</span><span class="string" id="2760461">&#34;reflect.Value.SetUint&#34;</span><span class="op" id="2760484">,</span>&nbsp;<span class="ident" id="2760486">v</span><span class="op" id="2760487">.</span><span class="ident" id="2760488">kind</span><span class="op" id="2760492">(</span><span class="op" id="2760493">)</span><span class="op" id="2760494">}</span><span class="op" id="2760495">)</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760498">case</span>&nbsp;<span class="ident" id="2760503">Uint</span><span class="op" id="2760507">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760511">*</span><span class="op" id="2760512">(</span><span class="op" id="2760513">*</span><span class="builtintype" id="2760514">uint</span><span class="op" id="2760518">)</span><span class="op" id="2760519">(</span><span class="ident" id="2760520">v</span><span class="op" id="2760521">.</span><span class="ident" id="2760522">ptr</span><span class="op" id="2760525">)</span>&nbsp;<span class="op" id="2760527">=</span>&nbsp;<span class="builtintype" id="2760529">uint</span><span class="op" id="2760533">(</span><span class="ident" id="2760534">x</span><span class="op" id="2760535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760538">case</span>&nbsp;<span class="ident" id="2760543">Uint8</span><span class="op" id="2760548">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760552">*</span><span class="op" id="2760553">(</span><span class="op" id="2760554">*</span><span class="builtintype" id="2760555">uint8</span><span class="op" id="2760560">)</span><span class="op" id="2760561">(</span><span class="ident" id="2760562">v</span><span class="op" id="2760563">.</span><span class="ident" id="2760564">ptr</span><span class="op" id="2760567">)</span>&nbsp;<span class="op" id="2760569">=</span>&nbsp;<span class="builtintype" id="2760571">uint8</span><span class="op" id="2760576">(</span><span class="ident" id="2760577">x</span><span class="op" id="2760578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760581">case</span>&nbsp;<span class="ident" id="2760586">Uint16</span><span class="op" id="2760592">:</span><br>
<span class="lineno">1455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760596">*</span><span class="op" id="2760597">(</span><span class="op" id="2760598">*</span><span class="builtintype" id="2760599">uint16</span><span class="op" id="2760605">)</span><span class="op" id="2760606">(</span><span class="ident" id="2760607">v</span><span class="op" id="2760608">.</span><span class="ident" id="2760609">ptr</span><span class="op" id="2760612">)</span>&nbsp;<span class="op" id="2760614">=</span>&nbsp;<span class="builtintype" id="2760616">uint16</span><span class="op" id="2760622">(</span><span class="ident" id="2760623">x</span><span class="op" id="2760624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760627">case</span>&nbsp;<span class="ident" id="2760632">Uint32</span><span class="op" id="2760638">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760642">*</span><span class="op" id="2760643">(</span><span class="op" id="2760644">*</span><span class="builtintype" id="2760645">uint32</span><span class="op" id="2760651">)</span><span class="op" id="2760652">(</span><span class="ident" id="2760653">v</span><span class="op" id="2760654">.</span><span class="ident" id="2760655">ptr</span><span class="op" id="2760658">)</span>&nbsp;<span class="op" id="2760660">=</span>&nbsp;<span class="builtintype" id="2760662">uint32</span><span class="op" id="2760668">(</span><span class="ident" id="2760669">x</span><span class="op" id="2760670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760673">case</span>&nbsp;<span class="ident" id="2760678">Uint64</span><span class="op" id="2760684">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760688">*</span><span class="op" id="2760689">(</span><span class="op" id="2760690">*</span><span class="ident" id="2760691">uint64</span><span class="op" id="2760697">)</span><span class="op" id="2760698">(</span><span class="ident" id="2760699">v</span><span class="op" id="2760700">.</span><span class="ident" id="2760701">ptr</span><span class="op" id="2760704">)</span>&nbsp;<span class="op" id="2760706">=</span>&nbsp;<span class="ident" id="2760708">x</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2760711">case</span>&nbsp;<span class="ident" id="2760716">Uintptr</span><span class="op" id="2760723">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760727">*</span><span class="op" id="2760728">(</span><span class="op" id="2760729">*</span><span class="builtintype" id="2760730">uintptr</span><span class="op" id="2760737">)</span><span class="op" id="2760738">(</span><span class="ident" id="2760739">v</span><span class="op" id="2760740">.</span><span class="ident" id="2760741">ptr</span><span class="op" id="2760744">)</span>&nbsp;<span class="op" id="2760746">=</span>&nbsp;<span class="builtintype" id="2760748">uintptr</span><span class="op" id="2760755">(</span><span class="ident" id="2760756">x</span><span class="op" id="2760757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760760">}</span><br>
<span class="lineno"></span><span class="op" id="2760762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="comment" id="2760765">//&nbsp;SetPointer&nbsp;sets&nbsp;the&nbsp;unsafe.Pointer&nbsp;value&nbsp;v&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2760817">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;UnsafePointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2760864">func</span>&nbsp;<span class="op" id="2760869">(</span><span class="ident" id="2760870">v</span>&nbsp;<span class="ident" id="2760872">Value</span><span class="op" id="2760877">)</span>&nbsp;<span class="ident" id="2760879">SetPointer</span><span class="op" id="2760889">(</span><span class="ident" id="2760890">x</span>&nbsp;<span class="ident" id="2760892">unsafe</span><span class="op" id="2760898">.</span><span class="ident" id="2760899">Pointer</span><span class="op" id="2760906">)</span>&nbsp;<span class="op" id="2760908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760911">v</span><span class="op" id="2760912">.</span><span class="ident" id="2760913">mustBeAssignable</span><span class="op" id="2760929">(</span><span class="op" id="2760930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2760933">v</span><span class="op" id="2760934">.</span><span class="ident" id="2760935">mustBe</span><span class="op" id="2760941">(</span><span class="ident" id="2760942">UnsafePointer</span><span class="op" id="2760955">)</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2760958">*</span><span class="op" id="2760959">(</span><span class="op" id="2760960">*</span><span class="ident" id="2760961">unsafe</span><span class="op" id="2760967">.</span><span class="ident" id="2760968">Pointer</span><span class="op" id="2760975">)</span><span class="op" id="2760976">(</span><span class="ident" id="2760977">v</span><span class="op" id="2760978">.</span><span class="ident" id="2760979">ptr</span><span class="op" id="2760982">)</span>&nbsp;<span class="op" id="2760984">=</span>&nbsp;<span class="ident" id="2760986">x</span><br>
<span class="lineno"></span><span class="op" id="2760988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2760991">//&nbsp;SetString&nbsp;sets&nbsp;v&#39;s&nbsp;underlying&nbsp;value&nbsp;to&nbsp;x.</span><br>
<span class="lineno"></span><span class="comment" id="2761036">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String&nbsp;or&nbsp;if&nbsp;CanSet()&nbsp;is&nbsp;false.</span><br>
<span class="lineno">1475</span><span class="keyword" id="2761100">func</span>&nbsp;<span class="op" id="2761105">(</span><span class="ident" id="2761106">v</span>&nbsp;<span class="ident" id="2761108">Value</span><span class="op" id="2761113">)</span>&nbsp;<span class="ident" id="2761115">SetString</span><span class="op" id="2761124">(</span><span class="ident" id="2761125">x</span>&nbsp;<span class="builtintype" id="2761127">string</span><span class="op" id="2761133">)</span>&nbsp;<span class="op" id="2761135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761138">v</span><span class="op" id="2761139">.</span><span class="ident" id="2761140">mustBeAssignable</span><span class="op" id="2761156">(</span><span class="op" id="2761157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761160">v</span><span class="op" id="2761161">.</span><span class="ident" id="2761162">mustBe</span><span class="op" id="2761168">(</span><span class="ident" id="2761169">String</span><span class="op" id="2761175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761178">*</span><span class="op" id="2761179">(</span><span class="op" id="2761180">*</span><span class="builtintype" id="2761181">string</span><span class="op" id="2761187">)</span><span class="op" id="2761188">(</span><span class="ident" id="2761189">v</span><span class="op" id="2761190">.</span><span class="ident" id="2761191">ptr</span><span class="op" id="2761194">)</span>&nbsp;<span class="op" id="2761196">=</span>&nbsp;<span class="ident" id="2761198">x</span><br>
<span class="lineno"></span><span class="op" id="2761200">}</span><br>
<span class="lineno">1480</span><br>
<span class="lineno"></span><span class="comment" id="2761203">//&nbsp;Slice&nbsp;returns&nbsp;v[i:j].</span><br>
<span class="lineno"></span><span class="comment" id="2761228">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array,&nbsp;Slice&nbsp;or&nbsp;String,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2761319">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2761359">func</span>&nbsp;<span class="op" id="2761364">(</span><span class="ident" id="2761365">v</span>&nbsp;<span class="ident" id="2761367">Value</span><span class="op" id="2761372">)</span>&nbsp;<span class="ident" id="2761374">Slice</span><span class="op" id="2761379">(</span><span class="ident" id="2761380">i</span><span class="op" id="2761381">,</span>&nbsp;<span class="ident" id="2761383">j</span>&nbsp;<span class="builtintype" id="2761385">int</span><span class="op" id="2761388">)</span>&nbsp;<span class="ident" id="2761390">Value</span>&nbsp;<span class="op" id="2761396">{</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761399">var</span>&nbsp;<span class="op" id="2761403">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761407">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2761412">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761418">typ</span>&nbsp;&nbsp;<span class="op" id="2761423">*</span><span class="ident" id="2761424">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761436">base</span>&nbsp;<span class="ident" id="2761441">unsafe</span><span class="op" id="2761447">.</span><span class="ident" id="2761448">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761457">)</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761460">switch</span>&nbsp;<span class="ident" id="2761467">kind</span>&nbsp;<span class="op" id="2761472">:=</span>&nbsp;<span class="ident" id="2761475">v</span><span class="op" id="2761476">.</span><span class="ident" id="2761477">kind</span><span class="op" id="2761481">(</span><span class="op" id="2761482">)</span><span class="op" id="2761483">;</span>&nbsp;<span class="ident" id="2761485">kind</span>&nbsp;<span class="op" id="2761490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761493">default</span><span class="op" id="2761500">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761504">panic</span><span class="op" id="2761509">(</span><span class="op" id="2761510">&amp;</span><span class="ident" id="2761511">ValueError</span><span class="op" id="2761521">{</span><span class="string" id="2761522">&#34;reflect.Value.Slice&#34;</span><span class="op" id="2761543">,</span>&nbsp;<span class="ident" id="2761545">v</span><span class="op" id="2761546">.</span><span class="ident" id="2761547">kind</span><span class="op" id="2761551">(</span><span class="op" id="2761552">)</span><span class="op" id="2761553">}</span><span class="op" id="2761554">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761558">case</span>&nbsp;<span class="ident" id="2761563">Array</span><span class="op" id="2761568">:</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761572">if</span>&nbsp;<span class="ident" id="2761575">v</span><span class="op" id="2761576">.</span><span class="ident" id="2761577">flag</span><span class="op" id="2761581">&amp;</span><span class="ident" id="2761582">flagAddr</span>&nbsp;<span class="op" id="2761591">==</span>&nbsp;<span class="num" id="2761594">0</span>&nbsp;<span class="op" id="2761596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761601">panic</span><span class="op" id="2761606">(</span><span class="string" id="2761607">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2761658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2761662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761666">tt</span>&nbsp;<span class="op" id="2761669">:=</span>&nbsp;<span class="op" id="2761672">(</span><span class="op" id="2761673">*</span><span class="ident" id="2761674">arrayType</span><span class="op" id="2761683">)</span><span class="op" id="2761684">(</span><span class="ident" id="2761685">unsafe</span><span class="op" id="2761691">.</span><span class="ident" id="2761692">Pointer</span><span class="op" id="2761699">(</span><span class="ident" id="2761700">v</span><span class="op" id="2761701">.</span><span class="ident" id="2761702">typ</span><span class="op" id="2761705">)</span><span class="op" id="2761706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761710">cap</span>&nbsp;<span class="op" id="2761714">=</span>&nbsp;<span class="builtintype" id="2761716">int</span><span class="op" id="2761719">(</span><span class="ident" id="2761720">tt</span><span class="op" id="2761722">.</span><span class="builtinfunc" id="2761723">len</span><span class="op" id="2761726">)</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761730">typ</span>&nbsp;<span class="op" id="2761734">=</span>&nbsp;<span class="op" id="2761736">(</span><span class="op" id="2761737">*</span><span class="ident" id="2761738">sliceType</span><span class="op" id="2761747">)</span><span class="op" id="2761748">(</span><span class="ident" id="2761749">unsafe</span><span class="op" id="2761755">.</span><span class="ident" id="2761756">Pointer</span><span class="op" id="2761763">(</span><span class="ident" id="2761764">tt</span><span class="op" id="2761766">.</span><span class="ident" id="2761767">slice</span><span class="op" id="2761772">)</span><span class="op" id="2761773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761777">base</span>&nbsp;<span class="op" id="2761782">=</span>&nbsp;<span class="ident" id="2761784">v</span><span class="op" id="2761785">.</span><span class="ident" id="2761786">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761792">case</span>&nbsp;<span class="ident" id="2761797">Slice</span><span class="op" id="2761802">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761806">typ</span>&nbsp;<span class="op" id="2761810">=</span>&nbsp;<span class="op" id="2761812">(</span><span class="op" id="2761813">*</span><span class="ident" id="2761814">sliceType</span><span class="op" id="2761823">)</span><span class="op" id="2761824">(</span><span class="ident" id="2761825">unsafe</span><span class="op" id="2761831">.</span><span class="ident" id="2761832">Pointer</span><span class="op" id="2761839">(</span><span class="ident" id="2761840">v</span><span class="op" id="2761841">.</span><span class="ident" id="2761842">typ</span><span class="op" id="2761845">)</span><span class="op" id="2761846">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761850">s</span>&nbsp;<span class="op" id="2761852">:=</span>&nbsp;<span class="op" id="2761855">(</span><span class="op" id="2761856">*</span><span class="ident" id="2761857">sliceHeader</span><span class="op" id="2761868">)</span><span class="op" id="2761869">(</span><span class="ident" id="2761870">v</span><span class="op" id="2761871">.</span><span class="ident" id="2761872">ptr</span><span class="op" id="2761875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761879">base</span>&nbsp;<span class="op" id="2761884">=</span>&nbsp;<span class="ident" id="2761886">unsafe</span><span class="op" id="2761892">.</span><span class="ident" id="2761893">Pointer</span><span class="op" id="2761900">(</span><span class="ident" id="2761901">s</span><span class="op" id="2761902">.</span><span class="ident" id="2761903">Data</span><span class="op" id="2761907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2761911">cap</span>&nbsp;<span class="op" id="2761915">=</span>&nbsp;<span class="ident" id="2761917">s</span><span class="op" id="2761918">.</span><span class="ident" id="2761919">Cap</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761925">case</span>&nbsp;<span class="ident" id="2761930">String</span><span class="op" id="2761936">:</span><br>
<span class="lineno">1510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2761940">s</span>&nbsp;<span class="op" id="2761942">:=</span>&nbsp;<span class="op" id="2761945">(</span><span class="op" id="2761946">*</span><span class="ident" id="2761947">stringHeader</span><span class="op" id="2761959">)</span><span class="op" id="2761960">(</span><span class="ident" id="2761961">v</span><span class="op" id="2761962">.</span><span class="ident" id="2761963">ptr</span><span class="op" id="2761966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2761970">if</span>&nbsp;<span class="ident" id="2761973">i</span>&nbsp;<span class="op" id="2761975">&lt;</span>&nbsp;<span class="num" id="2761977">0</span>&nbsp;<span class="op" id="2761979">||</span>&nbsp;<span class="ident" id="2761982">j</span>&nbsp;<span class="op" id="2761984">&lt;</span>&nbsp;<span class="ident" id="2761986">i</span>&nbsp;<span class="op" id="2761988">||</span>&nbsp;<span class="ident" id="2761991">j</span>&nbsp;<span class="op" id="2761993">&gt;</span>&nbsp;<span class="ident" id="2761995">s</span><span class="op" id="2761996">.</span><span class="ident" id="2761997">Len</span>&nbsp;<span class="op" id="2762001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2762006">panic</span><span class="op" id="2762011">(</span><span class="string" id="2762012">&#34;reflect.Value.Slice:&nbsp;string&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2762067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762075">t</span>&nbsp;<span class="op" id="2762077">:=</span>&nbsp;<span class="ident" id="2762080">stringHeader</span><span class="op" id="2762092">{</span><span class="ident" id="2762093">unsafe</span><span class="op" id="2762099">.</span><span class="ident" id="2762100">Pointer</span><span class="op" id="2762107">(</span><span class="builtintype" id="2762108">uintptr</span><span class="op" id="2762115">(</span><span class="ident" id="2762116">s</span><span class="op" id="2762117">.</span><span class="ident" id="2762118">Data</span><span class="op" id="2762122">)</span>&nbsp;<span class="op" id="2762124">+</span>&nbsp;<span class="builtintype" id="2762126">uintptr</span><span class="op" id="2762133">(</span><span class="ident" id="2762134">i</span><span class="op" id="2762135">)</span><span class="op" id="2762136">)</span><span class="op" id="2762137">,</span>&nbsp;<span class="ident" id="2762139">j</span>&nbsp;<span class="op" id="2762141">-</span>&nbsp;<span class="ident" id="2762143">i</span><span class="op" id="2762144">}</span><br>
<span class="lineno">1515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762148">return</span>&nbsp;<span class="ident" id="2762155">Value</span><span class="op" id="2762160">{</span><span class="ident" id="2762161">v</span><span class="op" id="2762162">.</span><span class="ident" id="2762163">typ</span><span class="op" id="2762166">,</span>&nbsp;<span class="ident" id="2762168">unsafe</span><span class="op" id="2762174">.</span><span class="ident" id="2762175">Pointer</span><span class="op" id="2762182">(</span><span class="op" id="2762183">&amp;</span><span class="ident" id="2762184">t</span><span class="op" id="2762185">)</span><span class="op" id="2762186">,</span>&nbsp;<span class="ident" id="2762188">v</span><span class="op" id="2762189">.</span><span class="ident" id="2762190">flag</span><span class="op" id="2762194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762201">if</span>&nbsp;<span class="ident" id="2762204">i</span>&nbsp;<span class="op" id="2762206">&lt;</span>&nbsp;<span class="num" id="2762208">0</span>&nbsp;<span class="op" id="2762210">||</span>&nbsp;<span class="ident" id="2762213">j</span>&nbsp;<span class="op" id="2762215">&lt;</span>&nbsp;<span class="ident" id="2762217">i</span>&nbsp;<span class="op" id="2762219">||</span>&nbsp;<span class="ident" id="2762222">j</span>&nbsp;<span class="op" id="2762224">&gt;</span>&nbsp;<span class="builtinfunc" id="2762226">cap</span>&nbsp;<span class="op" id="2762230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2762234">panic</span><span class="op" id="2762239">(</span><span class="string" id="2762240">&#34;reflect.Value.Slice:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2762288">)</span><br>
<span class="lineno">1520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762295">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;gc&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762356">var</span>&nbsp;<span class="ident" id="2762360">x</span>&nbsp;<span class="op" id="2762362">[</span><span class="op" id="2762363">]</span><span class="ident" id="2762364">unsafe</span><span class="op" id="2762370">.</span><span class="ident" id="2762371">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno">1525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762381">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762422">s</span>&nbsp;<span class="op" id="2762424">:=</span>&nbsp;<span class="op" id="2762427">(</span><span class="op" id="2762428">*</span><span class="ident" id="2762429">sliceHeader</span><span class="op" id="2762440">)</span><span class="op" id="2762441">(</span><span class="ident" id="2762442">unsafe</span><span class="op" id="2762448">.</span><span class="ident" id="2762449">Pointer</span><span class="op" id="2762456">(</span><span class="op" id="2762457">&amp;</span><span class="ident" id="2762458">x</span><span class="op" id="2762459">)</span><span class="op" id="2762460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762463">s</span><span class="op" id="2762464">.</span><span class="ident" id="2762465">Len</span>&nbsp;<span class="op" id="2762469">=</span>&nbsp;<span class="ident" id="2762471">j</span>&nbsp;<span class="op" id="2762473">-</span>&nbsp;<span class="ident" id="2762475">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762478">s</span><span class="op" id="2762479">.</span><span class="ident" id="2762480">Cap</span>&nbsp;<span class="op" id="2762484">=</span>&nbsp;<span class="builtinfunc" id="2762486">cap</span>&nbsp;<span class="op" id="2762490">-</span>&nbsp;<span class="ident" id="2762492">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762495">if</span>&nbsp;<span class="builtinfunc" id="2762498">cap</span><span class="op" id="2762501">-</span><span class="ident" id="2762502">i</span>&nbsp;<span class="op" id="2762504">&gt;</span>&nbsp;<span class="num" id="2762506">0</span>&nbsp;<span class="op" id="2762508">{</span><br>
<span class="lineno">1530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762512">s</span><span class="op" id="2762513">.</span><span class="ident" id="2762514">Data</span>&nbsp;<span class="op" id="2762519">=</span>&nbsp;<span class="ident" id="2762521">unsafe</span><span class="op" id="2762527">.</span><span class="ident" id="2762528">Pointer</span><span class="op" id="2762535">(</span><span class="builtintype" id="2762536">uintptr</span><span class="op" id="2762543">(</span><span class="ident" id="2762544">base</span><span class="op" id="2762548">)</span>&nbsp;<span class="op" id="2762550">+</span>&nbsp;<span class="builtintype" id="2762552">uintptr</span><span class="op" id="2762559">(</span><span class="ident" id="2762560">i</span><span class="op" id="2762561">)</span><span class="op" id="2762562">*</span><span class="ident" id="2762563">typ</span><span class="op" id="2762566">.</span><span class="ident" id="2762567">elem</span><span class="op" id="2762571">.</span><span class="ident" id="2762572">Size</span><span class="op" id="2762576">(</span><span class="op" id="2762577">)</span><span class="op" id="2762578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762581">}</span>&nbsp;<span class="keyword" id="2762583">else</span>&nbsp;<span class="op" id="2762588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2762592">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762659">s</span><span class="op" id="2762660">.</span><span class="ident" id="2762661">Data</span>&nbsp;<span class="op" id="2762666">=</span>&nbsp;<span class="ident" id="2762668">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2762674">}</span><br>
<span class="lineno">1535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2762678">fl</span>&nbsp;<span class="op" id="2762681">:=</span>&nbsp;<span class="ident" id="2762684">v</span><span class="op" id="2762685">.</span><span class="ident" id="2762686">flag</span><span class="op" id="2762690">&amp;</span><span class="ident" id="2762691">flagRO</span>&nbsp;<span class="op" id="2762698">|</span>&nbsp;<span class="ident" id="2762700">flagIndir</span>&nbsp;<span class="op" id="2762710">|</span>&nbsp;<span class="ident" id="2762712">flag</span><span class="op" id="2762716">(</span><span class="ident" id="2762717">Slice</span><span class="op" id="2762722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2762725">return</span>&nbsp;<span class="ident" id="2762732">Value</span><span class="op" id="2762737">{</span><span class="ident" id="2762738">typ</span><span class="op" id="2762741">.</span><span class="ident" id="2762742">common</span><span class="op" id="2762748">(</span><span class="op" id="2762749">)</span><span class="op" id="2762750">,</span>&nbsp;<span class="ident" id="2762752">unsafe</span><span class="op" id="2762758">.</span><span class="ident" id="2762759">Pointer</span><span class="op" id="2762766">(</span><span class="op" id="2762767">&amp;</span><span class="ident" id="2762768">x</span><span class="op" id="2762769">)</span><span class="op" id="2762770">,</span>&nbsp;<span class="ident" id="2762772">fl</span><span class="op" id="2762774">}</span><br>
<span class="lineno"></span><span class="op" id="2762776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1540</span><span class="comment" id="2762779">//&nbsp;Slice3&nbsp;is&nbsp;the&nbsp;3-index&nbsp;form&nbsp;of&nbsp;the&nbsp;slice&nbsp;operation:&nbsp;it&nbsp;returns&nbsp;v[i:j:k].</span><br>
<span class="lineno"></span><span class="comment" id="2762854">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Array&nbsp;or&nbsp;Slice,&nbsp;or&nbsp;if&nbsp;v&nbsp;is&nbsp;an&nbsp;unaddressable&nbsp;array,</span><br>
<span class="lineno"></span><span class="comment" id="2762937">//&nbsp;or&nbsp;if&nbsp;the&nbsp;indexes&nbsp;are&nbsp;out&nbsp;of&nbsp;bounds.</span><br>
<span class="lineno"></span><span class="keyword" id="2762977">func</span>&nbsp;<span class="op" id="2762982">(</span><span class="ident" id="2762983">v</span>&nbsp;<span class="ident" id="2762985">Value</span><span class="op" id="2762990">)</span>&nbsp;<span class="ident" id="2762992">Slice3</span><span class="op" id="2762998">(</span><span class="ident" id="2762999">i</span><span class="op" id="2763000">,</span>&nbsp;<span class="ident" id="2763002">j</span><span class="op" id="2763003">,</span>&nbsp;<span class="ident" id="2763005">k</span>&nbsp;<span class="builtintype" id="2763007">int</span><span class="op" id="2763010">)</span>&nbsp;<span class="ident" id="2763012">Value</span>&nbsp;<span class="op" id="2763018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763021">var</span>&nbsp;<span class="op" id="2763025">(</span><br>
<span class="lineno">1545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2763029">cap</span>&nbsp;&nbsp;<span class="builtintype" id="2763034">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763040">typ</span>&nbsp;&nbsp;<span class="op" id="2763045">*</span><span class="ident" id="2763046">sliceType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763058">base</span>&nbsp;<span class="ident" id="2763063">unsafe</span><span class="op" id="2763069">.</span><span class="ident" id="2763070">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763082">switch</span>&nbsp;<span class="ident" id="2763089">kind</span>&nbsp;<span class="op" id="2763094">:=</span>&nbsp;<span class="ident" id="2763097">v</span><span class="op" id="2763098">.</span><span class="ident" id="2763099">kind</span><span class="op" id="2763103">(</span><span class="op" id="2763104">)</span><span class="op" id="2763105">;</span>&nbsp;<span class="ident" id="2763107">kind</span>&nbsp;<span class="op" id="2763112">{</span><br>
<span class="lineno">1550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763115">default</span><span class="op" id="2763122">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2763126">panic</span><span class="op" id="2763131">(</span><span class="op" id="2763132">&amp;</span><span class="ident" id="2763133">ValueError</span><span class="op" id="2763143">{</span><span class="string" id="2763144">&#34;reflect.Value.Slice3&#34;</span><span class="op" id="2763166">,</span>&nbsp;<span class="ident" id="2763168">v</span><span class="op" id="2763169">.</span><span class="ident" id="2763170">kind</span><span class="op" id="2763174">(</span><span class="op" id="2763175">)</span><span class="op" id="2763176">}</span><span class="op" id="2763177">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763181">case</span>&nbsp;<span class="ident" id="2763186">Array</span><span class="op" id="2763191">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763195">if</span>&nbsp;<span class="ident" id="2763198">v</span><span class="op" id="2763199">.</span><span class="ident" id="2763200">flag</span><span class="op" id="2763204">&amp;</span><span class="ident" id="2763205">flagAddr</span>&nbsp;<span class="op" id="2763214">==</span>&nbsp;<span class="num" id="2763217">0</span>&nbsp;<span class="op" id="2763219">{</span><br>
<span class="lineno">1555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2763224">panic</span><span class="op" id="2763229">(</span><span class="string" id="2763230">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;of&nbsp;unaddressable&nbsp;array&#34;</span><span class="op" id="2763282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763290">tt</span>&nbsp;<span class="op" id="2763293">:=</span>&nbsp;<span class="op" id="2763296">(</span><span class="op" id="2763297">*</span><span class="ident" id="2763298">arrayType</span><span class="op" id="2763307">)</span><span class="op" id="2763308">(</span><span class="ident" id="2763309">unsafe</span><span class="op" id="2763315">.</span><span class="ident" id="2763316">Pointer</span><span class="op" id="2763323">(</span><span class="ident" id="2763324">v</span><span class="op" id="2763325">.</span><span class="ident" id="2763326">typ</span><span class="op" id="2763329">)</span><span class="op" id="2763330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2763334">cap</span>&nbsp;<span class="op" id="2763338">=</span>&nbsp;<span class="builtintype" id="2763340">int</span><span class="op" id="2763343">(</span><span class="ident" id="2763344">tt</span><span class="op" id="2763346">.</span><span class="builtinfunc" id="2763347">len</span><span class="op" id="2763350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763354">typ</span>&nbsp;<span class="op" id="2763358">=</span>&nbsp;<span class="op" id="2763360">(</span><span class="op" id="2763361">*</span><span class="ident" id="2763362">sliceType</span><span class="op" id="2763371">)</span><span class="op" id="2763372">(</span><span class="ident" id="2763373">unsafe</span><span class="op" id="2763379">.</span><span class="ident" id="2763380">Pointer</span><span class="op" id="2763387">(</span><span class="ident" id="2763388">tt</span><span class="op" id="2763390">.</span><span class="ident" id="2763391">slice</span><span class="op" id="2763396">)</span><span class="op" id="2763397">)</span><br>
<span class="lineno">1560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763401">base</span>&nbsp;<span class="op" id="2763406">=</span>&nbsp;<span class="ident" id="2763408">v</span><span class="op" id="2763409">.</span><span class="ident" id="2763410">ptr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763416">case</span>&nbsp;<span class="ident" id="2763421">Slice</span><span class="op" id="2763426">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763430">typ</span>&nbsp;<span class="op" id="2763434">=</span>&nbsp;<span class="op" id="2763436">(</span><span class="op" id="2763437">*</span><span class="ident" id="2763438">sliceType</span><span class="op" id="2763447">)</span><span class="op" id="2763448">(</span><span class="ident" id="2763449">unsafe</span><span class="op" id="2763455">.</span><span class="ident" id="2763456">Pointer</span><span class="op" id="2763463">(</span><span class="ident" id="2763464">v</span><span class="op" id="2763465">.</span><span class="ident" id="2763466">typ</span><span class="op" id="2763469">)</span><span class="op" id="2763470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763474">s</span>&nbsp;<span class="op" id="2763476">:=</span>&nbsp;<span class="op" id="2763479">(</span><span class="op" id="2763480">*</span><span class="ident" id="2763481">sliceHeader</span><span class="op" id="2763492">)</span><span class="op" id="2763493">(</span><span class="ident" id="2763494">v</span><span class="op" id="2763495">.</span><span class="ident" id="2763496">ptr</span><span class="op" id="2763499">)</span><br>
<span class="lineno">1565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763503">base</span>&nbsp;<span class="op" id="2763508">=</span>&nbsp;<span class="ident" id="2763510">s</span><span class="op" id="2763511">.</span><span class="ident" id="2763512">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2763519">cap</span>&nbsp;<span class="op" id="2763523">=</span>&nbsp;<span class="ident" id="2763525">s</span><span class="op" id="2763526">.</span><span class="ident" id="2763527">Cap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763536">if</span>&nbsp;<span class="ident" id="2763539">i</span>&nbsp;<span class="op" id="2763541">&lt;</span>&nbsp;<span class="num" id="2763543">0</span>&nbsp;<span class="op" id="2763545">||</span>&nbsp;<span class="ident" id="2763548">j</span>&nbsp;<span class="op" id="2763550">&lt;</span>&nbsp;<span class="ident" id="2763552">i</span>&nbsp;<span class="op" id="2763554">||</span>&nbsp;<span class="ident" id="2763557">k</span>&nbsp;<span class="op" id="2763559">&lt;</span>&nbsp;<span class="ident" id="2763561">j</span>&nbsp;<span class="op" id="2763563">||</span>&nbsp;<span class="ident" id="2763566">k</span>&nbsp;<span class="op" id="2763568">&gt;</span>&nbsp;<span class="builtinfunc" id="2763570">cap</span>&nbsp;<span class="op" id="2763574">{</span><br>
<span class="lineno">1570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2763578">panic</span><span class="op" id="2763583">(</span><span class="string" id="2763584">&#34;reflect.Value.Slice3:&nbsp;slice&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&#34;</span><span class="op" id="2763633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763640">//&nbsp;Declare&nbsp;slice&nbsp;so&nbsp;that&nbsp;the&nbsp;garbage&nbsp;collector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763688">//&nbsp;can&nbsp;see&nbsp;the&nbsp;base&nbsp;pointer&nbsp;in&nbsp;it.</span><br>
<span class="lineno">1575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763724">var</span>&nbsp;<span class="ident" id="2763728">x</span>&nbsp;<span class="op" id="2763730">[</span><span class="op" id="2763731">]</span><span class="ident" id="2763732">unsafe</span><span class="op" id="2763738">.</span><span class="ident" id="2763739">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763749">//&nbsp;Reinterpret&nbsp;as&nbsp;*sliceHeader&nbsp;to&nbsp;edit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763790">s</span>&nbsp;<span class="op" id="2763792">:=</span>&nbsp;<span class="op" id="2763795">(</span><span class="op" id="2763796">*</span><span class="ident" id="2763797">sliceHeader</span><span class="op" id="2763808">)</span><span class="op" id="2763809">(</span><span class="ident" id="2763810">unsafe</span><span class="op" id="2763816">.</span><span class="ident" id="2763817">Pointer</span><span class="op" id="2763824">(</span><span class="op" id="2763825">&amp;</span><span class="ident" id="2763826">x</span><span class="op" id="2763827">)</span><span class="op" id="2763828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763831">s</span><span class="op" id="2763832">.</span><span class="ident" id="2763833">Len</span>&nbsp;<span class="op" id="2763837">=</span>&nbsp;<span class="ident" id="2763839">j</span>&nbsp;<span class="op" id="2763841">-</span>&nbsp;<span class="ident" id="2763843">i</span><br>
<span class="lineno">1580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763846">s</span><span class="op" id="2763847">.</span><span class="ident" id="2763848">Cap</span>&nbsp;<span class="op" id="2763852">=</span>&nbsp;<span class="ident" id="2763854">k</span>&nbsp;<span class="op" id="2763856">-</span>&nbsp;<span class="ident" id="2763858">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2763861">if</span>&nbsp;<span class="ident" id="2763864">k</span><span class="op" id="2763865">-</span><span class="ident" id="2763866">i</span>&nbsp;<span class="op" id="2763868">&gt;</span>&nbsp;<span class="num" id="2763870">0</span>&nbsp;<span class="op" id="2763872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2763876">s</span><span class="op" id="2763877">.</span><span class="ident" id="2763878">Data</span>&nbsp;<span class="op" id="2763883">=</span>&nbsp;<span class="ident" id="2763885">unsafe</span><span class="op" id="2763891">.</span><span class="ident" id="2763892">Pointer</span><span class="op" id="2763899">(</span><span class="builtintype" id="2763900">uintptr</span><span class="op" id="2763907">(</span><span class="ident" id="2763908">base</span><span class="op" id="2763912">)</span>&nbsp;<span class="op" id="2763914">+</span>&nbsp;<span class="builtintype" id="2763916">uintptr</span><span class="op" id="2763923">(</span><span class="ident" id="2763924">i</span><span class="op" id="2763925">)</span><span class="op" id="2763926">*</span><span class="ident" id="2763927">typ</span><span class="op" id="2763930">.</span><span class="ident" id="2763931">elem</span><span class="op" id="2763935">.</span><span class="ident" id="2763936">Size</span><span class="op" id="2763940">(</span><span class="op" id="2763941">)</span><span class="op" id="2763942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2763945">}</span>&nbsp;<span class="keyword" id="2763947">else</span>&nbsp;<span class="op" id="2763952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2763956">//&nbsp;do&nbsp;not&nbsp;advance&nbsp;pointer,&nbsp;to&nbsp;avoid&nbsp;pointing&nbsp;beyond&nbsp;end&nbsp;of&nbsp;slice</span><br>
<span class="lineno">1585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764023">s</span><span class="op" id="2764024">.</span><span class="ident" id="2764025">Data</span>&nbsp;<span class="op" id="2764030">=</span>&nbsp;<span class="ident" id="2764032">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2764038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2764042">fl</span>&nbsp;<span class="op" id="2764045">:=</span>&nbsp;<span class="ident" id="2764048">v</span><span class="op" id="2764049">.</span><span class="ident" id="2764050">flag</span><span class="op" id="2764054">&amp;</span><span class="ident" id="2764055">flagRO</span>&nbsp;<span class="op" id="2764062">|</span>&nbsp;<span class="ident" id="2764064">flagIndir</span>&nbsp;<span class="op" id="2764074">|</span>&nbsp;<span class="ident" id="2764076">flag</span><span class="op" id="2764080">(</span><span class="ident" id="2764081">Slice</span><span class="op" id="2764086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764089">return</span>&nbsp;<span class="ident" id="2764096">Value</span><span class="op" id="2764101">{</span><span class="ident" id="2764102">typ</span><span class="op" id="2764105">.</span><span class="ident" id="2764106">common</span><span class="op" id="2764112">(</span><span class="op" id="2764113">)</span><span class="op" id="2764114">,</span>&nbsp;<span class="ident" id="2764116">unsafe</span><span class="op" id="2764122">.</span><span class="ident" id="2764123">Pointer</span><span class="op" id="2764130">(</span><span class="op" id="2764131">&amp;</span><span class="ident" id="2764132">x</span><span class="op" id="2764133">)</span><span class="op" id="2764134">,</span>&nbsp;<span class="ident" id="2764136">fl</span><span class="op" id="2764138">}</span><br>
<span class="lineno">1590</span><span class="op" id="2764140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764143">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;string&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2764207">//&nbsp;String&nbsp;is&nbsp;a&nbsp;special&nbsp;case&nbsp;because&nbsp;of&nbsp;Go&#39;s&nbsp;String&nbsp;method&nbsp;convention.</span><br>
<span class="lineno"></span><span class="comment" id="2764277">//&nbsp;Unlike&nbsp;the&nbsp;other&nbsp;getters,&nbsp;it&nbsp;does&nbsp;not&nbsp;panic&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;String.</span><br>
<span class="lineno">1595</span><span class="comment" id="2764351">//&nbsp;Instead,&nbsp;it&nbsp;returns&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;&lt;T&nbsp;value&gt;&#34;&nbsp;where&nbsp;T&nbsp;is&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2764428">func</span>&nbsp;<span class="op" id="2764433">(</span><span class="ident" id="2764434">v</span>&nbsp;<span class="ident" id="2764436">Value</span><span class="op" id="2764441">)</span>&nbsp;<span class="ident" id="2764443">String</span><span class="op" id="2764449">(</span><span class="op" id="2764450">)</span>&nbsp;<span class="builtintype" id="2764452">string</span>&nbsp;<span class="op" id="2764459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764462">switch</span>&nbsp;<span class="ident" id="2764469">k</span>&nbsp;<span class="op" id="2764471">:=</span>&nbsp;<span class="ident" id="2764474">v</span><span class="op" id="2764475">.</span><span class="ident" id="2764476">kind</span><span class="op" id="2764480">(</span><span class="op" id="2764481">)</span><span class="op" id="2764482">;</span>&nbsp;<span class="ident" id="2764484">k</span>&nbsp;<span class="op" id="2764486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764489">case</span>&nbsp;<span class="ident" id="2764494">Invalid</span><span class="op" id="2764501">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764505">return</span>&nbsp;<span class="string" id="2764512">&#34;&lt;invalid&nbsp;Value&gt;&#34;</span><br>
<span class="lineno">1600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764531">case</span>&nbsp;<span class="ident" id="2764536">String</span><span class="op" id="2764542">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764546">return</span>&nbsp;<span class="op" id="2764553">*</span><span class="op" id="2764554">(</span><span class="op" id="2764555">*</span><span class="builtintype" id="2764556">string</span><span class="op" id="2764562">)</span><span class="op" id="2764563">(</span><span class="ident" id="2764564">v</span><span class="op" id="2764565">.</span><span class="ident" id="2764566">ptr</span><span class="op" id="2764569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2764572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2764575">//&nbsp;If&nbsp;you&nbsp;call&nbsp;String&nbsp;on&nbsp;a&nbsp;reflect.Value&nbsp;of&nbsp;other&nbsp;type,&nbsp;it&#39;s&nbsp;better&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2764647">//&nbsp;print&nbsp;something&nbsp;than&nbsp;to&nbsp;panic.&nbsp;Useful&nbsp;in&nbsp;debugging.</span><br>
<span class="lineno">1605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2764703">return</span>&nbsp;<span class="string" id="2764710">&#34;&lt;&#34;</span>&nbsp;<span class="op" id="2764714">+</span>&nbsp;<span class="ident" id="2764716">v</span><span class="op" id="2764717">.</span><span class="ident" id="2764718">Type</span><span class="op" id="2764722">(</span><span class="op" id="2764723">)</span><span class="op" id="2764724">.</span><span class="ident" id="2764725">String</span><span class="op" id="2764731">(</span><span class="op" id="2764732">)</span>&nbsp;<span class="op" id="2764734">+</span>&nbsp;<span class="string" id="2764736">&#34;&nbsp;Value&gt;&#34;</span><br>
<span class="lineno"></span><span class="op" id="2764746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2764749">//&nbsp;TryRecv&nbsp;attempts&nbsp;to&nbsp;receive&nbsp;a&nbsp;value&nbsp;from&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno"></span><span class="comment" id="2764827">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno">1610</span><span class="comment" id="2764865">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;delivers&nbsp;a&nbsp;value,&nbsp;x&nbsp;is&nbsp;the&nbsp;transferred&nbsp;value&nbsp;and&nbsp;ok&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="comment" id="2764944">//&nbsp;If&nbsp;the&nbsp;receive&nbsp;cannot&nbsp;finish&nbsp;without&nbsp;blocking,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;Value&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="comment" id="2765031">//&nbsp;If&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed,&nbsp;x&nbsp;is&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type&nbsp;and&nbsp;ok&nbsp;is&nbsp;false.</span><br>
<span class="lineno"></span><span class="keyword" id="2765128">func</span>&nbsp;<span class="op" id="2765133">(</span><span class="ident" id="2765134">v</span>&nbsp;<span class="ident" id="2765136">Value</span><span class="op" id="2765141">)</span>&nbsp;<span class="ident" id="2765143">TryRecv</span><span class="op" id="2765150">(</span><span class="op" id="2765151">)</span>&nbsp;<span class="op" id="2765153">(</span><span class="ident" id="2765154">x</span>&nbsp;<span class="ident" id="2765156">Value</span><span class="op" id="2765161">,</span>&nbsp;<span class="ident" id="2765163">ok</span>&nbsp;<span class="builtintype" id="2765166">bool</span><span class="op" id="2765170">)</span>&nbsp;<span class="op" id="2765172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765175">v</span><span class="op" id="2765176">.</span><span class="ident" id="2765177">mustBe</span><span class="op" id="2765183">(</span><span class="ident" id="2765184">Chan</span><span class="op" id="2765188">)</span><br>
<span class="lineno">1615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765191">v</span><span class="op" id="2765192">.</span><span class="ident" id="2765193">mustBeExported</span><span class="op" id="2765207">(</span><span class="op" id="2765208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765211">return</span>&nbsp;<span class="ident" id="2765218">v</span><span class="op" id="2765219">.</span><span class="ident" id="2765220">recv</span><span class="op" id="2765224">(</span><span class="builtintype" id="2765225">true</span><span class="op" id="2765229">)</span><br>
<span class="lineno"></span><span class="op" id="2765231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765234">//&nbsp;TrySend&nbsp;attempts&nbsp;to&nbsp;send&nbsp;x&nbsp;on&nbsp;the&nbsp;channel&nbsp;v&nbsp;but&nbsp;will&nbsp;not&nbsp;block.</span><br>
<span class="lineno">1620</span><span class="comment" id="2765301">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Chan.</span><br>
<span class="lineno"></span><span class="comment" id="2765339">//&nbsp;It&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;was&nbsp;sent,&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="2765398">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2765471">func</span>&nbsp;<span class="op" id="2765476">(</span><span class="ident" id="2765477">v</span>&nbsp;<span class="ident" id="2765479">Value</span><span class="op" id="2765484">)</span>&nbsp;<span class="ident" id="2765486">TrySend</span><span class="op" id="2765493">(</span><span class="ident" id="2765494">x</span>&nbsp;<span class="ident" id="2765496">Value</span><span class="op" id="2765501">)</span>&nbsp;<span class="builtintype" id="2765503">bool</span>&nbsp;<span class="op" id="2765508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765511">v</span><span class="op" id="2765512">.</span><span class="ident" id="2765513">mustBe</span><span class="op" id="2765519">(</span><span class="ident" id="2765520">Chan</span><span class="op" id="2765524">)</span><br>
<span class="lineno">1625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765527">v</span><span class="op" id="2765528">.</span><span class="ident" id="2765529">mustBeExported</span><span class="op" id="2765543">(</span><span class="op" id="2765544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765547">return</span>&nbsp;<span class="ident" id="2765554">v</span><span class="op" id="2765555">.</span><span class="ident" id="2765556">send</span><span class="op" id="2765560">(</span><span class="ident" id="2765561">x</span><span class="op" id="2765562">,</span>&nbsp;<span class="builtintype" id="2765564">true</span><span class="op" id="2765568">)</span><br>
<span class="lineno"></span><span class="op" id="2765570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2765573">//&nbsp;Type&nbsp;returns&nbsp;v&#39;s&nbsp;type.</span><br>
<span class="lineno">1630</span><span class="keyword" id="2765599">func</span>&nbsp;<span class="op" id="2765604">(</span><span class="ident" id="2765605">v</span>&nbsp;<span class="ident" id="2765607">Value</span><span class="op" id="2765612">)</span>&nbsp;<span class="ident" id="2765614">Type</span><span class="op" id="2765618">(</span><span class="op" id="2765619">)</span>&nbsp;<span class="ident" id="2765621">Type</span>&nbsp;<span class="op" id="2765626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765629">f</span>&nbsp;<span class="op" id="2765631">:=</span>&nbsp;<span class="ident" id="2765634">v</span><span class="op" id="2765635">.</span><span class="ident" id="2765636">flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765642">if</span>&nbsp;<span class="ident" id="2765645">f</span>&nbsp;<span class="op" id="2765647">==</span>&nbsp;<span class="num" id="2765650">0</span>&nbsp;<span class="op" id="2765652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2765656">panic</span><span class="op" id="2765661">(</span><span class="op" id="2765662">&amp;</span><span class="ident" id="2765663">ValueError</span><span class="op" id="2765673">{</span><span class="string" id="2765674">&#34;reflect.Value.Type&#34;</span><span class="op" id="2765694">,</span>&nbsp;<span class="ident" id="2765696">Invalid</span><span class="op" id="2765703">}</span><span class="op" id="2765704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765707">}</span><br>
<span class="lineno">1635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765710">if</span>&nbsp;<span class="ident" id="2765713">f</span><span class="op" id="2765714">&amp;</span><span class="ident" id="2765715">flagMethod</span>&nbsp;<span class="op" id="2765726">==</span>&nbsp;<span class="num" id="2765729">0</span>&nbsp;<span class="op" id="2765731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2765735">//&nbsp;Easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765750">return</span>&nbsp;<span class="ident" id="2765757">v</span><span class="op" id="2765758">.</span><span class="ident" id="2765759">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2765764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2765768">//&nbsp;Method&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2765786">//&nbsp;v.typ&nbsp;describes&nbsp;the&nbsp;receiver,&nbsp;not&nbsp;the&nbsp;method&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765841">i</span>&nbsp;<span class="op" id="2765843">:=</span>&nbsp;<span class="builtintype" id="2765846">int</span><span class="op" id="2765849">(</span><span class="ident" id="2765850">v</span><span class="op" id="2765851">.</span><span class="ident" id="2765852">flag</span><span class="op" id="2765856">)</span>&nbsp;<span class="op" id="2765858">&gt;&gt;</span>&nbsp;<span class="ident" id="2765861">flagMethodShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765878">if</span>&nbsp;<span class="ident" id="2765881">v</span><span class="op" id="2765882">.</span><span class="ident" id="2765883">typ</span><span class="op" id="2765886">.</span><span class="ident" id="2765887">Kind</span><span class="op" id="2765891">(</span><span class="op" id="2765892">)</span>&nbsp;<span class="op" id="2765894">==</span>&nbsp;<span class="ident" id="2765897">Interface</span>&nbsp;<span class="op" id="2765907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2765911">//&nbsp;Method&nbsp;on&nbsp;interface.</span><br>
<span class="lineno">1645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2765937">tt</span>&nbsp;<span class="op" id="2765940">:=</span>&nbsp;<span class="op" id="2765943">(</span><span class="op" id="2765944">*</span><span class="ident" id="2765945">interfaceType</span><span class="op" id="2765958">)</span><span class="op" id="2765959">(</span><span class="ident" id="2765960">unsafe</span><span class="op" id="2765966">.</span><span class="ident" id="2765967">Pointer</span><span class="op" id="2765974">(</span><span class="ident" id="2765975">v</span><span class="op" id="2765976">.</span><span class="ident" id="2765977">typ</span><span class="op" id="2765980">)</span><span class="op" id="2765981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2765985">if</span>&nbsp;<span class="builtintype" id="2765988">uint</span><span class="op" id="2765992">(</span><span class="ident" id="2765993">i</span><span class="op" id="2765994">)</span>&nbsp;<span class="op" id="2765996">&gt;=</span>&nbsp;<span class="builtintype" id="2765999">uint</span><span class="op" id="2766003">(</span><span class="builtinfunc" id="2766004">len</span><span class="op" id="2766007">(</span><span class="ident" id="2766008">tt</span><span class="op" id="2766010">.</span><span class="ident" id="2766011">methods</span><span class="op" id="2766018">)</span><span class="op" id="2766019">)</span>&nbsp;<span class="op" id="2766021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2766026">panic</span><span class="op" id="2766031">(</span><span class="string" id="2766032">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2766079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766087">m</span>&nbsp;<span class="op" id="2766089">:=</span>&nbsp;<span class="op" id="2766092">&amp;</span><span class="ident" id="2766093">tt</span><span class="op" id="2766095">.</span><span class="ident" id="2766096">methods</span><span class="op" id="2766103">[</span><span class="ident" id="2766104">i</span><span class="op" id="2766105">]</span><br>
<span class="lineno">1650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766109">return</span>&nbsp;<span class="ident" id="2766116">m</span><span class="op" id="2766117">.</span><span class="ident" id="2766118">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2766126">//&nbsp;Method&nbsp;on&nbsp;concrete&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766155">ut</span>&nbsp;<span class="op" id="2766158">:=</span>&nbsp;<span class="ident" id="2766161">v</span><span class="op" id="2766162">.</span><span class="ident" id="2766163">typ</span><span class="op" id="2766166">.</span><span class="ident" id="2766167">uncommon</span><span class="op" id="2766175">(</span><span class="op" id="2766176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766179">if</span>&nbsp;<span class="ident" id="2766182">ut</span>&nbsp;<span class="op" id="2766185">==</span>&nbsp;<span class="ident" id="2766188">nil</span>&nbsp;<span class="op" id="2766192">||</span>&nbsp;<span class="builtintype" id="2766195">uint</span><span class="op" id="2766199">(</span><span class="ident" id="2766200">i</span><span class="op" id="2766201">)</span>&nbsp;<span class="op" id="2766203">&gt;=</span>&nbsp;<span class="builtintype" id="2766206">uint</span><span class="op" id="2766210">(</span><span class="builtinfunc" id="2766211">len</span><span class="op" id="2766214">(</span><span class="ident" id="2766215">ut</span><span class="op" id="2766217">.</span><span class="ident" id="2766218">methods</span><span class="op" id="2766225">)</span><span class="op" id="2766226">)</span>&nbsp;<span class="op" id="2766228">{</span><br>
<span class="lineno">1655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2766232">panic</span><span class="op" id="2766237">(</span><span class="string" id="2766238">&#34;reflect:&nbsp;internal&nbsp;error:&nbsp;invalid&nbsp;method&nbsp;index&#34;</span><span class="op" id="2766285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766291">m</span>&nbsp;<span class="op" id="2766293">:=</span>&nbsp;<span class="op" id="2766296">&amp;</span><span class="ident" id="2766297">ut</span><span class="op" id="2766299">.</span><span class="ident" id="2766300">methods</span><span class="op" id="2766307">[</span><span class="ident" id="2766308">i</span><span class="op" id="2766309">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766312">return</span>&nbsp;<span class="ident" id="2766319">m</span><span class="op" id="2766320">.</span><span class="ident" id="2766321">mtyp</span><br>
<span class="lineno"></span><span class="op" id="2766326">}</span><br>
<span class="lineno">1660</span><br>
<span class="lineno"></span><span class="comment" id="2766329">//&nbsp;Uint&nbsp;returns&nbsp;v&#39;s&nbsp;underlying&nbsp;value,&nbsp;as&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span><span class="comment" id="2766380">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&#39;s&nbsp;Kind&nbsp;is&nbsp;not&nbsp;Uint,&nbsp;Uintptr,&nbsp;Uint8,&nbsp;Uint16,&nbsp;Uint32,&nbsp;or&nbsp;Uint64.</span><br>
<span class="lineno"></span><span class="keyword" id="2766461">func</span>&nbsp;<span class="op" id="2766466">(</span><span class="ident" id="2766467">v</span>&nbsp;<span class="ident" id="2766469">Value</span><span class="op" id="2766474">)</span>&nbsp;<span class="ident" id="2766476">Uint</span><span class="op" id="2766480">(</span><span class="op" id="2766481">)</span>&nbsp;<span class="ident" id="2766483">uint64</span>&nbsp;<span class="op" id="2766490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766493">k</span>&nbsp;<span class="op" id="2766495">:=</span>&nbsp;<span class="ident" id="2766498">v</span><span class="op" id="2766499">.</span><span class="ident" id="2766500">kind</span><span class="op" id="2766504">(</span><span class="op" id="2766505">)</span><br>
<span class="lineno">1665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2766508">p</span>&nbsp;<span class="op" id="2766510">:=</span>&nbsp;<span class="ident" id="2766513">v</span><span class="op" id="2766514">.</span><span class="ident" id="2766515">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766520">switch</span>&nbsp;<span class="ident" id="2766527">k</span>&nbsp;<span class="op" id="2766529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766532">case</span>&nbsp;<span class="ident" id="2766537">Uint</span><span class="op" id="2766541">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766545">return</span>&nbsp;<span class="ident" id="2766552">uint64</span><span class="op" id="2766558">(</span><span class="op" id="2766559">*</span><span class="op" id="2766560">(</span><span class="op" id="2766561">*</span><span class="builtintype" id="2766562">uint</span><span class="op" id="2766566">)</span><span class="op" id="2766567">(</span><span class="ident" id="2766568">p</span><span class="op" id="2766569">)</span><span class="op" id="2766570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766573">case</span>&nbsp;<span class="ident" id="2766578">Uint8</span><span class="op" id="2766583">:</span><br>
<span class="lineno">1670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766587">return</span>&nbsp;<span class="ident" id="2766594">uint64</span><span class="op" id="2766600">(</span><span class="op" id="2766601">*</span><span class="op" id="2766602">(</span><span class="op" id="2766603">*</span><span class="builtintype" id="2766604">uint8</span><span class="op" id="2766609">)</span><span class="op" id="2766610">(</span><span class="ident" id="2766611">p</span><span class="op" id="2766612">)</span><span class="op" id="2766613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766616">case</span>&nbsp;<span class="ident" id="2766621">Uint16</span><span class="op" id="2766627">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766631">return</span>&nbsp;<span class="ident" id="2766638">uint64</span><span class="op" id="2766644">(</span><span class="op" id="2766645">*</span><span class="op" id="2766646">(</span><span class="op" id="2766647">*</span><span class="builtintype" id="2766648">uint16</span><span class="op" id="2766654">)</span><span class="op" id="2766655">(</span><span class="ident" id="2766656">p</span><span class="op" id="2766657">)</span><span class="op" id="2766658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766661">case</span>&nbsp;<span class="ident" id="2766666">Uint32</span><span class="op" id="2766672">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766676">return</span>&nbsp;<span class="ident" id="2766683">uint64</span><span class="op" id="2766689">(</span><span class="op" id="2766690">*</span><span class="op" id="2766691">(</span><span class="op" id="2766692">*</span><span class="builtintype" id="2766693">uint32</span><span class="op" id="2766699">)</span><span class="op" id="2766700">(</span><span class="ident" id="2766701">p</span><span class="op" id="2766702">)</span><span class="op" id="2766703">)</span><br>
<span class="lineno">1675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766706">case</span>&nbsp;<span class="ident" id="2766711">Uint64</span><span class="op" id="2766717">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766721">return</span>&nbsp;<span class="ident" id="2766728">uint64</span><span class="op" id="2766734">(</span><span class="op" id="2766735">*</span><span class="op" id="2766736">(</span><span class="op" id="2766737">*</span><span class="ident" id="2766738">uint64</span><span class="op" id="2766744">)</span><span class="op" id="2766745">(</span><span class="ident" id="2766746">p</span><span class="op" id="2766747">)</span><span class="op" id="2766748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766751">case</span>&nbsp;<span class="ident" id="2766756">Uintptr</span><span class="op" id="2766763">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2766767">return</span>&nbsp;<span class="ident" id="2766774">uint64</span><span class="op" id="2766780">(</span><span class="op" id="2766781">*</span><span class="op" id="2766782">(</span><span class="op" id="2766783">*</span><span class="builtintype" id="2766784">uintptr</span><span class="op" id="2766791">)</span><span class="op" id="2766792">(</span><span class="ident" id="2766793">p</span><span class="op" id="2766794">)</span><span class="op" id="2766795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2766798">}</span><br>
<span class="lineno">1680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2766801">panic</span><span class="op" id="2766806">(</span><span class="op" id="2766807">&amp;</span><span class="ident" id="2766808">ValueError</span><span class="op" id="2766818">{</span><span class="string" id="2766819">&#34;reflect.Value.Uint&#34;</span><span class="op" id="2766839">,</span>&nbsp;<span class="ident" id="2766841">v</span><span class="op" id="2766842">.</span><span class="ident" id="2766843">kind</span><span class="op" id="2766847">(</span><span class="op" id="2766848">)</span><span class="op" id="2766849">}</span><span class="op" id="2766850">)</span><br>
<span class="lineno"></span><span class="op" id="2766852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2766855">//&nbsp;UnsafeAddr&nbsp;returns&nbsp;a&nbsp;pointer&nbsp;to&nbsp;v&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="2766900">//&nbsp;It&nbsp;is&nbsp;for&nbsp;advanced&nbsp;clients&nbsp;that&nbsp;also&nbsp;import&nbsp;the&nbsp;&#34;unsafe&#34;&nbsp;package.</span><br>
<span class="lineno">1685</span><span class="comment" id="2766969">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;addressable.</span><br>
<span class="lineno"></span><span class="keyword" id="2767007">func</span>&nbsp;<span class="op" id="2767012">(</span><span class="ident" id="2767013">v</span>&nbsp;<span class="ident" id="2767015">Value</span><span class="op" id="2767020">)</span>&nbsp;<span class="ident" id="2767022">UnsafeAddr</span><span class="op" id="2767032">(</span><span class="op" id="2767033">)</span>&nbsp;<span class="builtintype" id="2767035">uintptr</span>&nbsp;<span class="op" id="2767043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2767046">//&nbsp;TODO:&nbsp;deprecate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767066">if</span>&nbsp;<span class="ident" id="2767069">v</span><span class="op" id="2767070">.</span><span class="ident" id="2767071">typ</span>&nbsp;<span class="op" id="2767075">==</span>&nbsp;<span class="ident" id="2767078">nil</span>&nbsp;<span class="op" id="2767082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2767086">panic</span><span class="op" id="2767091">(</span><span class="op" id="2767092">&amp;</span><span class="ident" id="2767093">ValueError</span><span class="op" id="2767103">{</span><span class="string" id="2767104">&#34;reflect.Value.UnsafeAddr&#34;</span><span class="op" id="2767130">,</span>&nbsp;<span class="ident" id="2767132">Invalid</span><span class="op" id="2767139">}</span><span class="op" id="2767140">)</span><br>
<span class="lineno">1690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767146">if</span>&nbsp;<span class="ident" id="2767149">v</span><span class="op" id="2767150">.</span><span class="ident" id="2767151">flag</span><span class="op" id="2767155">&amp;</span><span class="ident" id="2767156">flagAddr</span>&nbsp;<span class="op" id="2767165">==</span>&nbsp;<span class="num" id="2767168">0</span>&nbsp;<span class="op" id="2767170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2767174">panic</span><span class="op" id="2767179">(</span><span class="string" id="2767180">&#34;reflect.Value.UnsafeAddr&nbsp;of&nbsp;unaddressable&nbsp;value&#34;</span><span class="op" id="2767229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2767232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2767235">return</span>&nbsp;<span class="builtintype" id="2767242">uintptr</span><span class="op" id="2767249">(</span><span class="ident" id="2767250">v</span><span class="op" id="2767251">.</span><span class="ident" id="2767252">ptr</span><span class="op" id="2767255">)</span><br>
<span class="lineno">1695</span><span class="op" id="2767257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2767260">//&nbsp;StringHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="2767319">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2767386">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno">1700</span><span class="comment" id="2767416">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2767484">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2767554">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="2767617">type</span>&nbsp;<span class="ident" id="2767622">StringHeader</span>&nbsp;<span class="keyword" id="2767635">struct</span>&nbsp;<span class="op" id="2767642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767645">Data</span>&nbsp;<span class="builtintype" id="2767650">uintptr</span><br>
<span class="lineno">1705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767659">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2767664">int</span><br>
<span class="lineno"></span><span class="op" id="2767668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2767671">//&nbsp;stringHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;StringHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2767747">type</span>&nbsp;<span class="ident" id="2767752">stringHeader</span>&nbsp;<span class="keyword" id="2767765">struct</span>&nbsp;<span class="op" id="2767772">{</span><br>
<span class="lineno">1710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767775">Data</span>&nbsp;<span class="ident" id="2767780">unsafe</span><span class="op" id="2767786">.</span><span class="ident" id="2767787">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2767796">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2767801">int</span><br>
<span class="lineno"></span><span class="op" id="2767805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2767808">//&nbsp;SliceHeader&nbsp;is&nbsp;the&nbsp;runtime&nbsp;representation&nbsp;of&nbsp;a&nbsp;slice.</span><br>
<span class="lineno">1715</span><span class="comment" id="2767865">//&nbsp;It&nbsp;cannot&nbsp;be&nbsp;used&nbsp;safely&nbsp;or&nbsp;portably&nbsp;and&nbsp;its&nbsp;representation&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="2767932">//&nbsp;change&nbsp;in&nbsp;a&nbsp;later&nbsp;release.</span><br>
<span class="lineno"></span><span class="comment" id="2767962">//&nbsp;Moreover,&nbsp;the&nbsp;Data&nbsp;field&nbsp;is&nbsp;not&nbsp;sufficient&nbsp;to&nbsp;guarantee&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2768030">//&nbsp;it&nbsp;references&nbsp;will&nbsp;not&nbsp;be&nbsp;garbage&nbsp;collected,&nbsp;so&nbsp;programs&nbsp;must&nbsp;keep</span><br>
<span class="lineno"></span><span class="comment" id="2768100">//&nbsp;a&nbsp;separate,&nbsp;correctly&nbsp;typed&nbsp;pointer&nbsp;to&nbsp;the&nbsp;underlying&nbsp;data.</span><br>
<span class="lineno">1720</span><span class="keyword" id="2768163">type</span>&nbsp;<span class="ident" id="2768168">SliceHeader</span>&nbsp;<span class="keyword" id="2768180">struct</span>&nbsp;<span class="op" id="2768187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768190">Data</span>&nbsp;<span class="builtintype" id="2768195">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768204">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2768209">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768214">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2768219">int</span><br>
<span class="lineno"></span><span class="op" id="2768223">}</span><br>
<span class="lineno">1725</span><br>
<span class="lineno"></span><span class="comment" id="2768226">//&nbsp;sliceHeader&nbsp;is&nbsp;a&nbsp;safe&nbsp;version&nbsp;of&nbsp;SliceHeader&nbsp;used&nbsp;within&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="2768300">type</span>&nbsp;<span class="ident" id="2768305">sliceHeader</span>&nbsp;<span class="keyword" id="2768317">struct</span>&nbsp;<span class="op" id="2768324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768327">Data</span>&nbsp;<span class="ident" id="2768332">unsafe</span><span class="op" id="2768338">.</span><span class="ident" id="2768339">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768348">Len</span>&nbsp;&nbsp;<span class="builtintype" id="2768353">int</span><br>
<span class="lineno">1730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768358">Cap</span>&nbsp;&nbsp;<span class="builtintype" id="2768363">int</span><br>
<span class="lineno"></span><span class="op" id="2768367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2768370">func</span>&nbsp;<span class="ident" id="2768375">typesMustMatch</span><span class="op" id="2768389">(</span><span class="ident" id="2768390">what</span>&nbsp;<span class="builtintype" id="2768395">string</span><span class="op" id="2768401">,</span>&nbsp;<span class="ident" id="2768403">t1</span><span class="op" id="2768405">,</span>&nbsp;<span class="ident" id="2768407">t2</span>&nbsp;<span class="ident" id="2768410">Type</span><span class="op" id="2768414">)</span>&nbsp;<span class="op" id="2768416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768419">if</span>&nbsp;<span class="ident" id="2768422">t1</span>&nbsp;<span class="op" id="2768425">!=</span>&nbsp;<span class="ident" id="2768428">t2</span>&nbsp;<span class="op" id="2768431">{</span><br>
<span class="lineno">1735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768435">panic</span><span class="op" id="2768440">(</span><span class="ident" id="2768441">what</span>&nbsp;<span class="op" id="2768446">+</span>&nbsp;<span class="string" id="2768448">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="2768453">+</span>&nbsp;<span class="ident" id="2768455">t1</span><span class="op" id="2768457">.</span><span class="ident" id="2768458">String</span><span class="op" id="2768464">(</span><span class="op" id="2768465">)</span>&nbsp;<span class="op" id="2768467">+</span>&nbsp;<span class="string" id="2768469">&#34;&nbsp;!=&nbsp;&#34;</span>&nbsp;<span class="op" id="2768476">+</span>&nbsp;<span class="ident" id="2768478">t2</span><span class="op" id="2768480">.</span><span class="ident" id="2768481">String</span><span class="op" id="2768487">(</span><span class="op" id="2768488">)</span><span class="op" id="2768489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768492">}</span><br>
<span class="lineno"></span><span class="op" id="2768494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2768497">//&nbsp;grow&nbsp;grows&nbsp;the&nbsp;slice&nbsp;s&nbsp;so&nbsp;that&nbsp;it&nbsp;can&nbsp;hold&nbsp;extra&nbsp;more&nbsp;values,&nbsp;allocating</span><br>
<span class="lineno">1740</span><span class="comment" id="2768573">//&nbsp;more&nbsp;capacity&nbsp;if&nbsp;needed.&nbsp;It&nbsp;also&nbsp;returns&nbsp;the&nbsp;old&nbsp;and&nbsp;new&nbsp;slice&nbsp;lengths.</span><br>
<span class="lineno"></span><span class="keyword" id="2768648">func</span>&nbsp;<span class="ident" id="2768653">grow</span><span class="op" id="2768657">(</span><span class="ident" id="2768658">s</span>&nbsp;<span class="ident" id="2768660">Value</span><span class="op" id="2768665">,</span>&nbsp;<span class="ident" id="2768667">extra</span>&nbsp;<span class="builtintype" id="2768673">int</span><span class="op" id="2768676">)</span>&nbsp;<span class="op" id="2768678">(</span><span class="ident" id="2768679">Value</span><span class="op" id="2768684">,</span>&nbsp;<span class="builtintype" id="2768686">int</span><span class="op" id="2768689">,</span>&nbsp;<span class="builtintype" id="2768691">int</span><span class="op" id="2768694">)</span>&nbsp;<span class="op" id="2768696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768699">i0</span>&nbsp;<span class="op" id="2768702">:=</span>&nbsp;<span class="ident" id="2768705">s</span><span class="op" id="2768706">.</span><span class="ident" id="2768707">Len</span><span class="op" id="2768710">(</span><span class="op" id="2768711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768714">i1</span>&nbsp;<span class="op" id="2768717">:=</span>&nbsp;<span class="ident" id="2768720">i0</span>&nbsp;<span class="op" id="2768723">+</span>&nbsp;<span class="ident" id="2768725">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768732">if</span>&nbsp;<span class="ident" id="2768735">i1</span>&nbsp;<span class="op" id="2768738">&lt;</span>&nbsp;<span class="ident" id="2768740">i0</span>&nbsp;<span class="op" id="2768743">{</span><br>
<span class="lineno">1745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2768747">panic</span><span class="op" id="2768752">(</span><span class="string" id="2768753">&#34;reflect.Append:&nbsp;slice&nbsp;overflow&#34;</span><span class="op" id="2768785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768791">m</span>&nbsp;<span class="op" id="2768793">:=</span>&nbsp;<span class="ident" id="2768796">s</span><span class="op" id="2768797">.</span><span class="ident" id="2768798">Cap</span><span class="op" id="2768801">(</span><span class="op" id="2768802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768805">if</span>&nbsp;<span class="ident" id="2768808">i1</span>&nbsp;<span class="op" id="2768811">&lt;=</span>&nbsp;<span class="ident" id="2768814">m</span>&nbsp;<span class="op" id="2768816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768820">return</span>&nbsp;<span class="ident" id="2768827">s</span><span class="op" id="2768828">.</span><span class="ident" id="2768829">Slice</span><span class="op" id="2768834">(</span><span class="num" id="2768835">0</span><span class="op" id="2768836">,</span>&nbsp;<span class="ident" id="2768838">i1</span><span class="op" id="2768840">)</span><span class="op" id="2768841">,</span>&nbsp;<span class="ident" id="2768843">i0</span><span class="op" id="2768845">,</span>&nbsp;<span class="ident" id="2768847">i1</span><br>
<span class="lineno">1750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768854">if</span>&nbsp;<span class="ident" id="2768857">m</span>&nbsp;<span class="op" id="2768859">==</span>&nbsp;<span class="num" id="2768862">0</span>&nbsp;<span class="op" id="2768864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768868">m</span>&nbsp;<span class="op" id="2768870">=</span>&nbsp;<span class="ident" id="2768872">extra</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768879">}</span>&nbsp;<span class="keyword" id="2768881">else</span>&nbsp;<span class="op" id="2768886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768890">for</span>&nbsp;<span class="ident" id="2768894">m</span>&nbsp;<span class="op" id="2768896">&lt;</span>&nbsp;<span class="ident" id="2768898">i1</span>&nbsp;<span class="op" id="2768901">{</span><br>
<span class="lineno">1755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2768906">if</span>&nbsp;<span class="ident" id="2768909">i0</span>&nbsp;<span class="op" id="2768912">&lt;</span>&nbsp;<span class="num" id="2768914">1024</span>&nbsp;<span class="op" id="2768919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768925">m</span>&nbsp;<span class="op" id="2768927">+=</span>&nbsp;<span class="ident" id="2768930">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768935">}</span>&nbsp;<span class="keyword" id="2768937">else</span>&nbsp;<span class="op" id="2768942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768948">m</span>&nbsp;<span class="op" id="2768950">+=</span>&nbsp;<span class="ident" id="2768953">m</span>&nbsp;<span class="op" id="2768955">/</span>&nbsp;<span class="num" id="2768957">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768962">}</span><br>
<span class="lineno">1760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2768969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2768972">t</span>&nbsp;<span class="op" id="2768974">:=</span>&nbsp;<span class="ident" id="2768977">MakeSlice</span><span class="op" id="2768986">(</span><span class="ident" id="2768987">s</span><span class="op" id="2768988">.</span><span class="ident" id="2768989">Type</span><span class="op" id="2768993">(</span><span class="op" id="2768994">)</span><span class="op" id="2768995">,</span>&nbsp;<span class="ident" id="2768997">i1</span><span class="op" id="2768999">,</span>&nbsp;<span class="ident" id="2769001">m</span><span class="op" id="2769002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769005">Copy</span><span class="op" id="2769009">(</span><span class="ident" id="2769010">t</span><span class="op" id="2769011">,</span>&nbsp;<span class="ident" id="2769013">s</span><span class="op" id="2769014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769017">return</span>&nbsp;<span class="ident" id="2769024">t</span><span class="op" id="2769025">,</span>&nbsp;<span class="ident" id="2769027">i0</span><span class="op" id="2769029">,</span>&nbsp;<span class="ident" id="2769031">i1</span><br>
<span class="lineno">1765</span><span class="op" id="2769034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769037">//&nbsp;Append&nbsp;appends&nbsp;the&nbsp;values&nbsp;x&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2769114">//&nbsp;As&nbsp;in&nbsp;Go,&nbsp;each&nbsp;x&#39;s&nbsp;value&nbsp;must&nbsp;be&nbsp;assignable&nbsp;to&nbsp;the&nbsp;slice&#39;s&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2769190">func</span>&nbsp;<span class="ident" id="2769195">Append</span><span class="op" id="2769201">(</span><span class="ident" id="2769202">s</span>&nbsp;<span class="ident" id="2769204">Value</span><span class="op" id="2769209">,</span>&nbsp;<span class="ident" id="2769211">x</span>&nbsp;<span class="op" id="2769213">...</span><span class="ident" id="2769216">Value</span><span class="op" id="2769221">)</span>&nbsp;<span class="ident" id="2769223">Value</span>&nbsp;<span class="op" id="2769229">{</span><br>
<span class="lineno">1770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769232">s</span><span class="op" id="2769233">.</span><span class="ident" id="2769234">mustBe</span><span class="op" id="2769240">(</span><span class="ident" id="2769241">Slice</span><span class="op" id="2769246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769249">s</span><span class="op" id="2769250">,</span>&nbsp;<span class="ident" id="2769252">i0</span><span class="op" id="2769254">,</span>&nbsp;<span class="ident" id="2769256">i1</span>&nbsp;<span class="op" id="2769259">:=</span>&nbsp;<span class="ident" id="2769262">grow</span><span class="op" id="2769266">(</span><span class="ident" id="2769267">s</span><span class="op" id="2769268">,</span>&nbsp;<span class="builtinfunc" id="2769270">len</span><span class="op" id="2769273">(</span><span class="ident" id="2769274">x</span><span class="op" id="2769275">)</span><span class="op" id="2769276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769279">for</span>&nbsp;<span class="ident" id="2769283">i</span><span class="op" id="2769284">,</span>&nbsp;<span class="ident" id="2769286">j</span>&nbsp;<span class="op" id="2769288">:=</span>&nbsp;<span class="ident" id="2769291">i0</span><span class="op" id="2769293">,</span>&nbsp;<span class="num" id="2769295">0</span><span class="op" id="2769296">;</span>&nbsp;<span class="ident" id="2769298">i</span>&nbsp;<span class="op" id="2769300">&lt;</span>&nbsp;<span class="ident" id="2769302">i1</span><span class="op" id="2769304">;</span>&nbsp;<span class="ident" id="2769306">i</span><span class="op" id="2769307">,</span>&nbsp;<span class="ident" id="2769309">j</span>&nbsp;<span class="op" id="2769311">=</span>&nbsp;<span class="ident" id="2769313">i</span><span class="op" id="2769314">+</span><span class="num" id="2769315">1</span><span class="op" id="2769316">,</span>&nbsp;<span class="ident" id="2769318">j</span><span class="op" id="2769319">+</span><span class="num" id="2769320">1</span>&nbsp;<span class="op" id="2769322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769326">s</span><span class="op" id="2769327">.</span><span class="ident" id="2769328">Index</span><span class="op" id="2769333">(</span><span class="ident" id="2769334">i</span><span class="op" id="2769335">)</span><span class="op" id="2769336">.</span><span class="ident" id="2769337">Set</span><span class="op" id="2769340">(</span><span class="ident" id="2769341">x</span><span class="op" id="2769342">[</span><span class="ident" id="2769343">j</span><span class="op" id="2769344">]</span><span class="op" id="2769345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2769348">}</span><br>
<span class="lineno">1775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769351">return</span>&nbsp;<span class="ident" id="2769358">s</span><br>
<span class="lineno"></span><span class="op" id="2769360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769363">//&nbsp;AppendSlice&nbsp;appends&nbsp;a&nbsp;slice&nbsp;t&nbsp;to&nbsp;a&nbsp;slice&nbsp;s&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="2769442">//&nbsp;The&nbsp;slices&nbsp;s&nbsp;and&nbsp;t&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno">1780</span><span class="keyword" id="2769497">func</span>&nbsp;<span class="ident" id="2769502">AppendSlice</span><span class="op" id="2769513">(</span><span class="ident" id="2769514">s</span><span class="op" id="2769515">,</span>&nbsp;<span class="ident" id="2769517">t</span>&nbsp;<span class="ident" id="2769519">Value</span><span class="op" id="2769524">)</span>&nbsp;<span class="ident" id="2769526">Value</span>&nbsp;<span class="op" id="2769532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769535">s</span><span class="op" id="2769536">.</span><span class="ident" id="2769537">mustBe</span><span class="op" id="2769543">(</span><span class="ident" id="2769544">Slice</span><span class="op" id="2769549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769552">t</span><span class="op" id="2769553">.</span><span class="ident" id="2769554">mustBe</span><span class="op" id="2769560">(</span><span class="ident" id="2769561">Slice</span><span class="op" id="2769566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769569">typesMustMatch</span><span class="op" id="2769583">(</span><span class="string" id="2769584">&#34;reflect.AppendSlice&#34;</span><span class="op" id="2769605">,</span>&nbsp;<span class="ident" id="2769607">s</span><span class="op" id="2769608">.</span><span class="ident" id="2769609">Type</span><span class="op" id="2769613">(</span><span class="op" id="2769614">)</span><span class="op" id="2769615">.</span><span class="ident" id="2769616">Elem</span><span class="op" id="2769620">(</span><span class="op" id="2769621">)</span><span class="op" id="2769622">,</span>&nbsp;<span class="ident" id="2769624">t</span><span class="op" id="2769625">.</span><span class="ident" id="2769626">Type</span><span class="op" id="2769630">(</span><span class="op" id="2769631">)</span><span class="op" id="2769632">.</span><span class="ident" id="2769633">Elem</span><span class="op" id="2769637">(</span><span class="op" id="2769638">)</span><span class="op" id="2769639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769642">s</span><span class="op" id="2769643">,</span>&nbsp;<span class="ident" id="2769645">i0</span><span class="op" id="2769647">,</span>&nbsp;<span class="ident" id="2769649">i1</span>&nbsp;<span class="op" id="2769652">:=</span>&nbsp;<span class="ident" id="2769655">grow</span><span class="op" id="2769659">(</span><span class="ident" id="2769660">s</span><span class="op" id="2769661">,</span>&nbsp;<span class="ident" id="2769663">t</span><span class="op" id="2769664">.</span><span class="ident" id="2769665">Len</span><span class="op" id="2769668">(</span><span class="op" id="2769669">)</span><span class="op" id="2769670">)</span><br>
<span class="lineno">1785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769673">Copy</span><span class="op" id="2769677">(</span><span class="ident" id="2769678">s</span><span class="op" id="2769679">.</span><span class="ident" id="2769680">Slice</span><span class="op" id="2769685">(</span><span class="ident" id="2769686">i0</span><span class="op" id="2769688">,</span>&nbsp;<span class="ident" id="2769690">i1</span><span class="op" id="2769692">)</span><span class="op" id="2769693">,</span>&nbsp;<span class="ident" id="2769695">t</span><span class="op" id="2769696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2769699">return</span>&nbsp;<span class="ident" id="2769706">s</span><br>
<span class="lineno"></span><span class="op" id="2769708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2769711">//&nbsp;Copy&nbsp;copies&nbsp;the&nbsp;contents&nbsp;of&nbsp;src&nbsp;into&nbsp;dst&nbsp;until&nbsp;either</span><br>
<span class="lineno">1790</span><span class="comment" id="2769768">//&nbsp;dst&nbsp;has&nbsp;been&nbsp;filled&nbsp;or&nbsp;src&nbsp;has&nbsp;been&nbsp;exhausted.</span><br>
<span class="lineno"></span><span class="comment" id="2769818">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;copied.</span><br>
<span class="lineno"></span><span class="comment" id="2769863">//&nbsp;Dst&nbsp;and&nbsp;src&nbsp;each&nbsp;must&nbsp;have&nbsp;kind&nbsp;Slice&nbsp;or&nbsp;Array,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2769918">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;must&nbsp;have&nbsp;the&nbsp;same&nbsp;element&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2769966">func</span>&nbsp;<span class="ident" id="2769971">Copy</span><span class="op" id="2769975">(</span><span class="ident" id="2769976">dst</span><span class="op" id="2769979">,</span>&nbsp;<span class="ident" id="2769981">src</span>&nbsp;<span class="ident" id="2769985">Value</span><span class="op" id="2769990">)</span>&nbsp;<span class="builtintype" id="2769992">int</span>&nbsp;<span class="op" id="2769996">{</span><br>
<span class="lineno">1795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2769999">dk</span>&nbsp;<span class="op" id="2770002">:=</span>&nbsp;<span class="ident" id="2770005">dst</span><span class="op" id="2770008">.</span><span class="ident" id="2770009">kind</span><span class="op" id="2770013">(</span><span class="op" id="2770014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770017">if</span>&nbsp;<span class="ident" id="2770020">dk</span>&nbsp;<span class="op" id="2770023">!=</span>&nbsp;<span class="ident" id="2770026">Array</span>&nbsp;<span class="op" id="2770032">&amp;&amp;</span>&nbsp;<span class="ident" id="2770035">dk</span>&nbsp;<span class="op" id="2770038">!=</span>&nbsp;<span class="ident" id="2770041">Slice</span>&nbsp;<span class="op" id="2770047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2770051">panic</span><span class="op" id="2770056">(</span><span class="op" id="2770057">&amp;</span><span class="ident" id="2770058">ValueError</span><span class="op" id="2770068">{</span><span class="string" id="2770069">&#34;reflect.Copy&#34;</span><span class="op" id="2770083">,</span>&nbsp;<span class="ident" id="2770085">dk</span><span class="op" id="2770087">}</span><span class="op" id="2770088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770094">if</span>&nbsp;<span class="ident" id="2770097">dk</span>&nbsp;<span class="op" id="2770100">==</span>&nbsp;<span class="ident" id="2770103">Array</span>&nbsp;<span class="op" id="2770109">{</span><br>
<span class="lineno">1800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770113">dst</span><span class="op" id="2770116">.</span><span class="ident" id="2770117">mustBeAssignable</span><span class="op" id="2770133">(</span><span class="op" id="2770134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770140">dst</span><span class="op" id="2770143">.</span><span class="ident" id="2770144">mustBeExported</span><span class="op" id="2770158">(</span><span class="op" id="2770159">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770163">sk</span>&nbsp;<span class="op" id="2770166">:=</span>&nbsp;<span class="ident" id="2770169">src</span><span class="op" id="2770172">.</span><span class="ident" id="2770173">kind</span><span class="op" id="2770177">(</span><span class="op" id="2770178">)</span><br>
<span class="lineno">1805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770181">if</span>&nbsp;<span class="ident" id="2770184">sk</span>&nbsp;<span class="op" id="2770187">!=</span>&nbsp;<span class="ident" id="2770190">Array</span>&nbsp;<span class="op" id="2770196">&amp;&amp;</span>&nbsp;<span class="ident" id="2770199">sk</span>&nbsp;<span class="op" id="2770202">!=</span>&nbsp;<span class="ident" id="2770205">Slice</span>&nbsp;<span class="op" id="2770211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2770215">panic</span><span class="op" id="2770220">(</span><span class="op" id="2770221">&amp;</span><span class="ident" id="2770222">ValueError</span><span class="op" id="2770232">{</span><span class="string" id="2770233">&#34;reflect.Copy&#34;</span><span class="op" id="2770247">,</span>&nbsp;<span class="ident" id="2770249">sk</span><span class="op" id="2770251">}</span><span class="op" id="2770252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770258">src</span><span class="op" id="2770261">.</span><span class="ident" id="2770262">mustBeExported</span><span class="op" id="2770276">(</span><span class="op" id="2770277">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770281">de</span>&nbsp;<span class="op" id="2770284">:=</span>&nbsp;<span class="ident" id="2770287">dst</span><span class="op" id="2770290">.</span><span class="ident" id="2770291">typ</span><span class="op" id="2770294">.</span><span class="ident" id="2770295">Elem</span><span class="op" id="2770299">(</span><span class="op" id="2770300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770303">se</span>&nbsp;<span class="op" id="2770306">:=</span>&nbsp;<span class="ident" id="2770309">src</span><span class="op" id="2770312">.</span><span class="ident" id="2770313">typ</span><span class="op" id="2770316">.</span><span class="ident" id="2770317">Elem</span><span class="op" id="2770321">(</span><span class="op" id="2770322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770325">typesMustMatch</span><span class="op" id="2770339">(</span><span class="string" id="2770340">&#34;reflect.Copy&#34;</span><span class="op" id="2770354">,</span>&nbsp;<span class="ident" id="2770356">de</span><span class="op" id="2770358">,</span>&nbsp;<span class="ident" id="2770360">se</span><span class="op" id="2770362">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770366">n</span>&nbsp;<span class="op" id="2770368">:=</span>&nbsp;<span class="ident" id="2770371">dst</span><span class="op" id="2770374">.</span><span class="ident" id="2770375">Len</span><span class="op" id="2770378">(</span><span class="op" id="2770379">)</span><br>
<span class="lineno">1815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770382">if</span>&nbsp;<span class="ident" id="2770385">sn</span>&nbsp;<span class="op" id="2770388">:=</span>&nbsp;<span class="ident" id="2770391">src</span><span class="op" id="2770394">.</span><span class="ident" id="2770395">Len</span><span class="op" id="2770398">(</span><span class="op" id="2770399">)</span><span class="op" id="2770400">;</span>&nbsp;<span class="ident" id="2770402">n</span>&nbsp;<span class="op" id="2770404">&gt;</span>&nbsp;<span class="ident" id="2770406">sn</span>&nbsp;<span class="op" id="2770409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770413">n</span>&nbsp;<span class="op" id="2770415">=</span>&nbsp;<span class="ident" id="2770417">sn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2770425">//&nbsp;Copy&nbsp;via&nbsp;memmove.</span><br>
<span class="lineno">1820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770447">var</span>&nbsp;<span class="ident" id="2770451">da</span><span class="op" id="2770453">,</span>&nbsp;<span class="ident" id="2770455">sa</span>&nbsp;<span class="ident" id="2770458">unsafe</span><span class="op" id="2770464">.</span><span class="ident" id="2770465">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770474">if</span>&nbsp;<span class="ident" id="2770477">dk</span>&nbsp;<span class="op" id="2770480">==</span>&nbsp;<span class="ident" id="2770483">Array</span>&nbsp;<span class="op" id="2770489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770493">da</span>&nbsp;<span class="op" id="2770496">=</span>&nbsp;<span class="ident" id="2770498">dst</span><span class="op" id="2770501">.</span><span class="ident" id="2770502">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770507">}</span>&nbsp;<span class="keyword" id="2770509">else</span>&nbsp;<span class="op" id="2770514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770518">da</span>&nbsp;<span class="op" id="2770521">=</span>&nbsp;<span class="op" id="2770523">(</span><span class="op" id="2770524">*</span><span class="ident" id="2770525">sliceHeader</span><span class="op" id="2770536">)</span><span class="op" id="2770537">(</span><span class="ident" id="2770538">dst</span><span class="op" id="2770541">.</span><span class="ident" id="2770542">ptr</span><span class="op" id="2770545">)</span><span class="op" id="2770546">.</span><span class="ident" id="2770547">Data</span><br>
<span class="lineno">1825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770556">if</span>&nbsp;<span class="ident" id="2770559">src</span><span class="op" id="2770562">.</span><span class="ident" id="2770563">flag</span><span class="op" id="2770567">&amp;</span><span class="ident" id="2770568">flagIndir</span>&nbsp;<span class="op" id="2770578">==</span>&nbsp;<span class="num" id="2770581">0</span>&nbsp;<span class="op" id="2770583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770587">sa</span>&nbsp;<span class="op" id="2770590">=</span>&nbsp;<span class="ident" id="2770592">unsafe</span><span class="op" id="2770598">.</span><span class="ident" id="2770599">Pointer</span><span class="op" id="2770606">(</span><span class="op" id="2770607">&amp;</span><span class="ident" id="2770608">src</span><span class="op" id="2770611">.</span><span class="ident" id="2770612">ptr</span><span class="op" id="2770615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770618">}</span>&nbsp;<span class="keyword" id="2770620">else</span>&nbsp;<span class="keyword" id="2770625">if</span>&nbsp;<span class="ident" id="2770628">sk</span>&nbsp;<span class="op" id="2770631">==</span>&nbsp;<span class="ident" id="2770634">Array</span>&nbsp;<span class="op" id="2770640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770644">sa</span>&nbsp;<span class="op" id="2770647">=</span>&nbsp;<span class="ident" id="2770649">src</span><span class="op" id="2770652">.</span><span class="ident" id="2770653">ptr</span><br>
<span class="lineno">1830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770658">}</span>&nbsp;<span class="keyword" id="2770660">else</span>&nbsp;<span class="op" id="2770665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770669">sa</span>&nbsp;<span class="op" id="2770672">=</span>&nbsp;<span class="op" id="2770674">(</span><span class="op" id="2770675">*</span><span class="ident" id="2770676">sliceHeader</span><span class="op" id="2770687">)</span><span class="op" id="2770688">(</span><span class="ident" id="2770689">src</span><span class="op" id="2770692">.</span><span class="ident" id="2770693">ptr</span><span class="op" id="2770696">)</span><span class="op" id="2770697">.</span><span class="ident" id="2770698">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2770704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770707">memmove</span><span class="op" id="2770714">(</span><span class="ident" id="2770715">da</span><span class="op" id="2770717">,</span>&nbsp;<span class="ident" id="2770719">sa</span><span class="op" id="2770721">,</span>&nbsp;<span class="builtintype" id="2770723">uintptr</span><span class="op" id="2770730">(</span><span class="ident" id="2770731">n</span><span class="op" id="2770732">)</span><span class="op" id="2770733">*</span><span class="ident" id="2770734">de</span><span class="op" id="2770736">.</span><span class="ident" id="2770737">Size</span><span class="op" id="2770741">(</span><span class="op" id="2770742">)</span><span class="op" id="2770743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2770746">return</span>&nbsp;<span class="ident" id="2770753">n</span><br>
<span class="lineno">1835</span><span class="op" id="2770755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2770758">//&nbsp;A&nbsp;runtimeSelect&nbsp;is&nbsp;a&nbsp;single&nbsp;case&nbsp;passed&nbsp;to&nbsp;rselect.</span><br>
<span class="lineno"></span><span class="comment" id="2770813">//&nbsp;This&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/runtimeSelect</span><br>
<span class="lineno"></span><span class="keyword" id="2770868">type</span>&nbsp;<span class="ident" id="2770873">runtimeSelect</span>&nbsp;<span class="keyword" id="2770887">struct</span>&nbsp;<span class="op" id="2770894">{</span><br>
<span class="lineno">1840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770897">dir</span>&nbsp;<span class="builtintype" id="2770901">uintptr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2770916">//&nbsp;0,&nbsp;SendDir,&nbsp;or&nbsp;RecvDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770943">typ</span>&nbsp;<span class="op" id="2770947">*</span><span class="ident" id="2770948">rtype</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2770962">//&nbsp;channel&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2770979">ch</span>&nbsp;&nbsp;<span class="ident" id="2770983">unsafe</span><span class="op" id="2770989">.</span><span class="ident" id="2770990">Pointer</span>&nbsp;<span class="comment" id="2770998">//&nbsp;channel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771010">val</span>&nbsp;<span class="ident" id="2771014">unsafe</span><span class="op" id="2771020">.</span><span class="ident" id="2771021">Pointer</span>&nbsp;<span class="comment" id="2771029">//&nbsp;ptr&nbsp;to&nbsp;data&nbsp;(SendDir)&nbsp;or&nbsp;ptr&nbsp;to&nbsp;receive&nbsp;buffer&nbsp;(RecvDir)</span><br>
<span class="lineno"></span><span class="op" id="2771089">}</span><br>
<span class="lineno">1845</span><br>
<span class="lineno"></span><span class="comment" id="2771092">//&nbsp;rselect&nbsp;runs&nbsp;a&nbsp;select.&nbsp;&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2771160">//&nbsp;If&nbsp;the&nbsp;case&nbsp;was&nbsp;a&nbsp;receive,&nbsp;val&nbsp;is&nbsp;filled&nbsp;in&nbsp;with&nbsp;the&nbsp;received&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2771232">//&nbsp;The&nbsp;conventional&nbsp;OK&nbsp;bool&nbsp;indicates&nbsp;whether&nbsp;the&nbsp;receive&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="2771302">//&nbsp;to&nbsp;a&nbsp;sent&nbsp;value.</span><br>
<span class="lineno">1850</span><span class="comment" id="2771322">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2771336">func</span>&nbsp;<span class="ident" id="2771341">rselect</span><span class="op" id="2771348">(</span><span class="op" id="2771349">[</span><span class="op" id="2771350">]</span><span class="ident" id="2771351">runtimeSelect</span><span class="op" id="2771364">)</span>&nbsp;<span class="op" id="2771366">(</span><span class="ident" id="2771367">chosen</span>&nbsp;<span class="builtintype" id="2771374">int</span><span class="op" id="2771377">,</span>&nbsp;<span class="ident" id="2771379">recvOK</span>&nbsp;<span class="builtintype" id="2771386">bool</span><span class="op" id="2771390">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2771393">//&nbsp;A&nbsp;SelectDir&nbsp;describes&nbsp;the&nbsp;communication&nbsp;direction&nbsp;of&nbsp;a&nbsp;select&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="2771464">type</span>&nbsp;<span class="ident" id="2771469">SelectDir</span>&nbsp;<span class="builtintype" id="2771479">int</span><br>
<span class="lineno">1855</span><br>
<span class="lineno"></span><span class="comment" id="2771484">//&nbsp;NOTE:&nbsp;These&nbsp;values&nbsp;must&nbsp;match&nbsp;../runtime/select.go:/selectDir.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2771551">const</span>&nbsp;<span class="op" id="2771557">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771560">_</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2771574">SelectDir</span>&nbsp;<span class="op" id="2771584">=</span>&nbsp;<span class="ident" id="2771586">iota</span><br>
<span class="lineno">1860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771592">SelectSend</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771616">//&nbsp;case&nbsp;Chan&nbsp;&lt;-&nbsp;Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771638">SelectRecv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771662">//&nbsp;case&nbsp;&lt;-Chan:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2771679">SelectDefault</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2771703">//&nbsp;default</span><br>
<span class="lineno"></span><span class="op" id="2771714">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1865</span><span class="comment" id="2771717">//&nbsp;A&nbsp;SelectCase&nbsp;describes&nbsp;a&nbsp;single&nbsp;case&nbsp;in&nbsp;a&nbsp;select&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2771780">//&nbsp;The&nbsp;kind&nbsp;of&nbsp;case&nbsp;depends&nbsp;on&nbsp;Dir,&nbsp;the&nbsp;communication&nbsp;direction.</span><br>
<span class="lineno"></span><span class="comment" id="2771845">//</span><br>
<span class="lineno"></span><span class="comment" id="2771848">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectDefault,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;default&nbsp;case.</span><br>
<span class="lineno"></span><span class="comment" id="2771912">//&nbsp;Chan&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;zero&nbsp;Values.</span><br>
<span class="lineno">1870</span><span class="comment" id="2771950">//</span><br>
<span class="lineno"></span><span class="comment" id="2771953">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectSend,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;send&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2772016">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel,&nbsp;and&nbsp;Send&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="2772107">//&nbsp;assignable&nbsp;to&nbsp;the&nbsp;channel&#39;s&nbsp;element&nbsp;type.&nbsp;As&nbsp;a&nbsp;special&nbsp;case,&nbsp;if&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,</span><br>
<span class="lineno"></span><span class="comment" id="2772196">//&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;and&nbsp;the&nbsp;field&nbsp;Send&nbsp;will&nbsp;also&nbsp;be&nbsp;ignored&nbsp;and&nbsp;may&nbsp;be&nbsp;either&nbsp;zero</span><br>
<span class="lineno">1875</span><span class="comment" id="2772288">//&nbsp;or&nbsp;non-zero.</span><br>
<span class="lineno"></span><span class="comment" id="2772304">//</span><br>
<span class="lineno"></span><span class="comment" id="2772307">//&nbsp;If&nbsp;Dir&nbsp;is&nbsp;SelectRecv,&nbsp;the&nbsp;case&nbsp;represents&nbsp;a&nbsp;receive&nbsp;operation.</span><br>
<span class="lineno"></span><span class="comment" id="2772373">//&nbsp;Normally&nbsp;Chan&#39;s&nbsp;underlying&nbsp;value&nbsp;must&nbsp;be&nbsp;a&nbsp;channel&nbsp;and&nbsp;Send&nbsp;must&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2772458">//&nbsp;If&nbsp;Chan&nbsp;is&nbsp;a&nbsp;zero&nbsp;Value,&nbsp;then&nbsp;the&nbsp;case&nbsp;is&nbsp;ignored,&nbsp;but&nbsp;Send&nbsp;must&nbsp;still&nbsp;be&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno">1880</span><span class="comment" id="2772549">//&nbsp;When&nbsp;a&nbsp;receive&nbsp;operation&nbsp;is&nbsp;selected,&nbsp;the&nbsp;received&nbsp;Value&nbsp;is&nbsp;returned&nbsp;by&nbsp;Select.</span><br>
<span class="lineno"></span><span class="comment" id="2772632">//</span><br>
<span class="lineno"></span><span class="keyword" id="2772635">type</span>&nbsp;<span class="ident" id="2772640">SelectCase</span>&nbsp;<span class="keyword" id="2772651">struct</span>&nbsp;<span class="op" id="2772658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772661">Dir</span>&nbsp;&nbsp;<span class="ident" id="2772666">SelectDir</span>&nbsp;<span class="comment" id="2772676">//&nbsp;direction&nbsp;of&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772698">Chan</span>&nbsp;<span class="ident" id="2772703">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2772713">//&nbsp;channel&nbsp;to&nbsp;use&nbsp;(for&nbsp;send&nbsp;or&nbsp;receive)</span><br>
<span class="lineno">1885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2772754">Send</span>&nbsp;<span class="ident" id="2772759">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2772769">//&nbsp;value&nbsp;to&nbsp;send&nbsp;(for&nbsp;send)</span><br>
<span class="lineno"></span><span class="op" id="2772797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2772800">//&nbsp;Select&nbsp;executes&nbsp;a&nbsp;select&nbsp;operation&nbsp;described&nbsp;by&nbsp;the&nbsp;list&nbsp;of&nbsp;cases.</span><br>
<span class="lineno"></span><span class="comment" id="2772870">//&nbsp;Like&nbsp;the&nbsp;Go&nbsp;select&nbsp;statement,&nbsp;it&nbsp;blocks&nbsp;until&nbsp;at&nbsp;least&nbsp;one&nbsp;of&nbsp;the&nbsp;cases</span><br>
<span class="lineno">1890</span><span class="comment" id="2772945">//&nbsp;can&nbsp;proceed,&nbsp;makes&nbsp;a&nbsp;uniform&nbsp;pseudo-random&nbsp;choice,</span><br>
<span class="lineno"></span><span class="comment" id="2772999">//&nbsp;and&nbsp;then&nbsp;executes&nbsp;that&nbsp;case.&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;chosen&nbsp;case</span><br>
<span class="lineno"></span><span class="comment" id="2773071">//&nbsp;and,&nbsp;if&nbsp;that&nbsp;case&nbsp;was&nbsp;a&nbsp;receive&nbsp;operation,&nbsp;the&nbsp;value&nbsp;received&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2773142">//&nbsp;boolean&nbsp;indicating&nbsp;whether&nbsp;the&nbsp;value&nbsp;corresponds&nbsp;to&nbsp;a&nbsp;send&nbsp;on&nbsp;the&nbsp;channel</span><br>
<span class="lineno"></span><span class="comment" id="2773219">//&nbsp;(as&nbsp;opposed&nbsp;to&nbsp;a&nbsp;zero&nbsp;value&nbsp;received&nbsp;because&nbsp;the&nbsp;channel&nbsp;is&nbsp;closed).</span><br>
<span class="lineno">1895</span><span class="keyword" id="2773291">func</span>&nbsp;<span class="ident" id="2773296">Select</span><span class="op" id="2773302">(</span><span class="ident" id="2773303">cases</span>&nbsp;<span class="op" id="2773309">[</span><span class="op" id="2773310">]</span><span class="ident" id="2773311">SelectCase</span><span class="op" id="2773321">)</span>&nbsp;<span class="op" id="2773323">(</span><span class="ident" id="2773324">chosen</span>&nbsp;<span class="builtintype" id="2773331">int</span><span class="op" id="2773334">,</span>&nbsp;<span class="ident" id="2773336">recv</span>&nbsp;<span class="ident" id="2773341">Value</span><span class="op" id="2773346">,</span>&nbsp;<span class="ident" id="2773348">recvOK</span>&nbsp;<span class="builtintype" id="2773355">bool</span><span class="op" id="2773359">)</span>&nbsp;<span class="op" id="2773361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773364">//&nbsp;NOTE:&nbsp;Do&nbsp;not&nbsp;trust&nbsp;that&nbsp;caller&nbsp;is&nbsp;not&nbsp;modifying&nbsp;cases&nbsp;data&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773438">//&nbsp;The&nbsp;range&nbsp;is&nbsp;safe&nbsp;because&nbsp;the&nbsp;caller&nbsp;cannot&nbsp;modify&nbsp;our&nbsp;copy&nbsp;of&nbsp;the&nbsp;len</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2773513">//&nbsp;and&nbsp;each&nbsp;iteration&nbsp;makes&nbsp;its&nbsp;own&nbsp;copy&nbsp;of&nbsp;the&nbsp;value&nbsp;c.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773571">runcases</span>&nbsp;<span class="op" id="2773580">:=</span>&nbsp;<span class="builtinfunc" id="2773583">make</span><span class="op" id="2773587">(</span><span class="op" id="2773588">[</span><span class="op" id="2773589">]</span><span class="ident" id="2773590">runtimeSelect</span><span class="op" id="2773603">,</span>&nbsp;<span class="builtinfunc" id="2773605">len</span><span class="op" id="2773608">(</span><span class="ident" id="2773609">cases</span><span class="op" id="2773614">)</span><span class="op" id="2773615">)</span><br>
<span class="lineno">1900</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773618">haveDefault</span>&nbsp;<span class="op" id="2773630">:=</span>&nbsp;<span class="builtintype" id="2773633">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773640">for</span>&nbsp;<span class="ident" id="2773644">i</span><span class="op" id="2773645">,</span>&nbsp;<span class="ident" id="2773647">c</span>&nbsp;<span class="op" id="2773649">:=</span>&nbsp;<span class="keyword" id="2773652">range</span>&nbsp;<span class="ident" id="2773658">cases</span>&nbsp;<span class="op" id="2773664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773668">rc</span>&nbsp;<span class="op" id="2773671">:=</span>&nbsp;<span class="op" id="2773674">&amp;</span><span class="ident" id="2773675">runcases</span><span class="op" id="2773683">[</span><span class="ident" id="2773684">i</span><span class="op" id="2773685">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773689">rc</span><span class="op" id="2773691">.</span><span class="ident" id="2773692">dir</span>&nbsp;<span class="op" id="2773696">=</span>&nbsp;<span class="builtintype" id="2773698">uintptr</span><span class="op" id="2773705">(</span><span class="ident" id="2773706">c</span><span class="op" id="2773707">.</span><span class="ident" id="2773708">Dir</span><span class="op" id="2773711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773715">switch</span>&nbsp;<span class="ident" id="2773722">c</span><span class="op" id="2773723">.</span><span class="ident" id="2773724">Dir</span>&nbsp;<span class="op" id="2773728">{</span><br>
<span class="lineno">1905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773732">default</span><span class="op" id="2773739">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2773744">panic</span><span class="op" id="2773749">(</span><span class="string" id="2773750">&#34;reflect.Select:&nbsp;invalid&nbsp;Dir&#34;</span><span class="op" id="2773779">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773784">case</span>&nbsp;<span class="ident" id="2773789">SelectDefault</span><span class="op" id="2773802">:</span>&nbsp;<span class="comment" id="2773804">//&nbsp;default</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773818">if</span>&nbsp;<span class="ident" id="2773821">haveDefault</span>&nbsp;<span class="op" id="2773833">{</span><br>
<span class="lineno">1910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2773839">panic</span><span class="op" id="2773844">(</span><span class="string" id="2773845">&#34;reflect.Select:&nbsp;multiple&nbsp;default&nbsp;cases&#34;</span><span class="op" id="2773885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2773895">haveDefault</span>&nbsp;<span class="op" id="2773907">=</span>&nbsp;<span class="builtintype" id="2773909">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2773917">if</span>&nbsp;<span class="ident" id="2773920">c</span><span class="op" id="2773921">.</span><span class="ident" id="2773922">Chan</span><span class="op" id="2773926">.</span><span class="ident" id="2773927">IsValid</span><span class="op" id="2773934">(</span><span class="op" id="2773935">)</span>&nbsp;<span class="op" id="2773937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2773943">panic</span><span class="op" id="2773948">(</span><span class="string" id="2773949">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Chan&nbsp;value&#34;</span><span class="op" id="2773994">)</span><br>
<span class="lineno">1915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2773999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774004">if</span>&nbsp;<span class="ident" id="2774007">c</span><span class="op" id="2774008">.</span><span class="ident" id="2774009">Send</span><span class="op" id="2774013">.</span><span class="ident" id="2774014">IsValid</span><span class="op" id="2774021">(</span><span class="op" id="2774022">)</span>&nbsp;<span class="op" id="2774024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774030">panic</span><span class="op" id="2774035">(</span><span class="string" id="2774036">&#34;reflect.Select:&nbsp;default&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2774081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774091">case</span>&nbsp;<span class="ident" id="2774096">SelectSend</span><span class="op" id="2774106">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774111">ch</span>&nbsp;<span class="op" id="2774114">:=</span>&nbsp;<span class="ident" id="2774117">c</span><span class="op" id="2774118">.</span><span class="ident" id="2774119">Chan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774127">if</span>&nbsp;<span class="op" id="2774130">!</span><span class="ident" id="2774131">ch</span><span class="op" id="2774133">.</span><span class="ident" id="2774134">IsValid</span><span class="op" id="2774141">(</span><span class="op" id="2774142">)</span>&nbsp;<span class="op" id="2774144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774150">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774159">}</span><br>
<span class="lineno">1925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774164">ch</span><span class="op" id="2774166">.</span><span class="ident" id="2774167">mustBe</span><span class="op" id="2774173">(</span><span class="ident" id="2774174">Chan</span><span class="op" id="2774178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774183">ch</span><span class="op" id="2774185">.</span><span class="ident" id="2774186">mustBeExported</span><span class="op" id="2774200">(</span><span class="op" id="2774201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774206">tt</span>&nbsp;<span class="op" id="2774209">:=</span>&nbsp;<span class="op" id="2774212">(</span><span class="op" id="2774213">*</span><span class="ident" id="2774214">chanType</span><span class="op" id="2774222">)</span><span class="op" id="2774223">(</span><span class="ident" id="2774224">unsafe</span><span class="op" id="2774230">.</span><span class="ident" id="2774231">Pointer</span><span class="op" id="2774238">(</span><span class="ident" id="2774239">ch</span><span class="op" id="2774241">.</span><span class="ident" id="2774242">typ</span><span class="op" id="2774245">)</span><span class="op" id="2774246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774251">if</span>&nbsp;<span class="ident" id="2774254">ChanDir</span><span class="op" id="2774261">(</span><span class="ident" id="2774262">tt</span><span class="op" id="2774264">.</span><span class="ident" id="2774265">dir</span><span class="op" id="2774268">)</span><span class="op" id="2774269">&amp;</span><span class="ident" id="2774270">SendDir</span>&nbsp;<span class="op" id="2774278">==</span>&nbsp;<span class="num" id="2774281">0</span>&nbsp;<span class="op" id="2774283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774289">panic</span><span class="op" id="2774294">(</span><span class="string" id="2774295">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;using&nbsp;recv-only&nbsp;channel&#34;</span><span class="op" id="2774349">)</span><br>
<span class="lineno">1930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774359">rc</span><span class="op" id="2774361">.</span><span class="ident" id="2774362">ch</span>&nbsp;<span class="op" id="2774365">=</span>&nbsp;<span class="ident" id="2774367">ch</span><span class="op" id="2774369">.</span><span class="ident" id="2774370">pointer</span><span class="op" id="2774377">(</span><span class="op" id="2774378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774383">rc</span><span class="op" id="2774385">.</span><span class="ident" id="2774386">typ</span>&nbsp;<span class="op" id="2774390">=</span>&nbsp;<span class="op" id="2774392">&amp;</span><span class="ident" id="2774393">tt</span><span class="op" id="2774395">.</span><span class="ident" id="2774396">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774405">v</span>&nbsp;<span class="op" id="2774407">:=</span>&nbsp;<span class="ident" id="2774410">c</span><span class="op" id="2774411">.</span><span class="ident" id="2774412">Send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774420">if</span>&nbsp;<span class="op" id="2774423">!</span><span class="ident" id="2774424">v</span><span class="op" id="2774425">.</span><span class="ident" id="2774426">IsValid</span><span class="op" id="2774433">(</span><span class="op" id="2774434">)</span>&nbsp;<span class="op" id="2774436">{</span><br>
<span class="lineno">1935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774442">panic</span><span class="op" id="2774447">(</span><span class="string" id="2774448">&#34;reflect.Select:&nbsp;SendDir&nbsp;case&nbsp;missing&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2774497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774507">v</span><span class="op" id="2774508">.</span><span class="ident" id="2774509">mustBeExported</span><span class="op" id="2774523">(</span><span class="op" id="2774524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774529">v</span>&nbsp;<span class="op" id="2774531">=</span>&nbsp;<span class="ident" id="2774533">v</span><span class="op" id="2774534">.</span><span class="ident" id="2774535">assignTo</span><span class="op" id="2774543">(</span><span class="string" id="2774544">&#34;reflect.Select&#34;</span><span class="op" id="2774560">,</span>&nbsp;<span class="ident" id="2774562">tt</span><span class="op" id="2774564">.</span><span class="ident" id="2774565">elem</span><span class="op" id="2774569">,</span>&nbsp;<span class="ident" id="2774571">nil</span><span class="op" id="2774574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774579">if</span>&nbsp;<span class="ident" id="2774582">v</span><span class="op" id="2774583">.</span><span class="ident" id="2774584">flag</span><span class="op" id="2774588">&amp;</span><span class="ident" id="2774589">flagIndir</span>&nbsp;<span class="op" id="2774599">!=</span>&nbsp;<span class="num" id="2774602">0</span>&nbsp;<span class="op" id="2774604">{</span><br>
<span class="lineno">1940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774610">rc</span><span class="op" id="2774612">.</span><span class="ident" id="2774613">val</span>&nbsp;<span class="op" id="2774617">=</span>&nbsp;<span class="ident" id="2774619">v</span><span class="op" id="2774620">.</span><span class="ident" id="2774621">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774628">}</span>&nbsp;<span class="keyword" id="2774630">else</span>&nbsp;<span class="op" id="2774635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774641">rc</span><span class="op" id="2774643">.</span><span class="ident" id="2774644">val</span>&nbsp;<span class="op" id="2774648">=</span>&nbsp;<span class="ident" id="2774650">unsafe</span><span class="op" id="2774656">.</span><span class="ident" id="2774657">Pointer</span><span class="op" id="2774664">(</span><span class="op" id="2774665">&amp;</span><span class="ident" id="2774666">v</span><span class="op" id="2774667">.</span><span class="ident" id="2774668">ptr</span><span class="op" id="2774671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774681">case</span>&nbsp;<span class="ident" id="2774686">SelectRecv</span><span class="op" id="2774696">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774701">if</span>&nbsp;<span class="ident" id="2774704">c</span><span class="op" id="2774705">.</span><span class="ident" id="2774706">Send</span><span class="op" id="2774710">.</span><span class="ident" id="2774711">IsValid</span><span class="op" id="2774718">(</span><span class="op" id="2774719">)</span>&nbsp;<span class="op" id="2774721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774727">panic</span><span class="op" id="2774732">(</span><span class="string" id="2774733">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;has&nbsp;Send&nbsp;value&#34;</span><span class="op" id="2774778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774788">ch</span>&nbsp;<span class="op" id="2774791">:=</span>&nbsp;<span class="ident" id="2774794">c</span><span class="op" id="2774795">.</span><span class="ident" id="2774796">Chan</span><br>
<span class="lineno">1950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774804">if</span>&nbsp;<span class="op" id="2774807">!</span><span class="ident" id="2774808">ch</span><span class="op" id="2774810">.</span><span class="ident" id="2774811">IsValid</span><span class="op" id="2774818">(</span><span class="op" id="2774819">)</span>&nbsp;<span class="op" id="2774821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774827">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2774836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774841">ch</span><span class="op" id="2774843">.</span><span class="ident" id="2774844">mustBe</span><span class="op" id="2774850">(</span><span class="ident" id="2774851">Chan</span><span class="op" id="2774855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774860">ch</span><span class="op" id="2774862">.</span><span class="ident" id="2774863">mustBeExported</span><span class="op" id="2774877">(</span><span class="op" id="2774878">)</span><br>
<span class="lineno">1955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2774883">tt</span>&nbsp;<span class="op" id="2774886">:=</span>&nbsp;<span class="op" id="2774889">(</span><span class="op" id="2774890">*</span><span class="ident" id="2774891">chanType</span><span class="op" id="2774899">)</span><span class="op" id="2774900">(</span><span class="ident" id="2774901">unsafe</span><span class="op" id="2774907">.</span><span class="ident" id="2774908">Pointer</span><span class="op" id="2774915">(</span><span class="ident" id="2774916">ch</span><span class="op" id="2774918">.</span><span class="ident" id="2774919">typ</span><span class="op" id="2774922">)</span><span class="op" id="2774923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2774928">if</span>&nbsp;<span class="ident" id="2774931">ChanDir</span><span class="op" id="2774938">(</span><span class="ident" id="2774939">tt</span><span class="op" id="2774941">.</span><span class="ident" id="2774942">dir</span><span class="op" id="2774945">)</span><span class="op" id="2774946">&amp;</span><span class="ident" id="2774947">RecvDir</span>&nbsp;<span class="op" id="2774955">==</span>&nbsp;<span class="num" id="2774958">0</span>&nbsp;<span class="op" id="2774960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2774966">panic</span><span class="op" id="2774971">(</span><span class="string" id="2774972">&#34;reflect.Select:&nbsp;RecvDir&nbsp;case&nbsp;using&nbsp;send-only&nbsp;channel&#34;</span><span class="op" id="2775026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775036">rc</span><span class="op" id="2775038">.</span><span class="ident" id="2775039">ch</span>&nbsp;<span class="op" id="2775042">=</span>&nbsp;<span class="ident" id="2775044">ch</span><span class="op" id="2775046">.</span><span class="ident" id="2775047">pointer</span><span class="op" id="2775054">(</span><span class="op" id="2775055">)</span><br>
<span class="lineno">1960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775060">rc</span><span class="op" id="2775062">.</span><span class="ident" id="2775063">typ</span>&nbsp;<span class="op" id="2775067">=</span>&nbsp;<span class="op" id="2775069">&amp;</span><span class="ident" id="2775070">tt</span><span class="op" id="2775072">.</span><span class="ident" id="2775073">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775082">rc</span><span class="op" id="2775084">.</span><span class="ident" id="2775085">val</span>&nbsp;<span class="op" id="2775089">=</span>&nbsp;<span class="ident" id="2775091">unsafe_New</span><span class="op" id="2775101">(</span><span class="ident" id="2775102">tt</span><span class="op" id="2775104">.</span><span class="ident" id="2775105">elem</span><span class="op" id="2775109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1965</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775120">chosen</span><span class="op" id="2775126">,</span>&nbsp;<span class="ident" id="2775128">recvOK</span>&nbsp;<span class="op" id="2775135">=</span>&nbsp;<span class="ident" id="2775137">rselect</span><span class="op" id="2775144">(</span><span class="ident" id="2775145">runcases</span><span class="op" id="2775153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775156">if</span>&nbsp;<span class="ident" id="2775159">runcases</span><span class="op" id="2775167">[</span><span class="ident" id="2775168">chosen</span><span class="op" id="2775174">]</span><span class="op" id="2775175">.</span><span class="ident" id="2775176">dir</span>&nbsp;<span class="op" id="2775180">==</span>&nbsp;<span class="builtintype" id="2775183">uintptr</span><span class="op" id="2775190">(</span><span class="ident" id="2775191">SelectRecv</span><span class="op" id="2775201">)</span>&nbsp;<span class="op" id="2775203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775207">tt</span>&nbsp;<span class="op" id="2775210">:=</span>&nbsp;<span class="op" id="2775213">(</span><span class="op" id="2775214">*</span><span class="ident" id="2775215">chanType</span><span class="op" id="2775223">)</span><span class="op" id="2775224">(</span><span class="ident" id="2775225">unsafe</span><span class="op" id="2775231">.</span><span class="ident" id="2775232">Pointer</span><span class="op" id="2775239">(</span><span class="ident" id="2775240">runcases</span><span class="op" id="2775248">[</span><span class="ident" id="2775249">chosen</span><span class="op" id="2775255">]</span><span class="op" id="2775256">.</span><span class="ident" id="2775257">typ</span><span class="op" id="2775260">)</span><span class="op" id="2775261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775265">t</span>&nbsp;<span class="op" id="2775267">:=</span>&nbsp;<span class="ident" id="2775270">tt</span><span class="op" id="2775272">.</span><span class="ident" id="2775273">elem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775280">p</span>&nbsp;<span class="op" id="2775282">:=</span>&nbsp;<span class="ident" id="2775285">runcases</span><span class="op" id="2775293">[</span><span class="ident" id="2775294">chosen</span><span class="op" id="2775300">]</span><span class="op" id="2775301">.</span><span class="ident" id="2775302">val</span><br>
<span class="lineno">1970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775308">fl</span>&nbsp;<span class="op" id="2775311">:=</span>&nbsp;<span class="ident" id="2775314">flag</span><span class="op" id="2775318">(</span><span class="ident" id="2775319">t</span><span class="op" id="2775320">.</span><span class="ident" id="2775321">Kind</span><span class="op" id="2775325">(</span><span class="op" id="2775326">)</span><span class="op" id="2775327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775331">if</span>&nbsp;<span class="ident" id="2775334">ifaceIndir</span><span class="op" id="2775344">(</span><span class="ident" id="2775345">t</span><span class="op" id="2775346">)</span>&nbsp;<span class="op" id="2775348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775353">recv</span>&nbsp;<span class="op" id="2775358">=</span>&nbsp;<span class="ident" id="2775360">Value</span><span class="op" id="2775365">{</span><span class="ident" id="2775366">t</span><span class="op" id="2775367">,</span>&nbsp;<span class="ident" id="2775369">p</span><span class="op" id="2775370">,</span>&nbsp;<span class="ident" id="2775372">fl</span>&nbsp;<span class="op" id="2775375">|</span>&nbsp;<span class="ident" id="2775377">flagIndir</span><span class="op" id="2775386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775390">}</span>&nbsp;<span class="keyword" id="2775392">else</span>&nbsp;<span class="op" id="2775397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2775402">recv</span>&nbsp;<span class="op" id="2775407">=</span>&nbsp;<span class="ident" id="2775409">Value</span><span class="op" id="2775414">{</span><span class="ident" id="2775415">t</span><span class="op" id="2775416">,</span>&nbsp;<span class="op" id="2775418">*</span><span class="op" id="2775419">(</span><span class="op" id="2775420">*</span><span class="ident" id="2775421">unsafe</span><span class="op" id="2775427">.</span><span class="ident" id="2775428">Pointer</span><span class="op" id="2775435">)</span><span class="op" id="2775436">(</span><span class="ident" id="2775437">p</span><span class="op" id="2775438">)</span><span class="op" id="2775439">,</span>&nbsp;<span class="ident" id="2775441">fl</span><span class="op" id="2775443">}</span><br>
<span class="lineno">1975</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775453">return</span>&nbsp;<span class="ident" id="2775460">chosen</span><span class="op" id="2775466">,</span>&nbsp;<span class="ident" id="2775468">recv</span><span class="op" id="2775472">,</span>&nbsp;<span class="ident" id="2775474">recvOK</span><br>
<span class="lineno"></span><span class="op" id="2775481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1980</span><span class="comment" id="2775484">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;constructors<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2775508">//&nbsp;implemented&nbsp;in&nbsp;package&nbsp;runtime</span><br>
<span class="lineno">1985</span><span class="keyword" id="2775542">func</span>&nbsp;<span class="ident" id="2775547">unsafe_New</span><span class="op" id="2775557">(</span><span class="op" id="2775558">*</span><span class="ident" id="2775559">rtype</span><span class="op" id="2775564">)</span>&nbsp;<span class="ident" id="2775566">unsafe</span><span class="op" id="2775572">.</span><span class="ident" id="2775573">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2775581">func</span>&nbsp;<span class="ident" id="2775586">unsafe_NewArray</span><span class="op" id="2775601">(</span><span class="op" id="2775602">*</span><span class="ident" id="2775603">rtype</span><span class="op" id="2775608">,</span>&nbsp;<span class="builtintype" id="2775610">int</span><span class="op" id="2775613">)</span>&nbsp;<span class="ident" id="2775615">unsafe</span><span class="op" id="2775621">.</span><span class="ident" id="2775622">Pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2775631">//&nbsp;MakeSlice&nbsp;creates&nbsp;a&nbsp;new&nbsp;zero-initialized&nbsp;slice&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2775687">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;slice&nbsp;type,&nbsp;length,&nbsp;and&nbsp;capacity.</span><br>
<span class="lineno">1990</span><span class="keyword" id="2775742">func</span>&nbsp;<span class="ident" id="2775747">MakeSlice</span><span class="op" id="2775756">(</span><span class="ident" id="2775757">typ</span>&nbsp;<span class="ident" id="2775761">Type</span><span class="op" id="2775765">,</span>&nbsp;<span class="builtinfunc" id="2775767">len</span><span class="op" id="2775770">,</span>&nbsp;<span class="builtinfunc" id="2775772">cap</span>&nbsp;<span class="builtintype" id="2775776">int</span><span class="op" id="2775779">)</span>&nbsp;<span class="ident" id="2775781">Value</span>&nbsp;<span class="op" id="2775787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775790">if</span>&nbsp;<span class="ident" id="2775793">typ</span><span class="op" id="2775796">.</span><span class="ident" id="2775797">Kind</span><span class="op" id="2775801">(</span><span class="op" id="2775802">)</span>&nbsp;<span class="op" id="2775804">!=</span>&nbsp;<span class="ident" id="2775807">Slice</span>&nbsp;<span class="op" id="2775813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2775817">panic</span><span class="op" id="2775822">(</span><span class="string" id="2775823">&#34;reflect.MakeSlice&nbsp;of&nbsp;non-slice&nbsp;type&#34;</span><span class="op" id="2775860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775866">if</span>&nbsp;<span class="builtinfunc" id="2775869">len</span>&nbsp;<span class="op" id="2775873">&lt;</span>&nbsp;<span class="num" id="2775875">0</span>&nbsp;<span class="op" id="2775877">{</span><br>
<span class="lineno">1995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2775881">panic</span><span class="op" id="2775886">(</span><span class="string" id="2775887">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;len&#34;</span><span class="op" id="2775920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775926">if</span>&nbsp;<span class="builtinfunc" id="2775929">cap</span>&nbsp;<span class="op" id="2775933">&lt;</span>&nbsp;<span class="num" id="2775935">0</span>&nbsp;<span class="op" id="2775937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2775941">panic</span><span class="op" id="2775946">(</span><span class="string" id="2775947">&#34;reflect.MakeSlice:&nbsp;negative&nbsp;cap&#34;</span><span class="op" id="2775980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2775983">}</span><br>
<span class="lineno">2000</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2775986">if</span>&nbsp;<span class="builtinfunc" id="2775989">len</span>&nbsp;<span class="op" id="2775993">&gt;</span>&nbsp;<span class="builtinfunc" id="2775995">cap</span>&nbsp;<span class="op" id="2775999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2776003">panic</span><span class="op" id="2776008">(</span><span class="string" id="2776009">&#34;reflect.MakeSlice:&nbsp;len&nbsp;&gt;&nbsp;cap&#34;</span><span class="op" id="2776039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776046">s</span>&nbsp;<span class="op" id="2776048">:=</span>&nbsp;<span class="ident" id="2776051">sliceHeader</span><span class="op" id="2776062">{</span><span class="ident" id="2776063">unsafe_NewArray</span><span class="op" id="2776078">(</span><span class="ident" id="2776079">typ</span><span class="op" id="2776082">.</span><span class="ident" id="2776083">Elem</span><span class="op" id="2776087">(</span><span class="op" id="2776088">)</span><span class="op" id="2776089">.</span><span class="op" id="2776090">(</span><span class="op" id="2776091">*</span><span class="ident" id="2776092">rtype</span><span class="op" id="2776097">)</span><span class="op" id="2776098">,</span>&nbsp;<span class="builtinfunc" id="2776100">cap</span><span class="op" id="2776103">)</span><span class="op" id="2776104">,</span>&nbsp;<span class="builtinfunc" id="2776106">len</span><span class="op" id="2776109">,</span>&nbsp;<span class="builtinfunc" id="2776111">cap</span><span class="op" id="2776114">}</span><br>
<span class="lineno">2005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776117">return</span>&nbsp;<span class="ident" id="2776124">Value</span><span class="op" id="2776129">{</span><span class="ident" id="2776130">typ</span><span class="op" id="2776133">.</span><span class="ident" id="2776134">common</span><span class="op" id="2776140">(</span><span class="op" id="2776141">)</span><span class="op" id="2776142">,</span>&nbsp;<span class="ident" id="2776144">unsafe</span><span class="op" id="2776150">.</span><span class="ident" id="2776151">Pointer</span><span class="op" id="2776158">(</span><span class="op" id="2776159">&amp;</span><span class="ident" id="2776160">s</span><span class="op" id="2776161">)</span><span class="op" id="2776162">,</span>&nbsp;<span class="ident" id="2776164">flagIndir</span>&nbsp;<span class="op" id="2776174">|</span>&nbsp;<span class="ident" id="2776176">flag</span><span class="op" id="2776180">(</span><span class="ident" id="2776181">Slice</span><span class="op" id="2776186">)</span><span class="op" id="2776187">}</span><br>
<span class="lineno"></span><span class="op" id="2776189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2776192">//&nbsp;MakeChan&nbsp;creates&nbsp;a&nbsp;new&nbsp;channel&nbsp;with&nbsp;the&nbsp;specified&nbsp;type&nbsp;and&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span><span class="keyword" id="2776267">func</span>&nbsp;<span class="ident" id="2776272">MakeChan</span><span class="op" id="2776280">(</span><span class="ident" id="2776281">typ</span>&nbsp;<span class="ident" id="2776285">Type</span><span class="op" id="2776289">,</span>&nbsp;<span class="ident" id="2776291">buffer</span>&nbsp;<span class="builtintype" id="2776298">int</span><span class="op" id="2776301">)</span>&nbsp;<span class="ident" id="2776303">Value</span>&nbsp;<span class="op" id="2776309">{</span><br>
<span class="lineno">2010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776312">if</span>&nbsp;<span class="ident" id="2776315">typ</span><span class="op" id="2776318">.</span><span class="ident" id="2776319">Kind</span><span class="op" id="2776323">(</span><span class="op" id="2776324">)</span>&nbsp;<span class="op" id="2776326">!=</span>&nbsp;<span class="ident" id="2776329">Chan</span>&nbsp;<span class="op" id="2776334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2776338">panic</span><span class="op" id="2776343">(</span><span class="string" id="2776344">&#34;reflect.MakeChan&nbsp;of&nbsp;non-chan&nbsp;type&#34;</span><span class="op" id="2776379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776385">if</span>&nbsp;<span class="ident" id="2776388">buffer</span>&nbsp;<span class="op" id="2776395">&lt;</span>&nbsp;<span class="num" id="2776397">0</span>&nbsp;<span class="op" id="2776399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2776403">panic</span><span class="op" id="2776408">(</span><span class="string" id="2776409">&#34;reflect.MakeChan:&nbsp;negative&nbsp;buffer&nbsp;size&#34;</span><span class="op" id="2776449">)</span><br>
<span class="lineno">2015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776455">if</span>&nbsp;<span class="ident" id="2776458">typ</span><span class="op" id="2776461">.</span><span class="ident" id="2776462">ChanDir</span><span class="op" id="2776469">(</span><span class="op" id="2776470">)</span>&nbsp;<span class="op" id="2776472">!=</span>&nbsp;<span class="ident" id="2776475">BothDir</span>&nbsp;<span class="op" id="2776483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2776487">panic</span><span class="op" id="2776492">(</span><span class="string" id="2776493">&#34;reflect.MakeChan:&nbsp;unidirectional&nbsp;channel&nbsp;type&#34;</span><span class="op" id="2776540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776546">ch</span>&nbsp;<span class="op" id="2776549">:=</span>&nbsp;<span class="ident" id="2776552">makechan</span><span class="op" id="2776560">(</span><span class="ident" id="2776561">typ</span><span class="op" id="2776564">.</span><span class="op" id="2776565">(</span><span class="op" id="2776566">*</span><span class="ident" id="2776567">rtype</span><span class="op" id="2776572">)</span><span class="op" id="2776573">,</span>&nbsp;<span class="ident" id="2776575">uint64</span><span class="op" id="2776581">(</span><span class="ident" id="2776582">buffer</span><span class="op" id="2776588">)</span><span class="op" id="2776589">)</span><br>
<span class="lineno">2020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776592">return</span>&nbsp;<span class="ident" id="2776599">Value</span><span class="op" id="2776604">{</span><span class="ident" id="2776605">typ</span><span class="op" id="2776608">.</span><span class="ident" id="2776609">common</span><span class="op" id="2776615">(</span><span class="op" id="2776616">)</span><span class="op" id="2776617">,</span>&nbsp;<span class="ident" id="2776619">ch</span><span class="op" id="2776621">,</span>&nbsp;<span class="ident" id="2776623">flag</span><span class="op" id="2776627">(</span><span class="ident" id="2776628">Chan</span><span class="op" id="2776632">)</span><span class="op" id="2776633">}</span><br>
<span class="lineno"></span><span class="op" id="2776635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2776638">//&nbsp;MakeMap&nbsp;creates&nbsp;a&nbsp;new&nbsp;map&nbsp;of&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2776690">func</span>&nbsp;<span class="ident" id="2776695">MakeMap</span><span class="op" id="2776702">(</span><span class="ident" id="2776703">typ</span>&nbsp;<span class="ident" id="2776707">Type</span><span class="op" id="2776711">)</span>&nbsp;<span class="ident" id="2776713">Value</span>&nbsp;<span class="op" id="2776719">{</span><br>
<span class="lineno">2025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776722">if</span>&nbsp;<span class="ident" id="2776725">typ</span><span class="op" id="2776728">.</span><span class="ident" id="2776729">Kind</span><span class="op" id="2776733">(</span><span class="op" id="2776734">)</span>&nbsp;<span class="op" id="2776736">!=</span>&nbsp;<span class="ident" id="2776739">Map</span>&nbsp;<span class="op" id="2776743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2776747">panic</span><span class="op" id="2776752">(</span><span class="string" id="2776753">&#34;reflect.MakeMap&nbsp;of&nbsp;non-map&nbsp;type&#34;</span><span class="op" id="2776786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2776789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2776792">m</span>&nbsp;<span class="op" id="2776794">:=</span>&nbsp;<span class="ident" id="2776797">makemap</span><span class="op" id="2776804">(</span><span class="ident" id="2776805">typ</span><span class="op" id="2776808">.</span><span class="op" id="2776809">(</span><span class="op" id="2776810">*</span><span class="ident" id="2776811">rtype</span><span class="op" id="2776816">)</span><span class="op" id="2776817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2776820">return</span>&nbsp;<span class="ident" id="2776827">Value</span><span class="op" id="2776832">{</span><span class="ident" id="2776833">typ</span><span class="op" id="2776836">.</span><span class="ident" id="2776837">common</span><span class="op" id="2776843">(</span><span class="op" id="2776844">)</span><span class="op" id="2776845">,</span>&nbsp;<span class="ident" id="2776847">m</span><span class="op" id="2776848">,</span>&nbsp;<span class="ident" id="2776850">flag</span><span class="op" id="2776854">(</span><span class="ident" id="2776855">Map</span><span class="op" id="2776858">)</span><span class="op" id="2776859">}</span><br>
<span class="lineno">2030</span><span class="op" id="2776861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2776864">//&nbsp;Indirect&nbsp;returns&nbsp;the&nbsp;value&nbsp;that&nbsp;v&nbsp;points&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="2776912">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;nil&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;a&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="comment" id="2776969">//&nbsp;If&nbsp;v&nbsp;is&nbsp;not&nbsp;a&nbsp;pointer,&nbsp;Indirect&nbsp;returns&nbsp;v.</span><br>
<span class="lineno">2035</span><span class="keyword" id="2777015">func</span>&nbsp;<span class="ident" id="2777020">Indirect</span><span class="op" id="2777028">(</span><span class="ident" id="2777029">v</span>&nbsp;<span class="ident" id="2777031">Value</span><span class="op" id="2777036">)</span>&nbsp;<span class="ident" id="2777038">Value</span>&nbsp;<span class="op" id="2777044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777047">if</span>&nbsp;<span class="ident" id="2777050">v</span><span class="op" id="2777051">.</span><span class="ident" id="2777052">Kind</span><span class="op" id="2777056">(</span><span class="op" id="2777057">)</span>&nbsp;<span class="op" id="2777059">!=</span>&nbsp;<span class="ident" id="2777062">Ptr</span>&nbsp;<span class="op" id="2777066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777070">return</span>&nbsp;<span class="ident" id="2777077">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777083">return</span>&nbsp;<span class="ident" id="2777090">v</span><span class="op" id="2777091">.</span><span class="ident" id="2777092">Elem</span><span class="op" id="2777096">(</span><span class="op" id="2777097">)</span><br>
<span class="lineno">2040</span><span class="op" id="2777099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2777102">//&nbsp;ValueOf&nbsp;returns&nbsp;a&nbsp;new&nbsp;Value&nbsp;initialized&nbsp;to&nbsp;the&nbsp;concrete&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2777167">//&nbsp;stored&nbsp;in&nbsp;the&nbsp;interface&nbsp;i.&nbsp;&nbsp;ValueOf(nil)&nbsp;returns&nbsp;the&nbsp;zero&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="2777235">func</span>&nbsp;<span class="ident" id="2777240">ValueOf</span><span class="op" id="2777247">(</span><span class="ident" id="2777248">i</span>&nbsp;<span class="keyword" id="2777250">interface</span><span class="op" id="2777259">{</span><span class="op" id="2777260">}</span><span class="op" id="2777261">)</span>&nbsp;<span class="ident" id="2777263">Value</span>&nbsp;<span class="op" id="2777269">{</span><br>
<span class="lineno">2045</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777272">if</span>&nbsp;<span class="ident" id="2777275">i</span>&nbsp;<span class="op" id="2777277">==</span>&nbsp;<span class="ident" id="2777280">nil</span>&nbsp;<span class="op" id="2777284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777288">return</span>&nbsp;<span class="ident" id="2777295">Value</span><span class="op" id="2777300">{</span><span class="op" id="2777301">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2777308">//&nbsp;TODO(rsc):&nbsp;Eliminate&nbsp;this&nbsp;terrible&nbsp;hack.</span><br>
<span class="lineno">2050</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2777353">//&nbsp;In&nbsp;the&nbsp;call&nbsp;to&nbsp;unpackEface,&nbsp;i.typ&nbsp;doesn&#39;t&nbsp;escape,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2777407">//&nbsp;and&nbsp;i.word&nbsp;is&nbsp;an&nbsp;integer.&nbsp;&nbsp;So&nbsp;it&nbsp;looks&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2777455">//&nbsp;i&nbsp;doesn&#39;t&nbsp;escape.&nbsp;&nbsp;But&nbsp;really&nbsp;it&nbsp;does,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2777498">//&nbsp;because&nbsp;i.word&nbsp;is&nbsp;actually&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777540">escapes</span><span class="op" id="2777547">(</span><span class="ident" id="2777548">i</span><span class="op" id="2777549">)</span><br>
<span class="lineno">2055</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777553">return</span>&nbsp;<span class="ident" id="2777560">unpackEface</span><span class="op" id="2777571">(</span><span class="ident" id="2777572">i</span><span class="op" id="2777573">)</span><br>
<span class="lineno"></span><span class="op" id="2777575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2777578">//&nbsp;Zero&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.</span><br>
<span class="lineno">2060</span><span class="comment" id="2777654">//&nbsp;The&nbsp;result&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;zero&nbsp;value&nbsp;of&nbsp;the&nbsp;Value&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="2777722">//&nbsp;which&nbsp;represents&nbsp;no&nbsp;value&nbsp;at&nbsp;all.</span><br>
<span class="lineno"></span><span class="comment" id="2777759">//&nbsp;For&nbsp;example,&nbsp;Zero(TypeOf(42))&nbsp;returns&nbsp;a&nbsp;Value&nbsp;with&nbsp;Kind&nbsp;Int&nbsp;and&nbsp;value&nbsp;0.</span><br>
<span class="lineno"></span><span class="comment" id="2777835">//&nbsp;The&nbsp;returned&nbsp;value&nbsp;is&nbsp;neither&nbsp;addressable&nbsp;nor&nbsp;settable.</span><br>
<span class="lineno"></span><span class="keyword" id="2777894">func</span>&nbsp;<span class="ident" id="2777899">Zero</span><span class="op" id="2777903">(</span><span class="ident" id="2777904">typ</span>&nbsp;<span class="ident" id="2777908">Type</span><span class="op" id="2777912">)</span>&nbsp;<span class="ident" id="2777914">Value</span>&nbsp;<span class="op" id="2777920">{</span><br>
<span class="lineno">2065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2777923">if</span>&nbsp;<span class="ident" id="2777926">typ</span>&nbsp;<span class="op" id="2777930">==</span>&nbsp;<span class="ident" id="2777933">nil</span>&nbsp;<span class="op" id="2777937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2777941">panic</span><span class="op" id="2777946">(</span><span class="string" id="2777947">&#34;reflect:&nbsp;Zero(nil)&#34;</span><span class="op" id="2777967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2777970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777973">t</span>&nbsp;<span class="op" id="2777975">:=</span>&nbsp;<span class="ident" id="2777978">typ</span><span class="op" id="2777981">.</span><span class="ident" id="2777982">common</span><span class="op" id="2777988">(</span><span class="op" id="2777989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2777992">fl</span>&nbsp;<span class="op" id="2777995">:=</span>&nbsp;<span class="ident" id="2777998">flag</span><span class="op" id="2778002">(</span><span class="ident" id="2778003">t</span><span class="op" id="2778004">.</span><span class="ident" id="2778005">Kind</span><span class="op" id="2778009">(</span><span class="op" id="2778010">)</span><span class="op" id="2778011">)</span><br>
<span class="lineno">2070</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778014">if</span>&nbsp;<span class="ident" id="2778017">ifaceIndir</span><span class="op" id="2778027">(</span><span class="ident" id="2778028">t</span><span class="op" id="2778029">)</span>&nbsp;<span class="op" id="2778031">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778035">return</span>&nbsp;<span class="ident" id="2778042">Value</span><span class="op" id="2778047">{</span><span class="ident" id="2778048">t</span><span class="op" id="2778049">,</span>&nbsp;<span class="ident" id="2778051">unsafe_New</span><span class="op" id="2778061">(</span><span class="ident" id="2778062">typ</span><span class="op" id="2778065">.</span><span class="op" id="2778066">(</span><span class="op" id="2778067">*</span><span class="ident" id="2778068">rtype</span><span class="op" id="2778073">)</span><span class="op" id="2778074">)</span><span class="op" id="2778075">,</span>&nbsp;<span class="ident" id="2778077">fl</span>&nbsp;<span class="op" id="2778080">|</span>&nbsp;<span class="ident" id="2778082">flagIndir</span><span class="op" id="2778091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2778094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778097">return</span>&nbsp;<span class="ident" id="2778104">Value</span><span class="op" id="2778109">{</span><span class="ident" id="2778110">t</span><span class="op" id="2778111">,</span>&nbsp;<span class="ident" id="2778113">nil</span><span class="op" id="2778116">,</span>&nbsp;<span class="ident" id="2778118">fl</span><span class="op" id="2778120">}</span><br>
<span class="lineno"></span><span class="op" id="2778122">}</span><br>
<span class="lineno">2075</span><br>
<span class="lineno"></span><span class="comment" id="2778125">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;new&nbsp;zero&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="2778191">//&nbsp;for&nbsp;the&nbsp;specified&nbsp;type.&nbsp;&nbsp;That&nbsp;is,&nbsp;the&nbsp;returned&nbsp;Value&#39;s&nbsp;Type&nbsp;is&nbsp;PtrTo(typ).</span><br>
<span class="lineno"></span><span class="keyword" id="2778269">func</span>&nbsp;<span class="ident" id="2778274">New</span><span class="op" id="2778277">(</span><span class="ident" id="2778278">typ</span>&nbsp;<span class="ident" id="2778282">Type</span><span class="op" id="2778286">)</span>&nbsp;<span class="ident" id="2778288">Value</span>&nbsp;<span class="op" id="2778294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778297">if</span>&nbsp;<span class="ident" id="2778300">typ</span>&nbsp;<span class="op" id="2778304">==</span>&nbsp;<span class="ident" id="2778307">nil</span>&nbsp;<span class="op" id="2778311">{</span><br>
<span class="lineno">2080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2778315">panic</span><span class="op" id="2778320">(</span><span class="string" id="2778321">&#34;reflect:&nbsp;New(nil)&#34;</span><span class="op" id="2778340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2778343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2778346">ptr</span>&nbsp;<span class="op" id="2778350">:=</span>&nbsp;<span class="ident" id="2778353">unsafe_New</span><span class="op" id="2778363">(</span><span class="ident" id="2778364">typ</span><span class="op" id="2778367">.</span><span class="op" id="2778368">(</span><span class="op" id="2778369">*</span><span class="ident" id="2778370">rtype</span><span class="op" id="2778375">)</span><span class="op" id="2778376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2778379">fl</span>&nbsp;<span class="op" id="2778382">:=</span>&nbsp;<span class="ident" id="2778385">flag</span><span class="op" id="2778389">(</span><span class="ident" id="2778390">Ptr</span><span class="op" id="2778393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778396">return</span>&nbsp;<span class="ident" id="2778403">Value</span><span class="op" id="2778408">{</span><span class="ident" id="2778409">typ</span><span class="op" id="2778412">.</span><span class="ident" id="2778413">common</span><span class="op" id="2778419">(</span><span class="op" id="2778420">)</span><span class="op" id="2778421">.</span><span class="ident" id="2778422">ptrTo</span><span class="op" id="2778427">(</span><span class="op" id="2778428">)</span><span class="op" id="2778429">,</span>&nbsp;<span class="ident" id="2778431">ptr</span><span class="op" id="2778434">,</span>&nbsp;<span class="ident" id="2778436">fl</span><span class="op" id="2778438">}</span><br>
<span class="lineno">2085</span><span class="op" id="2778440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778443">//&nbsp;NewAt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;representing&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2778509">//&nbsp;specified&nbsp;type,&nbsp;using&nbsp;p&nbsp;as&nbsp;that&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="2778553">func</span>&nbsp;<span class="ident" id="2778558">NewAt</span><span class="op" id="2778563">(</span><span class="ident" id="2778564">typ</span>&nbsp;<span class="ident" id="2778568">Type</span><span class="op" id="2778572">,</span>&nbsp;<span class="ident" id="2778574">p</span>&nbsp;<span class="ident" id="2778576">unsafe</span><span class="op" id="2778582">.</span><span class="ident" id="2778583">Pointer</span><span class="op" id="2778590">)</span>&nbsp;<span class="ident" id="2778592">Value</span>&nbsp;<span class="op" id="2778598">{</span><br>
<span class="lineno">2090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2778601">fl</span>&nbsp;<span class="op" id="2778604">:=</span>&nbsp;<span class="ident" id="2778607">flag</span><span class="op" id="2778611">(</span><span class="ident" id="2778612">Ptr</span><span class="op" id="2778615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778618">return</span>&nbsp;<span class="ident" id="2778625">Value</span><span class="op" id="2778630">{</span><span class="ident" id="2778631">typ</span><span class="op" id="2778634">.</span><span class="ident" id="2778635">common</span><span class="op" id="2778641">(</span><span class="op" id="2778642">)</span><span class="op" id="2778643">.</span><span class="ident" id="2778644">ptrTo</span><span class="op" id="2778649">(</span><span class="op" id="2778650">)</span><span class="op" id="2778651">,</span>&nbsp;<span class="ident" id="2778653">p</span><span class="op" id="2778654">,</span>&nbsp;<span class="ident" id="2778656">fl</span><span class="op" id="2778658">}</span><br>
<span class="lineno"></span><span class="op" id="2778660">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2778663">//&nbsp;assignTo&nbsp;returns&nbsp;a&nbsp;value&nbsp;v&nbsp;that&nbsp;can&nbsp;be&nbsp;assigned&nbsp;directly&nbsp;to&nbsp;typ.</span><br>
<span class="lineno">2095</span><span class="comment" id="2778731">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;v&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;typ.</span><br>
<span class="lineno"></span><span class="comment" id="2778775">//&nbsp;For&nbsp;a&nbsp;conversion&nbsp;to&nbsp;an&nbsp;interface&nbsp;type,&nbsp;target&nbsp;is&nbsp;a&nbsp;suggested&nbsp;scratch&nbsp;space&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="2778861">func</span>&nbsp;<span class="op" id="2778866">(</span><span class="ident" id="2778867">v</span>&nbsp;<span class="ident" id="2778869">Value</span><span class="op" id="2778874">)</span>&nbsp;<span class="ident" id="2778876">assignTo</span><span class="op" id="2778884">(</span><span class="ident" id="2778885">context</span>&nbsp;<span class="builtintype" id="2778893">string</span><span class="op" id="2778899">,</span>&nbsp;<span class="ident" id="2778901">dst</span>&nbsp;<span class="op" id="2778905">*</span><span class="ident" id="2778906">rtype</span><span class="op" id="2778911">,</span>&nbsp;<span class="ident" id="2778913">target</span>&nbsp;<span class="ident" id="2778920">unsafe</span><span class="op" id="2778926">.</span><span class="ident" id="2778927">Pointer</span><span class="op" id="2778934">)</span>&nbsp;<span class="ident" id="2778936">Value</span>&nbsp;<span class="op" id="2778942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2778945">if</span>&nbsp;<span class="ident" id="2778948">v</span><span class="op" id="2778949">.</span><span class="ident" id="2778950">flag</span><span class="op" id="2778954">&amp;</span><span class="ident" id="2778955">flagMethod</span>&nbsp;<span class="op" id="2778966">!=</span>&nbsp;<span class="num" id="2778969">0</span>&nbsp;<span class="op" id="2778971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2778975">v</span>&nbsp;<span class="op" id="2778977">=</span>&nbsp;<span class="ident" id="2778979">makeMethodValue</span><span class="op" id="2778994">(</span><span class="ident" id="2778995">context</span><span class="op" id="2779002">,</span>&nbsp;<span class="ident" id="2779004">v</span><span class="op" id="2779005">)</span><br>
<span class="lineno">2100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779012">switch</span>&nbsp;<span class="op" id="2779019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779022">case</span>&nbsp;<span class="ident" id="2779027">directlyAssignable</span><span class="op" id="2779045">(</span><span class="ident" id="2779046">dst</span><span class="op" id="2779049">,</span>&nbsp;<span class="ident" id="2779051">v</span><span class="op" id="2779052">.</span><span class="ident" id="2779053">typ</span><span class="op" id="2779056">)</span><span class="op" id="2779057">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2779061">//&nbsp;Overwrite&nbsp;type&nbsp;so&nbsp;that&nbsp;they&nbsp;match.</span><br>
<span class="lineno">2105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2779101">//&nbsp;Same&nbsp;memory&nbsp;layout,&nbsp;so&nbsp;no&nbsp;harm&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779143">v</span><span class="op" id="2779144">.</span><span class="ident" id="2779145">typ</span>&nbsp;<span class="op" id="2779149">=</span>&nbsp;<span class="ident" id="2779151">dst</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779157">fl</span>&nbsp;<span class="op" id="2779160">:=</span>&nbsp;<span class="ident" id="2779163">v</span><span class="op" id="2779164">.</span><span class="ident" id="2779165">flag</span>&nbsp;<span class="op" id="2779170">&amp;</span>&nbsp;<span class="op" id="2779172">(</span><span class="ident" id="2779173">flagRO</span>&nbsp;<span class="op" id="2779180">|</span>&nbsp;<span class="ident" id="2779182">flagAddr</span>&nbsp;<span class="op" id="2779191">|</span>&nbsp;<span class="ident" id="2779193">flagIndir</span><span class="op" id="2779202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779206">fl</span>&nbsp;<span class="op" id="2779209">|=</span>&nbsp;<span class="ident" id="2779212">flag</span><span class="op" id="2779216">(</span><span class="ident" id="2779217">dst</span><span class="op" id="2779220">.</span><span class="ident" id="2779221">Kind</span><span class="op" id="2779225">(</span><span class="op" id="2779226">)</span><span class="op" id="2779227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779231">return</span>&nbsp;<span class="ident" id="2779238">Value</span><span class="op" id="2779243">{</span><span class="ident" id="2779244">dst</span><span class="op" id="2779247">,</span>&nbsp;<span class="ident" id="2779249">v</span><span class="op" id="2779250">.</span><span class="ident" id="2779251">ptr</span><span class="op" id="2779254">,</span>&nbsp;<span class="ident" id="2779256">fl</span><span class="op" id="2779258">}</span><br>
<span class="lineno">2110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779262">case</span>&nbsp;<span class="ident" id="2779267">implements</span><span class="op" id="2779277">(</span><span class="ident" id="2779278">dst</span><span class="op" id="2779281">,</span>&nbsp;<span class="ident" id="2779283">v</span><span class="op" id="2779284">.</span><span class="ident" id="2779285">typ</span><span class="op" id="2779288">)</span><span class="op" id="2779289">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779293">if</span>&nbsp;<span class="ident" id="2779296">target</span>&nbsp;<span class="op" id="2779303">==</span>&nbsp;<span class="ident" id="2779306">nil</span>&nbsp;<span class="op" id="2779310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779315">target</span>&nbsp;<span class="op" id="2779322">=</span>&nbsp;<span class="ident" id="2779324">unsafe_New</span><span class="op" id="2779334">(</span><span class="ident" id="2779335">dst</span><span class="op" id="2779338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779342">}</span><br>
<span class="lineno">2115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779346">x</span>&nbsp;<span class="op" id="2779348">:=</span>&nbsp;<span class="ident" id="2779351">valueInterface</span><span class="op" id="2779365">(</span><span class="ident" id="2779366">v</span><span class="op" id="2779367">,</span>&nbsp;<span class="builtintype" id="2779369">false</span><span class="op" id="2779374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779378">if</span>&nbsp;<span class="ident" id="2779381">dst</span><span class="op" id="2779384">.</span><span class="ident" id="2779385">NumMethod</span><span class="op" id="2779394">(</span><span class="op" id="2779395">)</span>&nbsp;<span class="op" id="2779397">==</span>&nbsp;<span class="num" id="2779400">0</span>&nbsp;<span class="op" id="2779402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779407">*</span><span class="op" id="2779408">(</span><span class="op" id="2779409">*</span><span class="keyword" id="2779410">interface</span><span class="op" id="2779419">{</span><span class="op" id="2779420">}</span><span class="op" id="2779421">)</span><span class="op" id="2779422">(</span><span class="ident" id="2779423">target</span><span class="op" id="2779429">)</span>&nbsp;<span class="op" id="2779431">=</span>&nbsp;<span class="ident" id="2779433">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779437">}</span>&nbsp;<span class="keyword" id="2779439">else</span>&nbsp;<span class="op" id="2779444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779449">ifaceE2I</span><span class="op" id="2779457">(</span><span class="ident" id="2779458">dst</span><span class="op" id="2779461">,</span>&nbsp;<span class="ident" id="2779463">x</span><span class="op" id="2779464">,</span>&nbsp;<span class="ident" id="2779466">target</span><span class="op" id="2779472">)</span><br>
<span class="lineno">2120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779480">return</span>&nbsp;<span class="ident" id="2779487">Value</span><span class="op" id="2779492">{</span><span class="ident" id="2779493">dst</span><span class="op" id="2779496">,</span>&nbsp;<span class="ident" id="2779498">target</span><span class="op" id="2779504">,</span>&nbsp;<span class="ident" id="2779506">flagIndir</span>&nbsp;<span class="op" id="2779516">|</span>&nbsp;<span class="ident" id="2779518">flag</span><span class="op" id="2779522">(</span><span class="ident" id="2779523">Interface</span><span class="op" id="2779532">)</span><span class="op" id="2779533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2779540">//&nbsp;Failed.</span><br>
<span class="lineno">2125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2779552">panic</span><span class="op" id="2779557">(</span><span class="ident" id="2779558">context</span>&nbsp;<span class="op" id="2779566">+</span>&nbsp;<span class="string" id="2779568">&#34;:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2779587">+</span>&nbsp;<span class="ident" id="2779589">v</span><span class="op" id="2779590">.</span><span class="ident" id="2779591">typ</span><span class="op" id="2779594">.</span><span class="ident" id="2779595">String</span><span class="op" id="2779601">(</span><span class="op" id="2779602">)</span>&nbsp;<span class="op" id="2779604">+</span>&nbsp;<span class="string" id="2779606">&#34;&nbsp;is&nbsp;not&nbsp;assignable&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2779636">+</span>&nbsp;<span class="ident" id="2779638">dst</span><span class="op" id="2779641">.</span><span class="ident" id="2779642">String</span><span class="op" id="2779648">(</span><span class="op" id="2779649">)</span><span class="op" id="2779650">)</span><br>
<span class="lineno"></span><span class="op" id="2779652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2779655">//&nbsp;Convert&nbsp;returns&nbsp;the&nbsp;value&nbsp;v&nbsp;converted&nbsp;to&nbsp;type&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="2779707">//&nbsp;If&nbsp;the&nbsp;usual&nbsp;Go&nbsp;conversion&nbsp;rules&nbsp;do&nbsp;not&nbsp;allow&nbsp;conversion</span><br>
<span class="lineno">2130</span><span class="comment" id="2779767">//&nbsp;of&nbsp;the&nbsp;value&nbsp;v&nbsp;to&nbsp;type&nbsp;t,&nbsp;Convert&nbsp;panics.</span><br>
<span class="lineno"></span><span class="keyword" id="2779812">func</span>&nbsp;<span class="op" id="2779817">(</span><span class="ident" id="2779818">v</span>&nbsp;<span class="ident" id="2779820">Value</span><span class="op" id="2779825">)</span>&nbsp;<span class="ident" id="2779827">Convert</span><span class="op" id="2779834">(</span><span class="ident" id="2779835">t</span>&nbsp;<span class="ident" id="2779837">Type</span><span class="op" id="2779841">)</span>&nbsp;<span class="ident" id="2779843">Value</span>&nbsp;<span class="op" id="2779849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779852">if</span>&nbsp;<span class="ident" id="2779855">v</span><span class="op" id="2779856">.</span><span class="ident" id="2779857">flag</span><span class="op" id="2779861">&amp;</span><span class="ident" id="2779862">flagMethod</span>&nbsp;<span class="op" id="2779873">!=</span>&nbsp;<span class="num" id="2779876">0</span>&nbsp;<span class="op" id="2779878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779882">v</span>&nbsp;<span class="op" id="2779884">=</span>&nbsp;<span class="ident" id="2779886">makeMethodValue</span><span class="op" id="2779901">(</span><span class="string" id="2779902">&#34;Convert&#34;</span><span class="op" id="2779911">,</span>&nbsp;<span class="ident" id="2779913">v</span><span class="op" id="2779914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2779917">}</span><br>
<span class="lineno">2135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2779920">op</span>&nbsp;<span class="op" id="2779923">:=</span>&nbsp;<span class="ident" id="2779926">convertOp</span><span class="op" id="2779935">(</span><span class="ident" id="2779936">t</span><span class="op" id="2779937">.</span><span class="ident" id="2779938">common</span><span class="op" id="2779944">(</span><span class="op" id="2779945">)</span><span class="op" id="2779946">,</span>&nbsp;<span class="ident" id="2779948">v</span><span class="op" id="2779949">.</span><span class="ident" id="2779950">typ</span><span class="op" id="2779953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2779956">if</span>&nbsp;<span class="ident" id="2779959">op</span>&nbsp;<span class="op" id="2779962">==</span>&nbsp;<span class="ident" id="2779965">nil</span>&nbsp;<span class="op" id="2779969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2779973">panic</span><span class="op" id="2779978">(</span><span class="string" id="2779979">&#34;reflect.Value.Convert:&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2780019">+</span>&nbsp;<span class="ident" id="2780021">v</span><span class="op" id="2780022">.</span><span class="ident" id="2780023">typ</span><span class="op" id="2780026">.</span><span class="ident" id="2780027">String</span><span class="op" id="2780033">(</span><span class="op" id="2780034">)</span>&nbsp;<span class="op" id="2780036">+</span>&nbsp;<span class="string" id="2780038">&#34;&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;to&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="2780070">+</span>&nbsp;<span class="ident" id="2780072">t</span><span class="op" id="2780073">.</span><span class="ident" id="2780074">String</span><span class="op" id="2780080">(</span><span class="op" id="2780081">)</span><span class="op" id="2780082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780088">return</span>&nbsp;<span class="ident" id="2780095">op</span><span class="op" id="2780097">(</span><span class="ident" id="2780098">v</span><span class="op" id="2780099">,</span>&nbsp;<span class="ident" id="2780101">t</span><span class="op" id="2780102">)</span><br>
<span class="lineno">2140</span><span class="op" id="2780104">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2780107">//&nbsp;convertOp&nbsp;returns&nbsp;the&nbsp;function&nbsp;to&nbsp;convert&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;src</span><br>
<span class="lineno"></span><span class="comment" id="2780172">//&nbsp;to&nbsp;a&nbsp;value&nbsp;of&nbsp;type&nbsp;dst.&nbsp;If&nbsp;the&nbsp;conversion&nbsp;is&nbsp;illegal,&nbsp;convertOp&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2780252">func</span>&nbsp;<span class="ident" id="2780257">convertOp</span><span class="op" id="2780266">(</span><span class="ident" id="2780267">dst</span><span class="op" id="2780270">,</span>&nbsp;<span class="ident" id="2780272">src</span>&nbsp;<span class="op" id="2780276">*</span><span class="ident" id="2780277">rtype</span><span class="op" id="2780282">)</span>&nbsp;<span class="keyword" id="2780284">func</span><span class="op" id="2780288">(</span><span class="ident" id="2780289">Value</span><span class="op" id="2780294">,</span>&nbsp;<span class="ident" id="2780296">Type</span><span class="op" id="2780300">)</span>&nbsp;<span class="ident" id="2780302">Value</span>&nbsp;<span class="op" id="2780308">{</span><br>
<span class="lineno">2145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780311">switch</span>&nbsp;<span class="ident" id="2780318">src</span><span class="op" id="2780321">.</span><span class="ident" id="2780322">Kind</span><span class="op" id="2780326">(</span><span class="op" id="2780327">)</span>&nbsp;<span class="op" id="2780329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780332">case</span>&nbsp;<span class="ident" id="2780337">Int</span><span class="op" id="2780340">,</span>&nbsp;<span class="ident" id="2780342">Int8</span><span class="op" id="2780346">,</span>&nbsp;<span class="ident" id="2780348">Int16</span><span class="op" id="2780353">,</span>&nbsp;<span class="ident" id="2780355">Int32</span><span class="op" id="2780360">,</span>&nbsp;<span class="ident" id="2780362">Int64</span><span class="op" id="2780367">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780371">switch</span>&nbsp;<span class="ident" id="2780378">dst</span><span class="op" id="2780381">.</span><span class="ident" id="2780382">Kind</span><span class="op" id="2780386">(</span><span class="op" id="2780387">)</span>&nbsp;<span class="op" id="2780389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780393">case</span>&nbsp;<span class="ident" id="2780398">Int</span><span class="op" id="2780401">,</span>&nbsp;<span class="ident" id="2780403">Int8</span><span class="op" id="2780407">,</span>&nbsp;<span class="ident" id="2780409">Int16</span><span class="op" id="2780414">,</span>&nbsp;<span class="ident" id="2780416">Int32</span><span class="op" id="2780421">,</span>&nbsp;<span class="ident" id="2780423">Int64</span><span class="op" id="2780428">,</span>&nbsp;<span class="ident" id="2780430">Uint</span><span class="op" id="2780434">,</span>&nbsp;<span class="ident" id="2780436">Uint8</span><span class="op" id="2780441">,</span>&nbsp;<span class="ident" id="2780443">Uint16</span><span class="op" id="2780449">,</span>&nbsp;<span class="ident" id="2780451">Uint32</span><span class="op" id="2780457">,</span>&nbsp;<span class="ident" id="2780459">Uint64</span><span class="op" id="2780465">,</span>&nbsp;<span class="ident" id="2780467">Uintptr</span><span class="op" id="2780474">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780479">return</span>&nbsp;<span class="ident" id="2780486">cvtInt</span><br>
<span class="lineno">2150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780495">case</span>&nbsp;<span class="ident" id="2780500">Float32</span><span class="op" id="2780507">,</span>&nbsp;<span class="ident" id="2780509">Float64</span><span class="op" id="2780516">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780521">return</span>&nbsp;<span class="ident" id="2780528">cvtIntFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780542">case</span>&nbsp;<span class="ident" id="2780547">String</span><span class="op" id="2780553">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780558">return</span>&nbsp;<span class="ident" id="2780565">cvtIntString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780580">}</span><br>
<span class="lineno">2155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780584">case</span>&nbsp;<span class="ident" id="2780589">Uint</span><span class="op" id="2780593">,</span>&nbsp;<span class="ident" id="2780595">Uint8</span><span class="op" id="2780600">,</span>&nbsp;<span class="ident" id="2780602">Uint16</span><span class="op" id="2780608">,</span>&nbsp;<span class="ident" id="2780610">Uint32</span><span class="op" id="2780616">,</span>&nbsp;<span class="ident" id="2780618">Uint64</span><span class="op" id="2780624">,</span>&nbsp;<span class="ident" id="2780626">Uintptr</span><span class="op" id="2780633">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780637">switch</span>&nbsp;<span class="ident" id="2780644">dst</span><span class="op" id="2780647">.</span><span class="ident" id="2780648">Kind</span><span class="op" id="2780652">(</span><span class="op" id="2780653">)</span>&nbsp;<span class="op" id="2780655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780659">case</span>&nbsp;<span class="ident" id="2780664">Int</span><span class="op" id="2780667">,</span>&nbsp;<span class="ident" id="2780669">Int8</span><span class="op" id="2780673">,</span>&nbsp;<span class="ident" id="2780675">Int16</span><span class="op" id="2780680">,</span>&nbsp;<span class="ident" id="2780682">Int32</span><span class="op" id="2780687">,</span>&nbsp;<span class="ident" id="2780689">Int64</span><span class="op" id="2780694">,</span>&nbsp;<span class="ident" id="2780696">Uint</span><span class="op" id="2780700">,</span>&nbsp;<span class="ident" id="2780702">Uint8</span><span class="op" id="2780707">,</span>&nbsp;<span class="ident" id="2780709">Uint16</span><span class="op" id="2780715">,</span>&nbsp;<span class="ident" id="2780717">Uint32</span><span class="op" id="2780723">,</span>&nbsp;<span class="ident" id="2780725">Uint64</span><span class="op" id="2780731">,</span>&nbsp;<span class="ident" id="2780733">Uintptr</span><span class="op" id="2780740">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780745">return</span>&nbsp;<span class="ident" id="2780752">cvtUint</span><br>
<span class="lineno">2160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780762">case</span>&nbsp;<span class="ident" id="2780767">Float32</span><span class="op" id="2780774">,</span>&nbsp;<span class="ident" id="2780776">Float64</span><span class="op" id="2780783">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780788">return</span>&nbsp;<span class="ident" id="2780795">cvtUintFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780810">case</span>&nbsp;<span class="ident" id="2780815">String</span><span class="op" id="2780821">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780826">return</span>&nbsp;<span class="ident" id="2780833">cvtUintString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2780849">}</span><br>
<span class="lineno">2165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780853">case</span>&nbsp;<span class="ident" id="2780858">Float32</span><span class="op" id="2780865">,</span>&nbsp;<span class="ident" id="2780867">Float64</span><span class="op" id="2780874">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780878">switch</span>&nbsp;<span class="ident" id="2780885">dst</span><span class="op" id="2780888">.</span><span class="ident" id="2780889">Kind</span><span class="op" id="2780893">(</span><span class="op" id="2780894">)</span>&nbsp;<span class="op" id="2780896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780900">case</span>&nbsp;<span class="ident" id="2780905">Int</span><span class="op" id="2780908">,</span>&nbsp;<span class="ident" id="2780910">Int8</span><span class="op" id="2780914">,</span>&nbsp;<span class="ident" id="2780916">Int16</span><span class="op" id="2780921">,</span>&nbsp;<span class="ident" id="2780923">Int32</span><span class="op" id="2780928">,</span>&nbsp;<span class="ident" id="2780930">Int64</span><span class="op" id="2780935">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780940">return</span>&nbsp;<span class="ident" id="2780947">cvtFloatInt</span><br>
<span class="lineno">2170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2780961">case</span>&nbsp;<span class="ident" id="2780966">Uint</span><span class="op" id="2780970">,</span>&nbsp;<span class="ident" id="2780972">Uint8</span><span class="op" id="2780977">,</span>&nbsp;<span class="ident" id="2780979">Uint16</span><span class="op" id="2780985">,</span>&nbsp;<span class="ident" id="2780987">Uint32</span><span class="op" id="2780993">,</span>&nbsp;<span class="ident" id="2780995">Uint64</span><span class="op" id="2781001">,</span>&nbsp;<span class="ident" id="2781003">Uintptr</span><span class="op" id="2781010">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781015">return</span>&nbsp;<span class="ident" id="2781022">cvtFloatUint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781037">case</span>&nbsp;<span class="ident" id="2781042">Float32</span><span class="op" id="2781049">,</span>&nbsp;<span class="ident" id="2781051">Float64</span><span class="op" id="2781058">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781063">return</span>&nbsp;<span class="ident" id="2781070">cvtFloat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781081">}</span><br>
<span class="lineno">2175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781085">case</span>&nbsp;<span class="ident" id="2781090">Complex64</span><span class="op" id="2781099">,</span>&nbsp;<span class="ident" id="2781101">Complex128</span><span class="op" id="2781111">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781115">switch</span>&nbsp;<span class="ident" id="2781122">dst</span><span class="op" id="2781125">.</span><span class="ident" id="2781126">Kind</span><span class="op" id="2781130">(</span><span class="op" id="2781131">)</span>&nbsp;<span class="op" id="2781133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781137">case</span>&nbsp;<span class="ident" id="2781142">Complex64</span><span class="op" id="2781151">,</span>&nbsp;<span class="ident" id="2781153">Complex128</span><span class="op" id="2781163">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781168">return</span>&nbsp;<span class="ident" id="2781175">cvtComplex</span><br>
<span class="lineno">2180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781192">case</span>&nbsp;<span class="ident" id="2781197">String</span><span class="op" id="2781203">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781207">if</span>&nbsp;<span class="ident" id="2781210">dst</span><span class="op" id="2781213">.</span><span class="ident" id="2781214">Kind</span><span class="op" id="2781218">(</span><span class="op" id="2781219">)</span>&nbsp;<span class="op" id="2781221">==</span>&nbsp;<span class="ident" id="2781224">Slice</span>&nbsp;<span class="op" id="2781230">&amp;&amp;</span>&nbsp;<span class="ident" id="2781233">dst</span><span class="op" id="2781236">.</span><span class="ident" id="2781237">Elem</span><span class="op" id="2781241">(</span><span class="op" id="2781242">)</span><span class="op" id="2781243">.</span><span class="ident" id="2781244">PkgPath</span><span class="op" id="2781251">(</span><span class="op" id="2781252">)</span>&nbsp;<span class="op" id="2781254">==</span>&nbsp;<span class="string" id="2781257">&#34;&#34;</span>&nbsp;<span class="op" id="2781260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781265">switch</span>&nbsp;<span class="ident" id="2781272">dst</span><span class="op" id="2781275">.</span><span class="ident" id="2781276">Elem</span><span class="op" id="2781280">(</span><span class="op" id="2781281">)</span><span class="op" id="2781282">.</span><span class="ident" id="2781283">Kind</span><span class="op" id="2781287">(</span><span class="op" id="2781288">)</span>&nbsp;<span class="op" id="2781290">{</span><br>
<span class="lineno">2185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781295">case</span>&nbsp;<span class="ident" id="2781300">Uint8</span><span class="op" id="2781305">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781311">return</span>&nbsp;<span class="ident" id="2781318">cvtStringBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781336">case</span>&nbsp;<span class="ident" id="2781341">Int32</span><span class="op" id="2781346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781352">return</span>&nbsp;<span class="ident" id="2781359">cvtStringRunes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781377">}</span><br>
<span class="lineno">2190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781385">case</span>&nbsp;<span class="ident" id="2781390">Slice</span><span class="op" id="2781395">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781399">if</span>&nbsp;<span class="ident" id="2781402">dst</span><span class="op" id="2781405">.</span><span class="ident" id="2781406">Kind</span><span class="op" id="2781410">(</span><span class="op" id="2781411">)</span>&nbsp;<span class="op" id="2781413">==</span>&nbsp;<span class="ident" id="2781416">String</span>&nbsp;<span class="op" id="2781423">&amp;&amp;</span>&nbsp;<span class="ident" id="2781426">src</span><span class="op" id="2781429">.</span><span class="ident" id="2781430">Elem</span><span class="op" id="2781434">(</span><span class="op" id="2781435">)</span><span class="op" id="2781436">.</span><span class="ident" id="2781437">PkgPath</span><span class="op" id="2781444">(</span><span class="op" id="2781445">)</span>&nbsp;<span class="op" id="2781447">==</span>&nbsp;<span class="string" id="2781450">&#34;&#34;</span>&nbsp;<span class="op" id="2781453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781458">switch</span>&nbsp;<span class="ident" id="2781465">src</span><span class="op" id="2781468">.</span><span class="ident" id="2781469">Elem</span><span class="op" id="2781473">(</span><span class="op" id="2781474">)</span><span class="op" id="2781475">.</span><span class="ident" id="2781476">Kind</span><span class="op" id="2781480">(</span><span class="op" id="2781481">)</span>&nbsp;<span class="op" id="2781483">{</span><br>
<span class="lineno">2195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781488">case</span>&nbsp;<span class="ident" id="2781493">Uint8</span><span class="op" id="2781498">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781504">return</span>&nbsp;<span class="ident" id="2781511">cvtBytesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781529">case</span>&nbsp;<span class="ident" id="2781534">Int32</span><span class="op" id="2781539">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781545">return</span>&nbsp;<span class="ident" id="2781552">cvtRunesString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781570">}</span><br>
<span class="lineno">2200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2781581">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;have&nbsp;same&nbsp;underlying&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781624">if</span>&nbsp;<span class="ident" id="2781627">haveIdenticalUnderlyingType</span><span class="op" id="2781654">(</span><span class="ident" id="2781655">dst</span><span class="op" id="2781658">,</span>&nbsp;<span class="ident" id="2781660">src</span><span class="op" id="2781663">)</span>&nbsp;<span class="op" id="2781665">{</span><br>
<span class="lineno">2205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781669">return</span>&nbsp;<span class="ident" id="2781676">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781687">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2781691">//&nbsp;dst&nbsp;and&nbsp;src&nbsp;are&nbsp;unnamed&nbsp;pointer&nbsp;types&nbsp;with&nbsp;same&nbsp;underlying&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781765">if</span>&nbsp;<span class="ident" id="2781768">dst</span><span class="op" id="2781771">.</span><span class="ident" id="2781772">Kind</span><span class="op" id="2781776">(</span><span class="op" id="2781777">)</span>&nbsp;<span class="op" id="2781779">==</span>&nbsp;<span class="ident" id="2781782">Ptr</span>&nbsp;<span class="op" id="2781786">&amp;&amp;</span>&nbsp;<span class="ident" id="2781789">dst</span><span class="op" id="2781792">.</span><span class="ident" id="2781793">Name</span><span class="op" id="2781797">(</span><span class="op" id="2781798">)</span>&nbsp;<span class="op" id="2781800">==</span>&nbsp;<span class="string" id="2781803">&#34;&#34;</span>&nbsp;<span class="op" id="2781806">&amp;&amp;</span><br>
<span class="lineno">2210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781811">src</span><span class="op" id="2781814">.</span><span class="ident" id="2781815">Kind</span><span class="op" id="2781819">(</span><span class="op" id="2781820">)</span>&nbsp;<span class="op" id="2781822">==</span>&nbsp;<span class="ident" id="2781825">Ptr</span>&nbsp;<span class="op" id="2781829">&amp;&amp;</span>&nbsp;<span class="ident" id="2781832">src</span><span class="op" id="2781835">.</span><span class="ident" id="2781836">Name</span><span class="op" id="2781840">(</span><span class="op" id="2781841">)</span>&nbsp;<span class="op" id="2781843">==</span>&nbsp;<span class="string" id="2781846">&#34;&#34;</span>&nbsp;<span class="op" id="2781849">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2781854">haveIdenticalUnderlyingType</span><span class="op" id="2781881">(</span><span class="ident" id="2781882">dst</span><span class="op" id="2781885">.</span><span class="ident" id="2781886">Elem</span><span class="op" id="2781890">(</span><span class="op" id="2781891">)</span><span class="op" id="2781892">.</span><span class="ident" id="2781893">common</span><span class="op" id="2781899">(</span><span class="op" id="2781900">)</span><span class="op" id="2781901">,</span>&nbsp;<span class="ident" id="2781903">src</span><span class="op" id="2781906">.</span><span class="ident" id="2781907">Elem</span><span class="op" id="2781911">(</span><span class="op" id="2781912">)</span><span class="op" id="2781913">.</span><span class="ident" id="2781914">common</span><span class="op" id="2781920">(</span><span class="op" id="2781921">)</span><span class="op" id="2781922">)</span>&nbsp;<span class="op" id="2781924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781928">return</span>&nbsp;<span class="ident" id="2781935">cvtDirect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2781946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781950">if</span>&nbsp;<span class="ident" id="2781953">implements</span><span class="op" id="2781963">(</span><span class="ident" id="2781964">dst</span><span class="op" id="2781967">,</span>&nbsp;<span class="ident" id="2781969">src</span><span class="op" id="2781972">)</span>&nbsp;<span class="op" id="2781974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2781978">if</span>&nbsp;<span class="ident" id="2781981">src</span><span class="op" id="2781984">.</span><span class="ident" id="2781985">Kind</span><span class="op" id="2781989">(</span><span class="op" id="2781990">)</span>&nbsp;<span class="op" id="2781992">==</span>&nbsp;<span class="ident" id="2781995">Interface</span>&nbsp;<span class="op" id="2782005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782010">return</span>&nbsp;<span class="ident" id="2782017">cvtI2I</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782030">return</span>&nbsp;<span class="ident" id="2782037">cvtT2I</span><br>
<span class="lineno">2220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782049">return</span>&nbsp;<span class="ident" id="2782056">nil</span><br>
<span class="lineno"></span><span class="op" id="2782060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2225</span><span class="comment" id="2782063">//&nbsp;makeInt&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;bits&nbsp;(possibly&nbsp;truncated),</span><br>
<span class="lineno"></span><span class="comment" id="2782136">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2782181">func</span>&nbsp;<span class="ident" id="2782186">makeInt</span><span class="op" id="2782193">(</span><span class="ident" id="2782194">f</span>&nbsp;<span class="ident" id="2782196">flag</span><span class="op" id="2782200">,</span>&nbsp;<span class="ident" id="2782202">bits</span>&nbsp;<span class="ident" id="2782207">uint64</span><span class="op" id="2782213">,</span>&nbsp;<span class="ident" id="2782215">t</span>&nbsp;<span class="ident" id="2782217">Type</span><span class="op" id="2782221">)</span>&nbsp;<span class="ident" id="2782223">Value</span>&nbsp;<span class="op" id="2782229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782232">typ</span>&nbsp;<span class="op" id="2782236">:=</span>&nbsp;<span class="ident" id="2782239">t</span><span class="op" id="2782240">.</span><span class="ident" id="2782241">common</span><span class="op" id="2782247">(</span><span class="op" id="2782248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782251">ptr</span>&nbsp;<span class="op" id="2782255">:=</span>&nbsp;<span class="ident" id="2782258">unsafe_New</span><span class="op" id="2782268">(</span><span class="ident" id="2782269">typ</span><span class="op" id="2782272">)</span><br>
<span class="lineno">2230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782275">switch</span>&nbsp;<span class="ident" id="2782282">typ</span><span class="op" id="2782285">.</span><span class="ident" id="2782286">size</span>&nbsp;<span class="op" id="2782291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782294">case</span>&nbsp;<span class="num" id="2782299">1</span><span class="op" id="2782300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782304">*</span><span class="op" id="2782305">(</span><span class="op" id="2782306">*</span><span class="builtintype" id="2782307">uint8</span><span class="op" id="2782312">)</span><span class="op" id="2782313">(</span><span class="ident" id="2782314">unsafe</span><span class="op" id="2782320">.</span><span class="ident" id="2782321">Pointer</span><span class="op" id="2782328">(</span><span class="ident" id="2782329">ptr</span><span class="op" id="2782332">)</span><span class="op" id="2782333">)</span>&nbsp;<span class="op" id="2782335">=</span>&nbsp;<span class="builtintype" id="2782337">uint8</span><span class="op" id="2782342">(</span><span class="ident" id="2782343">bits</span><span class="op" id="2782347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782350">case</span>&nbsp;<span class="num" id="2782355">2</span><span class="op" id="2782356">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782360">*</span><span class="op" id="2782361">(</span><span class="op" id="2782362">*</span><span class="builtintype" id="2782363">uint16</span><span class="op" id="2782369">)</span><span class="op" id="2782370">(</span><span class="ident" id="2782371">unsafe</span><span class="op" id="2782377">.</span><span class="ident" id="2782378">Pointer</span><span class="op" id="2782385">(</span><span class="ident" id="2782386">ptr</span><span class="op" id="2782389">)</span><span class="op" id="2782390">)</span>&nbsp;<span class="op" id="2782392">=</span>&nbsp;<span class="builtintype" id="2782394">uint16</span><span class="op" id="2782400">(</span><span class="ident" id="2782401">bits</span><span class="op" id="2782405">)</span><br>
<span class="lineno">2235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782408">case</span>&nbsp;<span class="num" id="2782413">4</span><span class="op" id="2782414">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782418">*</span><span class="op" id="2782419">(</span><span class="op" id="2782420">*</span><span class="builtintype" id="2782421">uint32</span><span class="op" id="2782427">)</span><span class="op" id="2782428">(</span><span class="ident" id="2782429">unsafe</span><span class="op" id="2782435">.</span><span class="ident" id="2782436">Pointer</span><span class="op" id="2782443">(</span><span class="ident" id="2782444">ptr</span><span class="op" id="2782447">)</span><span class="op" id="2782448">)</span>&nbsp;<span class="op" id="2782450">=</span>&nbsp;<span class="builtintype" id="2782452">uint32</span><span class="op" id="2782458">(</span><span class="ident" id="2782459">bits</span><span class="op" id="2782463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782466">case</span>&nbsp;<span class="num" id="2782471">8</span><span class="op" id="2782472">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782476">*</span><span class="op" id="2782477">(</span><span class="op" id="2782478">*</span><span class="ident" id="2782479">uint64</span><span class="op" id="2782485">)</span><span class="op" id="2782486">(</span><span class="ident" id="2782487">unsafe</span><span class="op" id="2782493">.</span><span class="ident" id="2782494">Pointer</span><span class="op" id="2782501">(</span><span class="ident" id="2782502">ptr</span><span class="op" id="2782505">)</span><span class="op" id="2782506">)</span>&nbsp;<span class="op" id="2782508">=</span>&nbsp;<span class="ident" id="2782510">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782516">}</span><br>
<span class="lineno">2240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782519">return</span>&nbsp;<span class="ident" id="2782526">Value</span><span class="op" id="2782531">{</span><span class="ident" id="2782532">typ</span><span class="op" id="2782535">,</span>&nbsp;<span class="ident" id="2782537">ptr</span><span class="op" id="2782540">,</span>&nbsp;<span class="ident" id="2782542">f</span>&nbsp;<span class="op" id="2782544">|</span>&nbsp;<span class="ident" id="2782546">flagIndir</span>&nbsp;<span class="op" id="2782556">|</span>&nbsp;<span class="ident" id="2782558">flag</span><span class="op" id="2782562">(</span><span class="ident" id="2782563">typ</span><span class="op" id="2782566">.</span><span class="ident" id="2782567">Kind</span><span class="op" id="2782571">(</span><span class="op" id="2782572">)</span><span class="op" id="2782573">)</span><span class="op" id="2782574">}</span><br>
<span class="lineno"></span><span class="op" id="2782576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782579">//&nbsp;makeFloat&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;float32),</span><br>
<span class="lineno"></span><span class="comment" id="2782662">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;float32&nbsp;or&nbsp;float64&nbsp;type.</span><br>
<span class="lineno">2245</span><span class="keyword" id="2782703">func</span>&nbsp;<span class="ident" id="2782708">makeFloat</span><span class="op" id="2782717">(</span><span class="ident" id="2782718">f</span>&nbsp;<span class="ident" id="2782720">flag</span><span class="op" id="2782724">,</span>&nbsp;<span class="ident" id="2782726">v</span>&nbsp;<span class="builtintype" id="2782728">float64</span><span class="op" id="2782735">,</span>&nbsp;<span class="ident" id="2782737">t</span>&nbsp;<span class="ident" id="2782739">Type</span><span class="op" id="2782743">)</span>&nbsp;<span class="ident" id="2782745">Value</span>&nbsp;<span class="op" id="2782751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782754">typ</span>&nbsp;<span class="op" id="2782758">:=</span>&nbsp;<span class="ident" id="2782761">t</span><span class="op" id="2782762">.</span><span class="ident" id="2782763">common</span><span class="op" id="2782769">(</span><span class="op" id="2782770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2782773">ptr</span>&nbsp;<span class="op" id="2782777">:=</span>&nbsp;<span class="ident" id="2782780">unsafe_New</span><span class="op" id="2782790">(</span><span class="ident" id="2782791">typ</span><span class="op" id="2782794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782797">switch</span>&nbsp;<span class="ident" id="2782804">typ</span><span class="op" id="2782807">.</span><span class="ident" id="2782808">size</span>&nbsp;<span class="op" id="2782813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782816">case</span>&nbsp;<span class="num" id="2782821">4</span><span class="op" id="2782822">:</span><br>
<span class="lineno">2250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782826">*</span><span class="op" id="2782827">(</span><span class="op" id="2782828">*</span><span class="builtintype" id="2782829">float32</span><span class="op" id="2782836">)</span><span class="op" id="2782837">(</span><span class="ident" id="2782838">unsafe</span><span class="op" id="2782844">.</span><span class="ident" id="2782845">Pointer</span><span class="op" id="2782852">(</span><span class="ident" id="2782853">ptr</span><span class="op" id="2782856">)</span><span class="op" id="2782857">)</span>&nbsp;<span class="op" id="2782859">=</span>&nbsp;<span class="builtintype" id="2782861">float32</span><span class="op" id="2782868">(</span><span class="ident" id="2782869">v</span><span class="op" id="2782870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782873">case</span>&nbsp;<span class="num" id="2782878">8</span><span class="op" id="2782879">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782883">*</span><span class="op" id="2782884">(</span><span class="op" id="2782885">*</span><span class="builtintype" id="2782886">float64</span><span class="op" id="2782893">)</span><span class="op" id="2782894">(</span><span class="ident" id="2782895">unsafe</span><span class="op" id="2782901">.</span><span class="ident" id="2782902">Pointer</span><span class="op" id="2782909">(</span><span class="ident" id="2782910">ptr</span><span class="op" id="2782913">)</span><span class="op" id="2782914">)</span>&nbsp;<span class="op" id="2782916">=</span>&nbsp;<span class="ident" id="2782918">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2782921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2782924">return</span>&nbsp;<span class="ident" id="2782931">Value</span><span class="op" id="2782936">{</span><span class="ident" id="2782937">typ</span><span class="op" id="2782940">,</span>&nbsp;<span class="ident" id="2782942">ptr</span><span class="op" id="2782945">,</span>&nbsp;<span class="ident" id="2782947">f</span>&nbsp;<span class="op" id="2782949">|</span>&nbsp;<span class="ident" id="2782951">flagIndir</span>&nbsp;<span class="op" id="2782961">|</span>&nbsp;<span class="ident" id="2782963">flag</span><span class="op" id="2782967">(</span><span class="ident" id="2782968">typ</span><span class="op" id="2782971">.</span><span class="ident" id="2782972">Kind</span><span class="op" id="2782976">(</span><span class="op" id="2782977">)</span><span class="op" id="2782978">)</span><span class="op" id="2782979">}</span><br>
<span class="lineno">2255</span><span class="op" id="2782981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2782984">//&nbsp;makeComplex&nbsp;returns&nbsp;a&nbsp;Value&nbsp;of&nbsp;type&nbsp;t&nbsp;equal&nbsp;to&nbsp;v&nbsp;(possibly&nbsp;truncated&nbsp;to&nbsp;complex64),</span><br>
<span class="lineno"></span><span class="comment" id="2783071">//&nbsp;where&nbsp;t&nbsp;is&nbsp;a&nbsp;complex64&nbsp;or&nbsp;complex128&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="2783117">func</span>&nbsp;<span class="ident" id="2783122">makeComplex</span><span class="op" id="2783133">(</span><span class="ident" id="2783134">f</span>&nbsp;<span class="ident" id="2783136">flag</span><span class="op" id="2783140">,</span>&nbsp;<span class="ident" id="2783142">v</span>&nbsp;<span class="builtintype" id="2783144">complex128</span><span class="op" id="2783154">,</span>&nbsp;<span class="ident" id="2783156">t</span>&nbsp;<span class="ident" id="2783158">Type</span><span class="op" id="2783162">)</span>&nbsp;<span class="ident" id="2783164">Value</span>&nbsp;<span class="op" id="2783170">{</span><br>
<span class="lineno">2260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783173">typ</span>&nbsp;<span class="op" id="2783177">:=</span>&nbsp;<span class="ident" id="2783180">t</span><span class="op" id="2783181">.</span><span class="ident" id="2783182">common</span><span class="op" id="2783188">(</span><span class="op" id="2783189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783192">ptr</span>&nbsp;<span class="op" id="2783196">:=</span>&nbsp;<span class="ident" id="2783199">unsafe_New</span><span class="op" id="2783209">(</span><span class="ident" id="2783210">typ</span><span class="op" id="2783213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783216">switch</span>&nbsp;<span class="ident" id="2783223">typ</span><span class="op" id="2783226">.</span><span class="ident" id="2783227">size</span>&nbsp;<span class="op" id="2783232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783235">case</span>&nbsp;<span class="num" id="2783240">8</span><span class="op" id="2783241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783245">*</span><span class="op" id="2783246">(</span><span class="op" id="2783247">*</span><span class="builtintype" id="2783248">complex64</span><span class="op" id="2783257">)</span><span class="op" id="2783258">(</span><span class="ident" id="2783259">unsafe</span><span class="op" id="2783265">.</span><span class="ident" id="2783266">Pointer</span><span class="op" id="2783273">(</span><span class="ident" id="2783274">ptr</span><span class="op" id="2783277">)</span><span class="op" id="2783278">)</span>&nbsp;<span class="op" id="2783280">=</span>&nbsp;<span class="builtintype" id="2783282">complex64</span><span class="op" id="2783291">(</span><span class="ident" id="2783292">v</span><span class="op" id="2783293">)</span><br>
<span class="lineno">2265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783296">case</span>&nbsp;<span class="num" id="2783301">16</span><span class="op" id="2783303">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783307">*</span><span class="op" id="2783308">(</span><span class="op" id="2783309">*</span><span class="builtintype" id="2783310">complex128</span><span class="op" id="2783320">)</span><span class="op" id="2783321">(</span><span class="ident" id="2783322">unsafe</span><span class="op" id="2783328">.</span><span class="ident" id="2783329">Pointer</span><span class="op" id="2783336">(</span><span class="ident" id="2783337">ptr</span><span class="op" id="2783340">)</span><span class="op" id="2783341">)</span>&nbsp;<span class="op" id="2783343">=</span>&nbsp;<span class="ident" id="2783345">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2783348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783351">return</span>&nbsp;<span class="ident" id="2783358">Value</span><span class="op" id="2783363">{</span><span class="ident" id="2783364">typ</span><span class="op" id="2783367">,</span>&nbsp;<span class="ident" id="2783369">ptr</span><span class="op" id="2783372">,</span>&nbsp;<span class="ident" id="2783374">f</span>&nbsp;<span class="op" id="2783376">|</span>&nbsp;<span class="ident" id="2783378">flagIndir</span>&nbsp;<span class="op" id="2783388">|</span>&nbsp;<span class="ident" id="2783390">flag</span><span class="op" id="2783394">(</span><span class="ident" id="2783395">typ</span><span class="op" id="2783398">.</span><span class="ident" id="2783399">Kind</span><span class="op" id="2783403">(</span><span class="op" id="2783404">)</span><span class="op" id="2783405">)</span><span class="op" id="2783406">}</span><br>
<span class="lineno"></span><span class="op" id="2783408">}</span><br>
<span class="lineno">2270</span><br>
<span class="lineno"></span><span class="keyword" id="2783411">func</span>&nbsp;<span class="ident" id="2783416">makeString</span><span class="op" id="2783426">(</span><span class="ident" id="2783427">f</span>&nbsp;<span class="ident" id="2783429">flag</span><span class="op" id="2783433">,</span>&nbsp;<span class="ident" id="2783435">v</span>&nbsp;<span class="builtintype" id="2783437">string</span><span class="op" id="2783443">,</span>&nbsp;<span class="ident" id="2783445">t</span>&nbsp;<span class="ident" id="2783447">Type</span><span class="op" id="2783451">)</span>&nbsp;<span class="ident" id="2783453">Value</span>&nbsp;<span class="op" id="2783459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783462">ret</span>&nbsp;<span class="op" id="2783466">:=</span>&nbsp;<span class="ident" id="2783469">New</span><span class="op" id="2783472">(</span><span class="ident" id="2783473">t</span><span class="op" id="2783474">)</span><span class="op" id="2783475">.</span><span class="ident" id="2783476">Elem</span><span class="op" id="2783480">(</span><span class="op" id="2783481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783484">ret</span><span class="op" id="2783487">.</span><span class="ident" id="2783488">SetString</span><span class="op" id="2783497">(</span><span class="ident" id="2783498">v</span><span class="op" id="2783499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783502">ret</span><span class="op" id="2783505">.</span><span class="ident" id="2783506">flag</span>&nbsp;<span class="op" id="2783511">=</span>&nbsp;<span class="ident" id="2783513">ret</span><span class="op" id="2783516">.</span><span class="ident" id="2783517">flag</span><span class="op" id="2783521">&amp;^</span><span class="ident" id="2783523">flagAddr</span>&nbsp;<span class="op" id="2783532">|</span>&nbsp;<span class="ident" id="2783534">f</span><br>
<span class="lineno">2275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783537">return</span>&nbsp;<span class="ident" id="2783544">ret</span><br>
<span class="lineno"></span><span class="op" id="2783548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2783551">func</span>&nbsp;<span class="ident" id="2783556">makeBytes</span><span class="op" id="2783565">(</span><span class="ident" id="2783566">f</span>&nbsp;<span class="ident" id="2783568">flag</span><span class="op" id="2783572">,</span>&nbsp;<span class="ident" id="2783574">v</span>&nbsp;<span class="op" id="2783576">[</span><span class="op" id="2783577">]</span><span class="builtintype" id="2783578">byte</span><span class="op" id="2783582">,</span>&nbsp;<span class="ident" id="2783584">t</span>&nbsp;<span class="ident" id="2783586">Type</span><span class="op" id="2783590">)</span>&nbsp;<span class="ident" id="2783592">Value</span>&nbsp;<span class="op" id="2783598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783601">ret</span>&nbsp;<span class="op" id="2783605">:=</span>&nbsp;<span class="ident" id="2783608">New</span><span class="op" id="2783611">(</span><span class="ident" id="2783612">t</span><span class="op" id="2783613">)</span><span class="op" id="2783614">.</span><span class="ident" id="2783615">Elem</span><span class="op" id="2783619">(</span><span class="op" id="2783620">)</span><br>
<span class="lineno">2280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783623">ret</span><span class="op" id="2783626">.</span><span class="ident" id="2783627">SetBytes</span><span class="op" id="2783635">(</span><span class="ident" id="2783636">v</span><span class="op" id="2783637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783640">ret</span><span class="op" id="2783643">.</span><span class="ident" id="2783644">flag</span>&nbsp;<span class="op" id="2783649">=</span>&nbsp;<span class="ident" id="2783651">ret</span><span class="op" id="2783654">.</span><span class="ident" id="2783655">flag</span><span class="op" id="2783659">&amp;^</span><span class="ident" id="2783661">flagAddr</span>&nbsp;<span class="op" id="2783670">|</span>&nbsp;<span class="ident" id="2783672">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783675">return</span>&nbsp;<span class="ident" id="2783682">ret</span><br>
<span class="lineno"></span><span class="op" id="2783686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2285</span><span class="keyword" id="2783689">func</span>&nbsp;<span class="ident" id="2783694">makeRunes</span><span class="op" id="2783703">(</span><span class="ident" id="2783704">f</span>&nbsp;<span class="ident" id="2783706">flag</span><span class="op" id="2783710">,</span>&nbsp;<span class="ident" id="2783712">v</span>&nbsp;<span class="op" id="2783714">[</span><span class="op" id="2783715">]</span><span class="builtintype" id="2783716">rune</span><span class="op" id="2783720">,</span>&nbsp;<span class="ident" id="2783722">t</span>&nbsp;<span class="ident" id="2783724">Type</span><span class="op" id="2783728">)</span>&nbsp;<span class="ident" id="2783730">Value</span>&nbsp;<span class="op" id="2783736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783739">ret</span>&nbsp;<span class="op" id="2783743">:=</span>&nbsp;<span class="ident" id="2783746">New</span><span class="op" id="2783749">(</span><span class="ident" id="2783750">t</span><span class="op" id="2783751">)</span><span class="op" id="2783752">.</span><span class="ident" id="2783753">Elem</span><span class="op" id="2783757">(</span><span class="op" id="2783758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783761">ret</span><span class="op" id="2783764">.</span><span class="ident" id="2783765">setRunes</span><span class="op" id="2783773">(</span><span class="ident" id="2783774">v</span><span class="op" id="2783775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2783778">ret</span><span class="op" id="2783781">.</span><span class="ident" id="2783782">flag</span>&nbsp;<span class="op" id="2783787">=</span>&nbsp;<span class="ident" id="2783789">ret</span><span class="op" id="2783792">.</span><span class="ident" id="2783793">flag</span><span class="op" id="2783797">&amp;^</span><span class="ident" id="2783799">flagAddr</span>&nbsp;<span class="op" id="2783808">|</span>&nbsp;<span class="ident" id="2783810">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2783813">return</span>&nbsp;<span class="ident" id="2783820">ret</span><br>
<span class="lineno">2290</span><span class="op" id="2783824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2783827">//&nbsp;These&nbsp;conversion&nbsp;functions&nbsp;are&nbsp;returned&nbsp;by&nbsp;convertOp</span><br>
<span class="lineno"></span><span class="comment" id="2783883">//&nbsp;for&nbsp;classes&nbsp;of&nbsp;conversions.&nbsp;For&nbsp;example,&nbsp;the&nbsp;first&nbsp;function,&nbsp;cvtInt,</span><br>
<span class="lineno"></span><span class="comment" id="2783955">//&nbsp;takes&nbsp;any&nbsp;value&nbsp;v&nbsp;of&nbsp;signed&nbsp;int&nbsp;type&nbsp;and&nbsp;returns&nbsp;the&nbsp;value&nbsp;converted</span><br>
<span class="lineno">2295</span><span class="comment" id="2784027">//&nbsp;to&nbsp;type&nbsp;t,&nbsp;where&nbsp;t&nbsp;is&nbsp;any&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;int&nbsp;type.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784086">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2784118">func</span>&nbsp;<span class="ident" id="2784123">cvtInt</span><span class="op" id="2784129">(</span><span class="ident" id="2784130">v</span>&nbsp;<span class="ident" id="2784132">Value</span><span class="op" id="2784137">,</span>&nbsp;<span class="ident" id="2784139">t</span>&nbsp;<span class="ident" id="2784141">Type</span><span class="op" id="2784145">)</span>&nbsp;<span class="ident" id="2784147">Value</span>&nbsp;<span class="op" id="2784153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784156">return</span>&nbsp;<span class="ident" id="2784163">makeInt</span><span class="op" id="2784170">(</span><span class="ident" id="2784171">v</span><span class="op" id="2784172">.</span><span class="ident" id="2784173">flag</span><span class="op" id="2784177">&amp;</span><span class="ident" id="2784178">flagRO</span><span class="op" id="2784184">,</span>&nbsp;<span class="ident" id="2784186">uint64</span><span class="op" id="2784192">(</span><span class="ident" id="2784193">v</span><span class="op" id="2784194">.</span><span class="ident" id="2784195">Int</span><span class="op" id="2784198">(</span><span class="op" id="2784199">)</span><span class="op" id="2784200">)</span><span class="op" id="2784201">,</span>&nbsp;<span class="ident" id="2784203">t</span><span class="op" id="2784204">)</span><br>
<span class="lineno">2300</span><span class="op" id="2784206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784209">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;[u]intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2784242">func</span>&nbsp;<span class="ident" id="2784247">cvtUint</span><span class="op" id="2784254">(</span><span class="ident" id="2784255">v</span>&nbsp;<span class="ident" id="2784257">Value</span><span class="op" id="2784262">,</span>&nbsp;<span class="ident" id="2784264">t</span>&nbsp;<span class="ident" id="2784266">Type</span><span class="op" id="2784270">)</span>&nbsp;<span class="ident" id="2784272">Value</span>&nbsp;<span class="op" id="2784278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784281">return</span>&nbsp;<span class="ident" id="2784288">makeInt</span><span class="op" id="2784295">(</span><span class="ident" id="2784296">v</span><span class="op" id="2784297">.</span><span class="ident" id="2784298">flag</span><span class="op" id="2784302">&amp;</span><span class="ident" id="2784303">flagRO</span><span class="op" id="2784309">,</span>&nbsp;<span class="ident" id="2784311">v</span><span class="op" id="2784312">.</span><span class="ident" id="2784313">Uint</span><span class="op" id="2784317">(</span><span class="op" id="2784318">)</span><span class="op" id="2784319">,</span>&nbsp;<span class="ident" id="2784321">t</span><span class="op" id="2784322">)</span><br>
<span class="lineno">2305</span><span class="op" id="2784324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784327">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;intXX</span><br>
<span class="lineno"></span><span class="keyword" id="2784358">func</span>&nbsp;<span class="ident" id="2784363">cvtFloatInt</span><span class="op" id="2784374">(</span><span class="ident" id="2784375">v</span>&nbsp;<span class="ident" id="2784377">Value</span><span class="op" id="2784382">,</span>&nbsp;<span class="ident" id="2784384">t</span>&nbsp;<span class="ident" id="2784386">Type</span><span class="op" id="2784390">)</span>&nbsp;<span class="ident" id="2784392">Value</span>&nbsp;<span class="op" id="2784398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784401">return</span>&nbsp;<span class="ident" id="2784408">makeInt</span><span class="op" id="2784415">(</span><span class="ident" id="2784416">v</span><span class="op" id="2784417">.</span><span class="ident" id="2784418">flag</span><span class="op" id="2784422">&amp;</span><span class="ident" id="2784423">flagRO</span><span class="op" id="2784429">,</span>&nbsp;<span class="ident" id="2784431">uint64</span><span class="op" id="2784437">(</span><span class="ident" id="2784438">int64</span><span class="op" id="2784443">(</span><span class="ident" id="2784444">v</span><span class="op" id="2784445">.</span><span class="ident" id="2784446">Float</span><span class="op" id="2784451">(</span><span class="op" id="2784452">)</span><span class="op" id="2784453">)</span><span class="op" id="2784454">)</span><span class="op" id="2784455">,</span>&nbsp;<span class="ident" id="2784457">t</span><span class="op" id="2784458">)</span><br>
<span class="lineno">2310</span><span class="op" id="2784460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784463">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;uintXX</span><br>
<span class="lineno"></span><span class="keyword" id="2784495">func</span>&nbsp;<span class="ident" id="2784500">cvtFloatUint</span><span class="op" id="2784512">(</span><span class="ident" id="2784513">v</span>&nbsp;<span class="ident" id="2784515">Value</span><span class="op" id="2784520">,</span>&nbsp;<span class="ident" id="2784522">t</span>&nbsp;<span class="ident" id="2784524">Type</span><span class="op" id="2784528">)</span>&nbsp;<span class="ident" id="2784530">Value</span>&nbsp;<span class="op" id="2784536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784539">return</span>&nbsp;<span class="ident" id="2784546">makeInt</span><span class="op" id="2784553">(</span><span class="ident" id="2784554">v</span><span class="op" id="2784555">.</span><span class="ident" id="2784556">flag</span><span class="op" id="2784560">&amp;</span><span class="ident" id="2784561">flagRO</span><span class="op" id="2784567">,</span>&nbsp;<span class="ident" id="2784569">uint64</span><span class="op" id="2784575">(</span><span class="ident" id="2784576">v</span><span class="op" id="2784577">.</span><span class="ident" id="2784578">Float</span><span class="op" id="2784583">(</span><span class="op" id="2784584">)</span><span class="op" id="2784585">)</span><span class="op" id="2784586">,</span>&nbsp;<span class="ident" id="2784588">t</span><span class="op" id="2784589">)</span><br>
<span class="lineno">2315</span><span class="op" id="2784591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784594">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2784625">func</span>&nbsp;<span class="ident" id="2784630">cvtIntFloat</span><span class="op" id="2784641">(</span><span class="ident" id="2784642">v</span>&nbsp;<span class="ident" id="2784644">Value</span><span class="op" id="2784649">,</span>&nbsp;<span class="ident" id="2784651">t</span>&nbsp;<span class="ident" id="2784653">Type</span><span class="op" id="2784657">)</span>&nbsp;<span class="ident" id="2784659">Value</span>&nbsp;<span class="op" id="2784665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784668">return</span>&nbsp;<span class="ident" id="2784675">makeFloat</span><span class="op" id="2784684">(</span><span class="ident" id="2784685">v</span><span class="op" id="2784686">.</span><span class="ident" id="2784687">flag</span><span class="op" id="2784691">&amp;</span><span class="ident" id="2784692">flagRO</span><span class="op" id="2784698">,</span>&nbsp;<span class="builtintype" id="2784700">float64</span><span class="op" id="2784707">(</span><span class="ident" id="2784708">v</span><span class="op" id="2784709">.</span><span class="ident" id="2784710">Int</span><span class="op" id="2784713">(</span><span class="op" id="2784714">)</span><span class="op" id="2784715">)</span><span class="op" id="2784716">,</span>&nbsp;<span class="ident" id="2784718">t</span><span class="op" id="2784719">)</span><br>
<span class="lineno">2320</span><span class="op" id="2784721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784724">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2784756">func</span>&nbsp;<span class="ident" id="2784761">cvtUintFloat</span><span class="op" id="2784773">(</span><span class="ident" id="2784774">v</span>&nbsp;<span class="ident" id="2784776">Value</span><span class="op" id="2784781">,</span>&nbsp;<span class="ident" id="2784783">t</span>&nbsp;<span class="ident" id="2784785">Type</span><span class="op" id="2784789">)</span>&nbsp;<span class="ident" id="2784791">Value</span>&nbsp;<span class="op" id="2784797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784800">return</span>&nbsp;<span class="ident" id="2784807">makeFloat</span><span class="op" id="2784816">(</span><span class="ident" id="2784817">v</span><span class="op" id="2784818">.</span><span class="ident" id="2784819">flag</span><span class="op" id="2784823">&amp;</span><span class="ident" id="2784824">flagRO</span><span class="op" id="2784830">,</span>&nbsp;<span class="builtintype" id="2784832">float64</span><span class="op" id="2784839">(</span><span class="ident" id="2784840">v</span><span class="op" id="2784841">.</span><span class="ident" id="2784842">Uint</span><span class="op" id="2784846">(</span><span class="op" id="2784847">)</span><span class="op" id="2784848">)</span><span class="op" id="2784849">,</span>&nbsp;<span class="ident" id="2784851">t</span><span class="op" id="2784852">)</span><br>
<span class="lineno">2325</span><span class="op" id="2784854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784857">//&nbsp;convertOp:&nbsp;floatXX&nbsp;-&gt;&nbsp;floatXX</span><br>
<span class="lineno"></span><span class="keyword" id="2784890">func</span>&nbsp;<span class="ident" id="2784895">cvtFloat</span><span class="op" id="2784903">(</span><span class="ident" id="2784904">v</span>&nbsp;<span class="ident" id="2784906">Value</span><span class="op" id="2784911">,</span>&nbsp;<span class="ident" id="2784913">t</span>&nbsp;<span class="ident" id="2784915">Type</span><span class="op" id="2784919">)</span>&nbsp;<span class="ident" id="2784921">Value</span>&nbsp;<span class="op" id="2784927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2784930">return</span>&nbsp;<span class="ident" id="2784937">makeFloat</span><span class="op" id="2784946">(</span><span class="ident" id="2784947">v</span><span class="op" id="2784948">.</span><span class="ident" id="2784949">flag</span><span class="op" id="2784953">&amp;</span><span class="ident" id="2784954">flagRO</span><span class="op" id="2784960">,</span>&nbsp;<span class="ident" id="2784962">v</span><span class="op" id="2784963">.</span><span class="ident" id="2784964">Float</span><span class="op" id="2784969">(</span><span class="op" id="2784970">)</span><span class="op" id="2784971">,</span>&nbsp;<span class="ident" id="2784973">t</span><span class="op" id="2784974">)</span><br>
<span class="lineno">2330</span><span class="op" id="2784976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2784979">//&nbsp;convertOp:&nbsp;complexXX&nbsp;-&gt;&nbsp;complexXX</span><br>
<span class="lineno"></span><span class="keyword" id="2785016">func</span>&nbsp;<span class="ident" id="2785021">cvtComplex</span><span class="op" id="2785031">(</span><span class="ident" id="2785032">v</span>&nbsp;<span class="ident" id="2785034">Value</span><span class="op" id="2785039">,</span>&nbsp;<span class="ident" id="2785041">t</span>&nbsp;<span class="ident" id="2785043">Type</span><span class="op" id="2785047">)</span>&nbsp;<span class="ident" id="2785049">Value</span>&nbsp;<span class="op" id="2785055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785058">return</span>&nbsp;<span class="ident" id="2785065">makeComplex</span><span class="op" id="2785076">(</span><span class="ident" id="2785077">v</span><span class="op" id="2785078">.</span><span class="ident" id="2785079">flag</span><span class="op" id="2785083">&amp;</span><span class="ident" id="2785084">flagRO</span><span class="op" id="2785090">,</span>&nbsp;<span class="ident" id="2785092">v</span><span class="op" id="2785093">.</span><span class="ident" id="2785094">Complex</span><span class="op" id="2785101">(</span><span class="op" id="2785102">)</span><span class="op" id="2785103">,</span>&nbsp;<span class="ident" id="2785105">t</span><span class="op" id="2785106">)</span><br>
<span class="lineno">2335</span><span class="op" id="2785108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785111">//&nbsp;convertOp:&nbsp;intXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2785141">func</span>&nbsp;<span class="ident" id="2785146">cvtIntString</span><span class="op" id="2785158">(</span><span class="ident" id="2785159">v</span>&nbsp;<span class="ident" id="2785161">Value</span><span class="op" id="2785166">,</span>&nbsp;<span class="ident" id="2785168">t</span>&nbsp;<span class="ident" id="2785170">Type</span><span class="op" id="2785174">)</span>&nbsp;<span class="ident" id="2785176">Value</span>&nbsp;<span class="op" id="2785182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785185">return</span>&nbsp;<span class="ident" id="2785192">makeString</span><span class="op" id="2785202">(</span><span class="ident" id="2785203">v</span><span class="op" id="2785204">.</span><span class="ident" id="2785205">flag</span><span class="op" id="2785209">&amp;</span><span class="ident" id="2785210">flagRO</span><span class="op" id="2785216">,</span>&nbsp;<span class="builtintype" id="2785218">string</span><span class="op" id="2785224">(</span><span class="ident" id="2785225">v</span><span class="op" id="2785226">.</span><span class="ident" id="2785227">Int</span><span class="op" id="2785230">(</span><span class="op" id="2785231">)</span><span class="op" id="2785232">)</span><span class="op" id="2785233">,</span>&nbsp;<span class="ident" id="2785235">t</span><span class="op" id="2785236">)</span><br>
<span class="lineno">2340</span><span class="op" id="2785238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785241">//&nbsp;convertOp:&nbsp;uintXX&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2785272">func</span>&nbsp;<span class="ident" id="2785277">cvtUintString</span><span class="op" id="2785290">(</span><span class="ident" id="2785291">v</span>&nbsp;<span class="ident" id="2785293">Value</span><span class="op" id="2785298">,</span>&nbsp;<span class="ident" id="2785300">t</span>&nbsp;<span class="ident" id="2785302">Type</span><span class="op" id="2785306">)</span>&nbsp;<span class="ident" id="2785308">Value</span>&nbsp;<span class="op" id="2785314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785317">return</span>&nbsp;<span class="ident" id="2785324">makeString</span><span class="op" id="2785334">(</span><span class="ident" id="2785335">v</span><span class="op" id="2785336">.</span><span class="ident" id="2785337">flag</span><span class="op" id="2785341">&amp;</span><span class="ident" id="2785342">flagRO</span><span class="op" id="2785348">,</span>&nbsp;<span class="builtintype" id="2785350">string</span><span class="op" id="2785356">(</span><span class="ident" id="2785357">v</span><span class="op" id="2785358">.</span><span class="ident" id="2785359">Uint</span><span class="op" id="2785363">(</span><span class="op" id="2785364">)</span><span class="op" id="2785365">)</span><span class="op" id="2785366">,</span>&nbsp;<span class="ident" id="2785368">t</span><span class="op" id="2785369">)</span><br>
<span class="lineno">2345</span><span class="op" id="2785371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785374">//&nbsp;convertOp:&nbsp;[]byte&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2785405">func</span>&nbsp;<span class="ident" id="2785410">cvtBytesString</span><span class="op" id="2785424">(</span><span class="ident" id="2785425">v</span>&nbsp;<span class="ident" id="2785427">Value</span><span class="op" id="2785432">,</span>&nbsp;<span class="ident" id="2785434">t</span>&nbsp;<span class="ident" id="2785436">Type</span><span class="op" id="2785440">)</span>&nbsp;<span class="ident" id="2785442">Value</span>&nbsp;<span class="op" id="2785448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785451">return</span>&nbsp;<span class="ident" id="2785458">makeString</span><span class="op" id="2785468">(</span><span class="ident" id="2785469">v</span><span class="op" id="2785470">.</span><span class="ident" id="2785471">flag</span><span class="op" id="2785475">&amp;</span><span class="ident" id="2785476">flagRO</span><span class="op" id="2785482">,</span>&nbsp;<span class="builtintype" id="2785484">string</span><span class="op" id="2785490">(</span><span class="ident" id="2785491">v</span><span class="op" id="2785492">.</span><span class="ident" id="2785493">Bytes</span><span class="op" id="2785498">(</span><span class="op" id="2785499">)</span><span class="op" id="2785500">)</span><span class="op" id="2785501">,</span>&nbsp;<span class="ident" id="2785503">t</span><span class="op" id="2785504">)</span><br>
<span class="lineno">2350</span><span class="op" id="2785506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785509">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]byte</span><br>
<span class="lineno"></span><span class="keyword" id="2785540">func</span>&nbsp;<span class="ident" id="2785545">cvtStringBytes</span><span class="op" id="2785559">(</span><span class="ident" id="2785560">v</span>&nbsp;<span class="ident" id="2785562">Value</span><span class="op" id="2785567">,</span>&nbsp;<span class="ident" id="2785569">t</span>&nbsp;<span class="ident" id="2785571">Type</span><span class="op" id="2785575">)</span>&nbsp;<span class="ident" id="2785577">Value</span>&nbsp;<span class="op" id="2785583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785586">return</span>&nbsp;<span class="ident" id="2785593">makeBytes</span><span class="op" id="2785602">(</span><span class="ident" id="2785603">v</span><span class="op" id="2785604">.</span><span class="ident" id="2785605">flag</span><span class="op" id="2785609">&amp;</span><span class="ident" id="2785610">flagRO</span><span class="op" id="2785616">,</span>&nbsp;<span class="op" id="2785618">[</span><span class="op" id="2785619">]</span><span class="builtintype" id="2785620">byte</span><span class="op" id="2785624">(</span><span class="ident" id="2785625">v</span><span class="op" id="2785626">.</span><span class="ident" id="2785627">String</span><span class="op" id="2785633">(</span><span class="op" id="2785634">)</span><span class="op" id="2785635">)</span><span class="op" id="2785636">,</span>&nbsp;<span class="ident" id="2785638">t</span><span class="op" id="2785639">)</span><br>
<span class="lineno">2355</span><span class="op" id="2785641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785644">//&nbsp;convertOp:&nbsp;[]rune&nbsp;-&gt;&nbsp;string</span><br>
<span class="lineno"></span><span class="keyword" id="2785675">func</span>&nbsp;<span class="ident" id="2785680">cvtRunesString</span><span class="op" id="2785694">(</span><span class="ident" id="2785695">v</span>&nbsp;<span class="ident" id="2785697">Value</span><span class="op" id="2785702">,</span>&nbsp;<span class="ident" id="2785704">t</span>&nbsp;<span class="ident" id="2785706">Type</span><span class="op" id="2785710">)</span>&nbsp;<span class="ident" id="2785712">Value</span>&nbsp;<span class="op" id="2785718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785721">return</span>&nbsp;<span class="ident" id="2785728">makeString</span><span class="op" id="2785738">(</span><span class="ident" id="2785739">v</span><span class="op" id="2785740">.</span><span class="ident" id="2785741">flag</span><span class="op" id="2785745">&amp;</span><span class="ident" id="2785746">flagRO</span><span class="op" id="2785752">,</span>&nbsp;<span class="builtintype" id="2785754">string</span><span class="op" id="2785760">(</span><span class="ident" id="2785761">v</span><span class="op" id="2785762">.</span><span class="ident" id="2785763">runes</span><span class="op" id="2785768">(</span><span class="op" id="2785769">)</span><span class="op" id="2785770">)</span><span class="op" id="2785771">,</span>&nbsp;<span class="ident" id="2785773">t</span><span class="op" id="2785774">)</span><br>
<span class="lineno">2360</span><span class="op" id="2785776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785779">//&nbsp;convertOp:&nbsp;string&nbsp;-&gt;&nbsp;[]rune</span><br>
<span class="lineno"></span><span class="keyword" id="2785810">func</span>&nbsp;<span class="ident" id="2785815">cvtStringRunes</span><span class="op" id="2785829">(</span><span class="ident" id="2785830">v</span>&nbsp;<span class="ident" id="2785832">Value</span><span class="op" id="2785837">,</span>&nbsp;<span class="ident" id="2785839">t</span>&nbsp;<span class="ident" id="2785841">Type</span><span class="op" id="2785845">)</span>&nbsp;<span class="ident" id="2785847">Value</span>&nbsp;<span class="op" id="2785853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2785856">return</span>&nbsp;<span class="ident" id="2785863">makeRunes</span><span class="op" id="2785872">(</span><span class="ident" id="2785873">v</span><span class="op" id="2785874">.</span><span class="ident" id="2785875">flag</span><span class="op" id="2785879">&amp;</span><span class="ident" id="2785880">flagRO</span><span class="op" id="2785886">,</span>&nbsp;<span class="op" id="2785888">[</span><span class="op" id="2785889">]</span><span class="builtintype" id="2785890">rune</span><span class="op" id="2785894">(</span><span class="ident" id="2785895">v</span><span class="op" id="2785896">.</span><span class="ident" id="2785897">String</span><span class="op" id="2785903">(</span><span class="op" id="2785904">)</span><span class="op" id="2785905">)</span><span class="op" id="2785906">,</span>&nbsp;<span class="ident" id="2785908">t</span><span class="op" id="2785909">)</span><br>
<span class="lineno">2365</span><span class="op" id="2785911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2785914">//&nbsp;convertOp:&nbsp;direct&nbsp;copy</span><br>
<span class="lineno"></span><span class="keyword" id="2785940">func</span>&nbsp;<span class="ident" id="2785945">cvtDirect</span><span class="op" id="2785954">(</span><span class="ident" id="2785955">v</span>&nbsp;<span class="ident" id="2785957">Value</span><span class="op" id="2785962">,</span>&nbsp;<span class="ident" id="2785964">typ</span>&nbsp;<span class="ident" id="2785968">Type</span><span class="op" id="2785972">)</span>&nbsp;<span class="ident" id="2785974">Value</span>&nbsp;<span class="op" id="2785980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785983">f</span>&nbsp;<span class="op" id="2785985">:=</span>&nbsp;<span class="ident" id="2785988">v</span><span class="op" id="2785989">.</span><span class="ident" id="2785990">flag</span><br>
<span class="lineno">2370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2785996">t</span>&nbsp;<span class="op" id="2785998">:=</span>&nbsp;<span class="ident" id="2786001">typ</span><span class="op" id="2786004">.</span><span class="ident" id="2786005">common</span><span class="op" id="2786011">(</span><span class="op" id="2786012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786015">ptr</span>&nbsp;<span class="op" id="2786019">:=</span>&nbsp;<span class="ident" id="2786022">v</span><span class="op" id="2786023">.</span><span class="ident" id="2786024">ptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786029">if</span>&nbsp;<span class="ident" id="2786032">f</span><span class="op" id="2786033">&amp;</span><span class="ident" id="2786034">flagAddr</span>&nbsp;<span class="op" id="2786043">!=</span>&nbsp;<span class="num" id="2786046">0</span>&nbsp;<span class="op" id="2786048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2786052">//&nbsp;indirect,&nbsp;mutable&nbsp;word&nbsp;-&nbsp;make&nbsp;a&nbsp;copy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786094">c</span>&nbsp;<span class="op" id="2786096">:=</span>&nbsp;<span class="ident" id="2786099">unsafe_New</span><span class="op" id="2786109">(</span><span class="ident" id="2786110">t</span><span class="op" id="2786111">)</span><br>
<span class="lineno">2375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786115">memmove</span><span class="op" id="2786122">(</span><span class="ident" id="2786123">c</span><span class="op" id="2786124">,</span>&nbsp;<span class="ident" id="2786126">ptr</span><span class="op" id="2786129">,</span>&nbsp;<span class="ident" id="2786131">t</span><span class="op" id="2786132">.</span><span class="ident" id="2786133">size</span><span class="op" id="2786137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786141">ptr</span>&nbsp;<span class="op" id="2786145">=</span>&nbsp;<span class="ident" id="2786147">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786151">f</span>&nbsp;<span class="op" id="2786153">&amp;^=</span>&nbsp;<span class="ident" id="2786157">flagAddr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786170">return</span>&nbsp;<span class="ident" id="2786177">Value</span><span class="op" id="2786182">{</span><span class="ident" id="2786183">t</span><span class="op" id="2786184">,</span>&nbsp;<span class="ident" id="2786186">ptr</span><span class="op" id="2786189">,</span>&nbsp;<span class="ident" id="2786191">v</span><span class="op" id="2786192">.</span><span class="ident" id="2786193">flag</span><span class="op" id="2786197">&amp;</span><span class="ident" id="2786198">flagRO</span>&nbsp;<span class="op" id="2786205">|</span>&nbsp;<span class="ident" id="2786207">f</span><span class="op" id="2786208">}</span>&nbsp;<span class="comment" id="2786210">//&nbsp;v.flag&amp;flagRO|f&nbsp;==&nbsp;f?</span><br>
<span class="lineno">2380</span><span class="op" id="2786235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2786238">//&nbsp;convertOp:&nbsp;concrete&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno"></span><span class="keyword" id="2786274">func</span>&nbsp;<span class="ident" id="2786279">cvtT2I</span><span class="op" id="2786285">(</span><span class="ident" id="2786286">v</span>&nbsp;<span class="ident" id="2786288">Value</span><span class="op" id="2786293">,</span>&nbsp;<span class="ident" id="2786295">typ</span>&nbsp;<span class="ident" id="2786299">Type</span><span class="op" id="2786303">)</span>&nbsp;<span class="ident" id="2786305">Value</span>&nbsp;<span class="op" id="2786311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786314">target</span>&nbsp;<span class="op" id="2786321">:=</span>&nbsp;<span class="ident" id="2786324">unsafe_New</span><span class="op" id="2786334">(</span><span class="ident" id="2786335">typ</span><span class="op" id="2786338">.</span><span class="ident" id="2786339">common</span><span class="op" id="2786345">(</span><span class="op" id="2786346">)</span><span class="op" id="2786347">)</span><br>
<span class="lineno">2385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786350">x</span>&nbsp;<span class="op" id="2786352">:=</span>&nbsp;<span class="ident" id="2786355">valueInterface</span><span class="op" id="2786369">(</span><span class="ident" id="2786370">v</span><span class="op" id="2786371">,</span>&nbsp;<span class="builtintype" id="2786373">false</span><span class="op" id="2786378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786381">if</span>&nbsp;<span class="ident" id="2786384">typ</span><span class="op" id="2786387">.</span><span class="ident" id="2786388">NumMethod</span><span class="op" id="2786397">(</span><span class="op" id="2786398">)</span>&nbsp;<span class="op" id="2786400">==</span>&nbsp;<span class="num" id="2786403">0</span>&nbsp;<span class="op" id="2786405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786409">*</span><span class="op" id="2786410">(</span><span class="op" id="2786411">*</span><span class="keyword" id="2786412">interface</span><span class="op" id="2786421">{</span><span class="op" id="2786422">}</span><span class="op" id="2786423">)</span><span class="op" id="2786424">(</span><span class="ident" id="2786425">target</span><span class="op" id="2786431">)</span>&nbsp;<span class="op" id="2786433">=</span>&nbsp;<span class="ident" id="2786435">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786438">}</span>&nbsp;<span class="keyword" id="2786440">else</span>&nbsp;<span class="op" id="2786445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786449">ifaceE2I</span><span class="op" id="2786457">(</span><span class="ident" id="2786458">typ</span><span class="op" id="2786461">.</span><span class="op" id="2786462">(</span><span class="op" id="2786463">*</span><span class="ident" id="2786464">rtype</span><span class="op" id="2786469">)</span><span class="op" id="2786470">,</span>&nbsp;<span class="ident" id="2786472">x</span><span class="op" id="2786473">,</span>&nbsp;<span class="ident" id="2786475">target</span><span class="op" id="2786481">)</span><br>
<span class="lineno">2390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786487">return</span>&nbsp;<span class="ident" id="2786494">Value</span><span class="op" id="2786499">{</span><span class="ident" id="2786500">typ</span><span class="op" id="2786503">.</span><span class="ident" id="2786504">common</span><span class="op" id="2786510">(</span><span class="op" id="2786511">)</span><span class="op" id="2786512">,</span>&nbsp;<span class="ident" id="2786514">target</span><span class="op" id="2786520">,</span>&nbsp;<span class="ident" id="2786522">v</span><span class="op" id="2786523">.</span><span class="ident" id="2786524">flag</span><span class="op" id="2786528">&amp;</span><span class="ident" id="2786529">flagRO</span>&nbsp;<span class="op" id="2786536">|</span>&nbsp;<span class="ident" id="2786538">flagIndir</span>&nbsp;<span class="op" id="2786548">|</span>&nbsp;<span class="ident" id="2786550">flag</span><span class="op" id="2786554">(</span><span class="ident" id="2786555">Interface</span><span class="op" id="2786564">)</span><span class="op" id="2786565">}</span><br>
<span class="lineno"></span><span class="op" id="2786567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2786570">//&nbsp;convertOp:&nbsp;interface&nbsp;-&gt;&nbsp;interface</span><br>
<span class="lineno">2395</span><span class="keyword" id="2786607">func</span>&nbsp;<span class="ident" id="2786612">cvtI2I</span><span class="op" id="2786618">(</span><span class="ident" id="2786619">v</span>&nbsp;<span class="ident" id="2786621">Value</span><span class="op" id="2786626">,</span>&nbsp;<span class="ident" id="2786628">typ</span>&nbsp;<span class="ident" id="2786632">Type</span><span class="op" id="2786636">)</span>&nbsp;<span class="ident" id="2786638">Value</span>&nbsp;<span class="op" id="2786644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786647">if</span>&nbsp;<span class="ident" id="2786650">v</span><span class="op" id="2786651">.</span><span class="ident" id="2786652">IsNil</span><span class="op" id="2786657">(</span><span class="op" id="2786658">)</span>&nbsp;<span class="op" id="2786660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786664">ret</span>&nbsp;<span class="op" id="2786668">:=</span>&nbsp;<span class="ident" id="2786671">Zero</span><span class="op" id="2786675">(</span><span class="ident" id="2786676">typ</span><span class="op" id="2786679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2786683">ret</span><span class="op" id="2786686">.</span><span class="ident" id="2786687">flag</span>&nbsp;<span class="op" id="2786692">|=</span>&nbsp;<span class="ident" id="2786695">v</span><span class="op" id="2786696">.</span><span class="ident" id="2786697">flag</span>&nbsp;<span class="op" id="2786702">&amp;</span>&nbsp;<span class="ident" id="2786704">flagRO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786713">return</span>&nbsp;<span class="ident" id="2786720">ret</span><br>
<span class="lineno">2400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2786725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2786728">return</span>&nbsp;<span class="ident" id="2786735">cvtT2I</span><span class="op" id="2786741">(</span><span class="ident" id="2786742">v</span><span class="op" id="2786743">.</span><span class="ident" id="2786744">Elem</span><span class="op" id="2786748">(</span><span class="op" id="2786749">)</span><span class="op" id="2786750">,</span>&nbsp;<span class="ident" id="2786752">typ</span><span class="op" id="2786755">)</span><br>
<span class="lineno"></span><span class="op" id="2786757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2786760">//&nbsp;implemented&nbsp;in&nbsp;../runtime</span><br>
<span class="lineno">2405</span><span class="keyword" id="2786789">func</span>&nbsp;<span class="ident" id="2786794">chancap</span><span class="op" id="2786801">(</span><span class="ident" id="2786802">ch</span>&nbsp;<span class="ident" id="2786805">unsafe</span><span class="op" id="2786811">.</span><span class="ident" id="2786812">Pointer</span><span class="op" id="2786819">)</span>&nbsp;<span class="builtintype" id="2786821">int</span><br>
<span class="lineno"></span><span class="keyword" id="2786825">func</span>&nbsp;<span class="ident" id="2786830">chanclose</span><span class="op" id="2786839">(</span><span class="ident" id="2786840">ch</span>&nbsp;<span class="ident" id="2786843">unsafe</span><span class="op" id="2786849">.</span><span class="ident" id="2786850">Pointer</span><span class="op" id="2786857">)</span><br>
<span class="lineno"></span><span class="keyword" id="2786859">func</span>&nbsp;<span class="ident" id="2786864">chanlen</span><span class="op" id="2786871">(</span><span class="ident" id="2786872">ch</span>&nbsp;<span class="ident" id="2786875">unsafe</span><span class="op" id="2786881">.</span><span class="ident" id="2786882">Pointer</span><span class="op" id="2786889">)</span>&nbsp;<span class="builtintype" id="2786891">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2786896">//go:noescape</span><br>
<span class="lineno">2410</span><span class="keyword" id="2786910">func</span>&nbsp;<span class="ident" id="2786915">chanrecv</span><span class="op" id="2786923">(</span><span class="ident" id="2786924">t</span>&nbsp;<span class="op" id="2786926">*</span><span class="ident" id="2786927">rtype</span><span class="op" id="2786932">,</span>&nbsp;<span class="ident" id="2786934">ch</span>&nbsp;<span class="ident" id="2786937">unsafe</span><span class="op" id="2786943">.</span><span class="ident" id="2786944">Pointer</span><span class="op" id="2786951">,</span>&nbsp;<span class="ident" id="2786953">nb</span>&nbsp;<span class="builtintype" id="2786956">bool</span><span class="op" id="2786960">,</span>&nbsp;<span class="ident" id="2786962">val</span>&nbsp;<span class="ident" id="2786966">unsafe</span><span class="op" id="2786972">.</span><span class="ident" id="2786973">Pointer</span><span class="op" id="2786980">)</span>&nbsp;<span class="op" id="2786982">(</span><span class="ident" id="2786983">selected</span><span class="op" id="2786991">,</span>&nbsp;<span class="ident" id="2786993">received</span>&nbsp;<span class="builtintype" id="2787002">bool</span><span class="op" id="2787006">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2787009">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2787023">func</span>&nbsp;<span class="ident" id="2787028">chansend</span><span class="op" id="2787036">(</span><span class="ident" id="2787037">t</span>&nbsp;<span class="op" id="2787039">*</span><span class="ident" id="2787040">rtype</span><span class="op" id="2787045">,</span>&nbsp;<span class="ident" id="2787047">ch</span>&nbsp;<span class="ident" id="2787050">unsafe</span><span class="op" id="2787056">.</span><span class="ident" id="2787057">Pointer</span><span class="op" id="2787064">,</span>&nbsp;<span class="ident" id="2787066">val</span>&nbsp;<span class="ident" id="2787070">unsafe</span><span class="op" id="2787076">.</span><span class="ident" id="2787077">Pointer</span><span class="op" id="2787084">,</span>&nbsp;<span class="ident" id="2787086">nb</span>&nbsp;<span class="builtintype" id="2787089">bool</span><span class="op" id="2787093">)</span>&nbsp;<span class="builtintype" id="2787095">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">2415</span><span class="keyword" id="2787101">func</span>&nbsp;<span class="ident" id="2787106">makechan</span><span class="op" id="2787114">(</span><span class="ident" id="2787115">typ</span>&nbsp;<span class="op" id="2787119">*</span><span class="ident" id="2787120">rtype</span><span class="op" id="2787125">,</span>&nbsp;<span class="ident" id="2787127">size</span>&nbsp;<span class="ident" id="2787132">uint64</span><span class="op" id="2787138">)</span>&nbsp;<span class="op" id="2787140">(</span><span class="ident" id="2787141">ch</span>&nbsp;<span class="ident" id="2787144">unsafe</span><span class="op" id="2787150">.</span><span class="ident" id="2787151">Pointer</span><span class="op" id="2787158">)</span><br>
<span class="lineno"></span><span class="keyword" id="2787160">func</span>&nbsp;<span class="ident" id="2787165">makemap</span><span class="op" id="2787172">(</span><span class="ident" id="2787173">t</span>&nbsp;<span class="op" id="2787175">*</span><span class="ident" id="2787176">rtype</span><span class="op" id="2787181">)</span>&nbsp;<span class="op" id="2787183">(</span><span class="ident" id="2787184">m</span>&nbsp;<span class="ident" id="2787186">unsafe</span><span class="op" id="2787192">.</span><span class="ident" id="2787193">Pointer</span><span class="op" id="2787200">)</span><br>
<span class="lineno"></span><span class="keyword" id="2787202">func</span>&nbsp;<span class="ident" id="2787207">mapaccess</span><span class="op" id="2787216">(</span><span class="ident" id="2787217">t</span>&nbsp;<span class="op" id="2787219">*</span><span class="ident" id="2787220">rtype</span><span class="op" id="2787225">,</span>&nbsp;<span class="ident" id="2787227">m</span>&nbsp;<span class="ident" id="2787229">unsafe</span><span class="op" id="2787235">.</span><span class="ident" id="2787236">Pointer</span><span class="op" id="2787243">,</span>&nbsp;<span class="ident" id="2787245">key</span>&nbsp;<span class="ident" id="2787249">unsafe</span><span class="op" id="2787255">.</span><span class="ident" id="2787256">Pointer</span><span class="op" id="2787263">)</span>&nbsp;<span class="op" id="2787265">(</span><span class="ident" id="2787266">val</span>&nbsp;<span class="ident" id="2787270">unsafe</span><span class="op" id="2787276">.</span><span class="ident" id="2787277">Pointer</span><span class="op" id="2787284">)</span><br>
<span class="lineno"></span><span class="keyword" id="2787286">func</span>&nbsp;<span class="ident" id="2787291">mapassign</span><span class="op" id="2787300">(</span><span class="ident" id="2787301">t</span>&nbsp;<span class="op" id="2787303">*</span><span class="ident" id="2787304">rtype</span><span class="op" id="2787309">,</span>&nbsp;<span class="ident" id="2787311">m</span>&nbsp;<span class="ident" id="2787313">unsafe</span><span class="op" id="2787319">.</span><span class="ident" id="2787320">Pointer</span><span class="op" id="2787327">,</span>&nbsp;<span class="ident" id="2787329">key</span><span class="op" id="2787332">,</span>&nbsp;<span class="ident" id="2787334">val</span>&nbsp;<span class="ident" id="2787338">unsafe</span><span class="op" id="2787344">.</span><span class="ident" id="2787345">Pointer</span><span class="op" id="2787352">)</span><br>
<span class="lineno"></span><span class="keyword" id="2787354">func</span>&nbsp;<span class="ident" id="2787359">mapdelete</span><span class="op" id="2787368">(</span><span class="ident" id="2787369">t</span>&nbsp;<span class="op" id="2787371">*</span><span class="ident" id="2787372">rtype</span><span class="op" id="2787377">,</span>&nbsp;<span class="ident" id="2787379">m</span>&nbsp;<span class="ident" id="2787381">unsafe</span><span class="op" id="2787387">.</span><span class="ident" id="2787388">Pointer</span><span class="op" id="2787395">,</span>&nbsp;<span class="ident" id="2787397">key</span>&nbsp;<span class="ident" id="2787401">unsafe</span><span class="op" id="2787407">.</span><span class="ident" id="2787408">Pointer</span><span class="op" id="2787415">)</span><br>
<span class="lineno">2420</span><span class="keyword" id="2787417">func</span>&nbsp;<span class="ident" id="2787422">mapiterinit</span><span class="op" id="2787433">(</span><span class="ident" id="2787434">t</span>&nbsp;<span class="op" id="2787436">*</span><span class="ident" id="2787437">rtype</span><span class="op" id="2787442">,</span>&nbsp;<span class="ident" id="2787444">m</span>&nbsp;<span class="ident" id="2787446">unsafe</span><span class="op" id="2787452">.</span><span class="ident" id="2787453">Pointer</span><span class="op" id="2787460">)</span>&nbsp;<span class="ident" id="2787462">unsafe</span><span class="op" id="2787468">.</span><span class="ident" id="2787469">Pointer</span><br>
<span class="lineno"></span><span class="keyword" id="2787477">func</span>&nbsp;<span class="ident" id="2787482">mapiterkey</span><span class="op" id="2787492">(</span><span class="ident" id="2787493">it</span>&nbsp;<span class="ident" id="2787496">unsafe</span><span class="op" id="2787502">.</span><span class="ident" id="2787503">Pointer</span><span class="op" id="2787510">)</span>&nbsp;<span class="op" id="2787512">(</span><span class="ident" id="2787513">key</span>&nbsp;<span class="ident" id="2787517">unsafe</span><span class="op" id="2787523">.</span><span class="ident" id="2787524">Pointer</span><span class="op" id="2787531">)</span><br>
<span class="lineno"></span><span class="keyword" id="2787533">func</span>&nbsp;<span class="ident" id="2787538">mapiternext</span><span class="op" id="2787549">(</span><span class="ident" id="2787550">it</span>&nbsp;<span class="ident" id="2787553">unsafe</span><span class="op" id="2787559">.</span><span class="ident" id="2787560">Pointer</span><span class="op" id="2787567">)</span><br>
<span class="lineno"></span><span class="keyword" id="2787569">func</span>&nbsp;<span class="ident" id="2787574">maplen</span><span class="op" id="2787580">(</span><span class="ident" id="2787581">m</span>&nbsp;<span class="ident" id="2787583">unsafe</span><span class="op" id="2787589">.</span><span class="ident" id="2787590">Pointer</span><span class="op" id="2787597">)</span>&nbsp;<span class="builtintype" id="2787599">int</span><br>
<span class="lineno"></span><span class="keyword" id="2787603">func</span>&nbsp;<span class="ident" id="2787608">call</span><span class="op" id="2787612">(</span><span class="ident" id="2787613">fn</span><span class="op" id="2787615">,</span>&nbsp;<span class="ident" id="2787617">arg</span>&nbsp;<span class="ident" id="2787621">unsafe</span><span class="op" id="2787627">.</span><span class="ident" id="2787628">Pointer</span><span class="op" id="2787635">,</span>&nbsp;<span class="ident" id="2787637">n</span>&nbsp;<span class="builtintype" id="2787639">uint32</span><span class="op" id="2787645">,</span>&nbsp;<span class="ident" id="2787647">retoffset</span>&nbsp;<span class="builtintype" id="2787657">uint32</span><span class="op" id="2787663">)</span><br>
<span class="lineno">2425</span><br>
<span class="lineno"></span><span class="keyword" id="2787666">func</span>&nbsp;<span class="ident" id="2787671">ifaceE2I</span><span class="op" id="2787679">(</span><span class="ident" id="2787680">t</span>&nbsp;<span class="op" id="2787682">*</span><span class="ident" id="2787683">rtype</span><span class="op" id="2787688">,</span>&nbsp;<span class="ident" id="2787690">src</span>&nbsp;<span class="keyword" id="2787694">interface</span><span class="op" id="2787703">{</span><span class="op" id="2787704">}</span><span class="op" id="2787705">,</span>&nbsp;<span class="ident" id="2787707">dst</span>&nbsp;<span class="ident" id="2787711">unsafe</span><span class="op" id="2787717">.</span><span class="ident" id="2787718">Pointer</span><span class="op" id="2787725">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2787728">//go:noescape</span><br>
<span class="lineno"></span><span class="keyword" id="2787742">func</span>&nbsp;<span class="ident" id="2787747">memmove</span><span class="op" id="2787754">(</span><span class="ident" id="2787755">adst</span><span class="op" id="2787759">,</span>&nbsp;<span class="ident" id="2787761">asrc</span>&nbsp;<span class="ident" id="2787766">unsafe</span><span class="op" id="2787772">.</span><span class="ident" id="2787773">Pointer</span><span class="op" id="2787780">,</span>&nbsp;<span class="ident" id="2787782">n</span>&nbsp;<span class="builtintype" id="2787784">uintptr</span><span class="op" id="2787791">)</span><br>
<span class="lineno">2430</span><br>
<span class="lineno"></span><span class="comment" id="2787794">//&nbsp;Dummy&nbsp;annotation&nbsp;marking&nbsp;that&nbsp;the&nbsp;value&nbsp;x&nbsp;escapes,</span><br>
<span class="lineno"></span><span class="comment" id="2787848">//&nbsp;for&nbsp;use&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;reflect&nbsp;code&nbsp;is&nbsp;so&nbsp;clever&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2787909">//&nbsp;the&nbsp;compiler&nbsp;cannot&nbsp;follow.</span><br>
<span class="lineno"></span><span class="keyword" id="2787940">func</span>&nbsp;<span class="ident" id="2787945">escapes</span><span class="op" id="2787952">(</span><span class="ident" id="2787953">x</span>&nbsp;<span class="keyword" id="2787955">interface</span><span class="op" id="2787964">{</span><span class="op" id="2787965">}</span><span class="op" id="2787966">)</span>&nbsp;<span class="op" id="2787968">{</span><br>
<span class="lineno">2435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2787971">if</span>&nbsp;<span class="ident" id="2787974">dummy</span><span class="op" id="2787979">.</span><span class="ident" id="2787980">b</span>&nbsp;<span class="op" id="2787982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2787986">dummy</span><span class="op" id="2787991">.</span><span class="ident" id="2787992">x</span>&nbsp;<span class="op" id="2787994">=</span>&nbsp;<span class="ident" id="2787996">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2787999">}</span><br>
<span class="lineno"></span><span class="op" id="2788001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">2440</span><span class="keyword" id="2788004">var</span>&nbsp;<span class="ident" id="2788008">dummy</span>&nbsp;<span class="keyword" id="2788014">struct</span>&nbsp;<span class="op" id="2788021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788024">b</span>&nbsp;<span class="builtintype" id="2788026">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2788032">x</span>&nbsp;<span class="keyword" id="2788034">interface</span><span class="op" id="2788043">{</span><span class="op" id="2788044">}</span><br>
<span class="lineno"></span><span class="op" id="2788046">}</span>
</div>
</body>
</html>
