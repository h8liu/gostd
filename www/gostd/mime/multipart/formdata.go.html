<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime/multipart</h2>
<ul>
<li><a href="/gostd/mime/multipart/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/mime/multipart/formdata.go.html" class="current">formdata.go</a></li>
<li><a href="/gostd/mime/multipart/formdata_test.go.html">formdata_test.go</a></li>
<li><a href="/gostd/mime/multipart/multipart.go.html">multipart.go</a></li>
<li><a href="/gostd/mime/multipart/multipart_test.go.html">multipart_test.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable.go.html">quotedprintable.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable_test.go.html">quotedprintable_test.go</a></li>
<li><a href="/gostd/mime/multipart/writer.go.html">writer.go</a></li>
<li><a href="/gostd/mime/multipart/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3478298">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3478353">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3478407">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3478458">package</span>&nbsp;<span class="ident" id="3478466">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3478477">import</span>&nbsp;<span class="op" id="3478484">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3478487">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3478496">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3478506">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3478512">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3478525">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3478542">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3478547">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3478550">//&nbsp;TODO(adg,bradfitz):&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;unify&nbsp;the&nbsp;DoS-prevention&nbsp;strategy&nbsp;here</span><br>
<span class="lineno"></span><span class="comment" id="3478626">//&nbsp;with&nbsp;that&nbsp;of&nbsp;the&nbsp;http&nbsp;package&#39;s&nbsp;ParseForm.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3478673">//&nbsp;ReadForm&nbsp;parses&nbsp;an&nbsp;entire&nbsp;multipart&nbsp;message&nbsp;whose&nbsp;parts&nbsp;have</span><br>
<span class="lineno">20</span><span class="comment" id="3478737">//&nbsp;a&nbsp;Content-Disposition&nbsp;of&nbsp;&#34;form-data&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3478778">//&nbsp;It&nbsp;stores&nbsp;up&nbsp;to&nbsp;maxMemory&nbsp;bytes&nbsp;of&nbsp;the&nbsp;file&nbsp;parts&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span><span class="comment" id="3478841">//&nbsp;and&nbsp;the&nbsp;remainder&nbsp;on&nbsp;disk&nbsp;in&nbsp;temporary&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="3478890">func</span>&nbsp;<span class="op" id="3478895">(</span><span class="ident" id="3478896">r</span>&nbsp;<span class="op" id="3478898">*</span><span class="ident" id="3478899">Reader</span><span class="op" id="3478905">)</span>&nbsp;<span class="ident" id="3478907">ReadForm</span><span class="op" id="3478915">(</span><span class="ident" id="3478916">maxMemory</span>&nbsp;<span class="ident" id="3478926">int64</span><span class="op" id="3478931">)</span>&nbsp;<span class="op" id="3478933">(</span><span class="ident" id="3478934">f</span>&nbsp;<span class="op" id="3478936">*</span><span class="ident" id="3478937">Form</span><span class="op" id="3478941">,</span>&nbsp;<span class="ident" id="3478943">err</span>&nbsp;<span class="builtintype" id="3478947">error</span><span class="op" id="3478952">)</span>&nbsp;<span class="op" id="3478954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3478957">form</span>&nbsp;<span class="op" id="3478962">:=</span>&nbsp;<span class="op" id="3478965">&amp;</span><span class="ident" id="3478966">Form</span><span class="op" id="3478970">{</span><span class="builtinfunc" id="3478971">make</span><span class="op" id="3478975">(</span><span class="keyword" id="3478976">map</span><span class="op" id="3478979">[</span><span class="builtintype" id="3478980">string</span><span class="op" id="3478986">]</span><span class="op" id="3478987">[</span><span class="op" id="3478988">]</span><span class="builtintype" id="3478989">string</span><span class="op" id="3478995">)</span><span class="op" id="3478996">,</span>&nbsp;<span class="builtinfunc" id="3478998">make</span><span class="op" id="3479002">(</span><span class="keyword" id="3479003">map</span><span class="op" id="3479006">[</span><span class="builtintype" id="3479007">string</span><span class="op" id="3479013">]</span><span class="op" id="3479014">[</span><span class="op" id="3479015">]</span><span class="op" id="3479016">*</span><span class="ident" id="3479017">FileHeader</span><span class="op" id="3479027">)</span><span class="op" id="3479028">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479031">defer</span>&nbsp;<span class="keyword" id="3479037">func</span><span class="op" id="3479041">(</span><span class="op" id="3479042">)</span>&nbsp;<span class="op" id="3479044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479048">if</span>&nbsp;<span class="ident" id="3479051">err</span>&nbsp;<span class="op" id="3479055">!=</span>&nbsp;<span class="builtintype" id="3479058">nil</span>&nbsp;<span class="op" id="3479062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479067">form</span><span class="op" id="3479071">.</span><span class="ident" id="3479072">RemoveAll</span><span class="op" id="3479081">(</span><span class="op" id="3479082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479089">}</span><span class="op" id="3479090">(</span><span class="op" id="3479091">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479095">maxValueBytes</span>&nbsp;<span class="op" id="3479109">:=</span>&nbsp;<span class="ident" id="3479112">int64</span><span class="op" id="3479117">(</span><span class="num" id="3479118">10</span>&nbsp;<span class="op" id="3479121">&lt;&lt;</span>&nbsp;<span class="num" id="3479124">20</span><span class="op" id="3479126">)</span>&nbsp;<span class="comment" id="3479128">//&nbsp;10&nbsp;MB&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479156">for</span>&nbsp;<span class="op" id="3479160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479164">p</span><span class="op" id="3479165">,</span>&nbsp;<span class="ident" id="3479167">err</span>&nbsp;<span class="op" id="3479171">:=</span>&nbsp;<span class="ident" id="3479174">r</span><span class="op" id="3479175">.</span><span class="ident" id="3479176">NextPart</span><span class="op" id="3479184">(</span><span class="op" id="3479185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479189">if</span>&nbsp;<span class="ident" id="3479192">err</span>&nbsp;<span class="op" id="3479196">==</span>&nbsp;<span class="ident" id="3479199">io</span><span class="op" id="3479201">.</span><span class="ident" id="3479202">EOF</span>&nbsp;<span class="op" id="3479206">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479211">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479223">if</span>&nbsp;<span class="ident" id="3479226">err</span>&nbsp;<span class="op" id="3479230">!=</span>&nbsp;<span class="builtintype" id="3479233">nil</span>&nbsp;<span class="op" id="3479237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479242">return</span>&nbsp;<span class="builtintype" id="3479249">nil</span><span class="op" id="3479252">,</span>&nbsp;<span class="ident" id="3479254">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479260">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479265">name</span>&nbsp;<span class="op" id="3479270">:=</span>&nbsp;<span class="ident" id="3479273">p</span><span class="op" id="3479274">.</span><span class="ident" id="3479275">FormName</span><span class="op" id="3479283">(</span><span class="op" id="3479284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479288">if</span>&nbsp;<span class="ident" id="3479291">name</span>&nbsp;<span class="op" id="3479296">==</span>&nbsp;<span class="string" id="3479299">&#34;&#34;</span>&nbsp;<span class="op" id="3479302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479307">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479318">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479322">filename</span>&nbsp;<span class="op" id="3479331">:=</span>&nbsp;<span class="ident" id="3479334">p</span><span class="op" id="3479335">.</span><span class="ident" id="3479336">FileName</span><span class="op" id="3479344">(</span><span class="op" id="3479345">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479350">var</span>&nbsp;<span class="ident" id="3479354">b</span>&nbsp;<span class="ident" id="3479356">bytes</span><span class="op" id="3479361">.</span><span class="ident" id="3479362">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479372">if</span>&nbsp;<span class="ident" id="3479375">filename</span>&nbsp;<span class="op" id="3479384">==</span>&nbsp;<span class="string" id="3479387">&#34;&#34;</span>&nbsp;<span class="op" id="3479390">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3479395">//&nbsp;value,&nbsp;store&nbsp;as&nbsp;string&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479434">n</span><span class="op" id="3479435">,</span>&nbsp;<span class="ident" id="3479437">err</span>&nbsp;<span class="op" id="3479441">:=</span>&nbsp;<span class="ident" id="3479444">io</span><span class="op" id="3479446">.</span><span class="ident" id="3479447">CopyN</span><span class="op" id="3479452">(</span><span class="op" id="3479453">&amp;</span><span class="ident" id="3479454">b</span><span class="op" id="3479455">,</span>&nbsp;<span class="ident" id="3479457">p</span><span class="op" id="3479458">,</span>&nbsp;<span class="ident" id="3479460">maxValueBytes</span><span class="op" id="3479473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479478">if</span>&nbsp;<span class="ident" id="3479481">err</span>&nbsp;<span class="op" id="3479485">!=</span>&nbsp;<span class="builtintype" id="3479488">nil</span>&nbsp;<span class="op" id="3479492">&amp;&amp;</span>&nbsp;<span class="ident" id="3479495">err</span>&nbsp;<span class="op" id="3479499">!=</span>&nbsp;<span class="ident" id="3479502">io</span><span class="op" id="3479504">.</span><span class="ident" id="3479505">EOF</span>&nbsp;<span class="op" id="3479509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479515">return</span>&nbsp;<span class="builtintype" id="3479522">nil</span><span class="op" id="3479525">,</span>&nbsp;<span class="ident" id="3479527">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479534">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479539">maxValueBytes</span>&nbsp;<span class="op" id="3479553">-=</span>&nbsp;<span class="ident" id="3479556">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479561">if</span>&nbsp;<span class="ident" id="3479564">maxValueBytes</span>&nbsp;<span class="op" id="3479578">==</span>&nbsp;<span class="num" id="3479581">0</span>&nbsp;<span class="op" id="3479583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479589">return</span>&nbsp;<span class="builtintype" id="3479596">nil</span><span class="op" id="3479599">,</span>&nbsp;<span class="ident" id="3479601">errors</span><span class="op" id="3479607">.</span><span class="ident" id="3479608">New</span><span class="op" id="3479611">(</span><span class="string" id="3479612">&#34;multipart:&nbsp;message&nbsp;too&nbsp;large&#34;</span><span class="op" id="3479642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479652">form</span><span class="op" id="3479656">.</span><span class="ident" id="3479657">Value</span><span class="op" id="3479662">[</span><span class="ident" id="3479663">name</span><span class="op" id="3479667">]</span>&nbsp;<span class="op" id="3479669">=</span>&nbsp;<span class="builtinfunc" id="3479671">append</span><span class="op" id="3479677">(</span><span class="ident" id="3479678">form</span><span class="op" id="3479682">.</span><span class="ident" id="3479683">Value</span><span class="op" id="3479688">[</span><span class="ident" id="3479689">name</span><span class="op" id="3479693">]</span><span class="op" id="3479694">,</span>&nbsp;<span class="ident" id="3479696">b</span><span class="op" id="3479697">.</span><span class="ident" id="3479698">String</span><span class="op" id="3479704">(</span><span class="op" id="3479705">)</span><span class="op" id="3479706">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479711">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3479727">//&nbsp;file,&nbsp;store&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479765">fh</span>&nbsp;<span class="op" id="3479768">:=</span>&nbsp;<span class="op" id="3479771">&amp;</span><span class="ident" id="3479772">FileHeader</span><span class="op" id="3479782">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479787">Filename</span><span class="op" id="3479795">:</span>&nbsp;<span class="ident" id="3479797">filename</span><span class="op" id="3479805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479810">Header</span><span class="op" id="3479816">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3479820">p</span><span class="op" id="3479821">.</span><span class="ident" id="3479822">Header</span><span class="op" id="3479828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3479836">n</span><span class="op" id="3479837">,</span>&nbsp;<span class="ident" id="3479839">err</span>&nbsp;<span class="op" id="3479843">:=</span>&nbsp;<span class="ident" id="3479846">io</span><span class="op" id="3479848">.</span><span class="ident" id="3479849">CopyN</span><span class="op" id="3479854">(</span><span class="op" id="3479855">&amp;</span><span class="ident" id="3479856">b</span><span class="op" id="3479857">,</span>&nbsp;<span class="ident" id="3479859">p</span><span class="op" id="3479860">,</span>&nbsp;<span class="ident" id="3479862">maxMemory</span><span class="op" id="3479871">+</span><span class="num" id="3479872">1</span><span class="op" id="3479873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479877">if</span>&nbsp;<span class="ident" id="3479880">err</span>&nbsp;<span class="op" id="3479884">!=</span>&nbsp;<span class="builtintype" id="3479887">nil</span>&nbsp;<span class="op" id="3479891">&amp;&amp;</span>&nbsp;<span class="ident" id="3479894">err</span>&nbsp;<span class="op" id="3479898">!=</span>&nbsp;<span class="ident" id="3479901">io</span><span class="op" id="3479903">.</span><span class="ident" id="3479904">EOF</span>&nbsp;<span class="op" id="3479908">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479913">return</span>&nbsp;<span class="builtintype" id="3479920">nil</span><span class="op" id="3479923">,</span>&nbsp;<span class="ident" id="3479925">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3479931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3479935">if</span>&nbsp;<span class="ident" id="3479938">n</span>&nbsp;<span class="op" id="3479940">&gt;</span>&nbsp;<span class="ident" id="3479942">maxMemory</span>&nbsp;<span class="op" id="3479952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3479957">//&nbsp;too&nbsp;big,&nbsp;write&nbsp;to&nbsp;disk&nbsp;and&nbsp;flush&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480003">file</span><span class="op" id="3480007">,</span>&nbsp;<span class="ident" id="3480009">err</span>&nbsp;<span class="op" id="3480013">:=</span>&nbsp;<span class="ident" id="3480016">ioutil</span><span class="op" id="3480022">.</span><span class="ident" id="3480023">TempFile</span><span class="op" id="3480031">(</span><span class="string" id="3480032">&#34;&#34;</span><span class="op" id="3480034">,</span>&nbsp;<span class="string" id="3480036">&#34;multipart-&#34;</span><span class="op" id="3480048">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480053">if</span>&nbsp;<span class="ident" id="3480056">err</span>&nbsp;<span class="op" id="3480060">!=</span>&nbsp;<span class="builtintype" id="3480063">nil</span>&nbsp;<span class="op" id="3480067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480073">return</span>&nbsp;<span class="builtintype" id="3480080">nil</span><span class="op" id="3480083">,</span>&nbsp;<span class="ident" id="3480085">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480097">defer</span>&nbsp;<span class="ident" id="3480103">file</span><span class="op" id="3480107">.</span><span class="ident" id="3480108">Close</span><span class="op" id="3480113">(</span><span class="op" id="3480114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480119">_</span><span class="op" id="3480120">,</span>&nbsp;<span class="ident" id="3480122">err</span>&nbsp;<span class="op" id="3480126">=</span>&nbsp;<span class="ident" id="3480128">io</span><span class="op" id="3480130">.</span><span class="ident" id="3480131">Copy</span><span class="op" id="3480135">(</span><span class="ident" id="3480136">file</span><span class="op" id="3480140">,</span>&nbsp;<span class="ident" id="3480142">io</span><span class="op" id="3480144">.</span><span class="ident" id="3480145">MultiReader</span><span class="op" id="3480156">(</span><span class="op" id="3480157">&amp;</span><span class="ident" id="3480158">b</span><span class="op" id="3480159">,</span>&nbsp;<span class="ident" id="3480161">p</span><span class="op" id="3480162">)</span><span class="op" id="3480163">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480168">if</span>&nbsp;<span class="ident" id="3480171">err</span>&nbsp;<span class="op" id="3480175">!=</span>&nbsp;<span class="builtintype" id="3480178">nil</span>&nbsp;<span class="op" id="3480182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480188">os</span><span class="op" id="3480190">.</span><span class="ident" id="3480191">Remove</span><span class="op" id="3480197">(</span><span class="ident" id="3480198">file</span><span class="op" id="3480202">.</span><span class="ident" id="3480203">Name</span><span class="op" id="3480207">(</span><span class="op" id="3480208">)</span><span class="op" id="3480209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480215">return</span>&nbsp;<span class="builtintype" id="3480222">nil</span><span class="op" id="3480225">,</span>&nbsp;<span class="ident" id="3480227">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480239">fh</span><span class="op" id="3480241">.</span><span class="ident" id="3480242">tmpfile</span>&nbsp;<span class="op" id="3480250">=</span>&nbsp;<span class="ident" id="3480252">file</span><span class="op" id="3480256">.</span><span class="ident" id="3480257">Name</span><span class="op" id="3480261">(</span><span class="op" id="3480262">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480266">}</span>&nbsp;<span class="keyword" id="3480268">else</span>&nbsp;<span class="op" id="3480273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480278">fh</span><span class="op" id="3480280">.</span><span class="ident" id="3480281">content</span>&nbsp;<span class="op" id="3480289">=</span>&nbsp;<span class="ident" id="3480291">b</span><span class="op" id="3480292">.</span><span class="ident" id="3480293">Bytes</span><span class="op" id="3480298">(</span><span class="op" id="3480299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480304">maxMemory</span>&nbsp;<span class="op" id="3480314">-=</span>&nbsp;<span class="ident" id="3480317">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480321">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480325">form</span><span class="op" id="3480329">.</span><span class="ident" id="3480330">File</span><span class="op" id="3480334">[</span><span class="ident" id="3480335">name</span><span class="op" id="3480339">]</span>&nbsp;<span class="op" id="3480341">=</span>&nbsp;<span class="builtinfunc" id="3480343">append</span><span class="op" id="3480349">(</span><span class="ident" id="3480350">form</span><span class="op" id="3480354">.</span><span class="ident" id="3480355">File</span><span class="op" id="3480359">[</span><span class="ident" id="3480360">name</span><span class="op" id="3480364">]</span><span class="op" id="3480365">,</span>&nbsp;<span class="ident" id="3480367">fh</span><span class="op" id="3480369">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480376">return</span>&nbsp;<span class="ident" id="3480383">form</span><span class="op" id="3480387">,</span>&nbsp;<span class="builtintype" id="3480389">nil</span><br>
<span class="lineno"></span><span class="op" id="3480393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="3480396">//&nbsp;Form&nbsp;is&nbsp;a&nbsp;parsed&nbsp;multipart&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="3480432">//&nbsp;Its&nbsp;File&nbsp;parts&nbsp;are&nbsp;stored&nbsp;either&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk,</span><br>
<span class="lineno"></span><span class="comment" id="3480490">//&nbsp;and&nbsp;are&nbsp;accessible&nbsp;via&nbsp;the&nbsp;*FileHeader&#39;s&nbsp;Open&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="3480547">//&nbsp;Its&nbsp;Value&nbsp;parts&nbsp;are&nbsp;stored&nbsp;as&nbsp;strings.</span><br>
<span class="lineno"></span><span class="comment" id="3480589">//&nbsp;Both&nbsp;are&nbsp;keyed&nbsp;by&nbsp;field&nbsp;name.</span><br>
<span class="lineno">100</span><span class="keyword" id="3480622">type</span>&nbsp;<span class="ident" id="3480627">Form</span>&nbsp;<span class="keyword" id="3480632">struct</span>&nbsp;<span class="op" id="3480639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480642">Value</span>&nbsp;<span class="keyword" id="3480648">map</span><span class="op" id="3480651">[</span><span class="builtintype" id="3480652">string</span><span class="op" id="3480658">]</span><span class="op" id="3480659">[</span><span class="op" id="3480660">]</span><span class="builtintype" id="3480661">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480669">File</span>&nbsp;&nbsp;<span class="keyword" id="3480675">map</span><span class="op" id="3480678">[</span><span class="builtintype" id="3480679">string</span><span class="op" id="3480685">]</span><span class="op" id="3480686">[</span><span class="op" id="3480687">]</span><span class="op" id="3480688">*</span><span class="ident" id="3480689">FileHeader</span><br>
<span class="lineno"></span><span class="op" id="3480700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3480703">//&nbsp;RemoveAll&nbsp;removes&nbsp;any&nbsp;temporary&nbsp;files&nbsp;associated&nbsp;with&nbsp;a&nbsp;Form.</span><br>
<span class="lineno"></span><span class="keyword" id="3480768">func</span>&nbsp;<span class="op" id="3480773">(</span><span class="ident" id="3480774">f</span>&nbsp;<span class="op" id="3480776">*</span><span class="ident" id="3480777">Form</span><span class="op" id="3480781">)</span>&nbsp;<span class="ident" id="3480783">RemoveAll</span><span class="op" id="3480792">(</span><span class="op" id="3480793">)</span>&nbsp;<span class="builtintype" id="3480795">error</span>&nbsp;<span class="op" id="3480801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480804">var</span>&nbsp;<span class="ident" id="3480808">err</span>&nbsp;<span class="builtintype" id="3480812">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480819">for</span>&nbsp;<span class="ident" id="3480823">_</span><span class="op" id="3480824">,</span>&nbsp;<span class="ident" id="3480826">fhs</span>&nbsp;<span class="op" id="3480830">:=</span>&nbsp;<span class="keyword" id="3480833">range</span>&nbsp;<span class="ident" id="3480839">f</span><span class="op" id="3480840">.</span><span class="ident" id="3480841">File</span>&nbsp;<span class="op" id="3480846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480850">for</span>&nbsp;<span class="ident" id="3480854">_</span><span class="op" id="3480855">,</span>&nbsp;<span class="ident" id="3480857">fh</span>&nbsp;<span class="op" id="3480860">:=</span>&nbsp;<span class="keyword" id="3480863">range</span>&nbsp;<span class="ident" id="3480869">fhs</span>&nbsp;<span class="op" id="3480873">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480878">if</span>&nbsp;<span class="ident" id="3480881">fh</span><span class="op" id="3480883">.</span><span class="ident" id="3480884">tmpfile</span>&nbsp;<span class="op" id="3480892">!=</span>&nbsp;<span class="string" id="3480895">&#34;&#34;</span>&nbsp;<span class="op" id="3480898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480904">e</span>&nbsp;<span class="op" id="3480906">:=</span>&nbsp;<span class="ident" id="3480909">os</span><span class="op" id="3480911">.</span><span class="ident" id="3480912">Remove</span><span class="op" id="3480918">(</span><span class="ident" id="3480919">fh</span><span class="op" id="3480921">.</span><span class="ident" id="3480922">tmpfile</span><span class="op" id="3480929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480935">if</span>&nbsp;<span class="ident" id="3480938">e</span>&nbsp;<span class="op" id="3480940">!=</span>&nbsp;<span class="builtintype" id="3480943">nil</span>&nbsp;<span class="op" id="3480947">&amp;&amp;</span>&nbsp;<span class="ident" id="3480950">err</span>&nbsp;<span class="op" id="3480954">==</span>&nbsp;<span class="builtintype" id="3480957">nil</span>&nbsp;<span class="op" id="3480961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3480968">err</span>&nbsp;<span class="op" id="3480972">=</span>&nbsp;<span class="ident" id="3480974">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480980">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3480992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3480995">return</span>&nbsp;<span class="ident" id="3481002">err</span><br>
<span class="lineno"></span><span class="op" id="3481006">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3481009">//&nbsp;A&nbsp;FileHeader&nbsp;describes&nbsp;a&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="3481071">type</span>&nbsp;<span class="ident" id="3481076">FileHeader</span>&nbsp;<span class="keyword" id="3481087">struct</span>&nbsp;<span class="op" id="3481094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481097">Filename</span>&nbsp;<span class="builtintype" id="3481106">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481114">Header</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3481123">textproto</span><span class="op" id="3481132">.</span><span class="ident" id="3481133">MIMEHeader</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481146">content</span>&nbsp;<span class="op" id="3481154">[</span><span class="op" id="3481155">]</span><span class="builtintype" id="3481156">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481162">tmpfile</span>&nbsp;<span class="builtintype" id="3481170">string</span><br>
<span class="lineno"></span><span class="op" id="3481177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="3481180">//&nbsp;Open&nbsp;opens&nbsp;and&nbsp;returns&nbsp;the&nbsp;FileHeader&#39;s&nbsp;associated&nbsp;File.</span><br>
<span class="lineno"></span><span class="keyword" id="3481240">func</span>&nbsp;<span class="op" id="3481245">(</span><span class="ident" id="3481246">fh</span>&nbsp;<span class="op" id="3481249">*</span><span class="ident" id="3481250">FileHeader</span><span class="op" id="3481260">)</span>&nbsp;<span class="ident" id="3481262">Open</span><span class="op" id="3481266">(</span><span class="op" id="3481267">)</span>&nbsp;<span class="op" id="3481269">(</span><span class="ident" id="3481270">File</span><span class="op" id="3481274">,</span>&nbsp;<span class="builtintype" id="3481276">error</span><span class="op" id="3481281">)</span>&nbsp;<span class="op" id="3481283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481286">if</span>&nbsp;<span class="ident" id="3481289">b</span>&nbsp;<span class="op" id="3481291">:=</span>&nbsp;<span class="ident" id="3481294">fh</span><span class="op" id="3481296">.</span><span class="ident" id="3481297">content</span><span class="op" id="3481304">;</span>&nbsp;<span class="ident" id="3481306">b</span>&nbsp;<span class="op" id="3481308">!=</span>&nbsp;<span class="builtintype" id="3481311">nil</span>&nbsp;<span class="op" id="3481315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481319">r</span>&nbsp;<span class="op" id="3481321">:=</span>&nbsp;<span class="ident" id="3481324">io</span><span class="op" id="3481326">.</span><span class="ident" id="3481327">NewSectionReader</span><span class="op" id="3481343">(</span><span class="ident" id="3481344">bytes</span><span class="op" id="3481349">.</span><span class="ident" id="3481350">NewReader</span><span class="op" id="3481359">(</span><span class="ident" id="3481360">b</span><span class="op" id="3481361">)</span><span class="op" id="3481362">,</span>&nbsp;<span class="num" id="3481364">0</span><span class="op" id="3481365">,</span>&nbsp;<span class="ident" id="3481367">int64</span><span class="op" id="3481372">(</span><span class="builtinfunc" id="3481373">len</span><span class="op" id="3481376">(</span><span class="ident" id="3481377">b</span><span class="op" id="3481378">)</span><span class="op" id="3481379">)</span><span class="op" id="3481380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481384">return</span>&nbsp;<span class="ident" id="3481391">sectionReadCloser</span><span class="op" id="3481408">{</span><span class="ident" id="3481409">r</span><span class="op" id="3481410">}</span><span class="op" id="3481411">,</span>&nbsp;<span class="builtintype" id="3481413">nil</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3481418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481421">return</span>&nbsp;<span class="ident" id="3481428">os</span><span class="op" id="3481430">.</span><span class="ident" id="3481431">Open</span><span class="op" id="3481435">(</span><span class="ident" id="3481436">fh</span><span class="op" id="3481438">.</span><span class="ident" id="3481439">tmpfile</span><span class="op" id="3481446">)</span><br>
<span class="lineno"></span><span class="op" id="3481448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3481451">//&nbsp;File&nbsp;is&nbsp;an&nbsp;interface&nbsp;to&nbsp;access&nbsp;the&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;message.</span><br>
<span class="lineno">140</span><span class="comment" id="3481523">//&nbsp;Its&nbsp;contents&nbsp;may&nbsp;be&nbsp;either&nbsp;stored&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk.</span><br>
<span class="lineno"></span><span class="comment" id="3481582">//&nbsp;If&nbsp;stored&nbsp;on&nbsp;disk,&nbsp;the&nbsp;File&#39;s&nbsp;underlying&nbsp;concrete&nbsp;type&nbsp;will&nbsp;be&nbsp;an&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="keyword" id="3481661">type</span>&nbsp;<span class="ident" id="3481666">File</span>&nbsp;<span class="keyword" id="3481671">interface</span>&nbsp;<span class="op" id="3481681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481684">io</span><span class="op" id="3481686">.</span><span class="ident" id="3481687">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481695">io</span><span class="op" id="3481697">.</span><span class="ident" id="3481698">ReaderAt</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481708">io</span><span class="op" id="3481710">.</span><span class="ident" id="3481711">Seeker</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3481719">io</span><span class="op" id="3481721">.</span><span class="ident" id="3481722">Closer</span><br>
<span class="lineno"></span><span class="op" id="3481729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3481732">//&nbsp;helper&nbsp;types&nbsp;to&nbsp;turn&nbsp;a&nbsp;[]byte&nbsp;into&nbsp;a&nbsp;File</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3481778">type</span>&nbsp;<span class="ident" id="3481783">sectionReadCloser</span>&nbsp;<span class="keyword" id="3481801">struct</span>&nbsp;<span class="op" id="3481808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3481811">*</span><span class="ident" id="3481812">io</span><span class="op" id="3481814">.</span><span class="ident" id="3481815">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="3481829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="3481832">func</span>&nbsp;<span class="op" id="3481837">(</span><span class="ident" id="3481838">rc</span>&nbsp;<span class="ident" id="3481841">sectionReadCloser</span><span class="op" id="3481858">)</span>&nbsp;<span class="ident" id="3481860">Close</span><span class="op" id="3481865">(</span><span class="op" id="3481866">)</span>&nbsp;<span class="builtintype" id="3481868">error</span>&nbsp;<span class="op" id="3481874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3481877">return</span>&nbsp;<span class="builtintype" id="3481884">nil</span><br>
<span class="lineno"></span><span class="op" id="3481888">}</span>
</div>
</body>
</html>
