<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html" class="current">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3411791">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3411847">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3411901">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3411952">package</span>&nbsp;<span class="ident" id="3411960">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3411966">import</span>&nbsp;<span class="string" id="3411973">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3411982">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="3412034">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="3412076">func</span>&nbsp;<span class="ident" id="3412081">Compact</span><span class="op" id="3412088">(</span><span class="ident" id="3412089">dst</span>&nbsp;<span class="op" id="3412093">*</span><span class="ident" id="3412094">bytes</span><span class="op" id="3412099">.</span><span class="ident" id="3412100">Buffer</span><span class="op" id="3412106">,</span>&nbsp;<span class="ident" id="3412108">src</span>&nbsp;<span class="op" id="3412112">[</span><span class="op" id="3412113">]</span><span class="builtintype" id="3412114">byte</span><span class="op" id="3412118">)</span>&nbsp;<span class="builtintype" id="3412120">error</span>&nbsp;<span class="op" id="3412126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412129">return</span>&nbsp;<span class="ident" id="3412136">compact</span><span class="op" id="3412143">(</span><span class="ident" id="3412144">dst</span><span class="op" id="3412147">,</span>&nbsp;<span class="ident" id="3412149">src</span><span class="op" id="3412152">,</span>&nbsp;<span class="builtintype" id="3412154">false</span><span class="op" id="3412159">)</span><br>
<span class="lineno"></span><span class="op" id="3412161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3412164">func</span>&nbsp;<span class="ident" id="3412169">compact</span><span class="op" id="3412176">(</span><span class="ident" id="3412177">dst</span>&nbsp;<span class="op" id="3412181">*</span><span class="ident" id="3412182">bytes</span><span class="op" id="3412187">.</span><span class="ident" id="3412188">Buffer</span><span class="op" id="3412194">,</span>&nbsp;<span class="ident" id="3412196">src</span>&nbsp;<span class="op" id="3412200">[</span><span class="op" id="3412201">]</span><span class="builtintype" id="3412202">byte</span><span class="op" id="3412206">,</span>&nbsp;<span class="ident" id="3412208">escape</span>&nbsp;<span class="builtintype" id="3412215">bool</span><span class="op" id="3412219">)</span>&nbsp;<span class="builtintype" id="3412221">error</span>&nbsp;<span class="op" id="3412227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412230">origLen</span>&nbsp;<span class="op" id="3412238">:=</span>&nbsp;<span class="ident" id="3412241">dst</span><span class="op" id="3412244">.</span><span class="ident" id="3412245">Len</span><span class="op" id="3412248">(</span><span class="op" id="3412249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412252">var</span>&nbsp;<span class="ident" id="3412256">scan</span>&nbsp;<span class="ident" id="3412261">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412270">scan</span><span class="op" id="3412274">.</span><span class="ident" id="3412275">reset</span><span class="op" id="3412280">(</span><span class="op" id="3412281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412284">start</span>&nbsp;<span class="op" id="3412290">:=</span>&nbsp;<span class="num" id="3412293">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412296">for</span>&nbsp;<span class="ident" id="3412300">i</span><span class="op" id="3412301">,</span>&nbsp;<span class="ident" id="3412303">c</span>&nbsp;<span class="op" id="3412305">:=</span>&nbsp;<span class="keyword" id="3412308">range</span>&nbsp;<span class="ident" id="3412314">src</span>&nbsp;<span class="op" id="3412318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412322">if</span>&nbsp;<span class="ident" id="3412325">escape</span>&nbsp;<span class="op" id="3412332">&amp;&amp;</span>&nbsp;<span class="op" id="3412335">(</span><span class="ident" id="3412336">c</span>&nbsp;<span class="op" id="3412338">==</span>&nbsp;<span class="string" id="3412341">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="3412345">||</span>&nbsp;<span class="ident" id="3412348">c</span>&nbsp;<span class="op" id="3412350">==</span>&nbsp;<span class="string" id="3412353">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="3412357">||</span>&nbsp;<span class="ident" id="3412360">c</span>&nbsp;<span class="op" id="3412362">==</span>&nbsp;<span class="string" id="3412365">&#39;&amp;&#39;</span><span class="op" id="3412368">)</span>&nbsp;<span class="op" id="3412370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412375">if</span>&nbsp;<span class="ident" id="3412378">start</span>&nbsp;<span class="op" id="3412384">&lt;</span>&nbsp;<span class="ident" id="3412386">i</span>&nbsp;<span class="op" id="3412388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412394">dst</span><span class="op" id="3412397">.</span><span class="ident" id="3412398">Write</span><span class="op" id="3412403">(</span><span class="ident" id="3412404">src</span><span class="op" id="3412407">[</span><span class="ident" id="3412408">start</span><span class="op" id="3412413">:</span><span class="ident" id="3412414">i</span><span class="op" id="3412415">]</span><span class="op" id="3412416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3412421">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412426">dst</span><span class="op" id="3412429">.</span><span class="ident" id="3412430">WriteString</span><span class="op" id="3412441">(</span><span class="string" id="3412442">`\u00`</span><span class="op" id="3412448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412453">dst</span><span class="op" id="3412456">.</span><span class="ident" id="3412457">WriteByte</span><span class="op" id="3412466">(</span><span class="ident" id="3412467">hex</span><span class="op" id="3412470">[</span><span class="ident" id="3412471">c</span><span class="op" id="3412472">&gt;&gt;</span><span class="num" id="3412474">4</span><span class="op" id="3412475">]</span><span class="op" id="3412476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412481">dst</span><span class="op" id="3412484">.</span><span class="ident" id="3412485">WriteByte</span><span class="op" id="3412494">(</span><span class="ident" id="3412495">hex</span><span class="op" id="3412498">[</span><span class="ident" id="3412499">c</span><span class="op" id="3412500">&amp;</span><span class="num" id="3412501">0xF</span><span class="op" id="3412504">]</span><span class="op" id="3412505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412510">start</span>&nbsp;<span class="op" id="3412516">=</span>&nbsp;<span class="ident" id="3412518">i</span>&nbsp;<span class="op" id="3412520">+</span>&nbsp;<span class="num" id="3412522">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3412526">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3412530">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412586">if</span>&nbsp;<span class="ident" id="3412589">c</span>&nbsp;<span class="op" id="3412591">==</span>&nbsp;<span class="num" id="3412594">0xE2</span>&nbsp;<span class="op" id="3412599">&amp;&amp;</span>&nbsp;<span class="ident" id="3412602">i</span><span class="op" id="3412603">+</span><span class="num" id="3412604">2</span>&nbsp;<span class="op" id="3412606">&lt;</span>&nbsp;<span class="builtinfunc" id="3412608">len</span><span class="op" id="3412611">(</span><span class="ident" id="3412612">src</span><span class="op" id="3412615">)</span>&nbsp;<span class="op" id="3412617">&amp;&amp;</span>&nbsp;<span class="ident" id="3412620">src</span><span class="op" id="3412623">[</span><span class="ident" id="3412624">i</span><span class="op" id="3412625">+</span><span class="num" id="3412626">1</span><span class="op" id="3412627">]</span>&nbsp;<span class="op" id="3412629">==</span>&nbsp;<span class="num" id="3412632">0x80</span>&nbsp;<span class="op" id="3412637">&amp;&amp;</span>&nbsp;<span class="ident" id="3412640">src</span><span class="op" id="3412643">[</span><span class="ident" id="3412644">i</span><span class="op" id="3412645">+</span><span class="num" id="3412646">2</span><span class="op" id="3412647">]</span><span class="op" id="3412648">&amp;^</span><span class="num" id="3412650">1</span>&nbsp;<span class="op" id="3412652">==</span>&nbsp;<span class="num" id="3412655">0xA8</span>&nbsp;<span class="op" id="3412660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412665">if</span>&nbsp;<span class="ident" id="3412668">start</span>&nbsp;<span class="op" id="3412674">&lt;</span>&nbsp;<span class="ident" id="3412676">i</span>&nbsp;<span class="op" id="3412678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412684">dst</span><span class="op" id="3412687">.</span><span class="ident" id="3412688">Write</span><span class="op" id="3412693">(</span><span class="ident" id="3412694">src</span><span class="op" id="3412697">[</span><span class="ident" id="3412698">start</span><span class="op" id="3412703">:</span><span class="ident" id="3412704">i</span><span class="op" id="3412705">]</span><span class="op" id="3412706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3412711">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412716">dst</span><span class="op" id="3412719">.</span><span class="ident" id="3412720">WriteString</span><span class="op" id="3412731">(</span><span class="string" id="3412732">`\u202`</span><span class="op" id="3412739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412744">dst</span><span class="op" id="3412747">.</span><span class="ident" id="3412748">WriteByte</span><span class="op" id="3412757">(</span><span class="ident" id="3412758">hex</span><span class="op" id="3412761">[</span><span class="ident" id="3412762">src</span><span class="op" id="3412765">[</span><span class="ident" id="3412766">i</span><span class="op" id="3412767">+</span><span class="num" id="3412768">2</span><span class="op" id="3412769">]</span><span class="op" id="3412770">&amp;</span><span class="num" id="3412771">0xF</span><span class="op" id="3412774">]</span><span class="op" id="3412775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412780">start</span>&nbsp;<span class="op" id="3412786">=</span>&nbsp;<span class="ident" id="3412788">i</span>&nbsp;<span class="op" id="3412790">+</span>&nbsp;<span class="num" id="3412792">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3412796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412800">v</span>&nbsp;<span class="op" id="3412802">:=</span>&nbsp;<span class="ident" id="3412805">scan</span><span class="op" id="3412809">.</span><span class="ident" id="3412810">step</span><span class="op" id="3412814">(</span><span class="op" id="3412815">&amp;</span><span class="ident" id="3412816">scan</span><span class="op" id="3412820">,</span>&nbsp;<span class="builtintype" id="3412822">int</span><span class="op" id="3412825">(</span><span class="ident" id="3412826">c</span><span class="op" id="3412827">)</span><span class="op" id="3412828">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412832">if</span>&nbsp;<span class="ident" id="3412835">v</span>&nbsp;<span class="op" id="3412837">&gt;=</span>&nbsp;<span class="ident" id="3412840">scanSkipSpace</span>&nbsp;<span class="op" id="3412854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412859">if</span>&nbsp;<span class="ident" id="3412862">v</span>&nbsp;<span class="op" id="3412864">==</span>&nbsp;<span class="ident" id="3412867">scanError</span>&nbsp;<span class="op" id="3412877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412883">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3412892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412897">if</span>&nbsp;<span class="ident" id="3412900">start</span>&nbsp;<span class="op" id="3412906">&lt;</span>&nbsp;<span class="ident" id="3412908">i</span>&nbsp;<span class="op" id="3412910">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412916">dst</span><span class="op" id="3412919">.</span><span class="ident" id="3412920">Write</span><span class="op" id="3412925">(</span><span class="ident" id="3412926">src</span><span class="op" id="3412929">[</span><span class="ident" id="3412930">start</span><span class="op" id="3412935">:</span><span class="ident" id="3412936">i</span><span class="op" id="3412937">]</span><span class="op" id="3412938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3412943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3412948">start</span>&nbsp;<span class="op" id="3412954">=</span>&nbsp;<span class="ident" id="3412956">i</span>&nbsp;<span class="op" id="3412958">+</span>&nbsp;<span class="num" id="3412960">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3412964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3412967">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3412970">if</span>&nbsp;<span class="ident" id="3412973">scan</span><span class="op" id="3412977">.</span><span class="ident" id="3412978">eof</span><span class="op" id="3412981">(</span><span class="op" id="3412982">)</span>&nbsp;<span class="op" id="3412984">==</span>&nbsp;<span class="ident" id="3412987">scanError</span>&nbsp;<span class="op" id="3412997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413001">dst</span><span class="op" id="3413004">.</span><span class="ident" id="3413005">Truncate</span><span class="op" id="3413013">(</span><span class="ident" id="3413014">origLen</span><span class="op" id="3413021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3413025">return</span>&nbsp;<span class="ident" id="3413032">scan</span><span class="op" id="3413036">.</span><span class="ident" id="3413037">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3413042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3413045">if</span>&nbsp;<span class="ident" id="3413048">start</span>&nbsp;<span class="op" id="3413054">&lt;</span>&nbsp;<span class="builtinfunc" id="3413056">len</span><span class="op" id="3413059">(</span><span class="ident" id="3413060">src</span><span class="op" id="3413063">)</span>&nbsp;<span class="op" id="3413065">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413069">dst</span><span class="op" id="3413072">.</span><span class="ident" id="3413073">Write</span><span class="op" id="3413078">(</span><span class="ident" id="3413079">src</span><span class="op" id="3413082">[</span><span class="ident" id="3413083">start</span><span class="op" id="3413088">:</span><span class="op" id="3413089">]</span><span class="op" id="3413090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3413093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3413096">return</span>&nbsp;<span class="builtintype" id="3413103">nil</span><br>
<span class="lineno"></span><span class="op" id="3413107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="3413110">func</span>&nbsp;<span class="ident" id="3413115">newline</span><span class="op" id="3413122">(</span><span class="ident" id="3413123">dst</span>&nbsp;<span class="op" id="3413127">*</span><span class="ident" id="3413128">bytes</span><span class="op" id="3413133">.</span><span class="ident" id="3413134">Buffer</span><span class="op" id="3413140">,</span>&nbsp;<span class="ident" id="3413142">prefix</span><span class="op" id="3413148">,</span>&nbsp;<span class="ident" id="3413150">indent</span>&nbsp;<span class="builtintype" id="3413157">string</span><span class="op" id="3413163">,</span>&nbsp;<span class="ident" id="3413165">depth</span>&nbsp;<span class="builtintype" id="3413171">int</span><span class="op" id="3413174">)</span>&nbsp;<span class="op" id="3413176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413179">dst</span><span class="op" id="3413182">.</span><span class="ident" id="3413183">WriteByte</span><span class="op" id="3413192">(</span><span class="string" id="3413193">&#39;\n&#39;</span><span class="op" id="3413197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413200">dst</span><span class="op" id="3413203">.</span><span class="ident" id="3413204">WriteString</span><span class="op" id="3413215">(</span><span class="ident" id="3413216">prefix</span><span class="op" id="3413222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3413225">for</span>&nbsp;<span class="ident" id="3413229">i</span>&nbsp;<span class="op" id="3413231">:=</span>&nbsp;<span class="num" id="3413234">0</span><span class="op" id="3413235">;</span>&nbsp;<span class="ident" id="3413237">i</span>&nbsp;<span class="op" id="3413239">&lt;</span>&nbsp;<span class="ident" id="3413241">depth</span><span class="op" id="3413246">;</span>&nbsp;<span class="ident" id="3413248">i</span><span class="op" id="3413249">++</span>&nbsp;<span class="op" id="3413252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413256">dst</span><span class="op" id="3413259">.</span><span class="ident" id="3413260">WriteString</span><span class="op" id="3413271">(</span><span class="ident" id="3413272">indent</span><span class="op" id="3413278">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3413281">}</span><br>
<span class="lineno"></span><span class="op" id="3413283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3413286">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="3413353">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="3413412">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="3413475">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="3413533">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="3413596">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3413656">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="3413709">func</span>&nbsp;<span class="ident" id="3413714">Indent</span><span class="op" id="3413720">(</span><span class="ident" id="3413721">dst</span>&nbsp;<span class="op" id="3413725">*</span><span class="ident" id="3413726">bytes</span><span class="op" id="3413731">.</span><span class="ident" id="3413732">Buffer</span><span class="op" id="3413738">,</span>&nbsp;<span class="ident" id="3413740">src</span>&nbsp;<span class="op" id="3413744">[</span><span class="op" id="3413745">]</span><span class="builtintype" id="3413746">byte</span><span class="op" id="3413750">,</span>&nbsp;<span class="ident" id="3413752">prefix</span><span class="op" id="3413758">,</span>&nbsp;<span class="ident" id="3413760">indent</span>&nbsp;<span class="builtintype" id="3413767">string</span><span class="op" id="3413773">)</span>&nbsp;<span class="builtintype" id="3413775">error</span>&nbsp;<span class="op" id="3413781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413784">origLen</span>&nbsp;<span class="op" id="3413792">:=</span>&nbsp;<span class="ident" id="3413795">dst</span><span class="op" id="3413798">.</span><span class="ident" id="3413799">Len</span><span class="op" id="3413802">(</span><span class="op" id="3413803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3413806">var</span>&nbsp;<span class="ident" id="3413810">scan</span>&nbsp;<span class="ident" id="3413815">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413824">scan</span><span class="op" id="3413828">.</span><span class="ident" id="3413829">reset</span><span class="op" id="3413834">(</span><span class="op" id="3413835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413838">needIndent</span>&nbsp;<span class="op" id="3413849">:=</span>&nbsp;<span class="builtintype" id="3413852">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413859">depth</span>&nbsp;<span class="op" id="3413865">:=</span>&nbsp;<span class="num" id="3413868">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3413871">for</span>&nbsp;<span class="ident" id="3413875">_</span><span class="op" id="3413876">,</span>&nbsp;<span class="ident" id="3413878">c</span>&nbsp;<span class="op" id="3413880">:=</span>&nbsp;<span class="keyword" id="3413883">range</span>&nbsp;<span class="ident" id="3413889">src</span>&nbsp;<span class="op" id="3413893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413897">scan</span><span class="op" id="3413901">.</span><span class="ident" id="3413902">bytes</span><span class="op" id="3413907">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3413912">v</span>&nbsp;<span class="op" id="3413914">:=</span>&nbsp;<span class="ident" id="3413917">scan</span><span class="op" id="3413921">.</span><span class="ident" id="3413922">step</span><span class="op" id="3413926">(</span><span class="op" id="3413927">&amp;</span><span class="ident" id="3413928">scan</span><span class="op" id="3413932">,</span>&nbsp;<span class="builtintype" id="3413934">int</span><span class="op" id="3413937">(</span><span class="ident" id="3413938">c</span><span class="op" id="3413939">)</span><span class="op" id="3413940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3413944">if</span>&nbsp;<span class="ident" id="3413947">v</span>&nbsp;<span class="op" id="3413949">==</span>&nbsp;<span class="ident" id="3413952">scanSkipSpace</span>&nbsp;<span class="op" id="3413966">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3413971">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3413982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3413986">if</span>&nbsp;<span class="ident" id="3413989">v</span>&nbsp;<span class="op" id="3413991">==</span>&nbsp;<span class="ident" id="3413994">scanError</span>&nbsp;<span class="op" id="3414004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414009">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3414017">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414021">if</span>&nbsp;<span class="ident" id="3414024">needIndent</span>&nbsp;<span class="op" id="3414035">&amp;&amp;</span>&nbsp;<span class="ident" id="3414038">v</span>&nbsp;<span class="op" id="3414040">!=</span>&nbsp;<span class="ident" id="3414043">scanEndObject</span>&nbsp;<span class="op" id="3414057">&amp;&amp;</span>&nbsp;<span class="ident" id="3414060">v</span>&nbsp;<span class="op" id="3414062">!=</span>&nbsp;<span class="ident" id="3414065">scanEndArray</span>&nbsp;<span class="op" id="3414078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414083">needIndent</span>&nbsp;<span class="op" id="3414094">=</span>&nbsp;<span class="builtintype" id="3414096">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414105">depth</span><span class="op" id="3414110">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414116">newline</span><span class="op" id="3414123">(</span><span class="ident" id="3414124">dst</span><span class="op" id="3414127">,</span>&nbsp;<span class="ident" id="3414129">prefix</span><span class="op" id="3414135">,</span>&nbsp;<span class="ident" id="3414137">indent</span><span class="op" id="3414143">,</span>&nbsp;<span class="ident" id="3414145">depth</span><span class="op" id="3414150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3414154">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3414159">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3414202">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414259">if</span>&nbsp;<span class="ident" id="3414262">v</span>&nbsp;<span class="op" id="3414264">==</span>&nbsp;<span class="ident" id="3414267">scanContinue</span>&nbsp;<span class="op" id="3414280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414285">dst</span><span class="op" id="3414288">.</span><span class="ident" id="3414289">WriteByte</span><span class="op" id="3414298">(</span><span class="ident" id="3414299">c</span><span class="op" id="3414300">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414305">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3414316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3414321">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414363">switch</span>&nbsp;<span class="ident" id="3414370">c</span>&nbsp;<span class="op" id="3414372">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414376">case</span>&nbsp;<span class="string" id="3414381">&#39;{&#39;</span><span class="op" id="3414384">,</span>&nbsp;<span class="string" id="3414386">&#39;[&#39;</span><span class="op" id="3414389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3414394">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414472">needIndent</span>&nbsp;<span class="op" id="3414483">=</span>&nbsp;<span class="builtintype" id="3414485">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414493">dst</span><span class="op" id="3414496">.</span><span class="ident" id="3414497">WriteByte</span><span class="op" id="3414506">(</span><span class="ident" id="3414507">c</span><span class="op" id="3414508">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414513">case</span>&nbsp;<span class="string" id="3414518">&#39;,&#39;</span><span class="op" id="3414521">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414526">dst</span><span class="op" id="3414529">.</span><span class="ident" id="3414530">WriteByte</span><span class="op" id="3414539">(</span><span class="ident" id="3414540">c</span><span class="op" id="3414541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414546">newline</span><span class="op" id="3414553">(</span><span class="ident" id="3414554">dst</span><span class="op" id="3414557">,</span>&nbsp;<span class="ident" id="3414559">prefix</span><span class="op" id="3414565">,</span>&nbsp;<span class="ident" id="3414567">indent</span><span class="op" id="3414573">,</span>&nbsp;<span class="ident" id="3414575">depth</span><span class="op" id="3414580">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414585">case</span>&nbsp;<span class="string" id="3414590">&#39;:&#39;</span><span class="op" id="3414593">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414598">dst</span><span class="op" id="3414601">.</span><span class="ident" id="3414602">WriteByte</span><span class="op" id="3414611">(</span><span class="ident" id="3414612">c</span><span class="op" id="3414613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414618">dst</span><span class="op" id="3414621">.</span><span class="ident" id="3414622">WriteByte</span><span class="op" id="3414631">(</span><span class="string" id="3414632">&#39;&nbsp;&#39;</span><span class="op" id="3414635">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414640">case</span>&nbsp;<span class="string" id="3414645">&#39;}&#39;</span><span class="op" id="3414648">,</span>&nbsp;<span class="string" id="3414650">&#39;]&#39;</span><span class="op" id="3414653">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414658">if</span>&nbsp;<span class="ident" id="3414661">needIndent</span>&nbsp;<span class="op" id="3414672">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3414678">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414723">needIndent</span>&nbsp;<span class="op" id="3414734">=</span>&nbsp;<span class="builtintype" id="3414736">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3414745">}</span>&nbsp;<span class="keyword" id="3414747">else</span>&nbsp;<span class="op" id="3414752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414758">depth</span><span class="op" id="3414763">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414770">newline</span><span class="op" id="3414777">(</span><span class="ident" id="3414778">dst</span><span class="op" id="3414781">,</span>&nbsp;<span class="ident" id="3414783">prefix</span><span class="op" id="3414789">,</span>&nbsp;<span class="ident" id="3414791">indent</span><span class="op" id="3414797">,</span>&nbsp;<span class="ident" id="3414799">depth</span><span class="op" id="3414804">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3414809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414814">dst</span><span class="op" id="3414817">.</span><span class="ident" id="3414818">WriteByte</span><span class="op" id="3414827">(</span><span class="ident" id="3414828">c</span><span class="op" id="3414829">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414834">default</span><span class="op" id="3414841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414846">dst</span><span class="op" id="3414849">.</span><span class="ident" id="3414850">WriteByte</span><span class="op" id="3414859">(</span><span class="ident" id="3414860">c</span><span class="op" id="3414861">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3414865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3414868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414871">if</span>&nbsp;<span class="ident" id="3414874">scan</span><span class="op" id="3414878">.</span><span class="ident" id="3414879">eof</span><span class="op" id="3414882">(</span><span class="op" id="3414883">)</span>&nbsp;<span class="op" id="3414885">==</span>&nbsp;<span class="ident" id="3414888">scanError</span>&nbsp;<span class="op" id="3414898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3414902">dst</span><span class="op" id="3414905">.</span><span class="ident" id="3414906">Truncate</span><span class="op" id="3414914">(</span><span class="ident" id="3414915">origLen</span><span class="op" id="3414922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414926">return</span>&nbsp;<span class="ident" id="3414933">scan</span><span class="op" id="3414937">.</span><span class="ident" id="3414938">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3414943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3414946">return</span>&nbsp;<span class="builtintype" id="3414953">nil</span><br>
<span class="lineno"></span><span class="op" id="3414957">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
