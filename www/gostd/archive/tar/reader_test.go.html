<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8052376">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8052431">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8052485">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8052536">package</span>&nbsp;<span class="ident" id="8052544">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8052549">import</span>&nbsp;<span class="op" id="8052556">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8052559">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8052568">&#34;crypto/md5&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8052582">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8052589">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8052595">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8052608">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8052614">&#34;reflect&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8052625">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8052636">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8052647">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8052654">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="8052657">type</span>&nbsp;<span class="ident" id="8052662">untarTest</span>&nbsp;<span class="keyword" id="8052672">struct</span>&nbsp;<span class="op" id="8052679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052682">file</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8052690">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052698">headers</span>&nbsp;<span class="op" id="8052706">[</span><span class="op" id="8052707">]</span><span class="op" id="8052708">*</span><span class="ident" id="8052709">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052717">cksums</span>&nbsp;&nbsp;<span class="op" id="8052725">[</span><span class="op" id="8052726">]</span><span class="builtintype" id="8052727">string</span><br>
<span class="lineno"></span><span class="op" id="8052734">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8052737">var</span>&nbsp;<span class="ident" id="8052741">gnuTarTest</span>&nbsp;<span class="op" id="8052752">=</span>&nbsp;<span class="op" id="8052754">&amp;</span><span class="ident" id="8052755">untarTest</span><span class="op" id="8052764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052767">file</span><span class="op" id="8052771">:</span>&nbsp;<span class="string" id="8052773">&#34;testdata/gnu.tar&#34;</span><span class="op" id="8052791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052794">headers</span><span class="op" id="8052801">:</span>&nbsp;<span class="op" id="8052803">[</span><span class="op" id="8052804">]</span><span class="op" id="8052805">*</span><span class="ident" id="8052806">Header</span><span class="op" id="8052812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8052816">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052821">Name</span><span class="op" id="8052825">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8052831">&#34;small.txt&#34;</span><span class="op" id="8052842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052847">Mode</span><span class="op" id="8052851">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8052857">0640</span><span class="op" id="8052861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052866">Uid</span><span class="op" id="8052869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8052876">73025</span><span class="op" id="8052881">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052886">Gid</span><span class="op" id="8052889">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8052896">5000</span><span class="op" id="8052900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052905">Size</span><span class="op" id="8052909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8052915">5</span><span class="op" id="8052916">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052921">ModTime</span><span class="op" id="8052928">:</span>&nbsp;&nbsp;<span class="ident" id="8052931">time</span><span class="op" id="8052935">.</span><span class="ident" id="8052936">Unix</span><span class="op" id="8052940">(</span><span class="num" id="8052941">1244428340</span><span class="op" id="8052951">,</span>&nbsp;<span class="num" id="8052953">0</span><span class="op" id="8052954">)</span><span class="op" id="8052955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052960">Typeflag</span><span class="op" id="8052968">:</span>&nbsp;<span class="string" id="8052970">&#39;0&#39;</span><span class="op" id="8052973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8052978">Uname</span><span class="op" id="8052983">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8052988">&#34;dsymonds&#34;</span><span class="op" id="8052998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053003">Gname</span><span class="op" id="8053008">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053013">&#34;eng&#34;</span><span class="op" id="8053018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053022">}</span><span class="op" id="8053023">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053032">Name</span><span class="op" id="8053036">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053042">&#34;small2.txt&#34;</span><span class="op" id="8053054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053059">Mode</span><span class="op" id="8053063">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053069">0640</span><span class="op" id="8053073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053078">Uid</span><span class="op" id="8053081">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053088">73025</span><span class="op" id="8053093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053098">Gid</span><span class="op" id="8053101">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053108">5000</span><span class="op" id="8053112">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053117">Size</span><span class="op" id="8053121">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053127">11</span><span class="op" id="8053129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053134">ModTime</span><span class="op" id="8053141">:</span>&nbsp;&nbsp;<span class="ident" id="8053144">time</span><span class="op" id="8053148">.</span><span class="ident" id="8053149">Unix</span><span class="op" id="8053153">(</span><span class="num" id="8053154">1244436044</span><span class="op" id="8053164">,</span>&nbsp;<span class="num" id="8053166">0</span><span class="op" id="8053167">)</span><span class="op" id="8053168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053173">Typeflag</span><span class="op" id="8053181">:</span>&nbsp;<span class="string" id="8053183">&#39;0&#39;</span><span class="op" id="8053186">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053191">Uname</span><span class="op" id="8053196">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053201">&#34;dsymonds&#34;</span><span class="op" id="8053211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053216">Gname</span><span class="op" id="8053221">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053226">&#34;eng&#34;</span><span class="op" id="8053231">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053235">}</span><span class="op" id="8053236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053239">}</span><span class="op" id="8053240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053243">cksums</span><span class="op" id="8053249">:</span>&nbsp;<span class="op" id="8053251">[</span><span class="op" id="8053252">]</span><span class="builtintype" id="8053253">string</span><span class="op" id="8053259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8053263">&#34;e38b27eaccb4391bdec553a7f3ae6b2f&#34;</span><span class="op" id="8053297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8053301">&#34;c65bd2e50a56a2138bf1716f2fd56fe9&#34;</span><span class="op" id="8053335">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053338">}</span><span class="op" id="8053339">,</span><br>
<span class="lineno"></span><span class="op" id="8053341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8053344">var</span>&nbsp;<span class="ident" id="8053348">sparseTarTest</span>&nbsp;<span class="op" id="8053362">=</span>&nbsp;<span class="op" id="8053364">&amp;</span><span class="ident" id="8053365">untarTest</span><span class="op" id="8053374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053377">file</span><span class="op" id="8053381">:</span>&nbsp;<span class="string" id="8053383">&#34;testdata/sparse-formats.tar&#34;</span><span class="op" id="8053412">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053415">headers</span><span class="op" id="8053422">:</span>&nbsp;<span class="op" id="8053424">[</span><span class="op" id="8053425">]</span><span class="op" id="8053426">*</span><span class="ident" id="8053427">Header</span><span class="op" id="8053433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053442">Name</span><span class="op" id="8053446">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053452">&#34;sparse-gnu&#34;</span><span class="op" id="8053464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053469">Mode</span><span class="op" id="8053473">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053479">420</span><span class="op" id="8053482">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053487">Uid</span><span class="op" id="8053490">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053497">1000</span><span class="op" id="8053501">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053506">Gid</span><span class="op" id="8053509">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053516">1000</span><span class="op" id="8053520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053525">Size</span><span class="op" id="8053529">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053535">200</span><span class="op" id="8053538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053543">ModTime</span><span class="op" id="8053550">:</span>&nbsp;&nbsp;<span class="ident" id="8053553">time</span><span class="op" id="8053557">.</span><span class="ident" id="8053558">Unix</span><span class="op" id="8053562">(</span><span class="num" id="8053563">1392395740</span><span class="op" id="8053573">,</span>&nbsp;<span class="num" id="8053575">0</span><span class="op" id="8053576">)</span><span class="op" id="8053577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053582">Typeflag</span><span class="op" id="8053590">:</span>&nbsp;<span class="num" id="8053592">0x53</span><span class="op" id="8053596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053601">Linkname</span><span class="op" id="8053609">:</span>&nbsp;<span class="string" id="8053611">&#34;&#34;</span><span class="op" id="8053613">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053618">Uname</span><span class="op" id="8053623">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053628">&#34;david&#34;</span><span class="op" id="8053635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053640">Gname</span><span class="op" id="8053645">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053650">&#34;david&#34;</span><span class="op" id="8053657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053662">Devmajor</span><span class="op" id="8053670">:</span>&nbsp;<span class="num" id="8053672">0</span><span class="op" id="8053673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053678">Devminor</span><span class="op" id="8053686">:</span>&nbsp;<span class="num" id="8053688">0</span><span class="op" id="8053689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053693">}</span><span class="op" id="8053694">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053703">Name</span><span class="op" id="8053707">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053713">&#34;sparse-posix-0.0&#34;</span><span class="op" id="8053731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053736">Mode</span><span class="op" id="8053740">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053746">420</span><span class="op" id="8053749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053754">Uid</span><span class="op" id="8053757">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053764">1000</span><span class="op" id="8053768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053773">Gid</span><span class="op" id="8053776">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053783">1000</span><span class="op" id="8053787">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053792">Size</span><span class="op" id="8053796">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8053802">200</span><span class="op" id="8053805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053810">ModTime</span><span class="op" id="8053817">:</span>&nbsp;&nbsp;<span class="ident" id="8053820">time</span><span class="op" id="8053824">.</span><span class="ident" id="8053825">Unix</span><span class="op" id="8053829">(</span><span class="num" id="8053830">1392342187</span><span class="op" id="8053840">,</span>&nbsp;<span class="num" id="8053842">0</span><span class="op" id="8053843">)</span><span class="op" id="8053844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053849">Typeflag</span><span class="op" id="8053857">:</span>&nbsp;<span class="num" id="8053859">0x30</span><span class="op" id="8053863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053868">Linkname</span><span class="op" id="8053876">:</span>&nbsp;<span class="string" id="8053878">&#34;&#34;</span><span class="op" id="8053880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053885">Uname</span><span class="op" id="8053890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053895">&#34;david&#34;</span><span class="op" id="8053902">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053907">Gname</span><span class="op" id="8053912">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053917">&#34;david&#34;</span><span class="op" id="8053924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053929">Devmajor</span><span class="op" id="8053937">:</span>&nbsp;<span class="num" id="8053939">0</span><span class="op" id="8053940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053945">Devminor</span><span class="op" id="8053953">:</span>&nbsp;<span class="num" id="8053955">0</span><span class="op" id="8053956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053960">}</span><span class="op" id="8053961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8053965">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8053970">Name</span><span class="op" id="8053974">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8053980">&#34;sparse-posix-0.1&#34;</span><span class="op" id="8053998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054003">Mode</span><span class="op" id="8054007">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054013">420</span><span class="op" id="8054016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054021">Uid</span><span class="op" id="8054024">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054031">1000</span><span class="op" id="8054035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054040">Gid</span><span class="op" id="8054043">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054050">1000</span><span class="op" id="8054054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054059">Size</span><span class="op" id="8054063">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054069">200</span><span class="op" id="8054072">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054077">ModTime</span><span class="op" id="8054084">:</span>&nbsp;&nbsp;<span class="ident" id="8054087">time</span><span class="op" id="8054091">.</span><span class="ident" id="8054092">Unix</span><span class="op" id="8054096">(</span><span class="num" id="8054097">1392340456</span><span class="op" id="8054107">,</span>&nbsp;<span class="num" id="8054109">0</span><span class="op" id="8054110">)</span><span class="op" id="8054111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054116">Typeflag</span><span class="op" id="8054124">:</span>&nbsp;<span class="num" id="8054126">0x30</span><span class="op" id="8054130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054135">Linkname</span><span class="op" id="8054143">:</span>&nbsp;<span class="string" id="8054145">&#34;&#34;</span><span class="op" id="8054147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054152">Uname</span><span class="op" id="8054157">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8054162">&#34;david&#34;</span><span class="op" id="8054169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054174">Gname</span><span class="op" id="8054179">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8054184">&#34;david&#34;</span><span class="op" id="8054191">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054196">Devmajor</span><span class="op" id="8054204">:</span>&nbsp;<span class="num" id="8054206">0</span><span class="op" id="8054207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054212">Devminor</span><span class="op" id="8054220">:</span>&nbsp;<span class="num" id="8054222">0</span><span class="op" id="8054223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8054227">}</span><span class="op" id="8054228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8054232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054237">Name</span><span class="op" id="8054241">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8054247">&#34;sparse-posix-1.0&#34;</span><span class="op" id="8054265">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054270">Mode</span><span class="op" id="8054274">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054280">420</span><span class="op" id="8054283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054288">Uid</span><span class="op" id="8054291">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054298">1000</span><span class="op" id="8054302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054307">Gid</span><span class="op" id="8054310">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054317">1000</span><span class="op" id="8054321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054326">Size</span><span class="op" id="8054330">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054336">200</span><span class="op" id="8054339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054344">ModTime</span><span class="op" id="8054351">:</span>&nbsp;&nbsp;<span class="ident" id="8054354">time</span><span class="op" id="8054358">.</span><span class="ident" id="8054359">Unix</span><span class="op" id="8054363">(</span><span class="num" id="8054364">1392337404</span><span class="op" id="8054374">,</span>&nbsp;<span class="num" id="8054376">0</span><span class="op" id="8054377">)</span><span class="op" id="8054378">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054383">Typeflag</span><span class="op" id="8054391">:</span>&nbsp;<span class="num" id="8054393">0x30</span><span class="op" id="8054397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054402">Linkname</span><span class="op" id="8054410">:</span>&nbsp;<span class="string" id="8054412">&#34;&#34;</span><span class="op" id="8054414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054419">Uname</span><span class="op" id="8054424">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8054429">&#34;david&#34;</span><span class="op" id="8054436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054441">Gname</span><span class="op" id="8054446">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8054451">&#34;david&#34;</span><span class="op" id="8054458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054463">Devmajor</span><span class="op" id="8054471">:</span>&nbsp;<span class="num" id="8054473">0</span><span class="op" id="8054474">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054479">Devminor</span><span class="op" id="8054487">:</span>&nbsp;<span class="num" id="8054489">0</span><span class="op" id="8054490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8054494">}</span><span class="op" id="8054495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8054499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054504">Name</span><span class="op" id="8054508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8054514">&#34;end&#34;</span><span class="op" id="8054519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054524">Mode</span><span class="op" id="8054528">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054534">420</span><span class="op" id="8054537">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054542">Uid</span><span class="op" id="8054545">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054552">1000</span><span class="op" id="8054556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054561">Gid</span><span class="op" id="8054564">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054571">1000</span><span class="op" id="8054575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054580">Size</span><span class="op" id="8054584">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8054590">4</span><span class="op" id="8054591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054596">ModTime</span><span class="op" id="8054603">:</span>&nbsp;&nbsp;<span class="ident" id="8054606">time</span><span class="op" id="8054610">.</span><span class="ident" id="8054611">Unix</span><span class="op" id="8054615">(</span><span class="num" id="8054616">1392398319</span><span class="op" id="8054626">,</span>&nbsp;<span class="num" id="8054628">0</span><span class="op" id="8054629">)</span><span class="op" id="8054630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054635">Typeflag</span><span class="op" id="8054643">:</span>&nbsp;<span class="num" id="8054645">0x30</span><span class="op" id="8054649">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054654">Linkname</span><span class="op" id="8054662">:</span>&nbsp;<span class="string" id="8054664">&#34;&#34;</span><span class="op" id="8054666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054671">Uname</span><span class="op" id="8054676">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8054681">&#34;david&#34;</span><span class="op" id="8054688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054693">Gname</span><span class="op" id="8054698">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8054703">&#34;david&#34;</span><span class="op" id="8054710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054715">Devmajor</span><span class="op" id="8054723">:</span>&nbsp;<span class="num" id="8054725">0</span><span class="op" id="8054726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054731">Devminor</span><span class="op" id="8054739">:</span>&nbsp;<span class="num" id="8054741">0</span><span class="op" id="8054742">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8054746">}</span><span class="op" id="8054747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8054750">}</span><span class="op" id="8054751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8054754">cksums</span><span class="op" id="8054760">:</span>&nbsp;<span class="op" id="8054762">[</span><span class="op" id="8054763">]</span><span class="builtintype" id="8054764">string</span><span class="op" id="8054770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8054774">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="8054808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8054812">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="8054846">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8054850">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="8054884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8054888">&#34;6f53234398c2449fe67c1812d993012f&#34;</span><span class="op" id="8054922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8054926">&#34;b0061974914468de549a2af8ced10316&#34;</span><span class="op" id="8054960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8054963">}</span><span class="op" id="8054964">,</span><br>
<span class="lineno"></span><span class="op" id="8054966">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="8054969">var</span>&nbsp;<span class="ident" id="8054973">untarTests</span>&nbsp;<span class="op" id="8054984">=</span>&nbsp;<span class="op" id="8054986">[</span><span class="op" id="8054987">]</span><span class="op" id="8054988">*</span><span class="ident" id="8054989">untarTest</span><span class="op" id="8054998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055001">gnuTarTest</span><span class="op" id="8055011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055014">sparseTarTest</span><span class="op" id="8055027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055030">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055034">file</span><span class="op" id="8055038">:</span>&nbsp;<span class="string" id="8055040">&#34;testdata/star.tar&#34;</span><span class="op" id="8055059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055063">headers</span><span class="op" id="8055070">:</span>&nbsp;<span class="op" id="8055072">[</span><span class="op" id="8055073">]</span><span class="op" id="8055074">*</span><span class="ident" id="8055075">Header</span><span class="op" id="8055081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055092">Name</span><span class="op" id="8055096">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8055104">&#34;small.txt&#34;</span><span class="op" id="8055115">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055121">Mode</span><span class="op" id="8055125">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055133">0640</span><span class="op" id="8055137">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055143">Uid</span><span class="op" id="8055146">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055155">73025</span><span class="op" id="8055160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055166">Gid</span><span class="op" id="8055169">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055178">5000</span><span class="op" id="8055182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055188">Size</span><span class="op" id="8055192">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055200">5</span><span class="op" id="8055201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055207">ModTime</span><span class="op" id="8055214">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8055219">time</span><span class="op" id="8055223">.</span><span class="ident" id="8055224">Unix</span><span class="op" id="8055228">(</span><span class="num" id="8055229">1244592783</span><span class="op" id="8055239">,</span>&nbsp;<span class="num" id="8055241">0</span><span class="op" id="8055242">)</span><span class="op" id="8055243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055249">Typeflag</span><span class="op" id="8055257">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8055261">&#39;0&#39;</span><span class="op" id="8055264">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055270">Uname</span><span class="op" id="8055275">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8055282">&#34;dsymonds&#34;</span><span class="op" id="8055292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055298">Gname</span><span class="op" id="8055303">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8055310">&#34;eng&#34;</span><span class="op" id="8055315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055321">AccessTime</span><span class="op" id="8055331">:</span>&nbsp;<span class="ident" id="8055333">time</span><span class="op" id="8055337">.</span><span class="ident" id="8055338">Unix</span><span class="op" id="8055342">(</span><span class="num" id="8055343">1244592783</span><span class="op" id="8055353">,</span>&nbsp;<span class="num" id="8055355">0</span><span class="op" id="8055356">)</span><span class="op" id="8055357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055363">ChangeTime</span><span class="op" id="8055373">:</span>&nbsp;<span class="ident" id="8055375">time</span><span class="op" id="8055379">.</span><span class="ident" id="8055380">Unix</span><span class="op" id="8055384">(</span><span class="num" id="8055385">1244592783</span><span class="op" id="8055395">,</span>&nbsp;<span class="num" id="8055397">0</span><span class="op" id="8055398">)</span><span class="op" id="8055399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055404">}</span><span class="op" id="8055405">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055416">Name</span><span class="op" id="8055420">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8055428">&#34;small2.txt&#34;</span><span class="op" id="8055440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055446">Mode</span><span class="op" id="8055450">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055458">0640</span><span class="op" id="8055462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055468">Uid</span><span class="op" id="8055471">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055480">73025</span><span class="op" id="8055485">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055491">Gid</span><span class="op" id="8055494">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055503">5000</span><span class="op" id="8055507">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055513">Size</span><span class="op" id="8055517">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055525">11</span><span class="op" id="8055527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055533">ModTime</span><span class="op" id="8055540">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8055545">time</span><span class="op" id="8055549">.</span><span class="ident" id="8055550">Unix</span><span class="op" id="8055554">(</span><span class="num" id="8055555">1244592783</span><span class="op" id="8055565">,</span>&nbsp;<span class="num" id="8055567">0</span><span class="op" id="8055568">)</span><span class="op" id="8055569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055575">Typeflag</span><span class="op" id="8055583">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8055587">&#39;0&#39;</span><span class="op" id="8055590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055596">Uname</span><span class="op" id="8055601">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8055608">&#34;dsymonds&#34;</span><span class="op" id="8055618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055624">Gname</span><span class="op" id="8055629">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8055636">&#34;eng&#34;</span><span class="op" id="8055641">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055647">AccessTime</span><span class="op" id="8055657">:</span>&nbsp;<span class="ident" id="8055659">time</span><span class="op" id="8055663">.</span><span class="ident" id="8055664">Unix</span><span class="op" id="8055668">(</span><span class="num" id="8055669">1244592783</span><span class="op" id="8055679">,</span>&nbsp;<span class="num" id="8055681">0</span><span class="op" id="8055682">)</span><span class="op" id="8055683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055689">ChangeTime</span><span class="op" id="8055699">:</span>&nbsp;<span class="ident" id="8055701">time</span><span class="op" id="8055705">.</span><span class="ident" id="8055706">Unix</span><span class="op" id="8055710">(</span><span class="num" id="8055711">1244592783</span><span class="op" id="8055721">,</span>&nbsp;<span class="num" id="8055723">0</span><span class="op" id="8055724">)</span><span class="op" id="8055725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055730">}</span><span class="op" id="8055731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055735">}</span><span class="op" id="8055736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055739">}</span><span class="op" id="8055740">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055747">file</span><span class="op" id="8055751">:</span>&nbsp;<span class="string" id="8055753">&#34;testdata/v7.tar&#34;</span><span class="op" id="8055770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055774">headers</span><span class="op" id="8055781">:</span>&nbsp;<span class="op" id="8055783">[</span><span class="op" id="8055784">]</span><span class="op" id="8055785">*</span><span class="ident" id="8055786">Header</span><span class="op" id="8055792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055803">Name</span><span class="op" id="8055807">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8055813">&#34;small.txt&#34;</span><span class="op" id="8055824">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055830">Mode</span><span class="op" id="8055834">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055840">0444</span><span class="op" id="8055844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055850">Uid</span><span class="op" id="8055853">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055860">73025</span><span class="op" id="8055865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055871">Gid</span><span class="op" id="8055874">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055881">5000</span><span class="op" id="8055885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055891">Size</span><span class="op" id="8055895">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8055901">5</span><span class="op" id="8055902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055908">ModTime</span><span class="op" id="8055915">:</span>&nbsp;&nbsp;<span class="ident" id="8055918">time</span><span class="op" id="8055922">.</span><span class="ident" id="8055923">Unix</span><span class="op" id="8055927">(</span><span class="num" id="8055928">1244593104</span><span class="op" id="8055938">,</span>&nbsp;<span class="num" id="8055940">0</span><span class="op" id="8055941">)</span><span class="op" id="8055942">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055948">Typeflag</span><span class="op" id="8055956">:</span>&nbsp;<span class="string" id="8055958">&#39;\x00&#39;</span><span class="op" id="8055964">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055969">}</span><span class="op" id="8055970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8055981">Name</span><span class="op" id="8055985">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8055991">&#34;small2.txt&#34;</span><span class="op" id="8056003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056009">Mode</span><span class="op" id="8056013">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056019">0444</span><span class="op" id="8056023">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056029">Uid</span><span class="op" id="8056032">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056039">73025</span><span class="op" id="8056044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056050">Gid</span><span class="op" id="8056053">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056060">5000</span><span class="op" id="8056064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056070">Size</span><span class="op" id="8056074">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056080">11</span><span class="op" id="8056082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056088">ModTime</span><span class="op" id="8056095">:</span>&nbsp;&nbsp;<span class="ident" id="8056098">time</span><span class="op" id="8056102">.</span><span class="ident" id="8056103">Unix</span><span class="op" id="8056107">(</span><span class="num" id="8056108">1244593104</span><span class="op" id="8056118">,</span>&nbsp;<span class="num" id="8056120">0</span><span class="op" id="8056121">)</span><span class="op" id="8056122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056128">Typeflag</span><span class="op" id="8056136">:</span>&nbsp;<span class="string" id="8056138">&#39;\x00&#39;</span><span class="op" id="8056144">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056149">}</span><span class="op" id="8056150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056154">}</span><span class="op" id="8056155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056158">}</span><span class="op" id="8056159">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056166">file</span><span class="op" id="8056170">:</span>&nbsp;<span class="string" id="8056172">&#34;testdata/pax.tar&#34;</span><span class="op" id="8056190">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056194">headers</span><span class="op" id="8056201">:</span>&nbsp;<span class="op" id="8056203">[</span><span class="op" id="8056204">]</span><span class="op" id="8056205">*</span><span class="ident" id="8056206">Header</span><span class="op" id="8056212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056223">Name</span><span class="op" id="8056227">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8056235">&#34;a/123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="8056431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056437">Mode</span><span class="op" id="8056441">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056449">0664</span><span class="op" id="8056453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056459">Uid</span><span class="op" id="8056462">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056471">1000</span><span class="op" id="8056475">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056481">Gid</span><span class="op" id="8056484">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056493">1000</span><span class="op" id="8056497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056503">Uname</span><span class="op" id="8056508">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8056515">&#34;shane&#34;</span><span class="op" id="8056522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056528">Gname</span><span class="op" id="8056533">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8056540">&#34;shane&#34;</span><span class="op" id="8056547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056553">Size</span><span class="op" id="8056557">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056565">7</span><span class="op" id="8056566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056572">ModTime</span><span class="op" id="8056579">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8056584">time</span><span class="op" id="8056588">.</span><span class="ident" id="8056589">Unix</span><span class="op" id="8056593">(</span><span class="num" id="8056594">1350244992</span><span class="op" id="8056604">,</span>&nbsp;<span class="num" id="8056606">23960108</span><span class="op" id="8056614">)</span><span class="op" id="8056615">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056621">ChangeTime</span><span class="op" id="8056631">:</span>&nbsp;<span class="ident" id="8056633">time</span><span class="op" id="8056637">.</span><span class="ident" id="8056638">Unix</span><span class="op" id="8056642">(</span><span class="num" id="8056643">1350244992</span><span class="op" id="8056653">,</span>&nbsp;<span class="num" id="8056655">23960108</span><span class="op" id="8056663">)</span><span class="op" id="8056664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056670">AccessTime</span><span class="op" id="8056680">:</span>&nbsp;<span class="ident" id="8056682">time</span><span class="op" id="8056686">.</span><span class="ident" id="8056687">Unix</span><span class="op" id="8056691">(</span><span class="num" id="8056692">1350244992</span><span class="op" id="8056702">,</span>&nbsp;<span class="num" id="8056704">23960108</span><span class="op" id="8056712">)</span><span class="op" id="8056713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056719">Typeflag</span><span class="op" id="8056727">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8056731">TypeReg</span><span class="op" id="8056738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056743">}</span><span class="op" id="8056744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8056749">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056755">Name</span><span class="op" id="8056759">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8056767">&#34;a/b&#34;</span><span class="op" id="8056772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056778">Mode</span><span class="op" id="8056782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056790">0777</span><span class="op" id="8056794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056800">Uid</span><span class="op" id="8056803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056812">1000</span><span class="op" id="8056816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056822">Gid</span><span class="op" id="8056825">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056834">1000</span><span class="op" id="8056838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056844">Uname</span><span class="op" id="8056849">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8056856">&#34;shane&#34;</span><span class="op" id="8056863">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056869">Gname</span><span class="op" id="8056874">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8056881">&#34;shane&#34;</span><span class="op" id="8056888">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056894">Size</span><span class="op" id="8056898">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8056906">0</span><span class="op" id="8056907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056913">ModTime</span><span class="op" id="8056920">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8056925">time</span><span class="op" id="8056929">.</span><span class="ident" id="8056930">Unix</span><span class="op" id="8056934">(</span><span class="num" id="8056935">1350266320</span><span class="op" id="8056945">,</span>&nbsp;<span class="num" id="8056947">910238425</span><span class="op" id="8056956">)</span><span class="op" id="8056957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8056963">ChangeTime</span><span class="op" id="8056973">:</span>&nbsp;<span class="ident" id="8056975">time</span><span class="op" id="8056979">.</span><span class="ident" id="8056980">Unix</span><span class="op" id="8056984">(</span><span class="num" id="8056985">1350266320</span><span class="op" id="8056995">,</span>&nbsp;<span class="num" id="8056997">910238425</span><span class="op" id="8057006">)</span><span class="op" id="8057007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057013">AccessTime</span><span class="op" id="8057023">:</span>&nbsp;<span class="ident" id="8057025">time</span><span class="op" id="8057029">.</span><span class="ident" id="8057030">Unix</span><span class="op" id="8057034">(</span><span class="num" id="8057035">1350266320</span><span class="op" id="8057045">,</span>&nbsp;<span class="num" id="8057047">910238425</span><span class="op" id="8057056">)</span><span class="op" id="8057057">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057063">Typeflag</span><span class="op" id="8057071">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8057075">TypeSymlink</span><span class="op" id="8057086">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057092">Linkname</span><span class="op" id="8057100">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8057104">&#34;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100&#34;</span><span class="op" id="8057298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057303">}</span><span class="op" id="8057304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057308">}</span><span class="op" id="8057309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057312">}</span><span class="op" id="8057313">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057320">file</span><span class="op" id="8057324">:</span>&nbsp;<span class="string" id="8057326">&#34;testdata/nil-uid.tar&#34;</span><span class="op" id="8057348">,</span>&nbsp;<span class="comment" id="8057350">//&nbsp;golang.org/issue/5290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057377">headers</span><span class="op" id="8057384">:</span>&nbsp;<span class="op" id="8057386">[</span><span class="op" id="8057387">]</span><span class="op" id="8057388">*</span><span class="ident" id="8057389">Header</span><span class="op" id="8057395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057406">Name</span><span class="op" id="8057410">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8057416">&#34;P1050238.JPG.log&#34;</span><span class="op" id="8057434">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057440">Mode</span><span class="op" id="8057444">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8057450">0664</span><span class="op" id="8057454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057460">Uid</span><span class="op" id="8057463">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8057470">0</span><span class="op" id="8057471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057477">Gid</span><span class="op" id="8057480">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8057487">0</span><span class="op" id="8057488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057494">Size</span><span class="op" id="8057498">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8057504">14</span><span class="op" id="8057506">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057512">ModTime</span><span class="op" id="8057519">:</span>&nbsp;&nbsp;<span class="ident" id="8057522">time</span><span class="op" id="8057526">.</span><span class="ident" id="8057527">Unix</span><span class="op" id="8057531">(</span><span class="num" id="8057532">1365454838</span><span class="op" id="8057542">,</span>&nbsp;<span class="num" id="8057544">0</span><span class="op" id="8057545">)</span><span class="op" id="8057546">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057552">Typeflag</span><span class="op" id="8057560">:</span>&nbsp;<span class="ident" id="8057562">TypeReg</span><span class="op" id="8057569">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057575">Linkname</span><span class="op" id="8057583">:</span>&nbsp;<span class="string" id="8057585">&#34;&#34;</span><span class="op" id="8057587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057593">Uname</span><span class="op" id="8057598">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8057603">&#34;eyefi&#34;</span><span class="op" id="8057610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057616">Gname</span><span class="op" id="8057621">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8057626">&#34;eyefi&#34;</span><span class="op" id="8057633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057639">Devmajor</span><span class="op" id="8057647">:</span>&nbsp;<span class="num" id="8057649">0</span><span class="op" id="8057650">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057656">Devminor</span><span class="op" id="8057664">:</span>&nbsp;<span class="num" id="8057666">0</span><span class="op" id="8057667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057672">}</span><span class="op" id="8057673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057677">}</span><span class="op" id="8057678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057681">}</span><span class="op" id="8057682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057685">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057689">file</span><span class="op" id="8057693">:</span>&nbsp;<span class="string" id="8057695">&#34;testdata/xattrs.tar&#34;</span><span class="op" id="8057716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057720">headers</span><span class="op" id="8057727">:</span>&nbsp;<span class="op" id="8057729">[</span><span class="op" id="8057730">]</span><span class="op" id="8057731">*</span><span class="ident" id="8057732">Header</span><span class="op" id="8057738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8057743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057749">Name</span><span class="op" id="8057753">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8057761">&#34;small.txt&#34;</span><span class="op" id="8057772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057778">Mode</span><span class="op" id="8057782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8057790">0644</span><span class="op" id="8057794">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057800">Uid</span><span class="op" id="8057803">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8057812">1000</span><span class="op" id="8057816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057822">Gid</span><span class="op" id="8057825">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8057834">10</span><span class="op" id="8057836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057842">Size</span><span class="op" id="8057846">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8057854">5</span><span class="op" id="8057855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057861">ModTime</span><span class="op" id="8057868">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8057873">time</span><span class="op" id="8057877">.</span><span class="ident" id="8057878">Unix</span><span class="op" id="8057882">(</span><span class="num" id="8057883">1386065770</span><span class="op" id="8057893">,</span>&nbsp;<span class="num" id="8057895">448252320</span><span class="op" id="8057904">)</span><span class="op" id="8057905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057911">Typeflag</span><span class="op" id="8057919">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8057923">&#39;0&#39;</span><span class="op" id="8057926">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057932">Uname</span><span class="op" id="8057937">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8057944">&#34;alex&#34;</span><span class="op" id="8057950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057956">Gname</span><span class="op" id="8057961">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8057968">&#34;wheel&#34;</span><span class="op" id="8057975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8057981">AccessTime</span><span class="op" id="8057991">:</span>&nbsp;<span class="ident" id="8057993">time</span><span class="op" id="8057997">.</span><span class="ident" id="8057998">Unix</span><span class="op" id="8058002">(</span><span class="num" id="8058003">1389782991</span><span class="op" id="8058013">,</span>&nbsp;<span class="num" id="8058015">419875220</span><span class="op" id="8058024">)</span><span class="op" id="8058025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058031">ChangeTime</span><span class="op" id="8058041">:</span>&nbsp;<span class="ident" id="8058043">time</span><span class="op" id="8058047">.</span><span class="ident" id="8058048">Unix</span><span class="op" id="8058052">(</span><span class="num" id="8058053">1389782956</span><span class="op" id="8058063">,</span>&nbsp;<span class="num" id="8058065">794414986</span><span class="op" id="8058074">)</span><span class="op" id="8058075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058081">Xattrs</span><span class="op" id="8058087">:</span>&nbsp;<span class="keyword" id="8058089">map</span><span class="op" id="8058092">[</span><span class="builtintype" id="8058093">string</span><span class="op" id="8058099">]</span><span class="builtintype" id="8058100">string</span><span class="op" id="8058106">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8058113">&#34;user.key&#34;</span><span class="op" id="8058123">:</span>&nbsp;&nbsp;<span class="string" id="8058126">&#34;value&#34;</span><span class="op" id="8058133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8058140">&#34;user.key2&#34;</span><span class="op" id="8058151">:</span>&nbsp;<span class="string" id="8058153">&#34;value2&#34;</span><span class="op" id="8058161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8058168">//&nbsp;Interestingly,&nbsp;selinux&nbsp;encodes&nbsp;the&nbsp;terminating&nbsp;null&nbsp;inside&nbsp;the&nbsp;xattr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8058245">&#34;security.selinux&#34;</span><span class="op" id="8058263">:</span>&nbsp;<span class="string" id="8058265">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="8058305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058311">}</span><span class="op" id="8058312">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058317">}</span><span class="op" id="8058318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058329">Name</span><span class="op" id="8058333">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8058341">&#34;small2.txt&#34;</span><span class="op" id="8058353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058359">Mode</span><span class="op" id="8058363">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8058371">0644</span><span class="op" id="8058375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058381">Uid</span><span class="op" id="8058384">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8058393">1000</span><span class="op" id="8058397">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058403">Gid</span><span class="op" id="8058406">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8058415">10</span><span class="op" id="8058417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058423">Size</span><span class="op" id="8058427">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8058435">11</span><span class="op" id="8058437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058443">ModTime</span><span class="op" id="8058450">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8058455">time</span><span class="op" id="8058459">.</span><span class="ident" id="8058460">Unix</span><span class="op" id="8058464">(</span><span class="num" id="8058465">1386065770</span><span class="op" id="8058475">,</span>&nbsp;<span class="num" id="8058477">449252304</span><span class="op" id="8058486">)</span><span class="op" id="8058487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058493">Typeflag</span><span class="op" id="8058501">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8058505">&#39;0&#39;</span><span class="op" id="8058508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058514">Uname</span><span class="op" id="8058519">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8058526">&#34;alex&#34;</span><span class="op" id="8058532">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058538">Gname</span><span class="op" id="8058543">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8058550">&#34;wheel&#34;</span><span class="op" id="8058557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058563">AccessTime</span><span class="op" id="8058573">:</span>&nbsp;<span class="ident" id="8058575">time</span><span class="op" id="8058579">.</span><span class="ident" id="8058580">Unix</span><span class="op" id="8058584">(</span><span class="num" id="8058585">1389782991</span><span class="op" id="8058595">,</span>&nbsp;<span class="num" id="8058597">419875220</span><span class="op" id="8058606">)</span><span class="op" id="8058607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058613">ChangeTime</span><span class="op" id="8058623">:</span>&nbsp;<span class="ident" id="8058625">time</span><span class="op" id="8058629">.</span><span class="ident" id="8058630">Unix</span><span class="op" id="8058634">(</span><span class="num" id="8058635">1386065770</span><span class="op" id="8058645">,</span>&nbsp;<span class="num" id="8058647">449252304</span><span class="op" id="8058656">)</span><span class="op" id="8058657">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058663">Xattrs</span><span class="op" id="8058669">:</span>&nbsp;<span class="keyword" id="8058671">map</span><span class="op" id="8058674">[</span><span class="builtintype" id="8058675">string</span><span class="op" id="8058681">]</span><span class="builtintype" id="8058682">string</span><span class="op" id="8058688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8058695">&#34;security.selinux&#34;</span><span class="op" id="8058713">:</span>&nbsp;<span class="string" id="8058715">&#34;unconfined_u:object_r:default_t:s0\x00&#34;</span><span class="op" id="8058755">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058761">}</span><span class="op" id="8058762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058767">}</span><span class="op" id="8058768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058772">}</span><span class="op" id="8058773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058776">}</span><span class="op" id="8058777">,</span><br>
<span class="lineno"></span><span class="op" id="8058779">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="8058782">func</span>&nbsp;<span class="ident" id="8058787">TestReader</span><span class="op" id="8058797">(</span><span class="ident" id="8058798">t</span>&nbsp;<span class="op" id="8058800">*</span><span class="ident" id="8058801">testing</span><span class="op" id="8058808">.</span><span class="ident" id="8058809">T</span><span class="op" id="8058810">)</span>&nbsp;<span class="op" id="8058812">{</span><br>
<span class="lineno"></span><span class="ident" id="8058814">testLoop</span><span class="op" id="8058822">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8058825">for</span>&nbsp;<span class="ident" id="8058829">i</span><span class="op" id="8058830">,</span>&nbsp;<span class="ident" id="8058832">test</span>&nbsp;<span class="op" id="8058837">:=</span>&nbsp;<span class="keyword" id="8058840">range</span>&nbsp;<span class="ident" id="8058846">untarTests</span>&nbsp;<span class="op" id="8058857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058861">f</span><span class="op" id="8058862">,</span>&nbsp;<span class="ident" id="8058864">err</span>&nbsp;<span class="op" id="8058868">:=</span>&nbsp;<span class="ident" id="8058871">os</span><span class="op" id="8058873">.</span><span class="ident" id="8058874">Open</span><span class="op" id="8058878">(</span><span class="ident" id="8058879">test</span><span class="op" id="8058883">.</span><span class="ident" id="8058884">file</span><span class="op" id="8058888">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8058892">if</span>&nbsp;<span class="ident" id="8058895">err</span>&nbsp;<span class="op" id="8058899">!=</span>&nbsp;<span class="ident" id="8058902">nil</span>&nbsp;<span class="op" id="8058906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058911">t</span><span class="op" id="8058912">.</span><span class="ident" id="8058913">Errorf</span><span class="op" id="8058919">(</span><span class="string" id="8058920">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8058951">,</span>&nbsp;<span class="ident" id="8058953">i</span><span class="op" id="8058954">,</span>&nbsp;<span class="ident" id="8058956">err</span><span class="op" id="8058959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8058964">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8058975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8058979">defer</span>&nbsp;<span class="ident" id="8058985">f</span><span class="op" id="8058986">.</span><span class="ident" id="8058987">Close</span><span class="op" id="8058992">(</span><span class="op" id="8058993">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8058997">tr</span>&nbsp;<span class="op" id="8059000">:=</span>&nbsp;<span class="ident" id="8059003">NewReader</span><span class="op" id="8059012">(</span><span class="ident" id="8059013">f</span><span class="op" id="8059014">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059018">for</span>&nbsp;<span class="ident" id="8059022">j</span><span class="op" id="8059023">,</span>&nbsp;<span class="ident" id="8059025">header</span>&nbsp;<span class="op" id="8059032">:=</span>&nbsp;<span class="keyword" id="8059035">range</span>&nbsp;<span class="ident" id="8059041">test</span><span class="op" id="8059045">.</span><span class="ident" id="8059046">headers</span>&nbsp;<span class="op" id="8059054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059059">hdr</span><span class="op" id="8059062">,</span>&nbsp;<span class="ident" id="8059064">err</span>&nbsp;<span class="op" id="8059068">:=</span>&nbsp;<span class="ident" id="8059071">tr</span><span class="op" id="8059073">.</span><span class="ident" id="8059074">Next</span><span class="op" id="8059078">(</span><span class="op" id="8059079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059084">if</span>&nbsp;<span class="ident" id="8059087">err</span>&nbsp;<span class="op" id="8059091">!=</span>&nbsp;<span class="ident" id="8059094">nil</span>&nbsp;<span class="op" id="8059098">||</span>&nbsp;<span class="ident" id="8059101">hdr</span>&nbsp;<span class="op" id="8059105">==</span>&nbsp;<span class="ident" id="8059108">nil</span>&nbsp;<span class="op" id="8059112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059118">t</span><span class="op" id="8059119">.</span><span class="ident" id="8059120">Errorf</span><span class="op" id="8059126">(</span><span class="string" id="8059127">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Didn&#39;t&nbsp;get&nbsp;entry:&nbsp;%v&#34;</span><span class="op" id="8059168">,</span>&nbsp;<span class="ident" id="8059170">i</span><span class="op" id="8059171">,</span>&nbsp;<span class="ident" id="8059173">j</span><span class="op" id="8059174">,</span>&nbsp;<span class="ident" id="8059176">err</span><span class="op" id="8059179">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059185">f</span><span class="op" id="8059186">.</span><span class="ident" id="8059187">Close</span><span class="op" id="8059192">(</span><span class="op" id="8059193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059199">continue</span>&nbsp;<span class="ident" id="8059208">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8059220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059225">if</span>&nbsp;<span class="op" id="8059228">!</span><span class="ident" id="8059229">reflect</span><span class="op" id="8059236">.</span><span class="ident" id="8059237">DeepEqual</span><span class="op" id="8059246">(</span><span class="op" id="8059247">*</span><span class="ident" id="8059248">hdr</span><span class="op" id="8059251">,</span>&nbsp;<span class="op" id="8059253">*</span><span class="ident" id="8059254">header</span><span class="op" id="8059260">)</span>&nbsp;<span class="op" id="8059262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059268">t</span><span class="op" id="8059269">.</span><span class="ident" id="8059270">Errorf</span><span class="op" id="8059276">(</span><span class="string" id="8059277">&#34;test&nbsp;%d,&nbsp;entry&nbsp;%d:&nbsp;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8059335">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059342">i</span><span class="op" id="8059343">,</span>&nbsp;<span class="ident" id="8059345">j</span><span class="op" id="8059346">,</span>&nbsp;<span class="op" id="8059348">*</span><span class="ident" id="8059349">hdr</span><span class="op" id="8059352">,</span>&nbsp;<span class="op" id="8059354">*</span><span class="ident" id="8059355">header</span><span class="op" id="8059361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8059366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8059370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059374">hdr</span><span class="op" id="8059377">,</span>&nbsp;<span class="ident" id="8059379">err</span>&nbsp;<span class="op" id="8059383">:=</span>&nbsp;<span class="ident" id="8059386">tr</span><span class="op" id="8059388">.</span><span class="ident" id="8059389">Next</span><span class="op" id="8059393">(</span><span class="op" id="8059394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059398">if</span>&nbsp;<span class="ident" id="8059401">err</span>&nbsp;<span class="op" id="8059405">==</span>&nbsp;<span class="ident" id="8059408">io</span><span class="op" id="8059410">.</span><span class="ident" id="8059411">EOF</span>&nbsp;<span class="op" id="8059415">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059420">continue</span>&nbsp;<span class="ident" id="8059429">testLoop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8059440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059444">if</span>&nbsp;<span class="ident" id="8059447">hdr</span>&nbsp;<span class="op" id="8059451">!=</span>&nbsp;<span class="ident" id="8059454">nil</span>&nbsp;<span class="op" id="8059458">||</span>&nbsp;<span class="ident" id="8059461">err</span>&nbsp;<span class="op" id="8059465">!=</span>&nbsp;<span class="ident" id="8059468">nil</span>&nbsp;<span class="op" id="8059472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059477">t</span><span class="op" id="8059478">.</span><span class="ident" id="8059479">Errorf</span><span class="op" id="8059485">(</span><span class="string" id="8059486">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;entry&nbsp;or&nbsp;error:&nbsp;hdr=%v&nbsp;err=%v&#34;</span><span class="op" id="8059537">,</span>&nbsp;<span class="ident" id="8059539">i</span><span class="op" id="8059540">,</span>&nbsp;<span class="ident" id="8059542">hdr</span><span class="op" id="8059545">,</span>&nbsp;<span class="ident" id="8059547">err</span><span class="op" id="8059550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8059554">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8059557">}</span><br>
<span class="lineno"></span><span class="op" id="8059559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8059562">func</span>&nbsp;<span class="ident" id="8059567">TestPartialRead</span><span class="op" id="8059582">(</span><span class="ident" id="8059583">t</span>&nbsp;<span class="op" id="8059585">*</span><span class="ident" id="8059586">testing</span><span class="op" id="8059593">.</span><span class="ident" id="8059594">T</span><span class="op" id="8059595">)</span>&nbsp;<span class="op" id="8059597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059600">f</span><span class="op" id="8059601">,</span>&nbsp;<span class="ident" id="8059603">err</span>&nbsp;<span class="op" id="8059607">:=</span>&nbsp;<span class="ident" id="8059610">os</span><span class="op" id="8059612">.</span><span class="ident" id="8059613">Open</span><span class="op" id="8059617">(</span><span class="string" id="8059618">&#34;testdata/gnu.tar&#34;</span><span class="op" id="8059636">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059639">if</span>&nbsp;<span class="ident" id="8059642">err</span>&nbsp;<span class="op" id="8059646">!=</span>&nbsp;<span class="ident" id="8059649">nil</span>&nbsp;<span class="op" id="8059653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059657">t</span><span class="op" id="8059658">.</span><span class="ident" id="8059659">Fatalf</span><span class="op" id="8059665">(</span><span class="string" id="8059666">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8059688">,</span>&nbsp;<span class="ident" id="8059690">err</span><span class="op" id="8059693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8059696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059699">defer</span>&nbsp;<span class="ident" id="8059705">f</span><span class="op" id="8059706">.</span><span class="ident" id="8059707">Close</span><span class="op" id="8059712">(</span><span class="op" id="8059713">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059717">tr</span>&nbsp;<span class="op" id="8059720">:=</span>&nbsp;<span class="ident" id="8059723">NewReader</span><span class="op" id="8059732">(</span><span class="ident" id="8059733">f</span><span class="op" id="8059734">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8059738">//&nbsp;Read&nbsp;the&nbsp;first&nbsp;four&nbsp;bytes;&nbsp;Next()&nbsp;should&nbsp;skip&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059803">hdr</span><span class="op" id="8059806">,</span>&nbsp;<span class="ident" id="8059808">err</span>&nbsp;<span class="op" id="8059812">:=</span>&nbsp;<span class="ident" id="8059815">tr</span><span class="op" id="8059817">.</span><span class="ident" id="8059818">Next</span><span class="op" id="8059822">(</span><span class="op" id="8059823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059826">if</span>&nbsp;<span class="ident" id="8059829">err</span>&nbsp;<span class="op" id="8059833">!=</span>&nbsp;<span class="ident" id="8059836">nil</span>&nbsp;<span class="op" id="8059840">||</span>&nbsp;<span class="ident" id="8059843">hdr</span>&nbsp;<span class="op" id="8059847">==</span>&nbsp;<span class="ident" id="8059850">nil</span>&nbsp;<span class="op" id="8059854">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059858">t</span><span class="op" id="8059859">.</span><span class="ident" id="8059860">Fatalf</span><span class="op" id="8059866">(</span><span class="string" id="8059867">&#34;Didn&#39;t&nbsp;get&nbsp;first&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="8059894">,</span>&nbsp;<span class="ident" id="8059896">err</span><span class="op" id="8059899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8059902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059905">buf</span>&nbsp;<span class="op" id="8059909">:=</span>&nbsp;<span class="builtinfunc" id="8059912">make</span><span class="op" id="8059916">(</span><span class="op" id="8059917">[</span><span class="op" id="8059918">]</span><span class="builtintype" id="8059919">byte</span><span class="op" id="8059923">,</span>&nbsp;<span class="num" id="8059925">4</span><span class="op" id="8059926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8059929">if</span>&nbsp;<span class="ident" id="8059932">_</span><span class="op" id="8059933">,</span>&nbsp;<span class="ident" id="8059935">err</span>&nbsp;<span class="op" id="8059939">:=</span>&nbsp;<span class="ident" id="8059942">io</span><span class="op" id="8059944">.</span><span class="ident" id="8059945">ReadFull</span><span class="op" id="8059953">(</span><span class="ident" id="8059954">tr</span><span class="op" id="8059956">,</span>&nbsp;<span class="ident" id="8059958">buf</span><span class="op" id="8059961">)</span><span class="op" id="8059962">;</span>&nbsp;<span class="ident" id="8059964">err</span>&nbsp;<span class="op" id="8059968">!=</span>&nbsp;<span class="ident" id="8059971">nil</span>&nbsp;<span class="op" id="8059975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8059979">t</span><span class="op" id="8059980">.</span><span class="ident" id="8059981">Fatalf</span><span class="op" id="8059987">(</span><span class="string" id="8059988">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8060010">,</span>&nbsp;<span class="ident" id="8060012">err</span><span class="op" id="8060015">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8060018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8060021">if</span>&nbsp;<span class="ident" id="8060024">expected</span>&nbsp;<span class="op" id="8060033">:=</span>&nbsp;<span class="op" id="8060036">[</span><span class="op" id="8060037">]</span><span class="builtintype" id="8060038">byte</span><span class="op" id="8060042">(</span><span class="string" id="8060043">&#34;Kilt&#34;</span><span class="op" id="8060049">)</span><span class="op" id="8060050">;</span>&nbsp;<span class="op" id="8060052">!</span><span class="ident" id="8060053">bytes</span><span class="op" id="8060058">.</span><span class="ident" id="8060059">Equal</span><span class="op" id="8060064">(</span><span class="ident" id="8060065">buf</span><span class="op" id="8060068">,</span>&nbsp;<span class="ident" id="8060070">expected</span><span class="op" id="8060078">)</span>&nbsp;<span class="op" id="8060080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060084">t</span><span class="op" id="8060085">.</span><span class="ident" id="8060086">Errorf</span><span class="op" id="8060092">(</span><span class="string" id="8060093">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8060117">,</span>&nbsp;<span class="ident" id="8060119">buf</span><span class="op" id="8060122">,</span>&nbsp;<span class="ident" id="8060124">expected</span><span class="op" id="8060132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8060135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8060139">//&nbsp;Second&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060155">hdr</span><span class="op" id="8060158">,</span>&nbsp;<span class="ident" id="8060160">err</span>&nbsp;<span class="op" id="8060164">=</span>&nbsp;<span class="ident" id="8060166">tr</span><span class="op" id="8060168">.</span><span class="ident" id="8060169">Next</span><span class="op" id="8060173">(</span><span class="op" id="8060174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8060177">if</span>&nbsp;<span class="ident" id="8060180">err</span>&nbsp;<span class="op" id="8060184">!=</span>&nbsp;<span class="ident" id="8060187">nil</span>&nbsp;<span class="op" id="8060191">||</span>&nbsp;<span class="ident" id="8060194">hdr</span>&nbsp;<span class="op" id="8060198">==</span>&nbsp;<span class="ident" id="8060201">nil</span>&nbsp;<span class="op" id="8060205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060209">t</span><span class="op" id="8060210">.</span><span class="ident" id="8060211">Fatalf</span><span class="op" id="8060217">(</span><span class="string" id="8060218">&#34;Didn&#39;t&nbsp;get&nbsp;second&nbsp;file:&nbsp;%v&#34;</span><span class="op" id="8060246">,</span>&nbsp;<span class="ident" id="8060248">err</span><span class="op" id="8060251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8060254">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060257">buf</span>&nbsp;<span class="op" id="8060261">=</span>&nbsp;<span class="builtinfunc" id="8060263">make</span><span class="op" id="8060267">(</span><span class="op" id="8060268">[</span><span class="op" id="8060269">]</span><span class="builtintype" id="8060270">byte</span><span class="op" id="8060274">,</span>&nbsp;<span class="num" id="8060276">6</span><span class="op" id="8060277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8060280">if</span>&nbsp;<span class="ident" id="8060283">_</span><span class="op" id="8060284">,</span>&nbsp;<span class="ident" id="8060286">err</span>&nbsp;<span class="op" id="8060290">:=</span>&nbsp;<span class="ident" id="8060293">io</span><span class="op" id="8060295">.</span><span class="ident" id="8060296">ReadFull</span><span class="op" id="8060304">(</span><span class="ident" id="8060305">tr</span><span class="op" id="8060307">,</span>&nbsp;<span class="ident" id="8060309">buf</span><span class="op" id="8060312">)</span><span class="op" id="8060313">;</span>&nbsp;<span class="ident" id="8060315">err</span>&nbsp;<span class="op" id="8060319">!=</span>&nbsp;<span class="ident" id="8060322">nil</span>&nbsp;<span class="op" id="8060326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060330">t</span><span class="op" id="8060331">.</span><span class="ident" id="8060332">Fatalf</span><span class="op" id="8060338">(</span><span class="string" id="8060339">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8060361">,</span>&nbsp;<span class="ident" id="8060363">err</span><span class="op" id="8060366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8060369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8060372">if</span>&nbsp;<span class="ident" id="8060375">expected</span>&nbsp;<span class="op" id="8060384">:=</span>&nbsp;<span class="op" id="8060387">[</span><span class="op" id="8060388">]</span><span class="builtintype" id="8060389">byte</span><span class="op" id="8060393">(</span><span class="string" id="8060394">&#34;Google&#34;</span><span class="op" id="8060402">)</span><span class="op" id="8060403">;</span>&nbsp;<span class="op" id="8060405">!</span><span class="ident" id="8060406">bytes</span><span class="op" id="8060411">.</span><span class="ident" id="8060412">Equal</span><span class="op" id="8060417">(</span><span class="ident" id="8060418">buf</span><span class="op" id="8060421">,</span>&nbsp;<span class="ident" id="8060423">expected</span><span class="op" id="8060431">)</span>&nbsp;<span class="op" id="8060433">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060437">t</span><span class="op" id="8060438">.</span><span class="ident" id="8060439">Errorf</span><span class="op" id="8060445">(</span><span class="string" id="8060446">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8060470">,</span>&nbsp;<span class="ident" id="8060472">buf</span><span class="op" id="8060475">,</span>&nbsp;<span class="ident" id="8060477">expected</span><span class="op" id="8060485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8060488">}</span><br>
<span class="lineno"></span><span class="op" id="8060490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8060493">func</span>&nbsp;<span class="ident" id="8060498">TestIncrementalRead</span><span class="op" id="8060517">(</span><span class="ident" id="8060518">t</span>&nbsp;<span class="op" id="8060520">*</span><span class="ident" id="8060521">testing</span><span class="op" id="8060528">.</span><span class="ident" id="8060529">T</span><span class="op" id="8060530">)</span>&nbsp;<span class="op" id="8060532">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060535">test</span>&nbsp;<span class="op" id="8060540">:=</span>&nbsp;<span class="ident" id="8060543">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060555">f</span><span class="op" id="8060556">,</span>&nbsp;<span class="ident" id="8060558">err</span>&nbsp;<span class="op" id="8060562">:=</span>&nbsp;<span class="ident" id="8060565">os</span><span class="op" id="8060567">.</span><span class="ident" id="8060568">Open</span><span class="op" id="8060572">(</span><span class="ident" id="8060573">test</span><span class="op" id="8060577">.</span><span class="ident" id="8060578">file</span><span class="op" id="8060582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8060585">if</span>&nbsp;<span class="ident" id="8060588">err</span>&nbsp;<span class="op" id="8060592">!=</span>&nbsp;<span class="ident" id="8060595">nil</span>&nbsp;<span class="op" id="8060599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060603">t</span><span class="op" id="8060604">.</span><span class="ident" id="8060605">Fatalf</span><span class="op" id="8060611">(</span><span class="string" id="8060612">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8060634">,</span>&nbsp;<span class="ident" id="8060636">err</span><span class="op" id="8060639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8060642">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8060645">defer</span>&nbsp;<span class="ident" id="8060651">f</span><span class="op" id="8060652">.</span><span class="ident" id="8060653">Close</span><span class="op" id="8060658">(</span><span class="op" id="8060659">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060663">tr</span>&nbsp;<span class="op" id="8060666">:=</span>&nbsp;<span class="ident" id="8060669">NewReader</span><span class="op" id="8060678">(</span><span class="ident" id="8060679">f</span><span class="op" id="8060680">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060684">headers</span>&nbsp;<span class="op" id="8060692">:=</span>&nbsp;<span class="ident" id="8060695">test</span><span class="op" id="8060699">.</span><span class="ident" id="8060700">headers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060709">cksums</span>&nbsp;<span class="op" id="8060716">:=</span>&nbsp;<span class="ident" id="8060719">test</span><span class="op" id="8060723">.</span><span class="ident" id="8060724">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060732">nread</span>&nbsp;<span class="op" id="8060738">:=</span>&nbsp;<span class="num" id="8060741">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8060745">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8060769">for</span>&nbsp;<span class="op" id="8060773">;</span>&nbsp;<span class="op" id="8060775">;</span>&nbsp;<span class="ident" id="8060777">nread</span><span class="op" id="8060782">++</span>&nbsp;<span class="op" id="8060785">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060789">hdr</span><span class="op" id="8060792">,</span>&nbsp;<span class="ident" id="8060794">err</span>&nbsp;<span class="op" id="8060798">:=</span>&nbsp;<span class="ident" id="8060801">tr</span><span class="op" id="8060803">.</span><span class="ident" id="8060804">Next</span><span class="op" id="8060808">(</span><span class="op" id="8060809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8060813">if</span>&nbsp;<span class="ident" id="8060816">hdr</span>&nbsp;<span class="op" id="8060820">==</span>&nbsp;<span class="ident" id="8060823">nil</span>&nbsp;<span class="op" id="8060827">||</span>&nbsp;<span class="ident" id="8060830">err</span>&nbsp;<span class="op" id="8060834">==</span>&nbsp;<span class="ident" id="8060837">io</span><span class="op" id="8060839">.</span><span class="ident" id="8060840">EOF</span>&nbsp;<span class="op" id="8060844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8060849">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8060857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8060862">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8060884">if</span>&nbsp;<span class="op" id="8060887">!</span><span class="ident" id="8060888">reflect</span><span class="op" id="8060895">.</span><span class="ident" id="8060896">DeepEqual</span><span class="op" id="8060905">(</span><span class="op" id="8060906">*</span><span class="ident" id="8060907">hdr</span><span class="op" id="8060910">,</span>&nbsp;<span class="op" id="8060912">*</span><span class="ident" id="8060913">headers</span><span class="op" id="8060920">[</span><span class="ident" id="8060921">nread</span><span class="op" id="8060926">]</span><span class="op" id="8060927">)</span>&nbsp;<span class="op" id="8060929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8060934">t</span><span class="op" id="8060935">.</span><span class="ident" id="8060936">Errorf</span><span class="op" id="8060942">(</span><span class="string" id="8060943">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8060982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8060988">*</span><span class="ident" id="8060989">hdr</span><span class="op" id="8060992">,</span>&nbsp;<span class="ident" id="8060994">headers</span><span class="op" id="8061001">[</span><span class="ident" id="8061002">nread</span><span class="op" id="8061007">]</span><span class="op" id="8061008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8061012">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8061017">//&nbsp;read&nbsp;file&nbsp;contents&nbsp;in&nbsp;little&nbsp;chunks&nbsp;EOF,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8061063">//&nbsp;checksumming&nbsp;all&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061093">h</span>&nbsp;<span class="op" id="8061095">:=</span>&nbsp;<span class="ident" id="8061098">md5</span><span class="op" id="8061101">.</span><span class="ident" id="8061102">New</span><span class="op" id="8061105">(</span><span class="op" id="8061106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061110">rdbuf</span>&nbsp;<span class="op" id="8061116">:=</span>&nbsp;<span class="builtinfunc" id="8061119">make</span><span class="op" id="8061123">(</span><span class="op" id="8061124">[</span><span class="op" id="8061125">]</span><span class="builtintype" id="8061126">uint8</span><span class="op" id="8061131">,</span>&nbsp;<span class="num" id="8061133">8</span><span class="op" id="8061134">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061138">for</span>&nbsp;<span class="op" id="8061142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061147">nr</span><span class="op" id="8061149">,</span>&nbsp;<span class="ident" id="8061151">err</span>&nbsp;<span class="op" id="8061155">:=</span>&nbsp;<span class="ident" id="8061158">tr</span><span class="op" id="8061160">.</span><span class="ident" id="8061161">Read</span><span class="op" id="8061165">(</span><span class="ident" id="8061166">rdbuf</span><span class="op" id="8061171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061176">if</span>&nbsp;<span class="ident" id="8061179">err</span>&nbsp;<span class="op" id="8061183">==</span>&nbsp;<span class="ident" id="8061186">io</span><span class="op" id="8061188">.</span><span class="ident" id="8061189">EOF</span>&nbsp;<span class="op" id="8061193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061199">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8061208">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061213">if</span>&nbsp;<span class="ident" id="8061216">err</span>&nbsp;<span class="op" id="8061220">!=</span>&nbsp;<span class="ident" id="8061223">nil</span>&nbsp;<span class="op" id="8061227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061233">t</span><span class="op" id="8061234">.</span><span class="ident" id="8061235">Errorf</span><span class="op" id="8061241">(</span><span class="string" id="8061242">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="8061271">,</span>&nbsp;<span class="ident" id="8061273">err</span><span class="op" id="8061276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061282">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8061291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061296">h</span><span class="op" id="8061297">.</span><span class="ident" id="8061298">Write</span><span class="op" id="8061303">(</span><span class="ident" id="8061304">rdbuf</span><span class="op" id="8061309">[</span><span class="num" id="8061310">0</span><span class="op" id="8061311">:</span><span class="ident" id="8061312">nr</span><span class="op" id="8061314">]</span><span class="op" id="8061315">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8061319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8061323">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061344">have</span>&nbsp;<span class="op" id="8061349">:=</span>&nbsp;<span class="ident" id="8061352">fmt</span><span class="op" id="8061355">.</span><span class="ident" id="8061356">Sprintf</span><span class="op" id="8061363">(</span><span class="string" id="8061364">&#34;%x&#34;</span><span class="op" id="8061368">,</span>&nbsp;<span class="ident" id="8061370">h</span><span class="op" id="8061371">.</span><span class="ident" id="8061372">Sum</span><span class="op" id="8061375">(</span><span class="ident" id="8061376">nil</span><span class="op" id="8061379">)</span><span class="op" id="8061380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061384">want</span>&nbsp;<span class="op" id="8061389">:=</span>&nbsp;<span class="ident" id="8061392">cksums</span><span class="op" id="8061398">[</span><span class="ident" id="8061399">nread</span><span class="op" id="8061404">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061408">if</span>&nbsp;<span class="ident" id="8061411">want</span>&nbsp;<span class="op" id="8061416">!=</span>&nbsp;<span class="ident" id="8061419">have</span>&nbsp;<span class="op" id="8061424">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061429">t</span><span class="op" id="8061430">.</span><span class="ident" id="8061431">Errorf</span><span class="op" id="8061437">(</span><span class="string" id="8061438">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8061484">,</span>&nbsp;<span class="ident" id="8061486">hdr</span><span class="op" id="8061489">.</span><span class="ident" id="8061490">Name</span><span class="op" id="8061494">,</span>&nbsp;<span class="ident" id="8061496">have</span><span class="op" id="8061500">,</span>&nbsp;<span class="ident" id="8061502">want</span><span class="op" id="8061506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8061510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8061513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061516">if</span>&nbsp;<span class="ident" id="8061519">nread</span>&nbsp;<span class="op" id="8061525">!=</span>&nbsp;<span class="builtinfunc" id="8061528">len</span><span class="op" id="8061531">(</span><span class="ident" id="8061532">headers</span><span class="op" id="8061539">)</span>&nbsp;<span class="op" id="8061541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061545">t</span><span class="op" id="8061546">.</span><span class="ident" id="8061547">Errorf</span><span class="op" id="8061553">(</span><span class="string" id="8061554">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="8061610">,</span>&nbsp;<span class="builtinfunc" id="8061612">len</span><span class="op" id="8061615">(</span><span class="ident" id="8061616">headers</span><span class="op" id="8061623">)</span><span class="op" id="8061624">,</span>&nbsp;<span class="ident" id="8061626">nread</span><span class="op" id="8061631">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8061634">}</span><br>
<span class="lineno"></span><span class="op" id="8061636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8061639">func</span>&nbsp;<span class="ident" id="8061644">TestNonSeekable</span><span class="op" id="8061659">(</span><span class="ident" id="8061660">t</span>&nbsp;<span class="op" id="8061662">*</span><span class="ident" id="8061663">testing</span><span class="op" id="8061670">.</span><span class="ident" id="8061671">T</span><span class="op" id="8061672">)</span>&nbsp;<span class="op" id="8061674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061677">test</span>&nbsp;<span class="op" id="8061682">:=</span>&nbsp;<span class="ident" id="8061685">gnuTarTest</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061697">f</span><span class="op" id="8061698">,</span>&nbsp;<span class="ident" id="8061700">err</span>&nbsp;<span class="op" id="8061704">:=</span>&nbsp;<span class="ident" id="8061707">os</span><span class="op" id="8061709">.</span><span class="ident" id="8061710">Open</span><span class="op" id="8061714">(</span><span class="ident" id="8061715">test</span><span class="op" id="8061719">.</span><span class="ident" id="8061720">file</span><span class="op" id="8061724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061727">if</span>&nbsp;<span class="ident" id="8061730">err</span>&nbsp;<span class="op" id="8061734">!=</span>&nbsp;<span class="ident" id="8061737">nil</span>&nbsp;<span class="op" id="8061741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061745">t</span><span class="op" id="8061746">.</span><span class="ident" id="8061747">Fatalf</span><span class="op" id="8061753">(</span><span class="string" id="8061754">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8061776">,</span>&nbsp;<span class="ident" id="8061778">err</span><span class="op" id="8061781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8061784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061787">defer</span>&nbsp;<span class="ident" id="8061793">f</span><span class="op" id="8061794">.</span><span class="ident" id="8061795">Close</span><span class="op" id="8061800">(</span><span class="op" id="8061801">)</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061805">type</span>&nbsp;<span class="ident" id="8061810">readerOnly</span>&nbsp;<span class="keyword" id="8061821">struct</span>&nbsp;<span class="op" id="8061828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061832">io</span><span class="op" id="8061834">.</span><span class="ident" id="8061835">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8061843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061846">tr</span>&nbsp;<span class="op" id="8061849">:=</span>&nbsp;<span class="ident" id="8061852">NewReader</span><span class="op" id="8061861">(</span><span class="ident" id="8061862">readerOnly</span><span class="op" id="8061872">{</span><span class="ident" id="8061873">f</span><span class="op" id="8061874">}</span><span class="op" id="8061875">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061878">nread</span>&nbsp;<span class="op" id="8061884">:=</span>&nbsp;<span class="num" id="8061887">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061891">for</span>&nbsp;<span class="op" id="8061895">;</span>&nbsp;<span class="op" id="8061897">;</span>&nbsp;<span class="ident" id="8061899">nread</span><span class="op" id="8061904">++</span>&nbsp;<span class="op" id="8061907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061911">_</span><span class="op" id="8061912">,</span>&nbsp;<span class="ident" id="8061914">err</span>&nbsp;<span class="op" id="8061918">:=</span>&nbsp;<span class="ident" id="8061921">tr</span><span class="op" id="8061923">.</span><span class="ident" id="8061924">Next</span><span class="op" id="8061928">(</span><span class="op" id="8061929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061933">if</span>&nbsp;<span class="ident" id="8061936">err</span>&nbsp;<span class="op" id="8061940">==</span>&nbsp;<span class="ident" id="8061943">io</span><span class="op" id="8061945">.</span><span class="ident" id="8061946">EOF</span>&nbsp;<span class="op" id="8061950">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061955">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8061963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8061967">if</span>&nbsp;<span class="ident" id="8061970">err</span>&nbsp;<span class="op" id="8061974">!=</span>&nbsp;<span class="ident" id="8061977">nil</span>&nbsp;<span class="op" id="8061981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8061986">t</span><span class="op" id="8061987">.</span><span class="ident" id="8061988">Fatalf</span><span class="op" id="8061994">(</span><span class="string" id="8061995">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8062017">,</span>&nbsp;<span class="ident" id="8062019">err</span><span class="op" id="8062022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8062026">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8062029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8062033">if</span>&nbsp;<span class="ident" id="8062036">nread</span>&nbsp;<span class="op" id="8062042">!=</span>&nbsp;<span class="builtinfunc" id="8062045">len</span><span class="op" id="8062048">(</span><span class="ident" id="8062049">test</span><span class="op" id="8062053">.</span><span class="ident" id="8062054">headers</span><span class="op" id="8062061">)</span>&nbsp;<span class="op" id="8062063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8062067">t</span><span class="op" id="8062068">.</span><span class="ident" id="8062069">Errorf</span><span class="op" id="8062075">(</span><span class="string" id="8062076">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="8062132">,</span>&nbsp;<span class="builtinfunc" id="8062134">len</span><span class="op" id="8062137">(</span><span class="ident" id="8062138">test</span><span class="op" id="8062142">.</span><span class="ident" id="8062143">headers</span><span class="op" id="8062150">)</span><span class="op" id="8062151">,</span>&nbsp;<span class="ident" id="8062153">nread</span><span class="op" id="8062158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8062161">}</span><br>
<span class="lineno">440</span><span class="op" id="8062163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8062166">func</span>&nbsp;<span class="ident" id="8062171">TestParsePAXHeader</span><span class="op" id="8062189">(</span><span class="ident" id="8062190">t</span>&nbsp;<span class="op" id="8062192">*</span><span class="ident" id="8062193">testing</span><span class="op" id="8062200">.</span><span class="ident" id="8062201">T</span><span class="op" id="8062202">)</span>&nbsp;<span class="op" id="8062204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8062207">paxTests</span>&nbsp;<span class="op" id="8062216">:=</span>&nbsp;<span class="op" id="8062219">[</span><span class="op" id="8062220">]</span><span class="op" id="8062221">[</span><span class="num" id="8062222">3</span><span class="op" id="8062223">]</span><span class="builtintype" id="8062224">string</span><span class="op" id="8062230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8062234">{</span><span class="string" id="8062235">&#34;a&#34;</span><span class="op" id="8062238">,</span>&nbsp;<span class="string" id="8062240">&#34;a=name&#34;</span><span class="op" id="8062248">,</span>&nbsp;<span class="string" id="8062250">&#34;10&nbsp;a=name\n&#34;</span><span class="op" id="8062263">}</span><span class="op" id="8062264">,</span>&nbsp;<span class="comment" id="8062266">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;lengths</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8062319">{</span><span class="string" id="8062320">&#34;a&#34;</span><span class="op" id="8062323">,</span>&nbsp;<span class="string" id="8062325">&#34;a=name&#34;</span><span class="op" id="8062333">,</span>&nbsp;<span class="string" id="8062335">&#34;9&nbsp;a=name\n&#34;</span><span class="op" id="8062347">}</span><span class="op" id="8062348">,</span>&nbsp;&nbsp;<span class="comment" id="8062351">//&nbsp;Test&nbsp;case&nbsp;involving&nbsp;multiple&nbsp;acceptable&nbsp;length</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8062403">{</span><span class="string" id="8062404">&#34;mtime&#34;</span><span class="op" id="8062411">,</span>&nbsp;<span class="string" id="8062413">&#34;mtime=1350244992.023960108&#34;</span><span class="op" id="8062441">,</span>&nbsp;<span class="string" id="8062443">&#34;30&nbsp;mtime=1350244992.023960108\n&#34;</span><span class="op" id="8062476">}</span><span class="op" id="8062477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8062480">for</span>&nbsp;<span class="ident" id="8062484">_</span><span class="op" id="8062485">,</span>&nbsp;<span class="ident" id="8062487">test</span>&nbsp;<span class="op" id="8062492">:=</span>&nbsp;<span class="keyword" id="8062495">range</span>&nbsp;<span class="ident" id="8062501">paxTests</span>&nbsp;<span class="op" id="8062510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8062514">key</span><span class="op" id="8062517">,</span>&nbsp;<span class="ident" id="8062519">expected</span><span class="op" id="8062527">,</span>&nbsp;<span class="ident" id="8062529">raw</span>&nbsp;<span class="op" id="8062533">:=</span>&nbsp;<span class="ident" id="8062536">test</span><span class="op" id="8062540">[</span><span class="num" id="8062541">0</span><span class="op" id="8062542">]</span><span class="op" id="8062543">,</span>&nbsp;<span class="ident" id="8062545">test</span><span class="op" id="8062549">[</span><span class="num" id="8062550">1</span><span class="op" id="8062551">]</span><span class="op" id="8062552">,</span>&nbsp;<span class="ident" id="8062554">test</span><span class="op" id="8062558">[</span><span class="num" id="8062559">2</span><span class="op" id="8062560">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8062564">reader</span>&nbsp;<span class="op" id="8062571">:=</span>&nbsp;<span class="ident" id="8062574">bytes</span><span class="op" id="8062579">.</span><span class="ident" id="8062580">NewReader</span><span class="op" id="8062589">(</span><span class="op" id="8062590">[</span><span class="op" id="8062591">]</span><span class="builtintype" id="8062592">byte</span><span class="op" id="8062596">(</span><span class="ident" id="8062597">raw</span><span class="op" id="8062600">)</span><span class="op" id="8062601">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8062605">headers</span><span class="op" id="8062612">,</span>&nbsp;<span class="ident" id="8062614">err</span>&nbsp;<span class="op" id="8062618">:=</span>&nbsp;<span class="ident" id="8062621">parsePAX</span><span class="op" id="8062629">(</span><span class="ident" id="8062630">reader</span><span class="op" id="8062636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8062640">if</span>&nbsp;<span class="ident" id="8062643">err</span>&nbsp;<span class="op" id="8062647">!=</span>&nbsp;<span class="ident" id="8062650">nil</span>&nbsp;<span class="op" id="8062654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8062659">t</span><span class="op" id="8062660">.</span><span class="ident" id="8062661">Errorf</span><span class="op" id="8062667">(</span><span class="string" id="8062668">&#34;Couldn&#39;t&nbsp;parse&nbsp;correctly&nbsp;formatted&nbsp;headers:&nbsp;%v&#34;</span><span class="op" id="8062716">,</span>&nbsp;<span class="ident" id="8062718">err</span><span class="op" id="8062721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8062726">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8062737">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8062741">if</span>&nbsp;<span class="ident" id="8062744">strings</span><span class="op" id="8062751">.</span><span class="ident" id="8062752">EqualFold</span><span class="op" id="8062761">(</span><span class="ident" id="8062762">headers</span><span class="op" id="8062769">[</span><span class="ident" id="8062770">key</span><span class="op" id="8062773">]</span><span class="op" id="8062774">,</span>&nbsp;<span class="ident" id="8062776">expected</span><span class="op" id="8062784">)</span>&nbsp;<span class="op" id="8062786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8062791">t</span><span class="op" id="8062792">.</span><span class="ident" id="8062793">Errorf</span><span class="op" id="8062799">(</span><span class="string" id="8062800">&#34;mtime&nbsp;header&nbsp;incorrectly&nbsp;parsed:&nbsp;got&nbsp;%s,&nbsp;wanted&nbsp;%s&#34;</span><span class="op" id="8062852">,</span>&nbsp;<span class="ident" id="8062854">headers</span><span class="op" id="8062861">[</span><span class="ident" id="8062862">key</span><span class="op" id="8062865">]</span><span class="op" id="8062866">,</span>&nbsp;<span class="ident" id="8062868">expected</span><span class="op" id="8062876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8062881">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8062892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8062896">trailer</span>&nbsp;<span class="op" id="8062904">:=</span>&nbsp;<span class="builtinfunc" id="8062907">make</span><span class="op" id="8062911">(</span><span class="op" id="8062912">[</span><span class="op" id="8062913">]</span><span class="builtintype" id="8062914">byte</span><span class="op" id="8062918">,</span>&nbsp;<span class="num" id="8062920">100</span><span class="op" id="8062923">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8062927">n</span><span class="op" id="8062928">,</span>&nbsp;<span class="ident" id="8062930">err</span>&nbsp;<span class="op" id="8062934">:=</span>&nbsp;<span class="ident" id="8062937">reader</span><span class="op" id="8062943">.</span><span class="ident" id="8062944">Read</span><span class="op" id="8062948">(</span><span class="ident" id="8062949">trailer</span><span class="op" id="8062956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8062960">if</span>&nbsp;<span class="ident" id="8062963">err</span>&nbsp;<span class="op" id="8062967">!=</span>&nbsp;<span class="ident" id="8062970">io</span><span class="op" id="8062972">.</span><span class="ident" id="8062973">EOF</span>&nbsp;<span class="op" id="8062977">||</span>&nbsp;<span class="ident" id="8062980">n</span>&nbsp;<span class="op" id="8062982">!=</span>&nbsp;<span class="num" id="8062985">0</span>&nbsp;<span class="op" id="8062987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8062992">t</span><span class="op" id="8062993">.</span><span class="ident" id="8062994">Error</span><span class="op" id="8062999">(</span><span class="string" id="8063000">&#34;Buffer&nbsp;wasn&#39;t&nbsp;consumed&#34;</span><span class="op" id="8063024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8063028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8063031">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8063034">badHeader</span>&nbsp;<span class="op" id="8063044">:=</span>&nbsp;<span class="ident" id="8063047">bytes</span><span class="op" id="8063052">.</span><span class="ident" id="8063053">NewReader</span><span class="op" id="8063062">(</span><span class="op" id="8063063">[</span><span class="op" id="8063064">]</span><span class="builtintype" id="8063065">byte</span><span class="op" id="8063069">(</span><span class="string" id="8063070">&#34;3&nbsp;somelongkey=&#34;</span><span class="op" id="8063086">)</span><span class="op" id="8063087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8063090">if</span>&nbsp;<span class="ident" id="8063093">_</span><span class="op" id="8063094">,</span>&nbsp;<span class="ident" id="8063096">err</span>&nbsp;<span class="op" id="8063100">:=</span>&nbsp;<span class="ident" id="8063103">parsePAX</span><span class="op" id="8063111">(</span><span class="ident" id="8063112">badHeader</span><span class="op" id="8063121">)</span><span class="op" id="8063122">;</span>&nbsp;<span class="ident" id="8063124">err</span>&nbsp;<span class="op" id="8063128">!=</span>&nbsp;<span class="ident" id="8063131">ErrHeader</span>&nbsp;<span class="op" id="8063141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8063145">t</span><span class="op" id="8063146">.</span><span class="ident" id="8063147">Fatal</span><span class="op" id="8063152">(</span><span class="string" id="8063153">&#34;Unexpected&nbsp;success&nbsp;when&nbsp;parsing&nbsp;bad&nbsp;header&#34;</span><span class="op" id="8063197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8063200">}</span><br>
<span class="lineno"></span><span class="op" id="8063202">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="keyword" id="8063205">func</span>&nbsp;<span class="ident" id="8063210">TestParsePAXTime</span><span class="op" id="8063226">(</span><span class="ident" id="8063227">t</span>&nbsp;<span class="op" id="8063229">*</span><span class="ident" id="8063230">testing</span><span class="op" id="8063237">.</span><span class="ident" id="8063238">T</span><span class="op" id="8063239">)</span>&nbsp;<span class="op" id="8063241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8063244">//&nbsp;Some&nbsp;valid&nbsp;PAX&nbsp;time&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8063275">timestamps</span>&nbsp;<span class="op" id="8063286">:=</span>&nbsp;<span class="keyword" id="8063289">map</span><span class="op" id="8063292">[</span><span class="builtintype" id="8063293">string</span><span class="op" id="8063299">]</span><span class="ident" id="8063300">time</span><span class="op" id="8063304">.</span><span class="ident" id="8063305">Time</span><span class="op" id="8063309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8063313">&#34;1350244992.023960108&#34;</span><span class="op" id="8063335">:</span>&nbsp;&nbsp;<span class="ident" id="8063338">time</span><span class="op" id="8063342">.</span><span class="ident" id="8063343">Unix</span><span class="op" id="8063347">(</span><span class="num" id="8063348">1350244992</span><span class="op" id="8063358">,</span>&nbsp;<span class="num" id="8063360">23960108</span><span class="op" id="8063368">)</span><span class="op" id="8063369">,</span>&nbsp;<span class="comment" id="8063371">//&nbsp;The&nbsp;common&nbsp;case</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8063392">&#34;1350244992.02396010&#34;</span><span class="op" id="8063413">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8063417">time</span><span class="op" id="8063421">.</span><span class="ident" id="8063422">Unix</span><span class="op" id="8063426">(</span><span class="num" id="8063427">1350244992</span><span class="op" id="8063437">,</span>&nbsp;<span class="num" id="8063439">23960100</span><span class="op" id="8063447">)</span><span class="op" id="8063448">,</span>&nbsp;<span class="comment" id="8063450">//&nbsp;Lower&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8063477">&#34;1350244992.0239601089&#34;</span><span class="op" id="8063500">:</span>&nbsp;<span class="ident" id="8063502">time</span><span class="op" id="8063506">.</span><span class="ident" id="8063507">Unix</span><span class="op" id="8063511">(</span><span class="num" id="8063512">1350244992</span><span class="op" id="8063522">,</span>&nbsp;<span class="num" id="8063524">23960108</span><span class="op" id="8063532">)</span><span class="op" id="8063533">,</span>&nbsp;<span class="comment" id="8063535">//&nbsp;Higher&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8063563">&#34;1350244992&#34;</span><span class="op" id="8063575">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8063588">time</span><span class="op" id="8063592">.</span><span class="ident" id="8063593">Unix</span><span class="op" id="8063597">(</span><span class="num" id="8063598">1350244992</span><span class="op" id="8063608">,</span>&nbsp;<span class="num" id="8063610">0</span><span class="op" id="8063611">)</span><span class="op" id="8063612">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8063621">//&nbsp;Low&nbsp;precision&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8063645">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8063648">for</span>&nbsp;<span class="ident" id="8063652">input</span><span class="op" id="8063657">,</span>&nbsp;<span class="ident" id="8063659">expected</span>&nbsp;<span class="op" id="8063668">:=</span>&nbsp;<span class="keyword" id="8063671">range</span>&nbsp;<span class="ident" id="8063677">timestamps</span>&nbsp;<span class="op" id="8063688">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8063692">ts</span><span class="op" id="8063694">,</span>&nbsp;<span class="ident" id="8063696">err</span>&nbsp;<span class="op" id="8063700">:=</span>&nbsp;<span class="ident" id="8063703">parsePAXTime</span><span class="op" id="8063715">(</span><span class="ident" id="8063716">input</span><span class="op" id="8063721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8063725">if</span>&nbsp;<span class="ident" id="8063728">err</span>&nbsp;<span class="op" id="8063732">!=</span>&nbsp;<span class="ident" id="8063735">nil</span>&nbsp;<span class="op" id="8063739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8063744">t</span><span class="op" id="8063745">.</span><span class="ident" id="8063746">Fatal</span><span class="op" id="8063751">(</span><span class="ident" id="8063752">err</span><span class="op" id="8063755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8063759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8063763">if</span>&nbsp;<span class="op" id="8063766">!</span><span class="ident" id="8063767">ts</span><span class="op" id="8063769">.</span><span class="ident" id="8063770">Equal</span><span class="op" id="8063775">(</span><span class="ident" id="8063776">expected</span><span class="op" id="8063784">)</span>&nbsp;<span class="op" id="8063786">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8063791">t</span><span class="op" id="8063792">.</span><span class="ident" id="8063793">Fatalf</span><span class="op" id="8063799">(</span><span class="string" id="8063800">&#34;Time&nbsp;parsing&nbsp;failure&nbsp;%s&nbsp;%s&#34;</span><span class="op" id="8063828">,</span>&nbsp;<span class="ident" id="8063830">ts</span><span class="op" id="8063832">,</span>&nbsp;<span class="ident" id="8063834">expected</span><span class="op" id="8063842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8063846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8063849">}</span><br>
<span class="lineno"></span><span class="op" id="8063851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span><span class="keyword" id="8063854">func</span>&nbsp;<span class="ident" id="8063859">TestMergePAX</span><span class="op" id="8063871">(</span><span class="ident" id="8063872">t</span>&nbsp;<span class="op" id="8063874">*</span><span class="ident" id="8063875">testing</span><span class="op" id="8063882">.</span><span class="ident" id="8063883">T</span><span class="op" id="8063884">)</span>&nbsp;<span class="op" id="8063886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8063889">hdr</span>&nbsp;<span class="op" id="8063893">:=</span>&nbsp;<span class="builtinfunc" id="8063896">new</span><span class="op" id="8063899">(</span><span class="ident" id="8063900">Header</span><span class="op" id="8063906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8063909">//&nbsp;Test&nbsp;a&nbsp;string,&nbsp;integer,&nbsp;and&nbsp;time&nbsp;based&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8063959">headers</span>&nbsp;<span class="op" id="8063967">:=</span>&nbsp;<span class="keyword" id="8063970">map</span><span class="op" id="8063973">[</span><span class="builtintype" id="8063974">string</span><span class="op" id="8063980">]</span><span class="builtintype" id="8063981">string</span><span class="op" id="8063987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8063991">&#34;path&#34;</span><span class="op" id="8063997">:</span>&nbsp;&nbsp;<span class="string" id="8064000">&#34;a/b/c&#34;</span><span class="op" id="8064007">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8064011">&#34;uid&#34;</span><span class="op" id="8064016">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8064020">&#34;1000&#34;</span><span class="op" id="8064026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8064030">&#34;mtime&#34;</span><span class="op" id="8064037">:</span>&nbsp;<span class="string" id="8064039">&#34;1350244992.023960108&#34;</span><span class="op" id="8064061">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8064064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064067">err</span>&nbsp;<span class="op" id="8064071">:=</span>&nbsp;<span class="ident" id="8064074">mergePAX</span><span class="op" id="8064082">(</span><span class="ident" id="8064083">hdr</span><span class="op" id="8064086">,</span>&nbsp;<span class="ident" id="8064088">headers</span><span class="op" id="8064095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8064098">if</span>&nbsp;<span class="ident" id="8064101">err</span>&nbsp;<span class="op" id="8064105">!=</span>&nbsp;<span class="ident" id="8064108">nil</span>&nbsp;<span class="op" id="8064112">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064116">t</span><span class="op" id="8064117">.</span><span class="ident" id="8064118">Fatal</span><span class="op" id="8064123">(</span><span class="ident" id="8064124">err</span><span class="op" id="8064127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8064130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064133">want</span>&nbsp;<span class="op" id="8064138">:=</span>&nbsp;<span class="op" id="8064141">&amp;</span><span class="ident" id="8064142">Header</span><span class="op" id="8064148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064152">Name</span><span class="op" id="8064156">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8064161">&#34;a/b/c&#34;</span><span class="op" id="8064168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064172">Uid</span><span class="op" id="8064175">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8064181">1000</span><span class="op" id="8064185">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064189">ModTime</span><span class="op" id="8064196">:</span>&nbsp;<span class="ident" id="8064198">time</span><span class="op" id="8064202">.</span><span class="ident" id="8064203">Unix</span><span class="op" id="8064207">(</span><span class="num" id="8064208">1350244992</span><span class="op" id="8064218">,</span>&nbsp;<span class="num" id="8064220">23960108</span><span class="op" id="8064228">)</span><span class="op" id="8064229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8064232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8064235">if</span>&nbsp;<span class="op" id="8064238">!</span><span class="ident" id="8064239">reflect</span><span class="op" id="8064246">.</span><span class="ident" id="8064247">DeepEqual</span><span class="op" id="8064256">(</span><span class="ident" id="8064257">hdr</span><span class="op" id="8064260">,</span>&nbsp;<span class="ident" id="8064262">want</span><span class="op" id="8064266">)</span>&nbsp;<span class="op" id="8064268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064272">t</span><span class="op" id="8064273">.</span><span class="ident" id="8064274">Errorf</span><span class="op" id="8064280">(</span><span class="string" id="8064281">&#34;incorrect&nbsp;merge:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="8064317">,</span>&nbsp;<span class="ident" id="8064319">hdr</span><span class="op" id="8064322">,</span>&nbsp;<span class="ident" id="8064324">want</span><span class="op" id="8064328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8064331">}</span><br>
<span class="lineno">510</span><span class="op" id="8064333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8064336">func</span>&nbsp;<span class="ident" id="8064341">TestSparseEndToEnd</span><span class="op" id="8064359">(</span><span class="ident" id="8064360">t</span>&nbsp;<span class="op" id="8064362">*</span><span class="ident" id="8064363">testing</span><span class="op" id="8064370">.</span><span class="ident" id="8064371">T</span><span class="op" id="8064372">)</span>&nbsp;<span class="op" id="8064374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064377">test</span>&nbsp;<span class="op" id="8064382">:=</span>&nbsp;<span class="ident" id="8064385">sparseTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064400">f</span><span class="op" id="8064401">,</span>&nbsp;<span class="ident" id="8064403">err</span>&nbsp;<span class="op" id="8064407">:=</span>&nbsp;<span class="ident" id="8064410">os</span><span class="op" id="8064412">.</span><span class="ident" id="8064413">Open</span><span class="op" id="8064417">(</span><span class="ident" id="8064418">test</span><span class="op" id="8064422">.</span><span class="ident" id="8064423">file</span><span class="op" id="8064427">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8064430">if</span>&nbsp;<span class="ident" id="8064433">err</span>&nbsp;<span class="op" id="8064437">!=</span>&nbsp;<span class="ident" id="8064440">nil</span>&nbsp;<span class="op" id="8064444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064448">t</span><span class="op" id="8064449">.</span><span class="ident" id="8064450">Fatalf</span><span class="op" id="8064456">(</span><span class="string" id="8064457">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8064479">,</span>&nbsp;<span class="ident" id="8064481">err</span><span class="op" id="8064484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8064487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8064490">defer</span>&nbsp;<span class="ident" id="8064496">f</span><span class="op" id="8064497">.</span><span class="ident" id="8064498">Close</span><span class="op" id="8064503">(</span><span class="op" id="8064504">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064508">tr</span>&nbsp;<span class="op" id="8064511">:=</span>&nbsp;<span class="ident" id="8064514">NewReader</span><span class="op" id="8064523">(</span><span class="ident" id="8064524">f</span><span class="op" id="8064525">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064529">headers</span>&nbsp;<span class="op" id="8064537">:=</span>&nbsp;<span class="ident" id="8064540">test</span><span class="op" id="8064544">.</span><span class="ident" id="8064545">headers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064554">cksums</span>&nbsp;<span class="op" id="8064561">:=</span>&nbsp;<span class="ident" id="8064564">test</span><span class="op" id="8064568">.</span><span class="ident" id="8064569">cksums</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064577">nread</span>&nbsp;<span class="op" id="8064583">:=</span>&nbsp;<span class="num" id="8064586">0</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8064590">//&nbsp;loop&nbsp;over&nbsp;all&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8064614">for</span>&nbsp;<span class="op" id="8064618">;</span>&nbsp;<span class="op" id="8064620">;</span>&nbsp;<span class="ident" id="8064622">nread</span><span class="op" id="8064627">++</span>&nbsp;<span class="op" id="8064630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064634">hdr</span><span class="op" id="8064637">,</span>&nbsp;<span class="ident" id="8064639">err</span>&nbsp;<span class="op" id="8064643">:=</span>&nbsp;<span class="ident" id="8064646">tr</span><span class="op" id="8064648">.</span><span class="ident" id="8064649">Next</span><span class="op" id="8064653">(</span><span class="op" id="8064654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8064658">if</span>&nbsp;<span class="ident" id="8064661">hdr</span>&nbsp;<span class="op" id="8064665">==</span>&nbsp;<span class="ident" id="8064668">nil</span>&nbsp;<span class="op" id="8064672">||</span>&nbsp;<span class="ident" id="8064675">err</span>&nbsp;<span class="op" id="8064679">==</span>&nbsp;<span class="ident" id="8064682">io</span><span class="op" id="8064684">.</span><span class="ident" id="8064685">EOF</span>&nbsp;<span class="op" id="8064689">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8064694">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8064702">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8064707">//&nbsp;check&nbsp;the&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8064729">if</span>&nbsp;<span class="op" id="8064732">!</span><span class="ident" id="8064733">reflect</span><span class="op" id="8064740">.</span><span class="ident" id="8064741">DeepEqual</span><span class="op" id="8064750">(</span><span class="op" id="8064751">*</span><span class="ident" id="8064752">hdr</span><span class="op" id="8064755">,</span>&nbsp;<span class="op" id="8064757">*</span><span class="ident" id="8064758">headers</span><span class="op" id="8064765">[</span><span class="ident" id="8064766">nread</span><span class="op" id="8064771">]</span><span class="op" id="8064772">)</span>&nbsp;<span class="op" id="8064774">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064779">t</span><span class="op" id="8064780">.</span><span class="ident" id="8064781">Errorf</span><span class="op" id="8064787">(</span><span class="string" id="8064788">&#34;Incorrect&nbsp;header:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8064827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8064833">*</span><span class="ident" id="8064834">hdr</span><span class="op" id="8064837">,</span>&nbsp;<span class="ident" id="8064839">headers</span><span class="op" id="8064846">[</span><span class="ident" id="8064847">nread</span><span class="op" id="8064852">]</span><span class="op" id="8064853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8064857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8064862">//&nbsp;read&nbsp;and&nbsp;checksum&nbsp;the&nbsp;file&nbsp;data</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064899">h</span>&nbsp;<span class="op" id="8064901">:=</span>&nbsp;<span class="ident" id="8064904">md5</span><span class="op" id="8064907">.</span><span class="ident" id="8064908">New</span><span class="op" id="8064911">(</span><span class="op" id="8064912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064916">_</span><span class="op" id="8064917">,</span>&nbsp;<span class="ident" id="8064919">err</span>&nbsp;<span class="op" id="8064923">=</span>&nbsp;<span class="ident" id="8064925">io</span><span class="op" id="8064927">.</span><span class="ident" id="8064928">Copy</span><span class="op" id="8064932">(</span><span class="ident" id="8064933">h</span><span class="op" id="8064934">,</span>&nbsp;<span class="ident" id="8064936">tr</span><span class="op" id="8064938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8064942">if</span>&nbsp;<span class="ident" id="8064945">err</span>&nbsp;<span class="op" id="8064949">!=</span>&nbsp;<span class="ident" id="8064952">nil</span>&nbsp;<span class="op" id="8064956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8064961">t</span><span class="op" id="8064962">.</span><span class="ident" id="8064963">Fatalf</span><span class="op" id="8064969">(</span><span class="string" id="8064970">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8064992">,</span>&nbsp;<span class="ident" id="8064994">err</span><span class="op" id="8064997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065001">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8065006">//&nbsp;verify&nbsp;checksum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065027">have</span>&nbsp;<span class="op" id="8065032">:=</span>&nbsp;<span class="ident" id="8065035">fmt</span><span class="op" id="8065038">.</span><span class="ident" id="8065039">Sprintf</span><span class="op" id="8065046">(</span><span class="string" id="8065047">&#34;%x&#34;</span><span class="op" id="8065051">,</span>&nbsp;<span class="ident" id="8065053">h</span><span class="op" id="8065054">.</span><span class="ident" id="8065055">Sum</span><span class="op" id="8065058">(</span><span class="ident" id="8065059">nil</span><span class="op" id="8065062">)</span><span class="op" id="8065063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065067">want</span>&nbsp;<span class="op" id="8065072">:=</span>&nbsp;<span class="ident" id="8065075">cksums</span><span class="op" id="8065081">[</span><span class="ident" id="8065082">nread</span><span class="op" id="8065087">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8065091">if</span>&nbsp;<span class="ident" id="8065094">want</span>&nbsp;<span class="op" id="8065099">!=</span>&nbsp;<span class="ident" id="8065102">have</span>&nbsp;<span class="op" id="8065107">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065112">t</span><span class="op" id="8065113">.</span><span class="ident" id="8065114">Errorf</span><span class="op" id="8065120">(</span><span class="string" id="8065121">&#34;Bad&nbsp;checksum&nbsp;on&nbsp;file&nbsp;%s:\nhave&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="8065167">,</span>&nbsp;<span class="ident" id="8065169">hdr</span><span class="op" id="8065172">.</span><span class="ident" id="8065173">Name</span><span class="op" id="8065177">,</span>&nbsp;<span class="ident" id="8065179">have</span><span class="op" id="8065183">,</span>&nbsp;<span class="ident" id="8065185">want</span><span class="op" id="8065189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8065199">if</span>&nbsp;<span class="ident" id="8065202">nread</span>&nbsp;<span class="op" id="8065208">!=</span>&nbsp;<span class="builtinfunc" id="8065211">len</span><span class="op" id="8065214">(</span><span class="ident" id="8065215">headers</span><span class="op" id="8065222">)</span>&nbsp;<span class="op" id="8065224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065228">t</span><span class="op" id="8065229">.</span><span class="ident" id="8065230">Errorf</span><span class="op" id="8065236">(</span><span class="string" id="8065237">&#34;Didn&#39;t&nbsp;process&nbsp;all&nbsp;files\nexpected:&nbsp;%d\nprocessed&nbsp;%d\n&#34;</span><span class="op" id="8065293">,</span>&nbsp;<span class="builtinfunc" id="8065295">len</span><span class="op" id="8065298">(</span><span class="ident" id="8065299">headers</span><span class="op" id="8065306">)</span><span class="op" id="8065307">,</span>&nbsp;<span class="ident" id="8065309">nread</span><span class="op" id="8065314">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065317">}</span><br>
<span class="lineno"></span><span class="op" id="8065319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8065322">type</span>&nbsp;<span class="ident" id="8065327">sparseFileReadTest</span>&nbsp;<span class="keyword" id="8065346">struct</span>&nbsp;<span class="op" id="8065353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065356">sparseData</span>&nbsp;<span class="op" id="8065367">[</span><span class="op" id="8065368">]</span><span class="builtintype" id="8065369">byte</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065375">sparseMap</span>&nbsp;&nbsp;<span class="op" id="8065386">[</span><span class="op" id="8065387">]</span><span class="ident" id="8065388">sparseEntry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065401">realSize</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8065412">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065419">expected</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8065430">[</span><span class="op" id="8065431">]</span><span class="builtintype" id="8065432">byte</span><br>
<span class="lineno"></span><span class="op" id="8065437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="8065440">var</span>&nbsp;<span class="ident" id="8065444">sparseFileReadTests</span>&nbsp;<span class="op" id="8065464">=</span>&nbsp;<span class="op" id="8065466">[</span><span class="op" id="8065467">]</span><span class="ident" id="8065468">sparseFileReadTest</span><span class="op" id="8065486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065493">sparseData</span><span class="op" id="8065503">:</span>&nbsp;<span class="op" id="8065505">[</span><span class="op" id="8065506">]</span><span class="builtintype" id="8065507">byte</span><span class="op" id="8065511">(</span><span class="string" id="8065512">&#34;abcde&#34;</span><span class="op" id="8065519">)</span><span class="op" id="8065520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065524">sparseMap</span><span class="op" id="8065533">:</span>&nbsp;<span class="op" id="8065535">[</span><span class="op" id="8065536">]</span><span class="ident" id="8065537">sparseEntry</span><span class="op" id="8065548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065553">{</span><span class="ident" id="8065554">offset</span><span class="op" id="8065560">:</span>&nbsp;<span class="num" id="8065562">0</span><span class="op" id="8065563">,</span>&nbsp;<span class="ident" id="8065565">numBytes</span><span class="op" id="8065573">:</span>&nbsp;<span class="num" id="8065575">2</span><span class="op" id="8065576">}</span><span class="op" id="8065577">,</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065582">{</span><span class="ident" id="8065583">offset</span><span class="op" id="8065589">:</span>&nbsp;<span class="num" id="8065591">5</span><span class="op" id="8065592">,</span>&nbsp;<span class="ident" id="8065594">numBytes</span><span class="op" id="8065602">:</span>&nbsp;<span class="num" id="8065604">3</span><span class="op" id="8065605">}</span><span class="op" id="8065606">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065610">}</span><span class="op" id="8065611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065615">realSize</span><span class="op" id="8065623">:</span>&nbsp;<span class="num" id="8065625">8</span><span class="op" id="8065626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065630">expected</span><span class="op" id="8065638">:</span>&nbsp;<span class="op" id="8065640">[</span><span class="op" id="8065641">]</span><span class="builtintype" id="8065642">byte</span><span class="op" id="8065646">(</span><span class="string" id="8065647">&#34;ab\x00\x00\x00cde&#34;</span><span class="op" id="8065666">)</span><span class="op" id="8065667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065670">}</span><span class="op" id="8065671">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065678">sparseData</span><span class="op" id="8065688">:</span>&nbsp;<span class="op" id="8065690">[</span><span class="op" id="8065691">]</span><span class="builtintype" id="8065692">byte</span><span class="op" id="8065696">(</span><span class="string" id="8065697">&#34;abcde&#34;</span><span class="op" id="8065704">)</span><span class="op" id="8065705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065709">sparseMap</span><span class="op" id="8065718">:</span>&nbsp;<span class="op" id="8065720">[</span><span class="op" id="8065721">]</span><span class="ident" id="8065722">sparseEntry</span><span class="op" id="8065733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065738">{</span><span class="ident" id="8065739">offset</span><span class="op" id="8065745">:</span>&nbsp;<span class="num" id="8065747">0</span><span class="op" id="8065748">,</span>&nbsp;<span class="ident" id="8065750">numBytes</span><span class="op" id="8065758">:</span>&nbsp;<span class="num" id="8065760">2</span><span class="op" id="8065761">}</span><span class="op" id="8065762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065767">{</span><span class="ident" id="8065768">offset</span><span class="op" id="8065774">:</span>&nbsp;<span class="num" id="8065776">5</span><span class="op" id="8065777">,</span>&nbsp;<span class="ident" id="8065779">numBytes</span><span class="op" id="8065787">:</span>&nbsp;<span class="num" id="8065789">3</span><span class="op" id="8065790">}</span><span class="op" id="8065791">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065795">}</span><span class="op" id="8065796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065800">realSize</span><span class="op" id="8065808">:</span>&nbsp;<span class="num" id="8065810">10</span><span class="op" id="8065812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065816">expected</span><span class="op" id="8065824">:</span>&nbsp;<span class="op" id="8065826">[</span><span class="op" id="8065827">]</span><span class="builtintype" id="8065828">byte</span><span class="op" id="8065832">(</span><span class="string" id="8065833">&#34;ab\x00\x00\x00cde\x00\x00&#34;</span><span class="op" id="8065860">)</span><span class="op" id="8065861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065864">}</span><span class="op" id="8065865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065868">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065872">sparseData</span><span class="op" id="8065882">:</span>&nbsp;<span class="op" id="8065884">[</span><span class="op" id="8065885">]</span><span class="builtintype" id="8065886">byte</span><span class="op" id="8065890">(</span><span class="string" id="8065891">&#34;abcde&#34;</span><span class="op" id="8065898">)</span><span class="op" id="8065899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065903">sparseMap</span><span class="op" id="8065912">:</span>&nbsp;<span class="op" id="8065914">[</span><span class="op" id="8065915">]</span><span class="ident" id="8065916">sparseEntry</span><span class="op" id="8065927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065932">{</span><span class="ident" id="8065933">offset</span><span class="op" id="8065939">:</span>&nbsp;<span class="num" id="8065941">1</span><span class="op" id="8065942">,</span>&nbsp;<span class="ident" id="8065944">numBytes</span><span class="op" id="8065952">:</span>&nbsp;<span class="num" id="8065954">3</span><span class="op" id="8065955">}</span><span class="op" id="8065956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065961">{</span><span class="ident" id="8065962">offset</span><span class="op" id="8065968">:</span>&nbsp;<span class="num" id="8065970">6</span><span class="op" id="8065971">,</span>&nbsp;<span class="ident" id="8065973">numBytes</span><span class="op" id="8065981">:</span>&nbsp;<span class="num" id="8065983">2</span><span class="op" id="8065984">}</span><span class="op" id="8065985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8065989">}</span><span class="op" id="8065990">,</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8065994">realSize</span><span class="op" id="8066002">:</span>&nbsp;<span class="num" id="8066004">8</span><span class="op" id="8066005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066009">expected</span><span class="op" id="8066017">:</span>&nbsp;<span class="op" id="8066019">[</span><span class="op" id="8066020">]</span><span class="builtintype" id="8066021">byte</span><span class="op" id="8066025">(</span><span class="string" id="8066026">&#34;\x00abc\x00\x00de&#34;</span><span class="op" id="8066045">)</span><span class="op" id="8066046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066049">}</span><span class="op" id="8066050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066057">sparseData</span><span class="op" id="8066067">:</span>&nbsp;<span class="op" id="8066069">[</span><span class="op" id="8066070">]</span><span class="builtintype" id="8066071">byte</span><span class="op" id="8066075">(</span><span class="string" id="8066076">&#34;abcde&#34;</span><span class="op" id="8066083">)</span><span class="op" id="8066084">,</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066088">sparseMap</span><span class="op" id="8066097">:</span>&nbsp;<span class="op" id="8066099">[</span><span class="op" id="8066100">]</span><span class="ident" id="8066101">sparseEntry</span><span class="op" id="8066112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066117">{</span><span class="ident" id="8066118">offset</span><span class="op" id="8066124">:</span>&nbsp;<span class="num" id="8066126">1</span><span class="op" id="8066127">,</span>&nbsp;<span class="ident" id="8066129">numBytes</span><span class="op" id="8066137">:</span>&nbsp;<span class="num" id="8066139">3</span><span class="op" id="8066140">}</span><span class="op" id="8066141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066146">{</span><span class="ident" id="8066147">offset</span><span class="op" id="8066153">:</span>&nbsp;<span class="num" id="8066155">6</span><span class="op" id="8066156">,</span>&nbsp;<span class="ident" id="8066158">numBytes</span><span class="op" id="8066166">:</span>&nbsp;<span class="num" id="8066168">2</span><span class="op" id="8066169">}</span><span class="op" id="8066170">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066174">}</span><span class="op" id="8066175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066179">realSize</span><span class="op" id="8066187">:</span>&nbsp;<span class="num" id="8066189">10</span><span class="op" id="8066191">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066195">expected</span><span class="op" id="8066203">:</span>&nbsp;<span class="op" id="8066205">[</span><span class="op" id="8066206">]</span><span class="builtintype" id="8066207">byte</span><span class="op" id="8066211">(</span><span class="string" id="8066212">&#34;\x00abc\x00\x00de\x00\x00&#34;</span><span class="op" id="8066239">)</span><span class="op" id="8066240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066243">}</span><span class="op" id="8066244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066251">sparseData</span><span class="op" id="8066261">:</span>&nbsp;<span class="op" id="8066263">[</span><span class="op" id="8066264">]</span><span class="builtintype" id="8066265">byte</span><span class="op" id="8066269">(</span><span class="string" id="8066270">&#34;&#34;</span><span class="op" id="8066272">)</span><span class="op" id="8066273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066277">sparseMap</span><span class="op" id="8066286">:</span>&nbsp;&nbsp;<span class="ident" id="8066289">nil</span><span class="op" id="8066292">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066296">realSize</span><span class="op" id="8066304">:</span>&nbsp;&nbsp;&nbsp;<span class="num" id="8066308">2</span><span class="op" id="8066309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066313">expected</span><span class="op" id="8066321">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8066325">[</span><span class="op" id="8066326">]</span><span class="builtintype" id="8066327">byte</span><span class="op" id="8066331">(</span><span class="string" id="8066332">&#34;\x00\x00&#34;</span><span class="op" id="8066342">)</span><span class="op" id="8066343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066346">}</span><span class="op" id="8066347">,</span><br>
<span class="lineno"></span><span class="op" id="8066349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="8066352">func</span>&nbsp;<span class="ident" id="8066357">TestSparseFileReader</span><span class="op" id="8066377">(</span><span class="ident" id="8066378">t</span>&nbsp;<span class="op" id="8066380">*</span><span class="ident" id="8066381">testing</span><span class="op" id="8066388">.</span><span class="ident" id="8066389">T</span><span class="op" id="8066390">)</span>&nbsp;<span class="op" id="8066392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8066395">for</span>&nbsp;<span class="ident" id="8066399">i</span><span class="op" id="8066400">,</span>&nbsp;<span class="ident" id="8066402">test</span>&nbsp;<span class="op" id="8066407">:=</span>&nbsp;<span class="keyword" id="8066410">range</span>&nbsp;<span class="ident" id="8066416">sparseFileReadTests</span>&nbsp;<span class="op" id="8066436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066440">r</span>&nbsp;<span class="op" id="8066442">:=</span>&nbsp;<span class="ident" id="8066445">bytes</span><span class="op" id="8066450">.</span><span class="ident" id="8066451">NewReader</span><span class="op" id="8066460">(</span><span class="ident" id="8066461">test</span><span class="op" id="8066465">.</span><span class="ident" id="8066466">sparseData</span><span class="op" id="8066476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066480">nb</span>&nbsp;<span class="op" id="8066483">:=</span>&nbsp;<span class="ident" id="8066486">int64</span><span class="op" id="8066491">(</span><span class="ident" id="8066492">r</span><span class="op" id="8066493">.</span><span class="ident" id="8066494">Len</span><span class="op" id="8066497">(</span><span class="op" id="8066498">)</span><span class="op" id="8066499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066503">sfr</span>&nbsp;<span class="op" id="8066507">:=</span>&nbsp;<span class="op" id="8066510">&amp;</span><span class="ident" id="8066511">sparseFileReader</span><span class="op" id="8066527">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066532">rfr</span><span class="op" id="8066535">:</span>&nbsp;<span class="op" id="8066537">&amp;</span><span class="ident" id="8066538">regFileReader</span><span class="op" id="8066551">{</span><span class="ident" id="8066552">r</span><span class="op" id="8066553">:</span>&nbsp;<span class="ident" id="8066555">r</span><span class="op" id="8066556">,</span>&nbsp;<span class="ident" id="8066558">nb</span><span class="op" id="8066560">:</span>&nbsp;<span class="ident" id="8066562">nb</span><span class="op" id="8066564">}</span><span class="op" id="8066565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066570">sp</span><span class="op" id="8066572">:</span>&nbsp;&nbsp;<span class="ident" id="8066575">test</span><span class="op" id="8066579">.</span><span class="ident" id="8066580">sparseMap</span><span class="op" id="8066589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066594">pos</span><span class="op" id="8066597">:</span>&nbsp;<span class="num" id="8066599">0</span><span class="op" id="8066600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066605">tot</span><span class="op" id="8066608">:</span>&nbsp;<span class="ident" id="8066610">test</span><span class="op" id="8066614">.</span><span class="ident" id="8066615">realSize</span><span class="op" id="8066623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066627">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8066631">if</span>&nbsp;<span class="ident" id="8066634">sfr</span><span class="op" id="8066637">.</span><span class="ident" id="8066638">numBytes</span><span class="op" id="8066646">(</span><span class="op" id="8066647">)</span>&nbsp;<span class="op" id="8066649">!=</span>&nbsp;<span class="ident" id="8066652">nb</span>&nbsp;<span class="op" id="8066655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066660">t</span><span class="op" id="8066661">.</span><span class="ident" id="8066662">Errorf</span><span class="op" id="8066668">(</span><span class="string" id="8066669">&#34;test&nbsp;%d:&nbsp;Before&nbsp;reading,&nbsp;sfr.numBytes()&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8066724">,</span>&nbsp;<span class="ident" id="8066726">i</span><span class="op" id="8066727">,</span>&nbsp;<span class="ident" id="8066729">sfr</span><span class="op" id="8066732">.</span><span class="ident" id="8066733">numBytes</span><span class="op" id="8066741">(</span><span class="op" id="8066742">)</span><span class="op" id="8066743">,</span>&nbsp;<span class="ident" id="8066745">nb</span><span class="op" id="8066747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066755">buf</span><span class="op" id="8066758">,</span>&nbsp;<span class="ident" id="8066760">err</span>&nbsp;<span class="op" id="8066764">:=</span>&nbsp;<span class="ident" id="8066767">ioutil</span><span class="op" id="8066773">.</span><span class="ident" id="8066774">ReadAll</span><span class="op" id="8066781">(</span><span class="ident" id="8066782">sfr</span><span class="op" id="8066785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8066789">if</span>&nbsp;<span class="ident" id="8066792">err</span>&nbsp;<span class="op" id="8066796">!=</span>&nbsp;<span class="ident" id="8066799">nil</span>&nbsp;<span class="op" id="8066803">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066808">t</span><span class="op" id="8066809">.</span><span class="ident" id="8066810">Errorf</span><span class="op" id="8066816">(</span><span class="string" id="8066817">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8066848">,</span>&nbsp;<span class="ident" id="8066850">i</span><span class="op" id="8066851">,</span>&nbsp;<span class="ident" id="8066853">err</span><span class="op" id="8066856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8066864">if</span>&nbsp;<span class="ident" id="8066867">e</span>&nbsp;<span class="op" id="8066869">:=</span>&nbsp;<span class="ident" id="8066872">test</span><span class="op" id="8066876">.</span><span class="ident" id="8066877">expected</span><span class="op" id="8066885">;</span>&nbsp;<span class="op" id="8066887">!</span><span class="ident" id="8066888">bytes</span><span class="op" id="8066893">.</span><span class="ident" id="8066894">Equal</span><span class="op" id="8066899">(</span><span class="ident" id="8066900">buf</span><span class="op" id="8066903">,</span>&nbsp;<span class="ident" id="8066905">e</span><span class="op" id="8066906">)</span>&nbsp;<span class="op" id="8066908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8066913">t</span><span class="op" id="8066914">.</span><span class="ident" id="8066915">Errorf</span><span class="op" id="8066921">(</span><span class="string" id="8066922">&#34;test&nbsp;%d:&nbsp;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8066955">,</span>&nbsp;<span class="ident" id="8066957">i</span><span class="op" id="8066958">,</span>&nbsp;<span class="ident" id="8066960">buf</span><span class="op" id="8066963">,</span>&nbsp;<span class="ident" id="8066965">e</span><span class="op" id="8066966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8066970">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8066974">if</span>&nbsp;<span class="ident" id="8066977">sfr</span><span class="op" id="8066980">.</span><span class="ident" id="8066981">numBytes</span><span class="op" id="8066989">(</span><span class="op" id="8066990">)</span>&nbsp;<span class="op" id="8066992">!=</span>&nbsp;<span class="num" id="8066995">0</span>&nbsp;<span class="op" id="8066997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067002">t</span><span class="op" id="8067003">.</span><span class="ident" id="8067004">Errorf</span><span class="op" id="8067010">(</span><span class="string" id="8067011">&#34;test&nbsp;%d:&nbsp;After&nbsp;draining&nbsp;the&nbsp;reader,&nbsp;numBytes()&nbsp;was&nbsp;nonzero&#34;</span><span class="op" id="8067071">,</span>&nbsp;<span class="ident" id="8067073">i</span><span class="op" id="8067074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8067078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8067081">}</span><br>
<span class="lineno"></span><span class="op" id="8067083">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="keyword" id="8067086">func</span>&nbsp;<span class="ident" id="8067091">TestSparseIncrementalRead</span><span class="op" id="8067116">(</span><span class="ident" id="8067117">t</span>&nbsp;<span class="op" id="8067119">*</span><span class="ident" id="8067120">testing</span><span class="op" id="8067127">.</span><span class="ident" id="8067128">T</span><span class="op" id="8067129">)</span>&nbsp;<span class="op" id="8067131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067134">sparseMap</span>&nbsp;<span class="op" id="8067144">:=</span>&nbsp;<span class="op" id="8067147">[</span><span class="op" id="8067148">]</span><span class="ident" id="8067149">sparseEntry</span><span class="op" id="8067160">{</span><span class="op" id="8067161">{</span><span class="num" id="8067162">10</span><span class="op" id="8067164">,</span>&nbsp;<span class="num" id="8067166">2</span><span class="op" id="8067167">}</span><span class="op" id="8067168">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067171">sparseData</span>&nbsp;<span class="op" id="8067182">:=</span>&nbsp;<span class="op" id="8067185">[</span><span class="op" id="8067186">]</span><span class="builtintype" id="8067187">byte</span><span class="op" id="8067191">(</span><span class="string" id="8067192">&#34;Go&#34;</span><span class="op" id="8067196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067199">expected</span>&nbsp;<span class="op" id="8067208">:=</span>&nbsp;<span class="string" id="8067211">&#34;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00Go\x00\x00\x00\x00\x00\x00\x00\x00&#34;</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067290">r</span>&nbsp;<span class="op" id="8067292">:=</span>&nbsp;<span class="ident" id="8067295">bytes</span><span class="op" id="8067300">.</span><span class="ident" id="8067301">NewReader</span><span class="op" id="8067310">(</span><span class="ident" id="8067311">sparseData</span><span class="op" id="8067321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067324">nb</span>&nbsp;<span class="op" id="8067327">:=</span>&nbsp;<span class="ident" id="8067330">int64</span><span class="op" id="8067335">(</span><span class="ident" id="8067336">r</span><span class="op" id="8067337">.</span><span class="ident" id="8067338">Len</span><span class="op" id="8067341">(</span><span class="op" id="8067342">)</span><span class="op" id="8067343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067346">sfr</span>&nbsp;<span class="op" id="8067350">:=</span>&nbsp;<span class="op" id="8067353">&amp;</span><span class="ident" id="8067354">sparseFileReader</span><span class="op" id="8067370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067374">rfr</span><span class="op" id="8067377">:</span>&nbsp;<span class="op" id="8067379">&amp;</span><span class="ident" id="8067380">regFileReader</span><span class="op" id="8067393">{</span><span class="ident" id="8067394">r</span><span class="op" id="8067395">:</span>&nbsp;<span class="ident" id="8067397">r</span><span class="op" id="8067398">,</span>&nbsp;<span class="ident" id="8067400">nb</span><span class="op" id="8067402">:</span>&nbsp;<span class="ident" id="8067404">nb</span><span class="op" id="8067406">}</span><span class="op" id="8067407">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067411">sp</span><span class="op" id="8067413">:</span>&nbsp;&nbsp;<span class="ident" id="8067416">sparseMap</span><span class="op" id="8067425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067429">pos</span><span class="op" id="8067432">:</span>&nbsp;<span class="num" id="8067434">0</span><span class="op" id="8067435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067439">tot</span><span class="op" id="8067442">:</span>&nbsp;<span class="ident" id="8067444">int64</span><span class="op" id="8067449">(</span><span class="builtinfunc" id="8067450">len</span><span class="op" id="8067453">(</span><span class="ident" id="8067454">expected</span><span class="op" id="8067462">)</span><span class="op" id="8067463">)</span><span class="op" id="8067464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8067467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8067471">//&nbsp;We&#39;ll&nbsp;read&nbsp;the&nbsp;data&nbsp;6&nbsp;bytes&nbsp;at&nbsp;a&nbsp;time,&nbsp;with&nbsp;a&nbsp;hole&nbsp;of&nbsp;size&nbsp;10&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8067540">//&nbsp;the&nbsp;beginning&nbsp;and&nbsp;one&nbsp;of&nbsp;size&nbsp;8&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8067588">var</span>&nbsp;<span class="ident" id="8067592">outputBuf</span>&nbsp;<span class="ident" id="8067602">bytes</span><span class="op" id="8067607">.</span><span class="ident" id="8067608">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067616">buf</span>&nbsp;<span class="op" id="8067620">:=</span>&nbsp;<span class="builtinfunc" id="8067623">make</span><span class="op" id="8067627">(</span><span class="op" id="8067628">[</span><span class="op" id="8067629">]</span><span class="builtintype" id="8067630">byte</span><span class="op" id="8067634">,</span>&nbsp;<span class="num" id="8067636">6</span><span class="op" id="8067637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8067640">for</span>&nbsp;<span class="op" id="8067644">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067648">n</span><span class="op" id="8067649">,</span>&nbsp;<span class="ident" id="8067651">err</span>&nbsp;<span class="op" id="8067655">:=</span>&nbsp;<span class="ident" id="8067658">sfr</span><span class="op" id="8067661">.</span><span class="ident" id="8067662">Read</span><span class="op" id="8067666">(</span><span class="ident" id="8067667">buf</span><span class="op" id="8067670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8067674">if</span>&nbsp;<span class="ident" id="8067677">err</span>&nbsp;<span class="op" id="8067681">==</span>&nbsp;<span class="ident" id="8067684">io</span><span class="op" id="8067686">.</span><span class="ident" id="8067687">EOF</span>&nbsp;<span class="op" id="8067691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8067696">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8067704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8067708">if</span>&nbsp;<span class="ident" id="8067711">err</span>&nbsp;<span class="op" id="8067715">!=</span>&nbsp;<span class="ident" id="8067718">nil</span>&nbsp;<span class="op" id="8067722">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067727">t</span><span class="op" id="8067728">.</span><span class="ident" id="8067729">Errorf</span><span class="op" id="8067735">(</span><span class="string" id="8067736">&#34;Read:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="8067765">,</span>&nbsp;<span class="ident" id="8067767">err</span><span class="op" id="8067770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8067774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8067778">if</span>&nbsp;<span class="ident" id="8067781">n</span>&nbsp;<span class="op" id="8067783">&gt;</span>&nbsp;<span class="num" id="8067785">0</span>&nbsp;<span class="op" id="8067787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067792">_</span><span class="op" id="8067793">,</span>&nbsp;<span class="ident" id="8067795">err</span>&nbsp;<span class="op" id="8067799">:=</span>&nbsp;<span class="ident" id="8067802">outputBuf</span><span class="op" id="8067811">.</span><span class="ident" id="8067812">Write</span><span class="op" id="8067817">(</span><span class="ident" id="8067818">buf</span><span class="op" id="8067821">[</span><span class="op" id="8067822">:</span><span class="ident" id="8067823">n</span><span class="op" id="8067824">]</span><span class="op" id="8067825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8067830">if</span>&nbsp;<span class="ident" id="8067833">err</span>&nbsp;<span class="op" id="8067837">!=</span>&nbsp;<span class="ident" id="8067840">nil</span>&nbsp;<span class="op" id="8067844">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067850">t</span><span class="op" id="8067851">.</span><span class="ident" id="8067852">Errorf</span><span class="op" id="8067858">(</span><span class="string" id="8067859">&#34;Write:&nbsp;unexpected&nbsp;error&nbsp;%v\n&#34;</span><span class="op" id="8067889">,</span>&nbsp;<span class="ident" id="8067891">err</span><span class="op" id="8067894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8067899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8067903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8067906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067909">got</span>&nbsp;<span class="op" id="8067913">:=</span>&nbsp;<span class="ident" id="8067916">outputBuf</span><span class="op" id="8067925">.</span><span class="ident" id="8067926">String</span><span class="op" id="8067932">(</span><span class="op" id="8067933">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8067936">if</span>&nbsp;<span class="ident" id="8067939">got</span>&nbsp;<span class="op" id="8067943">!=</span>&nbsp;<span class="ident" id="8067946">expected</span>&nbsp;<span class="op" id="8067955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8067959">t</span><span class="op" id="8067960">.</span><span class="ident" id="8067961">Errorf</span><span class="op" id="8067967">(</span><span class="string" id="8067968">&#34;Contents&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8067992">,</span>&nbsp;<span class="ident" id="8067994">got</span><span class="op" id="8067997">,</span>&nbsp;<span class="ident" id="8067999">expected</span><span class="op" id="8068007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8068010">}</span><br>
<span class="lineno"></span><span class="op" id="8068012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="8068015">func</span>&nbsp;<span class="ident" id="8068020">TestReadGNUSparseMap0x1</span><span class="op" id="8068043">(</span><span class="ident" id="8068044">t</span>&nbsp;<span class="op" id="8068046">*</span><span class="ident" id="8068047">testing</span><span class="op" id="8068054">.</span><span class="ident" id="8068055">T</span><span class="op" id="8068056">)</span>&nbsp;<span class="op" id="8068058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068061">headers</span>&nbsp;<span class="op" id="8068069">:=</span>&nbsp;<span class="keyword" id="8068072">map</span><span class="op" id="8068075">[</span><span class="builtintype" id="8068076">string</span><span class="op" id="8068082">]</span><span class="builtintype" id="8068083">string</span><span class="op" id="8068089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068093">paxGNUSparseNumBlocks</span><span class="op" id="8068114">:</span>&nbsp;<span class="string" id="8068116">&#34;4&#34;</span><span class="op" id="8068119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068123">paxGNUSparseMap</span><span class="op" id="8068138">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8068146">&#34;0,5,10,5,20,5,30,5&#34;</span><span class="op" id="8068166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8068169">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068172">expected</span>&nbsp;<span class="op" id="8068181">:=</span>&nbsp;<span class="op" id="8068184">[</span><span class="op" id="8068185">]</span><span class="ident" id="8068186">sparseEntry</span><span class="op" id="8068197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8068201">{</span><span class="ident" id="8068202">offset</span><span class="op" id="8068208">:</span>&nbsp;<span class="num" id="8068210">0</span><span class="op" id="8068211">,</span>&nbsp;<span class="ident" id="8068213">numBytes</span><span class="op" id="8068221">:</span>&nbsp;<span class="num" id="8068223">5</span><span class="op" id="8068224">}</span><span class="op" id="8068225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8068229">{</span><span class="ident" id="8068230">offset</span><span class="op" id="8068236">:</span>&nbsp;<span class="num" id="8068238">10</span><span class="op" id="8068240">,</span>&nbsp;<span class="ident" id="8068242">numBytes</span><span class="op" id="8068250">:</span>&nbsp;<span class="num" id="8068252">5</span><span class="op" id="8068253">}</span><span class="op" id="8068254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8068258">{</span><span class="ident" id="8068259">offset</span><span class="op" id="8068265">:</span>&nbsp;<span class="num" id="8068267">20</span><span class="op" id="8068269">,</span>&nbsp;<span class="ident" id="8068271">numBytes</span><span class="op" id="8068279">:</span>&nbsp;<span class="num" id="8068281">5</span><span class="op" id="8068282">}</span><span class="op" id="8068283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8068287">{</span><span class="ident" id="8068288">offset</span><span class="op" id="8068294">:</span>&nbsp;<span class="num" id="8068296">30</span><span class="op" id="8068298">,</span>&nbsp;<span class="ident" id="8068300">numBytes</span><span class="op" id="8068308">:</span>&nbsp;<span class="num" id="8068310">5</span><span class="op" id="8068311">}</span><span class="op" id="8068312">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8068315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068319">sp</span><span class="op" id="8068321">,</span>&nbsp;<span class="ident" id="8068323">err</span>&nbsp;<span class="op" id="8068327">:=</span>&nbsp;<span class="ident" id="8068330">readGNUSparseMap0x1</span><span class="op" id="8068349">(</span><span class="ident" id="8068350">headers</span><span class="op" id="8068357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8068360">if</span>&nbsp;<span class="ident" id="8068363">err</span>&nbsp;<span class="op" id="8068367">!=</span>&nbsp;<span class="ident" id="8068370">nil</span>&nbsp;<span class="op" id="8068374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068378">t</span><span class="op" id="8068379">.</span><span class="ident" id="8068380">Errorf</span><span class="op" id="8068386">(</span><span class="string" id="8068387">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8068409">,</span>&nbsp;<span class="ident" id="8068411">err</span><span class="op" id="8068414">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8068417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8068420">if</span>&nbsp;<span class="op" id="8068423">!</span><span class="ident" id="8068424">reflect</span><span class="op" id="8068431">.</span><span class="ident" id="8068432">DeepEqual</span><span class="op" id="8068441">(</span><span class="ident" id="8068442">sp</span><span class="op" id="8068444">,</span>&nbsp;<span class="ident" id="8068446">expected</span><span class="op" id="8068454">)</span>&nbsp;<span class="op" id="8068456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068460">t</span><span class="op" id="8068461">.</span><span class="ident" id="8068462">Errorf</span><span class="op" id="8068468">(</span><span class="string" id="8068469">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="8068510">,</span>&nbsp;<span class="ident" id="8068512">sp</span><span class="op" id="8068514">,</span>&nbsp;<span class="ident" id="8068516">expected</span><span class="op" id="8068524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8068527">}</span><br>
<span class="lineno"></span><span class="op" id="8068529">}</span><br>
<span class="lineno">695</span><br>
<span class="lineno"></span><span class="keyword" id="8068532">func</span>&nbsp;<span class="ident" id="8068537">TestReadGNUSparseMap1x0</span><span class="op" id="8068560">(</span><span class="ident" id="8068561">t</span>&nbsp;<span class="op" id="8068563">*</span><span class="ident" id="8068564">testing</span><span class="op" id="8068571">.</span><span class="ident" id="8068572">T</span><span class="op" id="8068573">)</span>&nbsp;<span class="op" id="8068575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8068578">//&nbsp;This&nbsp;test&nbsp;uses&nbsp;lots&nbsp;of&nbsp;holes&nbsp;so&nbsp;the&nbsp;sparse&nbsp;header&nbsp;takes&nbsp;up&nbsp;more&nbsp;than&nbsp;two&nbsp;blocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068662">numEntries</span>&nbsp;<span class="op" id="8068673">:=</span>&nbsp;<span class="num" id="8068676">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068681">expected</span>&nbsp;<span class="op" id="8068690">:=</span>&nbsp;<span class="builtinfunc" id="8068693">make</span><span class="op" id="8068697">(</span><span class="op" id="8068698">[</span><span class="op" id="8068699">]</span><span class="ident" id="8068700">sparseEntry</span><span class="op" id="8068711">,</span>&nbsp;<span class="num" id="8068713">0</span><span class="op" id="8068714">,</span>&nbsp;<span class="ident" id="8068716">numEntries</span><span class="op" id="8068726">)</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068729">sparseMap</span>&nbsp;<span class="op" id="8068739">:=</span>&nbsp;<span class="builtinfunc" id="8068742">new</span><span class="op" id="8068745">(</span><span class="ident" id="8068746">bytes</span><span class="op" id="8068751">.</span><span class="ident" id="8068752">Buffer</span><span class="op" id="8068758">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068762">fmt</span><span class="op" id="8068765">.</span><span class="ident" id="8068766">Fprintf</span><span class="op" id="8068773">(</span><span class="ident" id="8068774">sparseMap</span><span class="op" id="8068783">,</span>&nbsp;<span class="string" id="8068785">&#34;%d\n&#34;</span><span class="op" id="8068791">,</span>&nbsp;<span class="ident" id="8068793">numEntries</span><span class="op" id="8068803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8068806">for</span>&nbsp;<span class="ident" id="8068810">i</span>&nbsp;<span class="op" id="8068812">:=</span>&nbsp;<span class="num" id="8068815">0</span><span class="op" id="8068816">;</span>&nbsp;<span class="ident" id="8068818">i</span>&nbsp;<span class="op" id="8068820">&lt;</span>&nbsp;<span class="ident" id="8068822">numEntries</span><span class="op" id="8068832">;</span>&nbsp;<span class="ident" id="8068834">i</span><span class="op" id="8068835">++</span>&nbsp;<span class="op" id="8068838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068842">offset</span>&nbsp;<span class="op" id="8068849">:=</span>&nbsp;<span class="ident" id="8068852">int64</span><span class="op" id="8068857">(</span><span class="num" id="8068858">2048</span>&nbsp;<span class="op" id="8068863">*</span>&nbsp;<span class="ident" id="8068865">i</span><span class="op" id="8068866">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068870">numBytes</span>&nbsp;<span class="op" id="8068879">:=</span>&nbsp;<span class="ident" id="8068882">int64</span><span class="op" id="8068887">(</span><span class="num" id="8068888">1024</span><span class="op" id="8068892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068896">expected</span>&nbsp;<span class="op" id="8068905">=</span>&nbsp;<span class="builtinfunc" id="8068907">append</span><span class="op" id="8068913">(</span><span class="ident" id="8068914">expected</span><span class="op" id="8068922">,</span>&nbsp;<span class="ident" id="8068924">sparseEntry</span><span class="op" id="8068935">{</span><span class="ident" id="8068936">offset</span><span class="op" id="8068942">:</span>&nbsp;<span class="ident" id="8068944">offset</span><span class="op" id="8068950">,</span>&nbsp;<span class="ident" id="8068952">numBytes</span><span class="op" id="8068960">:</span>&nbsp;<span class="ident" id="8068962">numBytes</span><span class="op" id="8068970">}</span><span class="op" id="8068971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8068975">fmt</span><span class="op" id="8068978">.</span><span class="ident" id="8068979">Fprintf</span><span class="op" id="8068986">(</span><span class="ident" id="8068987">sparseMap</span><span class="op" id="8068996">,</span>&nbsp;<span class="string" id="8068998">&#34;%d\n%d\n&#34;</span><span class="op" id="8069008">,</span>&nbsp;<span class="ident" id="8069010">offset</span><span class="op" id="8069016">,</span>&nbsp;<span class="ident" id="8069018">numBytes</span><span class="op" id="8069026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8069029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8069033">//&nbsp;Make&nbsp;the&nbsp;header&nbsp;the&nbsp;smallest&nbsp;multiple&nbsp;of&nbsp;blockSize&nbsp;that&nbsp;fits&nbsp;the&nbsp;sparseMap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069112">headerBlocks</span>&nbsp;<span class="op" id="8069125">:=</span>&nbsp;<span class="op" id="8069128">(</span><span class="ident" id="8069129">sparseMap</span><span class="op" id="8069138">.</span><span class="ident" id="8069139">Len</span><span class="op" id="8069142">(</span><span class="op" id="8069143">)</span>&nbsp;<span class="op" id="8069145">+</span>&nbsp;<span class="ident" id="8069147">blockSize</span>&nbsp;<span class="op" id="8069157">-</span>&nbsp;<span class="num" id="8069159">1</span><span class="op" id="8069160">)</span>&nbsp;<span class="op" id="8069162">/</span>&nbsp;<span class="ident" id="8069164">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069175">bufLen</span>&nbsp;<span class="op" id="8069182">:=</span>&nbsp;<span class="ident" id="8069185">blockSize</span>&nbsp;<span class="op" id="8069195">*</span>&nbsp;<span class="ident" id="8069197">headerBlocks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069211">buf</span>&nbsp;<span class="op" id="8069215">:=</span>&nbsp;<span class="builtinfunc" id="8069218">make</span><span class="op" id="8069222">(</span><span class="op" id="8069223">[</span><span class="op" id="8069224">]</span><span class="builtintype" id="8069225">byte</span><span class="op" id="8069229">,</span>&nbsp;<span class="ident" id="8069231">bufLen</span><span class="op" id="8069237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8069240">copy</span><span class="op" id="8069244">(</span><span class="ident" id="8069245">buf</span><span class="op" id="8069248">,</span>&nbsp;<span class="ident" id="8069250">sparseMap</span><span class="op" id="8069259">.</span><span class="ident" id="8069260">Bytes</span><span class="op" id="8069265">(</span><span class="op" id="8069266">)</span><span class="op" id="8069267">)</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8069271">//&nbsp;Get&nbsp;an&nbsp;reader&nbsp;to&nbsp;read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069312">r</span>&nbsp;<span class="op" id="8069314">:=</span>&nbsp;<span class="ident" id="8069317">bytes</span><span class="op" id="8069322">.</span><span class="ident" id="8069323">NewReader</span><span class="op" id="8069332">(</span><span class="ident" id="8069333">buf</span><span class="op" id="8069336">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8069340">//&nbsp;Read&nbsp;the&nbsp;sparse&nbsp;map</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069364">sp</span><span class="op" id="8069366">,</span>&nbsp;<span class="ident" id="8069368">err</span>&nbsp;<span class="op" id="8069372">:=</span>&nbsp;<span class="ident" id="8069375">readGNUSparseMap1x0</span><span class="op" id="8069394">(</span><span class="ident" id="8069395">r</span><span class="op" id="8069396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8069399">if</span>&nbsp;<span class="ident" id="8069402">err</span>&nbsp;<span class="op" id="8069406">!=</span>&nbsp;<span class="ident" id="8069409">nil</span>&nbsp;<span class="op" id="8069413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069417">t</span><span class="op" id="8069418">.</span><span class="ident" id="8069419">Errorf</span><span class="op" id="8069425">(</span><span class="string" id="8069426">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8069448">,</span>&nbsp;<span class="ident" id="8069450">err</span><span class="op" id="8069453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8069456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8069459">if</span>&nbsp;<span class="op" id="8069462">!</span><span class="ident" id="8069463">reflect</span><span class="op" id="8069470">.</span><span class="ident" id="8069471">DeepEqual</span><span class="op" id="8069480">(</span><span class="ident" id="8069481">sp</span><span class="op" id="8069483">,</span>&nbsp;<span class="ident" id="8069485">expected</span><span class="op" id="8069493">)</span>&nbsp;<span class="op" id="8069495">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069499">t</span><span class="op" id="8069500">.</span><span class="ident" id="8069501">Errorf</span><span class="op" id="8069507">(</span><span class="string" id="8069508">&#34;Incorrect&nbsp;sparse&nbsp;map:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="8069549">,</span>&nbsp;<span class="ident" id="8069551">sp</span><span class="op" id="8069553">,</span>&nbsp;<span class="ident" id="8069555">expected</span><span class="op" id="8069563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8069566">}</span><br>
<span class="lineno"></span><span class="op" id="8069568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8069571">func</span>&nbsp;<span class="ident" id="8069576">TestUninitializedRead</span><span class="op" id="8069597">(</span><span class="ident" id="8069598">t</span>&nbsp;<span class="op" id="8069600">*</span><span class="ident" id="8069601">testing</span><span class="op" id="8069608">.</span><span class="ident" id="8069609">T</span><span class="op" id="8069610">)</span>&nbsp;<span class="op" id="8069612">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069615">test</span>&nbsp;<span class="op" id="8069620">:=</span>&nbsp;<span class="ident" id="8069623">gnuTarTest</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069635">f</span><span class="op" id="8069636">,</span>&nbsp;<span class="ident" id="8069638">err</span>&nbsp;<span class="op" id="8069642">:=</span>&nbsp;<span class="ident" id="8069645">os</span><span class="op" id="8069647">.</span><span class="ident" id="8069648">Open</span><span class="op" id="8069652">(</span><span class="ident" id="8069653">test</span><span class="op" id="8069657">.</span><span class="ident" id="8069658">file</span><span class="op" id="8069662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8069665">if</span>&nbsp;<span class="ident" id="8069668">err</span>&nbsp;<span class="op" id="8069672">!=</span>&nbsp;<span class="ident" id="8069675">nil</span>&nbsp;<span class="op" id="8069679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069683">t</span><span class="op" id="8069684">.</span><span class="ident" id="8069685">Fatalf</span><span class="op" id="8069691">(</span><span class="string" id="8069692">&#34;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="8069714">,</span>&nbsp;<span class="ident" id="8069716">err</span><span class="op" id="8069719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8069722">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8069725">defer</span>&nbsp;<span class="ident" id="8069731">f</span><span class="op" id="8069732">.</span><span class="ident" id="8069733">Close</span><span class="op" id="8069738">(</span><span class="op" id="8069739">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069743">tr</span>&nbsp;<span class="op" id="8069746">:=</span>&nbsp;<span class="ident" id="8069749">NewReader</span><span class="op" id="8069758">(</span><span class="ident" id="8069759">f</span><span class="op" id="8069760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069763">_</span><span class="op" id="8069764">,</span>&nbsp;<span class="ident" id="8069766">err</span>&nbsp;<span class="op" id="8069770">=</span>&nbsp;<span class="ident" id="8069772">tr</span><span class="op" id="8069774">.</span><span class="ident" id="8069775">Read</span><span class="op" id="8069779">(</span><span class="op" id="8069780">[</span><span class="op" id="8069781">]</span><span class="builtintype" id="8069782">byte</span><span class="op" id="8069786">{</span><span class="op" id="8069787">}</span><span class="op" id="8069788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8069791">if</span>&nbsp;<span class="ident" id="8069794">err</span>&nbsp;<span class="op" id="8069798">==</span>&nbsp;<span class="ident" id="8069801">nil</span>&nbsp;<span class="op" id="8069805">||</span>&nbsp;<span class="ident" id="8069808">err</span>&nbsp;<span class="op" id="8069812">!=</span>&nbsp;<span class="ident" id="8069815">io</span><span class="op" id="8069817">.</span><span class="ident" id="8069818">EOF</span>&nbsp;<span class="op" id="8069822">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8069826">t</span><span class="op" id="8069827">.</span><span class="ident" id="8069828">Errorf</span><span class="op" id="8069834">(</span><span class="string" id="8069835">&#34;Unexpected&nbsp;error:&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="8069868">,</span>&nbsp;<span class="ident" id="8069870">err</span><span class="op" id="8069873">,</span>&nbsp;<span class="ident" id="8069875">io</span><span class="op" id="8069877">.</span><span class="ident" id="8069878">EOF</span><span class="op" id="8069881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8069884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="8069887">}</span>
</div>
</body>
</html>
