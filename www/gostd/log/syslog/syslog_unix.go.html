<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>log/syslog</h2>
<ul>
<li><a href="/gostd/log/syslog/syslog.go.html">syslog.go</a></li>
<li><a href="/gostd/log/syslog/syslog_test.go.html">syslog_test.go</a></li>
<li><a href="/gostd/log/syslog/syslog_unix.go.html" class="current">syslog_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5265258">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5265313">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5265367">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5265418">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5265451">package</span>&nbsp;<span class="ident" id="5265459">syslog</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5265467">import</span>&nbsp;<span class="op" id="5265474">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5265477">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5265487">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="5265493">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5265496">//&nbsp;unixSyslog&nbsp;opens&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;running&nbsp;on&nbsp;the</span><br>
<span class="lineno">15</span><span class="comment" id="5265565">//&nbsp;local&nbsp;machine&nbsp;using&nbsp;a&nbsp;Unix&nbsp;domain&nbsp;socket.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5265611">func</span>&nbsp;<span class="ident" id="5265616">unixSyslog</span><span class="op" id="5265626">(</span><span class="op" id="5265627">)</span>&nbsp;<span class="op" id="5265629">(</span><span class="ident" id="5265630">conn</span>&nbsp;<span class="ident" id="5265635">serverConn</span><span class="op" id="5265645">,</span>&nbsp;<span class="ident" id="5265647">err</span>&nbsp;<span class="builtintype" id="5265651">error</span><span class="op" id="5265656">)</span>&nbsp;<span class="op" id="5265658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265661">logTypes</span>&nbsp;<span class="op" id="5265670">:=</span>&nbsp;<span class="op" id="5265673">[</span><span class="op" id="5265674">]</span><span class="builtintype" id="5265675">string</span><span class="op" id="5265681">{</span><span class="string" id="5265682">&#34;unixgram&#34;</span><span class="op" id="5265692">,</span>&nbsp;<span class="string" id="5265694">&#34;unix&#34;</span><span class="op" id="5265700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265703">logPaths</span>&nbsp;<span class="op" id="5265712">:=</span>&nbsp;<span class="op" id="5265715">[</span><span class="op" id="5265716">]</span><span class="builtintype" id="5265717">string</span><span class="op" id="5265723">{</span><span class="string" id="5265724">&#34;/dev/log&#34;</span><span class="op" id="5265734">,</span>&nbsp;<span class="string" id="5265736">&#34;/var/run/syslog&#34;</span><span class="op" id="5265753">,</span>&nbsp;<span class="string" id="5265755">&#34;/var/run/log&#34;</span><span class="op" id="5265769">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265772">for</span>&nbsp;<span class="ident" id="5265776">_</span><span class="op" id="5265777">,</span>&nbsp;<span class="ident" id="5265779">network</span>&nbsp;<span class="op" id="5265787">:=</span>&nbsp;<span class="keyword" id="5265790">range</span>&nbsp;<span class="ident" id="5265796">logTypes</span>&nbsp;<span class="op" id="5265805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265809">for</span>&nbsp;<span class="ident" id="5265813">_</span><span class="op" id="5265814">,</span>&nbsp;<span class="ident" id="5265816">path</span>&nbsp;<span class="op" id="5265821">:=</span>&nbsp;<span class="keyword" id="5265824">range</span>&nbsp;<span class="ident" id="5265830">logPaths</span>&nbsp;<span class="op" id="5265839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5265844">conn</span><span class="op" id="5265848">,</span>&nbsp;<span class="ident" id="5265850">err</span>&nbsp;<span class="op" id="5265854">:=</span>&nbsp;<span class="ident" id="5265857">net</span><span class="op" id="5265860">.</span><span class="ident" id="5265861">Dial</span><span class="op" id="5265865">(</span><span class="ident" id="5265866">network</span><span class="op" id="5265873">,</span>&nbsp;<span class="ident" id="5265875">path</span><span class="op" id="5265879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265884">if</span>&nbsp;<span class="ident" id="5265887">err</span>&nbsp;<span class="op" id="5265891">!=</span>&nbsp;<span class="builtintype" id="5265894">nil</span>&nbsp;<span class="op" id="5265898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265904">continue</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265916">}</span>&nbsp;<span class="keyword" id="5265918">else</span>&nbsp;<span class="op" id="5265923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265929">return</span>&nbsp;<span class="op" id="5265936">&amp;</span><span class="ident" id="5265937">netConn</span><span class="op" id="5265944">{</span><span class="ident" id="5265945">conn</span><span class="op" id="5265949">:</span>&nbsp;<span class="ident" id="5265951">conn</span><span class="op" id="5265955">,</span>&nbsp;<span class="ident" id="5265957">local</span><span class="op" id="5265962">:</span>&nbsp;<span class="builtintype" id="5265964">true</span><span class="op" id="5265968">}</span><span class="op" id="5265969">,</span>&nbsp;<span class="builtintype" id="5265971">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5265985">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5265988">return</span>&nbsp;<span class="builtintype" id="5265995">nil</span><span class="op" id="5265998">,</span>&nbsp;<span class="ident" id="5266000">errors</span><span class="op" id="5266006">.</span><span class="ident" id="5266007">New</span><span class="op" id="5266010">(</span><span class="string" id="5266011">&#34;Unix&nbsp;syslog&nbsp;delivery&nbsp;error&#34;</span><span class="op" id="5266039">)</span><br>
<span class="lineno"></span><span class="op" id="5266041">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
