<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4933832">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4933888">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4933942">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4933993">package</span>&nbsp;<span class="ident" id="4934001">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4934007">//&nbsp;JSON&nbsp;value&nbsp;parser&nbsp;state&nbsp;machine.</span><br>
<span class="lineno"></span><span class="comment" id="4934043">//&nbsp;Just&nbsp;about&nbsp;at&nbsp;the&nbsp;limit&nbsp;of&nbsp;what&nbsp;is&nbsp;reasonable&nbsp;to&nbsp;write&nbsp;by&nbsp;hand.</span><br>
<span class="lineno"></span><span class="comment" id="4934110">//&nbsp;Some&nbsp;parts&nbsp;are&nbsp;a&nbsp;bit&nbsp;tedious,&nbsp;but&nbsp;overall&nbsp;it&nbsp;nicely&nbsp;factors&nbsp;out&nbsp;the</span><br>
<span class="lineno">10</span><span class="comment" id="4934181">//&nbsp;otherwise&nbsp;common&nbsp;code&nbsp;from&nbsp;the&nbsp;multiple&nbsp;scanning&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="4934243">//&nbsp;in&nbsp;this&nbsp;package&nbsp;(Compact,&nbsp;Indent,&nbsp;checkValid,&nbsp;nextValue,&nbsp;etc).</span><br>
<span class="lineno"></span><span class="comment" id="4934309">//</span><br>
<span class="lineno"></span><span class="comment" id="4934312">//&nbsp;This&nbsp;file&nbsp;starts&nbsp;with&nbsp;two&nbsp;simple&nbsp;examples&nbsp;using&nbsp;the&nbsp;scanner</span><br>
<span class="lineno"></span><span class="comment" id="4934375">//&nbsp;before&nbsp;diving&nbsp;into&nbsp;the&nbsp;scanner&nbsp;itself.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="4934418">import</span>&nbsp;<span class="string" id="4934425">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4934436">//&nbsp;checkValid&nbsp;verifies&nbsp;that&nbsp;data&nbsp;is&nbsp;valid&nbsp;JSON-encoded&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="4934497">//&nbsp;scan&nbsp;is&nbsp;passed&nbsp;in&nbsp;for&nbsp;use&nbsp;by&nbsp;checkValid&nbsp;to&nbsp;avoid&nbsp;an&nbsp;allocation.</span><br>
<span class="lineno">20</span><span class="keyword" id="4934564">func</span>&nbsp;<span class="ident" id="4934569">checkValid</span><span class="op" id="4934579">(</span><span class="ident" id="4934580">data</span>&nbsp;<span class="op" id="4934585">[</span><span class="op" id="4934586">]</span><span class="builtintype" id="4934587">byte</span><span class="op" id="4934591">,</span>&nbsp;<span class="ident" id="4934593">scan</span>&nbsp;<span class="op" id="4934598">*</span><span class="ident" id="4934599">scanner</span><span class="op" id="4934606">)</span>&nbsp;<span class="builtintype" id="4934608">error</span>&nbsp;<span class="op" id="4934614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934617">scan</span><span class="op" id="4934621">.</span><span class="ident" id="4934622">reset</span><span class="op" id="4934627">(</span><span class="op" id="4934628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934631">for</span>&nbsp;<span class="ident" id="4934635">_</span><span class="op" id="4934636">,</span>&nbsp;<span class="ident" id="4934638">c</span>&nbsp;<span class="op" id="4934640">:=</span>&nbsp;<span class="keyword" id="4934643">range</span>&nbsp;<span class="ident" id="4934649">data</span>&nbsp;<span class="op" id="4934654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4934658">scan</span><span class="op" id="4934662">.</span><span class="ident" id="4934663">bytes</span><span class="op" id="4934668">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934673">if</span>&nbsp;<span class="ident" id="4934676">scan</span><span class="op" id="4934680">.</span><span class="ident" id="4934681">step</span><span class="op" id="4934685">(</span><span class="ident" id="4934686">scan</span><span class="op" id="4934690">,</span>&nbsp;<span class="builtintype" id="4934692">int</span><span class="op" id="4934695">(</span><span class="ident" id="4934696">c</span><span class="op" id="4934697">)</span><span class="op" id="4934698">)</span>&nbsp;<span class="op" id="4934700">==</span>&nbsp;<span class="ident" id="4934703">scanError</span>&nbsp;<span class="op" id="4934713">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934718">return</span>&nbsp;<span class="ident" id="4934725">scan</span><span class="op" id="4934729">.</span><span class="ident" id="4934730">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934742">if</span>&nbsp;<span class="ident" id="4934745">scan</span><span class="op" id="4934749">.</span><span class="ident" id="4934750">eof</span><span class="op" id="4934753">(</span><span class="op" id="4934754">)</span>&nbsp;<span class="op" id="4934756">==</span>&nbsp;<span class="ident" id="4934759">scanError</span>&nbsp;<span class="op" id="4934769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934773">return</span>&nbsp;<span class="ident" id="4934780">scan</span><span class="op" id="4934784">.</span><span class="ident" id="4934785">err</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4934790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4934793">return</span>&nbsp;<span class="ident" id="4934800">nil</span><br>
<span class="lineno"></span><span class="op" id="4934804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4934807">//&nbsp;nextValue&nbsp;splits&nbsp;data&nbsp;after&nbsp;the&nbsp;next&nbsp;whole&nbsp;JSON&nbsp;value,</span><br>
<span class="lineno">35</span><span class="comment" id="4934865">//&nbsp;returning&nbsp;that&nbsp;value&nbsp;and&nbsp;the&nbsp;bytes&nbsp;that&nbsp;follow&nbsp;it&nbsp;as&nbsp;separate&nbsp;slices.</span><br>
<span class="lineno"></span><span class="comment" id="4934938">//&nbsp;scan&nbsp;is&nbsp;passed&nbsp;in&nbsp;for&nbsp;use&nbsp;by&nbsp;nextValue&nbsp;to&nbsp;avoid&nbsp;an&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="4935004">func</span>&nbsp;<span class="ident" id="4935009">nextValue</span><span class="op" id="4935018">(</span><span class="ident" id="4935019">data</span>&nbsp;<span class="op" id="4935024">[</span><span class="op" id="4935025">]</span><span class="builtintype" id="4935026">byte</span><span class="op" id="4935030">,</span>&nbsp;<span class="ident" id="4935032">scan</span>&nbsp;<span class="op" id="4935037">*</span><span class="ident" id="4935038">scanner</span><span class="op" id="4935045">)</span>&nbsp;<span class="op" id="4935047">(</span><span class="ident" id="4935048">value</span><span class="op" id="4935053">,</span>&nbsp;<span class="ident" id="4935055">rest</span>&nbsp;<span class="op" id="4935060">[</span><span class="op" id="4935061">]</span><span class="builtintype" id="4935062">byte</span><span class="op" id="4935066">,</span>&nbsp;<span class="ident" id="4935068">err</span>&nbsp;<span class="builtintype" id="4935072">error</span><span class="op" id="4935077">)</span>&nbsp;<span class="op" id="4935079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935082">scan</span><span class="op" id="4935086">.</span><span class="ident" id="4935087">reset</span><span class="op" id="4935092">(</span><span class="op" id="4935093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935096">for</span>&nbsp;<span class="ident" id="4935100">i</span><span class="op" id="4935101">,</span>&nbsp;<span class="ident" id="4935103">c</span>&nbsp;<span class="op" id="4935105">:=</span>&nbsp;<span class="keyword" id="4935108">range</span>&nbsp;<span class="ident" id="4935114">data</span>&nbsp;<span class="op" id="4935119">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935123">v</span>&nbsp;<span class="op" id="4935125">:=</span>&nbsp;<span class="ident" id="4935128">scan</span><span class="op" id="4935132">.</span><span class="ident" id="4935133">step</span><span class="op" id="4935137">(</span><span class="ident" id="4935138">scan</span><span class="op" id="4935142">,</span>&nbsp;<span class="builtintype" id="4935144">int</span><span class="op" id="4935147">(</span><span class="ident" id="4935148">c</span><span class="op" id="4935149">)</span><span class="op" id="4935150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935154">if</span>&nbsp;<span class="ident" id="4935157">v</span>&nbsp;<span class="op" id="4935159">&gt;=</span>&nbsp;<span class="ident" id="4935162">scanEnd</span>&nbsp;<span class="op" id="4935170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935175">switch</span>&nbsp;<span class="ident" id="4935182">v</span>&nbsp;<span class="op" id="4935184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935189">case</span>&nbsp;<span class="ident" id="4935194">scanError</span><span class="op" id="4935203">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935209">return</span>&nbsp;<span class="ident" id="4935216">nil</span><span class="op" id="4935219">,</span>&nbsp;<span class="ident" id="4935221">nil</span><span class="op" id="4935224">,</span>&nbsp;<span class="ident" id="4935226">scan</span><span class="op" id="4935230">.</span><span class="ident" id="4935231">err</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935238">case</span>&nbsp;<span class="ident" id="4935243">scanEnd</span><span class="op" id="4935250">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935256">return</span>&nbsp;<span class="ident" id="4935263">data</span><span class="op" id="4935267">[</span><span class="num" id="4935268">0</span><span class="op" id="4935269">:</span><span class="ident" id="4935270">i</span><span class="op" id="4935271">]</span><span class="op" id="4935272">,</span>&nbsp;<span class="ident" id="4935274">data</span><span class="op" id="4935278">[</span><span class="ident" id="4935279">i</span><span class="op" id="4935280">:</span><span class="op" id="4935281">]</span><span class="op" id="4935282">,</span>&nbsp;<span class="ident" id="4935284">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935298">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935301">if</span>&nbsp;<span class="ident" id="4935304">scan</span><span class="op" id="4935308">.</span><span class="ident" id="4935309">eof</span><span class="op" id="4935312">(</span><span class="op" id="4935313">)</span>&nbsp;<span class="op" id="4935315">==</span>&nbsp;<span class="ident" id="4935318">scanError</span>&nbsp;<span class="op" id="4935328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935332">return</span>&nbsp;<span class="ident" id="4935339">nil</span><span class="op" id="4935342">,</span>&nbsp;<span class="ident" id="4935344">nil</span><span class="op" id="4935347">,</span>&nbsp;<span class="ident" id="4935349">scan</span><span class="op" id="4935353">.</span><span class="ident" id="4935354">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4935359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4935362">return</span>&nbsp;<span class="ident" id="4935369">data</span><span class="op" id="4935373">,</span>&nbsp;<span class="ident" id="4935375">nil</span><span class="op" id="4935378">,</span>&nbsp;<span class="ident" id="4935380">nil</span><br>
<span class="lineno"></span><span class="op" id="4935384">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="4935387">//&nbsp;A&nbsp;SyntaxError&nbsp;is&nbsp;a&nbsp;description&nbsp;of&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4935445">type</span>&nbsp;<span class="ident" id="4935450">SyntaxError</span>&nbsp;<span class="keyword" id="4935462">struct</span>&nbsp;<span class="op" id="4935469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935472">msg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4935479">string</span>&nbsp;<span class="comment" id="4935486">//&nbsp;description&nbsp;of&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4935511">Offset</span>&nbsp;<span class="ident" id="4935518">int64</span>&nbsp;&nbsp;<span class="comment" id="4935525">//&nbsp;error&nbsp;occurred&nbsp;after&nbsp;reading&nbsp;Offset&nbsp;bytes</span><br>
<span class="lineno">60</span><span class="op" id="4935570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4935573">func</span>&nbsp;<span class="op" id="4935578">(</span><span class="ident" id="4935579">e</span>&nbsp;<span class="op" id="4935581">*</span><span class="ident" id="4935582">SyntaxError</span><span class="op" id="4935593">)</span>&nbsp;<span class="ident" id="4935595">Error</span><span class="op" id="4935600">(</span><span class="op" id="4935601">)</span>&nbsp;<span class="builtintype" id="4935603">string</span>&nbsp;<span class="op" id="4935610">{</span>&nbsp;<span class="keyword" id="4935612">return</span>&nbsp;<span class="ident" id="4935619">e</span><span class="op" id="4935620">.</span><span class="ident" id="4935621">msg</span>&nbsp;<span class="op" id="4935625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4935628">//&nbsp;A&nbsp;scanner&nbsp;is&nbsp;a&nbsp;JSON&nbsp;scanning&nbsp;state&nbsp;machine.</span><br>
<span class="lineno">65</span><span class="comment" id="4935675">//&nbsp;Callers&nbsp;call&nbsp;scan.reset()&nbsp;and&nbsp;then&nbsp;pass&nbsp;bytes&nbsp;in&nbsp;one&nbsp;at&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="4935741">//&nbsp;by&nbsp;calling&nbsp;scan.step(&amp;scan,&nbsp;c)&nbsp;for&nbsp;each&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="4935790">//&nbsp;The&nbsp;return&nbsp;value,&nbsp;referred&nbsp;to&nbsp;as&nbsp;an&nbsp;opcode,&nbsp;tells&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4935847">//&nbsp;caller&nbsp;about&nbsp;significant&nbsp;parsing&nbsp;events&nbsp;like&nbsp;beginning</span><br>
<span class="lineno"></span><span class="comment" id="4935905">//&nbsp;and&nbsp;ending&nbsp;literals,&nbsp;objects,&nbsp;and&nbsp;arrays,&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="4935962">//&nbsp;caller&nbsp;can&nbsp;follow&nbsp;along&nbsp;if&nbsp;it&nbsp;wishes.</span><br>
<span class="lineno"></span><span class="comment" id="4936003">//&nbsp;The&nbsp;return&nbsp;value&nbsp;scanEnd&nbsp;indicates&nbsp;that&nbsp;a&nbsp;single&nbsp;top-level</span><br>
<span class="lineno"></span><span class="comment" id="4936065">//&nbsp;JSON&nbsp;value&nbsp;has&nbsp;been&nbsp;completed,&nbsp;*before*&nbsp;the&nbsp;byte&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4936122">//&nbsp;just&nbsp;got&nbsp;passed&nbsp;in.&nbsp;&nbsp;(The&nbsp;indication&nbsp;must&nbsp;be&nbsp;delayed&nbsp;in&nbsp;order</span><br>
<span class="lineno"></span><span class="comment" id="4936187">//&nbsp;to&nbsp;recognize&nbsp;the&nbsp;end&nbsp;of&nbsp;numbers:&nbsp;is&nbsp;123&nbsp;a&nbsp;whole&nbsp;value&nbsp;or</span><br>
<span class="lineno">75</span><span class="comment" id="4936247">//&nbsp;the&nbsp;beginning&nbsp;of&nbsp;12345e+6?).</span><br>
<span class="lineno"></span><span class="keyword" id="4936279">type</span>&nbsp;<span class="ident" id="4936284">scanner</span>&nbsp;<span class="keyword" id="4936292">struct</span>&nbsp;<span class="op" id="4936299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4936302">//&nbsp;The&nbsp;step&nbsp;is&nbsp;a&nbsp;func&nbsp;to&nbsp;be&nbsp;called&nbsp;to&nbsp;execute&nbsp;the&nbsp;next&nbsp;transition.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4936370">//&nbsp;Also&nbsp;tried&nbsp;using&nbsp;an&nbsp;integer&nbsp;constant&nbsp;and&nbsp;a&nbsp;single&nbsp;func</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4936429">//&nbsp;with&nbsp;a&nbsp;switch,&nbsp;but&nbsp;using&nbsp;the&nbsp;func&nbsp;directly&nbsp;was&nbsp;10%&nbsp;faster</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4936491">//&nbsp;on&nbsp;a&nbsp;64-bit&nbsp;Mac&nbsp;Mini,&nbsp;and&nbsp;it&#39;s&nbsp;nicer&nbsp;to&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936541">step</span>&nbsp;<span class="keyword" id="4936546">func</span><span class="op" id="4936550">(</span><span class="op" id="4936551">*</span><span class="ident" id="4936552">scanner</span><span class="op" id="4936559">,</span>&nbsp;<span class="builtintype" id="4936561">int</span><span class="op" id="4936564">)</span>&nbsp;<span class="builtintype" id="4936566">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4936572">//&nbsp;Reached&nbsp;end&nbsp;of&nbsp;top-level&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936608">endTop</span>&nbsp;<span class="builtintype" id="4936615">bool</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4936622">//&nbsp;Stack&nbsp;of&nbsp;what&nbsp;we&#39;re&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;-&nbsp;array&nbsp;values,&nbsp;object&nbsp;keys,&nbsp;object&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936707">parseState</span>&nbsp;<span class="op" id="4936718">[</span><span class="op" id="4936719">]</span><span class="builtintype" id="4936720">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4936726">//&nbsp;Error&nbsp;that&nbsp;happened,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936759">err</span>&nbsp;<span class="builtintype" id="4936763">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4936771">//&nbsp;1-byte&nbsp;redo&nbsp;(see&nbsp;undo&nbsp;method)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936805">redo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4936815">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936821">redoCode</span>&nbsp;&nbsp;<span class="builtintype" id="4936831">int</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936836">redoState</span>&nbsp;<span class="keyword" id="4936846">func</span><span class="op" id="4936850">(</span><span class="op" id="4936851">*</span><span class="ident" id="4936852">scanner</span><span class="op" id="4936859">,</span>&nbsp;<span class="builtintype" id="4936861">int</span><span class="op" id="4936864">)</span>&nbsp;<span class="builtintype" id="4936866">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4936872">//&nbsp;total&nbsp;bytes&nbsp;consumed,&nbsp;updated&nbsp;by&nbsp;decoder.Decode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4936924">bytes</span>&nbsp;<span class="ident" id="4936930">int64</span><br>
<span class="lineno"></span><span class="op" id="4936936">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="4936939">//&nbsp;These&nbsp;values&nbsp;are&nbsp;returned&nbsp;by&nbsp;the&nbsp;state&nbsp;transition&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="4937002">//&nbsp;assigned&nbsp;to&nbsp;scanner.state&nbsp;and&nbsp;the&nbsp;method&nbsp;scanner.eof.</span><br>
<span class="lineno"></span><span class="comment" id="4937059">//&nbsp;They&nbsp;give&nbsp;details&nbsp;about&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;the&nbsp;scan&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="4937121">//&nbsp;callers&nbsp;might&nbsp;be&nbsp;interested&nbsp;to&nbsp;know&nbsp;about.</span><br>
<span class="lineno">105</span><span class="comment" id="4937167">//&nbsp;It&nbsp;is&nbsp;okay&nbsp;to&nbsp;ignore&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;any&nbsp;particular</span><br>
<span class="lineno"></span><span class="comment" id="4937226">//&nbsp;call&nbsp;to&nbsp;scanner.state:&nbsp;if&nbsp;one&nbsp;call&nbsp;returns&nbsp;scanError,</span><br>
<span class="lineno"></span><span class="comment" id="4937283">//&nbsp;every&nbsp;subsequent&nbsp;call&nbsp;will&nbsp;return&nbsp;scanError&nbsp;too.</span><br>
<span class="lineno"></span><span class="keyword" id="4937335">const</span>&nbsp;<span class="op" id="4937341">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4937344">//&nbsp;Continue.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937358">scanContinue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4937375">=</span>&nbsp;<span class="ident" id="4937377">iota</span>&nbsp;<span class="comment" id="4937382">//&nbsp;uninteresting&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937405">scanBeginLiteral</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4937429">//&nbsp;end&nbsp;implied&nbsp;by&nbsp;next&nbsp;result&nbsp;!=&nbsp;scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937476">scanBeginObject</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4937500">//&nbsp;begin&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937517">scanObjectKey</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4937541">//&nbsp;just&nbsp;finished&nbsp;object&nbsp;key&nbsp;(string)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937579">scanObjectValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4937603">//&nbsp;just&nbsp;finished&nbsp;non-last&nbsp;object&nbsp;value</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937643">scanEndObject</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4937667">//&nbsp;end&nbsp;object&nbsp;(implies&nbsp;scanObjectValue&nbsp;if&nbsp;possible)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937720">scanBeginArray</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4937744">//&nbsp;begin&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937760">scanArrayValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4937784">//&nbsp;just&nbsp;finished&nbsp;array&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937814">scanEndArray</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4937838">//&nbsp;end&nbsp;array&nbsp;(implies&nbsp;scanArrayValue&nbsp;if&nbsp;possible)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937889">scanSkipSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4937913">//&nbsp;space&nbsp;byte;&nbsp;can&nbsp;skip;&nbsp;known&nbsp;to&nbsp;be&nbsp;last&nbsp;&#34;continue&#34;&nbsp;result</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4937975">//&nbsp;Stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4937985">scanEnd</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="4937995">//&nbsp;top-level&nbsp;value&nbsp;ended&nbsp;*before*&nbsp;this&nbsp;byte;&nbsp;known&nbsp;to&nbsp;be&nbsp;first&nbsp;&#34;stop&#34;&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4938073">scanError</span>&nbsp;<span class="comment" id="4938083">//&nbsp;hit&nbsp;an&nbsp;error,&nbsp;scanner.err.</span><br>
<span class="lineno"></span><span class="op" id="4938113">)</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="4938116">//&nbsp;These&nbsp;values&nbsp;are&nbsp;stored&nbsp;in&nbsp;the&nbsp;parseState&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="4938168">//&nbsp;They&nbsp;give&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;a&nbsp;composite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="4938220">//&nbsp;being&nbsp;scanned.&nbsp;&nbsp;If&nbsp;the&nbsp;parser&nbsp;is&nbsp;inside&nbsp;a&nbsp;nested&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="4938278">//&nbsp;the&nbsp;parseState&nbsp;describes&nbsp;the&nbsp;nested&nbsp;state,&nbsp;outermost&nbsp;at&nbsp;entry&nbsp;0.</span><br>
<span class="lineno">130</span><span class="keyword" id="4938346">const</span>&nbsp;<span class="op" id="4938352">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4938355">parseObjectKey</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4938372">=</span>&nbsp;<span class="ident" id="4938374">iota</span>&nbsp;<span class="comment" id="4938379">//&nbsp;parsing&nbsp;object&nbsp;key&nbsp;(before&nbsp;colon)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4938417">parseObjectValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4938441">//&nbsp;parsing&nbsp;object&nbsp;value&nbsp;(after&nbsp;colon)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4938480">parseArrayValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4938504">//&nbsp;parsing&nbsp;array&nbsp;value</span><br>
<span class="lineno"></span><span class="op" id="4938527">)</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4938530">//&nbsp;reset&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;for&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="4938569">//&nbsp;It&nbsp;must&nbsp;be&nbsp;called&nbsp;before&nbsp;calling&nbsp;s.step.</span><br>
<span class="lineno"></span><span class="keyword" id="4938613">func</span>&nbsp;<span class="op" id="4938618">(</span><span class="ident" id="4938619">s</span>&nbsp;<span class="op" id="4938621">*</span><span class="ident" id="4938622">scanner</span><span class="op" id="4938629">)</span>&nbsp;<span class="ident" id="4938631">reset</span><span class="op" id="4938636">(</span><span class="op" id="4938637">)</span>&nbsp;<span class="op" id="4938639">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4938642">s</span><span class="op" id="4938643">.</span><span class="ident" id="4938644">step</span>&nbsp;<span class="op" id="4938649">=</span>&nbsp;<span class="ident" id="4938651">stateBeginValue</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4938668">s</span><span class="op" id="4938669">.</span><span class="ident" id="4938670">parseState</span>&nbsp;<span class="op" id="4938681">=</span>&nbsp;<span class="ident" id="4938683">s</span><span class="op" id="4938684">.</span><span class="ident" id="4938685">parseState</span><span class="op" id="4938695">[</span><span class="num" id="4938696">0</span><span class="op" id="4938697">:</span><span class="num" id="4938698">0</span><span class="op" id="4938699">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4938702">s</span><span class="op" id="4938703">.</span><span class="ident" id="4938704">err</span>&nbsp;<span class="op" id="4938708">=</span>&nbsp;<span class="ident" id="4938710">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4938715">s</span><span class="op" id="4938716">.</span><span class="ident" id="4938717">redo</span>&nbsp;<span class="op" id="4938722">=</span>&nbsp;<span class="builtintype" id="4938724">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4938731">s</span><span class="op" id="4938732">.</span><span class="ident" id="4938733">endTop</span>&nbsp;<span class="op" id="4938740">=</span>&nbsp;<span class="builtintype" id="4938742">false</span><br>
<span class="lineno"></span><span class="op" id="4938748">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="4938751">//&nbsp;eof&nbsp;tells&nbsp;the&nbsp;scanner&nbsp;that&nbsp;the&nbsp;end&nbsp;of&nbsp;input&nbsp;has&nbsp;been&nbsp;reached.</span><br>
<span class="lineno"></span><span class="comment" id="4938816">//&nbsp;It&nbsp;returns&nbsp;a&nbsp;scan&nbsp;status&nbsp;just&nbsp;as&nbsp;s.step&nbsp;does.</span><br>
<span class="lineno"></span><span class="keyword" id="4938865">func</span>&nbsp;<span class="op" id="4938870">(</span><span class="ident" id="4938871">s</span>&nbsp;<span class="op" id="4938873">*</span><span class="ident" id="4938874">scanner</span><span class="op" id="4938881">)</span>&nbsp;<span class="ident" id="4938883">eof</span><span class="op" id="4938886">(</span><span class="op" id="4938887">)</span>&nbsp;<span class="builtintype" id="4938889">int</span>&nbsp;<span class="op" id="4938893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4938896">if</span>&nbsp;<span class="ident" id="4938899">s</span><span class="op" id="4938900">.</span><span class="ident" id="4938901">err</span>&nbsp;<span class="op" id="4938905">!=</span>&nbsp;<span class="ident" id="4938908">nil</span>&nbsp;<span class="op" id="4938912">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4938916">return</span>&nbsp;<span class="ident" id="4938923">scanError</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4938934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4938937">if</span>&nbsp;<span class="ident" id="4938940">s</span><span class="op" id="4938941">.</span><span class="ident" id="4938942">endTop</span>&nbsp;<span class="op" id="4938949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4938953">return</span>&nbsp;<span class="ident" id="4938960">scanEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4938969">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4938972">s</span><span class="op" id="4938973">.</span><span class="ident" id="4938974">step</span><span class="op" id="4938978">(</span><span class="ident" id="4938979">s</span><span class="op" id="4938980">,</span>&nbsp;<span class="string" id="4938982">&#39;&nbsp;&#39;</span><span class="op" id="4938985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4938988">if</span>&nbsp;<span class="ident" id="4938991">s</span><span class="op" id="4938992">.</span><span class="ident" id="4938993">endTop</span>&nbsp;<span class="op" id="4939000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4939004">return</span>&nbsp;<span class="ident" id="4939011">scanEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4939020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4939023">if</span>&nbsp;<span class="ident" id="4939026">s</span><span class="op" id="4939027">.</span><span class="ident" id="4939028">err</span>&nbsp;<span class="op" id="4939032">==</span>&nbsp;<span class="ident" id="4939035">nil</span>&nbsp;<span class="op" id="4939039">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4939043">s</span><span class="op" id="4939044">.</span><span class="ident" id="4939045">err</span>&nbsp;<span class="op" id="4939049">=</span>&nbsp;<span class="op" id="4939051">&amp;</span><span class="ident" id="4939052">SyntaxError</span><span class="op" id="4939063">{</span><span class="string" id="4939064">&#34;unexpected&nbsp;end&nbsp;of&nbsp;JSON&nbsp;input&#34;</span><span class="op" id="4939094">,</span>&nbsp;<span class="ident" id="4939096">s</span><span class="op" id="4939097">.</span><span class="ident" id="4939098">bytes</span><span class="op" id="4939103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4939106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4939109">return</span>&nbsp;<span class="ident" id="4939116">scanError</span><br>
<span class="lineno"></span><span class="op" id="4939126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="4939129">//&nbsp;pushParseState&nbsp;pushes&nbsp;a&nbsp;new&nbsp;parse&nbsp;state&nbsp;p&nbsp;onto&nbsp;the&nbsp;parse&nbsp;stack.</span><br>
<span class="lineno"></span><span class="keyword" id="4939196">func</span>&nbsp;<span class="op" id="4939201">(</span><span class="ident" id="4939202">s</span>&nbsp;<span class="op" id="4939204">*</span><span class="ident" id="4939205">scanner</span><span class="op" id="4939212">)</span>&nbsp;<span class="ident" id="4939214">pushParseState</span><span class="op" id="4939228">(</span><span class="ident" id="4939229">p</span>&nbsp;<span class="builtintype" id="4939231">int</span><span class="op" id="4939234">)</span>&nbsp;<span class="op" id="4939236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4939239">s</span><span class="op" id="4939240">.</span><span class="ident" id="4939241">parseState</span>&nbsp;<span class="op" id="4939252">=</span>&nbsp;<span class="builtinfunc" id="4939254">append</span><span class="op" id="4939260">(</span><span class="ident" id="4939261">s</span><span class="op" id="4939262">.</span><span class="ident" id="4939263">parseState</span><span class="op" id="4939273">,</span>&nbsp;<span class="ident" id="4939275">p</span><span class="op" id="4939276">)</span><br>
<span class="lineno"></span><span class="op" id="4939278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="comment" id="4939281">//&nbsp;popParseState&nbsp;pops&nbsp;a&nbsp;parse&nbsp;state&nbsp;(already&nbsp;obtained)&nbsp;off&nbsp;the&nbsp;stack</span><br>
<span class="lineno"></span><span class="comment" id="4939350">//&nbsp;and&nbsp;updates&nbsp;s.step&nbsp;accordingly.</span><br>
<span class="lineno"></span><span class="keyword" id="4939385">func</span>&nbsp;<span class="op" id="4939390">(</span><span class="ident" id="4939391">s</span>&nbsp;<span class="op" id="4939393">*</span><span class="ident" id="4939394">scanner</span><span class="op" id="4939401">)</span>&nbsp;<span class="ident" id="4939403">popParseState</span><span class="op" id="4939416">(</span><span class="op" id="4939417">)</span>&nbsp;<span class="op" id="4939419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4939422">n</span>&nbsp;<span class="op" id="4939424">:=</span>&nbsp;<span class="builtinfunc" id="4939427">len</span><span class="op" id="4939430">(</span><span class="ident" id="4939431">s</span><span class="op" id="4939432">.</span><span class="ident" id="4939433">parseState</span><span class="op" id="4939443">)</span>&nbsp;<span class="op" id="4939445">-</span>&nbsp;<span class="num" id="4939447">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4939450">s</span><span class="op" id="4939451">.</span><span class="ident" id="4939452">parseState</span>&nbsp;<span class="op" id="4939463">=</span>&nbsp;<span class="ident" id="4939465">s</span><span class="op" id="4939466">.</span><span class="ident" id="4939467">parseState</span><span class="op" id="4939477">[</span><span class="num" id="4939478">0</span><span class="op" id="4939479">:</span><span class="ident" id="4939480">n</span><span class="op" id="4939481">]</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4939484">s</span><span class="op" id="4939485">.</span><span class="ident" id="4939486">redo</span>&nbsp;<span class="op" id="4939491">=</span>&nbsp;<span class="builtintype" id="4939493">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4939500">if</span>&nbsp;<span class="ident" id="4939503">n</span>&nbsp;<span class="op" id="4939505">==</span>&nbsp;<span class="num" id="4939508">0</span>&nbsp;<span class="op" id="4939510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4939514">s</span><span class="op" id="4939515">.</span><span class="ident" id="4939516">step</span>&nbsp;<span class="op" id="4939521">=</span>&nbsp;<span class="ident" id="4939523">stateEndTop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4939537">s</span><span class="op" id="4939538">.</span><span class="ident" id="4939539">endTop</span>&nbsp;<span class="op" id="4939546">=</span>&nbsp;<span class="builtintype" id="4939548">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4939554">}</span>&nbsp;<span class="keyword" id="4939556">else</span>&nbsp;<span class="op" id="4939561">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4939565">s</span><span class="op" id="4939566">.</span><span class="ident" id="4939567">step</span>&nbsp;<span class="op" id="4939572">=</span>&nbsp;<span class="ident" id="4939574">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4939589">}</span><br>
<span class="lineno"></span><span class="op" id="4939591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4939594">func</span>&nbsp;<span class="ident" id="4939599">isSpace</span><span class="op" id="4939606">(</span><span class="ident" id="4939607">c</span>&nbsp;<span class="builtintype" id="4939609">rune</span><span class="op" id="4939613">)</span>&nbsp;<span class="builtintype" id="4939615">bool</span>&nbsp;<span class="op" id="4939620">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4939623">return</span>&nbsp;<span class="ident" id="4939630">c</span>&nbsp;<span class="op" id="4939632">==</span>&nbsp;<span class="string" id="4939635">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4939639">||</span>&nbsp;<span class="ident" id="4939642">c</span>&nbsp;<span class="op" id="4939644">==</span>&nbsp;<span class="string" id="4939647">&#39;\t&#39;</span>&nbsp;<span class="op" id="4939652">||</span>&nbsp;<span class="ident" id="4939655">c</span>&nbsp;<span class="op" id="4939657">==</span>&nbsp;<span class="string" id="4939660">&#39;\r&#39;</span>&nbsp;<span class="op" id="4939665">||</span>&nbsp;<span class="ident" id="4939668">c</span>&nbsp;<span class="op" id="4939670">==</span>&nbsp;<span class="string" id="4939673">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="4939678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4939681">//&nbsp;stateBeginValueOrEmpty&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`[`.</span><br>
<span class="lineno"></span><span class="keyword" id="4939739">func</span>&nbsp;<span class="ident" id="4939744">stateBeginValueOrEmpty</span><span class="op" id="4939766">(</span><span class="ident" id="4939767">s</span>&nbsp;<span class="op" id="4939769">*</span><span class="ident" id="4939770">scanner</span><span class="op" id="4939777">,</span>&nbsp;<span class="ident" id="4939779">c</span>&nbsp;<span class="builtintype" id="4939781">int</span><span class="op" id="4939784">)</span>&nbsp;<span class="builtintype" id="4939786">int</span>&nbsp;<span class="op" id="4939790">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4939793">if</span>&nbsp;<span class="ident" id="4939796">c</span>&nbsp;<span class="op" id="4939798">&lt;=</span>&nbsp;<span class="string" id="4939801">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4939805">&amp;&amp;</span>&nbsp;<span class="ident" id="4939808">isSpace</span><span class="op" id="4939815">(</span><span class="builtintype" id="4939816">rune</span><span class="op" id="4939820">(</span><span class="ident" id="4939821">c</span><span class="op" id="4939822">)</span><span class="op" id="4939823">)</span>&nbsp;<span class="op" id="4939825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4939829">return</span>&nbsp;<span class="ident" id="4939836">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4939851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4939854">if</span>&nbsp;<span class="ident" id="4939857">c</span>&nbsp;<span class="op" id="4939859">==</span>&nbsp;<span class="string" id="4939862">&#39;]&#39;</span>&nbsp;<span class="op" id="4939866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4939870">return</span>&nbsp;<span class="ident" id="4939877">stateEndValue</span><span class="op" id="4939890">(</span><span class="ident" id="4939891">s</span><span class="op" id="4939892">,</span>&nbsp;<span class="ident" id="4939894">c</span><span class="op" id="4939895">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4939898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4939901">return</span>&nbsp;<span class="ident" id="4939908">stateBeginValue</span><span class="op" id="4939923">(</span><span class="ident" id="4939924">s</span><span class="op" id="4939925">,</span>&nbsp;<span class="ident" id="4939927">c</span><span class="op" id="4939928">)</span><br>
<span class="lineno"></span><span class="op" id="4939930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4939933">//&nbsp;stateBeginValue&nbsp;is&nbsp;the&nbsp;state&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;input.</span><br>
<span class="lineno">200</span><span class="keyword" id="4939996">func</span>&nbsp;<span class="ident" id="4940001">stateBeginValue</span><span class="op" id="4940016">(</span><span class="ident" id="4940017">s</span>&nbsp;<span class="op" id="4940019">*</span><span class="ident" id="4940020">scanner</span><span class="op" id="4940027">,</span>&nbsp;<span class="ident" id="4940029">c</span>&nbsp;<span class="builtintype" id="4940031">int</span><span class="op" id="4940034">)</span>&nbsp;<span class="builtintype" id="4940036">int</span>&nbsp;<span class="op" id="4940040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940043">if</span>&nbsp;<span class="ident" id="4940046">c</span>&nbsp;<span class="op" id="4940048">&lt;=</span>&nbsp;<span class="string" id="4940051">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4940055">&amp;&amp;</span>&nbsp;<span class="ident" id="4940058">isSpace</span><span class="op" id="4940065">(</span><span class="builtintype" id="4940066">rune</span><span class="op" id="4940070">(</span><span class="ident" id="4940071">c</span><span class="op" id="4940072">)</span><span class="op" id="4940073">)</span>&nbsp;<span class="op" id="4940075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940079">return</span>&nbsp;<span class="ident" id="4940086">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4940101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940104">switch</span>&nbsp;<span class="ident" id="4940111">c</span>&nbsp;<span class="op" id="4940113">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940116">case</span>&nbsp;<span class="string" id="4940121">&#39;{&#39;</span><span class="op" id="4940124">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940128">s</span><span class="op" id="4940129">.</span><span class="ident" id="4940130">step</span>&nbsp;<span class="op" id="4940135">=</span>&nbsp;<span class="ident" id="4940137">stateBeginStringOrEmpty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940163">s</span><span class="op" id="4940164">.</span><span class="ident" id="4940165">pushParseState</span><span class="op" id="4940179">(</span><span class="ident" id="4940180">parseObjectKey</span><span class="op" id="4940194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940198">return</span>&nbsp;<span class="ident" id="4940205">scanBeginObject</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940222">case</span>&nbsp;<span class="string" id="4940227">&#39;[&#39;</span><span class="op" id="4940230">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940234">s</span><span class="op" id="4940235">.</span><span class="ident" id="4940236">step</span>&nbsp;<span class="op" id="4940241">=</span>&nbsp;<span class="ident" id="4940243">stateBeginValueOrEmpty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940268">s</span><span class="op" id="4940269">.</span><span class="ident" id="4940270">pushParseState</span><span class="op" id="4940284">(</span><span class="ident" id="4940285">parseArrayValue</span><span class="op" id="4940300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940304">return</span>&nbsp;<span class="ident" id="4940311">scanBeginArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940327">case</span>&nbsp;<span class="string" id="4940332">&#39;&#34;&#39;</span><span class="op" id="4940335">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940339">s</span><span class="op" id="4940340">.</span><span class="ident" id="4940341">step</span>&nbsp;<span class="op" id="4940346">=</span>&nbsp;<span class="ident" id="4940348">stateInString</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940364">return</span>&nbsp;<span class="ident" id="4940371">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940389">case</span>&nbsp;<span class="string" id="4940394">&#39;-&#39;</span><span class="op" id="4940397">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940401">s</span><span class="op" id="4940402">.</span><span class="ident" id="4940403">step</span>&nbsp;<span class="op" id="4940408">=</span>&nbsp;<span class="ident" id="4940410">stateNeg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940421">return</span>&nbsp;<span class="ident" id="4940428">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940446">case</span>&nbsp;<span class="string" id="4940451">&#39;0&#39;</span><span class="op" id="4940454">:</span>&nbsp;<span class="comment" id="4940456">//&nbsp;beginning&nbsp;of&nbsp;0.123</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940480">s</span><span class="op" id="4940481">.</span><span class="ident" id="4940482">step</span>&nbsp;<span class="op" id="4940487">=</span>&nbsp;<span class="ident" id="4940489">state0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940498">return</span>&nbsp;<span class="ident" id="4940505">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940523">case</span>&nbsp;<span class="string" id="4940528">&#39;t&#39;</span><span class="op" id="4940531">:</span>&nbsp;<span class="comment" id="4940533">//&nbsp;beginning&nbsp;of&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940556">s</span><span class="op" id="4940557">.</span><span class="ident" id="4940558">step</span>&nbsp;<span class="op" id="4940563">=</span>&nbsp;<span class="ident" id="4940565">stateT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940574">return</span>&nbsp;<span class="ident" id="4940581">scanBeginLiteral</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940599">case</span>&nbsp;<span class="string" id="4940604">&#39;f&#39;</span><span class="op" id="4940607">:</span>&nbsp;<span class="comment" id="4940609">//&nbsp;beginning&nbsp;of&nbsp;false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940633">s</span><span class="op" id="4940634">.</span><span class="ident" id="4940635">step</span>&nbsp;<span class="op" id="4940640">=</span>&nbsp;<span class="ident" id="4940642">stateF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940651">return</span>&nbsp;<span class="ident" id="4940658">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940676">case</span>&nbsp;<span class="string" id="4940681">&#39;n&#39;</span><span class="op" id="4940684">:</span>&nbsp;<span class="comment" id="4940686">//&nbsp;beginning&nbsp;of&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940709">s</span><span class="op" id="4940710">.</span><span class="ident" id="4940711">step</span>&nbsp;<span class="op" id="4940716">=</span>&nbsp;<span class="ident" id="4940718">stateN</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940727">return</span>&nbsp;<span class="ident" id="4940734">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4940752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940755">if</span>&nbsp;<span class="string" id="4940758">&#39;1&#39;</span>&nbsp;<span class="op" id="4940762">&lt;=</span>&nbsp;<span class="ident" id="4940765">c</span>&nbsp;<span class="op" id="4940767">&amp;&amp;</span>&nbsp;<span class="ident" id="4940770">c</span>&nbsp;<span class="op" id="4940772">&lt;=</span>&nbsp;<span class="string" id="4940775">&#39;9&#39;</span>&nbsp;<span class="op" id="4940779">{</span>&nbsp;<span class="comment" id="4940781">//&nbsp;beginning&nbsp;of&nbsp;1234.5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4940806">s</span><span class="op" id="4940807">.</span><span class="ident" id="4940808">step</span>&nbsp;<span class="op" id="4940813">=</span>&nbsp;<span class="ident" id="4940815">state1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940824">return</span>&nbsp;<span class="ident" id="4940831">scanBeginLiteral</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4940849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4940852">return</span>&nbsp;<span class="ident" id="4940859">s</span><span class="op" id="4940860">.</span><span class="builtintype" id="4940861">error</span><span class="op" id="4940866">(</span><span class="ident" id="4940867">c</span><span class="op" id="4940868">,</span>&nbsp;<span class="string" id="4940870">&#34;looking&nbsp;for&nbsp;beginning&nbsp;of&nbsp;value&#34;</span><span class="op" id="4940902">)</span><br>
<span class="lineno"></span><span class="op" id="4940904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4940907">//&nbsp;stateBeginStringOrEmpty&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`{`.</span><br>
<span class="lineno">240</span><span class="keyword" id="4940966">func</span>&nbsp;<span class="ident" id="4940971">stateBeginStringOrEmpty</span><span class="op" id="4940994">(</span><span class="ident" id="4940995">s</span>&nbsp;<span class="op" id="4940997">*</span><span class="ident" id="4940998">scanner</span><span class="op" id="4941005">,</span>&nbsp;<span class="ident" id="4941007">c</span>&nbsp;<span class="builtintype" id="4941009">int</span><span class="op" id="4941012">)</span>&nbsp;<span class="builtintype" id="4941014">int</span>&nbsp;<span class="op" id="4941018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941021">if</span>&nbsp;<span class="ident" id="4941024">c</span>&nbsp;<span class="op" id="4941026">&lt;=</span>&nbsp;<span class="string" id="4941029">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4941033">&amp;&amp;</span>&nbsp;<span class="ident" id="4941036">isSpace</span><span class="op" id="4941043">(</span><span class="builtintype" id="4941044">rune</span><span class="op" id="4941048">(</span><span class="ident" id="4941049">c</span><span class="op" id="4941050">)</span><span class="op" id="4941051">)</span>&nbsp;<span class="op" id="4941053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941057">return</span>&nbsp;<span class="ident" id="4941064">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4941079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941082">if</span>&nbsp;<span class="ident" id="4941085">c</span>&nbsp;<span class="op" id="4941087">==</span>&nbsp;<span class="string" id="4941090">&#39;}&#39;</span>&nbsp;<span class="op" id="4941094">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4941098">n</span>&nbsp;<span class="op" id="4941100">:=</span>&nbsp;<span class="builtinfunc" id="4941103">len</span><span class="op" id="4941106">(</span><span class="ident" id="4941107">s</span><span class="op" id="4941108">.</span><span class="ident" id="4941109">parseState</span><span class="op" id="4941119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4941123">s</span><span class="op" id="4941124">.</span><span class="ident" id="4941125">parseState</span><span class="op" id="4941135">[</span><span class="ident" id="4941136">n</span><span class="op" id="4941137">-</span><span class="num" id="4941138">1</span><span class="op" id="4941139">]</span>&nbsp;<span class="op" id="4941141">=</span>&nbsp;<span class="ident" id="4941143">parseObjectValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941162">return</span>&nbsp;<span class="ident" id="4941169">stateEndValue</span><span class="op" id="4941182">(</span><span class="ident" id="4941183">s</span><span class="op" id="4941184">,</span>&nbsp;<span class="ident" id="4941186">c</span><span class="op" id="4941187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4941190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941193">return</span>&nbsp;<span class="ident" id="4941200">stateBeginString</span><span class="op" id="4941216">(</span><span class="ident" id="4941217">s</span><span class="op" id="4941218">,</span>&nbsp;<span class="ident" id="4941220">c</span><span class="op" id="4941221">)</span><br>
<span class="lineno">250</span><span class="op" id="4941223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4941226">//&nbsp;stateBeginString&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`{&#34;key&#34;:&nbsp;value,`.</span><br>
<span class="lineno"></span><span class="keyword" id="4941291">func</span>&nbsp;<span class="ident" id="4941296">stateBeginString</span><span class="op" id="4941312">(</span><span class="ident" id="4941313">s</span>&nbsp;<span class="op" id="4941315">*</span><span class="ident" id="4941316">scanner</span><span class="op" id="4941323">,</span>&nbsp;<span class="ident" id="4941325">c</span>&nbsp;<span class="builtintype" id="4941327">int</span><span class="op" id="4941330">)</span>&nbsp;<span class="builtintype" id="4941332">int</span>&nbsp;<span class="op" id="4941336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941339">if</span>&nbsp;<span class="ident" id="4941342">c</span>&nbsp;<span class="op" id="4941344">&lt;=</span>&nbsp;<span class="string" id="4941347">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4941351">&amp;&amp;</span>&nbsp;<span class="ident" id="4941354">isSpace</span><span class="op" id="4941361">(</span><span class="builtintype" id="4941362">rune</span><span class="op" id="4941366">(</span><span class="ident" id="4941367">c</span><span class="op" id="4941368">)</span><span class="op" id="4941369">)</span>&nbsp;<span class="op" id="4941371">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941375">return</span>&nbsp;<span class="ident" id="4941382">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4941397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941400">if</span>&nbsp;<span class="ident" id="4941403">c</span>&nbsp;<span class="op" id="4941405">==</span>&nbsp;<span class="string" id="4941408">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4941412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4941416">s</span><span class="op" id="4941417">.</span><span class="ident" id="4941418">step</span>&nbsp;<span class="op" id="4941423">=</span>&nbsp;<span class="ident" id="4941425">stateInString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941441">return</span>&nbsp;<span class="ident" id="4941448">scanBeginLiteral</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4941466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941469">return</span>&nbsp;<span class="ident" id="4941476">s</span><span class="op" id="4941477">.</span><span class="builtintype" id="4941478">error</span><span class="op" id="4941483">(</span><span class="ident" id="4941484">c</span><span class="op" id="4941485">,</span>&nbsp;<span class="string" id="4941487">&#34;looking&nbsp;for&nbsp;beginning&nbsp;of&nbsp;object&nbsp;key&nbsp;string&#34;</span><span class="op" id="4941531">)</span><br>
<span class="lineno"></span><span class="op" id="4941533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4941536">//&nbsp;stateEndValue&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;completing&nbsp;a&nbsp;value,</span><br>
<span class="lineno">265</span><span class="comment" id="4941592">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`{}`&nbsp;or&nbsp;`true`&nbsp;or&nbsp;`[&#34;x&#34;`.</span><br>
<span class="lineno"></span><span class="keyword" id="4941643">func</span>&nbsp;<span class="ident" id="4941648">stateEndValue</span><span class="op" id="4941661">(</span><span class="ident" id="4941662">s</span>&nbsp;<span class="op" id="4941664">*</span><span class="ident" id="4941665">scanner</span><span class="op" id="4941672">,</span>&nbsp;<span class="ident" id="4941674">c</span>&nbsp;<span class="builtintype" id="4941676">int</span><span class="op" id="4941679">)</span>&nbsp;<span class="builtintype" id="4941681">int</span>&nbsp;<span class="op" id="4941685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4941688">n</span>&nbsp;<span class="op" id="4941690">:=</span>&nbsp;<span class="builtinfunc" id="4941693">len</span><span class="op" id="4941696">(</span><span class="ident" id="4941697">s</span><span class="op" id="4941698">.</span><span class="ident" id="4941699">parseState</span><span class="op" id="4941709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941712">if</span>&nbsp;<span class="ident" id="4941715">n</span>&nbsp;<span class="op" id="4941717">==</span>&nbsp;<span class="num" id="4941720">0</span>&nbsp;<span class="op" id="4941722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4941726">//&nbsp;Completed&nbsp;top-level&nbsp;before&nbsp;the&nbsp;current&nbsp;byte.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4941776">s</span><span class="op" id="4941777">.</span><span class="ident" id="4941778">step</span>&nbsp;<span class="op" id="4941783">=</span>&nbsp;<span class="ident" id="4941785">stateEndTop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4941799">s</span><span class="op" id="4941800">.</span><span class="ident" id="4941801">endTop</span>&nbsp;<span class="op" id="4941808">=</span>&nbsp;<span class="builtintype" id="4941810">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941817">return</span>&nbsp;<span class="ident" id="4941824">stateEndTop</span><span class="op" id="4941835">(</span><span class="ident" id="4941836">s</span><span class="op" id="4941837">,</span>&nbsp;<span class="ident" id="4941839">c</span><span class="op" id="4941840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4941843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941846">if</span>&nbsp;<span class="ident" id="4941849">c</span>&nbsp;<span class="op" id="4941851">&lt;=</span>&nbsp;<span class="string" id="4941854">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4941858">&amp;&amp;</span>&nbsp;<span class="ident" id="4941861">isSpace</span><span class="op" id="4941868">(</span><span class="builtintype" id="4941869">rune</span><span class="op" id="4941873">(</span><span class="ident" id="4941874">c</span><span class="op" id="4941875">)</span><span class="op" id="4941876">)</span>&nbsp;<span class="op" id="4941878">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4941882">s</span><span class="op" id="4941883">.</span><span class="ident" id="4941884">step</span>&nbsp;<span class="op" id="4941889">=</span>&nbsp;<span class="ident" id="4941891">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941907">return</span>&nbsp;<span class="ident" id="4941914">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4941929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4941932">ps</span>&nbsp;<span class="op" id="4941935">:=</span>&nbsp;<span class="ident" id="4941938">s</span><span class="op" id="4941939">.</span><span class="ident" id="4941940">parseState</span><span class="op" id="4941950">[</span><span class="ident" id="4941951">n</span><span class="op" id="4941952">-</span><span class="num" id="4941953">1</span><span class="op" id="4941954">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941957">switch</span>&nbsp;<span class="ident" id="4941964">ps</span>&nbsp;<span class="op" id="4941967">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941970">case</span>&nbsp;<span class="ident" id="4941975">parseObjectKey</span><span class="op" id="4941989">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4941993">if</span>&nbsp;<span class="ident" id="4941996">c</span>&nbsp;<span class="op" id="4941998">==</span>&nbsp;<span class="string" id="4942001">&#39;:&#39;</span>&nbsp;<span class="op" id="4942005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4942010">s</span><span class="op" id="4942011">.</span><span class="ident" id="4942012">parseState</span><span class="op" id="4942022">[</span><span class="ident" id="4942023">n</span><span class="op" id="4942024">-</span><span class="num" id="4942025">1</span><span class="op" id="4942026">]</span>&nbsp;<span class="op" id="4942028">=</span>&nbsp;<span class="ident" id="4942030">parseObjectValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4942050">s</span><span class="op" id="4942051">.</span><span class="ident" id="4942052">step</span>&nbsp;<span class="op" id="4942057">=</span>&nbsp;<span class="ident" id="4942059">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942078">return</span>&nbsp;<span class="ident" id="4942085">scanObjectKey</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4942101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942105">return</span>&nbsp;<span class="ident" id="4942112">s</span><span class="op" id="4942113">.</span><span class="builtintype" id="4942114">error</span><span class="op" id="4942119">(</span><span class="ident" id="4942120">c</span><span class="op" id="4942121">,</span>&nbsp;<span class="string" id="4942123">&#34;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="4942141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942144">case</span>&nbsp;<span class="ident" id="4942149">parseObjectValue</span><span class="op" id="4942165">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942169">if</span>&nbsp;<span class="ident" id="4942172">c</span>&nbsp;<span class="op" id="4942174">==</span>&nbsp;<span class="string" id="4942177">&#39;,&#39;</span>&nbsp;<span class="op" id="4942181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4942186">s</span><span class="op" id="4942187">.</span><span class="ident" id="4942188">parseState</span><span class="op" id="4942198">[</span><span class="ident" id="4942199">n</span><span class="op" id="4942200">-</span><span class="num" id="4942201">1</span><span class="op" id="4942202">]</span>&nbsp;<span class="op" id="4942204">=</span>&nbsp;<span class="ident" id="4942206">parseObjectKey</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4942224">s</span><span class="op" id="4942225">.</span><span class="ident" id="4942226">step</span>&nbsp;<span class="op" id="4942231">=</span>&nbsp;<span class="ident" id="4942233">stateBeginString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942253">return</span>&nbsp;<span class="ident" id="4942260">scanObjectValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4942278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942282">if</span>&nbsp;<span class="ident" id="4942285">c</span>&nbsp;<span class="op" id="4942287">==</span>&nbsp;<span class="string" id="4942290">&#39;}&#39;</span>&nbsp;<span class="op" id="4942294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4942299">s</span><span class="op" id="4942300">.</span><span class="ident" id="4942301">popParseState</span><span class="op" id="4942314">(</span><span class="op" id="4942315">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942320">return</span>&nbsp;<span class="ident" id="4942327">scanEndObject</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4942343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942347">return</span>&nbsp;<span class="ident" id="4942354">s</span><span class="op" id="4942355">.</span><span class="builtintype" id="4942356">error</span><span class="op" id="4942361">(</span><span class="ident" id="4942362">c</span><span class="op" id="4942363">,</span>&nbsp;<span class="string" id="4942365">&#34;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="4942394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942397">case</span>&nbsp;<span class="ident" id="4942402">parseArrayValue</span><span class="op" id="4942417">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942421">if</span>&nbsp;<span class="ident" id="4942424">c</span>&nbsp;<span class="op" id="4942426">==</span>&nbsp;<span class="string" id="4942429">&#39;,&#39;</span>&nbsp;<span class="op" id="4942433">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4942438">s</span><span class="op" id="4942439">.</span><span class="ident" id="4942440">step</span>&nbsp;<span class="op" id="4942445">=</span>&nbsp;<span class="ident" id="4942447">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942466">return</span>&nbsp;<span class="ident" id="4942473">scanArrayValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4942490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942494">if</span>&nbsp;<span class="ident" id="4942497">c</span>&nbsp;<span class="op" id="4942499">==</span>&nbsp;<span class="string" id="4942502">&#39;]&#39;</span>&nbsp;<span class="op" id="4942506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4942511">s</span><span class="op" id="4942512">.</span><span class="ident" id="4942513">popParseState</span><span class="op" id="4942526">(</span><span class="op" id="4942527">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942532">return</span>&nbsp;<span class="ident" id="4942539">scanEndArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4942554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942558">return</span>&nbsp;<span class="ident" id="4942565">s</span><span class="op" id="4942566">.</span><span class="builtintype" id="4942567">error</span><span class="op" id="4942572">(</span><span class="ident" id="4942573">c</span><span class="op" id="4942574">,</span>&nbsp;<span class="string" id="4942576">&#34;after&nbsp;array&nbsp;element&#34;</span><span class="op" id="4942597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4942600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942603">return</span>&nbsp;<span class="ident" id="4942610">s</span><span class="op" id="4942611">.</span><span class="builtintype" id="4942612">error</span><span class="op" id="4942617">(</span><span class="ident" id="4942618">c</span><span class="op" id="4942619">,</span>&nbsp;<span class="string" id="4942621">&#34;&#34;</span><span class="op" id="4942623">)</span><br>
<span class="lineno">310</span><span class="op" id="4942625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4942628">//&nbsp;stateEndTop&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;finishing&nbsp;the&nbsp;top-level&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="4942693">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`{}`&nbsp;or&nbsp;`[1,2,3]`.</span><br>
<span class="lineno"></span><span class="comment" id="4942737">//&nbsp;Only&nbsp;space&nbsp;characters&nbsp;should&nbsp;be&nbsp;seen&nbsp;now.</span><br>
<span class="lineno">315</span><span class="keyword" id="4942782">func</span>&nbsp;<span class="ident" id="4942787">stateEndTop</span><span class="op" id="4942798">(</span><span class="ident" id="4942799">s</span>&nbsp;<span class="op" id="4942801">*</span><span class="ident" id="4942802">scanner</span><span class="op" id="4942809">,</span>&nbsp;<span class="ident" id="4942811">c</span>&nbsp;<span class="builtintype" id="4942813">int</span><span class="op" id="4942816">)</span>&nbsp;<span class="builtintype" id="4942818">int</span>&nbsp;<span class="op" id="4942822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942825">if</span>&nbsp;<span class="ident" id="4942828">c</span>&nbsp;<span class="op" id="4942830">!=</span>&nbsp;<span class="string" id="4942833">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4942837">&amp;&amp;</span>&nbsp;<span class="ident" id="4942840">c</span>&nbsp;<span class="op" id="4942842">!=</span>&nbsp;<span class="string" id="4942845">&#39;\t&#39;</span>&nbsp;<span class="op" id="4942850">&amp;&amp;</span>&nbsp;<span class="ident" id="4942853">c</span>&nbsp;<span class="op" id="4942855">!=</span>&nbsp;<span class="string" id="4942858">&#39;\r&#39;</span>&nbsp;<span class="op" id="4942863">&amp;&amp;</span>&nbsp;<span class="ident" id="4942866">c</span>&nbsp;<span class="op" id="4942868">!=</span>&nbsp;<span class="string" id="4942871">&#39;\n&#39;</span>&nbsp;<span class="op" id="4942876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4942880">//&nbsp;Complain&nbsp;about&nbsp;non-space&nbsp;byte&nbsp;on&nbsp;next&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4942929">s</span><span class="op" id="4942930">.</span><span class="builtintype" id="4942931">error</span><span class="op" id="4942936">(</span><span class="ident" id="4942937">c</span><span class="op" id="4942938">,</span>&nbsp;<span class="string" id="4942940">&#34;after&nbsp;top-level&nbsp;value&#34;</span><span class="op" id="4942963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4942966">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4942969">return</span>&nbsp;<span class="ident" id="4942976">scanEnd</span><br>
<span class="lineno"></span><span class="op" id="4942984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4942987">//&nbsp;stateInString&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;`.</span><br>
<span class="lineno"></span><span class="keyword" id="4943036">func</span>&nbsp;<span class="ident" id="4943041">stateInString</span><span class="op" id="4943054">(</span><span class="ident" id="4943055">s</span>&nbsp;<span class="op" id="4943057">*</span><span class="ident" id="4943058">scanner</span><span class="op" id="4943065">,</span>&nbsp;<span class="ident" id="4943067">c</span>&nbsp;<span class="builtintype" id="4943069">int</span><span class="op" id="4943072">)</span>&nbsp;<span class="builtintype" id="4943074">int</span>&nbsp;<span class="op" id="4943078">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943081">if</span>&nbsp;<span class="ident" id="4943084">c</span>&nbsp;<span class="op" id="4943086">==</span>&nbsp;<span class="string" id="4943089">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4943093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4943097">s</span><span class="op" id="4943098">.</span><span class="ident" id="4943099">step</span>&nbsp;<span class="op" id="4943104">=</span>&nbsp;<span class="ident" id="4943106">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943122">return</span>&nbsp;<span class="ident" id="4943129">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4943143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943146">if</span>&nbsp;<span class="ident" id="4943149">c</span>&nbsp;<span class="op" id="4943151">==</span>&nbsp;<span class="string" id="4943154">&#39;\\&#39;</span>&nbsp;<span class="op" id="4943159">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4943163">s</span><span class="op" id="4943164">.</span><span class="ident" id="4943165">step</span>&nbsp;<span class="op" id="4943170">=</span>&nbsp;<span class="ident" id="4943172">stateInStringEsc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943191">return</span>&nbsp;<span class="ident" id="4943198">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4943212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943215">if</span>&nbsp;<span class="ident" id="4943218">c</span>&nbsp;<span class="op" id="4943220">&lt;</span>&nbsp;<span class="num" id="4943222">0x20</span>&nbsp;<span class="op" id="4943227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943231">return</span>&nbsp;<span class="ident" id="4943238">s</span><span class="op" id="4943239">.</span><span class="builtintype" id="4943240">error</span><span class="op" id="4943245">(</span><span class="ident" id="4943246">c</span><span class="op" id="4943247">,</span>&nbsp;<span class="string" id="4943249">&#34;in&nbsp;string&nbsp;literal&#34;</span><span class="op" id="4943268">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4943271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943274">return</span>&nbsp;<span class="ident" id="4943281">scanContinue</span><br>
<span class="lineno"></span><span class="op" id="4943294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4943297">//&nbsp;stateInStringEsc&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno">340</span><span class="keyword" id="4943373">func</span>&nbsp;<span class="ident" id="4943378">stateInStringEsc</span><span class="op" id="4943394">(</span><span class="ident" id="4943395">s</span>&nbsp;<span class="op" id="4943397">*</span><span class="ident" id="4943398">scanner</span><span class="op" id="4943405">,</span>&nbsp;<span class="ident" id="4943407">c</span>&nbsp;<span class="builtintype" id="4943409">int</span><span class="op" id="4943412">)</span>&nbsp;<span class="builtintype" id="4943414">int</span>&nbsp;<span class="op" id="4943418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943421">switch</span>&nbsp;<span class="ident" id="4943428">c</span>&nbsp;<span class="op" id="4943430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943433">case</span>&nbsp;<span class="string" id="4943438">&#39;b&#39;</span><span class="op" id="4943441">,</span>&nbsp;<span class="string" id="4943443">&#39;f&#39;</span><span class="op" id="4943446">,</span>&nbsp;<span class="string" id="4943448">&#39;n&#39;</span><span class="op" id="4943451">,</span>&nbsp;<span class="string" id="4943453">&#39;r&#39;</span><span class="op" id="4943456">,</span>&nbsp;<span class="string" id="4943458">&#39;t&#39;</span><span class="op" id="4943461">,</span>&nbsp;<span class="string" id="4943463">&#39;\\&#39;</span><span class="op" id="4943467">,</span>&nbsp;<span class="string" id="4943469">&#39;/&#39;</span><span class="op" id="4943472">,</span>&nbsp;<span class="string" id="4943474">&#39;&#34;&#39;</span><span class="op" id="4943477">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4943481">s</span><span class="op" id="4943482">.</span><span class="ident" id="4943483">step</span>&nbsp;<span class="op" id="4943488">=</span>&nbsp;<span class="ident" id="4943490">stateInString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943506">return</span>&nbsp;<span class="ident" id="4943513">scanContinue</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4943527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943530">if</span>&nbsp;<span class="ident" id="4943533">c</span>&nbsp;<span class="op" id="4943535">==</span>&nbsp;<span class="string" id="4943538">&#39;u&#39;</span>&nbsp;<span class="op" id="4943542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4943546">s</span><span class="op" id="4943547">.</span><span class="ident" id="4943548">step</span>&nbsp;<span class="op" id="4943553">=</span>&nbsp;<span class="ident" id="4943555">stateInStringEscU</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943575">return</span>&nbsp;<span class="ident" id="4943582">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4943596">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943599">return</span>&nbsp;<span class="ident" id="4943606">s</span><span class="op" id="4943607">.</span><span class="builtintype" id="4943608">error</span><span class="op" id="4943613">(</span><span class="ident" id="4943614">c</span><span class="op" id="4943615">,</span>&nbsp;<span class="string" id="4943617">&#34;in&nbsp;string&nbsp;escape&nbsp;code&#34;</span><span class="op" id="4943640">)</span><br>
<span class="lineno"></span><span class="op" id="4943642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4943645">//&nbsp;stateInStringEscU&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4943723">func</span>&nbsp;<span class="ident" id="4943728">stateInStringEscU</span><span class="op" id="4943745">(</span><span class="ident" id="4943746">s</span>&nbsp;<span class="op" id="4943748">*</span><span class="ident" id="4943749">scanner</span><span class="op" id="4943756">,</span>&nbsp;<span class="ident" id="4943758">c</span>&nbsp;<span class="builtintype" id="4943760">int</span><span class="op" id="4943763">)</span>&nbsp;<span class="builtintype" id="4943765">int</span>&nbsp;<span class="op" id="4943769">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943772">if</span>&nbsp;<span class="string" id="4943775">&#39;0&#39;</span>&nbsp;<span class="op" id="4943779">&lt;=</span>&nbsp;<span class="ident" id="4943782">c</span>&nbsp;<span class="op" id="4943784">&amp;&amp;</span>&nbsp;<span class="ident" id="4943787">c</span>&nbsp;<span class="op" id="4943789">&lt;=</span>&nbsp;<span class="string" id="4943792">&#39;9&#39;</span>&nbsp;<span class="op" id="4943796">||</span>&nbsp;<span class="string" id="4943799">&#39;a&#39;</span>&nbsp;<span class="op" id="4943803">&lt;=</span>&nbsp;<span class="ident" id="4943806">c</span>&nbsp;<span class="op" id="4943808">&amp;&amp;</span>&nbsp;<span class="ident" id="4943811">c</span>&nbsp;<span class="op" id="4943813">&lt;=</span>&nbsp;<span class="string" id="4943816">&#39;f&#39;</span>&nbsp;<span class="op" id="4943820">||</span>&nbsp;<span class="string" id="4943823">&#39;A&#39;</span>&nbsp;<span class="op" id="4943827">&lt;=</span>&nbsp;<span class="ident" id="4943830">c</span>&nbsp;<span class="op" id="4943832">&amp;&amp;</span>&nbsp;<span class="ident" id="4943835">c</span>&nbsp;<span class="op" id="4943837">&lt;=</span>&nbsp;<span class="string" id="4943840">&#39;F&#39;</span>&nbsp;<span class="op" id="4943844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4943848">s</span><span class="op" id="4943849">.</span><span class="ident" id="4943850">step</span>&nbsp;<span class="op" id="4943855">=</span>&nbsp;<span class="ident" id="4943857">stateInStringEscU1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943878">return</span>&nbsp;<span class="ident" id="4943885">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4943899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4943902">//&nbsp;numbers</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4943914">return</span>&nbsp;<span class="ident" id="4943921">s</span><span class="op" id="4943922">.</span><span class="builtintype" id="4943923">error</span><span class="op" id="4943928">(</span><span class="ident" id="4943929">c</span><span class="op" id="4943930">,</span>&nbsp;<span class="string" id="4943932">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="4943969">)</span><br>
<span class="lineno"></span><span class="op" id="4943971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4943974">//&nbsp;stateInStringEscU1&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u1`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4944054">func</span>&nbsp;<span class="ident" id="4944059">stateInStringEscU1</span><span class="op" id="4944077">(</span><span class="ident" id="4944078">s</span>&nbsp;<span class="op" id="4944080">*</span><span class="ident" id="4944081">scanner</span><span class="op" id="4944088">,</span>&nbsp;<span class="ident" id="4944090">c</span>&nbsp;<span class="builtintype" id="4944092">int</span><span class="op" id="4944095">)</span>&nbsp;<span class="builtintype" id="4944097">int</span>&nbsp;<span class="op" id="4944101">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4944104">if</span>&nbsp;<span class="string" id="4944107">&#39;0&#39;</span>&nbsp;<span class="op" id="4944111">&lt;=</span>&nbsp;<span class="ident" id="4944114">c</span>&nbsp;<span class="op" id="4944116">&amp;&amp;</span>&nbsp;<span class="ident" id="4944119">c</span>&nbsp;<span class="op" id="4944121">&lt;=</span>&nbsp;<span class="string" id="4944124">&#39;9&#39;</span>&nbsp;<span class="op" id="4944128">||</span>&nbsp;<span class="string" id="4944131">&#39;a&#39;</span>&nbsp;<span class="op" id="4944135">&lt;=</span>&nbsp;<span class="ident" id="4944138">c</span>&nbsp;<span class="op" id="4944140">&amp;&amp;</span>&nbsp;<span class="ident" id="4944143">c</span>&nbsp;<span class="op" id="4944145">&lt;=</span>&nbsp;<span class="string" id="4944148">&#39;f&#39;</span>&nbsp;<span class="op" id="4944152">||</span>&nbsp;<span class="string" id="4944155">&#39;A&#39;</span>&nbsp;<span class="op" id="4944159">&lt;=</span>&nbsp;<span class="ident" id="4944162">c</span>&nbsp;<span class="op" id="4944164">&amp;&amp;</span>&nbsp;<span class="ident" id="4944167">c</span>&nbsp;<span class="op" id="4944169">&lt;=</span>&nbsp;<span class="string" id="4944172">&#39;F&#39;</span>&nbsp;<span class="op" id="4944176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4944180">s</span><span class="op" id="4944181">.</span><span class="ident" id="4944182">step</span>&nbsp;<span class="op" id="4944187">=</span>&nbsp;<span class="ident" id="4944189">stateInStringEscU12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4944211">return</span>&nbsp;<span class="ident" id="4944218">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4944232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4944235">//&nbsp;numbers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4944247">return</span>&nbsp;<span class="ident" id="4944254">s</span><span class="op" id="4944255">.</span><span class="builtintype" id="4944256">error</span><span class="op" id="4944261">(</span><span class="ident" id="4944262">c</span><span class="op" id="4944263">,</span>&nbsp;<span class="string" id="4944265">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="4944302">)</span><br>
<span class="lineno"></span><span class="op" id="4944304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4944307">//&nbsp;stateInStringEscU12&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u12`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4944389">func</span>&nbsp;<span class="ident" id="4944394">stateInStringEscU12</span><span class="op" id="4944413">(</span><span class="ident" id="4944414">s</span>&nbsp;<span class="op" id="4944416">*</span><span class="ident" id="4944417">scanner</span><span class="op" id="4944424">,</span>&nbsp;<span class="ident" id="4944426">c</span>&nbsp;<span class="builtintype" id="4944428">int</span><span class="op" id="4944431">)</span>&nbsp;<span class="builtintype" id="4944433">int</span>&nbsp;<span class="op" id="4944437">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4944440">if</span>&nbsp;<span class="string" id="4944443">&#39;0&#39;</span>&nbsp;<span class="op" id="4944447">&lt;=</span>&nbsp;<span class="ident" id="4944450">c</span>&nbsp;<span class="op" id="4944452">&amp;&amp;</span>&nbsp;<span class="ident" id="4944455">c</span>&nbsp;<span class="op" id="4944457">&lt;=</span>&nbsp;<span class="string" id="4944460">&#39;9&#39;</span>&nbsp;<span class="op" id="4944464">||</span>&nbsp;<span class="string" id="4944467">&#39;a&#39;</span>&nbsp;<span class="op" id="4944471">&lt;=</span>&nbsp;<span class="ident" id="4944474">c</span>&nbsp;<span class="op" id="4944476">&amp;&amp;</span>&nbsp;<span class="ident" id="4944479">c</span>&nbsp;<span class="op" id="4944481">&lt;=</span>&nbsp;<span class="string" id="4944484">&#39;f&#39;</span>&nbsp;<span class="op" id="4944488">||</span>&nbsp;<span class="string" id="4944491">&#39;A&#39;</span>&nbsp;<span class="op" id="4944495">&lt;=</span>&nbsp;<span class="ident" id="4944498">c</span>&nbsp;<span class="op" id="4944500">&amp;&amp;</span>&nbsp;<span class="ident" id="4944503">c</span>&nbsp;<span class="op" id="4944505">&lt;=</span>&nbsp;<span class="string" id="4944508">&#39;F&#39;</span>&nbsp;<span class="op" id="4944512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4944516">s</span><span class="op" id="4944517">.</span><span class="ident" id="4944518">step</span>&nbsp;<span class="op" id="4944523">=</span>&nbsp;<span class="ident" id="4944525">stateInStringEscU123</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4944548">return</span>&nbsp;<span class="ident" id="4944555">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4944569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4944572">//&nbsp;numbers</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4944584">return</span>&nbsp;<span class="ident" id="4944591">s</span><span class="op" id="4944592">.</span><span class="builtintype" id="4944593">error</span><span class="op" id="4944598">(</span><span class="ident" id="4944599">c</span><span class="op" id="4944600">,</span>&nbsp;<span class="string" id="4944602">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="4944639">)</span><br>
<span class="lineno"></span><span class="op" id="4944641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4944644">//&nbsp;stateInStringEscU123&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u123`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4944728">func</span>&nbsp;<span class="ident" id="4944733">stateInStringEscU123</span><span class="op" id="4944753">(</span><span class="ident" id="4944754">s</span>&nbsp;<span class="op" id="4944756">*</span><span class="ident" id="4944757">scanner</span><span class="op" id="4944764">,</span>&nbsp;<span class="ident" id="4944766">c</span>&nbsp;<span class="builtintype" id="4944768">int</span><span class="op" id="4944771">)</span>&nbsp;<span class="builtintype" id="4944773">int</span>&nbsp;<span class="op" id="4944777">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4944780">if</span>&nbsp;<span class="string" id="4944783">&#39;0&#39;</span>&nbsp;<span class="op" id="4944787">&lt;=</span>&nbsp;<span class="ident" id="4944790">c</span>&nbsp;<span class="op" id="4944792">&amp;&amp;</span>&nbsp;<span class="ident" id="4944795">c</span>&nbsp;<span class="op" id="4944797">&lt;=</span>&nbsp;<span class="string" id="4944800">&#39;9&#39;</span>&nbsp;<span class="op" id="4944804">||</span>&nbsp;<span class="string" id="4944807">&#39;a&#39;</span>&nbsp;<span class="op" id="4944811">&lt;=</span>&nbsp;<span class="ident" id="4944814">c</span>&nbsp;<span class="op" id="4944816">&amp;&amp;</span>&nbsp;<span class="ident" id="4944819">c</span>&nbsp;<span class="op" id="4944821">&lt;=</span>&nbsp;<span class="string" id="4944824">&#39;f&#39;</span>&nbsp;<span class="op" id="4944828">||</span>&nbsp;<span class="string" id="4944831">&#39;A&#39;</span>&nbsp;<span class="op" id="4944835">&lt;=</span>&nbsp;<span class="ident" id="4944838">c</span>&nbsp;<span class="op" id="4944840">&amp;&amp;</span>&nbsp;<span class="ident" id="4944843">c</span>&nbsp;<span class="op" id="4944845">&lt;=</span>&nbsp;<span class="string" id="4944848">&#39;F&#39;</span>&nbsp;<span class="op" id="4944852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4944856">s</span><span class="op" id="4944857">.</span><span class="ident" id="4944858">step</span>&nbsp;<span class="op" id="4944863">=</span>&nbsp;<span class="ident" id="4944865">stateInString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4944881">return</span>&nbsp;<span class="ident" id="4944888">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4944902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4944905">//&nbsp;numbers</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4944917">return</span>&nbsp;<span class="ident" id="4944924">s</span><span class="op" id="4944925">.</span><span class="builtintype" id="4944926">error</span><span class="op" id="4944931">(</span><span class="ident" id="4944932">c</span><span class="op" id="4944933">,</span>&nbsp;<span class="string" id="4944935">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="4944972">)</span><br>
<span class="lineno"></span><span class="op" id="4944974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4944977">//&nbsp;stateNeg&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`-`&nbsp;during&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="4945037">func</span>&nbsp;<span class="ident" id="4945042">stateNeg</span><span class="op" id="4945050">(</span><span class="ident" id="4945051">s</span>&nbsp;<span class="op" id="4945053">*</span><span class="ident" id="4945054">scanner</span><span class="op" id="4945061">,</span>&nbsp;<span class="ident" id="4945063">c</span>&nbsp;<span class="builtintype" id="4945065">int</span><span class="op" id="4945068">)</span>&nbsp;<span class="builtintype" id="4945070">int</span>&nbsp;<span class="op" id="4945074">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945077">if</span>&nbsp;<span class="ident" id="4945080">c</span>&nbsp;<span class="op" id="4945082">==</span>&nbsp;<span class="string" id="4945085">&#39;0&#39;</span>&nbsp;<span class="op" id="4945089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4945093">s</span><span class="op" id="4945094">.</span><span class="ident" id="4945095">step</span>&nbsp;<span class="op" id="4945100">=</span>&nbsp;<span class="ident" id="4945102">state0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945111">return</span>&nbsp;<span class="ident" id="4945118">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4945132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945135">if</span>&nbsp;<span class="string" id="4945138">&#39;1&#39;</span>&nbsp;<span class="op" id="4945142">&lt;=</span>&nbsp;<span class="ident" id="4945145">c</span>&nbsp;<span class="op" id="4945147">&amp;&amp;</span>&nbsp;<span class="ident" id="4945150">c</span>&nbsp;<span class="op" id="4945152">&lt;=</span>&nbsp;<span class="string" id="4945155">&#39;9&#39;</span>&nbsp;<span class="op" id="4945159">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4945163">s</span><span class="op" id="4945164">.</span><span class="ident" id="4945165">step</span>&nbsp;<span class="op" id="4945170">=</span>&nbsp;<span class="ident" id="4945172">state1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945181">return</span>&nbsp;<span class="ident" id="4945188">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4945202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945205">return</span>&nbsp;<span class="ident" id="4945212">s</span><span class="op" id="4945213">.</span><span class="builtintype" id="4945214">error</span><span class="op" id="4945219">(</span><span class="ident" id="4945220">c</span><span class="op" id="4945221">,</span>&nbsp;<span class="string" id="4945223">&#34;in&nbsp;numeric&nbsp;literal&#34;</span><span class="op" id="4945243">)</span><br>
<span class="lineno"></span><span class="op" id="4945245">}</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span><span class="comment" id="4945248">//&nbsp;state1&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;a&nbsp;non-zero&nbsp;integer&nbsp;during&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="4945321">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`1`&nbsp;or&nbsp;`100`&nbsp;but&nbsp;not&nbsp;`0`.</span><br>
<span class="lineno"></span><span class="keyword" id="4945372">func</span>&nbsp;<span class="ident" id="4945377">state1</span><span class="op" id="4945383">(</span><span class="ident" id="4945384">s</span>&nbsp;<span class="op" id="4945386">*</span><span class="ident" id="4945387">scanner</span><span class="op" id="4945394">,</span>&nbsp;<span class="ident" id="4945396">c</span>&nbsp;<span class="builtintype" id="4945398">int</span><span class="op" id="4945401">)</span>&nbsp;<span class="builtintype" id="4945403">int</span>&nbsp;<span class="op" id="4945407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945410">if</span>&nbsp;<span class="string" id="4945413">&#39;0&#39;</span>&nbsp;<span class="op" id="4945417">&lt;=</span>&nbsp;<span class="ident" id="4945420">c</span>&nbsp;<span class="op" id="4945422">&amp;&amp;</span>&nbsp;<span class="ident" id="4945425">c</span>&nbsp;<span class="op" id="4945427">&lt;=</span>&nbsp;<span class="string" id="4945430">&#39;9&#39;</span>&nbsp;<span class="op" id="4945434">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4945438">s</span><span class="op" id="4945439">.</span><span class="ident" id="4945440">step</span>&nbsp;<span class="op" id="4945445">=</span>&nbsp;<span class="ident" id="4945447">state1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945456">return</span>&nbsp;<span class="ident" id="4945463">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4945477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945480">return</span>&nbsp;<span class="ident" id="4945487">state0</span><span class="op" id="4945493">(</span><span class="ident" id="4945494">s</span><span class="op" id="4945495">,</span>&nbsp;<span class="ident" id="4945497">c</span><span class="op" id="4945498">)</span><br>
<span class="lineno"></span><span class="op" id="4945500">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="4945503">//&nbsp;state0&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`0`&nbsp;during&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="4945561">func</span>&nbsp;<span class="ident" id="4945566">state0</span><span class="op" id="4945572">(</span><span class="ident" id="4945573">s</span>&nbsp;<span class="op" id="4945575">*</span><span class="ident" id="4945576">scanner</span><span class="op" id="4945583">,</span>&nbsp;<span class="ident" id="4945585">c</span>&nbsp;<span class="builtintype" id="4945587">int</span><span class="op" id="4945590">)</span>&nbsp;<span class="builtintype" id="4945592">int</span>&nbsp;<span class="op" id="4945596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945599">if</span>&nbsp;<span class="ident" id="4945602">c</span>&nbsp;<span class="op" id="4945604">==</span>&nbsp;<span class="string" id="4945607">&#39;.&#39;</span>&nbsp;<span class="op" id="4945611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4945615">s</span><span class="op" id="4945616">.</span><span class="ident" id="4945617">step</span>&nbsp;<span class="op" id="4945622">=</span>&nbsp;<span class="ident" id="4945624">stateDot</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945635">return</span>&nbsp;<span class="ident" id="4945642">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4945656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945659">if</span>&nbsp;<span class="ident" id="4945662">c</span>&nbsp;<span class="op" id="4945664">==</span>&nbsp;<span class="string" id="4945667">&#39;e&#39;</span>&nbsp;<span class="op" id="4945671">||</span>&nbsp;<span class="ident" id="4945674">c</span>&nbsp;<span class="op" id="4945676">==</span>&nbsp;<span class="string" id="4945679">&#39;E&#39;</span>&nbsp;<span class="op" id="4945683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4945687">s</span><span class="op" id="4945688">.</span><span class="ident" id="4945689">step</span>&nbsp;<span class="op" id="4945694">=</span>&nbsp;<span class="ident" id="4945696">stateE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945705">return</span>&nbsp;<span class="ident" id="4945712">scanContinue</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4945726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945729">return</span>&nbsp;<span class="ident" id="4945736">stateEndValue</span><span class="op" id="4945749">(</span><span class="ident" id="4945750">s</span><span class="op" id="4945751">,</span>&nbsp;<span class="ident" id="4945753">c</span><span class="op" id="4945754">)</span><br>
<span class="lineno"></span><span class="op" id="4945756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4945759">//&nbsp;stateDot&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;integer&nbsp;and&nbsp;decimal&nbsp;point&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno">430</span><span class="comment" id="4945841">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`1.`.</span><br>
<span class="lineno"></span><span class="keyword" id="4945872">func</span>&nbsp;<span class="ident" id="4945877">stateDot</span><span class="op" id="4945885">(</span><span class="ident" id="4945886">s</span>&nbsp;<span class="op" id="4945888">*</span><span class="ident" id="4945889">scanner</span><span class="op" id="4945896">,</span>&nbsp;<span class="ident" id="4945898">c</span>&nbsp;<span class="builtintype" id="4945900">int</span><span class="op" id="4945903">)</span>&nbsp;<span class="builtintype" id="4945905">int</span>&nbsp;<span class="op" id="4945909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945912">if</span>&nbsp;<span class="string" id="4945915">&#39;0&#39;</span>&nbsp;<span class="op" id="4945919">&lt;=</span>&nbsp;<span class="ident" id="4945922">c</span>&nbsp;<span class="op" id="4945924">&amp;&amp;</span>&nbsp;<span class="ident" id="4945927">c</span>&nbsp;<span class="op" id="4945929">&lt;=</span>&nbsp;<span class="string" id="4945932">&#39;9&#39;</span>&nbsp;<span class="op" id="4945936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4945940">s</span><span class="op" id="4945941">.</span><span class="ident" id="4945942">step</span>&nbsp;<span class="op" id="4945947">=</span>&nbsp;<span class="ident" id="4945949">stateDot0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945961">return</span>&nbsp;<span class="ident" id="4945968">scanContinue</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4945982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4945985">return</span>&nbsp;<span class="ident" id="4945992">s</span><span class="op" id="4945993">.</span><span class="builtintype" id="4945994">error</span><span class="op" id="4945999">(</span><span class="ident" id="4946000">c</span><span class="op" id="4946001">,</span>&nbsp;<span class="string" id="4946003">&#34;after&nbsp;decimal&nbsp;point&nbsp;in&nbsp;numeric&nbsp;literal&#34;</span><span class="op" id="4946043">)</span><br>
<span class="lineno"></span><span class="op" id="4946045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4946048">//&nbsp;stateDot0&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;integer,&nbsp;decimal&nbsp;point,&nbsp;and&nbsp;subsequent</span><br>
<span class="lineno">440</span><span class="comment" id="4946131">//&nbsp;digits&nbsp;of&nbsp;a&nbsp;number,&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`3.14`.</span><br>
<span class="lineno"></span><span class="keyword" id="4946184">func</span>&nbsp;<span class="ident" id="4946189">stateDot0</span><span class="op" id="4946198">(</span><span class="ident" id="4946199">s</span>&nbsp;<span class="op" id="4946201">*</span><span class="ident" id="4946202">scanner</span><span class="op" id="4946209">,</span>&nbsp;<span class="ident" id="4946211">c</span>&nbsp;<span class="builtintype" id="4946213">int</span><span class="op" id="4946216">)</span>&nbsp;<span class="builtintype" id="4946218">int</span>&nbsp;<span class="op" id="4946222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946225">if</span>&nbsp;<span class="string" id="4946228">&#39;0&#39;</span>&nbsp;<span class="op" id="4946232">&lt;=</span>&nbsp;<span class="ident" id="4946235">c</span>&nbsp;<span class="op" id="4946237">&amp;&amp;</span>&nbsp;<span class="ident" id="4946240">c</span>&nbsp;<span class="op" id="4946242">&lt;=</span>&nbsp;<span class="string" id="4946245">&#39;9&#39;</span>&nbsp;<span class="op" id="4946249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4946253">s</span><span class="op" id="4946254">.</span><span class="ident" id="4946255">step</span>&nbsp;<span class="op" id="4946260">=</span>&nbsp;<span class="ident" id="4946262">stateDot0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946274">return</span>&nbsp;<span class="ident" id="4946281">scanContinue</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4946295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946298">if</span>&nbsp;<span class="ident" id="4946301">c</span>&nbsp;<span class="op" id="4946303">==</span>&nbsp;<span class="string" id="4946306">&#39;e&#39;</span>&nbsp;<span class="op" id="4946310">||</span>&nbsp;<span class="ident" id="4946313">c</span>&nbsp;<span class="op" id="4946315">==</span>&nbsp;<span class="string" id="4946318">&#39;E&#39;</span>&nbsp;<span class="op" id="4946322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4946326">s</span><span class="op" id="4946327">.</span><span class="ident" id="4946328">step</span>&nbsp;<span class="op" id="4946333">=</span>&nbsp;<span class="ident" id="4946335">stateE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946344">return</span>&nbsp;<span class="ident" id="4946351">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4946365">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946368">return</span>&nbsp;<span class="ident" id="4946375">stateEndValue</span><span class="op" id="4946388">(</span><span class="ident" id="4946389">s</span><span class="op" id="4946390">,</span>&nbsp;<span class="ident" id="4946392">c</span><span class="op" id="4946393">)</span><br>
<span class="lineno"></span><span class="op" id="4946395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4946398">//&nbsp;stateE&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;mantissa&nbsp;and&nbsp;e&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="4946467">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`314e`&nbsp;or&nbsp;`0.314e`.</span><br>
<span class="lineno">455</span><span class="keyword" id="4946512">func</span>&nbsp;<span class="ident" id="4946517">stateE</span><span class="op" id="4946523">(</span><span class="ident" id="4946524">s</span>&nbsp;<span class="op" id="4946526">*</span><span class="ident" id="4946527">scanner</span><span class="op" id="4946534">,</span>&nbsp;<span class="ident" id="4946536">c</span>&nbsp;<span class="builtintype" id="4946538">int</span><span class="op" id="4946541">)</span>&nbsp;<span class="builtintype" id="4946543">int</span>&nbsp;<span class="op" id="4946547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946550">if</span>&nbsp;<span class="ident" id="4946553">c</span>&nbsp;<span class="op" id="4946555">==</span>&nbsp;<span class="string" id="4946558">&#39;+&#39;</span>&nbsp;<span class="op" id="4946562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4946566">s</span><span class="op" id="4946567">.</span><span class="ident" id="4946568">step</span>&nbsp;<span class="op" id="4946573">=</span>&nbsp;<span class="ident" id="4946575">stateESign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946588">return</span>&nbsp;<span class="ident" id="4946595">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4946609">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946612">if</span>&nbsp;<span class="ident" id="4946615">c</span>&nbsp;<span class="op" id="4946617">==</span>&nbsp;<span class="string" id="4946620">&#39;-&#39;</span>&nbsp;<span class="op" id="4946624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4946628">s</span><span class="op" id="4946629">.</span><span class="ident" id="4946630">step</span>&nbsp;<span class="op" id="4946635">=</span>&nbsp;<span class="ident" id="4946637">stateESign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946650">return</span>&nbsp;<span class="ident" id="4946657">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4946671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946674">return</span>&nbsp;<span class="ident" id="4946681">stateESign</span><span class="op" id="4946691">(</span><span class="ident" id="4946692">s</span><span class="op" id="4946693">,</span>&nbsp;<span class="ident" id="4946695">c</span><span class="op" id="4946696">)</span><br>
<span class="lineno">465</span><span class="op" id="4946698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4946701">//&nbsp;stateESign&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;mantissa,&nbsp;e,&nbsp;and&nbsp;sign&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="4946781">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`314e-`&nbsp;or&nbsp;`0.314e+`.</span><br>
<span class="lineno"></span><span class="keyword" id="4946828">func</span>&nbsp;<span class="ident" id="4946833">stateESign</span><span class="op" id="4946843">(</span><span class="ident" id="4946844">s</span>&nbsp;<span class="op" id="4946846">*</span><span class="ident" id="4946847">scanner</span><span class="op" id="4946854">,</span>&nbsp;<span class="ident" id="4946856">c</span>&nbsp;<span class="builtintype" id="4946858">int</span><span class="op" id="4946861">)</span>&nbsp;<span class="builtintype" id="4946863">int</span>&nbsp;<span class="op" id="4946867">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946870">if</span>&nbsp;<span class="string" id="4946873">&#39;0&#39;</span>&nbsp;<span class="op" id="4946877">&lt;=</span>&nbsp;<span class="ident" id="4946880">c</span>&nbsp;<span class="op" id="4946882">&amp;&amp;</span>&nbsp;<span class="ident" id="4946885">c</span>&nbsp;<span class="op" id="4946887">&lt;=</span>&nbsp;<span class="string" id="4946890">&#39;9&#39;</span>&nbsp;<span class="op" id="4946894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4946898">s</span><span class="op" id="4946899">.</span><span class="ident" id="4946900">step</span>&nbsp;<span class="op" id="4946905">=</span>&nbsp;<span class="ident" id="4946907">stateE0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946917">return</span>&nbsp;<span class="ident" id="4946924">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4946938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4946941">return</span>&nbsp;<span class="ident" id="4946948">s</span><span class="op" id="4946949">.</span><span class="builtintype" id="4946950">error</span><span class="op" id="4946955">(</span><span class="ident" id="4946956">c</span><span class="op" id="4946957">,</span>&nbsp;<span class="string" id="4946959">&#34;in&nbsp;exponent&nbsp;of&nbsp;numeric&nbsp;literal&#34;</span><span class="op" id="4946991">)</span><br>
<span class="lineno">475</span><span class="op" id="4946993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4946996">//&nbsp;stateE0&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;mantissa,&nbsp;e,&nbsp;optional&nbsp;sign,</span><br>
<span class="lineno"></span><span class="comment" id="4947066">//&nbsp;and&nbsp;at&nbsp;least&nbsp;one&nbsp;digit&nbsp;of&nbsp;the&nbsp;exponent&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="4947121">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`314e-2`&nbsp;or&nbsp;`0.314e+1`&nbsp;or&nbsp;`3.14e0`.</span><br>
<span class="lineno">480</span><span class="keyword" id="4947182">func</span>&nbsp;<span class="ident" id="4947187">stateE0</span><span class="op" id="4947194">(</span><span class="ident" id="4947195">s</span>&nbsp;<span class="op" id="4947197">*</span><span class="ident" id="4947198">scanner</span><span class="op" id="4947205">,</span>&nbsp;<span class="ident" id="4947207">c</span>&nbsp;<span class="builtintype" id="4947209">int</span><span class="op" id="4947212">)</span>&nbsp;<span class="builtintype" id="4947214">int</span>&nbsp;<span class="op" id="4947218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947221">if</span>&nbsp;<span class="string" id="4947224">&#39;0&#39;</span>&nbsp;<span class="op" id="4947228">&lt;=</span>&nbsp;<span class="ident" id="4947231">c</span>&nbsp;<span class="op" id="4947233">&amp;&amp;</span>&nbsp;<span class="ident" id="4947236">c</span>&nbsp;<span class="op" id="4947238">&lt;=</span>&nbsp;<span class="string" id="4947241">&#39;9&#39;</span>&nbsp;<span class="op" id="4947245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4947249">s</span><span class="op" id="4947250">.</span><span class="ident" id="4947251">step</span>&nbsp;<span class="op" id="4947256">=</span>&nbsp;<span class="ident" id="4947258">stateE0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947268">return</span>&nbsp;<span class="ident" id="4947275">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4947289">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947292">return</span>&nbsp;<span class="ident" id="4947299">stateEndValue</span><span class="op" id="4947312">(</span><span class="ident" id="4947313">s</span><span class="op" id="4947314">,</span>&nbsp;<span class="ident" id="4947316">c</span><span class="op" id="4947317">)</span><br>
<span class="lineno"></span><span class="op" id="4947319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4947322">//&nbsp;stateT&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`t`.</span><br>
<span class="lineno"></span><span class="keyword" id="4947364">func</span>&nbsp;<span class="ident" id="4947369">stateT</span><span class="op" id="4947375">(</span><span class="ident" id="4947376">s</span>&nbsp;<span class="op" id="4947378">*</span><span class="ident" id="4947379">scanner</span><span class="op" id="4947386">,</span>&nbsp;<span class="ident" id="4947388">c</span>&nbsp;<span class="builtintype" id="4947390">int</span><span class="op" id="4947393">)</span>&nbsp;<span class="builtintype" id="4947395">int</span>&nbsp;<span class="op" id="4947399">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947402">if</span>&nbsp;<span class="ident" id="4947405">c</span>&nbsp;<span class="op" id="4947407">==</span>&nbsp;<span class="string" id="4947410">&#39;r&#39;</span>&nbsp;<span class="op" id="4947414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4947418">s</span><span class="op" id="4947419">.</span><span class="ident" id="4947420">step</span>&nbsp;<span class="op" id="4947425">=</span>&nbsp;<span class="ident" id="4947427">stateTr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947437">return</span>&nbsp;<span class="ident" id="4947444">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4947458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947461">return</span>&nbsp;<span class="ident" id="4947468">s</span><span class="op" id="4947469">.</span><span class="builtintype" id="4947470">error</span><span class="op" id="4947475">(</span><span class="ident" id="4947476">c</span><span class="op" id="4947477">,</span>&nbsp;<span class="string" id="4947479">&#34;in&nbsp;literal&nbsp;true&nbsp;(expecting&nbsp;&#39;r&#39;)&#34;</span><span class="op" id="4947512">)</span><br>
<span class="lineno">495</span><span class="op" id="4947514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4947517">//&nbsp;stateTr&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`tr`.</span><br>
<span class="lineno"></span><span class="keyword" id="4947561">func</span>&nbsp;<span class="ident" id="4947566">stateTr</span><span class="op" id="4947573">(</span><span class="ident" id="4947574">s</span>&nbsp;<span class="op" id="4947576">*</span><span class="ident" id="4947577">scanner</span><span class="op" id="4947584">,</span>&nbsp;<span class="ident" id="4947586">c</span>&nbsp;<span class="builtintype" id="4947588">int</span><span class="op" id="4947591">)</span>&nbsp;<span class="builtintype" id="4947593">int</span>&nbsp;<span class="op" id="4947597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947600">if</span>&nbsp;<span class="ident" id="4947603">c</span>&nbsp;<span class="op" id="4947605">==</span>&nbsp;<span class="string" id="4947608">&#39;u&#39;</span>&nbsp;<span class="op" id="4947612">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4947616">s</span><span class="op" id="4947617">.</span><span class="ident" id="4947618">step</span>&nbsp;<span class="op" id="4947623">=</span>&nbsp;<span class="ident" id="4947625">stateTru</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947636">return</span>&nbsp;<span class="ident" id="4947643">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4947657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947660">return</span>&nbsp;<span class="ident" id="4947667">s</span><span class="op" id="4947668">.</span><span class="builtintype" id="4947669">error</span><span class="op" id="4947674">(</span><span class="ident" id="4947675">c</span><span class="op" id="4947676">,</span>&nbsp;<span class="string" id="4947678">&#34;in&nbsp;literal&nbsp;true&nbsp;(expecting&nbsp;&#39;u&#39;)&#34;</span><span class="op" id="4947711">)</span><br>
<span class="lineno"></span><span class="op" id="4947713">}</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span><span class="comment" id="4947716">//&nbsp;stateTru&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`tru`.</span><br>
<span class="lineno"></span><span class="keyword" id="4947762">func</span>&nbsp;<span class="ident" id="4947767">stateTru</span><span class="op" id="4947775">(</span><span class="ident" id="4947776">s</span>&nbsp;<span class="op" id="4947778">*</span><span class="ident" id="4947779">scanner</span><span class="op" id="4947786">,</span>&nbsp;<span class="ident" id="4947788">c</span>&nbsp;<span class="builtintype" id="4947790">int</span><span class="op" id="4947793">)</span>&nbsp;<span class="builtintype" id="4947795">int</span>&nbsp;<span class="op" id="4947799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947802">if</span>&nbsp;<span class="ident" id="4947805">c</span>&nbsp;<span class="op" id="4947807">==</span>&nbsp;<span class="string" id="4947810">&#39;e&#39;</span>&nbsp;<span class="op" id="4947814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4947818">s</span><span class="op" id="4947819">.</span><span class="ident" id="4947820">step</span>&nbsp;<span class="op" id="4947825">=</span>&nbsp;<span class="ident" id="4947827">stateEndValue</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947843">return</span>&nbsp;<span class="ident" id="4947850">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4947864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4947867">return</span>&nbsp;<span class="ident" id="4947874">s</span><span class="op" id="4947875">.</span><span class="builtintype" id="4947876">error</span><span class="op" id="4947881">(</span><span class="ident" id="4947882">c</span><span class="op" id="4947883">,</span>&nbsp;<span class="string" id="4947885">&#34;in&nbsp;literal&nbsp;true&nbsp;(expecting&nbsp;&#39;e&#39;)&#34;</span><span class="op" id="4947918">)</span><br>
<span class="lineno"></span><span class="op" id="4947920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="comment" id="4947923">//&nbsp;stateF&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`f`.</span><br>
<span class="lineno"></span><span class="keyword" id="4947965">func</span>&nbsp;<span class="ident" id="4947970">stateF</span><span class="op" id="4947976">(</span><span class="ident" id="4947977">s</span>&nbsp;<span class="op" id="4947979">*</span><span class="ident" id="4947980">scanner</span><span class="op" id="4947987">,</span>&nbsp;<span class="ident" id="4947989">c</span>&nbsp;<span class="builtintype" id="4947991">int</span><span class="op" id="4947994">)</span>&nbsp;<span class="builtintype" id="4947996">int</span>&nbsp;<span class="op" id="4948000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948003">if</span>&nbsp;<span class="ident" id="4948006">c</span>&nbsp;<span class="op" id="4948008">==</span>&nbsp;<span class="string" id="4948011">&#39;a&#39;</span>&nbsp;<span class="op" id="4948015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4948019">s</span><span class="op" id="4948020">.</span><span class="ident" id="4948021">step</span>&nbsp;<span class="op" id="4948026">=</span>&nbsp;<span class="ident" id="4948028">stateFa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948038">return</span>&nbsp;<span class="ident" id="4948045">scanContinue</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4948059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948062">return</span>&nbsp;<span class="ident" id="4948069">s</span><span class="op" id="4948070">.</span><span class="builtintype" id="4948071">error</span><span class="op" id="4948076">(</span><span class="ident" id="4948077">c</span><span class="op" id="4948078">,</span>&nbsp;<span class="string" id="4948080">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;a&#39;)&#34;</span><span class="op" id="4948114">)</span><br>
<span class="lineno"></span><span class="op" id="4948116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4948119">//&nbsp;stateFa&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`fa`.</span><br>
<span class="lineno">525</span><span class="keyword" id="4948163">func</span>&nbsp;<span class="ident" id="4948168">stateFa</span><span class="op" id="4948175">(</span><span class="ident" id="4948176">s</span>&nbsp;<span class="op" id="4948178">*</span><span class="ident" id="4948179">scanner</span><span class="op" id="4948186">,</span>&nbsp;<span class="ident" id="4948188">c</span>&nbsp;<span class="builtintype" id="4948190">int</span><span class="op" id="4948193">)</span>&nbsp;<span class="builtintype" id="4948195">int</span>&nbsp;<span class="op" id="4948199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948202">if</span>&nbsp;<span class="ident" id="4948205">c</span>&nbsp;<span class="op" id="4948207">==</span>&nbsp;<span class="string" id="4948210">&#39;l&#39;</span>&nbsp;<span class="op" id="4948214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4948218">s</span><span class="op" id="4948219">.</span><span class="ident" id="4948220">step</span>&nbsp;<span class="op" id="4948225">=</span>&nbsp;<span class="ident" id="4948227">stateFal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948238">return</span>&nbsp;<span class="ident" id="4948245">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4948259">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948262">return</span>&nbsp;<span class="ident" id="4948269">s</span><span class="op" id="4948270">.</span><span class="builtintype" id="4948271">error</span><span class="op" id="4948276">(</span><span class="ident" id="4948277">c</span><span class="op" id="4948278">,</span>&nbsp;<span class="string" id="4948280">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;l&#39;)&#34;</span><span class="op" id="4948314">)</span><br>
<span class="lineno"></span><span class="op" id="4948316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4948319">//&nbsp;stateFal&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`fal`.</span><br>
<span class="lineno"></span><span class="keyword" id="4948365">func</span>&nbsp;<span class="ident" id="4948370">stateFal</span><span class="op" id="4948378">(</span><span class="ident" id="4948379">s</span>&nbsp;<span class="op" id="4948381">*</span><span class="ident" id="4948382">scanner</span><span class="op" id="4948389">,</span>&nbsp;<span class="ident" id="4948391">c</span>&nbsp;<span class="builtintype" id="4948393">int</span><span class="op" id="4948396">)</span>&nbsp;<span class="builtintype" id="4948398">int</span>&nbsp;<span class="op" id="4948402">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948405">if</span>&nbsp;<span class="ident" id="4948408">c</span>&nbsp;<span class="op" id="4948410">==</span>&nbsp;<span class="string" id="4948413">&#39;s&#39;</span>&nbsp;<span class="op" id="4948417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4948421">s</span><span class="op" id="4948422">.</span><span class="ident" id="4948423">step</span>&nbsp;<span class="op" id="4948428">=</span>&nbsp;<span class="ident" id="4948430">stateFals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948442">return</span>&nbsp;<span class="ident" id="4948449">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4948463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948466">return</span>&nbsp;<span class="ident" id="4948473">s</span><span class="op" id="4948474">.</span><span class="builtintype" id="4948475">error</span><span class="op" id="4948480">(</span><span class="ident" id="4948481">c</span><span class="op" id="4948482">,</span>&nbsp;<span class="string" id="4948484">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;s&#39;)&#34;</span><span class="op" id="4948518">)</span><br>
<span class="lineno">540</span><span class="op" id="4948520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4948523">//&nbsp;stateFals&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`fals`.</span><br>
<span class="lineno"></span><span class="keyword" id="4948571">func</span>&nbsp;<span class="ident" id="4948576">stateFals</span><span class="op" id="4948585">(</span><span class="ident" id="4948586">s</span>&nbsp;<span class="op" id="4948588">*</span><span class="ident" id="4948589">scanner</span><span class="op" id="4948596">,</span>&nbsp;<span class="ident" id="4948598">c</span>&nbsp;<span class="builtintype" id="4948600">int</span><span class="op" id="4948603">)</span>&nbsp;<span class="builtintype" id="4948605">int</span>&nbsp;<span class="op" id="4948609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948612">if</span>&nbsp;<span class="ident" id="4948615">c</span>&nbsp;<span class="op" id="4948617">==</span>&nbsp;<span class="string" id="4948620">&#39;e&#39;</span>&nbsp;<span class="op" id="4948624">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4948628">s</span><span class="op" id="4948629">.</span><span class="ident" id="4948630">step</span>&nbsp;<span class="op" id="4948635">=</span>&nbsp;<span class="ident" id="4948637">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948653">return</span>&nbsp;<span class="ident" id="4948660">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4948674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948677">return</span>&nbsp;<span class="ident" id="4948684">s</span><span class="op" id="4948685">.</span><span class="builtintype" id="4948686">error</span><span class="op" id="4948691">(</span><span class="ident" id="4948692">c</span><span class="op" id="4948693">,</span>&nbsp;<span class="string" id="4948695">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;e&#39;)&#34;</span><span class="op" id="4948729">)</span><br>
<span class="lineno"></span><span class="op" id="4948731">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="comment" id="4948734">//&nbsp;stateN&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`n`.</span><br>
<span class="lineno"></span><span class="keyword" id="4948776">func</span>&nbsp;<span class="ident" id="4948781">stateN</span><span class="op" id="4948787">(</span><span class="ident" id="4948788">s</span>&nbsp;<span class="op" id="4948790">*</span><span class="ident" id="4948791">scanner</span><span class="op" id="4948798">,</span>&nbsp;<span class="ident" id="4948800">c</span>&nbsp;<span class="builtintype" id="4948802">int</span><span class="op" id="4948805">)</span>&nbsp;<span class="builtintype" id="4948807">int</span>&nbsp;<span class="op" id="4948811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948814">if</span>&nbsp;<span class="ident" id="4948817">c</span>&nbsp;<span class="op" id="4948819">==</span>&nbsp;<span class="string" id="4948822">&#39;u&#39;</span>&nbsp;<span class="op" id="4948826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4948830">s</span><span class="op" id="4948831">.</span><span class="ident" id="4948832">step</span>&nbsp;<span class="op" id="4948837">=</span>&nbsp;<span class="ident" id="4948839">stateNu</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948849">return</span>&nbsp;<span class="ident" id="4948856">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4948870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4948873">return</span>&nbsp;<span class="ident" id="4948880">s</span><span class="op" id="4948881">.</span><span class="builtintype" id="4948882">error</span><span class="op" id="4948887">(</span><span class="ident" id="4948888">c</span><span class="op" id="4948889">,</span>&nbsp;<span class="string" id="4948891">&#34;in&nbsp;literal&nbsp;null&nbsp;(expecting&nbsp;&#39;u&#39;)&#34;</span><span class="op" id="4948924">)</span><br>
<span class="lineno"></span><span class="op" id="4948926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="comment" id="4948929">//&nbsp;stateNu&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`nu`.</span><br>
<span class="lineno"></span><span class="keyword" id="4948973">func</span>&nbsp;<span class="ident" id="4948978">stateNu</span><span class="op" id="4948985">(</span><span class="ident" id="4948986">s</span>&nbsp;<span class="op" id="4948988">*</span><span class="ident" id="4948989">scanner</span><span class="op" id="4948996">,</span>&nbsp;<span class="ident" id="4948998">c</span>&nbsp;<span class="builtintype" id="4949000">int</span><span class="op" id="4949003">)</span>&nbsp;<span class="builtintype" id="4949005">int</span>&nbsp;<span class="op" id="4949009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949012">if</span>&nbsp;<span class="ident" id="4949015">c</span>&nbsp;<span class="op" id="4949017">==</span>&nbsp;<span class="string" id="4949020">&#39;l&#39;</span>&nbsp;<span class="op" id="4949024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4949028">s</span><span class="op" id="4949029">.</span><span class="ident" id="4949030">step</span>&nbsp;<span class="op" id="4949035">=</span>&nbsp;<span class="ident" id="4949037">stateNul</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949048">return</span>&nbsp;<span class="ident" id="4949055">scanContinue</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4949069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949072">return</span>&nbsp;<span class="ident" id="4949079">s</span><span class="op" id="4949080">.</span><span class="builtintype" id="4949081">error</span><span class="op" id="4949086">(</span><span class="ident" id="4949087">c</span><span class="op" id="4949088">,</span>&nbsp;<span class="string" id="4949090">&#34;in&nbsp;literal&nbsp;null&nbsp;(expecting&nbsp;&#39;l&#39;)&#34;</span><span class="op" id="4949123">)</span><br>
<span class="lineno"></span><span class="op" id="4949125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4949128">//&nbsp;stateNul&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`nul`.</span><br>
<span class="lineno">570</span><span class="keyword" id="4949174">func</span>&nbsp;<span class="ident" id="4949179">stateNul</span><span class="op" id="4949187">(</span><span class="ident" id="4949188">s</span>&nbsp;<span class="op" id="4949190">*</span><span class="ident" id="4949191">scanner</span><span class="op" id="4949198">,</span>&nbsp;<span class="ident" id="4949200">c</span>&nbsp;<span class="builtintype" id="4949202">int</span><span class="op" id="4949205">)</span>&nbsp;<span class="builtintype" id="4949207">int</span>&nbsp;<span class="op" id="4949211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949214">if</span>&nbsp;<span class="ident" id="4949217">c</span>&nbsp;<span class="op" id="4949219">==</span>&nbsp;<span class="string" id="4949222">&#39;l&#39;</span>&nbsp;<span class="op" id="4949226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4949230">s</span><span class="op" id="4949231">.</span><span class="ident" id="4949232">step</span>&nbsp;<span class="op" id="4949237">=</span>&nbsp;<span class="ident" id="4949239">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949255">return</span>&nbsp;<span class="ident" id="4949262">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4949276">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949279">return</span>&nbsp;<span class="ident" id="4949286">s</span><span class="op" id="4949287">.</span><span class="builtintype" id="4949288">error</span><span class="op" id="4949293">(</span><span class="ident" id="4949294">c</span><span class="op" id="4949295">,</span>&nbsp;<span class="string" id="4949297">&#34;in&nbsp;literal&nbsp;null&nbsp;(expecting&nbsp;&#39;l&#39;)&#34;</span><span class="op" id="4949330">)</span><br>
<span class="lineno"></span><span class="op" id="4949332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4949335">//&nbsp;stateError&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reaching&nbsp;a&nbsp;syntax&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="4949393">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`[1}`&nbsp;or&nbsp;`5.1.2`.</span><br>
<span class="lineno">580</span><span class="keyword" id="4949436">func</span>&nbsp;<span class="ident" id="4949441">stateError</span><span class="op" id="4949451">(</span><span class="ident" id="4949452">s</span>&nbsp;<span class="op" id="4949454">*</span><span class="ident" id="4949455">scanner</span><span class="op" id="4949462">,</span>&nbsp;<span class="ident" id="4949464">c</span>&nbsp;<span class="builtintype" id="4949466">int</span><span class="op" id="4949469">)</span>&nbsp;<span class="builtintype" id="4949471">int</span>&nbsp;<span class="op" id="4949475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949478">return</span>&nbsp;<span class="ident" id="4949485">scanError</span><br>
<span class="lineno"></span><span class="op" id="4949495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4949498">//&nbsp;error&nbsp;records&nbsp;an&nbsp;error&nbsp;and&nbsp;switches&nbsp;to&nbsp;the&nbsp;error&nbsp;state.</span><br>
<span class="lineno">585</span><span class="keyword" id="4949557">func</span>&nbsp;<span class="op" id="4949562">(</span><span class="ident" id="4949563">s</span>&nbsp;<span class="op" id="4949565">*</span><span class="ident" id="4949566">scanner</span><span class="op" id="4949573">)</span>&nbsp;<span class="builtintype" id="4949575">error</span><span class="op" id="4949580">(</span><span class="ident" id="4949581">c</span>&nbsp;<span class="builtintype" id="4949583">int</span><span class="op" id="4949586">,</span>&nbsp;<span class="ident" id="4949588">context</span>&nbsp;<span class="builtintype" id="4949596">string</span><span class="op" id="4949602">)</span>&nbsp;<span class="builtintype" id="4949604">int</span>&nbsp;<span class="op" id="4949608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4949611">s</span><span class="op" id="4949612">.</span><span class="ident" id="4949613">step</span>&nbsp;<span class="op" id="4949618">=</span>&nbsp;<span class="ident" id="4949620">stateError</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4949632">s</span><span class="op" id="4949633">.</span><span class="ident" id="4949634">err</span>&nbsp;<span class="op" id="4949638">=</span>&nbsp;<span class="op" id="4949640">&amp;</span><span class="ident" id="4949641">SyntaxError</span><span class="op" id="4949652">{</span><span class="string" id="4949653">&#34;invalid&nbsp;character&nbsp;&#34;</span>&nbsp;<span class="op" id="4949674">+</span>&nbsp;<span class="ident" id="4949676">quoteChar</span><span class="op" id="4949685">(</span><span class="ident" id="4949686">c</span><span class="op" id="4949687">)</span>&nbsp;<span class="op" id="4949689">+</span>&nbsp;<span class="string" id="4949691">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="4949695">+</span>&nbsp;<span class="ident" id="4949697">context</span><span class="op" id="4949704">,</span>&nbsp;<span class="ident" id="4949706">s</span><span class="op" id="4949707">.</span><span class="ident" id="4949708">bytes</span><span class="op" id="4949713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949716">return</span>&nbsp;<span class="ident" id="4949723">scanError</span><br>
<span class="lineno"></span><span class="op" id="4949733">}</span><br>
<span class="lineno">590</span><br>
<span class="lineno"></span><span class="comment" id="4949736">//&nbsp;quoteChar&nbsp;formats&nbsp;c&nbsp;as&nbsp;a&nbsp;quoted&nbsp;character&nbsp;literal</span><br>
<span class="lineno"></span><span class="keyword" id="4949789">func</span>&nbsp;<span class="ident" id="4949794">quoteChar</span><span class="op" id="4949803">(</span><span class="ident" id="4949804">c</span>&nbsp;<span class="builtintype" id="4949806">int</span><span class="op" id="4949809">)</span>&nbsp;<span class="builtintype" id="4949811">string</span>&nbsp;<span class="op" id="4949818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4949821">//&nbsp;special&nbsp;cases&nbsp;-&nbsp;different&nbsp;from&nbsp;quoted&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949871">if</span>&nbsp;<span class="ident" id="4949874">c</span>&nbsp;<span class="op" id="4949876">==</span>&nbsp;<span class="string" id="4949879">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="4949884">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949888">return</span>&nbsp;<span class="string" id="4949895">`&#39;\&#39;&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4949903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949906">if</span>&nbsp;<span class="ident" id="4949909">c</span>&nbsp;<span class="op" id="4949911">==</span>&nbsp;<span class="string" id="4949914">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4949918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4949922">return</span>&nbsp;<span class="string" id="4949929">`&#39;&#34;&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4949936">}</span><br>
<span class="lineno">600</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4949940">//&nbsp;use&nbsp;quoted&nbsp;string&nbsp;with&nbsp;different&nbsp;quotation&nbsp;marks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4949993">s</span>&nbsp;<span class="op" id="4949995">:=</span>&nbsp;<span class="ident" id="4949998">strconv</span><span class="op" id="4950005">.</span><span class="ident" id="4950006">Quote</span><span class="op" id="4950011">(</span><span class="builtintype" id="4950012">string</span><span class="op" id="4950018">(</span><span class="ident" id="4950019">c</span><span class="op" id="4950020">)</span><span class="op" id="4950021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4950024">return</span>&nbsp;<span class="string" id="4950031">&#34;&#39;&#34;</span>&nbsp;<span class="op" id="4950035">+</span>&nbsp;<span class="ident" id="4950037">s</span><span class="op" id="4950038">[</span><span class="num" id="4950039">1</span><span class="op" id="4950040">:</span><span class="builtinfunc" id="4950041">len</span><span class="op" id="4950044">(</span><span class="ident" id="4950045">s</span><span class="op" id="4950046">)</span><span class="op" id="4950047">-</span><span class="num" id="4950048">1</span><span class="op" id="4950049">]</span>&nbsp;<span class="op" id="4950051">+</span>&nbsp;<span class="string" id="4950053">&#34;&#39;&#34;</span><br>
<span class="lineno"></span><span class="op" id="4950057">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span><span class="comment" id="4950060">//&nbsp;undo&nbsp;causes&nbsp;the&nbsp;scanner&nbsp;to&nbsp;return&nbsp;scanCode&nbsp;from&nbsp;the&nbsp;next&nbsp;state&nbsp;transition.</span><br>
<span class="lineno"></span><span class="comment" id="4950138">//&nbsp;This&nbsp;gives&nbsp;callers&nbsp;a&nbsp;simple&nbsp;1-byte&nbsp;undo&nbsp;mechanism.</span><br>
<span class="lineno"></span><span class="keyword" id="4950192">func</span>&nbsp;<span class="op" id="4950197">(</span><span class="ident" id="4950198">s</span>&nbsp;<span class="op" id="4950200">*</span><span class="ident" id="4950201">scanner</span><span class="op" id="4950208">)</span>&nbsp;<span class="ident" id="4950210">undo</span><span class="op" id="4950214">(</span><span class="ident" id="4950215">scanCode</span>&nbsp;<span class="builtintype" id="4950224">int</span><span class="op" id="4950227">)</span>&nbsp;<span class="op" id="4950229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4950232">if</span>&nbsp;<span class="ident" id="4950235">s</span><span class="op" id="4950236">.</span><span class="ident" id="4950237">redo</span>&nbsp;<span class="op" id="4950242">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4950246">panic</span><span class="op" id="4950251">(</span><span class="string" id="4950252">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;scanner&#34;</span><span class="op" id="4950282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4950285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4950288">s</span><span class="op" id="4950289">.</span><span class="ident" id="4950290">redoCode</span>&nbsp;<span class="op" id="4950299">=</span>&nbsp;<span class="ident" id="4950301">scanCode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4950311">s</span><span class="op" id="4950312">.</span><span class="ident" id="4950313">redoState</span>&nbsp;<span class="op" id="4950323">=</span>&nbsp;<span class="ident" id="4950325">s</span><span class="op" id="4950326">.</span><span class="ident" id="4950327">step</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4950333">s</span><span class="op" id="4950334">.</span><span class="ident" id="4950335">step</span>&nbsp;<span class="op" id="4950340">=</span>&nbsp;<span class="ident" id="4950342">stateRedo</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4950353">s</span><span class="op" id="4950354">.</span><span class="ident" id="4950355">redo</span>&nbsp;<span class="op" id="4950360">=</span>&nbsp;<span class="builtintype" id="4950362">true</span><br>
<span class="lineno"></span><span class="op" id="4950367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4950370">//&nbsp;stateRedo&nbsp;helps&nbsp;implement&nbsp;the&nbsp;scanner&#39;s&nbsp;1-byte&nbsp;undo.</span><br>
<span class="lineno"></span><span class="keyword" id="4950426">func</span>&nbsp;<span class="ident" id="4950431">stateRedo</span><span class="op" id="4950440">(</span><span class="ident" id="4950441">s</span>&nbsp;<span class="op" id="4950443">*</span><span class="ident" id="4950444">scanner</span><span class="op" id="4950451">,</span>&nbsp;<span class="ident" id="4950453">c</span>&nbsp;<span class="builtintype" id="4950455">int</span><span class="op" id="4950458">)</span>&nbsp;<span class="builtintype" id="4950460">int</span>&nbsp;<span class="op" id="4950464">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4950467">s</span><span class="op" id="4950468">.</span><span class="ident" id="4950469">redo</span>&nbsp;<span class="op" id="4950474">=</span>&nbsp;<span class="builtintype" id="4950476">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4950483">s</span><span class="op" id="4950484">.</span><span class="ident" id="4950485">step</span>&nbsp;<span class="op" id="4950490">=</span>&nbsp;<span class="ident" id="4950492">s</span><span class="op" id="4950493">.</span><span class="ident" id="4950494">redoState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4950505">return</span>&nbsp;<span class="ident" id="4950512">s</span><span class="op" id="4950513">.</span><span class="ident" id="4950514">redoCode</span><br>
<span class="lineno"></span><span class="op" id="4950523">}</span>
</div>
</body>
</html>
