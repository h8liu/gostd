<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/png</h2>
<ul>
<li><a href="/gostd/image/png/paeth.go.html">paeth.go</a></li>
<li><a href="/gostd/image/png/paeth_test.go.html" class="current">paeth_test.go</a></li>
<li><a href="/gostd/image/png/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/png/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/png/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/png/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6927800">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6927855">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6927909">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6927960">package</span>&nbsp;<span class="ident" id="6927968">png</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6927973">import</span>&nbsp;<span class="op" id="6927980">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6927983">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6927992">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6928005">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6928015">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6928018">func</span>&nbsp;<span class="ident" id="6928023">slowAbs</span><span class="op" id="6928030">(</span><span class="ident" id="6928031">x</span>&nbsp;<span class="builtintype" id="6928033">int</span><span class="op" id="6928036">)</span>&nbsp;<span class="builtintype" id="6928038">int</span>&nbsp;<span class="op" id="6928042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928045">if</span>&nbsp;<span class="ident" id="6928048">x</span>&nbsp;<span class="op" id="6928050">&lt;</span>&nbsp;<span class="num" id="6928052">0</span>&nbsp;<span class="op" id="6928054">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928058">return</span>&nbsp;<span class="op" id="6928065">-</span><span class="ident" id="6928066">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6928069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928072">return</span>&nbsp;<span class="ident" id="6928079">x</span><br>
<span class="lineno"></span><span class="op" id="6928081">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6928084">//&nbsp;slowPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Paeth&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="6928156">//&nbsp;It&nbsp;is&nbsp;a&nbsp;straight&nbsp;port&nbsp;of&nbsp;the&nbsp;sample&nbsp;code&nbsp;in&nbsp;the&nbsp;PNG&nbsp;spec,&nbsp;section&nbsp;9.4.</span><br>
<span class="lineno"></span><span class="keyword" id="6928230">func</span>&nbsp;<span class="ident" id="6928235">slowPaeth</span><span class="op" id="6928244">(</span><span class="ident" id="6928245">a</span><span class="op" id="6928246">,</span>&nbsp;<span class="ident" id="6928248">b</span><span class="op" id="6928249">,</span>&nbsp;<span class="ident" id="6928251">c</span>&nbsp;<span class="builtintype" id="6928253">uint8</span><span class="op" id="6928258">)</span>&nbsp;<span class="builtintype" id="6928260">uint8</span>&nbsp;<span class="op" id="6928266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6928269">p</span>&nbsp;<span class="op" id="6928271">:=</span>&nbsp;<span class="builtintype" id="6928274">int</span><span class="op" id="6928277">(</span><span class="ident" id="6928278">a</span><span class="op" id="6928279">)</span>&nbsp;<span class="op" id="6928281">+</span>&nbsp;<span class="builtintype" id="6928283">int</span><span class="op" id="6928286">(</span><span class="ident" id="6928287">b</span><span class="op" id="6928288">)</span>&nbsp;<span class="op" id="6928290">-</span>&nbsp;<span class="builtintype" id="6928292">int</span><span class="op" id="6928295">(</span><span class="ident" id="6928296">c</span><span class="op" id="6928297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6928300">pa</span>&nbsp;<span class="op" id="6928303">:=</span>&nbsp;<span class="ident" id="6928306">slowAbs</span><span class="op" id="6928313">(</span><span class="ident" id="6928314">p</span>&nbsp;<span class="op" id="6928316">-</span>&nbsp;<span class="builtintype" id="6928318">int</span><span class="op" id="6928321">(</span><span class="ident" id="6928322">a</span><span class="op" id="6928323">)</span><span class="op" id="6928324">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6928327">pb</span>&nbsp;<span class="op" id="6928330">:=</span>&nbsp;<span class="ident" id="6928333">slowAbs</span><span class="op" id="6928340">(</span><span class="ident" id="6928341">p</span>&nbsp;<span class="op" id="6928343">-</span>&nbsp;<span class="builtintype" id="6928345">int</span><span class="op" id="6928348">(</span><span class="ident" id="6928349">b</span><span class="op" id="6928350">)</span><span class="op" id="6928351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6928354">pc</span>&nbsp;<span class="op" id="6928357">:=</span>&nbsp;<span class="ident" id="6928360">slowAbs</span><span class="op" id="6928367">(</span><span class="ident" id="6928368">p</span>&nbsp;<span class="op" id="6928370">-</span>&nbsp;<span class="builtintype" id="6928372">int</span><span class="op" id="6928375">(</span><span class="ident" id="6928376">c</span><span class="op" id="6928377">)</span><span class="op" id="6928378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928381">if</span>&nbsp;<span class="ident" id="6928384">pa</span>&nbsp;<span class="op" id="6928387">&lt;=</span>&nbsp;<span class="ident" id="6928390">pb</span>&nbsp;<span class="op" id="6928393">&amp;&amp;</span>&nbsp;<span class="ident" id="6928396">pa</span>&nbsp;<span class="op" id="6928399">&lt;=</span>&nbsp;<span class="ident" id="6928402">pc</span>&nbsp;<span class="op" id="6928405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928409">return</span>&nbsp;<span class="ident" id="6928416">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6928419">}</span>&nbsp;<span class="keyword" id="6928421">else</span>&nbsp;<span class="keyword" id="6928426">if</span>&nbsp;<span class="ident" id="6928429">pb</span>&nbsp;<span class="op" id="6928432">&lt;=</span>&nbsp;<span class="ident" id="6928435">pc</span>&nbsp;<span class="op" id="6928438">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928442">return</span>&nbsp;<span class="ident" id="6928449">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6928452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928455">return</span>&nbsp;<span class="ident" id="6928462">c</span><br>
<span class="lineno"></span><span class="op" id="6928464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="6928467">//&nbsp;slowFilterPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;func&nbsp;filterPaeth.</span><br>
<span class="lineno"></span><span class="keyword" id="6928543">func</span>&nbsp;<span class="ident" id="6928548">slowFilterPaeth</span><span class="op" id="6928563">(</span><span class="ident" id="6928564">cdat</span><span class="op" id="6928568">,</span>&nbsp;<span class="ident" id="6928570">pdat</span>&nbsp;<span class="op" id="6928575">[</span><span class="op" id="6928576">]</span><span class="builtintype" id="6928577">byte</span><span class="op" id="6928581">,</span>&nbsp;<span class="ident" id="6928583">bytesPerPixel</span>&nbsp;<span class="builtintype" id="6928597">int</span><span class="op" id="6928600">)</span>&nbsp;<span class="op" id="6928602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928605">for</span>&nbsp;<span class="ident" id="6928609">i</span>&nbsp;<span class="op" id="6928611">:=</span>&nbsp;<span class="num" id="6928614">0</span><span class="op" id="6928615">;</span>&nbsp;<span class="ident" id="6928617">i</span>&nbsp;<span class="op" id="6928619">&lt;</span>&nbsp;<span class="ident" id="6928621">bytesPerPixel</span><span class="op" id="6928634">;</span>&nbsp;<span class="ident" id="6928636">i</span><span class="op" id="6928637">++</span>&nbsp;<span class="op" id="6928640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6928644">cdat</span><span class="op" id="6928648">[</span><span class="ident" id="6928649">i</span><span class="op" id="6928650">]</span>&nbsp;<span class="op" id="6928652">+=</span>&nbsp;<span class="ident" id="6928655">paeth</span><span class="op" id="6928660">(</span><span class="num" id="6928661">0</span><span class="op" id="6928662">,</span>&nbsp;<span class="ident" id="6928664">pdat</span><span class="op" id="6928668">[</span><span class="ident" id="6928669">i</span><span class="op" id="6928670">]</span><span class="op" id="6928671">,</span>&nbsp;<span class="num" id="6928673">0</span><span class="op" id="6928674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6928677">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928680">for</span>&nbsp;<span class="ident" id="6928684">i</span>&nbsp;<span class="op" id="6928686">:=</span>&nbsp;<span class="ident" id="6928689">bytesPerPixel</span><span class="op" id="6928702">;</span>&nbsp;<span class="ident" id="6928704">i</span>&nbsp;<span class="op" id="6928706">&lt;</span>&nbsp;<span class="builtinfunc" id="6928708">len</span><span class="op" id="6928711">(</span><span class="ident" id="6928712">cdat</span><span class="op" id="6928716">)</span><span class="op" id="6928717">;</span>&nbsp;<span class="ident" id="6928719">i</span><span class="op" id="6928720">++</span>&nbsp;<span class="op" id="6928723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6928727">cdat</span><span class="op" id="6928731">[</span><span class="ident" id="6928732">i</span><span class="op" id="6928733">]</span>&nbsp;<span class="op" id="6928735">+=</span>&nbsp;<span class="ident" id="6928738">paeth</span><span class="op" id="6928743">(</span><span class="ident" id="6928744">cdat</span><span class="op" id="6928748">[</span><span class="ident" id="6928749">i</span><span class="op" id="6928750">-</span><span class="ident" id="6928751">bytesPerPixel</span><span class="op" id="6928764">]</span><span class="op" id="6928765">,</span>&nbsp;<span class="ident" id="6928767">pdat</span><span class="op" id="6928771">[</span><span class="ident" id="6928772">i</span><span class="op" id="6928773">]</span><span class="op" id="6928774">,</span>&nbsp;<span class="ident" id="6928776">pdat</span><span class="op" id="6928780">[</span><span class="ident" id="6928781">i</span><span class="op" id="6928782">-</span><span class="ident" id="6928783">bytesPerPixel</span><span class="op" id="6928796">]</span><span class="op" id="6928797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6928800">}</span><br>
<span class="lineno"></span><span class="op" id="6928802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="6928805">func</span>&nbsp;<span class="ident" id="6928810">TestPaeth</span><span class="op" id="6928819">(</span><span class="ident" id="6928820">t</span>&nbsp;<span class="op" id="6928822">*</span><span class="ident" id="6928823">testing</span><span class="op" id="6928830">.</span><span class="ident" id="6928831">T</span><span class="op" id="6928832">)</span>&nbsp;<span class="op" id="6928834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928837">for</span>&nbsp;<span class="ident" id="6928841">a</span>&nbsp;<span class="op" id="6928843">:=</span>&nbsp;<span class="num" id="6928846">0</span><span class="op" id="6928847">;</span>&nbsp;<span class="ident" id="6928849">a</span>&nbsp;<span class="op" id="6928851">&lt;</span>&nbsp;<span class="num" id="6928853">256</span><span class="op" id="6928856">;</span>&nbsp;<span class="ident" id="6928858">a</span>&nbsp;<span class="op" id="6928860">+=</span>&nbsp;<span class="num" id="6928863">15</span>&nbsp;<span class="op" id="6928866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928870">for</span>&nbsp;<span class="ident" id="6928874">b</span>&nbsp;<span class="op" id="6928876">:=</span>&nbsp;<span class="num" id="6928879">0</span><span class="op" id="6928880">;</span>&nbsp;<span class="ident" id="6928882">b</span>&nbsp;<span class="op" id="6928884">&lt;</span>&nbsp;<span class="num" id="6928886">256</span><span class="op" id="6928889">;</span>&nbsp;<span class="ident" id="6928891">b</span>&nbsp;<span class="op" id="6928893">+=</span>&nbsp;<span class="num" id="6928896">15</span>&nbsp;<span class="op" id="6928899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6928904">for</span>&nbsp;<span class="ident" id="6928908">c</span>&nbsp;<span class="op" id="6928910">:=</span>&nbsp;<span class="num" id="6928913">0</span><span class="op" id="6928914">;</span>&nbsp;<span class="ident" id="6928916">c</span>&nbsp;<span class="op" id="6928918">&lt;</span>&nbsp;<span class="num" id="6928920">256</span><span class="op" id="6928923">;</span>&nbsp;<span class="ident" id="6928925">c</span>&nbsp;<span class="op" id="6928927">+=</span>&nbsp;<span class="num" id="6928930">15</span>&nbsp;<span class="op" id="6928933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6928939">got</span>&nbsp;<span class="op" id="6928943">:=</span>&nbsp;<span class="ident" id="6928946">paeth</span><span class="op" id="6928951">(</span><span class="builtintype" id="6928952">uint8</span><span class="op" id="6928957">(</span><span class="ident" id="6928958">a</span><span class="op" id="6928959">)</span><span class="op" id="6928960">,</span>&nbsp;<span class="builtintype" id="6928962">uint8</span><span class="op" id="6928967">(</span><span class="ident" id="6928968">b</span><span class="op" id="6928969">)</span><span class="op" id="6928970">,</span>&nbsp;<span class="builtintype" id="6928972">uint8</span><span class="op" id="6928977">(</span><span class="ident" id="6928978">c</span><span class="op" id="6928979">)</span><span class="op" id="6928980">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6928986">want</span>&nbsp;<span class="op" id="6928991">:=</span>&nbsp;<span class="ident" id="6928994">slowPaeth</span><span class="op" id="6929003">(</span><span class="builtintype" id="6929004">uint8</span><span class="op" id="6929009">(</span><span class="ident" id="6929010">a</span><span class="op" id="6929011">)</span><span class="op" id="6929012">,</span>&nbsp;<span class="builtintype" id="6929014">uint8</span><span class="op" id="6929019">(</span><span class="ident" id="6929020">b</span><span class="op" id="6929021">)</span><span class="op" id="6929022">,</span>&nbsp;<span class="builtintype" id="6929024">uint8</span><span class="op" id="6929029">(</span><span class="ident" id="6929030">c</span><span class="op" id="6929031">)</span><span class="op" id="6929032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6929038">if</span>&nbsp;<span class="ident" id="6929041">got</span>&nbsp;<span class="op" id="6929045">!=</span>&nbsp;<span class="ident" id="6929048">want</span>&nbsp;<span class="op" id="6929053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929060">t</span><span class="op" id="6929061">.</span><span class="ident" id="6929062">Errorf</span><span class="op" id="6929068">(</span><span class="string" id="6929069">&#34;a,&nbsp;b,&nbsp;c&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6929108">,</span>&nbsp;<span class="ident" id="6929110">a</span><span class="op" id="6929111">,</span>&nbsp;<span class="ident" id="6929113">b</span><span class="op" id="6929114">,</span>&nbsp;<span class="ident" id="6929116">c</span><span class="op" id="6929117">,</span>&nbsp;<span class="ident" id="6929119">got</span><span class="op" id="6929122">,</span>&nbsp;<span class="ident" id="6929124">want</span><span class="op" id="6929128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929139">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929146">}</span><br>
<span class="lineno"></span><span class="op" id="6929148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6929151">func</span>&nbsp;<span class="ident" id="6929156">BenchmarkPaeth</span><span class="op" id="6929170">(</span><span class="ident" id="6929171">b</span>&nbsp;<span class="op" id="6929173">*</span><span class="ident" id="6929174">testing</span><span class="op" id="6929181">.</span><span class="ident" id="6929182">B</span><span class="op" id="6929183">)</span>&nbsp;<span class="op" id="6929185">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6929188">for</span>&nbsp;<span class="ident" id="6929192">i</span>&nbsp;<span class="op" id="6929194">:=</span>&nbsp;<span class="num" id="6929197">0</span><span class="op" id="6929198">;</span>&nbsp;<span class="ident" id="6929200">i</span>&nbsp;<span class="op" id="6929202">&lt;</span>&nbsp;<span class="ident" id="6929204">b</span><span class="op" id="6929205">.</span><span class="ident" id="6929206">N</span><span class="op" id="6929207">;</span>&nbsp;<span class="ident" id="6929209">i</span><span class="op" id="6929210">++</span>&nbsp;<span class="op" id="6929213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929217">paeth</span><span class="op" id="6929222">(</span><span class="builtintype" id="6929223">uint8</span><span class="op" id="6929228">(</span><span class="ident" id="6929229">i</span><span class="op" id="6929230">&gt;&gt;</span><span class="num" id="6929232">16</span><span class="op" id="6929234">)</span><span class="op" id="6929235">,</span>&nbsp;<span class="builtintype" id="6929237">uint8</span><span class="op" id="6929242">(</span><span class="ident" id="6929243">i</span><span class="op" id="6929244">&gt;&gt;</span><span class="num" id="6929246">8</span><span class="op" id="6929247">)</span><span class="op" id="6929248">,</span>&nbsp;<span class="builtintype" id="6929250">uint8</span><span class="op" id="6929255">(</span><span class="ident" id="6929256">i</span><span class="op" id="6929257">)</span><span class="op" id="6929258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929261">}</span><br>
<span class="lineno"></span><span class="op" id="6929263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="6929266">func</span>&nbsp;<span class="ident" id="6929271">TestPaethDecode</span><span class="op" id="6929286">(</span><span class="ident" id="6929287">t</span>&nbsp;<span class="op" id="6929289">*</span><span class="ident" id="6929290">testing</span><span class="op" id="6929297">.</span><span class="ident" id="6929298">T</span><span class="op" id="6929299">)</span>&nbsp;<span class="op" id="6929301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929304">pdat0</span>&nbsp;<span class="op" id="6929310">:=</span>&nbsp;<span class="builtinfunc" id="6929313">make</span><span class="op" id="6929317">(</span><span class="op" id="6929318">[</span><span class="op" id="6929319">]</span><span class="builtintype" id="6929320">byte</span><span class="op" id="6929324">,</span>&nbsp;<span class="num" id="6929326">32</span><span class="op" id="6929328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929331">pdat1</span>&nbsp;<span class="op" id="6929337">:=</span>&nbsp;<span class="builtinfunc" id="6929340">make</span><span class="op" id="6929344">(</span><span class="op" id="6929345">[</span><span class="op" id="6929346">]</span><span class="builtintype" id="6929347">byte</span><span class="op" id="6929351">,</span>&nbsp;<span class="num" id="6929353">32</span><span class="op" id="6929355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929358">pdat2</span>&nbsp;<span class="op" id="6929364">:=</span>&nbsp;<span class="builtinfunc" id="6929367">make</span><span class="op" id="6929371">(</span><span class="op" id="6929372">[</span><span class="op" id="6929373">]</span><span class="builtintype" id="6929374">byte</span><span class="op" id="6929378">,</span>&nbsp;<span class="num" id="6929380">32</span><span class="op" id="6929382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929385">cdat0</span>&nbsp;<span class="op" id="6929391">:=</span>&nbsp;<span class="builtinfunc" id="6929394">make</span><span class="op" id="6929398">(</span><span class="op" id="6929399">[</span><span class="op" id="6929400">]</span><span class="builtintype" id="6929401">byte</span><span class="op" id="6929405">,</span>&nbsp;<span class="num" id="6929407">32</span><span class="op" id="6929409">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929412">cdat1</span>&nbsp;<span class="op" id="6929418">:=</span>&nbsp;<span class="builtinfunc" id="6929421">make</span><span class="op" id="6929425">(</span><span class="op" id="6929426">[</span><span class="op" id="6929427">]</span><span class="builtintype" id="6929428">byte</span><span class="op" id="6929432">,</span>&nbsp;<span class="num" id="6929434">32</span><span class="op" id="6929436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929439">cdat2</span>&nbsp;<span class="op" id="6929445">:=</span>&nbsp;<span class="builtinfunc" id="6929448">make</span><span class="op" id="6929452">(</span><span class="op" id="6929453">[</span><span class="op" id="6929454">]</span><span class="builtintype" id="6929455">byte</span><span class="op" id="6929459">,</span>&nbsp;<span class="num" id="6929461">32</span><span class="op" id="6929463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929466">r</span>&nbsp;<span class="op" id="6929468">:=</span>&nbsp;<span class="ident" id="6929471">rand</span><span class="op" id="6929475">.</span><span class="ident" id="6929476">New</span><span class="op" id="6929479">(</span><span class="ident" id="6929480">rand</span><span class="op" id="6929484">.</span><span class="ident" id="6929485">NewSource</span><span class="op" id="6929494">(</span><span class="num" id="6929495">1</span><span class="op" id="6929496">)</span><span class="op" id="6929497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6929500">for</span>&nbsp;<span class="ident" id="6929504">bytesPerPixel</span>&nbsp;<span class="op" id="6929518">:=</span>&nbsp;<span class="num" id="6929521">1</span><span class="op" id="6929522">;</span>&nbsp;<span class="ident" id="6929524">bytesPerPixel</span>&nbsp;<span class="op" id="6929538">&lt;=</span>&nbsp;<span class="num" id="6929541">8</span><span class="op" id="6929542">;</span>&nbsp;<span class="ident" id="6929544">bytesPerPixel</span><span class="op" id="6929557">++</span>&nbsp;<span class="op" id="6929560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6929564">for</span>&nbsp;<span class="ident" id="6929568">i</span>&nbsp;<span class="op" id="6929570">:=</span>&nbsp;<span class="num" id="6929573">0</span><span class="op" id="6929574">;</span>&nbsp;<span class="ident" id="6929576">i</span>&nbsp;<span class="op" id="6929578">&lt;</span>&nbsp;<span class="num" id="6929580">100</span><span class="op" id="6929583">;</span>&nbsp;<span class="ident" id="6929585">i</span><span class="op" id="6929586">++</span>&nbsp;<span class="op" id="6929589">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6929594">for</span>&nbsp;<span class="ident" id="6929598">j</span>&nbsp;<span class="op" id="6929600">:=</span>&nbsp;<span class="keyword" id="6929603">range</span>&nbsp;<span class="ident" id="6929609">pdat0</span>&nbsp;<span class="op" id="6929615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929621">pdat0</span><span class="op" id="6929626">[</span><span class="ident" id="6929627">j</span><span class="op" id="6929628">]</span>&nbsp;<span class="op" id="6929630">=</span>&nbsp;<span class="builtintype" id="6929632">uint8</span><span class="op" id="6929637">(</span><span class="ident" id="6929638">r</span><span class="op" id="6929639">.</span><span class="ident" id="6929640">Uint32</span><span class="op" id="6929646">(</span><span class="op" id="6929647">)</span><span class="op" id="6929648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929654">cdat0</span><span class="op" id="6929659">[</span><span class="ident" id="6929660">j</span><span class="op" id="6929661">]</span>&nbsp;<span class="op" id="6929663">=</span>&nbsp;<span class="builtintype" id="6929665">uint8</span><span class="op" id="6929670">(</span><span class="ident" id="6929671">r</span><span class="op" id="6929672">.</span><span class="ident" id="6929673">Uint32</span><span class="op" id="6929679">(</span><span class="op" id="6929680">)</span><span class="op" id="6929681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6929686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6929691">copy</span><span class="op" id="6929695">(</span><span class="ident" id="6929696">pdat1</span><span class="op" id="6929701">,</span>&nbsp;<span class="ident" id="6929703">pdat0</span><span class="op" id="6929708">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6929713">copy</span><span class="op" id="6929717">(</span><span class="ident" id="6929718">pdat2</span><span class="op" id="6929723">,</span>&nbsp;<span class="ident" id="6929725">pdat0</span><span class="op" id="6929730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6929735">copy</span><span class="op" id="6929739">(</span><span class="ident" id="6929740">cdat1</span><span class="op" id="6929745">,</span>&nbsp;<span class="ident" id="6929747">cdat0</span><span class="op" id="6929752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6929757">copy</span><span class="op" id="6929761">(</span><span class="ident" id="6929762">cdat2</span><span class="op" id="6929767">,</span>&nbsp;<span class="ident" id="6929769">cdat0</span><span class="op" id="6929774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929779">filterPaeth</span><span class="op" id="6929790">(</span><span class="ident" id="6929791">cdat1</span><span class="op" id="6929796">,</span>&nbsp;<span class="ident" id="6929798">pdat1</span><span class="op" id="6929803">,</span>&nbsp;<span class="ident" id="6929805">bytesPerPixel</span><span class="op" id="6929818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929823">slowFilterPaeth</span><span class="op" id="6929838">(</span><span class="ident" id="6929839">cdat2</span><span class="op" id="6929844">,</span>&nbsp;<span class="ident" id="6929846">pdat2</span><span class="op" id="6929851">,</span>&nbsp;<span class="ident" id="6929853">bytesPerPixel</span><span class="op" id="6929866">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6929871">if</span>&nbsp;<span class="op" id="6929874">!</span><span class="ident" id="6929875">bytes</span><span class="op" id="6929880">.</span><span class="ident" id="6929881">Equal</span><span class="op" id="6929886">(</span><span class="ident" id="6929887">cdat1</span><span class="op" id="6929892">,</span>&nbsp;<span class="ident" id="6929894">cdat2</span><span class="op" id="6929899">)</span>&nbsp;<span class="op" id="6929901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6929907">t</span><span class="op" id="6929908">.</span><span class="ident" id="6929909">Errorf</span><span class="op" id="6929915">(</span><span class="string" id="6929916">&#34;bytesPerPixel:&nbsp;%d\npdat0:&nbsp;%&nbsp;x\ncdat0:&nbsp;%&nbsp;x\ngot:&nbsp;&nbsp;&nbsp;%&nbsp;x\nwant:&nbsp;&nbsp;%&nbsp;x&#34;</span><span class="op" id="6929983">,</span>&nbsp;<span class="ident" id="6929985">bytesPerPixel</span><span class="op" id="6929998">,</span>&nbsp;<span class="ident" id="6930000">pdat0</span><span class="op" id="6930005">,</span>&nbsp;<span class="ident" id="6930007">cdat0</span><span class="op" id="6930012">,</span>&nbsp;<span class="ident" id="6930014">cdat1</span><span class="op" id="6930019">,</span>&nbsp;<span class="ident" id="6930021">cdat2</span><span class="op" id="6930026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6930032">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930045">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6930048">}</span><br>
<span class="lineno"></span><span class="op" id="6930050">}</span>
</div>
</body>
</html>
