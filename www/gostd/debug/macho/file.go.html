<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html" class="current">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6127855">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6127911">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6127965">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6128016">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="6128075">package</span>&nbsp;<span class="ident" id="6128083">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6128090">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6128142">import</span>&nbsp;<span class="op" id="6128149">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6128152">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6128161">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6128176">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6128195">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6128202">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6128208">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="6128213">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6128216">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="6128258">type</span>&nbsp;<span class="ident" id="6128263">File</span>&nbsp;<span class="keyword" id="6128268">struct</span>&nbsp;<span class="op" id="6128275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128278">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128290">ByteOrder</span>&nbsp;<span class="ident" id="6128300">binary</span><span class="op" id="6128306">.</span><span class="ident" id="6128307">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128318">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6128328">[</span><span class="op" id="6128329">]</span><span class="ident" id="6128330">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128336">Sections</span>&nbsp;&nbsp;<span class="op" id="6128346">[</span><span class="op" id="6128347">]</span><span class="op" id="6128348">*</span><span class="ident" id="6128349">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128359">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6128368">*</span><span class="ident" id="6128369">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128377">Dysymtab</span>&nbsp;<span class="op" id="6128386">*</span><span class="ident" id="6128387">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128398">closer</span>&nbsp;<span class="ident" id="6128405">io</span><span class="op" id="6128407">.</span><span class="ident" id="6128408">Closer</span><br>
<span class="lineno">30</span><span class="op" id="6128415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6128418">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6128464">type</span>&nbsp;<span class="ident" id="6128469">Load</span>&nbsp;<span class="keyword" id="6128474">interface</span>&nbsp;<span class="op" id="6128484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128487">Raw</span><span class="op" id="6128490">(</span><span class="op" id="6128491">)</span>&nbsp;<span class="op" id="6128493">[</span><span class="op" id="6128494">]</span><span class="builtintype" id="6128495">byte</span><br>
<span class="lineno">35</span><span class="op" id="6128500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6128503">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6128571">type</span>&nbsp;<span class="ident" id="6128576">LoadBytes</span>&nbsp;<span class="op" id="6128586">[</span><span class="op" id="6128587">]</span><span class="builtintype" id="6128588">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6128594">func</span>&nbsp;<span class="op" id="6128599">(</span><span class="ident" id="6128600">b</span>&nbsp;<span class="ident" id="6128602">LoadBytes</span><span class="op" id="6128611">)</span>&nbsp;<span class="ident" id="6128613">Raw</span><span class="op" id="6128616">(</span><span class="op" id="6128617">)</span>&nbsp;<span class="op" id="6128619">[</span><span class="op" id="6128620">]</span><span class="builtintype" id="6128621">byte</span>&nbsp;<span class="op" id="6128626">{</span>&nbsp;<span class="keyword" id="6128628">return</span>&nbsp;<span class="ident" id="6128635">b</span>&nbsp;<span class="op" id="6128637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6128640">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6128725">type</span>&nbsp;<span class="ident" id="6128730">SegmentHeader</span>&nbsp;<span class="keyword" id="6128744">struct</span>&nbsp;<span class="op" id="6128751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128754">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128762">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128771">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6128779">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128787">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6128795">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128803">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6128811">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128819">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6128827">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128835">Offset</span>&nbsp;&nbsp;<span class="builtintype" id="6128843">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128851">Filesz</span>&nbsp;&nbsp;<span class="builtintype" id="6128859">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128867">Maxprot</span>&nbsp;<span class="builtintype" id="6128875">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128883">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6128891">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128899">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6128907">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6128915">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6128923">uint32</span><br>
<span class="lineno">55</span><span class="op" id="6128930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6128933">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6129005">type</span>&nbsp;<span class="ident" id="6129010">Segment</span>&nbsp;<span class="keyword" id="6129018">struct</span>&nbsp;<span class="op" id="6129025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129028">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129039">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6129055">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6129093">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6129133">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6129168">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6129216">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6129266">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129290">io</span><span class="op" id="6129292">.</span><span class="ident" id="6129293">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129303">sr</span>&nbsp;<span class="op" id="6129306">*</span><span class="ident" id="6129307">io</span><span class="op" id="6129309">.</span><span class="ident" id="6129310">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="6129324">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6129327">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6129382">func</span>&nbsp;<span class="op" id="6129387">(</span><span class="ident" id="6129388">s</span>&nbsp;<span class="op" id="6129390">*</span><span class="ident" id="6129391">Segment</span><span class="op" id="6129398">)</span>&nbsp;<span class="ident" id="6129400">Data</span><span class="op" id="6129404">(</span><span class="op" id="6129405">)</span>&nbsp;<span class="op" id="6129407">(</span><span class="op" id="6129408">[</span><span class="op" id="6129409">]</span><span class="builtintype" id="6129410">byte</span><span class="op" id="6129414">,</span>&nbsp;<span class="builtintype" id="6129416">error</span><span class="op" id="6129421">)</span>&nbsp;<span class="op" id="6129423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129426">dat</span>&nbsp;<span class="op" id="6129430">:=</span>&nbsp;<span class="builtinfunc" id="6129433">make</span><span class="op" id="6129437">(</span><span class="op" id="6129438">[</span><span class="op" id="6129439">]</span><span class="builtintype" id="6129440">byte</span><span class="op" id="6129444">,</span>&nbsp;<span class="ident" id="6129446">s</span><span class="op" id="6129447">.</span><span class="ident" id="6129448">sr</span><span class="op" id="6129450">.</span><span class="ident" id="6129451">Size</span><span class="op" id="6129455">(</span><span class="op" id="6129456">)</span><span class="op" id="6129457">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129460">n</span><span class="op" id="6129461">,</span>&nbsp;<span class="ident" id="6129463">err</span>&nbsp;<span class="op" id="6129467">:=</span>&nbsp;<span class="ident" id="6129470">s</span><span class="op" id="6129471">.</span><span class="ident" id="6129472">sr</span><span class="op" id="6129474">.</span><span class="ident" id="6129475">ReadAt</span><span class="op" id="6129481">(</span><span class="ident" id="6129482">dat</span><span class="op" id="6129485">,</span>&nbsp;<span class="num" id="6129487">0</span><span class="op" id="6129488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6129491">if</span>&nbsp;<span class="ident" id="6129494">n</span>&nbsp;<span class="op" id="6129496">==</span>&nbsp;<span class="builtinfunc" id="6129499">len</span><span class="op" id="6129502">(</span><span class="ident" id="6129503">dat</span><span class="op" id="6129506">)</span>&nbsp;<span class="op" id="6129508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129512">err</span>&nbsp;<span class="op" id="6129516">=</span>&nbsp;<span class="builtintype" id="6129518">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6129523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6129526">return</span>&nbsp;<span class="ident" id="6129533">dat</span><span class="op" id="6129536">[</span><span class="num" id="6129537">0</span><span class="op" id="6129538">:</span><span class="ident" id="6129539">n</span><span class="op" id="6129540">]</span><span class="op" id="6129541">,</span>&nbsp;<span class="ident" id="6129543">err</span><br>
<span class="lineno">80</span><span class="op" id="6129547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6129550">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6129604">func</span>&nbsp;<span class="op" id="6129609">(</span><span class="ident" id="6129610">s</span>&nbsp;<span class="op" id="6129612">*</span><span class="ident" id="6129613">Segment</span><span class="op" id="6129620">)</span>&nbsp;<span class="ident" id="6129622">Open</span><span class="op" id="6129626">(</span><span class="op" id="6129627">)</span>&nbsp;<span class="ident" id="6129629">io</span><span class="op" id="6129631">.</span><span class="ident" id="6129632">ReadSeeker</span>&nbsp;<span class="op" id="6129643">{</span>&nbsp;<span class="keyword" id="6129645">return</span>&nbsp;<span class="ident" id="6129652">io</span><span class="op" id="6129654">.</span><span class="ident" id="6129655">NewSectionReader</span><span class="op" id="6129671">(</span><span class="ident" id="6129672">s</span><span class="op" id="6129673">.</span><span class="ident" id="6129674">sr</span><span class="op" id="6129676">,</span>&nbsp;<span class="num" id="6129678">0</span><span class="op" id="6129679">,</span>&nbsp;<span class="num" id="6129681">1</span><span class="op" id="6129682">&lt;&lt;</span><span class="num" id="6129684">63</span><span class="op" id="6129686">-</span><span class="num" id="6129687">1</span><span class="op" id="6129688">)</span>&nbsp;<span class="op" id="6129690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="6129693">type</span>&nbsp;<span class="ident" id="6129698">SectionHeader</span>&nbsp;<span class="keyword" id="6129712">struct</span>&nbsp;<span class="op" id="6129719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129722">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6129729">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129737">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6129744">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129752">Addr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6129759">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129767">Size</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6129774">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129782">Offset</span>&nbsp;<span class="builtintype" id="6129789">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129797">Align</span>&nbsp;&nbsp;<span class="builtintype" id="6129804">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129812">Reloff</span>&nbsp;<span class="builtintype" id="6129819">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129827">Nreloc</span>&nbsp;<span class="builtintype" id="6129834">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129842">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="6129849">uint32</span><br>
<span class="lineno">95</span><span class="op" id="6129856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6129859">type</span>&nbsp;<span class="ident" id="6129864">Section</span>&nbsp;<span class="keyword" id="6129872">struct</span>&nbsp;<span class="op" id="6129879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6129882">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6129898">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6129936">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6129976">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6130011">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6130059">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6130109">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130133">io</span><span class="op" id="6130135">.</span><span class="ident" id="6130136">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130146">sr</span>&nbsp;<span class="op" id="6130149">*</span><span class="ident" id="6130150">io</span><span class="op" id="6130152">.</span><span class="ident" id="6130153">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="6130167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6130170">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6130232">func</span>&nbsp;<span class="op" id="6130237">(</span><span class="ident" id="6130238">s</span>&nbsp;<span class="op" id="6130240">*</span><span class="ident" id="6130241">Section</span><span class="op" id="6130248">)</span>&nbsp;<span class="ident" id="6130250">Data</span><span class="op" id="6130254">(</span><span class="op" id="6130255">)</span>&nbsp;<span class="op" id="6130257">(</span><span class="op" id="6130258">[</span><span class="op" id="6130259">]</span><span class="builtintype" id="6130260">byte</span><span class="op" id="6130264">,</span>&nbsp;<span class="builtintype" id="6130266">error</span><span class="op" id="6130271">)</span>&nbsp;<span class="op" id="6130273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130276">dat</span>&nbsp;<span class="op" id="6130280">:=</span>&nbsp;<span class="builtinfunc" id="6130283">make</span><span class="op" id="6130287">(</span><span class="op" id="6130288">[</span><span class="op" id="6130289">]</span><span class="builtintype" id="6130290">byte</span><span class="op" id="6130294">,</span>&nbsp;<span class="ident" id="6130296">s</span><span class="op" id="6130297">.</span><span class="ident" id="6130298">sr</span><span class="op" id="6130300">.</span><span class="ident" id="6130301">Size</span><span class="op" id="6130305">(</span><span class="op" id="6130306">)</span><span class="op" id="6130307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130310">n</span><span class="op" id="6130311">,</span>&nbsp;<span class="ident" id="6130313">err</span>&nbsp;<span class="op" id="6130317">:=</span>&nbsp;<span class="ident" id="6130320">s</span><span class="op" id="6130321">.</span><span class="ident" id="6130322">sr</span><span class="op" id="6130324">.</span><span class="ident" id="6130325">ReadAt</span><span class="op" id="6130331">(</span><span class="ident" id="6130332">dat</span><span class="op" id="6130335">,</span>&nbsp;<span class="num" id="6130337">0</span><span class="op" id="6130338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6130341">if</span>&nbsp;<span class="ident" id="6130344">n</span>&nbsp;<span class="op" id="6130346">==</span>&nbsp;<span class="builtinfunc" id="6130349">len</span><span class="op" id="6130352">(</span><span class="ident" id="6130353">dat</span><span class="op" id="6130356">)</span>&nbsp;<span class="op" id="6130358">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130362">err</span>&nbsp;<span class="op" id="6130366">=</span>&nbsp;<span class="builtintype" id="6130368">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6130373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6130376">return</span>&nbsp;<span class="ident" id="6130383">dat</span><span class="op" id="6130386">[</span><span class="num" id="6130387">0</span><span class="op" id="6130388">:</span><span class="ident" id="6130389">n</span><span class="op" id="6130390">]</span><span class="op" id="6130391">,</span>&nbsp;<span class="ident" id="6130393">err</span><br>
<span class="lineno"></span><span class="op" id="6130397">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="6130400">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="6130461">func</span>&nbsp;<span class="op" id="6130466">(</span><span class="ident" id="6130467">s</span>&nbsp;<span class="op" id="6130469">*</span><span class="ident" id="6130470">Section</span><span class="op" id="6130477">)</span>&nbsp;<span class="ident" id="6130479">Open</span><span class="op" id="6130483">(</span><span class="op" id="6130484">)</span>&nbsp;<span class="ident" id="6130486">io</span><span class="op" id="6130488">.</span><span class="ident" id="6130489">ReadSeeker</span>&nbsp;<span class="op" id="6130500">{</span>&nbsp;<span class="keyword" id="6130502">return</span>&nbsp;<span class="ident" id="6130509">io</span><span class="op" id="6130511">.</span><span class="ident" id="6130512">NewSectionReader</span><span class="op" id="6130528">(</span><span class="ident" id="6130529">s</span><span class="op" id="6130530">.</span><span class="ident" id="6130531">sr</span><span class="op" id="6130533">,</span>&nbsp;<span class="num" id="6130535">0</span><span class="op" id="6130536">,</span>&nbsp;<span class="num" id="6130538">1</span><span class="op" id="6130539">&lt;&lt;</span><span class="num" id="6130541">63</span><span class="op" id="6130543">-</span><span class="num" id="6130544">1</span><span class="op" id="6130545">)</span>&nbsp;<span class="op" id="6130547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6130550">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6130611">type</span>&nbsp;<span class="ident" id="6130616">Dylib</span>&nbsp;<span class="keyword" id="6130622">struct</span>&nbsp;<span class="op" id="6130629">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130632">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130643">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6130658">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130666">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6130681">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130689">CurrentVersion</span>&nbsp;<span class="builtintype" id="6130704">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130712">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="6130727">uint32</span><br>
<span class="lineno">130</span><span class="op" id="6130734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6130737">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="6130791">type</span>&nbsp;<span class="ident" id="6130796">Symtab</span>&nbsp;<span class="keyword" id="6130803">struct</span>&nbsp;<span class="op" id="6130810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130813">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130824">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130835">Syms</span>&nbsp;<span class="op" id="6130840">[</span><span class="op" id="6130841">]</span><span class="ident" id="6130842">Symbol</span><br>
<span class="lineno"></span><span class="op" id="6130849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6130852">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="6130916">type</span>&nbsp;<span class="ident" id="6130921">Dysymtab</span>&nbsp;<span class="keyword" id="6130930">struct</span>&nbsp;<span class="op" id="6130937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130940">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130951">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6130964">IndirectSyms</span>&nbsp;<span class="op" id="6130977">[</span><span class="op" id="6130978">]</span><span class="builtintype" id="6130979">uint32</span>&nbsp;<span class="comment" id="6130986">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="6131014">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="6131017">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6131042">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6131105">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6131156">type</span>&nbsp;<span class="ident" id="6131161">FormatError</span>&nbsp;<span class="keyword" id="6131173">struct</span>&nbsp;<span class="op" id="6131180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131183">off</span>&nbsp;<span class="builtintype" id="6131187">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131194">msg</span>&nbsp;<span class="builtintype" id="6131198">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131206">val</span>&nbsp;<span class="keyword" id="6131210">interface</span><span class="op" id="6131219">{</span><span class="op" id="6131220">}</span><br>
<span class="lineno"></span><span class="op" id="6131222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6131225">func</span>&nbsp;<span class="op" id="6131230">(</span><span class="ident" id="6131231">e</span>&nbsp;<span class="op" id="6131233">*</span><span class="ident" id="6131234">FormatError</span><span class="op" id="6131245">)</span>&nbsp;<span class="ident" id="6131247">Error</span><span class="op" id="6131252">(</span><span class="op" id="6131253">)</span>&nbsp;<span class="builtintype" id="6131255">string</span>&nbsp;<span class="op" id="6131262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131265">msg</span>&nbsp;<span class="op" id="6131269">:=</span>&nbsp;<span class="ident" id="6131272">e</span><span class="op" id="6131273">.</span><span class="ident" id="6131274">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6131279">if</span>&nbsp;<span class="ident" id="6131282">e</span><span class="op" id="6131283">.</span><span class="ident" id="6131284">val</span>&nbsp;<span class="op" id="6131288">!=</span>&nbsp;<span class="builtintype" id="6131291">nil</span>&nbsp;<span class="op" id="6131295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131299">msg</span>&nbsp;<span class="op" id="6131303">+=</span>&nbsp;<span class="ident" id="6131306">fmt</span><span class="op" id="6131309">.</span><span class="ident" id="6131310">Sprintf</span><span class="op" id="6131317">(</span><span class="string" id="6131318">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="6131325">,</span>&nbsp;<span class="ident" id="6131327">e</span><span class="op" id="6131328">.</span><span class="ident" id="6131329">val</span><span class="op" id="6131332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6131335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131338">msg</span>&nbsp;<span class="op" id="6131342">+=</span>&nbsp;<span class="ident" id="6131345">fmt</span><span class="op" id="6131348">.</span><span class="ident" id="6131349">Sprintf</span><span class="op" id="6131356">(</span><span class="string" id="6131357">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="6131381">,</span>&nbsp;<span class="ident" id="6131383">e</span><span class="op" id="6131384">.</span><span class="ident" id="6131385">off</span><span class="op" id="6131388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6131391">return</span>&nbsp;<span class="ident" id="6131398">msg</span><br>
<span class="lineno">165</span><span class="op" id="6131402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6131405">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="6131492">func</span>&nbsp;<span class="ident" id="6131497">Open</span><span class="op" id="6131501">(</span><span class="ident" id="6131502">name</span>&nbsp;<span class="builtintype" id="6131507">string</span><span class="op" id="6131513">)</span>&nbsp;<span class="op" id="6131515">(</span><span class="op" id="6131516">*</span><span class="ident" id="6131517">File</span><span class="op" id="6131521">,</span>&nbsp;<span class="builtintype" id="6131523">error</span><span class="op" id="6131528">)</span>&nbsp;<span class="op" id="6131530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131533">f</span><span class="op" id="6131534">,</span>&nbsp;<span class="ident" id="6131536">err</span>&nbsp;<span class="op" id="6131540">:=</span>&nbsp;<span class="ident" id="6131543">os</span><span class="op" id="6131545">.</span><span class="ident" id="6131546">Open</span><span class="op" id="6131550">(</span><span class="ident" id="6131551">name</span><span class="op" id="6131555">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6131558">if</span>&nbsp;<span class="ident" id="6131561">err</span>&nbsp;<span class="op" id="6131565">!=</span>&nbsp;<span class="builtintype" id="6131568">nil</span>&nbsp;<span class="op" id="6131572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6131576">return</span>&nbsp;<span class="builtintype" id="6131583">nil</span><span class="op" id="6131586">,</span>&nbsp;<span class="ident" id="6131588">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6131593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131596">ff</span><span class="op" id="6131598">,</span>&nbsp;<span class="ident" id="6131600">err</span>&nbsp;<span class="op" id="6131604">:=</span>&nbsp;<span class="ident" id="6131607">NewFile</span><span class="op" id="6131614">(</span><span class="ident" id="6131615">f</span><span class="op" id="6131616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6131619">if</span>&nbsp;<span class="ident" id="6131622">err</span>&nbsp;<span class="op" id="6131626">!=</span>&nbsp;<span class="builtintype" id="6131629">nil</span>&nbsp;<span class="op" id="6131633">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131637">f</span><span class="op" id="6131638">.</span><span class="ident" id="6131639">Close</span><span class="op" id="6131644">(</span><span class="op" id="6131645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6131649">return</span>&nbsp;<span class="builtintype" id="6131656">nil</span><span class="op" id="6131659">,</span>&nbsp;<span class="ident" id="6131661">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6131666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131669">ff</span><span class="op" id="6131671">.</span><span class="ident" id="6131672">closer</span>&nbsp;<span class="op" id="6131679">=</span>&nbsp;<span class="ident" id="6131681">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6131684">return</span>&nbsp;<span class="ident" id="6131691">ff</span><span class="op" id="6131693">,</span>&nbsp;<span class="builtintype" id="6131695">nil</span><br>
<span class="lineno">180</span><span class="op" id="6131699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6131702">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="6131728">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="6131795">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="6131819">func</span>&nbsp;<span class="op" id="6131824">(</span><span class="ident" id="6131825">f</span>&nbsp;<span class="op" id="6131827">*</span><span class="ident" id="6131828">File</span><span class="op" id="6131832">)</span>&nbsp;<span class="ident" id="6131834">Close</span><span class="op" id="6131839">(</span><span class="op" id="6131840">)</span>&nbsp;<span class="builtintype" id="6131842">error</span>&nbsp;<span class="op" id="6131848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6131851">var</span>&nbsp;<span class="ident" id="6131855">err</span>&nbsp;<span class="builtintype" id="6131859">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6131866">if</span>&nbsp;<span class="ident" id="6131869">f</span><span class="op" id="6131870">.</span><span class="ident" id="6131871">closer</span>&nbsp;<span class="op" id="6131878">!=</span>&nbsp;<span class="builtintype" id="6131881">nil</span>&nbsp;<span class="op" id="6131885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131889">err</span>&nbsp;<span class="op" id="6131893">=</span>&nbsp;<span class="ident" id="6131895">f</span><span class="op" id="6131896">.</span><span class="ident" id="6131897">closer</span><span class="op" id="6131903">.</span><span class="ident" id="6131904">Close</span><span class="op" id="6131909">(</span><span class="op" id="6131910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6131914">f</span><span class="op" id="6131915">.</span><span class="ident" id="6131916">closer</span>&nbsp;<span class="op" id="6131923">=</span>&nbsp;<span class="builtintype" id="6131925">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6131930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6131933">return</span>&nbsp;<span class="ident" id="6131940">err</span><br>
<span class="lineno"></span><span class="op" id="6131944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6131947">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="6132032">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="6132105">func</span>&nbsp;<span class="ident" id="6132110">NewFile</span><span class="op" id="6132117">(</span><span class="ident" id="6132118">r</span>&nbsp;<span class="ident" id="6132120">io</span><span class="op" id="6132122">.</span><span class="ident" id="6132123">ReaderAt</span><span class="op" id="6132131">)</span>&nbsp;<span class="op" id="6132133">(</span><span class="op" id="6132134">*</span><span class="ident" id="6132135">File</span><span class="op" id="6132139">,</span>&nbsp;<span class="builtintype" id="6132141">error</span><span class="op" id="6132146">)</span>&nbsp;<span class="op" id="6132148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132151">f</span>&nbsp;<span class="op" id="6132153">:=</span>&nbsp;<span class="builtinfunc" id="6132156">new</span><span class="op" id="6132159">(</span><span class="ident" id="6132160">File</span><span class="op" id="6132164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132167">sr</span>&nbsp;<span class="op" id="6132170">:=</span>&nbsp;<span class="ident" id="6132173">io</span><span class="op" id="6132175">.</span><span class="ident" id="6132176">NewSectionReader</span><span class="op" id="6132192">(</span><span class="ident" id="6132193">r</span><span class="op" id="6132194">,</span>&nbsp;<span class="num" id="6132196">0</span><span class="op" id="6132197">,</span>&nbsp;<span class="num" id="6132199">1</span><span class="op" id="6132200">&lt;&lt;</span><span class="num" id="6132202">63</span><span class="op" id="6132204">-</span><span class="num" id="6132205">1</span><span class="op" id="6132206">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6132210">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6132272">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132327">var</span>&nbsp;<span class="ident" id="6132331">ident</span>&nbsp;<span class="op" id="6132337">[</span><span class="num" id="6132338">4</span><span class="op" id="6132339">]</span><span class="builtintype" id="6132340">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132346">if</span>&nbsp;<span class="ident" id="6132349">_</span><span class="op" id="6132350">,</span>&nbsp;<span class="ident" id="6132352">err</span>&nbsp;<span class="op" id="6132356">:=</span>&nbsp;<span class="ident" id="6132359">r</span><span class="op" id="6132360">.</span><span class="ident" id="6132361">ReadAt</span><span class="op" id="6132367">(</span><span class="ident" id="6132368">ident</span><span class="op" id="6132373">[</span><span class="num" id="6132374">0</span><span class="op" id="6132375">:</span><span class="op" id="6132376">]</span><span class="op" id="6132377">,</span>&nbsp;<span class="num" id="6132379">0</span><span class="op" id="6132380">)</span><span class="op" id="6132381">;</span>&nbsp;<span class="ident" id="6132383">err</span>&nbsp;<span class="op" id="6132387">!=</span>&nbsp;<span class="builtintype" id="6132390">nil</span>&nbsp;<span class="op" id="6132394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132398">return</span>&nbsp;<span class="builtintype" id="6132405">nil</span><span class="op" id="6132408">,</span>&nbsp;<span class="ident" id="6132410">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6132415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132418">be</span>&nbsp;<span class="op" id="6132421">:=</span>&nbsp;<span class="ident" id="6132424">binary</span><span class="op" id="6132430">.</span><span class="ident" id="6132431">BigEndian</span><span class="op" id="6132440">.</span><span class="ident" id="6132441">Uint32</span><span class="op" id="6132447">(</span><span class="ident" id="6132448">ident</span><span class="op" id="6132453">[</span><span class="num" id="6132454">0</span><span class="op" id="6132455">:</span><span class="op" id="6132456">]</span><span class="op" id="6132457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132460">le</span>&nbsp;<span class="op" id="6132463">:=</span>&nbsp;<span class="ident" id="6132466">binary</span><span class="op" id="6132472">.</span><span class="ident" id="6132473">LittleEndian</span><span class="op" id="6132485">.</span><span class="ident" id="6132486">Uint32</span><span class="op" id="6132492">(</span><span class="ident" id="6132493">ident</span><span class="op" id="6132498">[</span><span class="num" id="6132499">0</span><span class="op" id="6132500">:</span><span class="op" id="6132501">]</span><span class="op" id="6132502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132505">switch</span>&nbsp;<span class="ident" id="6132512">Magic32</span>&nbsp;<span class="op" id="6132520">&amp;^</span>&nbsp;<span class="num" id="6132523">1</span>&nbsp;<span class="op" id="6132525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132528">case</span>&nbsp;<span class="ident" id="6132533">be</span>&nbsp;<span class="op" id="6132536">&amp;^</span>&nbsp;<span class="num" id="6132539">1</span><span class="op" id="6132540">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132544">f</span><span class="op" id="6132545">.</span><span class="ident" id="6132546">ByteOrder</span>&nbsp;<span class="op" id="6132556">=</span>&nbsp;<span class="ident" id="6132558">binary</span><span class="op" id="6132564">.</span><span class="ident" id="6132565">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132577">f</span><span class="op" id="6132578">.</span><span class="ident" id="6132579">Magic</span>&nbsp;<span class="op" id="6132585">=</span>&nbsp;<span class="ident" id="6132587">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132591">case</span>&nbsp;<span class="ident" id="6132596">le</span>&nbsp;<span class="op" id="6132599">&amp;^</span>&nbsp;<span class="num" id="6132602">1</span><span class="op" id="6132603">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132607">f</span><span class="op" id="6132608">.</span><span class="ident" id="6132609">ByteOrder</span>&nbsp;<span class="op" id="6132619">=</span>&nbsp;<span class="ident" id="6132621">binary</span><span class="op" id="6132627">.</span><span class="ident" id="6132628">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132643">f</span><span class="op" id="6132644">.</span><span class="ident" id="6132645">Magic</span>&nbsp;<span class="op" id="6132651">=</span>&nbsp;<span class="ident" id="6132653">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132657">default</span><span class="op" id="6132664">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132668">return</span>&nbsp;<span class="builtintype" id="6132675">nil</span><span class="op" id="6132678">,</span>&nbsp;<span class="op" id="6132680">&amp;</span><span class="ident" id="6132681">FormatError</span><span class="op" id="6132692">{</span><span class="num" id="6132693">0</span><span class="op" id="6132694">,</span>&nbsp;<span class="string" id="6132696">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="6132718">,</span>&nbsp;<span class="builtintype" id="6132720">nil</span><span class="op" id="6132723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6132726">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6132730">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132759">if</span>&nbsp;<span class="ident" id="6132762">err</span>&nbsp;<span class="op" id="6132766">:=</span>&nbsp;<span class="ident" id="6132769">binary</span><span class="op" id="6132775">.</span><span class="ident" id="6132776">Read</span><span class="op" id="6132780">(</span><span class="ident" id="6132781">sr</span><span class="op" id="6132783">,</span>&nbsp;<span class="ident" id="6132785">f</span><span class="op" id="6132786">.</span><span class="ident" id="6132787">ByteOrder</span><span class="op" id="6132796">,</span>&nbsp;<span class="op" id="6132798">&amp;</span><span class="ident" id="6132799">f</span><span class="op" id="6132800">.</span><span class="ident" id="6132801">FileHeader</span><span class="op" id="6132811">)</span><span class="op" id="6132812">;</span>&nbsp;<span class="ident" id="6132814">err</span>&nbsp;<span class="op" id="6132818">!=</span>&nbsp;<span class="builtintype" id="6132821">nil</span>&nbsp;<span class="op" id="6132825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132829">return</span>&nbsp;<span class="builtintype" id="6132836">nil</span><span class="op" id="6132839">,</span>&nbsp;<span class="ident" id="6132841">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6132846">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6132850">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132874">offset</span>&nbsp;<span class="op" id="6132881">:=</span>&nbsp;<span class="builtintype" id="6132884">int64</span><span class="op" id="6132889">(</span><span class="ident" id="6132890">fileHeaderSize32</span><span class="op" id="6132906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132909">if</span>&nbsp;<span class="ident" id="6132912">f</span><span class="op" id="6132913">.</span><span class="ident" id="6132914">Magic</span>&nbsp;<span class="op" id="6132920">==</span>&nbsp;<span class="ident" id="6132923">Magic64</span>&nbsp;<span class="op" id="6132931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132935">offset</span>&nbsp;<span class="op" id="6132942">=</span>&nbsp;<span class="ident" id="6132944">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6132962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6132965">dat</span>&nbsp;<span class="op" id="6132969">:=</span>&nbsp;<span class="builtinfunc" id="6132972">make</span><span class="op" id="6132976">(</span><span class="op" id="6132977">[</span><span class="op" id="6132978">]</span><span class="builtintype" id="6132979">byte</span><span class="op" id="6132983">,</span>&nbsp;<span class="ident" id="6132985">f</span><span class="op" id="6132986">.</span><span class="ident" id="6132987">Cmdsz</span><span class="op" id="6132992">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6132995">if</span>&nbsp;<span class="ident" id="6132998">_</span><span class="op" id="6132999">,</span>&nbsp;<span class="ident" id="6133001">err</span>&nbsp;<span class="op" id="6133005">:=</span>&nbsp;<span class="ident" id="6133008">r</span><span class="op" id="6133009">.</span><span class="ident" id="6133010">ReadAt</span><span class="op" id="6133016">(</span><span class="ident" id="6133017">dat</span><span class="op" id="6133020">,</span>&nbsp;<span class="ident" id="6133022">offset</span><span class="op" id="6133028">)</span><span class="op" id="6133029">;</span>&nbsp;<span class="ident" id="6133031">err</span>&nbsp;<span class="op" id="6133035">!=</span>&nbsp;<span class="builtintype" id="6133038">nil</span>&nbsp;<span class="op" id="6133042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133046">return</span>&nbsp;<span class="builtintype" id="6133053">nil</span><span class="op" id="6133056">,</span>&nbsp;<span class="ident" id="6133058">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6133063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6133066">f</span><span class="op" id="6133067">.</span><span class="ident" id="6133068">Loads</span>&nbsp;<span class="op" id="6133074">=</span>&nbsp;<span class="builtinfunc" id="6133076">make</span><span class="op" id="6133080">(</span><span class="op" id="6133081">[</span><span class="op" id="6133082">]</span><span class="ident" id="6133083">Load</span><span class="op" id="6133087">,</span>&nbsp;<span class="ident" id="6133089">f</span><span class="op" id="6133090">.</span><span class="ident" id="6133091">Ncmd</span><span class="op" id="6133095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6133098">bo</span>&nbsp;<span class="op" id="6133101">:=</span>&nbsp;<span class="ident" id="6133104">f</span><span class="op" id="6133105">.</span><span class="ident" id="6133106">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133117">for</span>&nbsp;<span class="ident" id="6133121">i</span>&nbsp;<span class="op" id="6133123">:=</span>&nbsp;<span class="keyword" id="6133126">range</span>&nbsp;<span class="ident" id="6133132">f</span><span class="op" id="6133133">.</span><span class="ident" id="6133134">Loads</span>&nbsp;<span class="op" id="6133140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6133144">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133206">if</span>&nbsp;<span class="builtinfunc" id="6133209">len</span><span class="op" id="6133212">(</span><span class="ident" id="6133213">dat</span><span class="op" id="6133216">)</span>&nbsp;<span class="op" id="6133218">&lt;</span>&nbsp;<span class="num" id="6133220">8</span>&nbsp;<span class="op" id="6133222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133227">return</span>&nbsp;<span class="builtintype" id="6133234">nil</span><span class="op" id="6133237">,</span>&nbsp;<span class="op" id="6133239">&amp;</span><span class="ident" id="6133240">FormatError</span><span class="op" id="6133251">{</span><span class="ident" id="6133252">offset</span><span class="op" id="6133258">,</span>&nbsp;<span class="string" id="6133260">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="6133285">,</span>&nbsp;<span class="builtintype" id="6133287">nil</span><span class="op" id="6133290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6133294">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6133298">cmd</span><span class="op" id="6133301">,</span>&nbsp;<span class="ident" id="6133303">siz</span>&nbsp;<span class="op" id="6133307">:=</span>&nbsp;<span class="ident" id="6133310">LoadCmd</span><span class="op" id="6133317">(</span><span class="ident" id="6133318">bo</span><span class="op" id="6133320">.</span><span class="ident" id="6133321">Uint32</span><span class="op" id="6133327">(</span><span class="ident" id="6133328">dat</span><span class="op" id="6133331">[</span><span class="num" id="6133332">0</span><span class="op" id="6133333">:</span><span class="num" id="6133334">4</span><span class="op" id="6133335">]</span><span class="op" id="6133336">)</span><span class="op" id="6133337">)</span><span class="op" id="6133338">,</span>&nbsp;<span class="ident" id="6133340">bo</span><span class="op" id="6133342">.</span><span class="ident" id="6133343">Uint32</span><span class="op" id="6133349">(</span><span class="ident" id="6133350">dat</span><span class="op" id="6133353">[</span><span class="num" id="6133354">4</span><span class="op" id="6133355">:</span><span class="num" id="6133356">8</span><span class="op" id="6133357">]</span><span class="op" id="6133358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133362">if</span>&nbsp;<span class="ident" id="6133365">siz</span>&nbsp;<span class="op" id="6133369">&lt;</span>&nbsp;<span class="num" id="6133371">8</span>&nbsp;<span class="op" id="6133373">||</span>&nbsp;<span class="ident" id="6133376">siz</span>&nbsp;<span class="op" id="6133380">&gt;</span>&nbsp;<span class="builtintype" id="6133382">uint32</span><span class="op" id="6133388">(</span><span class="builtinfunc" id="6133389">len</span><span class="op" id="6133392">(</span><span class="ident" id="6133393">dat</span><span class="op" id="6133396">)</span><span class="op" id="6133397">)</span>&nbsp;<span class="op" id="6133399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133404">return</span>&nbsp;<span class="builtintype" id="6133411">nil</span><span class="op" id="6133414">,</span>&nbsp;<span class="op" id="6133416">&amp;</span><span class="ident" id="6133417">FormatError</span><span class="op" id="6133428">{</span><span class="ident" id="6133429">offset</span><span class="op" id="6133435">,</span>&nbsp;<span class="string" id="6133437">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="6133465">,</span>&nbsp;<span class="builtintype" id="6133467">nil</span><span class="op" id="6133470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6133474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133478">var</span>&nbsp;<span class="ident" id="6133482">cmddat</span>&nbsp;<span class="op" id="6133489">[</span><span class="op" id="6133490">]</span><span class="builtintype" id="6133491">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6133498">cmddat</span><span class="op" id="6133504">,</span>&nbsp;<span class="ident" id="6133506">dat</span>&nbsp;<span class="op" id="6133510">=</span>&nbsp;<span class="ident" id="6133512">dat</span><span class="op" id="6133515">[</span><span class="num" id="6133516">0</span><span class="op" id="6133517">:</span><span class="ident" id="6133518">siz</span><span class="op" id="6133521">]</span><span class="op" id="6133522">,</span>&nbsp;<span class="ident" id="6133524">dat</span><span class="op" id="6133527">[</span><span class="ident" id="6133528">siz</span><span class="op" id="6133531">:</span><span class="op" id="6133532">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6133536">offset</span>&nbsp;<span class="op" id="6133543">+=</span>&nbsp;<span class="builtintype" id="6133546">int64</span><span class="op" id="6133551">(</span><span class="ident" id="6133552">siz</span><span class="op" id="6133555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133559">var</span>&nbsp;<span class="ident" id="6133563">s</span>&nbsp;<span class="op" id="6133565">*</span><span class="ident" id="6133566">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133576">switch</span>&nbsp;<span class="ident" id="6133583">cmd</span>&nbsp;<span class="op" id="6133587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133591">default</span><span class="op" id="6133598">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6133603">f</span><span class="op" id="6133604">.</span><span class="ident" id="6133605">Loads</span><span class="op" id="6133610">[</span><span class="ident" id="6133611">i</span><span class="op" id="6133612">]</span>&nbsp;<span class="op" id="6133614">=</span>&nbsp;<span class="ident" id="6133616">LoadBytes</span><span class="op" id="6133625">(</span><span class="ident" id="6133626">cmddat</span><span class="op" id="6133632">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133637">case</span>&nbsp;<span class="ident" id="6133642">LoadCmdDylib</span><span class="op" id="6133654">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133659">var</span>&nbsp;<span class="ident" id="6133663">hdr</span>&nbsp;<span class="ident" id="6133667">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6133679">b</span>&nbsp;<span class="op" id="6133681">:=</span>&nbsp;<span class="ident" id="6133684">bytes</span><span class="op" id="6133689">.</span><span class="ident" id="6133690">NewReader</span><span class="op" id="6133699">(</span><span class="ident" id="6133700">cmddat</span><span class="op" id="6133706">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133711">if</span>&nbsp;<span class="ident" id="6133714">err</span>&nbsp;<span class="op" id="6133718">:=</span>&nbsp;<span class="ident" id="6133721">binary</span><span class="op" id="6133727">.</span><span class="ident" id="6133728">Read</span><span class="op" id="6133732">(</span><span class="ident" id="6133733">b</span><span class="op" id="6133734">,</span>&nbsp;<span class="ident" id="6133736">bo</span><span class="op" id="6133738">,</span>&nbsp;<span class="op" id="6133740">&amp;</span><span class="ident" id="6133741">hdr</span><span class="op" id="6133744">)</span><span class="op" id="6133745">;</span>&nbsp;<span class="ident" id="6133747">err</span>&nbsp;<span class="op" id="6133751">!=</span>&nbsp;<span class="builtintype" id="6133754">nil</span>&nbsp;<span class="op" id="6133758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133764">return</span>&nbsp;<span class="builtintype" id="6133771">nil</span><span class="op" id="6133774">,</span>&nbsp;<span class="ident" id="6133776">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6133783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6133788">l</span>&nbsp;<span class="op" id="6133790">:=</span>&nbsp;<span class="builtinfunc" id="6133793">new</span><span class="op" id="6133796">(</span><span class="ident" id="6133797">Dylib</span><span class="op" id="6133802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133807">if</span>&nbsp;<span class="ident" id="6133810">hdr</span><span class="op" id="6133813">.</span><span class="ident" id="6133814">Name</span>&nbsp;<span class="op" id="6133819">&gt;=</span>&nbsp;<span class="builtintype" id="6133822">uint32</span><span class="op" id="6133828">(</span><span class="builtinfunc" id="6133829">len</span><span class="op" id="6133832">(</span><span class="ident" id="6133833">cmddat</span><span class="op" id="6133839">)</span><span class="op" id="6133840">)</span>&nbsp;<span class="op" id="6133842">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6133848">return</span>&nbsp;<span class="builtintype" id="6133855">nil</span><span class="op" id="6133858">,</span>&nbsp;<span class="op" id="6133860">&amp;</span><span class="ident" id="6133861">FormatError</span><span class="op" id="6133872">{</span><span class="ident" id="6133873">offset</span><span class="op" id="6133879">,</span>&nbsp;<span class="string" id="6133881">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="6133922">,</span>&nbsp;<span class="ident" id="6133924">hdr</span><span class="op" id="6133927">.</span><span class="ident" id="6133928">Name</span><span class="op" id="6133932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6133937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6133942">l</span><span class="op" id="6133943">.</span><span class="ident" id="6133944">Name</span>&nbsp;<span class="op" id="6133949">=</span>&nbsp;<span class="ident" id="6133951">cstring</span><span class="op" id="6133958">(</span><span class="ident" id="6133959">cmddat</span><span class="op" id="6133965">[</span><span class="ident" id="6133966">hdr</span><span class="op" id="6133969">.</span><span class="ident" id="6133970">Name</span><span class="op" id="6133974">:</span><span class="op" id="6133975">]</span><span class="op" id="6133976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6133981">l</span><span class="op" id="6133982">.</span><span class="ident" id="6133983">Time</span>&nbsp;<span class="op" id="6133988">=</span>&nbsp;<span class="ident" id="6133990">hdr</span><span class="op" id="6133993">.</span><span class="ident" id="6133994">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134002">l</span><span class="op" id="6134003">.</span><span class="ident" id="6134004">CurrentVersion</span>&nbsp;<span class="op" id="6134019">=</span>&nbsp;<span class="ident" id="6134021">hdr</span><span class="op" id="6134024">.</span><span class="ident" id="6134025">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134043">l</span><span class="op" id="6134044">.</span><span class="ident" id="6134045">CompatVersion</span>&nbsp;<span class="op" id="6134059">=</span>&nbsp;<span class="ident" id="6134061">hdr</span><span class="op" id="6134064">.</span><span class="ident" id="6134065">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134082">l</span><span class="op" id="6134083">.</span><span class="ident" id="6134084">LoadBytes</span>&nbsp;<span class="op" id="6134094">=</span>&nbsp;<span class="ident" id="6134096">LoadBytes</span><span class="op" id="6134105">(</span><span class="ident" id="6134106">cmddat</span><span class="op" id="6134112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134117">f</span><span class="op" id="6134118">.</span><span class="ident" id="6134119">Loads</span><span class="op" id="6134124">[</span><span class="ident" id="6134125">i</span><span class="op" id="6134126">]</span>&nbsp;<span class="op" id="6134128">=</span>&nbsp;<span class="ident" id="6134130">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134135">case</span>&nbsp;<span class="ident" id="6134140">LoadCmdSymtab</span><span class="op" id="6134153">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134158">var</span>&nbsp;<span class="ident" id="6134162">hdr</span>&nbsp;<span class="ident" id="6134166">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134179">b</span>&nbsp;<span class="op" id="6134181">:=</span>&nbsp;<span class="ident" id="6134184">bytes</span><span class="op" id="6134189">.</span><span class="ident" id="6134190">NewReader</span><span class="op" id="6134199">(</span><span class="ident" id="6134200">cmddat</span><span class="op" id="6134206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134211">if</span>&nbsp;<span class="ident" id="6134214">err</span>&nbsp;<span class="op" id="6134218">:=</span>&nbsp;<span class="ident" id="6134221">binary</span><span class="op" id="6134227">.</span><span class="ident" id="6134228">Read</span><span class="op" id="6134232">(</span><span class="ident" id="6134233">b</span><span class="op" id="6134234">,</span>&nbsp;<span class="ident" id="6134236">bo</span><span class="op" id="6134238">,</span>&nbsp;<span class="op" id="6134240">&amp;</span><span class="ident" id="6134241">hdr</span><span class="op" id="6134244">)</span><span class="op" id="6134245">;</span>&nbsp;<span class="ident" id="6134247">err</span>&nbsp;<span class="op" id="6134251">!=</span>&nbsp;<span class="builtintype" id="6134254">nil</span>&nbsp;<span class="op" id="6134258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134264">return</span>&nbsp;<span class="builtintype" id="6134271">nil</span><span class="op" id="6134274">,</span>&nbsp;<span class="ident" id="6134276">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6134283">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134288">strtab</span>&nbsp;<span class="op" id="6134295">:=</span>&nbsp;<span class="builtinfunc" id="6134298">make</span><span class="op" id="6134302">(</span><span class="op" id="6134303">[</span><span class="op" id="6134304">]</span><span class="builtintype" id="6134305">byte</span><span class="op" id="6134309">,</span>&nbsp;<span class="ident" id="6134311">hdr</span><span class="op" id="6134314">.</span><span class="ident" id="6134315">Strsize</span><span class="op" id="6134322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134327">if</span>&nbsp;<span class="ident" id="6134330">_</span><span class="op" id="6134331">,</span>&nbsp;<span class="ident" id="6134333">err</span>&nbsp;<span class="op" id="6134337">:=</span>&nbsp;<span class="ident" id="6134340">r</span><span class="op" id="6134341">.</span><span class="ident" id="6134342">ReadAt</span><span class="op" id="6134348">(</span><span class="ident" id="6134349">strtab</span><span class="op" id="6134355">,</span>&nbsp;<span class="builtintype" id="6134357">int64</span><span class="op" id="6134362">(</span><span class="ident" id="6134363">hdr</span><span class="op" id="6134366">.</span><span class="ident" id="6134367">Stroff</span><span class="op" id="6134373">)</span><span class="op" id="6134374">)</span><span class="op" id="6134375">;</span>&nbsp;<span class="ident" id="6134377">err</span>&nbsp;<span class="op" id="6134381">!=</span>&nbsp;<span class="builtintype" id="6134384">nil</span>&nbsp;<span class="op" id="6134388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134394">return</span>&nbsp;<span class="builtintype" id="6134401">nil</span><span class="op" id="6134404">,</span>&nbsp;<span class="ident" id="6134406">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6134413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134418">var</span>&nbsp;<span class="ident" id="6134422">symsz</span>&nbsp;<span class="builtintype" id="6134428">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134435">if</span>&nbsp;<span class="ident" id="6134438">f</span><span class="op" id="6134439">.</span><span class="ident" id="6134440">Magic</span>&nbsp;<span class="op" id="6134446">==</span>&nbsp;<span class="ident" id="6134449">Magic64</span>&nbsp;<span class="op" id="6134457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134463">symsz</span>&nbsp;<span class="op" id="6134469">=</span>&nbsp;<span class="num" id="6134471">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6134477">}</span>&nbsp;<span class="keyword" id="6134479">else</span>&nbsp;<span class="op" id="6134484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134490">symsz</span>&nbsp;<span class="op" id="6134496">=</span>&nbsp;<span class="num" id="6134498">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6134504">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134509">symdat</span>&nbsp;<span class="op" id="6134516">:=</span>&nbsp;<span class="builtinfunc" id="6134519">make</span><span class="op" id="6134523">(</span><span class="op" id="6134524">[</span><span class="op" id="6134525">]</span><span class="builtintype" id="6134526">byte</span><span class="op" id="6134530">,</span>&nbsp;<span class="builtintype" id="6134532">int</span><span class="op" id="6134535">(</span><span class="ident" id="6134536">hdr</span><span class="op" id="6134539">.</span><span class="ident" id="6134540">Nsyms</span><span class="op" id="6134545">)</span><span class="op" id="6134546">*</span><span class="ident" id="6134547">symsz</span><span class="op" id="6134552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134557">if</span>&nbsp;<span class="ident" id="6134560">_</span><span class="op" id="6134561">,</span>&nbsp;<span class="ident" id="6134563">err</span>&nbsp;<span class="op" id="6134567">:=</span>&nbsp;<span class="ident" id="6134570">r</span><span class="op" id="6134571">.</span><span class="ident" id="6134572">ReadAt</span><span class="op" id="6134578">(</span><span class="ident" id="6134579">symdat</span><span class="op" id="6134585">,</span>&nbsp;<span class="builtintype" id="6134587">int64</span><span class="op" id="6134592">(</span><span class="ident" id="6134593">hdr</span><span class="op" id="6134596">.</span><span class="ident" id="6134597">Symoff</span><span class="op" id="6134603">)</span><span class="op" id="6134604">)</span><span class="op" id="6134605">;</span>&nbsp;<span class="ident" id="6134607">err</span>&nbsp;<span class="op" id="6134611">!=</span>&nbsp;<span class="builtintype" id="6134614">nil</span>&nbsp;<span class="op" id="6134618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134624">return</span>&nbsp;<span class="builtintype" id="6134631">nil</span><span class="op" id="6134634">,</span>&nbsp;<span class="ident" id="6134636">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6134643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134648">st</span><span class="op" id="6134650">,</span>&nbsp;<span class="ident" id="6134652">err</span>&nbsp;<span class="op" id="6134656">:=</span>&nbsp;<span class="ident" id="6134659">f</span><span class="op" id="6134660">.</span><span class="ident" id="6134661">parseSymtab</span><span class="op" id="6134672">(</span><span class="ident" id="6134673">symdat</span><span class="op" id="6134679">,</span>&nbsp;<span class="ident" id="6134681">strtab</span><span class="op" id="6134687">,</span>&nbsp;<span class="ident" id="6134689">cmddat</span><span class="op" id="6134695">,</span>&nbsp;<span class="op" id="6134697">&amp;</span><span class="ident" id="6134698">hdr</span><span class="op" id="6134701">,</span>&nbsp;<span class="ident" id="6134703">offset</span><span class="op" id="6134709">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134714">if</span>&nbsp;<span class="ident" id="6134717">err</span>&nbsp;<span class="op" id="6134721">!=</span>&nbsp;<span class="builtintype" id="6134724">nil</span>&nbsp;<span class="op" id="6134728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134734">return</span>&nbsp;<span class="builtintype" id="6134741">nil</span><span class="op" id="6134744">,</span>&nbsp;<span class="ident" id="6134746">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6134753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134758">f</span><span class="op" id="6134759">.</span><span class="ident" id="6134760">Loads</span><span class="op" id="6134765">[</span><span class="ident" id="6134766">i</span><span class="op" id="6134767">]</span>&nbsp;<span class="op" id="6134769">=</span>&nbsp;<span class="ident" id="6134771">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134777">f</span><span class="op" id="6134778">.</span><span class="ident" id="6134779">Symtab</span>&nbsp;<span class="op" id="6134786">=</span>&nbsp;<span class="ident" id="6134788">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134794">case</span>&nbsp;<span class="ident" id="6134799">LoadCmdDysymtab</span><span class="op" id="6134814">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134819">var</span>&nbsp;<span class="ident" id="6134823">hdr</span>&nbsp;<span class="ident" id="6134827">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134842">b</span>&nbsp;<span class="op" id="6134844">:=</span>&nbsp;<span class="ident" id="6134847">bytes</span><span class="op" id="6134852">.</span><span class="ident" id="6134853">NewReader</span><span class="op" id="6134862">(</span><span class="ident" id="6134863">cmddat</span><span class="op" id="6134869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134874">if</span>&nbsp;<span class="ident" id="6134877">err</span>&nbsp;<span class="op" id="6134881">:=</span>&nbsp;<span class="ident" id="6134884">binary</span><span class="op" id="6134890">.</span><span class="ident" id="6134891">Read</span><span class="op" id="6134895">(</span><span class="ident" id="6134896">b</span><span class="op" id="6134897">,</span>&nbsp;<span class="ident" id="6134899">bo</span><span class="op" id="6134901">,</span>&nbsp;<span class="op" id="6134903">&amp;</span><span class="ident" id="6134904">hdr</span><span class="op" id="6134907">)</span><span class="op" id="6134908">;</span>&nbsp;<span class="ident" id="6134910">err</span>&nbsp;<span class="op" id="6134914">!=</span>&nbsp;<span class="builtintype" id="6134917">nil</span>&nbsp;<span class="op" id="6134921">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134927">return</span>&nbsp;<span class="builtintype" id="6134934">nil</span><span class="op" id="6134937">,</span>&nbsp;<span class="ident" id="6134939">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6134946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6134951">dat</span>&nbsp;<span class="op" id="6134955">:=</span>&nbsp;<span class="builtinfunc" id="6134958">make</span><span class="op" id="6134962">(</span><span class="op" id="6134963">[</span><span class="op" id="6134964">]</span><span class="builtintype" id="6134965">byte</span><span class="op" id="6134969">,</span>&nbsp;<span class="ident" id="6134971">hdr</span><span class="op" id="6134974">.</span><span class="ident" id="6134975">Nindirectsyms</span><span class="op" id="6134988">*</span><span class="num" id="6134989">4</span><span class="op" id="6134990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6134995">if</span>&nbsp;<span class="ident" id="6134998">_</span><span class="op" id="6134999">,</span>&nbsp;<span class="ident" id="6135001">err</span>&nbsp;<span class="op" id="6135005">:=</span>&nbsp;<span class="ident" id="6135008">r</span><span class="op" id="6135009">.</span><span class="ident" id="6135010">ReadAt</span><span class="op" id="6135016">(</span><span class="ident" id="6135017">dat</span><span class="op" id="6135020">,</span>&nbsp;<span class="builtintype" id="6135022">int64</span><span class="op" id="6135027">(</span><span class="ident" id="6135028">hdr</span><span class="op" id="6135031">.</span><span class="ident" id="6135032">Indirectsymoff</span><span class="op" id="6135046">)</span><span class="op" id="6135047">)</span><span class="op" id="6135048">;</span>&nbsp;<span class="ident" id="6135050">err</span>&nbsp;<span class="op" id="6135054">!=</span>&nbsp;<span class="builtintype" id="6135057">nil</span>&nbsp;<span class="op" id="6135061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6135067">return</span>&nbsp;<span class="builtintype" id="6135074">nil</span><span class="op" id="6135077">,</span>&nbsp;<span class="ident" id="6135079">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6135086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135091">x</span>&nbsp;<span class="op" id="6135093">:=</span>&nbsp;<span class="builtinfunc" id="6135096">make</span><span class="op" id="6135100">(</span><span class="op" id="6135101">[</span><span class="op" id="6135102">]</span><span class="builtintype" id="6135103">uint32</span><span class="op" id="6135109">,</span>&nbsp;<span class="ident" id="6135111">hdr</span><span class="op" id="6135114">.</span><span class="ident" id="6135115">Nindirectsyms</span><span class="op" id="6135128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6135133">if</span>&nbsp;<span class="ident" id="6135136">err</span>&nbsp;<span class="op" id="6135140">:=</span>&nbsp;<span class="ident" id="6135143">binary</span><span class="op" id="6135149">.</span><span class="ident" id="6135150">Read</span><span class="op" id="6135154">(</span><span class="ident" id="6135155">bytes</span><span class="op" id="6135160">.</span><span class="ident" id="6135161">NewReader</span><span class="op" id="6135170">(</span><span class="ident" id="6135171">dat</span><span class="op" id="6135174">)</span><span class="op" id="6135175">,</span>&nbsp;<span class="ident" id="6135177">bo</span><span class="op" id="6135179">,</span>&nbsp;<span class="ident" id="6135181">x</span><span class="op" id="6135182">)</span><span class="op" id="6135183">;</span>&nbsp;<span class="ident" id="6135185">err</span>&nbsp;<span class="op" id="6135189">!=</span>&nbsp;<span class="builtintype" id="6135192">nil</span>&nbsp;<span class="op" id="6135196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6135202">return</span>&nbsp;<span class="builtintype" id="6135209">nil</span><span class="op" id="6135212">,</span>&nbsp;<span class="ident" id="6135214">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6135221">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135226">st</span>&nbsp;<span class="op" id="6135229">:=</span>&nbsp;<span class="builtinfunc" id="6135232">new</span><span class="op" id="6135235">(</span><span class="ident" id="6135236">Dysymtab</span><span class="op" id="6135244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135249">st</span><span class="op" id="6135251">.</span><span class="ident" id="6135252">LoadBytes</span>&nbsp;<span class="op" id="6135262">=</span>&nbsp;<span class="ident" id="6135264">LoadBytes</span><span class="op" id="6135273">(</span><span class="ident" id="6135274">cmddat</span><span class="op" id="6135280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135285">st</span><span class="op" id="6135287">.</span><span class="ident" id="6135288">DysymtabCmd</span>&nbsp;<span class="op" id="6135300">=</span>&nbsp;<span class="ident" id="6135302">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135309">st</span><span class="op" id="6135311">.</span><span class="ident" id="6135312">IndirectSyms</span>&nbsp;<span class="op" id="6135325">=</span>&nbsp;<span class="ident" id="6135327">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135332">f</span><span class="op" id="6135333">.</span><span class="ident" id="6135334">Loads</span><span class="op" id="6135339">[</span><span class="ident" id="6135340">i</span><span class="op" id="6135341">]</span>&nbsp;<span class="op" id="6135343">=</span>&nbsp;<span class="ident" id="6135345">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135351">f</span><span class="op" id="6135352">.</span><span class="ident" id="6135353">Dysymtab</span>&nbsp;<span class="op" id="6135362">=</span>&nbsp;<span class="ident" id="6135364">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6135370">case</span>&nbsp;<span class="ident" id="6135375">LoadCmdSegment</span><span class="op" id="6135389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6135394">var</span>&nbsp;<span class="ident" id="6135398">seg32</span>&nbsp;<span class="ident" id="6135404">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135417">b</span>&nbsp;<span class="op" id="6135419">:=</span>&nbsp;<span class="ident" id="6135422">bytes</span><span class="op" id="6135427">.</span><span class="ident" id="6135428">NewReader</span><span class="op" id="6135437">(</span><span class="ident" id="6135438">cmddat</span><span class="op" id="6135444">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6135449">if</span>&nbsp;<span class="ident" id="6135452">err</span>&nbsp;<span class="op" id="6135456">:=</span>&nbsp;<span class="ident" id="6135459">binary</span><span class="op" id="6135465">.</span><span class="ident" id="6135466">Read</span><span class="op" id="6135470">(</span><span class="ident" id="6135471">b</span><span class="op" id="6135472">,</span>&nbsp;<span class="ident" id="6135474">bo</span><span class="op" id="6135476">,</span>&nbsp;<span class="op" id="6135478">&amp;</span><span class="ident" id="6135479">seg32</span><span class="op" id="6135484">)</span><span class="op" id="6135485">;</span>&nbsp;<span class="ident" id="6135487">err</span>&nbsp;<span class="op" id="6135491">!=</span>&nbsp;<span class="builtintype" id="6135494">nil</span>&nbsp;<span class="op" id="6135498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6135504">return</span>&nbsp;<span class="builtintype" id="6135511">nil</span><span class="op" id="6135514">,</span>&nbsp;<span class="ident" id="6135516">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6135523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135528">s</span>&nbsp;<span class="op" id="6135530">=</span>&nbsp;<span class="builtinfunc" id="6135532">new</span><span class="op" id="6135535">(</span><span class="ident" id="6135536">Segment</span><span class="op" id="6135543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135548">s</span><span class="op" id="6135549">.</span><span class="ident" id="6135550">LoadBytes</span>&nbsp;<span class="op" id="6135560">=</span>&nbsp;<span class="ident" id="6135562">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135572">s</span><span class="op" id="6135573">.</span><span class="ident" id="6135574">Cmd</span>&nbsp;<span class="op" id="6135578">=</span>&nbsp;<span class="ident" id="6135580">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135587">s</span><span class="op" id="6135588">.</span><span class="ident" id="6135589">Len</span>&nbsp;<span class="op" id="6135593">=</span>&nbsp;<span class="ident" id="6135595">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135602">s</span><span class="op" id="6135603">.</span><span class="ident" id="6135604">Name</span>&nbsp;<span class="op" id="6135609">=</span>&nbsp;<span class="ident" id="6135611">cstring</span><span class="op" id="6135618">(</span><span class="ident" id="6135619">seg32</span><span class="op" id="6135624">.</span><span class="ident" id="6135625">Name</span><span class="op" id="6135629">[</span><span class="num" id="6135630">0</span><span class="op" id="6135631">:</span><span class="op" id="6135632">]</span><span class="op" id="6135633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135638">s</span><span class="op" id="6135639">.</span><span class="ident" id="6135640">Addr</span>&nbsp;<span class="op" id="6135645">=</span>&nbsp;<span class="builtintype" id="6135647">uint64</span><span class="op" id="6135653">(</span><span class="ident" id="6135654">seg32</span><span class="op" id="6135659">.</span><span class="ident" id="6135660">Addr</span><span class="op" id="6135664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135669">s</span><span class="op" id="6135670">.</span><span class="ident" id="6135671">Memsz</span>&nbsp;<span class="op" id="6135677">=</span>&nbsp;<span class="builtintype" id="6135679">uint64</span><span class="op" id="6135685">(</span><span class="ident" id="6135686">seg32</span><span class="op" id="6135691">.</span><span class="ident" id="6135692">Memsz</span><span class="op" id="6135697">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135702">s</span><span class="op" id="6135703">.</span><span class="ident" id="6135704">Offset</span>&nbsp;<span class="op" id="6135711">=</span>&nbsp;<span class="builtintype" id="6135713">uint64</span><span class="op" id="6135719">(</span><span class="ident" id="6135720">seg32</span><span class="op" id="6135725">.</span><span class="ident" id="6135726">Offset</span><span class="op" id="6135732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135737">s</span><span class="op" id="6135738">.</span><span class="ident" id="6135739">Filesz</span>&nbsp;<span class="op" id="6135746">=</span>&nbsp;<span class="builtintype" id="6135748">uint64</span><span class="op" id="6135754">(</span><span class="ident" id="6135755">seg32</span><span class="op" id="6135760">.</span><span class="ident" id="6135761">Filesz</span><span class="op" id="6135767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135772">s</span><span class="op" id="6135773">.</span><span class="ident" id="6135774">Maxprot</span>&nbsp;<span class="op" id="6135782">=</span>&nbsp;<span class="ident" id="6135784">seg32</span><span class="op" id="6135789">.</span><span class="ident" id="6135790">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135801">s</span><span class="op" id="6135802">.</span><span class="ident" id="6135803">Prot</span>&nbsp;<span class="op" id="6135808">=</span>&nbsp;<span class="ident" id="6135810">seg32</span><span class="op" id="6135815">.</span><span class="ident" id="6135816">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135824">s</span><span class="op" id="6135825">.</span><span class="ident" id="6135826">Nsect</span>&nbsp;<span class="op" id="6135832">=</span>&nbsp;<span class="ident" id="6135834">seg32</span><span class="op" id="6135839">.</span><span class="ident" id="6135840">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135849">s</span><span class="op" id="6135850">.</span><span class="ident" id="6135851">Flag</span>&nbsp;<span class="op" id="6135856">=</span>&nbsp;<span class="ident" id="6135858">seg32</span><span class="op" id="6135863">.</span><span class="ident" id="6135864">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6135872">f</span><span class="op" id="6135873">.</span><span class="ident" id="6135874">Loads</span><span class="op" id="6135879">[</span><span class="ident" id="6135880">i</span><span class="op" id="6135881">]</span>&nbsp;<span class="op" id="6135883">=</span>&nbsp;<span class="ident" id="6135885">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6135890">for</span>&nbsp;<span class="ident" id="6135894">i</span>&nbsp;<span class="op" id="6135896">:=</span>&nbsp;<span class="num" id="6135899">0</span><span class="op" id="6135900">;</span>&nbsp;<span class="ident" id="6135902">i</span>&nbsp;<span class="op" id="6135904">&lt;</span>&nbsp;<span class="builtintype" id="6135906">int</span><span class="op" id="6135909">(</span><span class="ident" id="6135910">s</span><span class="op" id="6135911">.</span><span class="ident" id="6135912">Nsect</span><span class="op" id="6135917">)</span><span class="op" id="6135918">;</span>&nbsp;<span class="ident" id="6135920">i</span><span class="op" id="6135921">++</span>&nbsp;<span class="op" id="6135924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6135930">var</span>&nbsp;<span class="ident" id="6135934">sh32</span>&nbsp;<span class="ident" id="6135939">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6135953">if</span>&nbsp;<span class="ident" id="6135956">err</span>&nbsp;<span class="op" id="6135960">:=</span>&nbsp;<span class="ident" id="6135963">binary</span><span class="op" id="6135969">.</span><span class="ident" id="6135970">Read</span><span class="op" id="6135974">(</span><span class="ident" id="6135975">b</span><span class="op" id="6135976">,</span>&nbsp;<span class="ident" id="6135978">bo</span><span class="op" id="6135980">,</span>&nbsp;<span class="op" id="6135982">&amp;</span><span class="ident" id="6135983">sh32</span><span class="op" id="6135987">)</span><span class="op" id="6135988">;</span>&nbsp;<span class="ident" id="6135990">err</span>&nbsp;<span class="op" id="6135994">!=</span>&nbsp;<span class="builtintype" id="6135997">nil</span>&nbsp;<span class="op" id="6136001">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136008">return</span>&nbsp;<span class="builtintype" id="6136015">nil</span><span class="op" id="6136018">,</span>&nbsp;<span class="ident" id="6136020">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6136028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136034">sh</span>&nbsp;<span class="op" id="6136037">:=</span>&nbsp;<span class="builtinfunc" id="6136040">new</span><span class="op" id="6136043">(</span><span class="ident" id="6136044">Section</span><span class="op" id="6136051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136057">sh</span><span class="op" id="6136059">.</span><span class="ident" id="6136060">Name</span>&nbsp;<span class="op" id="6136065">=</span>&nbsp;<span class="ident" id="6136067">cstring</span><span class="op" id="6136074">(</span><span class="ident" id="6136075">sh32</span><span class="op" id="6136079">.</span><span class="ident" id="6136080">Name</span><span class="op" id="6136084">[</span><span class="num" id="6136085">0</span><span class="op" id="6136086">:</span><span class="op" id="6136087">]</span><span class="op" id="6136088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136094">sh</span><span class="op" id="6136096">.</span><span class="ident" id="6136097">Seg</span>&nbsp;<span class="op" id="6136101">=</span>&nbsp;<span class="ident" id="6136103">cstring</span><span class="op" id="6136110">(</span><span class="ident" id="6136111">sh32</span><span class="op" id="6136115">.</span><span class="ident" id="6136116">Seg</span><span class="op" id="6136119">[</span><span class="num" id="6136120">0</span><span class="op" id="6136121">:</span><span class="op" id="6136122">]</span><span class="op" id="6136123">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136129">sh</span><span class="op" id="6136131">.</span><span class="ident" id="6136132">Addr</span>&nbsp;<span class="op" id="6136137">=</span>&nbsp;<span class="builtintype" id="6136139">uint64</span><span class="op" id="6136145">(</span><span class="ident" id="6136146">sh32</span><span class="op" id="6136150">.</span><span class="ident" id="6136151">Addr</span><span class="op" id="6136155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136161">sh</span><span class="op" id="6136163">.</span><span class="ident" id="6136164">Size</span>&nbsp;<span class="op" id="6136169">=</span>&nbsp;<span class="builtintype" id="6136171">uint64</span><span class="op" id="6136177">(</span><span class="ident" id="6136178">sh32</span><span class="op" id="6136182">.</span><span class="ident" id="6136183">Size</span><span class="op" id="6136187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136193">sh</span><span class="op" id="6136195">.</span><span class="ident" id="6136196">Offset</span>&nbsp;<span class="op" id="6136203">=</span>&nbsp;<span class="ident" id="6136205">sh32</span><span class="op" id="6136209">.</span><span class="ident" id="6136210">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136221">sh</span><span class="op" id="6136223">.</span><span class="ident" id="6136224">Align</span>&nbsp;<span class="op" id="6136230">=</span>&nbsp;<span class="ident" id="6136232">sh32</span><span class="op" id="6136236">.</span><span class="ident" id="6136237">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136247">sh</span><span class="op" id="6136249">.</span><span class="ident" id="6136250">Reloff</span>&nbsp;<span class="op" id="6136257">=</span>&nbsp;<span class="ident" id="6136259">sh32</span><span class="op" id="6136263">.</span><span class="ident" id="6136264">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136275">sh</span><span class="op" id="6136277">.</span><span class="ident" id="6136278">Nreloc</span>&nbsp;<span class="op" id="6136285">=</span>&nbsp;<span class="ident" id="6136287">sh32</span><span class="op" id="6136291">.</span><span class="ident" id="6136292">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136303">sh</span><span class="op" id="6136305">.</span><span class="ident" id="6136306">Flags</span>&nbsp;<span class="op" id="6136312">=</span>&nbsp;<span class="ident" id="6136314">sh32</span><span class="op" id="6136318">.</span><span class="ident" id="6136319">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136329">f</span><span class="op" id="6136330">.</span><span class="ident" id="6136331">pushSection</span><span class="op" id="6136342">(</span><span class="ident" id="6136343">sh</span><span class="op" id="6136345">,</span>&nbsp;<span class="ident" id="6136347">r</span><span class="op" id="6136348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6136353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136358">case</span>&nbsp;<span class="ident" id="6136363">LoadCmdSegment64</span><span class="op" id="6136379">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136384">var</span>&nbsp;<span class="ident" id="6136388">seg64</span>&nbsp;<span class="ident" id="6136394">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136407">b</span>&nbsp;<span class="op" id="6136409">:=</span>&nbsp;<span class="ident" id="6136412">bytes</span><span class="op" id="6136417">.</span><span class="ident" id="6136418">NewReader</span><span class="op" id="6136427">(</span><span class="ident" id="6136428">cmddat</span><span class="op" id="6136434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136439">if</span>&nbsp;<span class="ident" id="6136442">err</span>&nbsp;<span class="op" id="6136446">:=</span>&nbsp;<span class="ident" id="6136449">binary</span><span class="op" id="6136455">.</span><span class="ident" id="6136456">Read</span><span class="op" id="6136460">(</span><span class="ident" id="6136461">b</span><span class="op" id="6136462">,</span>&nbsp;<span class="ident" id="6136464">bo</span><span class="op" id="6136466">,</span>&nbsp;<span class="op" id="6136468">&amp;</span><span class="ident" id="6136469">seg64</span><span class="op" id="6136474">)</span><span class="op" id="6136475">;</span>&nbsp;<span class="ident" id="6136477">err</span>&nbsp;<span class="op" id="6136481">!=</span>&nbsp;<span class="builtintype" id="6136484">nil</span>&nbsp;<span class="op" id="6136488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136494">return</span>&nbsp;<span class="builtintype" id="6136501">nil</span><span class="op" id="6136504">,</span>&nbsp;<span class="ident" id="6136506">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6136513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136518">s</span>&nbsp;<span class="op" id="6136520">=</span>&nbsp;<span class="builtinfunc" id="6136522">new</span><span class="op" id="6136525">(</span><span class="ident" id="6136526">Segment</span><span class="op" id="6136533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136538">s</span><span class="op" id="6136539">.</span><span class="ident" id="6136540">LoadBytes</span>&nbsp;<span class="op" id="6136550">=</span>&nbsp;<span class="ident" id="6136552">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136562">s</span><span class="op" id="6136563">.</span><span class="ident" id="6136564">Cmd</span>&nbsp;<span class="op" id="6136568">=</span>&nbsp;<span class="ident" id="6136570">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136577">s</span><span class="op" id="6136578">.</span><span class="ident" id="6136579">Len</span>&nbsp;<span class="op" id="6136583">=</span>&nbsp;<span class="ident" id="6136585">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136592">s</span><span class="op" id="6136593">.</span><span class="ident" id="6136594">Name</span>&nbsp;<span class="op" id="6136599">=</span>&nbsp;<span class="ident" id="6136601">cstring</span><span class="op" id="6136608">(</span><span class="ident" id="6136609">seg64</span><span class="op" id="6136614">.</span><span class="ident" id="6136615">Name</span><span class="op" id="6136619">[</span><span class="num" id="6136620">0</span><span class="op" id="6136621">:</span><span class="op" id="6136622">]</span><span class="op" id="6136623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136628">s</span><span class="op" id="6136629">.</span><span class="ident" id="6136630">Addr</span>&nbsp;<span class="op" id="6136635">=</span>&nbsp;<span class="ident" id="6136637">seg64</span><span class="op" id="6136642">.</span><span class="ident" id="6136643">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136651">s</span><span class="op" id="6136652">.</span><span class="ident" id="6136653">Memsz</span>&nbsp;<span class="op" id="6136659">=</span>&nbsp;<span class="ident" id="6136661">seg64</span><span class="op" id="6136666">.</span><span class="ident" id="6136667">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136676">s</span><span class="op" id="6136677">.</span><span class="ident" id="6136678">Offset</span>&nbsp;<span class="op" id="6136685">=</span>&nbsp;<span class="ident" id="6136687">seg64</span><span class="op" id="6136692">.</span><span class="ident" id="6136693">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136703">s</span><span class="op" id="6136704">.</span><span class="ident" id="6136705">Filesz</span>&nbsp;<span class="op" id="6136712">=</span>&nbsp;<span class="ident" id="6136714">seg64</span><span class="op" id="6136719">.</span><span class="ident" id="6136720">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136730">s</span><span class="op" id="6136731">.</span><span class="ident" id="6136732">Maxprot</span>&nbsp;<span class="op" id="6136740">=</span>&nbsp;<span class="ident" id="6136742">seg64</span><span class="op" id="6136747">.</span><span class="ident" id="6136748">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136759">s</span><span class="op" id="6136760">.</span><span class="ident" id="6136761">Prot</span>&nbsp;<span class="op" id="6136766">=</span>&nbsp;<span class="ident" id="6136768">seg64</span><span class="op" id="6136773">.</span><span class="ident" id="6136774">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136782">s</span><span class="op" id="6136783">.</span><span class="ident" id="6136784">Nsect</span>&nbsp;<span class="op" id="6136790">=</span>&nbsp;<span class="ident" id="6136792">seg64</span><span class="op" id="6136797">.</span><span class="ident" id="6136798">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136807">s</span><span class="op" id="6136808">.</span><span class="ident" id="6136809">Flag</span>&nbsp;<span class="op" id="6136814">=</span>&nbsp;<span class="ident" id="6136816">seg64</span><span class="op" id="6136821">.</span><span class="ident" id="6136822">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136830">f</span><span class="op" id="6136831">.</span><span class="ident" id="6136832">Loads</span><span class="op" id="6136837">[</span><span class="ident" id="6136838">i</span><span class="op" id="6136839">]</span>&nbsp;<span class="op" id="6136841">=</span>&nbsp;<span class="ident" id="6136843">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136848">for</span>&nbsp;<span class="ident" id="6136852">i</span>&nbsp;<span class="op" id="6136854">:=</span>&nbsp;<span class="num" id="6136857">0</span><span class="op" id="6136858">;</span>&nbsp;<span class="ident" id="6136860">i</span>&nbsp;<span class="op" id="6136862">&lt;</span>&nbsp;<span class="builtintype" id="6136864">int</span><span class="op" id="6136867">(</span><span class="ident" id="6136868">s</span><span class="op" id="6136869">.</span><span class="ident" id="6136870">Nsect</span><span class="op" id="6136875">)</span><span class="op" id="6136876">;</span>&nbsp;<span class="ident" id="6136878">i</span><span class="op" id="6136879">++</span>&nbsp;<span class="op" id="6136882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136888">var</span>&nbsp;<span class="ident" id="6136892">sh64</span>&nbsp;<span class="ident" id="6136897">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136911">if</span>&nbsp;<span class="ident" id="6136914">err</span>&nbsp;<span class="op" id="6136918">:=</span>&nbsp;<span class="ident" id="6136921">binary</span><span class="op" id="6136927">.</span><span class="ident" id="6136928">Read</span><span class="op" id="6136932">(</span><span class="ident" id="6136933">b</span><span class="op" id="6136934">,</span>&nbsp;<span class="ident" id="6136936">bo</span><span class="op" id="6136938">,</span>&nbsp;<span class="op" id="6136940">&amp;</span><span class="ident" id="6136941">sh64</span><span class="op" id="6136945">)</span><span class="op" id="6136946">;</span>&nbsp;<span class="ident" id="6136948">err</span>&nbsp;<span class="op" id="6136952">!=</span>&nbsp;<span class="builtintype" id="6136955">nil</span>&nbsp;<span class="op" id="6136959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6136966">return</span>&nbsp;<span class="builtintype" id="6136973">nil</span><span class="op" id="6136976">,</span>&nbsp;<span class="ident" id="6136978">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6136986">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6136992">sh</span>&nbsp;<span class="op" id="6136995">:=</span>&nbsp;<span class="builtinfunc" id="6136998">new</span><span class="op" id="6137001">(</span><span class="ident" id="6137002">Section</span><span class="op" id="6137009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137015">sh</span><span class="op" id="6137017">.</span><span class="ident" id="6137018">Name</span>&nbsp;<span class="op" id="6137023">=</span>&nbsp;<span class="ident" id="6137025">cstring</span><span class="op" id="6137032">(</span><span class="ident" id="6137033">sh64</span><span class="op" id="6137037">.</span><span class="ident" id="6137038">Name</span><span class="op" id="6137042">[</span><span class="num" id="6137043">0</span><span class="op" id="6137044">:</span><span class="op" id="6137045">]</span><span class="op" id="6137046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137052">sh</span><span class="op" id="6137054">.</span><span class="ident" id="6137055">Seg</span>&nbsp;<span class="op" id="6137059">=</span>&nbsp;<span class="ident" id="6137061">cstring</span><span class="op" id="6137068">(</span><span class="ident" id="6137069">sh64</span><span class="op" id="6137073">.</span><span class="ident" id="6137074">Seg</span><span class="op" id="6137077">[</span><span class="num" id="6137078">0</span><span class="op" id="6137079">:</span><span class="op" id="6137080">]</span><span class="op" id="6137081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137087">sh</span><span class="op" id="6137089">.</span><span class="ident" id="6137090">Addr</span>&nbsp;<span class="op" id="6137095">=</span>&nbsp;<span class="ident" id="6137097">sh64</span><span class="op" id="6137101">.</span><span class="ident" id="6137102">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137111">sh</span><span class="op" id="6137113">.</span><span class="ident" id="6137114">Size</span>&nbsp;<span class="op" id="6137119">=</span>&nbsp;<span class="ident" id="6137121">sh64</span><span class="op" id="6137125">.</span><span class="ident" id="6137126">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137135">sh</span><span class="op" id="6137137">.</span><span class="ident" id="6137138">Offset</span>&nbsp;<span class="op" id="6137145">=</span>&nbsp;<span class="ident" id="6137147">sh64</span><span class="op" id="6137151">.</span><span class="ident" id="6137152">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137163">sh</span><span class="op" id="6137165">.</span><span class="ident" id="6137166">Align</span>&nbsp;<span class="op" id="6137172">=</span>&nbsp;<span class="ident" id="6137174">sh64</span><span class="op" id="6137178">.</span><span class="ident" id="6137179">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137189">sh</span><span class="op" id="6137191">.</span><span class="ident" id="6137192">Reloff</span>&nbsp;<span class="op" id="6137199">=</span>&nbsp;<span class="ident" id="6137201">sh64</span><span class="op" id="6137205">.</span><span class="ident" id="6137206">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137217">sh</span><span class="op" id="6137219">.</span><span class="ident" id="6137220">Nreloc</span>&nbsp;<span class="op" id="6137227">=</span>&nbsp;<span class="ident" id="6137229">sh64</span><span class="op" id="6137233">.</span><span class="ident" id="6137234">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137245">sh</span><span class="op" id="6137247">.</span><span class="ident" id="6137248">Flags</span>&nbsp;<span class="op" id="6137254">=</span>&nbsp;<span class="ident" id="6137256">sh64</span><span class="op" id="6137260">.</span><span class="ident" id="6137261">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137271">f</span><span class="op" id="6137272">.</span><span class="ident" id="6137273">pushSection</span><span class="op" id="6137284">(</span><span class="ident" id="6137285">sh</span><span class="op" id="6137287">,</span>&nbsp;<span class="ident" id="6137289">r</span><span class="op" id="6137290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6137295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6137299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6137303">if</span>&nbsp;<span class="ident" id="6137306">s</span>&nbsp;<span class="op" id="6137308">!=</span>&nbsp;<span class="builtintype" id="6137311">nil</span>&nbsp;<span class="op" id="6137315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137320">s</span><span class="op" id="6137321">.</span><span class="ident" id="6137322">sr</span>&nbsp;<span class="op" id="6137325">=</span>&nbsp;<span class="ident" id="6137327">io</span><span class="op" id="6137329">.</span><span class="ident" id="6137330">NewSectionReader</span><span class="op" id="6137346">(</span><span class="ident" id="6137347">r</span><span class="op" id="6137348">,</span>&nbsp;<span class="builtintype" id="6137350">int64</span><span class="op" id="6137355">(</span><span class="ident" id="6137356">s</span><span class="op" id="6137357">.</span><span class="ident" id="6137358">Offset</span><span class="op" id="6137364">)</span><span class="op" id="6137365">,</span>&nbsp;<span class="builtintype" id="6137367">int64</span><span class="op" id="6137372">(</span><span class="ident" id="6137373">s</span><span class="op" id="6137374">.</span><span class="ident" id="6137375">Filesz</span><span class="op" id="6137381">)</span><span class="op" id="6137382">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137387">s</span><span class="op" id="6137388">.</span><span class="ident" id="6137389">ReaderAt</span>&nbsp;<span class="op" id="6137398">=</span>&nbsp;<span class="ident" id="6137400">s</span><span class="op" id="6137401">.</span><span class="ident" id="6137402">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6137407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6137410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6137413">return</span>&nbsp;<span class="ident" id="6137420">f</span><span class="op" id="6137421">,</span>&nbsp;<span class="builtintype" id="6137423">nil</span><br>
<span class="lineno"></span><span class="op" id="6137427">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="6137430">func</span>&nbsp;<span class="op" id="6137435">(</span><span class="ident" id="6137436">f</span>&nbsp;<span class="op" id="6137438">*</span><span class="ident" id="6137439">File</span><span class="op" id="6137443">)</span>&nbsp;<span class="ident" id="6137445">parseSymtab</span><span class="op" id="6137456">(</span><span class="ident" id="6137457">symdat</span><span class="op" id="6137463">,</span>&nbsp;<span class="ident" id="6137465">strtab</span><span class="op" id="6137471">,</span>&nbsp;<span class="ident" id="6137473">cmddat</span>&nbsp;<span class="op" id="6137480">[</span><span class="op" id="6137481">]</span><span class="builtintype" id="6137482">byte</span><span class="op" id="6137486">,</span>&nbsp;<span class="ident" id="6137488">hdr</span>&nbsp;<span class="op" id="6137492">*</span><span class="ident" id="6137493">SymtabCmd</span><span class="op" id="6137502">,</span>&nbsp;<span class="ident" id="6137504">offset</span>&nbsp;<span class="builtintype" id="6137511">int64</span><span class="op" id="6137516">)</span>&nbsp;<span class="op" id="6137518">(</span><span class="op" id="6137519">*</span><span class="ident" id="6137520">Symtab</span><span class="op" id="6137526">,</span>&nbsp;<span class="builtintype" id="6137528">error</span><span class="op" id="6137533">)</span>&nbsp;<span class="op" id="6137535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137538">bo</span>&nbsp;<span class="op" id="6137541">:=</span>&nbsp;<span class="ident" id="6137544">f</span><span class="op" id="6137545">.</span><span class="ident" id="6137546">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137557">symtab</span>&nbsp;<span class="op" id="6137564">:=</span>&nbsp;<span class="builtinfunc" id="6137567">make</span><span class="op" id="6137571">(</span><span class="op" id="6137572">[</span><span class="op" id="6137573">]</span><span class="ident" id="6137574">Symbol</span><span class="op" id="6137580">,</span>&nbsp;<span class="ident" id="6137582">hdr</span><span class="op" id="6137585">.</span><span class="ident" id="6137586">Nsyms</span><span class="op" id="6137591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137594">b</span>&nbsp;<span class="op" id="6137596">:=</span>&nbsp;<span class="ident" id="6137599">bytes</span><span class="op" id="6137604">.</span><span class="ident" id="6137605">NewReader</span><span class="op" id="6137614">(</span><span class="ident" id="6137615">symdat</span><span class="op" id="6137621">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6137624">for</span>&nbsp;<span class="ident" id="6137628">i</span>&nbsp;<span class="op" id="6137630">:=</span>&nbsp;<span class="keyword" id="6137633">range</span>&nbsp;<span class="ident" id="6137639">symtab</span>&nbsp;<span class="op" id="6137646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6137650">var</span>&nbsp;<span class="ident" id="6137654">n</span>&nbsp;<span class="ident" id="6137656">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6137666">if</span>&nbsp;<span class="ident" id="6137669">f</span><span class="op" id="6137670">.</span><span class="ident" id="6137671">Magic</span>&nbsp;<span class="op" id="6137677">==</span>&nbsp;<span class="ident" id="6137680">Magic64</span>&nbsp;<span class="op" id="6137688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6137693">if</span>&nbsp;<span class="ident" id="6137696">err</span>&nbsp;<span class="op" id="6137700">:=</span>&nbsp;<span class="ident" id="6137703">binary</span><span class="op" id="6137709">.</span><span class="ident" id="6137710">Read</span><span class="op" id="6137714">(</span><span class="ident" id="6137715">b</span><span class="op" id="6137716">,</span>&nbsp;<span class="ident" id="6137718">bo</span><span class="op" id="6137720">,</span>&nbsp;<span class="op" id="6137722">&amp;</span><span class="ident" id="6137723">n</span><span class="op" id="6137724">)</span><span class="op" id="6137725">;</span>&nbsp;<span class="ident" id="6137727">err</span>&nbsp;<span class="op" id="6137731">!=</span>&nbsp;<span class="builtintype" id="6137734">nil</span>&nbsp;<span class="op" id="6137738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6137744">return</span>&nbsp;<span class="builtintype" id="6137751">nil</span><span class="op" id="6137754">,</span>&nbsp;<span class="ident" id="6137756">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6137763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6137767">}</span>&nbsp;<span class="keyword" id="6137769">else</span>&nbsp;<span class="op" id="6137774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6137779">var</span>&nbsp;<span class="ident" id="6137783">n32</span>&nbsp;<span class="ident" id="6137787">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6137798">if</span>&nbsp;<span class="ident" id="6137801">err</span>&nbsp;<span class="op" id="6137805">:=</span>&nbsp;<span class="ident" id="6137808">binary</span><span class="op" id="6137814">.</span><span class="ident" id="6137815">Read</span><span class="op" id="6137819">(</span><span class="ident" id="6137820">b</span><span class="op" id="6137821">,</span>&nbsp;<span class="ident" id="6137823">bo</span><span class="op" id="6137825">,</span>&nbsp;<span class="op" id="6137827">&amp;</span><span class="ident" id="6137828">n32</span><span class="op" id="6137831">)</span><span class="op" id="6137832">;</span>&nbsp;<span class="ident" id="6137834">err</span>&nbsp;<span class="op" id="6137838">!=</span>&nbsp;<span class="builtintype" id="6137841">nil</span>&nbsp;<span class="op" id="6137845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6137851">return</span>&nbsp;<span class="builtintype" id="6137858">nil</span><span class="op" id="6137861">,</span>&nbsp;<span class="ident" id="6137863">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6137870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137875">n</span><span class="op" id="6137876">.</span><span class="ident" id="6137877">Name</span>&nbsp;<span class="op" id="6137882">=</span>&nbsp;<span class="ident" id="6137884">n32</span><span class="op" id="6137887">.</span><span class="ident" id="6137888">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137896">n</span><span class="op" id="6137897">.</span><span class="ident" id="6137898">Type</span>&nbsp;<span class="op" id="6137903">=</span>&nbsp;<span class="ident" id="6137905">n32</span><span class="op" id="6137908">.</span><span class="ident" id="6137909">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137917">n</span><span class="op" id="6137918">.</span><span class="ident" id="6137919">Sect</span>&nbsp;<span class="op" id="6137924">=</span>&nbsp;<span class="ident" id="6137926">n32</span><span class="op" id="6137929">.</span><span class="ident" id="6137930">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137938">n</span><span class="op" id="6137939">.</span><span class="ident" id="6137940">Desc</span>&nbsp;<span class="op" id="6137945">=</span>&nbsp;<span class="ident" id="6137947">n32</span><span class="op" id="6137950">.</span><span class="ident" id="6137951">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137959">n</span><span class="op" id="6137960">.</span><span class="ident" id="6137961">Value</span>&nbsp;<span class="op" id="6137967">=</span>&nbsp;<span class="builtintype" id="6137969">uint64</span><span class="op" id="6137975">(</span><span class="ident" id="6137976">n32</span><span class="op" id="6137979">.</span><span class="ident" id="6137980">Value</span><span class="op" id="6137985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6137989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6137993">sym</span>&nbsp;<span class="op" id="6137997">:=</span>&nbsp;<span class="op" id="6138000">&amp;</span><span class="ident" id="6138001">symtab</span><span class="op" id="6138007">[</span><span class="ident" id="6138008">i</span><span class="op" id="6138009">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6138013">if</span>&nbsp;<span class="ident" id="6138016">n</span><span class="op" id="6138017">.</span><span class="ident" id="6138018">Name</span>&nbsp;<span class="op" id="6138023">&gt;=</span>&nbsp;<span class="builtintype" id="6138026">uint32</span><span class="op" id="6138032">(</span><span class="builtinfunc" id="6138033">len</span><span class="op" id="6138036">(</span><span class="ident" id="6138037">strtab</span><span class="op" id="6138043">)</span><span class="op" id="6138044">)</span>&nbsp;<span class="op" id="6138046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6138051">return</span>&nbsp;<span class="builtintype" id="6138058">nil</span><span class="op" id="6138061">,</span>&nbsp;<span class="op" id="6138063">&amp;</span><span class="ident" id="6138064">FormatError</span><span class="op" id="6138075">{</span><span class="ident" id="6138076">offset</span><span class="op" id="6138082">,</span>&nbsp;<span class="string" id="6138084">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6138114">,</span>&nbsp;<span class="ident" id="6138116">n</span><span class="op" id="6138117">.</span><span class="ident" id="6138118">Name</span><span class="op" id="6138122">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6138126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138130">sym</span><span class="op" id="6138133">.</span><span class="ident" id="6138134">Name</span>&nbsp;<span class="op" id="6138139">=</span>&nbsp;<span class="ident" id="6138141">cstring</span><span class="op" id="6138148">(</span><span class="ident" id="6138149">strtab</span><span class="op" id="6138155">[</span><span class="ident" id="6138156">n</span><span class="op" id="6138157">.</span><span class="ident" id="6138158">Name</span><span class="op" id="6138162">:</span><span class="op" id="6138163">]</span><span class="op" id="6138164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138168">sym</span><span class="op" id="6138171">.</span><span class="ident" id="6138172">Type</span>&nbsp;<span class="op" id="6138177">=</span>&nbsp;<span class="ident" id="6138179">n</span><span class="op" id="6138180">.</span><span class="ident" id="6138181">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138188">sym</span><span class="op" id="6138191">.</span><span class="ident" id="6138192">Sect</span>&nbsp;<span class="op" id="6138197">=</span>&nbsp;<span class="ident" id="6138199">n</span><span class="op" id="6138200">.</span><span class="ident" id="6138201">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138208">sym</span><span class="op" id="6138211">.</span><span class="ident" id="6138212">Desc</span>&nbsp;<span class="op" id="6138217">=</span>&nbsp;<span class="ident" id="6138219">n</span><span class="op" id="6138220">.</span><span class="ident" id="6138221">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138228">sym</span><span class="op" id="6138231">.</span><span class="ident" id="6138232">Value</span>&nbsp;<span class="op" id="6138238">=</span>&nbsp;<span class="ident" id="6138240">n</span><span class="op" id="6138241">.</span><span class="ident" id="6138242">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6138249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138252">st</span>&nbsp;<span class="op" id="6138255">:=</span>&nbsp;<span class="builtinfunc" id="6138258">new</span><span class="op" id="6138261">(</span><span class="ident" id="6138262">Symtab</span><span class="op" id="6138268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138271">st</span><span class="op" id="6138273">.</span><span class="ident" id="6138274">LoadBytes</span>&nbsp;<span class="op" id="6138284">=</span>&nbsp;<span class="ident" id="6138286">LoadBytes</span><span class="op" id="6138295">(</span><span class="ident" id="6138296">cmddat</span><span class="op" id="6138302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138305">st</span><span class="op" id="6138307">.</span><span class="ident" id="6138308">Syms</span>&nbsp;<span class="op" id="6138313">=</span>&nbsp;<span class="ident" id="6138315">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6138323">return</span>&nbsp;<span class="ident" id="6138330">st</span><span class="op" id="6138332">,</span>&nbsp;<span class="builtintype" id="6138334">nil</span><br>
<span class="lineno"></span><span class="op" id="6138338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6138341">func</span>&nbsp;<span class="op" id="6138346">(</span><span class="ident" id="6138347">f</span>&nbsp;<span class="op" id="6138349">*</span><span class="ident" id="6138350">File</span><span class="op" id="6138354">)</span>&nbsp;<span class="ident" id="6138356">pushSection</span><span class="op" id="6138367">(</span><span class="ident" id="6138368">sh</span>&nbsp;<span class="op" id="6138371">*</span><span class="ident" id="6138372">Section</span><span class="op" id="6138379">,</span>&nbsp;<span class="ident" id="6138381">r</span>&nbsp;<span class="ident" id="6138383">io</span><span class="op" id="6138385">.</span><span class="ident" id="6138386">ReaderAt</span><span class="op" id="6138394">)</span>&nbsp;<span class="op" id="6138396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138399">f</span><span class="op" id="6138400">.</span><span class="ident" id="6138401">Sections</span>&nbsp;<span class="op" id="6138410">=</span>&nbsp;<span class="builtinfunc" id="6138412">append</span><span class="op" id="6138418">(</span><span class="ident" id="6138419">f</span><span class="op" id="6138420">.</span><span class="ident" id="6138421">Sections</span><span class="op" id="6138429">,</span>&nbsp;<span class="ident" id="6138431">sh</span><span class="op" id="6138433">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138436">sh</span><span class="op" id="6138438">.</span><span class="ident" id="6138439">sr</span>&nbsp;<span class="op" id="6138442">=</span>&nbsp;<span class="ident" id="6138444">io</span><span class="op" id="6138446">.</span><span class="ident" id="6138447">NewSectionReader</span><span class="op" id="6138463">(</span><span class="ident" id="6138464">r</span><span class="op" id="6138465">,</span>&nbsp;<span class="builtintype" id="6138467">int64</span><span class="op" id="6138472">(</span><span class="ident" id="6138473">sh</span><span class="op" id="6138475">.</span><span class="ident" id="6138476">Offset</span><span class="op" id="6138482">)</span><span class="op" id="6138483">,</span>&nbsp;<span class="builtintype" id="6138485">int64</span><span class="op" id="6138490">(</span><span class="ident" id="6138491">sh</span><span class="op" id="6138493">.</span><span class="ident" id="6138494">Size</span><span class="op" id="6138498">)</span><span class="op" id="6138499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6138502">sh</span><span class="op" id="6138504">.</span><span class="ident" id="6138505">ReaderAt</span>&nbsp;<span class="op" id="6138514">=</span>&nbsp;<span class="ident" id="6138516">sh</span><span class="op" id="6138518">.</span><span class="ident" id="6138519">sr</span><br>
<span class="lineno"></span><span class="op" id="6138522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6138525">func</span>&nbsp;<span class="ident" id="6138530">cstring</span><span class="op" id="6138537">(</span><span class="ident" id="6138538">b</span>&nbsp;<span class="op" id="6138540">[</span><span class="op" id="6138541">]</span><span class="builtintype" id="6138542">byte</span><span class="op" id="6138546">)</span>&nbsp;<span class="builtintype" id="6138548">string</span>&nbsp;<span class="op" id="6138555">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6138558">var</span>&nbsp;<span class="ident" id="6138562">i</span>&nbsp;<span class="builtintype" id="6138564">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6138569">for</span>&nbsp;<span class="ident" id="6138573">i</span>&nbsp;<span class="op" id="6138575">=</span>&nbsp;<span class="num" id="6138577">0</span><span class="op" id="6138578">;</span>&nbsp;<span class="ident" id="6138580">i</span>&nbsp;<span class="op" id="6138582">&lt;</span>&nbsp;<span class="builtinfunc" id="6138584">len</span><span class="op" id="6138587">(</span><span class="ident" id="6138588">b</span><span class="op" id="6138589">)</span>&nbsp;<span class="op" id="6138591">&amp;&amp;</span>&nbsp;<span class="ident" id="6138594">b</span><span class="op" id="6138595">[</span><span class="ident" id="6138596">i</span><span class="op" id="6138597">]</span>&nbsp;<span class="op" id="6138599">!=</span>&nbsp;<span class="num" id="6138602">0</span><span class="op" id="6138603">;</span>&nbsp;<span class="ident" id="6138605">i</span><span class="op" id="6138606">++</span>&nbsp;<span class="op" id="6138609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6138612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6138615">return</span>&nbsp;<span class="builtintype" id="6138622">string</span><span class="op" id="6138628">(</span><span class="ident" id="6138629">b</span><span class="op" id="6138630">[</span><span class="num" id="6138631">0</span><span class="op" id="6138632">:</span><span class="ident" id="6138633">i</span><span class="op" id="6138634">]</span><span class="op" id="6138635">)</span><br>
<span class="lineno"></span><span class="op" id="6138637">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="6138640">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6138732">func</span>&nbsp;<span class="op" id="6138737">(</span><span class="ident" id="6138738">f</span>&nbsp;<span class="op" id="6138740">*</span><span class="ident" id="6138741">File</span><span class="op" id="6138745">)</span>&nbsp;<span class="ident" id="6138747">Segment</span><span class="op" id="6138754">(</span><span class="ident" id="6138755">name</span>&nbsp;<span class="builtintype" id="6138760">string</span><span class="op" id="6138766">)</span>&nbsp;<span class="op" id="6138768">*</span><span class="ident" id="6138769">Segment</span>&nbsp;<span class="op" id="6138777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6138780">for</span>&nbsp;<span class="ident" id="6138784">_</span><span class="op" id="6138785">,</span>&nbsp;<span class="ident" id="6138787">l</span>&nbsp;<span class="op" id="6138789">:=</span>&nbsp;<span class="keyword" id="6138792">range</span>&nbsp;<span class="ident" id="6138798">f</span><span class="op" id="6138799">.</span><span class="ident" id="6138800">Loads</span>&nbsp;<span class="op" id="6138806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6138810">if</span>&nbsp;<span class="ident" id="6138813">s</span><span class="op" id="6138814">,</span>&nbsp;<span class="ident" id="6138816">ok</span>&nbsp;<span class="op" id="6138819">:=</span>&nbsp;<span class="ident" id="6138822">l</span><span class="op" id="6138823">.</span><span class="op" id="6138824">(</span><span class="op" id="6138825">*</span><span class="ident" id="6138826">Segment</span><span class="op" id="6138833">)</span><span class="op" id="6138834">;</span>&nbsp;<span class="ident" id="6138836">ok</span>&nbsp;<span class="op" id="6138839">&amp;&amp;</span>&nbsp;<span class="ident" id="6138842">s</span><span class="op" id="6138843">.</span><span class="ident" id="6138844">Name</span>&nbsp;<span class="op" id="6138849">==</span>&nbsp;<span class="ident" id="6138852">name</span>&nbsp;<span class="op" id="6138857">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6138862">return</span>&nbsp;<span class="ident" id="6138869">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6138873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6138876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6138879">return</span>&nbsp;<span class="builtintype" id="6138886">nil</span><br>
<span class="lineno"></span><span class="op" id="6138890">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="6138893">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6138969">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="6138988">func</span>&nbsp;<span class="op" id="6138993">(</span><span class="ident" id="6138994">f</span>&nbsp;<span class="op" id="6138996">*</span><span class="ident" id="6138997">File</span><span class="op" id="6139001">)</span>&nbsp;<span class="ident" id="6139003">Section</span><span class="op" id="6139010">(</span><span class="ident" id="6139011">name</span>&nbsp;<span class="builtintype" id="6139016">string</span><span class="op" id="6139022">)</span>&nbsp;<span class="op" id="6139024">*</span><span class="ident" id="6139025">Section</span>&nbsp;<span class="op" id="6139033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139036">for</span>&nbsp;<span class="ident" id="6139040">_</span><span class="op" id="6139041">,</span>&nbsp;<span class="ident" id="6139043">s</span>&nbsp;<span class="op" id="6139045">:=</span>&nbsp;<span class="keyword" id="6139048">range</span>&nbsp;<span class="ident" id="6139054">f</span><span class="op" id="6139055">.</span><span class="ident" id="6139056">Sections</span>&nbsp;<span class="op" id="6139065">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139069">if</span>&nbsp;<span class="ident" id="6139072">s</span><span class="op" id="6139073">.</span><span class="ident" id="6139074">Name</span>&nbsp;<span class="op" id="6139079">==</span>&nbsp;<span class="ident" id="6139082">name</span>&nbsp;<span class="op" id="6139087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139092">return</span>&nbsp;<span class="ident" id="6139099">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6139103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6139106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139109">return</span>&nbsp;<span class="builtintype" id="6139116">nil</span><br>
<span class="lineno">470</span><span class="op" id="6139120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6139123">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6139189">func</span>&nbsp;<span class="op" id="6139194">(</span><span class="ident" id="6139195">f</span>&nbsp;<span class="op" id="6139197">*</span><span class="ident" id="6139198">File</span><span class="op" id="6139202">)</span>&nbsp;<span class="ident" id="6139204">DWARF</span><span class="op" id="6139209">(</span><span class="op" id="6139210">)</span>&nbsp;<span class="op" id="6139212">(</span><span class="op" id="6139213">*</span><span class="ident" id="6139214">dwarf</span><span class="op" id="6139219">.</span><span class="ident" id="6139220">Data</span><span class="op" id="6139224">,</span>&nbsp;<span class="builtintype" id="6139226">error</span><span class="op" id="6139231">)</span>&nbsp;<span class="op" id="6139233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6139236">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6139287">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6139342">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139401">var</span>&nbsp;<span class="ident" id="6139405">names</span>&nbsp;<span class="op" id="6139411">=</span>&nbsp;<span class="op" id="6139413">[</span><span class="op" id="6139414">...</span><span class="op" id="6139417">]</span><span class="builtintype" id="6139418">string</span><span class="op" id="6139424">{</span><span class="string" id="6139425">&#34;abbrev&#34;</span><span class="op" id="6139433">,</span>&nbsp;<span class="string" id="6139435">&#34;info&#34;</span><span class="op" id="6139441">,</span>&nbsp;<span class="string" id="6139443">&#34;str&#34;</span><span class="op" id="6139448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139451">var</span>&nbsp;<span class="ident" id="6139455">dat</span>&nbsp;<span class="op" id="6139459">[</span><span class="builtinfunc" id="6139460">len</span><span class="op" id="6139463">(</span><span class="ident" id="6139464">names</span><span class="op" id="6139469">)</span><span class="op" id="6139470">]</span><span class="op" id="6139471">[</span><span class="op" id="6139472">]</span><span class="builtintype" id="6139473">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139479">for</span>&nbsp;<span class="ident" id="6139483">i</span><span class="op" id="6139484">,</span>&nbsp;<span class="ident" id="6139486">name</span>&nbsp;<span class="op" id="6139491">:=</span>&nbsp;<span class="keyword" id="6139494">range</span>&nbsp;<span class="ident" id="6139500">names</span>&nbsp;<span class="op" id="6139506">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6139510">name</span>&nbsp;<span class="op" id="6139515">=</span>&nbsp;<span class="string" id="6139517">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="6139528">+</span>&nbsp;<span class="ident" id="6139530">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6139537">s</span>&nbsp;<span class="op" id="6139539">:=</span>&nbsp;<span class="ident" id="6139542">f</span><span class="op" id="6139543">.</span><span class="ident" id="6139544">Section</span><span class="op" id="6139551">(</span><span class="ident" id="6139552">name</span><span class="op" id="6139556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139560">if</span>&nbsp;<span class="ident" id="6139563">s</span>&nbsp;<span class="op" id="6139565">==</span>&nbsp;<span class="builtintype" id="6139568">nil</span>&nbsp;<span class="op" id="6139572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139577">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6139588">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6139592">b</span><span class="op" id="6139593">,</span>&nbsp;<span class="ident" id="6139595">err</span>&nbsp;<span class="op" id="6139599">:=</span>&nbsp;<span class="ident" id="6139602">s</span><span class="op" id="6139603">.</span><span class="ident" id="6139604">Data</span><span class="op" id="6139608">(</span><span class="op" id="6139609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139613">if</span>&nbsp;<span class="ident" id="6139616">err</span>&nbsp;<span class="op" id="6139620">!=</span>&nbsp;<span class="builtintype" id="6139623">nil</span>&nbsp;<span class="op" id="6139627">&amp;&amp;</span>&nbsp;<span class="builtintype" id="6139630">uint64</span><span class="op" id="6139636">(</span><span class="builtinfunc" id="6139637">len</span><span class="op" id="6139640">(</span><span class="ident" id="6139641">b</span><span class="op" id="6139642">)</span><span class="op" id="6139643">)</span>&nbsp;<span class="op" id="6139645">&lt;</span>&nbsp;<span class="ident" id="6139647">s</span><span class="op" id="6139648">.</span><span class="ident" id="6139649">Size</span>&nbsp;<span class="op" id="6139654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139659">return</span>&nbsp;<span class="builtintype" id="6139666">nil</span><span class="op" id="6139669">,</span>&nbsp;<span class="ident" id="6139671">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6139677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6139681">dat</span><span class="op" id="6139684">[</span><span class="ident" id="6139685">i</span><span class="op" id="6139686">]</span>&nbsp;<span class="op" id="6139688">=</span>&nbsp;<span class="ident" id="6139690">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6139693">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6139697">abbrev</span><span class="op" id="6139703">,</span>&nbsp;<span class="ident" id="6139705">info</span><span class="op" id="6139709">,</span>&nbsp;<span class="ident" id="6139711">str</span>&nbsp;<span class="op" id="6139715">:=</span>&nbsp;<span class="ident" id="6139718">dat</span><span class="op" id="6139721">[</span><span class="num" id="6139722">0</span><span class="op" id="6139723">]</span><span class="op" id="6139724">,</span>&nbsp;<span class="ident" id="6139726">dat</span><span class="op" id="6139729">[</span><span class="num" id="6139730">1</span><span class="op" id="6139731">]</span><span class="op" id="6139732">,</span>&nbsp;<span class="ident" id="6139734">dat</span><span class="op" id="6139737">[</span><span class="num" id="6139738">2</span><span class="op" id="6139739">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6139742">return</span>&nbsp;<span class="ident" id="6139749">dwarf</span><span class="op" id="6139754">.</span><span class="ident" id="6139755">New</span><span class="op" id="6139758">(</span><span class="ident" id="6139759">abbrev</span><span class="op" id="6139765">,</span>&nbsp;<span class="builtintype" id="6139767">nil</span><span class="op" id="6139770">,</span>&nbsp;<span class="builtintype" id="6139772">nil</span><span class="op" id="6139775">,</span>&nbsp;<span class="ident" id="6139777">info</span><span class="op" id="6139781">,</span>&nbsp;<span class="builtintype" id="6139783">nil</span><span class="op" id="6139786">,</span>&nbsp;<span class="builtintype" id="6139788">nil</span><span class="op" id="6139791">,</span>&nbsp;<span class="builtintype" id="6139793">nil</span><span class="op" id="6139796">,</span>&nbsp;<span class="ident" id="6139798">str</span><span class="op" id="6139801">)</span><br>
<span class="lineno"></span><span class="op" id="6139803">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="6139806">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="6139858">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6139913">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6139967">func</span>&nbsp;<span class="op" id="6139972">(</span><span class="ident" id="6139973">f</span>&nbsp;<span class="op" id="6139975">*</span><span class="ident" id="6139976">File</span><span class="op" id="6139980">)</span>&nbsp;<span class="ident" id="6139982">ImportedSymbols</span><span class="op" id="6139997">(</span><span class="op" id="6139998">)</span>&nbsp;<span class="op" id="6140000">(</span><span class="op" id="6140001">[</span><span class="op" id="6140002">]</span><span class="builtintype" id="6140003">string</span><span class="op" id="6140009">,</span>&nbsp;<span class="builtintype" id="6140011">error</span><span class="op" id="6140016">)</span>&nbsp;<span class="op" id="6140018">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6140021">if</span>&nbsp;<span class="ident" id="6140024">f</span><span class="op" id="6140025">.</span><span class="ident" id="6140026">Dysymtab</span>&nbsp;<span class="op" id="6140035">==</span>&nbsp;<span class="builtintype" id="6140038">nil</span>&nbsp;<span class="op" id="6140042">||</span>&nbsp;<span class="ident" id="6140045">f</span><span class="op" id="6140046">.</span><span class="ident" id="6140047">Symtab</span>&nbsp;<span class="op" id="6140054">==</span>&nbsp;<span class="builtintype" id="6140057">nil</span>&nbsp;<span class="op" id="6140061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6140065">return</span>&nbsp;<span class="builtintype" id="6140072">nil</span><span class="op" id="6140075">,</span>&nbsp;<span class="op" id="6140077">&amp;</span><span class="ident" id="6140078">FormatError</span><span class="op" id="6140089">{</span><span class="num" id="6140090">0</span><span class="op" id="6140091">,</span>&nbsp;<span class="string" id="6140093">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="6140115">,</span>&nbsp;<span class="builtintype" id="6140117">nil</span><span class="op" id="6140120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6140123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6140127">st</span>&nbsp;<span class="op" id="6140130">:=</span>&nbsp;<span class="ident" id="6140133">f</span><span class="op" id="6140134">.</span><span class="ident" id="6140135">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6140143">dt</span>&nbsp;<span class="op" id="6140146">:=</span>&nbsp;<span class="ident" id="6140149">f</span><span class="op" id="6140150">.</span><span class="ident" id="6140151">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6140161">var</span>&nbsp;<span class="ident" id="6140165">all</span>&nbsp;<span class="op" id="6140169">[</span><span class="op" id="6140170">]</span><span class="builtintype" id="6140171">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6140179">for</span>&nbsp;<span class="ident" id="6140183">_</span><span class="op" id="6140184">,</span>&nbsp;<span class="ident" id="6140186">s</span>&nbsp;<span class="op" id="6140188">:=</span>&nbsp;<span class="keyword" id="6140191">range</span>&nbsp;<span class="ident" id="6140197">st</span><span class="op" id="6140199">.</span><span class="ident" id="6140200">Syms</span><span class="op" id="6140204">[</span><span class="ident" id="6140205">dt</span><span class="op" id="6140207">.</span><span class="ident" id="6140208">Iundefsym</span>&nbsp;<span class="op" id="6140218">:</span>&nbsp;<span class="ident" id="6140220">dt</span><span class="op" id="6140222">.</span><span class="ident" id="6140223">Iundefsym</span><span class="op" id="6140232">+</span><span class="ident" id="6140233">dt</span><span class="op" id="6140235">.</span><span class="ident" id="6140236">Nundefsym</span><span class="op" id="6140245">]</span>&nbsp;<span class="op" id="6140247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6140251">all</span>&nbsp;<span class="op" id="6140255">=</span>&nbsp;<span class="builtinfunc" id="6140257">append</span><span class="op" id="6140263">(</span><span class="ident" id="6140264">all</span><span class="op" id="6140267">,</span>&nbsp;<span class="ident" id="6140269">s</span><span class="op" id="6140270">.</span><span class="ident" id="6140271">Name</span><span class="op" id="6140275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6140278">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6140281">return</span>&nbsp;<span class="ident" id="6140288">all</span><span class="op" id="6140291">,</span>&nbsp;<span class="builtintype" id="6140293">nil</span><br>
<span class="lineno"></span><span class="op" id="6140297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6140300">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="6140356">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="6140411">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6140459">func</span>&nbsp;<span class="op" id="6140464">(</span><span class="ident" id="6140465">f</span>&nbsp;<span class="op" id="6140467">*</span><span class="ident" id="6140468">File</span><span class="op" id="6140472">)</span>&nbsp;<span class="ident" id="6140474">ImportedLibraries</span><span class="op" id="6140491">(</span><span class="op" id="6140492">)</span>&nbsp;<span class="op" id="6140494">(</span><span class="op" id="6140495">[</span><span class="op" id="6140496">]</span><span class="builtintype" id="6140497">string</span><span class="op" id="6140503">,</span>&nbsp;<span class="builtintype" id="6140505">error</span><span class="op" id="6140510">)</span>&nbsp;<span class="op" id="6140512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6140515">var</span>&nbsp;<span class="ident" id="6140519">all</span>&nbsp;<span class="op" id="6140523">[</span><span class="op" id="6140524">]</span><span class="builtintype" id="6140525">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6140533">for</span>&nbsp;<span class="ident" id="6140537">_</span><span class="op" id="6140538">,</span>&nbsp;<span class="ident" id="6140540">l</span>&nbsp;<span class="op" id="6140542">:=</span>&nbsp;<span class="keyword" id="6140545">range</span>&nbsp;<span class="ident" id="6140551">f</span><span class="op" id="6140552">.</span><span class="ident" id="6140553">Loads</span>&nbsp;<span class="op" id="6140559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6140563">if</span>&nbsp;<span class="ident" id="6140566">lib</span><span class="op" id="6140569">,</span>&nbsp;<span class="ident" id="6140571">ok</span>&nbsp;<span class="op" id="6140574">:=</span>&nbsp;<span class="ident" id="6140577">l</span><span class="op" id="6140578">.</span><span class="op" id="6140579">(</span><span class="op" id="6140580">*</span><span class="ident" id="6140581">Dylib</span><span class="op" id="6140586">)</span><span class="op" id="6140587">;</span>&nbsp;<span class="ident" id="6140589">ok</span>&nbsp;<span class="op" id="6140592">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6140597">all</span>&nbsp;<span class="op" id="6140601">=</span>&nbsp;<span class="builtinfunc" id="6140603">append</span><span class="op" id="6140609">(</span><span class="ident" id="6140610">all</span><span class="op" id="6140613">,</span>&nbsp;<span class="ident" id="6140615">lib</span><span class="op" id="6140618">.</span><span class="ident" id="6140619">Name</span><span class="op" id="6140623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6140627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6140630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6140633">return</span>&nbsp;<span class="ident" id="6140640">all</span><span class="op" id="6140643">,</span>&nbsp;<span class="builtintype" id="6140645">nil</span><br>
<span class="lineno"></span><span class="op" id="6140649">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
