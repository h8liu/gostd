<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8590854">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8590909">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8590963">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8591014">package</span>&nbsp;<span class="ident" id="8591022">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8591027">import</span>&nbsp;<span class="op" id="8591034">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8591037">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8591046">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8591056">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8591066">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8591069">var</span>&nbsp;<span class="ident" id="8591073">writeTests</span>&nbsp;<span class="op" id="8591084">=</span>&nbsp;<span class="op" id="8591086">[</span><span class="op" id="8591087">]</span><span class="keyword" id="8591088">struct</span>&nbsp;<span class="op" id="8591095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8591098">Input</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8591106">[</span><span class="op" id="8591107">]</span><span class="op" id="8591108">[</span><span class="op" id="8591109">]</span><span class="builtintype" id="8591110">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8591118">Output</span>&nbsp;&nbsp;<span class="builtintype" id="8591126">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8591134">UseCRLF</span>&nbsp;<span class="builtintype" id="8591142">bool</span><br>
<span class="lineno"></span><span class="op" id="8591147">}</span><span class="op" id="8591148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591151">{</span><span class="ident" id="8591152">Input</span><span class="op" id="8591157">:</span>&nbsp;<span class="op" id="8591159">[</span><span class="op" id="8591160">]</span><span class="op" id="8591161">[</span><span class="op" id="8591162">]</span><span class="builtintype" id="8591163">string</span><span class="op" id="8591169">{</span><span class="op" id="8591170">{</span><span class="string" id="8591171">&#34;abc&#34;</span><span class="op" id="8591176">}</span><span class="op" id="8591177">}</span><span class="op" id="8591178">,</span>&nbsp;<span class="ident" id="8591180">Output</span><span class="op" id="8591186">:</span>&nbsp;<span class="string" id="8591188">&#34;abc\n&#34;</span><span class="op" id="8591195">}</span><span class="op" id="8591196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591199">{</span><span class="ident" id="8591200">Input</span><span class="op" id="8591205">:</span>&nbsp;<span class="op" id="8591207">[</span><span class="op" id="8591208">]</span><span class="op" id="8591209">[</span><span class="op" id="8591210">]</span><span class="builtintype" id="8591211">string</span><span class="op" id="8591217">{</span><span class="op" id="8591218">{</span><span class="string" id="8591219">&#34;abc&#34;</span><span class="op" id="8591224">}</span><span class="op" id="8591225">}</span><span class="op" id="8591226">,</span>&nbsp;<span class="ident" id="8591228">Output</span><span class="op" id="8591234">:</span>&nbsp;<span class="string" id="8591236">&#34;abc\r\n&#34;</span><span class="op" id="8591245">,</span>&nbsp;<span class="ident" id="8591247">UseCRLF</span><span class="op" id="8591254">:</span>&nbsp;<span class="ident" id="8591256">true</span><span class="op" id="8591260">}</span><span class="op" id="8591261">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591264">{</span><span class="ident" id="8591265">Input</span><span class="op" id="8591270">:</span>&nbsp;<span class="op" id="8591272">[</span><span class="op" id="8591273">]</span><span class="op" id="8591274">[</span><span class="op" id="8591275">]</span><span class="builtintype" id="8591276">string</span><span class="op" id="8591282">{</span><span class="op" id="8591283">{</span><span class="string" id="8591284">`&#34;abc&#34;`</span><span class="op" id="8591291">}</span><span class="op" id="8591292">}</span><span class="op" id="8591293">,</span>&nbsp;<span class="ident" id="8591295">Output</span><span class="op" id="8591301">:</span>&nbsp;<span class="string" id="8591303">`&#34;&#34;&#34;abc&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="8591315">+</span>&nbsp;<span class="string" id="8591317">&#34;\n&#34;</span><span class="op" id="8591321">}</span><span class="op" id="8591322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591325">{</span><span class="ident" id="8591326">Input</span><span class="op" id="8591331">:</span>&nbsp;<span class="op" id="8591333">[</span><span class="op" id="8591334">]</span><span class="op" id="8591335">[</span><span class="op" id="8591336">]</span><span class="builtintype" id="8591337">string</span><span class="op" id="8591343">{</span><span class="op" id="8591344">{</span><span class="string" id="8591345">`a&#34;b`</span><span class="op" id="8591350">}</span><span class="op" id="8591351">}</span><span class="op" id="8591352">,</span>&nbsp;<span class="ident" id="8591354">Output</span><span class="op" id="8591360">:</span>&nbsp;<span class="string" id="8591362">`&#34;a&#34;&#34;b&#34;`</span>&nbsp;<span class="op" id="8591371">+</span>&nbsp;<span class="string" id="8591373">&#34;\n&#34;</span><span class="op" id="8591377">}</span><span class="op" id="8591378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591381">{</span><span class="ident" id="8591382">Input</span><span class="op" id="8591387">:</span>&nbsp;<span class="op" id="8591389">[</span><span class="op" id="8591390">]</span><span class="op" id="8591391">[</span><span class="op" id="8591392">]</span><span class="builtintype" id="8591393">string</span><span class="op" id="8591399">{</span><span class="op" id="8591400">{</span><span class="string" id="8591401">`&#34;a&#34;b&#34;`</span><span class="op" id="8591408">}</span><span class="op" id="8591409">}</span><span class="op" id="8591410">,</span>&nbsp;<span class="ident" id="8591412">Output</span><span class="op" id="8591418">:</span>&nbsp;<span class="string" id="8591420">`&#34;&#34;&#34;a&#34;&#34;b&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="8591433">+</span>&nbsp;<span class="string" id="8591435">&#34;\n&#34;</span><span class="op" id="8591439">}</span><span class="op" id="8591440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591443">{</span><span class="ident" id="8591444">Input</span><span class="op" id="8591449">:</span>&nbsp;<span class="op" id="8591451">[</span><span class="op" id="8591452">]</span><span class="op" id="8591453">[</span><span class="op" id="8591454">]</span><span class="builtintype" id="8591455">string</span><span class="op" id="8591461">{</span><span class="op" id="8591462">{</span><span class="string" id="8591463">&#34;&nbsp;abc&#34;</span><span class="op" id="8591469">}</span><span class="op" id="8591470">}</span><span class="op" id="8591471">,</span>&nbsp;<span class="ident" id="8591473">Output</span><span class="op" id="8591479">:</span>&nbsp;<span class="string" id="8591481">`&#34;&nbsp;abc&#34;`</span>&nbsp;<span class="op" id="8591490">+</span>&nbsp;<span class="string" id="8591492">&#34;\n&#34;</span><span class="op" id="8591496">}</span><span class="op" id="8591497">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591500">{</span><span class="ident" id="8591501">Input</span><span class="op" id="8591506">:</span>&nbsp;<span class="op" id="8591508">[</span><span class="op" id="8591509">]</span><span class="op" id="8591510">[</span><span class="op" id="8591511">]</span><span class="builtintype" id="8591512">string</span><span class="op" id="8591518">{</span><span class="op" id="8591519">{</span><span class="string" id="8591520">&#34;abc,def&#34;</span><span class="op" id="8591529">}</span><span class="op" id="8591530">}</span><span class="op" id="8591531">,</span>&nbsp;<span class="ident" id="8591533">Output</span><span class="op" id="8591539">:</span>&nbsp;<span class="string" id="8591541">`&#34;abc,def&#34;`</span>&nbsp;<span class="op" id="8591553">+</span>&nbsp;<span class="string" id="8591555">&#34;\n&#34;</span><span class="op" id="8591559">}</span><span class="op" id="8591560">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591563">{</span><span class="ident" id="8591564">Input</span><span class="op" id="8591569">:</span>&nbsp;<span class="op" id="8591571">[</span><span class="op" id="8591572">]</span><span class="op" id="8591573">[</span><span class="op" id="8591574">]</span><span class="builtintype" id="8591575">string</span><span class="op" id="8591581">{</span><span class="op" id="8591582">{</span><span class="string" id="8591583">&#34;abc&#34;</span><span class="op" id="8591588">,</span>&nbsp;<span class="string" id="8591590">&#34;def&#34;</span><span class="op" id="8591595">}</span><span class="op" id="8591596">}</span><span class="op" id="8591597">,</span>&nbsp;<span class="ident" id="8591599">Output</span><span class="op" id="8591605">:</span>&nbsp;<span class="string" id="8591607">&#34;abc,def\n&#34;</span><span class="op" id="8591618">}</span><span class="op" id="8591619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591622">{</span><span class="ident" id="8591623">Input</span><span class="op" id="8591628">:</span>&nbsp;<span class="op" id="8591630">[</span><span class="op" id="8591631">]</span><span class="op" id="8591632">[</span><span class="op" id="8591633">]</span><span class="builtintype" id="8591634">string</span><span class="op" id="8591640">{</span><span class="op" id="8591641">{</span><span class="string" id="8591642">&#34;abc&#34;</span><span class="op" id="8591647">}</span><span class="op" id="8591648">,</span>&nbsp;<span class="op" id="8591650">{</span><span class="string" id="8591651">&#34;def&#34;</span><span class="op" id="8591656">}</span><span class="op" id="8591657">}</span><span class="op" id="8591658">,</span>&nbsp;<span class="ident" id="8591660">Output</span><span class="op" id="8591666">:</span>&nbsp;<span class="string" id="8591668">&#34;abc\ndef\n&#34;</span><span class="op" id="8591680">}</span><span class="op" id="8591681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591684">{</span><span class="ident" id="8591685">Input</span><span class="op" id="8591690">:</span>&nbsp;<span class="op" id="8591692">[</span><span class="op" id="8591693">]</span><span class="op" id="8591694">[</span><span class="op" id="8591695">]</span><span class="builtintype" id="8591696">string</span><span class="op" id="8591702">{</span><span class="op" id="8591703">{</span><span class="string" id="8591704">&#34;abc\ndef&#34;</span><span class="op" id="8591714">}</span><span class="op" id="8591715">}</span><span class="op" id="8591716">,</span>&nbsp;<span class="ident" id="8591718">Output</span><span class="op" id="8591724">:</span>&nbsp;<span class="string" id="8591726">&#34;\&#34;abc\ndef\&#34;\n&#34;</span><span class="op" id="8591742">}</span><span class="op" id="8591743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591746">{</span><span class="ident" id="8591747">Input</span><span class="op" id="8591752">:</span>&nbsp;<span class="op" id="8591754">[</span><span class="op" id="8591755">]</span><span class="op" id="8591756">[</span><span class="op" id="8591757">]</span><span class="builtintype" id="8591758">string</span><span class="op" id="8591764">{</span><span class="op" id="8591765">{</span><span class="string" id="8591766">&#34;abc\ndef&#34;</span><span class="op" id="8591776">}</span><span class="op" id="8591777">}</span><span class="op" id="8591778">,</span>&nbsp;<span class="ident" id="8591780">Output</span><span class="op" id="8591786">:</span>&nbsp;<span class="string" id="8591788">&#34;\&#34;abc\r\ndef\&#34;\r\n&#34;</span><span class="op" id="8591808">,</span>&nbsp;<span class="ident" id="8591810">UseCRLF</span><span class="op" id="8591817">:</span>&nbsp;<span class="ident" id="8591819">true</span><span class="op" id="8591823">}</span><span class="op" id="8591824">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591827">{</span><span class="ident" id="8591828">Input</span><span class="op" id="8591833">:</span>&nbsp;<span class="op" id="8591835">[</span><span class="op" id="8591836">]</span><span class="op" id="8591837">[</span><span class="op" id="8591838">]</span><span class="builtintype" id="8591839">string</span><span class="op" id="8591845">{</span><span class="op" id="8591846">{</span><span class="string" id="8591847">&#34;abc\rdef&#34;</span><span class="op" id="8591857">}</span><span class="op" id="8591858">}</span><span class="op" id="8591859">,</span>&nbsp;<span class="ident" id="8591861">Output</span><span class="op" id="8591867">:</span>&nbsp;<span class="string" id="8591869">&#34;\&#34;abcdef\&#34;\r\n&#34;</span><span class="op" id="8591885">,</span>&nbsp;<span class="ident" id="8591887">UseCRLF</span><span class="op" id="8591894">:</span>&nbsp;<span class="ident" id="8591896">true</span><span class="op" id="8591900">}</span><span class="op" id="8591901">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591904">{</span><span class="ident" id="8591905">Input</span><span class="op" id="8591910">:</span>&nbsp;<span class="op" id="8591912">[</span><span class="op" id="8591913">]</span><span class="op" id="8591914">[</span><span class="op" id="8591915">]</span><span class="builtintype" id="8591916">string</span><span class="op" id="8591922">{</span><span class="op" id="8591923">{</span><span class="string" id="8591924">&#34;abc\rdef&#34;</span><span class="op" id="8591934">}</span><span class="op" id="8591935">}</span><span class="op" id="8591936">,</span>&nbsp;<span class="ident" id="8591938">Output</span><span class="op" id="8591944">:</span>&nbsp;<span class="string" id="8591946">&#34;\&#34;abc\rdef\&#34;\n&#34;</span><span class="op" id="8591962">,</span>&nbsp;<span class="ident" id="8591964">UseCRLF</span><span class="op" id="8591971">:</span>&nbsp;<span class="ident" id="8591973">false</span><span class="op" id="8591978">}</span><span class="op" id="8591979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8591982">{</span><span class="ident" id="8591983">Input</span><span class="op" id="8591988">:</span>&nbsp;<span class="op" id="8591990">[</span><span class="op" id="8591991">]</span><span class="op" id="8591992">[</span><span class="op" id="8591993">]</span><span class="builtintype" id="8591994">string</span><span class="op" id="8592000">{</span><span class="op" id="8592001">{</span><span class="string" id="8592002">&#34;&#34;</span><span class="op" id="8592004">}</span><span class="op" id="8592005">}</span><span class="op" id="8592006">,</span>&nbsp;<span class="ident" id="8592008">Output</span><span class="op" id="8592014">:</span>&nbsp;<span class="string" id="8592016">&#34;\n&#34;</span><span class="op" id="8592020">}</span><span class="op" id="8592021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592024">{</span><span class="ident" id="8592025">Input</span><span class="op" id="8592030">:</span>&nbsp;<span class="op" id="8592032">[</span><span class="op" id="8592033">]</span><span class="op" id="8592034">[</span><span class="op" id="8592035">]</span><span class="builtintype" id="8592036">string</span><span class="op" id="8592042">{</span><span class="op" id="8592043">{</span><span class="string" id="8592044">&#34;&#34;</span><span class="op" id="8592046">,</span>&nbsp;<span class="string" id="8592048">&#34;&#34;</span><span class="op" id="8592050">}</span><span class="op" id="8592051">}</span><span class="op" id="8592052">,</span>&nbsp;<span class="ident" id="8592054">Output</span><span class="op" id="8592060">:</span>&nbsp;<span class="string" id="8592062">&#34;,\n&#34;</span><span class="op" id="8592067">}</span><span class="op" id="8592068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592071">{</span><span class="ident" id="8592072">Input</span><span class="op" id="8592077">:</span>&nbsp;<span class="op" id="8592079">[</span><span class="op" id="8592080">]</span><span class="op" id="8592081">[</span><span class="op" id="8592082">]</span><span class="builtintype" id="8592083">string</span><span class="op" id="8592089">{</span><span class="op" id="8592090">{</span><span class="string" id="8592091">&#34;&#34;</span><span class="op" id="8592093">,</span>&nbsp;<span class="string" id="8592095">&#34;&#34;</span><span class="op" id="8592097">,</span>&nbsp;<span class="string" id="8592099">&#34;&#34;</span><span class="op" id="8592101">}</span><span class="op" id="8592102">}</span><span class="op" id="8592103">,</span>&nbsp;<span class="ident" id="8592105">Output</span><span class="op" id="8592111">:</span>&nbsp;<span class="string" id="8592113">&#34;,,\n&#34;</span><span class="op" id="8592119">}</span><span class="op" id="8592120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592123">{</span><span class="ident" id="8592124">Input</span><span class="op" id="8592129">:</span>&nbsp;<span class="op" id="8592131">[</span><span class="op" id="8592132">]</span><span class="op" id="8592133">[</span><span class="op" id="8592134">]</span><span class="builtintype" id="8592135">string</span><span class="op" id="8592141">{</span><span class="op" id="8592142">{</span><span class="string" id="8592143">&#34;&#34;</span><span class="op" id="8592145">,</span>&nbsp;<span class="string" id="8592147">&#34;&#34;</span><span class="op" id="8592149">,</span>&nbsp;<span class="string" id="8592151">&#34;a&#34;</span><span class="op" id="8592154">}</span><span class="op" id="8592155">}</span><span class="op" id="8592156">,</span>&nbsp;<span class="ident" id="8592158">Output</span><span class="op" id="8592164">:</span>&nbsp;<span class="string" id="8592166">&#34;,,a\n&#34;</span><span class="op" id="8592173">}</span><span class="op" id="8592174">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592177">{</span><span class="ident" id="8592178">Input</span><span class="op" id="8592183">:</span>&nbsp;<span class="op" id="8592185">[</span><span class="op" id="8592186">]</span><span class="op" id="8592187">[</span><span class="op" id="8592188">]</span><span class="builtintype" id="8592189">string</span><span class="op" id="8592195">{</span><span class="op" id="8592196">{</span><span class="string" id="8592197">&#34;&#34;</span><span class="op" id="8592199">,</span>&nbsp;<span class="string" id="8592201">&#34;a&#34;</span><span class="op" id="8592204">,</span>&nbsp;<span class="string" id="8592206">&#34;&#34;</span><span class="op" id="8592208">}</span><span class="op" id="8592209">}</span><span class="op" id="8592210">,</span>&nbsp;<span class="ident" id="8592212">Output</span><span class="op" id="8592218">:</span>&nbsp;<span class="string" id="8592220">&#34;,a,\n&#34;</span><span class="op" id="8592227">}</span><span class="op" id="8592228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592231">{</span><span class="ident" id="8592232">Input</span><span class="op" id="8592237">:</span>&nbsp;<span class="op" id="8592239">[</span><span class="op" id="8592240">]</span><span class="op" id="8592241">[</span><span class="op" id="8592242">]</span><span class="builtintype" id="8592243">string</span><span class="op" id="8592249">{</span><span class="op" id="8592250">{</span><span class="string" id="8592251">&#34;&#34;</span><span class="op" id="8592253">,</span>&nbsp;<span class="string" id="8592255">&#34;a&#34;</span><span class="op" id="8592258">,</span>&nbsp;<span class="string" id="8592260">&#34;a&#34;</span><span class="op" id="8592263">}</span><span class="op" id="8592264">}</span><span class="op" id="8592265">,</span>&nbsp;<span class="ident" id="8592267">Output</span><span class="op" id="8592273">:</span>&nbsp;<span class="string" id="8592275">&#34;,a,a\n&#34;</span><span class="op" id="8592283">}</span><span class="op" id="8592284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592287">{</span><span class="ident" id="8592288">Input</span><span class="op" id="8592293">:</span>&nbsp;<span class="op" id="8592295">[</span><span class="op" id="8592296">]</span><span class="op" id="8592297">[</span><span class="op" id="8592298">]</span><span class="builtintype" id="8592299">string</span><span class="op" id="8592305">{</span><span class="op" id="8592306">{</span><span class="string" id="8592307">&#34;a&#34;</span><span class="op" id="8592310">,</span>&nbsp;<span class="string" id="8592312">&#34;&#34;</span><span class="op" id="8592314">,</span>&nbsp;<span class="string" id="8592316">&#34;&#34;</span><span class="op" id="8592318">}</span><span class="op" id="8592319">}</span><span class="op" id="8592320">,</span>&nbsp;<span class="ident" id="8592322">Output</span><span class="op" id="8592328">:</span>&nbsp;<span class="string" id="8592330">&#34;a,,\n&#34;</span><span class="op" id="8592337">}</span><span class="op" id="8592338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592341">{</span><span class="ident" id="8592342">Input</span><span class="op" id="8592347">:</span>&nbsp;<span class="op" id="8592349">[</span><span class="op" id="8592350">]</span><span class="op" id="8592351">[</span><span class="op" id="8592352">]</span><span class="builtintype" id="8592353">string</span><span class="op" id="8592359">{</span><span class="op" id="8592360">{</span><span class="string" id="8592361">&#34;a&#34;</span><span class="op" id="8592364">,</span>&nbsp;<span class="string" id="8592366">&#34;&#34;</span><span class="op" id="8592368">,</span>&nbsp;<span class="string" id="8592370">&#34;a&#34;</span><span class="op" id="8592373">}</span><span class="op" id="8592374">}</span><span class="op" id="8592375">,</span>&nbsp;<span class="ident" id="8592377">Output</span><span class="op" id="8592383">:</span>&nbsp;<span class="string" id="8592385">&#34;a,,a\n&#34;</span><span class="op" id="8592393">}</span><span class="op" id="8592394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592397">{</span><span class="ident" id="8592398">Input</span><span class="op" id="8592403">:</span>&nbsp;<span class="op" id="8592405">[</span><span class="op" id="8592406">]</span><span class="op" id="8592407">[</span><span class="op" id="8592408">]</span><span class="builtintype" id="8592409">string</span><span class="op" id="8592415">{</span><span class="op" id="8592416">{</span><span class="string" id="8592417">&#34;a&#34;</span><span class="op" id="8592420">,</span>&nbsp;<span class="string" id="8592422">&#34;a&#34;</span><span class="op" id="8592425">,</span>&nbsp;<span class="string" id="8592427">&#34;&#34;</span><span class="op" id="8592429">}</span><span class="op" id="8592430">}</span><span class="op" id="8592431">,</span>&nbsp;<span class="ident" id="8592433">Output</span><span class="op" id="8592439">:</span>&nbsp;<span class="string" id="8592441">&#34;a,a,\n&#34;</span><span class="op" id="8592449">}</span><span class="op" id="8592450">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592453">{</span><span class="ident" id="8592454">Input</span><span class="op" id="8592459">:</span>&nbsp;<span class="op" id="8592461">[</span><span class="op" id="8592462">]</span><span class="op" id="8592463">[</span><span class="op" id="8592464">]</span><span class="builtintype" id="8592465">string</span><span class="op" id="8592471">{</span><span class="op" id="8592472">{</span><span class="string" id="8592473">&#34;a&#34;</span><span class="op" id="8592476">,</span>&nbsp;<span class="string" id="8592478">&#34;a&#34;</span><span class="op" id="8592481">,</span>&nbsp;<span class="string" id="8592483">&#34;a&#34;</span><span class="op" id="8592486">}</span><span class="op" id="8592487">}</span><span class="op" id="8592488">,</span>&nbsp;<span class="ident" id="8592490">Output</span><span class="op" id="8592496">:</span>&nbsp;<span class="string" id="8592498">&#34;a,a,a\n&#34;</span><span class="op" id="8592507">}</span><span class="op" id="8592508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592511">{</span><span class="ident" id="8592512">Input</span><span class="op" id="8592517">:</span>&nbsp;<span class="op" id="8592519">[</span><span class="op" id="8592520">]</span><span class="op" id="8592521">[</span><span class="op" id="8592522">]</span><span class="builtintype" id="8592523">string</span><span class="op" id="8592529">{</span><span class="op" id="8592530">{</span><span class="string" id="8592531">`\.`</span><span class="op" id="8592535">}</span><span class="op" id="8592536">}</span><span class="op" id="8592537">,</span>&nbsp;<span class="ident" id="8592539">Output</span><span class="op" id="8592545">:</span>&nbsp;<span class="string" id="8592547">&#34;\&#34;\\.\&#34;\n&#34;</span><span class="op" id="8592558">}</span><span class="op" id="8592559">,</span><br>
<span class="lineno"></span><span class="op" id="8592561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8592564">func</span>&nbsp;<span class="ident" id="8592569">TestWrite</span><span class="op" id="8592578">(</span><span class="ident" id="8592579">t</span>&nbsp;<span class="op" id="8592581">*</span><span class="ident" id="8592582">testing</span><span class="op" id="8592589">.</span><span class="ident" id="8592590">T</span><span class="op" id="8592591">)</span>&nbsp;<span class="op" id="8592593">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8592596">for</span>&nbsp;<span class="ident" id="8592600">n</span><span class="op" id="8592601">,</span>&nbsp;<span class="ident" id="8592603">tt</span>&nbsp;<span class="op" id="8592606">:=</span>&nbsp;<span class="keyword" id="8592609">range</span>&nbsp;<span class="ident" id="8592615">writeTests</span>&nbsp;<span class="op" id="8592626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8592630">b</span>&nbsp;<span class="op" id="8592632">:=</span>&nbsp;<span class="op" id="8592635">&amp;</span><span class="ident" id="8592636">bytes</span><span class="op" id="8592641">.</span><span class="ident" id="8592642">Buffer</span><span class="op" id="8592648">{</span><span class="op" id="8592649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8592653">f</span>&nbsp;<span class="op" id="8592655">:=</span>&nbsp;<span class="ident" id="8592658">NewWriter</span><span class="op" id="8592667">(</span><span class="ident" id="8592668">b</span><span class="op" id="8592669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8592673">f</span><span class="op" id="8592674">.</span><span class="ident" id="8592675">UseCRLF</span>&nbsp;<span class="op" id="8592683">=</span>&nbsp;<span class="ident" id="8592685">tt</span><span class="op" id="8592687">.</span><span class="ident" id="8592688">UseCRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8592698">err</span>&nbsp;<span class="op" id="8592702">:=</span>&nbsp;<span class="ident" id="8592705">f</span><span class="op" id="8592706">.</span><span class="ident" id="8592707">WriteAll</span><span class="op" id="8592715">(</span><span class="ident" id="8592716">tt</span><span class="op" id="8592718">.</span><span class="ident" id="8592719">Input</span><span class="op" id="8592724">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8592728">if</span>&nbsp;<span class="ident" id="8592731">err</span>&nbsp;<span class="op" id="8592735">!=</span>&nbsp;<span class="ident" id="8592738">nil</span>&nbsp;<span class="op" id="8592742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8592747">t</span><span class="op" id="8592748">.</span><span class="ident" id="8592749">Errorf</span><span class="op" id="8592755">(</span><span class="string" id="8592756">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="8592780">,</span>&nbsp;<span class="ident" id="8592782">err</span><span class="op" id="8592785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8592793">out</span>&nbsp;<span class="op" id="8592797">:=</span>&nbsp;<span class="ident" id="8592800">b</span><span class="op" id="8592801">.</span><span class="ident" id="8592802">String</span><span class="op" id="8592808">(</span><span class="op" id="8592809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8592813">if</span>&nbsp;<span class="ident" id="8592816">out</span>&nbsp;<span class="op" id="8592820">!=</span>&nbsp;<span class="ident" id="8592823">tt</span><span class="op" id="8592825">.</span><span class="ident" id="8592826">Output</span>&nbsp;<span class="op" id="8592833">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8592838">t</span><span class="op" id="8592839">.</span><span class="ident" id="8592840">Errorf</span><span class="op" id="8592846">(</span><span class="string" id="8592847">&#34;#%d:&nbsp;out=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8592868">,</span>&nbsp;<span class="ident" id="8592870">n</span><span class="op" id="8592871">,</span>&nbsp;<span class="ident" id="8592873">out</span><span class="op" id="8592876">,</span>&nbsp;<span class="ident" id="8592878">tt</span><span class="op" id="8592880">.</span><span class="ident" id="8592881">Output</span><span class="op" id="8592887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8592894">}</span><br>
<span class="lineno"></span><span class="op" id="8592896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="8592899">type</span>&nbsp;<span class="ident" id="8592904">errorWriter</span>&nbsp;<span class="keyword" id="8592916">struct</span><span class="op" id="8592922">{</span><span class="op" id="8592923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8592926">func</span>&nbsp;<span class="op" id="8592931">(</span><span class="ident" id="8592932">e</span>&nbsp;<span class="ident" id="8592934">errorWriter</span><span class="op" id="8592945">)</span>&nbsp;<span class="ident" id="8592947">Write</span><span class="op" id="8592952">(</span><span class="ident" id="8592953">b</span>&nbsp;<span class="op" id="8592955">[</span><span class="op" id="8592956">]</span><span class="builtintype" id="8592957">byte</span><span class="op" id="8592961">)</span>&nbsp;<span class="op" id="8592963">(</span><span class="builtintype" id="8592964">int</span><span class="op" id="8592967">,</span>&nbsp;<span class="builtintype" id="8592969">error</span><span class="op" id="8592974">)</span>&nbsp;<span class="op" id="8592976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8592979">return</span>&nbsp;<span class="num" id="8592986">0</span><span class="op" id="8592987">,</span>&nbsp;<span class="ident" id="8592989">errors</span><span class="op" id="8592995">.</span><span class="ident" id="8592996">New</span><span class="op" id="8592999">(</span><span class="string" id="8593000">&#34;Test&#34;</span><span class="op" id="8593006">)</span><br>
<span class="lineno"></span><span class="op" id="8593008">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="8593011">func</span>&nbsp;<span class="ident" id="8593016">TestError</span><span class="op" id="8593025">(</span><span class="ident" id="8593026">t</span>&nbsp;<span class="op" id="8593028">*</span><span class="ident" id="8593029">testing</span><span class="op" id="8593036">.</span><span class="ident" id="8593037">T</span><span class="op" id="8593038">)</span>&nbsp;<span class="op" id="8593040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593043">b</span>&nbsp;<span class="op" id="8593045">:=</span>&nbsp;<span class="op" id="8593048">&amp;</span><span class="ident" id="8593049">bytes</span><span class="op" id="8593054">.</span><span class="ident" id="8593055">Buffer</span><span class="op" id="8593061">{</span><span class="op" id="8593062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593065">f</span>&nbsp;<span class="op" id="8593067">:=</span>&nbsp;<span class="ident" id="8593070">NewWriter</span><span class="op" id="8593079">(</span><span class="ident" id="8593080">b</span><span class="op" id="8593081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593084">f</span><span class="op" id="8593085">.</span><span class="ident" id="8593086">Write</span><span class="op" id="8593091">(</span><span class="op" id="8593092">[</span><span class="op" id="8593093">]</span><span class="builtintype" id="8593094">string</span><span class="op" id="8593100">{</span><span class="string" id="8593101">&#34;abc&#34;</span><span class="op" id="8593106">}</span><span class="op" id="8593107">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593110">f</span><span class="op" id="8593111">.</span><span class="ident" id="8593112">Flush</span><span class="op" id="8593117">(</span><span class="op" id="8593118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593121">err</span>&nbsp;<span class="op" id="8593125">:=</span>&nbsp;<span class="ident" id="8593128">f</span><span class="op" id="8593129">.</span><span class="ident" id="8593130">Error</span><span class="op" id="8593135">(</span><span class="op" id="8593136">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8593140">if</span>&nbsp;<span class="ident" id="8593143">err</span>&nbsp;<span class="op" id="8593147">!=</span>&nbsp;<span class="ident" id="8593150">nil</span>&nbsp;<span class="op" id="8593154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593158">t</span><span class="op" id="8593159">.</span><span class="ident" id="8593160">Errorf</span><span class="op" id="8593166">(</span><span class="string" id="8593167">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="8593191">,</span>&nbsp;<span class="ident" id="8593193">err</span><span class="op" id="8593196">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8593199">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593203">f</span>&nbsp;<span class="op" id="8593205">=</span>&nbsp;<span class="ident" id="8593207">NewWriter</span><span class="op" id="8593216">(</span><span class="ident" id="8593217">errorWriter</span><span class="op" id="8593228">{</span><span class="op" id="8593229">}</span><span class="op" id="8593230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593233">f</span><span class="op" id="8593234">.</span><span class="ident" id="8593235">Write</span><span class="op" id="8593240">(</span><span class="op" id="8593241">[</span><span class="op" id="8593242">]</span><span class="builtintype" id="8593243">string</span><span class="op" id="8593249">{</span><span class="string" id="8593250">&#34;abc&#34;</span><span class="op" id="8593255">}</span><span class="op" id="8593256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593259">f</span><span class="op" id="8593260">.</span><span class="ident" id="8593261">Flush</span><span class="op" id="8593266">(</span><span class="op" id="8593267">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593270">err</span>&nbsp;<span class="op" id="8593274">=</span>&nbsp;<span class="ident" id="8593276">f</span><span class="op" id="8593277">.</span><span class="ident" id="8593278">Error</span><span class="op" id="8593283">(</span><span class="op" id="8593284">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8593288">if</span>&nbsp;<span class="ident" id="8593291">err</span>&nbsp;<span class="op" id="8593295">==</span>&nbsp;<span class="ident" id="8593298">nil</span>&nbsp;<span class="op" id="8593302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8593306">t</span><span class="op" id="8593307">.</span><span class="ident" id="8593308">Error</span><span class="op" id="8593313">(</span><span class="string" id="8593314">&#34;Error&nbsp;should&nbsp;not&nbsp;be&nbsp;nil&#34;</span><span class="op" id="8593339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8593342">}</span><br>
<span class="lineno">85</span><span class="op" id="8593344">}</span>
</div>
</body>
</html>
