<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7078511">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7078567">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7078621">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7078672">package</span>&nbsp;<span class="ident" id="7078680">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7078689">//&nbsp;MakeRO&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;v&nbsp;with&nbsp;the&nbsp;read-only&nbsp;flag&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="7078748">func</span>&nbsp;<span class="ident" id="7078753">MakeRO</span><span class="op" id="7078759">(</span><span class="ident" id="7078760">v</span>&nbsp;<span class="ident" id="7078762">Value</span><span class="op" id="7078767">)</span>&nbsp;<span class="ident" id="7078769">Value</span>&nbsp;<span class="op" id="7078775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7078778">v</span><span class="op" id="7078779">.</span><span class="ident" id="7078780">flag</span>&nbsp;<span class="op" id="7078785">|=</span>&nbsp;<span class="ident" id="7078788">flagRO</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7078796">return</span>&nbsp;<span class="ident" id="7078803">v</span><br>
<span class="lineno"></span><span class="op" id="7078805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7078808">//&nbsp;IsRO&nbsp;reports&nbsp;whether&nbsp;v&#39;s&nbsp;read-only&nbsp;flag&nbsp;is&nbsp;set.</span><br>
<span class="lineno"></span><span class="keyword" id="7078859">func</span>&nbsp;<span class="ident" id="7078864">IsRO</span><span class="op" id="7078868">(</span><span class="ident" id="7078869">v</span>&nbsp;<span class="ident" id="7078871">Value</span><span class="op" id="7078876">)</span>&nbsp;<span class="builtintype" id="7078878">bool</span>&nbsp;<span class="op" id="7078883">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7078886">return</span>&nbsp;<span class="ident" id="7078893">v</span><span class="op" id="7078894">.</span><span class="ident" id="7078895">flag</span><span class="op" id="7078899">&amp;</span><span class="ident" id="7078900">flagRO</span>&nbsp;<span class="op" id="7078907">!=</span>&nbsp;<span class="num" id="7078910">0</span><br>
<span class="lineno"></span><span class="op" id="7078912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7078915">var</span>&nbsp;<span class="ident" id="7078919">ArrayOf</span>&nbsp;<span class="op" id="7078927">=</span>&nbsp;<span class="ident" id="7078929">arrayOf</span><br>
<span class="lineno"></span><span class="keyword" id="7078937">var</span>&nbsp;<span class="ident" id="7078941">CallGC</span>&nbsp;<span class="op" id="7078948">=</span>&nbsp;<span class="op" id="7078950">&amp;</span><span class="ident" id="7078951">callGC</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7078959">const</span>&nbsp;<span class="ident" id="7078965">PtrSize</span>&nbsp;<span class="op" id="7078973">=</span>&nbsp;<span class="ident" id="7078975">ptrSize</span><br>
<span class="lineno"></span><span class="keyword" id="7078983">const</span>&nbsp;<span class="ident" id="7078989">BitsPointer</span>&nbsp;<span class="op" id="7079001">=</span>&nbsp;<span class="ident" id="7079003">bitsPointer</span><br>
<span class="lineno"></span><span class="keyword" id="7079015">const</span>&nbsp;<span class="ident" id="7079021">BitsScalar</span>&nbsp;<span class="op" id="7079032">=</span>&nbsp;<span class="ident" id="7079034">bitsScalar</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7079046">func</span>&nbsp;<span class="ident" id="7079051">FuncLayout</span><span class="op" id="7079061">(</span><span class="ident" id="7079062">t</span>&nbsp;<span class="ident" id="7079064">Type</span><span class="op" id="7079068">,</span>&nbsp;<span class="ident" id="7079070">rcvr</span>&nbsp;<span class="ident" id="7079075">Type</span><span class="op" id="7079079">)</span>&nbsp;<span class="op" id="7079081">(</span><span class="ident" id="7079082">frametype</span>&nbsp;<span class="ident" id="7079092">Type</span><span class="op" id="7079096">,</span>&nbsp;<span class="ident" id="7079098">argSize</span><span class="op" id="7079105">,</span>&nbsp;<span class="ident" id="7079107">retOffset</span>&nbsp;<span class="builtintype" id="7079117">uintptr</span><span class="op" id="7079124">,</span>&nbsp;<span class="ident" id="7079126">stack</span>&nbsp;<span class="op" id="7079132">[</span><span class="op" id="7079133">]</span><span class="builtintype" id="7079134">byte</span><span class="op" id="7079138">)</span>&nbsp;<span class="op" id="7079140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7079143">var</span>&nbsp;<span class="ident" id="7079147">ft</span>&nbsp;<span class="op" id="7079150">*</span><span class="ident" id="7079151">rtype</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7079158">var</span>&nbsp;<span class="ident" id="7079162">s</span>&nbsp;<span class="op" id="7079164">*</span><span class="ident" id="7079165">bitVector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7079176">if</span>&nbsp;<span class="ident" id="7079179">rcvr</span>&nbsp;<span class="op" id="7079184">!=</span>&nbsp;<span class="ident" id="7079187">nil</span>&nbsp;<span class="op" id="7079191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079195">ft</span><span class="op" id="7079197">,</span>&nbsp;<span class="ident" id="7079199">argSize</span><span class="op" id="7079206">,</span>&nbsp;<span class="ident" id="7079208">retOffset</span><span class="op" id="7079217">,</span>&nbsp;<span class="ident" id="7079219">s</span>&nbsp;<span class="op" id="7079221">=</span>&nbsp;<span class="ident" id="7079223">funcLayout</span><span class="op" id="7079233">(</span><span class="ident" id="7079234">t</span><span class="op" id="7079235">.</span><span class="op" id="7079236">(</span><span class="op" id="7079237">*</span><span class="ident" id="7079238">rtype</span><span class="op" id="7079243">)</span><span class="op" id="7079244">,</span>&nbsp;<span class="ident" id="7079246">rcvr</span><span class="op" id="7079250">.</span><span class="op" id="7079251">(</span><span class="op" id="7079252">*</span><span class="ident" id="7079253">rtype</span><span class="op" id="7079258">)</span><span class="op" id="7079259">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7079262">}</span>&nbsp;<span class="keyword" id="7079264">else</span>&nbsp;<span class="op" id="7079269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079273">ft</span><span class="op" id="7079275">,</span>&nbsp;<span class="ident" id="7079277">argSize</span><span class="op" id="7079284">,</span>&nbsp;<span class="ident" id="7079286">retOffset</span><span class="op" id="7079295">,</span>&nbsp;<span class="ident" id="7079297">s</span>&nbsp;<span class="op" id="7079299">=</span>&nbsp;<span class="ident" id="7079301">funcLayout</span><span class="op" id="7079311">(</span><span class="ident" id="7079312">t</span><span class="op" id="7079313">.</span><span class="op" id="7079314">(</span><span class="op" id="7079315">*</span><span class="ident" id="7079316">rtype</span><span class="op" id="7079321">)</span><span class="op" id="7079322">,</span>&nbsp;<span class="ident" id="7079324">nil</span><span class="op" id="7079327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7079330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079333">frametype</span>&nbsp;<span class="op" id="7079343">=</span>&nbsp;<span class="ident" id="7079345">ft</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7079349">for</span>&nbsp;<span class="ident" id="7079353">i</span>&nbsp;<span class="op" id="7079355">:=</span>&nbsp;<span class="builtintype" id="7079358">uint32</span><span class="op" id="7079364">(</span><span class="num" id="7079365">0</span><span class="op" id="7079366">)</span><span class="op" id="7079367">;</span>&nbsp;<span class="ident" id="7079369">i</span>&nbsp;<span class="op" id="7079371">&lt;</span>&nbsp;<span class="ident" id="7079373">s</span><span class="op" id="7079374">.</span><span class="ident" id="7079375">n</span><span class="op" id="7079376">;</span>&nbsp;<span class="ident" id="7079378">i</span>&nbsp;<span class="op" id="7079380">+=</span>&nbsp;<span class="num" id="7079383">2</span>&nbsp;<span class="op" id="7079385">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7079389">stack</span>&nbsp;<span class="op" id="7079395">=</span>&nbsp;<span class="builtinfunc" id="7079397">append</span><span class="op" id="7079403">(</span><span class="ident" id="7079404">stack</span><span class="op" id="7079409">,</span>&nbsp;<span class="ident" id="7079411">s</span><span class="op" id="7079412">.</span><span class="ident" id="7079413">data</span><span class="op" id="7079417">[</span><span class="ident" id="7079418">i</span><span class="op" id="7079419">/</span><span class="num" id="7079420">8</span><span class="op" id="7079421">]</span><span class="op" id="7079422">&gt;&gt;</span><span class="op" id="7079424">(</span><span class="ident" id="7079425">i</span><span class="op" id="7079426">%</span><span class="num" id="7079427">8</span><span class="op" id="7079428">)</span><span class="op" id="7079429">&amp;</span><span class="num" id="7079430">3</span><span class="op" id="7079431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7079434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7079437">return</span><br>
<span class="lineno"></span><span class="op" id="7079444">}</span>
</div>
</body>
</html>
