<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4330312">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4330367">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4330421">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4330472">//&nbsp;Package&nbsp;scanner&nbsp;implements&nbsp;a&nbsp;scanner&nbsp;for&nbsp;Go&nbsp;source&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="4330532">//&nbsp;It&nbsp;takes&nbsp;a&nbsp;[]byte&nbsp;as&nbsp;source&nbsp;which&nbsp;can&nbsp;then&nbsp;be&nbsp;tokenized</span><br>
<span class="lineno"></span><span class="comment" id="4330591">//&nbsp;through&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;the&nbsp;Scan&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="4330637">//</span><br>
<span class="lineno"></span><span class="keyword" id="4330640">package</span>&nbsp;<span class="ident" id="4330648">scanner</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="4330657">import</span>&nbsp;<span class="op" id="4330664">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330667">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330676">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330683">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330695">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330712">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330723">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4330734">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4330749">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="4330752">//&nbsp;An&nbsp;ErrorHandler&nbsp;may&nbsp;be&nbsp;provided&nbsp;to&nbsp;Scanner.Init.&nbsp;If&nbsp;a&nbsp;syntax&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4330825">//&nbsp;encountered&nbsp;and&nbsp;a&nbsp;handler&nbsp;was&nbsp;installed,&nbsp;the&nbsp;handler&nbsp;is&nbsp;called&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4330898">//&nbsp;position&nbsp;and&nbsp;an&nbsp;error&nbsp;message.&nbsp;The&nbsp;position&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4330972">//&nbsp;the&nbsp;offending&nbsp;token.</span><br>
<span class="lineno">25</span><span class="comment" id="4330996">//</span><br>
<span class="lineno"></span><span class="keyword" id="4330999">type</span>&nbsp;<span class="ident" id="4331004">ErrorHandler</span>&nbsp;<span class="keyword" id="4331017">func</span><span class="op" id="4331021">(</span><span class="ident" id="4331022">pos</span>&nbsp;<span class="ident" id="4331026">token</span><span class="op" id="4331031">.</span><span class="ident" id="4331032">Position</span><span class="op" id="4331040">,</span>&nbsp;<span class="ident" id="4331042">msg</span>&nbsp;<span class="builtintype" id="4331046">string</span><span class="op" id="4331052">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4331055">//&nbsp;A&nbsp;Scanner&nbsp;holds&nbsp;the&nbsp;scanner&#39;s&nbsp;internal&nbsp;state&nbsp;while&nbsp;processing</span><br>
<span class="lineno"></span><span class="comment" id="4331120">//&nbsp;a&nbsp;given&nbsp;text.&nbsp;&nbsp;It&nbsp;can&nbsp;be&nbsp;allocated&nbsp;as&nbsp;part&nbsp;of&nbsp;another&nbsp;data</span><br>
<span class="lineno">30</span><span class="comment" id="4331182">//&nbsp;structure&nbsp;but&nbsp;must&nbsp;be&nbsp;initialized&nbsp;via&nbsp;Init&nbsp;before&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="4331240">//</span><br>
<span class="lineno"></span><span class="keyword" id="4331243">type</span>&nbsp;<span class="ident" id="4331248">Scanner</span>&nbsp;<span class="keyword" id="4331256">struct</span>&nbsp;<span class="op" id="4331263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4331266">//&nbsp;immutable&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331286">file</span>&nbsp;<span class="op" id="4331291">*</span><span class="ident" id="4331292">token</span><span class="op" id="4331297">.</span><span class="ident" id="4331298">File</span>&nbsp;&nbsp;<span class="comment" id="4331304">//&nbsp;source&nbsp;file&nbsp;handle</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331327">dir</span>&nbsp;&nbsp;<span class="builtintype" id="4331332">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4331345">//&nbsp;directory&nbsp;portion&nbsp;of&nbsp;file.Name()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331382">src</span>&nbsp;&nbsp;<span class="op" id="4331387">[</span><span class="op" id="4331388">]</span><span class="builtintype" id="4331389">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4331400">//&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331411">err</span>&nbsp;&nbsp;<span class="ident" id="4331416">ErrorHandler</span>&nbsp;<span class="comment" id="4331429">//&nbsp;error&nbsp;reporting;&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331457">mode</span>&nbsp;<span class="ident" id="4331462">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4331475">//&nbsp;scanning&nbsp;mode</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4331494">//&nbsp;scanning&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331513">ch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4331524">rune</span>&nbsp;<span class="comment" id="4331529">//&nbsp;current&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331551">offset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4331562">int</span>&nbsp;&nbsp;<span class="comment" id="4331567">//&nbsp;character&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331588">rdOffset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4331599">int</span>&nbsp;&nbsp;<span class="comment" id="4331604">//&nbsp;reading&nbsp;offset&nbsp;(position&nbsp;after&nbsp;current&nbsp;character)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331658">lineOffset</span>&nbsp;<span class="builtintype" id="4331669">int</span>&nbsp;&nbsp;<span class="comment" id="4331674">//&nbsp;current&nbsp;line&nbsp;offset</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331698">insertSemi</span>&nbsp;<span class="builtintype" id="4331709">bool</span>&nbsp;<span class="comment" id="4331714">//&nbsp;insert&nbsp;a&nbsp;semicolon&nbsp;before&nbsp;next&nbsp;newline</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4331758">//&nbsp;public&nbsp;state&nbsp;-&nbsp;ok&nbsp;to&nbsp;modify</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331790">ErrorCount</span>&nbsp;<span class="builtintype" id="4331801">int</span>&nbsp;<span class="comment" id="4331805">//&nbsp;number&nbsp;of&nbsp;errors&nbsp;encountered</span><br>
<span class="lineno"></span><span class="op" id="4331837">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4331840">const</span>&nbsp;<span class="ident" id="4331846">bom</span>&nbsp;<span class="op" id="4331850">=</span>&nbsp;<span class="num" id="4331852">0xFEFF</span>&nbsp;<span class="comment" id="4331859">//&nbsp;byte&nbsp;order&nbsp;mark,&nbsp;only&nbsp;permitted&nbsp;as&nbsp;very&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4331919">//&nbsp;Read&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;char&nbsp;into&nbsp;s.ch.</span><br>
<span class="lineno"></span><span class="comment" id="4331960">//&nbsp;s.ch&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;end-of-file.</span><br>
<span class="lineno">55</span><span class="comment" id="4331991">//</span><br>
<span class="lineno"></span><span class="keyword" id="4331994">func</span>&nbsp;<span class="op" id="4331999">(</span><span class="ident" id="4332000">s</span>&nbsp;<span class="op" id="4332002">*</span><span class="ident" id="4332003">Scanner</span><span class="op" id="4332010">)</span>&nbsp;<span class="ident" id="4332012">next</span><span class="op" id="4332016">(</span><span class="op" id="4332017">)</span>&nbsp;<span class="op" id="4332019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332022">if</span>&nbsp;<span class="ident" id="4332025">s</span><span class="op" id="4332026">.</span><span class="ident" id="4332027">rdOffset</span>&nbsp;<span class="op" id="4332036">&lt;</span>&nbsp;<span class="builtinfunc" id="4332038">len</span><span class="op" id="4332041">(</span><span class="ident" id="4332042">s</span><span class="op" id="4332043">.</span><span class="ident" id="4332044">src</span><span class="op" id="4332047">)</span>&nbsp;<span class="op" id="4332049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332053">s</span><span class="op" id="4332054">.</span><span class="ident" id="4332055">offset</span>&nbsp;<span class="op" id="4332062">=</span>&nbsp;<span class="ident" id="4332064">s</span><span class="op" id="4332065">.</span><span class="ident" id="4332066">rdOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332077">if</span>&nbsp;<span class="ident" id="4332080">s</span><span class="op" id="4332081">.</span><span class="ident" id="4332082">ch</span>&nbsp;<span class="op" id="4332085">==</span>&nbsp;<span class="string" id="4332088">&#39;\n&#39;</span>&nbsp;<span class="op" id="4332093">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332098">s</span><span class="op" id="4332099">.</span><span class="ident" id="4332100">lineOffset</span>&nbsp;<span class="op" id="4332111">=</span>&nbsp;<span class="ident" id="4332113">s</span><span class="op" id="4332114">.</span><span class="ident" id="4332115">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332125">s</span><span class="op" id="4332126">.</span><span class="ident" id="4332127">file</span><span class="op" id="4332131">.</span><span class="ident" id="4332132">AddLine</span><span class="op" id="4332139">(</span><span class="ident" id="4332140">s</span><span class="op" id="4332141">.</span><span class="ident" id="4332142">offset</span><span class="op" id="4332148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332156">r</span><span class="op" id="4332157">,</span>&nbsp;<span class="ident" id="4332159">w</span>&nbsp;<span class="op" id="4332161">:=</span>&nbsp;<span class="builtintype" id="4332164">rune</span><span class="op" id="4332168">(</span><span class="ident" id="4332169">s</span><span class="op" id="4332170">.</span><span class="ident" id="4332171">src</span><span class="op" id="4332174">[</span><span class="ident" id="4332175">s</span><span class="op" id="4332176">.</span><span class="ident" id="4332177">rdOffset</span><span class="op" id="4332185">]</span><span class="op" id="4332186">)</span><span class="op" id="4332187">,</span>&nbsp;<span class="num" id="4332189">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332193">switch</span>&nbsp;<span class="op" id="4332200">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332204">case</span>&nbsp;<span class="ident" id="4332209">r</span>&nbsp;<span class="op" id="4332211">==</span>&nbsp;<span class="num" id="4332214">0</span><span class="op" id="4332215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332220">s</span><span class="op" id="4332221">.</span><span class="builtintype" id="4332222">error</span><span class="op" id="4332227">(</span><span class="ident" id="4332228">s</span><span class="op" id="4332229">.</span><span class="ident" id="4332230">offset</span><span class="op" id="4332236">,</span>&nbsp;<span class="string" id="4332238">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op" id="4332261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332265">case</span>&nbsp;<span class="ident" id="4332270">r</span>&nbsp;<span class="op" id="4332272">&gt;=</span>&nbsp;<span class="num" id="4332275">0x80</span><span class="op" id="4332279">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4332284">//&nbsp;not&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332300">r</span><span class="op" id="4332301">,</span>&nbsp;<span class="ident" id="4332303">w</span>&nbsp;<span class="op" id="4332305">=</span>&nbsp;<span class="ident" id="4332307">utf8</span><span class="op" id="4332311">.</span><span class="ident" id="4332312">DecodeRune</span><span class="op" id="4332322">(</span><span class="ident" id="4332323">s</span><span class="op" id="4332324">.</span><span class="ident" id="4332325">src</span><span class="op" id="4332328">[</span><span class="ident" id="4332329">s</span><span class="op" id="4332330">.</span><span class="ident" id="4332331">rdOffset</span><span class="op" id="4332339">:</span><span class="op" id="4332340">]</span><span class="op" id="4332341">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332346">if</span>&nbsp;<span class="ident" id="4332349">r</span>&nbsp;<span class="op" id="4332351">==</span>&nbsp;<span class="ident" id="4332354">utf8</span><span class="op" id="4332358">.</span><span class="ident" id="4332359">RuneError</span>&nbsp;<span class="op" id="4332369">&amp;&amp;</span>&nbsp;<span class="ident" id="4332372">w</span>&nbsp;<span class="op" id="4332374">==</span>&nbsp;<span class="num" id="4332377">1</span>&nbsp;<span class="op" id="4332379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332385">s</span><span class="op" id="4332386">.</span><span class="builtintype" id="4332387">error</span><span class="op" id="4332392">(</span><span class="ident" id="4332393">s</span><span class="op" id="4332394">.</span><span class="ident" id="4332395">offset</span><span class="op" id="4332401">,</span>&nbsp;<span class="string" id="4332403">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op" id="4332427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332432">}</span>&nbsp;<span class="keyword" id="4332434">else</span>&nbsp;<span class="keyword" id="4332439">if</span>&nbsp;<span class="ident" id="4332442">r</span>&nbsp;<span class="op" id="4332444">==</span>&nbsp;<span class="ident" id="4332447">bom</span>&nbsp;<span class="op" id="4332451">&amp;&amp;</span>&nbsp;<span class="ident" id="4332454">s</span><span class="op" id="4332455">.</span><span class="ident" id="4332456">offset</span>&nbsp;<span class="op" id="4332463">&gt;</span>&nbsp;<span class="num" id="4332465">0</span>&nbsp;<span class="op" id="4332467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332473">s</span><span class="op" id="4332474">.</span><span class="builtintype" id="4332475">error</span><span class="op" id="4332480">(</span><span class="ident" id="4332481">s</span><span class="op" id="4332482">.</span><span class="ident" id="4332483">offset</span><span class="op" id="4332489">,</span>&nbsp;<span class="string" id="4332491">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op" id="4332516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332521">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332529">s</span><span class="op" id="4332530">.</span><span class="ident" id="4332531">rdOffset</span>&nbsp;<span class="op" id="4332540">+=</span>&nbsp;<span class="ident" id="4332543">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332547">s</span><span class="op" id="4332548">.</span><span class="ident" id="4332549">ch</span>&nbsp;<span class="op" id="4332552">=</span>&nbsp;<span class="ident" id="4332554">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332557">}</span>&nbsp;<span class="keyword" id="4332559">else</span>&nbsp;<span class="op" id="4332564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332568">s</span><span class="op" id="4332569">.</span><span class="ident" id="4332570">offset</span>&nbsp;<span class="op" id="4332577">=</span>&nbsp;<span class="builtinfunc" id="4332579">len</span><span class="op" id="4332582">(</span><span class="ident" id="4332583">s</span><span class="op" id="4332584">.</span><span class="ident" id="4332585">src</span><span class="op" id="4332588">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332592">if</span>&nbsp;<span class="ident" id="4332595">s</span><span class="op" id="4332596">.</span><span class="ident" id="4332597">ch</span>&nbsp;<span class="op" id="4332600">==</span>&nbsp;<span class="string" id="4332603">&#39;\n&#39;</span>&nbsp;<span class="op" id="4332608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332613">s</span><span class="op" id="4332614">.</span><span class="ident" id="4332615">lineOffset</span>&nbsp;<span class="op" id="4332626">=</span>&nbsp;<span class="ident" id="4332628">s</span><span class="op" id="4332629">.</span><span class="ident" id="4332630">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332640">s</span><span class="op" id="4332641">.</span><span class="ident" id="4332642">file</span><span class="op" id="4332646">.</span><span class="ident" id="4332647">AddLine</span><span class="op" id="4332654">(</span><span class="ident" id="4332655">s</span><span class="op" id="4332656">.</span><span class="ident" id="4332657">offset</span><span class="op" id="4332663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332671">s</span><span class="op" id="4332672">.</span><span class="ident" id="4332673">ch</span>&nbsp;<span class="op" id="4332676">=</span>&nbsp;<span class="op" id="4332678">-</span><span class="num" id="4332679">1</span>&nbsp;<span class="comment" id="4332681">//&nbsp;eof</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332689">}</span><br>
<span class="lineno"></span><span class="op" id="4332691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4332694">//&nbsp;A&nbsp;mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).</span><br>
<span class="lineno"></span><span class="comment" id="4332736">//&nbsp;They&nbsp;control&nbsp;scanner&nbsp;behavior.</span><br>
<span class="lineno">90</span><span class="comment" id="4332770">//</span><br>
<span class="lineno"></span><span class="keyword" id="4332773">type</span>&nbsp;<span class="ident" id="4332778">Mode</span>&nbsp;<span class="builtintype" id="4332783">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4332789">const</span>&nbsp;<span class="op" id="4332795">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332798">ScanComments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4332814">Mode</span>&nbsp;<span class="op" id="4332819">=</span>&nbsp;<span class="num" id="4332821">1</span>&nbsp;<span class="op" id="4332823">&lt;&lt;</span>&nbsp;<span class="ident" id="4332826">iota</span>&nbsp;<span class="comment" id="4332831">//&nbsp;return&nbsp;comments&nbsp;as&nbsp;COMMENT&nbsp;tokens</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332869">dontInsertSemis</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4332902">//&nbsp;do&nbsp;not&nbsp;automatically&nbsp;insert&nbsp;semicolons&nbsp;-&nbsp;for&nbsp;testing&nbsp;only</span><br>
<span class="lineno"></span><span class="op" id="4332963">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4332966">//&nbsp;Init&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;s&nbsp;to&nbsp;tokenize&nbsp;the&nbsp;text&nbsp;src&nbsp;by&nbsp;setting&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4333037">//&nbsp;scanner&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;src.&nbsp;The&nbsp;scanner&nbsp;uses&nbsp;the&nbsp;file&nbsp;set&nbsp;file</span><br>
<span class="lineno">100</span><span class="comment" id="4333108">//&nbsp;for&nbsp;position&nbsp;information&nbsp;and&nbsp;it&nbsp;adds&nbsp;line&nbsp;information&nbsp;for&nbsp;each&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="4333180">//&nbsp;It&nbsp;is&nbsp;ok&nbsp;to&nbsp;re-use&nbsp;the&nbsp;same&nbsp;file&nbsp;when&nbsp;re-scanning&nbsp;the&nbsp;same&nbsp;file&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="4333250">//&nbsp;line&nbsp;information&nbsp;which&nbsp;is&nbsp;already&nbsp;present&nbsp;is&nbsp;ignored.&nbsp;Init&nbsp;causes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4333321">//&nbsp;panic&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;src&nbsp;size.</span><br>
<span class="lineno"></span><span class="comment" id="4333376">//</span><br>
<span class="lineno">105</span><span class="comment" id="4333379">//&nbsp;Calls&nbsp;to&nbsp;Scan&nbsp;will&nbsp;invoke&nbsp;the&nbsp;error&nbsp;handler&nbsp;err&nbsp;if&nbsp;they&nbsp;encounter&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4333450">//&nbsp;syntax&nbsp;error&nbsp;and&nbsp;err&nbsp;is&nbsp;not&nbsp;nil.&nbsp;Also,&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered,</span><br>
<span class="lineno"></span><span class="comment" id="4333520">//&nbsp;the&nbsp;Scanner&nbsp;field&nbsp;ErrorCount&nbsp;is&nbsp;incremented&nbsp;by&nbsp;one.&nbsp;The&nbsp;mode&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="4333594">//&nbsp;determines&nbsp;how&nbsp;comments&nbsp;are&nbsp;handled.</span><br>
<span class="lineno"></span><span class="comment" id="4333634">//</span><br>
<span class="lineno">110</span><span class="comment" id="4333637">//&nbsp;Note&nbsp;that&nbsp;Init&nbsp;may&nbsp;call&nbsp;err&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="4333712">//&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="4333728">//</span><br>
<span class="lineno"></span><span class="keyword" id="4333731">func</span>&nbsp;<span class="op" id="4333736">(</span><span class="ident" id="4333737">s</span>&nbsp;<span class="op" id="4333739">*</span><span class="ident" id="4333740">Scanner</span><span class="op" id="4333747">)</span>&nbsp;<span class="ident" id="4333749">Init</span><span class="op" id="4333753">(</span><span class="ident" id="4333754">file</span>&nbsp;<span class="op" id="4333759">*</span><span class="ident" id="4333760">token</span><span class="op" id="4333765">.</span><span class="ident" id="4333766">File</span><span class="op" id="4333770">,</span>&nbsp;<span class="ident" id="4333772">src</span>&nbsp;<span class="op" id="4333776">[</span><span class="op" id="4333777">]</span><span class="builtintype" id="4333778">byte</span><span class="op" id="4333782">,</span>&nbsp;<span class="ident" id="4333784">err</span>&nbsp;<span class="ident" id="4333788">ErrorHandler</span><span class="op" id="4333800">,</span>&nbsp;<span class="ident" id="4333802">mode</span>&nbsp;<span class="ident" id="4333807">Mode</span><span class="op" id="4333811">)</span>&nbsp;<span class="op" id="4333813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4333816">//&nbsp;Explicitly&nbsp;initialize&nbsp;all&nbsp;fields&nbsp;since&nbsp;a&nbsp;scanner&nbsp;may&nbsp;be&nbsp;reused.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333884">if</span>&nbsp;<span class="ident" id="4333887">file</span><span class="op" id="4333891">.</span><span class="ident" id="4333892">Size</span><span class="op" id="4333896">(</span><span class="op" id="4333897">)</span>&nbsp;<span class="op" id="4333899">!=</span>&nbsp;<span class="builtinfunc" id="4333902">len</span><span class="op" id="4333905">(</span><span class="ident" id="4333906">src</span><span class="op" id="4333909">)</span>&nbsp;<span class="op" id="4333911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4333915">panic</span><span class="op" id="4333920">(</span><span class="ident" id="4333921">fmt</span><span class="op" id="4333924">.</span><span class="ident" id="4333925">Sprintf</span><span class="op" id="4333932">(</span><span class="string" id="4333933">&#34;file&nbsp;size&nbsp;(%d)&nbsp;does&nbsp;not&nbsp;match&nbsp;src&nbsp;len&nbsp;(%d)&#34;</span><span class="op" id="4333977">,</span>&nbsp;<span class="ident" id="4333979">file</span><span class="op" id="4333983">.</span><span class="ident" id="4333984">Size</span><span class="op" id="4333988">(</span><span class="op" id="4333989">)</span><span class="op" id="4333990">,</span>&nbsp;<span class="builtinfunc" id="4333992">len</span><span class="op" id="4333995">(</span><span class="ident" id="4333996">src</span><span class="op" id="4333999">)</span><span class="op" id="4334000">)</span><span class="op" id="4334001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334007">s</span><span class="op" id="4334008">.</span><span class="ident" id="4334009">file</span>&nbsp;<span class="op" id="4334014">=</span>&nbsp;<span class="ident" id="4334016">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334022">s</span><span class="op" id="4334023">.</span><span class="ident" id="4334024">dir</span><span class="op" id="4334027">,</span>&nbsp;<span class="ident" id="4334029">_</span>&nbsp;<span class="op" id="4334031">=</span>&nbsp;<span class="ident" id="4334033">filepath</span><span class="op" id="4334041">.</span><span class="ident" id="4334042">Split</span><span class="op" id="4334047">(</span><span class="ident" id="4334048">file</span><span class="op" id="4334052">.</span><span class="ident" id="4334053">Name</span><span class="op" id="4334057">(</span><span class="op" id="4334058">)</span><span class="op" id="4334059">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334062">s</span><span class="op" id="4334063">.</span><span class="ident" id="4334064">src</span>&nbsp;<span class="op" id="4334068">=</span>&nbsp;<span class="ident" id="4334070">src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334075">s</span><span class="op" id="4334076">.</span><span class="ident" id="4334077">err</span>&nbsp;<span class="op" id="4334081">=</span>&nbsp;<span class="ident" id="4334083">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334088">s</span><span class="op" id="4334089">.</span><span class="ident" id="4334090">mode</span>&nbsp;<span class="op" id="4334095">=</span>&nbsp;<span class="ident" id="4334097">mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334104">s</span><span class="op" id="4334105">.</span><span class="ident" id="4334106">ch</span>&nbsp;<span class="op" id="4334109">=</span>&nbsp;<span class="string" id="4334111">&#39;&nbsp;&#39;</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334116">s</span><span class="op" id="4334117">.</span><span class="ident" id="4334118">offset</span>&nbsp;<span class="op" id="4334125">=</span>&nbsp;<span class="num" id="4334127">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334130">s</span><span class="op" id="4334131">.</span><span class="ident" id="4334132">rdOffset</span>&nbsp;<span class="op" id="4334141">=</span>&nbsp;<span class="num" id="4334143">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334146">s</span><span class="op" id="4334147">.</span><span class="ident" id="4334148">lineOffset</span>&nbsp;<span class="op" id="4334159">=</span>&nbsp;<span class="num" id="4334161">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334164">s</span><span class="op" id="4334165">.</span><span class="ident" id="4334166">insertSemi</span>&nbsp;<span class="op" id="4334177">=</span>&nbsp;<span class="builtintype" id="4334179">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334186">s</span><span class="op" id="4334187">.</span><span class="ident" id="4334188">ErrorCount</span>&nbsp;<span class="op" id="4334199">=</span>&nbsp;<span class="num" id="4334201">0</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334205">s</span><span class="op" id="4334206">.</span><span class="ident" id="4334207">next</span><span class="op" id="4334211">(</span><span class="op" id="4334212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334215">if</span>&nbsp;<span class="ident" id="4334218">s</span><span class="op" id="4334219">.</span><span class="ident" id="4334220">ch</span>&nbsp;<span class="op" id="4334223">==</span>&nbsp;<span class="ident" id="4334226">bom</span>&nbsp;<span class="op" id="4334230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334234">s</span><span class="op" id="4334235">.</span><span class="ident" id="4334236">next</span><span class="op" id="4334240">(</span><span class="op" id="4334241">)</span>&nbsp;<span class="comment" id="4334243">//&nbsp;ignore&nbsp;BOM&nbsp;at&nbsp;file&nbsp;beginning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334276">}</span><br>
<span class="lineno">135</span><span class="op" id="4334278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4334281">func</span>&nbsp;<span class="op" id="4334286">(</span><span class="ident" id="4334287">s</span>&nbsp;<span class="op" id="4334289">*</span><span class="ident" id="4334290">Scanner</span><span class="op" id="4334297">)</span>&nbsp;<span class="builtintype" id="4334299">error</span><span class="op" id="4334304">(</span><span class="ident" id="4334305">offs</span>&nbsp;<span class="builtintype" id="4334310">int</span><span class="op" id="4334313">,</span>&nbsp;<span class="ident" id="4334315">msg</span>&nbsp;<span class="builtintype" id="4334319">string</span><span class="op" id="4334325">)</span>&nbsp;<span class="op" id="4334327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334330">if</span>&nbsp;<span class="ident" id="4334333">s</span><span class="op" id="4334334">.</span><span class="ident" id="4334335">err</span>&nbsp;<span class="op" id="4334339">!=</span>&nbsp;<span class="ident" id="4334342">nil</span>&nbsp;<span class="op" id="4334346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334350">s</span><span class="op" id="4334351">.</span><span class="ident" id="4334352">err</span><span class="op" id="4334355">(</span><span class="ident" id="4334356">s</span><span class="op" id="4334357">.</span><span class="ident" id="4334358">file</span><span class="op" id="4334362">.</span><span class="ident" id="4334363">Position</span><span class="op" id="4334371">(</span><span class="ident" id="4334372">s</span><span class="op" id="4334373">.</span><span class="ident" id="4334374">file</span><span class="op" id="4334378">.</span><span class="ident" id="4334379">Pos</span><span class="op" id="4334382">(</span><span class="ident" id="4334383">offs</span><span class="op" id="4334387">)</span><span class="op" id="4334388">)</span><span class="op" id="4334389">,</span>&nbsp;<span class="ident" id="4334391">msg</span><span class="op" id="4334394">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334400">s</span><span class="op" id="4334401">.</span><span class="ident" id="4334402">ErrorCount</span><span class="op" id="4334412">++</span><br>
<span class="lineno"></span><span class="op" id="4334415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4334418">var</span>&nbsp;<span class="ident" id="4334422">prefix</span>&nbsp;<span class="op" id="4334429">=</span>&nbsp;<span class="op" id="4334431">[</span><span class="op" id="4334432">]</span><span class="builtintype" id="4334433">byte</span><span class="op" id="4334437">(</span><span class="string" id="4334438">&#34;//line&nbsp;&#34;</span><span class="op" id="4334447">)</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="4334450">func</span>&nbsp;<span class="op" id="4334455">(</span><span class="ident" id="4334456">s</span>&nbsp;<span class="op" id="4334458">*</span><span class="ident" id="4334459">Scanner</span><span class="op" id="4334466">)</span>&nbsp;<span class="ident" id="4334468">interpretLineComment</span><span class="op" id="4334488">(</span><span class="ident" id="4334489">text</span>&nbsp;<span class="op" id="4334494">[</span><span class="op" id="4334495">]</span><span class="builtintype" id="4334496">byte</span><span class="op" id="4334500">)</span>&nbsp;<span class="op" id="4334502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334505">if</span>&nbsp;<span class="ident" id="4334508">bytes</span><span class="op" id="4334513">.</span><span class="ident" id="4334514">HasPrefix</span><span class="op" id="4334523">(</span><span class="ident" id="4334524">text</span><span class="op" id="4334528">,</span>&nbsp;<span class="ident" id="4334530">prefix</span><span class="op" id="4334536">)</span>&nbsp;<span class="op" id="4334538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4334542">//&nbsp;get&nbsp;filename&nbsp;and&nbsp;line&nbsp;number,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334584">if</span>&nbsp;<span class="ident" id="4334587">i</span>&nbsp;<span class="op" id="4334589">:=</span>&nbsp;<span class="ident" id="4334592">bytes</span><span class="op" id="4334597">.</span><span class="ident" id="4334598">LastIndex</span><span class="op" id="4334607">(</span><span class="ident" id="4334608">text</span><span class="op" id="4334612">,</span>&nbsp;<span class="op" id="4334614">[</span><span class="op" id="4334615">]</span><span class="builtintype" id="4334616">byte</span><span class="op" id="4334620">{</span><span class="string" id="4334621">&#39;:&#39;</span><span class="op" id="4334624">}</span><span class="op" id="4334625">)</span><span class="op" id="4334626">;</span>&nbsp;<span class="ident" id="4334628">i</span>&nbsp;<span class="op" id="4334630">&gt;</span>&nbsp;<span class="num" id="4334632">0</span>&nbsp;<span class="op" id="4334634">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334639">if</span>&nbsp;<span class="ident" id="4334642">line</span><span class="op" id="4334646">,</span>&nbsp;<span class="ident" id="4334648">err</span>&nbsp;<span class="op" id="4334652">:=</span>&nbsp;<span class="ident" id="4334655">strconv</span><span class="op" id="4334662">.</span><span class="ident" id="4334663">Atoi</span><span class="op" id="4334667">(</span><span class="builtintype" id="4334668">string</span><span class="op" id="4334674">(</span><span class="ident" id="4334675">text</span><span class="op" id="4334679">[</span><span class="ident" id="4334680">i</span><span class="op" id="4334681">+</span><span class="num" id="4334682">1</span><span class="op" id="4334683">:</span><span class="op" id="4334684">]</span><span class="op" id="4334685">)</span><span class="op" id="4334686">)</span><span class="op" id="4334687">;</span>&nbsp;<span class="ident" id="4334689">err</span>&nbsp;<span class="op" id="4334693">==</span>&nbsp;<span class="ident" id="4334696">nil</span>&nbsp;<span class="op" id="4334700">&amp;&amp;</span>&nbsp;<span class="ident" id="4334703">line</span>&nbsp;<span class="op" id="4334708">&gt;</span>&nbsp;<span class="num" id="4334710">0</span>&nbsp;<span class="op" id="4334712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4334718">//&nbsp;valid&nbsp;//line&nbsp;filename:line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334760">filename</span>&nbsp;<span class="op" id="4334769">:=</span>&nbsp;<span class="builtintype" id="4334772">string</span><span class="op" id="4334778">(</span><span class="ident" id="4334779">bytes</span><span class="op" id="4334784">.</span><span class="ident" id="4334785">TrimSpace</span><span class="op" id="4334794">(</span><span class="ident" id="4334795">text</span><span class="op" id="4334799">[</span><span class="builtinfunc" id="4334800">len</span><span class="op" id="4334803">(</span><span class="ident" id="4334804">prefix</span><span class="op" id="4334810">)</span><span class="op" id="4334811">:</span><span class="ident" id="4334812">i</span><span class="op" id="4334813">]</span><span class="op" id="4334814">)</span><span class="op" id="4334815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334821">if</span>&nbsp;<span class="ident" id="4334824">filename</span>&nbsp;<span class="op" id="4334833">!=</span>&nbsp;<span class="string" id="4334836">&#34;&#34;</span>&nbsp;<span class="op" id="4334839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334846">filename</span>&nbsp;<span class="op" id="4334855">=</span>&nbsp;<span class="ident" id="4334857">filepath</span><span class="op" id="4334865">.</span><span class="ident" id="4334866">Clean</span><span class="op" id="4334871">(</span><span class="ident" id="4334872">filename</span><span class="op" id="4334880">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334887">if</span>&nbsp;<span class="op" id="4334890">!</span><span class="ident" id="4334891">filepath</span><span class="op" id="4334899">.</span><span class="ident" id="4334900">IsAbs</span><span class="op" id="4334905">(</span><span class="ident" id="4334906">filename</span><span class="op" id="4334914">)</span>&nbsp;<span class="op" id="4334916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4334924">//&nbsp;make&nbsp;filename&nbsp;relative&nbsp;to&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334977">filename</span>&nbsp;<span class="op" id="4334986">=</span>&nbsp;<span class="ident" id="4334988">filepath</span><span class="op" id="4334996">.</span><span class="ident" id="4334997">Join</span><span class="op" id="4335001">(</span><span class="ident" id="4335002">s</span><span class="op" id="4335003">.</span><span class="ident" id="4335004">dir</span><span class="op" id="4335007">,</span>&nbsp;<span class="ident" id="4335009">filename</span><span class="op" id="4335017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335030">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335036">//&nbsp;update&nbsp;scanner&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335067">s</span><span class="op" id="4335068">.</span><span class="ident" id="4335069">file</span><span class="op" id="4335073">.</span><span class="ident" id="4335074">AddLineInfo</span><span class="op" id="4335085">(</span><span class="ident" id="4335086">s</span><span class="op" id="4335087">.</span><span class="ident" id="4335088">lineOffset</span><span class="op" id="4335098">+</span><span class="builtinfunc" id="4335099">len</span><span class="op" id="4335102">(</span><span class="ident" id="4335103">text</span><span class="op" id="4335107">)</span><span class="op" id="4335108">+</span><span class="num" id="4335109">1</span><span class="op" id="4335110">,</span>&nbsp;<span class="ident" id="4335112">filename</span><span class="op" id="4335120">,</span>&nbsp;<span class="ident" id="4335122">line</span><span class="op" id="4335126">)</span>&nbsp;<span class="comment" id="4335128">//&nbsp;+len(text)+1&nbsp;since&nbsp;comment&nbsp;applies&nbsp;to&nbsp;next&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335189">}</span><br>
<span class="lineno">165</span><span class="op" id="4335191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4335194">func</span>&nbsp;<span class="op" id="4335199">(</span><span class="ident" id="4335200">s</span>&nbsp;<span class="op" id="4335202">*</span><span class="ident" id="4335203">Scanner</span><span class="op" id="4335210">)</span>&nbsp;<span class="ident" id="4335212">scanComment</span><span class="op" id="4335223">(</span><span class="op" id="4335224">)</span>&nbsp;<span class="builtintype" id="4335226">string</span>&nbsp;<span class="op" id="4335233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335236">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed;&nbsp;s.ch&nbsp;==&nbsp;&#39;/&#39;&nbsp;||&nbsp;s.ch&nbsp;==&nbsp;&#39;*&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335297">offs</span>&nbsp;<span class="op" id="4335302">:=</span>&nbsp;<span class="ident" id="4335305">s</span><span class="op" id="4335306">.</span><span class="ident" id="4335307">offset</span>&nbsp;<span class="op" id="4335314">-</span>&nbsp;<span class="num" id="4335316">1</span>&nbsp;<span class="comment" id="4335318">//&nbsp;position&nbsp;of&nbsp;initial&nbsp;&#39;/&#39;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335346">hasCR</span>&nbsp;<span class="op" id="4335352">:=</span>&nbsp;<span class="builtintype" id="4335355">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335363">if</span>&nbsp;<span class="ident" id="4335366">s</span><span class="op" id="4335367">.</span><span class="ident" id="4335368">ch</span>&nbsp;<span class="op" id="4335371">==</span>&nbsp;<span class="string" id="4335374">&#39;/&#39;</span>&nbsp;<span class="op" id="4335378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335382">//-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335401">s</span><span class="op" id="4335402">.</span><span class="ident" id="4335403">next</span><span class="op" id="4335407">(</span><span class="op" id="4335408">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335412">for</span>&nbsp;<span class="ident" id="4335416">s</span><span class="op" id="4335417">.</span><span class="ident" id="4335418">ch</span>&nbsp;<span class="op" id="4335421">!=</span>&nbsp;<span class="string" id="4335424">&#39;\n&#39;</span>&nbsp;<span class="op" id="4335429">&amp;&amp;</span>&nbsp;<span class="ident" id="4335432">s</span><span class="op" id="4335433">.</span><span class="ident" id="4335434">ch</span>&nbsp;<span class="op" id="4335437">&gt;=</span>&nbsp;<span class="num" id="4335440">0</span>&nbsp;<span class="op" id="4335442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335447">if</span>&nbsp;<span class="ident" id="4335450">s</span><span class="op" id="4335451">.</span><span class="ident" id="4335452">ch</span>&nbsp;<span class="op" id="4335455">==</span>&nbsp;<span class="string" id="4335458">&#39;\r&#39;</span>&nbsp;<span class="op" id="4335463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335469">hasCR</span>&nbsp;<span class="op" id="4335475">=</span>&nbsp;<span class="builtintype" id="4335477">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335490">s</span><span class="op" id="4335491">.</span><span class="ident" id="4335492">next</span><span class="op" id="4335496">(</span><span class="op" id="4335497">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335505">if</span>&nbsp;<span class="ident" id="4335508">offs</span>&nbsp;<span class="op" id="4335513">==</span>&nbsp;<span class="ident" id="4335516">s</span><span class="op" id="4335517">.</span><span class="ident" id="4335518">lineOffset</span>&nbsp;<span class="op" id="4335529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335534">//&nbsp;comment&nbsp;starts&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;current&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335592">s</span><span class="op" id="4335593">.</span><span class="ident" id="4335594">interpretLineComment</span><span class="op" id="4335614">(</span><span class="ident" id="4335615">s</span><span class="op" id="4335616">.</span><span class="ident" id="4335617">src</span><span class="op" id="4335620">[</span><span class="ident" id="4335621">offs</span><span class="op" id="4335625">:</span><span class="ident" id="4335626">s</span><span class="op" id="4335627">.</span><span class="ident" id="4335628">offset</span><span class="op" id="4335634">]</span><span class="op" id="4335635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335639">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335643">goto</span>&nbsp;<span class="ident" id="4335648">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4335658">/*-style&nbsp;comment&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335679">s</span><span class="op" id="4335680">.</span><span class="ident" id="4335681">next</span><span class="op" id="4335685">(</span><span class="op" id="4335686">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335689">for</span>&nbsp;<span class="ident" id="4335693">s</span><span class="op" id="4335694">.</span><span class="ident" id="4335695">ch</span>&nbsp;<span class="op" id="4335698">&gt;=</span>&nbsp;<span class="num" id="4335701">0</span>&nbsp;<span class="op" id="4335703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335707">ch</span>&nbsp;<span class="op" id="4335710">:=</span>&nbsp;<span class="ident" id="4335713">s</span><span class="op" id="4335714">.</span><span class="ident" id="4335715">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335720">if</span>&nbsp;<span class="ident" id="4335723">ch</span>&nbsp;<span class="op" id="4335726">==</span>&nbsp;<span class="string" id="4335729">&#39;\r&#39;</span>&nbsp;<span class="op" id="4335734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335739">hasCR</span>&nbsp;<span class="op" id="4335745">=</span>&nbsp;<span class="builtintype" id="4335747">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335754">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335758">s</span><span class="op" id="4335759">.</span><span class="ident" id="4335760">next</span><span class="op" id="4335764">(</span><span class="op" id="4335765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335769">if</span>&nbsp;<span class="ident" id="4335772">ch</span>&nbsp;<span class="op" id="4335775">==</span>&nbsp;<span class="string" id="4335778">&#39;*&#39;</span>&nbsp;<span class="op" id="4335782">&amp;&amp;</span>&nbsp;<span class="ident" id="4335785">s</span><span class="op" id="4335786">.</span><span class="ident" id="4335787">ch</span>&nbsp;<span class="op" id="4335790">==</span>&nbsp;<span class="string" id="4335793">&#39;/&#39;</span>&nbsp;<span class="op" id="4335797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335802">s</span><span class="op" id="4335803">.</span><span class="ident" id="4335804">next</span><span class="op" id="4335808">(</span><span class="op" id="4335809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335814">goto</span>&nbsp;<span class="ident" id="4335819">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335826">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335833">s</span><span class="op" id="4335834">.</span><span class="builtintype" id="4335835">error</span><span class="op" id="4335840">(</span><span class="ident" id="4335841">offs</span><span class="op" id="4335845">,</span>&nbsp;<span class="string" id="4335847">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4335871">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="4335874">exit</span><span class="op" id="4335878">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335881">lit</span>&nbsp;<span class="op" id="4335885">:=</span>&nbsp;<span class="ident" id="4335888">s</span><span class="op" id="4335889">.</span><span class="ident" id="4335890">src</span><span class="op" id="4335893">[</span><span class="ident" id="4335894">offs</span><span class="op" id="4335898">:</span><span class="ident" id="4335899">s</span><span class="op" id="4335900">.</span><span class="ident" id="4335901">offset</span><span class="op" id="4335907">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335910">if</span>&nbsp;<span class="ident" id="4335913">hasCR</span>&nbsp;<span class="op" id="4335919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335923">lit</span>&nbsp;<span class="op" id="4335927">=</span>&nbsp;<span class="ident" id="4335929">stripCR</span><span class="op" id="4335936">(</span><span class="ident" id="4335937">lit</span><span class="op" id="4335940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335947">return</span>&nbsp;<span class="builtintype" id="4335954">string</span><span class="op" id="4335960">(</span><span class="ident" id="4335961">lit</span><span class="op" id="4335964">)</span><br>
<span class="lineno"></span><span class="op" id="4335966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4335969">func</span>&nbsp;<span class="op" id="4335974">(</span><span class="ident" id="4335975">s</span>&nbsp;<span class="op" id="4335977">*</span><span class="ident" id="4335978">Scanner</span><span class="op" id="4335985">)</span>&nbsp;<span class="ident" id="4335987">findLineEnd</span><span class="op" id="4335998">(</span><span class="op" id="4335999">)</span>&nbsp;<span class="builtintype" id="4336001">bool</span>&nbsp;<span class="op" id="4336006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4336009">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336043">defer</span>&nbsp;<span class="keyword" id="4336049">func</span><span class="op" id="4336053">(</span><span class="ident" id="4336054">offs</span>&nbsp;<span class="builtintype" id="4336059">int</span><span class="op" id="4336062">)</span>&nbsp;<span class="op" id="4336064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4336068">//&nbsp;reset&nbsp;scanner&nbsp;state&nbsp;to&nbsp;where&nbsp;it&nbsp;was&nbsp;upon&nbsp;calling&nbsp;findLineEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336134">s</span><span class="op" id="4336135">.</span><span class="ident" id="4336136">ch</span>&nbsp;<span class="op" id="4336139">=</span>&nbsp;<span class="string" id="4336141">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336147">s</span><span class="op" id="4336148">.</span><span class="ident" id="4336149">offset</span>&nbsp;<span class="op" id="4336156">=</span>&nbsp;<span class="ident" id="4336158">offs</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336165">s</span><span class="op" id="4336166">.</span><span class="ident" id="4336167">rdOffset</span>&nbsp;<span class="op" id="4336176">=</span>&nbsp;<span class="ident" id="4336178">offs</span>&nbsp;<span class="op" id="4336183">+</span>&nbsp;<span class="num" id="4336185">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336189">s</span><span class="op" id="4336190">.</span><span class="ident" id="4336191">next</span><span class="op" id="4336195">(</span><span class="op" id="4336196">)</span>&nbsp;<span class="comment" id="4336198">//&nbsp;consume&nbsp;initial&nbsp;&#39;/&#39;&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336228">}</span><span class="op" id="4336229">(</span><span class="ident" id="4336230">s</span><span class="op" id="4336231">.</span><span class="ident" id="4336232">offset</span>&nbsp;<span class="op" id="4336239">-</span>&nbsp;<span class="num" id="4336241">1</span><span class="op" id="4336242">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4336246">//&nbsp;read&nbsp;ahead&nbsp;until&nbsp;a&nbsp;newline,&nbsp;EOF,&nbsp;or&nbsp;non-comment&nbsp;token&nbsp;is&nbsp;found</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336313">for</span>&nbsp;<span class="ident" id="4336317">s</span><span class="op" id="4336318">.</span><span class="ident" id="4336319">ch</span>&nbsp;<span class="op" id="4336322">==</span>&nbsp;<span class="string" id="4336325">&#39;/&#39;</span>&nbsp;<span class="op" id="4336329">||</span>&nbsp;<span class="ident" id="4336332">s</span><span class="op" id="4336333">.</span><span class="ident" id="4336334">ch</span>&nbsp;<span class="op" id="4336337">==</span>&nbsp;<span class="string" id="4336340">&#39;*&#39;</span>&nbsp;<span class="op" id="4336344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336348">if</span>&nbsp;<span class="ident" id="4336351">s</span><span class="op" id="4336352">.</span><span class="ident" id="4336353">ch</span>&nbsp;<span class="op" id="4336356">==</span>&nbsp;<span class="string" id="4336359">&#39;/&#39;</span>&nbsp;<span class="op" id="4336363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4336368">//-style&nbsp;comment&nbsp;always&nbsp;contains&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336414">return</span>&nbsp;<span class="builtintype" id="4336421">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336428">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4336432">/*-style&nbsp;comment:&nbsp;look&nbsp;for&nbsp;newline&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336472">s</span><span class="op" id="4336473">.</span><span class="ident" id="4336474">next</span><span class="op" id="4336478">(</span><span class="op" id="4336479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336483">for</span>&nbsp;<span class="ident" id="4336487">s</span><span class="op" id="4336488">.</span><span class="ident" id="4336489">ch</span>&nbsp;<span class="op" id="4336492">&gt;=</span>&nbsp;<span class="num" id="4336495">0</span>&nbsp;<span class="op" id="4336497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336502">ch</span>&nbsp;<span class="op" id="4336505">:=</span>&nbsp;<span class="ident" id="4336508">s</span><span class="op" id="4336509">.</span><span class="ident" id="4336510">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336516">if</span>&nbsp;<span class="ident" id="4336519">ch</span>&nbsp;<span class="op" id="4336522">==</span>&nbsp;<span class="string" id="4336525">&#39;\n&#39;</span>&nbsp;<span class="op" id="4336530">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336536">return</span>&nbsp;<span class="builtintype" id="4336543">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336556">s</span><span class="op" id="4336557">.</span><span class="ident" id="4336558">next</span><span class="op" id="4336562">(</span><span class="op" id="4336563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336568">if</span>&nbsp;<span class="ident" id="4336571">ch</span>&nbsp;<span class="op" id="4336574">==</span>&nbsp;<span class="string" id="4336577">&#39;*&#39;</span>&nbsp;<span class="op" id="4336581">&amp;&amp;</span>&nbsp;<span class="ident" id="4336584">s</span><span class="op" id="4336585">.</span><span class="ident" id="4336586">ch</span>&nbsp;<span class="op" id="4336589">==</span>&nbsp;<span class="string" id="4336592">&#39;/&#39;</span>&nbsp;<span class="op" id="4336596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336602">s</span><span class="op" id="4336603">.</span><span class="ident" id="4336604">next</span><span class="op" id="4336608">(</span><span class="op" id="4336609">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336615">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336632">s</span><span class="op" id="4336633">.</span><span class="ident" id="4336634">skipWhitespace</span><span class="op" id="4336648">(</span><span class="op" id="4336649">)</span>&nbsp;<span class="comment" id="4336651">//&nbsp;s.insertSemi&nbsp;is&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336676">if</span>&nbsp;<span class="ident" id="4336679">s</span><span class="op" id="4336680">.</span><span class="ident" id="4336681">ch</span>&nbsp;<span class="op" id="4336684">&lt;</span>&nbsp;<span class="num" id="4336686">0</span>&nbsp;<span class="op" id="4336688">||</span>&nbsp;<span class="ident" id="4336691">s</span><span class="op" id="4336692">.</span><span class="ident" id="4336693">ch</span>&nbsp;<span class="op" id="4336696">==</span>&nbsp;<span class="string" id="4336699">&#39;\n&#39;</span>&nbsp;<span class="op" id="4336704">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336709">return</span>&nbsp;<span class="builtintype" id="4336716">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336727">if</span>&nbsp;<span class="ident" id="4336730">s</span><span class="op" id="4336731">.</span><span class="ident" id="4336732">ch</span>&nbsp;<span class="op" id="4336735">!=</span>&nbsp;<span class="string" id="4336738">&#39;/&#39;</span>&nbsp;<span class="op" id="4336742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4336747">//&nbsp;non-comment&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336771">return</span>&nbsp;<span class="builtintype" id="4336778">false</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336790">s</span><span class="op" id="4336791">.</span><span class="ident" id="4336792">next</span><span class="op" id="4336796">(</span><span class="op" id="4336797">)</span>&nbsp;<span class="comment" id="4336799">//&nbsp;consume&nbsp;&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336819">return</span>&nbsp;<span class="builtintype" id="4336826">false</span><br>
<span class="lineno">255</span><span class="op" id="4336832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4336835">func</span>&nbsp;<span class="ident" id="4336840">isLetter</span><span class="op" id="4336848">(</span><span class="ident" id="4336849">ch</span>&nbsp;<span class="builtintype" id="4336852">rune</span><span class="op" id="4336856">)</span>&nbsp;<span class="builtintype" id="4336858">bool</span>&nbsp;<span class="op" id="4336863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336866">return</span>&nbsp;<span class="string" id="4336873">&#39;a&#39;</span>&nbsp;<span class="op" id="4336877">&lt;=</span>&nbsp;<span class="ident" id="4336880">ch</span>&nbsp;<span class="op" id="4336883">&amp;&amp;</span>&nbsp;<span class="ident" id="4336886">ch</span>&nbsp;<span class="op" id="4336889">&lt;=</span>&nbsp;<span class="string" id="4336892">&#39;z&#39;</span>&nbsp;<span class="op" id="4336896">||</span>&nbsp;<span class="string" id="4336899">&#39;A&#39;</span>&nbsp;<span class="op" id="4336903">&lt;=</span>&nbsp;<span class="ident" id="4336906">ch</span>&nbsp;<span class="op" id="4336909">&amp;&amp;</span>&nbsp;<span class="ident" id="4336912">ch</span>&nbsp;<span class="op" id="4336915">&lt;=</span>&nbsp;<span class="string" id="4336918">&#39;Z&#39;</span>&nbsp;<span class="op" id="4336922">||</span>&nbsp;<span class="ident" id="4336925">ch</span>&nbsp;<span class="op" id="4336928">==</span>&nbsp;<span class="string" id="4336931">&#39;_&#39;</span>&nbsp;<span class="op" id="4336935">||</span>&nbsp;<span class="ident" id="4336938">ch</span>&nbsp;<span class="op" id="4336941">&gt;=</span>&nbsp;<span class="num" id="4336944">0x80</span>&nbsp;<span class="op" id="4336949">&amp;&amp;</span>&nbsp;<span class="ident" id="4336952">unicode</span><span class="op" id="4336959">.</span><span class="ident" id="4336960">IsLetter</span><span class="op" id="4336968">(</span><span class="ident" id="4336969">ch</span><span class="op" id="4336971">)</span><br>
<span class="lineno"></span><span class="op" id="4336973">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4336976">func</span>&nbsp;<span class="ident" id="4336981">isDigit</span><span class="op" id="4336988">(</span><span class="ident" id="4336989">ch</span>&nbsp;<span class="builtintype" id="4336992">rune</span><span class="op" id="4336996">)</span>&nbsp;<span class="builtintype" id="4336998">bool</span>&nbsp;<span class="op" id="4337003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337006">return</span>&nbsp;<span class="string" id="4337013">&#39;0&#39;</span>&nbsp;<span class="op" id="4337017">&lt;=</span>&nbsp;<span class="ident" id="4337020">ch</span>&nbsp;<span class="op" id="4337023">&amp;&amp;</span>&nbsp;<span class="ident" id="4337026">ch</span>&nbsp;<span class="op" id="4337029">&lt;=</span>&nbsp;<span class="string" id="4337032">&#39;9&#39;</span>&nbsp;<span class="op" id="4337036">||</span>&nbsp;<span class="ident" id="4337039">ch</span>&nbsp;<span class="op" id="4337042">&gt;=</span>&nbsp;<span class="num" id="4337045">0x80</span>&nbsp;<span class="op" id="4337050">&amp;&amp;</span>&nbsp;<span class="ident" id="4337053">unicode</span><span class="op" id="4337060">.</span><span class="ident" id="4337061">IsDigit</span><span class="op" id="4337068">(</span><span class="ident" id="4337069">ch</span><span class="op" id="4337071">)</span><br>
<span class="lineno"></span><span class="op" id="4337073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="4337076">func</span>&nbsp;<span class="op" id="4337081">(</span><span class="ident" id="4337082">s</span>&nbsp;<span class="op" id="4337084">*</span><span class="ident" id="4337085">Scanner</span><span class="op" id="4337092">)</span>&nbsp;<span class="ident" id="4337094">scanIdentifier</span><span class="op" id="4337108">(</span><span class="op" id="4337109">)</span>&nbsp;<span class="builtintype" id="4337111">string</span>&nbsp;<span class="op" id="4337118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337121">offs</span>&nbsp;<span class="op" id="4337126">:=</span>&nbsp;<span class="ident" id="4337129">s</span><span class="op" id="4337130">.</span><span class="ident" id="4337131">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337139">for</span>&nbsp;<span class="ident" id="4337143">isLetter</span><span class="op" id="4337151">(</span><span class="ident" id="4337152">s</span><span class="op" id="4337153">.</span><span class="ident" id="4337154">ch</span><span class="op" id="4337156">)</span>&nbsp;<span class="op" id="4337158">||</span>&nbsp;<span class="ident" id="4337161">isDigit</span><span class="op" id="4337168">(</span><span class="ident" id="4337169">s</span><span class="op" id="4337170">.</span><span class="ident" id="4337171">ch</span><span class="op" id="4337173">)</span>&nbsp;<span class="op" id="4337175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337179">s</span><span class="op" id="4337180">.</span><span class="ident" id="4337181">next</span><span class="op" id="4337185">(</span><span class="op" id="4337186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337189">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337192">return</span>&nbsp;<span class="builtintype" id="4337199">string</span><span class="op" id="4337205">(</span><span class="ident" id="4337206">s</span><span class="op" id="4337207">.</span><span class="ident" id="4337208">src</span><span class="op" id="4337211">[</span><span class="ident" id="4337212">offs</span><span class="op" id="4337216">:</span><span class="ident" id="4337217">s</span><span class="op" id="4337218">.</span><span class="ident" id="4337219">offset</span><span class="op" id="4337225">]</span><span class="op" id="4337226">)</span><br>
<span class="lineno"></span><span class="op" id="4337228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4337231">func</span>&nbsp;<span class="ident" id="4337236">digitVal</span><span class="op" id="4337244">(</span><span class="ident" id="4337245">ch</span>&nbsp;<span class="builtintype" id="4337248">rune</span><span class="op" id="4337252">)</span>&nbsp;<span class="builtintype" id="4337254">int</span>&nbsp;<span class="op" id="4337258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337261">switch</span>&nbsp;<span class="op" id="4337268">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337271">case</span>&nbsp;<span class="string" id="4337276">&#39;0&#39;</span>&nbsp;<span class="op" id="4337280">&lt;=</span>&nbsp;<span class="ident" id="4337283">ch</span>&nbsp;<span class="op" id="4337286">&amp;&amp;</span>&nbsp;<span class="ident" id="4337289">ch</span>&nbsp;<span class="op" id="4337292">&lt;=</span>&nbsp;<span class="string" id="4337295">&#39;9&#39;</span><span class="op" id="4337298">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337302">return</span>&nbsp;<span class="builtintype" id="4337309">int</span><span class="op" id="4337312">(</span><span class="ident" id="4337313">ch</span>&nbsp;<span class="op" id="4337316">-</span>&nbsp;<span class="string" id="4337318">&#39;0&#39;</span><span class="op" id="4337321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337324">case</span>&nbsp;<span class="string" id="4337329">&#39;a&#39;</span>&nbsp;<span class="op" id="4337333">&lt;=</span>&nbsp;<span class="ident" id="4337336">ch</span>&nbsp;<span class="op" id="4337339">&amp;&amp;</span>&nbsp;<span class="ident" id="4337342">ch</span>&nbsp;<span class="op" id="4337345">&lt;=</span>&nbsp;<span class="string" id="4337348">&#39;f&#39;</span><span class="op" id="4337351">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337355">return</span>&nbsp;<span class="builtintype" id="4337362">int</span><span class="op" id="4337365">(</span><span class="ident" id="4337366">ch</span>&nbsp;<span class="op" id="4337369">-</span>&nbsp;<span class="string" id="4337371">&#39;a&#39;</span>&nbsp;<span class="op" id="4337375">+</span>&nbsp;<span class="num" id="4337377">10</span><span class="op" id="4337379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337382">case</span>&nbsp;<span class="string" id="4337387">&#39;A&#39;</span>&nbsp;<span class="op" id="4337391">&lt;=</span>&nbsp;<span class="ident" id="4337394">ch</span>&nbsp;<span class="op" id="4337397">&amp;&amp;</span>&nbsp;<span class="ident" id="4337400">ch</span>&nbsp;<span class="op" id="4337403">&lt;=</span>&nbsp;<span class="string" id="4337406">&#39;F&#39;</span><span class="op" id="4337409">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337413">return</span>&nbsp;<span class="builtintype" id="4337420">int</span><span class="op" id="4337423">(</span><span class="ident" id="4337424">ch</span>&nbsp;<span class="op" id="4337427">-</span>&nbsp;<span class="string" id="4337429">&#39;A&#39;</span>&nbsp;<span class="op" id="4337433">+</span>&nbsp;<span class="num" id="4337435">10</span><span class="op" id="4337437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337443">return</span>&nbsp;<span class="num" id="4337450">16</span>&nbsp;<span class="comment" id="4337453">//&nbsp;larger&nbsp;than&nbsp;any&nbsp;legal&nbsp;digit&nbsp;val</span><br>
<span class="lineno"></span><span class="op" id="4337488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="4337491">func</span>&nbsp;<span class="op" id="4337496">(</span><span class="ident" id="4337497">s</span>&nbsp;<span class="op" id="4337499">*</span><span class="ident" id="4337500">Scanner</span><span class="op" id="4337507">)</span>&nbsp;<span class="ident" id="4337509">scanMantissa</span><span class="op" id="4337521">(</span><span class="ident" id="4337522">base</span>&nbsp;<span class="builtintype" id="4337527">int</span><span class="op" id="4337530">)</span>&nbsp;<span class="op" id="4337532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337535">for</span>&nbsp;<span class="ident" id="4337539">digitVal</span><span class="op" id="4337547">(</span><span class="ident" id="4337548">s</span><span class="op" id="4337549">.</span><span class="ident" id="4337550">ch</span><span class="op" id="4337552">)</span>&nbsp;<span class="op" id="4337554">&lt;</span>&nbsp;<span class="ident" id="4337556">base</span>&nbsp;<span class="op" id="4337561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337565">s</span><span class="op" id="4337566">.</span><span class="ident" id="4337567">next</span><span class="op" id="4337571">(</span><span class="op" id="4337572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337575">}</span><br>
<span class="lineno"></span><span class="op" id="4337577">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="4337580">func</span>&nbsp;<span class="op" id="4337585">(</span><span class="ident" id="4337586">s</span>&nbsp;<span class="op" id="4337588">*</span><span class="ident" id="4337589">Scanner</span><span class="op" id="4337596">)</span>&nbsp;<span class="ident" id="4337598">scanNumber</span><span class="op" id="4337608">(</span><span class="ident" id="4337609">seenDecimalPoint</span>&nbsp;<span class="builtintype" id="4337626">bool</span><span class="op" id="4337630">)</span>&nbsp;<span class="op" id="4337632">(</span><span class="ident" id="4337633">token</span><span class="op" id="4337638">.</span><span class="ident" id="4337639">Token</span><span class="op" id="4337644">,</span>&nbsp;<span class="builtintype" id="4337646">string</span><span class="op" id="4337652">)</span>&nbsp;<span class="op" id="4337654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4337657">//&nbsp;digitVal(s.ch)&nbsp;&lt;&nbsp;10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337681">offs</span>&nbsp;<span class="op" id="4337686">:=</span>&nbsp;<span class="ident" id="4337689">s</span><span class="op" id="4337690">.</span><span class="ident" id="4337691">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337699">tok</span>&nbsp;<span class="op" id="4337703">:=</span>&nbsp;<span class="ident" id="4337706">token</span><span class="op" id="4337711">.</span><span class="ident" id="4337712">INT</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337718">if</span>&nbsp;<span class="ident" id="4337721">seenDecimalPoint</span>&nbsp;<span class="op" id="4337738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337742">offs</span><span class="op" id="4337746">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337751">tok</span>&nbsp;<span class="op" id="4337755">=</span>&nbsp;<span class="ident" id="4337757">token</span><span class="op" id="4337762">.</span><span class="ident" id="4337763">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337771">s</span><span class="op" id="4337772">.</span><span class="ident" id="4337773">scanMantissa</span><span class="op" id="4337785">(</span><span class="num" id="4337786">10</span><span class="op" id="4337788">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337792">goto</span>&nbsp;<span class="ident" id="4337797">exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337811">if</span>&nbsp;<span class="ident" id="4337814">s</span><span class="op" id="4337815">.</span><span class="ident" id="4337816">ch</span>&nbsp;<span class="op" id="4337819">==</span>&nbsp;<span class="string" id="4337822">&#39;0&#39;</span>&nbsp;<span class="op" id="4337826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4337830">//&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337848">offs</span>&nbsp;<span class="op" id="4337853">:=</span>&nbsp;<span class="ident" id="4337856">s</span><span class="op" id="4337857">.</span><span class="ident" id="4337858">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337867">s</span><span class="op" id="4337868">.</span><span class="ident" id="4337869">next</span><span class="op" id="4337873">(</span><span class="op" id="4337874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337878">if</span>&nbsp;<span class="ident" id="4337881">s</span><span class="op" id="4337882">.</span><span class="ident" id="4337883">ch</span>&nbsp;<span class="op" id="4337886">==</span>&nbsp;<span class="string" id="4337889">&#39;x&#39;</span>&nbsp;<span class="op" id="4337893">||</span>&nbsp;<span class="ident" id="4337896">s</span><span class="op" id="4337897">.</span><span class="ident" id="4337898">ch</span>&nbsp;<span class="op" id="4337901">==</span>&nbsp;<span class="string" id="4337904">&#39;X&#39;</span>&nbsp;<span class="op" id="4337908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4337913">//&nbsp;hexadecimal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337935">s</span><span class="op" id="4337936">.</span><span class="ident" id="4337937">next</span><span class="op" id="4337941">(</span><span class="op" id="4337942">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337947">s</span><span class="op" id="4337948">.</span><span class="ident" id="4337949">scanMantissa</span><span class="op" id="4337961">(</span><span class="num" id="4337962">16</span><span class="op" id="4337964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337969">if</span>&nbsp;<span class="ident" id="4337972">s</span><span class="op" id="4337973">.</span><span class="ident" id="4337974">offset</span><span class="op" id="4337980">-</span><span class="ident" id="4337981">offs</span>&nbsp;<span class="op" id="4337986">&lt;=</span>&nbsp;<span class="num" id="4337989">2</span>&nbsp;<span class="op" id="4337991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4337997">//&nbsp;only&nbsp;scanned&nbsp;&#34;0x&#34;&nbsp;or&nbsp;&#34;0X&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338030">s</span><span class="op" id="4338031">.</span><span class="builtintype" id="4338032">error</span><span class="op" id="4338037">(</span><span class="ident" id="4338038">offs</span><span class="op" id="4338042">,</span>&nbsp;<span class="string" id="4338044">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op" id="4338072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338077">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338081">}</span>&nbsp;<span class="keyword" id="4338083">else</span>&nbsp;<span class="op" id="4338088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4338093">//&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338118">seenDecimalDigit</span>&nbsp;<span class="op" id="4338135">:=</span>&nbsp;<span class="builtintype" id="4338138">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338147">s</span><span class="op" id="4338148">.</span><span class="ident" id="4338149">scanMantissa</span><span class="op" id="4338161">(</span><span class="num" id="4338162">8</span><span class="op" id="4338163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338168">if</span>&nbsp;<span class="ident" id="4338171">s</span><span class="op" id="4338172">.</span><span class="ident" id="4338173">ch</span>&nbsp;<span class="op" id="4338176">==</span>&nbsp;<span class="string" id="4338179">&#39;8&#39;</span>&nbsp;<span class="op" id="4338183">||</span>&nbsp;<span class="ident" id="4338186">s</span><span class="op" id="4338187">.</span><span class="ident" id="4338188">ch</span>&nbsp;<span class="op" id="4338191">==</span>&nbsp;<span class="string" id="4338194">&#39;9&#39;</span>&nbsp;<span class="op" id="4338198">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4338204">//&nbsp;illegal&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338238">seenDecimalDigit</span>&nbsp;<span class="op" id="4338255">=</span>&nbsp;<span class="builtintype" id="4338257">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338266">s</span><span class="op" id="4338267">.</span><span class="ident" id="4338268">scanMantissa</span><span class="op" id="4338280">(</span><span class="num" id="4338281">10</span><span class="op" id="4338283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338288">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338293">if</span>&nbsp;<span class="ident" id="4338296">s</span><span class="op" id="4338297">.</span><span class="ident" id="4338298">ch</span>&nbsp;<span class="op" id="4338301">==</span>&nbsp;<span class="string" id="4338304">&#39;.&#39;</span>&nbsp;<span class="op" id="4338308">||</span>&nbsp;<span class="ident" id="4338311">s</span><span class="op" id="4338312">.</span><span class="ident" id="4338313">ch</span>&nbsp;<span class="op" id="4338316">==</span>&nbsp;<span class="string" id="4338319">&#39;e&#39;</span>&nbsp;<span class="op" id="4338323">||</span>&nbsp;<span class="ident" id="4338326">s</span><span class="op" id="4338327">.</span><span class="ident" id="4338328">ch</span>&nbsp;<span class="op" id="4338331">==</span>&nbsp;<span class="string" id="4338334">&#39;E&#39;</span>&nbsp;<span class="op" id="4338338">||</span>&nbsp;<span class="ident" id="4338341">s</span><span class="op" id="4338342">.</span><span class="ident" id="4338343">ch</span>&nbsp;<span class="op" id="4338346">==</span>&nbsp;<span class="string" id="4338349">&#39;i&#39;</span>&nbsp;<span class="op" id="4338353">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338359">goto</span>&nbsp;<span class="ident" id="4338364">fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4338381">//&nbsp;octal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338397">if</span>&nbsp;<span class="ident" id="4338400">seenDecimalDigit</span>&nbsp;<span class="op" id="4338417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338423">s</span><span class="op" id="4338424">.</span><span class="builtintype" id="4338425">error</span><span class="op" id="4338430">(</span><span class="ident" id="4338431">offs</span><span class="op" id="4338435">,</span>&nbsp;<span class="string" id="4338437">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op" id="4338459">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338472">goto</span>&nbsp;<span class="ident" id="4338477">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4338487">//&nbsp;decimal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338512">s</span><span class="op" id="4338513">.</span><span class="ident" id="4338514">scanMantissa</span><span class="op" id="4338526">(</span><span class="num" id="4338527">10</span><span class="op" id="4338529">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="4338532">fraction</span><span class="op" id="4338540">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338543">if</span>&nbsp;<span class="ident" id="4338546">s</span><span class="op" id="4338547">.</span><span class="ident" id="4338548">ch</span>&nbsp;<span class="op" id="4338551">==</span>&nbsp;<span class="string" id="4338554">&#39;.&#39;</span>&nbsp;<span class="op" id="4338558">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338562">tok</span>&nbsp;<span class="op" id="4338566">=</span>&nbsp;<span class="ident" id="4338568">token</span><span class="op" id="4338573">.</span><span class="ident" id="4338574">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338582">s</span><span class="op" id="4338583">.</span><span class="ident" id="4338584">next</span><span class="op" id="4338588">(</span><span class="op" id="4338589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338593">s</span><span class="op" id="4338594">.</span><span class="ident" id="4338595">scanMantissa</span><span class="op" id="4338607">(</span><span class="num" id="4338608">10</span><span class="op" id="4338610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="ident" id="4338616">exponent</span><span class="op" id="4338624">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338627">if</span>&nbsp;<span class="ident" id="4338630">s</span><span class="op" id="4338631">.</span><span class="ident" id="4338632">ch</span>&nbsp;<span class="op" id="4338635">==</span>&nbsp;<span class="string" id="4338638">&#39;e&#39;</span>&nbsp;<span class="op" id="4338642">||</span>&nbsp;<span class="ident" id="4338645">s</span><span class="op" id="4338646">.</span><span class="ident" id="4338647">ch</span>&nbsp;<span class="op" id="4338650">==</span>&nbsp;<span class="string" id="4338653">&#39;E&#39;</span>&nbsp;<span class="op" id="4338657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338661">tok</span>&nbsp;<span class="op" id="4338665">=</span>&nbsp;<span class="ident" id="4338667">token</span><span class="op" id="4338672">.</span><span class="ident" id="4338673">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338681">s</span><span class="op" id="4338682">.</span><span class="ident" id="4338683">next</span><span class="op" id="4338687">(</span><span class="op" id="4338688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338692">if</span>&nbsp;<span class="ident" id="4338695">s</span><span class="op" id="4338696">.</span><span class="ident" id="4338697">ch</span>&nbsp;<span class="op" id="4338700">==</span>&nbsp;<span class="string" id="4338703">&#39;-&#39;</span>&nbsp;<span class="op" id="4338707">||</span>&nbsp;<span class="ident" id="4338710">s</span><span class="op" id="4338711">.</span><span class="ident" id="4338712">ch</span>&nbsp;<span class="op" id="4338715">==</span>&nbsp;<span class="string" id="4338718">&#39;+&#39;</span>&nbsp;<span class="op" id="4338722">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338727">s</span><span class="op" id="4338728">.</span><span class="ident" id="4338729">next</span><span class="op" id="4338733">(</span><span class="op" id="4338734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338742">s</span><span class="op" id="4338743">.</span><span class="ident" id="4338744">scanMantissa</span><span class="op" id="4338756">(</span><span class="num" id="4338757">10</span><span class="op" id="4338759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338762">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338766">if</span>&nbsp;<span class="ident" id="4338769">s</span><span class="op" id="4338770">.</span><span class="ident" id="4338771">ch</span>&nbsp;<span class="op" id="4338774">==</span>&nbsp;<span class="string" id="4338777">&#39;i&#39;</span>&nbsp;<span class="op" id="4338781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338785">tok</span>&nbsp;<span class="op" id="4338789">=</span>&nbsp;<span class="ident" id="4338791">token</span><span class="op" id="4338796">.</span><span class="ident" id="4338797">IMAG</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338804">s</span><span class="op" id="4338805">.</span><span class="ident" id="4338806">next</span><span class="op" id="4338810">(</span><span class="op" id="4338811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="ident" id="4338817">exit</span><span class="op" id="4338821">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338824">return</span>&nbsp;<span class="ident" id="4338831">tok</span><span class="op" id="4338834">,</span>&nbsp;<span class="builtintype" id="4338836">string</span><span class="op" id="4338842">(</span><span class="ident" id="4338843">s</span><span class="op" id="4338844">.</span><span class="ident" id="4338845">src</span><span class="op" id="4338848">[</span><span class="ident" id="4338849">offs</span><span class="op" id="4338853">:</span><span class="ident" id="4338854">s</span><span class="op" id="4338855">.</span><span class="ident" id="4338856">offset</span><span class="op" id="4338862">]</span><span class="op" id="4338863">)</span><br>
<span class="lineno"></span><span class="op" id="4338865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4338868">//&nbsp;scanEscape&nbsp;parses&nbsp;an&nbsp;escape&nbsp;sequence&nbsp;where&nbsp;rune&nbsp;is&nbsp;the&nbsp;accepted</span><br>
<span class="lineno">365</span><span class="comment" id="4338935">//&nbsp;escaped&nbsp;quote.&nbsp;In&nbsp;case&nbsp;of&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;it&nbsp;stops&nbsp;at&nbsp;the&nbsp;offending</span><br>
<span class="lineno"></span><span class="comment" id="4339006">//&nbsp;character&nbsp;(without&nbsp;consuming&nbsp;it)&nbsp;and&nbsp;returns&nbsp;false.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="4339071">//&nbsp;it&nbsp;returns&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="4339091">func</span>&nbsp;<span class="op" id="4339096">(</span><span class="ident" id="4339097">s</span>&nbsp;<span class="op" id="4339099">*</span><span class="ident" id="4339100">Scanner</span><span class="op" id="4339107">)</span>&nbsp;<span class="ident" id="4339109">scanEscape</span><span class="op" id="4339119">(</span><span class="ident" id="4339120">quote</span>&nbsp;<span class="builtintype" id="4339126">rune</span><span class="op" id="4339130">)</span>&nbsp;<span class="builtintype" id="4339132">bool</span>&nbsp;<span class="op" id="4339137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339140">offs</span>&nbsp;<span class="op" id="4339145">:=</span>&nbsp;<span class="ident" id="4339148">s</span><span class="op" id="4339149">.</span><span class="ident" id="4339150">offset</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339159">var</span>&nbsp;<span class="ident" id="4339163">n</span>&nbsp;<span class="builtintype" id="4339165">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339170">var</span>&nbsp;<span class="ident" id="4339174">base</span><span class="op" id="4339178">,</span>&nbsp;<span class="ident" id="4339180">max</span>&nbsp;<span class="builtintype" id="4339184">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339192">switch</span>&nbsp;<span class="ident" id="4339199">s</span><span class="op" id="4339200">.</span><span class="ident" id="4339201">ch</span>&nbsp;<span class="op" id="4339204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339207">case</span>&nbsp;<span class="string" id="4339212">&#39;a&#39;</span><span class="op" id="4339215">,</span>&nbsp;<span class="string" id="4339217">&#39;b&#39;</span><span class="op" id="4339220">,</span>&nbsp;<span class="string" id="4339222">&#39;f&#39;</span><span class="op" id="4339225">,</span>&nbsp;<span class="string" id="4339227">&#39;n&#39;</span><span class="op" id="4339230">,</span>&nbsp;<span class="string" id="4339232">&#39;r&#39;</span><span class="op" id="4339235">,</span>&nbsp;<span class="string" id="4339237">&#39;t&#39;</span><span class="op" id="4339240">,</span>&nbsp;<span class="string" id="4339242">&#39;v&#39;</span><span class="op" id="4339245">,</span>&nbsp;<span class="string" id="4339247">&#39;\\&#39;</span><span class="op" id="4339251">,</span>&nbsp;<span class="ident" id="4339253">quote</span><span class="op" id="4339258">:</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339262">s</span><span class="op" id="4339263">.</span><span class="ident" id="4339264">next</span><span class="op" id="4339268">(</span><span class="op" id="4339269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339273">return</span>&nbsp;<span class="builtintype" id="4339280">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339286">case</span>&nbsp;<span class="string" id="4339291">&#39;0&#39;</span><span class="op" id="4339294">,</span>&nbsp;<span class="string" id="4339296">&#39;1&#39;</span><span class="op" id="4339299">,</span>&nbsp;<span class="string" id="4339301">&#39;2&#39;</span><span class="op" id="4339304">,</span>&nbsp;<span class="string" id="4339306">&#39;3&#39;</span><span class="op" id="4339309">,</span>&nbsp;<span class="string" id="4339311">&#39;4&#39;</span><span class="op" id="4339314">,</span>&nbsp;<span class="string" id="4339316">&#39;5&#39;</span><span class="op" id="4339319">,</span>&nbsp;<span class="string" id="4339321">&#39;6&#39;</span><span class="op" id="4339324">,</span>&nbsp;<span class="string" id="4339326">&#39;7&#39;</span><span class="op" id="4339329">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339333">n</span><span class="op" id="4339334">,</span>&nbsp;<span class="ident" id="4339336">base</span><span class="op" id="4339340">,</span>&nbsp;<span class="ident" id="4339342">max</span>&nbsp;<span class="op" id="4339346">=</span>&nbsp;<span class="num" id="4339348">3</span><span class="op" id="4339349">,</span>&nbsp;<span class="num" id="4339351">8</span><span class="op" id="4339352">,</span>&nbsp;<span class="num" id="4339354">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339359">case</span>&nbsp;<span class="string" id="4339364">&#39;x&#39;</span><span class="op" id="4339367">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339371">s</span><span class="op" id="4339372">.</span><span class="ident" id="4339373">next</span><span class="op" id="4339377">(</span><span class="op" id="4339378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339382">n</span><span class="op" id="4339383">,</span>&nbsp;<span class="ident" id="4339385">base</span><span class="op" id="4339389">,</span>&nbsp;<span class="ident" id="4339391">max</span>&nbsp;<span class="op" id="4339395">=</span>&nbsp;<span class="num" id="4339397">2</span><span class="op" id="4339398">,</span>&nbsp;<span class="num" id="4339400">16</span><span class="op" id="4339402">,</span>&nbsp;<span class="num" id="4339404">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339409">case</span>&nbsp;<span class="string" id="4339414">&#39;u&#39;</span><span class="op" id="4339417">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339421">s</span><span class="op" id="4339422">.</span><span class="ident" id="4339423">next</span><span class="op" id="4339427">(</span><span class="op" id="4339428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339432">n</span><span class="op" id="4339433">,</span>&nbsp;<span class="ident" id="4339435">base</span><span class="op" id="4339439">,</span>&nbsp;<span class="ident" id="4339441">max</span>&nbsp;<span class="op" id="4339445">=</span>&nbsp;<span class="num" id="4339447">4</span><span class="op" id="4339448">,</span>&nbsp;<span class="num" id="4339450">16</span><span class="op" id="4339452">,</span>&nbsp;<span class="ident" id="4339454">unicode</span><span class="op" id="4339461">.</span><span class="ident" id="4339462">MaxRune</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339471">case</span>&nbsp;<span class="string" id="4339476">&#39;U&#39;</span><span class="op" id="4339479">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339483">s</span><span class="op" id="4339484">.</span><span class="ident" id="4339485">next</span><span class="op" id="4339489">(</span><span class="op" id="4339490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339494">n</span><span class="op" id="4339495">,</span>&nbsp;<span class="ident" id="4339497">base</span><span class="op" id="4339501">,</span>&nbsp;<span class="ident" id="4339503">max</span>&nbsp;<span class="op" id="4339507">=</span>&nbsp;<span class="num" id="4339509">8</span><span class="op" id="4339510">,</span>&nbsp;<span class="num" id="4339512">16</span><span class="op" id="4339514">,</span>&nbsp;<span class="ident" id="4339516">unicode</span><span class="op" id="4339523">.</span><span class="ident" id="4339524">MaxRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339533">default</span><span class="op" id="4339540">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339544">msg</span>&nbsp;<span class="op" id="4339548">:=</span>&nbsp;<span class="string" id="4339551">&#34;unknown&nbsp;escape&nbsp;sequence&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339579">if</span>&nbsp;<span class="ident" id="4339582">s</span><span class="op" id="4339583">.</span><span class="ident" id="4339584">ch</span>&nbsp;<span class="op" id="4339587">&lt;</span>&nbsp;<span class="num" id="4339589">0</span>&nbsp;<span class="op" id="4339591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339596">msg</span>&nbsp;<span class="op" id="4339600">=</span>&nbsp;<span class="string" id="4339602">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339641">s</span><span class="op" id="4339642">.</span><span class="builtintype" id="4339643">error</span><span class="op" id="4339648">(</span><span class="ident" id="4339649">offs</span><span class="op" id="4339653">,</span>&nbsp;<span class="ident" id="4339655">msg</span><span class="op" id="4339658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339662">return</span>&nbsp;<span class="builtintype" id="4339669">false</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339676">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339680">var</span>&nbsp;<span class="ident" id="4339684">x</span>&nbsp;<span class="builtintype" id="4339686">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339694">for</span>&nbsp;<span class="ident" id="4339698">n</span>&nbsp;<span class="op" id="4339700">&gt;</span>&nbsp;<span class="num" id="4339702">0</span>&nbsp;<span class="op" id="4339704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339708">d</span>&nbsp;<span class="op" id="4339710">:=</span>&nbsp;<span class="builtintype" id="4339713">uint32</span><span class="op" id="4339719">(</span><span class="ident" id="4339720">digitVal</span><span class="op" id="4339728">(</span><span class="ident" id="4339729">s</span><span class="op" id="4339730">.</span><span class="ident" id="4339731">ch</span><span class="op" id="4339733">)</span><span class="op" id="4339734">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339738">if</span>&nbsp;<span class="ident" id="4339741">d</span>&nbsp;<span class="op" id="4339743">&gt;=</span>&nbsp;<span class="ident" id="4339746">base</span>&nbsp;<span class="op" id="4339751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339756">msg</span>&nbsp;<span class="op" id="4339760">:=</span>&nbsp;<span class="ident" id="4339763">fmt</span><span class="op" id="4339766">.</span><span class="ident" id="4339767">Sprintf</span><span class="op" id="4339774">(</span><span class="string" id="4339775">&#34;illegal&nbsp;character&nbsp;%#U&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op" id="4339817">,</span>&nbsp;<span class="ident" id="4339819">s</span><span class="op" id="4339820">.</span><span class="ident" id="4339821">ch</span><span class="op" id="4339823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339828">if</span>&nbsp;<span class="ident" id="4339831">s</span><span class="op" id="4339832">.</span><span class="ident" id="4339833">ch</span>&nbsp;<span class="op" id="4339836">&lt;</span>&nbsp;<span class="num" id="4339838">0</span>&nbsp;<span class="op" id="4339840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339846">msg</span>&nbsp;<span class="op" id="4339850">=</span>&nbsp;<span class="string" id="4339852">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339888">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339893">s</span><span class="op" id="4339894">.</span><span class="builtintype" id="4339895">error</span><span class="op" id="4339900">(</span><span class="ident" id="4339901">s</span><span class="op" id="4339902">.</span><span class="ident" id="4339903">offset</span><span class="op" id="4339909">,</span>&nbsp;<span class="ident" id="4339911">msg</span><span class="op" id="4339914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339919">return</span>&nbsp;<span class="builtintype" id="4339926">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339938">x</span>&nbsp;<span class="op" id="4339940">=</span>&nbsp;<span class="ident" id="4339942">x</span><span class="op" id="4339943">*</span><span class="ident" id="4339944">base</span>&nbsp;<span class="op" id="4339949">+</span>&nbsp;<span class="ident" id="4339951">d</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339955">s</span><span class="op" id="4339956">.</span><span class="ident" id="4339957">next</span><span class="op" id="4339961">(</span><span class="op" id="4339962">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339966">n</span><span class="op" id="4339967">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339975">if</span>&nbsp;<span class="ident" id="4339978">x</span>&nbsp;<span class="op" id="4339980">&gt;</span>&nbsp;<span class="ident" id="4339982">max</span>&nbsp;<span class="op" id="4339986">||</span>&nbsp;<span class="num" id="4339989">0xD800</span>&nbsp;<span class="op" id="4339996">&lt;=</span>&nbsp;<span class="ident" id="4339999">x</span>&nbsp;<span class="op" id="4340001">&amp;&amp;</span>&nbsp;<span class="ident" id="4340004">x</span>&nbsp;<span class="op" id="4340006">&lt;</span>&nbsp;<span class="num" id="4340008">0xE000</span>&nbsp;<span class="op" id="4340015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340019">s</span><span class="op" id="4340020">.</span><span class="builtintype" id="4340021">error</span><span class="op" id="4340026">(</span><span class="ident" id="4340027">offs</span><span class="op" id="4340031">,</span>&nbsp;<span class="string" id="4340033">&#34;escape&nbsp;sequence&nbsp;is&nbsp;invalid&nbsp;Unicode&nbsp;code&nbsp;point&#34;</span><span class="op" id="4340080">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340084">return</span>&nbsp;<span class="builtintype" id="4340091">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340102">return</span>&nbsp;<span class="builtintype" id="4340109">true</span><br>
<span class="lineno"></span><span class="op" id="4340114">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span><span class="keyword" id="4340117">func</span>&nbsp;<span class="op" id="4340122">(</span><span class="ident" id="4340123">s</span>&nbsp;<span class="op" id="4340125">*</span><span class="ident" id="4340126">Scanner</span><span class="op" id="4340133">)</span>&nbsp;<span class="ident" id="4340135">scanRune</span><span class="op" id="4340143">(</span><span class="op" id="4340144">)</span>&nbsp;<span class="builtintype" id="4340146">string</span>&nbsp;<span class="op" id="4340153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340156">//&nbsp;&#39;\&#39;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340190">offs</span>&nbsp;<span class="op" id="4340195">:=</span>&nbsp;<span class="ident" id="4340198">s</span><span class="op" id="4340199">.</span><span class="ident" id="4340200">offset</span>&nbsp;<span class="op" id="4340207">-</span>&nbsp;<span class="num" id="4340209">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340213">valid</span>&nbsp;<span class="op" id="4340219">:=</span>&nbsp;<span class="builtintype" id="4340222">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340228">n</span>&nbsp;<span class="op" id="4340230">:=</span>&nbsp;<span class="num" id="4340233">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340236">for</span>&nbsp;<span class="op" id="4340240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340244">ch</span>&nbsp;<span class="op" id="4340247">:=</span>&nbsp;<span class="ident" id="4340250">s</span><span class="op" id="4340251">.</span><span class="ident" id="4340252">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340257">if</span>&nbsp;<span class="ident" id="4340260">ch</span>&nbsp;<span class="op" id="4340263">==</span>&nbsp;<span class="string" id="4340266">&#39;\n&#39;</span>&nbsp;<span class="op" id="4340271">||</span>&nbsp;<span class="ident" id="4340274">ch</span>&nbsp;<span class="op" id="4340277">&lt;</span>&nbsp;<span class="num" id="4340279">0</span>&nbsp;<span class="op" id="4340281">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340286">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;one&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340339">if</span>&nbsp;<span class="ident" id="4340342">valid</span>&nbsp;<span class="op" id="4340348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340354">s</span><span class="op" id="4340355">.</span><span class="builtintype" id="4340356">error</span><span class="op" id="4340361">(</span><span class="ident" id="4340362">offs</span><span class="op" id="4340366">,</span>&nbsp;<span class="string" id="4340368">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4340397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340403">valid</span>&nbsp;<span class="op" id="4340409">=</span>&nbsp;<span class="builtintype" id="4340411">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340420">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340425">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340437">s</span><span class="op" id="4340438">.</span><span class="ident" id="4340439">next</span><span class="op" id="4340443">(</span><span class="op" id="4340444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340448">if</span>&nbsp;<span class="ident" id="4340451">ch</span>&nbsp;<span class="op" id="4340454">==</span>&nbsp;<span class="string" id="4340457">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="4340462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340467">break</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340479">n</span><span class="op" id="4340480">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340485">if</span>&nbsp;<span class="ident" id="4340488">ch</span>&nbsp;<span class="op" id="4340491">==</span>&nbsp;<span class="string" id="4340494">&#39;\\&#39;</span>&nbsp;<span class="op" id="4340499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340504">if</span>&nbsp;<span class="op" id="4340507">!</span><span class="ident" id="4340508">s</span><span class="op" id="4340509">.</span><span class="ident" id="4340510">scanEscape</span><span class="op" id="4340520">(</span><span class="string" id="4340521">&#39;\&#39;&#39;</span><span class="op" id="4340525">)</span>&nbsp;<span class="op" id="4340527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340533">valid</span>&nbsp;<span class="op" id="4340539">=</span>&nbsp;<span class="builtintype" id="4340541">false</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340555">//&nbsp;continue&nbsp;to&nbsp;read&nbsp;to&nbsp;closing&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340601">if</span>&nbsp;<span class="ident" id="4340604">valid</span>&nbsp;<span class="op" id="4340610">&amp;&amp;</span>&nbsp;<span class="ident" id="4340613">n</span>&nbsp;<span class="op" id="4340615">!=</span>&nbsp;<span class="num" id="4340618">1</span>&nbsp;<span class="op" id="4340620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340624">s</span><span class="op" id="4340625">.</span><span class="builtintype" id="4340626">error</span><span class="op" id="4340631">(</span><span class="ident" id="4340632">offs</span><span class="op" id="4340636">,</span>&nbsp;<span class="string" id="4340638">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op" id="4340660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340667">return</span>&nbsp;<span class="builtintype" id="4340674">string</span><span class="op" id="4340680">(</span><span class="ident" id="4340681">s</span><span class="op" id="4340682">.</span><span class="ident" id="4340683">src</span><span class="op" id="4340686">[</span><span class="ident" id="4340687">offs</span><span class="op" id="4340691">:</span><span class="ident" id="4340692">s</span><span class="op" id="4340693">.</span><span class="ident" id="4340694">offset</span><span class="op" id="4340700">]</span><span class="op" id="4340701">)</span><br>
<span class="lineno">455</span><span class="op" id="4340703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4340706">func</span>&nbsp;<span class="op" id="4340711">(</span><span class="ident" id="4340712">s</span>&nbsp;<span class="op" id="4340714">*</span><span class="ident" id="4340715">Scanner</span><span class="op" id="4340722">)</span>&nbsp;<span class="ident" id="4340724">scanString</span><span class="op" id="4340734">(</span><span class="op" id="4340735">)</span>&nbsp;<span class="builtintype" id="4340737">string</span>&nbsp;<span class="op" id="4340744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340747">//&nbsp;&#39;&#34;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340780">offs</span>&nbsp;<span class="op" id="4340785">:=</span>&nbsp;<span class="ident" id="4340788">s</span><span class="op" id="4340789">.</span><span class="ident" id="4340790">offset</span>&nbsp;<span class="op" id="4340797">-</span>&nbsp;<span class="num" id="4340799">1</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340803">for</span>&nbsp;<span class="op" id="4340807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340811">ch</span>&nbsp;<span class="op" id="4340814">:=</span>&nbsp;<span class="ident" id="4340817">s</span><span class="op" id="4340818">.</span><span class="ident" id="4340819">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340824">if</span>&nbsp;<span class="ident" id="4340827">ch</span>&nbsp;<span class="op" id="4340830">==</span>&nbsp;<span class="string" id="4340833">&#39;\n&#39;</span>&nbsp;<span class="op" id="4340838">||</span>&nbsp;<span class="ident" id="4340841">ch</span>&nbsp;<span class="op" id="4340844">&lt;</span>&nbsp;<span class="num" id="4340846">0</span>&nbsp;<span class="op" id="4340848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340853">s</span><span class="op" id="4340854">.</span><span class="builtintype" id="4340855">error</span><span class="op" id="4340860">(</span><span class="ident" id="4340861">offs</span><span class="op" id="4340865">,</span>&nbsp;<span class="string" id="4340867">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4340898">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340903">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340915">s</span><span class="op" id="4340916">.</span><span class="ident" id="4340917">next</span><span class="op" id="4340921">(</span><span class="op" id="4340922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340926">if</span>&nbsp;<span class="ident" id="4340929">ch</span>&nbsp;<span class="op" id="4340932">==</span>&nbsp;<span class="string" id="4340935">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4340939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340944">break</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340956">if</span>&nbsp;<span class="ident" id="4340959">ch</span>&nbsp;<span class="op" id="4340962">==</span>&nbsp;<span class="string" id="4340965">&#39;\\&#39;</span>&nbsp;<span class="op" id="4340970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340975">s</span><span class="op" id="4340976">.</span><span class="ident" id="4340977">scanEscape</span><span class="op" id="4340987">(</span><span class="string" id="4340988">&#39;&#34;&#39;</span><span class="op" id="4340991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340998">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341002">return</span>&nbsp;<span class="builtintype" id="4341009">string</span><span class="op" id="4341015">(</span><span class="ident" id="4341016">s</span><span class="op" id="4341017">.</span><span class="ident" id="4341018">src</span><span class="op" id="4341021">[</span><span class="ident" id="4341022">offs</span><span class="op" id="4341026">:</span><span class="ident" id="4341027">s</span><span class="op" id="4341028">.</span><span class="ident" id="4341029">offset</span><span class="op" id="4341035">]</span><span class="op" id="4341036">)</span><br>
<span class="lineno"></span><span class="op" id="4341038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4341041">func</span>&nbsp;<span class="ident" id="4341046">stripCR</span><span class="op" id="4341053">(</span><span class="ident" id="4341054">b</span>&nbsp;<span class="op" id="4341056">[</span><span class="op" id="4341057">]</span><span class="builtintype" id="4341058">byte</span><span class="op" id="4341062">)</span>&nbsp;<span class="op" id="4341064">[</span><span class="op" id="4341065">]</span><span class="builtintype" id="4341066">byte</span>&nbsp;<span class="op" id="4341071">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341074">c</span>&nbsp;<span class="op" id="4341076">:=</span>&nbsp;<span class="builtinfunc" id="4341079">make</span><span class="op" id="4341083">(</span><span class="op" id="4341084">[</span><span class="op" id="4341085">]</span><span class="builtintype" id="4341086">byte</span><span class="op" id="4341090">,</span>&nbsp;<span class="builtinfunc" id="4341092">len</span><span class="op" id="4341095">(</span><span class="ident" id="4341096">b</span><span class="op" id="4341097">)</span><span class="op" id="4341098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341101">i</span>&nbsp;<span class="op" id="4341103">:=</span>&nbsp;<span class="num" id="4341106">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341109">for</span>&nbsp;<span class="ident" id="4341113">_</span><span class="op" id="4341114">,</span>&nbsp;<span class="ident" id="4341116">ch</span>&nbsp;<span class="op" id="4341119">:=</span>&nbsp;<span class="keyword" id="4341122">range</span>&nbsp;<span class="ident" id="4341128">b</span>&nbsp;<span class="op" id="4341130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341134">if</span>&nbsp;<span class="ident" id="4341137">ch</span>&nbsp;<span class="op" id="4341140">!=</span>&nbsp;<span class="string" id="4341143">&#39;\r&#39;</span>&nbsp;<span class="op" id="4341148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341153">c</span><span class="op" id="4341154">[</span><span class="ident" id="4341155">i</span><span class="op" id="4341156">]</span>&nbsp;<span class="op" id="4341158">=</span>&nbsp;<span class="ident" id="4341160">ch</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341166">i</span><span class="op" id="4341167">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341178">return</span>&nbsp;<span class="ident" id="4341185">c</span><span class="op" id="4341186">[</span><span class="op" id="4341187">:</span><span class="ident" id="4341188">i</span><span class="op" id="4341189">]</span><br>
<span class="lineno"></span><span class="op" id="4341191">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span><span class="keyword" id="4341194">func</span>&nbsp;<span class="op" id="4341199">(</span><span class="ident" id="4341200">s</span>&nbsp;<span class="op" id="4341202">*</span><span class="ident" id="4341203">Scanner</span><span class="op" id="4341210">)</span>&nbsp;<span class="ident" id="4341212">scanRawString</span><span class="op" id="4341225">(</span><span class="op" id="4341226">)</span>&nbsp;<span class="builtintype" id="4341228">string</span>&nbsp;<span class="op" id="4341235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4341238">//&nbsp;&#39;`&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341271">offs</span>&nbsp;<span class="op" id="4341276">:=</span>&nbsp;<span class="ident" id="4341279">s</span><span class="op" id="4341280">.</span><span class="ident" id="4341281">offset</span>&nbsp;<span class="op" id="4341288">-</span>&nbsp;<span class="num" id="4341290">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341294">hasCR</span>&nbsp;<span class="op" id="4341300">:=</span>&nbsp;<span class="builtintype" id="4341303">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341310">for</span>&nbsp;<span class="op" id="4341314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341318">ch</span>&nbsp;<span class="op" id="4341321">:=</span>&nbsp;<span class="ident" id="4341324">s</span><span class="op" id="4341325">.</span><span class="ident" id="4341326">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341331">if</span>&nbsp;<span class="ident" id="4341334">ch</span>&nbsp;<span class="op" id="4341337">&lt;</span>&nbsp;<span class="num" id="4341339">0</span>&nbsp;<span class="op" id="4341341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341346">s</span><span class="op" id="4341347">.</span><span class="builtintype" id="4341348">error</span><span class="op" id="4341353">(</span><span class="ident" id="4341354">offs</span><span class="op" id="4341358">,</span>&nbsp;<span class="string" id="4341360">&#34;raw&nbsp;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4341395">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341400">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341412">s</span><span class="op" id="4341413">.</span><span class="ident" id="4341414">next</span><span class="op" id="4341418">(</span><span class="op" id="4341419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341423">if</span>&nbsp;<span class="ident" id="4341426">ch</span>&nbsp;<span class="op" id="4341429">==</span>&nbsp;<span class="string" id="4341432">&#39;`&#39;</span>&nbsp;<span class="op" id="4341436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341441">break</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341453">if</span>&nbsp;<span class="ident" id="4341456">ch</span>&nbsp;<span class="op" id="4341459">==</span>&nbsp;<span class="string" id="4341462">&#39;\r&#39;</span>&nbsp;<span class="op" id="4341467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341472">hasCR</span>&nbsp;<span class="op" id="4341478">=</span>&nbsp;<span class="builtintype" id="4341480">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341490">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341494">lit</span>&nbsp;<span class="op" id="4341498">:=</span>&nbsp;<span class="ident" id="4341501">s</span><span class="op" id="4341502">.</span><span class="ident" id="4341503">src</span><span class="op" id="4341506">[</span><span class="ident" id="4341507">offs</span><span class="op" id="4341511">:</span><span class="ident" id="4341512">s</span><span class="op" id="4341513">.</span><span class="ident" id="4341514">offset</span><span class="op" id="4341520">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341523">if</span>&nbsp;<span class="ident" id="4341526">hasCR</span>&nbsp;<span class="op" id="4341532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341536">lit</span>&nbsp;<span class="op" id="4341540">=</span>&nbsp;<span class="ident" id="4341542">stripCR</span><span class="op" id="4341549">(</span><span class="ident" id="4341550">lit</span><span class="op" id="4341553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341556">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341560">return</span>&nbsp;<span class="builtintype" id="4341567">string</span><span class="op" id="4341573">(</span><span class="ident" id="4341574">lit</span><span class="op" id="4341577">)</span><br>
<span class="lineno"></span><span class="op" id="4341579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4341582">func</span>&nbsp;<span class="op" id="4341587">(</span><span class="ident" id="4341588">s</span>&nbsp;<span class="op" id="4341590">*</span><span class="ident" id="4341591">Scanner</span><span class="op" id="4341598">)</span>&nbsp;<span class="ident" id="4341600">skipWhitespace</span><span class="op" id="4341614">(</span><span class="op" id="4341615">)</span>&nbsp;<span class="op" id="4341617">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341620">for</span>&nbsp;<span class="ident" id="4341624">s</span><span class="op" id="4341625">.</span><span class="ident" id="4341626">ch</span>&nbsp;<span class="op" id="4341629">==</span>&nbsp;<span class="string" id="4341632">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4341636">||</span>&nbsp;<span class="ident" id="4341639">s</span><span class="op" id="4341640">.</span><span class="ident" id="4341641">ch</span>&nbsp;<span class="op" id="4341644">==</span>&nbsp;<span class="string" id="4341647">&#39;\t&#39;</span>&nbsp;<span class="op" id="4341652">||</span>&nbsp;<span class="ident" id="4341655">s</span><span class="op" id="4341656">.</span><span class="ident" id="4341657">ch</span>&nbsp;<span class="op" id="4341660">==</span>&nbsp;<span class="string" id="4341663">&#39;\n&#39;</span>&nbsp;<span class="op" id="4341668">&amp;&amp;</span>&nbsp;<span class="op" id="4341671">!</span><span class="ident" id="4341672">s</span><span class="op" id="4341673">.</span><span class="ident" id="4341674">insertSemi</span>&nbsp;<span class="op" id="4341685">||</span>&nbsp;<span class="ident" id="4341688">s</span><span class="op" id="4341689">.</span><span class="ident" id="4341690">ch</span>&nbsp;<span class="op" id="4341693">==</span>&nbsp;<span class="string" id="4341696">&#39;\r&#39;</span>&nbsp;<span class="op" id="4341701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341705">s</span><span class="op" id="4341706">.</span><span class="ident" id="4341707">next</span><span class="op" id="4341711">(</span><span class="op" id="4341712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341715">}</span><br>
<span class="lineno"></span><span class="op" id="4341717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="4341720">//&nbsp;Helper&nbsp;functions&nbsp;for&nbsp;scanning&nbsp;multi-byte&nbsp;tokens&nbsp;such&nbsp;as&nbsp;&gt;&gt;&nbsp;+=&nbsp;&gt;&gt;=&nbsp;.</span><br>
<span class="lineno"></span><span class="comment" id="4341791">//&nbsp;Different&nbsp;routines&nbsp;recognize&nbsp;different&nbsp;length&nbsp;tok_i&nbsp;based&nbsp;on&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="4341863">//&nbsp;of&nbsp;ch_i.&nbsp;If&nbsp;a&nbsp;token&nbsp;ends&nbsp;in&nbsp;&#39;=&#39;,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok1&nbsp;or&nbsp;tok3</span><br>
<span class="lineno"></span><span class="comment" id="4341926">//&nbsp;respectively.&nbsp;Otherwise,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok0&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;other</span><br>
<span class="lineno"></span><span class="comment" id="4341995">//&nbsp;matching&nbsp;character,&nbsp;or&nbsp;tok2&nbsp;if&nbsp;the&nbsp;matching&nbsp;character&nbsp;was&nbsp;ch2.</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span><span class="keyword" id="4342062">func</span>&nbsp;<span class="op" id="4342067">(</span><span class="ident" id="4342068">s</span>&nbsp;<span class="op" id="4342070">*</span><span class="ident" id="4342071">Scanner</span><span class="op" id="4342078">)</span>&nbsp;<span class="ident" id="4342080">switch2</span><span class="op" id="4342087">(</span><span class="ident" id="4342088">tok0</span><span class="op" id="4342092">,</span>&nbsp;<span class="ident" id="4342094">tok1</span>&nbsp;<span class="ident" id="4342099">token</span><span class="op" id="4342104">.</span><span class="ident" id="4342105">Token</span><span class="op" id="4342110">)</span>&nbsp;<span class="ident" id="4342112">token</span><span class="op" id="4342117">.</span><span class="ident" id="4342118">Token</span>&nbsp;<span class="op" id="4342124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342127">if</span>&nbsp;<span class="ident" id="4342130">s</span><span class="op" id="4342131">.</span><span class="ident" id="4342132">ch</span>&nbsp;<span class="op" id="4342135">==</span>&nbsp;<span class="string" id="4342138">&#39;=&#39;</span>&nbsp;<span class="op" id="4342142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342146">s</span><span class="op" id="4342147">.</span><span class="ident" id="4342148">next</span><span class="op" id="4342152">(</span><span class="op" id="4342153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342157">return</span>&nbsp;<span class="ident" id="4342164">tok1</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342173">return</span>&nbsp;<span class="ident" id="4342180">tok0</span><br>
<span class="lineno"></span><span class="op" id="4342185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4342188">func</span>&nbsp;<span class="op" id="4342193">(</span><span class="ident" id="4342194">s</span>&nbsp;<span class="op" id="4342196">*</span><span class="ident" id="4342197">Scanner</span><span class="op" id="4342204">)</span>&nbsp;<span class="ident" id="4342206">switch3</span><span class="op" id="4342213">(</span><span class="ident" id="4342214">tok0</span><span class="op" id="4342218">,</span>&nbsp;<span class="ident" id="4342220">tok1</span>&nbsp;<span class="ident" id="4342225">token</span><span class="op" id="4342230">.</span><span class="ident" id="4342231">Token</span><span class="op" id="4342236">,</span>&nbsp;<span class="ident" id="4342238">ch2</span>&nbsp;<span class="builtintype" id="4342242">rune</span><span class="op" id="4342246">,</span>&nbsp;<span class="ident" id="4342248">tok2</span>&nbsp;<span class="ident" id="4342253">token</span><span class="op" id="4342258">.</span><span class="ident" id="4342259">Token</span><span class="op" id="4342264">)</span>&nbsp;<span class="ident" id="4342266">token</span><span class="op" id="4342271">.</span><span class="ident" id="4342272">Token</span>&nbsp;<span class="op" id="4342278">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342281">if</span>&nbsp;<span class="ident" id="4342284">s</span><span class="op" id="4342285">.</span><span class="ident" id="4342286">ch</span>&nbsp;<span class="op" id="4342289">==</span>&nbsp;<span class="string" id="4342292">&#39;=&#39;</span>&nbsp;<span class="op" id="4342296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342300">s</span><span class="op" id="4342301">.</span><span class="ident" id="4342302">next</span><span class="op" id="4342306">(</span><span class="op" id="4342307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342311">return</span>&nbsp;<span class="ident" id="4342318">tok1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342327">if</span>&nbsp;<span class="ident" id="4342330">s</span><span class="op" id="4342331">.</span><span class="ident" id="4342332">ch</span>&nbsp;<span class="op" id="4342335">==</span>&nbsp;<span class="ident" id="4342338">ch2</span>&nbsp;<span class="op" id="4342342">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342346">s</span><span class="op" id="4342347">.</span><span class="ident" id="4342348">next</span><span class="op" id="4342352">(</span><span class="op" id="4342353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342357">return</span>&nbsp;<span class="ident" id="4342364">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342373">return</span>&nbsp;<span class="ident" id="4342380">tok0</span><br>
<span class="lineno"></span><span class="op" id="4342385">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="keyword" id="4342388">func</span>&nbsp;<span class="op" id="4342393">(</span><span class="ident" id="4342394">s</span>&nbsp;<span class="op" id="4342396">*</span><span class="ident" id="4342397">Scanner</span><span class="op" id="4342404">)</span>&nbsp;<span class="ident" id="4342406">switch4</span><span class="op" id="4342413">(</span><span class="ident" id="4342414">tok0</span><span class="op" id="4342418">,</span>&nbsp;<span class="ident" id="4342420">tok1</span>&nbsp;<span class="ident" id="4342425">token</span><span class="op" id="4342430">.</span><span class="ident" id="4342431">Token</span><span class="op" id="4342436">,</span>&nbsp;<span class="ident" id="4342438">ch2</span>&nbsp;<span class="builtintype" id="4342442">rune</span><span class="op" id="4342446">,</span>&nbsp;<span class="ident" id="4342448">tok2</span><span class="op" id="4342452">,</span>&nbsp;<span class="ident" id="4342454">tok3</span>&nbsp;<span class="ident" id="4342459">token</span><span class="op" id="4342464">.</span><span class="ident" id="4342465">Token</span><span class="op" id="4342470">)</span>&nbsp;<span class="ident" id="4342472">token</span><span class="op" id="4342477">.</span><span class="ident" id="4342478">Token</span>&nbsp;<span class="op" id="4342484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342487">if</span>&nbsp;<span class="ident" id="4342490">s</span><span class="op" id="4342491">.</span><span class="ident" id="4342492">ch</span>&nbsp;<span class="op" id="4342495">==</span>&nbsp;<span class="string" id="4342498">&#39;=&#39;</span>&nbsp;<span class="op" id="4342502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342506">s</span><span class="op" id="4342507">.</span><span class="ident" id="4342508">next</span><span class="op" id="4342512">(</span><span class="op" id="4342513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342517">return</span>&nbsp;<span class="ident" id="4342524">tok1</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342533">if</span>&nbsp;<span class="ident" id="4342536">s</span><span class="op" id="4342537">.</span><span class="ident" id="4342538">ch</span>&nbsp;<span class="op" id="4342541">==</span>&nbsp;<span class="ident" id="4342544">ch2</span>&nbsp;<span class="op" id="4342548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342552">s</span><span class="op" id="4342553">.</span><span class="ident" id="4342554">next</span><span class="op" id="4342558">(</span><span class="op" id="4342559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342563">if</span>&nbsp;<span class="ident" id="4342566">s</span><span class="op" id="4342567">.</span><span class="ident" id="4342568">ch</span>&nbsp;<span class="op" id="4342571">==</span>&nbsp;<span class="string" id="4342574">&#39;=&#39;</span>&nbsp;<span class="op" id="4342578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4342583">s</span><span class="op" id="4342584">.</span><span class="ident" id="4342585">next</span><span class="op" id="4342589">(</span><span class="op" id="4342590">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342595">return</span>&nbsp;<span class="ident" id="4342602">tok3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342613">return</span>&nbsp;<span class="ident" id="4342620">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4342626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4342629">return</span>&nbsp;<span class="ident" id="4342636">tok0</span><br>
<span class="lineno">565</span><span class="op" id="4342641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4342644">//&nbsp;Scan&nbsp;scans&nbsp;the&nbsp;next&nbsp;token&nbsp;and&nbsp;returns&nbsp;the&nbsp;token&nbsp;position,&nbsp;the&nbsp;token,</span><br>
<span class="lineno"></span><span class="comment" id="4342716">//&nbsp;and&nbsp;its&nbsp;literal&nbsp;string&nbsp;if&nbsp;applicable.&nbsp;The&nbsp;source&nbsp;end&nbsp;is&nbsp;indicated&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4342788">//&nbsp;token.EOF.</span><br>
<span class="lineno">570</span><span class="comment" id="4342802">//</span><br>
<span class="lineno"></span><span class="comment" id="4342805">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;literal&nbsp;(token.IDENT,&nbsp;token.INT,&nbsp;token.FLOAT,</span><br>
<span class="lineno"></span><span class="comment" id="4342881">//&nbsp;token.IMAG,&nbsp;token.CHAR,&nbsp;token.STRING)&nbsp;or&nbsp;token.COMMENT,&nbsp;the&nbsp;literal&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="4342959">//&nbsp;has&nbsp;the&nbsp;corresponding&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4342991">//</span><br>
<span class="lineno">575</span><span class="comment" id="4342994">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;keyword,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the&nbsp;keyword.</span><br>
<span class="lineno"></span><span class="comment" id="4343068">//</span><br>
<span class="lineno"></span><span class="comment" id="4343071">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.SEMICOLON,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="4343134">//&nbsp;literal&nbsp;string&nbsp;is&nbsp;&#34;;&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;present&nbsp;in&nbsp;the&nbsp;source,</span><br>
<span class="lineno"></span><span class="comment" id="4343203">//&nbsp;and&nbsp;&#34;\n&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;inserted&nbsp;because&nbsp;of&nbsp;a&nbsp;newline&nbsp;or</span><br>
<span class="lineno">580</span><span class="comment" id="4343269">//&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="4343280">//</span><br>
<span class="lineno"></span><span class="comment" id="4343283">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.ILLEGAL,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4343352">//&nbsp;offending&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="4343376">//</span><br>
<span class="lineno">585</span><span class="comment" id="4343379">//&nbsp;In&nbsp;all&nbsp;other&nbsp;cases,&nbsp;Scan&nbsp;returns&nbsp;an&nbsp;empty&nbsp;literal&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="4343440">//</span><br>
<span class="lineno"></span><span class="comment" id="4343443">//&nbsp;For&nbsp;more&nbsp;tolerant&nbsp;parsing,&nbsp;Scan&nbsp;will&nbsp;return&nbsp;a&nbsp;valid&nbsp;token&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="4343507">//&nbsp;possible&nbsp;even&nbsp;if&nbsp;a&nbsp;syntax&nbsp;error&nbsp;was&nbsp;encountered.&nbsp;Thus,&nbsp;even</span><br>
<span class="lineno"></span><span class="comment" id="4343570">//&nbsp;if&nbsp;the&nbsp;resulting&nbsp;token&nbsp;sequence&nbsp;contains&nbsp;no&nbsp;illegal&nbsp;tokens,</span><br>
<span class="lineno">590</span><span class="comment" id="4343633">//&nbsp;a&nbsp;client&nbsp;may&nbsp;not&nbsp;assume&nbsp;that&nbsp;no&nbsp;error&nbsp;occurred.&nbsp;Instead&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="4343695">//&nbsp;must&nbsp;check&nbsp;the&nbsp;scanner&#39;s&nbsp;ErrorCount&nbsp;or&nbsp;the&nbsp;number&nbsp;of&nbsp;calls</span><br>
<span class="lineno"></span><span class="comment" id="4343757">//&nbsp;of&nbsp;the&nbsp;error&nbsp;handler,&nbsp;if&nbsp;there&nbsp;was&nbsp;one&nbsp;installed.</span><br>
<span class="lineno"></span><span class="comment" id="4343810">//</span><br>
<span class="lineno"></span><span class="comment" id="4343813">//&nbsp;Scan&nbsp;adds&nbsp;line&nbsp;information&nbsp;to&nbsp;the&nbsp;file&nbsp;added&nbsp;to&nbsp;the&nbsp;file</span><br>
<span class="lineno">595</span><span class="comment" id="4343873">//&nbsp;set&nbsp;with&nbsp;Init.&nbsp;Token&nbsp;positions&nbsp;are&nbsp;relative&nbsp;to&nbsp;that&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="4343933">//&nbsp;and&nbsp;thus&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set.</span><br>
<span class="lineno"></span><span class="comment" id="4343971">//</span><br>
<span class="lineno"></span><span class="keyword" id="4343974">func</span>&nbsp;<span class="op" id="4343979">(</span><span class="ident" id="4343980">s</span>&nbsp;<span class="op" id="4343982">*</span><span class="ident" id="4343983">Scanner</span><span class="op" id="4343990">)</span>&nbsp;<span class="ident" id="4343992">Scan</span><span class="op" id="4343996">(</span><span class="op" id="4343997">)</span>&nbsp;<span class="op" id="4343999">(</span><span class="ident" id="4344000">pos</span>&nbsp;<span class="ident" id="4344004">token</span><span class="op" id="4344009">.</span><span class="ident" id="4344010">Pos</span><span class="op" id="4344013">,</span>&nbsp;<span class="ident" id="4344015">tok</span>&nbsp;<span class="ident" id="4344019">token</span><span class="op" id="4344024">.</span><span class="ident" id="4344025">Token</span><span class="op" id="4344030">,</span>&nbsp;<span class="ident" id="4344032">lit</span>&nbsp;<span class="builtintype" id="4344036">string</span><span class="op" id="4344042">)</span>&nbsp;<span class="op" id="4344044">{</span><br>
<span class="lineno"></span><span class="ident" id="4344046">scanAgain</span><span class="op" id="4344055">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344058">s</span><span class="op" id="4344059">.</span><span class="ident" id="4344060">skipWhitespace</span><span class="op" id="4344074">(</span><span class="op" id="4344075">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4344079">//&nbsp;current&nbsp;token&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344103">pos</span>&nbsp;<span class="op" id="4344107">=</span>&nbsp;<span class="ident" id="4344109">s</span><span class="op" id="4344110">.</span><span class="ident" id="4344111">file</span><span class="op" id="4344115">.</span><span class="ident" id="4344116">Pos</span><span class="op" id="4344119">(</span><span class="ident" id="4344120">s</span><span class="op" id="4344121">.</span><span class="ident" id="4344122">offset</span><span class="op" id="4344128">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4344132">//&nbsp;determine&nbsp;token&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344158">insertSemi</span>&nbsp;<span class="op" id="4344169">:=</span>&nbsp;<span class="builtintype" id="4344172">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344179">switch</span>&nbsp;<span class="ident" id="4344186">ch</span>&nbsp;<span class="op" id="4344189">:=</span>&nbsp;<span class="ident" id="4344192">s</span><span class="op" id="4344193">.</span><span class="ident" id="4344194">ch</span><span class="op" id="4344196">;</span>&nbsp;<span class="op" id="4344198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344201">case</span>&nbsp;<span class="ident" id="4344206">isLetter</span><span class="op" id="4344214">(</span><span class="ident" id="4344215">ch</span><span class="op" id="4344217">)</span><span class="op" id="4344218">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344222">lit</span>&nbsp;<span class="op" id="4344226">=</span>&nbsp;<span class="ident" id="4344228">s</span><span class="op" id="4344229">.</span><span class="ident" id="4344230">scanIdentifier</span><span class="op" id="4344244">(</span><span class="op" id="4344245">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344249">if</span>&nbsp;<span class="builtinfunc" id="4344252">len</span><span class="op" id="4344255">(</span><span class="ident" id="4344256">lit</span><span class="op" id="4344259">)</span>&nbsp;<span class="op" id="4344261">&gt;</span>&nbsp;<span class="num" id="4344263">1</span>&nbsp;<span class="op" id="4344265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4344270">//&nbsp;keywords&nbsp;are&nbsp;longer&nbsp;than&nbsp;one&nbsp;letter&nbsp;-&nbsp;avoid&nbsp;lookup&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344337">tok</span>&nbsp;<span class="op" id="4344341">=</span>&nbsp;<span class="ident" id="4344343">token</span><span class="op" id="4344348">.</span><span class="ident" id="4344349">Lookup</span><span class="op" id="4344355">(</span><span class="ident" id="4344356">lit</span><span class="op" id="4344359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344364">switch</span>&nbsp;<span class="ident" id="4344371">tok</span>&nbsp;<span class="op" id="4344375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344380">case</span>&nbsp;<span class="ident" id="4344385">token</span><span class="op" id="4344390">.</span><span class="ident" id="4344391">IDENT</span><span class="op" id="4344396">,</span>&nbsp;<span class="ident" id="4344398">token</span><span class="op" id="4344403">.</span><span class="ident" id="4344404">BREAK</span><span class="op" id="4344409">,</span>&nbsp;<span class="ident" id="4344411">token</span><span class="op" id="4344416">.</span><span class="ident" id="4344417">CONTINUE</span><span class="op" id="4344425">,</span>&nbsp;<span class="ident" id="4344427">token</span><span class="op" id="4344432">.</span><span class="ident" id="4344433">FALLTHROUGH</span><span class="op" id="4344444">,</span>&nbsp;<span class="ident" id="4344446">token</span><span class="op" id="4344451">.</span><span class="ident" id="4344452">RETURN</span><span class="op" id="4344458">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344464">insertSemi</span>&nbsp;<span class="op" id="4344475">=</span>&nbsp;<span class="builtintype" id="4344477">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4344485">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4344489">}</span>&nbsp;<span class="keyword" id="4344491">else</span>&nbsp;<span class="op" id="4344496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344501">insertSemi</span>&nbsp;<span class="op" id="4344512">=</span>&nbsp;<span class="builtintype" id="4344514">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344522">tok</span>&nbsp;<span class="op" id="4344526">=</span>&nbsp;<span class="ident" id="4344528">token</span><span class="op" id="4344533">.</span><span class="ident" id="4344534">IDENT</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4344542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344545">case</span>&nbsp;<span class="string" id="4344550">&#39;0&#39;</span>&nbsp;<span class="op" id="4344554">&lt;=</span>&nbsp;<span class="ident" id="4344557">ch</span>&nbsp;<span class="op" id="4344560">&amp;&amp;</span>&nbsp;<span class="ident" id="4344563">ch</span>&nbsp;<span class="op" id="4344566">&lt;=</span>&nbsp;<span class="string" id="4344569">&#39;9&#39;</span><span class="op" id="4344572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344576">insertSemi</span>&nbsp;<span class="op" id="4344587">=</span>&nbsp;<span class="builtintype" id="4344589">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344596">tok</span><span class="op" id="4344599">,</span>&nbsp;<span class="ident" id="4344601">lit</span>&nbsp;<span class="op" id="4344605">=</span>&nbsp;<span class="ident" id="4344607">s</span><span class="op" id="4344608">.</span><span class="ident" id="4344609">scanNumber</span><span class="op" id="4344619">(</span><span class="builtintype" id="4344620">false</span><span class="op" id="4344625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344628">default</span><span class="op" id="4344635">:</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344639">s</span><span class="op" id="4344640">.</span><span class="ident" id="4344641">next</span><span class="op" id="4344645">(</span><span class="op" id="4344646">)</span>&nbsp;<span class="comment" id="4344648">//&nbsp;always&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344674">switch</span>&nbsp;<span class="ident" id="4344681">ch</span>&nbsp;<span class="op" id="4344684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344688">case</span>&nbsp;<span class="op" id="4344693">-</span><span class="num" id="4344694">1</span><span class="op" id="4344695">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344700">if</span>&nbsp;<span class="ident" id="4344703">s</span><span class="op" id="4344704">.</span><span class="ident" id="4344705">insertSemi</span>&nbsp;<span class="op" id="4344716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344722">s</span><span class="op" id="4344723">.</span><span class="ident" id="4344724">insertSemi</span>&nbsp;<span class="op" id="4344735">=</span>&nbsp;<span class="builtintype" id="4344737">false</span>&nbsp;<span class="comment" id="4344743">//&nbsp;EOF&nbsp;consumed</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344763">return</span>&nbsp;<span class="ident" id="4344770">pos</span><span class="op" id="4344773">,</span>&nbsp;<span class="ident" id="4344775">token</span><span class="op" id="4344780">.</span><span class="ident" id="4344781">SEMICOLON</span><span class="op" id="4344790">,</span>&nbsp;<span class="string" id="4344792">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4344800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344805">tok</span>&nbsp;<span class="op" id="4344809">=</span>&nbsp;<span class="ident" id="4344811">token</span><span class="op" id="4344816">.</span><span class="ident" id="4344817">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4344823">case</span>&nbsp;<span class="string" id="4344828">&#39;\n&#39;</span><span class="op" id="4344832">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4344837">//&nbsp;we&nbsp;only&nbsp;reach&nbsp;here&nbsp;if&nbsp;s.insertSemi&nbsp;was</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4344882">//&nbsp;set&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;and&nbsp;exited&nbsp;early</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4344928">//&nbsp;from&nbsp;s.skipWhitespace()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344958">s</span><span class="op" id="4344959">.</span><span class="ident" id="4344960">insertSemi</span>&nbsp;<span class="op" id="4344971">=</span>&nbsp;<span class="builtintype" id="4344973">false</span>&nbsp;<span class="comment" id="4344979">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345002">return</span>&nbsp;<span class="ident" id="4345009">pos</span><span class="op" id="4345012">,</span>&nbsp;<span class="ident" id="4345014">token</span><span class="op" id="4345019">.</span><span class="ident" id="4345020">SEMICOLON</span><span class="op" id="4345029">,</span>&nbsp;<span class="string" id="4345031">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345038">case</span>&nbsp;<span class="string" id="4345043">&#39;&#34;&#39;</span><span class="op" id="4345046">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345051">insertSemi</span>&nbsp;<span class="op" id="4345062">=</span>&nbsp;<span class="builtintype" id="4345064">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345072">tok</span>&nbsp;<span class="op" id="4345076">=</span>&nbsp;<span class="ident" id="4345078">token</span><span class="op" id="4345083">.</span><span class="ident" id="4345084">STRING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345094">lit</span>&nbsp;<span class="op" id="4345098">=</span>&nbsp;<span class="ident" id="4345100">s</span><span class="op" id="4345101">.</span><span class="ident" id="4345102">scanString</span><span class="op" id="4345112">(</span><span class="op" id="4345113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345117">case</span>&nbsp;<span class="string" id="4345122">&#39;\&#39;&#39;</span><span class="op" id="4345126">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345131">insertSemi</span>&nbsp;<span class="op" id="4345142">=</span>&nbsp;<span class="builtintype" id="4345144">true</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345152">tok</span>&nbsp;<span class="op" id="4345156">=</span>&nbsp;<span class="ident" id="4345158">token</span><span class="op" id="4345163">.</span><span class="ident" id="4345164">CHAR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345172">lit</span>&nbsp;<span class="op" id="4345176">=</span>&nbsp;<span class="ident" id="4345178">s</span><span class="op" id="4345179">.</span><span class="ident" id="4345180">scanRune</span><span class="op" id="4345188">(</span><span class="op" id="4345189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345193">case</span>&nbsp;<span class="string" id="4345198">&#39;`&#39;</span><span class="op" id="4345201">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345206">insertSemi</span>&nbsp;<span class="op" id="4345217">=</span>&nbsp;<span class="builtintype" id="4345219">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345227">tok</span>&nbsp;<span class="op" id="4345231">=</span>&nbsp;<span class="ident" id="4345233">token</span><span class="op" id="4345238">.</span><span class="ident" id="4345239">STRING</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345249">lit</span>&nbsp;<span class="op" id="4345253">=</span>&nbsp;<span class="ident" id="4345255">s</span><span class="op" id="4345256">.</span><span class="ident" id="4345257">scanRawString</span><span class="op" id="4345270">(</span><span class="op" id="4345271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345275">case</span>&nbsp;<span class="string" id="4345280">&#39;:&#39;</span><span class="op" id="4345283">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345288">tok</span>&nbsp;<span class="op" id="4345292">=</span>&nbsp;<span class="ident" id="4345294">s</span><span class="op" id="4345295">.</span><span class="ident" id="4345296">switch2</span><span class="op" id="4345303">(</span><span class="ident" id="4345304">token</span><span class="op" id="4345309">.</span><span class="ident" id="4345310">COLON</span><span class="op" id="4345315">,</span>&nbsp;<span class="ident" id="4345317">token</span><span class="op" id="4345322">.</span><span class="ident" id="4345323">DEFINE</span><span class="op" id="4345329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345333">case</span>&nbsp;<span class="string" id="4345338">&#39;.&#39;</span><span class="op" id="4345341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345346">if</span>&nbsp;<span class="string" id="4345349">&#39;0&#39;</span>&nbsp;<span class="op" id="4345353">&lt;=</span>&nbsp;<span class="ident" id="4345356">s</span><span class="op" id="4345357">.</span><span class="ident" id="4345358">ch</span>&nbsp;<span class="op" id="4345361">&amp;&amp;</span>&nbsp;<span class="ident" id="4345364">s</span><span class="op" id="4345365">.</span><span class="ident" id="4345366">ch</span>&nbsp;<span class="op" id="4345369">&lt;=</span>&nbsp;<span class="string" id="4345372">&#39;9&#39;</span>&nbsp;<span class="op" id="4345376">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345382">insertSemi</span>&nbsp;<span class="op" id="4345393">=</span>&nbsp;<span class="builtintype" id="4345395">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345404">tok</span><span class="op" id="4345407">,</span>&nbsp;<span class="ident" id="4345409">lit</span>&nbsp;<span class="op" id="4345413">=</span>&nbsp;<span class="ident" id="4345415">s</span><span class="op" id="4345416">.</span><span class="ident" id="4345417">scanNumber</span><span class="op" id="4345427">(</span><span class="builtintype" id="4345428">true</span><span class="op" id="4345432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4345437">}</span>&nbsp;<span class="keyword" id="4345439">else</span>&nbsp;<span class="keyword" id="4345444">if</span>&nbsp;<span class="ident" id="4345447">s</span><span class="op" id="4345448">.</span><span class="ident" id="4345449">ch</span>&nbsp;<span class="op" id="4345452">==</span>&nbsp;<span class="string" id="4345455">&#39;.&#39;</span>&nbsp;<span class="op" id="4345459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345465">s</span><span class="op" id="4345466">.</span><span class="ident" id="4345467">next</span><span class="op" id="4345471">(</span><span class="op" id="4345472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345478">if</span>&nbsp;<span class="ident" id="4345481">s</span><span class="op" id="4345482">.</span><span class="ident" id="4345483">ch</span>&nbsp;<span class="op" id="4345486">==</span>&nbsp;<span class="string" id="4345489">&#39;.&#39;</span>&nbsp;<span class="op" id="4345493">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345500">s</span><span class="op" id="4345501">.</span><span class="ident" id="4345502">next</span><span class="op" id="4345506">(</span><span class="op" id="4345507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345514">tok</span>&nbsp;<span class="op" id="4345518">=</span>&nbsp;<span class="ident" id="4345520">token</span><span class="op" id="4345525">.</span><span class="ident" id="4345526">ELLIPSIS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4345539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4345544">}</span>&nbsp;<span class="keyword" id="4345546">else</span>&nbsp;<span class="op" id="4345551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345557">tok</span>&nbsp;<span class="op" id="4345561">=</span>&nbsp;<span class="ident" id="4345563">token</span><span class="op" id="4345568">.</span><span class="ident" id="4345569">PERIOD</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4345579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345583">case</span>&nbsp;<span class="string" id="4345588">&#39;,&#39;</span><span class="op" id="4345591">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345596">tok</span>&nbsp;<span class="op" id="4345600">=</span>&nbsp;<span class="ident" id="4345602">token</span><span class="op" id="4345607">.</span><span class="ident" id="4345608">COMMA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345616">case</span>&nbsp;<span class="string" id="4345621">&#39;;&#39;</span><span class="op" id="4345624">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345629">tok</span>&nbsp;<span class="op" id="4345633">=</span>&nbsp;<span class="ident" id="4345635">token</span><span class="op" id="4345640">.</span><span class="ident" id="4345641">SEMICOLON</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345654">lit</span>&nbsp;<span class="op" id="4345658">=</span>&nbsp;<span class="string" id="4345660">&#34;;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345666">case</span>&nbsp;<span class="string" id="4345671">&#39;(&#39;</span><span class="op" id="4345674">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345679">tok</span>&nbsp;<span class="op" id="4345683">=</span>&nbsp;<span class="ident" id="4345685">token</span><span class="op" id="4345690">.</span><span class="ident" id="4345691">LPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345700">case</span>&nbsp;<span class="string" id="4345705">&#39;)&#39;</span><span class="op" id="4345708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345713">insertSemi</span>&nbsp;<span class="op" id="4345724">=</span>&nbsp;<span class="builtintype" id="4345726">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345734">tok</span>&nbsp;<span class="op" id="4345738">=</span>&nbsp;<span class="ident" id="4345740">token</span><span class="op" id="4345745">.</span><span class="ident" id="4345746">RPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345755">case</span>&nbsp;<span class="string" id="4345760">&#39;[&#39;</span><span class="op" id="4345763">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345768">tok</span>&nbsp;<span class="op" id="4345772">=</span>&nbsp;<span class="ident" id="4345774">token</span><span class="op" id="4345779">.</span><span class="ident" id="4345780">LBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345789">case</span>&nbsp;<span class="string" id="4345794">&#39;]&#39;</span><span class="op" id="4345797">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345802">insertSemi</span>&nbsp;<span class="op" id="4345813">=</span>&nbsp;<span class="builtintype" id="4345815">true</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345823">tok</span>&nbsp;<span class="op" id="4345827">=</span>&nbsp;<span class="ident" id="4345829">token</span><span class="op" id="4345834">.</span><span class="ident" id="4345835">RBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345844">case</span>&nbsp;<span class="string" id="4345849">&#39;{&#39;</span><span class="op" id="4345852">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345857">tok</span>&nbsp;<span class="op" id="4345861">=</span>&nbsp;<span class="ident" id="4345863">token</span><span class="op" id="4345868">.</span><span class="ident" id="4345869">LBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345878">case</span>&nbsp;<span class="string" id="4345883">&#39;}&#39;</span><span class="op" id="4345886">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345891">insertSemi</span>&nbsp;<span class="op" id="4345902">=</span>&nbsp;<span class="builtintype" id="4345904">true</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345912">tok</span>&nbsp;<span class="op" id="4345916">=</span>&nbsp;<span class="ident" id="4345918">token</span><span class="op" id="4345923">.</span><span class="ident" id="4345924">RBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4345933">case</span>&nbsp;<span class="string" id="4345938">&#39;+&#39;</span><span class="op" id="4345941">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4345946">tok</span>&nbsp;<span class="op" id="4345950">=</span>&nbsp;<span class="ident" id="4345952">s</span><span class="op" id="4345953">.</span><span class="ident" id="4345954">switch3</span><span class="op" id="4345961">(</span><span class="ident" id="4345962">token</span><span class="op" id="4345967">.</span><span class="ident" id="4345968">ADD</span><span class="op" id="4345971">,</span>&nbsp;<span class="ident" id="4345973">token</span><span class="op" id="4345978">.</span><span class="ident" id="4345979">ADD_ASSIGN</span><span class="op" id="4345989">,</span>&nbsp;<span class="string" id="4345991">&#39;+&#39;</span><span class="op" id="4345994">,</span>&nbsp;<span class="ident" id="4345996">token</span><span class="op" id="4346001">.</span><span class="ident" id="4346002">INC</span><span class="op" id="4346005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346010">if</span>&nbsp;<span class="ident" id="4346013">tok</span>&nbsp;<span class="op" id="4346017">==</span>&nbsp;<span class="ident" id="4346020">token</span><span class="op" id="4346025">.</span><span class="ident" id="4346026">INC</span>&nbsp;<span class="op" id="4346030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346036">insertSemi</span>&nbsp;<span class="op" id="4346047">=</span>&nbsp;<span class="builtintype" id="4346049">true</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4346057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346061">case</span>&nbsp;<span class="string" id="4346066">&#39;-&#39;</span><span class="op" id="4346069">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346074">tok</span>&nbsp;<span class="op" id="4346078">=</span>&nbsp;<span class="ident" id="4346080">s</span><span class="op" id="4346081">.</span><span class="ident" id="4346082">switch3</span><span class="op" id="4346089">(</span><span class="ident" id="4346090">token</span><span class="op" id="4346095">.</span><span class="ident" id="4346096">SUB</span><span class="op" id="4346099">,</span>&nbsp;<span class="ident" id="4346101">token</span><span class="op" id="4346106">.</span><span class="ident" id="4346107">SUB_ASSIGN</span><span class="op" id="4346117">,</span>&nbsp;<span class="string" id="4346119">&#39;-&#39;</span><span class="op" id="4346122">,</span>&nbsp;<span class="ident" id="4346124">token</span><span class="op" id="4346129">.</span><span class="ident" id="4346130">DEC</span><span class="op" id="4346133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346138">if</span>&nbsp;<span class="ident" id="4346141">tok</span>&nbsp;<span class="op" id="4346145">==</span>&nbsp;<span class="ident" id="4346148">token</span><span class="op" id="4346153">.</span><span class="ident" id="4346154">DEC</span>&nbsp;<span class="op" id="4346158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346164">insertSemi</span>&nbsp;<span class="op" id="4346175">=</span>&nbsp;<span class="builtintype" id="4346177">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4346185">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346189">case</span>&nbsp;<span class="string" id="4346194">&#39;*&#39;</span><span class="op" id="4346197">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346202">tok</span>&nbsp;<span class="op" id="4346206">=</span>&nbsp;<span class="ident" id="4346208">s</span><span class="op" id="4346209">.</span><span class="ident" id="4346210">switch2</span><span class="op" id="4346217">(</span><span class="ident" id="4346218">token</span><span class="op" id="4346223">.</span><span class="ident" id="4346224">MUL</span><span class="op" id="4346227">,</span>&nbsp;<span class="ident" id="4346229">token</span><span class="op" id="4346234">.</span><span class="ident" id="4346235">MUL_ASSIGN</span><span class="op" id="4346245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346249">case</span>&nbsp;<span class="string" id="4346254">&#39;/&#39;</span><span class="op" id="4346257">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346262">if</span>&nbsp;<span class="ident" id="4346265">s</span><span class="op" id="4346266">.</span><span class="ident" id="4346267">ch</span>&nbsp;<span class="op" id="4346270">==</span>&nbsp;<span class="string" id="4346273">&#39;/&#39;</span>&nbsp;<span class="op" id="4346277">||</span>&nbsp;<span class="ident" id="4346280">s</span><span class="op" id="4346281">.</span><span class="ident" id="4346282">ch</span>&nbsp;<span class="op" id="4346285">==</span>&nbsp;<span class="string" id="4346288">&#39;*&#39;</span>&nbsp;<span class="op" id="4346292">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4346298">//&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346313">if</span>&nbsp;<span class="ident" id="4346316">s</span><span class="op" id="4346317">.</span><span class="ident" id="4346318">insertSemi</span>&nbsp;<span class="op" id="4346329">&amp;&amp;</span>&nbsp;<span class="ident" id="4346332">s</span><span class="op" id="4346333">.</span><span class="ident" id="4346334">findLineEnd</span><span class="op" id="4346345">(</span><span class="op" id="4346346">)</span>&nbsp;<span class="op" id="4346348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4346355">//&nbsp;reset&nbsp;position&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346410">s</span><span class="op" id="4346411">.</span><span class="ident" id="4346412">ch</span>&nbsp;<span class="op" id="4346415">=</span>&nbsp;<span class="string" id="4346417">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346426">s</span><span class="op" id="4346427">.</span><span class="ident" id="4346428">offset</span>&nbsp;<span class="op" id="4346435">=</span>&nbsp;<span class="ident" id="4346437">s</span><span class="op" id="4346438">.</span><span class="ident" id="4346439">file</span><span class="op" id="4346443">.</span><span class="ident" id="4346444">Offset</span><span class="op" id="4346450">(</span><span class="ident" id="4346451">pos</span><span class="op" id="4346454">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346461">s</span><span class="op" id="4346462">.</span><span class="ident" id="4346463">rdOffset</span>&nbsp;<span class="op" id="4346472">=</span>&nbsp;<span class="ident" id="4346474">s</span><span class="op" id="4346475">.</span><span class="ident" id="4346476">offset</span>&nbsp;<span class="op" id="4346483">+</span>&nbsp;<span class="num" id="4346485">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346492">s</span><span class="op" id="4346493">.</span><span class="ident" id="4346494">insertSemi</span>&nbsp;<span class="op" id="4346505">=</span>&nbsp;<span class="builtintype" id="4346507">false</span>&nbsp;<span class="comment" id="4346513">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346538">return</span>&nbsp;<span class="ident" id="4346545">pos</span><span class="op" id="4346548">,</span>&nbsp;<span class="ident" id="4346550">token</span><span class="op" id="4346555">.</span><span class="ident" id="4346556">SEMICOLON</span><span class="op" id="4346565">,</span>&nbsp;<span class="string" id="4346567">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4346576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346582">lit</span>&nbsp;<span class="op" id="4346586">=</span>&nbsp;<span class="ident" id="4346588">s</span><span class="op" id="4346589">.</span><span class="ident" id="4346590">scanComment</span><span class="op" id="4346601">(</span><span class="op" id="4346602">)</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346608">if</span>&nbsp;<span class="ident" id="4346611">s</span><span class="op" id="4346612">.</span><span class="ident" id="4346613">mode</span><span class="op" id="4346617">&amp;</span><span class="ident" id="4346618">ScanComments</span>&nbsp;<span class="op" id="4346631">==</span>&nbsp;<span class="num" id="4346634">0</span>&nbsp;<span class="op" id="4346636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4346643">//&nbsp;skip&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346664">s</span><span class="op" id="4346665">.</span><span class="ident" id="4346666">insertSemi</span>&nbsp;<span class="op" id="4346677">=</span>&nbsp;<span class="builtintype" id="4346679">false</span>&nbsp;<span class="comment" id="4346685">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346710">goto</span>&nbsp;<span class="ident" id="4346715">scanAgain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4346729">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346735">tok</span>&nbsp;<span class="op" id="4346739">=</span>&nbsp;<span class="ident" id="4346741">token</span><span class="op" id="4346746">.</span><span class="ident" id="4346747">COMMENT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4346758">}</span>&nbsp;<span class="keyword" id="4346760">else</span>&nbsp;<span class="op" id="4346765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346771">tok</span>&nbsp;<span class="op" id="4346775">=</span>&nbsp;<span class="ident" id="4346777">s</span><span class="op" id="4346778">.</span><span class="ident" id="4346779">switch2</span><span class="op" id="4346786">(</span><span class="ident" id="4346787">token</span><span class="op" id="4346792">.</span><span class="ident" id="4346793">QUO</span><span class="op" id="4346796">,</span>&nbsp;<span class="ident" id="4346798">token</span><span class="op" id="4346803">.</span><span class="ident" id="4346804">QUO_ASSIGN</span><span class="op" id="4346814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4346819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346823">case</span>&nbsp;<span class="string" id="4346828">&#39;%&#39;</span><span class="op" id="4346831">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346836">tok</span>&nbsp;<span class="op" id="4346840">=</span>&nbsp;<span class="ident" id="4346842">s</span><span class="op" id="4346843">.</span><span class="ident" id="4346844">switch2</span><span class="op" id="4346851">(</span><span class="ident" id="4346852">token</span><span class="op" id="4346857">.</span><span class="ident" id="4346858">REM</span><span class="op" id="4346861">,</span>&nbsp;<span class="ident" id="4346863">token</span><span class="op" id="4346868">.</span><span class="ident" id="4346869">REM_ASSIGN</span><span class="op" id="4346879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346883">case</span>&nbsp;<span class="string" id="4346888">&#39;^&#39;</span><span class="op" id="4346891">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346896">tok</span>&nbsp;<span class="op" id="4346900">=</span>&nbsp;<span class="ident" id="4346902">s</span><span class="op" id="4346903">.</span><span class="ident" id="4346904">switch2</span><span class="op" id="4346911">(</span><span class="ident" id="4346912">token</span><span class="op" id="4346917">.</span><span class="ident" id="4346918">XOR</span><span class="op" id="4346921">,</span>&nbsp;<span class="ident" id="4346923">token</span><span class="op" id="4346928">.</span><span class="ident" id="4346929">XOR_ASSIGN</span><span class="op" id="4346939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346943">case</span>&nbsp;<span class="string" id="4346948">&#39;&lt;&#39;</span><span class="op" id="4346951">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4346956">if</span>&nbsp;<span class="ident" id="4346959">s</span><span class="op" id="4346960">.</span><span class="ident" id="4346961">ch</span>&nbsp;<span class="op" id="4346964">==</span>&nbsp;<span class="string" id="4346967">&#39;-&#39;</span>&nbsp;<span class="op" id="4346971">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346977">s</span><span class="op" id="4346978">.</span><span class="ident" id="4346979">next</span><span class="op" id="4346983">(</span><span class="op" id="4346984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4346990">tok</span>&nbsp;<span class="op" id="4346994">=</span>&nbsp;<span class="ident" id="4346996">token</span><span class="op" id="4347001">.</span><span class="ident" id="4347002">ARROW</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4347011">}</span>&nbsp;<span class="keyword" id="4347013">else</span>&nbsp;<span class="op" id="4347018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347024">tok</span>&nbsp;<span class="op" id="4347028">=</span>&nbsp;<span class="ident" id="4347030">s</span><span class="op" id="4347031">.</span><span class="ident" id="4347032">switch4</span><span class="op" id="4347039">(</span><span class="ident" id="4347040">token</span><span class="op" id="4347045">.</span><span class="ident" id="4347046">LSS</span><span class="op" id="4347049">,</span>&nbsp;<span class="ident" id="4347051">token</span><span class="op" id="4347056">.</span><span class="ident" id="4347057">LEQ</span><span class="op" id="4347060">,</span>&nbsp;<span class="string" id="4347062">&#39;&lt;&#39;</span><span class="op" id="4347065">,</span>&nbsp;<span class="ident" id="4347067">token</span><span class="op" id="4347072">.</span><span class="ident" id="4347073">SHL</span><span class="op" id="4347076">,</span>&nbsp;<span class="ident" id="4347078">token</span><span class="op" id="4347083">.</span><span class="ident" id="4347084">SHL_ASSIGN</span><span class="op" id="4347094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4347099">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4347103">case</span>&nbsp;<span class="string" id="4347108">&#39;&gt;&#39;</span><span class="op" id="4347111">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347116">tok</span>&nbsp;<span class="op" id="4347120">=</span>&nbsp;<span class="ident" id="4347122">s</span><span class="op" id="4347123">.</span><span class="ident" id="4347124">switch4</span><span class="op" id="4347131">(</span><span class="ident" id="4347132">token</span><span class="op" id="4347137">.</span><span class="ident" id="4347138">GTR</span><span class="op" id="4347141">,</span>&nbsp;<span class="ident" id="4347143">token</span><span class="op" id="4347148">.</span><span class="ident" id="4347149">GEQ</span><span class="op" id="4347152">,</span>&nbsp;<span class="string" id="4347154">&#39;&gt;&#39;</span><span class="op" id="4347157">,</span>&nbsp;<span class="ident" id="4347159">token</span><span class="op" id="4347164">.</span><span class="ident" id="4347165">SHR</span><span class="op" id="4347168">,</span>&nbsp;<span class="ident" id="4347170">token</span><span class="op" id="4347175">.</span><span class="ident" id="4347176">SHR_ASSIGN</span><span class="op" id="4347186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4347190">case</span>&nbsp;<span class="string" id="4347195">&#39;=&#39;</span><span class="op" id="4347198">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347203">tok</span>&nbsp;<span class="op" id="4347207">=</span>&nbsp;<span class="ident" id="4347209">s</span><span class="op" id="4347210">.</span><span class="ident" id="4347211">switch2</span><span class="op" id="4347218">(</span><span class="ident" id="4347219">token</span><span class="op" id="4347224">.</span><span class="ident" id="4347225">ASSIGN</span><span class="op" id="4347231">,</span>&nbsp;<span class="ident" id="4347233">token</span><span class="op" id="4347238">.</span><span class="ident" id="4347239">EQL</span><span class="op" id="4347242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4347246">case</span>&nbsp;<span class="string" id="4347251">&#39;!&#39;</span><span class="op" id="4347254">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347259">tok</span>&nbsp;<span class="op" id="4347263">=</span>&nbsp;<span class="ident" id="4347265">s</span><span class="op" id="4347266">.</span><span class="ident" id="4347267">switch2</span><span class="op" id="4347274">(</span><span class="ident" id="4347275">token</span><span class="op" id="4347280">.</span><span class="ident" id="4347281">NOT</span><span class="op" id="4347284">,</span>&nbsp;<span class="ident" id="4347286">token</span><span class="op" id="4347291">.</span><span class="ident" id="4347292">NEQ</span><span class="op" id="4347295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4347299">case</span>&nbsp;<span class="string" id="4347304">&#39;&amp;&#39;</span><span class="op" id="4347307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4347312">if</span>&nbsp;<span class="ident" id="4347315">s</span><span class="op" id="4347316">.</span><span class="ident" id="4347317">ch</span>&nbsp;<span class="op" id="4347320">==</span>&nbsp;<span class="string" id="4347323">&#39;^&#39;</span>&nbsp;<span class="op" id="4347327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347333">s</span><span class="op" id="4347334">.</span><span class="ident" id="4347335">next</span><span class="op" id="4347339">(</span><span class="op" id="4347340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347346">tok</span>&nbsp;<span class="op" id="4347350">=</span>&nbsp;<span class="ident" id="4347352">s</span><span class="op" id="4347353">.</span><span class="ident" id="4347354">switch2</span><span class="op" id="4347361">(</span><span class="ident" id="4347362">token</span><span class="op" id="4347367">.</span><span class="ident" id="4347368">AND_NOT</span><span class="op" id="4347375">,</span>&nbsp;<span class="ident" id="4347377">token</span><span class="op" id="4347382">.</span><span class="ident" id="4347383">AND_NOT_ASSIGN</span><span class="op" id="4347397">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4347402">}</span>&nbsp;<span class="keyword" id="4347404">else</span>&nbsp;<span class="op" id="4347409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347415">tok</span>&nbsp;<span class="op" id="4347419">=</span>&nbsp;<span class="ident" id="4347421">s</span><span class="op" id="4347422">.</span><span class="ident" id="4347423">switch3</span><span class="op" id="4347430">(</span><span class="ident" id="4347431">token</span><span class="op" id="4347436">.</span><span class="ident" id="4347437">AND</span><span class="op" id="4347440">,</span>&nbsp;<span class="ident" id="4347442">token</span><span class="op" id="4347447">.</span><span class="ident" id="4347448">AND_ASSIGN</span><span class="op" id="4347458">,</span>&nbsp;<span class="string" id="4347460">&#39;&amp;&#39;</span><span class="op" id="4347463">,</span>&nbsp;<span class="ident" id="4347465">token</span><span class="op" id="4347470">.</span><span class="ident" id="4347471">LAND</span><span class="op" id="4347475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4347480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4347484">case</span>&nbsp;<span class="string" id="4347489">&#39;|&#39;</span><span class="op" id="4347492">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347497">tok</span>&nbsp;<span class="op" id="4347501">=</span>&nbsp;<span class="ident" id="4347503">s</span><span class="op" id="4347504">.</span><span class="ident" id="4347505">switch3</span><span class="op" id="4347512">(</span><span class="ident" id="4347513">token</span><span class="op" id="4347518">.</span><span class="ident" id="4347519">OR</span><span class="op" id="4347521">,</span>&nbsp;<span class="ident" id="4347523">token</span><span class="op" id="4347528">.</span><span class="ident" id="4347529">OR_ASSIGN</span><span class="op" id="4347538">,</span>&nbsp;<span class="string" id="4347540">&#39;|&#39;</span><span class="op" id="4347543">,</span>&nbsp;<span class="ident" id="4347545">token</span><span class="op" id="4347550">.</span><span class="ident" id="4347551">LOR</span><span class="op" id="4347554">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4347558">default</span><span class="op" id="4347565">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4347570">//&nbsp;next&nbsp;reports&nbsp;unexpected&nbsp;BOMs&nbsp;-&nbsp;don&#39;t&nbsp;repeat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4347620">if</span>&nbsp;<span class="ident" id="4347623">ch</span>&nbsp;<span class="op" id="4347626">!=</span>&nbsp;<span class="ident" id="4347629">bom</span>&nbsp;<span class="op" id="4347633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347639">s</span><span class="op" id="4347640">.</span><span class="builtintype" id="4347641">error</span><span class="op" id="4347646">(</span><span class="ident" id="4347647">s</span><span class="op" id="4347648">.</span><span class="ident" id="4347649">file</span><span class="op" id="4347653">.</span><span class="ident" id="4347654">Offset</span><span class="op" id="4347660">(</span><span class="ident" id="4347661">pos</span><span class="op" id="4347664">)</span><span class="op" id="4347665">,</span>&nbsp;<span class="ident" id="4347667">fmt</span><span class="op" id="4347670">.</span><span class="ident" id="4347671">Sprintf</span><span class="op" id="4347678">(</span><span class="string" id="4347679">&#34;illegal&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4347702">,</span>&nbsp;<span class="ident" id="4347704">ch</span><span class="op" id="4347706">)</span><span class="op" id="4347707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4347712">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347717">insertSemi</span>&nbsp;<span class="op" id="4347728">=</span>&nbsp;<span class="ident" id="4347730">s</span><span class="op" id="4347731">.</span><span class="ident" id="4347732">insertSemi</span>&nbsp;<span class="comment" id="4347743">//&nbsp;preserve&nbsp;insertSemi&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347774">tok</span>&nbsp;<span class="op" id="4347778">=</span>&nbsp;<span class="ident" id="4347780">token</span><span class="op" id="4347785">.</span><span class="ident" id="4347786">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347797">lit</span>&nbsp;<span class="op" id="4347801">=</span>&nbsp;<span class="builtintype" id="4347803">string</span><span class="op" id="4347809">(</span><span class="ident" id="4347810">ch</span><span class="op" id="4347812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4347816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4347819">}</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4347822">if</span>&nbsp;<span class="ident" id="4347825">s</span><span class="op" id="4347826">.</span><span class="ident" id="4347827">mode</span><span class="op" id="4347831">&amp;</span><span class="ident" id="4347832">dontInsertSemis</span>&nbsp;<span class="op" id="4347848">==</span>&nbsp;<span class="num" id="4347851">0</span>&nbsp;<span class="op" id="4347853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4347857">s</span><span class="op" id="4347858">.</span><span class="ident" id="4347859">insertSemi</span>&nbsp;<span class="op" id="4347870">=</span>&nbsp;<span class="ident" id="4347872">insertSemi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4347884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4347888">return</span><br>
<span class="lineno">760</span><span class="op" id="4347895">}</span>
</div>
</body>
</html>
