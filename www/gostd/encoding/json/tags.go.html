<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html" class="current">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2051707">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2051762">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2051816">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2051867">package</span>&nbsp;<span class="ident" id="2051875">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2051881">import</span>&nbsp;<span class="op" id="2051888">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2051891">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="2051901">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2051904">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="2051977">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="2052045">type</span>&nbsp;<span class="ident" id="2052050">tagOptions</span>&nbsp;<span class="builtintype" id="2052061">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2052069">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2052132">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="2052160">func</span>&nbsp;<span class="ident" id="2052165">parseTag</span><span class="op" id="2052173">(</span><span class="ident" id="2052174">tag</span>&nbsp;<span class="builtintype" id="2052178">string</span><span class="op" id="2052184">)</span>&nbsp;<span class="op" id="2052186">(</span><span class="builtintype" id="2052187">string</span><span class="op" id="2052193">,</span>&nbsp;<span class="ident" id="2052195">tagOptions</span><span class="op" id="2052205">)</span>&nbsp;<span class="op" id="2052207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052210">if</span>&nbsp;<span class="ident" id="2052213">idx</span>&nbsp;<span class="op" id="2052217">:=</span>&nbsp;<span class="ident" id="2052220">strings</span><span class="op" id="2052227">.</span><span class="ident" id="2052228">Index</span><span class="op" id="2052233">(</span><span class="ident" id="2052234">tag</span><span class="op" id="2052237">,</span>&nbsp;<span class="string" id="2052239">&#34;,&#34;</span><span class="op" id="2052242">)</span><span class="op" id="2052243">;</span>&nbsp;<span class="ident" id="2052245">idx</span>&nbsp;<span class="op" id="2052249">!=</span>&nbsp;<span class="op" id="2052252">-</span><span class="num" id="2052253">1</span>&nbsp;<span class="op" id="2052255">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052259">return</span>&nbsp;<span class="ident" id="2052266">tag</span><span class="op" id="2052269">[</span><span class="op" id="2052270">:</span><span class="ident" id="2052271">idx</span><span class="op" id="2052274">]</span><span class="op" id="2052275">,</span>&nbsp;<span class="ident" id="2052277">tagOptions</span><span class="op" id="2052287">(</span><span class="ident" id="2052288">tag</span><span class="op" id="2052291">[</span><span class="ident" id="2052292">idx</span><span class="op" id="2052295">+</span><span class="num" id="2052296">1</span><span class="op" id="2052297">:</span><span class="op" id="2052298">]</span><span class="op" id="2052299">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2052302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052305">return</span>&nbsp;<span class="ident" id="2052312">tag</span><span class="op" id="2052315">,</span>&nbsp;<span class="ident" id="2052317">tagOptions</span><span class="op" id="2052327">(</span><span class="string" id="2052328">&#34;&#34;</span><span class="op" id="2052330">)</span><br>
<span class="lineno"></span><span class="op" id="2052332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2052335">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="2052397">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2052466">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="2052496">func</span>&nbsp;<span class="op" id="2052501">(</span><span class="ident" id="2052502">o</span>&nbsp;<span class="ident" id="2052504">tagOptions</span><span class="op" id="2052514">)</span>&nbsp;<span class="ident" id="2052516">Contains</span><span class="op" id="2052524">(</span><span class="ident" id="2052525">optionName</span>&nbsp;<span class="builtintype" id="2052536">string</span><span class="op" id="2052542">)</span>&nbsp;<span class="builtintype" id="2052544">bool</span>&nbsp;<span class="op" id="2052549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052552">if</span>&nbsp;<span class="builtinfunc" id="2052555">len</span><span class="op" id="2052558">(</span><span class="ident" id="2052559">o</span><span class="op" id="2052560">)</span>&nbsp;<span class="op" id="2052562">==</span>&nbsp;<span class="num" id="2052565">0</span>&nbsp;<span class="op" id="2052567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052571">return</span>&nbsp;<span class="builtintype" id="2052578">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2052585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2052588">s</span>&nbsp;<span class="op" id="2052590">:=</span>&nbsp;<span class="builtintype" id="2052593">string</span><span class="op" id="2052599">(</span><span class="ident" id="2052600">o</span><span class="op" id="2052601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052604">for</span>&nbsp;<span class="ident" id="2052608">s</span>&nbsp;<span class="op" id="2052610">!=</span>&nbsp;<span class="string" id="2052613">&#34;&#34;</span>&nbsp;<span class="op" id="2052616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052620">var</span>&nbsp;<span class="ident" id="2052624">next</span>&nbsp;<span class="builtintype" id="2052629">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2052638">i</span>&nbsp;<span class="op" id="2052640">:=</span>&nbsp;<span class="ident" id="2052643">strings</span><span class="op" id="2052650">.</span><span class="ident" id="2052651">Index</span><span class="op" id="2052656">(</span><span class="ident" id="2052657">s</span><span class="op" id="2052658">,</span>&nbsp;<span class="string" id="2052660">&#34;,&#34;</span><span class="op" id="2052663">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052667">if</span>&nbsp;<span class="ident" id="2052670">i</span>&nbsp;<span class="op" id="2052672">&gt;=</span>&nbsp;<span class="num" id="2052675">0</span>&nbsp;<span class="op" id="2052677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2052682">s</span><span class="op" id="2052683">,</span>&nbsp;<span class="ident" id="2052685">next</span>&nbsp;<span class="op" id="2052690">=</span>&nbsp;<span class="ident" id="2052692">s</span><span class="op" id="2052693">[</span><span class="op" id="2052694">:</span><span class="ident" id="2052695">i</span><span class="op" id="2052696">]</span><span class="op" id="2052697">,</span>&nbsp;<span class="ident" id="2052699">s</span><span class="op" id="2052700">[</span><span class="ident" id="2052701">i</span><span class="op" id="2052702">+</span><span class="num" id="2052703">1</span><span class="op" id="2052704">:</span><span class="op" id="2052705">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2052709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052713">if</span>&nbsp;<span class="ident" id="2052716">s</span>&nbsp;<span class="op" id="2052718">==</span>&nbsp;<span class="ident" id="2052721">optionName</span>&nbsp;<span class="op" id="2052732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052737">return</span>&nbsp;<span class="builtintype" id="2052744">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2052751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2052755">s</span>&nbsp;<span class="op" id="2052757">=</span>&nbsp;<span class="ident" id="2052759">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2052765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2052768">return</span>&nbsp;<span class="builtintype" id="2052775">false</span><br>
<span class="lineno"></span><span class="op" id="2052781">}</span>
</div>
</body>
</html>
