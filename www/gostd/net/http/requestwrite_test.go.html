<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7803481">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7803537">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7803591">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7803642">package</span>&nbsp;<span class="ident" id="7803650">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7803656">import</span>&nbsp;<span class="op" id="7803663">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7803666">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7803675">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7803685">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7803692">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7803698">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7803711">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7803722">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7803733">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7803743">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7803746">type</span>&nbsp;<span class="ident" id="7803751">reqWriteTest</span>&nbsp;<span class="keyword" id="7803764">struct</span>&nbsp;<span class="op" id="7803771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803774">Req</span>&nbsp;&nbsp;<span class="ident" id="7803779">Request</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803788">Body</span>&nbsp;<span class="keyword" id="7803793">interface</span><span class="op" id="7803802">{</span><span class="op" id="7803803">}</span>&nbsp;<span class="comment" id="7803805">//&nbsp;optional&nbsp;[]byte&nbsp;or&nbsp;func()&nbsp;io.ReadCloser&nbsp;to&nbsp;populate&nbsp;Req.Body</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7803871">//&nbsp;Any&nbsp;of&nbsp;these&nbsp;three&nbsp;may&nbsp;be&nbsp;empty&nbsp;to&nbsp;skip&nbsp;that&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803926">WantWrite</span>&nbsp;<span class="builtintype" id="7803936">string</span>&nbsp;<span class="comment" id="7803943">//&nbsp;Request.Write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7803961">WantProxy</span>&nbsp;<span class="builtintype" id="7803971">string</span>&nbsp;<span class="comment" id="7803978">//&nbsp;Request.WriteProxy</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804002">WantError</span>&nbsp;<span class="builtintype" id="7804012">error</span>&nbsp;<span class="comment" id="7804018">//&nbsp;wanted&nbsp;error&nbsp;from&nbsp;Request.Write</span><br>
<span class="lineno"></span><span class="op" id="7804053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7804056">var</span>&nbsp;<span class="ident" id="7804060">reqWriteTests</span>&nbsp;<span class="op" id="7804074">=</span>&nbsp;<span class="op" id="7804076">[</span><span class="op" id="7804077">]</span><span class="ident" id="7804078">reqWriteTest</span><span class="op" id="7804090">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7804093">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;no&nbsp;body;&nbsp;no&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804149">Req</span><span class="op" id="7804152">:</span>&nbsp;<span class="ident" id="7804154">Request</span><span class="op" id="7804161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804166">Method</span><span class="op" id="7804172">:</span>&nbsp;<span class="string" id="7804174">&#34;GET&#34;</span><span class="op" id="7804179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804184">URL</span><span class="op" id="7804187">:</span>&nbsp;<span class="op" id="7804189">&amp;</span><span class="ident" id="7804190">url</span><span class="op" id="7804193">.</span><span class="ident" id="7804194">URL</span><span class="op" id="7804197">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804203">Scheme</span><span class="op" id="7804209">:</span>&nbsp;<span class="string" id="7804211">&#34;http&#34;</span><span class="op" id="7804217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804223">Host</span><span class="op" id="7804227">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7804231">&#34;www.techcrunch.com&#34;</span><span class="op" id="7804251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804257">Path</span><span class="op" id="7804261">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7804265">&#34;/&#34;</span><span class="op" id="7804268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804273">}</span><span class="op" id="7804274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804279">Proto</span><span class="op" id="7804284">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7804291">&#34;HTTP/1.1&#34;</span><span class="op" id="7804301">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804306">ProtoMajor</span><span class="op" id="7804316">:</span>&nbsp;<span class="num" id="7804318">1</span><span class="op" id="7804319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804324">ProtoMinor</span><span class="op" id="7804334">:</span>&nbsp;<span class="num" id="7804336">1</span><span class="op" id="7804337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804342">Header</span><span class="op" id="7804348">:</span>&nbsp;<span class="ident" id="7804350">Header</span><span class="op" id="7804356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804362">&#34;Accept&#34;</span><span class="op" id="7804370">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804382">{</span><span class="string" id="7804383">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="7804448">}</span><span class="op" id="7804449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804455">&#34;Accept-Charset&#34;</span><span class="op" id="7804471">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7804475">{</span><span class="string" id="7804476">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="7804508">}</span><span class="op" id="7804509">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804515">&#34;Accept-Encoding&#34;</span><span class="op" id="7804532">:</span>&nbsp;&nbsp;<span class="op" id="7804535">{</span><span class="string" id="7804536">&#34;gzip,deflate&#34;</span><span class="op" id="7804550">}</span><span class="op" id="7804551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804557">&#34;Accept-Language&#34;</span><span class="op" id="7804574">:</span>&nbsp;&nbsp;<span class="op" id="7804577">{</span><span class="string" id="7804578">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="7804594">}</span><span class="op" id="7804595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804601">&#34;Keep-Alive&#34;</span><span class="op" id="7804613">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804621">{</span><span class="string" id="7804622">&#34;300&#34;</span><span class="op" id="7804627">}</span><span class="op" id="7804628">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804634">&#34;Proxy-Connection&#34;</span><span class="op" id="7804652">:</span>&nbsp;<span class="op" id="7804654">{</span><span class="string" id="7804655">&#34;keep-alive&#34;</span><span class="op" id="7804667">}</span><span class="op" id="7804668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804674">&#34;User-Agent&#34;</span><span class="op" id="7804686">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7804694">{</span><span class="string" id="7804695">&#34;Fake&#34;</span><span class="op" id="7804701">}</span><span class="op" id="7804702">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804707">}</span><span class="op" id="7804708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804713">Body</span><span class="op" id="7804717">:</span>&nbsp;&nbsp;<span class="ident" id="7804720">nil</span><span class="op" id="7804723">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804728">Close</span><span class="op" id="7804733">:</span>&nbsp;<span class="builtintype" id="7804735">false</span><span class="op" id="7804740">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804745">Host</span><span class="op" id="7804749">:</span>&nbsp;&nbsp;<span class="string" id="7804752">&#34;www.techcrunch.com&#34;</span><span class="op" id="7804772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804777">Form</span><span class="op" id="7804781">:</span>&nbsp;&nbsp;<span class="keyword" id="7804784">map</span><span class="op" id="7804787">[</span><span class="builtintype" id="7804788">string</span><span class="op" id="7804794">]</span><span class="op" id="7804795">[</span><span class="op" id="7804796">]</span><span class="builtintype" id="7804797">string</span><span class="op" id="7804803">{</span><span class="op" id="7804804">}</span><span class="op" id="7804805">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7804809">}</span><span class="op" id="7804810">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7804815">WantWrite</span><span class="op" id="7804824">:</span>&nbsp;<span class="string" id="7804826">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7804847">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804852">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="7804883">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804888">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="7804911">+</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804916">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="7804994">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7804999">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="7805052">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805057">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="7805093">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805098">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="7805136">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805141">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="7805163">+</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805168">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span><span class="op" id="7805206">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805211">WantProxy</span><span class="op" id="7805220">:</span>&nbsp;<span class="string" id="7805222">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7805268">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805273">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="7805304">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805309">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="7805332">+</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805337">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="7805415">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805420">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="7805473">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805478">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="7805514">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805519">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="7805557">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805562">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="7805584">+</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7805589">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span><span class="op" id="7805627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7805630">}</span><span class="op" id="7805631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7805634">//&nbsp;HTTP/1.1&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7805686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805690">Req</span><span class="op" id="7805693">:</span>&nbsp;<span class="ident" id="7805695">Request</span><span class="op" id="7805702">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805707">Method</span><span class="op" id="7805713">:</span>&nbsp;<span class="string" id="7805715">&#34;GET&#34;</span><span class="op" id="7805720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805725">URL</span><span class="op" id="7805728">:</span>&nbsp;<span class="op" id="7805730">&amp;</span><span class="ident" id="7805731">url</span><span class="op" id="7805734">.</span><span class="ident" id="7805735">URL</span><span class="op" id="7805738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805744">Scheme</span><span class="op" id="7805750">:</span>&nbsp;<span class="string" id="7805752">&#34;http&#34;</span><span class="op" id="7805758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805764">Host</span><span class="op" id="7805768">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7805772">&#34;www.google.com&#34;</span><span class="op" id="7805788">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805794">Path</span><span class="op" id="7805798">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7805802">&#34;/search&#34;</span><span class="op" id="7805811">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7805816">}</span><span class="op" id="7805817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805822">ProtoMajor</span><span class="op" id="7805832">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7805840">1</span><span class="op" id="7805841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805846">ProtoMinor</span><span class="op" id="7805856">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7805864">1</span><span class="op" id="7805865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805870">Header</span><span class="op" id="7805876">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7805888">Header</span><span class="op" id="7805894">{</span><span class="op" id="7805895">}</span><span class="op" id="7805896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805901">TransferEncoding</span><span class="op" id="7805917">:</span>&nbsp;<span class="op" id="7805919">[</span><span class="op" id="7805920">]</span><span class="builtintype" id="7805921">string</span><span class="op" id="7805927">{</span><span class="string" id="7805928">&#34;chunked&#34;</span><span class="op" id="7805937">}</span><span class="op" id="7805938">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7805942">}</span><span class="op" id="7805943">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805948">Body</span><span class="op" id="7805952">:</span>&nbsp;<span class="op" id="7805954">[</span><span class="op" id="7805955">]</span><span class="builtintype" id="7805956">byte</span><span class="op" id="7805960">(</span><span class="string" id="7805961">&#34;abcdef&#34;</span><span class="op" id="7805969">)</span><span class="op" id="7805970">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7805975">WantWrite</span><span class="op" id="7805984">:</span>&nbsp;<span class="string" id="7805986">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7806013">+</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7806018">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7806045">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7806050">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7806088">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7806093">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7806130">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806135">chunk</span><span class="op" id="7806140">(</span><span class="string" id="7806141">&#34;abcdef&#34;</span><span class="op" id="7806149">)</span>&nbsp;<span class="op" id="7806151">+</span>&nbsp;<span class="ident" id="7806153">chunk</span><span class="op" id="7806158">(</span><span class="string" id="7806159">&#34;&#34;</span><span class="op" id="7806161">)</span><span class="op" id="7806162">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806167">WantProxy</span><span class="op" id="7806176">:</span>&nbsp;<span class="string" id="7806178">&#34;GET&nbsp;http://www.google.com/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7806226">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7806231">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7806258">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7806263">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7806301">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7806306">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7806343">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806348">chunk</span><span class="op" id="7806353">(</span><span class="string" id="7806354">&#34;abcdef&#34;</span><span class="op" id="7806362">)</span>&nbsp;<span class="op" id="7806364">+</span>&nbsp;<span class="ident" id="7806366">chunk</span><span class="op" id="7806371">(</span><span class="string" id="7806372">&#34;&#34;</span><span class="op" id="7806374">)</span><span class="op" id="7806375">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7806378">}</span><span class="op" id="7806379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7806382">//&nbsp;HTTP/1.1&nbsp;POST&nbsp;=&gt;&nbsp;chunked&nbsp;coding;&nbsp;body;&nbsp;empty&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7806439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806443">Req</span><span class="op" id="7806446">:</span>&nbsp;<span class="ident" id="7806448">Request</span><span class="op" id="7806455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806460">Method</span><span class="op" id="7806466">:</span>&nbsp;<span class="string" id="7806468">&#34;POST&#34;</span><span class="op" id="7806474">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806479">URL</span><span class="op" id="7806482">:</span>&nbsp;<span class="op" id="7806484">&amp;</span><span class="ident" id="7806485">url</span><span class="op" id="7806488">.</span><span class="ident" id="7806489">URL</span><span class="op" id="7806492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806498">Scheme</span><span class="op" id="7806504">:</span>&nbsp;<span class="string" id="7806506">&#34;http&#34;</span><span class="op" id="7806512">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806518">Host</span><span class="op" id="7806522">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7806526">&#34;www.google.com&#34;</span><span class="op" id="7806542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806548">Path</span><span class="op" id="7806552">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7806556">&#34;/search&#34;</span><span class="op" id="7806565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7806570">}</span><span class="op" id="7806571">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806576">ProtoMajor</span><span class="op" id="7806586">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7806594">1</span><span class="op" id="7806595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806600">ProtoMinor</span><span class="op" id="7806610">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7806618">1</span><span class="op" id="7806619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806624">Header</span><span class="op" id="7806630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7806642">Header</span><span class="op" id="7806648">{</span><span class="op" id="7806649">}</span><span class="op" id="7806650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806655">Close</span><span class="op" id="7806660">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7806673">true</span><span class="op" id="7806677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806682">TransferEncoding</span><span class="op" id="7806698">:</span>&nbsp;<span class="op" id="7806700">[</span><span class="op" id="7806701">]</span><span class="builtintype" id="7806702">string</span><span class="op" id="7806708">{</span><span class="string" id="7806709">&#34;chunked&#34;</span><span class="op" id="7806718">}</span><span class="op" id="7806719">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7806723">}</span><span class="op" id="7806724">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806729">Body</span><span class="op" id="7806733">:</span>&nbsp;<span class="op" id="7806735">[</span><span class="op" id="7806736">]</span><span class="builtintype" id="7806737">byte</span><span class="op" id="7806741">(</span><span class="string" id="7806742">&#34;abcdef&#34;</span><span class="op" id="7806750">)</span><span class="op" id="7806751">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806756">WantWrite</span><span class="op" id="7806765">:</span>&nbsp;<span class="string" id="7806767">&#34;POST&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7806795">+</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7806800">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7806827">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7806832">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7806870">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7806875">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7806899">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7806904">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7806941">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806946">chunk</span><span class="op" id="7806951">(</span><span class="string" id="7806952">&#34;abcdef&#34;</span><span class="op" id="7806960">)</span>&nbsp;<span class="op" id="7806962">+</span>&nbsp;<span class="ident" id="7806964">chunk</span><span class="op" id="7806969">(</span><span class="string" id="7806970">&#34;&#34;</span><span class="op" id="7806972">)</span><span class="op" id="7806973">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7806978">WantProxy</span><span class="op" id="7806987">:</span>&nbsp;<span class="string" id="7806989">&#34;POST&nbsp;http://www.google.com/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7807038">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807043">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7807070">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807075">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7807113">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807118">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7807142">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807147">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7807184">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807189">chunk</span><span class="op" id="7807194">(</span><span class="string" id="7807195">&#34;abcdef&#34;</span><span class="op" id="7807203">)</span>&nbsp;<span class="op" id="7807205">+</span>&nbsp;<span class="ident" id="7807207">chunk</span><span class="op" id="7807212">(</span><span class="string" id="7807213">&#34;&#34;</span><span class="op" id="7807215">)</span><span class="op" id="7807216">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7807219">}</span><span class="op" id="7807220">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7807224">//&nbsp;HTTP/1.1&nbsp;POST&nbsp;with&nbsp;Content-Length,&nbsp;no&nbsp;chunking</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7807275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807279">Req</span><span class="op" id="7807282">:</span>&nbsp;<span class="ident" id="7807284">Request</span><span class="op" id="7807291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807296">Method</span><span class="op" id="7807302">:</span>&nbsp;<span class="string" id="7807304">&#34;POST&#34;</span><span class="op" id="7807310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807315">URL</span><span class="op" id="7807318">:</span>&nbsp;<span class="op" id="7807320">&amp;</span><span class="ident" id="7807321">url</span><span class="op" id="7807324">.</span><span class="ident" id="7807325">URL</span><span class="op" id="7807328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807334">Scheme</span><span class="op" id="7807340">:</span>&nbsp;<span class="string" id="7807342">&#34;http&#34;</span><span class="op" id="7807348">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807354">Host</span><span class="op" id="7807358">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7807362">&#34;www.google.com&#34;</span><span class="op" id="7807378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807384">Path</span><span class="op" id="7807388">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7807392">&#34;/search&#34;</span><span class="op" id="7807401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7807406">}</span><span class="op" id="7807407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807412">ProtoMajor</span><span class="op" id="7807422">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7807427">1</span><span class="op" id="7807428">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807433">ProtoMinor</span><span class="op" id="7807443">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7807448">1</span><span class="op" id="7807449">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807454">Header</span><span class="op" id="7807460">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7807469">Header</span><span class="op" id="7807475">{</span><span class="op" id="7807476">}</span><span class="op" id="7807477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807482">Close</span><span class="op" id="7807487">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7807497">true</span><span class="op" id="7807501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807506">ContentLength</span><span class="op" id="7807519">:</span>&nbsp;<span class="num" id="7807521">6</span><span class="op" id="7807522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7807526">}</span><span class="op" id="7807527">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807532">Body</span><span class="op" id="7807536">:</span>&nbsp;<span class="op" id="7807538">[</span><span class="op" id="7807539">]</span><span class="builtintype" id="7807540">byte</span><span class="op" id="7807544">(</span><span class="string" id="7807545">&#34;abcdef&#34;</span><span class="op" id="7807553">)</span><span class="op" id="7807554">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807559">WantWrite</span><span class="op" id="7807568">:</span>&nbsp;<span class="string" id="7807570">&#34;POST&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7807598">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807603">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7807630">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807635">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7807673">+</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807678">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7807702">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807707">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7807731">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807736">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7807743">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807748">&#34;abcdef&#34;</span><span class="op" id="7807756">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7807761">WantProxy</span><span class="op" id="7807770">:</span>&nbsp;<span class="string" id="7807772">&#34;POST&nbsp;http://www.google.com/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7807821">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807826">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7807853">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807858">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7807896">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807901">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="7807925">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807930">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7807954">+</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807959">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7807966">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7807971">&#34;abcdef&#34;</span><span class="op" id="7807979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7807982">}</span><span class="op" id="7807983">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7807987">//&nbsp;HTTP/1.1&nbsp;POST&nbsp;with&nbsp;Content-Length&nbsp;in&nbsp;headers</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7808036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808040">Req</span><span class="op" id="7808043">:</span>&nbsp;<span class="ident" id="7808045">Request</span><span class="op" id="7808052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808057">Method</span><span class="op" id="7808063">:</span>&nbsp;<span class="string" id="7808065">&#34;POST&#34;</span><span class="op" id="7808071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808076">URL</span><span class="op" id="7808079">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7808084">mustParseURL</span><span class="op" id="7808096">(</span><span class="string" id="7808097">&#34;http://example.com/&#34;</span><span class="op" id="7808118">)</span><span class="op" id="7808119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808124">Host</span><span class="op" id="7808128">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7808132">&#34;example.com&#34;</span><span class="op" id="7808145">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808150">Header</span><span class="op" id="7808156">:</span>&nbsp;<span class="ident" id="7808158">Header</span><span class="op" id="7808164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808170">&#34;Content-Length&#34;</span><span class="op" id="7808186">:</span>&nbsp;<span class="op" id="7808188">[</span><span class="op" id="7808189">]</span><span class="builtintype" id="7808190">string</span><span class="op" id="7808196">{</span><span class="string" id="7808197">&#34;10&#34;</span><span class="op" id="7808201">}</span><span class="op" id="7808202">,</span>&nbsp;<span class="comment" id="7808204">//&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7808218">}</span><span class="op" id="7808219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808224">ContentLength</span><span class="op" id="7808237">:</span>&nbsp;<span class="num" id="7808239">6</span><span class="op" id="7808240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7808244">}</span><span class="op" id="7808245">,</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808250">Body</span><span class="op" id="7808254">:</span>&nbsp;<span class="op" id="7808256">[</span><span class="op" id="7808257">]</span><span class="builtintype" id="7808258">byte</span><span class="op" id="7808262">(</span><span class="string" id="7808263">&#34;abcdef&#34;</span><span class="op" id="7808271">)</span><span class="op" id="7808272">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808277">WantWrite</span><span class="op" id="7808286">:</span>&nbsp;<span class="string" id="7808288">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7808310">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808315">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7808339">+</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808344">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7808382">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808387">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7808411">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808416">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7808423">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808428">&#34;abcdef&#34;</span><span class="op" id="7808436">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808441">WantProxy</span><span class="op" id="7808450">:</span>&nbsp;<span class="string" id="7808452">&#34;POST&nbsp;http://example.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7808492">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808497">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7808521">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808526">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7808564">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808569">&#34;Content-Length:&nbsp;6\r\n&#34;</span>&nbsp;<span class="op" id="7808593">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808598">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7808605">+</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808610">&#34;abcdef&#34;</span><span class="op" id="7808618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7808621">}</span><span class="op" id="7808622">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7808626">//&nbsp;default&nbsp;to&nbsp;HTTP/1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7808650">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808654">Req</span><span class="op" id="7808657">:</span>&nbsp;<span class="ident" id="7808659">Request</span><span class="op" id="7808666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808671">Method</span><span class="op" id="7808677">:</span>&nbsp;<span class="string" id="7808679">&#34;GET&#34;</span><span class="op" id="7808684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808689">URL</span><span class="op" id="7808692">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7808697">mustParseURL</span><span class="op" id="7808709">(</span><span class="string" id="7808710">&#34;/search&#34;</span><span class="op" id="7808719">)</span><span class="op" id="7808720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808725">Host</span><span class="op" id="7808729">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7808733">&#34;www.google.com&#34;</span><span class="op" id="7808749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7808753">}</span><span class="op" id="7808754">,</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808759">WantWrite</span><span class="op" id="7808768">:</span>&nbsp;<span class="string" id="7808770">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7808797">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808802">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7808829">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808834">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7808872">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7808877">&#34;\r\n&#34;</span><span class="op" id="7808883">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7808886">}</span><span class="op" id="7808887">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7808891">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;0&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7808945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808949">Req</span><span class="op" id="7808952">:</span>&nbsp;<span class="ident" id="7808954">Request</span><span class="op" id="7808961">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808966">Method</span><span class="op" id="7808972">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7808981">&#34;POST&#34;</span><span class="op" id="7808987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7808992">URL</span><span class="op" id="7808995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7809007">mustParseURL</span><span class="op" id="7809019">(</span><span class="string" id="7809020">&#34;/&#34;</span><span class="op" id="7809023">)</span><span class="op" id="7809024">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809029">Host</span><span class="op" id="7809033">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7809044">&#34;example.com&#34;</span><span class="op" id="7809057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809062">ProtoMajor</span><span class="op" id="7809072">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7809077">1</span><span class="op" id="7809078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809083">ProtoMinor</span><span class="op" id="7809093">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7809098">1</span><span class="op" id="7809099">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809104">ContentLength</span><span class="op" id="7809117">:</span>&nbsp;<span class="num" id="7809119">0</span><span class="op" id="7809120">,</span>&nbsp;<span class="comment" id="7809122">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7809147">}</span><span class="op" id="7809148">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809153">Body</span><span class="op" id="7809157">:</span>&nbsp;<span class="keyword" id="7809159">func</span><span class="op" id="7809163">(</span><span class="op" id="7809164">)</span>&nbsp;<span class="ident" id="7809166">io</span><span class="op" id="7809168">.</span><span class="ident" id="7809169">ReadCloser</span>&nbsp;<span class="op" id="7809180">{</span>&nbsp;<span class="keyword" id="7809182">return</span>&nbsp;<span class="ident" id="7809189">ioutil</span><span class="op" id="7809195">.</span><span class="ident" id="7809196">NopCloser</span><span class="op" id="7809205">(</span><span class="ident" id="7809206">io</span><span class="op" id="7809208">.</span><span class="ident" id="7809209">LimitReader</span><span class="op" id="7809220">(</span><span class="ident" id="7809221">strings</span><span class="op" id="7809228">.</span><span class="ident" id="7809229">NewReader</span><span class="op" id="7809238">(</span><span class="string" id="7809239">&#34;xx&#34;</span><span class="op" id="7809243">)</span><span class="op" id="7809244">,</span>&nbsp;<span class="num" id="7809246">0</span><span class="op" id="7809247">)</span><span class="op" id="7809248">)</span>&nbsp;<span class="op" id="7809250">}</span><span class="op" id="7809251">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7809256">//&nbsp;RFC&nbsp;2616&nbsp;Section&nbsp;14.13&nbsp;says&nbsp;Content-Length&nbsp;should&nbsp;be&nbsp;specified</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7809324">//&nbsp;unless&nbsp;body&nbsp;is&nbsp;prohibited&nbsp;by&nbsp;the&nbsp;request&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7809378">//&nbsp;Also,&nbsp;nginx&nbsp;expects&nbsp;it&nbsp;for&nbsp;POST&nbsp;and&nbsp;PUT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809424">WantWrite</span><span class="op" id="7809433">:</span>&nbsp;<span class="string" id="7809435">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7809457">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7809462">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7809486">+</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7809491">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7809529">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7809534">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7809558">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7809563">&#34;\r\n&#34;</span><span class="op" id="7809569">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809574">WantProxy</span><span class="op" id="7809583">:</span>&nbsp;<span class="string" id="7809585">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7809607">+</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7809612">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7809636">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7809641">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7809679">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7809684">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="7809708">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7809713">&#34;\r\n&#34;</span><span class="op" id="7809719">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7809722">}</span><span class="op" id="7809723">,</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7809727">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;1&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7809781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809785">Req</span><span class="op" id="7809788">:</span>&nbsp;<span class="ident" id="7809790">Request</span><span class="op" id="7809797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809802">Method</span><span class="op" id="7809808">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7809817">&#34;POST&#34;</span><span class="op" id="7809823">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809828">URL</span><span class="op" id="7809831">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7809843">mustParseURL</span><span class="op" id="7809855">(</span><span class="string" id="7809856">&#34;/&#34;</span><span class="op" id="7809859">)</span><span class="op" id="7809860">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809865">Host</span><span class="op" id="7809869">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7809880">&#34;example.com&#34;</span><span class="op" id="7809893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809898">ProtoMajor</span><span class="op" id="7809908">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7809913">1</span><span class="op" id="7809914">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809919">ProtoMinor</span><span class="op" id="7809929">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7809934">1</span><span class="op" id="7809935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809940">ContentLength</span><span class="op" id="7809953">:</span>&nbsp;<span class="num" id="7809955">0</span><span class="op" id="7809956">,</span>&nbsp;<span class="comment" id="7809958">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7809983">}</span><span class="op" id="7809984">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7809989">Body</span><span class="op" id="7809993">:</span>&nbsp;<span class="keyword" id="7809995">func</span><span class="op" id="7809999">(</span><span class="op" id="7810000">)</span>&nbsp;<span class="ident" id="7810002">io</span><span class="op" id="7810004">.</span><span class="ident" id="7810005">ReadCloser</span>&nbsp;<span class="op" id="7810016">{</span>&nbsp;<span class="keyword" id="7810018">return</span>&nbsp;<span class="ident" id="7810025">ioutil</span><span class="op" id="7810031">.</span><span class="ident" id="7810032">NopCloser</span><span class="op" id="7810041">(</span><span class="ident" id="7810042">io</span><span class="op" id="7810044">.</span><span class="ident" id="7810045">LimitReader</span><span class="op" id="7810056">(</span><span class="ident" id="7810057">strings</span><span class="op" id="7810064">.</span><span class="ident" id="7810065">NewReader</span><span class="op" id="7810074">(</span><span class="string" id="7810075">&#34;xx&#34;</span><span class="op" id="7810079">)</span><span class="op" id="7810080">,</span>&nbsp;<span class="num" id="7810082">1</span><span class="op" id="7810083">)</span><span class="op" id="7810084">)</span>&nbsp;<span class="op" id="7810086">}</span><span class="op" id="7810087">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810092">WantWrite</span><span class="op" id="7810101">:</span>&nbsp;<span class="string" id="7810103">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7810125">+</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7810130">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7810154">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7810159">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7810197">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7810202">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7810239">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810244">chunk</span><span class="op" id="7810249">(</span><span class="string" id="7810250">&#34;x&#34;</span><span class="op" id="7810253">)</span>&nbsp;<span class="op" id="7810255">+</span>&nbsp;<span class="ident" id="7810257">chunk</span><span class="op" id="7810262">(</span><span class="string" id="7810263">&#34;&#34;</span><span class="op" id="7810265">)</span><span class="op" id="7810266">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810271">WantProxy</span><span class="op" id="7810280">:</span>&nbsp;<span class="string" id="7810282">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7810304">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7810309">&#34;Host:&nbsp;example.com\r\n&#34;</span>&nbsp;<span class="op" id="7810333">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7810338">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7810376">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7810381">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7810418">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810423">chunk</span><span class="op" id="7810428">(</span><span class="string" id="7810429">&#34;x&#34;</span><span class="op" id="7810432">)</span>&nbsp;<span class="op" id="7810434">+</span>&nbsp;<span class="ident" id="7810436">chunk</span><span class="op" id="7810441">(</span><span class="string" id="7810442">&#34;&#34;</span><span class="op" id="7810444">)</span><span class="op" id="7810445">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7810448">}</span><span class="op" id="7810449">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7810453">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;ContentLength&nbsp;of&nbsp;10&nbsp;but&nbsp;a&nbsp;5&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7810511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810515">Req</span><span class="op" id="7810518">:</span>&nbsp;<span class="ident" id="7810520">Request</span><span class="op" id="7810527">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810532">Method</span><span class="op" id="7810538">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810547">&#34;POST&#34;</span><span class="op" id="7810553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810558">URL</span><span class="op" id="7810561">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7810573">mustParseURL</span><span class="op" id="7810585">(</span><span class="string" id="7810586">&#34;/&#34;</span><span class="op" id="7810589">)</span><span class="op" id="7810590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810595">Host</span><span class="op" id="7810599">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810610">&#34;example.com&#34;</span><span class="op" id="7810623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810628">ProtoMajor</span><span class="op" id="7810638">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7810643">1</span><span class="op" id="7810644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810649">ProtoMinor</span><span class="op" id="7810659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7810664">1</span><span class="op" id="7810665">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810670">ContentLength</span><span class="op" id="7810683">:</span>&nbsp;<span class="num" id="7810685">10</span><span class="op" id="7810687">,</span>&nbsp;<span class="comment" id="7810689">//&nbsp;but&nbsp;we&#39;re&nbsp;going&nbsp;to&nbsp;send&nbsp;only&nbsp;5&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7810731">}</span><span class="op" id="7810732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810736">Body</span><span class="op" id="7810740">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7810747">[</span><span class="op" id="7810748">]</span><span class="builtintype" id="7810749">byte</span><span class="op" id="7810753">(</span><span class="string" id="7810754">&#34;12345&#34;</span><span class="op" id="7810761">)</span><span class="op" id="7810762">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810766">WantError</span><span class="op" id="7810775">:</span>&nbsp;<span class="ident" id="7810777">errors</span><span class="op" id="7810783">.</span><span class="ident" id="7810784">New</span><span class="op" id="7810787">(</span><span class="string" id="7810788">&#34;http:&nbsp;ContentLength=10&nbsp;with&nbsp;Body&nbsp;length&nbsp;5&#34;</span><span class="op" id="7810831">)</span><span class="op" id="7810832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7810835">}</span><span class="op" id="7810836">,</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7810840">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;ContentLength&nbsp;of&nbsp;4&nbsp;but&nbsp;an&nbsp;8&nbsp;byte&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7810898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810902">Req</span><span class="op" id="7810905">:</span>&nbsp;<span class="ident" id="7810907">Request</span><span class="op" id="7810914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810919">Method</span><span class="op" id="7810925">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810934">&#34;POST&#34;</span><span class="op" id="7810940">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810945">URL</span><span class="op" id="7810948">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7810960">mustParseURL</span><span class="op" id="7810972">(</span><span class="string" id="7810973">&#34;/&#34;</span><span class="op" id="7810976">)</span><span class="op" id="7810977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7810982">Host</span><span class="op" id="7810986">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7810997">&#34;example.com&#34;</span><span class="op" id="7811010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811015">ProtoMajor</span><span class="op" id="7811025">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7811030">1</span><span class="op" id="7811031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811036">ProtoMinor</span><span class="op" id="7811046">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7811051">1</span><span class="op" id="7811052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811057">ContentLength</span><span class="op" id="7811070">:</span>&nbsp;<span class="num" id="7811072">4</span><span class="op" id="7811073">,</span>&nbsp;<span class="comment" id="7811075">//&nbsp;but&nbsp;we&#39;re&nbsp;going&nbsp;to&nbsp;try&nbsp;to&nbsp;send&nbsp;8&nbsp;bytes</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7811119">}</span><span class="op" id="7811120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811124">Body</span><span class="op" id="7811128">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7811135">[</span><span class="op" id="7811136">]</span><span class="builtintype" id="7811137">byte</span><span class="op" id="7811141">(</span><span class="string" id="7811142">&#34;12345678&#34;</span><span class="op" id="7811152">)</span><span class="op" id="7811153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811157">WantError</span><span class="op" id="7811166">:</span>&nbsp;<span class="ident" id="7811168">errors</span><span class="op" id="7811174">.</span><span class="ident" id="7811175">New</span><span class="op" id="7811178">(</span><span class="string" id="7811179">&#34;http:&nbsp;ContentLength=4&nbsp;with&nbsp;Body&nbsp;length&nbsp;8&#34;</span><span class="op" id="7811221">)</span><span class="op" id="7811222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7811225">}</span><span class="op" id="7811226">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7811230">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;5&nbsp;ContentLength&nbsp;and&nbsp;nil&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7811279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811283">Req</span><span class="op" id="7811286">:</span>&nbsp;<span class="ident" id="7811288">Request</span><span class="op" id="7811295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811300">Method</span><span class="op" id="7811306">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811315">&#34;POST&#34;</span><span class="op" id="7811321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811326">URL</span><span class="op" id="7811329">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7811341">mustParseURL</span><span class="op" id="7811353">(</span><span class="string" id="7811354">&#34;/&#34;</span><span class="op" id="7811357">)</span><span class="op" id="7811358">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811363">Host</span><span class="op" id="7811367">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811378">&#34;example.com&#34;</span><span class="op" id="7811391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811396">ProtoMajor</span><span class="op" id="7811406">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7811411">1</span><span class="op" id="7811412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811417">ProtoMinor</span><span class="op" id="7811427">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7811432">1</span><span class="op" id="7811433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811438">ContentLength</span><span class="op" id="7811451">:</span>&nbsp;<span class="num" id="7811453">5</span><span class="op" id="7811454">,</span>&nbsp;<span class="comment" id="7811456">//&nbsp;but&nbsp;we&#39;ll&nbsp;omit&nbsp;the&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7811485">}</span><span class="op" id="7811486">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811490">WantError</span><span class="op" id="7811499">:</span>&nbsp;<span class="ident" id="7811501">errors</span><span class="op" id="7811507">.</span><span class="ident" id="7811508">New</span><span class="op" id="7811511">(</span><span class="string" id="7811512">&#34;http:&nbsp;Request.ContentLength=5&nbsp;with&nbsp;nil&nbsp;Body&#34;</span><span class="op" id="7811557">)</span><span class="op" id="7811558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7811561">}</span><span class="op" id="7811562">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7811566">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;body&nbsp;with&nbsp;1&nbsp;byte&nbsp;content&nbsp;and&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7811646">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811650">Req</span><span class="op" id="7811653">:</span>&nbsp;<span class="ident" id="7811655">Request</span><span class="op" id="7811662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811667">Method</span><span class="op" id="7811673">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811682">&#34;POST&#34;</span><span class="op" id="7811688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811693">URL</span><span class="op" id="7811696">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7811708">mustParseURL</span><span class="op" id="7811720">(</span><span class="string" id="7811721">&#34;/&#34;</span><span class="op" id="7811724">)</span><span class="op" id="7811725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811730">Host</span><span class="op" id="7811734">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7811745">&#34;example.com&#34;</span><span class="op" id="7811758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811763">ProtoMajor</span><span class="op" id="7811773">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7811778">1</span><span class="op" id="7811779">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811784">ProtoMinor</span><span class="op" id="7811794">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7811799">1</span><span class="op" id="7811800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811805">ContentLength</span><span class="op" id="7811818">:</span>&nbsp;<span class="num" id="7811820">0</span><span class="op" id="7811821">,</span>&nbsp;<span class="comment" id="7811823">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7811848">}</span><span class="op" id="7811849">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811854">Body</span><span class="op" id="7811858">:</span>&nbsp;<span class="keyword" id="7811860">func</span><span class="op" id="7811864">(</span><span class="op" id="7811865">)</span>&nbsp;<span class="ident" id="7811867">io</span><span class="op" id="7811869">.</span><span class="ident" id="7811870">ReadCloser</span>&nbsp;<span class="op" id="7811881">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811886">err</span>&nbsp;<span class="op" id="7811890">:=</span>&nbsp;<span class="ident" id="7811893">errors</span><span class="op" id="7811899">.</span><span class="ident" id="7811900">New</span><span class="op" id="7811903">(</span><span class="string" id="7811904">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="7811925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7811930">errReader</span>&nbsp;<span class="op" id="7811940">:=</span>&nbsp;<span class="op" id="7811943">&amp;</span><span class="ident" id="7811944">errorReader</span><span class="op" id="7811955">{</span><span class="ident" id="7811956">err</span><span class="op" id="7811959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7811964">return</span>&nbsp;<span class="ident" id="7811971">ioutil</span><span class="op" id="7811977">.</span><span class="ident" id="7811978">NopCloser</span><span class="op" id="7811987">(</span><span class="ident" id="7811988">io</span><span class="op" id="7811990">.</span><span class="ident" id="7811991">MultiReader</span><span class="op" id="7812002">(</span><span class="ident" id="7812003">strings</span><span class="op" id="7812010">.</span><span class="ident" id="7812011">NewReader</span><span class="op" id="7812020">(</span><span class="string" id="7812021">&#34;x&#34;</span><span class="op" id="7812024">)</span><span class="op" id="7812025">,</span>&nbsp;<span class="ident" id="7812027">errReader</span><span class="op" id="7812036">)</span><span class="op" id="7812037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7812041">}</span><span class="op" id="7812042">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812047">WantError</span><span class="op" id="7812056">:</span>&nbsp;<span class="ident" id="7812058">errors</span><span class="op" id="7812064">.</span><span class="ident" id="7812065">New</span><span class="op" id="7812068">(</span><span class="string" id="7812069">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="7812090">)</span><span class="op" id="7812091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7812094">}</span><span class="op" id="7812095">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7812099">//&nbsp;Request&nbsp;with&nbsp;a&nbsp;0&nbsp;ContentLength&nbsp;and&nbsp;a&nbsp;body&nbsp;without&nbsp;content&nbsp;and&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7812175">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812179">Req</span><span class="op" id="7812182">:</span>&nbsp;<span class="ident" id="7812184">Request</span><span class="op" id="7812191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812196">Method</span><span class="op" id="7812202">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7812211">&#34;POST&#34;</span><span class="op" id="7812217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812222">URL</span><span class="op" id="7812225">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812237">mustParseURL</span><span class="op" id="7812249">(</span><span class="string" id="7812250">&#34;/&#34;</span><span class="op" id="7812253">)</span><span class="op" id="7812254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812259">Host</span><span class="op" id="7812263">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7812274">&#34;example.com&#34;</span><span class="op" id="7812287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812292">ProtoMajor</span><span class="op" id="7812302">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7812307">1</span><span class="op" id="7812308">,</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812313">ProtoMinor</span><span class="op" id="7812323">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7812328">1</span><span class="op" id="7812329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812334">ContentLength</span><span class="op" id="7812347">:</span>&nbsp;<span class="num" id="7812349">0</span><span class="op" id="7812350">,</span>&nbsp;<span class="comment" id="7812352">//&nbsp;as&nbsp;if&nbsp;unset&nbsp;by&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7812377">}</span><span class="op" id="7812378">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812383">Body</span><span class="op" id="7812387">:</span>&nbsp;<span class="keyword" id="7812389">func</span><span class="op" id="7812393">(</span><span class="op" id="7812394">)</span>&nbsp;<span class="ident" id="7812396">io</span><span class="op" id="7812398">.</span><span class="ident" id="7812399">ReadCloser</span>&nbsp;<span class="op" id="7812410">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812415">err</span>&nbsp;<span class="op" id="7812419">:=</span>&nbsp;<span class="ident" id="7812422">errors</span><span class="op" id="7812428">.</span><span class="ident" id="7812429">New</span><span class="op" id="7812432">(</span><span class="string" id="7812433">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="7812454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812459">errReader</span>&nbsp;<span class="op" id="7812469">:=</span>&nbsp;<span class="op" id="7812472">&amp;</span><span class="ident" id="7812473">errorReader</span><span class="op" id="7812484">{</span><span class="ident" id="7812485">err</span><span class="op" id="7812488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7812493">return</span>&nbsp;<span class="ident" id="7812500">ioutil</span><span class="op" id="7812506">.</span><span class="ident" id="7812507">NopCloser</span><span class="op" id="7812516">(</span><span class="ident" id="7812517">errReader</span><span class="op" id="7812526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7812530">}</span><span class="op" id="7812531">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812536">WantError</span><span class="op" id="7812545">:</span>&nbsp;<span class="ident" id="7812547">errors</span><span class="op" id="7812553">.</span><span class="ident" id="7812554">New</span><span class="op" id="7812557">(</span><span class="string" id="7812558">&#34;Custom&nbsp;reader&nbsp;error&#34;</span><span class="op" id="7812579">)</span><span class="op" id="7812580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7812583">}</span><span class="op" id="7812584">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7812588">//&nbsp;Verify&nbsp;that&nbsp;DumpRequest&nbsp;preserves&nbsp;the&nbsp;HTTP&nbsp;version&nbsp;number,&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;Host,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7812671">//&nbsp;and&nbsp;doesn&#39;t&nbsp;add&nbsp;a&nbsp;User-Agent.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7812705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812709">Req</span><span class="op" id="7812712">:</span>&nbsp;<span class="ident" id="7812714">Request</span><span class="op" id="7812721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812726">Method</span><span class="op" id="7812732">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7812738">&#34;GET&#34;</span><span class="op" id="7812743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812748">URL</span><span class="op" id="7812751">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7812760">mustParseURL</span><span class="op" id="7812772">(</span><span class="string" id="7812773">&#34;/foo&#34;</span><span class="op" id="7812779">)</span><span class="op" id="7812780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812785">ProtoMajor</span><span class="op" id="7812795">:</span>&nbsp;<span class="num" id="7812797">1</span><span class="op" id="7812798">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812803">ProtoMinor</span><span class="op" id="7812813">:</span>&nbsp;<span class="num" id="7812815">0</span><span class="op" id="7812816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812821">Header</span><span class="op" id="7812827">:</span>&nbsp;<span class="ident" id="7812829">Header</span><span class="op" id="7812835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7812841">&#34;X-Foo&#34;</span><span class="op" id="7812848">:</span>&nbsp;<span class="op" id="7812850">[</span><span class="op" id="7812851">]</span><span class="builtintype" id="7812852">string</span><span class="op" id="7812858">{</span><span class="string" id="7812859">&#34;X-Bar&#34;</span><span class="op" id="7812866">}</span><span class="op" id="7812867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7812872">}</span><span class="op" id="7812873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7812877">}</span><span class="op" id="7812878">,</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7812883">WantWrite</span><span class="op" id="7812892">:</span>&nbsp;<span class="string" id="7812894">&#34;GET&nbsp;/foo&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7812918">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7812923">&#34;Host:&nbsp;\r\n&#34;</span>&nbsp;<span class="op" id="7812936">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7812941">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7812979">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7812984">&#34;X-Foo:&nbsp;X-Bar\r\n\r\n&#34;</span><span class="op" id="7813006">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813009">}</span><span class="op" id="7813010">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7813014">//&nbsp;If&nbsp;no&nbsp;Request.Host&nbsp;and&nbsp;no&nbsp;Request.URL.Host,&nbsp;we&nbsp;send</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7813070">//&nbsp;an&nbsp;empty&nbsp;Host&nbsp;header,&nbsp;and&nbsp;don&#39;t&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7813110">//&nbsp;Request.Header[&#34;Host&#34;].&nbsp;This&nbsp;is&nbsp;just&nbsp;testing&nbsp;that</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7813164">//&nbsp;we&nbsp;don&#39;t&nbsp;change&nbsp;Go&nbsp;1.0&nbsp;behavior.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813205">Req</span><span class="op" id="7813208">:</span>&nbsp;<span class="ident" id="7813210">Request</span><span class="op" id="7813217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813222">Method</span><span class="op" id="7813228">:</span>&nbsp;<span class="string" id="7813230">&#34;GET&#34;</span><span class="op" id="7813235">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813240">Host</span><span class="op" id="7813244">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7813248">&#34;&#34;</span><span class="op" id="7813250">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813255">URL</span><span class="op" id="7813258">:</span>&nbsp;<span class="op" id="7813260">&amp;</span><span class="ident" id="7813261">url</span><span class="op" id="7813264">.</span><span class="ident" id="7813265">URL</span><span class="op" id="7813268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813274">Scheme</span><span class="op" id="7813280">:</span>&nbsp;<span class="string" id="7813282">&#34;http&#34;</span><span class="op" id="7813288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813294">Host</span><span class="op" id="7813298">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7813302">&#34;&#34;</span><span class="op" id="7813304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813310">Path</span><span class="op" id="7813314">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7813318">&#34;/search&#34;</span><span class="op" id="7813327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813332">}</span><span class="op" id="7813333">,</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813338">ProtoMajor</span><span class="op" id="7813348">:</span>&nbsp;<span class="num" id="7813350">1</span><span class="op" id="7813351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813356">ProtoMinor</span><span class="op" id="7813366">:</span>&nbsp;<span class="num" id="7813368">1</span><span class="op" id="7813369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813374">Header</span><span class="op" id="7813380">:</span>&nbsp;<span class="ident" id="7813382">Header</span><span class="op" id="7813388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7813394">&#34;Host&#34;</span><span class="op" id="7813400">:</span>&nbsp;<span class="op" id="7813402">[</span><span class="op" id="7813403">]</span><span class="builtintype" id="7813404">string</span><span class="op" id="7813410">{</span><span class="string" id="7813411">&#34;bad.example.com&#34;</span><span class="op" id="7813428">}</span><span class="op" id="7813429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813434">}</span><span class="op" id="7813435">,</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813439">}</span><span class="op" id="7813440">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813445">WantWrite</span><span class="op" id="7813454">:</span>&nbsp;<span class="string" id="7813456">&#34;GET&nbsp;/search&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7813483">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7813488">&#34;Host:&nbsp;\r\n&#34;</span>&nbsp;<span class="op" id="7813501">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7813506">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n\r\n&#34;</span><span class="op" id="7813547">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813550">}</span><span class="op" id="7813551">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7813555">//&nbsp;Opaque&nbsp;test&nbsp;#1&nbsp;from&nbsp;golang.org/issue/4860</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813605">Req</span><span class="op" id="7813608">:</span>&nbsp;<span class="ident" id="7813610">Request</span><span class="op" id="7813617">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813622">Method</span><span class="op" id="7813628">:</span>&nbsp;<span class="string" id="7813630">&#34;GET&#34;</span><span class="op" id="7813635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813640">URL</span><span class="op" id="7813643">:</span>&nbsp;<span class="op" id="7813645">&amp;</span><span class="ident" id="7813646">url</span><span class="op" id="7813649">.</span><span class="ident" id="7813650">URL</span><span class="op" id="7813653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813659">Scheme</span><span class="op" id="7813665">:</span>&nbsp;<span class="string" id="7813667">&#34;http&#34;</span><span class="op" id="7813673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813679">Host</span><span class="op" id="7813683">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7813687">&#34;www.google.com&#34;</span><span class="op" id="7813703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813709">Opaque</span><span class="op" id="7813715">:</span>&nbsp;<span class="string" id="7813717">&#34;/%2F/%2F/&#34;</span><span class="op" id="7813728">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813733">}</span><span class="op" id="7813734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813739">ProtoMajor</span><span class="op" id="7813749">:</span>&nbsp;<span class="num" id="7813751">1</span><span class="op" id="7813752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813757">ProtoMinor</span><span class="op" id="7813767">:</span>&nbsp;<span class="num" id="7813769">1</span><span class="op" id="7813770">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813775">Header</span><span class="op" id="7813781">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7813787">Header</span><span class="op" id="7813793">{</span><span class="op" id="7813794">}</span><span class="op" id="7813795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813799">}</span><span class="op" id="7813800">,</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813805">WantWrite</span><span class="op" id="7813814">:</span>&nbsp;<span class="string" id="7813816">&#34;GET&nbsp;/%2F/%2F/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7813845">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7813850">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7813877">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7813882">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n\r\n&#34;</span><span class="op" id="7813923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813926">}</span><span class="op" id="7813927">,</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7813931">//&nbsp;Opaque&nbsp;test&nbsp;#2&nbsp;from&nbsp;golang.org/issue/4860</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7813977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813981">Req</span><span class="op" id="7813984">:</span>&nbsp;<span class="ident" id="7813986">Request</span><span class="op" id="7813993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7813998">Method</span><span class="op" id="7814004">:</span>&nbsp;<span class="string" id="7814006">&#34;GET&#34;</span><span class="op" id="7814011">,</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814016">URL</span><span class="op" id="7814019">:</span>&nbsp;<span class="op" id="7814021">&amp;</span><span class="ident" id="7814022">url</span><span class="op" id="7814025">.</span><span class="ident" id="7814026">URL</span><span class="op" id="7814029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814035">Scheme</span><span class="op" id="7814041">:</span>&nbsp;<span class="string" id="7814043">&#34;http&#34;</span><span class="op" id="7814049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814055">Host</span><span class="op" id="7814059">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7814063">&#34;x.google.com&#34;</span><span class="op" id="7814077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814083">Opaque</span><span class="op" id="7814089">:</span>&nbsp;<span class="string" id="7814091">&#34;//y.google.com/%2F/%2F/&#34;</span><span class="op" id="7814116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7814121">}</span><span class="op" id="7814122">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814127">ProtoMajor</span><span class="op" id="7814137">:</span>&nbsp;<span class="num" id="7814139">1</span><span class="op" id="7814140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814145">ProtoMinor</span><span class="op" id="7814155">:</span>&nbsp;<span class="num" id="7814157">1</span><span class="op" id="7814158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814163">Header</span><span class="op" id="7814169">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7814175">Header</span><span class="op" id="7814181">{</span><span class="op" id="7814182">}</span><span class="op" id="7814183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7814187">}</span><span class="op" id="7814188">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814193">WantWrite</span><span class="op" id="7814202">:</span>&nbsp;<span class="string" id="7814204">&#34;GET&nbsp;http://y.google.com/%2F/%2F/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7814252">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7814257">&#34;Host:&nbsp;x.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7814282">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7814287">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n\r\n&#34;</span><span class="op" id="7814328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7814331">}</span><span class="op" id="7814332">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7814336">//&nbsp;Testing&nbsp;custom&nbsp;case&nbsp;in&nbsp;header&nbsp;keys.&nbsp;Issue&nbsp;5022.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7814388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814392">Req</span><span class="op" id="7814395">:</span>&nbsp;<span class="ident" id="7814397">Request</span><span class="op" id="7814404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814409">Method</span><span class="op" id="7814415">:</span>&nbsp;<span class="string" id="7814417">&#34;GET&#34;</span><span class="op" id="7814422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814427">URL</span><span class="op" id="7814430">:</span>&nbsp;<span class="op" id="7814432">&amp;</span><span class="ident" id="7814433">url</span><span class="op" id="7814436">.</span><span class="ident" id="7814437">URL</span><span class="op" id="7814440">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814446">Scheme</span><span class="op" id="7814452">:</span>&nbsp;<span class="string" id="7814454">&#34;http&#34;</span><span class="op" id="7814460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814466">Host</span><span class="op" id="7814470">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7814474">&#34;www.google.com&#34;</span><span class="op" id="7814490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814496">Path</span><span class="op" id="7814500">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7814504">&#34;/&#34;</span><span class="op" id="7814507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7814512">}</span><span class="op" id="7814513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814518">Proto</span><span class="op" id="7814523">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7814530">&#34;HTTP/1.1&#34;</span><span class="op" id="7814540">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814545">ProtoMajor</span><span class="op" id="7814555">:</span>&nbsp;<span class="num" id="7814557">1</span><span class="op" id="7814558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814563">ProtoMinor</span><span class="op" id="7814573">:</span>&nbsp;<span class="num" id="7814575">1</span><span class="op" id="7814576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814581">Header</span><span class="op" id="7814587">:</span>&nbsp;<span class="ident" id="7814589">Header</span><span class="op" id="7814595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7814601">&#34;ALL-CAPS&#34;</span><span class="op" id="7814611">:</span>&nbsp;<span class="op" id="7814613">{</span><span class="string" id="7814614">&#34;x&#34;</span><span class="op" id="7814617">}</span><span class="op" id="7814618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7814623">}</span><span class="op" id="7814624">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7814628">}</span><span class="op" id="7814629">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814634">WantWrite</span><span class="op" id="7814643">:</span>&nbsp;<span class="string" id="7814645">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7814666">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7814671">&#34;Host:&nbsp;www.google.com\r\n&#34;</span>&nbsp;<span class="op" id="7814698">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7814703">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7814741">+</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7814746">&#34;ALL-CAPS:&nbsp;x\r\n&#34;</span>&nbsp;<span class="op" id="7814764">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7814769">&#34;\r\n&#34;</span><span class="op" id="7814775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7814778">}</span><span class="op" id="7814779">,</span><br>
<span class="lineno"></span><span class="op" id="7814781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span><span class="keyword" id="7814784">func</span>&nbsp;<span class="ident" id="7814789">TestRequestWrite</span><span class="op" id="7814805">(</span><span class="ident" id="7814806">t</span>&nbsp;<span class="op" id="7814808">*</span><span class="ident" id="7814809">testing</span><span class="op" id="7814816">.</span><span class="ident" id="7814817">T</span><span class="op" id="7814818">)</span>&nbsp;<span class="op" id="7814820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7814823">for</span>&nbsp;<span class="ident" id="7814827">i</span>&nbsp;<span class="op" id="7814829">:=</span>&nbsp;<span class="keyword" id="7814832">range</span>&nbsp;<span class="ident" id="7814838">reqWriteTests</span>&nbsp;<span class="op" id="7814852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814856">tt</span>&nbsp;<span class="op" id="7814859">:=</span>&nbsp;<span class="op" id="7814862">&amp;</span><span class="ident" id="7814863">reqWriteTests</span><span class="op" id="7814876">[</span><span class="ident" id="7814877">i</span><span class="op" id="7814878">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814883">setBody</span>&nbsp;<span class="op" id="7814891">:=</span>&nbsp;<span class="keyword" id="7814894">func</span><span class="op" id="7814898">(</span><span class="op" id="7814899">)</span>&nbsp;<span class="op" id="7814901">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7814906">if</span>&nbsp;<span class="ident" id="7814909">tt</span><span class="op" id="7814911">.</span><span class="ident" id="7814912">Body</span>&nbsp;<span class="op" id="7814917">==</span>&nbsp;<span class="ident" id="7814920">nil</span>&nbsp;<span class="op" id="7814924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7814930">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7814940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7814945">switch</span>&nbsp;<span class="ident" id="7814952">b</span>&nbsp;<span class="op" id="7814954">:=</span>&nbsp;<span class="ident" id="7814957">tt</span><span class="op" id="7814959">.</span><span class="ident" id="7814960">Body</span><span class="op" id="7814964">.</span><span class="op" id="7814965">(</span><span class="keyword" id="7814966">type</span><span class="op" id="7814970">)</span>&nbsp;<span class="op" id="7814972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7814977">case</span>&nbsp;<span class="op" id="7814982">[</span><span class="op" id="7814983">]</span><span class="builtintype" id="7814984">byte</span><span class="op" id="7814988">:</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7814994">tt</span><span class="op" id="7814996">.</span><span class="ident" id="7814997">Req</span><span class="op" id="7815000">.</span><span class="ident" id="7815001">Body</span>&nbsp;<span class="op" id="7815006">=</span>&nbsp;<span class="ident" id="7815008">ioutil</span><span class="op" id="7815014">.</span><span class="ident" id="7815015">NopCloser</span><span class="op" id="7815024">(</span><span class="ident" id="7815025">bytes</span><span class="op" id="7815030">.</span><span class="ident" id="7815031">NewReader</span><span class="op" id="7815040">(</span><span class="ident" id="7815041">b</span><span class="op" id="7815042">)</span><span class="op" id="7815043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815048">case</span>&nbsp;<span class="keyword" id="7815053">func</span><span class="op" id="7815057">(</span><span class="op" id="7815058">)</span>&nbsp;<span class="ident" id="7815060">io</span><span class="op" id="7815062">.</span><span class="ident" id="7815063">ReadCloser</span><span class="op" id="7815073">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815079">tt</span><span class="op" id="7815081">.</span><span class="ident" id="7815082">Req</span><span class="op" id="7815085">.</span><span class="ident" id="7815086">Body</span>&nbsp;<span class="op" id="7815091">=</span>&nbsp;<span class="ident" id="7815093">b</span><span class="op" id="7815094">(</span><span class="op" id="7815095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815104">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815108">setBody</span><span class="op" id="7815115">(</span><span class="op" id="7815116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815120">if</span>&nbsp;<span class="ident" id="7815123">tt</span><span class="op" id="7815125">.</span><span class="ident" id="7815126">Req</span><span class="op" id="7815129">.</span><span class="ident" id="7815130">Header</span>&nbsp;<span class="op" id="7815137">==</span>&nbsp;<span class="ident" id="7815140">nil</span>&nbsp;<span class="op" id="7815144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815149">tt</span><span class="op" id="7815151">.</span><span class="ident" id="7815152">Req</span><span class="op" id="7815155">.</span><span class="ident" id="7815156">Header</span>&nbsp;<span class="op" id="7815163">=</span>&nbsp;<span class="builtinfunc" id="7815165">make</span><span class="op" id="7815169">(</span><span class="ident" id="7815170">Header</span><span class="op" id="7815176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815180">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815185">var</span>&nbsp;<span class="ident" id="7815189">braw</span>&nbsp;<span class="ident" id="7815194">bytes</span><span class="op" id="7815199">.</span><span class="ident" id="7815200">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815209">err</span>&nbsp;<span class="op" id="7815213">:=</span>&nbsp;<span class="ident" id="7815216">tt</span><span class="op" id="7815218">.</span><span class="ident" id="7815219">Req</span><span class="op" id="7815222">.</span><span class="ident" id="7815223">Write</span><span class="op" id="7815228">(</span><span class="op" id="7815229">&amp;</span><span class="ident" id="7815230">braw</span><span class="op" id="7815234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815238">if</span>&nbsp;<span class="ident" id="7815241">g</span><span class="op" id="7815242">,</span>&nbsp;<span class="ident" id="7815244">e</span>&nbsp;<span class="op" id="7815246">:=</span>&nbsp;<span class="ident" id="7815249">fmt</span><span class="op" id="7815252">.</span><span class="ident" id="7815253">Sprintf</span><span class="op" id="7815260">(</span><span class="string" id="7815261">&#34;%v&#34;</span><span class="op" id="7815265">,</span>&nbsp;<span class="ident" id="7815267">err</span><span class="op" id="7815270">)</span><span class="op" id="7815271">,</span>&nbsp;<span class="ident" id="7815273">fmt</span><span class="op" id="7815276">.</span><span class="ident" id="7815277">Sprintf</span><span class="op" id="7815284">(</span><span class="string" id="7815285">&#34;%v&#34;</span><span class="op" id="7815289">,</span>&nbsp;<span class="ident" id="7815291">tt</span><span class="op" id="7815293">.</span><span class="ident" id="7815294">WantError</span><span class="op" id="7815303">)</span><span class="op" id="7815304">;</span>&nbsp;<span class="ident" id="7815306">g</span>&nbsp;<span class="op" id="7815308">!=</span>&nbsp;<span class="ident" id="7815311">e</span>&nbsp;<span class="op" id="7815313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815318">t</span><span class="op" id="7815319">.</span><span class="ident" id="7815320">Errorf</span><span class="op" id="7815326">(</span><span class="string" id="7815327">&#34;writing&nbsp;#%d,&nbsp;err&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7815359">,</span>&nbsp;<span class="ident" id="7815361">i</span><span class="op" id="7815362">,</span>&nbsp;<span class="ident" id="7815364">g</span><span class="op" id="7815365">,</span>&nbsp;<span class="ident" id="7815367">e</span><span class="op" id="7815368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815373">continue</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815388">if</span>&nbsp;<span class="ident" id="7815391">err</span>&nbsp;<span class="op" id="7815395">!=</span>&nbsp;<span class="ident" id="7815398">nil</span>&nbsp;<span class="op" id="7815402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815407">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815418">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815423">if</span>&nbsp;<span class="ident" id="7815426">tt</span><span class="op" id="7815428">.</span><span class="ident" id="7815429">WantWrite</span>&nbsp;<span class="op" id="7815439">!=</span>&nbsp;<span class="string" id="7815442">&#34;&#34;</span>&nbsp;<span class="op" id="7815445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815450">sraw</span>&nbsp;<span class="op" id="7815455">:=</span>&nbsp;<span class="ident" id="7815458">braw</span><span class="op" id="7815462">.</span><span class="ident" id="7815463">String</span><span class="op" id="7815469">(</span><span class="op" id="7815470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815475">if</span>&nbsp;<span class="ident" id="7815478">sraw</span>&nbsp;<span class="op" id="7815483">!=</span>&nbsp;<span class="ident" id="7815486">tt</span><span class="op" id="7815488">.</span><span class="ident" id="7815489">WantWrite</span>&nbsp;<span class="op" id="7815499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815505">t</span><span class="op" id="7815506">.</span><span class="ident" id="7815507">Errorf</span><span class="op" id="7815513">(</span><span class="string" id="7815514">&#34;Test&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7815551">,</span>&nbsp;<span class="ident" id="7815553">i</span><span class="op" id="7815554">,</span>&nbsp;<span class="ident" id="7815556">tt</span><span class="op" id="7815558">.</span><span class="ident" id="7815559">WantWrite</span><span class="op" id="7815568">,</span>&nbsp;<span class="ident" id="7815570">sraw</span><span class="op" id="7815574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815580">continue</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815601">if</span>&nbsp;<span class="ident" id="7815604">tt</span><span class="op" id="7815606">.</span><span class="ident" id="7815607">WantProxy</span>&nbsp;<span class="op" id="7815617">!=</span>&nbsp;<span class="string" id="7815620">&#34;&#34;</span>&nbsp;<span class="op" id="7815623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815628">setBody</span><span class="op" id="7815635">(</span><span class="op" id="7815636">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815641">var</span>&nbsp;<span class="ident" id="7815645">praw</span>&nbsp;<span class="ident" id="7815650">bytes</span><span class="op" id="7815655">.</span><span class="ident" id="7815656">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815666">err</span>&nbsp;<span class="op" id="7815670">=</span>&nbsp;<span class="ident" id="7815672">tt</span><span class="op" id="7815674">.</span><span class="ident" id="7815675">Req</span><span class="op" id="7815678">.</span><span class="ident" id="7815679">WriteProxy</span><span class="op" id="7815689">(</span><span class="op" id="7815690">&amp;</span><span class="ident" id="7815691">praw</span><span class="op" id="7815695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815700">if</span>&nbsp;<span class="ident" id="7815703">err</span>&nbsp;<span class="op" id="7815707">!=</span>&nbsp;<span class="ident" id="7815710">nil</span>&nbsp;<span class="op" id="7815714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815720">t</span><span class="op" id="7815721">.</span><span class="ident" id="7815722">Errorf</span><span class="op" id="7815728">(</span><span class="string" id="7815729">&#34;WriteProxy&nbsp;#%d:&nbsp;%s&#34;</span><span class="op" id="7815749">,</span>&nbsp;<span class="ident" id="7815751">i</span><span class="op" id="7815752">,</span>&nbsp;<span class="ident" id="7815754">err</span><span class="op" id="7815757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815763">continue</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815780">sraw</span>&nbsp;<span class="op" id="7815785">:=</span>&nbsp;<span class="ident" id="7815788">praw</span><span class="op" id="7815792">.</span><span class="ident" id="7815793">String</span><span class="op" id="7815799">(</span><span class="op" id="7815800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815805">if</span>&nbsp;<span class="ident" id="7815808">sraw</span>&nbsp;<span class="op" id="7815813">!=</span>&nbsp;<span class="ident" id="7815816">tt</span><span class="op" id="7815818">.</span><span class="ident" id="7815819">WantProxy</span>&nbsp;<span class="op" id="7815829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815835">t</span><span class="op" id="7815836">.</span><span class="ident" id="7815837">Errorf</span><span class="op" id="7815843">(</span><span class="string" id="7815844">&#34;Test&nbsp;Proxy&nbsp;%d,&nbsp;expecting:\n%s\nGot:\n%s\n&#34;</span><span class="op" id="7815887">,</span>&nbsp;<span class="ident" id="7815889">i</span><span class="op" id="7815890">,</span>&nbsp;<span class="ident" id="7815892">tt</span><span class="op" id="7815894">.</span><span class="ident" id="7815895">WantProxy</span><span class="op" id="7815904">,</span>&nbsp;<span class="ident" id="7815906">sraw</span><span class="op" id="7815910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7815916">continue</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7815935">}</span><br>
<span class="lineno"></span><span class="op" id="7815937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="keyword" id="7815940">type</span>&nbsp;<span class="ident" id="7815945">closeChecker</span>&nbsp;<span class="keyword" id="7815958">struct</span>&nbsp;<span class="op" id="7815965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815968">io</span><span class="op" id="7815970">.</span><span class="ident" id="7815971">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7815979">closed</span>&nbsp;<span class="builtintype" id="7815986">bool</span><br>
<span class="lineno"></span><span class="op" id="7815991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span><span class="keyword" id="7815994">func</span>&nbsp;<span class="op" id="7815999">(</span><span class="ident" id="7816000">rc</span>&nbsp;<span class="op" id="7816003">*</span><span class="ident" id="7816004">closeChecker</span><span class="op" id="7816016">)</span>&nbsp;<span class="ident" id="7816018">Close</span><span class="op" id="7816023">(</span><span class="op" id="7816024">)</span>&nbsp;<span class="builtintype" id="7816026">error</span>&nbsp;<span class="op" id="7816032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7816035">rc</span><span class="op" id="7816037">.</span><span class="ident" id="7816038">closed</span>&nbsp;<span class="op" id="7816045">=</span>&nbsp;<span class="builtintype" id="7816047">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7816053">return</span>&nbsp;<span class="ident" id="7816060">nil</span><br>
<span class="lineno"></span><span class="op" id="7816064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="7816067">//&nbsp;TestRequestWriteClosesBody&nbsp;tests&nbsp;that&nbsp;Request.Write&nbsp;does&nbsp;close&nbsp;its&nbsp;request.Body.</span><br>
<span class="lineno"></span><span class="comment" id="7816151">//&nbsp;It&nbsp;also&nbsp;indirectly&nbsp;tests&nbsp;NewRequest&nbsp;and&nbsp;that&nbsp;it&nbsp;doesn&#39;t&nbsp;wrap&nbsp;an&nbsp;existing&nbsp;Closer</span><br>
<span class="lineno"></span><span class="comment" id="7816234">//&nbsp;inside&nbsp;a&nbsp;NopCloser,&nbsp;and&nbsp;that&nbsp;it&nbsp;serializes&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno"></span><span class="keyword" id="7816294">func</span>&nbsp;<span class="ident" id="7816299">TestRequestWriteClosesBody</span><span class="op" id="7816325">(</span><span class="ident" id="7816326">t</span>&nbsp;<span class="op" id="7816328">*</span><span class="ident" id="7816329">testing</span><span class="op" id="7816336">.</span><span class="ident" id="7816337">T</span><span class="op" id="7816338">)</span>&nbsp;<span class="op" id="7816340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7816343">rc</span>&nbsp;<span class="op" id="7816346">:=</span>&nbsp;<span class="op" id="7816349">&amp;</span><span class="ident" id="7816350">closeChecker</span><span class="op" id="7816362">{</span><span class="ident" id="7816363">Reader</span><span class="op" id="7816369">:</span>&nbsp;<span class="ident" id="7816371">strings</span><span class="op" id="7816378">.</span><span class="ident" id="7816379">NewReader</span><span class="op" id="7816388">(</span><span class="string" id="7816389">&#34;my&nbsp;body&#34;</span><span class="op" id="7816398">)</span><span class="op" id="7816399">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7816402">req</span><span class="op" id="7816405">,</span>&nbsp;<span class="ident" id="7816407">_</span>&nbsp;<span class="op" id="7816409">:=</span>&nbsp;<span class="ident" id="7816412">NewRequest</span><span class="op" id="7816422">(</span><span class="string" id="7816423">&#34;POST&#34;</span><span class="op" id="7816429">,</span>&nbsp;<span class="string" id="7816431">&#34;http://foo.com/&#34;</span><span class="op" id="7816448">,</span>&nbsp;<span class="ident" id="7816450">rc</span><span class="op" id="7816452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7816455">if</span>&nbsp;<span class="ident" id="7816458">req</span><span class="op" id="7816461">.</span><span class="ident" id="7816462">ContentLength</span>&nbsp;<span class="op" id="7816476">!=</span>&nbsp;<span class="num" id="7816479">0</span>&nbsp;<span class="op" id="7816481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7816485">t</span><span class="op" id="7816486">.</span><span class="ident" id="7816487">Errorf</span><span class="op" id="7816493">(</span><span class="string" id="7816494">&#34;got&nbsp;req.ContentLength&nbsp;%d,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7816528">,</span>&nbsp;<span class="ident" id="7816530">req</span><span class="op" id="7816533">.</span><span class="ident" id="7816534">ContentLength</span><span class="op" id="7816547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7816550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7816553">buf</span>&nbsp;<span class="op" id="7816557">:=</span>&nbsp;<span class="builtinfunc" id="7816560">new</span><span class="op" id="7816563">(</span><span class="ident" id="7816564">bytes</span><span class="op" id="7816569">.</span><span class="ident" id="7816570">Buffer</span><span class="op" id="7816576">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7816579">req</span><span class="op" id="7816582">.</span><span class="ident" id="7816583">Write</span><span class="op" id="7816588">(</span><span class="ident" id="7816589">buf</span><span class="op" id="7816592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7816595">if</span>&nbsp;<span class="op" id="7816598">!</span><span class="ident" id="7816599">rc</span><span class="op" id="7816601">.</span><span class="ident" id="7816602">closed</span>&nbsp;<span class="op" id="7816609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7816613">t</span><span class="op" id="7816614">.</span><span class="ident" id="7816615">Error</span><span class="op" id="7816620">(</span><span class="string" id="7816621">&#34;body&nbsp;not&nbsp;closed&nbsp;after&nbsp;write&#34;</span><span class="op" id="7816650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7816653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7816656">expected</span>&nbsp;<span class="op" id="7816665">:=</span>&nbsp;<span class="string" id="7816668">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7816690">+</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7816694">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="7816714">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7816718">&#34;User-Agent:&nbsp;Go&nbsp;1.1&nbsp;package&nbsp;http\r\n&#34;</span>&nbsp;<span class="op" id="7816756">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7816760">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7816797">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7816801">//&nbsp;TODO:&nbsp;currently&nbsp;we&nbsp;don&#39;t&nbsp;buffer&nbsp;before&nbsp;chunking,&nbsp;so&nbsp;we&nbsp;get&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7816867">//&nbsp;single&nbsp;&#34;m&#34;&nbsp;chunk&nbsp;before&nbsp;the&nbsp;other&nbsp;chunks,&nbsp;as&nbsp;this&nbsp;was&nbsp;the&nbsp;1-byte</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7816937">//&nbsp;read&nbsp;from&nbsp;our&nbsp;MultiReader&nbsp;where&nbsp;we&nbsp;stiched&nbsp;the&nbsp;Body&nbsp;back&nbsp;together</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7817008">//&nbsp;after&nbsp;sniffing&nbsp;whether&nbsp;the&nbsp;Body&nbsp;was&nbsp;0&nbsp;bytes&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7817065">chunk</span><span class="op" id="7817070">(</span><span class="string" id="7817071">&#34;m&#34;</span><span class="op" id="7817074">)</span>&nbsp;<span class="op" id="7817076">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7817080">chunk</span><span class="op" id="7817085">(</span><span class="string" id="7817086">&#34;y&nbsp;body&#34;</span><span class="op" id="7817094">)</span>&nbsp;<span class="op" id="7817096">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7817100">chunk</span><span class="op" id="7817105">(</span><span class="string" id="7817106">&#34;&#34;</span><span class="op" id="7817108">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7817111">if</span>&nbsp;<span class="ident" id="7817114">buf</span><span class="op" id="7817117">.</span><span class="ident" id="7817118">String</span><span class="op" id="7817124">(</span><span class="op" id="7817125">)</span>&nbsp;<span class="op" id="7817127">!=</span>&nbsp;<span class="ident" id="7817130">expected</span>&nbsp;<span class="op" id="7817139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7817143">t</span><span class="op" id="7817144">.</span><span class="ident" id="7817145">Errorf</span><span class="op" id="7817151">(</span><span class="string" id="7817152">&#34;write:\n&nbsp;got:&nbsp;%s\nwant:&nbsp;%s&#34;</span><span class="op" id="7817180">,</span>&nbsp;<span class="ident" id="7817182">buf</span><span class="op" id="7817185">.</span><span class="ident" id="7817186">String</span><span class="op" id="7817192">(</span><span class="op" id="7817193">)</span><span class="op" id="7817194">,</span>&nbsp;<span class="ident" id="7817196">expected</span><span class="op" id="7817204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7817207">}</span><br>
<span class="lineno"></span><span class="op" id="7817209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="7817212">func</span>&nbsp;<span class="ident" id="7817217">chunk</span><span class="op" id="7817222">(</span><span class="ident" id="7817223">s</span>&nbsp;<span class="builtintype" id="7817225">string</span><span class="op" id="7817231">)</span>&nbsp;<span class="builtintype" id="7817233">string</span>&nbsp;<span class="op" id="7817240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7817243">return</span>&nbsp;<span class="ident" id="7817250">fmt</span><span class="op" id="7817253">.</span><span class="ident" id="7817254">Sprintf</span><span class="op" id="7817261">(</span><span class="string" id="7817262">&#34;%x\r\n%s\r\n&#34;</span><span class="op" id="7817276">,</span>&nbsp;<span class="builtinfunc" id="7817278">len</span><span class="op" id="7817281">(</span><span class="ident" id="7817282">s</span><span class="op" id="7817283">)</span><span class="op" id="7817284">,</span>&nbsp;<span class="ident" id="7817286">s</span><span class="op" id="7817287">)</span><br>
<span class="lineno"></span><span class="op" id="7817289">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7817292">func</span>&nbsp;<span class="ident" id="7817297">mustParseURL</span><span class="op" id="7817309">(</span><span class="ident" id="7817310">s</span>&nbsp;<span class="builtintype" id="7817312">string</span><span class="op" id="7817318">)</span>&nbsp;<span class="op" id="7817320">*</span><span class="ident" id="7817321">url</span><span class="op" id="7817324">.</span><span class="ident" id="7817325">URL</span>&nbsp;<span class="op" id="7817329">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7817332">u</span><span class="op" id="7817333">,</span>&nbsp;<span class="ident" id="7817335">err</span>&nbsp;<span class="op" id="7817339">:=</span>&nbsp;<span class="ident" id="7817342">url</span><span class="op" id="7817345">.</span><span class="ident" id="7817346">Parse</span><span class="op" id="7817351">(</span><span class="ident" id="7817352">s</span><span class="op" id="7817353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7817356">if</span>&nbsp;<span class="ident" id="7817359">err</span>&nbsp;<span class="op" id="7817363">!=</span>&nbsp;<span class="ident" id="7817366">nil</span>&nbsp;<span class="op" id="7817370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7817374">panic</span><span class="op" id="7817379">(</span><span class="ident" id="7817380">fmt</span><span class="op" id="7817383">.</span><span class="ident" id="7817384">Sprintf</span><span class="op" id="7817391">(</span><span class="string" id="7817392">&#34;Error&nbsp;parsing&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7817418">,</span>&nbsp;<span class="ident" id="7817420">s</span><span class="op" id="7817421">,</span>&nbsp;<span class="ident" id="7817423">err</span><span class="op" id="7817426">)</span><span class="op" id="7817427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7817430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7817433">return</span>&nbsp;<span class="ident" id="7817440">u</span><br>
<span class="lineno">565</span><span class="op" id="7817442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7817445">type</span>&nbsp;<span class="ident" id="7817450">writerFunc</span>&nbsp;<span class="keyword" id="7817461">func</span><span class="op" id="7817465">(</span><span class="op" id="7817466">[</span><span class="op" id="7817467">]</span><span class="builtintype" id="7817468">byte</span><span class="op" id="7817472">)</span>&nbsp;<span class="op" id="7817474">(</span><span class="builtintype" id="7817475">int</span><span class="op" id="7817478">,</span>&nbsp;<span class="builtintype" id="7817480">error</span><span class="op" id="7817485">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7817488">func</span>&nbsp;<span class="op" id="7817493">(</span><span class="ident" id="7817494">f</span>&nbsp;<span class="ident" id="7817496">writerFunc</span><span class="op" id="7817506">)</span>&nbsp;<span class="ident" id="7817508">Write</span><span class="op" id="7817513">(</span><span class="ident" id="7817514">p</span>&nbsp;<span class="op" id="7817516">[</span><span class="op" id="7817517">]</span><span class="builtintype" id="7817518">byte</span><span class="op" id="7817522">)</span>&nbsp;<span class="op" id="7817524">(</span><span class="builtintype" id="7817525">int</span><span class="op" id="7817528">,</span>&nbsp;<span class="builtintype" id="7817530">error</span><span class="op" id="7817535">)</span>&nbsp;<span class="op" id="7817537">{</span>&nbsp;<span class="keyword" id="7817539">return</span>&nbsp;<span class="ident" id="7817546">f</span><span class="op" id="7817547">(</span><span class="ident" id="7817548">p</span><span class="op" id="7817549">)</span>&nbsp;<span class="op" id="7817551">}</span><br>
<span class="lineno">570</span><br>
<span class="lineno"></span><span class="comment" id="7817554">//&nbsp;TestRequestWriteError&nbsp;tests&nbsp;the&nbsp;Write&nbsp;err&nbsp;!=&nbsp;nil&nbsp;checks&nbsp;in&nbsp;(*Request).write.</span><br>
<span class="lineno"></span><span class="keyword" id="7817634">func</span>&nbsp;<span class="ident" id="7817639">TestRequestWriteError</span><span class="op" id="7817660">(</span><span class="ident" id="7817661">t</span>&nbsp;<span class="op" id="7817663">*</span><span class="ident" id="7817664">testing</span><span class="op" id="7817671">.</span><span class="ident" id="7817672">T</span><span class="op" id="7817673">)</span>&nbsp;<span class="op" id="7817675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7817678">failAfter</span><span class="op" id="7817687">,</span>&nbsp;<span class="ident" id="7817689">writeCount</span>&nbsp;<span class="op" id="7817700">:=</span>&nbsp;<span class="num" id="7817703">0</span><span class="op" id="7817704">,</span>&nbsp;<span class="num" id="7817706">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7817709">errFail</span>&nbsp;<span class="op" id="7817717">:=</span>&nbsp;<span class="ident" id="7817720">errors</span><span class="op" id="7817726">.</span><span class="ident" id="7817727">New</span><span class="op" id="7817730">(</span><span class="string" id="7817731">&#34;fake&nbsp;write&nbsp;failure&#34;</span><span class="op" id="7817751">)</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7817755">//&nbsp;w&nbsp;is&nbsp;the&nbsp;buffered&nbsp;io.Writer&nbsp;to&nbsp;write&nbsp;the&nbsp;request&nbsp;to.&nbsp;&nbsp;It</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7817816">//&nbsp;fails&nbsp;exactly&nbsp;once&nbsp;on&nbsp;its&nbsp;Nth&nbsp;Write&nbsp;call,&nbsp;as&nbsp;controlled&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7817879">//&nbsp;failAfter.&nbsp;It&nbsp;also&nbsp;tracks&nbsp;the&nbsp;number&nbsp;of&nbsp;calls&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7817932">//&nbsp;writeCount.</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7817948">w</span>&nbsp;<span class="op" id="7817950">:=</span>&nbsp;<span class="keyword" id="7817953">struct</span>&nbsp;<span class="op" id="7817960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7817964">io</span><span class="op" id="7817966">.</span><span class="ident" id="7817967">ByteWriter</span>&nbsp;<span class="comment" id="7817978">//&nbsp;to&nbsp;avoid&nbsp;being&nbsp;wrapped&nbsp;by&nbsp;a&nbsp;bufio.Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818024">io</span><span class="op" id="7818026">.</span><span class="ident" id="7818027">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818035">}</span><span class="op" id="7818036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818040">nil</span><span class="op" id="7818043">,</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818047">writerFunc</span><span class="op" id="7818057">(</span><span class="keyword" id="7818058">func</span><span class="op" id="7818062">(</span><span class="ident" id="7818063">p</span>&nbsp;<span class="op" id="7818065">[</span><span class="op" id="7818066">]</span><span class="builtintype" id="7818067">byte</span><span class="op" id="7818071">)</span>&nbsp;<span class="op" id="7818073">(</span><span class="ident" id="7818074">n</span>&nbsp;<span class="builtintype" id="7818076">int</span><span class="op" id="7818079">,</span>&nbsp;<span class="ident" id="7818081">err</span>&nbsp;<span class="builtintype" id="7818085">error</span><span class="op" id="7818090">)</span>&nbsp;<span class="op" id="7818092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818097">writeCount</span><span class="op" id="7818107">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818113">if</span>&nbsp;<span class="ident" id="7818116">failAfter</span>&nbsp;<span class="op" id="7818126">==</span>&nbsp;<span class="num" id="7818129">0</span>&nbsp;<span class="op" id="7818131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818137">err</span>&nbsp;<span class="op" id="7818141">=</span>&nbsp;<span class="ident" id="7818143">errFail</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818154">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818159">failAfter</span><span class="op" id="7818168">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818174">return</span>&nbsp;<span class="builtinfunc" id="7818181">len</span><span class="op" id="7818184">(</span><span class="ident" id="7818185">p</span><span class="op" id="7818186">)</span><span class="op" id="7818187">,</span>&nbsp;<span class="ident" id="7818189">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818195">}</span><span class="op" id="7818196">)</span><span class="op" id="7818197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818200">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818204">req</span><span class="op" id="7818207">,</span>&nbsp;<span class="ident" id="7818209">_</span>&nbsp;<span class="op" id="7818211">:=</span>&nbsp;<span class="ident" id="7818214">NewRequest</span><span class="op" id="7818224">(</span><span class="string" id="7818225">&#34;GET&#34;</span><span class="op" id="7818230">,</span>&nbsp;<span class="string" id="7818232">&#34;http://example.com/&#34;</span><span class="op" id="7818253">,</span>&nbsp;<span class="ident" id="7818255">nil</span><span class="op" id="7818258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818261">const</span>&nbsp;<span class="ident" id="7818267">writeCalls</span>&nbsp;<span class="op" id="7818278">=</span>&nbsp;<span class="num" id="7818280">4</span>&nbsp;<span class="comment" id="7818282">//&nbsp;number&nbsp;of&nbsp;Write&nbsp;calls&nbsp;in&nbsp;current&nbsp;implementation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818334">sawGood</span>&nbsp;<span class="op" id="7818342">:=</span>&nbsp;<span class="builtintype" id="7818345">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818352">for</span>&nbsp;<span class="ident" id="7818356">n</span>&nbsp;<span class="op" id="7818358">:=</span>&nbsp;<span class="num" id="7818361">0</span><span class="op" id="7818362">;</span>&nbsp;<span class="ident" id="7818364">n</span>&nbsp;<span class="op" id="7818366">&lt;=</span>&nbsp;<span class="ident" id="7818369">writeCalls</span><span class="op" id="7818379">+</span><span class="num" id="7818380">2</span><span class="op" id="7818381">;</span>&nbsp;<span class="ident" id="7818383">n</span><span class="op" id="7818384">++</span>&nbsp;<span class="op" id="7818387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818391">failAfter</span>&nbsp;<span class="op" id="7818401">=</span>&nbsp;<span class="ident" id="7818403">n</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818407">writeCount</span>&nbsp;<span class="op" id="7818418">=</span>&nbsp;<span class="num" id="7818420">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818424">err</span>&nbsp;<span class="op" id="7818428">:=</span>&nbsp;<span class="ident" id="7818431">req</span><span class="op" id="7818434">.</span><span class="ident" id="7818435">Write</span><span class="op" id="7818440">(</span><span class="ident" id="7818441">w</span><span class="op" id="7818442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818446">var</span>&nbsp;<span class="ident" id="7818450">wantErr</span>&nbsp;<span class="builtintype" id="7818458">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818466">if</span>&nbsp;<span class="ident" id="7818469">n</span>&nbsp;<span class="op" id="7818471">&lt;</span>&nbsp;<span class="ident" id="7818473">writeCalls</span>&nbsp;<span class="op" id="7818484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818489">wantErr</span>&nbsp;<span class="op" id="7818497">=</span>&nbsp;<span class="ident" id="7818499">errFail</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818513">if</span>&nbsp;<span class="ident" id="7818516">err</span>&nbsp;<span class="op" id="7818520">!=</span>&nbsp;<span class="ident" id="7818523">wantErr</span>&nbsp;<span class="op" id="7818531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818536">t</span><span class="op" id="7818537">.</span><span class="ident" id="7818538">Errorf</span><span class="op" id="7818544">(</span><span class="string" id="7818545">&#34;for&nbsp;fail-after&nbsp;%d&nbsp;Writes,&nbsp;err&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7818590">,</span>&nbsp;<span class="ident" id="7818592">n</span><span class="op" id="7818593">,</span>&nbsp;<span class="ident" id="7818595">err</span><span class="op" id="7818598">,</span>&nbsp;<span class="ident" id="7818600">wantErr</span><span class="op" id="7818607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818612">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818623">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818627">if</span>&nbsp;<span class="ident" id="7818630">err</span>&nbsp;<span class="op" id="7818634">==</span>&nbsp;<span class="ident" id="7818637">nil</span>&nbsp;<span class="op" id="7818641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818646">sawGood</span>&nbsp;<span class="op" id="7818654">=</span>&nbsp;<span class="builtintype" id="7818656">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818664">if</span>&nbsp;<span class="ident" id="7818667">writeCount</span>&nbsp;<span class="op" id="7818678">!=</span>&nbsp;<span class="ident" id="7818681">writeCalls</span>&nbsp;<span class="op" id="7818692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818698">t</span><span class="op" id="7818699">.</span><span class="ident" id="7818700">Fatalf</span><span class="op" id="7818706">(</span><span class="string" id="7818707">&#34;writeCalls&nbsp;constant&nbsp;is&nbsp;outdated&nbsp;in&nbsp;test&#34;</span><span class="op" id="7818748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818753">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818761">if</span>&nbsp;<span class="ident" id="7818764">writeCount</span>&nbsp;<span class="op" id="7818775">&gt;</span>&nbsp;<span class="ident" id="7818777">writeCalls</span>&nbsp;<span class="op" id="7818788">||</span>&nbsp;<span class="ident" id="7818791">writeCount</span>&nbsp;<span class="op" id="7818802">&gt;</span>&nbsp;<span class="ident" id="7818804">n</span><span class="op" id="7818805">+</span><span class="num" id="7818806">1</span>&nbsp;<span class="op" id="7818808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818813">t</span><span class="op" id="7818814">.</span><span class="ident" id="7818815">Errorf</span><span class="op" id="7818821">(</span><span class="string" id="7818822">&#34;for&nbsp;fail-after&nbsp;%d,&nbsp;saw&nbsp;unexpectedly&nbsp;high&nbsp;(%d)&nbsp;write&nbsp;calls&#34;</span><span class="op" id="7818881">,</span>&nbsp;<span class="ident" id="7818883">n</span><span class="op" id="7818884">,</span>&nbsp;<span class="ident" id="7818886">writeCount</span><span class="op" id="7818896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818903">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7818906">if</span>&nbsp;<span class="op" id="7818909">!</span><span class="ident" id="7818910">sawGood</span>&nbsp;<span class="op" id="7818918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7818922">t</span><span class="op" id="7818923">.</span><span class="ident" id="7818924">Fatalf</span><span class="op" id="7818930">(</span><span class="string" id="7818931">&#34;writeCalls&nbsp;constant&nbsp;is&nbsp;outdated&nbsp;in&nbsp;test&#34;</span><span class="op" id="7818972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7818975">}</span><br>
<span class="lineno"></span><span class="op" id="7818977">}</span>
</div>
</body>
</html>
