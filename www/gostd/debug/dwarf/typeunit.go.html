<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/dwarf</h2>
<ul>
<li><a href="/gostd/debug/dwarf/buf.go.html">buf.go</a></li>
<li><a href="/gostd/debug/dwarf/const.go.html">const.go</a></li>
<li><a href="/gostd/debug/dwarf/entry.go.html">entry.go</a></li>
<li><a href="/gostd/debug/dwarf/open.go.html">open.go</a></li>
<li><a href="/gostd/debug/dwarf/type.go.html">type.go</a></li>
<li><a href="/gostd/debug/dwarf/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/debug/dwarf/typeunit.go.html" class="current">typeunit.go</a></li>
<li><a href="/gostd/debug/dwarf/unit.go.html">unit.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5134214">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5134270">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5134324">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5134375">package</span>&nbsp;<span class="ident" id="5134383">dwarf</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5134390">import</span>&nbsp;<span class="op" id="5134397">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5134400">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5134407">&#34;strconv&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5134417">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5134420">//&nbsp;Parse&nbsp;the&nbsp;type&nbsp;units&nbsp;stored&nbsp;in&nbsp;a&nbsp;DWARF4&nbsp;.debug_types&nbsp;section.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="5134491">//&nbsp;type&nbsp;unit&nbsp;defines&nbsp;a&nbsp;single&nbsp;primary&nbsp;type&nbsp;and&nbsp;an&nbsp;8-byte&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="5134559">//&nbsp;Other&nbsp;sections&nbsp;may&nbsp;then&nbsp;use&nbsp;formRefSig8&nbsp;to&nbsp;refer&nbsp;to&nbsp;the&nbsp;type.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5134625">//&nbsp;The&nbsp;typeUnit&nbsp;format&nbsp;is&nbsp;a&nbsp;single&nbsp;type&nbsp;with&nbsp;a&nbsp;signature.&nbsp;&nbsp;It&nbsp;holds</span><br>
<span class="lineno"></span><span class="comment" id="5134693">//&nbsp;the&nbsp;same&nbsp;data&nbsp;as&nbsp;a&nbsp;compilation&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5134733">type</span>&nbsp;<span class="ident" id="5134738">typeUnit</span>&nbsp;<span class="keyword" id="5134747">struct</span>&nbsp;<span class="op" id="5134754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5134757">unit</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5134763">toff</span>&nbsp;&nbsp;<span class="ident" id="5134769">Offset</span>&nbsp;<span class="comment" id="5134776">//&nbsp;Offset&nbsp;to&nbsp;signature&nbsp;type&nbsp;within&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5134818">name</span>&nbsp;&nbsp;<span class="builtintype" id="5134824">string</span>&nbsp;<span class="comment" id="5134831">//&nbsp;Name&nbsp;of&nbsp;.debug_type&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5134864">cache</span>&nbsp;<span class="ident" id="5134870">Type</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5134877">//&nbsp;Cache&nbsp;the&nbsp;type,&nbsp;nil&nbsp;to&nbsp;start.</span><br>
<span class="lineno"></span><span class="op" id="5134910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5134913">//&nbsp;Parse&nbsp;a&nbsp;.debug_types&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="5134946">func</span>&nbsp;<span class="op" id="5134951">(</span><span class="ident" id="5134952">d</span>&nbsp;<span class="op" id="5134954">*</span><span class="ident" id="5134955">Data</span><span class="op" id="5134959">)</span>&nbsp;<span class="ident" id="5134961">parseTypes</span><span class="op" id="5134971">(</span><span class="ident" id="5134972">name</span>&nbsp;<span class="builtintype" id="5134977">string</span><span class="op" id="5134983">,</span>&nbsp;<span class="ident" id="5134985">types</span>&nbsp;<span class="op" id="5134991">[</span><span class="op" id="5134992">]</span><span class="builtintype" id="5134993">byte</span><span class="op" id="5134997">)</span>&nbsp;<span class="builtintype" id="5134999">error</span>&nbsp;<span class="op" id="5135005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135008">b</span>&nbsp;<span class="op" id="5135010">:=</span>&nbsp;<span class="ident" id="5135013">makeBuf</span><span class="op" id="5135020">(</span><span class="ident" id="5135021">d</span><span class="op" id="5135022">,</span>&nbsp;<span class="ident" id="5135024">unknownFormat</span><span class="op" id="5135037">{</span><span class="op" id="5135038">}</span><span class="op" id="5135039">,</span>&nbsp;<span class="ident" id="5135041">name</span><span class="op" id="5135045">,</span>&nbsp;<span class="num" id="5135047">0</span><span class="op" id="5135048">,</span>&nbsp;<span class="ident" id="5135050">types</span><span class="op" id="5135055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135058">for</span>&nbsp;<span class="builtinfunc" id="5135062">len</span><span class="op" id="5135065">(</span><span class="ident" id="5135066">b</span><span class="op" id="5135067">.</span><span class="ident" id="5135068">data</span><span class="op" id="5135072">)</span>&nbsp;<span class="op" id="5135074">&gt;</span>&nbsp;<span class="num" id="5135076">0</span>&nbsp;<span class="op" id="5135078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135082">base</span>&nbsp;<span class="op" id="5135087">:=</span>&nbsp;<span class="ident" id="5135090">b</span><span class="op" id="5135091">.</span><span class="ident" id="5135092">off</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135098">dwarf64</span>&nbsp;<span class="op" id="5135106">:=</span>&nbsp;<span class="builtintype" id="5135109">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135117">n</span>&nbsp;<span class="op" id="5135119">:=</span>&nbsp;<span class="ident" id="5135122">b</span><span class="op" id="5135123">.</span><span class="builtintype" id="5135124">uint32</span><span class="op" id="5135130">(</span><span class="op" id="5135131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135135">if</span>&nbsp;<span class="ident" id="5135138">n</span>&nbsp;<span class="op" id="5135140">==</span>&nbsp;<span class="num" id="5135143">0xffffffff</span>&nbsp;<span class="op" id="5135154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135159">n64</span>&nbsp;<span class="op" id="5135163">:=</span>&nbsp;<span class="ident" id="5135166">b</span><span class="op" id="5135167">.</span><span class="builtintype" id="5135168">uint64</span><span class="op" id="5135174">(</span><span class="op" id="5135175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135180">if</span>&nbsp;<span class="ident" id="5135183">n64</span>&nbsp;<span class="op" id="5135187">!=</span>&nbsp;<span class="builtintype" id="5135190">uint64</span><span class="op" id="5135196">(</span><span class="builtintype" id="5135197">uint32</span><span class="op" id="5135203">(</span><span class="ident" id="5135204">n64</span><span class="op" id="5135207">)</span><span class="op" id="5135208">)</span>&nbsp;<span class="op" id="5135210">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135216">b</span><span class="op" id="5135217">.</span><span class="builtintype" id="5135218">error</span><span class="op" id="5135223">(</span><span class="string" id="5135224">&#34;type&nbsp;unit&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="5135251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135257">return</span>&nbsp;<span class="ident" id="5135264">b</span><span class="op" id="5135265">.</span><span class="ident" id="5135266">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135278">n</span>&nbsp;<span class="op" id="5135280">=</span>&nbsp;<span class="builtintype" id="5135282">uint32</span><span class="op" id="5135288">(</span><span class="ident" id="5135289">n64</span><span class="op" id="5135292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135297">dwarf64</span>&nbsp;<span class="op" id="5135305">=</span>&nbsp;<span class="builtintype" id="5135307">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135318">hdroff</span>&nbsp;<span class="op" id="5135325">:=</span>&nbsp;<span class="ident" id="5135328">b</span><span class="op" id="5135329">.</span><span class="ident" id="5135330">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135336">vers</span>&nbsp;<span class="op" id="5135341">:=</span>&nbsp;<span class="ident" id="5135344">b</span><span class="op" id="5135345">.</span><span class="builtintype" id="5135346">uint16</span><span class="op" id="5135352">(</span><span class="op" id="5135353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135357">if</span>&nbsp;<span class="ident" id="5135360">vers</span>&nbsp;<span class="op" id="5135365">!=</span>&nbsp;<span class="num" id="5135368">4</span>&nbsp;<span class="op" id="5135370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135375">b</span><span class="op" id="5135376">.</span><span class="builtintype" id="5135377">error</span><span class="op" id="5135382">(</span><span class="string" id="5135383">&#34;unsupported&nbsp;DWARF&nbsp;version&nbsp;&#34;</span>&nbsp;<span class="op" id="5135412">+</span>&nbsp;<span class="ident" id="5135414">strconv</span><span class="op" id="5135421">.</span><span class="ident" id="5135422">Itoa</span><span class="op" id="5135426">(</span><span class="builtintype" id="5135427">int</span><span class="op" id="5135430">(</span><span class="ident" id="5135431">vers</span><span class="op" id="5135435">)</span><span class="op" id="5135436">)</span><span class="op" id="5135437">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135442">return</span>&nbsp;<span class="ident" id="5135449">b</span><span class="op" id="5135450">.</span><span class="ident" id="5135451">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135461">var</span>&nbsp;<span class="ident" id="5135465">ao</span>&nbsp;<span class="builtintype" id="5135468">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135477">if</span>&nbsp;<span class="op" id="5135480">!</span><span class="ident" id="5135481">dwarf64</span>&nbsp;<span class="op" id="5135489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135494">ao</span>&nbsp;<span class="op" id="5135497">=</span>&nbsp;<span class="ident" id="5135499">b</span><span class="op" id="5135500">.</span><span class="builtintype" id="5135501">uint32</span><span class="op" id="5135507">(</span><span class="op" id="5135508">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135512">}</span>&nbsp;<span class="keyword" id="5135514">else</span>&nbsp;<span class="op" id="5135519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135524">ao64</span>&nbsp;<span class="op" id="5135529">:=</span>&nbsp;<span class="ident" id="5135532">b</span><span class="op" id="5135533">.</span><span class="builtintype" id="5135534">uint64</span><span class="op" id="5135540">(</span><span class="op" id="5135541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135546">if</span>&nbsp;<span class="ident" id="5135549">ao64</span>&nbsp;<span class="op" id="5135554">!=</span>&nbsp;<span class="builtintype" id="5135557">uint64</span><span class="op" id="5135563">(</span><span class="builtintype" id="5135564">uint32</span><span class="op" id="5135570">(</span><span class="ident" id="5135571">ao64</span><span class="op" id="5135575">)</span><span class="op" id="5135576">)</span>&nbsp;<span class="op" id="5135578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135584">b</span><span class="op" id="5135585">.</span><span class="builtintype" id="5135586">error</span><span class="op" id="5135591">(</span><span class="string" id="5135592">&#34;type&nbsp;unit&nbsp;abbrev&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5135626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135632">return</span>&nbsp;<span class="ident" id="5135639">b</span><span class="op" id="5135640">.</span><span class="ident" id="5135641">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135653">ao</span>&nbsp;<span class="op" id="5135656">=</span>&nbsp;<span class="builtintype" id="5135658">uint32</span><span class="op" id="5135664">(</span><span class="ident" id="5135665">ao64</span><span class="op" id="5135669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135677">atable</span><span class="op" id="5135683">,</span>&nbsp;<span class="ident" id="5135685">err</span>&nbsp;<span class="op" id="5135689">:=</span>&nbsp;<span class="ident" id="5135692">d</span><span class="op" id="5135693">.</span><span class="ident" id="5135694">parseAbbrev</span><span class="op" id="5135705">(</span><span class="ident" id="5135706">ao</span><span class="op" id="5135708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135712">if</span>&nbsp;<span class="ident" id="5135715">err</span>&nbsp;<span class="op" id="5135719">!=</span>&nbsp;<span class="builtintype" id="5135722">nil</span>&nbsp;<span class="op" id="5135726">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135731">return</span>&nbsp;<span class="ident" id="5135738">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135748">asize</span>&nbsp;<span class="op" id="5135754">:=</span>&nbsp;<span class="ident" id="5135757">b</span><span class="op" id="5135758">.</span><span class="builtintype" id="5135759">uint8</span><span class="op" id="5135764">(</span><span class="op" id="5135765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135769">sig</span>&nbsp;<span class="op" id="5135773">:=</span>&nbsp;<span class="ident" id="5135776">b</span><span class="op" id="5135777">.</span><span class="builtintype" id="5135778">uint64</span><span class="op" id="5135784">(</span><span class="op" id="5135785">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135790">var</span>&nbsp;<span class="ident" id="5135794">toff</span>&nbsp;<span class="builtintype" id="5135799">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135808">if</span>&nbsp;<span class="op" id="5135811">!</span><span class="ident" id="5135812">dwarf64</span>&nbsp;<span class="op" id="5135820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135825">toff</span>&nbsp;<span class="op" id="5135830">=</span>&nbsp;<span class="ident" id="5135832">b</span><span class="op" id="5135833">.</span><span class="builtintype" id="5135834">uint32</span><span class="op" id="5135840">(</span><span class="op" id="5135841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135845">}</span>&nbsp;<span class="keyword" id="5135847">else</span>&nbsp;<span class="op" id="5135852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135857">to64</span>&nbsp;<span class="op" id="5135862">:=</span>&nbsp;<span class="ident" id="5135865">b</span><span class="op" id="5135866">.</span><span class="builtintype" id="5135867">uint64</span><span class="op" id="5135873">(</span><span class="op" id="5135874">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135879">if</span>&nbsp;<span class="ident" id="5135882">to64</span>&nbsp;<span class="op" id="5135887">!=</span>&nbsp;<span class="builtintype" id="5135890">uint64</span><span class="op" id="5135896">(</span><span class="builtintype" id="5135897">uint32</span><span class="op" id="5135903">(</span><span class="ident" id="5135904">to64</span><span class="op" id="5135908">)</span><span class="op" id="5135909">)</span>&nbsp;<span class="op" id="5135911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135917">b</span><span class="op" id="5135918">.</span><span class="builtintype" id="5135919">error</span><span class="op" id="5135924">(</span><span class="string" id="5135925">&#34;type&nbsp;unit&nbsp;type&nbsp;offset&nbsp;overflow&#34;</span><span class="op" id="5135957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135963">return</span>&nbsp;<span class="ident" id="5135970">b</span><span class="op" id="5135971">.</span><span class="ident" id="5135972">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135984">toff</span>&nbsp;<span class="op" id="5135989">=</span>&nbsp;<span class="builtintype" id="5135991">uint32</span><span class="op" id="5135997">(</span><span class="ident" id="5135998">to64</span><span class="op" id="5136002">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136011">boff</span>&nbsp;<span class="op" id="5136016">:=</span>&nbsp;<span class="ident" id="5136019">b</span><span class="op" id="5136020">.</span><span class="ident" id="5136021">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136027">d</span><span class="op" id="5136028">.</span><span class="ident" id="5136029">typeSigs</span><span class="op" id="5136037">[</span><span class="ident" id="5136038">sig</span><span class="op" id="5136041">]</span>&nbsp;<span class="op" id="5136043">=</span>&nbsp;<span class="op" id="5136045">&amp;</span><span class="ident" id="5136046">typeUnit</span><span class="op" id="5136054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136059">unit</span><span class="op" id="5136063">:</span>&nbsp;<span class="ident" id="5136065">unit</span><span class="op" id="5136069">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136075">base</span><span class="op" id="5136079">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5136083">base</span><span class="op" id="5136087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136093">off</span><span class="op" id="5136096">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136101">boff</span><span class="op" id="5136105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136111">data</span><span class="op" id="5136115">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5136119">b</span><span class="op" id="5136120">.</span><span class="ident" id="5136121">bytes</span><span class="op" id="5136126">(</span><span class="builtintype" id="5136127">int</span><span class="op" id="5136130">(</span><span class="ident" id="5136131">Offset</span><span class="op" id="5136137">(</span><span class="ident" id="5136138">n</span><span class="op" id="5136139">)</span>&nbsp;<span class="op" id="5136141">-</span>&nbsp;<span class="op" id="5136143">(</span><span class="ident" id="5136144">b</span><span class="op" id="5136145">.</span><span class="ident" id="5136146">off</span>&nbsp;<span class="op" id="5136150">-</span>&nbsp;<span class="ident" id="5136152">hdroff</span><span class="op" id="5136158">)</span><span class="op" id="5136159">)</span><span class="op" id="5136160">)</span><span class="op" id="5136161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136167">atable</span><span class="op" id="5136173">:</span>&nbsp;<span class="ident" id="5136175">atable</span><span class="op" id="5136181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136187">asize</span><span class="op" id="5136192">:</span>&nbsp;&nbsp;<span class="builtintype" id="5136195">int</span><span class="op" id="5136198">(</span><span class="ident" id="5136199">asize</span><span class="op" id="5136204">)</span><span class="op" id="5136205">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136211">vers</span><span class="op" id="5136215">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5136219">int</span><span class="op" id="5136222">(</span><span class="ident" id="5136223">vers</span><span class="op" id="5136227">)</span><span class="op" id="5136228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136234">is64</span><span class="op" id="5136238">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5136242">dwarf64</span><span class="op" id="5136249">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136254">}</span><span class="op" id="5136255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136260">toff</span><span class="op" id="5136264">:</span>&nbsp;<span class="ident" id="5136266">Offset</span><span class="op" id="5136272">(</span><span class="ident" id="5136273">toff</span><span class="op" id="5136277">)</span><span class="op" id="5136278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136283">name</span><span class="op" id="5136287">:</span>&nbsp;<span class="ident" id="5136289">name</span><span class="op" id="5136293">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136301">if</span>&nbsp;<span class="ident" id="5136304">b</span><span class="op" id="5136305">.</span><span class="ident" id="5136306">err</span>&nbsp;<span class="op" id="5136310">!=</span>&nbsp;<span class="builtintype" id="5136313">nil</span>&nbsp;<span class="op" id="5136317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136322">return</span>&nbsp;<span class="ident" id="5136329">b</span><span class="op" id="5136330">.</span><span class="ident" id="5136331">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136340">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136343">return</span>&nbsp;<span class="builtintype" id="5136350">nil</span><br>
<span class="lineno"></span><span class="op" id="5136354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5136357">//&nbsp;Return&nbsp;the&nbsp;type&nbsp;for&nbsp;a&nbsp;type&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="5136398">func</span>&nbsp;<span class="op" id="5136403">(</span><span class="ident" id="5136404">d</span>&nbsp;<span class="op" id="5136406">*</span><span class="ident" id="5136407">Data</span><span class="op" id="5136411">)</span>&nbsp;<span class="ident" id="5136413">sigToType</span><span class="op" id="5136422">(</span><span class="ident" id="5136423">sig</span>&nbsp;<span class="builtintype" id="5136427">uint64</span><span class="op" id="5136433">)</span>&nbsp;<span class="op" id="5136435">(</span><span class="ident" id="5136436">Type</span><span class="op" id="5136440">,</span>&nbsp;<span class="builtintype" id="5136442">error</span><span class="op" id="5136447">)</span>&nbsp;<span class="op" id="5136449">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136452">tu</span>&nbsp;<span class="op" id="5136455">:=</span>&nbsp;<span class="ident" id="5136458">d</span><span class="op" id="5136459">.</span><span class="ident" id="5136460">typeSigs</span><span class="op" id="5136468">[</span><span class="ident" id="5136469">sig</span><span class="op" id="5136472">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136475">if</span>&nbsp;<span class="ident" id="5136478">tu</span>&nbsp;<span class="op" id="5136481">==</span>&nbsp;<span class="builtintype" id="5136484">nil</span>&nbsp;<span class="op" id="5136488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136492">return</span>&nbsp;<span class="builtintype" id="5136499">nil</span><span class="op" id="5136502">,</span>&nbsp;<span class="ident" id="5136504">fmt</span><span class="op" id="5136507">.</span><span class="ident" id="5136508">Errorf</span><span class="op" id="5136514">(</span><span class="string" id="5136515">&#34;no&nbsp;type&nbsp;unit&nbsp;with&nbsp;signature&nbsp;%v&#34;</span><span class="op" id="5136547">,</span>&nbsp;<span class="ident" id="5136549">sig</span><span class="op" id="5136552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136558">if</span>&nbsp;<span class="ident" id="5136561">tu</span><span class="op" id="5136563">.</span><span class="ident" id="5136564">cache</span>&nbsp;<span class="op" id="5136570">!=</span>&nbsp;<span class="builtintype" id="5136573">nil</span>&nbsp;<span class="op" id="5136577">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136581">return</span>&nbsp;<span class="ident" id="5136588">tu</span><span class="op" id="5136590">.</span><span class="ident" id="5136591">cache</span><span class="op" id="5136596">,</span>&nbsp;<span class="builtintype" id="5136598">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136607">b</span>&nbsp;<span class="op" id="5136609">:=</span>&nbsp;<span class="ident" id="5136612">makeBuf</span><span class="op" id="5136619">(</span><span class="ident" id="5136620">d</span><span class="op" id="5136621">,</span>&nbsp;<span class="ident" id="5136623">tu</span><span class="op" id="5136625">,</span>&nbsp;<span class="ident" id="5136627">tu</span><span class="op" id="5136629">.</span><span class="ident" id="5136630">name</span><span class="op" id="5136634">,</span>&nbsp;<span class="ident" id="5136636">tu</span><span class="op" id="5136638">.</span><span class="ident" id="5136639">off</span><span class="op" id="5136642">,</span>&nbsp;<span class="ident" id="5136644">tu</span><span class="op" id="5136646">.</span><span class="ident" id="5136647">data</span><span class="op" id="5136651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136654">r</span>&nbsp;<span class="op" id="5136656">:=</span>&nbsp;<span class="op" id="5136659">&amp;</span><span class="ident" id="5136660">typeUnitReader</span><span class="op" id="5136674">{</span><span class="ident" id="5136675">d</span><span class="op" id="5136676">:</span>&nbsp;<span class="ident" id="5136678">d</span><span class="op" id="5136679">,</span>&nbsp;<span class="ident" id="5136681">tu</span><span class="op" id="5136683">:</span>&nbsp;<span class="ident" id="5136685">tu</span><span class="op" id="5136687">,</span>&nbsp;<span class="ident" id="5136689">b</span><span class="op" id="5136690">:</span>&nbsp;<span class="ident" id="5136692">b</span><span class="op" id="5136693">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136696">t</span><span class="op" id="5136697">,</span>&nbsp;<span class="ident" id="5136699">err</span>&nbsp;<span class="op" id="5136703">:=</span>&nbsp;<span class="ident" id="5136706">d</span><span class="op" id="5136707">.</span><span class="ident" id="5136708">readType</span><span class="op" id="5136716">(</span><span class="ident" id="5136717">tu</span><span class="op" id="5136719">.</span><span class="ident" id="5136720">name</span><span class="op" id="5136724">,</span>&nbsp;<span class="ident" id="5136726">r</span><span class="op" id="5136727">,</span>&nbsp;<span class="ident" id="5136729">Offset</span><span class="op" id="5136735">(</span><span class="ident" id="5136736">tu</span><span class="op" id="5136738">.</span><span class="ident" id="5136739">toff</span><span class="op" id="5136743">)</span><span class="op" id="5136744">,</span>&nbsp;<span class="builtinfunc" id="5136746">make</span><span class="op" id="5136750">(</span><span class="keyword" id="5136751">map</span><span class="op" id="5136754">[</span><span class="ident" id="5136755">Offset</span><span class="op" id="5136761">]</span><span class="ident" id="5136762">Type</span><span class="op" id="5136766">)</span><span class="op" id="5136767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136770">if</span>&nbsp;<span class="ident" id="5136773">err</span>&nbsp;<span class="op" id="5136777">!=</span>&nbsp;<span class="builtintype" id="5136780">nil</span>&nbsp;<span class="op" id="5136784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136788">return</span>&nbsp;<span class="builtintype" id="5136795">nil</span><span class="op" id="5136798">,</span>&nbsp;<span class="ident" id="5136800">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136809">tu</span><span class="op" id="5136811">.</span><span class="ident" id="5136812">cache</span>&nbsp;<span class="op" id="5136818">=</span>&nbsp;<span class="ident" id="5136820">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136823">return</span>&nbsp;<span class="ident" id="5136830">t</span><span class="op" id="5136831">,</span>&nbsp;<span class="builtintype" id="5136833">nil</span><br>
<span class="lineno"></span><span class="op" id="5136837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5136840">//&nbsp;typeUnitReader&nbsp;is&nbsp;a&nbsp;typeReader&nbsp;for&nbsp;a&nbsp;tagTypeUnit.</span><br>
<span class="lineno">120</span><span class="keyword" id="5136893">type</span>&nbsp;<span class="ident" id="5136898">typeUnitReader</span>&nbsp;<span class="keyword" id="5136913">struct</span>&nbsp;<span class="op" id="5136920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136923">d</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5136927">*</span><span class="ident" id="5136928">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136934">tu</span>&nbsp;&nbsp;<span class="op" id="5136938">*</span><span class="ident" id="5136939">typeUnit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136949">b</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5136953">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136958">err</span>&nbsp;<span class="builtintype" id="5136962">error</span><br>
<span class="lineno">125</span><span class="op" id="5136968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5136971">//&nbsp;Seek&nbsp;to&nbsp;a&nbsp;new&nbsp;position&nbsp;in&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5137015">func</span>&nbsp;<span class="op" id="5137020">(</span><span class="ident" id="5137021">tur</span>&nbsp;<span class="op" id="5137025">*</span><span class="ident" id="5137026">typeUnitReader</span><span class="op" id="5137040">)</span>&nbsp;<span class="ident" id="5137042">Seek</span><span class="op" id="5137046">(</span><span class="ident" id="5137047">off</span>&nbsp;<span class="ident" id="5137051">Offset</span><span class="op" id="5137057">)</span>&nbsp;<span class="op" id="5137059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137062">tur</span><span class="op" id="5137065">.</span><span class="ident" id="5137066">err</span>&nbsp;<span class="op" id="5137070">=</span>&nbsp;<span class="builtintype" id="5137072">nil</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137077">doff</span>&nbsp;<span class="op" id="5137082">:=</span>&nbsp;<span class="ident" id="5137085">off</span>&nbsp;<span class="op" id="5137089">-</span>&nbsp;<span class="ident" id="5137091">tur</span><span class="op" id="5137094">.</span><span class="ident" id="5137095">tu</span><span class="op" id="5137097">.</span><span class="ident" id="5137098">off</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137103">if</span>&nbsp;<span class="ident" id="5137106">doff</span>&nbsp;<span class="op" id="5137111">&lt;</span>&nbsp;<span class="num" id="5137113">0</span>&nbsp;<span class="op" id="5137115">||</span>&nbsp;<span class="ident" id="5137118">doff</span>&nbsp;<span class="op" id="5137123">&gt;=</span>&nbsp;<span class="ident" id="5137126">Offset</span><span class="op" id="5137132">(</span><span class="builtinfunc" id="5137133">len</span><span class="op" id="5137136">(</span><span class="ident" id="5137137">tur</span><span class="op" id="5137140">.</span><span class="ident" id="5137141">tu</span><span class="op" id="5137143">.</span><span class="ident" id="5137144">data</span><span class="op" id="5137148">)</span><span class="op" id="5137149">)</span>&nbsp;<span class="op" id="5137151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137155">tur</span><span class="op" id="5137158">.</span><span class="ident" id="5137159">err</span>&nbsp;<span class="op" id="5137163">=</span>&nbsp;<span class="ident" id="5137165">fmt</span><span class="op" id="5137168">.</span><span class="ident" id="5137169">Errorf</span><span class="op" id="5137175">(</span><span class="string" id="5137176">&#34;%s:&nbsp;offset&nbsp;%d&nbsp;out&nbsp;of&nbsp;range;&nbsp;max&nbsp;%d&#34;</span><span class="op" id="5137212">,</span>&nbsp;<span class="ident" id="5137214">tur</span><span class="op" id="5137217">.</span><span class="ident" id="5137218">tu</span><span class="op" id="5137220">.</span><span class="ident" id="5137221">name</span><span class="op" id="5137225">,</span>&nbsp;<span class="ident" id="5137227">doff</span><span class="op" id="5137231">,</span>&nbsp;<span class="builtinfunc" id="5137233">len</span><span class="op" id="5137236">(</span><span class="ident" id="5137237">tur</span><span class="op" id="5137240">.</span><span class="ident" id="5137241">tu</span><span class="op" id="5137243">.</span><span class="ident" id="5137244">data</span><span class="op" id="5137248">)</span><span class="op" id="5137249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137253">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137261">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137264">tur</span><span class="op" id="5137267">.</span><span class="ident" id="5137268">b</span>&nbsp;<span class="op" id="5137270">=</span>&nbsp;<span class="ident" id="5137272">makeBuf</span><span class="op" id="5137279">(</span><span class="ident" id="5137280">tur</span><span class="op" id="5137283">.</span><span class="ident" id="5137284">d</span><span class="op" id="5137285">,</span>&nbsp;<span class="ident" id="5137287">tur</span><span class="op" id="5137290">.</span><span class="ident" id="5137291">tu</span><span class="op" id="5137293">,</span>&nbsp;<span class="ident" id="5137295">tur</span><span class="op" id="5137298">.</span><span class="ident" id="5137299">tu</span><span class="op" id="5137301">.</span><span class="ident" id="5137302">name</span><span class="op" id="5137306">,</span>&nbsp;<span class="ident" id="5137308">off</span><span class="op" id="5137311">,</span>&nbsp;<span class="ident" id="5137313">tur</span><span class="op" id="5137316">.</span><span class="ident" id="5137317">tu</span><span class="op" id="5137319">.</span><span class="ident" id="5137320">data</span><span class="op" id="5137324">[</span><span class="ident" id="5137325">doff</span><span class="op" id="5137329">:</span><span class="op" id="5137330">]</span><span class="op" id="5137331">)</span><br>
<span class="lineno"></span><span class="op" id="5137333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5137336">//&nbsp;Next&nbsp;reads&nbsp;the&nbsp;next&nbsp;Entry&nbsp;from&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno"></span><span class="keyword" id="5137385">func</span>&nbsp;<span class="op" id="5137390">(</span><span class="ident" id="5137391">tur</span>&nbsp;<span class="op" id="5137395">*</span><span class="ident" id="5137396">typeUnitReader</span><span class="op" id="5137410">)</span>&nbsp;<span class="ident" id="5137412">Next</span><span class="op" id="5137416">(</span><span class="op" id="5137417">)</span>&nbsp;<span class="op" id="5137419">(</span><span class="op" id="5137420">*</span><span class="ident" id="5137421">Entry</span><span class="op" id="5137426">,</span>&nbsp;<span class="builtintype" id="5137428">error</span><span class="op" id="5137433">)</span>&nbsp;<span class="op" id="5137435">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137438">if</span>&nbsp;<span class="ident" id="5137441">tur</span><span class="op" id="5137444">.</span><span class="ident" id="5137445">err</span>&nbsp;<span class="op" id="5137449">!=</span>&nbsp;<span class="builtintype" id="5137452">nil</span>&nbsp;<span class="op" id="5137456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137460">return</span>&nbsp;<span class="builtintype" id="5137467">nil</span><span class="op" id="5137470">,</span>&nbsp;<span class="ident" id="5137472">tur</span><span class="op" id="5137475">.</span><span class="ident" id="5137476">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137484">if</span>&nbsp;<span class="builtinfunc" id="5137487">len</span><span class="op" id="5137490">(</span><span class="ident" id="5137491">tur</span><span class="op" id="5137494">.</span><span class="ident" id="5137495">tu</span><span class="op" id="5137497">.</span><span class="ident" id="5137498">data</span><span class="op" id="5137502">)</span>&nbsp;<span class="op" id="5137504">==</span>&nbsp;<span class="num" id="5137507">0</span>&nbsp;<span class="op" id="5137509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137513">return</span>&nbsp;<span class="builtintype" id="5137520">nil</span><span class="op" id="5137523">,</span>&nbsp;<span class="builtintype" id="5137525">nil</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137533">e</span>&nbsp;<span class="op" id="5137535">:=</span>&nbsp;<span class="ident" id="5137538">tur</span><span class="op" id="5137541">.</span><span class="ident" id="5137542">b</span><span class="op" id="5137543">.</span><span class="ident" id="5137544">entry</span><span class="op" id="5137549">(</span><span class="ident" id="5137550">tur</span><span class="op" id="5137553">.</span><span class="ident" id="5137554">tu</span><span class="op" id="5137556">.</span><span class="ident" id="5137557">atable</span><span class="op" id="5137563">,</span>&nbsp;<span class="ident" id="5137565">tur</span><span class="op" id="5137568">.</span><span class="ident" id="5137569">tu</span><span class="op" id="5137571">.</span><span class="ident" id="5137572">base</span><span class="op" id="5137576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137579">if</span>&nbsp;<span class="ident" id="5137582">tur</span><span class="op" id="5137585">.</span><span class="ident" id="5137586">b</span><span class="op" id="5137587">.</span><span class="ident" id="5137588">err</span>&nbsp;<span class="op" id="5137592">!=</span>&nbsp;<span class="builtintype" id="5137595">nil</span>&nbsp;<span class="op" id="5137599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137603">tur</span><span class="op" id="5137606">.</span><span class="ident" id="5137607">err</span>&nbsp;<span class="op" id="5137611">=</span>&nbsp;<span class="ident" id="5137613">tur</span><span class="op" id="5137616">.</span><span class="ident" id="5137617">b</span><span class="op" id="5137618">.</span><span class="ident" id="5137619">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137625">return</span>&nbsp;<span class="builtintype" id="5137632">nil</span><span class="op" id="5137635">,</span>&nbsp;<span class="ident" id="5137637">tur</span><span class="op" id="5137640">.</span><span class="ident" id="5137641">err</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137649">return</span>&nbsp;<span class="ident" id="5137656">e</span><span class="op" id="5137657">,</span>&nbsp;<span class="builtintype" id="5137659">nil</span><br>
<span class="lineno"></span><span class="op" id="5137663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5137666">//&nbsp;clone&nbsp;returns&nbsp;a&nbsp;new&nbsp;reader&nbsp;for&nbsp;the&nbsp;type&nbsp;unit.</span><br>
<span class="lineno">155</span><span class="keyword" id="5137715">func</span>&nbsp;<span class="op" id="5137720">(</span><span class="ident" id="5137721">tur</span>&nbsp;<span class="op" id="5137725">*</span><span class="ident" id="5137726">typeUnitReader</span><span class="op" id="5137740">)</span>&nbsp;<span class="ident" id="5137742">clone</span><span class="op" id="5137747">(</span><span class="op" id="5137748">)</span>&nbsp;<span class="ident" id="5137750">typeReader</span>&nbsp;<span class="op" id="5137761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137764">return</span>&nbsp;<span class="op" id="5137771">&amp;</span><span class="ident" id="5137772">typeUnitReader</span><span class="op" id="5137786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137790">d</span><span class="op" id="5137791">:</span>&nbsp;&nbsp;<span class="ident" id="5137794">tur</span><span class="op" id="5137797">.</span><span class="ident" id="5137798">d</span><span class="op" id="5137799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137803">tu</span><span class="op" id="5137805">:</span>&nbsp;<span class="ident" id="5137807">tur</span><span class="op" id="5137810">.</span><span class="ident" id="5137811">tu</span><span class="op" id="5137813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137817">b</span><span class="op" id="5137818">:</span>&nbsp;&nbsp;<span class="ident" id="5137821">makeBuf</span><span class="op" id="5137828">(</span><span class="ident" id="5137829">tur</span><span class="op" id="5137832">.</span><span class="ident" id="5137833">d</span><span class="op" id="5137834">,</span>&nbsp;<span class="ident" id="5137836">tur</span><span class="op" id="5137839">.</span><span class="ident" id="5137840">tu</span><span class="op" id="5137842">,</span>&nbsp;<span class="ident" id="5137844">tur</span><span class="op" id="5137847">.</span><span class="ident" id="5137848">tu</span><span class="op" id="5137850">.</span><span class="ident" id="5137851">name</span><span class="op" id="5137855">,</span>&nbsp;<span class="ident" id="5137857">tur</span><span class="op" id="5137860">.</span><span class="ident" id="5137861">tu</span><span class="op" id="5137863">.</span><span class="ident" id="5137864">off</span><span class="op" id="5137867">,</span>&nbsp;<span class="ident" id="5137869">tur</span><span class="op" id="5137872">.</span><span class="ident" id="5137873">tu</span><span class="op" id="5137875">.</span><span class="ident" id="5137876">data</span><span class="op" id="5137880">)</span><span class="op" id="5137881">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137884">}</span><br>
<span class="lineno"></span><span class="op" id="5137886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5137889">//&nbsp;offset&nbsp;returns&nbsp;the&nbsp;current&nbsp;offset.</span><br>
<span class="lineno"></span><span class="keyword" id="5137927">func</span>&nbsp;<span class="op" id="5137932">(</span><span class="ident" id="5137933">tur</span>&nbsp;<span class="op" id="5137937">*</span><span class="ident" id="5137938">typeUnitReader</span><span class="op" id="5137952">)</span>&nbsp;<span class="ident" id="5137954">offset</span><span class="op" id="5137960">(</span><span class="op" id="5137961">)</span>&nbsp;<span class="ident" id="5137963">Offset</span>&nbsp;<span class="op" id="5137970">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137973">return</span>&nbsp;<span class="ident" id="5137980">tur</span><span class="op" id="5137983">.</span><span class="ident" id="5137984">b</span><span class="op" id="5137985">.</span><span class="ident" id="5137986">off</span><br>
<span class="lineno"></span><span class="op" id="5137990">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
