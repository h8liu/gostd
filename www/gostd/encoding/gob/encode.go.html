<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html" class="current">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5378519">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5378574">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5378628">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5378679">//go:generate&nbsp;go&nbsp;run&nbsp;encgen.go&nbsp;-output&nbsp;enc_helpers.go</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5378734">package</span>&nbsp;<span class="ident" id="5378742">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5378747">import</span>&nbsp;<span class="op" id="5378754">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5378757">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5378769">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5378777">&#34;reflect&#34;</span><br>
<span class="lineno"></span><span class="op" id="5378787">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5378790">const</span>&nbsp;<span class="ident" id="5378796">uint64Size</span>&nbsp;<span class="op" id="5378807">=</span>&nbsp;<span class="num" id="5378809">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5378812">type</span>&nbsp;<span class="ident" id="5378817">encHelper</span>&nbsp;<span class="keyword" id="5378827">func</span><span class="op" id="5378831">(</span><span class="ident" id="5378832">state</span>&nbsp;<span class="op" id="5378838">*</span><span class="ident" id="5378839"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5378851">,</span>&nbsp;<span class="ident" id="5378853">v</span>&nbsp;<span class="ident" id="5378855"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5378862">.</span><span class="ident" id="5378863"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5378868">)</span>&nbsp;<span class="builtintype" id="5378870">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5378876">//&nbsp;encoderState&nbsp;is&nbsp;the&nbsp;global&nbsp;execution&nbsp;state&nbsp;of&nbsp;an&nbsp;instance&nbsp;of&nbsp;the&nbsp;encoder.</span><br>
<span class="lineno">20</span><span class="comment" id="5378953">//&nbsp;Field&nbsp;numbers&nbsp;are&nbsp;delta&nbsp;encoded&nbsp;and&nbsp;always&nbsp;increase.&nbsp;The&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5379019">//&nbsp;number&nbsp;is&nbsp;initialized&nbsp;to&nbsp;-1&nbsp;so&nbsp;0&nbsp;comes&nbsp;out&nbsp;as&nbsp;delta(1).&nbsp;A&nbsp;delta&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5379089">//&nbsp;0&nbsp;terminates&nbsp;the&nbsp;structure.</span><br>
<span class="lineno"></span><span class="keyword" id="5379120">type</span>&nbsp;<span class="ident" id="5379125">encoderState</span>&nbsp;<span class="keyword" id="5379138">struct</span>&nbsp;<span class="op" id="5379145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379148">enc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5379157">*</span><span class="ident" id="5379158"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379167">b</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5379176">*</span><span class="ident" id="5379177"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379188">sendZero</span>&nbsp;<span class="builtintype" id="5379197">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5379218">//&nbsp;encoding&nbsp;an&nbsp;array&nbsp;element&nbsp;or&nbsp;map&nbsp;key/value&nbsp;pair;&nbsp;send&nbsp;zero&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379288">fieldnum</span>&nbsp;<span class="builtintype" id="5379297">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5379318">//&nbsp;the&nbsp;last&nbsp;field&nbsp;number&nbsp;written.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379353">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5379362">[</span><span class="num" id="5379363">1</span>&nbsp;<span class="op" id="5379365">+</span>&nbsp;<span class="ident" id="5379367"><a href="/gostd/encoding/gob/encode.go.html#5378796">uint64Size</a></span><span class="op" id="5379377">]</span><span class="builtintype" id="5379378">byte</span>&nbsp;<span class="comment" id="5379383">//&nbsp;buffer&nbsp;used&nbsp;by&nbsp;the&nbsp;encoder;&nbsp;here&nbsp;to&nbsp;avoid&nbsp;allocation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379441">next</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5379450">*</span><span class="ident" id="5379451"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5379471">//&nbsp;for&nbsp;free&nbsp;list</span><br>
<span class="lineno">30</span><span class="op" id="5379488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5379491">//&nbsp;encBuffer&nbsp;is&nbsp;an&nbsp;extremely&nbsp;simple,&nbsp;fast&nbsp;implementation&nbsp;of&nbsp;a&nbsp;write-only&nbsp;byte&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="5379577">//&nbsp;It&nbsp;never&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error,&nbsp;but&nbsp;Write&nbsp;returns&nbsp;an&nbsp;error&nbsp;value&nbsp;so&nbsp;it&nbsp;matches&nbsp;io.Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="5379672">type</span>&nbsp;<span class="ident" id="5379677">encBuffer</span>&nbsp;<span class="keyword" id="5379687">struct</span>&nbsp;<span class="op" id="5379694">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379697">data</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5379705">[</span><span class="op" id="5379706">]</span><span class="builtintype" id="5379707">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379713">scratch</span>&nbsp;<span class="op" id="5379721">[</span><span class="num" id="5379722">64</span><span class="op" id="5379724">]</span><span class="builtintype" id="5379725">byte</span><br>
<span class="lineno"></span><span class="op" id="5379730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5379733">func</span>&nbsp;<span class="op" id="5379738">(</span><span class="ident" id="5379739">e</span>&nbsp;<span class="op" id="5379741">*</span><span class="ident" id="5379742"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5379751">)</span>&nbsp;<span class="ident" id="5379753">WriteByte</span><span class="op" id="5379762">(</span><span class="ident" id="5379763">c</span>&nbsp;<span class="builtintype" id="5379765">byte</span><span class="op" id="5379769">)</span>&nbsp;<span class="op" id="5379771">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379774"><a href="/gostd/encoding/gob/encode.go.html#5379739">e</a></span><span class="op" id="5379775">.</span><span class="ident" id="5379776"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span>&nbsp;<span class="op" id="5379781">=</span>&nbsp;<span class="builtinfunc" id="5379783">append</span><span class="op" id="5379789">(</span><span class="ident" id="5379790"><a href="/gostd/encoding/gob/encode.go.html#5379739">e</a></span><span class="op" id="5379791">.</span><span class="ident" id="5379792"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span><span class="op" id="5379796">,</span>&nbsp;<span class="ident" id="5379798"><a href="/gostd/encoding/gob/encode.go.html#5379763">c</a></span><span class="op" id="5379799">)</span><br>
<span class="lineno"></span><span class="op" id="5379801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5379804">func</span>&nbsp;<span class="op" id="5379809">(</span><span class="ident" id="5379810">e</span>&nbsp;<span class="op" id="5379812">*</span><span class="ident" id="5379813"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5379822">)</span>&nbsp;<span class="ident" id="5379824">Write</span><span class="op" id="5379829">(</span><span class="ident" id="5379830">p</span>&nbsp;<span class="op" id="5379832">[</span><span class="op" id="5379833">]</span><span class="builtintype" id="5379834">byte</span><span class="op" id="5379838">)</span>&nbsp;<span class="op" id="5379840">(</span><span class="builtintype" id="5379841">int</span><span class="op" id="5379844">,</span>&nbsp;<span class="builtintype" id="5379846">error</span><span class="op" id="5379851">)</span>&nbsp;<span class="op" id="5379853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379856"><a href="/gostd/encoding/gob/encode.go.html#5379810">e</a></span><span class="op" id="5379857">.</span><span class="ident" id="5379858"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span>&nbsp;<span class="op" id="5379863">=</span>&nbsp;<span class="builtinfunc" id="5379865">append</span><span class="op" id="5379871">(</span><span class="ident" id="5379872"><a href="/gostd/encoding/gob/encode.go.html#5379810">e</a></span><span class="op" id="5379873">.</span><span class="ident" id="5379874"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span><span class="op" id="5379878">,</span>&nbsp;<span class="ident" id="5379880"><a href="/gostd/encoding/gob/encode.go.html#5379830">p</a></span><span class="op" id="5379881">...</span><span class="op" id="5379884">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5379887">return</span>&nbsp;<span class="builtinfunc" id="5379894">len</span><span class="op" id="5379897">(</span><span class="ident" id="5379898"><a href="/gostd/encoding/gob/encode.go.html#5379830">p</a></span><span class="op" id="5379899">)</span><span class="op" id="5379900">,</span>&nbsp;<span class="builtintype" id="5379902">nil</span><br>
<span class="lineno"></span><span class="op" id="5379906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5379909">func</span>&nbsp;<span class="op" id="5379914">(</span><span class="ident" id="5379915">e</span>&nbsp;<span class="op" id="5379917">*</span><span class="ident" id="5379918"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5379927">)</span>&nbsp;<span class="ident" id="5379929">WriteString</span><span class="op" id="5379940">(</span><span class="ident" id="5379941">s</span>&nbsp;<span class="builtintype" id="5379943">string</span><span class="op" id="5379949">)</span>&nbsp;<span class="op" id="5379951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5379954"><a href="/gostd/encoding/gob/encode.go.html#5379915">e</a></span><span class="op" id="5379955">.</span><span class="ident" id="5379956"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span>&nbsp;<span class="op" id="5379961">=</span>&nbsp;<span class="builtinfunc" id="5379963">append</span><span class="op" id="5379969">(</span><span class="ident" id="5379970"><a href="/gostd/encoding/gob/encode.go.html#5379915">e</a></span><span class="op" id="5379971">.</span><span class="ident" id="5379972"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span><span class="op" id="5379976">,</span>&nbsp;<span class="ident" id="5379978"><a href="/gostd/encoding/gob/encode.go.html#5379941">s</a></span><span class="op" id="5379979">...</span><span class="op" id="5379982">)</span><br>
<span class="lineno">50</span><span class="op" id="5379984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5379987">func</span>&nbsp;<span class="op" id="5379992">(</span><span class="ident" id="5379993">e</span>&nbsp;<span class="op" id="5379995">*</span><span class="ident" id="5379996"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5380005">)</span>&nbsp;<span class="ident" id="5380007">Len</span><span class="op" id="5380010">(</span><span class="op" id="5380011">)</span>&nbsp;<span class="builtintype" id="5380013">int</span>&nbsp;<span class="op" id="5380017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5380020">return</span>&nbsp;<span class="builtinfunc" id="5380027">len</span><span class="op" id="5380030">(</span><span class="ident" id="5380031"><a href="/gostd/encoding/gob/encode.go.html#5379993">e</a></span><span class="op" id="5380032">.</span><span class="ident" id="5380033"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span><span class="op" id="5380037">)</span><br>
<span class="lineno"></span><span class="op" id="5380039">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="5380042">func</span>&nbsp;<span class="op" id="5380047">(</span><span class="ident" id="5380048">e</span>&nbsp;<span class="op" id="5380050">*</span><span class="ident" id="5380051"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5380060">)</span>&nbsp;<span class="ident" id="5380062">Bytes</span><span class="op" id="5380067">(</span><span class="op" id="5380068">)</span>&nbsp;<span class="op" id="5380070">[</span><span class="op" id="5380071">]</span><span class="builtintype" id="5380072">byte</span>&nbsp;<span class="op" id="5380077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5380080">return</span>&nbsp;<span class="ident" id="5380087"><a href="/gostd/encoding/gob/encode.go.html#5380048">e</a></span><span class="op" id="5380088">.</span><span class="ident" id="5380089"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span><br>
<span class="lineno"></span><span class="op" id="5380094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5380097">func</span>&nbsp;<span class="op" id="5380102">(</span><span class="ident" id="5380103">e</span>&nbsp;<span class="op" id="5380105">*</span><span class="ident" id="5380106"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5380115">)</span>&nbsp;<span class="ident" id="5380117">Reset</span><span class="op" id="5380122">(</span><span class="op" id="5380123">)</span>&nbsp;<span class="op" id="5380125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380128"><a href="/gostd/encoding/gob/encode.go.html#5380103">e</a></span><span class="op" id="5380129">.</span><span class="ident" id="5380130"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span>&nbsp;<span class="op" id="5380135">=</span>&nbsp;<span class="ident" id="5380137"><a href="/gostd/encoding/gob/encode.go.html#5380103">e</a></span><span class="op" id="5380138">.</span><span class="ident" id="5380139"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span><span class="op" id="5380143">[</span><span class="num" id="5380144">0</span><span class="op" id="5380145">:</span><span class="num" id="5380146">0</span><span class="op" id="5380147">]</span><br>
<span class="lineno"></span><span class="op" id="5380149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5380152">func</span>&nbsp;<span class="op" id="5380157">(</span><span class="ident" id="5380158">enc</span>&nbsp;<span class="op" id="5380162">*</span><span class="ident" id="5380163"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><span class="op" id="5380170">)</span>&nbsp;<span class="ident" id="5380172">newEncoderState</span><span class="op" id="5380187">(</span><span class="ident" id="5380188">b</span>&nbsp;<span class="op" id="5380190">*</span><span class="ident" id="5380191"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5380200">)</span>&nbsp;<span class="op" id="5380202">*</span><span class="ident" id="5380203"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span>&nbsp;<span class="op" id="5380216">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380219">e</span>&nbsp;<span class="op" id="5380221">:=</span>&nbsp;<span class="ident" id="5380224"><a href="/gostd/encoding/gob/encode.go.html#5380158">enc</a></span><span class="op" id="5380227">.</span><span class="ident" id="5380228"><a href="/gostd/encoding/gob/encoder.go.html#5399377">freeList</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5380238">if</span>&nbsp;<span class="ident" id="5380241"><a href="/gostd/encoding/gob/encode.go.html#5380219">e</a></span>&nbsp;<span class="op" id="5380243">==</span>&nbsp;<span class="builtintype" id="5380246">nil</span>&nbsp;<span class="op" id="5380250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380254"><a href="/gostd/encoding/gob/encode.go.html#5380219">e</a></span>&nbsp;<span class="op" id="5380256">=</span>&nbsp;<span class="builtinfunc" id="5380258">new</span><span class="op" id="5380261">(</span><span class="ident" id="5380262"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5380274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380278"><a href="/gostd/encoding/gob/encode.go.html#5380219">e</a></span><span class="op" id="5380279">.</span><span class="ident" id="5380280"><a href="/gostd/encoding/gob/encode.go.html#5379148">enc</a></span>&nbsp;<span class="op" id="5380284">=</span>&nbsp;<span class="ident" id="5380286"><a href="/gostd/encoding/gob/encode.go.html#5380158">enc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5380291">}</span>&nbsp;<span class="keyword" id="5380293">else</span>&nbsp;<span class="op" id="5380298">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380302"><a href="/gostd/encoding/gob/encode.go.html#5380158">enc</a></span><span class="op" id="5380305">.</span><span class="ident" id="5380306"><a href="/gostd/encoding/gob/encoder.go.html#5399377">freeList</a></span>&nbsp;<span class="op" id="5380315">=</span>&nbsp;<span class="ident" id="5380317"><a href="/gostd/encoding/gob/encode.go.html#5380219">e</a></span><span class="op" id="5380318">.</span><span class="ident" id="5380319"><a href="/gostd/encoding/gob/encode.go.html#5379441">next</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5380325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380328"><a href="/gostd/encoding/gob/encode.go.html#5380219">e</a></span><span class="op" id="5380329">.</span><span class="ident" id="5380330"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5380339">=</span>&nbsp;<span class="builtintype" id="5380341">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380348"><a href="/gostd/encoding/gob/encode.go.html#5380219">e</a></span><span class="op" id="5380349">.</span><span class="ident" id="5380350"><a href="/gostd/encoding/gob/encode.go.html#5379288">fieldnum</a></span>&nbsp;<span class="op" id="5380359">=</span>&nbsp;<span class="num" id="5380361">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380364"><a href="/gostd/encoding/gob/encode.go.html#5380219">e</a></span><span class="op" id="5380365">.</span><span class="ident" id="5380366"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span>&nbsp;<span class="op" id="5380368">=</span>&nbsp;<span class="ident" id="5380370"><a href="/gostd/encoding/gob/encode.go.html#5380188">b</a></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5380373">if</span>&nbsp;<span class="builtinfunc" id="5380376">len</span><span class="op" id="5380379">(</span><span class="ident" id="5380380"><a href="/gostd/encoding/gob/encode.go.html#5380188">b</a></span><span class="op" id="5380381">.</span><span class="ident" id="5380382"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span><span class="op" id="5380386">)</span>&nbsp;<span class="op" id="5380388">==</span>&nbsp;<span class="num" id="5380391">0</span>&nbsp;<span class="op" id="5380393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380397"><a href="/gostd/encoding/gob/encode.go.html#5380188">b</a></span><span class="op" id="5380398">.</span><span class="ident" id="5380399"><a href="/gostd/encoding/gob/encode.go.html#5379697">data</a></span>&nbsp;<span class="op" id="5380404">=</span>&nbsp;<span class="ident" id="5380406"><a href="/gostd/encoding/gob/encode.go.html#5380188">b</a></span><span class="op" id="5380407">.</span><span class="ident" id="5380408"><a href="/gostd/encoding/gob/encode.go.html#5379713">scratch</a></span><span class="op" id="5380415">[</span><span class="num" id="5380416">0</span><span class="op" id="5380417">:</span><span class="num" id="5380418">0</span><span class="op" id="5380419">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5380422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5380425">return</span>&nbsp;<span class="ident" id="5380432"><a href="/gostd/encoding/gob/encode.go.html#5380219">e</a></span><br>
<span class="lineno"></span><span class="op" id="5380434">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="5380437">func</span>&nbsp;<span class="op" id="5380442">(</span><span class="ident" id="5380443">enc</span>&nbsp;<span class="op" id="5380447">*</span><span class="ident" id="5380448"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><span class="op" id="5380455">)</span>&nbsp;<span class="ident" id="5380457">freeEncoderState</span><span class="op" id="5380473">(</span><span class="ident" id="5380474">e</span>&nbsp;<span class="op" id="5380476">*</span><span class="ident" id="5380477"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5380489">)</span>&nbsp;<span class="op" id="5380491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380494"><a href="/gostd/encoding/gob/encode.go.html#5380474">e</a></span><span class="op" id="5380495">.</span><span class="ident" id="5380496"><a href="/gostd/encoding/gob/encode.go.html#5379441">next</a></span>&nbsp;<span class="op" id="5380501">=</span>&nbsp;<span class="ident" id="5380503"><a href="/gostd/encoding/gob/encode.go.html#5380443">enc</a></span><span class="op" id="5380506">.</span><span class="ident" id="5380507"><a href="/gostd/encoding/gob/encoder.go.html#5399377">freeList</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380517"><a href="/gostd/encoding/gob/encode.go.html#5380443">enc</a></span><span class="op" id="5380520">.</span><span class="ident" id="5380521"><a href="/gostd/encoding/gob/encoder.go.html#5399377">freeList</a></span>&nbsp;<span class="op" id="5380530">=</span>&nbsp;<span class="ident" id="5380532"><a href="/gostd/encoding/gob/encode.go.html#5380474">e</a></span><br>
<span class="lineno"></span><span class="op" id="5380534">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span><span class="comment" id="5380537">//&nbsp;Unsigned&nbsp;integers&nbsp;have&nbsp;a&nbsp;two-state&nbsp;encoding.&nbsp;&nbsp;If&nbsp;the&nbsp;number&nbsp;is&nbsp;less</span><br>
<span class="lineno"></span><span class="comment" id="5380608">//&nbsp;than&nbsp;128&nbsp;(0&nbsp;through&nbsp;0x7F),&nbsp;its&nbsp;value&nbsp;is&nbsp;written&nbsp;directly.</span><br>
<span class="lineno"></span><span class="comment" id="5380669">//&nbsp;Otherwise&nbsp;the&nbsp;value&nbsp;is&nbsp;written&nbsp;in&nbsp;big-endian&nbsp;byte&nbsp;order&nbsp;preceded</span><br>
<span class="lineno"></span><span class="comment" id="5380737">//&nbsp;by&nbsp;the&nbsp;byte&nbsp;length,&nbsp;negated.</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="5380770">//&nbsp;encodeUint&nbsp;writes&nbsp;an&nbsp;encoded&nbsp;unsigned&nbsp;integer&nbsp;to&nbsp;state.b.</span><br>
<span class="lineno"></span><span class="keyword" id="5380831">func</span>&nbsp;<span class="op" id="5380836">(</span><span class="ident" id="5380837">state</span>&nbsp;<span class="op" id="5380843">*</span><span class="ident" id="5380844"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5380856">)</span>&nbsp;<span class="ident" id="5380858">encodeUint</span><span class="op" id="5380868">(</span><span class="ident" id="5380869">x</span>&nbsp;<span class="builtintype" id="5380871">uint64</span><span class="op" id="5380877">)</span>&nbsp;<span class="op" id="5380879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5380882">if</span>&nbsp;<span class="ident" id="5380885"><a href="/gostd/encoding/gob/encode.go.html#5380869">x</a></span>&nbsp;<span class="op" id="5380887">&lt;=</span>&nbsp;<span class="num" id="5380890">0x7F</span>&nbsp;<span class="op" id="5380895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380899"><a href="/gostd/encoding/gob/encode.go.html#5380837">state</a></span><span class="op" id="5380904">.</span><span class="ident" id="5380905"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5380906">.</span><span class="ident" id="5380907"><a href="/gostd/encoding/gob/encode.go.html#5379753">WriteByte</a></span><span class="op" id="5380916">(</span><span class="builtintype" id="5380917">uint8</span><span class="op" id="5380922">(</span><span class="ident" id="5380923"><a href="/gostd/encoding/gob/encode.go.html#5380869">x</a></span><span class="op" id="5380924">)</span><span class="op" id="5380925">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5380929">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5380937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380940">i</span>&nbsp;<span class="op" id="5380942">:=</span>&nbsp;<span class="ident" id="5380945"><a href="/gostd/encoding/gob/encode.go.html#5378796">uint64Size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5380957">for</span>&nbsp;<span class="ident" id="5380961"><a href="/gostd/encoding/gob/encode.go.html#5380869">x</a></span>&nbsp;<span class="op" id="5380963">&gt;</span>&nbsp;<span class="num" id="5380965">0</span>&nbsp;<span class="op" id="5380967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380971"><a href="/gostd/encoding/gob/encode.go.html#5380837">state</a></span><span class="op" id="5380976">.</span><span class="ident" id="5380977"><a href="/gostd/encoding/gob/encode.go.html#5379353">buf</a></span><span class="op" id="5380980">[</span><span class="ident" id="5380981"><a href="/gostd/encoding/gob/encode.go.html#5380940">i</a></span><span class="op" id="5380982">]</span>&nbsp;<span class="op" id="5380984">=</span>&nbsp;<span class="builtintype" id="5380986">uint8</span><span class="op" id="5380991">(</span><span class="ident" id="5380992"><a href="/gostd/encoding/gob/encode.go.html#5380869">x</a></span><span class="op" id="5380993">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5380997"><a href="/gostd/encoding/gob/encode.go.html#5380869">x</a></span>&nbsp;<span class="op" id="5380999">&gt;&gt;=</span>&nbsp;<span class="num" id="5381003">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381007"><a href="/gostd/encoding/gob/encode.go.html#5380940">i</a></span><span class="op" id="5381008">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5381012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381015"><a href="/gostd/encoding/gob/encode.go.html#5380837">state</a></span><span class="op" id="5381020">.</span><span class="ident" id="5381021"><a href="/gostd/encoding/gob/encode.go.html#5379353">buf</a></span><span class="op" id="5381024">[</span><span class="ident" id="5381025"><a href="/gostd/encoding/gob/encode.go.html#5380940">i</a></span><span class="op" id="5381026">]</span>&nbsp;<span class="op" id="5381028">=</span>&nbsp;<span class="builtintype" id="5381030">uint8</span><span class="op" id="5381035">(</span><span class="ident" id="5381036"><a href="/gostd/encoding/gob/encode.go.html#5380940">i</a></span>&nbsp;<span class="op" id="5381038">-</span>&nbsp;<span class="ident" id="5381040"><a href="/gostd/encoding/gob/encode.go.html#5378796">uint64Size</a></span><span class="op" id="5381050">)</span>&nbsp;<span class="comment" id="5381052">//&nbsp;=&nbsp;loop&nbsp;count,&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381078"><a href="/gostd/encoding/gob/encode.go.html#5380837">state</a></span><span class="op" id="5381083">.</span><span class="ident" id="5381084"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5381085">.</span><span class="ident" id="5381086"><a href="/gostd/encoding/gob/encode.go.html#5379824">Write</a></span><span class="op" id="5381091">(</span><span class="ident" id="5381092"><a href="/gostd/encoding/gob/encode.go.html#5380837">state</a></span><span class="op" id="5381097">.</span><span class="ident" id="5381098"><a href="/gostd/encoding/gob/encode.go.html#5379353">buf</a></span><span class="op" id="5381101">[</span><span class="ident" id="5381102"><a href="/gostd/encoding/gob/encode.go.html#5380940">i</a></span>&nbsp;<span class="op" id="5381104">:</span>&nbsp;<span class="ident" id="5381106"><a href="/gostd/encoding/gob/encode.go.html#5378796">uint64Size</a></span><span class="op" id="5381116">+</span><span class="num" id="5381117">1</span><span class="op" id="5381118">]</span><span class="op" id="5381119">)</span><br>
<span class="lineno">105</span><span class="op" id="5381121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5381124">//&nbsp;encodeInt&nbsp;writes&nbsp;an&nbsp;encoded&nbsp;signed&nbsp;integer&nbsp;to&nbsp;state.w.</span><br>
<span class="lineno"></span><span class="comment" id="5381182">//&nbsp;The&nbsp;low&nbsp;bit&nbsp;of&nbsp;the&nbsp;encoding&nbsp;says&nbsp;whether&nbsp;to&nbsp;bit&nbsp;complement&nbsp;the&nbsp;(other&nbsp;bits&nbsp;of&nbsp;the)</span><br>
<span class="lineno"></span><span class="comment" id="5381268">//&nbsp;uint&nbsp;to&nbsp;recover&nbsp;the&nbsp;int.</span><br>
<span class="lineno">110</span><span class="keyword" id="5381296">func</span>&nbsp;<span class="op" id="5381301">(</span><span class="ident" id="5381302">state</span>&nbsp;<span class="op" id="5381308">*</span><span class="ident" id="5381309"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5381321">)</span>&nbsp;<span class="ident" id="5381323">encodeInt</span><span class="op" id="5381332">(</span><span class="ident" id="5381333">i</span>&nbsp;<span class="builtintype" id="5381335">int64</span><span class="op" id="5381340">)</span>&nbsp;<span class="op" id="5381342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5381345">var</span>&nbsp;<span class="ident" id="5381349">x</span>&nbsp;<span class="builtintype" id="5381351">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5381359">if</span>&nbsp;<span class="ident" id="5381362"><a href="/gostd/encoding/gob/encode.go.html#5381333">i</a></span>&nbsp;<span class="op" id="5381364">&lt;</span>&nbsp;<span class="num" id="5381366">0</span>&nbsp;<span class="op" id="5381368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381372"><a href="/gostd/encoding/gob/encode.go.html#5381349">x</a></span>&nbsp;<span class="op" id="5381374">=</span>&nbsp;<span class="builtintype" id="5381376">uint64</span><span class="op" id="5381382">(</span><span class="op" id="5381383">^</span><span class="ident" id="5381384"><a href="/gostd/encoding/gob/encode.go.html#5381333">i</a></span><span class="op" id="5381385">&lt;&lt;</span><span class="num" id="5381387">1</span><span class="op" id="5381388">)</span>&nbsp;<span class="op" id="5381390">|</span>&nbsp;<span class="num" id="5381392">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5381395">}</span>&nbsp;<span class="keyword" id="5381397">else</span>&nbsp;<span class="op" id="5381402">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381406"><a href="/gostd/encoding/gob/encode.go.html#5381349">x</a></span>&nbsp;<span class="op" id="5381408">=</span>&nbsp;<span class="builtintype" id="5381410">uint64</span><span class="op" id="5381416">(</span><span class="ident" id="5381417"><a href="/gostd/encoding/gob/encode.go.html#5381333">i</a></span>&nbsp;<span class="op" id="5381419">&lt;&lt;</span>&nbsp;<span class="num" id="5381422">1</span><span class="op" id="5381423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5381426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381429"><a href="/gostd/encoding/gob/encode.go.html#5381302">state</a></span><span class="op" id="5381434">.</span><span class="ident" id="5381435"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5381445">(</span><span class="builtintype" id="5381446">uint64</span><span class="op" id="5381452">(</span><span class="ident" id="5381453"><a href="/gostd/encoding/gob/encode.go.html#5381349">x</a></span><span class="op" id="5381454">)</span><span class="op" id="5381455">)</span><br>
<span class="lineno"></span><span class="op" id="5381457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="5381460">//&nbsp;encOp&nbsp;is&nbsp;the&nbsp;signature&nbsp;of&nbsp;an&nbsp;encoding&nbsp;operator&nbsp;for&nbsp;a&nbsp;given&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5381528">type</span>&nbsp;<span class="ident" id="5381533">encOp</span>&nbsp;<span class="keyword" id="5381539">func</span><span class="op" id="5381543">(</span><span class="ident" id="5381544">i</span>&nbsp;<span class="op" id="5381546">*</span><span class="ident" id="5381547"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5381555">,</span>&nbsp;<span class="ident" id="5381557">state</span>&nbsp;<span class="op" id="5381563">*</span><span class="ident" id="5381564"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5381576">,</span>&nbsp;<span class="ident" id="5381578">v</span>&nbsp;<span class="ident" id="5381580"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5381587">.</span><span class="ident" id="5381588"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5381593">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5381596">//&nbsp;The&nbsp;&#39;instructions&#39;&nbsp;of&nbsp;the&nbsp;encoding&nbsp;machine</span><br>
<span class="lineno"></span><span class="keyword" id="5381642">type</span>&nbsp;<span class="ident" id="5381647">encInstr</span>&nbsp;<span class="keyword" id="5381656">struct</span>&nbsp;<span class="op" id="5381663">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381666">op</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381672"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381679">field</span>&nbsp;<span class="builtintype" id="5381685">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5381691">//&nbsp;field&nbsp;number&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381717">index</span>&nbsp;<span class="op" id="5381723">[</span><span class="op" id="5381724">]</span><span class="builtintype" id="5381725">int</span>&nbsp;<span class="comment" id="5381729">//&nbsp;struct&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5381746">indir</span>&nbsp;<span class="builtintype" id="5381752">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5381758">//&nbsp;how&nbsp;many&nbsp;pointer&nbsp;indirections&nbsp;to&nbsp;reach&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;struct</span><br>
<span class="lineno"></span><span class="op" id="5381824">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="5381827">//&nbsp;update&nbsp;emits&nbsp;a&nbsp;field&nbsp;number&nbsp;and&nbsp;updates&nbsp;the&nbsp;state&nbsp;to&nbsp;record&nbsp;its&nbsp;value&nbsp;for&nbsp;delta&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="comment" id="5381920">//&nbsp;If&nbsp;the&nbsp;instruction&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;it&nbsp;does&nbsp;nothing</span><br>
<span class="lineno"></span><span class="keyword" id="5381974">func</span>&nbsp;<span class="op" id="5381979">(</span><span class="ident" id="5381980">state</span>&nbsp;<span class="op" id="5381986">*</span><span class="ident" id="5381987"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5381999">)</span>&nbsp;<span class="ident" id="5382001">update</span><span class="op" id="5382007">(</span><span class="ident" id="5382008">instr</span>&nbsp;<span class="op" id="5382014">*</span><span class="ident" id="5382015"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5382023">)</span>&nbsp;<span class="op" id="5382025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5382028">if</span>&nbsp;<span class="ident" id="5382031"><a href="/gostd/encoding/gob/encode.go.html#5382008">instr</a></span>&nbsp;<span class="op" id="5382037">!=</span>&nbsp;<span class="builtintype" id="5382040">nil</span>&nbsp;<span class="op" id="5382044">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5382048"><a href="/gostd/encoding/gob/encode.go.html#5381980">state</a></span><span class="op" id="5382053">.</span><span class="ident" id="5382054"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5382064">(</span><span class="builtintype" id="5382065">uint64</span><span class="op" id="5382071">(</span><span class="ident" id="5382072"><a href="/gostd/encoding/gob/encode.go.html#5382008">instr</a></span><span class="op" id="5382077">.</span><span class="ident" id="5382078"><a href="/gostd/encoding/gob/encode.go.html#5381679">field</a></span>&nbsp;<span class="op" id="5382084">-</span>&nbsp;<span class="ident" id="5382086"><a href="/gostd/encoding/gob/encode.go.html#5381980">state</a></span><span class="op" id="5382091">.</span><span class="ident" id="5382092"><a href="/gostd/encoding/gob/encode.go.html#5379288">fieldnum</a></span><span class="op" id="5382100">)</span><span class="op" id="5382101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5382105"><a href="/gostd/encoding/gob/encode.go.html#5381980">state</a></span><span class="op" id="5382110">.</span><span class="ident" id="5382111"><a href="/gostd/encoding/gob/encode.go.html#5379288">fieldnum</a></span>&nbsp;<span class="op" id="5382120">=</span>&nbsp;<span class="ident" id="5382122"><a href="/gostd/encoding/gob/encode.go.html#5382008">instr</a></span><span class="op" id="5382127">.</span><span class="ident" id="5382128"><a href="/gostd/encoding/gob/encode.go.html#5381679">field</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5382135">}</span><br>
<span class="lineno"></span><span class="op" id="5382137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="comment" id="5382140">//&nbsp;Each&nbsp;encoder&nbsp;for&nbsp;a&nbsp;composite&nbsp;is&nbsp;responsible&nbsp;for&nbsp;handling&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="5382204">//&nbsp;indirections&nbsp;associated&nbsp;with&nbsp;the&nbsp;elements&nbsp;of&nbsp;the&nbsp;data&nbsp;structure.</span><br>
<span class="lineno"></span><span class="comment" id="5382272">//&nbsp;If&nbsp;any&nbsp;pointer&nbsp;so&nbsp;reached&nbsp;is&nbsp;nil,&nbsp;no&nbsp;bytes&nbsp;are&nbsp;written.&nbsp;&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5382339">//&nbsp;data&nbsp;item&nbsp;is&nbsp;zero,&nbsp;no&nbsp;bytes&nbsp;are&nbsp;written.&nbsp;&nbsp;Single&nbsp;values&nbsp;-&nbsp;ints,</span><br>
<span class="lineno"></span><span class="comment" id="5382406">//&nbsp;strings&nbsp;etc.&nbsp;-&nbsp;are&nbsp;indirected&nbsp;before&nbsp;calling&nbsp;their&nbsp;encoders.</span><br>
<span class="lineno">145</span><span class="comment" id="5382470">//&nbsp;Otherwise,&nbsp;the&nbsp;output&nbsp;(for&nbsp;a&nbsp;scalar)&nbsp;is&nbsp;the&nbsp;field&nbsp;number,&nbsp;as&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5382537">//&nbsp;encoded&nbsp;integer,&nbsp;followed&nbsp;by&nbsp;the&nbsp;field&nbsp;data&nbsp;in&nbsp;its&nbsp;appropriate</span><br>
<span class="lineno"></span><span class="comment" id="5382603">//&nbsp;format.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5382615">//&nbsp;encIndirect&nbsp;dereferences&nbsp;pv&nbsp;indir&nbsp;times&nbsp;and&nbsp;returns&nbsp;the&nbsp;result.</span><br>
<span class="lineno">150</span><span class="keyword" id="5382682">func</span>&nbsp;<span class="ident" id="5382687">encIndirect</span><span class="op" id="5382698">(</span><span class="ident" id="5382699">pv</span>&nbsp;<span class="ident" id="5382702"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5382709">.</span><span class="ident" id="5382710"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5382715">,</span>&nbsp;<span class="ident" id="5382717">indir</span>&nbsp;<span class="builtintype" id="5382723">int</span><span class="op" id="5382726">)</span>&nbsp;<span class="ident" id="5382728"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5382735">.</span><span class="ident" id="5382736"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span>&nbsp;<span class="op" id="5382742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5382745">for</span>&nbsp;<span class="op" id="5382749">;</span>&nbsp;<span class="ident" id="5382751"><a href="/gostd/encoding/gob/encode.go.html#5382717">indir</a></span>&nbsp;<span class="op" id="5382757">&gt;</span>&nbsp;<span class="num" id="5382759">0</span><span class="op" id="5382760">;</span>&nbsp;<span class="ident" id="5382762"><a href="/gostd/encoding/gob/encode.go.html#5382717">indir</a></span><span class="op" id="5382767">--</span>&nbsp;<span class="op" id="5382770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5382774">if</span>&nbsp;<span class="ident" id="5382777"><a href="/gostd/encoding/gob/encode.go.html#5382699">pv</a></span><span class="op" id="5382779">.</span><span class="ident" id="5382780"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="5382785">(</span><span class="op" id="5382786">)</span>&nbsp;<span class="op" id="5382788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5382793">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5382801">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5382805"><a href="/gostd/encoding/gob/encode.go.html#5382699">pv</a></span>&nbsp;<span class="op" id="5382808">=</span>&nbsp;<span class="ident" id="5382810"><a href="/gostd/encoding/gob/encode.go.html#5382699">pv</a></span><span class="op" id="5382812">.</span><span class="ident" id="5382813"><a href="/gostd/reflect/value.go.html#2853087">Elem</a></span><span class="op" id="5382817">(</span><span class="op" id="5382818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5382821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5382824">return</span>&nbsp;<span class="ident" id="5382831"><a href="/gostd/encoding/gob/encode.go.html#5382699">pv</a></span><br>
<span class="lineno"></span><span class="op" id="5382834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="5382837">//&nbsp;encBool&nbsp;encodes&nbsp;the&nbsp;bool&nbsp;referenced&nbsp;by&nbsp;v&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;0&nbsp;or&nbsp;1.</span><br>
<span class="lineno"></span><span class="keyword" id="5382904">func</span>&nbsp;<span class="ident" id="5382909">encBool</span><span class="op" id="5382916">(</span><span class="ident" id="5382917">i</span>&nbsp;<span class="op" id="5382919">*</span><span class="ident" id="5382920"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5382928">,</span>&nbsp;<span class="ident" id="5382930">state</span>&nbsp;<span class="op" id="5382936">*</span><span class="ident" id="5382937"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5382949">,</span>&nbsp;<span class="ident" id="5382951">v</span>&nbsp;<span class="ident" id="5382953"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5382960">.</span><span class="ident" id="5382961"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5382966">)</span>&nbsp;<span class="op" id="5382968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5382971">b</span>&nbsp;<span class="op" id="5382973">:=</span>&nbsp;<span class="ident" id="5382976"><a href="/gostd/encoding/gob/encode.go.html#5382951">v</a></span><span class="op" id="5382977">.</span><span class="ident" id="5382978"><a href="/gostd/reflect/value.go.html#2839754">Bool</a></span><span class="op" id="5382982">(</span><span class="op" id="5382983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5382986">if</span>&nbsp;<span class="ident" id="5382989"><a href="/gostd/encoding/gob/encode.go.html#5382971">b</a></span>&nbsp;<span class="op" id="5382991">||</span>&nbsp;<span class="ident" id="5382994"><a href="/gostd/encoding/gob/encode.go.html#5382930">state</a></span><span class="op" id="5382999">.</span><span class="ident" id="5383000"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5383009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5383013"><a href="/gostd/encoding/gob/encode.go.html#5382930">state</a></span><span class="op" id="5383018">.</span><span class="ident" id="5383019"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5383025">(</span><span class="ident" id="5383026"><a href="/gostd/encoding/gob/encode.go.html#5382917">i</a></span><span class="op" id="5383027">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5383031">if</span>&nbsp;<span class="ident" id="5383034"><a href="/gostd/encoding/gob/encode.go.html#5382971">b</a></span>&nbsp;<span class="op" id="5383036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5383041"><a href="/gostd/encoding/gob/encode.go.html#5382930">state</a></span><span class="op" id="5383046">.</span><span class="ident" id="5383047"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5383057">(</span><span class="num" id="5383058">1</span><span class="op" id="5383059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5383063">}</span>&nbsp;<span class="keyword" id="5383065">else</span>&nbsp;<span class="op" id="5383070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5383075"><a href="/gostd/encoding/gob/encode.go.html#5382930">state</a></span><span class="op" id="5383080">.</span><span class="ident" id="5383081"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5383091">(</span><span class="num" id="5383092">0</span><span class="op" id="5383093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5383097">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5383100">}</span><br>
<span class="lineno"></span><span class="op" id="5383102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5383105">//&nbsp;encInt&nbsp;encodes&nbsp;the&nbsp;signed&nbsp;integer&nbsp;(int&nbsp;int8&nbsp;int16&nbsp;int32&nbsp;int64)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5383188">func</span>&nbsp;<span class="ident" id="5383193">encInt</span><span class="op" id="5383199">(</span><span class="ident" id="5383200">i</span>&nbsp;<span class="op" id="5383202">*</span><span class="ident" id="5383203"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5383211">,</span>&nbsp;<span class="ident" id="5383213">state</span>&nbsp;<span class="op" id="5383219">*</span><span class="ident" id="5383220"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5383232">,</span>&nbsp;<span class="ident" id="5383234">v</span>&nbsp;<span class="ident" id="5383236"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5383243">.</span><span class="ident" id="5383244"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5383249">)</span>&nbsp;<span class="op" id="5383251">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5383254">value</span>&nbsp;<span class="op" id="5383260">:=</span>&nbsp;<span class="ident" id="5383263"><a href="/gostd/encoding/gob/encode.go.html#5383234">v</a></span><span class="op" id="5383264">.</span><span class="ident" id="5383265"><a href="/gostd/reflect/value.go.html#2857929">Int</a></span><span class="op" id="5383268">(</span><span class="op" id="5383269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5383272">if</span>&nbsp;<span class="ident" id="5383275"><a href="/gostd/encoding/gob/encode.go.html#5383254">value</a></span>&nbsp;<span class="op" id="5383281">!=</span>&nbsp;<span class="num" id="5383284">0</span>&nbsp;<span class="op" id="5383286">||</span>&nbsp;<span class="ident" id="5383289"><a href="/gostd/encoding/gob/encode.go.html#5383213">state</a></span><span class="op" id="5383294">.</span><span class="ident" id="5383295"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5383304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5383308"><a href="/gostd/encoding/gob/encode.go.html#5383213">state</a></span><span class="op" id="5383313">.</span><span class="ident" id="5383314"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5383320">(</span><span class="ident" id="5383321"><a href="/gostd/encoding/gob/encode.go.html#5383200">i</a></span><span class="op" id="5383322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5383326"><a href="/gostd/encoding/gob/encode.go.html#5383213">state</a></span><span class="op" id="5383331">.</span><span class="ident" id="5383332"><a href="/gostd/encoding/gob/encode.go.html#5381323">encodeInt</a></span><span class="op" id="5383341">(</span><span class="ident" id="5383342"><a href="/gostd/encoding/gob/encode.go.html#5383254">value</a></span><span class="op" id="5383347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5383350">}</span><br>
<span class="lineno">180</span><span class="op" id="5383352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5383355">//&nbsp;encUint&nbsp;encodes&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;(uint&nbsp;uint8&nbsp;uint16&nbsp;uint32&nbsp;uint64&nbsp;uintptr)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5383454">func</span>&nbsp;<span class="ident" id="5383459">encUint</span><span class="op" id="5383466">(</span><span class="ident" id="5383467">i</span>&nbsp;<span class="op" id="5383469">*</span><span class="ident" id="5383470"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5383478">,</span>&nbsp;<span class="ident" id="5383480">state</span>&nbsp;<span class="op" id="5383486">*</span><span class="ident" id="5383487"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5383499">,</span>&nbsp;<span class="ident" id="5383501">v</span>&nbsp;<span class="ident" id="5383503"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5383510">.</span><span class="ident" id="5383511"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5383516">)</span>&nbsp;<span class="op" id="5383518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5383521">value</span>&nbsp;<span class="op" id="5383527">:=</span>&nbsp;<span class="ident" id="5383530"><a href="/gostd/encoding/gob/encode.go.html#5383501">v</a></span><span class="op" id="5383531">.</span><span class="ident" id="5383532"><a href="/gostd/reflect/value.go.html#2881772">Uint</a></span><span class="op" id="5383536">(</span><span class="op" id="5383537">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5383540">if</span>&nbsp;<span class="ident" id="5383543"><a href="/gostd/encoding/gob/encode.go.html#5383521">value</a></span>&nbsp;<span class="op" id="5383549">!=</span>&nbsp;<span class="num" id="5383552">0</span>&nbsp;<span class="op" id="5383554">||</span>&nbsp;<span class="ident" id="5383557"><a href="/gostd/encoding/gob/encode.go.html#5383480">state</a></span><span class="op" id="5383562">.</span><span class="ident" id="5383563"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5383572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5383576"><a href="/gostd/encoding/gob/encode.go.html#5383480">state</a></span><span class="op" id="5383581">.</span><span class="ident" id="5383582"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5383588">(</span><span class="ident" id="5383589"><a href="/gostd/encoding/gob/encode.go.html#5383467">i</a></span><span class="op" id="5383590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5383594"><a href="/gostd/encoding/gob/encode.go.html#5383480">state</a></span><span class="op" id="5383599">.</span><span class="ident" id="5383600"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5383610">(</span><span class="ident" id="5383611"><a href="/gostd/encoding/gob/encode.go.html#5383521">value</a></span><span class="op" id="5383616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5383619">}</span><br>
<span class="lineno"></span><span class="op" id="5383621">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5383624">//&nbsp;floatBits&nbsp;returns&nbsp;a&nbsp;uint64&nbsp;holding&nbsp;the&nbsp;bits&nbsp;of&nbsp;a&nbsp;floating-point&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="5383699">//&nbsp;Floating-point&nbsp;numbers&nbsp;are&nbsp;transmitted&nbsp;as&nbsp;uint64s&nbsp;holding&nbsp;the&nbsp;bits</span><br>
<span class="lineno"></span><span class="comment" id="5383769">//&nbsp;of&nbsp;the&nbsp;underlying&nbsp;representation.&nbsp;&nbsp;They&nbsp;are&nbsp;sent&nbsp;byte-reversed,&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5383841">//&nbsp;the&nbsp;exponent&nbsp;end&nbsp;coming&nbsp;out&nbsp;first,&nbsp;so&nbsp;integer&nbsp;floating&nbsp;point&nbsp;numbers</span><br>
<span class="lineno">195</span><span class="comment" id="5383913">//&nbsp;(for&nbsp;example)&nbsp;transmit&nbsp;more&nbsp;compactly.&nbsp;&nbsp;This&nbsp;routine&nbsp;does&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5383978">//&nbsp;swizzling.</span><br>
<span class="lineno"></span><span class="keyword" id="5383992">func</span>&nbsp;<span class="ident" id="5383997">floatBits</span><span class="op" id="5384006">(</span><span class="ident" id="5384007">f</span>&nbsp;<span class="builtintype" id="5384009">float64</span><span class="op" id="5384016">)</span>&nbsp;<span class="builtintype" id="5384018">uint64</span>&nbsp;<span class="op" id="5384025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384028">u</span>&nbsp;<span class="op" id="5384030">:=</span>&nbsp;<span class="ident" id="5384033"><a href="/gostd/encoding/gob/encode.go.html#5378769">math</a></span><span class="op" id="5384037">.</span><span class="ident" id="5384038"><a href="/gostd/math/unsafe.go.html#2340061">Float64bits</a></span><span class="op" id="5384049">(</span><span class="ident" id="5384050"><a href="/gostd/encoding/gob/encode.go.html#5384007">f</a></span><span class="op" id="5384051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5384054">var</span>&nbsp;<span class="ident" id="5384058">v</span>&nbsp;<span class="builtintype" id="5384060">uint64</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5384068">for</span>&nbsp;<span class="ident" id="5384072">i</span>&nbsp;<span class="op" id="5384074">:=</span>&nbsp;<span class="num" id="5384077">0</span><span class="op" id="5384078">;</span>&nbsp;<span class="ident" id="5384080"><a href="/gostd/encoding/gob/encode.go.html#5384072">i</a></span>&nbsp;<span class="op" id="5384082">&lt;</span>&nbsp;<span class="num" id="5384084">8</span><span class="op" id="5384085">;</span>&nbsp;<span class="ident" id="5384087"><a href="/gostd/encoding/gob/encode.go.html#5384072">i</a></span><span class="op" id="5384088">++</span>&nbsp;<span class="op" id="5384091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384095"><a href="/gostd/encoding/gob/encode.go.html#5384058">v</a></span>&nbsp;<span class="op" id="5384097">&lt;&lt;=</span>&nbsp;<span class="num" id="5384101">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384105"><a href="/gostd/encoding/gob/encode.go.html#5384058">v</a></span>&nbsp;<span class="op" id="5384107">|=</span>&nbsp;<span class="ident" id="5384110"><a href="/gostd/encoding/gob/encode.go.html#5384028">u</a></span>&nbsp;<span class="op" id="5384112">&amp;</span>&nbsp;<span class="num" id="5384114">0xFF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384121"><a href="/gostd/encoding/gob/encode.go.html#5384028">u</a></span>&nbsp;<span class="op" id="5384123">&gt;&gt;=</span>&nbsp;<span class="num" id="5384127">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5384130">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5384133">return</span>&nbsp;<span class="ident" id="5384140"><a href="/gostd/encoding/gob/encode.go.html#5384058">v</a></span><br>
<span class="lineno"></span><span class="op" id="5384142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5384145">//&nbsp;encFloat&nbsp;encodes&nbsp;the&nbsp;floating&nbsp;point&nbsp;value&nbsp;(float32&nbsp;float64)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5384225">func</span>&nbsp;<span class="ident" id="5384230">encFloat</span><span class="op" id="5384238">(</span><span class="ident" id="5384239">i</span>&nbsp;<span class="op" id="5384241">*</span><span class="ident" id="5384242"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5384250">,</span>&nbsp;<span class="ident" id="5384252">state</span>&nbsp;<span class="op" id="5384258">*</span><span class="ident" id="5384259"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5384271">,</span>&nbsp;<span class="ident" id="5384273">v</span>&nbsp;<span class="ident" id="5384275"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5384282">.</span><span class="ident" id="5384283"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5384288">)</span>&nbsp;<span class="op" id="5384290">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384293">f</span>&nbsp;<span class="op" id="5384295">:=</span>&nbsp;<span class="ident" id="5384298"><a href="/gostd/encoding/gob/encode.go.html#5384273">v</a></span><span class="op" id="5384299">.</span><span class="ident" id="5384300"><a href="/gostd/reflect/value.go.html#2856007">Float</a></span><span class="op" id="5384305">(</span><span class="op" id="5384306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5384309">if</span>&nbsp;<span class="ident" id="5384312"><a href="/gostd/encoding/gob/encode.go.html#5384293">f</a></span>&nbsp;<span class="op" id="5384314">!=</span>&nbsp;<span class="num" id="5384317">0</span>&nbsp;<span class="op" id="5384319">||</span>&nbsp;<span class="ident" id="5384322"><a href="/gostd/encoding/gob/encode.go.html#5384252">state</a></span><span class="op" id="5384327">.</span><span class="ident" id="5384328"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5384337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384341">bits</span>&nbsp;<span class="op" id="5384346">:=</span>&nbsp;<span class="ident" id="5384349"><a href="/gostd/encoding/gob/encode.go.html#5383997">floatBits</a></span><span class="op" id="5384358">(</span><span class="ident" id="5384359"><a href="/gostd/encoding/gob/encode.go.html#5384293">f</a></span><span class="op" id="5384360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384364"><a href="/gostd/encoding/gob/encode.go.html#5384252">state</a></span><span class="op" id="5384369">.</span><span class="ident" id="5384370"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5384376">(</span><span class="ident" id="5384377"><a href="/gostd/encoding/gob/encode.go.html#5384239">i</a></span><span class="op" id="5384378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384382"><a href="/gostd/encoding/gob/encode.go.html#5384252">state</a></span><span class="op" id="5384387">.</span><span class="ident" id="5384388"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5384398">(</span><span class="ident" id="5384399"><a href="/gostd/encoding/gob/encode.go.html#5384341">bits</a></span><span class="op" id="5384403">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5384406">}</span><br>
<span class="lineno"></span><span class="op" id="5384408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5384411">//&nbsp;encComplex&nbsp;encodes&nbsp;the&nbsp;complex&nbsp;value&nbsp;(complex64&nbsp;complex128)&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5384491">//&nbsp;Complex&nbsp;numbers&nbsp;are&nbsp;just&nbsp;a&nbsp;pair&nbsp;of&nbsp;floating-point&nbsp;numbers,&nbsp;real&nbsp;part&nbsp;first.</span><br>
<span class="lineno">220</span><span class="keyword" id="5384570">func</span>&nbsp;<span class="ident" id="5384575">encComplex</span><span class="op" id="5384585">(</span><span class="ident" id="5384586">i</span>&nbsp;<span class="op" id="5384588">*</span><span class="ident" id="5384589"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5384597">,</span>&nbsp;<span class="ident" id="5384599">state</span>&nbsp;<span class="op" id="5384605">*</span><span class="ident" id="5384606"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5384618">,</span>&nbsp;<span class="ident" id="5384620">v</span>&nbsp;<span class="ident" id="5384622"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5384629">.</span><span class="ident" id="5384630"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5384635">)</span>&nbsp;<span class="op" id="5384637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384640">c</span>&nbsp;<span class="op" id="5384642">:=</span>&nbsp;<span class="ident" id="5384645"><a href="/gostd/encoding/gob/encode.go.html#5384620">v</a></span><span class="op" id="5384646">.</span><span class="ident" id="5384647"><a href="/gostd/reflect/value.go.html#2852669">Complex</a></span><span class="op" id="5384654">(</span><span class="op" id="5384655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5384658">if</span>&nbsp;<span class="ident" id="5384661"><a href="/gostd/encoding/gob/encode.go.html#5384640">c</a></span>&nbsp;<span class="op" id="5384663">!=</span>&nbsp;<span class="num" id="5384666">0</span><span class="op" id="5384667">+</span><span class="num" id="5384668">0i</span>&nbsp;<span class="op" id="5384671">||</span>&nbsp;<span class="ident" id="5384674"><a href="/gostd/encoding/gob/encode.go.html#5384599">state</a></span><span class="op" id="5384679">.</span><span class="ident" id="5384680"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5384689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384693">rpart</span>&nbsp;<span class="op" id="5384699">:=</span>&nbsp;<span class="ident" id="5384702"><a href="/gostd/encoding/gob/encode.go.html#5383997">floatBits</a></span><span class="op" id="5384711">(</span><span class="builtinfunc" id="5384712">real</span><span class="op" id="5384716">(</span><span class="ident" id="5384717"><a href="/gostd/encoding/gob/encode.go.html#5384640">c</a></span><span class="op" id="5384718">)</span><span class="op" id="5384719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384723">ipart</span>&nbsp;<span class="op" id="5384729">:=</span>&nbsp;<span class="ident" id="5384732"><a href="/gostd/encoding/gob/encode.go.html#5383997">floatBits</a></span><span class="op" id="5384741">(</span><span class="builtinfunc" id="5384742">imag</span><span class="op" id="5384746">(</span><span class="ident" id="5384747"><a href="/gostd/encoding/gob/encode.go.html#5384640">c</a></span><span class="op" id="5384748">)</span><span class="op" id="5384749">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384753"><a href="/gostd/encoding/gob/encode.go.html#5384599">state</a></span><span class="op" id="5384758">.</span><span class="ident" id="5384759"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5384765">(</span><span class="ident" id="5384766"><a href="/gostd/encoding/gob/encode.go.html#5384586">i</a></span><span class="op" id="5384767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384771"><a href="/gostd/encoding/gob/encode.go.html#5384599">state</a></span><span class="op" id="5384776">.</span><span class="ident" id="5384777"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5384787">(</span><span class="ident" id="5384788"><a href="/gostd/encoding/gob/encode.go.html#5384693">rpart</a></span><span class="op" id="5384793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5384797"><a href="/gostd/encoding/gob/encode.go.html#5384599">state</a></span><span class="op" id="5384802">.</span><span class="ident" id="5384803"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5384813">(</span><span class="ident" id="5384814"><a href="/gostd/encoding/gob/encode.go.html#5384723">ipart</a></span><span class="op" id="5384819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5384822">}</span><br>
<span class="lineno"></span><span class="op" id="5384824">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="5384827">//&nbsp;encUint8Array&nbsp;encodes&nbsp;the&nbsp;byte&nbsp;array&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5384884">//&nbsp;Byte&nbsp;arrays&nbsp;are&nbsp;encoded&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;the&nbsp;raw&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="5384959">func</span>&nbsp;<span class="ident" id="5384964">encUint8Array</span><span class="op" id="5384977">(</span><span class="ident" id="5384978">i</span>&nbsp;<span class="op" id="5384980">*</span><span class="ident" id="5384981"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5384989">,</span>&nbsp;<span class="ident" id="5384991">state</span>&nbsp;<span class="op" id="5384997">*</span><span class="ident" id="5384998"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5385010">,</span>&nbsp;<span class="ident" id="5385012">v</span>&nbsp;<span class="ident" id="5385014"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5385021">.</span><span class="ident" id="5385022"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5385027">)</span>&nbsp;<span class="op" id="5385029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5385032">b</span>&nbsp;<span class="op" id="5385034">:=</span>&nbsp;<span class="ident" id="5385037"><a href="/gostd/encoding/gob/encode.go.html#5385012">v</a></span><span class="op" id="5385038">.</span><span class="ident" id="5385039"><a href="/gostd/reflect/value.go.html#2839927">Bytes</a></span><span class="op" id="5385044">(</span><span class="op" id="5385045">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5385048">if</span>&nbsp;<span class="builtinfunc" id="5385051">len</span><span class="op" id="5385054">(</span><span class="ident" id="5385055"><a href="/gostd/encoding/gob/encode.go.html#5385032">b</a></span><span class="op" id="5385056">)</span>&nbsp;<span class="op" id="5385058">&gt;</span>&nbsp;<span class="num" id="5385060">0</span>&nbsp;<span class="op" id="5385062">||</span>&nbsp;<span class="ident" id="5385065"><a href="/gostd/encoding/gob/encode.go.html#5384991">state</a></span><span class="op" id="5385070">.</span><span class="ident" id="5385071"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5385080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5385084"><a href="/gostd/encoding/gob/encode.go.html#5384991">state</a></span><span class="op" id="5385089">.</span><span class="ident" id="5385090"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5385096">(</span><span class="ident" id="5385097"><a href="/gostd/encoding/gob/encode.go.html#5384978">i</a></span><span class="op" id="5385098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5385102"><a href="/gostd/encoding/gob/encode.go.html#5384991">state</a></span><span class="op" id="5385107">.</span><span class="ident" id="5385108"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5385118">(</span><span class="builtintype" id="5385119">uint64</span><span class="op" id="5385125">(</span><span class="builtinfunc" id="5385126">len</span><span class="op" id="5385129">(</span><span class="ident" id="5385130"><a href="/gostd/encoding/gob/encode.go.html#5385032">b</a></span><span class="op" id="5385131">)</span><span class="op" id="5385132">)</span><span class="op" id="5385133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5385137"><a href="/gostd/encoding/gob/encode.go.html#5384991">state</a></span><span class="op" id="5385142">.</span><span class="ident" id="5385143"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5385144">.</span><span class="ident" id="5385145"><a href="/gostd/encoding/gob/encode.go.html#5379824">Write</a></span><span class="op" id="5385150">(</span><span class="ident" id="5385151"><a href="/gostd/encoding/gob/encode.go.html#5385032">b</a></span><span class="op" id="5385152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5385155">}</span><br>
<span class="lineno">240</span><span class="op" id="5385157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5385160">//&nbsp;encString&nbsp;encodes&nbsp;the&nbsp;string&nbsp;referenced&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="5385209">//&nbsp;Strings&nbsp;are&nbsp;encoded&nbsp;as&nbsp;an&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;the&nbsp;raw&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="5385280">func</span>&nbsp;<span class="ident" id="5385285">encString</span><span class="op" id="5385294">(</span><span class="ident" id="5385295">i</span>&nbsp;<span class="op" id="5385297">*</span><span class="ident" id="5385298"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5385306">,</span>&nbsp;<span class="ident" id="5385308">state</span>&nbsp;<span class="op" id="5385314">*</span><span class="ident" id="5385315"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5385327">,</span>&nbsp;<span class="ident" id="5385329">v</span>&nbsp;<span class="ident" id="5385331"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5385338">.</span><span class="ident" id="5385339"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5385344">)</span>&nbsp;<span class="op" id="5385346">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5385349">s</span>&nbsp;<span class="op" id="5385351">:=</span>&nbsp;<span class="ident" id="5385354"><a href="/gostd/encoding/gob/encode.go.html#5385329">v</a></span><span class="op" id="5385355">.</span><span class="ident" id="5385356"><a href="/gostd/reflect/value.go.html#2879739">String</a></span><span class="op" id="5385362">(</span><span class="op" id="5385363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5385366">if</span>&nbsp;<span class="builtinfunc" id="5385369">len</span><span class="op" id="5385372">(</span><span class="ident" id="5385373"><a href="/gostd/encoding/gob/encode.go.html#5385349">s</a></span><span class="op" id="5385374">)</span>&nbsp;<span class="op" id="5385376">&gt;</span>&nbsp;<span class="num" id="5385378">0</span>&nbsp;<span class="op" id="5385380">||</span>&nbsp;<span class="ident" id="5385383"><a href="/gostd/encoding/gob/encode.go.html#5385308">state</a></span><span class="op" id="5385388">.</span><span class="ident" id="5385389"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5385398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5385402"><a href="/gostd/encoding/gob/encode.go.html#5385308">state</a></span><span class="op" id="5385407">.</span><span class="ident" id="5385408"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5385414">(</span><span class="ident" id="5385415"><a href="/gostd/encoding/gob/encode.go.html#5385295">i</a></span><span class="op" id="5385416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5385420"><a href="/gostd/encoding/gob/encode.go.html#5385308">state</a></span><span class="op" id="5385425">.</span><span class="ident" id="5385426"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5385436">(</span><span class="builtintype" id="5385437">uint64</span><span class="op" id="5385443">(</span><span class="builtinfunc" id="5385444">len</span><span class="op" id="5385447">(</span><span class="ident" id="5385448"><a href="/gostd/encoding/gob/encode.go.html#5385349">s</a></span><span class="op" id="5385449">)</span><span class="op" id="5385450">)</span><span class="op" id="5385451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5385455"><a href="/gostd/encoding/gob/encode.go.html#5385308">state</a></span><span class="op" id="5385460">.</span><span class="ident" id="5385461"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5385462">.</span><span class="ident" id="5385463"><a href="/gostd/encoding/gob/encode.go.html#5379929">WriteString</a></span><span class="op" id="5385474">(</span><span class="ident" id="5385475"><a href="/gostd/encoding/gob/encode.go.html#5385349">s</a></span><span class="op" id="5385476">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5385479">}</span><br>
<span class="lineno"></span><span class="op" id="5385481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5385484">//&nbsp;encStructTerminator&nbsp;encodes&nbsp;the&nbsp;end&nbsp;of&nbsp;an&nbsp;encoded&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="5385544">//&nbsp;as&nbsp;delta&nbsp;field&nbsp;number&nbsp;of&nbsp;0.</span><br>
<span class="lineno">255</span><span class="keyword" id="5385575">func</span>&nbsp;<span class="ident" id="5385580">encStructTerminator</span><span class="op" id="5385599">(</span><span class="ident" id="5385600">i</span>&nbsp;<span class="op" id="5385602">*</span><span class="ident" id="5385603"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5385611">,</span>&nbsp;<span class="ident" id="5385613">state</span>&nbsp;<span class="op" id="5385619">*</span><span class="ident" id="5385620"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5385632">,</span>&nbsp;<span class="ident" id="5385634">v</span>&nbsp;<span class="ident" id="5385636"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5385643">.</span><span class="ident" id="5385644"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5385649">)</span>&nbsp;<span class="op" id="5385651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5385654"><a href="/gostd/encoding/gob/encode.go.html#5385613">state</a></span><span class="op" id="5385659">.</span><span class="ident" id="5385660"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5385670">(</span><span class="num" id="5385671">0</span><span class="op" id="5385672">)</span><br>
<span class="lineno"></span><span class="op" id="5385674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5385677">//&nbsp;Execution&nbsp;engine</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="comment" id="5385698">//&nbsp;encEngine&nbsp;an&nbsp;array&nbsp;of&nbsp;instructions&nbsp;indexed&nbsp;by&nbsp;field&nbsp;number&nbsp;of&nbsp;the&nbsp;encoding</span><br>
<span class="lineno"></span><span class="comment" id="5385776">//&nbsp;data,&nbsp;typically&nbsp;a&nbsp;struct.&nbsp;&nbsp;It&nbsp;is&nbsp;executed&nbsp;top&nbsp;to&nbsp;bottom,&nbsp;walking&nbsp;the&nbsp;struct.</span><br>
<span class="lineno"></span><span class="keyword" id="5385856">type</span>&nbsp;<span class="ident" id="5385861">encEngine</span>&nbsp;<span class="keyword" id="5385871">struct</span>&nbsp;<span class="op" id="5385878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5385881">instr</span>&nbsp;<span class="op" id="5385887">[</span><span class="op" id="5385888">]</span><span class="ident" id="5385889"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><br>
<span class="lineno">265</span><span class="op" id="5385898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5385901">const</span>&nbsp;<span class="ident" id="5385907">singletonField</span>&nbsp;<span class="op" id="5385922">=</span>&nbsp;<span class="num" id="5385924">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5385927">//&nbsp;valid&nbsp;reports&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;valid&nbsp;and&nbsp;a&nbsp;non-nil&nbsp;pointer.</span><br>
<span class="lineno">270</span><span class="comment" id="5385994">//&nbsp;(Slices,&nbsp;maps,&nbsp;and&nbsp;chans&nbsp;take&nbsp;care&nbsp;of&nbsp;themselves.)</span><br>
<span class="lineno"></span><span class="keyword" id="5386048">func</span>&nbsp;<span class="ident" id="5386053">valid</span><span class="op" id="5386058">(</span><span class="ident" id="5386059">v</span>&nbsp;<span class="ident" id="5386061"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5386068">.</span><span class="ident" id="5386069"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5386074">)</span>&nbsp;<span class="builtintype" id="5386076">bool</span>&nbsp;<span class="op" id="5386081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386084">switch</span>&nbsp;<span class="ident" id="5386091"><a href="/gostd/encoding/gob/encode.go.html#5386059">v</a></span><span class="op" id="5386092">.</span><span class="ident" id="5386093"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="5386097">(</span><span class="op" id="5386098">)</span>&nbsp;<span class="op" id="5386100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386103">case</span>&nbsp;<span class="ident" id="5386108"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5386115">.</span><span class="ident" id="5386116"><a href="/gostd/reflect/type.go.html#2787876">Invalid</a></span><span class="op" id="5386123">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386127">return</span>&nbsp;<span class="builtintype" id="5386134">false</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386141">case</span>&nbsp;<span class="ident" id="5386146"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5386153">.</span><span class="ident" id="5386154"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span><span class="op" id="5386157">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386161">return</span>&nbsp;<span class="op" id="5386168">!</span><span class="ident" id="5386169"><a href="/gostd/encoding/gob/encode.go.html#5386059">v</a></span><span class="op" id="5386170">.</span><span class="ident" id="5386171"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="5386176">(</span><span class="op" id="5386177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5386180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386183">return</span>&nbsp;<span class="builtintype" id="5386190">true</span><br>
<span class="lineno"></span><span class="op" id="5386195">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="5386198">//&nbsp;encodeSingle&nbsp;encodes&nbsp;a&nbsp;single&nbsp;top-level&nbsp;non-struct&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5386259">func</span>&nbsp;<span class="op" id="5386264">(</span><span class="ident" id="5386265">enc</span>&nbsp;<span class="op" id="5386269">*</span><span class="ident" id="5386270"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><span class="op" id="5386277">)</span>&nbsp;<span class="ident" id="5386279">encodeSingle</span><span class="op" id="5386291">(</span><span class="ident" id="5386292">b</span>&nbsp;<span class="op" id="5386294">*</span><span class="ident" id="5386295"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5386304">,</span>&nbsp;<span class="ident" id="5386306">engine</span>&nbsp;<span class="op" id="5386313">*</span><span class="ident" id="5386314"><a href="/gostd/encoding/gob/encode.go.html#5385861">encEngine</a></span><span class="op" id="5386323">,</span>&nbsp;<span class="ident" id="5386325">value</span>&nbsp;<span class="ident" id="5386331"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5386338">.</span><span class="ident" id="5386339"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5386344">)</span>&nbsp;<span class="op" id="5386346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5386349">state</span>&nbsp;<span class="op" id="5386355">:=</span>&nbsp;<span class="ident" id="5386358"><a href="/gostd/encoding/gob/encode.go.html#5386265">enc</a></span><span class="op" id="5386361">.</span><span class="ident" id="5386362"><a href="/gostd/encoding/gob/encode.go.html#5380172">newEncoderState</a></span><span class="op" id="5386377">(</span><span class="ident" id="5386378"><a href="/gostd/encoding/gob/encode.go.html#5386292">b</a></span><span class="op" id="5386379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386382">defer</span>&nbsp;<span class="ident" id="5386388"><a href="/gostd/encoding/gob/encode.go.html#5386265">enc</a></span><span class="op" id="5386391">.</span><span class="ident" id="5386392"><a href="/gostd/encoding/gob/encode.go.html#5380457">freeEncoderState</a></span><span class="op" id="5386408">(</span><span class="ident" id="5386409"><a href="/gostd/encoding/gob/encode.go.html#5386349">state</a></span><span class="op" id="5386414">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5386417"><a href="/gostd/encoding/gob/encode.go.html#5386349">state</a></span><span class="op" id="5386422">.</span><span class="ident" id="5386423"><a href="/gostd/encoding/gob/encode.go.html#5379288">fieldnum</a></span>&nbsp;<span class="op" id="5386432">=</span>&nbsp;<span class="ident" id="5386434"><a href="/gostd/encoding/gob/encode.go.html#5385907">singletonField</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5386450">//&nbsp;There&nbsp;is&nbsp;no&nbsp;surrounding&nbsp;struct&nbsp;to&nbsp;frame&nbsp;the&nbsp;transmission,&nbsp;so&nbsp;we&nbsp;must</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5386523">//&nbsp;generate&nbsp;data&nbsp;even&nbsp;if&nbsp;the&nbsp;item&nbsp;is&nbsp;zero.&nbsp;&nbsp;To&nbsp;do&nbsp;this,&nbsp;set&nbsp;sendZero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5386594"><a href="/gostd/encoding/gob/encode.go.html#5386349">state</a></span><span class="op" id="5386599">.</span><span class="ident" id="5386600"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5386609">=</span>&nbsp;<span class="builtintype" id="5386611">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5386617">instr</span>&nbsp;<span class="op" id="5386623">:=</span>&nbsp;<span class="op" id="5386626">&amp;</span><span class="ident" id="5386627"><a href="/gostd/encoding/gob/encode.go.html#5386306">engine</a></span><span class="op" id="5386633">.</span><span class="ident" id="5386634"><a href="/gostd/encoding/gob/encode.go.html#5385881">instr</a></span><span class="op" id="5386639">[</span><span class="ident" id="5386640"><a href="/gostd/encoding/gob/encode.go.html#5385907">singletonField</a></span><span class="op" id="5386654">]</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386657">if</span>&nbsp;<span class="ident" id="5386660"><a href="/gostd/encoding/gob/encode.go.html#5386617">instr</a></span><span class="op" id="5386665">.</span><span class="ident" id="5386666"><a href="/gostd/encoding/gob/encode.go.html#5381746">indir</a></span>&nbsp;<span class="op" id="5386672">&gt;</span>&nbsp;<span class="num" id="5386674">0</span>&nbsp;<span class="op" id="5386676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5386680"><a href="/gostd/encoding/gob/encode.go.html#5386325">value</a></span>&nbsp;<span class="op" id="5386686">=</span>&nbsp;<span class="ident" id="5386688"><a href="/gostd/encoding/gob/encode.go.html#5382687">encIndirect</a></span><span class="op" id="5386699">(</span><span class="ident" id="5386700"><a href="/gostd/encoding/gob/encode.go.html#5386325">value</a></span><span class="op" id="5386705">,</span>&nbsp;<span class="ident" id="5386707"><a href="/gostd/encoding/gob/encode.go.html#5386617">instr</a></span><span class="op" id="5386712">.</span><span class="ident" id="5386713"><a href="/gostd/encoding/gob/encode.go.html#5381746">indir</a></span><span class="op" id="5386718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5386721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386724">if</span>&nbsp;<span class="ident" id="5386727"><a href="/gostd/encoding/gob/encode.go.html#5386053">valid</a></span><span class="op" id="5386732">(</span><span class="ident" id="5386733"><a href="/gostd/encoding/gob/encode.go.html#5386325">value</a></span><span class="op" id="5386738">)</span>&nbsp;<span class="op" id="5386740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5386744"><a href="/gostd/encoding/gob/encode.go.html#5386617">instr</a></span><span class="op" id="5386749">.</span><span class="ident" id="5386750"><a href="/gostd/encoding/gob/encode.go.html#5381666">op</a></span><span class="op" id="5386752">(</span><span class="ident" id="5386753"><a href="/gostd/encoding/gob/encode.go.html#5386617">instr</a></span><span class="op" id="5386758">,</span>&nbsp;<span class="ident" id="5386760"><a href="/gostd/encoding/gob/encode.go.html#5386349">state</a></span><span class="op" id="5386765">,</span>&nbsp;<span class="ident" id="5386767"><a href="/gostd/encoding/gob/encode.go.html#5386325">value</a></span><span class="op" id="5386772">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5386775">}</span><br>
<span class="lineno"></span><span class="op" id="5386777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5386780">//&nbsp;encodeStruct&nbsp;encodes&nbsp;a&nbsp;single&nbsp;struct&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5386827">func</span>&nbsp;<span class="op" id="5386832">(</span><span class="ident" id="5386833">enc</span>&nbsp;<span class="op" id="5386837">*</span><span class="ident" id="5386838"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><span class="op" id="5386845">)</span>&nbsp;<span class="ident" id="5386847">encodeStruct</span><span class="op" id="5386859">(</span><span class="ident" id="5386860">b</span>&nbsp;<span class="op" id="5386862">*</span><span class="ident" id="5386863"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5386872">,</span>&nbsp;<span class="ident" id="5386874">engine</span>&nbsp;<span class="op" id="5386881">*</span><span class="ident" id="5386882"><a href="/gostd/encoding/gob/encode.go.html#5385861">encEngine</a></span><span class="op" id="5386891">,</span>&nbsp;<span class="ident" id="5386893">value</span>&nbsp;<span class="ident" id="5386899"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5386906">.</span><span class="ident" id="5386907"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5386912">)</span>&nbsp;<span class="op" id="5386914">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386917">if</span>&nbsp;<span class="op" id="5386920">!</span><span class="ident" id="5386921"><a href="/gostd/encoding/gob/encode.go.html#5386053">valid</a></span><span class="op" id="5386926">(</span><span class="ident" id="5386927"><a href="/gostd/encoding/gob/encode.go.html#5386893">value</a></span><span class="op" id="5386932">)</span>&nbsp;<span class="op" id="5386934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386938">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5386946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5386949">state</span>&nbsp;<span class="op" id="5386955">:=</span>&nbsp;<span class="ident" id="5386958"><a href="/gostd/encoding/gob/encode.go.html#5386833">enc</a></span><span class="op" id="5386961">.</span><span class="ident" id="5386962"><a href="/gostd/encoding/gob/encode.go.html#5380172">newEncoderState</a></span><span class="op" id="5386977">(</span><span class="ident" id="5386978"><a href="/gostd/encoding/gob/encode.go.html#5386860">b</a></span><span class="op" id="5386979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5386982">defer</span>&nbsp;<span class="ident" id="5386988"><a href="/gostd/encoding/gob/encode.go.html#5386833">enc</a></span><span class="op" id="5386991">.</span><span class="ident" id="5386992"><a href="/gostd/encoding/gob/encode.go.html#5380457">freeEncoderState</a></span><span class="op" id="5387008">(</span><span class="ident" id="5387009"><a href="/gostd/encoding/gob/encode.go.html#5386949">state</a></span><span class="op" id="5387014">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387017"><a href="/gostd/encoding/gob/encode.go.html#5386949">state</a></span><span class="op" id="5387022">.</span><span class="ident" id="5387023"><a href="/gostd/encoding/gob/encode.go.html#5379288">fieldnum</a></span>&nbsp;<span class="op" id="5387032">=</span>&nbsp;<span class="op" id="5387034">-</span><span class="num" id="5387035">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387038">for</span>&nbsp;<span class="ident" id="5387042">i</span>&nbsp;<span class="op" id="5387044">:=</span>&nbsp;<span class="num" id="5387047">0</span><span class="op" id="5387048">;</span>&nbsp;<span class="ident" id="5387050"><a href="/gostd/encoding/gob/encode.go.html#5387042">i</a></span>&nbsp;<span class="op" id="5387052">&lt;</span>&nbsp;<span class="builtinfunc" id="5387054">len</span><span class="op" id="5387057">(</span><span class="ident" id="5387058"><a href="/gostd/encoding/gob/encode.go.html#5386874">engine</a></span><span class="op" id="5387064">.</span><span class="ident" id="5387065"><a href="/gostd/encoding/gob/encode.go.html#5385881">instr</a></span><span class="op" id="5387070">)</span><span class="op" id="5387071">;</span>&nbsp;<span class="ident" id="5387073"><a href="/gostd/encoding/gob/encode.go.html#5387042">i</a></span><span class="op" id="5387074">++</span>&nbsp;<span class="op" id="5387077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387081">instr</span>&nbsp;<span class="op" id="5387087">:=</span>&nbsp;<span class="op" id="5387090">&amp;</span><span class="ident" id="5387091"><a href="/gostd/encoding/gob/encode.go.html#5386874">engine</a></span><span class="op" id="5387097">.</span><span class="ident" id="5387098"><a href="/gostd/encoding/gob/encode.go.html#5385881">instr</a></span><span class="op" id="5387103">[</span><span class="ident" id="5387104"><a href="/gostd/encoding/gob/encode.go.html#5387042">i</a></span><span class="op" id="5387105">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387109">if</span>&nbsp;<span class="ident" id="5387112"><a href="/gostd/encoding/gob/encode.go.html#5387042">i</a></span>&nbsp;<span class="op" id="5387114">&gt;=</span>&nbsp;<span class="ident" id="5387117"><a href="/gostd/encoding/gob/encode.go.html#5386893">value</a></span><span class="op" id="5387122">.</span><span class="ident" id="5387123"><a href="/gostd/reflect/value.go.html#2866109">NumField</a></span><span class="op" id="5387131">(</span><span class="op" id="5387132">)</span>&nbsp;<span class="op" id="5387134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5387139">//&nbsp;encStructTerminator</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387165"><a href="/gostd/encoding/gob/encode.go.html#5387081">instr</a></span><span class="op" id="5387170">.</span><span class="ident" id="5387171"><a href="/gostd/encoding/gob/encode.go.html#5381666">op</a></span><span class="op" id="5387173">(</span><span class="ident" id="5387174"><a href="/gostd/encoding/gob/encode.go.html#5387081">instr</a></span><span class="op" id="5387179">,</span>&nbsp;<span class="ident" id="5387181"><a href="/gostd/encoding/gob/encode.go.html#5386949">state</a></span><span class="op" id="5387186">,</span>&nbsp;<span class="ident" id="5387188"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5387195">.</span><span class="ident" id="5387196"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5387201">{</span><span class="op" id="5387202">}</span><span class="op" id="5387203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387208">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387220">field</span>&nbsp;<span class="op" id="5387226">:=</span>&nbsp;<span class="ident" id="5387229"><a href="/gostd/encoding/gob/encode.go.html#5386893">value</a></span><span class="op" id="5387234">.</span><span class="ident" id="5387235"><a href="/gostd/reflect/value.go.html#2854859">FieldByIndex</a></span><span class="op" id="5387247">(</span><span class="ident" id="5387248"><a href="/gostd/encoding/gob/encode.go.html#5387081">instr</a></span><span class="op" id="5387253">.</span><span class="ident" id="5387254"><a href="/gostd/encoding/gob/encode.go.html#5381717">index</a></span><span class="op" id="5387259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387263">if</span>&nbsp;<span class="ident" id="5387266"><a href="/gostd/encoding/gob/encode.go.html#5387081">instr</a></span><span class="op" id="5387271">.</span><span class="ident" id="5387272"><a href="/gostd/encoding/gob/encode.go.html#5381746">indir</a></span>&nbsp;<span class="op" id="5387278">&gt;</span>&nbsp;<span class="num" id="5387280">0</span>&nbsp;<span class="op" id="5387282">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387287"><a href="/gostd/encoding/gob/encode.go.html#5387220">field</a></span>&nbsp;<span class="op" id="5387293">=</span>&nbsp;<span class="ident" id="5387295"><a href="/gostd/encoding/gob/encode.go.html#5382687">encIndirect</a></span><span class="op" id="5387306">(</span><span class="ident" id="5387307"><a href="/gostd/encoding/gob/encode.go.html#5387220">field</a></span><span class="op" id="5387312">,</span>&nbsp;<span class="ident" id="5387314"><a href="/gostd/encoding/gob/encode.go.html#5387081">instr</a></span><span class="op" id="5387319">.</span><span class="ident" id="5387320"><a href="/gostd/encoding/gob/encode.go.html#5381746">indir</a></span><span class="op" id="5387325">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5387330">//&nbsp;TODO:&nbsp;Is&nbsp;field&nbsp;guaranteed&nbsp;valid?&nbsp;If&nbsp;so&nbsp;we&nbsp;could&nbsp;avoid&nbsp;this&nbsp;check.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387402">if</span>&nbsp;<span class="op" id="5387405">!</span><span class="ident" id="5387406"><a href="/gostd/encoding/gob/encode.go.html#5386053">valid</a></span><span class="op" id="5387411">(</span><span class="ident" id="5387412"><a href="/gostd/encoding/gob/encode.go.html#5387220">field</a></span><span class="op" id="5387417">)</span>&nbsp;<span class="op" id="5387419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387425">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387437">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387445"><a href="/gostd/encoding/gob/encode.go.html#5387081">instr</a></span><span class="op" id="5387450">.</span><span class="ident" id="5387451"><a href="/gostd/encoding/gob/encode.go.html#5381666">op</a></span><span class="op" id="5387453">(</span><span class="ident" id="5387454"><a href="/gostd/encoding/gob/encode.go.html#5387081">instr</a></span><span class="op" id="5387459">,</span>&nbsp;<span class="ident" id="5387461"><a href="/gostd/encoding/gob/encode.go.html#5386949">state</a></span><span class="op" id="5387466">,</span>&nbsp;<span class="ident" id="5387468"><a href="/gostd/encoding/gob/encode.go.html#5387220">field</a></span><span class="op" id="5387473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387476">}</span><br>
<span class="lineno"></span><span class="op" id="5387478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="5387481">//&nbsp;encodeArray&nbsp;encodes&nbsp;an&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="5387514">func</span>&nbsp;<span class="op" id="5387519">(</span><span class="ident" id="5387520">enc</span>&nbsp;<span class="op" id="5387524">*</span><span class="ident" id="5387525"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><span class="op" id="5387532">)</span>&nbsp;<span class="ident" id="5387534">encodeArray</span><span class="op" id="5387545">(</span><span class="ident" id="5387546">b</span>&nbsp;<span class="op" id="5387548">*</span><span class="ident" id="5387549"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5387558">,</span>&nbsp;<span class="ident" id="5387560">value</span>&nbsp;<span class="ident" id="5387566"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5387573">.</span><span class="ident" id="5387574"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5387579">,</span>&nbsp;<span class="ident" id="5387581">op</span>&nbsp;<span class="ident" id="5387584"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><span class="op" id="5387589">,</span>&nbsp;<span class="ident" id="5387591">elemIndir</span>&nbsp;<span class="builtintype" id="5387601">int</span><span class="op" id="5387604">,</span>&nbsp;<span class="ident" id="5387606">length</span>&nbsp;<span class="builtintype" id="5387613">int</span><span class="op" id="5387616">,</span>&nbsp;<span class="ident" id="5387618">helper</span>&nbsp;<span class="ident" id="5387625"><a href="/gostd/encoding/gob/encode.go.html#5378817">encHelper</a></span><span class="op" id="5387634">)</span>&nbsp;<span class="op" id="5387636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387639">state</span>&nbsp;<span class="op" id="5387645">:=</span>&nbsp;<span class="ident" id="5387648"><a href="/gostd/encoding/gob/encode.go.html#5387520">enc</a></span><span class="op" id="5387651">.</span><span class="ident" id="5387652"><a href="/gostd/encoding/gob/encode.go.html#5380172">newEncoderState</a></span><span class="op" id="5387667">(</span><span class="ident" id="5387668"><a href="/gostd/encoding/gob/encode.go.html#5387546">b</a></span><span class="op" id="5387669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387672">defer</span>&nbsp;<span class="ident" id="5387678"><a href="/gostd/encoding/gob/encode.go.html#5387520">enc</a></span><span class="op" id="5387681">.</span><span class="ident" id="5387682"><a href="/gostd/encoding/gob/encode.go.html#5380457">freeEncoderState</a></span><span class="op" id="5387698">(</span><span class="ident" id="5387699"><a href="/gostd/encoding/gob/encode.go.html#5387639">state</a></span><span class="op" id="5387704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387707"><a href="/gostd/encoding/gob/encode.go.html#5387639">state</a></span><span class="op" id="5387712">.</span><span class="ident" id="5387713"><a href="/gostd/encoding/gob/encode.go.html#5379288">fieldnum</a></span>&nbsp;<span class="op" id="5387722">=</span>&nbsp;<span class="op" id="5387724">-</span><span class="num" id="5387725">1</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387728"><a href="/gostd/encoding/gob/encode.go.html#5387639">state</a></span><span class="op" id="5387733">.</span><span class="ident" id="5387734"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5387743">=</span>&nbsp;<span class="builtintype" id="5387745">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387751"><a href="/gostd/encoding/gob/encode.go.html#5387639">state</a></span><span class="op" id="5387756">.</span><span class="ident" id="5387757"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5387767">(</span><span class="builtintype" id="5387768">uint64</span><span class="op" id="5387774">(</span><span class="ident" id="5387775"><a href="/gostd/encoding/gob/encode.go.html#5387606">length</a></span><span class="op" id="5387781">)</span><span class="op" id="5387782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387785">if</span>&nbsp;<span class="ident" id="5387788"><a href="/gostd/encoding/gob/encode.go.html#5387618">helper</a></span>&nbsp;<span class="op" id="5387795">!=</span>&nbsp;<span class="builtintype" id="5387798">nil</span>&nbsp;<span class="op" id="5387802">&amp;&amp;</span>&nbsp;<span class="ident" id="5387805"><a href="/gostd/encoding/gob/encode.go.html#5387618">helper</a></span><span class="op" id="5387811">(</span><span class="ident" id="5387812"><a href="/gostd/encoding/gob/encode.go.html#5387639">state</a></span><span class="op" id="5387817">,</span>&nbsp;<span class="ident" id="5387819"><a href="/gostd/encoding/gob/encode.go.html#5387560">value</a></span><span class="op" id="5387824">)</span>&nbsp;<span class="op" id="5387826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387830">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5387838">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387841">for</span>&nbsp;<span class="ident" id="5387845">i</span>&nbsp;<span class="op" id="5387847">:=</span>&nbsp;<span class="num" id="5387850">0</span><span class="op" id="5387851">;</span>&nbsp;<span class="ident" id="5387853"><a href="/gostd/encoding/gob/encode.go.html#5387845">i</a></span>&nbsp;<span class="op" id="5387855">&lt;</span>&nbsp;<span class="ident" id="5387857"><a href="/gostd/encoding/gob/encode.go.html#5387606">length</a></span><span class="op" id="5387863">;</span>&nbsp;<span class="ident" id="5387865"><a href="/gostd/encoding/gob/encode.go.html#5387845">i</a></span><span class="op" id="5387866">++</span>&nbsp;<span class="op" id="5387869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387873">elem</span>&nbsp;<span class="op" id="5387878">:=</span>&nbsp;<span class="ident" id="5387881"><a href="/gostd/encoding/gob/encode.go.html#5387560">value</a></span><span class="op" id="5387886">.</span><span class="ident" id="5387887"><a href="/gostd/reflect/value.go.html#2856377">Index</a></span><span class="op" id="5387892">(</span><span class="ident" id="5387893"><a href="/gostd/encoding/gob/encode.go.html#5387845">i</a></span><span class="op" id="5387894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5387898">if</span>&nbsp;<span class="ident" id="5387901"><a href="/gostd/encoding/gob/encode.go.html#5387591">elemIndir</a></span>&nbsp;<span class="op" id="5387911">&gt;</span>&nbsp;<span class="num" id="5387913">0</span>&nbsp;<span class="op" id="5387915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5387920"><a href="/gostd/encoding/gob/encode.go.html#5387873">elem</a></span>&nbsp;<span class="op" id="5387925">=</span>&nbsp;<span class="ident" id="5387927"><a href="/gostd/encoding/gob/encode.go.html#5382687">encIndirect</a></span><span class="op" id="5387938">(</span><span class="ident" id="5387939"><a href="/gostd/encoding/gob/encode.go.html#5387873">elem</a></span><span class="op" id="5387943">,</span>&nbsp;<span class="ident" id="5387945"><a href="/gostd/encoding/gob/encode.go.html#5387591">elemIndir</a></span><span class="op" id="5387954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5387959">//&nbsp;TODO:&nbsp;Is&nbsp;elem&nbsp;guaranteed&nbsp;valid?&nbsp;If&nbsp;so&nbsp;we&nbsp;could&nbsp;avoid&nbsp;this&nbsp;check.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388030">if</span>&nbsp;<span class="op" id="5388033">!</span><span class="ident" id="5388034"><a href="/gostd/encoding/gob/encode.go.html#5386053">valid</a></span><span class="op" id="5388039">(</span><span class="ident" id="5388040"><a href="/gostd/encoding/gob/encode.go.html#5387873">elem</a></span><span class="op" id="5388044">)</span>&nbsp;<span class="op" id="5388046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388052"><a href="/gostd/encoding/gob/error.go.html#5407181">errorf</a></span><span class="op" id="5388058">(</span><span class="string" id="5388059">&#34;encodeArray:&nbsp;nil&nbsp;element&#34;</span><span class="op" id="5388085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5388090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5388094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388098"><a href="/gostd/encoding/gob/encode.go.html#5387581">op</a></span><span class="op" id="5388100">(</span><span class="builtintype" id="5388101">nil</span><span class="op" id="5388104">,</span>&nbsp;<span class="ident" id="5388106"><a href="/gostd/encoding/gob/encode.go.html#5387639">state</a></span><span class="op" id="5388111">,</span>&nbsp;<span class="ident" id="5388113"><a href="/gostd/encoding/gob/encode.go.html#5387873">elem</a></span><span class="op" id="5388117">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5388120">}</span><br>
<span class="lineno"></span><span class="op" id="5388122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5388125">//&nbsp;encodeReflectValue&nbsp;is&nbsp;a&nbsp;helper&nbsp;for&nbsp;maps.&nbsp;It&nbsp;encodes&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="keyword" id="5388193">func</span>&nbsp;<span class="ident" id="5388198">encodeReflectValue</span><span class="op" id="5388216">(</span><span class="ident" id="5388217">state</span>&nbsp;<span class="op" id="5388223">*</span><span class="ident" id="5388224"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5388236">,</span>&nbsp;<span class="ident" id="5388238">v</span>&nbsp;<span class="ident" id="5388240"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5388247">.</span><span class="ident" id="5388248"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5388253">,</span>&nbsp;<span class="ident" id="5388255">op</span>&nbsp;<span class="ident" id="5388258"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><span class="op" id="5388263">,</span>&nbsp;<span class="ident" id="5388265">indir</span>&nbsp;<span class="builtintype" id="5388271">int</span><span class="op" id="5388274">)</span>&nbsp;<span class="op" id="5388276">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388279">for</span>&nbsp;<span class="ident" id="5388283">i</span>&nbsp;<span class="op" id="5388285">:=</span>&nbsp;<span class="num" id="5388288">0</span><span class="op" id="5388289">;</span>&nbsp;<span class="ident" id="5388291"><a href="/gostd/encoding/gob/encode.go.html#5388283">i</a></span>&nbsp;<span class="op" id="5388293">&lt;</span>&nbsp;<span class="ident" id="5388295"><a href="/gostd/encoding/gob/encode.go.html#5388265">indir</a></span>&nbsp;<span class="op" id="5388301">&amp;&amp;</span>&nbsp;<span class="ident" id="5388304"><a href="/gostd/encoding/gob/encode.go.html#5388238">v</a></span><span class="op" id="5388305">.</span><span class="ident" id="5388306"><a href="/gostd/reflect/value.go.html#2861333">IsValid</a></span><span class="op" id="5388313">(</span><span class="op" id="5388314">)</span><span class="op" id="5388315">;</span>&nbsp;<span class="ident" id="5388317"><a href="/gostd/encoding/gob/encode.go.html#5388283">i</a></span><span class="op" id="5388318">++</span>&nbsp;<span class="op" id="5388321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388325"><a href="/gostd/encoding/gob/encode.go.html#5388238">v</a></span>&nbsp;<span class="op" id="5388327">=</span>&nbsp;<span class="ident" id="5388329"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5388336">.</span><span class="ident" id="5388337"><a href="/gostd/reflect/value.go.html#2892316">Indirect</a></span><span class="op" id="5388345">(</span><span class="ident" id="5388346"><a href="/gostd/encoding/gob/encode.go.html#5388238">v</a></span><span class="op" id="5388347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5388350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388353">if</span>&nbsp;<span class="op" id="5388356">!</span><span class="ident" id="5388357"><a href="/gostd/encoding/gob/encode.go.html#5388238">v</a></span><span class="op" id="5388358">.</span><span class="ident" id="5388359"><a href="/gostd/reflect/value.go.html#2861333">IsValid</a></span><span class="op" id="5388366">(</span><span class="op" id="5388367">)</span>&nbsp;<span class="op" id="5388369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388373"><a href="/gostd/encoding/gob/error.go.html#5407181">errorf</a></span><span class="op" id="5388379">(</span><span class="string" id="5388380">&#34;encodeReflectValue:&nbsp;nil&nbsp;element&#34;</span><span class="op" id="5388413">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5388416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388419"><a href="/gostd/encoding/gob/encode.go.html#5388255">op</a></span><span class="op" id="5388421">(</span><span class="builtintype" id="5388422">nil</span><span class="op" id="5388425">,</span>&nbsp;<span class="ident" id="5388427"><a href="/gostd/encoding/gob/encode.go.html#5388217">state</a></span><span class="op" id="5388432">,</span>&nbsp;<span class="ident" id="5388434"><a href="/gostd/encoding/gob/encode.go.html#5388238">v</a></span><span class="op" id="5388435">)</span><br>
<span class="lineno"></span><span class="op" id="5388437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5388440">//&nbsp;encodeMap&nbsp;encodes&nbsp;a&nbsp;map&nbsp;as&nbsp;unsigned&nbsp;count&nbsp;followed&nbsp;by&nbsp;key:value&nbsp;pairs.</span><br>
<span class="lineno">360</span><span class="keyword" id="5388514">func</span>&nbsp;<span class="op" id="5388519">(</span><span class="ident" id="5388520">enc</span>&nbsp;<span class="op" id="5388524">*</span><span class="ident" id="5388525"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><span class="op" id="5388532">)</span>&nbsp;<span class="ident" id="5388534">encodeMap</span><span class="op" id="5388543">(</span><span class="ident" id="5388544">b</span>&nbsp;<span class="op" id="5388546">*</span><span class="ident" id="5388547"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5388556">,</span>&nbsp;<span class="ident" id="5388558">mv</span>&nbsp;<span class="ident" id="5388561"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5388568">.</span><span class="ident" id="5388569"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5388574">,</span>&nbsp;<span class="ident" id="5388576">keyOp</span><span class="op" id="5388581">,</span>&nbsp;<span class="ident" id="5388583">elemOp</span>&nbsp;<span class="ident" id="5388590"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><span class="op" id="5388595">,</span>&nbsp;<span class="ident" id="5388597">keyIndir</span><span class="op" id="5388605">,</span>&nbsp;<span class="ident" id="5388607">elemIndir</span>&nbsp;<span class="builtintype" id="5388617">int</span><span class="op" id="5388620">)</span>&nbsp;<span class="op" id="5388622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388625">state</span>&nbsp;<span class="op" id="5388631">:=</span>&nbsp;<span class="ident" id="5388634"><a href="/gostd/encoding/gob/encode.go.html#5388520">enc</a></span><span class="op" id="5388637">.</span><span class="ident" id="5388638"><a href="/gostd/encoding/gob/encode.go.html#5380172">newEncoderState</a></span><span class="op" id="5388653">(</span><span class="ident" id="5388654"><a href="/gostd/encoding/gob/encode.go.html#5388544">b</a></span><span class="op" id="5388655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388658"><a href="/gostd/encoding/gob/encode.go.html#5388625">state</a></span><span class="op" id="5388663">.</span><span class="ident" id="5388664"><a href="/gostd/encoding/gob/encode.go.html#5379288">fieldnum</a></span>&nbsp;<span class="op" id="5388673">=</span>&nbsp;<span class="op" id="5388675">-</span><span class="num" id="5388676">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388679"><a href="/gostd/encoding/gob/encode.go.html#5388625">state</a></span><span class="op" id="5388684">.</span><span class="ident" id="5388685"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5388694">=</span>&nbsp;<span class="builtintype" id="5388696">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388702">keys</span>&nbsp;<span class="op" id="5388707">:=</span>&nbsp;<span class="ident" id="5388710"><a href="/gostd/encoding/gob/encode.go.html#5388558">mv</a></span><span class="op" id="5388712">.</span><span class="ident" id="5388713"><a href="/gostd/reflect/value.go.html#2863601">MapKeys</a></span><span class="op" id="5388720">(</span><span class="op" id="5388721">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388724"><a href="/gostd/encoding/gob/encode.go.html#5388625">state</a></span><span class="op" id="5388729">.</span><span class="ident" id="5388730"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5388740">(</span><span class="builtintype" id="5388741">uint64</span><span class="op" id="5388747">(</span><span class="builtinfunc" id="5388748">len</span><span class="op" id="5388751">(</span><span class="ident" id="5388752"><a href="/gostd/encoding/gob/encode.go.html#5388702">keys</a></span><span class="op" id="5388756">)</span><span class="op" id="5388757">)</span><span class="op" id="5388758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5388761">for</span>&nbsp;<span class="ident" id="5388765">_</span><span class="op" id="5388766">,</span>&nbsp;<span class="ident" id="5388768">key</span>&nbsp;<span class="op" id="5388772">:=</span>&nbsp;<span class="keyword" id="5388775">range</span>&nbsp;<span class="ident" id="5388781"><a href="/gostd/encoding/gob/encode.go.html#5388702">keys</a></span>&nbsp;<span class="op" id="5388786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388790"><a href="/gostd/encoding/gob/encode.go.html#5388198">encodeReflectValue</a></span><span class="op" id="5388808">(</span><span class="ident" id="5388809"><a href="/gostd/encoding/gob/encode.go.html#5388625">state</a></span><span class="op" id="5388814">,</span>&nbsp;<span class="ident" id="5388816"><a href="/gostd/encoding/gob/encode.go.html#5388768">key</a></span><span class="op" id="5388819">,</span>&nbsp;<span class="ident" id="5388821"><a href="/gostd/encoding/gob/encode.go.html#5388576">keyOp</a></span><span class="op" id="5388826">,</span>&nbsp;<span class="ident" id="5388828"><a href="/gostd/encoding/gob/encode.go.html#5388597">keyIndir</a></span><span class="op" id="5388836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388840"><a href="/gostd/encoding/gob/encode.go.html#5388198">encodeReflectValue</a></span><span class="op" id="5388858">(</span><span class="ident" id="5388859"><a href="/gostd/encoding/gob/encode.go.html#5388625">state</a></span><span class="op" id="5388864">,</span>&nbsp;<span class="ident" id="5388866"><a href="/gostd/encoding/gob/encode.go.html#5388558">mv</a></span><span class="op" id="5388868">.</span><span class="ident" id="5388869"><a href="/gostd/reflect/value.go.html#2862367">MapIndex</a></span><span class="op" id="5388877">(</span><span class="ident" id="5388878"><a href="/gostd/encoding/gob/encode.go.html#5388768">key</a></span><span class="op" id="5388881">)</span><span class="op" id="5388882">,</span>&nbsp;<span class="ident" id="5388884"><a href="/gostd/encoding/gob/encode.go.html#5388583">elemOp</a></span><span class="op" id="5388890">,</span>&nbsp;<span class="ident" id="5388892"><a href="/gostd/encoding/gob/encode.go.html#5388607">elemIndir</a></span><span class="op" id="5388901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5388904">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5388907"><a href="/gostd/encoding/gob/encode.go.html#5388520">enc</a></span><span class="op" id="5388910">.</span><span class="ident" id="5388911"><a href="/gostd/encoding/gob/encode.go.html#5380457">freeEncoderState</a></span><span class="op" id="5388927">(</span><span class="ident" id="5388928"><a href="/gostd/encoding/gob/encode.go.html#5388625">state</a></span><span class="op" id="5388933">)</span><br>
<span class="lineno"></span><span class="op" id="5388935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5388938">//&nbsp;encodeInterface&nbsp;encodes&nbsp;the&nbsp;interface&nbsp;value&nbsp;iv.</span><br>
<span class="lineno"></span><span class="comment" id="5388989">//&nbsp;To&nbsp;send&nbsp;an&nbsp;interface,&nbsp;we&nbsp;send&nbsp;a&nbsp;string&nbsp;identifying&nbsp;the&nbsp;concrete&nbsp;type,&nbsp;followed</span><br>
<span class="lineno">375</span><span class="comment" id="5389071">//&nbsp;by&nbsp;the&nbsp;type&nbsp;identifier&nbsp;(which&nbsp;might&nbsp;require&nbsp;defining&nbsp;that&nbsp;type&nbsp;right&nbsp;now),&nbsp;followed</span><br>
<span class="lineno"></span><span class="comment" id="5389158">//&nbsp;by&nbsp;the&nbsp;concrete&nbsp;value.&nbsp;&nbsp;A&nbsp;nil&nbsp;value&nbsp;gets&nbsp;sent&nbsp;as&nbsp;the&nbsp;empty&nbsp;string&nbsp;for&nbsp;the&nbsp;name,</span><br>
<span class="lineno"></span><span class="comment" id="5389241">//&nbsp;followed&nbsp;by&nbsp;no&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5389266">func</span>&nbsp;<span class="op" id="5389271">(</span><span class="ident" id="5389272">enc</span>&nbsp;<span class="op" id="5389276">*</span><span class="ident" id="5389277"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><span class="op" id="5389284">)</span>&nbsp;<span class="ident" id="5389286">encodeInterface</span><span class="op" id="5389301">(</span><span class="ident" id="5389302">b</span>&nbsp;<span class="op" id="5389304">*</span><span class="ident" id="5389305"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5389314">,</span>&nbsp;<span class="ident" id="5389316">iv</span>&nbsp;<span class="ident" id="5389319"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5389326">.</span><span class="ident" id="5389327"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5389332">)</span>&nbsp;<span class="op" id="5389334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5389337">//&nbsp;Gobs&nbsp;can&nbsp;encode&nbsp;nil&nbsp;interface&nbsp;values&nbsp;but&nbsp;not&nbsp;typed&nbsp;interface</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5389402">//&nbsp;values&nbsp;holding&nbsp;nil&nbsp;pointers,&nbsp;since&nbsp;nil&nbsp;pointers&nbsp;point&nbsp;to&nbsp;no&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389473">elem</span>&nbsp;<span class="op" id="5389478">:=</span>&nbsp;<span class="ident" id="5389481"><a href="/gostd/encoding/gob/encode.go.html#5389316">iv</a></span><span class="op" id="5389483">.</span><span class="ident" id="5389484"><a href="/gostd/reflect/value.go.html#2853087">Elem</a></span><span class="op" id="5389488">(</span><span class="op" id="5389489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389492">if</span>&nbsp;<span class="ident" id="5389495"><a href="/gostd/encoding/gob/encode.go.html#5389473">elem</a></span><span class="op" id="5389499">.</span><span class="ident" id="5389500"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="5389504">(</span><span class="op" id="5389505">)</span>&nbsp;<span class="op" id="5389507">==</span>&nbsp;<span class="ident" id="5389510"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5389517">.</span><span class="ident" id="5389518"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="5389522">&amp;&amp;</span>&nbsp;<span class="ident" id="5389525"><a href="/gostd/encoding/gob/encode.go.html#5389473">elem</a></span><span class="op" id="5389529">.</span><span class="ident" id="5389530"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="5389535">(</span><span class="op" id="5389536">)</span>&nbsp;<span class="op" id="5389538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389542"><a href="/gostd/encoding/gob/error.go.html#5407181">errorf</a></span><span class="op" id="5389548">(</span><span class="string" id="5389549">&#34;gob:&nbsp;cannot&nbsp;encode&nbsp;nil&nbsp;pointer&nbsp;of&nbsp;type&nbsp;%s&nbsp;inside&nbsp;interface&#34;</span><span class="op" id="5389609">,</span>&nbsp;<span class="ident" id="5389611"><a href="/gostd/encoding/gob/encode.go.html#5389316">iv</a></span><span class="op" id="5389613">.</span><span class="ident" id="5389614"><a href="/gostd/reflect/value.go.html#2853087">Elem</a></span><span class="op" id="5389618">(</span><span class="op" id="5389619">)</span><span class="op" id="5389620">.</span><span class="ident" id="5389621"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="5389625">(</span><span class="op" id="5389626">)</span><span class="op" id="5389627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5389630">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389633">state</span>&nbsp;<span class="op" id="5389639">:=</span>&nbsp;<span class="ident" id="5389642"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5389645">.</span><span class="ident" id="5389646"><a href="/gostd/encoding/gob/encode.go.html#5380172">newEncoderState</a></span><span class="op" id="5389661">(</span><span class="ident" id="5389662"><a href="/gostd/encoding/gob/encode.go.html#5389302">b</a></span><span class="op" id="5389663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389666"><a href="/gostd/encoding/gob/encode.go.html#5389633">state</a></span><span class="op" id="5389671">.</span><span class="ident" id="5389672"><a href="/gostd/encoding/gob/encode.go.html#5379288">fieldnum</a></span>&nbsp;<span class="op" id="5389681">=</span>&nbsp;<span class="op" id="5389683">-</span><span class="num" id="5389684">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389687"><a href="/gostd/encoding/gob/encode.go.html#5389633">state</a></span><span class="op" id="5389692">.</span><span class="ident" id="5389693"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5389702">=</span>&nbsp;<span class="builtintype" id="5389704">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389710">if</span>&nbsp;<span class="ident" id="5389713"><a href="/gostd/encoding/gob/encode.go.html#5389316">iv</a></span><span class="op" id="5389715">.</span><span class="ident" id="5389716"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="5389721">(</span><span class="op" id="5389722">)</span>&nbsp;<span class="op" id="5389724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389728"><a href="/gostd/encoding/gob/encode.go.html#5389633">state</a></span><span class="op" id="5389733">.</span><span class="ident" id="5389734"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5389744">(</span><span class="num" id="5389745">0</span><span class="op" id="5389746">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389750">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5389758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389762">ut</span>&nbsp;<span class="op" id="5389765">:=</span>&nbsp;<span class="ident" id="5389768"><a href="/gostd/encoding/gob/type.go.html#5413083">userType</a></span><span class="op" id="5389776">(</span><span class="ident" id="5389777"><a href="/gostd/encoding/gob/encode.go.html#5389316">iv</a></span><span class="op" id="5389779">.</span><span class="ident" id="5389780"><a href="/gostd/reflect/value.go.html#2853087">Elem</a></span><span class="op" id="5389784">(</span><span class="op" id="5389785">)</span><span class="op" id="5389786">.</span><span class="ident" id="5389787"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="5389791">(</span><span class="op" id="5389792">)</span><span class="op" id="5389793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389796"><a href="/gostd/encoding/gob/type.go.html#5431666">registerLock</a></span><span class="op" id="5389808">.</span><span class="ident" id="5389809"><a href="/gostd/sync/rwmutex.go.html#1456490">RLock</a></span><span class="op" id="5389814">(</span><span class="op" id="5389815">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389818">name</span><span class="op" id="5389822">,</span>&nbsp;<span class="ident" id="5389824">ok</span>&nbsp;<span class="op" id="5389827">:=</span>&nbsp;<span class="ident" id="5389830"><a href="/gostd/encoding/gob/type.go.html#5431751">concreteTypeToName</a></span><span class="op" id="5389848">[</span><span class="ident" id="5389849"><a href="/gostd/encoding/gob/encode.go.html#5389762">ut</a></span><span class="op" id="5389851">.</span><span class="ident" id="5389852"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><span class="op" id="5389856">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389859"><a href="/gostd/encoding/gob/type.go.html#5431666">registerLock</a></span><span class="op" id="5389871">.</span><span class="ident" id="5389872"><a href="/gostd/sync/rwmutex.go.html#1456952">RUnlock</a></span><span class="op" id="5389879">(</span><span class="op" id="5389880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5389883">if</span>&nbsp;<span class="op" id="5389886">!</span><span class="ident" id="5389887"><a href="/gostd/encoding/gob/encode.go.html#5389824">ok</a></span>&nbsp;<span class="op" id="5389890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389894"><a href="/gostd/encoding/gob/error.go.html#5407181">errorf</a></span><span class="op" id="5389900">(</span><span class="string" id="5389901">&#34;type&nbsp;not&nbsp;registered&nbsp;for&nbsp;interface:&nbsp;%s&#34;</span><span class="op" id="5389940">,</span>&nbsp;<span class="ident" id="5389942"><a href="/gostd/encoding/gob/encode.go.html#5389762">ut</a></span><span class="op" id="5389944">.</span><span class="ident" id="5389945"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><span class="op" id="5389949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5389952">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5389955">//&nbsp;Send&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5389974"><a href="/gostd/encoding/gob/encode.go.html#5389633">state</a></span><span class="op" id="5389979">.</span><span class="ident" id="5389980"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5389990">(</span><span class="builtintype" id="5389991">uint64</span><span class="op" id="5389997">(</span><span class="builtinfunc" id="5389998">len</span><span class="op" id="5390001">(</span><span class="ident" id="5390002"><a href="/gostd/encoding/gob/encode.go.html#5389818">name</a></span><span class="op" id="5390006">)</span><span class="op" id="5390007">)</span><span class="op" id="5390008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390011"><a href="/gostd/encoding/gob/encode.go.html#5389633">state</a></span><span class="op" id="5390016">.</span><span class="ident" id="5390017"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5390018">.</span><span class="ident" id="5390019"><a href="/gostd/encoding/gob/encode.go.html#5379929">WriteString</a></span><span class="op" id="5390030">(</span><span class="ident" id="5390031"><a href="/gostd/encoding/gob/encode.go.html#5389818">name</a></span><span class="op" id="5390035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5390038">//&nbsp;Define&nbsp;the&nbsp;type&nbsp;id&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390075"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390078">.</span><span class="ident" id="5390079"><a href="/gostd/encoding/gob/encoder.go.html#5404218">sendTypeDescriptor</a></span><span class="op" id="5390097">(</span><span class="ident" id="5390098"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390101">.</span><span class="ident" id="5390102"><a href="/gostd/encoding/gob/encoder.go.html#5400208">writer</a></span><span class="op" id="5390108">(</span><span class="op" id="5390109">)</span><span class="op" id="5390110">,</span>&nbsp;<span class="ident" id="5390112"><a href="/gostd/encoding/gob/encode.go.html#5389633">state</a></span><span class="op" id="5390117">,</span>&nbsp;<span class="ident" id="5390119"><a href="/gostd/encoding/gob/encode.go.html#5389762">ut</a></span><span class="op" id="5390121">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5390124">//&nbsp;Send&nbsp;the&nbsp;type&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390146"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390149">.</span><span class="ident" id="5390150"><a href="/gostd/encoding/gob/encoder.go.html#5405022">sendTypeId</a></span><span class="op" id="5390160">(</span><span class="ident" id="5390161"><a href="/gostd/encoding/gob/encode.go.html#5389633">state</a></span><span class="op" id="5390166">,</span>&nbsp;<span class="ident" id="5390168"><a href="/gostd/encoding/gob/encode.go.html#5389762">ut</a></span><span class="op" id="5390170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5390173">//&nbsp;Encode&nbsp;the&nbsp;value&nbsp;into&nbsp;a&nbsp;new&nbsp;buffer.&nbsp;&nbsp;Any&nbsp;nested&nbsp;type&nbsp;definitions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5390242">//&nbsp;should&nbsp;be&nbsp;written&nbsp;to&nbsp;b,&nbsp;before&nbsp;the&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390296"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390299">.</span><span class="ident" id="5390300"><a href="/gostd/encoding/gob/encoder.go.html#5400324">pushWriter</a></span><span class="op" id="5390310">(</span><span class="ident" id="5390311"><a href="/gostd/encoding/gob/encode.go.html#5389302">b</a></span><span class="op" id="5390312">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390315">data</span>&nbsp;<span class="op" id="5390320">:=</span>&nbsp;<span class="builtinfunc" id="5390323">new</span><span class="op" id="5390326">(</span><span class="ident" id="5390327"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5390336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390339"><a href="/gostd/encoding/gob/encode.go.html#5390315">data</a></span><span class="op" id="5390343">.</span><span class="ident" id="5390344"><a href="/gostd/encoding/gob/encode.go.html#5379824">Write</a></span><span class="op" id="5390349">(</span><span class="ident" id="5390350"><a href="/gostd/encoding/gob/encoder.go.html#5399815">spaceForLength</a></span><span class="op" id="5390364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390367"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390370">.</span><span class="ident" id="5390371"><a href="/gostd/encoding/gob/encode.go.html#5398347">encode</a></span><span class="op" id="5390377">(</span><span class="ident" id="5390378"><a href="/gostd/encoding/gob/encode.go.html#5390315">data</a></span><span class="op" id="5390382">,</span>&nbsp;<span class="ident" id="5390384"><a href="/gostd/encoding/gob/encode.go.html#5389473">elem</a></span><span class="op" id="5390388">,</span>&nbsp;<span class="ident" id="5390390"><a href="/gostd/encoding/gob/encode.go.html#5389762">ut</a></span><span class="op" id="5390392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390395">if</span>&nbsp;<span class="ident" id="5390398"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390401">.</span><span class="ident" id="5390402"><a href="/gostd/encoding/gob/encoder.go.html#5399537">err</a></span>&nbsp;<span class="op" id="5390406">!=</span>&nbsp;<span class="builtintype" id="5390409">nil</span>&nbsp;<span class="op" id="5390413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390417"><a href="/gostd/encoding/gob/error.go.html#5407351">error_</a></span><span class="op" id="5390423">(</span><span class="ident" id="5390424"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390427">.</span><span class="ident" id="5390428"><a href="/gostd/encoding/gob/encoder.go.html#5399537">err</a></span><span class="op" id="5390431">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5390434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390437"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390440">.</span><span class="ident" id="5390441"><a href="/gostd/encoding/gob/encoder.go.html#5400439">popWriter</a></span><span class="op" id="5390450">(</span><span class="op" id="5390451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390454"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390457">.</span><span class="ident" id="5390458"><a href="/gostd/encoding/gob/encoder.go.html#5400697">writeMessage</a></span><span class="op" id="5390470">(</span><span class="ident" id="5390471"><a href="/gostd/encoding/gob/encode.go.html#5389302">b</a></span><span class="op" id="5390472">,</span>&nbsp;<span class="ident" id="5390474"><a href="/gostd/encoding/gob/encode.go.html#5390315">data</a></span><span class="op" id="5390478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390481">if</span>&nbsp;<span class="ident" id="5390484"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390487">.</span><span class="ident" id="5390488"><a href="/gostd/encoding/gob/encoder.go.html#5399537">err</a></span>&nbsp;<span class="op" id="5390492">!=</span>&nbsp;<span class="builtintype" id="5390495">nil</span>&nbsp;<span class="op" id="5390499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390503"><a href="/gostd/encoding/gob/error.go.html#5407351">error_</a></span><span class="op" id="5390509">(</span><span class="ident" id="5390510"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390513">.</span><span class="ident" id="5390514"><a href="/gostd/encoding/gob/encoder.go.html#5399537">err</a></span><span class="op" id="5390517">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5390520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5390523"><a href="/gostd/encoding/gob/encode.go.html#5389272">enc</a></span><span class="op" id="5390526">.</span><span class="ident" id="5390527"><a href="/gostd/encoding/gob/encode.go.html#5380457">freeEncoderState</a></span><span class="op" id="5390543">(</span><span class="ident" id="5390544"><a href="/gostd/encoding/gob/encode.go.html#5389633">state</a></span><span class="op" id="5390549">)</span><br>
<span class="lineno"></span><span class="op" id="5390551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5390554">//&nbsp;isZero&nbsp;reports&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;the&nbsp;zero&nbsp;of&nbsp;its&nbsp;type.</span><br>
<span class="lineno">425</span><span class="keyword" id="5390615">func</span>&nbsp;<span class="ident" id="5390620">isZero</span><span class="op" id="5390626">(</span><span class="ident" id="5390627">val</span>&nbsp;<span class="ident" id="5390631"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5390638">.</span><span class="ident" id="5390639"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5390644">)</span>&nbsp;<span class="builtintype" id="5390646">bool</span>&nbsp;<span class="op" id="5390651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390654">switch</span>&nbsp;<span class="ident" id="5390661"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5390664">.</span><span class="ident" id="5390665"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="5390669">(</span><span class="op" id="5390670">)</span>&nbsp;<span class="op" id="5390672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390675">case</span>&nbsp;<span class="ident" id="5390680"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5390687">.</span><span class="ident" id="5390688"><a href="/gostd/reflect/type.go.html#2788022">Array</a></span><span class="op" id="5390693">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390697">for</span>&nbsp;<span class="ident" id="5390701">i</span>&nbsp;<span class="op" id="5390703">:=</span>&nbsp;<span class="num" id="5390706">0</span><span class="op" id="5390707">;</span>&nbsp;<span class="ident" id="5390709"><a href="/gostd/encoding/gob/encode.go.html#5390701">i</a></span>&nbsp;<span class="op" id="5390711">&lt;</span>&nbsp;<span class="ident" id="5390713"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5390716">.</span><span class="ident" id="5390717"><a href="/gostd/reflect/value.go.html#2861631">Len</a></span><span class="op" id="5390720">(</span><span class="op" id="5390721">)</span><span class="op" id="5390722">;</span>&nbsp;<span class="ident" id="5390724"><a href="/gostd/encoding/gob/encode.go.html#5390701">i</a></span><span class="op" id="5390725">++</span>&nbsp;<span class="op" id="5390728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390733">if</span>&nbsp;<span class="op" id="5390736">!</span><span class="ident" id="5390737"><a href="/gostd/encoding/gob/encode.go.html#5390620">isZero</a></span><span class="op" id="5390743">(</span><span class="ident" id="5390744"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5390747">.</span><span class="ident" id="5390748"><a href="/gostd/reflect/value.go.html#2856377">Index</a></span><span class="op" id="5390753">(</span><span class="ident" id="5390754"><a href="/gostd/encoding/gob/encode.go.html#5390701">i</a></span><span class="op" id="5390755">)</span><span class="op" id="5390756">)</span>&nbsp;<span class="op" id="5390758">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390764">return</span>&nbsp;<span class="builtintype" id="5390771">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5390780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5390784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390788">return</span>&nbsp;<span class="builtintype" id="5390795">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390801">case</span>&nbsp;<span class="ident" id="5390806"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5390813">.</span><span class="ident" id="5390814"><a href="/gostd/reflect/type.go.html#2788052">Map</a></span><span class="op" id="5390817">,</span>&nbsp;<span class="ident" id="5390819"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5390826">.</span><span class="ident" id="5390827"><a href="/gostd/reflect/type.go.html#2788062">Slice</a></span><span class="op" id="5390832">,</span>&nbsp;<span class="ident" id="5390834"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5390841">.</span><span class="ident" id="5390842"><a href="/gostd/reflect/type.go.html#2788069">String</a></span><span class="op" id="5390848">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390852">return</span>&nbsp;<span class="ident" id="5390859"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5390862">.</span><span class="ident" id="5390863"><a href="/gostd/reflect/value.go.html#2861631">Len</a></span><span class="op" id="5390866">(</span><span class="op" id="5390867">)</span>&nbsp;<span class="op" id="5390869">==</span>&nbsp;<span class="num" id="5390872">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390875">case</span>&nbsp;<span class="ident" id="5390880"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5390887">.</span><span class="ident" id="5390888"><a href="/gostd/reflect/type.go.html#2787897">Bool</a></span><span class="op" id="5390892">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390896">return</span>&nbsp;<span class="op" id="5390903">!</span><span class="ident" id="5390904"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5390907">.</span><span class="ident" id="5390908"><a href="/gostd/reflect/value.go.html#2839754">Bool</a></span><span class="op" id="5390912">(</span><span class="op" id="5390913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390916">case</span>&nbsp;<span class="ident" id="5390921"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5390928">.</span><span class="ident" id="5390929"><a href="/gostd/reflect/type.go.html#2787999">Complex64</a></span><span class="op" id="5390938">,</span>&nbsp;<span class="ident" id="5390940"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5390947">.</span><span class="ident" id="5390948"><a href="/gostd/reflect/type.go.html#2788010">Complex128</a></span><span class="op" id="5390958">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390962">return</span>&nbsp;<span class="ident" id="5390969"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5390972">.</span><span class="ident" id="5390973"><a href="/gostd/reflect/value.go.html#2852669">Complex</a></span><span class="op" id="5390980">(</span><span class="op" id="5390981">)</span>&nbsp;<span class="op" id="5390983">==</span>&nbsp;<span class="num" id="5390986">0</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5390989">case</span>&nbsp;<span class="ident" id="5390994"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391001">.</span><span class="ident" id="5391002"><a href="/gostd/reflect/type.go.html#2788029">Chan</a></span><span class="op" id="5391006">,</span>&nbsp;<span class="ident" id="5391008"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391015">.</span><span class="ident" id="5391016"><a href="/gostd/reflect/type.go.html#2788035">Func</a></span><span class="op" id="5391020">,</span>&nbsp;<span class="ident" id="5391022"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391029">.</span><span class="ident" id="5391030"><a href="/gostd/reflect/type.go.html#2788041">Interface</a></span><span class="op" id="5391039">,</span>&nbsp;<span class="ident" id="5391041"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391048">.</span><span class="ident" id="5391049"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span><span class="op" id="5391052">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391056">return</span>&nbsp;<span class="ident" id="5391063"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5391066">.</span><span class="ident" id="5391067"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="5391072">(</span><span class="op" id="5391073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391076">case</span>&nbsp;<span class="ident" id="5391081"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391088">.</span><span class="ident" id="5391089"><a href="/gostd/reflect/type.go.html#2787903">Int</a></span><span class="op" id="5391092">,</span>&nbsp;<span class="ident" id="5391094"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391101">.</span><span class="ident" id="5391102"><a href="/gostd/reflect/type.go.html#2787908">Int8</a></span><span class="op" id="5391106">,</span>&nbsp;<span class="ident" id="5391108"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391115">.</span><span class="ident" id="5391116"><a href="/gostd/reflect/type.go.html#2787914">Int16</a></span><span class="op" id="5391121">,</span>&nbsp;<span class="ident" id="5391123"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391130">.</span><span class="ident" id="5391131"><a href="/gostd/reflect/type.go.html#2787921">Int32</a></span><span class="op" id="5391136">,</span>&nbsp;<span class="ident" id="5391138"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391145">.</span><span class="ident" id="5391146"><a href="/gostd/reflect/type.go.html#2787928">Int64</a></span><span class="op" id="5391151">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391155">return</span>&nbsp;<span class="ident" id="5391162"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5391165">.</span><span class="ident" id="5391166"><a href="/gostd/reflect/value.go.html#2857929">Int</a></span><span class="op" id="5391169">(</span><span class="op" id="5391170">)</span>&nbsp;<span class="op" id="5391172">==</span>&nbsp;<span class="num" id="5391175">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391178">case</span>&nbsp;<span class="ident" id="5391183"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391190">.</span><span class="ident" id="5391191"><a href="/gostd/reflect/type.go.html#2787981">Float32</a></span><span class="op" id="5391198">,</span>&nbsp;<span class="ident" id="5391200"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391207">.</span><span class="ident" id="5391208"><a href="/gostd/reflect/type.go.html#2787990">Float64</a></span><span class="op" id="5391215">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391219">return</span>&nbsp;<span class="ident" id="5391226"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5391229">.</span><span class="ident" id="5391230"><a href="/gostd/reflect/value.go.html#2856007">Float</a></span><span class="op" id="5391235">(</span><span class="op" id="5391236">)</span>&nbsp;<span class="op" id="5391238">==</span>&nbsp;<span class="num" id="5391241">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391244">case</span>&nbsp;<span class="ident" id="5391249"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391256">.</span><span class="ident" id="5391257"><a href="/gostd/reflect/type.go.html#2787935">Uint</a></span><span class="op" id="5391261">,</span>&nbsp;<span class="ident" id="5391263"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391270">.</span><span class="ident" id="5391271"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span><span class="op" id="5391276">,</span>&nbsp;<span class="ident" id="5391278"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391285">.</span><span class="ident" id="5391286"><a href="/gostd/reflect/type.go.html#2787948">Uint16</a></span><span class="op" id="5391292">,</span>&nbsp;<span class="ident" id="5391294"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391301">.</span><span class="ident" id="5391302"><a href="/gostd/reflect/type.go.html#2787956">Uint32</a></span><span class="op" id="5391308">,</span>&nbsp;<span class="ident" id="5391310"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391317">.</span><span class="ident" id="5391318"><a href="/gostd/reflect/type.go.html#2787964">Uint64</a></span><span class="op" id="5391324">,</span>&nbsp;<span class="ident" id="5391326"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391333">.</span><span class="ident" id="5391334"><a href="/gostd/reflect/type.go.html#2787972">Uintptr</a></span><span class="op" id="5391341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391345">return</span>&nbsp;<span class="ident" id="5391352"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5391355">.</span><span class="ident" id="5391356"><a href="/gostd/reflect/value.go.html#2881772">Uint</a></span><span class="op" id="5391360">(</span><span class="op" id="5391361">)</span>&nbsp;<span class="op" id="5391363">==</span>&nbsp;<span class="num" id="5391366">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391369">case</span>&nbsp;<span class="ident" id="5391374"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391381">.</span><span class="ident" id="5391382"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span><span class="op" id="5391388">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391392">for</span>&nbsp;<span class="ident" id="5391396">i</span>&nbsp;<span class="op" id="5391398">:=</span>&nbsp;<span class="num" id="5391401">0</span><span class="op" id="5391402">;</span>&nbsp;<span class="ident" id="5391404"><a href="/gostd/encoding/gob/encode.go.html#5391396">i</a></span>&nbsp;<span class="op" id="5391406">&lt;</span>&nbsp;<span class="ident" id="5391408"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5391411">.</span><span class="ident" id="5391412"><a href="/gostd/reflect/value.go.html#2866109">NumField</a></span><span class="op" id="5391420">(</span><span class="op" id="5391421">)</span><span class="op" id="5391422">;</span>&nbsp;<span class="ident" id="5391424"><a href="/gostd/encoding/gob/encode.go.html#5391396">i</a></span><span class="op" id="5391425">++</span>&nbsp;<span class="op" id="5391428">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391433">if</span>&nbsp;<span class="op" id="5391436">!</span><span class="ident" id="5391437"><a href="/gostd/encoding/gob/encode.go.html#5390620">isZero</a></span><span class="op" id="5391443">(</span><span class="ident" id="5391444"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5391447">.</span><span class="ident" id="5391448"><a href="/gostd/reflect/value.go.html#2853921">Field</a></span><span class="op" id="5391453">(</span><span class="ident" id="5391454"><a href="/gostd/encoding/gob/encode.go.html#5391396">i</a></span><span class="op" id="5391455">)</span><span class="op" id="5391456">)</span>&nbsp;<span class="op" id="5391458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391464">return</span>&nbsp;<span class="builtintype" id="5391471">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5391480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5391484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391488">return</span>&nbsp;<span class="builtintype" id="5391495">true</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5391501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5391504">panic</span><span class="op" id="5391509">(</span><span class="string" id="5391510">&#34;unknown&nbsp;type&nbsp;in&nbsp;isZero&nbsp;&#34;</span>&nbsp;<span class="op" id="5391536">+</span>&nbsp;<span class="ident" id="5391538"><a href="/gostd/encoding/gob/encode.go.html#5390627">val</a></span><span class="op" id="5391541">.</span><span class="ident" id="5391542"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="5391546">(</span><span class="op" id="5391547">)</span><span class="op" id="5391548">.</span><span class="ident" id="5391549"><a href="/gostd/reflect/type.go.html#2783552">String</a></span><span class="op" id="5391555">(</span><span class="op" id="5391556">)</span><span class="op" id="5391557">)</span><br>
<span class="lineno"></span><span class="op" id="5391559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5391562">//&nbsp;encGobEncoder&nbsp;encodes&nbsp;a&nbsp;value&nbsp;that&nbsp;implements&nbsp;the&nbsp;GobEncoder&nbsp;interface.</span><br>
<span class="lineno">460</span><span class="comment" id="5391637">//&nbsp;The&nbsp;data&nbsp;is&nbsp;sent&nbsp;as&nbsp;a&nbsp;byte&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="5391674">func</span>&nbsp;<span class="op" id="5391679">(</span><span class="ident" id="5391680">enc</span>&nbsp;<span class="op" id="5391684">*</span><span class="ident" id="5391685"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><span class="op" id="5391692">)</span>&nbsp;<span class="ident" id="5391694">encodeGobEncoder</span><span class="op" id="5391710">(</span><span class="ident" id="5391711">b</span>&nbsp;<span class="op" id="5391713">*</span><span class="ident" id="5391714"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5391723">,</span>&nbsp;<span class="ident" id="5391725">ut</span>&nbsp;<span class="op" id="5391728">*</span><span class="ident" id="5391729"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5391741">,</span>&nbsp;<span class="ident" id="5391743">v</span>&nbsp;<span class="ident" id="5391745"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5391752">.</span><span class="ident" id="5391753"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5391758">)</span>&nbsp;<span class="op" id="5391760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5391763">//&nbsp;TODO:&nbsp;should&nbsp;we&nbsp;catch&nbsp;panics&nbsp;from&nbsp;the&nbsp;called&nbsp;method?</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391821">var</span>&nbsp;<span class="ident" id="5391825">data</span>&nbsp;<span class="op" id="5391830">[</span><span class="op" id="5391831">]</span><span class="builtintype" id="5391832">byte</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391838">var</span>&nbsp;<span class="ident" id="5391842">err</span>&nbsp;<span class="builtintype" id="5391846">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5391853">//&nbsp;We&nbsp;know&nbsp;it&#39;s&nbsp;one&nbsp;of&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391884">switch</span>&nbsp;<span class="ident" id="5391891"><a href="/gostd/encoding/gob/encode.go.html#5391725">ut</a></span><span class="op" id="5391893">.</span><span class="ident" id="5391894"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span>&nbsp;<span class="op" id="5391906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391909">case</span>&nbsp;<span class="ident" id="5391914"><a href="/gostd/encoding/gob/type.go.html#5408727">xGob</a></span><span class="op" id="5391918">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5391922"><a href="/gostd/encoding/gob/encode.go.html#5391825">data</a></span><span class="op" id="5391926">,</span>&nbsp;<span class="ident" id="5391928"><a href="/gostd/encoding/gob/encode.go.html#5391842">err</a></span>&nbsp;<span class="op" id="5391932">=</span>&nbsp;<span class="ident" id="5391934"><a href="/gostd/encoding/gob/encode.go.html#5391743">v</a></span><span class="op" id="5391935">.</span><span class="ident" id="5391936"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="5391945">(</span><span class="op" id="5391946">)</span><span class="op" id="5391947">.</span><span class="op" id="5391948">(</span><span class="ident" id="5391949"><a href="/gostd/encoding/gob/type.go.html#5431074">GobEncoder</a></span><span class="op" id="5391959">)</span><span class="op" id="5391960">.</span><span class="ident" id="5391961"><a href="/gostd/encoding/gob/type.go.html#5431252">GobEncode</a></span><span class="op" id="5391970">(</span><span class="op" id="5391971">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5391974">case</span>&nbsp;<span class="ident" id="5391979"><a href="/gostd/encoding/gob/type.go.html#5408775">xBinary</a></span><span class="op" id="5391986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5391990"><a href="/gostd/encoding/gob/encode.go.html#5391825">data</a></span><span class="op" id="5391994">,</span>&nbsp;<span class="ident" id="5391996"><a href="/gostd/encoding/gob/encode.go.html#5391842">err</a></span>&nbsp;<span class="op" id="5392000">=</span>&nbsp;<span class="ident" id="5392002"><a href="/gostd/encoding/gob/encode.go.html#5391743">v</a></span><span class="op" id="5392003">.</span><span class="ident" id="5392004"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="5392013">(</span><span class="op" id="5392014">)</span><span class="op" id="5392015">.</span><span class="op" id="5392016">(</span><span class="ident" id="5392017"><a href="/gostd/encoding/gob/encode.go.html#5378757">encoding</a></span><span class="op" id="5392025">.</span><span class="ident" id="5392026"><a href="/gostd/encoding/encoding.go.html#4050692">BinaryMarshaler</a></span><span class="op" id="5392041">)</span><span class="op" id="5392042">.</span><span class="ident" id="5392043"><a href="/gostd/encoding/encoding.go.html#4050721">MarshalBinary</a></span><span class="op" id="5392056">(</span><span class="op" id="5392057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5392060">case</span>&nbsp;<span class="ident" id="5392065"><a href="/gostd/encoding/gob/type.go.html#5408853">xText</a></span><span class="op" id="5392070">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392074"><a href="/gostd/encoding/gob/encode.go.html#5391825">data</a></span><span class="op" id="5392078">,</span>&nbsp;<span class="ident" id="5392080"><a href="/gostd/encoding/gob/encode.go.html#5391842">err</a></span>&nbsp;<span class="op" id="5392084">=</span>&nbsp;<span class="ident" id="5392086"><a href="/gostd/encoding/gob/encode.go.html#5391743">v</a></span><span class="op" id="5392087">.</span><span class="ident" id="5392088"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="5392097">(</span><span class="op" id="5392098">)</span><span class="op" id="5392099">.</span><span class="op" id="5392100">(</span><span class="ident" id="5392101"><a href="/gostd/encoding/gob/encode.go.html#5378757">encoding</a></span><span class="op" id="5392109">.</span><span class="ident" id="5392110"><a href="/gostd/encoding/encoding.go.html#4051330">TextMarshaler</a></span><span class="op" id="5392123">)</span><span class="op" id="5392124">.</span><span class="ident" id="5392125"><a href="/gostd/encoding/encoding.go.html#4051357">MarshalText</a></span><span class="op" id="5392136">(</span><span class="op" id="5392137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5392140">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5392143">if</span>&nbsp;<span class="ident" id="5392146"><a href="/gostd/encoding/gob/encode.go.html#5391842">err</a></span>&nbsp;<span class="op" id="5392150">!=</span>&nbsp;<span class="builtintype" id="5392153">nil</span>&nbsp;<span class="op" id="5392157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392161"><a href="/gostd/encoding/gob/error.go.html#5407351">error_</a></span><span class="op" id="5392167">(</span><span class="ident" id="5392168"><a href="/gostd/encoding/gob/encode.go.html#5391842">err</a></span><span class="op" id="5392171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5392174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392177">state</span>&nbsp;<span class="op" id="5392183">:=</span>&nbsp;<span class="ident" id="5392186"><a href="/gostd/encoding/gob/encode.go.html#5391680">enc</a></span><span class="op" id="5392189">.</span><span class="ident" id="5392190"><a href="/gostd/encoding/gob/encode.go.html#5380172">newEncoderState</a></span><span class="op" id="5392205">(</span><span class="ident" id="5392206"><a href="/gostd/encoding/gob/encode.go.html#5391711">b</a></span><span class="op" id="5392207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392210"><a href="/gostd/encoding/gob/encode.go.html#5392177">state</a></span><span class="op" id="5392215">.</span><span class="ident" id="5392216"><a href="/gostd/encoding/gob/encode.go.html#5379288">fieldnum</a></span>&nbsp;<span class="op" id="5392225">=</span>&nbsp;<span class="op" id="5392227">-</span><span class="num" id="5392228">1</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392231"><a href="/gostd/encoding/gob/encode.go.html#5392177">state</a></span><span class="op" id="5392236">.</span><span class="ident" id="5392237"><a href="/gostd/encoding/gob/encode.go.html#5380858">encodeUint</a></span><span class="op" id="5392247">(</span><span class="builtintype" id="5392248">uint64</span><span class="op" id="5392254">(</span><span class="builtinfunc" id="5392255">len</span><span class="op" id="5392258">(</span><span class="ident" id="5392259"><a href="/gostd/encoding/gob/encode.go.html#5391825">data</a></span><span class="op" id="5392263">)</span><span class="op" id="5392264">)</span><span class="op" id="5392265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392268"><a href="/gostd/encoding/gob/encode.go.html#5392177">state</a></span><span class="op" id="5392273">.</span><span class="ident" id="5392274"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5392275">.</span><span class="ident" id="5392276"><a href="/gostd/encoding/gob/encode.go.html#5379824">Write</a></span><span class="op" id="5392281">(</span><span class="ident" id="5392282"><a href="/gostd/encoding/gob/encode.go.html#5391825">data</a></span><span class="op" id="5392286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392289"><a href="/gostd/encoding/gob/encode.go.html#5391680">enc</a></span><span class="op" id="5392292">.</span><span class="ident" id="5392293"><a href="/gostd/encoding/gob/encode.go.html#5380457">freeEncoderState</a></span><span class="op" id="5392309">(</span><span class="ident" id="5392310"><a href="/gostd/encoding/gob/encode.go.html#5392177">state</a></span><span class="op" id="5392315">)</span><br>
<span class="lineno"></span><span class="op" id="5392317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="keyword" id="5392320">var</span>&nbsp;<span class="ident" id="5392324">encOpTable</span>&nbsp;<span class="op" id="5392335">=</span>&nbsp;<span class="op" id="5392337">[</span><span class="op" id="5392338">...</span><span class="op" id="5392341">]</span><span class="ident" id="5392342"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><span class="op" id="5392347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392350"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392357">.</span><span class="ident" id="5392358"><a href="/gostd/reflect/type.go.html#2787897">Bool</a></span><span class="op" id="5392362">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392370"><a href="/gostd/encoding/gob/encode.go.html#5382909">encBool</a></span><span class="op" id="5392377">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392380"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392387">.</span><span class="ident" id="5392388"><a href="/gostd/reflect/type.go.html#2787903">Int</a></span><span class="op" id="5392391">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392400"><a href="/gostd/encoding/gob/encode.go.html#5383193">encInt</a></span><span class="op" id="5392406">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392409"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392416">.</span><span class="ident" id="5392417"><a href="/gostd/reflect/type.go.html#2787908">Int8</a></span><span class="op" id="5392421">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392429"><a href="/gostd/encoding/gob/encode.go.html#5383193">encInt</a></span><span class="op" id="5392435">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392438"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392445">.</span><span class="ident" id="5392446"><a href="/gostd/reflect/type.go.html#2787914">Int16</a></span><span class="op" id="5392451">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392458"><a href="/gostd/encoding/gob/encode.go.html#5383193">encInt</a></span><span class="op" id="5392464">,</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392467"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392474">.</span><span class="ident" id="5392475"><a href="/gostd/reflect/type.go.html#2787921">Int32</a></span><span class="op" id="5392480">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392487"><a href="/gostd/encoding/gob/encode.go.html#5383193">encInt</a></span><span class="op" id="5392493">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392496"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392503">.</span><span class="ident" id="5392504"><a href="/gostd/reflect/type.go.html#2787928">Int64</a></span><span class="op" id="5392509">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392516"><a href="/gostd/encoding/gob/encode.go.html#5383193">encInt</a></span><span class="op" id="5392522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392525"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392532">.</span><span class="ident" id="5392533"><a href="/gostd/reflect/type.go.html#2787935">Uint</a></span><span class="op" id="5392537">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392545"><a href="/gostd/encoding/gob/encode.go.html#5383459">encUint</a></span><span class="op" id="5392552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392555"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392562">.</span><span class="ident" id="5392563"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span><span class="op" id="5392568">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392575"><a href="/gostd/encoding/gob/encode.go.html#5383459">encUint</a></span><span class="op" id="5392582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392585"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392592">.</span><span class="ident" id="5392593"><a href="/gostd/reflect/type.go.html#2787948">Uint16</a></span><span class="op" id="5392599">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392605"><a href="/gostd/encoding/gob/encode.go.html#5383459">encUint</a></span><span class="op" id="5392612">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392615"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392622">.</span><span class="ident" id="5392623"><a href="/gostd/reflect/type.go.html#2787956">Uint32</a></span><span class="op" id="5392629">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392635"><a href="/gostd/encoding/gob/encode.go.html#5383459">encUint</a></span><span class="op" id="5392642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392645"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392652">.</span><span class="ident" id="5392653"><a href="/gostd/reflect/type.go.html#2787964">Uint64</a></span><span class="op" id="5392659">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392665"><a href="/gostd/encoding/gob/encode.go.html#5383459">encUint</a></span><span class="op" id="5392672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392675"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392682">.</span><span class="ident" id="5392683"><a href="/gostd/reflect/type.go.html#2787972">Uintptr</a></span><span class="op" id="5392690">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392695"><a href="/gostd/encoding/gob/encode.go.html#5383459">encUint</a></span><span class="op" id="5392702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392705"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392712">.</span><span class="ident" id="5392713"><a href="/gostd/reflect/type.go.html#2787981">Float32</a></span><span class="op" id="5392720">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392725"><a href="/gostd/encoding/gob/encode.go.html#5384230">encFloat</a></span><span class="op" id="5392733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392736"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392743">.</span><span class="ident" id="5392744"><a href="/gostd/reflect/type.go.html#2787990">Float64</a></span><span class="op" id="5392751">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392756"><a href="/gostd/encoding/gob/encode.go.html#5384230">encFloat</a></span><span class="op" id="5392764">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392767"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392774">.</span><span class="ident" id="5392775"><a href="/gostd/reflect/type.go.html#2787999">Complex64</a></span><span class="op" id="5392784">:</span>&nbsp;&nbsp;<span class="ident" id="5392787"><a href="/gostd/encoding/gob/encode.go.html#5384575">encComplex</a></span><span class="op" id="5392797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392800"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392807">.</span><span class="ident" id="5392808"><a href="/gostd/reflect/type.go.html#2788010">Complex128</a></span><span class="op" id="5392818">:</span>&nbsp;<span class="ident" id="5392820"><a href="/gostd/encoding/gob/encode.go.html#5384575">encComplex</a></span><span class="op" id="5392830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392833"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5392840">.</span><span class="ident" id="5392841"><a href="/gostd/reflect/type.go.html#2788069">String</a></span><span class="op" id="5392847">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5392853"><a href="/gostd/encoding/gob/encode.go.html#5385285">encString</a></span><span class="op" id="5392862">,</span><br>
<span class="lineno"></span><span class="op" id="5392864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span><span class="comment" id="5392867">//&nbsp;encOpFor&nbsp;returns&nbsp;(a&nbsp;pointer&nbsp;to)&nbsp;the&nbsp;encoding&nbsp;op&nbsp;for&nbsp;the&nbsp;base&nbsp;type&nbsp;under&nbsp;rt&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5392949">//&nbsp;the&nbsp;indirection&nbsp;count&nbsp;to&nbsp;reach&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5392987">func</span>&nbsp;<span class="ident" id="5392992">encOpFor</span><span class="op" id="5393000">(</span><span class="ident" id="5393001">rt</span>&nbsp;<span class="ident" id="5393004"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5393011">.</span><span class="ident" id="5393012"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5393016">,</span>&nbsp;<span class="ident" id="5393018">inProgress</span>&nbsp;<span class="keyword" id="5393029">map</span><span class="op" id="5393032">[</span><span class="ident" id="5393033"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5393040">.</span><span class="ident" id="5393041"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5393045">]</span><span class="op" id="5393046">*</span><span class="ident" id="5393047"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><span class="op" id="5393052">,</span>&nbsp;<span class="ident" id="5393054">building</span>&nbsp;<span class="keyword" id="5393063">map</span><span class="op" id="5393066">[</span><span class="op" id="5393067">*</span><span class="ident" id="5393068"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5393076">]</span><span class="builtintype" id="5393077">bool</span><span class="op" id="5393081">)</span>&nbsp;<span class="op" id="5393083">(</span><span class="op" id="5393084">*</span><span class="ident" id="5393085"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><span class="op" id="5393090">,</span>&nbsp;<span class="builtintype" id="5393092">int</span><span class="op" id="5393095">)</span>&nbsp;<span class="op" id="5393097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5393100">ut</span>&nbsp;<span class="op" id="5393103">:=</span>&nbsp;<span class="ident" id="5393106"><a href="/gostd/encoding/gob/type.go.html#5413083">userType</a></span><span class="op" id="5393114">(</span><span class="ident" id="5393115"><a href="/gostd/encoding/gob/encode.go.html#5393001">rt</a></span><span class="op" id="5393117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5393120">//&nbsp;If&nbsp;the&nbsp;type&nbsp;implements&nbsp;GobEncoder,&nbsp;we&nbsp;handle&nbsp;it&nbsp;without&nbsp;further&nbsp;processing.</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393200">if</span>&nbsp;<span class="ident" id="5393203"><a href="/gostd/encoding/gob/encode.go.html#5393100">ut</a></span><span class="op" id="5393205">.</span><span class="ident" id="5393206"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span>&nbsp;<span class="op" id="5393218">!=</span>&nbsp;<span class="num" id="5393221">0</span>&nbsp;<span class="op" id="5393223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393227">return</span>&nbsp;<span class="ident" id="5393234"><a href="/gostd/encoding/gob/encode.go.html#5395892">gobEncodeOpFor</a></span><span class="op" id="5393248">(</span><span class="ident" id="5393249"><a href="/gostd/encoding/gob/encode.go.html#5393100">ut</a></span><span class="op" id="5393251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5393254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5393257">//&nbsp;If&nbsp;this&nbsp;type&nbsp;is&nbsp;already&nbsp;in&nbsp;progress,&nbsp;it&#39;s&nbsp;a&nbsp;recursive&nbsp;type&nbsp;(e.g.&nbsp;map[string]*T).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5393342">//&nbsp;Return&nbsp;the&nbsp;pointer&nbsp;to&nbsp;the&nbsp;op&nbsp;we&#39;re&nbsp;already&nbsp;building.</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393399">if</span>&nbsp;<span class="ident" id="5393402">opPtr</span>&nbsp;<span class="op" id="5393408">:=</span>&nbsp;<span class="ident" id="5393411"><a href="/gostd/encoding/gob/encode.go.html#5393018">inProgress</a></span><span class="op" id="5393421">[</span><span class="ident" id="5393422"><a href="/gostd/encoding/gob/encode.go.html#5393001">rt</a></span><span class="op" id="5393424">]</span><span class="op" id="5393425">;</span>&nbsp;<span class="ident" id="5393427"><a href="/gostd/encoding/gob/encode.go.html#5393402">opPtr</a></span>&nbsp;<span class="op" id="5393433">!=</span>&nbsp;<span class="builtintype" id="5393436">nil</span>&nbsp;<span class="op" id="5393440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393444">return</span>&nbsp;<span class="ident" id="5393451"><a href="/gostd/encoding/gob/encode.go.html#5393402">opPtr</a></span><span class="op" id="5393456">,</span>&nbsp;<span class="ident" id="5393458"><a href="/gostd/encoding/gob/encode.go.html#5393100">ut</a></span><span class="op" id="5393460">.</span><span class="ident" id="5393461"><a href="/gostd/encoding/gob/type.go.html#5408319">indir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5393468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5393471">typ</span>&nbsp;<span class="op" id="5393475">:=</span>&nbsp;<span class="ident" id="5393478"><a href="/gostd/encoding/gob/encode.go.html#5393100">ut</a></span><span class="op" id="5393480">.</span><span class="ident" id="5393481"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5393487">indir</span>&nbsp;<span class="op" id="5393493">:=</span>&nbsp;<span class="ident" id="5393496"><a href="/gostd/encoding/gob/encode.go.html#5393100">ut</a></span><span class="op" id="5393498">.</span><span class="ident" id="5393499"><a href="/gostd/encoding/gob/type.go.html#5408319">indir</a></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5393506">k</span>&nbsp;<span class="op" id="5393508">:=</span>&nbsp;<span class="ident" id="5393511"><a href="/gostd/encoding/gob/encode.go.html#5393471">typ</a></span><span class="op" id="5393514">.</span><span class="ident" id="5393515"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5393519">(</span><span class="op" id="5393520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393523">var</span>&nbsp;<span class="ident" id="5393527">op</span>&nbsp;<span class="ident" id="5393530"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393537">if</span>&nbsp;<span class="builtintype" id="5393540">int</span><span class="op" id="5393543">(</span><span class="ident" id="5393544"><a href="/gostd/encoding/gob/encode.go.html#5393506">k</a></span><span class="op" id="5393545">)</span>&nbsp;<span class="op" id="5393547">&lt;</span>&nbsp;<span class="builtinfunc" id="5393549">len</span><span class="op" id="5393552">(</span><span class="ident" id="5393553"><a href="/gostd/encoding/gob/encode.go.html#5392324">encOpTable</a></span><span class="op" id="5393563">)</span>&nbsp;<span class="op" id="5393565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5393569"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span>&nbsp;<span class="op" id="5393572">=</span>&nbsp;<span class="ident" id="5393574"><a href="/gostd/encoding/gob/encode.go.html#5392324">encOpTable</a></span><span class="op" id="5393584">[</span><span class="ident" id="5393585"><a href="/gostd/encoding/gob/encode.go.html#5393506">k</a></span><span class="op" id="5393586">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5393589">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393592">if</span>&nbsp;<span class="ident" id="5393595"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span>&nbsp;<span class="op" id="5393598">==</span>&nbsp;<span class="builtintype" id="5393601">nil</span>&nbsp;<span class="op" id="5393605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5393609"><a href="/gostd/encoding/gob/encode.go.html#5393018">inProgress</a></span><span class="op" id="5393619">[</span><span class="ident" id="5393620"><a href="/gostd/encoding/gob/encode.go.html#5393001">rt</a></span><span class="op" id="5393622">]</span>&nbsp;<span class="op" id="5393624">=</span>&nbsp;<span class="op" id="5393626">&amp;</span><span class="ident" id="5393627"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5393632">//&nbsp;Special&nbsp;cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393651">switch</span>&nbsp;<span class="ident" id="5393658">t</span>&nbsp;<span class="op" id="5393660">:=</span>&nbsp;<span class="ident" id="5393663"><a href="/gostd/encoding/gob/encode.go.html#5393471">typ</a></span><span class="op" id="5393666">;</span>&nbsp;<span class="ident" id="5393668"><a href="/gostd/encoding/gob/encode.go.html#5393658">t</a></span><span class="op" id="5393669">.</span><span class="ident" id="5393670"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5393674">(</span><span class="op" id="5393675">)</span>&nbsp;<span class="op" id="5393677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393681">case</span>&nbsp;<span class="ident" id="5393686"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5393693">.</span><span class="ident" id="5393694"><a href="/gostd/reflect/type.go.html#2788062">Slice</a></span><span class="op" id="5393699">:</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393704">if</span>&nbsp;<span class="ident" id="5393707"><a href="/gostd/encoding/gob/encode.go.html#5393658">t</a></span><span class="op" id="5393708">.</span><span class="ident" id="5393709"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5393713">(</span><span class="op" id="5393714">)</span><span class="op" id="5393715">.</span><span class="ident" id="5393716"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5393720">(</span><span class="op" id="5393721">)</span>&nbsp;<span class="op" id="5393723">==</span>&nbsp;<span class="ident" id="5393726"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5393733">.</span><span class="ident" id="5393734"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span>&nbsp;<span class="op" id="5393740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5393746"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span>&nbsp;<span class="op" id="5393749">=</span>&nbsp;<span class="ident" id="5393751"><a href="/gostd/encoding/gob/encode.go.html#5384964">encUint8Array</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5393769">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5393778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5393783">//&nbsp;Slices&nbsp;have&nbsp;a&nbsp;header;&nbsp;we&nbsp;decode&nbsp;it&nbsp;to&nbsp;find&nbsp;the&nbsp;underlying&nbsp;array.</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5393854">elemOp</span><span class="op" id="5393860">,</span>&nbsp;<span class="ident" id="5393862">elemIndir</span>&nbsp;<span class="op" id="5393872">:=</span>&nbsp;<span class="ident" id="5393875"><a href="/gostd/encoding/gob/encode.go.html#5392992">encOpFor</a></span><span class="op" id="5393883">(</span><span class="ident" id="5393884"><a href="/gostd/encoding/gob/encode.go.html#5393658">t</a></span><span class="op" id="5393885">.</span><span class="ident" id="5393886"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5393890">(</span><span class="op" id="5393891">)</span><span class="op" id="5393892">,</span>&nbsp;<span class="ident" id="5393894"><a href="/gostd/encoding/gob/encode.go.html#5393018">inProgress</a></span><span class="op" id="5393904">,</span>&nbsp;<span class="ident" id="5393906"><a href="/gostd/encoding/gob/encode.go.html#5393054">building</a></span><span class="op" id="5393914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5393919">helper</span>&nbsp;<span class="op" id="5393926">:=</span>&nbsp;<span class="ident" id="5393929"><a href="/gostd/encoding/gob/enc_helpers.go.html#5369261">encSliceHelper</a></span><span class="op" id="5393943">[</span><span class="ident" id="5393944"><a href="/gostd/encoding/gob/encode.go.html#5393658">t</a></span><span class="op" id="5393945">.</span><span class="ident" id="5393946"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5393950">(</span><span class="op" id="5393951">)</span><span class="op" id="5393952">.</span><span class="ident" id="5393953"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5393957">(</span><span class="op" id="5393958">)</span><span class="op" id="5393959">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5393964"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span>&nbsp;<span class="op" id="5393967">=</span>&nbsp;<span class="keyword" id="5393969">func</span><span class="op" id="5393973">(</span><span class="ident" id="5393974">i</span>&nbsp;<span class="op" id="5393976">*</span><span class="ident" id="5393977"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5393985">,</span>&nbsp;<span class="ident" id="5393987">state</span>&nbsp;<span class="op" id="5393993">*</span><span class="ident" id="5393994"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5394006">,</span>&nbsp;<span class="ident" id="5394008">slice</span>&nbsp;<span class="ident" id="5394014"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5394021">.</span><span class="ident" id="5394022"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5394027">)</span>&nbsp;<span class="op" id="5394029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5394035">if</span>&nbsp;<span class="op" id="5394038">!</span><span class="ident" id="5394039"><a href="/gostd/encoding/gob/encode.go.html#5393987">state</a></span><span class="op" id="5394044">.</span><span class="ident" id="5394045"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5394054">&amp;&amp;</span>&nbsp;<span class="ident" id="5394057"><a href="/gostd/encoding/gob/encode.go.html#5394008">slice</a></span><span class="op" id="5394062">.</span><span class="ident" id="5394063"><a href="/gostd/reflect/value.go.html#2861631">Len</a></span><span class="op" id="5394066">(</span><span class="op" id="5394067">)</span>&nbsp;<span class="op" id="5394069">==</span>&nbsp;<span class="num" id="5394072">0</span>&nbsp;<span class="op" id="5394074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5394081">return</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5394092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394098"><a href="/gostd/encoding/gob/encode.go.html#5393987">state</a></span><span class="op" id="5394103">.</span><span class="ident" id="5394104"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5394110">(</span><span class="ident" id="5394111"><a href="/gostd/encoding/gob/encode.go.html#5393974">i</a></span><span class="op" id="5394112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394118"><a href="/gostd/encoding/gob/encode.go.html#5393987">state</a></span><span class="op" id="5394123">.</span><span class="ident" id="5394124"><a href="/gostd/encoding/gob/encode.go.html#5379148">enc</a></span><span class="op" id="5394127">.</span><span class="ident" id="5394128"><a href="/gostd/encoding/gob/encode.go.html#5387534">encodeArray</a></span><span class="op" id="5394139">(</span><span class="ident" id="5394140"><a href="/gostd/encoding/gob/encode.go.html#5393987">state</a></span><span class="op" id="5394145">.</span><span class="ident" id="5394146"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5394147">,</span>&nbsp;<span class="ident" id="5394149"><a href="/gostd/encoding/gob/encode.go.html#5394008">slice</a></span><span class="op" id="5394154">,</span>&nbsp;<span class="op" id="5394156">*</span><span class="ident" id="5394157"><a href="/gostd/encoding/gob/encode.go.html#5393854">elemOp</a></span><span class="op" id="5394163">,</span>&nbsp;<span class="ident" id="5394165"><a href="/gostd/encoding/gob/encode.go.html#5393862">elemIndir</a></span><span class="op" id="5394174">,</span>&nbsp;<span class="ident" id="5394176"><a href="/gostd/encoding/gob/encode.go.html#5394008">slice</a></span><span class="op" id="5394181">.</span><span class="ident" id="5394182"><a href="/gostd/reflect/value.go.html#2861631">Len</a></span><span class="op" id="5394185">(</span><span class="op" id="5394186">)</span><span class="op" id="5394187">,</span>&nbsp;<span class="ident" id="5394189"><a href="/gostd/encoding/gob/encode.go.html#5393919">helper</a></span><span class="op" id="5394195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5394200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5394204">case</span>&nbsp;<span class="ident" id="5394209"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5394216">.</span><span class="ident" id="5394217"><a href="/gostd/reflect/type.go.html#2788022">Array</a></span><span class="op" id="5394222">:</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5394227">//&nbsp;True&nbsp;arrays&nbsp;have&nbsp;size&nbsp;in&nbsp;the&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394268">elemOp</span><span class="op" id="5394274">,</span>&nbsp;<span class="ident" id="5394276">elemIndir</span>&nbsp;<span class="op" id="5394286">:=</span>&nbsp;<span class="ident" id="5394289"><a href="/gostd/encoding/gob/encode.go.html#5392992">encOpFor</a></span><span class="op" id="5394297">(</span><span class="ident" id="5394298"><a href="/gostd/encoding/gob/encode.go.html#5393658">t</a></span><span class="op" id="5394299">.</span><span class="ident" id="5394300"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5394304">(</span><span class="op" id="5394305">)</span><span class="op" id="5394306">,</span>&nbsp;<span class="ident" id="5394308"><a href="/gostd/encoding/gob/encode.go.html#5393018">inProgress</a></span><span class="op" id="5394318">,</span>&nbsp;<span class="ident" id="5394320"><a href="/gostd/encoding/gob/encode.go.html#5393054">building</a></span><span class="op" id="5394328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394333">helper</span>&nbsp;<span class="op" id="5394340">:=</span>&nbsp;<span class="ident" id="5394343"><a href="/gostd/encoding/gob/enc_helpers.go.html#5368619">encArrayHelper</a></span><span class="op" id="5394357">[</span><span class="ident" id="5394358"><a href="/gostd/encoding/gob/encode.go.html#5393658">t</a></span><span class="op" id="5394359">.</span><span class="ident" id="5394360"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5394364">(</span><span class="op" id="5394365">)</span><span class="op" id="5394366">.</span><span class="ident" id="5394367"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5394371">(</span><span class="op" id="5394372">)</span><span class="op" id="5394373">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394378"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span>&nbsp;<span class="op" id="5394381">=</span>&nbsp;<span class="keyword" id="5394383">func</span><span class="op" id="5394387">(</span><span class="ident" id="5394388">i</span>&nbsp;<span class="op" id="5394390">*</span><span class="ident" id="5394391"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5394399">,</span>&nbsp;<span class="ident" id="5394401">state</span>&nbsp;<span class="op" id="5394407">*</span><span class="ident" id="5394408"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5394420">,</span>&nbsp;<span class="ident" id="5394422">array</span>&nbsp;<span class="ident" id="5394428"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5394435">.</span><span class="ident" id="5394436"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5394441">)</span>&nbsp;<span class="op" id="5394443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394449"><a href="/gostd/encoding/gob/encode.go.html#5394401">state</a></span><span class="op" id="5394454">.</span><span class="ident" id="5394455"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5394461">(</span><span class="ident" id="5394462"><a href="/gostd/encoding/gob/encode.go.html#5394388">i</a></span><span class="op" id="5394463">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394469"><a href="/gostd/encoding/gob/encode.go.html#5394401">state</a></span><span class="op" id="5394474">.</span><span class="ident" id="5394475"><a href="/gostd/encoding/gob/encode.go.html#5379148">enc</a></span><span class="op" id="5394478">.</span><span class="ident" id="5394479"><a href="/gostd/encoding/gob/encode.go.html#5387534">encodeArray</a></span><span class="op" id="5394490">(</span><span class="ident" id="5394491"><a href="/gostd/encoding/gob/encode.go.html#5394401">state</a></span><span class="op" id="5394496">.</span><span class="ident" id="5394497"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5394498">,</span>&nbsp;<span class="ident" id="5394500"><a href="/gostd/encoding/gob/encode.go.html#5394422">array</a></span><span class="op" id="5394505">,</span>&nbsp;<span class="op" id="5394507">*</span><span class="ident" id="5394508"><a href="/gostd/encoding/gob/encode.go.html#5394268">elemOp</a></span><span class="op" id="5394514">,</span>&nbsp;<span class="ident" id="5394516"><a href="/gostd/encoding/gob/encode.go.html#5394276">elemIndir</a></span><span class="op" id="5394525">,</span>&nbsp;<span class="ident" id="5394527"><a href="/gostd/encoding/gob/encode.go.html#5394422">array</a></span><span class="op" id="5394532">.</span><span class="ident" id="5394533"><a href="/gostd/reflect/value.go.html#2861631">Len</a></span><span class="op" id="5394536">(</span><span class="op" id="5394537">)</span><span class="op" id="5394538">,</span>&nbsp;<span class="ident" id="5394540"><a href="/gostd/encoding/gob/encode.go.html#5394333">helper</a></span><span class="op" id="5394546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5394551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5394555">case</span>&nbsp;<span class="ident" id="5394560"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5394567">.</span><span class="ident" id="5394568"><a href="/gostd/reflect/type.go.html#2788052">Map</a></span><span class="op" id="5394571">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394576">keyOp</span><span class="op" id="5394581">,</span>&nbsp;<span class="ident" id="5394583">keyIndir</span>&nbsp;<span class="op" id="5394592">:=</span>&nbsp;<span class="ident" id="5394595"><a href="/gostd/encoding/gob/encode.go.html#5392992">encOpFor</a></span><span class="op" id="5394603">(</span><span class="ident" id="5394604"><a href="/gostd/encoding/gob/encode.go.html#5393658">t</a></span><span class="op" id="5394605">.</span><span class="ident" id="5394606"><a href="/gostd/reflect/type.go.html#2786340">Key</a></span><span class="op" id="5394609">(</span><span class="op" id="5394610">)</span><span class="op" id="5394611">,</span>&nbsp;<span class="ident" id="5394613"><a href="/gostd/encoding/gob/encode.go.html#5393018">inProgress</a></span><span class="op" id="5394623">,</span>&nbsp;<span class="ident" id="5394625"><a href="/gostd/encoding/gob/encode.go.html#5393054">building</a></span><span class="op" id="5394633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394638">elemOp</span><span class="op" id="5394644">,</span>&nbsp;<span class="ident" id="5394646">elemIndir</span>&nbsp;<span class="op" id="5394656">:=</span>&nbsp;<span class="ident" id="5394659"><a href="/gostd/encoding/gob/encode.go.html#5392992">encOpFor</a></span><span class="op" id="5394667">(</span><span class="ident" id="5394668"><a href="/gostd/encoding/gob/encode.go.html#5393658">t</a></span><span class="op" id="5394669">.</span><span class="ident" id="5394670"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5394674">(</span><span class="op" id="5394675">)</span><span class="op" id="5394676">,</span>&nbsp;<span class="ident" id="5394678"><a href="/gostd/encoding/gob/encode.go.html#5393018">inProgress</a></span><span class="op" id="5394688">,</span>&nbsp;<span class="ident" id="5394690"><a href="/gostd/encoding/gob/encode.go.html#5393054">building</a></span><span class="op" id="5394698">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394703"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span>&nbsp;<span class="op" id="5394706">=</span>&nbsp;<span class="keyword" id="5394708">func</span><span class="op" id="5394712">(</span><span class="ident" id="5394713">i</span>&nbsp;<span class="op" id="5394715">*</span><span class="ident" id="5394716"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5394724">,</span>&nbsp;<span class="ident" id="5394726">state</span>&nbsp;<span class="op" id="5394732">*</span><span class="ident" id="5394733"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5394745">,</span>&nbsp;<span class="ident" id="5394747">mv</span>&nbsp;<span class="ident" id="5394750"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5394757">.</span><span class="ident" id="5394758"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5394763">)</span>&nbsp;<span class="op" id="5394765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5394771">//&nbsp;We&nbsp;send&nbsp;zero-length&nbsp;(but&nbsp;non-nil)&nbsp;maps&nbsp;because&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5394829">//&nbsp;receiver&nbsp;might&nbsp;want&nbsp;to&nbsp;use&nbsp;the&nbsp;map.&nbsp;&nbsp;(Maps&nbsp;don&#39;t&nbsp;use&nbsp;append.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5394898">if</span>&nbsp;<span class="op" id="5394901">!</span><span class="ident" id="5394902"><a href="/gostd/encoding/gob/encode.go.html#5394726">state</a></span><span class="op" id="5394907">.</span><span class="ident" id="5394908"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5394917">&amp;&amp;</span>&nbsp;<span class="ident" id="5394920"><a href="/gostd/encoding/gob/encode.go.html#5394747">mv</a></span><span class="op" id="5394922">.</span><span class="ident" id="5394923"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="5394928">(</span><span class="op" id="5394929">)</span>&nbsp;<span class="op" id="5394931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5394938">return</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5394949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394955"><a href="/gostd/encoding/gob/encode.go.html#5394726">state</a></span><span class="op" id="5394960">.</span><span class="ident" id="5394961"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5394967">(</span><span class="ident" id="5394968"><a href="/gostd/encoding/gob/encode.go.html#5394713">i</a></span><span class="op" id="5394969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5394975"><a href="/gostd/encoding/gob/encode.go.html#5394726">state</a></span><span class="op" id="5394980">.</span><span class="ident" id="5394981"><a href="/gostd/encoding/gob/encode.go.html#5379148">enc</a></span><span class="op" id="5394984">.</span><span class="ident" id="5394985"><a href="/gostd/encoding/gob/encode.go.html#5388534">encodeMap</a></span><span class="op" id="5394994">(</span><span class="ident" id="5394995"><a href="/gostd/encoding/gob/encode.go.html#5394726">state</a></span><span class="op" id="5395000">.</span><span class="ident" id="5395001"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5395002">,</span>&nbsp;<span class="ident" id="5395004"><a href="/gostd/encoding/gob/encode.go.html#5394747">mv</a></span><span class="op" id="5395006">,</span>&nbsp;<span class="op" id="5395008">*</span><span class="ident" id="5395009"><a href="/gostd/encoding/gob/encode.go.html#5394576">keyOp</a></span><span class="op" id="5395014">,</span>&nbsp;<span class="op" id="5395016">*</span><span class="ident" id="5395017"><a href="/gostd/encoding/gob/encode.go.html#5394638">elemOp</a></span><span class="op" id="5395023">,</span>&nbsp;<span class="ident" id="5395025"><a href="/gostd/encoding/gob/encode.go.html#5394583">keyIndir</a></span><span class="op" id="5395033">,</span>&nbsp;<span class="ident" id="5395035"><a href="/gostd/encoding/gob/encode.go.html#5394646">elemIndir</a></span><span class="op" id="5395044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5395049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5395053">case</span>&nbsp;<span class="ident" id="5395058"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5395065">.</span><span class="ident" id="5395066"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span><span class="op" id="5395072">:</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5395077">//&nbsp;Generate&nbsp;a&nbsp;closure&nbsp;that&nbsp;calls&nbsp;out&nbsp;to&nbsp;the&nbsp;engine&nbsp;for&nbsp;the&nbsp;nested&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395152"><a href="/gostd/encoding/gob/encode.go.html#5397619">getEncEngine</a></span><span class="op" id="5395164">(</span><span class="ident" id="5395165"><a href="/gostd/encoding/gob/type.go.html#5413083">userType</a></span><span class="op" id="5395173">(</span><span class="ident" id="5395174"><a href="/gostd/encoding/gob/encode.go.html#5393471">typ</a></span><span class="op" id="5395177">)</span><span class="op" id="5395178">,</span>&nbsp;<span class="ident" id="5395180"><a href="/gostd/encoding/gob/encode.go.html#5393054">building</a></span><span class="op" id="5395188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395193">info</span>&nbsp;<span class="op" id="5395198">:=</span>&nbsp;<span class="ident" id="5395201"><a href="/gostd/encoding/gob/type.go.html#5430269">mustGetTypeInfo</a></span><span class="op" id="5395216">(</span><span class="ident" id="5395217"><a href="/gostd/encoding/gob/encode.go.html#5393471">typ</a></span><span class="op" id="5395220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395225"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span>&nbsp;<span class="op" id="5395228">=</span>&nbsp;<span class="keyword" id="5395230">func</span><span class="op" id="5395234">(</span><span class="ident" id="5395235">i</span>&nbsp;<span class="op" id="5395237">*</span><span class="ident" id="5395238"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5395246">,</span>&nbsp;<span class="ident" id="5395248">state</span>&nbsp;<span class="op" id="5395254">*</span><span class="ident" id="5395255"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5395267">,</span>&nbsp;<span class="ident" id="5395269">sv</span>&nbsp;<span class="ident" id="5395272"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5395279">.</span><span class="ident" id="5395280"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5395285">)</span>&nbsp;<span class="op" id="5395287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395293"><a href="/gostd/encoding/gob/encode.go.html#5395248">state</a></span><span class="op" id="5395298">.</span><span class="ident" id="5395299"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5395305">(</span><span class="ident" id="5395306"><a href="/gostd/encoding/gob/encode.go.html#5395235">i</a></span><span class="op" id="5395307">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5395313">//&nbsp;indirect&nbsp;through&nbsp;info&nbsp;to&nbsp;delay&nbsp;evaluation&nbsp;for&nbsp;recursive&nbsp;structs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395384">enc</span>&nbsp;<span class="op" id="5395388">:=</span>&nbsp;<span class="ident" id="5395391"><a href="/gostd/encoding/gob/encode.go.html#5395193">info</a></span><span class="op" id="5395395">.</span><span class="ident" id="5395396"><a href="/gostd/encoding/gob/type.go.html#5427862">encoder</a></span><span class="op" id="5395403">.</span><span class="ident" id="5395404"><a href="/gostd/sync/atomic/value.go.html#1469775">Load</a></span><span class="op" id="5395408">(</span><span class="op" id="5395409">)</span><span class="op" id="5395410">.</span><span class="op" id="5395411">(</span><span class="op" id="5395412">*</span><span class="ident" id="5395413"><a href="/gostd/encoding/gob/encode.go.html#5385861">encEngine</a></span><span class="op" id="5395422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395428"><a href="/gostd/encoding/gob/encode.go.html#5395248">state</a></span><span class="op" id="5395433">.</span><span class="ident" id="5395434"><a href="/gostd/encoding/gob/encode.go.html#5379148">enc</a></span><span class="op" id="5395437">.</span><span class="ident" id="5395438"><a href="/gostd/encoding/gob/encode.go.html#5386847">encodeStruct</a></span><span class="op" id="5395450">(</span><span class="ident" id="5395451"><a href="/gostd/encoding/gob/encode.go.html#5395248">state</a></span><span class="op" id="5395456">.</span><span class="ident" id="5395457"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5395458">,</span>&nbsp;<span class="ident" id="5395460"><a href="/gostd/encoding/gob/encode.go.html#5395384">enc</a></span><span class="op" id="5395463">,</span>&nbsp;<span class="ident" id="5395465"><a href="/gostd/encoding/gob/encode.go.html#5395269">sv</a></span><span class="op" id="5395467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5395472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5395476">case</span>&nbsp;<span class="ident" id="5395481"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5395488">.</span><span class="ident" id="5395489"><a href="/gostd/reflect/type.go.html#2788041">Interface</a></span><span class="op" id="5395498">:</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395503"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span>&nbsp;<span class="op" id="5395506">=</span>&nbsp;<span class="keyword" id="5395508">func</span><span class="op" id="5395512">(</span><span class="ident" id="5395513">i</span>&nbsp;<span class="op" id="5395515">*</span><span class="ident" id="5395516"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5395524">,</span>&nbsp;<span class="ident" id="5395526">state</span>&nbsp;<span class="op" id="5395532">*</span><span class="ident" id="5395533"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5395545">,</span>&nbsp;<span class="ident" id="5395547">iv</span>&nbsp;<span class="ident" id="5395550"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5395557">.</span><span class="ident" id="5395558"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5395563">)</span>&nbsp;<span class="op" id="5395565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5395571">if</span>&nbsp;<span class="op" id="5395574">!</span><span class="ident" id="5395575"><a href="/gostd/encoding/gob/encode.go.html#5395526">state</a></span><span class="op" id="5395580">.</span><span class="ident" id="5395581"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5395590">&amp;&amp;</span>&nbsp;<span class="op" id="5395593">(</span><span class="op" id="5395594">!</span><span class="ident" id="5395595"><a href="/gostd/encoding/gob/encode.go.html#5395547">iv</a></span><span class="op" id="5395597">.</span><span class="ident" id="5395598"><a href="/gostd/reflect/value.go.html#2861333">IsValid</a></span><span class="op" id="5395605">(</span><span class="op" id="5395606">)</span>&nbsp;<span class="op" id="5395608">||</span>&nbsp;<span class="ident" id="5395611"><a href="/gostd/encoding/gob/encode.go.html#5395547">iv</a></span><span class="op" id="5395613">.</span><span class="ident" id="5395614"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="5395619">(</span><span class="op" id="5395620">)</span><span class="op" id="5395621">)</span>&nbsp;<span class="op" id="5395623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5395630">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5395641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395647"><a href="/gostd/encoding/gob/encode.go.html#5395526">state</a></span><span class="op" id="5395652">.</span><span class="ident" id="5395653"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5395659">(</span><span class="ident" id="5395660"><a href="/gostd/encoding/gob/encode.go.html#5395513">i</a></span><span class="op" id="5395661">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395667"><a href="/gostd/encoding/gob/encode.go.html#5395526">state</a></span><span class="op" id="5395672">.</span><span class="ident" id="5395673"><a href="/gostd/encoding/gob/encode.go.html#5379148">enc</a></span><span class="op" id="5395676">.</span><span class="ident" id="5395677"><a href="/gostd/encoding/gob/encode.go.html#5389286">encodeInterface</a></span><span class="op" id="5395692">(</span><span class="ident" id="5395693"><a href="/gostd/encoding/gob/encode.go.html#5395526">state</a></span><span class="op" id="5395698">.</span><span class="ident" id="5395699"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5395700">,</span>&nbsp;<span class="ident" id="5395702"><a href="/gostd/encoding/gob/encode.go.html#5395547">iv</a></span><span class="op" id="5395704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5395709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5395713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5395716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5395719">if</span>&nbsp;<span class="ident" id="5395722"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span>&nbsp;<span class="op" id="5395725">==</span>&nbsp;<span class="builtintype" id="5395728">nil</span>&nbsp;<span class="op" id="5395732">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395736"><a href="/gostd/encoding/gob/error.go.html#5407181">errorf</a></span><span class="op" id="5395742">(</span><span class="string" id="5395743">&#34;can&#39;t&nbsp;happen:&nbsp;encode&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5395773">,</span>&nbsp;<span class="ident" id="5395775"><a href="/gostd/encoding/gob/encode.go.html#5393001">rt</a></span><span class="op" id="5395777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5395780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5395783">return</span>&nbsp;<span class="op" id="5395790">&amp;</span><span class="ident" id="5395791"><a href="/gostd/encoding/gob/encode.go.html#5393527">op</a></span><span class="op" id="5395793">,</span>&nbsp;<span class="ident" id="5395795"><a href="/gostd/encoding/gob/encode.go.html#5393487">indir</a></span><br>
<span class="lineno"></span><span class="op" id="5395801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="5395804">//&nbsp;gobEncodeOpFor&nbsp;returns&nbsp;the&nbsp;op&nbsp;for&nbsp;a&nbsp;type&nbsp;that&nbsp;is&nbsp;known&nbsp;to&nbsp;implement&nbsp;GobEncoder.</span><br>
<span class="lineno"></span><span class="keyword" id="5395887">func</span>&nbsp;<span class="ident" id="5395892">gobEncodeOpFor</span><span class="op" id="5395906">(</span><span class="ident" id="5395907">ut</span>&nbsp;<span class="op" id="5395910">*</span><span class="ident" id="5395911"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5395923">)</span>&nbsp;<span class="op" id="5395925">(</span><span class="op" id="5395926">*</span><span class="ident" id="5395927"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><span class="op" id="5395932">,</span>&nbsp;<span class="builtintype" id="5395934">int</span><span class="op" id="5395937">)</span>&nbsp;<span class="op" id="5395939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395942">rt</span>&nbsp;<span class="op" id="5395945">:=</span>&nbsp;<span class="ident" id="5395948"><a href="/gostd/encoding/gob/encode.go.html#5395907">ut</a></span><span class="op" id="5395950">.</span><span class="ident" id="5395951"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5395957">if</span>&nbsp;<span class="ident" id="5395960"><a href="/gostd/encoding/gob/encode.go.html#5395907">ut</a></span><span class="op" id="5395962">.</span><span class="ident" id="5395963"><a href="/gostd/encoding/gob/type.go.html#5408499">encIndir</a></span>&nbsp;<span class="op" id="5395972">==</span>&nbsp;<span class="op" id="5395975">-</span><span class="num" id="5395976">1</span>&nbsp;<span class="op" id="5395978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5395982"><a href="/gostd/encoding/gob/encode.go.html#5395942">rt</a></span>&nbsp;<span class="op" id="5395985">=</span>&nbsp;<span class="ident" id="5395987"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5395994">.</span><span class="ident" id="5395995"><a href="/gostd/reflect/type.go.html#2809042">PtrTo</a></span><span class="op" id="5396000">(</span><span class="ident" id="5396001"><a href="/gostd/encoding/gob/encode.go.html#5395942">rt</a></span><span class="op" id="5396003">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5396006">}</span>&nbsp;<span class="keyword" id="5396008">else</span>&nbsp;<span class="keyword" id="5396013">if</span>&nbsp;<span class="ident" id="5396016"><a href="/gostd/encoding/gob/encode.go.html#5395907">ut</a></span><span class="op" id="5396018">.</span><span class="ident" id="5396019"><a href="/gostd/encoding/gob/type.go.html#5408499">encIndir</a></span>&nbsp;<span class="op" id="5396028">&gt;</span>&nbsp;<span class="num" id="5396030">0</span>&nbsp;<span class="op" id="5396032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5396036">for</span>&nbsp;<span class="ident" id="5396040">i</span>&nbsp;<span class="op" id="5396042">:=</span>&nbsp;<span class="builtintype" id="5396045">int8</span><span class="op" id="5396049">(</span><span class="num" id="5396050">0</span><span class="op" id="5396051">)</span><span class="op" id="5396052">;</span>&nbsp;<span class="ident" id="5396054"><a href="/gostd/encoding/gob/encode.go.html#5396040">i</a></span>&nbsp;<span class="op" id="5396056">&lt;</span>&nbsp;<span class="ident" id="5396058"><a href="/gostd/encoding/gob/encode.go.html#5395907">ut</a></span><span class="op" id="5396060">.</span><span class="ident" id="5396061"><a href="/gostd/encoding/gob/type.go.html#5408499">encIndir</a></span><span class="op" id="5396069">;</span>&nbsp;<span class="ident" id="5396071"><a href="/gostd/encoding/gob/encode.go.html#5396040">i</a></span><span class="op" id="5396072">++</span>&nbsp;<span class="op" id="5396075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396080"><a href="/gostd/encoding/gob/encode.go.html#5395942">rt</a></span>&nbsp;<span class="op" id="5396083">=</span>&nbsp;<span class="ident" id="5396085"><a href="/gostd/encoding/gob/encode.go.html#5395942">rt</a></span><span class="op" id="5396087">.</span><span class="ident" id="5396088"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="5396092">(</span><span class="op" id="5396093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5396097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5396100">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5396103">var</span>&nbsp;<span class="ident" id="5396107">op</span>&nbsp;<span class="ident" id="5396110"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396117"><a href="/gostd/encoding/gob/encode.go.html#5396107">op</a></span>&nbsp;<span class="op" id="5396120">=</span>&nbsp;<span class="keyword" id="5396122">func</span><span class="op" id="5396126">(</span><span class="ident" id="5396127">i</span>&nbsp;<span class="op" id="5396129">*</span><span class="ident" id="5396130"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5396138">,</span>&nbsp;<span class="ident" id="5396140">state</span>&nbsp;<span class="op" id="5396146">*</span><span class="ident" id="5396147"><a href="/gostd/encoding/gob/encode.go.html#5379125">encoderState</a></span><span class="op" id="5396159">,</span>&nbsp;<span class="ident" id="5396161">v</span>&nbsp;<span class="ident" id="5396163"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5396170">.</span><span class="ident" id="5396171"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5396176">)</span>&nbsp;<span class="op" id="5396178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5396182">if</span>&nbsp;<span class="ident" id="5396185"><a href="/gostd/encoding/gob/encode.go.html#5395907">ut</a></span><span class="op" id="5396187">.</span><span class="ident" id="5396188"><a href="/gostd/encoding/gob/type.go.html#5408499">encIndir</a></span>&nbsp;<span class="op" id="5396197">==</span>&nbsp;<span class="op" id="5396200">-</span><span class="num" id="5396201">1</span>&nbsp;<span class="op" id="5396203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5396208">//&nbsp;Need&nbsp;to&nbsp;climb&nbsp;up&nbsp;one&nbsp;level&nbsp;to&nbsp;turn&nbsp;value&nbsp;into&nbsp;pointer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5396269">if</span>&nbsp;<span class="op" id="5396272">!</span><span class="ident" id="5396273"><a href="/gostd/encoding/gob/encode.go.html#5396161">v</a></span><span class="op" id="5396274">.</span><span class="ident" id="5396275"><a href="/gostd/reflect/value.go.html#2840824">CanAddr</a></span><span class="op" id="5396282">(</span><span class="op" id="5396283">)</span>&nbsp;<span class="op" id="5396285">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396291"><a href="/gostd/encoding/gob/error.go.html#5407181">errorf</a></span><span class="op" id="5396297">(</span><span class="string" id="5396298">&#34;unaddressable&nbsp;value&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="5396330">,</span>&nbsp;<span class="ident" id="5396332"><a href="/gostd/encoding/gob/encode.go.html#5395942">rt</a></span><span class="op" id="5396334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5396339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396344"><a href="/gostd/encoding/gob/encode.go.html#5396161">v</a></span>&nbsp;<span class="op" id="5396346">=</span>&nbsp;<span class="ident" id="5396348"><a href="/gostd/encoding/gob/encode.go.html#5396161">v</a></span><span class="op" id="5396349">.</span><span class="ident" id="5396350"><a href="/gostd/reflect/value.go.html#2839495">Addr</a></span><span class="op" id="5396354">(</span><span class="op" id="5396355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5396359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5396363">if</span>&nbsp;<span class="op" id="5396366">!</span><span class="ident" id="5396367"><a href="/gostd/encoding/gob/encode.go.html#5396140">state</a></span><span class="op" id="5396372">.</span><span class="ident" id="5396373"><a href="/gostd/encoding/gob/encode.go.html#5379188">sendZero</a></span>&nbsp;<span class="op" id="5396382">&amp;&amp;</span>&nbsp;<span class="ident" id="5396385"><a href="/gostd/encoding/gob/encode.go.html#5390620">isZero</a></span><span class="op" id="5396391">(</span><span class="ident" id="5396392"><a href="/gostd/encoding/gob/encode.go.html#5396161">v</a></span><span class="op" id="5396393">)</span>&nbsp;<span class="op" id="5396395">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5396400">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5396409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396413"><a href="/gostd/encoding/gob/encode.go.html#5396140">state</a></span><span class="op" id="5396418">.</span><span class="ident" id="5396419"><a href="/gostd/encoding/gob/encode.go.html#5382001">update</a></span><span class="op" id="5396425">(</span><span class="ident" id="5396426"><a href="/gostd/encoding/gob/encode.go.html#5396127">i</a></span><span class="op" id="5396427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396431"><a href="/gostd/encoding/gob/encode.go.html#5396140">state</a></span><span class="op" id="5396436">.</span><span class="ident" id="5396437"><a href="/gostd/encoding/gob/encode.go.html#5379148">enc</a></span><span class="op" id="5396440">.</span><span class="ident" id="5396441"><a href="/gostd/encoding/gob/encode.go.html#5391694">encodeGobEncoder</a></span><span class="op" id="5396457">(</span><span class="ident" id="5396458"><a href="/gostd/encoding/gob/encode.go.html#5396140">state</a></span><span class="op" id="5396463">.</span><span class="ident" id="5396464"><a href="/gostd/encoding/gob/encode.go.html#5379167">b</a></span><span class="op" id="5396465">,</span>&nbsp;<span class="ident" id="5396467"><a href="/gostd/encoding/gob/encode.go.html#5395907">ut</a></span><span class="op" id="5396469">,</span>&nbsp;<span class="ident" id="5396471"><a href="/gostd/encoding/gob/encode.go.html#5396161">v</a></span><span class="op" id="5396472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5396475">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5396478">return</span>&nbsp;<span class="op" id="5396485">&amp;</span><span class="ident" id="5396486"><a href="/gostd/encoding/gob/encode.go.html#5396107">op</a></span><span class="op" id="5396488">,</span>&nbsp;<span class="builtintype" id="5396490">int</span><span class="op" id="5396493">(</span><span class="ident" id="5396494"><a href="/gostd/encoding/gob/encode.go.html#5395907">ut</a></span><span class="op" id="5396496">.</span><span class="ident" id="5396497"><a href="/gostd/encoding/gob/type.go.html#5408499">encIndir</a></span><span class="op" id="5396505">)</span>&nbsp;<span class="comment" id="5396507">//&nbsp;encIndir:&nbsp;op&nbsp;will&nbsp;get&nbsp;called&nbsp;with&nbsp;p&nbsp;==&nbsp;address&nbsp;of&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="5396570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5396573">//&nbsp;compileEnc&nbsp;returns&nbsp;the&nbsp;engine&nbsp;to&nbsp;compile&nbsp;the&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5396627">func</span>&nbsp;<span class="ident" id="5396632">compileEnc</span><span class="op" id="5396642">(</span><span class="ident" id="5396643">ut</span>&nbsp;<span class="op" id="5396646">*</span><span class="ident" id="5396647"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5396659">,</span>&nbsp;<span class="ident" id="5396661">building</span>&nbsp;<span class="keyword" id="5396670">map</span><span class="op" id="5396673">[</span><span class="op" id="5396674">*</span><span class="ident" id="5396675"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5396683">]</span><span class="builtintype" id="5396684">bool</span><span class="op" id="5396688">)</span>&nbsp;<span class="op" id="5396690">*</span><span class="ident" id="5396691"><a href="/gostd/encoding/gob/encode.go.html#5385861">encEngine</a></span>&nbsp;<span class="op" id="5396701">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396704">srt</span>&nbsp;<span class="op" id="5396708">:=</span>&nbsp;<span class="ident" id="5396711"><a href="/gostd/encoding/gob/encode.go.html#5396643">ut</a></span><span class="op" id="5396713">.</span><span class="ident" id="5396714"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396720">engine</span>&nbsp;<span class="op" id="5396727">:=</span>&nbsp;<span class="builtinfunc" id="5396730">new</span><span class="op" id="5396733">(</span><span class="ident" id="5396734"><a href="/gostd/encoding/gob/encode.go.html#5385861">encEngine</a></span><span class="op" id="5396743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396746">seen</span>&nbsp;<span class="op" id="5396751">:=</span>&nbsp;<span class="builtinfunc" id="5396754">make</span><span class="op" id="5396758">(</span><span class="keyword" id="5396759">map</span><span class="op" id="5396762">[</span><span class="ident" id="5396763"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5396770">.</span><span class="ident" id="5396771"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="5396775">]</span><span class="op" id="5396776">*</span><span class="ident" id="5396777"><a href="/gostd/encoding/gob/encode.go.html#5381533">encOp</a></span><span class="op" id="5396782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396785">rt</span>&nbsp;<span class="op" id="5396788">:=</span>&nbsp;<span class="ident" id="5396791"><a href="/gostd/encoding/gob/encode.go.html#5396643">ut</a></span><span class="op" id="5396793">.</span><span class="ident" id="5396794"><a href="/gostd/encoding/gob/type.go.html#5408253">base</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5396800">if</span>&nbsp;<span class="ident" id="5396803"><a href="/gostd/encoding/gob/encode.go.html#5396643">ut</a></span><span class="op" id="5396805">.</span><span class="ident" id="5396806"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span>&nbsp;<span class="op" id="5396818">!=</span>&nbsp;<span class="num" id="5396821">0</span>&nbsp;<span class="op" id="5396823">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396827"><a href="/gostd/encoding/gob/encode.go.html#5396785">rt</a></span>&nbsp;<span class="op" id="5396830">=</span>&nbsp;<span class="ident" id="5396832"><a href="/gostd/encoding/gob/encode.go.html#5396643">ut</a></span><span class="op" id="5396834">.</span><span class="ident" id="5396835"><a href="/gostd/encoding/gob/type.go.html#5408196">user</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5396841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5396844">if</span>&nbsp;<span class="ident" id="5396847"><a href="/gostd/encoding/gob/encode.go.html#5396643">ut</a></span><span class="op" id="5396849">.</span><span class="ident" id="5396850"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span>&nbsp;<span class="op" id="5396862">==</span>&nbsp;<span class="num" id="5396865">0</span>&nbsp;<span class="op" id="5396867">&amp;&amp;</span>&nbsp;<span class="ident" id="5396870"><a href="/gostd/encoding/gob/encode.go.html#5396704">srt</a></span><span class="op" id="5396873">.</span><span class="ident" id="5396874"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5396878">(</span><span class="op" id="5396879">)</span>&nbsp;<span class="op" id="5396881">==</span>&nbsp;<span class="ident" id="5396884"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5396891">.</span><span class="ident" id="5396892"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span>&nbsp;<span class="op" id="5396899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5396903">for</span>&nbsp;<span class="ident" id="5396907">fieldNum</span><span class="op" id="5396915">,</span>&nbsp;<span class="ident" id="5396917">wireFieldNum</span>&nbsp;<span class="op" id="5396930">:=</span>&nbsp;<span class="num" id="5396933">0</span><span class="op" id="5396934">,</span>&nbsp;<span class="num" id="5396936">0</span><span class="op" id="5396937">;</span>&nbsp;<span class="ident" id="5396939"><a href="/gostd/encoding/gob/encode.go.html#5396907">fieldNum</a></span>&nbsp;<span class="op" id="5396948">&lt;</span>&nbsp;<span class="ident" id="5396950"><a href="/gostd/encoding/gob/encode.go.html#5396704">srt</a></span><span class="op" id="5396953">.</span><span class="ident" id="5396954"><a href="/gostd/reflect/type.go.html#2786550">NumField</a></span><span class="op" id="5396962">(</span><span class="op" id="5396963">)</span><span class="op" id="5396964">;</span>&nbsp;<span class="ident" id="5396966"><a href="/gostd/encoding/gob/encode.go.html#5396907">fieldNum</a></span><span class="op" id="5396974">++</span>&nbsp;<span class="op" id="5396977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5396982">f</span>&nbsp;<span class="op" id="5396984">:=</span>&nbsp;<span class="ident" id="5396987"><a href="/gostd/encoding/gob/encode.go.html#5396704">srt</a></span><span class="op" id="5396990">.</span><span class="ident" id="5396991"><a href="/gostd/reflect/type.go.html#2785427">Field</a></span><span class="op" id="5396996">(</span><span class="ident" id="5396997"><a href="/gostd/encoding/gob/encode.go.html#5396907">fieldNum</a></span><span class="op" id="5397005">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5397010">if</span>&nbsp;<span class="op" id="5397013">!</span><span class="ident" id="5397014"><a href="/gostd/encoding/gob/type.go.html#5424524">isSent</a></span><span class="op" id="5397020">(</span><span class="op" id="5397021">&amp;</span><span class="ident" id="5397022"><a href="/gostd/encoding/gob/encode.go.html#5396982">f</a></span><span class="op" id="5397023">)</span>&nbsp;<span class="op" id="5397025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5397031">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5397043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397048">op</span><span class="op" id="5397050">,</span>&nbsp;<span class="ident" id="5397052">indir</span>&nbsp;<span class="op" id="5397058">:=</span>&nbsp;<span class="ident" id="5397061"><a href="/gostd/encoding/gob/encode.go.html#5392992">encOpFor</a></span><span class="op" id="5397069">(</span><span class="ident" id="5397070"><a href="/gostd/encoding/gob/encode.go.html#5396982">f</a></span><span class="op" id="5397071">.</span><span class="ident" id="5397072"><a href="/gostd/reflect/type.go.html#2801034">Type</a></span><span class="op" id="5397076">,</span>&nbsp;<span class="ident" id="5397078"><a href="/gostd/encoding/gob/encode.go.html#5396746">seen</a></span><span class="op" id="5397082">,</span>&nbsp;<span class="ident" id="5397084"><a href="/gostd/encoding/gob/encode.go.html#5396661">building</a></span><span class="op" id="5397092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397097"><a href="/gostd/encoding/gob/encode.go.html#5396720">engine</a></span><span class="op" id="5397103">.</span><span class="ident" id="5397104"><a href="/gostd/encoding/gob/encode.go.html#5385881">instr</a></span>&nbsp;<span class="op" id="5397110">=</span>&nbsp;<span class="builtinfunc" id="5397112">append</span><span class="op" id="5397118">(</span><span class="ident" id="5397119"><a href="/gostd/encoding/gob/encode.go.html#5396720">engine</a></span><span class="op" id="5397125">.</span><span class="ident" id="5397126"><a href="/gostd/encoding/gob/encode.go.html#5385881">instr</a></span><span class="op" id="5397131">,</span>&nbsp;<span class="ident" id="5397133"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5397141">{</span><span class="op" id="5397142">*</span><span class="ident" id="5397143"><a href="/gostd/encoding/gob/encode.go.html#5397048">op</a></span><span class="op" id="5397145">,</span>&nbsp;<span class="ident" id="5397147"><a href="/gostd/encoding/gob/encode.go.html#5396917">wireFieldNum</a></span><span class="op" id="5397159">,</span>&nbsp;<span class="ident" id="5397161"><a href="/gostd/encoding/gob/encode.go.html#5396982">f</a></span><span class="op" id="5397162">.</span><span class="ident" id="5397163"><a href="/gostd/reflect/type.go.html#2801165">Index</a></span><span class="op" id="5397168">,</span>&nbsp;<span class="ident" id="5397170"><a href="/gostd/encoding/gob/encode.go.html#5397052">indir</a></span><span class="op" id="5397175">}</span><span class="op" id="5397176">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397181"><a href="/gostd/encoding/gob/encode.go.html#5396917">wireFieldNum</a></span><span class="op" id="5397193">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5397198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5397202">if</span>&nbsp;<span class="ident" id="5397205"><a href="/gostd/encoding/gob/encode.go.html#5396704">srt</a></span><span class="op" id="5397208">.</span><span class="ident" id="5397209"><a href="/gostd/reflect/type.go.html#2786550">NumField</a></span><span class="op" id="5397217">(</span><span class="op" id="5397218">)</span>&nbsp;<span class="op" id="5397220">&gt;</span>&nbsp;<span class="num" id="5397222">0</span>&nbsp;<span class="op" id="5397224">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5397227">len</span><span class="op" id="5397230">(</span><span class="ident" id="5397231"><a href="/gostd/encoding/gob/encode.go.html#5396720">engine</a></span><span class="op" id="5397237">.</span><span class="ident" id="5397238"><a href="/gostd/encoding/gob/encode.go.html#5385881">instr</a></span><span class="op" id="5397243">)</span>&nbsp;<span class="op" id="5397245">==</span>&nbsp;<span class="num" id="5397248">0</span>&nbsp;<span class="op" id="5397250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397255"><a href="/gostd/encoding/gob/error.go.html#5407181">errorf</a></span><span class="op" id="5397261">(</span><span class="string" id="5397262">&#34;type&nbsp;%s&nbsp;has&nbsp;no&nbsp;exported&nbsp;fields&#34;</span><span class="op" id="5397294">,</span>&nbsp;<span class="ident" id="5397296"><a href="/gostd/encoding/gob/encode.go.html#5396785">rt</a></span><span class="op" id="5397298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5397302">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397306"><a href="/gostd/encoding/gob/encode.go.html#5396720">engine</a></span><span class="op" id="5397312">.</span><span class="ident" id="5397313"><a href="/gostd/encoding/gob/encode.go.html#5385881">instr</a></span>&nbsp;<span class="op" id="5397319">=</span>&nbsp;<span class="builtinfunc" id="5397321">append</span><span class="op" id="5397327">(</span><span class="ident" id="5397328"><a href="/gostd/encoding/gob/encode.go.html#5396720">engine</a></span><span class="op" id="5397334">.</span><span class="ident" id="5397335"><a href="/gostd/encoding/gob/encode.go.html#5385881">instr</a></span><span class="op" id="5397340">,</span>&nbsp;<span class="ident" id="5397342"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5397350">{</span><span class="ident" id="5397351"><a href="/gostd/encoding/gob/encode.go.html#5385580">encStructTerminator</a></span><span class="op" id="5397370">,</span>&nbsp;<span class="num" id="5397372">0</span><span class="op" id="5397373">,</span>&nbsp;<span class="builtintype" id="5397375">nil</span><span class="op" id="5397378">,</span>&nbsp;<span class="num" id="5397380">0</span><span class="op" id="5397381">}</span><span class="op" id="5397382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5397385">}</span>&nbsp;<span class="keyword" id="5397387">else</span>&nbsp;<span class="op" id="5397392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397396"><a href="/gostd/encoding/gob/encode.go.html#5396720">engine</a></span><span class="op" id="5397402">.</span><span class="ident" id="5397403"><a href="/gostd/encoding/gob/encode.go.html#5385881">instr</a></span>&nbsp;<span class="op" id="5397409">=</span>&nbsp;<span class="builtinfunc" id="5397411">make</span><span class="op" id="5397415">(</span><span class="op" id="5397416">[</span><span class="op" id="5397417">]</span><span class="ident" id="5397418"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5397426">,</span>&nbsp;<span class="num" id="5397428">1</span><span class="op" id="5397429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397433">op</span><span class="op" id="5397435">,</span>&nbsp;<span class="ident" id="5397437">indir</span>&nbsp;<span class="op" id="5397443">:=</span>&nbsp;<span class="ident" id="5397446"><a href="/gostd/encoding/gob/encode.go.html#5392992">encOpFor</a></span><span class="op" id="5397454">(</span><span class="ident" id="5397455"><a href="/gostd/encoding/gob/encode.go.html#5396785">rt</a></span><span class="op" id="5397457">,</span>&nbsp;<span class="ident" id="5397459"><a href="/gostd/encoding/gob/encode.go.html#5396746">seen</a></span><span class="op" id="5397463">,</span>&nbsp;<span class="ident" id="5397465"><a href="/gostd/encoding/gob/encode.go.html#5396661">building</a></span><span class="op" id="5397473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397477"><a href="/gostd/encoding/gob/encode.go.html#5396720">engine</a></span><span class="op" id="5397483">.</span><span class="ident" id="5397484"><a href="/gostd/encoding/gob/encode.go.html#5385881">instr</a></span><span class="op" id="5397489">[</span><span class="num" id="5397490">0</span><span class="op" id="5397491">]</span>&nbsp;<span class="op" id="5397493">=</span>&nbsp;<span class="ident" id="5397495"><a href="/gostd/encoding/gob/encode.go.html#5381647">encInstr</a></span><span class="op" id="5397503">{</span><span class="op" id="5397504">*</span><span class="ident" id="5397505"><a href="/gostd/encoding/gob/encode.go.html#5397433">op</a></span><span class="op" id="5397507">,</span>&nbsp;<span class="ident" id="5397509"><a href="/gostd/encoding/gob/encode.go.html#5385907">singletonField</a></span><span class="op" id="5397523">,</span>&nbsp;<span class="builtintype" id="5397525">nil</span><span class="op" id="5397528">,</span>&nbsp;<span class="ident" id="5397530"><a href="/gostd/encoding/gob/encode.go.html#5397437">indir</a></span><span class="op" id="5397535">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5397538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5397541">return</span>&nbsp;<span class="ident" id="5397548"><a href="/gostd/encoding/gob/encode.go.html#5396720">engine</a></span><br>
<span class="lineno"></span><span class="op" id="5397555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5397558">//&nbsp;getEncEngine&nbsp;returns&nbsp;the&nbsp;engine&nbsp;to&nbsp;compile&nbsp;the&nbsp;type.</span><br>
<span class="lineno">650</span><span class="keyword" id="5397614">func</span>&nbsp;<span class="ident" id="5397619">getEncEngine</span><span class="op" id="5397631">(</span><span class="ident" id="5397632">ut</span>&nbsp;<span class="op" id="5397635">*</span><span class="ident" id="5397636"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5397648">,</span>&nbsp;<span class="ident" id="5397650">building</span>&nbsp;<span class="keyword" id="5397659">map</span><span class="op" id="5397662">[</span><span class="op" id="5397663">*</span><span class="ident" id="5397664"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5397672">]</span><span class="builtintype" id="5397673">bool</span><span class="op" id="5397677">)</span>&nbsp;<span class="op" id="5397679">*</span><span class="ident" id="5397680"><a href="/gostd/encoding/gob/encode.go.html#5385861">encEngine</a></span>&nbsp;<span class="op" id="5397690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397693">info</span><span class="op" id="5397697">,</span>&nbsp;<span class="ident" id="5397699">err</span>&nbsp;<span class="op" id="5397703">:=</span>&nbsp;<span class="ident" id="5397706"><a href="/gostd/encoding/gob/type.go.html#5428443">getTypeInfo</a></span><span class="op" id="5397717">(</span><span class="ident" id="5397718"><a href="/gostd/encoding/gob/encode.go.html#5397632">ut</a></span><span class="op" id="5397720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5397723">if</span>&nbsp;<span class="ident" id="5397726"><a href="/gostd/encoding/gob/encode.go.html#5397699">err</a></span>&nbsp;<span class="op" id="5397730">!=</span>&nbsp;<span class="builtintype" id="5397733">nil</span>&nbsp;<span class="op" id="5397737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397741"><a href="/gostd/encoding/gob/error.go.html#5407351">error_</a></span><span class="op" id="5397747">(</span><span class="ident" id="5397748"><a href="/gostd/encoding/gob/encode.go.html#5397699">err</a></span><span class="op" id="5397751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5397754">}</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397757">enc</span><span class="op" id="5397760">,</span>&nbsp;<span class="ident" id="5397762">ok</span>&nbsp;<span class="op" id="5397765">:=</span>&nbsp;<span class="ident" id="5397768"><a href="/gostd/encoding/gob/encode.go.html#5397693">info</a></span><span class="op" id="5397772">.</span><span class="ident" id="5397773"><a href="/gostd/encoding/gob/type.go.html#5427862">encoder</a></span><span class="op" id="5397780">.</span><span class="ident" id="5397781"><a href="/gostd/sync/atomic/value.go.html#1469775">Load</a></span><span class="op" id="5397785">(</span><span class="op" id="5397786">)</span><span class="op" id="5397787">.</span><span class="op" id="5397788">(</span><span class="op" id="5397789">*</span><span class="ident" id="5397790"><a href="/gostd/encoding/gob/encode.go.html#5385861">encEngine</a></span><span class="op" id="5397799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5397802">if</span>&nbsp;<span class="op" id="5397805">!</span><span class="ident" id="5397806"><a href="/gostd/encoding/gob/encode.go.html#5397762">ok</a></span>&nbsp;<span class="op" id="5397809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5397813"><a href="/gostd/encoding/gob/encode.go.html#5397757">enc</a></span>&nbsp;<span class="op" id="5397817">=</span>&nbsp;<span class="ident" id="5397819"><a href="/gostd/encoding/gob/encode.go.html#5397877">buildEncEngine</a></span><span class="op" id="5397833">(</span><span class="ident" id="5397834"><a href="/gostd/encoding/gob/encode.go.html#5397693">info</a></span><span class="op" id="5397838">,</span>&nbsp;<span class="ident" id="5397840"><a href="/gostd/encoding/gob/encode.go.html#5397632">ut</a></span><span class="op" id="5397842">,</span>&nbsp;<span class="ident" id="5397844"><a href="/gostd/encoding/gob/encode.go.html#5397650">building</a></span><span class="op" id="5397852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5397855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5397858">return</span>&nbsp;<span class="ident" id="5397865"><a href="/gostd/encoding/gob/encode.go.html#5397757">enc</a></span><br>
<span class="lineno">660</span><span class="op" id="5397869">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5397872">func</span>&nbsp;<span class="ident" id="5397877">buildEncEngine</span><span class="op" id="5397891">(</span><span class="ident" id="5397892">info</span>&nbsp;<span class="op" id="5397897">*</span><span class="ident" id="5397898"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5397906">,</span>&nbsp;<span class="ident" id="5397908">ut</span>&nbsp;<span class="op" id="5397911">*</span><span class="ident" id="5397912"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5397924">,</span>&nbsp;<span class="ident" id="5397926">building</span>&nbsp;<span class="keyword" id="5397935">map</span><span class="op" id="5397938">[</span><span class="op" id="5397939">*</span><span class="ident" id="5397940"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5397948">]</span><span class="builtintype" id="5397949">bool</span><span class="op" id="5397953">)</span>&nbsp;<span class="op" id="5397955">*</span><span class="ident" id="5397956"><a href="/gostd/encoding/gob/encode.go.html#5385861">encEngine</a></span>&nbsp;<span class="op" id="5397966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5397969">//&nbsp;Check&nbsp;for&nbsp;recursive&nbsp;types.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5398000">if</span>&nbsp;<span class="ident" id="5398003"><a href="/gostd/encoding/gob/encode.go.html#5397926">building</a></span>&nbsp;<span class="op" id="5398012">!=</span>&nbsp;<span class="builtintype" id="5398015">nil</span>&nbsp;<span class="op" id="5398019">&amp;&amp;</span>&nbsp;<span class="ident" id="5398022"><a href="/gostd/encoding/gob/encode.go.html#5397926">building</a></span><span class="op" id="5398030">[</span><span class="ident" id="5398031"><a href="/gostd/encoding/gob/encode.go.html#5397892">info</a></span><span class="op" id="5398035">]</span>&nbsp;<span class="op" id="5398037">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5398041">return</span>&nbsp;<span class="builtintype" id="5398048">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5398053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398056"><a href="/gostd/encoding/gob/encode.go.html#5397892">info</a></span><span class="op" id="5398060">.</span><span class="ident" id="5398061"><a href="/gostd/encoding/gob/type.go.html#5427808">encInit</a></span><span class="op" id="5398068">.</span><span class="ident" id="5398069"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="5398073">(</span><span class="op" id="5398074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5398077">defer</span>&nbsp;<span class="ident" id="5398083"><a href="/gostd/encoding/gob/encode.go.html#5397892">info</a></span><span class="op" id="5398087">.</span><span class="ident" id="5398088"><a href="/gostd/encoding/gob/type.go.html#5427808">encInit</a></span><span class="op" id="5398095">.</span><span class="ident" id="5398096"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="5398102">(</span><span class="op" id="5398103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398106">enc</span><span class="op" id="5398109">,</span>&nbsp;<span class="ident" id="5398111">ok</span>&nbsp;<span class="op" id="5398114">:=</span>&nbsp;<span class="ident" id="5398117"><a href="/gostd/encoding/gob/encode.go.html#5397892">info</a></span><span class="op" id="5398121">.</span><span class="ident" id="5398122"><a href="/gostd/encoding/gob/type.go.html#5427862">encoder</a></span><span class="op" id="5398129">.</span><span class="ident" id="5398130"><a href="/gostd/sync/atomic/value.go.html#1469775">Load</a></span><span class="op" id="5398134">(</span><span class="op" id="5398135">)</span><span class="op" id="5398136">.</span><span class="op" id="5398137">(</span><span class="op" id="5398138">*</span><span class="ident" id="5398139"><a href="/gostd/encoding/gob/encode.go.html#5385861">encEngine</a></span><span class="op" id="5398148">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5398151">if</span>&nbsp;<span class="op" id="5398154">!</span><span class="ident" id="5398155"><a href="/gostd/encoding/gob/encode.go.html#5398111">ok</a></span>&nbsp;<span class="op" id="5398158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5398162">if</span>&nbsp;<span class="ident" id="5398165"><a href="/gostd/encoding/gob/encode.go.html#5397926">building</a></span>&nbsp;<span class="op" id="5398174">==</span>&nbsp;<span class="builtintype" id="5398177">nil</span>&nbsp;<span class="op" id="5398181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398186"><a href="/gostd/encoding/gob/encode.go.html#5397926">building</a></span>&nbsp;<span class="op" id="5398195">=</span>&nbsp;<span class="builtinfunc" id="5398197">make</span><span class="op" id="5398201">(</span><span class="keyword" id="5398202">map</span><span class="op" id="5398205">[</span><span class="op" id="5398206">*</span><span class="ident" id="5398207"><a href="/gostd/encoding/gob/type.go.html#5427773">typeInfo</a></span><span class="op" id="5398215">]</span><span class="builtintype" id="5398216">bool</span><span class="op" id="5398220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5398224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398228"><a href="/gostd/encoding/gob/encode.go.html#5397926">building</a></span><span class="op" id="5398236">[</span><span class="ident" id="5398237"><a href="/gostd/encoding/gob/encode.go.html#5397892">info</a></span><span class="op" id="5398241">]</span>&nbsp;<span class="op" id="5398243">=</span>&nbsp;<span class="builtintype" id="5398245">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398252"><a href="/gostd/encoding/gob/encode.go.html#5398106">enc</a></span>&nbsp;<span class="op" id="5398256">=</span>&nbsp;<span class="ident" id="5398258"><a href="/gostd/encoding/gob/encode.go.html#5396632">compileEnc</a></span><span class="op" id="5398268">(</span><span class="ident" id="5398269"><a href="/gostd/encoding/gob/encode.go.html#5397908">ut</a></span><span class="op" id="5398271">,</span>&nbsp;<span class="ident" id="5398273"><a href="/gostd/encoding/gob/encode.go.html#5397926">building</a></span><span class="op" id="5398281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398285"><a href="/gostd/encoding/gob/encode.go.html#5397892">info</a></span><span class="op" id="5398289">.</span><span class="ident" id="5398290"><a href="/gostd/encoding/gob/type.go.html#5427862">encoder</a></span><span class="op" id="5398297">.</span><span class="ident" id="5398298"><a href="/gostd/sync/atomic/value.go.html#1470285">Store</a></span><span class="op" id="5398303">(</span><span class="ident" id="5398304"><a href="/gostd/encoding/gob/encode.go.html#5398106">enc</a></span><span class="op" id="5398307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5398310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5398313">return</span>&nbsp;<span class="ident" id="5398320"><a href="/gostd/encoding/gob/encode.go.html#5398106">enc</a></span><br>
<span class="lineno"></span><span class="op" id="5398324">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="5398327">func</span>&nbsp;<span class="op" id="5398332">(</span><span class="ident" id="5398333">enc</span>&nbsp;<span class="op" id="5398337">*</span><span class="ident" id="5398338"><a href="/gostd/encoding/gob/encoder.go.html#5399090">Encoder</a></span><span class="op" id="5398345">)</span>&nbsp;<span class="ident" id="5398347">encode</span><span class="op" id="5398353">(</span><span class="ident" id="5398354">b</span>&nbsp;<span class="op" id="5398356">*</span><span class="ident" id="5398357"><a href="/gostd/encoding/gob/encode.go.html#5379677">encBuffer</a></span><span class="op" id="5398366">,</span>&nbsp;<span class="ident" id="5398368">value</span>&nbsp;<span class="ident" id="5398374"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5398381">.</span><span class="ident" id="5398382"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="5398387">,</span>&nbsp;<span class="ident" id="5398389">ut</span>&nbsp;<span class="op" id="5398392">*</span><span class="ident" id="5398393"><a href="/gostd/encoding/gob/type.go.html#5408173">userTypeInfo</a></span><span class="op" id="5398405">)</span>&nbsp;<span class="op" id="5398407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5398410">defer</span>&nbsp;<span class="ident" id="5398416"><a href="/gostd/encoding/gob/error.go.html#5407579">catchError</a></span><span class="op" id="5398426">(</span><span class="op" id="5398427">&amp;</span><span class="ident" id="5398428"><a href="/gostd/encoding/gob/encode.go.html#5398333">enc</a></span><span class="op" id="5398431">.</span><span class="ident" id="5398432"><a href="/gostd/encoding/gob/encoder.go.html#5399537">err</a></span><span class="op" id="5398435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398438">engine</span>&nbsp;<span class="op" id="5398445">:=</span>&nbsp;<span class="ident" id="5398448"><a href="/gostd/encoding/gob/encode.go.html#5397619">getEncEngine</a></span><span class="op" id="5398460">(</span><span class="ident" id="5398461"><a href="/gostd/encoding/gob/encode.go.html#5398389">ut</a></span><span class="op" id="5398463">,</span>&nbsp;<span class="builtintype" id="5398465">nil</span><span class="op" id="5398468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398471">indir</span>&nbsp;<span class="op" id="5398477">:=</span>&nbsp;<span class="ident" id="5398480"><a href="/gostd/encoding/gob/encode.go.html#5398389">ut</a></span><span class="op" id="5398482">.</span><span class="ident" id="5398483"><a href="/gostd/encoding/gob/type.go.html#5408319">indir</a></span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5398490">if</span>&nbsp;<span class="ident" id="5398493"><a href="/gostd/encoding/gob/encode.go.html#5398389">ut</a></span><span class="op" id="5398495">.</span><span class="ident" id="5398496"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span>&nbsp;<span class="op" id="5398508">!=</span>&nbsp;<span class="num" id="5398511">0</span>&nbsp;<span class="op" id="5398513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398517"><a href="/gostd/encoding/gob/encode.go.html#5398471">indir</a></span>&nbsp;<span class="op" id="5398523">=</span>&nbsp;<span class="builtintype" id="5398525">int</span><span class="op" id="5398528">(</span><span class="ident" id="5398529"><a href="/gostd/encoding/gob/encode.go.html#5398389">ut</a></span><span class="op" id="5398531">.</span><span class="ident" id="5398532"><a href="/gostd/encoding/gob/type.go.html#5408499">encIndir</a></span><span class="op" id="5398540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5398543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5398546">for</span>&nbsp;<span class="ident" id="5398550">i</span>&nbsp;<span class="op" id="5398552">:=</span>&nbsp;<span class="num" id="5398555">0</span><span class="op" id="5398556">;</span>&nbsp;<span class="ident" id="5398558"><a href="/gostd/encoding/gob/encode.go.html#5398550">i</a></span>&nbsp;<span class="op" id="5398560">&lt;</span>&nbsp;<span class="ident" id="5398562"><a href="/gostd/encoding/gob/encode.go.html#5398471">indir</a></span><span class="op" id="5398567">;</span>&nbsp;<span class="ident" id="5398569"><a href="/gostd/encoding/gob/encode.go.html#5398550">i</a></span><span class="op" id="5398570">++</span>&nbsp;<span class="op" id="5398573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398577"><a href="/gostd/encoding/gob/encode.go.html#5398368">value</a></span>&nbsp;<span class="op" id="5398583">=</span>&nbsp;<span class="ident" id="5398585"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5398592">.</span><span class="ident" id="5398593"><a href="/gostd/reflect/value.go.html#2892316">Indirect</a></span><span class="op" id="5398601">(</span><span class="ident" id="5398602"><a href="/gostd/encoding/gob/encode.go.html#5398368">value</a></span><span class="op" id="5398607">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5398610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5398613">if</span>&nbsp;<span class="ident" id="5398616"><a href="/gostd/encoding/gob/encode.go.html#5398389">ut</a></span><span class="op" id="5398618">.</span><span class="ident" id="5398619"><a href="/gostd/encoding/gob/type.go.html#5408394">externalEnc</a></span>&nbsp;<span class="op" id="5398631">==</span>&nbsp;<span class="num" id="5398634">0</span>&nbsp;<span class="op" id="5398636">&amp;&amp;</span>&nbsp;<span class="ident" id="5398639"><a href="/gostd/encoding/gob/encode.go.html#5398368">value</a></span><span class="op" id="5398644">.</span><span class="ident" id="5398645"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="5398649">(</span><span class="op" id="5398650">)</span><span class="op" id="5398651">.</span><span class="ident" id="5398652"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="5398656">(</span><span class="op" id="5398657">)</span>&nbsp;<span class="op" id="5398659">==</span>&nbsp;<span class="ident" id="5398662"><a href="/gostd/encoding/gob/encode.go.html#5378777">reflect</a></span><span class="op" id="5398669">.</span><span class="ident" id="5398670"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span>&nbsp;<span class="op" id="5398677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398681"><a href="/gostd/encoding/gob/encode.go.html#5398333">enc</a></span><span class="op" id="5398684">.</span><span class="ident" id="5398685"><a href="/gostd/encoding/gob/encode.go.html#5386847">encodeStruct</a></span><span class="op" id="5398697">(</span><span class="ident" id="5398698"><a href="/gostd/encoding/gob/encode.go.html#5398354">b</a></span><span class="op" id="5398699">,</span>&nbsp;<span class="ident" id="5398701"><a href="/gostd/encoding/gob/encode.go.html#5398438">engine</a></span><span class="op" id="5398707">,</span>&nbsp;<span class="ident" id="5398709"><a href="/gostd/encoding/gob/encode.go.html#5398368">value</a></span><span class="op" id="5398714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5398717">}</span>&nbsp;<span class="keyword" id="5398719">else</span>&nbsp;<span class="op" id="5398724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5398728"><a href="/gostd/encoding/gob/encode.go.html#5398333">enc</a></span><span class="op" id="5398731">.</span><span class="ident" id="5398732"><a href="/gostd/encoding/gob/encode.go.html#5386279">encodeSingle</a></span><span class="op" id="5398744">(</span><span class="ident" id="5398745"><a href="/gostd/encoding/gob/encode.go.html#5398354">b</a></span><span class="op" id="5398746">,</span>&nbsp;<span class="ident" id="5398748"><a href="/gostd/encoding/gob/encode.go.html#5398438">engine</a></span><span class="op" id="5398754">,</span>&nbsp;<span class="ident" id="5398756"><a href="/gostd/encoding/gob/encode.go.html#5398368">value</a></span><span class="op" id="5398761">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5398764">}</span><br>
<span class="lineno"></span><span class="op" id="5398766">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
