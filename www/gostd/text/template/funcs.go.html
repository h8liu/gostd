<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template</h2>
<ul>
<li><a href="/gostd/text/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/text/template/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/text/template/examplefiles_test.go.html">examplefiles_test.go</a></li>
<li><a href="/gostd/text/template/examplefunc_test.go.html">examplefunc_test.go</a></li>
<li><a href="/gostd/text/template/exec.go.html">exec.go</a></li>
<li><a href="/gostd/text/template/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/text/template/funcs.go.html" class="current">funcs.go</a></li>
<li><a href="/gostd/text/template/helper.go.html">helper.go</a></li>
<li><a href="/gostd/text/template/multi_test.go.html">multi_test.go</a></li>
<li><a href="/gostd/text/template/template.go.html">template.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4598818">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4598873">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4598927">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4598978">package</span>&nbsp;<span class="ident" id="4598986">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4598996">import</span>&nbsp;<span class="op" id="4599003">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599006">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599015">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599025">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599032">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599038">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599049">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599060">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599071">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599082">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4599097">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4599100">//&nbsp;FuncMap&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;map&nbsp;defining&nbsp;the&nbsp;mapping&nbsp;from&nbsp;names&nbsp;to&nbsp;functions.</span><br>
<span class="lineno">20</span><span class="comment" id="4599180">//&nbsp;Each&nbsp;function&nbsp;must&nbsp;have&nbsp;either&nbsp;a&nbsp;single&nbsp;return&nbsp;value,&nbsp;or&nbsp;two&nbsp;return&nbsp;values&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4599261">//&nbsp;which&nbsp;the&nbsp;second&nbsp;has&nbsp;type&nbsp;error.&nbsp;In&nbsp;that&nbsp;case,&nbsp;if&nbsp;the&nbsp;second&nbsp;(error)</span><br>
<span class="lineno"></span><span class="comment" id="4599333">//&nbsp;return&nbsp;value&nbsp;evaluates&nbsp;to&nbsp;non-nil&nbsp;during&nbsp;execution,&nbsp;execution&nbsp;terminates&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4599413">//&nbsp;Execute&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4599444">type</span>&nbsp;<span class="ident" id="4599449">FuncMap</span>&nbsp;<span class="keyword" id="4599457">map</span><span class="op" id="4599460">[</span><span class="builtintype" id="4599461">string</span><span class="op" id="4599467">]</span><span class="keyword" id="4599468">interface</span><span class="op" id="4599477">{</span><span class="op" id="4599478">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="4599481">var</span>&nbsp;<span class="ident" id="4599485">builtins</span>&nbsp;<span class="op" id="4599494">=</span>&nbsp;<span class="ident" id="4599496">FuncMap</span><span class="op" id="4599503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599506">&#34;and&#34;</span><span class="op" id="4599511">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4599518">and</span><span class="op" id="4599521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599524">&#34;call&#34;</span><span class="op" id="4599530">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4599536">call</span><span class="op" id="4599540">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599543">&#34;html&#34;</span><span class="op" id="4599549">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4599555">HTMLEscaper</span><span class="op" id="4599566">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599569">&#34;index&#34;</span><span class="op" id="4599576">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4599581">index</span><span class="op" id="4599586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599589">&#34;js&#34;</span><span class="op" id="4599593">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4599601">JSEscaper</span><span class="op" id="4599610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599613">&#34;len&#34;</span><span class="op" id="4599618">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4599625">length</span><span class="op" id="4599631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599634">&#34;not&#34;</span><span class="op" id="4599639">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4599646">not</span><span class="op" id="4599649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599652">&#34;or&#34;</span><span class="op" id="4599656">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4599664">or</span><span class="op" id="4599666">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599669">&#34;print&#34;</span><span class="op" id="4599676">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4599681">fmt</span><span class="op" id="4599684">.</span><span class="ident" id="4599685">Sprint</span><span class="op" id="4599691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599694">&#34;printf&#34;</span><span class="op" id="4599702">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4599706">fmt</span><span class="op" id="4599709">.</span><span class="ident" id="4599710">Sprintf</span><span class="op" id="4599717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599720">&#34;println&#34;</span><span class="op" id="4599729">:</span>&nbsp;&nbsp;<span class="ident" id="4599732">fmt</span><span class="op" id="4599735">.</span><span class="ident" id="4599736">Sprintln</span><span class="op" id="4599744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599747">&#34;urlquery&#34;</span><span class="op" id="4599757">:</span>&nbsp;<span class="ident" id="4599759">URLQueryEscaper</span><span class="op" id="4599774">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4599778">//&nbsp;Comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599794">&#34;eq&#34;</span><span class="op" id="4599798">:</span>&nbsp;<span class="ident" id="4599800">eq</span><span class="op" id="4599802">,</span>&nbsp;<span class="comment" id="4599804">//&nbsp;==</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599811">&#34;ge&#34;</span><span class="op" id="4599815">:</span>&nbsp;<span class="ident" id="4599817">ge</span><span class="op" id="4599819">,</span>&nbsp;<span class="comment" id="4599821">//&nbsp;&gt;=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599828">&#34;gt&#34;</span><span class="op" id="4599832">:</span>&nbsp;<span class="ident" id="4599834">gt</span><span class="op" id="4599836">,</span>&nbsp;<span class="comment" id="4599838">//&nbsp;&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599844">&#34;le&#34;</span><span class="op" id="4599848">:</span>&nbsp;<span class="ident" id="4599850">le</span><span class="op" id="4599852">,</span>&nbsp;<span class="comment" id="4599854">//&nbsp;&lt;=</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599861">&#34;lt&#34;</span><span class="op" id="4599865">:</span>&nbsp;<span class="ident" id="4599867">lt</span><span class="op" id="4599869">,</span>&nbsp;<span class="comment" id="4599871">//&nbsp;&lt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4599877">&#34;ne&#34;</span><span class="op" id="4599881">:</span>&nbsp;<span class="ident" id="4599883">ne</span><span class="op" id="4599885">,</span>&nbsp;<span class="comment" id="4599887">//&nbsp;!=</span><br>
<span class="lineno"></span><span class="op" id="4599893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4599896">var</span>&nbsp;<span class="ident" id="4599900">builtinFuncs</span>&nbsp;<span class="op" id="4599913">=</span>&nbsp;<span class="ident" id="4599915">createValueFuncs</span><span class="op" id="4599931">(</span><span class="ident" id="4599932">builtins</span><span class="op" id="4599940">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="4599943">//&nbsp;createValueFuncs&nbsp;turns&nbsp;a&nbsp;FuncMap&nbsp;into&nbsp;a&nbsp;map[string]reflect.Value</span><br>
<span class="lineno"></span><span class="keyword" id="4600011">func</span>&nbsp;<span class="ident" id="4600016">createValueFuncs</span><span class="op" id="4600032">(</span><span class="ident" id="4600033">funcMap</span>&nbsp;<span class="ident" id="4600041">FuncMap</span><span class="op" id="4600048">)</span>&nbsp;<span class="keyword" id="4600050">map</span><span class="op" id="4600053">[</span><span class="builtintype" id="4600054">string</span><span class="op" id="4600060">]</span><span class="ident" id="4600061">reflect</span><span class="op" id="4600068">.</span><span class="ident" id="4600069">Value</span>&nbsp;<span class="op" id="4600075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4600078">m</span>&nbsp;<span class="op" id="4600080">:=</span>&nbsp;<span class="builtinfunc" id="4600083">make</span><span class="op" id="4600087">(</span><span class="keyword" id="4600088">map</span><span class="op" id="4600091">[</span><span class="builtintype" id="4600092">string</span><span class="op" id="4600098">]</span><span class="ident" id="4600099">reflect</span><span class="op" id="4600106">.</span><span class="ident" id="4600107">Value</span><span class="op" id="4600112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4600115">addValueFuncs</span><span class="op" id="4600128">(</span><span class="ident" id="4600129">m</span><span class="op" id="4600130">,</span>&nbsp;<span class="ident" id="4600132">funcMap</span><span class="op" id="4600139">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4600142">return</span>&nbsp;<span class="ident" id="4600149">m</span><br>
<span class="lineno"></span><span class="op" id="4600151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4600154">//&nbsp;addValueFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs,&nbsp;converting&nbsp;them&nbsp;to&nbsp;reflect.Values.</span><br>
<span class="lineno"></span><span class="keyword" id="4600245">func</span>&nbsp;<span class="ident" id="4600250">addValueFuncs</span><span class="op" id="4600263">(</span><span class="ident" id="4600264">out</span>&nbsp;<span class="keyword" id="4600268">map</span><span class="op" id="4600271">[</span><span class="builtintype" id="4600272">string</span><span class="op" id="4600278">]</span><span class="ident" id="4600279">reflect</span><span class="op" id="4600286">.</span><span class="ident" id="4600287">Value</span><span class="op" id="4600292">,</span>&nbsp;<span class="ident" id="4600294">in</span>&nbsp;<span class="ident" id="4600297">FuncMap</span><span class="op" id="4600304">)</span>&nbsp;<span class="op" id="4600306">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4600309">for</span>&nbsp;<span class="ident" id="4600313">name</span><span class="op" id="4600317">,</span>&nbsp;<span class="ident" id="4600319">fn</span>&nbsp;<span class="op" id="4600322">:=</span>&nbsp;<span class="keyword" id="4600325">range</span>&nbsp;<span class="ident" id="4600331">in</span>&nbsp;<span class="op" id="4600334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4600338">v</span>&nbsp;<span class="op" id="4600340">:=</span>&nbsp;<span class="ident" id="4600343">reflect</span><span class="op" id="4600350">.</span><span class="ident" id="4600351">ValueOf</span><span class="op" id="4600358">(</span><span class="ident" id="4600359">fn</span><span class="op" id="4600361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4600365">if</span>&nbsp;<span class="ident" id="4600368">v</span><span class="op" id="4600369">.</span><span class="ident" id="4600370">Kind</span><span class="op" id="4600374">(</span><span class="op" id="4600375">)</span>&nbsp;<span class="op" id="4600377">!=</span>&nbsp;<span class="ident" id="4600380">reflect</span><span class="op" id="4600387">.</span><span class="ident" id="4600388">Func</span>&nbsp;<span class="op" id="4600393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4600398">panic</span><span class="op" id="4600403">(</span><span class="string" id="4600404">&#34;value&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="4600417">+</span>&nbsp;<span class="ident" id="4600419">name</span>&nbsp;<span class="op" id="4600424">+</span>&nbsp;<span class="string" id="4600426">&#34;&nbsp;not&nbsp;a&nbsp;function&#34;</span><span class="op" id="4600443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4600447">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4600451">if</span>&nbsp;<span class="op" id="4600454">!</span><span class="ident" id="4600455">goodFunc</span><span class="op" id="4600463">(</span><span class="ident" id="4600464">v</span><span class="op" id="4600465">.</span><span class="ident" id="4600466">Type</span><span class="op" id="4600470">(</span><span class="op" id="4600471">)</span><span class="op" id="4600472">)</span>&nbsp;<span class="op" id="4600474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4600479">panic</span><span class="op" id="4600484">(</span><span class="ident" id="4600485">fmt</span><span class="op" id="4600488">.</span><span class="ident" id="4600489">Errorf</span><span class="op" id="4600495">(</span><span class="string" id="4600496">&#34;can&#39;t&nbsp;install&nbsp;method/function&nbsp;%q&nbsp;with&nbsp;%d&nbsp;results&#34;</span><span class="op" id="4600546">,</span>&nbsp;<span class="ident" id="4600548">name</span><span class="op" id="4600552">,</span>&nbsp;<span class="ident" id="4600554">v</span><span class="op" id="4600555">.</span><span class="ident" id="4600556">Type</span><span class="op" id="4600560">(</span><span class="op" id="4600561">)</span><span class="op" id="4600562">.</span><span class="ident" id="4600563">NumOut</span><span class="op" id="4600569">(</span><span class="op" id="4600570">)</span><span class="op" id="4600571">)</span><span class="op" id="4600572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4600576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4600580">out</span><span class="op" id="4600583">[</span><span class="ident" id="4600584">name</span><span class="op" id="4600588">]</span>&nbsp;<span class="op" id="4600590">=</span>&nbsp;<span class="ident" id="4600592">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4600595">}</span><br>
<span class="lineno">70</span><span class="op" id="4600597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4600600">//&nbsp;addFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs.&nbsp;It&nbsp;does&nbsp;no&nbsp;checking&nbsp;of&nbsp;the&nbsp;input&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="4600686">//&nbsp;call&nbsp;addValueFuncs&nbsp;first.</span><br>
<span class="lineno"></span><span class="keyword" id="4600715">func</span>&nbsp;<span class="ident" id="4600720">addFuncs</span><span class="op" id="4600728">(</span><span class="ident" id="4600729">out</span><span class="op" id="4600732">,</span>&nbsp;<span class="ident" id="4600734">in</span>&nbsp;<span class="ident" id="4600737">FuncMap</span><span class="op" id="4600744">)</span>&nbsp;<span class="op" id="4600746">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4600749">for</span>&nbsp;<span class="ident" id="4600753">name</span><span class="op" id="4600757">,</span>&nbsp;<span class="ident" id="4600759">fn</span>&nbsp;<span class="op" id="4600762">:=</span>&nbsp;<span class="keyword" id="4600765">range</span>&nbsp;<span class="ident" id="4600771">in</span>&nbsp;<span class="op" id="4600774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4600778">out</span><span class="op" id="4600781">[</span><span class="ident" id="4600782">name</span><span class="op" id="4600786">]</span>&nbsp;<span class="op" id="4600788">=</span>&nbsp;<span class="ident" id="4600790">fn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4600794">}</span><br>
<span class="lineno"></span><span class="op" id="4600796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="4600799">//&nbsp;goodFunc&nbsp;checks&nbsp;that&nbsp;the&nbsp;function&nbsp;or&nbsp;method&nbsp;has&nbsp;the&nbsp;right&nbsp;result&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="4600878">func</span>&nbsp;<span class="ident" id="4600883">goodFunc</span><span class="op" id="4600891">(</span><span class="ident" id="4600892">typ</span>&nbsp;<span class="ident" id="4600896">reflect</span><span class="op" id="4600903">.</span><span class="ident" id="4600904">Type</span><span class="op" id="4600908">)</span>&nbsp;<span class="builtintype" id="4600910">bool</span>&nbsp;<span class="op" id="4600915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4600918">//&nbsp;We&nbsp;allow&nbsp;functions&nbsp;with&nbsp;1&nbsp;result&nbsp;or&nbsp;2&nbsp;results&nbsp;where&nbsp;the&nbsp;second&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4600998">switch</span>&nbsp;<span class="op" id="4601005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601008">case</span>&nbsp;<span class="ident" id="4601013">typ</span><span class="op" id="4601016">.</span><span class="ident" id="4601017">NumOut</span><span class="op" id="4601023">(</span><span class="op" id="4601024">)</span>&nbsp;<span class="op" id="4601026">==</span>&nbsp;<span class="num" id="4601029">1</span><span class="op" id="4601030">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601034">return</span>&nbsp;<span class="builtintype" id="4601041">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601047">case</span>&nbsp;<span class="ident" id="4601052">typ</span><span class="op" id="4601055">.</span><span class="ident" id="4601056">NumOut</span><span class="op" id="4601062">(</span><span class="op" id="4601063">)</span>&nbsp;<span class="op" id="4601065">==</span>&nbsp;<span class="num" id="4601068">2</span>&nbsp;<span class="op" id="4601070">&amp;&amp;</span>&nbsp;<span class="ident" id="4601073">typ</span><span class="op" id="4601076">.</span><span class="ident" id="4601077">Out</span><span class="op" id="4601080">(</span><span class="num" id="4601081">1</span><span class="op" id="4601082">)</span>&nbsp;<span class="op" id="4601084">==</span>&nbsp;<span class="ident" id="4601087">errorType</span><span class="op" id="4601096">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601100">return</span>&nbsp;<span class="builtintype" id="4601107">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4601113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601116">return</span>&nbsp;<span class="builtintype" id="4601123">false</span><br>
<span class="lineno">90</span><span class="op" id="4601129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4601132">//&nbsp;findFunction&nbsp;looks&nbsp;for&nbsp;a&nbsp;function&nbsp;in&nbsp;the&nbsp;template,&nbsp;and&nbsp;global&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="4601202">func</span>&nbsp;<span class="ident" id="4601207">findFunction</span><span class="op" id="4601219">(</span><span class="ident" id="4601220">name</span>&nbsp;<span class="builtintype" id="4601225">string</span><span class="op" id="4601231">,</span>&nbsp;<span class="ident" id="4601233">tmpl</span>&nbsp;<span class="op" id="4601238">*</span><span class="ident" id="4601239">Template</span><span class="op" id="4601247">)</span>&nbsp;<span class="op" id="4601249">(</span><span class="ident" id="4601250">reflect</span><span class="op" id="4601257">.</span><span class="ident" id="4601258">Value</span><span class="op" id="4601263">,</span>&nbsp;<span class="builtintype" id="4601265">bool</span><span class="op" id="4601269">)</span>&nbsp;<span class="op" id="4601271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601274">if</span>&nbsp;<span class="ident" id="4601277">tmpl</span>&nbsp;<span class="op" id="4601282">!=</span>&nbsp;<span class="builtintype" id="4601285">nil</span>&nbsp;<span class="op" id="4601289">&amp;&amp;</span>&nbsp;<span class="ident" id="4601292">tmpl</span><span class="op" id="4601296">.</span><span class="ident" id="4601297">common</span>&nbsp;<span class="op" id="4601304">!=</span>&nbsp;<span class="builtintype" id="4601307">nil</span>&nbsp;<span class="op" id="4601311">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601315">if</span>&nbsp;<span class="ident" id="4601318">fn</span>&nbsp;<span class="op" id="4601321">:=</span>&nbsp;<span class="ident" id="4601324">tmpl</span><span class="op" id="4601328">.</span><span class="ident" id="4601329">execFuncs</span><span class="op" id="4601338">[</span><span class="ident" id="4601339">name</span><span class="op" id="4601343">]</span><span class="op" id="4601344">;</span>&nbsp;<span class="ident" id="4601346">fn</span><span class="op" id="4601348">.</span><span class="ident" id="4601349">IsValid</span><span class="op" id="4601356">(</span><span class="op" id="4601357">)</span>&nbsp;<span class="op" id="4601359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601364">return</span>&nbsp;<span class="ident" id="4601371">fn</span><span class="op" id="4601373">,</span>&nbsp;<span class="builtintype" id="4601375">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4601382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4601385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601388">if</span>&nbsp;<span class="ident" id="4601391">fn</span>&nbsp;<span class="op" id="4601394">:=</span>&nbsp;<span class="ident" id="4601397">builtinFuncs</span><span class="op" id="4601409">[</span><span class="ident" id="4601410">name</span><span class="op" id="4601414">]</span><span class="op" id="4601415">;</span>&nbsp;<span class="ident" id="4601417">fn</span><span class="op" id="4601419">.</span><span class="ident" id="4601420">IsValid</span><span class="op" id="4601427">(</span><span class="op" id="4601428">)</span>&nbsp;<span class="op" id="4601430">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601434">return</span>&nbsp;<span class="ident" id="4601441">fn</span><span class="op" id="4601443">,</span>&nbsp;<span class="builtintype" id="4601445">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4601451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601454">return</span>&nbsp;<span class="ident" id="4601461">reflect</span><span class="op" id="4601468">.</span><span class="ident" id="4601469">Value</span><span class="op" id="4601474">{</span><span class="op" id="4601475">}</span><span class="op" id="4601476">,</span>&nbsp;<span class="builtintype" id="4601478">false</span><br>
<span class="lineno"></span><span class="op" id="4601484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="4601487">//&nbsp;Indexing.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4601501">//&nbsp;index&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;indexing&nbsp;its&nbsp;first&nbsp;argument&nbsp;by&nbsp;the&nbsp;following</span><br>
<span class="lineno"></span><span class="comment" id="4601577">//&nbsp;arguments.&nbsp;&nbsp;Thus&nbsp;&#34;index&nbsp;x&nbsp;1&nbsp;2&nbsp;3&#34;&nbsp;is,&nbsp;in&nbsp;Go&nbsp;syntax,&nbsp;x[1][2][3].&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="4601648">//&nbsp;indexed&nbsp;item&nbsp;must&nbsp;be&nbsp;a&nbsp;map,&nbsp;slice,&nbsp;or&nbsp;array.</span><br>
<span class="lineno">110</span><span class="keyword" id="4601696">func</span>&nbsp;<span class="ident" id="4601701">index</span><span class="op" id="4601706">(</span><span class="ident" id="4601707">item</span>&nbsp;<span class="keyword" id="4601712">interface</span><span class="op" id="4601721">{</span><span class="op" id="4601722">}</span><span class="op" id="4601723">,</span>&nbsp;<span class="ident" id="4601725">indices</span>&nbsp;<span class="op" id="4601733">...</span><span class="keyword" id="4601736">interface</span><span class="op" id="4601745">{</span><span class="op" id="4601746">}</span><span class="op" id="4601747">)</span>&nbsp;<span class="op" id="4601749">(</span><span class="keyword" id="4601750">interface</span><span class="op" id="4601759">{</span><span class="op" id="4601760">}</span><span class="op" id="4601761">,</span>&nbsp;<span class="builtintype" id="4601763">error</span><span class="op" id="4601768">)</span>&nbsp;<span class="op" id="4601770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4601773">v</span>&nbsp;<span class="op" id="4601775">:=</span>&nbsp;<span class="ident" id="4601778">reflect</span><span class="op" id="4601785">.</span><span class="ident" id="4601786">ValueOf</span><span class="op" id="4601793">(</span><span class="ident" id="4601794">item</span><span class="op" id="4601798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601801">for</span>&nbsp;<span class="ident" id="4601805">_</span><span class="op" id="4601806">,</span>&nbsp;<span class="ident" id="4601808">i</span>&nbsp;<span class="op" id="4601810">:=</span>&nbsp;<span class="keyword" id="4601813">range</span>&nbsp;<span class="ident" id="4601819">indices</span>&nbsp;<span class="op" id="4601827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4601831">index</span>&nbsp;<span class="op" id="4601837">:=</span>&nbsp;<span class="ident" id="4601840">reflect</span><span class="op" id="4601847">.</span><span class="ident" id="4601848">ValueOf</span><span class="op" id="4601855">(</span><span class="ident" id="4601856">i</span><span class="op" id="4601857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601861">var</span>&nbsp;<span class="ident" id="4601865">isNil</span>&nbsp;<span class="builtintype" id="4601871">bool</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601878">if</span>&nbsp;<span class="ident" id="4601881">v</span><span class="op" id="4601882">,</span>&nbsp;<span class="ident" id="4601884">isNil</span>&nbsp;<span class="op" id="4601890">=</span>&nbsp;<span class="ident" id="4601892">indirect</span><span class="op" id="4601900">(</span><span class="ident" id="4601901">v</span><span class="op" id="4601902">)</span><span class="op" id="4601903">;</span>&nbsp;<span class="ident" id="4601905">isNil</span>&nbsp;<span class="op" id="4601911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601916">return</span>&nbsp;<span class="builtintype" id="4601923">nil</span><span class="op" id="4601926">,</span>&nbsp;<span class="ident" id="4601928">fmt</span><span class="op" id="4601931">.</span><span class="ident" id="4601932">Errorf</span><span class="op" id="4601938">(</span><span class="string" id="4601939">&#34;index&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="4601961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4601965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601969">switch</span>&nbsp;<span class="ident" id="4601976">v</span><span class="op" id="4601977">.</span><span class="ident" id="4601978">Kind</span><span class="op" id="4601982">(</span><span class="op" id="4601983">)</span>&nbsp;<span class="op" id="4601985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4601989">case</span>&nbsp;<span class="ident" id="4601994">reflect</span><span class="op" id="4602001">.</span><span class="ident" id="4602002">Array</span><span class="op" id="4602007">,</span>&nbsp;<span class="ident" id="4602009">reflect</span><span class="op" id="4602016">.</span><span class="ident" id="4602017">Slice</span><span class="op" id="4602022">,</span>&nbsp;<span class="ident" id="4602024">reflect</span><span class="op" id="4602031">.</span><span class="ident" id="4602032">String</span><span class="op" id="4602038">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602043">var</span>&nbsp;<span class="ident" id="4602047">x</span>&nbsp;<span class="ident" id="4602049">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602058">switch</span>&nbsp;<span class="ident" id="4602065">index</span><span class="op" id="4602070">.</span><span class="ident" id="4602071">Kind</span><span class="op" id="4602075">(</span><span class="op" id="4602076">)</span>&nbsp;<span class="op" id="4602078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602083">case</span>&nbsp;<span class="ident" id="4602088">reflect</span><span class="op" id="4602095">.</span><span class="ident" id="4602096">Int</span><span class="op" id="4602099">,</span>&nbsp;<span class="ident" id="4602101">reflect</span><span class="op" id="4602108">.</span><span class="ident" id="4602109">Int8</span><span class="op" id="4602113">,</span>&nbsp;<span class="ident" id="4602115">reflect</span><span class="op" id="4602122">.</span><span class="ident" id="4602123">Int16</span><span class="op" id="4602128">,</span>&nbsp;<span class="ident" id="4602130">reflect</span><span class="op" id="4602137">.</span><span class="ident" id="4602138">Int32</span><span class="op" id="4602143">,</span>&nbsp;<span class="ident" id="4602145">reflect</span><span class="op" id="4602152">.</span><span class="ident" id="4602153">Int64</span><span class="op" id="4602158">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4602164">x</span>&nbsp;<span class="op" id="4602166">=</span>&nbsp;<span class="ident" id="4602168">index</span><span class="op" id="4602173">.</span><span class="ident" id="4602174">Int</span><span class="op" id="4602177">(</span><span class="op" id="4602178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602183">case</span>&nbsp;<span class="ident" id="4602188">reflect</span><span class="op" id="4602195">.</span><span class="ident" id="4602196">Uint</span><span class="op" id="4602200">,</span>&nbsp;<span class="ident" id="4602202">reflect</span><span class="op" id="4602209">.</span><span class="ident" id="4602210">Uint8</span><span class="op" id="4602215">,</span>&nbsp;<span class="ident" id="4602217">reflect</span><span class="op" id="4602224">.</span><span class="ident" id="4602225">Uint16</span><span class="op" id="4602231">,</span>&nbsp;<span class="ident" id="4602233">reflect</span><span class="op" id="4602240">.</span><span class="ident" id="4602241">Uint32</span><span class="op" id="4602247">,</span>&nbsp;<span class="ident" id="4602249">reflect</span><span class="op" id="4602256">.</span><span class="ident" id="4602257">Uint64</span><span class="op" id="4602263">,</span>&nbsp;<span class="ident" id="4602265">reflect</span><span class="op" id="4602272">.</span><span class="ident" id="4602273">Uintptr</span><span class="op" id="4602280">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4602286">x</span>&nbsp;<span class="op" id="4602288">=</span>&nbsp;<span class="ident" id="4602290">int64</span><span class="op" id="4602295">(</span><span class="ident" id="4602296">index</span><span class="op" id="4602301">.</span><span class="ident" id="4602302">Uint</span><span class="op" id="4602306">(</span><span class="op" id="4602307">)</span><span class="op" id="4602308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602313">default</span><span class="op" id="4602320">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602326">return</span>&nbsp;<span class="builtintype" id="4602333">nil</span><span class="op" id="4602336">,</span>&nbsp;<span class="ident" id="4602338">fmt</span><span class="op" id="4602341">.</span><span class="ident" id="4602342">Errorf</span><span class="op" id="4602348">(</span><span class="string" id="4602349">&#34;cannot&nbsp;index&nbsp;slice/array&nbsp;with&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4602388">,</span>&nbsp;<span class="ident" id="4602390">index</span><span class="op" id="4602395">.</span><span class="ident" id="4602396">Type</span><span class="op" id="4602400">(</span><span class="op" id="4602401">)</span><span class="op" id="4602402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4602407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602412">if</span>&nbsp;<span class="ident" id="4602415">x</span>&nbsp;<span class="op" id="4602417">&lt;</span>&nbsp;<span class="num" id="4602419">0</span>&nbsp;<span class="op" id="4602421">||</span>&nbsp;<span class="ident" id="4602424">x</span>&nbsp;<span class="op" id="4602426">&gt;=</span>&nbsp;<span class="ident" id="4602429">int64</span><span class="op" id="4602434">(</span><span class="ident" id="4602435">v</span><span class="op" id="4602436">.</span><span class="ident" id="4602437">Len</span><span class="op" id="4602440">(</span><span class="op" id="4602441">)</span><span class="op" id="4602442">)</span>&nbsp;<span class="op" id="4602444">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602450">return</span>&nbsp;<span class="builtintype" id="4602457">nil</span><span class="op" id="4602460">,</span>&nbsp;<span class="ident" id="4602462">fmt</span><span class="op" id="4602465">.</span><span class="ident" id="4602466">Errorf</span><span class="op" id="4602472">(</span><span class="string" id="4602473">&#34;index&nbsp;out&nbsp;of&nbsp;range:&nbsp;%d&#34;</span><span class="op" id="4602497">,</span>&nbsp;<span class="ident" id="4602499">x</span><span class="op" id="4602500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4602505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4602510">v</span>&nbsp;<span class="op" id="4602512">=</span>&nbsp;<span class="ident" id="4602514">v</span><span class="op" id="4602515">.</span><span class="ident" id="4602516">Index</span><span class="op" id="4602521">(</span><span class="builtintype" id="4602522">int</span><span class="op" id="4602525">(</span><span class="ident" id="4602526">x</span><span class="op" id="4602527">)</span><span class="op" id="4602528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602532">case</span>&nbsp;<span class="ident" id="4602537">reflect</span><span class="op" id="4602544">.</span><span class="ident" id="4602545">Map</span><span class="op" id="4602548">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602553">if</span>&nbsp;<span class="op" id="4602556">!</span><span class="ident" id="4602557">index</span><span class="op" id="4602562">.</span><span class="ident" id="4602563">IsValid</span><span class="op" id="4602570">(</span><span class="op" id="4602571">)</span>&nbsp;<span class="op" id="4602573">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4602579">index</span>&nbsp;<span class="op" id="4602585">=</span>&nbsp;<span class="ident" id="4602587">reflect</span><span class="op" id="4602594">.</span><span class="ident" id="4602595">Zero</span><span class="op" id="4602599">(</span><span class="ident" id="4602600">v</span><span class="op" id="4602601">.</span><span class="ident" id="4602602">Type</span><span class="op" id="4602606">(</span><span class="op" id="4602607">)</span><span class="op" id="4602608">.</span><span class="ident" id="4602609">Key</span><span class="op" id="4602612">(</span><span class="op" id="4602613">)</span><span class="op" id="4602614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4602619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602624">if</span>&nbsp;<span class="op" id="4602627">!</span><span class="ident" id="4602628">index</span><span class="op" id="4602633">.</span><span class="ident" id="4602634">Type</span><span class="op" id="4602638">(</span><span class="op" id="4602639">)</span><span class="op" id="4602640">.</span><span class="ident" id="4602641">AssignableTo</span><span class="op" id="4602653">(</span><span class="ident" id="4602654">v</span><span class="op" id="4602655">.</span><span class="ident" id="4602656">Type</span><span class="op" id="4602660">(</span><span class="op" id="4602661">)</span><span class="op" id="4602662">.</span><span class="ident" id="4602663">Key</span><span class="op" id="4602666">(</span><span class="op" id="4602667">)</span><span class="op" id="4602668">)</span>&nbsp;<span class="op" id="4602670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602676">return</span>&nbsp;<span class="builtintype" id="4602683">nil</span><span class="op" id="4602686">,</span>&nbsp;<span class="ident" id="4602688">fmt</span><span class="op" id="4602691">.</span><span class="ident" id="4602692">Errorf</span><span class="op" id="4602698">(</span><span class="string" id="4602699">&#34;%s&nbsp;is&nbsp;not&nbsp;index&nbsp;type&nbsp;for&nbsp;%s&#34;</span><span class="op" id="4602728">,</span>&nbsp;<span class="ident" id="4602730">index</span><span class="op" id="4602735">.</span><span class="ident" id="4602736">Type</span><span class="op" id="4602740">(</span><span class="op" id="4602741">)</span><span class="op" id="4602742">,</span>&nbsp;<span class="ident" id="4602744">v</span><span class="op" id="4602745">.</span><span class="ident" id="4602746">Type</span><span class="op" id="4602750">(</span><span class="op" id="4602751">)</span><span class="op" id="4602752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4602757">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602762">if</span>&nbsp;<span class="ident" id="4602765">x</span>&nbsp;<span class="op" id="4602767">:=</span>&nbsp;<span class="ident" id="4602770">v</span><span class="op" id="4602771">.</span><span class="ident" id="4602772">MapIndex</span><span class="op" id="4602780">(</span><span class="ident" id="4602781">index</span><span class="op" id="4602786">)</span><span class="op" id="4602787">;</span>&nbsp;<span class="ident" id="4602789">x</span><span class="op" id="4602790">.</span><span class="ident" id="4602791">IsValid</span><span class="op" id="4602798">(</span><span class="op" id="4602799">)</span>&nbsp;<span class="op" id="4602801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4602807">v</span>&nbsp;<span class="op" id="4602809">=</span>&nbsp;<span class="ident" id="4602811">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4602816">}</span>&nbsp;<span class="keyword" id="4602818">else</span>&nbsp;<span class="op" id="4602823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4602829">v</span>&nbsp;<span class="op" id="4602831">=</span>&nbsp;<span class="ident" id="4602833">reflect</span><span class="op" id="4602840">.</span><span class="ident" id="4602841">Zero</span><span class="op" id="4602845">(</span><span class="ident" id="4602846">v</span><span class="op" id="4602847">.</span><span class="ident" id="4602848">Type</span><span class="op" id="4602852">(</span><span class="op" id="4602853">)</span><span class="op" id="4602854">.</span><span class="ident" id="4602855">Elem</span><span class="op" id="4602859">(</span><span class="op" id="4602860">)</span><span class="op" id="4602861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4602866">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602870">default</span><span class="op" id="4602877">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602882">return</span>&nbsp;<span class="builtintype" id="4602889">nil</span><span class="op" id="4602892">,</span>&nbsp;<span class="ident" id="4602894">fmt</span><span class="op" id="4602897">.</span><span class="ident" id="4602898">Errorf</span><span class="op" id="4602904">(</span><span class="string" id="4602905">&#34;can&#39;t&nbsp;index&nbsp;item&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4602934">,</span>&nbsp;<span class="ident" id="4602936">v</span><span class="op" id="4602937">.</span><span class="ident" id="4602938">Type</span><span class="op" id="4602942">(</span><span class="op" id="4602943">)</span><span class="op" id="4602944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4602948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4602951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4602954">return</span>&nbsp;<span class="ident" id="4602961">v</span><span class="op" id="4602962">.</span><span class="ident" id="4602963">Interface</span><span class="op" id="4602972">(</span><span class="op" id="4602973">)</span><span class="op" id="4602974">,</span>&nbsp;<span class="builtintype" id="4602976">nil</span><br>
<span class="lineno">150</span><span class="op" id="4602980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4602983">//&nbsp;Length</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4602994">//&nbsp;length&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;item,&nbsp;with&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;has&nbsp;no&nbsp;defined&nbsp;length.</span><br>
<span class="lineno">155</span><span class="keyword" id="4603079">func</span>&nbsp;<span class="ident" id="4603084">length</span><span class="op" id="4603090">(</span><span class="ident" id="4603091">item</span>&nbsp;<span class="keyword" id="4603096">interface</span><span class="op" id="4603105">{</span><span class="op" id="4603106">}</span><span class="op" id="4603107">)</span>&nbsp;<span class="op" id="4603109">(</span><span class="builtintype" id="4603110">int</span><span class="op" id="4603113">,</span>&nbsp;<span class="builtintype" id="4603115">error</span><span class="op" id="4603120">)</span>&nbsp;<span class="op" id="4603122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4603125">v</span><span class="op" id="4603126">,</span>&nbsp;<span class="ident" id="4603128">isNil</span>&nbsp;<span class="op" id="4603134">:=</span>&nbsp;<span class="ident" id="4603137">indirect</span><span class="op" id="4603145">(</span><span class="ident" id="4603146">reflect</span><span class="op" id="4603153">.</span><span class="ident" id="4603154">ValueOf</span><span class="op" id="4603161">(</span><span class="ident" id="4603162">item</span><span class="op" id="4603166">)</span><span class="op" id="4603167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603170">if</span>&nbsp;<span class="ident" id="4603173">isNil</span>&nbsp;<span class="op" id="4603179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603183">return</span>&nbsp;<span class="num" id="4603190">0</span><span class="op" id="4603191">,</span>&nbsp;<span class="ident" id="4603193">fmt</span><span class="op" id="4603196">.</span><span class="ident" id="4603197">Errorf</span><span class="op" id="4603203">(</span><span class="string" id="4603204">&#34;len&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="4603224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4603227">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603230">switch</span>&nbsp;<span class="ident" id="4603237">v</span><span class="op" id="4603238">.</span><span class="ident" id="4603239">Kind</span><span class="op" id="4603243">(</span><span class="op" id="4603244">)</span>&nbsp;<span class="op" id="4603246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603249">case</span>&nbsp;<span class="ident" id="4603254">reflect</span><span class="op" id="4603261">.</span><span class="ident" id="4603262">Array</span><span class="op" id="4603267">,</span>&nbsp;<span class="ident" id="4603269">reflect</span><span class="op" id="4603276">.</span><span class="ident" id="4603277">Chan</span><span class="op" id="4603281">,</span>&nbsp;<span class="ident" id="4603283">reflect</span><span class="op" id="4603290">.</span><span class="ident" id="4603291">Map</span><span class="op" id="4603294">,</span>&nbsp;<span class="ident" id="4603296">reflect</span><span class="op" id="4603303">.</span><span class="ident" id="4603304">Slice</span><span class="op" id="4603309">,</span>&nbsp;<span class="ident" id="4603311">reflect</span><span class="op" id="4603318">.</span><span class="ident" id="4603319">String</span><span class="op" id="4603325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603329">return</span>&nbsp;<span class="ident" id="4603336">v</span><span class="op" id="4603337">.</span><span class="ident" id="4603338">Len</span><span class="op" id="4603341">(</span><span class="op" id="4603342">)</span><span class="op" id="4603343">,</span>&nbsp;<span class="builtintype" id="4603345">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4603350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603353">return</span>&nbsp;<span class="num" id="4603360">0</span><span class="op" id="4603361">,</span>&nbsp;<span class="ident" id="4603363">fmt</span><span class="op" id="4603366">.</span><span class="ident" id="4603367">Errorf</span><span class="op" id="4603373">(</span><span class="string" id="4603374">&#34;len&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4603390">,</span>&nbsp;<span class="ident" id="4603392">v</span><span class="op" id="4603393">.</span><span class="ident" id="4603394">Type</span><span class="op" id="4603398">(</span><span class="op" id="4603399">)</span><span class="op" id="4603400">)</span><br>
<span class="lineno">165</span><span class="op" id="4603402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4603405">//&nbsp;Function&nbsp;invocation</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4603429">//&nbsp;call&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;evaluating&nbsp;the&nbsp;first&nbsp;argument&nbsp;as&nbsp;a&nbsp;function.</span><br>
<span class="lineno">170</span><span class="comment" id="4603504">//&nbsp;The&nbsp;function&nbsp;must&nbsp;return&nbsp;1&nbsp;result,&nbsp;or&nbsp;2&nbsp;results,&nbsp;the&nbsp;second&nbsp;of&nbsp;which&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4603589">func</span>&nbsp;<span class="ident" id="4603594">call</span><span class="op" id="4603598">(</span><span class="ident" id="4603599">fn</span>&nbsp;<span class="keyword" id="4603602">interface</span><span class="op" id="4603611">{</span><span class="op" id="4603612">}</span><span class="op" id="4603613">,</span>&nbsp;<span class="ident" id="4603615">args</span>&nbsp;<span class="op" id="4603620">...</span><span class="keyword" id="4603623">interface</span><span class="op" id="4603632">{</span><span class="op" id="4603633">}</span><span class="op" id="4603634">)</span>&nbsp;<span class="op" id="4603636">(</span><span class="keyword" id="4603637">interface</span><span class="op" id="4603646">{</span><span class="op" id="4603647">}</span><span class="op" id="4603648">,</span>&nbsp;<span class="builtintype" id="4603650">error</span><span class="op" id="4603655">)</span>&nbsp;<span class="op" id="4603657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4603660">v</span>&nbsp;<span class="op" id="4603662">:=</span>&nbsp;<span class="ident" id="4603665">reflect</span><span class="op" id="4603672">.</span><span class="ident" id="4603673">ValueOf</span><span class="op" id="4603680">(</span><span class="ident" id="4603681">fn</span><span class="op" id="4603683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4603686">typ</span>&nbsp;<span class="op" id="4603690">:=</span>&nbsp;<span class="ident" id="4603693">v</span><span class="op" id="4603694">.</span><span class="ident" id="4603695">Type</span><span class="op" id="4603699">(</span><span class="op" id="4603700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603703">if</span>&nbsp;<span class="ident" id="4603706">typ</span><span class="op" id="4603709">.</span><span class="ident" id="4603710">Kind</span><span class="op" id="4603714">(</span><span class="op" id="4603715">)</span>&nbsp;<span class="op" id="4603717">!=</span>&nbsp;<span class="ident" id="4603720">reflect</span><span class="op" id="4603727">.</span><span class="ident" id="4603728">Func</span>&nbsp;<span class="op" id="4603733">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603737">return</span>&nbsp;<span class="builtintype" id="4603744">nil</span><span class="op" id="4603747">,</span>&nbsp;<span class="ident" id="4603749">fmt</span><span class="op" id="4603752">.</span><span class="ident" id="4603753">Errorf</span><span class="op" id="4603759">(</span><span class="string" id="4603760">&#34;non-function&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="4603785">,</span>&nbsp;<span class="ident" id="4603787">typ</span><span class="op" id="4603790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4603793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603796">if</span>&nbsp;<span class="op" id="4603799">!</span><span class="ident" id="4603800">goodFunc</span><span class="op" id="4603808">(</span><span class="ident" id="4603809">typ</span><span class="op" id="4603812">)</span>&nbsp;<span class="op" id="4603814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603818">return</span>&nbsp;<span class="builtintype" id="4603825">nil</span><span class="op" id="4603828">,</span>&nbsp;<span class="ident" id="4603830">fmt</span><span class="op" id="4603833">.</span><span class="ident" id="4603834">Errorf</span><span class="op" id="4603840">(</span><span class="string" id="4603841">&#34;function&nbsp;called&nbsp;with&nbsp;%d&nbsp;args;&nbsp;should&nbsp;be&nbsp;1&nbsp;or&nbsp;2&#34;</span><span class="op" id="4603889">,</span>&nbsp;<span class="ident" id="4603891">typ</span><span class="op" id="4603894">.</span><span class="ident" id="4603895">NumOut</span><span class="op" id="4603901">(</span><span class="op" id="4603902">)</span><span class="op" id="4603903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4603906">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4603909">numIn</span>&nbsp;<span class="op" id="4603915">:=</span>&nbsp;<span class="ident" id="4603918">typ</span><span class="op" id="4603921">.</span><span class="ident" id="4603922">NumIn</span><span class="op" id="4603927">(</span><span class="op" id="4603928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603931">var</span>&nbsp;<span class="ident" id="4603935">dddType</span>&nbsp;<span class="ident" id="4603943">reflect</span><span class="op" id="4603950">.</span><span class="ident" id="4603951">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603957">if</span>&nbsp;<span class="ident" id="4603960">typ</span><span class="op" id="4603963">.</span><span class="ident" id="4603964">IsVariadic</span><span class="op" id="4603974">(</span><span class="op" id="4603975">)</span>&nbsp;<span class="op" id="4603977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4603981">if</span>&nbsp;<span class="builtinfunc" id="4603984">len</span><span class="op" id="4603987">(</span><span class="ident" id="4603988">args</span><span class="op" id="4603992">)</span>&nbsp;<span class="op" id="4603994">&lt;</span>&nbsp;<span class="ident" id="4603996">numIn</span><span class="op" id="4604001">-</span><span class="num" id="4604002">1</span>&nbsp;<span class="op" id="4604004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604009">return</span>&nbsp;<span class="builtintype" id="4604016">nil</span><span class="op" id="4604019">,</span>&nbsp;<span class="ident" id="4604021">fmt</span><span class="op" id="4604024">.</span><span class="ident" id="4604025">Errorf</span><span class="op" id="4604031">(</span><span class="string" id="4604032">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;at&nbsp;least&nbsp;%d&#34;</span><span class="op" id="4604079">,</span>&nbsp;<span class="builtinfunc" id="4604081">len</span><span class="op" id="4604084">(</span><span class="ident" id="4604085">args</span><span class="op" id="4604089">)</span><span class="op" id="4604090">,</span>&nbsp;<span class="ident" id="4604092">numIn</span><span class="op" id="4604097">-</span><span class="num" id="4604098">1</span><span class="op" id="4604099">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4604103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4604107">dddType</span>&nbsp;<span class="op" id="4604115">=</span>&nbsp;<span class="ident" id="4604117">typ</span><span class="op" id="4604120">.</span><span class="ident" id="4604121">In</span><span class="op" id="4604123">(</span><span class="ident" id="4604124">numIn</span>&nbsp;<span class="op" id="4604130">-</span>&nbsp;<span class="num" id="4604132">1</span><span class="op" id="4604133">)</span><span class="op" id="4604134">.</span><span class="ident" id="4604135">Elem</span><span class="op" id="4604139">(</span><span class="op" id="4604140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4604143">}</span>&nbsp;<span class="keyword" id="4604145">else</span>&nbsp;<span class="op" id="4604150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604154">if</span>&nbsp;<span class="builtinfunc" id="4604157">len</span><span class="op" id="4604160">(</span><span class="ident" id="4604161">args</span><span class="op" id="4604165">)</span>&nbsp;<span class="op" id="4604167">!=</span>&nbsp;<span class="ident" id="4604170">numIn</span>&nbsp;<span class="op" id="4604176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604181">return</span>&nbsp;<span class="builtintype" id="4604188">nil</span><span class="op" id="4604191">,</span>&nbsp;<span class="ident" id="4604193">fmt</span><span class="op" id="4604196">.</span><span class="ident" id="4604197">Errorf</span><span class="op" id="4604203">(</span><span class="string" id="4604204">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="4604242">,</span>&nbsp;<span class="builtinfunc" id="4604244">len</span><span class="op" id="4604247">(</span><span class="ident" id="4604248">args</span><span class="op" id="4604252">)</span><span class="op" id="4604253">,</span>&nbsp;<span class="ident" id="4604255">numIn</span><span class="op" id="4604260">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4604264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4604267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4604270">argv</span>&nbsp;<span class="op" id="4604275">:=</span>&nbsp;<span class="builtinfunc" id="4604278">make</span><span class="op" id="4604282">(</span><span class="op" id="4604283">[</span><span class="op" id="4604284">]</span><span class="ident" id="4604285">reflect</span><span class="op" id="4604292">.</span><span class="ident" id="4604293">Value</span><span class="op" id="4604298">,</span>&nbsp;<span class="builtinfunc" id="4604300">len</span><span class="op" id="4604303">(</span><span class="ident" id="4604304">args</span><span class="op" id="4604308">)</span><span class="op" id="4604309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604312">for</span>&nbsp;<span class="ident" id="4604316">i</span><span class="op" id="4604317">,</span>&nbsp;<span class="ident" id="4604319">arg</span>&nbsp;<span class="op" id="4604323">:=</span>&nbsp;<span class="keyword" id="4604326">range</span>&nbsp;<span class="ident" id="4604332">args</span>&nbsp;<span class="op" id="4604337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4604341">value</span>&nbsp;<span class="op" id="4604347">:=</span>&nbsp;<span class="ident" id="4604350">reflect</span><span class="op" id="4604357">.</span><span class="ident" id="4604358">ValueOf</span><span class="op" id="4604365">(</span><span class="ident" id="4604366">arg</span><span class="op" id="4604369">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4604373">//&nbsp;Compute&nbsp;the&nbsp;expected&nbsp;type.&nbsp;Clumsy&nbsp;because&nbsp;of&nbsp;variadics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604434">var</span>&nbsp;<span class="ident" id="4604438">argType</span>&nbsp;<span class="ident" id="4604446">reflect</span><span class="op" id="4604453">.</span><span class="ident" id="4604454">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604461">if</span>&nbsp;<span class="op" id="4604464">!</span><span class="ident" id="4604465">typ</span><span class="op" id="4604468">.</span><span class="ident" id="4604469">IsVariadic</span><span class="op" id="4604479">(</span><span class="op" id="4604480">)</span>&nbsp;<span class="op" id="4604482">||</span>&nbsp;<span class="ident" id="4604485">i</span>&nbsp;<span class="op" id="4604487">&lt;</span>&nbsp;<span class="ident" id="4604489">numIn</span><span class="op" id="4604494">-</span><span class="num" id="4604495">1</span>&nbsp;<span class="op" id="4604497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4604502">argType</span>&nbsp;<span class="op" id="4604510">=</span>&nbsp;<span class="ident" id="4604512">typ</span><span class="op" id="4604515">.</span><span class="ident" id="4604516">In</span><span class="op" id="4604518">(</span><span class="ident" id="4604519">i</span><span class="op" id="4604520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4604524">}</span>&nbsp;<span class="keyword" id="4604526">else</span>&nbsp;<span class="op" id="4604531">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4604536">argType</span>&nbsp;<span class="op" id="4604544">=</span>&nbsp;<span class="ident" id="4604546">dddType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4604556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604560">if</span>&nbsp;<span class="op" id="4604563">!</span><span class="ident" id="4604564">value</span><span class="op" id="4604569">.</span><span class="ident" id="4604570">IsValid</span><span class="op" id="4604577">(</span><span class="op" id="4604578">)</span>&nbsp;<span class="op" id="4604580">&amp;&amp;</span>&nbsp;<span class="ident" id="4604583">canBeNil</span><span class="op" id="4604591">(</span><span class="ident" id="4604592">argType</span><span class="op" id="4604599">)</span>&nbsp;<span class="op" id="4604601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4604606">value</span>&nbsp;<span class="op" id="4604612">=</span>&nbsp;<span class="ident" id="4604614">reflect</span><span class="op" id="4604621">.</span><span class="ident" id="4604622">Zero</span><span class="op" id="4604626">(</span><span class="ident" id="4604627">argType</span><span class="op" id="4604634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4604638">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604642">if</span>&nbsp;<span class="op" id="4604645">!</span><span class="ident" id="4604646">value</span><span class="op" id="4604651">.</span><span class="ident" id="4604652">Type</span><span class="op" id="4604656">(</span><span class="op" id="4604657">)</span><span class="op" id="4604658">.</span><span class="ident" id="4604659">AssignableTo</span><span class="op" id="4604671">(</span><span class="ident" id="4604672">argType</span><span class="op" id="4604679">)</span>&nbsp;<span class="op" id="4604681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604686">return</span>&nbsp;<span class="builtintype" id="4604693">nil</span><span class="op" id="4604696">,</span>&nbsp;<span class="ident" id="4604698">fmt</span><span class="op" id="4604701">.</span><span class="ident" id="4604702">Errorf</span><span class="op" id="4604708">(</span><span class="string" id="4604709">&#34;arg&nbsp;%d&nbsp;has&nbsp;type&nbsp;%s;&nbsp;should&nbsp;be&nbsp;%s&#34;</span><span class="op" id="4604743">,</span>&nbsp;<span class="ident" id="4604745">i</span><span class="op" id="4604746">,</span>&nbsp;<span class="ident" id="4604748">value</span><span class="op" id="4604753">.</span><span class="ident" id="4604754">Type</span><span class="op" id="4604758">(</span><span class="op" id="4604759">)</span><span class="op" id="4604760">,</span>&nbsp;<span class="ident" id="4604762">argType</span><span class="op" id="4604769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4604773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4604777">argv</span><span class="op" id="4604781">[</span><span class="ident" id="4604782">i</span><span class="op" id="4604783">]</span>&nbsp;<span class="op" id="4604785">=</span>&nbsp;<span class="ident" id="4604787">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4604794">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4604797">result</span>&nbsp;<span class="op" id="4604804">:=</span>&nbsp;<span class="ident" id="4604807">v</span><span class="op" id="4604808">.</span><span class="ident" id="4604809">Call</span><span class="op" id="4604813">(</span><span class="ident" id="4604814">argv</span><span class="op" id="4604818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604821">if</span>&nbsp;<span class="builtinfunc" id="4604824">len</span><span class="op" id="4604827">(</span><span class="ident" id="4604828">result</span><span class="op" id="4604834">)</span>&nbsp;<span class="op" id="4604836">==</span>&nbsp;<span class="num" id="4604839">2</span>&nbsp;<span class="op" id="4604841">&amp;&amp;</span>&nbsp;<span class="op" id="4604844">!</span><span class="ident" id="4604845">result</span><span class="op" id="4604851">[</span><span class="num" id="4604852">1</span><span class="op" id="4604853">]</span><span class="op" id="4604854">.</span><span class="ident" id="4604855">IsNil</span><span class="op" id="4604860">(</span><span class="op" id="4604861">)</span>&nbsp;<span class="op" id="4604863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604867">return</span>&nbsp;<span class="ident" id="4604874">result</span><span class="op" id="4604880">[</span><span class="num" id="4604881">0</span><span class="op" id="4604882">]</span><span class="op" id="4604883">.</span><span class="ident" id="4604884">Interface</span><span class="op" id="4604893">(</span><span class="op" id="4604894">)</span><span class="op" id="4604895">,</span>&nbsp;<span class="ident" id="4604897">result</span><span class="op" id="4604903">[</span><span class="num" id="4604904">1</span><span class="op" id="4604905">]</span><span class="op" id="4604906">.</span><span class="ident" id="4604907">Interface</span><span class="op" id="4604916">(</span><span class="op" id="4604917">)</span><span class="op" id="4604918">.</span><span class="op" id="4604919">(</span><span class="builtintype" id="4604920">error</span><span class="op" id="4604925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4604928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4604931">return</span>&nbsp;<span class="ident" id="4604938">result</span><span class="op" id="4604944">[</span><span class="num" id="4604945">0</span><span class="op" id="4604946">]</span><span class="op" id="4604947">.</span><span class="ident" id="4604948">Interface</span><span class="op" id="4604957">(</span><span class="op" id="4604958">)</span><span class="op" id="4604959">,</span>&nbsp;<span class="builtintype" id="4604961">nil</span><br>
<span class="lineno">215</span><span class="op" id="4604965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4604968">//&nbsp;Boolean&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4604987">func</span>&nbsp;<span class="ident" id="4604992">truth</span><span class="op" id="4604997">(</span><span class="ident" id="4604998">a</span>&nbsp;<span class="keyword" id="4605000">interface</span><span class="op" id="4605009">{</span><span class="op" id="4605010">}</span><span class="op" id="4605011">)</span>&nbsp;<span class="builtintype" id="4605013">bool</span>&nbsp;<span class="op" id="4605018">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605021">t</span><span class="op" id="4605022">,</span>&nbsp;<span class="ident" id="4605024">_</span>&nbsp;<span class="op" id="4605026">:=</span>&nbsp;<span class="ident" id="4605029">isTrue</span><span class="op" id="4605035">(</span><span class="ident" id="4605036">reflect</span><span class="op" id="4605043">.</span><span class="ident" id="4605044">ValueOf</span><span class="op" id="4605051">(</span><span class="ident" id="4605052">a</span><span class="op" id="4605053">)</span><span class="op" id="4605054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605057">return</span>&nbsp;<span class="ident" id="4605064">t</span><br>
<span class="lineno"></span><span class="op" id="4605066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4605069">//&nbsp;and&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;AND&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">225</span><span class="comment" id="4605129">//&nbsp;the&nbsp;first&nbsp;false&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="4605194">func</span>&nbsp;<span class="ident" id="4605199">and</span><span class="op" id="4605202">(</span><span class="ident" id="4605203">arg0</span>&nbsp;<span class="keyword" id="4605208">interface</span><span class="op" id="4605217">{</span><span class="op" id="4605218">}</span><span class="op" id="4605219">,</span>&nbsp;<span class="ident" id="4605221">args</span>&nbsp;<span class="op" id="4605226">...</span><span class="keyword" id="4605229">interface</span><span class="op" id="4605238">{</span><span class="op" id="4605239">}</span><span class="op" id="4605240">)</span>&nbsp;<span class="keyword" id="4605242">interface</span><span class="op" id="4605251">{</span><span class="op" id="4605252">}</span>&nbsp;<span class="op" id="4605254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605257">if</span>&nbsp;<span class="op" id="4605260">!</span><span class="ident" id="4605261">truth</span><span class="op" id="4605266">(</span><span class="ident" id="4605267">arg0</span><span class="op" id="4605271">)</span>&nbsp;<span class="op" id="4605273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605277">return</span>&nbsp;<span class="ident" id="4605284">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4605290">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605293">for</span>&nbsp;<span class="ident" id="4605297">i</span>&nbsp;<span class="op" id="4605299">:=</span>&nbsp;<span class="keyword" id="4605302">range</span>&nbsp;<span class="ident" id="4605308">args</span>&nbsp;<span class="op" id="4605313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605317">arg0</span>&nbsp;<span class="op" id="4605322">=</span>&nbsp;<span class="ident" id="4605324">args</span><span class="op" id="4605328">[</span><span class="ident" id="4605329">i</span><span class="op" id="4605330">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605334">if</span>&nbsp;<span class="op" id="4605337">!</span><span class="ident" id="4605338">truth</span><span class="op" id="4605343">(</span><span class="ident" id="4605344">arg0</span><span class="op" id="4605348">)</span>&nbsp;<span class="op" id="4605350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605355">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4605363">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4605366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605369">return</span>&nbsp;<span class="ident" id="4605376">arg0</span><br>
<span class="lineno"></span><span class="op" id="4605381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4605384">//&nbsp;or&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;OR&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">240</span><span class="comment" id="4605442">//&nbsp;the&nbsp;first&nbsp;true&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="4605506">func</span>&nbsp;<span class="ident" id="4605511">or</span><span class="op" id="4605513">(</span><span class="ident" id="4605514">arg0</span>&nbsp;<span class="keyword" id="4605519">interface</span><span class="op" id="4605528">{</span><span class="op" id="4605529">}</span><span class="op" id="4605530">,</span>&nbsp;<span class="ident" id="4605532">args</span>&nbsp;<span class="op" id="4605537">...</span><span class="keyword" id="4605540">interface</span><span class="op" id="4605549">{</span><span class="op" id="4605550">}</span><span class="op" id="4605551">)</span>&nbsp;<span class="keyword" id="4605553">interface</span><span class="op" id="4605562">{</span><span class="op" id="4605563">}</span>&nbsp;<span class="op" id="4605565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605568">if</span>&nbsp;<span class="ident" id="4605571">truth</span><span class="op" id="4605576">(</span><span class="ident" id="4605577">arg0</span><span class="op" id="4605581">)</span>&nbsp;<span class="op" id="4605583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605587">return</span>&nbsp;<span class="ident" id="4605594">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4605600">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605603">for</span>&nbsp;<span class="ident" id="4605607">i</span>&nbsp;<span class="op" id="4605609">:=</span>&nbsp;<span class="keyword" id="4605612">range</span>&nbsp;<span class="ident" id="4605618">args</span>&nbsp;<span class="op" id="4605623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605627">arg0</span>&nbsp;<span class="op" id="4605632">=</span>&nbsp;<span class="ident" id="4605634">args</span><span class="op" id="4605638">[</span><span class="ident" id="4605639">i</span><span class="op" id="4605640">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605644">if</span>&nbsp;<span class="ident" id="4605647">truth</span><span class="op" id="4605652">(</span><span class="ident" id="4605653">arg0</span><span class="op" id="4605657">)</span>&nbsp;<span class="op" id="4605659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605664">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4605672">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4605675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605678">return</span>&nbsp;<span class="ident" id="4605685">arg0</span><br>
<span class="lineno"></span><span class="op" id="4605690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4605693">//&nbsp;not&nbsp;returns&nbsp;the&nbsp;Boolean&nbsp;negation&nbsp;of&nbsp;its&nbsp;argument.</span><br>
<span class="lineno">255</span><span class="keyword" id="4605746">func</span>&nbsp;<span class="ident" id="4605751">not</span><span class="op" id="4605754">(</span><span class="ident" id="4605755">arg</span>&nbsp;<span class="keyword" id="4605759">interface</span><span class="op" id="4605768">{</span><span class="op" id="4605769">}</span><span class="op" id="4605770">)</span>&nbsp;<span class="op" id="4605772">(</span><span class="ident" id="4605773">truth</span>&nbsp;<span class="builtintype" id="4605779">bool</span><span class="op" id="4605783">)</span>&nbsp;<span class="op" id="4605785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605788">truth</span><span class="op" id="4605793">,</span>&nbsp;<span class="ident" id="4605795">_</span>&nbsp;<span class="op" id="4605797">=</span>&nbsp;<span class="ident" id="4605799">isTrue</span><span class="op" id="4605805">(</span><span class="ident" id="4605806">reflect</span><span class="op" id="4605813">.</span><span class="ident" id="4605814">ValueOf</span><span class="op" id="4605821">(</span><span class="ident" id="4605822">arg</span><span class="op" id="4605825">)</span><span class="op" id="4605826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4605829">return</span>&nbsp;<span class="op" id="4605836">!</span><span class="ident" id="4605837">truth</span><br>
<span class="lineno"></span><span class="op" id="4605843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="4605846">//&nbsp;Comparison.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4605862">//&nbsp;TODO:&nbsp;Perhaps&nbsp;allow&nbsp;comparison&nbsp;between&nbsp;signed&nbsp;and&nbsp;unsigned&nbsp;integers.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4605935">var</span>&nbsp;<span class="op" id="4605939">(</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4605942">errBadComparisonType</span>&nbsp;<span class="op" id="4605963">=</span>&nbsp;<span class="ident" id="4605965">errors</span><span class="op" id="4605971">.</span><span class="ident" id="4605972">New</span><span class="op" id="4605975">(</span><span class="string" id="4605976">&#34;invalid&nbsp;type&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4606005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606008">errBadComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4606029">=</span>&nbsp;<span class="ident" id="4606031">errors</span><span class="op" id="4606037">.</span><span class="ident" id="4606038">New</span><span class="op" id="4606041">(</span><span class="string" id="4606042">&#34;incompatible&nbsp;types&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4606077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606080">errNoComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4606101">=</span>&nbsp;<span class="ident" id="4606103">errors</span><span class="op" id="4606109">.</span><span class="ident" id="4606110">New</span><span class="op" id="4606113">(</span><span class="string" id="4606114">&#34;missing&nbsp;argument&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="4606147">)</span><br>
<span class="lineno"></span><span class="op" id="4606149">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="4606152">type</span>&nbsp;<span class="ident" id="4606157">kind</span>&nbsp;<span class="builtintype" id="4606162">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4606167">const</span>&nbsp;<span class="op" id="4606173">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606176">invalidKind</span>&nbsp;<span class="ident" id="4606188">kind</span>&nbsp;<span class="op" id="4606193">=</span>&nbsp;<span class="ident" id="4606195">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606201">boolKind</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606211">complexKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606224">intKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606233">floatKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606244">integerKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606257">stringKind</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606269">uintKind</span><br>
<span class="lineno"></span><span class="op" id="4606278">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4606281">func</span>&nbsp;<span class="ident" id="4606286">basicKind</span><span class="op" id="4606295">(</span><span class="ident" id="4606296">v</span>&nbsp;<span class="ident" id="4606298">reflect</span><span class="op" id="4606305">.</span><span class="ident" id="4606306">Value</span><span class="op" id="4606311">)</span>&nbsp;<span class="op" id="4606313">(</span><span class="ident" id="4606314">kind</span><span class="op" id="4606318">,</span>&nbsp;<span class="builtintype" id="4606320">error</span><span class="op" id="4606325">)</span>&nbsp;<span class="op" id="4606327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606330">switch</span>&nbsp;<span class="ident" id="4606337">v</span><span class="op" id="4606338">.</span><span class="ident" id="4606339">Kind</span><span class="op" id="4606343">(</span><span class="op" id="4606344">)</span>&nbsp;<span class="op" id="4606346">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606349">case</span>&nbsp;<span class="ident" id="4606354">reflect</span><span class="op" id="4606361">.</span><span class="ident" id="4606362">Bool</span><span class="op" id="4606366">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606370">return</span>&nbsp;<span class="ident" id="4606377">boolKind</span><span class="op" id="4606385">,</span>&nbsp;<span class="builtintype" id="4606387">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606392">case</span>&nbsp;<span class="ident" id="4606397">reflect</span><span class="op" id="4606404">.</span><span class="ident" id="4606405">Int</span><span class="op" id="4606408">,</span>&nbsp;<span class="ident" id="4606410">reflect</span><span class="op" id="4606417">.</span><span class="ident" id="4606418">Int8</span><span class="op" id="4606422">,</span>&nbsp;<span class="ident" id="4606424">reflect</span><span class="op" id="4606431">.</span><span class="ident" id="4606432">Int16</span><span class="op" id="4606437">,</span>&nbsp;<span class="ident" id="4606439">reflect</span><span class="op" id="4606446">.</span><span class="ident" id="4606447">Int32</span><span class="op" id="4606452">,</span>&nbsp;<span class="ident" id="4606454">reflect</span><span class="op" id="4606461">.</span><span class="ident" id="4606462">Int64</span><span class="op" id="4606467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606471">return</span>&nbsp;<span class="ident" id="4606478">intKind</span><span class="op" id="4606485">,</span>&nbsp;<span class="builtintype" id="4606487">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606492">case</span>&nbsp;<span class="ident" id="4606497">reflect</span><span class="op" id="4606504">.</span><span class="ident" id="4606505">Uint</span><span class="op" id="4606509">,</span>&nbsp;<span class="ident" id="4606511">reflect</span><span class="op" id="4606518">.</span><span class="ident" id="4606519">Uint8</span><span class="op" id="4606524">,</span>&nbsp;<span class="ident" id="4606526">reflect</span><span class="op" id="4606533">.</span><span class="ident" id="4606534">Uint16</span><span class="op" id="4606540">,</span>&nbsp;<span class="ident" id="4606542">reflect</span><span class="op" id="4606549">.</span><span class="ident" id="4606550">Uint32</span><span class="op" id="4606556">,</span>&nbsp;<span class="ident" id="4606558">reflect</span><span class="op" id="4606565">.</span><span class="ident" id="4606566">Uint64</span><span class="op" id="4606572">,</span>&nbsp;<span class="ident" id="4606574">reflect</span><span class="op" id="4606581">.</span><span class="ident" id="4606582">Uintptr</span><span class="op" id="4606589">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606593">return</span>&nbsp;<span class="ident" id="4606600">uintKind</span><span class="op" id="4606608">,</span>&nbsp;<span class="builtintype" id="4606610">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606615">case</span>&nbsp;<span class="ident" id="4606620">reflect</span><span class="op" id="4606627">.</span><span class="ident" id="4606628">Float32</span><span class="op" id="4606635">,</span>&nbsp;<span class="ident" id="4606637">reflect</span><span class="op" id="4606644">.</span><span class="ident" id="4606645">Float64</span><span class="op" id="4606652">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606656">return</span>&nbsp;<span class="ident" id="4606663">floatKind</span><span class="op" id="4606672">,</span>&nbsp;<span class="builtintype" id="4606674">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606679">case</span>&nbsp;<span class="ident" id="4606684">reflect</span><span class="op" id="4606691">.</span><span class="ident" id="4606692">Complex64</span><span class="op" id="4606701">,</span>&nbsp;<span class="ident" id="4606703">reflect</span><span class="op" id="4606710">.</span><span class="ident" id="4606711">Complex128</span><span class="op" id="4606721">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606725">return</span>&nbsp;<span class="ident" id="4606732">complexKind</span><span class="op" id="4606743">,</span>&nbsp;<span class="builtintype" id="4606745">nil</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606750">case</span>&nbsp;<span class="ident" id="4606755">reflect</span><span class="op" id="4606762">.</span><span class="ident" id="4606763">String</span><span class="op" id="4606769">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606773">return</span>&nbsp;<span class="ident" id="4606780">stringKind</span><span class="op" id="4606790">,</span>&nbsp;<span class="builtintype" id="4606792">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4606797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4606800">return</span>&nbsp;<span class="ident" id="4606807">invalidKind</span><span class="op" id="4606818">,</span>&nbsp;<span class="ident" id="4606820">errBadComparisonType</span><br>
<span class="lineno"></span><span class="op" id="4606841">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="4606844">//&nbsp;eq&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;==&nbsp;b&nbsp;||&nbsp;a&nbsp;==&nbsp;c&nbsp;||&nbsp;...</span><br>
<span class="lineno"></span><span class="keyword" id="4606899">func</span>&nbsp;<span class="ident" id="4606904">eq</span><span class="op" id="4606906">(</span><span class="ident" id="4606907">arg1</span>&nbsp;<span class="keyword" id="4606912">interface</span><span class="op" id="4606921">{</span><span class="op" id="4606922">}</span><span class="op" id="4606923">,</span>&nbsp;<span class="ident" id="4606925">arg2</span>&nbsp;<span class="op" id="4606930">...</span><span class="keyword" id="4606933">interface</span><span class="op" id="4606942">{</span><span class="op" id="4606943">}</span><span class="op" id="4606944">)</span>&nbsp;<span class="op" id="4606946">(</span><span class="builtintype" id="4606947">bool</span><span class="op" id="4606951">,</span>&nbsp;<span class="builtintype" id="4606953">error</span><span class="op" id="4606958">)</span>&nbsp;<span class="op" id="4606960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606963">v1</span>&nbsp;<span class="op" id="4606966">:=</span>&nbsp;<span class="ident" id="4606969">reflect</span><span class="op" id="4606976">.</span><span class="ident" id="4606977">ValueOf</span><span class="op" id="4606984">(</span><span class="ident" id="4606985">arg1</span><span class="op" id="4606989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4606992">k1</span><span class="op" id="4606994">,</span>&nbsp;<span class="ident" id="4606996">err</span>&nbsp;<span class="op" id="4607000">:=</span>&nbsp;<span class="ident" id="4607003">basicKind</span><span class="op" id="4607012">(</span><span class="ident" id="4607013">v1</span><span class="op" id="4607015">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607018">if</span>&nbsp;<span class="ident" id="4607021">err</span>&nbsp;<span class="op" id="4607025">!=</span>&nbsp;<span class="builtintype" id="4607028">nil</span>&nbsp;<span class="op" id="4607032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607036">return</span>&nbsp;<span class="builtintype" id="4607043">false</span><span class="op" id="4607048">,</span>&nbsp;<span class="ident" id="4607050">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4607055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607058">if</span>&nbsp;<span class="builtinfunc" id="4607061">len</span><span class="op" id="4607064">(</span><span class="ident" id="4607065">arg2</span><span class="op" id="4607069">)</span>&nbsp;<span class="op" id="4607071">==</span>&nbsp;<span class="num" id="4607074">0</span>&nbsp;<span class="op" id="4607076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607080">return</span>&nbsp;<span class="builtintype" id="4607087">false</span><span class="op" id="4607092">,</span>&nbsp;<span class="ident" id="4607094">errNoComparison</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4607111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607114">for</span>&nbsp;<span class="ident" id="4607118">_</span><span class="op" id="4607119">,</span>&nbsp;<span class="ident" id="4607121">arg</span>&nbsp;<span class="op" id="4607125">:=</span>&nbsp;<span class="keyword" id="4607128">range</span>&nbsp;<span class="ident" id="4607134">arg2</span>&nbsp;<span class="op" id="4607139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607143">v2</span>&nbsp;<span class="op" id="4607146">:=</span>&nbsp;<span class="ident" id="4607149">reflect</span><span class="op" id="4607156">.</span><span class="ident" id="4607157">ValueOf</span><span class="op" id="4607164">(</span><span class="ident" id="4607165">arg</span><span class="op" id="4607168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607172">k2</span><span class="op" id="4607174">,</span>&nbsp;<span class="ident" id="4607176">err</span>&nbsp;<span class="op" id="4607180">:=</span>&nbsp;<span class="ident" id="4607183">basicKind</span><span class="op" id="4607192">(</span><span class="ident" id="4607193">v2</span><span class="op" id="4607195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607199">if</span>&nbsp;<span class="ident" id="4607202">err</span>&nbsp;<span class="op" id="4607206">!=</span>&nbsp;<span class="builtintype" id="4607209">nil</span>&nbsp;<span class="op" id="4607213">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607218">return</span>&nbsp;<span class="builtintype" id="4607225">false</span><span class="op" id="4607230">,</span>&nbsp;<span class="ident" id="4607232">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4607238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607242">truth</span>&nbsp;<span class="op" id="4607248">:=</span>&nbsp;<span class="builtintype" id="4607251">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607259">if</span>&nbsp;<span class="ident" id="4607262">k1</span>&nbsp;<span class="op" id="4607265">!=</span>&nbsp;<span class="ident" id="4607268">k2</span>&nbsp;<span class="op" id="4607271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4607276">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607350">switch</span>&nbsp;<span class="op" id="4607357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607362">case</span>&nbsp;<span class="ident" id="4607367">k1</span>&nbsp;<span class="op" id="4607370">==</span>&nbsp;<span class="ident" id="4607373">intKind</span>&nbsp;<span class="op" id="4607381">&amp;&amp;</span>&nbsp;<span class="ident" id="4607384">k2</span>&nbsp;<span class="op" id="4607387">==</span>&nbsp;<span class="ident" id="4607390">uintKind</span><span class="op" id="4607398">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607404">truth</span>&nbsp;<span class="op" id="4607410">=</span>&nbsp;<span class="ident" id="4607412">v1</span><span class="op" id="4607414">.</span><span class="ident" id="4607415">Int</span><span class="op" id="4607418">(</span><span class="op" id="4607419">)</span>&nbsp;<span class="op" id="4607421">&gt;=</span>&nbsp;<span class="num" id="4607424">0</span>&nbsp;<span class="op" id="4607426">&amp;&amp;</span>&nbsp;<span class="ident" id="4607429">uint64</span><span class="op" id="4607435">(</span><span class="ident" id="4607436">v1</span><span class="op" id="4607438">.</span><span class="ident" id="4607439">Int</span><span class="op" id="4607442">(</span><span class="op" id="4607443">)</span><span class="op" id="4607444">)</span>&nbsp;<span class="op" id="4607446">==</span>&nbsp;<span class="ident" id="4607449">v2</span><span class="op" id="4607451">.</span><span class="ident" id="4607452">Uint</span><span class="op" id="4607456">(</span><span class="op" id="4607457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607462">case</span>&nbsp;<span class="ident" id="4607467">k1</span>&nbsp;<span class="op" id="4607470">==</span>&nbsp;<span class="ident" id="4607473">uintKind</span>&nbsp;<span class="op" id="4607482">&amp;&amp;</span>&nbsp;<span class="ident" id="4607485">k2</span>&nbsp;<span class="op" id="4607488">==</span>&nbsp;<span class="ident" id="4607491">intKind</span><span class="op" id="4607498">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607504">truth</span>&nbsp;<span class="op" id="4607510">=</span>&nbsp;<span class="ident" id="4607512">v2</span><span class="op" id="4607514">.</span><span class="ident" id="4607515">Int</span><span class="op" id="4607518">(</span><span class="op" id="4607519">)</span>&nbsp;<span class="op" id="4607521">&gt;=</span>&nbsp;<span class="num" id="4607524">0</span>&nbsp;<span class="op" id="4607526">&amp;&amp;</span>&nbsp;<span class="ident" id="4607529">v1</span><span class="op" id="4607531">.</span><span class="ident" id="4607532">Uint</span><span class="op" id="4607536">(</span><span class="op" id="4607537">)</span>&nbsp;<span class="op" id="4607539">==</span>&nbsp;<span class="ident" id="4607542">uint64</span><span class="op" id="4607548">(</span><span class="ident" id="4607549">v2</span><span class="op" id="4607551">.</span><span class="ident" id="4607552">Int</span><span class="op" id="4607555">(</span><span class="op" id="4607556">)</span><span class="op" id="4607557">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607562">default</span><span class="op" id="4607569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607575">return</span>&nbsp;<span class="builtintype" id="4607582">false</span><span class="op" id="4607587">,</span>&nbsp;<span class="ident" id="4607589">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4607609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4607613">}</span>&nbsp;<span class="keyword" id="4607615">else</span>&nbsp;<span class="op" id="4607620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607625">switch</span>&nbsp;<span class="ident" id="4607632">k1</span>&nbsp;<span class="op" id="4607635">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607640">case</span>&nbsp;<span class="ident" id="4607645">boolKind</span><span class="op" id="4607653">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607659">truth</span>&nbsp;<span class="op" id="4607665">=</span>&nbsp;<span class="ident" id="4607667">v1</span><span class="op" id="4607669">.</span><span class="ident" id="4607670">Bool</span><span class="op" id="4607674">(</span><span class="op" id="4607675">)</span>&nbsp;<span class="op" id="4607677">==</span>&nbsp;<span class="ident" id="4607680">v2</span><span class="op" id="4607682">.</span><span class="ident" id="4607683">Bool</span><span class="op" id="4607687">(</span><span class="op" id="4607688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607693">case</span>&nbsp;<span class="ident" id="4607698">complexKind</span><span class="op" id="4607709">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607715">truth</span>&nbsp;<span class="op" id="4607721">=</span>&nbsp;<span class="ident" id="4607723">v1</span><span class="op" id="4607725">.</span><span class="ident" id="4607726">Complex</span><span class="op" id="4607733">(</span><span class="op" id="4607734">)</span>&nbsp;<span class="op" id="4607736">==</span>&nbsp;<span class="ident" id="4607739">v2</span><span class="op" id="4607741">.</span><span class="ident" id="4607742">Complex</span><span class="op" id="4607749">(</span><span class="op" id="4607750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607755">case</span>&nbsp;<span class="ident" id="4607760">floatKind</span><span class="op" id="4607769">:</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607775">truth</span>&nbsp;<span class="op" id="4607781">=</span>&nbsp;<span class="ident" id="4607783">v1</span><span class="op" id="4607785">.</span><span class="ident" id="4607786">Float</span><span class="op" id="4607791">(</span><span class="op" id="4607792">)</span>&nbsp;<span class="op" id="4607794">==</span>&nbsp;<span class="ident" id="4607797">v2</span><span class="op" id="4607799">.</span><span class="ident" id="4607800">Float</span><span class="op" id="4607805">(</span><span class="op" id="4607806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607811">case</span>&nbsp;<span class="ident" id="4607816">intKind</span><span class="op" id="4607823">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607829">truth</span>&nbsp;<span class="op" id="4607835">=</span>&nbsp;<span class="ident" id="4607837">v1</span><span class="op" id="4607839">.</span><span class="ident" id="4607840">Int</span><span class="op" id="4607843">(</span><span class="op" id="4607844">)</span>&nbsp;<span class="op" id="4607846">==</span>&nbsp;<span class="ident" id="4607849">v2</span><span class="op" id="4607851">.</span><span class="ident" id="4607852">Int</span><span class="op" id="4607855">(</span><span class="op" id="4607856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607861">case</span>&nbsp;<span class="ident" id="4607866">stringKind</span><span class="op" id="4607876">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607882">truth</span>&nbsp;<span class="op" id="4607888">=</span>&nbsp;<span class="ident" id="4607890">v1</span><span class="op" id="4607892">.</span><span class="ident" id="4607893">String</span><span class="op" id="4607899">(</span><span class="op" id="4607900">)</span>&nbsp;<span class="op" id="4607902">==</span>&nbsp;<span class="ident" id="4607905">v2</span><span class="op" id="4607907">.</span><span class="ident" id="4607908">String</span><span class="op" id="4607914">(</span><span class="op" id="4607915">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607920">case</span>&nbsp;<span class="ident" id="4607925">uintKind</span><span class="op" id="4607933">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4607939">truth</span>&nbsp;<span class="op" id="4607945">=</span>&nbsp;<span class="ident" id="4607947">v1</span><span class="op" id="4607949">.</span><span class="ident" id="4607950">Uint</span><span class="op" id="4607954">(</span><span class="op" id="4607955">)</span>&nbsp;<span class="op" id="4607957">==</span>&nbsp;<span class="ident" id="4607960">v2</span><span class="op" id="4607962">.</span><span class="ident" id="4607963">Uint</span><span class="op" id="4607967">(</span><span class="op" id="4607968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4607973">default</span><span class="op" id="4607980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4607986">panic</span><span class="op" id="4607991">(</span><span class="string" id="4607992">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="4608006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4608011">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4608015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608019">if</span>&nbsp;<span class="ident" id="4608022">truth</span>&nbsp;<span class="op" id="4608028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608033">return</span>&nbsp;<span class="builtintype" id="4608040">true</span><span class="op" id="4608044">,</span>&nbsp;<span class="builtintype" id="4608046">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4608052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4608055">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608058">return</span>&nbsp;<span class="builtintype" id="4608065">false</span><span class="op" id="4608070">,</span>&nbsp;<span class="builtintype" id="4608072">nil</span><br>
<span class="lineno"></span><span class="op" id="4608076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4608079">//&nbsp;ne&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;!=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4608118">func</span>&nbsp;<span class="ident" id="4608123">ne</span><span class="op" id="4608125">(</span><span class="ident" id="4608126">arg1</span><span class="op" id="4608130">,</span>&nbsp;<span class="ident" id="4608132">arg2</span>&nbsp;<span class="keyword" id="4608137">interface</span><span class="op" id="4608146">{</span><span class="op" id="4608147">}</span><span class="op" id="4608148">)</span>&nbsp;<span class="op" id="4608150">(</span><span class="builtintype" id="4608151">bool</span><span class="op" id="4608155">,</span>&nbsp;<span class="builtintype" id="4608157">error</span><span class="op" id="4608162">)</span>&nbsp;<span class="op" id="4608164">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4608167">//&nbsp;!=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;==.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608196">equal</span><span class="op" id="4608201">,</span>&nbsp;<span class="ident" id="4608203">err</span>&nbsp;<span class="op" id="4608207">:=</span>&nbsp;<span class="ident" id="4608210">eq</span><span class="op" id="4608212">(</span><span class="ident" id="4608213">arg1</span><span class="op" id="4608217">,</span>&nbsp;<span class="ident" id="4608219">arg2</span><span class="op" id="4608223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608226">return</span>&nbsp;<span class="op" id="4608233">!</span><span class="ident" id="4608234">equal</span><span class="op" id="4608239">,</span>&nbsp;<span class="ident" id="4608241">err</span><br>
<span class="lineno"></span><span class="op" id="4608245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="4608248">//&nbsp;lt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&lt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4608286">func</span>&nbsp;<span class="ident" id="4608291">lt</span><span class="op" id="4608293">(</span><span class="ident" id="4608294">arg1</span><span class="op" id="4608298">,</span>&nbsp;<span class="ident" id="4608300">arg2</span>&nbsp;<span class="keyword" id="4608305">interface</span><span class="op" id="4608314">{</span><span class="op" id="4608315">}</span><span class="op" id="4608316">)</span>&nbsp;<span class="op" id="4608318">(</span><span class="builtintype" id="4608319">bool</span><span class="op" id="4608323">,</span>&nbsp;<span class="builtintype" id="4608325">error</span><span class="op" id="4608330">)</span>&nbsp;<span class="op" id="4608332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608335">v1</span>&nbsp;<span class="op" id="4608338">:=</span>&nbsp;<span class="ident" id="4608341">reflect</span><span class="op" id="4608348">.</span><span class="ident" id="4608349">ValueOf</span><span class="op" id="4608356">(</span><span class="ident" id="4608357">arg1</span><span class="op" id="4608361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608364">k1</span><span class="op" id="4608366">,</span>&nbsp;<span class="ident" id="4608368">err</span>&nbsp;<span class="op" id="4608372">:=</span>&nbsp;<span class="ident" id="4608375">basicKind</span><span class="op" id="4608384">(</span><span class="ident" id="4608385">v1</span><span class="op" id="4608387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608390">if</span>&nbsp;<span class="ident" id="4608393">err</span>&nbsp;<span class="op" id="4608397">!=</span>&nbsp;<span class="builtintype" id="4608400">nil</span>&nbsp;<span class="op" id="4608404">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608408">return</span>&nbsp;<span class="builtintype" id="4608415">false</span><span class="op" id="4608420">,</span>&nbsp;<span class="ident" id="4608422">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4608427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608430">v2</span>&nbsp;<span class="op" id="4608433">:=</span>&nbsp;<span class="ident" id="4608436">reflect</span><span class="op" id="4608443">.</span><span class="ident" id="4608444">ValueOf</span><span class="op" id="4608451">(</span><span class="ident" id="4608452">arg2</span><span class="op" id="4608456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608459">k2</span><span class="op" id="4608461">,</span>&nbsp;<span class="ident" id="4608463">err</span>&nbsp;<span class="op" id="4608467">:=</span>&nbsp;<span class="ident" id="4608470">basicKind</span><span class="op" id="4608479">(</span><span class="ident" id="4608480">v2</span><span class="op" id="4608482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608485">if</span>&nbsp;<span class="ident" id="4608488">err</span>&nbsp;<span class="op" id="4608492">!=</span>&nbsp;<span class="builtintype" id="4608495">nil</span>&nbsp;<span class="op" id="4608499">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608503">return</span>&nbsp;<span class="builtintype" id="4608510">false</span><span class="op" id="4608515">,</span>&nbsp;<span class="ident" id="4608517">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4608522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608525">truth</span>&nbsp;<span class="op" id="4608531">:=</span>&nbsp;<span class="builtintype" id="4608534">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608541">if</span>&nbsp;<span class="ident" id="4608544">k1</span>&nbsp;<span class="op" id="4608547">!=</span>&nbsp;<span class="ident" id="4608550">k2</span>&nbsp;<span class="op" id="4608553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4608557">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608630">switch</span>&nbsp;<span class="op" id="4608637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608641">case</span>&nbsp;<span class="ident" id="4608646">k1</span>&nbsp;<span class="op" id="4608649">==</span>&nbsp;<span class="ident" id="4608652">intKind</span>&nbsp;<span class="op" id="4608660">&amp;&amp;</span>&nbsp;<span class="ident" id="4608663">k2</span>&nbsp;<span class="op" id="4608666">==</span>&nbsp;<span class="ident" id="4608669">uintKind</span><span class="op" id="4608677">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608682">truth</span>&nbsp;<span class="op" id="4608688">=</span>&nbsp;<span class="ident" id="4608690">v1</span><span class="op" id="4608692">.</span><span class="ident" id="4608693">Int</span><span class="op" id="4608696">(</span><span class="op" id="4608697">)</span>&nbsp;<span class="op" id="4608699">&lt;</span>&nbsp;<span class="num" id="4608701">0</span>&nbsp;<span class="op" id="4608703">||</span>&nbsp;<span class="ident" id="4608706">uint64</span><span class="op" id="4608712">(</span><span class="ident" id="4608713">v1</span><span class="op" id="4608715">.</span><span class="ident" id="4608716">Int</span><span class="op" id="4608719">(</span><span class="op" id="4608720">)</span><span class="op" id="4608721">)</span>&nbsp;<span class="op" id="4608723">&lt;</span>&nbsp;<span class="ident" id="4608725">v2</span><span class="op" id="4608727">.</span><span class="ident" id="4608728">Uint</span><span class="op" id="4608732">(</span><span class="op" id="4608733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608737">case</span>&nbsp;<span class="ident" id="4608742">k1</span>&nbsp;<span class="op" id="4608745">==</span>&nbsp;<span class="ident" id="4608748">uintKind</span>&nbsp;<span class="op" id="4608757">&amp;&amp;</span>&nbsp;<span class="ident" id="4608760">k2</span>&nbsp;<span class="op" id="4608763">==</span>&nbsp;<span class="ident" id="4608766">intKind</span><span class="op" id="4608773">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608778">truth</span>&nbsp;<span class="op" id="4608784">=</span>&nbsp;<span class="ident" id="4608786">v2</span><span class="op" id="4608788">.</span><span class="ident" id="4608789">Int</span><span class="op" id="4608792">(</span><span class="op" id="4608793">)</span>&nbsp;<span class="op" id="4608795">&gt;=</span>&nbsp;<span class="num" id="4608798">0</span>&nbsp;<span class="op" id="4608800">&amp;&amp;</span>&nbsp;<span class="ident" id="4608803">v1</span><span class="op" id="4608805">.</span><span class="ident" id="4608806">Uint</span><span class="op" id="4608810">(</span><span class="op" id="4608811">)</span>&nbsp;<span class="op" id="4608813">&lt;</span>&nbsp;<span class="ident" id="4608815">uint64</span><span class="op" id="4608821">(</span><span class="ident" id="4608822">v2</span><span class="op" id="4608824">.</span><span class="ident" id="4608825">Int</span><span class="op" id="4608828">(</span><span class="op" id="4608829">)</span><span class="op" id="4608830">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608834">default</span><span class="op" id="4608841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608846">return</span>&nbsp;<span class="builtintype" id="4608853">false</span><span class="op" id="4608858">,</span>&nbsp;<span class="ident" id="4608860">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4608879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4608882">}</span>&nbsp;<span class="keyword" id="4608884">else</span>&nbsp;<span class="op" id="4608889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608893">switch</span>&nbsp;<span class="ident" id="4608900">k1</span>&nbsp;<span class="op" id="4608903">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608907">case</span>&nbsp;<span class="ident" id="4608912">boolKind</span><span class="op" id="4608920">,</span>&nbsp;<span class="ident" id="4608922">complexKind</span><span class="op" id="4608933">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608938">return</span>&nbsp;<span class="builtintype" id="4608945">false</span><span class="op" id="4608950">,</span>&nbsp;<span class="ident" id="4608952">errBadComparisonType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4608975">case</span>&nbsp;<span class="ident" id="4608980">floatKind</span><span class="op" id="4608989">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4608994">truth</span>&nbsp;<span class="op" id="4609000">=</span>&nbsp;<span class="ident" id="4609002">v1</span><span class="op" id="4609004">.</span><span class="ident" id="4609005">Float</span><span class="op" id="4609010">(</span><span class="op" id="4609011">)</span>&nbsp;<span class="op" id="4609013">&lt;</span>&nbsp;<span class="ident" id="4609015">v2</span><span class="op" id="4609017">.</span><span class="ident" id="4609018">Float</span><span class="op" id="4609023">(</span><span class="op" id="4609024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609028">case</span>&nbsp;<span class="ident" id="4609033">intKind</span><span class="op" id="4609040">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4609045">truth</span>&nbsp;<span class="op" id="4609051">=</span>&nbsp;<span class="ident" id="4609053">v1</span><span class="op" id="4609055">.</span><span class="ident" id="4609056">Int</span><span class="op" id="4609059">(</span><span class="op" id="4609060">)</span>&nbsp;<span class="op" id="4609062">&lt;</span>&nbsp;<span class="ident" id="4609064">v2</span><span class="op" id="4609066">.</span><span class="ident" id="4609067">Int</span><span class="op" id="4609070">(</span><span class="op" id="4609071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609075">case</span>&nbsp;<span class="ident" id="4609080">stringKind</span><span class="op" id="4609090">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4609095">truth</span>&nbsp;<span class="op" id="4609101">=</span>&nbsp;<span class="ident" id="4609103">v1</span><span class="op" id="4609105">.</span><span class="ident" id="4609106">String</span><span class="op" id="4609112">(</span><span class="op" id="4609113">)</span>&nbsp;<span class="op" id="4609115">&lt;</span>&nbsp;<span class="ident" id="4609117">v2</span><span class="op" id="4609119">.</span><span class="ident" id="4609120">String</span><span class="op" id="4609126">(</span><span class="op" id="4609127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609131">case</span>&nbsp;<span class="ident" id="4609136">uintKind</span><span class="op" id="4609144">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4609149">truth</span>&nbsp;<span class="op" id="4609155">=</span>&nbsp;<span class="ident" id="4609157">v1</span><span class="op" id="4609159">.</span><span class="ident" id="4609160">Uint</span><span class="op" id="4609164">(</span><span class="op" id="4609165">)</span>&nbsp;<span class="op" id="4609167">&lt;</span>&nbsp;<span class="ident" id="4609169">v2</span><span class="op" id="4609171">.</span><span class="ident" id="4609172">Uint</span><span class="op" id="4609176">(</span><span class="op" id="4609177">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609181">default</span><span class="op" id="4609188">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4609193">panic</span><span class="op" id="4609198">(</span><span class="string" id="4609199">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="4609213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4609217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4609220">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609223">return</span>&nbsp;<span class="ident" id="4609230">truth</span><span class="op" id="4609235">,</span>&nbsp;<span class="builtintype" id="4609237">nil</span><br>
<span class="lineno">400</span><span class="op" id="4609241">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4609244">//&nbsp;le&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;&lt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4609281">func</span>&nbsp;<span class="ident" id="4609286">le</span><span class="op" id="4609288">(</span><span class="ident" id="4609289">arg1</span><span class="op" id="4609293">,</span>&nbsp;<span class="ident" id="4609295">arg2</span>&nbsp;<span class="keyword" id="4609300">interface</span><span class="op" id="4609309">{</span><span class="op" id="4609310">}</span><span class="op" id="4609311">)</span>&nbsp;<span class="op" id="4609313">(</span><span class="builtintype" id="4609314">bool</span><span class="op" id="4609318">,</span>&nbsp;<span class="builtintype" id="4609320">error</span><span class="op" id="4609325">)</span>&nbsp;<span class="op" id="4609327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4609330">//&nbsp;&lt;=&nbsp;is&nbsp;&lt;&nbsp;or&nbsp;==.</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4609349">lessThan</span><span class="op" id="4609357">,</span>&nbsp;<span class="ident" id="4609359">err</span>&nbsp;<span class="op" id="4609363">:=</span>&nbsp;<span class="ident" id="4609366">lt</span><span class="op" id="4609368">(</span><span class="ident" id="4609369">arg1</span><span class="op" id="4609373">,</span>&nbsp;<span class="ident" id="4609375">arg2</span><span class="op" id="4609379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609382">if</span>&nbsp;<span class="ident" id="4609385">lessThan</span>&nbsp;<span class="op" id="4609394">||</span>&nbsp;<span class="ident" id="4609397">err</span>&nbsp;<span class="op" id="4609401">!=</span>&nbsp;<span class="builtintype" id="4609404">nil</span>&nbsp;<span class="op" id="4609408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609412">return</span>&nbsp;<span class="ident" id="4609419">lessThan</span><span class="op" id="4609427">,</span>&nbsp;<span class="ident" id="4609429">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4609434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609437">return</span>&nbsp;<span class="ident" id="4609444">eq</span><span class="op" id="4609446">(</span><span class="ident" id="4609447">arg1</span><span class="op" id="4609451">,</span>&nbsp;<span class="ident" id="4609453">arg2</span><span class="op" id="4609457">)</span><br>
<span class="lineno">410</span><span class="op" id="4609459">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4609462">//&nbsp;gt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4609500">func</span>&nbsp;<span class="ident" id="4609505">gt</span><span class="op" id="4609507">(</span><span class="ident" id="4609508">arg1</span><span class="op" id="4609512">,</span>&nbsp;<span class="ident" id="4609514">arg2</span>&nbsp;<span class="keyword" id="4609519">interface</span><span class="op" id="4609528">{</span><span class="op" id="4609529">}</span><span class="op" id="4609530">)</span>&nbsp;<span class="op" id="4609532">(</span><span class="builtintype" id="4609533">bool</span><span class="op" id="4609537">,</span>&nbsp;<span class="builtintype" id="4609539">error</span><span class="op" id="4609544">)</span>&nbsp;<span class="op" id="4609546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4609549">//&nbsp;&gt;&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;=.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4609577">lessOrEqual</span><span class="op" id="4609588">,</span>&nbsp;<span class="ident" id="4609590">err</span>&nbsp;<span class="op" id="4609594">:=</span>&nbsp;<span class="ident" id="4609597">le</span><span class="op" id="4609599">(</span><span class="ident" id="4609600">arg1</span><span class="op" id="4609604">,</span>&nbsp;<span class="ident" id="4609606">arg2</span><span class="op" id="4609610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609613">if</span>&nbsp;<span class="ident" id="4609616">err</span>&nbsp;<span class="op" id="4609620">!=</span>&nbsp;<span class="builtintype" id="4609623">nil</span>&nbsp;<span class="op" id="4609627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609631">return</span>&nbsp;<span class="builtintype" id="4609638">false</span><span class="op" id="4609643">,</span>&nbsp;<span class="ident" id="4609645">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4609650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609653">return</span>&nbsp;<span class="op" id="4609660">!</span><span class="ident" id="4609661">lessOrEqual</span><span class="op" id="4609672">,</span>&nbsp;<span class="builtintype" id="4609674">nil</span><br>
<span class="lineno">420</span><span class="op" id="4609678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4609681">//&nbsp;ge&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4609720">func</span>&nbsp;<span class="ident" id="4609725">ge</span><span class="op" id="4609727">(</span><span class="ident" id="4609728">arg1</span><span class="op" id="4609732">,</span>&nbsp;<span class="ident" id="4609734">arg2</span>&nbsp;<span class="keyword" id="4609739">interface</span><span class="op" id="4609748">{</span><span class="op" id="4609749">}</span><span class="op" id="4609750">)</span>&nbsp;<span class="op" id="4609752">(</span><span class="builtintype" id="4609753">bool</span><span class="op" id="4609757">,</span>&nbsp;<span class="builtintype" id="4609759">error</span><span class="op" id="4609764">)</span>&nbsp;<span class="op" id="4609766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4609769">//&nbsp;&gt;=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4609797">lessThan</span><span class="op" id="4609805">,</span>&nbsp;<span class="ident" id="4609807">err</span>&nbsp;<span class="op" id="4609811">:=</span>&nbsp;<span class="ident" id="4609814">lt</span><span class="op" id="4609816">(</span><span class="ident" id="4609817">arg1</span><span class="op" id="4609821">,</span>&nbsp;<span class="ident" id="4609823">arg2</span><span class="op" id="4609827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609830">if</span>&nbsp;<span class="ident" id="4609833">err</span>&nbsp;<span class="op" id="4609837">!=</span>&nbsp;<span class="builtintype" id="4609840">nil</span>&nbsp;<span class="op" id="4609844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609848">return</span>&nbsp;<span class="builtintype" id="4609855">false</span><span class="op" id="4609860">,</span>&nbsp;<span class="ident" id="4609862">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4609867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4609870">return</span>&nbsp;<span class="op" id="4609877">!</span><span class="ident" id="4609878">lessThan</span><span class="op" id="4609886">,</span>&nbsp;<span class="builtintype" id="4609888">nil</span><br>
<span class="lineno">430</span><span class="op" id="4609892">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4609895">//&nbsp;HTML&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4609914">var</span>&nbsp;<span class="op" id="4609918">(</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4609921">htmlQuot</span>&nbsp;<span class="op" id="4609930">=</span>&nbsp;<span class="op" id="4609932">[</span><span class="op" id="4609933">]</span><span class="builtintype" id="4609934">byte</span><span class="op" id="4609938">(</span><span class="string" id="4609939">&#34;&amp;#34;&#34;</span><span class="op" id="4609946">)</span>&nbsp;<span class="comment" id="4609948">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;quot;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4609974">htmlApos</span>&nbsp;<span class="op" id="4609983">=</span>&nbsp;<span class="op" id="4609985">[</span><span class="op" id="4609986">]</span><span class="builtintype" id="4609987">byte</span><span class="op" id="4609991">(</span><span class="string" id="4609992">&#34;&amp;#39;&#34;</span><span class="op" id="4609999">)</span>&nbsp;<span class="comment" id="4610001">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;apos;&#34;&nbsp;and&nbsp;apos&nbsp;was&nbsp;not&nbsp;in&nbsp;HTML&nbsp;until&nbsp;HTML5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610064">htmlAmp</span>&nbsp;&nbsp;<span class="op" id="4610073">=</span>&nbsp;<span class="op" id="4610075">[</span><span class="op" id="4610076">]</span><span class="builtintype" id="4610077">byte</span><span class="op" id="4610081">(</span><span class="string" id="4610082">&#34;&amp;amp;&#34;</span><span class="op" id="4610089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610092">htmlLt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4610101">=</span>&nbsp;<span class="op" id="4610103">[</span><span class="op" id="4610104">]</span><span class="builtintype" id="4610105">byte</span><span class="op" id="4610109">(</span><span class="string" id="4610110">&#34;&amp;lt;&#34;</span><span class="op" id="4610116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610119">htmlGt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4610128">=</span>&nbsp;<span class="op" id="4610130">[</span><span class="op" id="4610131">]</span><span class="builtintype" id="4610132">byte</span><span class="op" id="4610136">(</span><span class="string" id="4610137">&#34;&amp;gt;&#34;</span><span class="op" id="4610143">)</span><br>
<span class="lineno">440</span><span class="op" id="4610145">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4610148">//&nbsp;HTMLEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4610228">func</span>&nbsp;<span class="ident" id="4610233">HTMLEscape</span><span class="op" id="4610243">(</span><span class="ident" id="4610244">w</span>&nbsp;<span class="ident" id="4610246">io</span><span class="op" id="4610248">.</span><span class="ident" id="4610249">Writer</span><span class="op" id="4610255">,</span>&nbsp;<span class="ident" id="4610257">b</span>&nbsp;<span class="op" id="4610259">[</span><span class="op" id="4610260">]</span><span class="builtintype" id="4610261">byte</span><span class="op" id="4610265">)</span>&nbsp;<span class="op" id="4610267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610270">last</span>&nbsp;<span class="op" id="4610275">:=</span>&nbsp;<span class="num" id="4610278">0</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610281">for</span>&nbsp;<span class="ident" id="4610285">i</span><span class="op" id="4610286">,</span>&nbsp;<span class="ident" id="4610288">c</span>&nbsp;<span class="op" id="4610290">:=</span>&nbsp;<span class="keyword" id="4610293">range</span>&nbsp;<span class="ident" id="4610299">b</span>&nbsp;<span class="op" id="4610301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610305">var</span>&nbsp;<span class="ident" id="4610309">html</span>&nbsp;<span class="op" id="4610314">[</span><span class="op" id="4610315">]</span><span class="builtintype" id="4610316">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610323">switch</span>&nbsp;<span class="ident" id="4610330">c</span>&nbsp;<span class="op" id="4610332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610336">case</span>&nbsp;<span class="string" id="4610341">&#39;&#34;&#39;</span><span class="op" id="4610344">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610349">html</span>&nbsp;<span class="op" id="4610354">=</span>&nbsp;<span class="ident" id="4610356">htmlQuot</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610367">case</span>&nbsp;<span class="string" id="4610372">&#39;\&#39;&#39;</span><span class="op" id="4610376">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610381">html</span>&nbsp;<span class="op" id="4610386">=</span>&nbsp;<span class="ident" id="4610388">htmlApos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610399">case</span>&nbsp;<span class="string" id="4610404">&#39;&amp;&#39;</span><span class="op" id="4610407">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610412">html</span>&nbsp;<span class="op" id="4610417">=</span>&nbsp;<span class="ident" id="4610419">htmlAmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610429">case</span>&nbsp;<span class="string" id="4610434">&#39;&lt;&#39;</span><span class="op" id="4610437">:</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610442">html</span>&nbsp;<span class="op" id="4610447">=</span>&nbsp;<span class="ident" id="4610449">htmlLt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610458">case</span>&nbsp;<span class="string" id="4610463">&#39;&gt;&#39;</span><span class="op" id="4610466">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610471">html</span>&nbsp;<span class="op" id="4610476">=</span>&nbsp;<span class="ident" id="4610478">htmlGt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610487">default</span><span class="op" id="4610494">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610499">continue</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4610510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610514">w</span><span class="op" id="4610515">.</span><span class="ident" id="4610516">Write</span><span class="op" id="4610521">(</span><span class="ident" id="4610522">b</span><span class="op" id="4610523">[</span><span class="ident" id="4610524">last</span><span class="op" id="4610528">:</span><span class="ident" id="4610529">i</span><span class="op" id="4610530">]</span><span class="op" id="4610531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610535">w</span><span class="op" id="4610536">.</span><span class="ident" id="4610537">Write</span><span class="op" id="4610542">(</span><span class="ident" id="4610543">html</span><span class="op" id="4610547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610551">last</span>&nbsp;<span class="op" id="4610556">=</span>&nbsp;<span class="ident" id="4610558">i</span>&nbsp;<span class="op" id="4610560">+</span>&nbsp;<span class="num" id="4610562">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4610565">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610568">w</span><span class="op" id="4610569">.</span><span class="ident" id="4610570">Write</span><span class="op" id="4610575">(</span><span class="ident" id="4610576">b</span><span class="op" id="4610577">[</span><span class="ident" id="4610578">last</span><span class="op" id="4610582">:</span><span class="op" id="4610583">]</span><span class="op" id="4610584">)</span><br>
<span class="lineno"></span><span class="op" id="4610586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4610589">//&nbsp;HTMLEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4610671">func</span>&nbsp;<span class="ident" id="4610676">HTMLEscapeString</span><span class="op" id="4610692">(</span><span class="ident" id="4610693">s</span>&nbsp;<span class="builtintype" id="4610695">string</span><span class="op" id="4610701">)</span>&nbsp;<span class="builtintype" id="4610703">string</span>&nbsp;<span class="op" id="4610710">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4610713">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610745">if</span>&nbsp;<span class="ident" id="4610748">strings</span><span class="op" id="4610755">.</span><span class="ident" id="4610756">IndexAny</span><span class="op" id="4610764">(</span><span class="ident" id="4610765">s</span><span class="op" id="4610766">,</span>&nbsp;<span class="string" id="4610768">`&#39;&#34;&amp;&lt;&gt;`</span><span class="op" id="4610775">)</span>&nbsp;<span class="op" id="4610777">&lt;</span>&nbsp;<span class="num" id="4610779">0</span>&nbsp;<span class="op" id="4610781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610785">return</span>&nbsp;<span class="ident" id="4610792">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4610795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610798">var</span>&nbsp;<span class="ident" id="4610802">b</span>&nbsp;<span class="ident" id="4610804">bytes</span><span class="op" id="4610809">.</span><span class="ident" id="4610810">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4610818">HTMLEscape</span><span class="op" id="4610828">(</span><span class="op" id="4610829">&amp;</span><span class="ident" id="4610830">b</span><span class="op" id="4610831">,</span>&nbsp;<span class="op" id="4610833">[</span><span class="op" id="4610834">]</span><span class="builtintype" id="4610835">byte</span><span class="op" id="4610839">(</span><span class="ident" id="4610840">s</span><span class="op" id="4610841">)</span><span class="op" id="4610842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4610845">return</span>&nbsp;<span class="ident" id="4610852">b</span><span class="op" id="4610853">.</span><span class="ident" id="4610854">String</span><span class="op" id="4610860">(</span><span class="op" id="4610861">)</span><br>
<span class="lineno"></span><span class="op" id="4610863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4610866">//&nbsp;HTMLEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">480</span><span class="comment" id="4610932">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="4610968">func</span>&nbsp;<span class="ident" id="4610973">HTMLEscaper</span><span class="op" id="4610984">(</span><span class="ident" id="4610985">args</span>&nbsp;<span class="op" id="4610990">...</span><span class="keyword" id="4610993">interface</span><span class="op" id="4611002">{</span><span class="op" id="4611003">}</span><span class="op" id="4611004">)</span>&nbsp;<span class="builtintype" id="4611006">string</span>&nbsp;<span class="op" id="4611013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611016">return</span>&nbsp;<span class="ident" id="4611023">HTMLEscapeString</span><span class="op" id="4611039">(</span><span class="ident" id="4611040">evalArgs</span><span class="op" id="4611048">(</span><span class="ident" id="4611049">args</span><span class="op" id="4611053">)</span><span class="op" id="4611054">)</span><br>
<span class="lineno"></span><span class="op" id="4611056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="comment" id="4611059">//&nbsp;JavaScript&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4611084">var</span>&nbsp;<span class="op" id="4611088">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611091">jsLowUni</span>&nbsp;<span class="op" id="4611100">=</span>&nbsp;<span class="op" id="4611102">[</span><span class="op" id="4611103">]</span><span class="builtintype" id="4611104">byte</span><span class="op" id="4611108">(</span><span class="string" id="4611109">`\u00`</span><span class="op" id="4611115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611118">hex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4611127">=</span>&nbsp;<span class="op" id="4611129">[</span><span class="op" id="4611130">]</span><span class="builtintype" id="4611131">byte</span><span class="op" id="4611135">(</span><span class="string" id="4611136">&#34;0123456789ABCDEF&#34;</span><span class="op" id="4611154">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611158">jsBackslash</span>&nbsp;<span class="op" id="4611170">=</span>&nbsp;<span class="op" id="4611172">[</span><span class="op" id="4611173">]</span><span class="builtintype" id="4611174">byte</span><span class="op" id="4611178">(</span><span class="string" id="4611179">`\\`</span><span class="op" id="4611183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611186">jsApos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4611198">=</span>&nbsp;<span class="op" id="4611200">[</span><span class="op" id="4611201">]</span><span class="builtintype" id="4611202">byte</span><span class="op" id="4611206">(</span><span class="string" id="4611207">`\&#39;`</span><span class="op" id="4611211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611214">jsQuot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4611226">=</span>&nbsp;<span class="op" id="4611228">[</span><span class="op" id="4611229">]</span><span class="builtintype" id="4611230">byte</span><span class="op" id="4611234">(</span><span class="string" id="4611235">`\&#34;`</span><span class="op" id="4611239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611242">jsLt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4611254">=</span>&nbsp;<span class="op" id="4611256">[</span><span class="op" id="4611257">]</span><span class="builtintype" id="4611258">byte</span><span class="op" id="4611262">(</span><span class="string" id="4611263">`\x3C`</span><span class="op" id="4611269">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611272">jsGt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4611284">=</span>&nbsp;<span class="op" id="4611286">[</span><span class="op" id="4611287">]</span><span class="builtintype" id="4611288">byte</span><span class="op" id="4611292">(</span><span class="string" id="4611293">`\x3E`</span><span class="op" id="4611299">)</span><br>
<span class="lineno"></span><span class="op" id="4611301">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4611304">//&nbsp;JSEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="4611388">func</span>&nbsp;<span class="ident" id="4611393">JSEscape</span><span class="op" id="4611401">(</span><span class="ident" id="4611402">w</span>&nbsp;<span class="ident" id="4611404">io</span><span class="op" id="4611406">.</span><span class="ident" id="4611407">Writer</span><span class="op" id="4611413">,</span>&nbsp;<span class="ident" id="4611415">b</span>&nbsp;<span class="op" id="4611417">[</span><span class="op" id="4611418">]</span><span class="builtintype" id="4611419">byte</span><span class="op" id="4611423">)</span>&nbsp;<span class="op" id="4611425">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611428">last</span>&nbsp;<span class="op" id="4611433">:=</span>&nbsp;<span class="num" id="4611436">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611439">for</span>&nbsp;<span class="ident" id="4611443">i</span>&nbsp;<span class="op" id="4611445">:=</span>&nbsp;<span class="num" id="4611448">0</span><span class="op" id="4611449">;</span>&nbsp;<span class="ident" id="4611451">i</span>&nbsp;<span class="op" id="4611453">&lt;</span>&nbsp;<span class="builtinfunc" id="4611455">len</span><span class="op" id="4611458">(</span><span class="ident" id="4611459">b</span><span class="op" id="4611460">)</span><span class="op" id="4611461">;</span>&nbsp;<span class="ident" id="4611463">i</span><span class="op" id="4611464">++</span>&nbsp;<span class="op" id="4611467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611471">c</span>&nbsp;<span class="op" id="4611473">:=</span>&nbsp;<span class="ident" id="4611476">b</span><span class="op" id="4611477">[</span><span class="ident" id="4611478">i</span><span class="op" id="4611479">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611484">if</span>&nbsp;<span class="op" id="4611487">!</span><span class="ident" id="4611488">jsIsSpecial</span><span class="op" id="4611499">(</span><span class="builtintype" id="4611500">rune</span><span class="op" id="4611504">(</span><span class="ident" id="4611505">c</span><span class="op" id="4611506">)</span><span class="op" id="4611507">)</span>&nbsp;<span class="op" id="4611509">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4611514">//&nbsp;fast&nbsp;path:&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611545">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4611556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611560">w</span><span class="op" id="4611561">.</span><span class="ident" id="4611562">Write</span><span class="op" id="4611567">(</span><span class="ident" id="4611568">b</span><span class="op" id="4611569">[</span><span class="ident" id="4611570">last</span><span class="op" id="4611574">:</span><span class="ident" id="4611575">i</span><span class="op" id="4611576">]</span><span class="op" id="4611577">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611582">if</span>&nbsp;<span class="ident" id="4611585">c</span>&nbsp;<span class="op" id="4611587">&lt;</span>&nbsp;<span class="ident" id="4611589">utf8</span><span class="op" id="4611593">.</span><span class="ident" id="4611594">RuneSelf</span>&nbsp;<span class="op" id="4611603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4611608">//&nbsp;Quotes,&nbsp;slashes&nbsp;and&nbsp;angle&nbsp;brackets&nbsp;get&nbsp;quoted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4611661">//&nbsp;Control&nbsp;characters&nbsp;get&nbsp;written&nbsp;as&nbsp;\u00XX.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611709">switch</span>&nbsp;<span class="ident" id="4611716">c</span>&nbsp;<span class="op" id="4611718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611723">case</span>&nbsp;<span class="string" id="4611728">&#39;\\&#39;</span><span class="op" id="4611732">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611738">w</span><span class="op" id="4611739">.</span><span class="ident" id="4611740">Write</span><span class="op" id="4611745">(</span><span class="ident" id="4611746">jsBackslash</span><span class="op" id="4611757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611762">case</span>&nbsp;<span class="string" id="4611767">&#39;\&#39;&#39;</span><span class="op" id="4611771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611777">w</span><span class="op" id="4611778">.</span><span class="ident" id="4611779">Write</span><span class="op" id="4611784">(</span><span class="ident" id="4611785">jsApos</span><span class="op" id="4611791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611796">case</span>&nbsp;<span class="string" id="4611801">&#39;&#34;&#39;</span><span class="op" id="4611804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611810">w</span><span class="op" id="4611811">.</span><span class="ident" id="4611812">Write</span><span class="op" id="4611817">(</span><span class="ident" id="4611818">jsQuot</span><span class="op" id="4611824">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611829">case</span>&nbsp;<span class="string" id="4611834">&#39;&lt;&#39;</span><span class="op" id="4611837">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611843">w</span><span class="op" id="4611844">.</span><span class="ident" id="4611845">Write</span><span class="op" id="4611850">(</span><span class="ident" id="4611851">jsLt</span><span class="op" id="4611855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611860">case</span>&nbsp;<span class="string" id="4611865">&#39;&gt;&#39;</span><span class="op" id="4611868">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611874">w</span><span class="op" id="4611875">.</span><span class="ident" id="4611876">Write</span><span class="op" id="4611881">(</span><span class="ident" id="4611882">jsGt</span><span class="op" id="4611886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4611891">default</span><span class="op" id="4611898">:</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611904">w</span><span class="op" id="4611905">.</span><span class="ident" id="4611906">Write</span><span class="op" id="4611911">(</span><span class="ident" id="4611912">jsLowUni</span><span class="op" id="4611920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611926">t</span><span class="op" id="4611927">,</span>&nbsp;<span class="ident" id="4611929">b</span>&nbsp;<span class="op" id="4611931">:=</span>&nbsp;<span class="ident" id="4611934">c</span><span class="op" id="4611935">&gt;&gt;</span><span class="num" id="4611937">4</span><span class="op" id="4611938">,</span>&nbsp;<span class="ident" id="4611940">c</span><span class="op" id="4611941">&amp;</span><span class="num" id="4611942">0x0f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611951">w</span><span class="op" id="4611952">.</span><span class="ident" id="4611953">Write</span><span class="op" id="4611958">(</span><span class="ident" id="4611959">hex</span><span class="op" id="4611962">[</span><span class="ident" id="4611963">t</span>&nbsp;<span class="op" id="4611965">:</span>&nbsp;<span class="ident" id="4611967">t</span><span class="op" id="4611968">+</span><span class="num" id="4611969">1</span><span class="op" id="4611970">]</span><span class="op" id="4611971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4611977">w</span><span class="op" id="4611978">.</span><span class="ident" id="4611979">Write</span><span class="op" id="4611984">(</span><span class="ident" id="4611985">hex</span><span class="op" id="4611988">[</span><span class="ident" id="4611989">b</span>&nbsp;<span class="op" id="4611991">:</span>&nbsp;<span class="ident" id="4611993">b</span><span class="op" id="4611994">+</span><span class="num" id="4611995">1</span><span class="op" id="4611996">]</span><span class="op" id="4611997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4612002">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4612006">}</span>&nbsp;<span class="keyword" id="4612008">else</span>&nbsp;<span class="op" id="4612013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4612018">//&nbsp;Unicode&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4612038">r</span><span class="op" id="4612039">,</span>&nbsp;<span class="ident" id="4612041">size</span>&nbsp;<span class="op" id="4612046">:=</span>&nbsp;<span class="ident" id="4612049">utf8</span><span class="op" id="4612053">.</span><span class="ident" id="4612054">DecodeRune</span><span class="op" id="4612064">(</span><span class="ident" id="4612065">b</span><span class="op" id="4612066">[</span><span class="ident" id="4612067">i</span><span class="op" id="4612068">:</span><span class="op" id="4612069">]</span><span class="op" id="4612070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4612075">if</span>&nbsp;<span class="ident" id="4612078">unicode</span><span class="op" id="4612085">.</span><span class="ident" id="4612086">IsPrint</span><span class="op" id="4612093">(</span><span class="ident" id="4612094">r</span><span class="op" id="4612095">)</span>&nbsp;<span class="op" id="4612097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4612103">w</span><span class="op" id="4612104">.</span><span class="ident" id="4612105">Write</span><span class="op" id="4612110">(</span><span class="ident" id="4612111">b</span><span class="op" id="4612112">[</span><span class="ident" id="4612113">i</span>&nbsp;<span class="op" id="4612115">:</span>&nbsp;<span class="ident" id="4612117">i</span><span class="op" id="4612118">+</span><span class="ident" id="4612119">size</span><span class="op" id="4612123">]</span><span class="op" id="4612124">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4612129">}</span>&nbsp;<span class="keyword" id="4612131">else</span>&nbsp;<span class="op" id="4612136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4612142">fmt</span><span class="op" id="4612145">.</span><span class="ident" id="4612146">Fprintf</span><span class="op" id="4612153">(</span><span class="ident" id="4612154">w</span><span class="op" id="4612155">,</span>&nbsp;<span class="string" id="4612157">&#34;\\u%04X&#34;</span><span class="op" id="4612166">,</span>&nbsp;<span class="ident" id="4612168">r</span><span class="op" id="4612169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4612174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4612179">i</span>&nbsp;<span class="op" id="4612181">+=</span>&nbsp;<span class="ident" id="4612184">size</span>&nbsp;<span class="op" id="4612189">-</span>&nbsp;<span class="num" id="4612191">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4612195">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4612199">last</span>&nbsp;<span class="op" id="4612204">=</span>&nbsp;<span class="ident" id="4612206">i</span>&nbsp;<span class="op" id="4612208">+</span>&nbsp;<span class="num" id="4612210">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4612213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4612216">w</span><span class="op" id="4612217">.</span><span class="ident" id="4612218">Write</span><span class="op" id="4612223">(</span><span class="ident" id="4612224">b</span><span class="op" id="4612225">[</span><span class="ident" id="4612226">last</span><span class="op" id="4612230">:</span><span class="op" id="4612231">]</span><span class="op" id="4612232">)</span><br>
<span class="lineno"></span><span class="op" id="4612234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span><span class="comment" id="4612237">//&nbsp;JSEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4612323">func</span>&nbsp;<span class="ident" id="4612328">JSEscapeString</span><span class="op" id="4612342">(</span><span class="ident" id="4612343">s</span>&nbsp;<span class="builtintype" id="4612345">string</span><span class="op" id="4612351">)</span>&nbsp;<span class="builtintype" id="4612353">string</span>&nbsp;<span class="op" id="4612360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4612363">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4612395">if</span>&nbsp;<span class="ident" id="4612398">strings</span><span class="op" id="4612405">.</span><span class="ident" id="4612406">IndexFunc</span><span class="op" id="4612415">(</span><span class="ident" id="4612416">s</span><span class="op" id="4612417">,</span>&nbsp;<span class="ident" id="4612419">jsIsSpecial</span><span class="op" id="4612430">)</span>&nbsp;<span class="op" id="4612432">&lt;</span>&nbsp;<span class="num" id="4612434">0</span>&nbsp;<span class="op" id="4612436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4612440">return</span>&nbsp;<span class="ident" id="4612447">s</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4612450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4612453">var</span>&nbsp;<span class="ident" id="4612457">b</span>&nbsp;<span class="ident" id="4612459">bytes</span><span class="op" id="4612464">.</span><span class="ident" id="4612465">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4612473">JSEscape</span><span class="op" id="4612481">(</span><span class="op" id="4612482">&amp;</span><span class="ident" id="4612483">b</span><span class="op" id="4612484">,</span>&nbsp;<span class="op" id="4612486">[</span><span class="op" id="4612487">]</span><span class="builtintype" id="4612488">byte</span><span class="op" id="4612492">(</span><span class="ident" id="4612493">s</span><span class="op" id="4612494">)</span><span class="op" id="4612495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4612498">return</span>&nbsp;<span class="ident" id="4612505">b</span><span class="op" id="4612506">.</span><span class="ident" id="4612507">String</span><span class="op" id="4612513">(</span><span class="op" id="4612514">)</span><br>
<span class="lineno"></span><span class="op" id="4612516">}</span><br>
<span class="lineno">555</span><br>
<span class="lineno"></span><span class="keyword" id="4612519">func</span>&nbsp;<span class="ident" id="4612524">jsIsSpecial</span><span class="op" id="4612535">(</span><span class="ident" id="4612536">r</span>&nbsp;<span class="builtintype" id="4612538">rune</span><span class="op" id="4612542">)</span>&nbsp;<span class="builtintype" id="4612544">bool</span>&nbsp;<span class="op" id="4612549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4612552">switch</span>&nbsp;<span class="ident" id="4612559">r</span>&nbsp;<span class="op" id="4612561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4612564">case</span>&nbsp;<span class="string" id="4612569">&#39;\\&#39;</span><span class="op" id="4612573">,</span>&nbsp;<span class="string" id="4612575">&#39;\&#39;&#39;</span><span class="op" id="4612579">,</span>&nbsp;<span class="string" id="4612581">&#39;&#34;&#39;</span><span class="op" id="4612584">,</span>&nbsp;<span class="string" id="4612586">&#39;&lt;&#39;</span><span class="op" id="4612589">,</span>&nbsp;<span class="string" id="4612591">&#39;&gt;&#39;</span><span class="op" id="4612594">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4612598">return</span>&nbsp;<span class="builtintype" id="4612605">true</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4612611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4612614">return</span>&nbsp;<span class="ident" id="4612621">r</span>&nbsp;<span class="op" id="4612623">&lt;</span>&nbsp;<span class="string" id="4612625">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4612629">||</span>&nbsp;<span class="ident" id="4612632">utf8</span><span class="op" id="4612636">.</span><span class="ident" id="4612637">RuneSelf</span>&nbsp;<span class="op" id="4612646">&lt;=</span>&nbsp;<span class="ident" id="4612649">r</span><br>
<span class="lineno"></span><span class="op" id="4612651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4612654">//&nbsp;JSEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">565</span><span class="comment" id="4612724">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="4612760">func</span>&nbsp;<span class="ident" id="4612765">JSEscaper</span><span class="op" id="4612774">(</span><span class="ident" id="4612775">args</span>&nbsp;<span class="op" id="4612780">...</span><span class="keyword" id="4612783">interface</span><span class="op" id="4612792">{</span><span class="op" id="4612793">}</span><span class="op" id="4612794">)</span>&nbsp;<span class="builtintype" id="4612796">string</span>&nbsp;<span class="op" id="4612803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4612806">return</span>&nbsp;<span class="ident" id="4612813">JSEscapeString</span><span class="op" id="4612827">(</span><span class="ident" id="4612828">evalArgs</span><span class="op" id="4612836">(</span><span class="ident" id="4612837">args</span><span class="op" id="4612841">)</span><span class="op" id="4612842">)</span><br>
<span class="lineno"></span><span class="op" id="4612844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="4612847">//&nbsp;URLQueryEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;value&nbsp;of&nbsp;the&nbsp;textual&nbsp;representation&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4612925">//&nbsp;its&nbsp;arguments&nbsp;in&nbsp;a&nbsp;form&nbsp;suitable&nbsp;for&nbsp;embedding&nbsp;in&nbsp;a&nbsp;URL&nbsp;query.</span><br>
<span class="lineno"></span><span class="keyword" id="4612991">func</span>&nbsp;<span class="ident" id="4612996">URLQueryEscaper</span><span class="op" id="4613011">(</span><span class="ident" id="4613012">args</span>&nbsp;<span class="op" id="4613017">...</span><span class="keyword" id="4613020">interface</span><span class="op" id="4613029">{</span><span class="op" id="4613030">}</span><span class="op" id="4613031">)</span>&nbsp;<span class="builtintype" id="4613033">string</span>&nbsp;<span class="op" id="4613040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4613043">return</span>&nbsp;<span class="ident" id="4613050">url</span><span class="op" id="4613053">.</span><span class="ident" id="4613054">QueryEscape</span><span class="op" id="4613065">(</span><span class="ident" id="4613066">evalArgs</span><span class="op" id="4613074">(</span><span class="ident" id="4613075">args</span><span class="op" id="4613079">)</span><span class="op" id="4613080">)</span><br>
<span class="lineno"></span><span class="op" id="4613082">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="4613085">//&nbsp;evalArgs&nbsp;formats&nbsp;the&nbsp;list&nbsp;of&nbsp;arguments&nbsp;into&nbsp;a&nbsp;string.&nbsp;It&nbsp;is&nbsp;therefore&nbsp;equivalent&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4613172">//&nbsp;&nbsp;&nbsp;&nbsp;fmt.Sprint(args...)</span><br>
<span class="lineno"></span><span class="comment" id="4613195">//&nbsp;except&nbsp;that&nbsp;each&nbsp;argument&nbsp;is&nbsp;indirected&nbsp;(if&nbsp;a&nbsp;pointer),&nbsp;as&nbsp;required,</span><br>
<span class="lineno"></span><span class="comment" id="4613267">//&nbsp;using&nbsp;the&nbsp;same&nbsp;rules&nbsp;as&nbsp;the&nbsp;default&nbsp;string&nbsp;evaluation&nbsp;during&nbsp;template</span><br>
<span class="lineno">580</span><span class="comment" id="4613340">//&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="4613354">func</span>&nbsp;<span class="ident" id="4613359">evalArgs</span><span class="op" id="4613367">(</span><span class="ident" id="4613368">args</span>&nbsp;<span class="op" id="4613373">[</span><span class="op" id="4613374">]</span><span class="keyword" id="4613375">interface</span><span class="op" id="4613384">{</span><span class="op" id="4613385">}</span><span class="op" id="4613386">)</span>&nbsp;<span class="builtintype" id="4613388">string</span>&nbsp;<span class="op" id="4613395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4613398">ok</span>&nbsp;<span class="op" id="4613401">:=</span>&nbsp;<span class="builtintype" id="4613404">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4613411">var</span>&nbsp;<span class="ident" id="4613415">s</span>&nbsp;<span class="builtintype" id="4613417">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4613425">//&nbsp;Fast&nbsp;path&nbsp;for&nbsp;simple&nbsp;common&nbsp;case.</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4613463">if</span>&nbsp;<span class="builtinfunc" id="4613466">len</span><span class="op" id="4613469">(</span><span class="ident" id="4613470">args</span><span class="op" id="4613474">)</span>&nbsp;<span class="op" id="4613476">==</span>&nbsp;<span class="num" id="4613479">1</span>&nbsp;<span class="op" id="4613481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4613485">s</span><span class="op" id="4613486">,</span>&nbsp;<span class="ident" id="4613488">ok</span>&nbsp;<span class="op" id="4613491">=</span>&nbsp;<span class="ident" id="4613493">args</span><span class="op" id="4613497">[</span><span class="num" id="4613498">0</span><span class="op" id="4613499">]</span><span class="op" id="4613500">.</span><span class="op" id="4613501">(</span><span class="builtintype" id="4613502">string</span><span class="op" id="4613508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4613511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4613514">if</span>&nbsp;<span class="op" id="4613517">!</span><span class="ident" id="4613518">ok</span>&nbsp;<span class="op" id="4613521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4613525">for</span>&nbsp;<span class="ident" id="4613529">i</span><span class="op" id="4613530">,</span>&nbsp;<span class="ident" id="4613532">arg</span>&nbsp;<span class="op" id="4613536">:=</span>&nbsp;<span class="keyword" id="4613539">range</span>&nbsp;<span class="ident" id="4613545">args</span>&nbsp;<span class="op" id="4613550">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4613555">a</span><span class="op" id="4613556">,</span>&nbsp;<span class="ident" id="4613558">ok</span>&nbsp;<span class="op" id="4613561">:=</span>&nbsp;<span class="ident" id="4613564">printableValue</span><span class="op" id="4613578">(</span><span class="ident" id="4613579">reflect</span><span class="op" id="4613586">.</span><span class="ident" id="4613587">ValueOf</span><span class="op" id="4613594">(</span><span class="ident" id="4613595">arg</span><span class="op" id="4613598">)</span><span class="op" id="4613599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4613604">if</span>&nbsp;<span class="ident" id="4613607">ok</span>&nbsp;<span class="op" id="4613610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4613616">args</span><span class="op" id="4613620">[</span><span class="ident" id="4613621">i</span><span class="op" id="4613622">]</span>&nbsp;<span class="op" id="4613624">=</span>&nbsp;<span class="ident" id="4613626">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4613631">}</span>&nbsp;<span class="comment" id="4613633">//&nbsp;else&nbsp;left&nbsp;fmt&nbsp;do&nbsp;its&nbsp;thing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4613665">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4613669">s</span>&nbsp;<span class="op" id="4613671">=</span>&nbsp;<span class="ident" id="4613673">fmt</span><span class="op" id="4613676">.</span><span class="ident" id="4613677">Sprint</span><span class="op" id="4613683">(</span><span class="ident" id="4613684">args</span><span class="op" id="4613688">...</span><span class="op" id="4613691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4613694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4613697">return</span>&nbsp;<span class="ident" id="4613704">s</span><br>
<span class="lineno"></span><span class="op" id="4613706">}</span>
</div>
</body>
</html>
