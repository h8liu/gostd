<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6736324">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6736379">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6736433">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6736484">package</span>&nbsp;<span class="ident" id="6736492">parser</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6736500">import</span>&nbsp;<span class="op" id="6736507">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736510">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736522">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6736535">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6736545">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6736548">var</span>&nbsp;<span class="ident" id="6736552">src</span>&nbsp;<span class="op" id="6736556">=</span>&nbsp;<span class="ident" id="6736558"><a href="/go/parser/performance_test.go.html#6736586">readFile</a></span><span class="op" id="6736566">(</span><span class="string" id="6736567">&#34;parser.go&#34;</span><span class="op" id="6736578">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6736581">func</span>&nbsp;<span class="ident" id="6736586">readFile</span><span class="op" id="6736594">(</span><span class="ident" id="6736595">filename</span>&nbsp;<span class="builtintype" id="6736604">string</span><span class="op" id="6736610">)</span>&nbsp;<span class="op" id="6736612">[</span><span class="op" id="6736613">]</span><span class="builtintype" id="6736614">byte</span>&nbsp;<span class="op" id="6736619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736622">data</span><span class="op" id="6736626">,</span>&nbsp;<span class="ident" id="6736628">err</span>&nbsp;<span class="op" id="6736632">:=</span>&nbsp;<span class="ident" id="6736635"><a href="/go/parser/performance_test.go.html#6736522">ioutil</a></span><span class="op" id="6736641">.</span><span class="ident" id="6736642">ReadFile</span><span class="op" id="6736650">(</span><span class="ident" id="6736651"><a href="/go/parser/performance_test.go.html#6736595">filename</a></span><span class="op" id="6736659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736662">if</span>&nbsp;<span class="ident" id="6736665"><a href="/go/parser/performance_test.go.html#6736628">err</a></span>&nbsp;<span class="op" id="6736669">!=</span>&nbsp;<span class="ident" id="6736672">nil</span>&nbsp;<span class="op" id="6736676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6736680">panic</span><span class="op" id="6736685">(</span><span class="ident" id="6736686"><a href="/go/parser/performance_test.go.html#6736628">err</a></span><span class="op" id="6736689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736692">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736695">return</span>&nbsp;<span class="ident" id="6736702"><a href="/go/parser/performance_test.go.html#6736622">data</a></span><br>
<span class="lineno"></span><span class="op" id="6736707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6736710">func</span>&nbsp;<span class="ident" id="6736715">BenchmarkParse</span><span class="op" id="6736729">(</span><span class="ident" id="6736730">b</span>&nbsp;<span class="op" id="6736732">*</span><span class="ident" id="6736733"><a href="/go/parser/performance_test.go.html#6736535">testing</a></span><span class="op" id="6736740">.</span><span class="ident" id="6736741">B</span><span class="op" id="6736742">)</span>&nbsp;<span class="op" id="6736744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736747"><a href="/go/parser/performance_test.go.html#6736730">b</a></span><span class="op" id="6736748">.</span><span class="ident" id="6736749">SetBytes</span><span class="op" id="6736757">(</span><span class="ident" id="6736758">int64</span><span class="op" id="6736763">(</span><span class="builtinfunc" id="6736764">len</span><span class="op" id="6736767">(</span><span class="ident" id="6736768"><a href="/go/parser/performance_test.go.html#6736552">src</a></span><span class="op" id="6736771">)</span><span class="op" id="6736772">)</span><span class="op" id="6736773">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736776">for</span>&nbsp;<span class="ident" id="6736780">i</span>&nbsp;<span class="op" id="6736782">:=</span>&nbsp;<span class="num" id="6736785">0</span><span class="op" id="6736786">;</span>&nbsp;<span class="ident" id="6736788"><a href="/go/parser/performance_test.go.html#6736780">i</a></span>&nbsp;<span class="op" id="6736790">&lt;</span>&nbsp;<span class="ident" id="6736792"><a href="/go/parser/performance_test.go.html#6736730">b</a></span><span class="op" id="6736793">.</span><span class="ident" id="6736794">N</span><span class="op" id="6736795">;</span>&nbsp;<span class="ident" id="6736797"><a href="/go/parser/performance_test.go.html#6736780">i</a></span><span class="op" id="6736798">++</span>&nbsp;<span class="op" id="6736801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736805">if</span>&nbsp;<span class="ident" id="6736808">_</span><span class="op" id="6736809">,</span>&nbsp;<span class="ident" id="6736811">err</span>&nbsp;<span class="op" id="6736815">:=</span>&nbsp;<span class="ident" id="6736818"><a href="/go/parser/interface.go.html#6034508">ParseFile</a></span><span class="op" id="6736827">(</span><span class="ident" id="6736828"><a href="/go/parser/performance_test.go.html#6736510">token</a></span><span class="op" id="6736833">.</span><span class="ident" id="6736834">NewFileSet</span><span class="op" id="6736844">(</span><span class="op" id="6736845">)</span><span class="op" id="6736846">,</span>&nbsp;<span class="string" id="6736848">&#34;&#34;</span><span class="op" id="6736850">,</span>&nbsp;<span class="ident" id="6736852"><a href="/go/parser/performance_test.go.html#6736552">src</a></span><span class="op" id="6736855">,</span>&nbsp;<span class="ident" id="6736857"><a href="/go/parser/interface.go.html#6033015">ParseComments</a></span><span class="op" id="6736870">)</span><span class="op" id="6736871">;</span>&nbsp;<span class="ident" id="6736873"><a href="/go/parser/performance_test.go.html#6736811">err</a></span>&nbsp;<span class="op" id="6736877">!=</span>&nbsp;<span class="ident" id="6736880">nil</span>&nbsp;<span class="op" id="6736884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736889"><a href="/go/parser/performance_test.go.html#6736730">b</a></span><span class="op" id="6736890">.</span><span class="ident" id="6736891">Fatalf</span><span class="op" id="6736897">(</span><span class="string" id="6736898">&#34;benchmark&nbsp;failed&nbsp;due&nbsp;to&nbsp;parse&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6736939">,</span>&nbsp;<span class="ident" id="6736941"><a href="/go/parser/performance_test.go.html#6736811">err</a></span><span class="op" id="6736944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736951">}</span><br>
<span class="lineno">30</span><span class="op" id="6736953">}</span>
</div>
</body>
</html>
