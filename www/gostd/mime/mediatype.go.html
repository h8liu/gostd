<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime</h2>
<ul>
<li><a href="/gostd/mime/grammar.go.html">grammar.go</a></li>
<li><a href="/gostd/mime/mediatype.go.html" class="current">mediatype.go</a></li>
<li><a href="/gostd/mime/mediatype_test.go.html">mediatype_test.go</a></li>
<li><a href="/gostd/mime/type.go.html">type.go</a></li>
<li><a href="/gostd/mime/type_test.go.html">type_test.go</a></li>
<li><a href="/gostd/mime/type_unix.go.html">type_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4294647">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4294702">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4294756">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4294807">package</span>&nbsp;<span class="ident" id="4294815">mime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4294821">import</span>&nbsp;<span class="op" id="4294828">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4294831">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4294840">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4294850">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4294857">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4294865">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4294876">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="4294886">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4294889">//&nbsp;FormatMediaType&nbsp;serializes&nbsp;mediatype&nbsp;t&nbsp;and&nbsp;the&nbsp;parameters</span><br>
<span class="lineno"></span><span class="comment" id="4294950">//&nbsp;param&nbsp;as&nbsp;a&nbsp;media&nbsp;type&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;2045&nbsp;and&nbsp;RFC&nbsp;2616.</span><br>
<span class="lineno"></span><span class="comment" id="4295012">//&nbsp;The&nbsp;type&nbsp;and&nbsp;parameter&nbsp;names&nbsp;are&nbsp;written&nbsp;in&nbsp;lower-case.</span><br>
<span class="lineno"></span><span class="comment" id="4295071">//&nbsp;When&nbsp;any&nbsp;of&nbsp;the&nbsp;arguments&nbsp;result&nbsp;in&nbsp;a&nbsp;standard&nbsp;violation&nbsp;then</span><br>
<span class="lineno">20</span><span class="comment" id="4295136">//&nbsp;FormatMediaType&nbsp;returns&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4295181">func</span>&nbsp;<span class="ident" id="4295186">FormatMediaType</span><span class="op" id="4295201">(</span><span class="ident" id="4295202">t</span>&nbsp;<span class="builtintype" id="4295204">string</span><span class="op" id="4295210">,</span>&nbsp;<span class="ident" id="4295212">param</span>&nbsp;<span class="keyword" id="4295218">map</span><span class="op" id="4295221">[</span><span class="builtintype" id="4295222">string</span><span class="op" id="4295228">]</span><span class="builtintype" id="4295229">string</span><span class="op" id="4295235">)</span>&nbsp;<span class="builtintype" id="4295237">string</span>&nbsp;<span class="op" id="4295244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295247">slash</span>&nbsp;<span class="op" id="4295253">:=</span>&nbsp;<span class="ident" id="4295256"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4295263">.</span><span class="ident" id="4295264"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="4295269">(</span><span class="ident" id="4295270"><a href="/gostd/mime/mediatype.go.html#4295202">t</a></span><span class="op" id="4295271">,</span>&nbsp;<span class="string" id="4295273">&#34;/&#34;</span><span class="op" id="4295276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295279">if</span>&nbsp;<span class="ident" id="4295282"><a href="/gostd/mime/mediatype.go.html#4295247">slash</a></span>&nbsp;<span class="op" id="4295288">==</span>&nbsp;<span class="op" id="4295291">-</span><span class="num" id="4295292">1</span>&nbsp;<span class="op" id="4295294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295298">return</span>&nbsp;<span class="string" id="4295305">&#34;&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4295309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295312">major</span><span class="op" id="4295317">,</span>&nbsp;<span class="ident" id="4295319">sub</span>&nbsp;<span class="op" id="4295323">:=</span>&nbsp;<span class="ident" id="4295326"><a href="/gostd/mime/mediatype.go.html#4295202">t</a></span><span class="op" id="4295327">[</span><span class="op" id="4295328">:</span><span class="ident" id="4295329"><a href="/gostd/mime/mediatype.go.html#4295247">slash</a></span><span class="op" id="4295334">]</span><span class="op" id="4295335">,</span>&nbsp;<span class="ident" id="4295337"><a href="/gostd/mime/mediatype.go.html#4295202">t</a></span><span class="op" id="4295338">[</span><span class="ident" id="4295339"><a href="/gostd/mime/mediatype.go.html#4295247">slash</a></span><span class="op" id="4295344">+</span><span class="num" id="4295345">1</span><span class="op" id="4295346">:</span><span class="op" id="4295347">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295350">if</span>&nbsp;<span class="op" id="4295353">!</span><span class="ident" id="4295354"><a href="/gostd/mime/grammar.go.html#4294538">isToken</a></span><span class="op" id="4295361">(</span><span class="ident" id="4295362"><a href="/gostd/mime/mediatype.go.html#4295312">major</a></span><span class="op" id="4295367">)</span>&nbsp;<span class="op" id="4295369">||</span>&nbsp;<span class="op" id="4295372">!</span><span class="ident" id="4295373"><a href="/gostd/mime/grammar.go.html#4294538">isToken</a></span><span class="op" id="4295380">(</span><span class="ident" id="4295381"><a href="/gostd/mime/mediatype.go.html#4295319">sub</a></span><span class="op" id="4295384">)</span>&nbsp;<span class="op" id="4295386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295390">return</span>&nbsp;<span class="string" id="4295397">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4295401">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295404">var</span>&nbsp;<span class="ident" id="4295408">b</span>&nbsp;<span class="ident" id="4295410"><a href="/gostd/mime/mediatype.go.html#4294831">bytes</a></span><span class="op" id="4295415">.</span><span class="ident" id="4295416"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295424"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4295425">.</span><span class="ident" id="4295426"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4295437">(</span><span class="ident" id="4295438"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4295445">.</span><span class="ident" id="4295446"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="4295453">(</span><span class="ident" id="4295454"><a href="/gostd/mime/mediatype.go.html#4295312">major</a></span><span class="op" id="4295459">)</span><span class="op" id="4295460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295463"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4295464">.</span><span class="ident" id="4295465"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="4295474">(</span><span class="string" id="4295475">&#39;/&#39;</span><span class="op" id="4295478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295481"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4295482">.</span><span class="ident" id="4295483"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4295494">(</span><span class="ident" id="4295495"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4295502">.</span><span class="ident" id="4295503"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="4295510">(</span><span class="ident" id="4295511"><a href="/gostd/mime/mediatype.go.html#4295319">sub</a></span><span class="op" id="4295514">)</span><span class="op" id="4295515">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295519">attrs</span>&nbsp;<span class="op" id="4295525">:=</span>&nbsp;<span class="builtinfunc" id="4295528">make</span><span class="op" id="4295532">(</span><span class="op" id="4295533">[</span><span class="op" id="4295534">]</span><span class="builtintype" id="4295535">string</span><span class="op" id="4295541">,</span>&nbsp;<span class="num" id="4295543">0</span><span class="op" id="4295544">,</span>&nbsp;<span class="builtinfunc" id="4295546">len</span><span class="op" id="4295549">(</span><span class="ident" id="4295550"><a href="/gostd/mime/mediatype.go.html#4295212">param</a></span><span class="op" id="4295555">)</span><span class="op" id="4295556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295559">for</span>&nbsp;<span class="ident" id="4295563">a</span>&nbsp;<span class="op" id="4295565">:=</span>&nbsp;<span class="keyword" id="4295568">range</span>&nbsp;<span class="ident" id="4295574"><a href="/gostd/mime/mediatype.go.html#4295212">param</a></span>&nbsp;<span class="op" id="4295580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295584"><a href="/gostd/mime/mediatype.go.html#4295519">attrs</a></span>&nbsp;<span class="op" id="4295590">=</span>&nbsp;<span class="builtinfunc" id="4295592">append</span><span class="op" id="4295598">(</span><span class="ident" id="4295599"><a href="/gostd/mime/mediatype.go.html#4295519">attrs</a></span><span class="op" id="4295604">,</span>&nbsp;<span class="ident" id="4295606"><a href="/gostd/mime/mediatype.go.html#4295563">a</a></span><span class="op" id="4295607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4295610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295613"><a href="/gostd/mime/mediatype.go.html#4294857">sort</a></span><span class="op" id="4295617">.</span><span class="ident" id="4295618"><a href="/gostd/sort/sort.go.html#2017831">Strings</a></span><span class="op" id="4295625">(</span><span class="ident" id="4295626"><a href="/gostd/mime/mediatype.go.html#4295519">attrs</a></span><span class="op" id="4295631">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295635">for</span>&nbsp;<span class="ident" id="4295639">_</span><span class="op" id="4295640">,</span>&nbsp;<span class="ident" id="4295642">attribute</span>&nbsp;<span class="op" id="4295652">:=</span>&nbsp;<span class="keyword" id="4295655">range</span>&nbsp;<span class="ident" id="4295661"><a href="/gostd/mime/mediatype.go.html#4295519">attrs</a></span>&nbsp;<span class="op" id="4295667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295671">value</span>&nbsp;<span class="op" id="4295677">:=</span>&nbsp;<span class="ident" id="4295680"><a href="/gostd/mime/mediatype.go.html#4295212">param</a></span><span class="op" id="4295685">[</span><span class="ident" id="4295686"><a href="/gostd/mime/mediatype.go.html#4295642">attribute</a></span><span class="op" id="4295695">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295699"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4295700">.</span><span class="ident" id="4295701"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="4295710">(</span><span class="string" id="4295711">&#39;;&#39;</span><span class="op" id="4295714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295718"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4295719">.</span><span class="ident" id="4295720"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="4295729">(</span><span class="string" id="4295730">&#39;&nbsp;&#39;</span><span class="op" id="4295733">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295737">if</span>&nbsp;<span class="op" id="4295740">!</span><span class="ident" id="4295741"><a href="/gostd/mime/grammar.go.html#4294538">isToken</a></span><span class="op" id="4295748">(</span><span class="ident" id="4295749"><a href="/gostd/mime/mediatype.go.html#4295642">attribute</a></span><span class="op" id="4295758">)</span>&nbsp;<span class="op" id="4295760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295765">return</span>&nbsp;<span class="string" id="4295772">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4295777">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295781"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4295782">.</span><span class="ident" id="4295783"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4295794">(</span><span class="ident" id="4295795"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4295802">.</span><span class="ident" id="4295803"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="4295810">(</span><span class="ident" id="4295811"><a href="/gostd/mime/mediatype.go.html#4295642">attribute</a></span><span class="op" id="4295820">)</span><span class="op" id="4295821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295825"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4295826">.</span><span class="ident" id="4295827"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="4295836">(</span><span class="string" id="4295837">&#39;=&#39;</span><span class="op" id="4295840">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295844">if</span>&nbsp;<span class="ident" id="4295847"><a href="/gostd/mime/grammar.go.html#4294538">isToken</a></span><span class="op" id="4295854">(</span><span class="ident" id="4295855"><a href="/gostd/mime/mediatype.go.html#4295671">value</a></span><span class="op" id="4295860">)</span>&nbsp;<span class="op" id="4295862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295867"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4295868">.</span><span class="ident" id="4295869"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4295880">(</span><span class="ident" id="4295881"><a href="/gostd/mime/mediatype.go.html#4295671">value</a></span><span class="op" id="4295886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295891">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4295902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295907"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4295908">.</span><span class="ident" id="4295909"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="4295918">(</span><span class="string" id="4295919">&#39;&#34;&#39;</span><span class="op" id="4295922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4295926">offset</span>&nbsp;<span class="op" id="4295933">:=</span>&nbsp;<span class="num" id="4295936">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295940">for</span>&nbsp;<span class="ident" id="4295944">index</span><span class="op" id="4295949">,</span>&nbsp;<span class="ident" id="4295951">character</span>&nbsp;<span class="op" id="4295961">:=</span>&nbsp;<span class="keyword" id="4295964">range</span>&nbsp;<span class="ident" id="4295970"><a href="/gostd/mime/mediatype.go.html#4295671">value</a></span>&nbsp;<span class="op" id="4295976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4295981">if</span>&nbsp;<span class="ident" id="4295984"><a href="/gostd/mime/mediatype.go.html#4295951">character</a></span>&nbsp;<span class="op" id="4295994">==</span>&nbsp;<span class="string" id="4295997">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4296001">||</span>&nbsp;<span class="ident" id="4296004"><a href="/gostd/mime/mediatype.go.html#4295951">character</a></span>&nbsp;<span class="op" id="4296014">==</span>&nbsp;<span class="string" id="4296017">&#39;\\&#39;</span>&nbsp;<span class="op" id="4296022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4296028"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4296029">.</span><span class="ident" id="4296030"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4296041">(</span><span class="ident" id="4296042"><a href="/gostd/mime/mediatype.go.html#4295671">value</a></span><span class="op" id="4296047">[</span><span class="ident" id="4296048"><a href="/gostd/mime/mediatype.go.html#4295926">offset</a></span><span class="op" id="4296054">:</span><span class="ident" id="4296055"><a href="/gostd/mime/mediatype.go.html#4295944">index</a></span><span class="op" id="4296060">]</span><span class="op" id="4296061">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4296067"><a href="/gostd/mime/mediatype.go.html#4295926">offset</a></span>&nbsp;<span class="op" id="4296074">=</span>&nbsp;<span class="ident" id="4296076"><a href="/gostd/mime/mediatype.go.html#4295944">index</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4296086"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4296087">.</span><span class="ident" id="4296088"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="4296097">(</span><span class="string" id="4296098">&#39;\\&#39;</span><span class="op" id="4296102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4296107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296112">if</span>&nbsp;<span class="ident" id="4296115"><a href="/gostd/mime/mediatype.go.html#4295951">character</a></span><span class="op" id="4296124">&amp;</span><span class="num" id="4296125">0x80</span>&nbsp;<span class="op" id="4296130">!=</span>&nbsp;<span class="num" id="4296133">0</span>&nbsp;<span class="op" id="4296135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296141">return</span>&nbsp;<span class="string" id="4296148">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4296154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4296158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4296162"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4296163">.</span><span class="ident" id="4296164"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4296175">(</span><span class="ident" id="4296176"><a href="/gostd/mime/mediatype.go.html#4295671">value</a></span><span class="op" id="4296181">[</span><span class="ident" id="4296182"><a href="/gostd/mime/mediatype.go.html#4295926">offset</a></span><span class="op" id="4296188">:</span><span class="op" id="4296189">]</span><span class="op" id="4296190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4296194"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4296195">.</span><span class="ident" id="4296196"><a href="/gostd/bytes/buffer.go.html#1390121">WriteByte</a></span><span class="op" id="4296205">(</span><span class="string" id="4296206">&#39;&#34;&#39;</span><span class="op" id="4296209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4296212">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296215">return</span>&nbsp;<span class="ident" id="4296222"><a href="/gostd/mime/mediatype.go.html#4295408">b</a></span><span class="op" id="4296223">.</span><span class="ident" id="4296224"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="4296230">(</span><span class="op" id="4296231">)</span><br>
<span class="lineno"></span><span class="op" id="4296233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4296236">func</span>&nbsp;<span class="ident" id="4296241">checkMediaTypeDisposition</span><span class="op" id="4296266">(</span><span class="ident" id="4296267">s</span>&nbsp;<span class="builtintype" id="4296269">string</span><span class="op" id="4296275">)</span>&nbsp;<span class="builtintype" id="4296277">error</span>&nbsp;<span class="op" id="4296283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4296286">typ</span><span class="op" id="4296289">,</span>&nbsp;<span class="ident" id="4296291">rest</span>&nbsp;<span class="op" id="4296296">:=</span>&nbsp;<span class="ident" id="4296299"><a href="/gostd/mime/mediatype.go.html#4300162">consumeToken</a></span><span class="op" id="4296311">(</span><span class="ident" id="4296312"><a href="/gostd/mime/mediatype.go.html#4296267">s</a></span><span class="op" id="4296313">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296316">if</span>&nbsp;<span class="ident" id="4296319"><a href="/gostd/mime/mediatype.go.html#4296286">typ</a></span>&nbsp;<span class="op" id="4296323">==</span>&nbsp;<span class="string" id="4296326">&#34;&#34;</span>&nbsp;<span class="op" id="4296329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296333">return</span>&nbsp;<span class="ident" id="4296340"><a href="/gostd/mime/mediatype.go.html#4294840">errors</a></span><span class="op" id="4296346">.</span><span class="ident" id="4296347"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4296350">(</span><span class="string" id="4296351">&#34;mime:&nbsp;no&nbsp;media&nbsp;type&#34;</span><span class="op" id="4296372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4296375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296378">if</span>&nbsp;<span class="ident" id="4296381"><a href="/gostd/mime/mediatype.go.html#4296291">rest</a></span>&nbsp;<span class="op" id="4296386">==</span>&nbsp;<span class="string" id="4296389">&#34;&#34;</span>&nbsp;<span class="op" id="4296392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296396">return</span>&nbsp;<span class="builtintype" id="4296403">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4296408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296411">if</span>&nbsp;<span class="op" id="4296414">!</span><span class="ident" id="4296415"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4296422">.</span><span class="ident" id="4296423"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="4296432">(</span><span class="ident" id="4296433"><a href="/gostd/mime/mediatype.go.html#4296291">rest</a></span><span class="op" id="4296437">,</span>&nbsp;<span class="string" id="4296439">&#34;/&#34;</span><span class="op" id="4296442">)</span>&nbsp;<span class="op" id="4296444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296448">return</span>&nbsp;<span class="ident" id="4296455"><a href="/gostd/mime/mediatype.go.html#4294840">errors</a></span><span class="op" id="4296461">.</span><span class="ident" id="4296462"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4296465">(</span><span class="string" id="4296466">&#34;mime:&nbsp;expected&nbsp;slash&nbsp;after&nbsp;first&nbsp;token&#34;</span><span class="op" id="4296506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4296509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4296512">subtype</span><span class="op" id="4296519">,</span>&nbsp;<span class="ident" id="4296521"><a href="/gostd/mime/mediatype.go.html#4296291">rest</a></span>&nbsp;<span class="op" id="4296526">:=</span>&nbsp;<span class="ident" id="4296529"><a href="/gostd/mime/mediatype.go.html#4300162">consumeToken</a></span><span class="op" id="4296541">(</span><span class="ident" id="4296542"><a href="/gostd/mime/mediatype.go.html#4296291">rest</a></span><span class="op" id="4296546">[</span><span class="num" id="4296547">1</span><span class="op" id="4296548">:</span><span class="op" id="4296549">]</span><span class="op" id="4296550">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296553">if</span>&nbsp;<span class="ident" id="4296556"><a href="/gostd/mime/mediatype.go.html#4296512">subtype</a></span>&nbsp;<span class="op" id="4296564">==</span>&nbsp;<span class="string" id="4296567">&#34;&#34;</span>&nbsp;<span class="op" id="4296570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296574">return</span>&nbsp;<span class="ident" id="4296581"><a href="/gostd/mime/mediatype.go.html#4294840">errors</a></span><span class="op" id="4296587">.</span><span class="ident" id="4296588"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4296591">(</span><span class="string" id="4296592">&#34;mime:&nbsp;expected&nbsp;token&nbsp;after&nbsp;slash&#34;</span><span class="op" id="4296626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4296629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296632">if</span>&nbsp;<span class="ident" id="4296635"><a href="/gostd/mime/mediatype.go.html#4296291">rest</a></span>&nbsp;<span class="op" id="4296640">!=</span>&nbsp;<span class="string" id="4296643">&#34;&#34;</span>&nbsp;<span class="op" id="4296646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296650">return</span>&nbsp;<span class="ident" id="4296657"><a href="/gostd/mime/mediatype.go.html#4294840">errors</a></span><span class="op" id="4296663">.</span><span class="ident" id="4296664"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4296667">(</span><span class="string" id="4296668">&#34;mime:&nbsp;unexpected&nbsp;content&nbsp;after&nbsp;media&nbsp;subtype&#34;</span><span class="op" id="4296714">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4296717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4296720">return</span>&nbsp;<span class="builtintype" id="4296727">nil</span><br>
<span class="lineno"></span><span class="op" id="4296731">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4296734">//&nbsp;ParseMediaType&nbsp;parses&nbsp;a&nbsp;media&nbsp;type&nbsp;value&nbsp;and&nbsp;any&nbsp;optional</span><br>
<span class="lineno">95</span><span class="comment" id="4296795">//&nbsp;parameters,&nbsp;per&nbsp;RFC&nbsp;1521.&nbsp;&nbsp;Media&nbsp;types&nbsp;are&nbsp;the&nbsp;values&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="4296855">//&nbsp;Content-Type&nbsp;and&nbsp;Content-Disposition&nbsp;headers&nbsp;(RFC&nbsp;2183).</span><br>
<span class="lineno"></span><span class="comment" id="4296915">//&nbsp;On&nbsp;success,&nbsp;ParseMediaType&nbsp;returns&nbsp;the&nbsp;media&nbsp;type&nbsp;converted</span><br>
<span class="lineno"></span><span class="comment" id="4296978">//&nbsp;to&nbsp;lowercase&nbsp;and&nbsp;trimmed&nbsp;of&nbsp;white&nbsp;space&nbsp;and&nbsp;a&nbsp;non-nil&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="4297040">//&nbsp;The&nbsp;returned&nbsp;map,&nbsp;params,&nbsp;maps&nbsp;from&nbsp;the&nbsp;lowercase</span><br>
<span class="lineno">100</span><span class="comment" id="4297093">//&nbsp;attribute&nbsp;to&nbsp;the&nbsp;attribute&nbsp;value&nbsp;with&nbsp;its&nbsp;case&nbsp;preserved.</span><br>
<span class="lineno"></span><span class="keyword" id="4297154">func</span>&nbsp;<span class="ident" id="4297159">ParseMediaType</span><span class="op" id="4297173">(</span><span class="ident" id="4297174">v</span>&nbsp;<span class="builtintype" id="4297176">string</span><span class="op" id="4297182">)</span>&nbsp;<span class="op" id="4297184">(</span><span class="ident" id="4297185">mediatype</span>&nbsp;<span class="builtintype" id="4297195">string</span><span class="op" id="4297201">,</span>&nbsp;<span class="ident" id="4297203">params</span>&nbsp;<span class="keyword" id="4297210">map</span><span class="op" id="4297213">[</span><span class="builtintype" id="4297214">string</span><span class="op" id="4297220">]</span><span class="builtintype" id="4297221">string</span><span class="op" id="4297227">,</span>&nbsp;<span class="ident" id="4297229">err</span>&nbsp;<span class="builtintype" id="4297233">error</span><span class="op" id="4297238">)</span>&nbsp;<span class="op" id="4297240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4297243">i</span>&nbsp;<span class="op" id="4297245">:=</span>&nbsp;<span class="ident" id="4297248"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4297255">.</span><span class="ident" id="4297256"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="4297261">(</span><span class="ident" id="4297262"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span><span class="op" id="4297263">,</span>&nbsp;<span class="string" id="4297265">&#34;;&#34;</span><span class="op" id="4297268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297271">if</span>&nbsp;<span class="ident" id="4297274"><a href="/gostd/mime/mediatype.go.html#4297243">i</a></span>&nbsp;<span class="op" id="4297276">==</span>&nbsp;<span class="op" id="4297279">-</span><span class="num" id="4297280">1</span>&nbsp;<span class="op" id="4297282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4297286"><a href="/gostd/mime/mediatype.go.html#4297243">i</a></span>&nbsp;<span class="op" id="4297288">=</span>&nbsp;<span class="builtinfunc" id="4297290">len</span><span class="op" id="4297293">(</span><span class="ident" id="4297294"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span><span class="op" id="4297295">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4297298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4297301"><a href="/gostd/mime/mediatype.go.html#4297185">mediatype</a></span>&nbsp;<span class="op" id="4297311">=</span>&nbsp;<span class="ident" id="4297313"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4297320">.</span><span class="ident" id="4297321"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="4297330">(</span><span class="ident" id="4297331"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4297338">.</span><span class="ident" id="4297339"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="4297346">(</span><span class="ident" id="4297347"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span><span class="op" id="4297348">[</span><span class="num" id="4297349">0</span><span class="op" id="4297350">:</span><span class="ident" id="4297351"><a href="/gostd/mime/mediatype.go.html#4297243">i</a></span><span class="op" id="4297352">]</span><span class="op" id="4297353">)</span><span class="op" id="4297354">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4297358"><a href="/gostd/mime/mediatype.go.html#4297229">err</a></span>&nbsp;<span class="op" id="4297362">=</span>&nbsp;<span class="ident" id="4297364"><a href="/gostd/mime/mediatype.go.html#4296241">checkMediaTypeDisposition</a></span><span class="op" id="4297389">(</span><span class="ident" id="4297390"><a href="/gostd/mime/mediatype.go.html#4297185">mediatype</a></span><span class="op" id="4297399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297402">if</span>&nbsp;<span class="ident" id="4297405"><a href="/gostd/mime/mediatype.go.html#4297229">err</a></span>&nbsp;<span class="op" id="4297409">!=</span>&nbsp;<span class="builtintype" id="4297412">nil</span>&nbsp;<span class="op" id="4297416">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297420">return</span>&nbsp;<span class="string" id="4297427">&#34;&#34;</span><span class="op" id="4297429">,</span>&nbsp;<span class="builtintype" id="4297431">nil</span><span class="op" id="4297434">,</span>&nbsp;<span class="ident" id="4297436"><a href="/gostd/mime/mediatype.go.html#4297229">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4297441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4297445"><a href="/gostd/mime/mediatype.go.html#4297203">params</a></span>&nbsp;<span class="op" id="4297452">=</span>&nbsp;<span class="builtinfunc" id="4297454">make</span><span class="op" id="4297458">(</span><span class="keyword" id="4297459">map</span><span class="op" id="4297462">[</span><span class="builtintype" id="4297463">string</span><span class="op" id="4297469">]</span><span class="builtintype" id="4297470">string</span><span class="op" id="4297476">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4297480">//&nbsp;Map&nbsp;of&nbsp;base&nbsp;parameter&nbsp;name&nbsp;-&gt;&nbsp;parameter&nbsp;name&nbsp;-&gt;&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4297538">//&nbsp;for&nbsp;parameters&nbsp;containing&nbsp;a&nbsp;&#39;*&#39;&nbsp;character.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4297585">//&nbsp;Lazily&nbsp;initialized.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297609">var</span>&nbsp;<span class="ident" id="4297613">continuation</span>&nbsp;<span class="keyword" id="4297626">map</span><span class="op" id="4297629">[</span><span class="builtintype" id="4297630">string</span><span class="op" id="4297636">]</span><span class="keyword" id="4297637">map</span><span class="op" id="4297640">[</span><span class="builtintype" id="4297641">string</span><span class="op" id="4297647">]</span><span class="builtintype" id="4297648">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4297657"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span>&nbsp;<span class="op" id="4297659">=</span>&nbsp;<span class="ident" id="4297661"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span><span class="op" id="4297662">[</span><span class="ident" id="4297663"><a href="/gostd/mime/mediatype.go.html#4297243">i</a></span><span class="op" id="4297664">:</span><span class="op" id="4297665">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297668">for</span>&nbsp;<span class="builtinfunc" id="4297672">len</span><span class="op" id="4297675">(</span><span class="ident" id="4297676"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span><span class="op" id="4297677">)</span>&nbsp;<span class="op" id="4297679">&gt;</span>&nbsp;<span class="num" id="4297681">0</span>&nbsp;<span class="op" id="4297683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4297687"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span>&nbsp;<span class="op" id="4297689">=</span>&nbsp;<span class="ident" id="4297691"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4297698">.</span><span class="ident" id="4297699"><a href="/gostd/strings/strings.go.html#2979686">TrimLeftFunc</a></span><span class="op" id="4297711">(</span><span class="ident" id="4297712"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span><span class="op" id="4297713">,</span>&nbsp;<span class="ident" id="4297715"><a href="/gostd/mime/mediatype.go.html#4294876">unicode</a></span><span class="op" id="4297722">.</span><span class="ident" id="4297723"><a href="/gostd/unicode/graphic.go.html#1820663">IsSpace</a></span><span class="op" id="4297730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297734">if</span>&nbsp;<span class="builtinfunc" id="4297737">len</span><span class="op" id="4297740">(</span><span class="ident" id="4297741"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span><span class="op" id="4297742">)</span>&nbsp;<span class="op" id="4297744">==</span>&nbsp;<span class="num" id="4297747">0</span>&nbsp;<span class="op" id="4297749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297754">break</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4297762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4297766">key</span><span class="op" id="4297769">,</span>&nbsp;<span class="ident" id="4297771">value</span><span class="op" id="4297776">,</span>&nbsp;<span class="ident" id="4297778">rest</span>&nbsp;<span class="op" id="4297783">:=</span>&nbsp;<span class="ident" id="4297786"><a href="/gostd/mime/mediatype.go.html#4301275">consumeMediaParam</a></span><span class="op" id="4297803">(</span><span class="ident" id="4297804"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span><span class="op" id="4297805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297809">if</span>&nbsp;<span class="ident" id="4297812"><a href="/gostd/mime/mediatype.go.html#4297766">key</a></span>&nbsp;<span class="op" id="4297816">==</span>&nbsp;<span class="string" id="4297819">&#34;&#34;</span>&nbsp;<span class="op" id="4297822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297827">if</span>&nbsp;<span class="ident" id="4297830"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4297837">.</span><span class="ident" id="4297838"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="4297847">(</span><span class="ident" id="4297848"><a href="/gostd/mime/mediatype.go.html#4297778">rest</a></span><span class="op" id="4297852">)</span>&nbsp;<span class="op" id="4297854">==</span>&nbsp;<span class="string" id="4297857">&#34;;&#34;</span>&nbsp;<span class="op" id="4297861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4297867">//&nbsp;Ignore&nbsp;trailing&nbsp;semicolons.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4297902">//&nbsp;Not&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297923">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4297933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4297938">//&nbsp;Parse&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4297957">return</span>&nbsp;<span class="string" id="4297964">&#34;&#34;</span><span class="op" id="4297966">,</span>&nbsp;<span class="builtintype" id="4297968">nil</span><span class="op" id="4297971">,</span>&nbsp;<span class="ident" id="4297973"><a href="/gostd/mime/mediatype.go.html#4294840">errors</a></span><span class="op" id="4297979">.</span><span class="ident" id="4297980"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4297983">(</span><span class="string" id="4297984">&#34;mime:&nbsp;invalid&nbsp;media&nbsp;parameter&#34;</span><span class="op" id="4298015">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4298019">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298024">pmap</span>&nbsp;<span class="op" id="4298029">:=</span>&nbsp;<span class="ident" id="4298032"><a href="/gostd/mime/mediatype.go.html#4297203">params</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298041">if</span>&nbsp;<span class="ident" id="4298044">idx</span>&nbsp;<span class="op" id="4298048">:=</span>&nbsp;<span class="ident" id="4298051"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4298058">.</span><span class="ident" id="4298059"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="4298064">(</span><span class="ident" id="4298065"><a href="/gostd/mime/mediatype.go.html#4297766">key</a></span><span class="op" id="4298068">,</span>&nbsp;<span class="string" id="4298070">&#34;*&#34;</span><span class="op" id="4298073">)</span><span class="op" id="4298074">;</span>&nbsp;<span class="ident" id="4298076"><a href="/gostd/mime/mediatype.go.html#4298044">idx</a></span>&nbsp;<span class="op" id="4298080">!=</span>&nbsp;<span class="op" id="4298083">-</span><span class="num" id="4298084">1</span>&nbsp;<span class="op" id="4298086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298091">baseName</span>&nbsp;<span class="op" id="4298100">:=</span>&nbsp;<span class="ident" id="4298103"><a href="/gostd/mime/mediatype.go.html#4297766">key</a></span><span class="op" id="4298106">[</span><span class="op" id="4298107">:</span><span class="ident" id="4298108"><a href="/gostd/mime/mediatype.go.html#4298044">idx</a></span><span class="op" id="4298111">]</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298116">if</span>&nbsp;<span class="ident" id="4298119"><a href="/gostd/mime/mediatype.go.html#4297613">continuation</a></span>&nbsp;<span class="op" id="4298132">==</span>&nbsp;<span class="builtintype" id="4298135">nil</span>&nbsp;<span class="op" id="4298139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298145"><a href="/gostd/mime/mediatype.go.html#4297613">continuation</a></span>&nbsp;<span class="op" id="4298158">=</span>&nbsp;<span class="builtinfunc" id="4298160">make</span><span class="op" id="4298164">(</span><span class="keyword" id="4298165">map</span><span class="op" id="4298168">[</span><span class="builtintype" id="4298169">string</span><span class="op" id="4298175">]</span><span class="keyword" id="4298176">map</span><span class="op" id="4298179">[</span><span class="builtintype" id="4298180">string</span><span class="op" id="4298186">]</span><span class="builtintype" id="4298187">string</span><span class="op" id="4298193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4298198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298203">var</span>&nbsp;<span class="ident" id="4298207">ok</span>&nbsp;<span class="builtintype" id="4298210">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298218">if</span>&nbsp;<span class="ident" id="4298221"><a href="/gostd/mime/mediatype.go.html#4298024">pmap</a></span><span class="op" id="4298225">,</span>&nbsp;<span class="ident" id="4298227"><a href="/gostd/mime/mediatype.go.html#4298207">ok</a></span>&nbsp;<span class="op" id="4298230">=</span>&nbsp;<span class="ident" id="4298232"><a href="/gostd/mime/mediatype.go.html#4297613">continuation</a></span><span class="op" id="4298244">[</span><span class="ident" id="4298245"><a href="/gostd/mime/mediatype.go.html#4298091">baseName</a></span><span class="op" id="4298253">]</span><span class="op" id="4298254">;</span>&nbsp;<span class="op" id="4298256">!</span><span class="ident" id="4298257"><a href="/gostd/mime/mediatype.go.html#4298207">ok</a></span>&nbsp;<span class="op" id="4298260">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298266"><a href="/gostd/mime/mediatype.go.html#4297613">continuation</a></span><span class="op" id="4298278">[</span><span class="ident" id="4298279"><a href="/gostd/mime/mediatype.go.html#4298091">baseName</a></span><span class="op" id="4298287">]</span>&nbsp;<span class="op" id="4298289">=</span>&nbsp;<span class="builtinfunc" id="4298291">make</span><span class="op" id="4298295">(</span><span class="keyword" id="4298296">map</span><span class="op" id="4298299">[</span><span class="builtintype" id="4298300">string</span><span class="op" id="4298306">]</span><span class="builtintype" id="4298307">string</span><span class="op" id="4298313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298319"><a href="/gostd/mime/mediatype.go.html#4298024">pmap</a></span>&nbsp;<span class="op" id="4298324">=</span>&nbsp;<span class="ident" id="4298326"><a href="/gostd/mime/mediatype.go.html#4297613">continuation</a></span><span class="op" id="4298338">[</span><span class="ident" id="4298339"><a href="/gostd/mime/mediatype.go.html#4298091">baseName</a></span><span class="op" id="4298347">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4298352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4298356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298360">if</span>&nbsp;<span class="ident" id="4298363">_</span><span class="op" id="4298364">,</span>&nbsp;<span class="ident" id="4298366">exists</span>&nbsp;<span class="op" id="4298373">:=</span>&nbsp;<span class="ident" id="4298376"><a href="/gostd/mime/mediatype.go.html#4298024">pmap</a></span><span class="op" id="4298380">[</span><span class="ident" id="4298381"><a href="/gostd/mime/mediatype.go.html#4297766">key</a></span><span class="op" id="4298384">]</span><span class="op" id="4298385">;</span>&nbsp;<span class="ident" id="4298387"><a href="/gostd/mime/mediatype.go.html#4298366">exists</a></span>&nbsp;<span class="op" id="4298394">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4298399">//&nbsp;Duplicate&nbsp;parameter&nbsp;name&nbsp;is&nbsp;bogus.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298440">return</span>&nbsp;<span class="string" id="4298447">&#34;&#34;</span><span class="op" id="4298449">,</span>&nbsp;<span class="builtintype" id="4298451">nil</span><span class="op" id="4298454">,</span>&nbsp;<span class="ident" id="4298456"><a href="/gostd/mime/mediatype.go.html#4294840">errors</a></span><span class="op" id="4298462">.</span><span class="ident" id="4298463"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="4298466">(</span><span class="string" id="4298467">&#34;mime:&nbsp;duplicate&nbsp;parameter&nbsp;name&#34;</span><span class="op" id="4298499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4298503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298507"><a href="/gostd/mime/mediatype.go.html#4298024">pmap</a></span><span class="op" id="4298511">[</span><span class="ident" id="4298512"><a href="/gostd/mime/mediatype.go.html#4297766">key</a></span><span class="op" id="4298515">]</span>&nbsp;<span class="op" id="4298517">=</span>&nbsp;<span class="ident" id="4298519"><a href="/gostd/mime/mediatype.go.html#4297771">value</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298527"><a href="/gostd/mime/mediatype.go.html#4297174">v</a></span>&nbsp;<span class="op" id="4298529">=</span>&nbsp;<span class="ident" id="4298531"><a href="/gostd/mime/mediatype.go.html#4297778">rest</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4298537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4298541">//&nbsp;Stitch&nbsp;together&nbsp;any&nbsp;continuations&nbsp;or&nbsp;things&nbsp;with&nbsp;stars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4298600">//&nbsp;(i.e.&nbsp;RFC&nbsp;2231&nbsp;things&nbsp;with&nbsp;stars:&nbsp;&#34;foo*0&#34;&nbsp;or&nbsp;&#34;foo*&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298657">var</span>&nbsp;<span class="ident" id="4298661">buf</span>&nbsp;<span class="ident" id="4298665"><a href="/gostd/mime/mediatype.go.html#4294831">bytes</a></span><span class="op" id="4298670">.</span><span class="ident" id="4298671"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298679">for</span>&nbsp;<span class="ident" id="4298683">key</span><span class="op" id="4298686">,</span>&nbsp;<span class="ident" id="4298688">pieceMap</span>&nbsp;<span class="op" id="4298697">:=</span>&nbsp;<span class="keyword" id="4298700">range</span>&nbsp;<span class="ident" id="4298706"><a href="/gostd/mime/mediatype.go.html#4297613">continuation</a></span>&nbsp;<span class="op" id="4298719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298723">singlePartKey</span>&nbsp;<span class="op" id="4298737">:=</span>&nbsp;<span class="ident" id="4298740"><a href="/gostd/mime/mediatype.go.html#4298683">key</a></span>&nbsp;<span class="op" id="4298744">+</span>&nbsp;<span class="string" id="4298746">&#34;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298752">if</span>&nbsp;<span class="ident" id="4298755">v</span><span class="op" id="4298756">,</span>&nbsp;<span class="ident" id="4298758">ok</span>&nbsp;<span class="op" id="4298761">:=</span>&nbsp;<span class="ident" id="4298764"><a href="/gostd/mime/mediatype.go.html#4298688">pieceMap</a></span><span class="op" id="4298772">[</span><span class="ident" id="4298773"><a href="/gostd/mime/mediatype.go.html#4298723">singlePartKey</a></span><span class="op" id="4298786">]</span><span class="op" id="4298787">;</span>&nbsp;<span class="ident" id="4298789"><a href="/gostd/mime/mediatype.go.html#4298758">ok</a></span>&nbsp;<span class="op" id="4298792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298797">decv</span>&nbsp;<span class="op" id="4298802">:=</span>&nbsp;<span class="ident" id="4298805"><a href="/gostd/mime/mediatype.go.html#4299392">decode2231Enc</a></span><span class="op" id="4298818">(</span><span class="ident" id="4298819"><a href="/gostd/mime/mediatype.go.html#4298755">v</a></span><span class="op" id="4298820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298825"><a href="/gostd/mime/mediatype.go.html#4297203">params</a></span><span class="op" id="4298831">[</span><span class="ident" id="4298832"><a href="/gostd/mime/mediatype.go.html#4298683">key</a></span><span class="op" id="4298835">]</span>&nbsp;<span class="op" id="4298837">=</span>&nbsp;<span class="ident" id="4298839"><a href="/gostd/mime/mediatype.go.html#4298797">decv</a></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298847">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4298858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298863"><a href="/gostd/mime/mediatype.go.html#4298661">buf</a></span><span class="op" id="4298866">.</span><span class="ident" id="4298867"><a href="/gostd/bytes/buffer.go.html#1385417">Reset</a></span><span class="op" id="4298872">(</span><span class="op" id="4298873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298877">valid</span>&nbsp;<span class="op" id="4298883">:=</span>&nbsp;<span class="builtintype" id="4298886">false</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298894">for</span>&nbsp;<span class="ident" id="4298898">n</span>&nbsp;<span class="op" id="4298900">:=</span>&nbsp;<span class="num" id="4298903">0</span><span class="op" id="4298904">;</span>&nbsp;<span class="op" id="4298906">;</span>&nbsp;<span class="ident" id="4298908"><a href="/gostd/mime/mediatype.go.html#4298898">n</a></span><span class="op" id="4298909">++</span>&nbsp;<span class="op" id="4298912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4298917">simplePart</span>&nbsp;<span class="op" id="4298928">:=</span>&nbsp;<span class="ident" id="4298931"><a href="/gostd/mime/mediatype.go.html#4294850">fmt</a></span><span class="op" id="4298934">.</span><span class="ident" id="4298935"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="4298942">(</span><span class="string" id="4298943">&#34;%s*%d&#34;</span><span class="op" id="4298950">,</span>&nbsp;<span class="ident" id="4298952"><a href="/gostd/mime/mediatype.go.html#4298683">key</a></span><span class="op" id="4298955">,</span>&nbsp;<span class="ident" id="4298957"><a href="/gostd/mime/mediatype.go.html#4298898">n</a></span><span class="op" id="4298958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4298963">if</span>&nbsp;<span class="ident" id="4298966">v</span><span class="op" id="4298967">,</span>&nbsp;<span class="ident" id="4298969">ok</span>&nbsp;<span class="op" id="4298972">:=</span>&nbsp;<span class="ident" id="4298975"><a href="/gostd/mime/mediatype.go.html#4298688">pieceMap</a></span><span class="op" id="4298983">[</span><span class="ident" id="4298984"><a href="/gostd/mime/mediatype.go.html#4298917">simplePart</a></span><span class="op" id="4298994">]</span><span class="op" id="4298995">;</span>&nbsp;<span class="ident" id="4298997"><a href="/gostd/mime/mediatype.go.html#4298969">ok</a></span>&nbsp;<span class="op" id="4299000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299006"><a href="/gostd/mime/mediatype.go.html#4298877">valid</a></span>&nbsp;<span class="op" id="4299012">=</span>&nbsp;<span class="builtintype" id="4299014">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299023"><a href="/gostd/mime/mediatype.go.html#4298661">buf</a></span><span class="op" id="4299026">.</span><span class="ident" id="4299027"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4299038">(</span><span class="ident" id="4299039"><a href="/gostd/mime/mediatype.go.html#4298966">v</a></span><span class="op" id="4299040">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299046">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4299058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299063">encodedPart</span>&nbsp;<span class="op" id="4299075">:=</span>&nbsp;<span class="ident" id="4299078"><a href="/gostd/mime/mediatype.go.html#4298917">simplePart</a></span>&nbsp;<span class="op" id="4299089">+</span>&nbsp;<span class="string" id="4299091">&#34;*&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299098">if</span>&nbsp;<span class="ident" id="4299101">v</span><span class="op" id="4299102">,</span>&nbsp;<span class="ident" id="4299104">ok</span>&nbsp;<span class="op" id="4299107">:=</span>&nbsp;<span class="ident" id="4299110"><a href="/gostd/mime/mediatype.go.html#4298688">pieceMap</a></span><span class="op" id="4299118">[</span><span class="ident" id="4299119"><a href="/gostd/mime/mediatype.go.html#4299063">encodedPart</a></span><span class="op" id="4299130">]</span><span class="op" id="4299131">;</span>&nbsp;<span class="ident" id="4299133"><a href="/gostd/mime/mediatype.go.html#4299104">ok</a></span>&nbsp;<span class="op" id="4299136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299142"><a href="/gostd/mime/mediatype.go.html#4298877">valid</a></span>&nbsp;<span class="op" id="4299148">=</span>&nbsp;<span class="builtintype" id="4299150">true</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299159">if</span>&nbsp;<span class="ident" id="4299162"><a href="/gostd/mime/mediatype.go.html#4298898">n</a></span>&nbsp;<span class="op" id="4299164">==</span>&nbsp;<span class="num" id="4299167">0</span>&nbsp;<span class="op" id="4299169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299176"><a href="/gostd/mime/mediatype.go.html#4298661">buf</a></span><span class="op" id="4299179">.</span><span class="ident" id="4299180"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4299191">(</span><span class="ident" id="4299192"><a href="/gostd/mime/mediatype.go.html#4299392">decode2231Enc</a></span><span class="op" id="4299205">(</span><span class="ident" id="4299206"><a href="/gostd/mime/mediatype.go.html#4299101">v</a></span><span class="op" id="4299207">)</span><span class="op" id="4299208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4299214">}</span>&nbsp;<span class="keyword" id="4299216">else</span>&nbsp;<span class="op" id="4299221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299228">decv</span><span class="op" id="4299232">,</span>&nbsp;<span class="ident" id="4299234">_</span>&nbsp;<span class="op" id="4299236">:=</span>&nbsp;<span class="ident" id="4299239"><a href="/gostd/mime/mediatype.go.html#4301949">percentHexUnescape</a></span><span class="op" id="4299257">(</span><span class="ident" id="4299258"><a href="/gostd/mime/mediatype.go.html#4299101">v</a></span><span class="op" id="4299259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299266"><a href="/gostd/mime/mediatype.go.html#4298661">buf</a></span><span class="op" id="4299269">.</span><span class="ident" id="4299270"><a href="/gostd/bytes/buffer.go.html#1387374">WriteString</a></span><span class="op" id="4299281">(</span><span class="ident" id="4299282"><a href="/gostd/mime/mediatype.go.html#4299228">decv</a></span><span class="op" id="4299286">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4299292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4299297">}</span>&nbsp;<span class="keyword" id="4299299">else</span>&nbsp;<span class="op" id="4299304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299310">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4299319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4299323">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299327">if</span>&nbsp;<span class="ident" id="4299330"><a href="/gostd/mime/mediatype.go.html#4298877">valid</a></span>&nbsp;<span class="op" id="4299336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299341"><a href="/gostd/mime/mediatype.go.html#4297203">params</a></span><span class="op" id="4299347">[</span><span class="ident" id="4299348"><a href="/gostd/mime/mediatype.go.html#4298683">key</a></span><span class="op" id="4299351">]</span>&nbsp;<span class="op" id="4299353">=</span>&nbsp;<span class="ident" id="4299355"><a href="/gostd/mime/mediatype.go.html#4298661">buf</a></span><span class="op" id="4299358">.</span><span class="ident" id="4299359"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="4299365">(</span><span class="op" id="4299366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4299370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4299373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299377">return</span><br>
<span class="lineno"></span><span class="op" id="4299384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4299387">func</span>&nbsp;<span class="ident" id="4299392">decode2231Enc</span><span class="op" id="4299405">(</span><span class="ident" id="4299406">v</span>&nbsp;<span class="builtintype" id="4299408">string</span><span class="op" id="4299414">)</span>&nbsp;<span class="builtintype" id="4299416">string</span>&nbsp;<span class="op" id="4299423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299426">sv</span>&nbsp;<span class="op" id="4299429">:=</span>&nbsp;<span class="ident" id="4299432"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4299439">.</span><span class="ident" id="4299440"><a href="/gostd/strings/strings.go.html#2972338">SplitN</a></span><span class="op" id="4299446">(</span><span class="ident" id="4299447"><a href="/gostd/mime/mediatype.go.html#4299406">v</a></span><span class="op" id="4299448">,</span>&nbsp;<span class="string" id="4299450">&#34;&#39;&#34;</span><span class="op" id="4299453">,</span>&nbsp;<span class="num" id="4299455">3</span><span class="op" id="4299456">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299459">if</span>&nbsp;<span class="builtinfunc" id="4299462">len</span><span class="op" id="4299465">(</span><span class="ident" id="4299466"><a href="/gostd/mime/mediatype.go.html#4299426">sv</a></span><span class="op" id="4299468">)</span>&nbsp;<span class="op" id="4299470">!=</span>&nbsp;<span class="num" id="4299473">3</span>&nbsp;<span class="op" id="4299475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299479">return</span>&nbsp;<span class="string" id="4299486">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4299490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4299493">//&nbsp;TODO:&nbsp;ignoring&nbsp;lang&nbsp;in&nbsp;sv[1]&nbsp;for&nbsp;now.&nbsp;If&nbsp;anybody&nbsp;needs&nbsp;it&nbsp;we&#39;ll</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4299561">//&nbsp;need&nbsp;to&nbsp;decide&nbsp;how&nbsp;to&nbsp;expose&nbsp;it&nbsp;in&nbsp;the&nbsp;API.&nbsp;But&nbsp;I&#39;m&nbsp;not&nbsp;sure</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4299626">//&nbsp;anybody&nbsp;uses&nbsp;it&nbsp;in&nbsp;practice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299659">charset</span>&nbsp;<span class="op" id="4299667">:=</span>&nbsp;<span class="ident" id="4299670"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4299677">.</span><span class="ident" id="4299678"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="4299685">(</span><span class="ident" id="4299686"><a href="/gostd/mime/mediatype.go.html#4299426">sv</a></span><span class="op" id="4299688">[</span><span class="num" id="4299689">0</span><span class="op" id="4299690">]</span><span class="op" id="4299691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299694">if</span>&nbsp;<span class="ident" id="4299697"><a href="/gostd/mime/mediatype.go.html#4299659">charset</a></span>&nbsp;<span class="op" id="4299705">!=</span>&nbsp;<span class="string" id="4299708">&#34;us-ascii&#34;</span>&nbsp;<span class="op" id="4299719">&amp;&amp;</span>&nbsp;<span class="ident" id="4299722"><a href="/gostd/mime/mediatype.go.html#4299659">charset</a></span>&nbsp;<span class="op" id="4299730">!=</span>&nbsp;<span class="string" id="4299733">&#34;utf-8&#34;</span>&nbsp;<span class="op" id="4299741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4299745">//&nbsp;TODO:&nbsp;unsupported&nbsp;encoding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299777">return</span>&nbsp;<span class="string" id="4299784">&#34;&#34;</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4299788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4299791">encv</span><span class="op" id="4299795">,</span>&nbsp;<span class="ident" id="4299797">_</span>&nbsp;<span class="op" id="4299799">:=</span>&nbsp;<span class="ident" id="4299802"><a href="/gostd/mime/mediatype.go.html#4301949">percentHexUnescape</a></span><span class="op" id="4299820">(</span><span class="ident" id="4299821"><a href="/gostd/mime/mediatype.go.html#4299426">sv</a></span><span class="op" id="4299823">[</span><span class="num" id="4299824">2</span><span class="op" id="4299825">]</span><span class="op" id="4299826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299829">return</span>&nbsp;<span class="ident" id="4299836"><a href="/gostd/mime/mediatype.go.html#4299791">encv</a></span><br>
<span class="lineno"></span><span class="op" id="4299841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="4299844">func</span>&nbsp;<span class="ident" id="4299849">isNotTokenChar</span><span class="op" id="4299863">(</span><span class="ident" id="4299864">r</span>&nbsp;<span class="builtintype" id="4299866">rune</span><span class="op" id="4299870">)</span>&nbsp;<span class="builtintype" id="4299872">bool</span>&nbsp;<span class="op" id="4299877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4299880">return</span>&nbsp;<span class="op" id="4299887">!</span><span class="ident" id="4299888"><a href="/gostd/mime/grammar.go.html#4294288">isTokenChar</a></span><span class="op" id="4299899">(</span><span class="ident" id="4299900"><a href="/gostd/mime/mediatype.go.html#4299864">r</a></span><span class="op" id="4299901">)</span><br>
<span class="lineno"></span><span class="op" id="4299903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4299906">//&nbsp;consumeToken&nbsp;consumes&nbsp;a&nbsp;token&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;provided</span><br>
<span class="lineno">220</span><span class="comment" id="4299970">//&nbsp;string,&nbsp;per&nbsp;RFC&nbsp;2045&nbsp;section&nbsp;5.1&nbsp;(referenced&nbsp;from&nbsp;2183),&nbsp;and&nbsp;return</span><br>
<span class="lineno"></span><span class="comment" id="4300041">//&nbsp;the&nbsp;token&nbsp;consumed&nbsp;and&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;string.&nbsp;&nbsp;Returns&nbsp;(&#34;&#34;,&nbsp;v)&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="4300111">//&nbsp;failure&nbsp;to&nbsp;consume&nbsp;at&nbsp;least&nbsp;one&nbsp;character.</span><br>
<span class="lineno"></span><span class="keyword" id="4300157">func</span>&nbsp;<span class="ident" id="4300162">consumeToken</span><span class="op" id="4300174">(</span><span class="ident" id="4300175">v</span>&nbsp;<span class="builtintype" id="4300177">string</span><span class="op" id="4300183">)</span>&nbsp;<span class="op" id="4300185">(</span><span class="ident" id="4300186">token</span><span class="op" id="4300191">,</span>&nbsp;<span class="ident" id="4300193">rest</span>&nbsp;<span class="builtintype" id="4300198">string</span><span class="op" id="4300204">)</span>&nbsp;<span class="op" id="4300206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4300209">notPos</span>&nbsp;<span class="op" id="4300216">:=</span>&nbsp;<span class="ident" id="4300219"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4300226">.</span><span class="ident" id="4300227"><a href="/gostd/strings/strings.go.html#2980485">IndexFunc</a></span><span class="op" id="4300236">(</span><span class="ident" id="4300237"><a href="/gostd/mime/mediatype.go.html#4300175">v</a></span><span class="op" id="4300238">,</span>&nbsp;<span class="ident" id="4300240"><a href="/gostd/mime/mediatype.go.html#4299849">isNotTokenChar</a></span><span class="op" id="4300254">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300257">if</span>&nbsp;<span class="ident" id="4300260"><a href="/gostd/mime/mediatype.go.html#4300209">notPos</a></span>&nbsp;<span class="op" id="4300267">==</span>&nbsp;<span class="op" id="4300270">-</span><span class="num" id="4300271">1</span>&nbsp;<span class="op" id="4300273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300277">return</span>&nbsp;<span class="ident" id="4300284"><a href="/gostd/mime/mediatype.go.html#4300175">v</a></span><span class="op" id="4300285">,</span>&nbsp;<span class="string" id="4300287">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4300291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300294">if</span>&nbsp;<span class="ident" id="4300297"><a href="/gostd/mime/mediatype.go.html#4300209">notPos</a></span>&nbsp;<span class="op" id="4300304">==</span>&nbsp;<span class="num" id="4300307">0</span>&nbsp;<span class="op" id="4300309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300313">return</span>&nbsp;<span class="string" id="4300320">&#34;&#34;</span><span class="op" id="4300322">,</span>&nbsp;<span class="ident" id="4300324"><a href="/gostd/mime/mediatype.go.html#4300175">v</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4300327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300330">return</span>&nbsp;<span class="ident" id="4300337"><a href="/gostd/mime/mediatype.go.html#4300175">v</a></span><span class="op" id="4300338">[</span><span class="num" id="4300339">0</span><span class="op" id="4300340">:</span><span class="ident" id="4300341"><a href="/gostd/mime/mediatype.go.html#4300209">notPos</a></span><span class="op" id="4300347">]</span><span class="op" id="4300348">,</span>&nbsp;<span class="ident" id="4300350"><a href="/gostd/mime/mediatype.go.html#4300175">v</a></span><span class="op" id="4300351">[</span><span class="ident" id="4300352"><a href="/gostd/mime/mediatype.go.html#4300209">notPos</a></span><span class="op" id="4300358">:</span><span class="op" id="4300359">]</span><br>
<span class="lineno"></span><span class="op" id="4300361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4300364">//&nbsp;consumeValue&nbsp;consumes&nbsp;a&nbsp;&#34;value&#34;&nbsp;per&nbsp;RFC&nbsp;2045,&nbsp;where&nbsp;a&nbsp;value&nbsp;is</span><br>
<span class="lineno">235</span><span class="comment" id="4300430">//&nbsp;either&nbsp;a&nbsp;&#39;token&#39;&nbsp;or&nbsp;a&nbsp;&#39;quoted-string&#39;.&nbsp;&nbsp;On&nbsp;success,&nbsp;consumeValue</span><br>
<span class="lineno"></span><span class="comment" id="4300498">//&nbsp;returns&nbsp;the&nbsp;value&nbsp;consumed&nbsp;(and&nbsp;de-quoted/escaped,&nbsp;if&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4300557">//&nbsp;quoted-string)&nbsp;and&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;string.&nbsp;&nbsp;On&nbsp;failure,&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="4300624">//&nbsp;(&#34;&#34;,&nbsp;v).</span><br>
<span class="lineno"></span><span class="keyword" id="4300636">func</span>&nbsp;<span class="ident" id="4300641">consumeValue</span><span class="op" id="4300653">(</span><span class="ident" id="4300654">v</span>&nbsp;<span class="builtintype" id="4300656">string</span><span class="op" id="4300662">)</span>&nbsp;<span class="op" id="4300664">(</span><span class="ident" id="4300665">value</span><span class="op" id="4300670">,</span>&nbsp;<span class="ident" id="4300672">rest</span>&nbsp;<span class="builtintype" id="4300677">string</span><span class="op" id="4300683">)</span>&nbsp;<span class="op" id="4300685">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300688">if</span>&nbsp;<span class="op" id="4300691">!</span><span class="ident" id="4300692"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4300699">.</span><span class="ident" id="4300700"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="4300709">(</span><span class="ident" id="4300710"><a href="/gostd/mime/mediatype.go.html#4300654">v</a></span><span class="op" id="4300711">,</span>&nbsp;<span class="string" id="4300713">`&#34;`</span><span class="op" id="4300716">)</span>&nbsp;<span class="op" id="4300718">&amp;&amp;</span>&nbsp;<span class="op" id="4300721">!</span><span class="ident" id="4300722"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4300729">.</span><span class="ident" id="4300730"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="4300739">(</span><span class="ident" id="4300740"><a href="/gostd/mime/mediatype.go.html#4300654">v</a></span><span class="op" id="4300741">,</span>&nbsp;<span class="string" id="4300743">`&#39;`</span><span class="op" id="4300746">)</span>&nbsp;<span class="op" id="4300748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300752">return</span>&nbsp;<span class="ident" id="4300759"><a href="/gostd/mime/mediatype.go.html#4300162">consumeToken</a></span><span class="op" id="4300771">(</span><span class="ident" id="4300772"><a href="/gostd/mime/mediatype.go.html#4300654">v</a></span><span class="op" id="4300773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4300776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4300780">leadQuote</span>&nbsp;<span class="op" id="4300790">:=</span>&nbsp;<span class="builtintype" id="4300793">rune</span><span class="op" id="4300797">(</span><span class="ident" id="4300798"><a href="/gostd/mime/mediatype.go.html#4300654">v</a></span><span class="op" id="4300799">[</span><span class="num" id="4300800">0</span><span class="op" id="4300801">]</span><span class="op" id="4300802">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4300806">//&nbsp;parse&nbsp;a&nbsp;quoted-string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4300832"><a href="/gostd/mime/mediatype.go.html#4300672">rest</a></span>&nbsp;<span class="op" id="4300837">=</span>&nbsp;<span class="ident" id="4300839"><a href="/gostd/mime/mediatype.go.html#4300654">v</a></span><span class="op" id="4300840">[</span><span class="num" id="4300841">1</span><span class="op" id="4300842">:</span><span class="op" id="4300843">]</span>&nbsp;<span class="comment" id="4300845">//&nbsp;consume&nbsp;the&nbsp;leading&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4300875">buffer</span>&nbsp;<span class="op" id="4300882">:=</span>&nbsp;<span class="builtinfunc" id="4300885">new</span><span class="op" id="4300888">(</span><span class="ident" id="4300889"><a href="/gostd/mime/mediatype.go.html#4294831">bytes</a></span><span class="op" id="4300894">.</span><span class="ident" id="4300895"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><span class="op" id="4300901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300904">var</span>&nbsp;<span class="ident" id="4300908">idx</span>&nbsp;<span class="builtintype" id="4300912">int</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300917">var</span>&nbsp;<span class="ident" id="4300921">r</span>&nbsp;<span class="builtintype" id="4300923">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300929">var</span>&nbsp;<span class="ident" id="4300933">nextIsLiteral</span>&nbsp;<span class="builtintype" id="4300947">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300953">for</span>&nbsp;<span class="ident" id="4300957"><a href="/gostd/mime/mediatype.go.html#4300908">idx</a></span><span class="op" id="4300960">,</span>&nbsp;<span class="ident" id="4300962"><a href="/gostd/mime/mediatype.go.html#4300921">r</a></span>&nbsp;<span class="op" id="4300964">=</span>&nbsp;<span class="keyword" id="4300966">range</span>&nbsp;<span class="ident" id="4300972"><a href="/gostd/mime/mediatype.go.html#4300672">rest</a></span>&nbsp;<span class="op" id="4300977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300981">switch</span>&nbsp;<span class="op" id="4300988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4300992">case</span>&nbsp;<span class="ident" id="4300997"><a href="/gostd/mime/mediatype.go.html#4300933">nextIsLiteral</a></span><span class="op" id="4301010">:</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301015"><a href="/gostd/mime/mediatype.go.html#4300875">buffer</a></span><span class="op" id="4301021">.</span><span class="ident" id="4301022"><a href="/gostd/bytes/buffer.go.html#1390522">WriteRune</a></span><span class="op" id="4301031">(</span><span class="ident" id="4301032"><a href="/gostd/mime/mediatype.go.html#4300921">r</a></span><span class="op" id="4301033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301038"><a href="/gostd/mime/mediatype.go.html#4300933">nextIsLiteral</a></span>&nbsp;<span class="op" id="4301052">=</span>&nbsp;<span class="builtintype" id="4301054">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301062">case</span>&nbsp;<span class="ident" id="4301067"><a href="/gostd/mime/mediatype.go.html#4300921">r</a></span>&nbsp;<span class="op" id="4301069">==</span>&nbsp;<span class="ident" id="4301072"><a href="/gostd/mime/mediatype.go.html#4300780">leadQuote</a></span><span class="op" id="4301081">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301086">return</span>&nbsp;<span class="ident" id="4301093"><a href="/gostd/mime/mediatype.go.html#4300875">buffer</a></span><span class="op" id="4301099">.</span><span class="ident" id="4301100"><a href="/gostd/bytes/buffer.go.html#1384648">String</a></span><span class="op" id="4301106">(</span><span class="op" id="4301107">)</span><span class="op" id="4301108">,</span>&nbsp;<span class="ident" id="4301110"><a href="/gostd/mime/mediatype.go.html#4300672">rest</a></span><span class="op" id="4301114">[</span><span class="ident" id="4301115"><a href="/gostd/mime/mediatype.go.html#4300908">idx</a></span><span class="op" id="4301118">+</span><span class="num" id="4301119">1</span><span class="op" id="4301120">:</span><span class="op" id="4301121">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301125">case</span>&nbsp;<span class="ident" id="4301130"><a href="/gostd/mime/mediatype.go.html#4300921">r</a></span>&nbsp;<span class="op" id="4301132">==</span>&nbsp;<span class="string" id="4301135">&#39;\\&#39;</span><span class="op" id="4301139">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301144"><a href="/gostd/mime/mediatype.go.html#4300933">nextIsLiteral</a></span>&nbsp;<span class="op" id="4301158">=</span>&nbsp;<span class="builtintype" id="4301160">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301167">case</span>&nbsp;<span class="ident" id="4301172"><a href="/gostd/mime/mediatype.go.html#4300921">r</a></span>&nbsp;<span class="op" id="4301174">!=</span>&nbsp;<span class="string" id="4301177">&#39;\r&#39;</span>&nbsp;<span class="op" id="4301182">&amp;&amp;</span>&nbsp;<span class="ident" id="4301185"><a href="/gostd/mime/mediatype.go.html#4300921">r</a></span>&nbsp;<span class="op" id="4301187">!=</span>&nbsp;<span class="string" id="4301190">&#39;\n&#39;</span><span class="op" id="4301194">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301199"><a href="/gostd/mime/mediatype.go.html#4300875">buffer</a></span><span class="op" id="4301205">.</span><span class="ident" id="4301206"><a href="/gostd/bytes/buffer.go.html#1390522">WriteRune</a></span><span class="op" id="4301215">(</span><span class="ident" id="4301216"><a href="/gostd/mime/mediatype.go.html#4300921">r</a></span><span class="op" id="4301217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301221">default</span><span class="op" id="4301228">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301233">return</span>&nbsp;<span class="string" id="4301240">&#34;&#34;</span><span class="op" id="4301242">,</span>&nbsp;<span class="ident" id="4301244"><a href="/gostd/mime/mediatype.go.html#4300654">v</a></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4301248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4301251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301254">return</span>&nbsp;<span class="string" id="4301261">&#34;&#34;</span><span class="op" id="4301263">,</span>&nbsp;<span class="ident" id="4301265"><a href="/gostd/mime/mediatype.go.html#4300654">v</a></span><br>
<span class="lineno"></span><span class="op" id="4301267">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="4301270">func</span>&nbsp;<span class="ident" id="4301275">consumeMediaParam</span><span class="op" id="4301292">(</span><span class="ident" id="4301293">v</span>&nbsp;<span class="builtintype" id="4301295">string</span><span class="op" id="4301301">)</span>&nbsp;<span class="op" id="4301303">(</span><span class="ident" id="4301304">param</span><span class="op" id="4301309">,</span>&nbsp;<span class="ident" id="4301311">value</span><span class="op" id="4301316">,</span>&nbsp;<span class="ident" id="4301318">rest</span>&nbsp;<span class="builtintype" id="4301323">string</span><span class="op" id="4301329">)</span>&nbsp;<span class="op" id="4301331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301334"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span>&nbsp;<span class="op" id="4301339">=</span>&nbsp;<span class="ident" id="4301341"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4301348">.</span><span class="ident" id="4301349"><a href="/gostd/strings/strings.go.html#2979686">TrimLeftFunc</a></span><span class="op" id="4301361">(</span><span class="ident" id="4301362"><a href="/gostd/mime/mediatype.go.html#4301293">v</a></span><span class="op" id="4301363">,</span>&nbsp;<span class="ident" id="4301365"><a href="/gostd/mime/mediatype.go.html#4294876">unicode</a></span><span class="op" id="4301372">.</span><span class="ident" id="4301373"><a href="/gostd/unicode/graphic.go.html#1820663">IsSpace</a></span><span class="op" id="4301380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301383">if</span>&nbsp;<span class="op" id="4301386">!</span><span class="ident" id="4301387"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4301394">.</span><span class="ident" id="4301395"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="4301404">(</span><span class="ident" id="4301405"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span><span class="op" id="4301409">,</span>&nbsp;<span class="string" id="4301411">&#34;;&#34;</span><span class="op" id="4301414">)</span>&nbsp;<span class="op" id="4301416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301420">return</span>&nbsp;<span class="string" id="4301427">&#34;&#34;</span><span class="op" id="4301429">,</span>&nbsp;<span class="string" id="4301431">&#34;&#34;</span><span class="op" id="4301433">,</span>&nbsp;<span class="ident" id="4301435"><a href="/gostd/mime/mediatype.go.html#4301293">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4301438">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301442"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span>&nbsp;<span class="op" id="4301447">=</span>&nbsp;<span class="ident" id="4301449"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span><span class="op" id="4301453">[</span><span class="num" id="4301454">1</span><span class="op" id="4301455">:</span><span class="op" id="4301456">]</span>&nbsp;<span class="comment" id="4301458">//&nbsp;consume&nbsp;semicolon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301480"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span>&nbsp;<span class="op" id="4301485">=</span>&nbsp;<span class="ident" id="4301487"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4301494">.</span><span class="ident" id="4301495"><a href="/gostd/strings/strings.go.html#2979686">TrimLeftFunc</a></span><span class="op" id="4301507">(</span><span class="ident" id="4301508"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span><span class="op" id="4301512">,</span>&nbsp;<span class="ident" id="4301514"><a href="/gostd/mime/mediatype.go.html#4294876">unicode</a></span><span class="op" id="4301521">.</span><span class="ident" id="4301522"><a href="/gostd/unicode/graphic.go.html#1820663">IsSpace</a></span><span class="op" id="4301529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301532"><a href="/gostd/mime/mediatype.go.html#4301304">param</a></span><span class="op" id="4301537">,</span>&nbsp;<span class="ident" id="4301539"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span>&nbsp;<span class="op" id="4301544">=</span>&nbsp;<span class="ident" id="4301546"><a href="/gostd/mime/mediatype.go.html#4300162">consumeToken</a></span><span class="op" id="4301558">(</span><span class="ident" id="4301559"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span><span class="op" id="4301563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301566"><a href="/gostd/mime/mediatype.go.html#4301304">param</a></span>&nbsp;<span class="op" id="4301572">=</span>&nbsp;<span class="ident" id="4301574"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4301581">.</span><span class="ident" id="4301582"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="4301589">(</span><span class="ident" id="4301590"><a href="/gostd/mime/mediatype.go.html#4301304">param</a></span><span class="op" id="4301595">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301598">if</span>&nbsp;<span class="ident" id="4301601"><a href="/gostd/mime/mediatype.go.html#4301304">param</a></span>&nbsp;<span class="op" id="4301607">==</span>&nbsp;<span class="string" id="4301610">&#34;&#34;</span>&nbsp;<span class="op" id="4301613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301617">return</span>&nbsp;<span class="string" id="4301624">&#34;&#34;</span><span class="op" id="4301626">,</span>&nbsp;<span class="string" id="4301628">&#34;&#34;</span><span class="op" id="4301630">,</span>&nbsp;<span class="ident" id="4301632"><a href="/gostd/mime/mediatype.go.html#4301293">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4301635">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301639"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span>&nbsp;<span class="op" id="4301644">=</span>&nbsp;<span class="ident" id="4301646"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4301653">.</span><span class="ident" id="4301654"><a href="/gostd/strings/strings.go.html#2979686">TrimLeftFunc</a></span><span class="op" id="4301666">(</span><span class="ident" id="4301667"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span><span class="op" id="4301671">,</span>&nbsp;<span class="ident" id="4301673"><a href="/gostd/mime/mediatype.go.html#4294876">unicode</a></span><span class="op" id="4301680">.</span><span class="ident" id="4301681"><a href="/gostd/unicode/graphic.go.html#1820663">IsSpace</a></span><span class="op" id="4301688">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301691">if</span>&nbsp;<span class="op" id="4301694">!</span><span class="ident" id="4301695"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4301702">.</span><span class="ident" id="4301703"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="4301712">(</span><span class="ident" id="4301713"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span><span class="op" id="4301717">,</span>&nbsp;<span class="string" id="4301719">&#34;=&#34;</span><span class="op" id="4301722">)</span>&nbsp;<span class="op" id="4301724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301728">return</span>&nbsp;<span class="string" id="4301735">&#34;&#34;</span><span class="op" id="4301737">,</span>&nbsp;<span class="string" id="4301739">&#34;&#34;</span><span class="op" id="4301741">,</span>&nbsp;<span class="ident" id="4301743"><a href="/gostd/mime/mediatype.go.html#4301293">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4301746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301749"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span>&nbsp;<span class="op" id="4301754">=</span>&nbsp;<span class="ident" id="4301756"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span><span class="op" id="4301760">[</span><span class="num" id="4301761">1</span><span class="op" id="4301762">:</span><span class="op" id="4301763">]</span>&nbsp;<span class="comment" id="4301765">//&nbsp;consume&nbsp;equals&nbsp;sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301789"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span>&nbsp;<span class="op" id="4301794">=</span>&nbsp;<span class="ident" id="4301796"><a href="/gostd/mime/mediatype.go.html#4294865">strings</a></span><span class="op" id="4301803">.</span><span class="ident" id="4301804"><a href="/gostd/strings/strings.go.html#2979686">TrimLeftFunc</a></span><span class="op" id="4301816">(</span><span class="ident" id="4301817"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span><span class="op" id="4301821">,</span>&nbsp;<span class="ident" id="4301823"><a href="/gostd/mime/mediatype.go.html#4294876">unicode</a></span><span class="op" id="4301830">.</span><span class="ident" id="4301831"><a href="/gostd/unicode/graphic.go.html#1820663">IsSpace</a></span><span class="op" id="4301838">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4301841"><a href="/gostd/mime/mediatype.go.html#4301311">value</a></span><span class="op" id="4301846">,</span>&nbsp;<span class="ident" id="4301848"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span>&nbsp;<span class="op" id="4301853">=</span>&nbsp;<span class="ident" id="4301855"><a href="/gostd/mime/mediatype.go.html#4300641">consumeValue</a></span><span class="op" id="4301867">(</span><span class="ident" id="4301868"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span><span class="op" id="4301872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301875">if</span>&nbsp;<span class="ident" id="4301878"><a href="/gostd/mime/mediatype.go.html#4301311">value</a></span>&nbsp;<span class="op" id="4301884">==</span>&nbsp;<span class="string" id="4301887">&#34;&#34;</span>&nbsp;<span class="op" id="4301890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301894">return</span>&nbsp;<span class="string" id="4301901">&#34;&#34;</span><span class="op" id="4301903">,</span>&nbsp;<span class="string" id="4301905">&#34;&#34;</span><span class="op" id="4301907">,</span>&nbsp;<span class="ident" id="4301909"><a href="/gostd/mime/mediatype.go.html#4301293">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4301912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4301915">return</span>&nbsp;<span class="ident" id="4301922"><a href="/gostd/mime/mediatype.go.html#4301304">param</a></span><span class="op" id="4301927">,</span>&nbsp;<span class="ident" id="4301929"><a href="/gostd/mime/mediatype.go.html#4301311">value</a></span><span class="op" id="4301934">,</span>&nbsp;<span class="ident" id="4301936"><a href="/gostd/mime/mediatype.go.html#4301318">rest</a></span><br>
<span class="lineno">295</span><span class="op" id="4301941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4301944">func</span>&nbsp;<span class="ident" id="4301949">percentHexUnescape</span><span class="op" id="4301967">(</span><span class="ident" id="4301968">s</span>&nbsp;<span class="builtintype" id="4301970">string</span><span class="op" id="4301976">)</span>&nbsp;<span class="op" id="4301978">(</span><span class="builtintype" id="4301979">string</span><span class="op" id="4301985">,</span>&nbsp;<span class="builtintype" id="4301987">error</span><span class="op" id="4301992">)</span>&nbsp;<span class="op" id="4301994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4301997">//&nbsp;Count&nbsp;%,&nbsp;check&nbsp;that&nbsp;they&#39;re&nbsp;well-formed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302042">percents</span>&nbsp;<span class="op" id="4302051">:=</span>&nbsp;<span class="num" id="4302054">0</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302057">for</span>&nbsp;<span class="ident" id="4302061">i</span>&nbsp;<span class="op" id="4302063">:=</span>&nbsp;<span class="num" id="4302066">0</span><span class="op" id="4302067">;</span>&nbsp;<span class="ident" id="4302069"><a href="/gostd/mime/mediatype.go.html#4302061">i</a></span>&nbsp;<span class="op" id="4302071">&lt;</span>&nbsp;<span class="builtinfunc" id="4302073">len</span><span class="op" id="4302076">(</span><span class="ident" id="4302077"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302078">)</span><span class="op" id="4302079">;</span>&nbsp;<span class="op" id="4302081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302085">if</span>&nbsp;<span class="ident" id="4302088"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302089">[</span><span class="ident" id="4302090"><a href="/gostd/mime/mediatype.go.html#4302061">i</a></span><span class="op" id="4302091">]</span>&nbsp;<span class="op" id="4302093">!=</span>&nbsp;<span class="string" id="4302096">&#39;%&#39;</span>&nbsp;<span class="op" id="4302100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302105"><a href="/gostd/mime/mediatype.go.html#4302061">i</a></span><span class="op" id="4302106">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302112">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302123">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302127"><a href="/gostd/mime/mediatype.go.html#4302042">percents</a></span><span class="op" id="4302135">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302140">if</span>&nbsp;<span class="ident" id="4302143"><a href="/gostd/mime/mediatype.go.html#4302061">i</a></span><span class="op" id="4302144">+</span><span class="num" id="4302145">2</span>&nbsp;<span class="op" id="4302147">&gt;=</span>&nbsp;<span class="builtinfunc" id="4302150">len</span><span class="op" id="4302153">(</span><span class="ident" id="4302154"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302155">)</span>&nbsp;<span class="op" id="4302157">||</span>&nbsp;<span class="op" id="4302160">!</span><span class="ident" id="4302161"><a href="/gostd/mime/mediatype.go.html#4302609">ishex</a></span><span class="op" id="4302166">(</span><span class="ident" id="4302167"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302168">[</span><span class="ident" id="4302169"><a href="/gostd/mime/mediatype.go.html#4302061">i</a></span><span class="op" id="4302170">+</span><span class="num" id="4302171">1</span><span class="op" id="4302172">]</span><span class="op" id="4302173">)</span>&nbsp;<span class="op" id="4302175">||</span>&nbsp;<span class="op" id="4302178">!</span><span class="ident" id="4302179"><a href="/gostd/mime/mediatype.go.html#4302609">ishex</a></span><span class="op" id="4302184">(</span><span class="ident" id="4302185"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302186">[</span><span class="ident" id="4302187"><a href="/gostd/mime/mediatype.go.html#4302061">i</a></span><span class="op" id="4302188">+</span><span class="num" id="4302189">2</span><span class="op" id="4302190">]</span><span class="op" id="4302191">)</span>&nbsp;<span class="op" id="4302193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302198"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span>&nbsp;<span class="op" id="4302200">=</span>&nbsp;<span class="ident" id="4302202"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302203">[</span><span class="ident" id="4302204"><a href="/gostd/mime/mediatype.go.html#4302061">i</a></span><span class="op" id="4302205">:</span><span class="op" id="4302206">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302211">if</span>&nbsp;<span class="builtinfunc" id="4302214">len</span><span class="op" id="4302217">(</span><span class="ident" id="4302218"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302219">)</span>&nbsp;<span class="op" id="4302221">&gt;</span>&nbsp;<span class="num" id="4302223">3</span>&nbsp;<span class="op" id="4302225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302231"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span>&nbsp;<span class="op" id="4302233">=</span>&nbsp;<span class="ident" id="4302235"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302236">[</span><span class="num" id="4302237">0</span><span class="op" id="4302238">:</span><span class="num" id="4302239">3</span><span class="op" id="4302240">]</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302250">return</span>&nbsp;<span class="string" id="4302257">&#34;&#34;</span><span class="op" id="4302259">,</span>&nbsp;<span class="ident" id="4302261"><a href="/gostd/mime/mediatype.go.html#4294850">fmt</a></span><span class="op" id="4302264">.</span><span class="ident" id="4302265"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="4302271">(</span><span class="string" id="4302272">&#34;mime:&nbsp;bogus&nbsp;characters&nbsp;after&nbsp;%%:&nbsp;%q&#34;</span><span class="op" id="4302309">,</span>&nbsp;<span class="ident" id="4302311"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302320"><a href="/gostd/mime/mediatype.go.html#4302061">i</a></span>&nbsp;<span class="op" id="4302322">+=</span>&nbsp;<span class="num" id="4302325">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302328">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302331">if</span>&nbsp;<span class="ident" id="4302334"><a href="/gostd/mime/mediatype.go.html#4302042">percents</a></span>&nbsp;<span class="op" id="4302343">==</span>&nbsp;<span class="num" id="4302346">0</span>&nbsp;<span class="op" id="4302348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302352">return</span>&nbsp;<span class="ident" id="4302359"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302360">,</span>&nbsp;<span class="builtintype" id="4302362">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302371">t</span>&nbsp;<span class="op" id="4302373">:=</span>&nbsp;<span class="builtinfunc" id="4302376">make</span><span class="op" id="4302380">(</span><span class="op" id="4302381">[</span><span class="op" id="4302382">]</span><span class="builtintype" id="4302383">byte</span><span class="op" id="4302387">,</span>&nbsp;<span class="builtinfunc" id="4302389">len</span><span class="op" id="4302392">(</span><span class="ident" id="4302393"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302394">)</span><span class="op" id="4302395">-</span><span class="num" id="4302396">2</span><span class="op" id="4302397">*</span><span class="ident" id="4302398"><a href="/gostd/mime/mediatype.go.html#4302042">percents</a></span><span class="op" id="4302406">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302409">j</span>&nbsp;<span class="op" id="4302411">:=</span>&nbsp;<span class="num" id="4302414">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302417">for</span>&nbsp;<span class="ident" id="4302421">i</span>&nbsp;<span class="op" id="4302423">:=</span>&nbsp;<span class="num" id="4302426">0</span><span class="op" id="4302427">;</span>&nbsp;<span class="ident" id="4302429"><a href="/gostd/mime/mediatype.go.html#4302421">i</a></span>&nbsp;<span class="op" id="4302431">&lt;</span>&nbsp;<span class="builtinfunc" id="4302433">len</span><span class="op" id="4302436">(</span><span class="ident" id="4302437"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302438">)</span><span class="op" id="4302439">;</span>&nbsp;<span class="op" id="4302441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302445">switch</span>&nbsp;<span class="ident" id="4302452"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302453">[</span><span class="ident" id="4302454"><a href="/gostd/mime/mediatype.go.html#4302421">i</a></span><span class="op" id="4302455">]</span>&nbsp;<span class="op" id="4302457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302461">case</span>&nbsp;<span class="string" id="4302466">&#39;%&#39;</span><span class="op" id="4302469">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302474"><a href="/gostd/mime/mediatype.go.html#4302371">t</a></span><span class="op" id="4302475">[</span><span class="ident" id="4302476"><a href="/gostd/mime/mediatype.go.html#4302409">j</a></span><span class="op" id="4302477">]</span>&nbsp;<span class="op" id="4302479">=</span>&nbsp;<span class="ident" id="4302481"><a href="/gostd/mime/mediatype.go.html#4302791">unhex</a></span><span class="op" id="4302486">(</span><span class="ident" id="4302487"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302488">[</span><span class="ident" id="4302489"><a href="/gostd/mime/mediatype.go.html#4302421">i</a></span><span class="op" id="4302490">+</span><span class="num" id="4302491">1</span><span class="op" id="4302492">]</span><span class="op" id="4302493">)</span><span class="op" id="4302494">&lt;&lt;</span><span class="num" id="4302496">4</span>&nbsp;<span class="op" id="4302498">|</span>&nbsp;<span class="ident" id="4302500"><a href="/gostd/mime/mediatype.go.html#4302791">unhex</a></span><span class="op" id="4302505">(</span><span class="ident" id="4302506"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302507">[</span><span class="ident" id="4302508"><a href="/gostd/mime/mediatype.go.html#4302421">i</a></span><span class="op" id="4302509">+</span><span class="num" id="4302510">2</span><span class="op" id="4302511">]</span><span class="op" id="4302512">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302517"><a href="/gostd/mime/mediatype.go.html#4302409">j</a></span><span class="op" id="4302518">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302524"><a href="/gostd/mime/mediatype.go.html#4302421">i</a></span>&nbsp;<span class="op" id="4302526">+=</span>&nbsp;<span class="num" id="4302529">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302533">default</span><span class="op" id="4302540">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302545"><a href="/gostd/mime/mediatype.go.html#4302371">t</a></span><span class="op" id="4302546">[</span><span class="ident" id="4302547"><a href="/gostd/mime/mediatype.go.html#4302409">j</a></span><span class="op" id="4302548">]</span>&nbsp;<span class="op" id="4302550">=</span>&nbsp;<span class="ident" id="4302552"><a href="/gostd/mime/mediatype.go.html#4301968">s</a></span><span class="op" id="4302553">[</span><span class="ident" id="4302554"><a href="/gostd/mime/mediatype.go.html#4302421">i</a></span><span class="op" id="4302555">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302560"><a href="/gostd/mime/mediatype.go.html#4302409">j</a></span><span class="op" id="4302561">++</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4302567"><a href="/gostd/mime/mediatype.go.html#4302421">i</a></span><span class="op" id="4302568">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302579">return</span>&nbsp;<span class="builtintype" id="4302586">string</span><span class="op" id="4302592">(</span><span class="ident" id="4302593"><a href="/gostd/mime/mediatype.go.html#4302371">t</a></span><span class="op" id="4302594">)</span><span class="op" id="4302595">,</span>&nbsp;<span class="builtintype" id="4302597">nil</span><br>
<span class="lineno"></span><span class="op" id="4302601">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="keyword" id="4302604">func</span>&nbsp;<span class="ident" id="4302609">ishex</span><span class="op" id="4302614">(</span><span class="ident" id="4302615">c</span>&nbsp;<span class="builtintype" id="4302617">byte</span><span class="op" id="4302621">)</span>&nbsp;<span class="builtintype" id="4302623">bool</span>&nbsp;<span class="op" id="4302628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302631">switch</span>&nbsp;<span class="op" id="4302638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302641">case</span>&nbsp;<span class="string" id="4302646">&#39;0&#39;</span>&nbsp;<span class="op" id="4302650">&lt;=</span>&nbsp;<span class="ident" id="4302653"><a href="/gostd/mime/mediatype.go.html#4302615">c</a></span>&nbsp;<span class="op" id="4302655">&amp;&amp;</span>&nbsp;<span class="ident" id="4302658"><a href="/gostd/mime/mediatype.go.html#4302615">c</a></span>&nbsp;<span class="op" id="4302660">&lt;=</span>&nbsp;<span class="string" id="4302663">&#39;9&#39;</span><span class="op" id="4302666">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302670">return</span>&nbsp;<span class="builtintype" id="4302677">true</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302683">case</span>&nbsp;<span class="string" id="4302688">&#39;a&#39;</span>&nbsp;<span class="op" id="4302692">&lt;=</span>&nbsp;<span class="ident" id="4302695"><a href="/gostd/mime/mediatype.go.html#4302615">c</a></span>&nbsp;<span class="op" id="4302697">&amp;&amp;</span>&nbsp;<span class="ident" id="4302700"><a href="/gostd/mime/mediatype.go.html#4302615">c</a></span>&nbsp;<span class="op" id="4302702">&lt;=</span>&nbsp;<span class="string" id="4302705">&#39;f&#39;</span><span class="op" id="4302708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302712">return</span>&nbsp;<span class="builtintype" id="4302719">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302725">case</span>&nbsp;<span class="string" id="4302730">&#39;A&#39;</span>&nbsp;<span class="op" id="4302734">&lt;=</span>&nbsp;<span class="ident" id="4302737"><a href="/gostd/mime/mediatype.go.html#4302615">c</a></span>&nbsp;<span class="op" id="4302739">&amp;&amp;</span>&nbsp;<span class="ident" id="4302742"><a href="/gostd/mime/mediatype.go.html#4302615">c</a></span>&nbsp;<span class="op" id="4302744">&lt;=</span>&nbsp;<span class="string" id="4302747">&#39;F&#39;</span><span class="op" id="4302750">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302754">return</span>&nbsp;<span class="builtintype" id="4302761">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302767">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302770">return</span>&nbsp;<span class="builtintype" id="4302777">false</span><br>
<span class="lineno"></span><span class="op" id="4302783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4302786">func</span>&nbsp;<span class="ident" id="4302791">unhex</span><span class="op" id="4302796">(</span><span class="ident" id="4302797">c</span>&nbsp;<span class="builtintype" id="4302799">byte</span><span class="op" id="4302803">)</span>&nbsp;<span class="builtintype" id="4302805">byte</span>&nbsp;<span class="op" id="4302810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302813">switch</span>&nbsp;<span class="op" id="4302820">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302823">case</span>&nbsp;<span class="string" id="4302828">&#39;0&#39;</span>&nbsp;<span class="op" id="4302832">&lt;=</span>&nbsp;<span class="ident" id="4302835"><a href="/gostd/mime/mediatype.go.html#4302797">c</a></span>&nbsp;<span class="op" id="4302837">&amp;&amp;</span>&nbsp;<span class="ident" id="4302840"><a href="/gostd/mime/mediatype.go.html#4302797">c</a></span>&nbsp;<span class="op" id="4302842">&lt;=</span>&nbsp;<span class="string" id="4302845">&#39;9&#39;</span><span class="op" id="4302848">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302852">return</span>&nbsp;<span class="ident" id="4302859"><a href="/gostd/mime/mediatype.go.html#4302797">c</a></span>&nbsp;<span class="op" id="4302861">-</span>&nbsp;<span class="string" id="4302863">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302868">case</span>&nbsp;<span class="string" id="4302873">&#39;a&#39;</span>&nbsp;<span class="op" id="4302877">&lt;=</span>&nbsp;<span class="ident" id="4302880"><a href="/gostd/mime/mediatype.go.html#4302797">c</a></span>&nbsp;<span class="op" id="4302882">&amp;&amp;</span>&nbsp;<span class="ident" id="4302885"><a href="/gostd/mime/mediatype.go.html#4302797">c</a></span>&nbsp;<span class="op" id="4302887">&lt;=</span>&nbsp;<span class="string" id="4302890">&#39;f&#39;</span><span class="op" id="4302893">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302897">return</span>&nbsp;<span class="ident" id="4302904"><a href="/gostd/mime/mediatype.go.html#4302797">c</a></span>&nbsp;<span class="op" id="4302906">-</span>&nbsp;<span class="string" id="4302908">&#39;a&#39;</span>&nbsp;<span class="op" id="4302912">+</span>&nbsp;<span class="num" id="4302914">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302918">case</span>&nbsp;<span class="string" id="4302923">&#39;A&#39;</span>&nbsp;<span class="op" id="4302927">&lt;=</span>&nbsp;<span class="ident" id="4302930"><a href="/gostd/mime/mediatype.go.html#4302797">c</a></span>&nbsp;<span class="op" id="4302932">&amp;&amp;</span>&nbsp;<span class="ident" id="4302935"><a href="/gostd/mime/mediatype.go.html#4302797">c</a></span>&nbsp;<span class="op" id="4302937">&lt;=</span>&nbsp;<span class="string" id="4302940">&#39;F&#39;</span><span class="op" id="4302943">:</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302947">return</span>&nbsp;<span class="ident" id="4302954"><a href="/gostd/mime/mediatype.go.html#4302797">c</a></span>&nbsp;<span class="op" id="4302956">-</span>&nbsp;<span class="string" id="4302958">&#39;A&#39;</span>&nbsp;<span class="op" id="4302962">+</span>&nbsp;<span class="num" id="4302964">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4302968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4302971">return</span>&nbsp;<span class="num" id="4302978">0</span><br>
<span class="lineno"></span><span class="op" id="4302980">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
