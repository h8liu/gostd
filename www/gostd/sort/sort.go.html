<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sort</h2>
<ul>
<li><a href="/gostd/sort/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/sort/example_keys_test.go.html">example_keys_test.go</a></li>
<li><a href="/gostd/sort/example_multi_test.go.html">example_multi_test.go</a></li>
<li><a href="/gostd/sort/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/sort/example_wrapper_test.go.html">example_wrapper_test.go</a></li>
<li><a href="/gostd/sort/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/sort/search.go.html">search.go</a></li>
<li><a href="/gostd/sort/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/sort/sort.go.html" class="current">sort.go</a></li>
<li><a href="/gostd/sort/sort_test.go.html">sort_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2901190">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2901245">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2901299">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2901350">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2901422">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2901438">package</span>&nbsp;<span class="ident" id="2901446">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2901452">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2901524">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2901597">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2901662">type</span>&nbsp;<span class="ident" id="2901667">Interface</span>&nbsp;<span class="keyword" id="2901677">interface</span>&nbsp;<span class="op" id="2901687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2901690">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901743">Len</span><span class="op" id="2901746">(</span><span class="op" id="2901747">)</span>&nbsp;<span class="builtintype" id="2901749">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2901754">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2901796">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901853">Less</span><span class="op" id="2901857">(</span><span class="ident" id="2901858">i</span><span class="op" id="2901859">,</span>&nbsp;<span class="ident" id="2901861">j</span>&nbsp;<span class="builtintype" id="2901863">int</span><span class="op" id="2901866">)</span>&nbsp;<span class="builtintype" id="2901868">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2901874">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2901924">Swap</span><span class="op" id="2901928">(</span><span class="ident" id="2901929">i</span><span class="op" id="2901930">,</span>&nbsp;<span class="ident" id="2901932">j</span>&nbsp;<span class="builtintype" id="2901934">int</span><span class="op" id="2901937">)</span><br>
<span class="lineno">20</span><span class="op" id="2901939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2901942">func</span>&nbsp;<span class="ident" id="2901947">min</span><span class="op" id="2901950">(</span><span class="ident" id="2901951">a</span><span class="op" id="2901952">,</span>&nbsp;<span class="ident" id="2901954">b</span>&nbsp;<span class="builtintype" id="2901956">int</span><span class="op" id="2901959">)</span>&nbsp;<span class="builtintype" id="2901961">int</span>&nbsp;<span class="op" id="2901965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901968">if</span>&nbsp;<span class="ident" id="2901971">a</span>&nbsp;<span class="op" id="2901973">&lt;</span>&nbsp;<span class="ident" id="2901975">b</span>&nbsp;<span class="op" id="2901977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901981">return</span>&nbsp;<span class="ident" id="2901988">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2901991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2901994">return</span>&nbsp;<span class="ident" id="2902001">b</span><br>
<span class="lineno"></span><span class="op" id="2902003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2902006">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2902024">func</span>&nbsp;<span class="ident" id="2902029">insertionSort</span><span class="op" id="2902042">(</span><span class="ident" id="2902043">data</span>&nbsp;<span class="ident" id="2902048">Interface</span><span class="op" id="2902057">,</span>&nbsp;<span class="ident" id="2902059">a</span><span class="op" id="2902060">,</span>&nbsp;<span class="ident" id="2902062">b</span>&nbsp;<span class="builtintype" id="2902064">int</span><span class="op" id="2902067">)</span>&nbsp;<span class="op" id="2902069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902072">for</span>&nbsp;<span class="ident" id="2902076">i</span>&nbsp;<span class="op" id="2902078">:=</span>&nbsp;<span class="ident" id="2902081">a</span>&nbsp;<span class="op" id="2902083">+</span>&nbsp;<span class="num" id="2902085">1</span><span class="op" id="2902086">;</span>&nbsp;<span class="ident" id="2902088">i</span>&nbsp;<span class="op" id="2902090">&lt;</span>&nbsp;<span class="ident" id="2902092">b</span><span class="op" id="2902093">;</span>&nbsp;<span class="ident" id="2902095">i</span><span class="op" id="2902096">++</span>&nbsp;<span class="op" id="2902099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902103">for</span>&nbsp;<span class="ident" id="2902107">j</span>&nbsp;<span class="op" id="2902109">:=</span>&nbsp;<span class="ident" id="2902112">i</span><span class="op" id="2902113">;</span>&nbsp;<span class="ident" id="2902115">j</span>&nbsp;<span class="op" id="2902117">&gt;</span>&nbsp;<span class="ident" id="2902119">a</span>&nbsp;<span class="op" id="2902121">&amp;&amp;</span>&nbsp;<span class="ident" id="2902124">data</span><span class="op" id="2902128">.</span><span class="ident" id="2902129">Less</span><span class="op" id="2902133">(</span><span class="ident" id="2902134">j</span><span class="op" id="2902135">,</span>&nbsp;<span class="ident" id="2902137">j</span><span class="op" id="2902138">-</span><span class="num" id="2902139">1</span><span class="op" id="2902140">)</span><span class="op" id="2902141">;</span>&nbsp;<span class="ident" id="2902143">j</span><span class="op" id="2902144">--</span>&nbsp;<span class="op" id="2902147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902152">data</span><span class="op" id="2902156">.</span><span class="ident" id="2902157">Swap</span><span class="op" id="2902161">(</span><span class="ident" id="2902162">j</span><span class="op" id="2902163">,</span>&nbsp;<span class="ident" id="2902165">j</span><span class="op" id="2902166">-</span><span class="num" id="2902167">1</span><span class="op" id="2902168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902172">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902175">}</span><br>
<span class="lineno"></span><span class="op" id="2902177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2902180">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2902238">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2902308">func</span>&nbsp;<span class="ident" id="2902313">siftDown</span><span class="op" id="2902321">(</span><span class="ident" id="2902322">data</span>&nbsp;<span class="ident" id="2902327">Interface</span><span class="op" id="2902336">,</span>&nbsp;<span class="ident" id="2902338">lo</span><span class="op" id="2902340">,</span>&nbsp;<span class="ident" id="2902342">hi</span><span class="op" id="2902344">,</span>&nbsp;<span class="ident" id="2902346">first</span>&nbsp;<span class="builtintype" id="2902352">int</span><span class="op" id="2902355">)</span>&nbsp;<span class="op" id="2902357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902360">root</span>&nbsp;<span class="op" id="2902365">:=</span>&nbsp;<span class="ident" id="2902368">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902372">for</span>&nbsp;<span class="op" id="2902376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902380">child</span>&nbsp;<span class="op" id="2902386">:=</span>&nbsp;<span class="num" id="2902389">2</span><span class="op" id="2902390">*</span><span class="ident" id="2902391">root</span>&nbsp;<span class="op" id="2902396">+</span>&nbsp;<span class="num" id="2902398">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902402">if</span>&nbsp;<span class="ident" id="2902405">child</span>&nbsp;<span class="op" id="2902411">&gt;=</span>&nbsp;<span class="ident" id="2902414">hi</span>&nbsp;<span class="op" id="2902417">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902422">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902434">if</span>&nbsp;<span class="ident" id="2902437">child</span><span class="op" id="2902442">+</span><span class="num" id="2902443">1</span>&nbsp;<span class="op" id="2902445">&lt;</span>&nbsp;<span class="ident" id="2902447">hi</span>&nbsp;<span class="op" id="2902450">&amp;&amp;</span>&nbsp;<span class="ident" id="2902453">data</span><span class="op" id="2902457">.</span><span class="ident" id="2902458">Less</span><span class="op" id="2902462">(</span><span class="ident" id="2902463">first</span><span class="op" id="2902468">+</span><span class="ident" id="2902469">child</span><span class="op" id="2902474">,</span>&nbsp;<span class="ident" id="2902476">first</span><span class="op" id="2902481">+</span><span class="ident" id="2902482">child</span><span class="op" id="2902487">+</span><span class="num" id="2902488">1</span><span class="op" id="2902489">)</span>&nbsp;<span class="op" id="2902491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902496">child</span><span class="op" id="2902501">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902506">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902510">if</span>&nbsp;<span class="op" id="2902513">!</span><span class="ident" id="2902514">data</span><span class="op" id="2902518">.</span><span class="ident" id="2902519">Less</span><span class="op" id="2902523">(</span><span class="ident" id="2902524">first</span><span class="op" id="2902529">+</span><span class="ident" id="2902530">root</span><span class="op" id="2902534">,</span>&nbsp;<span class="ident" id="2902536">first</span><span class="op" id="2902541">+</span><span class="ident" id="2902542">child</span><span class="op" id="2902547">)</span>&nbsp;<span class="op" id="2902549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902554">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902567">data</span><span class="op" id="2902571">.</span><span class="ident" id="2902572">Swap</span><span class="op" id="2902576">(</span><span class="ident" id="2902577">first</span><span class="op" id="2902582">+</span><span class="ident" id="2902583">root</span><span class="op" id="2902587">,</span>&nbsp;<span class="ident" id="2902589">first</span><span class="op" id="2902594">+</span><span class="ident" id="2902595">child</span><span class="op" id="2902600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902604">root</span>&nbsp;<span class="op" id="2902609">=</span>&nbsp;<span class="ident" id="2902611">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902618">}</span><br>
<span class="lineno"></span><span class="op" id="2902620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2902623">func</span>&nbsp;<span class="ident" id="2902628">heapSort</span><span class="op" id="2902636">(</span><span class="ident" id="2902637">data</span>&nbsp;<span class="ident" id="2902642">Interface</span><span class="op" id="2902651">,</span>&nbsp;<span class="ident" id="2902653">a</span><span class="op" id="2902654">,</span>&nbsp;<span class="ident" id="2902656">b</span>&nbsp;<span class="builtintype" id="2902658">int</span><span class="op" id="2902661">)</span>&nbsp;<span class="op" id="2902663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902666">first</span>&nbsp;<span class="op" id="2902672">:=</span>&nbsp;<span class="ident" id="2902675">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902678">lo</span>&nbsp;<span class="op" id="2902681">:=</span>&nbsp;<span class="num" id="2902684">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902687">hi</span>&nbsp;<span class="op" id="2902690">:=</span>&nbsp;<span class="ident" id="2902693">b</span>&nbsp;<span class="op" id="2902695">-</span>&nbsp;<span class="ident" id="2902697">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2902701">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902746">for</span>&nbsp;<span class="ident" id="2902750">i</span>&nbsp;<span class="op" id="2902752">:=</span>&nbsp;<span class="op" id="2902755">(</span><span class="ident" id="2902756">hi</span>&nbsp;<span class="op" id="2902759">-</span>&nbsp;<span class="num" id="2902761">1</span><span class="op" id="2902762">)</span>&nbsp;<span class="op" id="2902764">/</span>&nbsp;<span class="num" id="2902766">2</span><span class="op" id="2902767">;</span>&nbsp;<span class="ident" id="2902769">i</span>&nbsp;<span class="op" id="2902771">&gt;=</span>&nbsp;<span class="num" id="2902774">0</span><span class="op" id="2902775">;</span>&nbsp;<span class="ident" id="2902777">i</span><span class="op" id="2902778">--</span>&nbsp;<span class="op" id="2902781">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902785">siftDown</span><span class="op" id="2902793">(</span><span class="ident" id="2902794">data</span><span class="op" id="2902798">,</span>&nbsp;<span class="ident" id="2902800">i</span><span class="op" id="2902801">,</span>&nbsp;<span class="ident" id="2902803">hi</span><span class="op" id="2902805">,</span>&nbsp;<span class="ident" id="2902807">first</span><span class="op" id="2902812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2902819">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2902870">for</span>&nbsp;<span class="ident" id="2902874">i</span>&nbsp;<span class="op" id="2902876">:=</span>&nbsp;<span class="ident" id="2902879">hi</span>&nbsp;<span class="op" id="2902882">-</span>&nbsp;<span class="num" id="2902884">1</span><span class="op" id="2902885">;</span>&nbsp;<span class="ident" id="2902887">i</span>&nbsp;<span class="op" id="2902889">&gt;=</span>&nbsp;<span class="num" id="2902892">0</span><span class="op" id="2902893">;</span>&nbsp;<span class="ident" id="2902895">i</span><span class="op" id="2902896">--</span>&nbsp;<span class="op" id="2902899">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902903">data</span><span class="op" id="2902907">.</span><span class="ident" id="2902908">Swap</span><span class="op" id="2902912">(</span><span class="ident" id="2902913">first</span><span class="op" id="2902918">,</span>&nbsp;<span class="ident" id="2902920">first</span><span class="op" id="2902925">+</span><span class="ident" id="2902926">i</span><span class="op" id="2902927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2902931">siftDown</span><span class="op" id="2902939">(</span><span class="ident" id="2902940">data</span><span class="op" id="2902944">,</span>&nbsp;<span class="ident" id="2902946">lo</span><span class="op" id="2902948">,</span>&nbsp;<span class="ident" id="2902950">i</span><span class="op" id="2902951">,</span>&nbsp;<span class="ident" id="2902953">first</span><span class="op" id="2902958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2902961">}</span><br>
<span class="lineno"></span><span class="op" id="2902963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2902966">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2903011">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2903068">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2903162">func</span>&nbsp;<span class="ident" id="2903167">medianOfThree</span><span class="op" id="2903180">(</span><span class="ident" id="2903181">data</span>&nbsp;<span class="ident" id="2903186">Interface</span><span class="op" id="2903195">,</span>&nbsp;<span class="ident" id="2903197">a</span><span class="op" id="2903198">,</span>&nbsp;<span class="ident" id="2903200">b</span><span class="op" id="2903201">,</span>&nbsp;<span class="ident" id="2903203">c</span>&nbsp;<span class="builtintype" id="2903205">int</span><span class="op" id="2903208">)</span>&nbsp;<span class="op" id="2903210">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903213">m0</span>&nbsp;<span class="op" id="2903216">:=</span>&nbsp;<span class="ident" id="2903219">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903222">m1</span>&nbsp;<span class="op" id="2903225">:=</span>&nbsp;<span class="ident" id="2903228">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903231">m2</span>&nbsp;<span class="op" id="2903234">:=</span>&nbsp;<span class="ident" id="2903237">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2903240">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903270">if</span>&nbsp;<span class="ident" id="2903273">data</span><span class="op" id="2903277">.</span><span class="ident" id="2903278">Less</span><span class="op" id="2903282">(</span><span class="ident" id="2903283">m1</span><span class="op" id="2903285">,</span>&nbsp;<span class="ident" id="2903287">m0</span><span class="op" id="2903289">)</span>&nbsp;<span class="op" id="2903291">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903295">data</span><span class="op" id="2903299">.</span><span class="ident" id="2903300">Swap</span><span class="op" id="2903304">(</span><span class="ident" id="2903305">m1</span><span class="op" id="2903307">,</span>&nbsp;<span class="ident" id="2903309">m0</span><span class="op" id="2903311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903317">if</span>&nbsp;<span class="ident" id="2903320">data</span><span class="op" id="2903324">.</span><span class="ident" id="2903325">Less</span><span class="op" id="2903329">(</span><span class="ident" id="2903330">m2</span><span class="op" id="2903332">,</span>&nbsp;<span class="ident" id="2903334">m1</span><span class="op" id="2903336">)</span>&nbsp;<span class="op" id="2903338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903342">data</span><span class="op" id="2903346">.</span><span class="ident" id="2903347">Swap</span><span class="op" id="2903351">(</span><span class="ident" id="2903352">m2</span><span class="op" id="2903354">,</span>&nbsp;<span class="ident" id="2903356">m1</span><span class="op" id="2903358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903361">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903364">if</span>&nbsp;<span class="ident" id="2903367">data</span><span class="op" id="2903371">.</span><span class="ident" id="2903372">Less</span><span class="op" id="2903376">(</span><span class="ident" id="2903377">m1</span><span class="op" id="2903379">,</span>&nbsp;<span class="ident" id="2903381">m0</span><span class="op" id="2903383">)</span>&nbsp;<span class="op" id="2903385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903389">data</span><span class="op" id="2903393">.</span><span class="ident" id="2903394">Swap</span><span class="op" id="2903398">(</span><span class="ident" id="2903399">m1</span><span class="op" id="2903401">,</span>&nbsp;<span class="ident" id="2903403">m0</span><span class="op" id="2903405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2903411">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2903451">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2903454">func</span>&nbsp;<span class="ident" id="2903459">swapRange</span><span class="op" id="2903468">(</span><span class="ident" id="2903469">data</span>&nbsp;<span class="ident" id="2903474">Interface</span><span class="op" id="2903483">,</span>&nbsp;<span class="ident" id="2903485">a</span><span class="op" id="2903486">,</span>&nbsp;<span class="ident" id="2903488">b</span><span class="op" id="2903489">,</span>&nbsp;<span class="ident" id="2903491">n</span>&nbsp;<span class="builtintype" id="2903493">int</span><span class="op" id="2903496">)</span>&nbsp;<span class="op" id="2903498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903501">for</span>&nbsp;<span class="ident" id="2903505">i</span>&nbsp;<span class="op" id="2903507">:=</span>&nbsp;<span class="num" id="2903510">0</span><span class="op" id="2903511">;</span>&nbsp;<span class="ident" id="2903513">i</span>&nbsp;<span class="op" id="2903515">&lt;</span>&nbsp;<span class="ident" id="2903517">n</span><span class="op" id="2903518">;</span>&nbsp;<span class="ident" id="2903520">i</span><span class="op" id="2903521">++</span>&nbsp;<span class="op" id="2903524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903528">data</span><span class="op" id="2903532">.</span><span class="ident" id="2903533">Swap</span><span class="op" id="2903537">(</span><span class="ident" id="2903538">a</span><span class="op" id="2903539">+</span><span class="ident" id="2903540">i</span><span class="op" id="2903541">,</span>&nbsp;<span class="ident" id="2903543">b</span><span class="op" id="2903544">+</span><span class="ident" id="2903545">i</span><span class="op" id="2903546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903549">}</span><br>
<span class="lineno">100</span><span class="op" id="2903551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2903554">func</span>&nbsp;<span class="ident" id="2903559">doPivot</span><span class="op" id="2903566">(</span><span class="ident" id="2903567">data</span>&nbsp;<span class="ident" id="2903572">Interface</span><span class="op" id="2903581">,</span>&nbsp;<span class="ident" id="2903583">lo</span><span class="op" id="2903585">,</span>&nbsp;<span class="ident" id="2903587">hi</span>&nbsp;<span class="builtintype" id="2903590">int</span><span class="op" id="2903593">)</span>&nbsp;<span class="op" id="2903595">(</span><span class="ident" id="2903596">midlo</span><span class="op" id="2903601">,</span>&nbsp;<span class="ident" id="2903603">midhi</span>&nbsp;<span class="builtintype" id="2903609">int</span><span class="op" id="2903612">)</span>&nbsp;<span class="op" id="2903614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903617">m</span>&nbsp;<span class="op" id="2903619">:=</span>&nbsp;<span class="ident" id="2903622">lo</span>&nbsp;<span class="op" id="2903625">+</span>&nbsp;<span class="op" id="2903627">(</span><span class="ident" id="2903628">hi</span><span class="op" id="2903630">-</span><span class="ident" id="2903631">lo</span><span class="op" id="2903633">)</span><span class="op" id="2903634">/</span><span class="num" id="2903635">2</span>&nbsp;<span class="comment" id="2903637">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2903686">if</span>&nbsp;<span class="ident" id="2903689">hi</span><span class="op" id="2903691">-</span><span class="ident" id="2903692">lo</span>&nbsp;<span class="op" id="2903695">&gt;</span>&nbsp;<span class="num" id="2903697">40</span>&nbsp;<span class="op" id="2903700">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2903704">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903764">s</span>&nbsp;<span class="op" id="2903766">:=</span>&nbsp;<span class="op" id="2903769">(</span><span class="ident" id="2903770">hi</span>&nbsp;<span class="op" id="2903773">-</span>&nbsp;<span class="ident" id="2903775">lo</span><span class="op" id="2903777">)</span>&nbsp;<span class="op" id="2903779">/</span>&nbsp;<span class="num" id="2903781">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903785">medianOfThree</span><span class="op" id="2903798">(</span><span class="ident" id="2903799">data</span><span class="op" id="2903803">,</span>&nbsp;<span class="ident" id="2903805">lo</span><span class="op" id="2903807">,</span>&nbsp;<span class="ident" id="2903809">lo</span><span class="op" id="2903811">+</span><span class="ident" id="2903812">s</span><span class="op" id="2903813">,</span>&nbsp;<span class="ident" id="2903815">lo</span><span class="op" id="2903817">+</span><span class="num" id="2903818">2</span><span class="op" id="2903819">*</span><span class="ident" id="2903820">s</span><span class="op" id="2903821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903825">medianOfThree</span><span class="op" id="2903838">(</span><span class="ident" id="2903839">data</span><span class="op" id="2903843">,</span>&nbsp;<span class="ident" id="2903845">m</span><span class="op" id="2903846">,</span>&nbsp;<span class="ident" id="2903848">m</span><span class="op" id="2903849">-</span><span class="ident" id="2903850">s</span><span class="op" id="2903851">,</span>&nbsp;<span class="ident" id="2903853">m</span><span class="op" id="2903854">+</span><span class="ident" id="2903855">s</span><span class="op" id="2903856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903860">medianOfThree</span><span class="op" id="2903873">(</span><span class="ident" id="2903874">data</span><span class="op" id="2903878">,</span>&nbsp;<span class="ident" id="2903880">hi</span><span class="op" id="2903882">-</span><span class="num" id="2903883">1</span><span class="op" id="2903884">,</span>&nbsp;<span class="ident" id="2903886">hi</span><span class="op" id="2903888">-</span><span class="num" id="2903889">1</span><span class="op" id="2903890">-</span><span class="ident" id="2903891">s</span><span class="op" id="2903892">,</span>&nbsp;<span class="ident" id="2903894">hi</span><span class="op" id="2903896">-</span><span class="num" id="2903897">1</span><span class="op" id="2903898">-</span><span class="num" id="2903899">2</span><span class="op" id="2903900">*</span><span class="ident" id="2903901">s</span><span class="op" id="2903902">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2903905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2903908">medianOfThree</span><span class="op" id="2903921">(</span><span class="ident" id="2903922">data</span><span class="op" id="2903926">,</span>&nbsp;<span class="ident" id="2903928">lo</span><span class="op" id="2903930">,</span>&nbsp;<span class="ident" id="2903932">m</span><span class="op" id="2903933">,</span>&nbsp;<span class="ident" id="2903935">hi</span><span class="op" id="2903937">-</span><span class="num" id="2903938">1</span><span class="op" id="2903939">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2903943">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2903963">//&nbsp;&nbsp;&nbsp;&nbsp;data[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904008">//&nbsp;&nbsp;&nbsp;&nbsp;data[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904038">//&nbsp;&nbsp;&nbsp;&nbsp;data[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904067">//&nbsp;&nbsp;&nbsp;&nbsp;data[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904102">//&nbsp;&nbsp;&nbsp;&nbsp;data[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904131">//&nbsp;&nbsp;&nbsp;&nbsp;data[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904161">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904165">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904217">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904251">pivot</span>&nbsp;<span class="op" id="2904257">:=</span>&nbsp;<span class="ident" id="2904260">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904264">a</span><span class="op" id="2904265">,</span>&nbsp;<span class="ident" id="2904267">b</span><span class="op" id="2904268">,</span>&nbsp;<span class="ident" id="2904270">c</span><span class="op" id="2904271">,</span>&nbsp;<span class="ident" id="2904273">d</span>&nbsp;<span class="op" id="2904275">:=</span>&nbsp;<span class="ident" id="2904278">lo</span><span class="op" id="2904280">+</span><span class="num" id="2904281">1</span><span class="op" id="2904282">,</span>&nbsp;<span class="ident" id="2904284">lo</span><span class="op" id="2904286">+</span><span class="num" id="2904287">1</span><span class="op" id="2904288">,</span>&nbsp;<span class="ident" id="2904290">hi</span><span class="op" id="2904292">,</span>&nbsp;<span class="ident" id="2904294">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904298">for</span>&nbsp;<span class="op" id="2904302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904306">for</span>&nbsp;<span class="ident" id="2904310">b</span>&nbsp;<span class="op" id="2904312">&lt;</span>&nbsp;<span class="ident" id="2904314">c</span>&nbsp;<span class="op" id="2904316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904321">if</span>&nbsp;<span class="ident" id="2904324">data</span><span class="op" id="2904328">.</span><span class="ident" id="2904329">Less</span><span class="op" id="2904333">(</span><span class="ident" id="2904334">b</span><span class="op" id="2904335">,</span>&nbsp;<span class="ident" id="2904337">pivot</span><span class="op" id="2904342">)</span>&nbsp;<span class="op" id="2904344">{</span>&nbsp;<span class="comment" id="2904346">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904369">b</span><span class="op" id="2904370">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904376">}</span>&nbsp;<span class="keyword" id="2904378">else</span>&nbsp;<span class="keyword" id="2904383">if</span>&nbsp;<span class="op" id="2904386">!</span><span class="ident" id="2904387">data</span><span class="op" id="2904391">.</span><span class="ident" id="2904392">Less</span><span class="op" id="2904396">(</span><span class="ident" id="2904397">pivot</span><span class="op" id="2904402">,</span>&nbsp;<span class="ident" id="2904404">b</span><span class="op" id="2904405">)</span>&nbsp;<span class="op" id="2904407">{</span>&nbsp;<span class="comment" id="2904409">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904432">data</span><span class="op" id="2904436">.</span><span class="ident" id="2904437">Swap</span><span class="op" id="2904441">(</span><span class="ident" id="2904442">a</span><span class="op" id="2904443">,</span>&nbsp;<span class="ident" id="2904445">b</span><span class="op" id="2904446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904452">a</span><span class="op" id="2904453">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904460">b</span><span class="op" id="2904461">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904467">}</span>&nbsp;<span class="keyword" id="2904469">else</span>&nbsp;<span class="op" id="2904474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904480">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904497">for</span>&nbsp;<span class="ident" id="2904501">b</span>&nbsp;<span class="op" id="2904503">&lt;</span>&nbsp;<span class="ident" id="2904505">c</span>&nbsp;<span class="op" id="2904507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904512">if</span>&nbsp;<span class="ident" id="2904515">data</span><span class="op" id="2904519">.</span><span class="ident" id="2904520">Less</span><span class="op" id="2904524">(</span><span class="ident" id="2904525">pivot</span><span class="op" id="2904530">,</span>&nbsp;<span class="ident" id="2904532">c</span><span class="op" id="2904533">-</span><span class="num" id="2904534">1</span><span class="op" id="2904535">)</span>&nbsp;<span class="op" id="2904537">{</span>&nbsp;<span class="comment" id="2904539">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904564">c</span><span class="op" id="2904565">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904571">}</span>&nbsp;<span class="keyword" id="2904573">else</span>&nbsp;<span class="keyword" id="2904578">if</span>&nbsp;<span class="op" id="2904581">!</span><span class="ident" id="2904582">data</span><span class="op" id="2904586">.</span><span class="ident" id="2904587">Less</span><span class="op" id="2904591">(</span><span class="ident" id="2904592">c</span><span class="op" id="2904593">-</span><span class="num" id="2904594">1</span><span class="op" id="2904595">,</span>&nbsp;<span class="ident" id="2904597">pivot</span><span class="op" id="2904602">)</span>&nbsp;<span class="op" id="2904604">{</span>&nbsp;<span class="comment" id="2904606">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904631">data</span><span class="op" id="2904635">.</span><span class="ident" id="2904636">Swap</span><span class="op" id="2904640">(</span><span class="ident" id="2904641">c</span><span class="op" id="2904642">-</span><span class="num" id="2904643">1</span><span class="op" id="2904644">,</span>&nbsp;<span class="ident" id="2904646">d</span><span class="op" id="2904647">-</span><span class="num" id="2904648">1</span><span class="op" id="2904649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904655">c</span><span class="op" id="2904656">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904663">d</span><span class="op" id="2904664">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904670">}</span>&nbsp;<span class="keyword" id="2904672">else</span>&nbsp;<span class="op" id="2904677">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904683">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904700">if</span>&nbsp;<span class="ident" id="2904703">b</span>&nbsp;<span class="op" id="2904705">&gt;=</span>&nbsp;<span class="ident" id="2904708">c</span>&nbsp;<span class="op" id="2904710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904715">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2904727">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904767">data</span><span class="op" id="2904771">.</span><span class="ident" id="2904772">Swap</span><span class="op" id="2904776">(</span><span class="ident" id="2904777">b</span><span class="op" id="2904778">,</span>&nbsp;<span class="ident" id="2904780">c</span><span class="op" id="2904781">-</span><span class="num" id="2904782">1</span><span class="op" id="2904783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904787">b</span><span class="op" id="2904788">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904793">c</span><span class="op" id="2904794">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2904798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904802">n</span>&nbsp;<span class="op" id="2904804">:=</span>&nbsp;<span class="ident" id="2904807">min</span><span class="op" id="2904810">(</span><span class="ident" id="2904811">b</span><span class="op" id="2904812">-</span><span class="ident" id="2904813">a</span><span class="op" id="2904814">,</span>&nbsp;<span class="ident" id="2904816">a</span><span class="op" id="2904817">-</span><span class="ident" id="2904818">lo</span><span class="op" id="2904820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904823">swapRange</span><span class="op" id="2904832">(</span><span class="ident" id="2904833">data</span><span class="op" id="2904837">,</span>&nbsp;<span class="ident" id="2904839">lo</span><span class="op" id="2904841">,</span>&nbsp;<span class="ident" id="2904843">b</span><span class="op" id="2904844">-</span><span class="ident" id="2904845">n</span><span class="op" id="2904846">,</span>&nbsp;<span class="ident" id="2904848">n</span><span class="op" id="2904849">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904853">n</span>&nbsp;<span class="op" id="2904855">=</span>&nbsp;<span class="ident" id="2904857">min</span><span class="op" id="2904860">(</span><span class="ident" id="2904861">hi</span><span class="op" id="2904863">-</span><span class="ident" id="2904864">d</span><span class="op" id="2904865">,</span>&nbsp;<span class="ident" id="2904867">d</span><span class="op" id="2904868">-</span><span class="ident" id="2904869">c</span><span class="op" id="2904870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2904873">swapRange</span><span class="op" id="2904882">(</span><span class="ident" id="2904883">data</span><span class="op" id="2904887">,</span>&nbsp;<span class="ident" id="2904889">c</span><span class="op" id="2904890">,</span>&nbsp;<span class="ident" id="2904892">hi</span><span class="op" id="2904894">-</span><span class="ident" id="2904895">n</span><span class="op" id="2904896">,</span>&nbsp;<span class="ident" id="2904898">n</span><span class="op" id="2904899">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904903">return</span>&nbsp;<span class="ident" id="2904910">lo</span>&nbsp;<span class="op" id="2904913">+</span>&nbsp;<span class="ident" id="2904915">b</span>&nbsp;<span class="op" id="2904917">-</span>&nbsp;<span class="ident" id="2904919">a</span><span class="op" id="2904920">,</span>&nbsp;<span class="ident" id="2904922">hi</span>&nbsp;<span class="op" id="2904925">-</span>&nbsp;<span class="op" id="2904927">(</span><span class="ident" id="2904928">d</span>&nbsp;<span class="op" id="2904930">-</span>&nbsp;<span class="ident" id="2904932">c</span><span class="op" id="2904933">)</span><br>
<span class="lineno"></span><span class="op" id="2904935">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2904938">func</span>&nbsp;<span class="ident" id="2904943">quickSort</span><span class="op" id="2904952">(</span><span class="ident" id="2904953">data</span>&nbsp;<span class="ident" id="2904958">Interface</span><span class="op" id="2904967">,</span>&nbsp;<span class="ident" id="2904969">a</span><span class="op" id="2904970">,</span>&nbsp;<span class="ident" id="2904972">b</span><span class="op" id="2904973">,</span>&nbsp;<span class="ident" id="2904975">maxDepth</span>&nbsp;<span class="builtintype" id="2904984">int</span><span class="op" id="2904987">)</span>&nbsp;<span class="op" id="2904989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2904992">for</span>&nbsp;<span class="ident" id="2904996">b</span><span class="op" id="2904997">-</span><span class="ident" id="2904998">a</span>&nbsp;<span class="op" id="2905000">&gt;</span>&nbsp;<span class="num" id="2905002">7</span>&nbsp;<span class="op" id="2905004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905008">if</span>&nbsp;<span class="ident" id="2905011">maxDepth</span>&nbsp;<span class="op" id="2905020">==</span>&nbsp;<span class="num" id="2905023">0</span>&nbsp;<span class="op" id="2905025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905030">heapSort</span><span class="op" id="2905038">(</span><span class="ident" id="2905039">data</span><span class="op" id="2905043">,</span>&nbsp;<span class="ident" id="2905045">a</span><span class="op" id="2905046">,</span>&nbsp;<span class="ident" id="2905048">b</span><span class="op" id="2905049">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905054">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905067">maxDepth</span><span class="op" id="2905075">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905080">mlo</span><span class="op" id="2905083">,</span>&nbsp;<span class="ident" id="2905085">mhi</span>&nbsp;<span class="op" id="2905089">:=</span>&nbsp;<span class="ident" id="2905092">doPivot</span><span class="op" id="2905099">(</span><span class="ident" id="2905100">data</span><span class="op" id="2905104">,</span>&nbsp;<span class="ident" id="2905106">a</span><span class="op" id="2905107">,</span>&nbsp;<span class="ident" id="2905109">b</span><span class="op" id="2905110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2905114">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2905174">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905213">if</span>&nbsp;<span class="ident" id="2905216">mlo</span><span class="op" id="2905219">-</span><span class="ident" id="2905220">a</span>&nbsp;<span class="op" id="2905222">&lt;</span>&nbsp;<span class="ident" id="2905224">b</span><span class="op" id="2905225">-</span><span class="ident" id="2905226">mhi</span>&nbsp;<span class="op" id="2905230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905235">quickSort</span><span class="op" id="2905244">(</span><span class="ident" id="2905245">data</span><span class="op" id="2905249">,</span>&nbsp;<span class="ident" id="2905251">a</span><span class="op" id="2905252">,</span>&nbsp;<span class="ident" id="2905254">mlo</span><span class="op" id="2905257">,</span>&nbsp;<span class="ident" id="2905259">maxDepth</span><span class="op" id="2905267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905272">a</span>&nbsp;<span class="op" id="2905274">=</span>&nbsp;<span class="ident" id="2905276">mhi</span>&nbsp;<span class="comment" id="2905280">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905315">}</span>&nbsp;<span class="keyword" id="2905317">else</span>&nbsp;<span class="op" id="2905322">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905327">quickSort</span><span class="op" id="2905336">(</span><span class="ident" id="2905337">data</span><span class="op" id="2905341">,</span>&nbsp;<span class="ident" id="2905343">mhi</span><span class="op" id="2905346">,</span>&nbsp;<span class="ident" id="2905348">b</span><span class="op" id="2905349">,</span>&nbsp;<span class="ident" id="2905351">maxDepth</span><span class="op" id="2905359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905364">b</span>&nbsp;<span class="op" id="2905366">=</span>&nbsp;<span class="ident" id="2905368">mlo</span>&nbsp;<span class="comment" id="2905372">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905410">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905413">if</span>&nbsp;<span class="ident" id="2905416">b</span><span class="op" id="2905417">-</span><span class="ident" id="2905418">a</span>&nbsp;<span class="op" id="2905420">&gt;</span>&nbsp;<span class="num" id="2905422">1</span>&nbsp;<span class="op" id="2905424">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905428">insertionSort</span><span class="op" id="2905441">(</span><span class="ident" id="2905442">data</span><span class="op" id="2905446">,</span>&nbsp;<span class="ident" id="2905448">a</span><span class="op" id="2905449">,</span>&nbsp;<span class="ident" id="2905451">b</span><span class="op" id="2905452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905455">}</span><br>
<span class="lineno"></span><span class="op" id="2905457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905460">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2905480">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2905554">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2905623">func</span>&nbsp;<span class="ident" id="2905628">Sort</span><span class="op" id="2905632">(</span><span class="ident" id="2905633">data</span>&nbsp;<span class="ident" id="2905638">Interface</span><span class="op" id="2905647">)</span>&nbsp;<span class="op" id="2905649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2905652">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905715">n</span>&nbsp;<span class="op" id="2905717">:=</span>&nbsp;<span class="ident" id="2905720">data</span><span class="op" id="2905724">.</span><span class="ident" id="2905725">Len</span><span class="op" id="2905728">(</span><span class="op" id="2905729">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905732">maxDepth</span>&nbsp;<span class="op" id="2905741">:=</span>&nbsp;<span class="num" id="2905744">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2905747">for</span>&nbsp;<span class="ident" id="2905751">i</span>&nbsp;<span class="op" id="2905753">:=</span>&nbsp;<span class="ident" id="2905756">n</span><span class="op" id="2905757">;</span>&nbsp;<span class="ident" id="2905759">i</span>&nbsp;<span class="op" id="2905761">&gt;</span>&nbsp;<span class="num" id="2905763">0</span><span class="op" id="2905764">;</span>&nbsp;<span class="ident" id="2905766">i</span>&nbsp;<span class="op" id="2905768">&gt;&gt;=</span>&nbsp;<span class="num" id="2905772">1</span>&nbsp;<span class="op" id="2905774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905778">maxDepth</span><span class="op" id="2905786">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2905790">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905793">maxDepth</span>&nbsp;<span class="op" id="2905802">*=</span>&nbsp;<span class="num" id="2905805">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905808">quickSort</span><span class="op" id="2905817">(</span><span class="ident" id="2905818">data</span><span class="op" id="2905822">,</span>&nbsp;<span class="num" id="2905824">0</span><span class="op" id="2905825">,</span>&nbsp;<span class="ident" id="2905827">n</span><span class="op" id="2905828">,</span>&nbsp;<span class="ident" id="2905830">maxDepth</span><span class="op" id="2905838">)</span><br>
<span class="lineno"></span><span class="op" id="2905840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2905843">type</span>&nbsp;<span class="ident" id="2905848">reverse</span>&nbsp;<span class="keyword" id="2905856">struct</span>&nbsp;<span class="op" id="2905863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2905866">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2905932">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2905970">Interface</span><br>
<span class="lineno"></span><span class="op" id="2905980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2905983">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2906058">func</span>&nbsp;<span class="op" id="2906063">(</span><span class="ident" id="2906064">r</span>&nbsp;<span class="ident" id="2906066">reverse</span><span class="op" id="2906073">)</span>&nbsp;<span class="ident" id="2906075">Less</span><span class="op" id="2906079">(</span><span class="ident" id="2906080">i</span><span class="op" id="2906081">,</span>&nbsp;<span class="ident" id="2906083">j</span>&nbsp;<span class="builtintype" id="2906085">int</span><span class="op" id="2906088">)</span>&nbsp;<span class="builtintype" id="2906090">bool</span>&nbsp;<span class="op" id="2906095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906098">return</span>&nbsp;<span class="ident" id="2906105">r</span><span class="op" id="2906106">.</span><span class="ident" id="2906107">Interface</span><span class="op" id="2906116">.</span><span class="ident" id="2906117">Less</span><span class="op" id="2906121">(</span><span class="ident" id="2906122">j</span><span class="op" id="2906123">,</span>&nbsp;<span class="ident" id="2906125">i</span><span class="op" id="2906126">)</span><br>
<span class="lineno"></span><span class="op" id="2906128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906131">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2906178">func</span>&nbsp;<span class="ident" id="2906183">Reverse</span><span class="op" id="2906190">(</span><span class="ident" id="2906191">data</span>&nbsp;<span class="ident" id="2906196">Interface</span><span class="op" id="2906205">)</span>&nbsp;<span class="ident" id="2906207">Interface</span>&nbsp;<span class="op" id="2906217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906220">return</span>&nbsp;<span class="op" id="2906227">&amp;</span><span class="ident" id="2906228">reverse</span><span class="op" id="2906235">{</span><span class="ident" id="2906236">data</span><span class="op" id="2906240">}</span><br>
<span class="lineno"></span><span class="op" id="2906242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906245">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2906289">func</span>&nbsp;<span class="ident" id="2906294">IsSorted</span><span class="op" id="2906302">(</span><span class="ident" id="2906303">data</span>&nbsp;<span class="ident" id="2906308">Interface</span><span class="op" id="2906317">)</span>&nbsp;<span class="builtintype" id="2906319">bool</span>&nbsp;<span class="op" id="2906324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2906327">n</span>&nbsp;<span class="op" id="2906329">:=</span>&nbsp;<span class="ident" id="2906332">data</span><span class="op" id="2906336">.</span><span class="ident" id="2906337">Len</span><span class="op" id="2906340">(</span><span class="op" id="2906341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906344">for</span>&nbsp;<span class="ident" id="2906348">i</span>&nbsp;<span class="op" id="2906350">:=</span>&nbsp;<span class="ident" id="2906353">n</span>&nbsp;<span class="op" id="2906355">-</span>&nbsp;<span class="num" id="2906357">1</span><span class="op" id="2906358">;</span>&nbsp;<span class="ident" id="2906360">i</span>&nbsp;<span class="op" id="2906362">&gt;</span>&nbsp;<span class="num" id="2906364">0</span><span class="op" id="2906365">;</span>&nbsp;<span class="ident" id="2906367">i</span><span class="op" id="2906368">--</span>&nbsp;<span class="op" id="2906371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906375">if</span>&nbsp;<span class="ident" id="2906378">data</span><span class="op" id="2906382">.</span><span class="ident" id="2906383">Less</span><span class="op" id="2906387">(</span><span class="ident" id="2906388">i</span><span class="op" id="2906389">,</span>&nbsp;<span class="ident" id="2906391">i</span><span class="op" id="2906392">-</span><span class="num" id="2906393">1</span><span class="op" id="2906394">)</span>&nbsp;<span class="op" id="2906396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906401">return</span>&nbsp;<span class="builtintype" id="2906408">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2906422">return</span>&nbsp;<span class="builtintype" id="2906429">true</span><br>
<span class="lineno"></span><span class="op" id="2906434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2906437">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906476">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2906561">type</span>&nbsp;<span class="ident" id="2906566">IntSlice</span>&nbsp;<span class="op" id="2906575">[</span><span class="op" id="2906576">]</span><span class="builtintype" id="2906577">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2906582">func</span>&nbsp;<span class="op" id="2906587">(</span><span class="ident" id="2906588">p</span>&nbsp;<span class="ident" id="2906590">IntSlice</span><span class="op" id="2906598">)</span>&nbsp;<span class="ident" id="2906600">Len</span><span class="op" id="2906603">(</span><span class="op" id="2906604">)</span>&nbsp;<span class="builtintype" id="2906606">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906620">{</span>&nbsp;<span class="keyword" id="2906622">return</span>&nbsp;<span class="builtinfunc" id="2906629">len</span><span class="op" id="2906632">(</span><span class="ident" id="2906633">p</span><span class="op" id="2906634">)</span>&nbsp;<span class="op" id="2906636">}</span><br>
<span class="lineno"></span><span class="keyword" id="2906638">func</span>&nbsp;<span class="op" id="2906643">(</span><span class="ident" id="2906644">p</span>&nbsp;<span class="ident" id="2906646">IntSlice</span><span class="op" id="2906654">)</span>&nbsp;<span class="ident" id="2906656">Less</span><span class="op" id="2906660">(</span><span class="ident" id="2906661">i</span><span class="op" id="2906662">,</span>&nbsp;<span class="ident" id="2906664">j</span>&nbsp;<span class="builtintype" id="2906666">int</span><span class="op" id="2906669">)</span>&nbsp;<span class="builtintype" id="2906671">bool</span>&nbsp;<span class="op" id="2906676">{</span>&nbsp;<span class="keyword" id="2906678">return</span>&nbsp;<span class="ident" id="2906685">p</span><span class="op" id="2906686">[</span><span class="ident" id="2906687">i</span><span class="op" id="2906688">]</span>&nbsp;<span class="op" id="2906690">&lt;</span>&nbsp;<span class="ident" id="2906692">p</span><span class="op" id="2906693">[</span><span class="ident" id="2906694">j</span><span class="op" id="2906695">]</span>&nbsp;<span class="op" id="2906697">}</span><br>
<span class="lineno"></span><span class="keyword" id="2906699">func</span>&nbsp;<span class="op" id="2906704">(</span><span class="ident" id="2906705">p</span>&nbsp;<span class="ident" id="2906707">IntSlice</span><span class="op" id="2906715">)</span>&nbsp;<span class="ident" id="2906717">Swap</span><span class="op" id="2906721">(</span><span class="ident" id="2906722">i</span><span class="op" id="2906723">,</span>&nbsp;<span class="ident" id="2906725">j</span>&nbsp;<span class="builtintype" id="2906727">int</span><span class="op" id="2906730">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2906737">{</span>&nbsp;<span class="ident" id="2906739">p</span><span class="op" id="2906740">[</span><span class="ident" id="2906741">i</span><span class="op" id="2906742">]</span><span class="op" id="2906743">,</span>&nbsp;<span class="ident" id="2906745">p</span><span class="op" id="2906746">[</span><span class="ident" id="2906747">j</span><span class="op" id="2906748">]</span>&nbsp;<span class="op" id="2906750">=</span>&nbsp;<span class="ident" id="2906752">p</span><span class="op" id="2906753">[</span><span class="ident" id="2906754">j</span><span class="op" id="2906755">]</span><span class="op" id="2906756">,</span>&nbsp;<span class="ident" id="2906758">p</span><span class="op" id="2906759">[</span><span class="ident" id="2906760">i</span><span class="op" id="2906761">]</span>&nbsp;<span class="op" id="2906763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906766">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2906799">func</span>&nbsp;<span class="op" id="2906804">(</span><span class="ident" id="2906805">p</span>&nbsp;<span class="ident" id="2906807">IntSlice</span><span class="op" id="2906815">)</span>&nbsp;<span class="ident" id="2906817">Sort</span><span class="op" id="2906821">(</span><span class="op" id="2906822">)</span>&nbsp;<span class="op" id="2906824">{</span>&nbsp;<span class="ident" id="2906826">Sort</span><span class="op" id="2906830">(</span><span class="ident" id="2906831">p</span><span class="op" id="2906832">)</span>&nbsp;<span class="op" id="2906834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2906837">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2906930">type</span>&nbsp;<span class="ident" id="2906935">Float64Slice</span>&nbsp;<span class="op" id="2906948">[</span><span class="op" id="2906949">]</span><span class="builtintype" id="2906950">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2906959">func</span>&nbsp;<span class="op" id="2906964">(</span><span class="ident" id="2906965">p</span>&nbsp;<span class="ident" id="2906967">Float64Slice</span><span class="op" id="2906979">)</span>&nbsp;<span class="ident" id="2906981">Len</span><span class="op" id="2906984">(</span><span class="op" id="2906985">)</span>&nbsp;<span class="builtintype" id="2906987">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907001">{</span>&nbsp;<span class="keyword" id="2907003">return</span>&nbsp;<span class="builtinfunc" id="2907010">len</span><span class="op" id="2907013">(</span><span class="ident" id="2907014">p</span><span class="op" id="2907015">)</span>&nbsp;<span class="op" id="2907017">}</span><br>
<span class="lineno"></span><span class="keyword" id="2907019">func</span>&nbsp;<span class="op" id="2907024">(</span><span class="ident" id="2907025">p</span>&nbsp;<span class="ident" id="2907027">Float64Slice</span><span class="op" id="2907039">)</span>&nbsp;<span class="ident" id="2907041">Less</span><span class="op" id="2907045">(</span><span class="ident" id="2907046">i</span><span class="op" id="2907047">,</span>&nbsp;<span class="ident" id="2907049">j</span>&nbsp;<span class="builtintype" id="2907051">int</span><span class="op" id="2907054">)</span>&nbsp;<span class="builtintype" id="2907056">bool</span>&nbsp;<span class="op" id="2907061">{</span>&nbsp;<span class="keyword" id="2907063">return</span>&nbsp;<span class="ident" id="2907070">p</span><span class="op" id="2907071">[</span><span class="ident" id="2907072">i</span><span class="op" id="2907073">]</span>&nbsp;<span class="op" id="2907075">&lt;</span>&nbsp;<span class="ident" id="2907077">p</span><span class="op" id="2907078">[</span><span class="ident" id="2907079">j</span><span class="op" id="2907080">]</span>&nbsp;<span class="op" id="2907082">||</span>&nbsp;<span class="ident" id="2907085">isNaN</span><span class="op" id="2907090">(</span><span class="ident" id="2907091">p</span><span class="op" id="2907092">[</span><span class="ident" id="2907093">i</span><span class="op" id="2907094">]</span><span class="op" id="2907095">)</span>&nbsp;<span class="op" id="2907097">&amp;&amp;</span>&nbsp;<span class="op" id="2907100">!</span><span class="ident" id="2907101">isNaN</span><span class="op" id="2907106">(</span><span class="ident" id="2907107">p</span><span class="op" id="2907108">[</span><span class="ident" id="2907109">j</span><span class="op" id="2907110">]</span><span class="op" id="2907111">)</span>&nbsp;<span class="op" id="2907113">}</span><br>
<span class="lineno"></span><span class="keyword" id="2907115">func</span>&nbsp;<span class="op" id="2907120">(</span><span class="ident" id="2907121">p</span>&nbsp;<span class="ident" id="2907123">Float64Slice</span><span class="op" id="2907135">)</span>&nbsp;<span class="ident" id="2907137">Swap</span><span class="op" id="2907141">(</span><span class="ident" id="2907142">i</span><span class="op" id="2907143">,</span>&nbsp;<span class="ident" id="2907145">j</span>&nbsp;<span class="builtintype" id="2907147">int</span><span class="op" id="2907150">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907157">{</span>&nbsp;<span class="ident" id="2907159">p</span><span class="op" id="2907160">[</span><span class="ident" id="2907161">i</span><span class="op" id="2907162">]</span><span class="op" id="2907163">,</span>&nbsp;<span class="ident" id="2907165">p</span><span class="op" id="2907166">[</span><span class="ident" id="2907167">j</span><span class="op" id="2907168">]</span>&nbsp;<span class="op" id="2907170">=</span>&nbsp;<span class="ident" id="2907172">p</span><span class="op" id="2907173">[</span><span class="ident" id="2907174">j</span><span class="op" id="2907175">]</span><span class="op" id="2907176">,</span>&nbsp;<span class="ident" id="2907178">p</span><span class="op" id="2907179">[</span><span class="ident" id="2907180">i</span><span class="op" id="2907181">]</span>&nbsp;<span class="op" id="2907183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907186">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2907262">func</span>&nbsp;<span class="ident" id="2907267">isNaN</span><span class="op" id="2907272">(</span><span class="ident" id="2907273">f</span>&nbsp;<span class="builtintype" id="2907275">float64</span><span class="op" id="2907282">)</span>&nbsp;<span class="builtintype" id="2907284">bool</span>&nbsp;<span class="op" id="2907289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2907292">return</span>&nbsp;<span class="ident" id="2907299">f</span>&nbsp;<span class="op" id="2907301">!=</span>&nbsp;<span class="ident" id="2907304">f</span><br>
<span class="lineno"></span><span class="op" id="2907306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907309">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2907342">func</span>&nbsp;<span class="op" id="2907347">(</span><span class="ident" id="2907348">p</span>&nbsp;<span class="ident" id="2907350">Float64Slice</span><span class="op" id="2907362">)</span>&nbsp;<span class="ident" id="2907364">Sort</span><span class="op" id="2907368">(</span><span class="op" id="2907369">)</span>&nbsp;<span class="op" id="2907371">{</span>&nbsp;<span class="ident" id="2907373">Sort</span><span class="op" id="2907377">(</span><span class="ident" id="2907378">p</span><span class="op" id="2907379">)</span>&nbsp;<span class="op" id="2907381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907384">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2907475">type</span>&nbsp;<span class="ident" id="2907480">StringSlice</span>&nbsp;<span class="op" id="2907492">[</span><span class="op" id="2907493">]</span><span class="builtintype" id="2907494">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2907502">func</span>&nbsp;<span class="op" id="2907507">(</span><span class="ident" id="2907508">p</span>&nbsp;<span class="ident" id="2907510">StringSlice</span><span class="op" id="2907521">)</span>&nbsp;<span class="ident" id="2907523">Len</span><span class="op" id="2907526">(</span><span class="op" id="2907527">)</span>&nbsp;<span class="builtintype" id="2907529">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907543">{</span>&nbsp;<span class="keyword" id="2907545">return</span>&nbsp;<span class="builtinfunc" id="2907552">len</span><span class="op" id="2907555">(</span><span class="ident" id="2907556">p</span><span class="op" id="2907557">)</span>&nbsp;<span class="op" id="2907559">}</span><br>
<span class="lineno"></span><span class="keyword" id="2907561">func</span>&nbsp;<span class="op" id="2907566">(</span><span class="ident" id="2907567">p</span>&nbsp;<span class="ident" id="2907569">StringSlice</span><span class="op" id="2907580">)</span>&nbsp;<span class="ident" id="2907582">Less</span><span class="op" id="2907586">(</span><span class="ident" id="2907587">i</span><span class="op" id="2907588">,</span>&nbsp;<span class="ident" id="2907590">j</span>&nbsp;<span class="builtintype" id="2907592">int</span><span class="op" id="2907595">)</span>&nbsp;<span class="builtintype" id="2907597">bool</span>&nbsp;<span class="op" id="2907602">{</span>&nbsp;<span class="keyword" id="2907604">return</span>&nbsp;<span class="ident" id="2907611">p</span><span class="op" id="2907612">[</span><span class="ident" id="2907613">i</span><span class="op" id="2907614">]</span>&nbsp;<span class="op" id="2907616">&lt;</span>&nbsp;<span class="ident" id="2907618">p</span><span class="op" id="2907619">[</span><span class="ident" id="2907620">j</span><span class="op" id="2907621">]</span>&nbsp;<span class="op" id="2907623">}</span><br>
<span class="lineno"></span><span class="keyword" id="2907625">func</span>&nbsp;<span class="op" id="2907630">(</span><span class="ident" id="2907631">p</span>&nbsp;<span class="ident" id="2907633">StringSlice</span><span class="op" id="2907644">)</span>&nbsp;<span class="ident" id="2907646">Swap</span><span class="op" id="2907650">(</span><span class="ident" id="2907651">i</span><span class="op" id="2907652">,</span>&nbsp;<span class="ident" id="2907654">j</span>&nbsp;<span class="builtintype" id="2907656">int</span><span class="op" id="2907659">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2907666">{</span>&nbsp;<span class="ident" id="2907668">p</span><span class="op" id="2907669">[</span><span class="ident" id="2907670">i</span><span class="op" id="2907671">]</span><span class="op" id="2907672">,</span>&nbsp;<span class="ident" id="2907674">p</span><span class="op" id="2907675">[</span><span class="ident" id="2907676">j</span><span class="op" id="2907677">]</span>&nbsp;<span class="op" id="2907679">=</span>&nbsp;<span class="ident" id="2907681">p</span><span class="op" id="2907682">[</span><span class="ident" id="2907683">j</span><span class="op" id="2907684">]</span><span class="op" id="2907685">,</span>&nbsp;<span class="ident" id="2907687">p</span><span class="op" id="2907688">[</span><span class="ident" id="2907689">i</span><span class="op" id="2907690">]</span>&nbsp;<span class="op" id="2907692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907695">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2907728">func</span>&nbsp;<span class="op" id="2907733">(</span><span class="ident" id="2907734">p</span>&nbsp;<span class="ident" id="2907736">StringSlice</span><span class="op" id="2907747">)</span>&nbsp;<span class="ident" id="2907749">Sort</span><span class="op" id="2907753">(</span><span class="op" id="2907754">)</span>&nbsp;<span class="op" id="2907756">{</span>&nbsp;<span class="ident" id="2907758">Sort</span><span class="op" id="2907762">(</span><span class="ident" id="2907763">p</span><span class="op" id="2907764">)</span>&nbsp;<span class="op" id="2907766">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907769">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907811">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2907862">func</span>&nbsp;<span class="ident" id="2907867">Ints</span><span class="op" id="2907871">(</span><span class="ident" id="2907872">a</span>&nbsp;<span class="op" id="2907874">[</span><span class="op" id="2907875">]</span><span class="builtintype" id="2907876">int</span><span class="op" id="2907879">)</span>&nbsp;<span class="op" id="2907881">{</span>&nbsp;<span class="ident" id="2907883">Sort</span><span class="op" id="2907887">(</span><span class="ident" id="2907888">IntSlice</span><span class="op" id="2907896">(</span><span class="ident" id="2907897">a</span><span class="op" id="2907898">)</span><span class="op" id="2907899">)</span>&nbsp;<span class="op" id="2907901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2907904">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2907963">func</span>&nbsp;<span class="ident" id="2907968">Float64s</span><span class="op" id="2907976">(</span><span class="ident" id="2907977">a</span>&nbsp;<span class="op" id="2907979">[</span><span class="op" id="2907980">]</span><span class="builtintype" id="2907981">float64</span><span class="op" id="2907988">)</span>&nbsp;<span class="op" id="2907990">{</span>&nbsp;<span class="ident" id="2907992">Sort</span><span class="op" id="2907996">(</span><span class="ident" id="2907997">Float64Slice</span><span class="op" id="2908009">(</span><span class="ident" id="2908010">a</span><span class="op" id="2908011">)</span><span class="op" id="2908012">)</span>&nbsp;<span class="op" id="2908014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2908017">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2908074">func</span>&nbsp;<span class="ident" id="2908079">Strings</span><span class="op" id="2908086">(</span><span class="ident" id="2908087">a</span>&nbsp;<span class="op" id="2908089">[</span><span class="op" id="2908090">]</span><span class="builtintype" id="2908091">string</span><span class="op" id="2908097">)</span>&nbsp;<span class="op" id="2908099">{</span>&nbsp;<span class="ident" id="2908101">Sort</span><span class="op" id="2908105">(</span><span class="ident" id="2908106">StringSlice</span><span class="op" id="2908117">(</span><span class="ident" id="2908118">a</span><span class="op" id="2908119">)</span><span class="op" id="2908120">)</span>&nbsp;<span class="op" id="2908122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2908125">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2908203">func</span>&nbsp;<span class="ident" id="2908208">IntsAreSorted</span><span class="op" id="2908221">(</span><span class="ident" id="2908222">a</span>&nbsp;<span class="op" id="2908224">[</span><span class="op" id="2908225">]</span><span class="builtintype" id="2908226">int</span><span class="op" id="2908229">)</span>&nbsp;<span class="builtintype" id="2908231">bool</span>&nbsp;<span class="op" id="2908236">{</span>&nbsp;<span class="keyword" id="2908238">return</span>&nbsp;<span class="ident" id="2908245">IsSorted</span><span class="op" id="2908253">(</span><span class="ident" id="2908254">IntSlice</span><span class="op" id="2908262">(</span><span class="ident" id="2908263">a</span><span class="op" id="2908264">)</span><span class="op" id="2908265">)</span>&nbsp;<span class="op" id="2908267">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2908270">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2908356">func</span>&nbsp;<span class="ident" id="2908361">Float64sAreSorted</span><span class="op" id="2908378">(</span><span class="ident" id="2908379">a</span>&nbsp;<span class="op" id="2908381">[</span><span class="op" id="2908382">]</span><span class="builtintype" id="2908383">float64</span><span class="op" id="2908390">)</span>&nbsp;<span class="builtintype" id="2908392">bool</span>&nbsp;<span class="op" id="2908397">{</span>&nbsp;<span class="keyword" id="2908399">return</span>&nbsp;<span class="ident" id="2908406">IsSorted</span><span class="op" id="2908414">(</span><span class="ident" id="2908415">Float64Slice</span><span class="op" id="2908427">(</span><span class="ident" id="2908428">a</span><span class="op" id="2908429">)</span><span class="op" id="2908430">)</span>&nbsp;<span class="op" id="2908432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2908435">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2908519">func</span>&nbsp;<span class="ident" id="2908524">StringsAreSorted</span><span class="op" id="2908540">(</span><span class="ident" id="2908541">a</span>&nbsp;<span class="op" id="2908543">[</span><span class="op" id="2908544">]</span><span class="builtintype" id="2908545">string</span><span class="op" id="2908551">)</span>&nbsp;<span class="builtintype" id="2908553">bool</span>&nbsp;<span class="op" id="2908558">{</span>&nbsp;<span class="keyword" id="2908560">return</span>&nbsp;<span class="ident" id="2908567">IsSorted</span><span class="op" id="2908575">(</span><span class="ident" id="2908576">StringSlice</span><span class="op" id="2908587">(</span><span class="ident" id="2908588">a</span><span class="op" id="2908589">)</span><span class="op" id="2908590">)</span>&nbsp;<span class="op" id="2908592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2908595">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2908623">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2908699">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2908774">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2908837">//</span><br>
<span class="lineno"></span><span class="comment" id="2908840">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2908882">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2908954">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2908972">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2909026">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2909103">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2909175">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2909247">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2909302">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2909375">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2909426">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2909502">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2909576">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2909642">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2909719">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2909798">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2909876">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2909950">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2909998">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2910072">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2910121">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2910194">//</span><br>
<span class="lineno">315</span><span class="comment" id="2910197">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2910267">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2910323">func</span>&nbsp;<span class="ident" id="2910328">Stable</span><span class="op" id="2910334">(</span><span class="ident" id="2910335">data</span>&nbsp;<span class="ident" id="2910340">Interface</span><span class="op" id="2910349">)</span>&nbsp;<span class="op" id="2910351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910354">n</span>&nbsp;<span class="op" id="2910356">:=</span>&nbsp;<span class="ident" id="2910359">data</span><span class="op" id="2910363">.</span><span class="ident" id="2910364">Len</span><span class="op" id="2910367">(</span><span class="op" id="2910368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910371">blockSize</span>&nbsp;<span class="op" id="2910381">:=</span>&nbsp;<span class="num" id="2910384">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910388">a</span><span class="op" id="2910389">,</span>&nbsp;<span class="ident" id="2910391">b</span>&nbsp;<span class="op" id="2910393">:=</span>&nbsp;<span class="num" id="2910396">0</span><span class="op" id="2910397">,</span>&nbsp;<span class="ident" id="2910399">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910410">for</span>&nbsp;<span class="ident" id="2910414">b</span>&nbsp;<span class="op" id="2910416">&lt;=</span>&nbsp;<span class="ident" id="2910419">n</span>&nbsp;<span class="op" id="2910421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910425">insertionSort</span><span class="op" id="2910438">(</span><span class="ident" id="2910439">data</span><span class="op" id="2910443">,</span>&nbsp;<span class="ident" id="2910445">a</span><span class="op" id="2910446">,</span>&nbsp;<span class="ident" id="2910448">b</span><span class="op" id="2910449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910453">a</span>&nbsp;<span class="op" id="2910455">=</span>&nbsp;<span class="ident" id="2910457">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910461">b</span>&nbsp;<span class="op" id="2910463">+=</span>&nbsp;<span class="ident" id="2910466">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910480">insertionSort</span><span class="op" id="2910493">(</span><span class="ident" id="2910494">data</span><span class="op" id="2910498">,</span>&nbsp;<span class="ident" id="2910500">a</span><span class="op" id="2910501">,</span>&nbsp;<span class="ident" id="2910503">n</span><span class="op" id="2910504">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910508">for</span>&nbsp;<span class="ident" id="2910512">blockSize</span>&nbsp;<span class="op" id="2910522">&lt;</span>&nbsp;<span class="ident" id="2910524">n</span>&nbsp;<span class="op" id="2910526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910530">a</span><span class="op" id="2910531">,</span>&nbsp;<span class="ident" id="2910533">b</span>&nbsp;<span class="op" id="2910535">=</span>&nbsp;<span class="num" id="2910537">0</span><span class="op" id="2910538">,</span>&nbsp;<span class="num" id="2910540">2</span><span class="op" id="2910541">*</span><span class="ident" id="2910542">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2910554">for</span>&nbsp;<span class="ident" id="2910558">b</span>&nbsp;<span class="op" id="2910560">&lt;=</span>&nbsp;<span class="ident" id="2910563">n</span>&nbsp;<span class="op" id="2910565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910570">symMerge</span><span class="op" id="2910578">(</span><span class="ident" id="2910579">data</span><span class="op" id="2910583">,</span>&nbsp;<span class="ident" id="2910585">a</span><span class="op" id="2910586">,</span>&nbsp;<span class="ident" id="2910588">a</span><span class="op" id="2910589">+</span><span class="ident" id="2910590">blockSize</span><span class="op" id="2910599">,</span>&nbsp;<span class="ident" id="2910601">b</span><span class="op" id="2910602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910607">a</span>&nbsp;<span class="op" id="2910609">=</span>&nbsp;<span class="ident" id="2910611">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910616">b</span>&nbsp;<span class="op" id="2910618">+=</span>&nbsp;<span class="num" id="2910621">2</span>&nbsp;<span class="op" id="2910623">*</span>&nbsp;<span class="ident" id="2910625">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910637">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910641">symMerge</span><span class="op" id="2910649">(</span><span class="ident" id="2910650">data</span><span class="op" id="2910654">,</span>&nbsp;<span class="ident" id="2910656">a</span><span class="op" id="2910657">,</span>&nbsp;<span class="ident" id="2910659">a</span><span class="op" id="2910660">+</span><span class="ident" id="2910661">blockSize</span><span class="op" id="2910670">,</span>&nbsp;<span class="ident" id="2910672">n</span><span class="op" id="2910673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2910677">blockSize</span>&nbsp;<span class="op" id="2910687">*=</span>&nbsp;<span class="num" id="2910690">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2910693">}</span><br>
<span class="lineno"></span><span class="op" id="2910695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2910698">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2910775">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2910852">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2910927">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2911002">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2911054">//</span><br>
<span class="lineno"></span><span class="comment" id="2911057">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2911098">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2911149">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2911210">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2911269">//</span><br>
<span class="lineno"></span><span class="comment" id="2911272">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2911347">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2911427">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2911504">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2911547">func</span>&nbsp;<span class="ident" id="2911552">symMerge</span><span class="op" id="2911560">(</span><span class="ident" id="2911561">data</span>&nbsp;<span class="ident" id="2911566">Interface</span><span class="op" id="2911575">,</span>&nbsp;<span class="ident" id="2911577">a</span><span class="op" id="2911578">,</span>&nbsp;<span class="ident" id="2911580">m</span><span class="op" id="2911581">,</span>&nbsp;<span class="ident" id="2911583">b</span>&nbsp;<span class="builtintype" id="2911585">int</span><span class="op" id="2911588">)</span>&nbsp;<span class="op" id="2911590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911593">if</span>&nbsp;<span class="ident" id="2911596">a</span>&nbsp;<span class="op" id="2911598">&gt;=</span>&nbsp;<span class="ident" id="2911601">m</span>&nbsp;<span class="op" id="2911603">||</span>&nbsp;<span class="ident" id="2911606">m</span>&nbsp;<span class="op" id="2911608">&gt;=</span>&nbsp;<span class="ident" id="2911611">b</span>&nbsp;<span class="op" id="2911613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911617">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911629">mid</span>&nbsp;<span class="op" id="2911633">:=</span>&nbsp;<span class="ident" id="2911636">a</span>&nbsp;<span class="op" id="2911638">+</span>&nbsp;<span class="op" id="2911640">(</span><span class="ident" id="2911641">b</span><span class="op" id="2911642">-</span><span class="ident" id="2911643">a</span><span class="op" id="2911644">)</span><span class="op" id="2911645">/</span><span class="num" id="2911646">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911649">n</span>&nbsp;<span class="op" id="2911651">:=</span>&nbsp;<span class="ident" id="2911654">mid</span>&nbsp;<span class="op" id="2911658">+</span>&nbsp;<span class="ident" id="2911660">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911663">start</span>&nbsp;<span class="op" id="2911669">:=</span>&nbsp;<span class="num" id="2911672">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911675">if</span>&nbsp;<span class="ident" id="2911678">m</span>&nbsp;<span class="op" id="2911680">&gt;</span>&nbsp;<span class="ident" id="2911682">mid</span>&nbsp;<span class="op" id="2911686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911690">start</span>&nbsp;<span class="op" id="2911696">=</span>&nbsp;<span class="ident" id="2911698">n</span>&nbsp;<span class="op" id="2911700">-</span>&nbsp;<span class="ident" id="2911702">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911706">r</span><span class="op" id="2911707">,</span>&nbsp;<span class="ident" id="2911709">p</span>&nbsp;<span class="op" id="2911711">:=</span>&nbsp;<span class="ident" id="2911714">mid</span><span class="op" id="2911717">,</span>&nbsp;<span class="ident" id="2911719">n</span><span class="op" id="2911720">-</span><span class="num" id="2911721">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911725">for</span>&nbsp;<span class="ident" id="2911729">start</span>&nbsp;<span class="op" id="2911735">&lt;</span>&nbsp;<span class="ident" id="2911737">r</span>&nbsp;<span class="op" id="2911739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911744">c</span>&nbsp;<span class="op" id="2911746">:=</span>&nbsp;<span class="ident" id="2911749">start</span>&nbsp;<span class="op" id="2911755">+</span>&nbsp;<span class="op" id="2911757">(</span><span class="ident" id="2911758">r</span><span class="op" id="2911759">-</span><span class="ident" id="2911760">start</span><span class="op" id="2911765">)</span><span class="op" id="2911766">/</span><span class="num" id="2911767">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911772">if</span>&nbsp;<span class="op" id="2911775">!</span><span class="ident" id="2911776">data</span><span class="op" id="2911780">.</span><span class="ident" id="2911781">Less</span><span class="op" id="2911785">(</span><span class="ident" id="2911786">p</span><span class="op" id="2911787">-</span><span class="ident" id="2911788">c</span><span class="op" id="2911789">,</span>&nbsp;<span class="ident" id="2911791">c</span><span class="op" id="2911792">)</span>&nbsp;<span class="op" id="2911794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911800">start</span>&nbsp;<span class="op" id="2911806">=</span>&nbsp;<span class="ident" id="2911808">c</span>&nbsp;<span class="op" id="2911810">+</span>&nbsp;<span class="num" id="2911812">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911817">}</span>&nbsp;<span class="keyword" id="2911819">else</span>&nbsp;<span class="op" id="2911824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911830">r</span>&nbsp;<span class="op" id="2911832">=</span>&nbsp;<span class="ident" id="2911834">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911846">}</span>&nbsp;<span class="keyword" id="2911848">else</span>&nbsp;<span class="op" id="2911853">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911857">start</span>&nbsp;<span class="op" id="2911863">=</span>&nbsp;<span class="ident" id="2911865">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911869">r</span><span class="op" id="2911870">,</span>&nbsp;<span class="ident" id="2911872">p</span>&nbsp;<span class="op" id="2911874">:=</span>&nbsp;<span class="ident" id="2911877">m</span><span class="op" id="2911878">,</span>&nbsp;<span class="ident" id="2911880">n</span><span class="op" id="2911881">-</span><span class="num" id="2911882">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911886">for</span>&nbsp;<span class="ident" id="2911890">start</span>&nbsp;<span class="op" id="2911896">&lt;</span>&nbsp;<span class="ident" id="2911898">r</span>&nbsp;<span class="op" id="2911900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911905">c</span>&nbsp;<span class="op" id="2911907">:=</span>&nbsp;<span class="ident" id="2911910">start</span>&nbsp;<span class="op" id="2911916">+</span>&nbsp;<span class="op" id="2911918">(</span><span class="ident" id="2911919">r</span><span class="op" id="2911920">-</span><span class="ident" id="2911921">start</span><span class="op" id="2911926">)</span><span class="op" id="2911927">/</span><span class="num" id="2911928">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2911933">if</span>&nbsp;<span class="op" id="2911936">!</span><span class="ident" id="2911937">data</span><span class="op" id="2911941">.</span><span class="ident" id="2911942">Less</span><span class="op" id="2911946">(</span><span class="ident" id="2911947">p</span><span class="op" id="2911948">-</span><span class="ident" id="2911949">c</span><span class="op" id="2911950">,</span>&nbsp;<span class="ident" id="2911952">c</span><span class="op" id="2911953">)</span>&nbsp;<span class="op" id="2911955">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911961">start</span>&nbsp;<span class="op" id="2911967">=</span>&nbsp;<span class="ident" id="2911969">c</span>&nbsp;<span class="op" id="2911971">+</span>&nbsp;<span class="num" id="2911973">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2911978">}</span>&nbsp;<span class="keyword" id="2911980">else</span>&nbsp;<span class="op" id="2911985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2911991">r</span>&nbsp;<span class="op" id="2911993">=</span>&nbsp;<span class="ident" id="2911995">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912000">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912004">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912010">end</span>&nbsp;<span class="op" id="2912014">:=</span>&nbsp;<span class="ident" id="2912017">n</span>&nbsp;<span class="op" id="2912019">-</span>&nbsp;<span class="ident" id="2912021">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912028">rotate</span><span class="op" id="2912034">(</span><span class="ident" id="2912035">data</span><span class="op" id="2912039">,</span>&nbsp;<span class="ident" id="2912041">start</span><span class="op" id="2912046">,</span>&nbsp;<span class="ident" id="2912048">m</span><span class="op" id="2912049">,</span>&nbsp;<span class="ident" id="2912051">end</span><span class="op" id="2912054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912057">symMerge</span><span class="op" id="2912065">(</span><span class="ident" id="2912066">data</span><span class="op" id="2912070">,</span>&nbsp;<span class="ident" id="2912072">a</span><span class="op" id="2912073">,</span>&nbsp;<span class="ident" id="2912075">start</span><span class="op" id="2912080">,</span>&nbsp;<span class="ident" id="2912082">mid</span><span class="op" id="2912085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912088">symMerge</span><span class="op" id="2912096">(</span><span class="ident" id="2912097">data</span><span class="op" id="2912101">,</span>&nbsp;<span class="ident" id="2912103">mid</span><span class="op" id="2912106">,</span>&nbsp;<span class="ident" id="2912108">end</span><span class="op" id="2912111">,</span>&nbsp;<span class="ident" id="2912113">b</span><span class="op" id="2912114">)</span><br>
<span class="lineno">390</span><span class="op" id="2912116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2912119">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2912194">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2912249">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2912305">func</span>&nbsp;<span class="ident" id="2912310">rotate</span><span class="op" id="2912316">(</span><span class="ident" id="2912317">data</span>&nbsp;<span class="ident" id="2912322">Interface</span><span class="op" id="2912331">,</span>&nbsp;<span class="ident" id="2912333">a</span><span class="op" id="2912334">,</span>&nbsp;<span class="ident" id="2912336">m</span><span class="op" id="2912337">,</span>&nbsp;<span class="ident" id="2912339">b</span>&nbsp;<span class="builtintype" id="2912341">int</span><span class="op" id="2912344">)</span>&nbsp;<span class="op" id="2912346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912349">i</span>&nbsp;<span class="op" id="2912351">:=</span>&nbsp;<span class="ident" id="2912354">m</span>&nbsp;<span class="op" id="2912356">-</span>&nbsp;<span class="ident" id="2912358">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912361">if</span>&nbsp;<span class="ident" id="2912364">i</span>&nbsp;<span class="op" id="2912366">==</span>&nbsp;<span class="num" id="2912369">0</span>&nbsp;<span class="op" id="2912371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912375">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912383">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912386">j</span>&nbsp;<span class="op" id="2912388">:=</span>&nbsp;<span class="ident" id="2912391">b</span>&nbsp;<span class="op" id="2912393">-</span>&nbsp;<span class="ident" id="2912395">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912398">if</span>&nbsp;<span class="ident" id="2912401">j</span>&nbsp;<span class="op" id="2912403">==</span>&nbsp;<span class="num" id="2912406">0</span>&nbsp;<span class="op" id="2912408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912412">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912424">if</span>&nbsp;<span class="ident" id="2912427">i</span>&nbsp;<span class="op" id="2912429">==</span>&nbsp;<span class="ident" id="2912432">j</span>&nbsp;<span class="op" id="2912434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912438">swapRange</span><span class="op" id="2912447">(</span><span class="ident" id="2912448">data</span><span class="op" id="2912452">,</span>&nbsp;<span class="ident" id="2912454">a</span><span class="op" id="2912455">,</span>&nbsp;<span class="ident" id="2912457">m</span><span class="op" id="2912458">,</span>&nbsp;<span class="ident" id="2912460">i</span><span class="op" id="2912461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912465">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912477">p</span>&nbsp;<span class="op" id="2912479">:=</span>&nbsp;<span class="ident" id="2912482">a</span>&nbsp;<span class="op" id="2912484">+</span>&nbsp;<span class="ident" id="2912486">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912489">for</span>&nbsp;<span class="ident" id="2912493">i</span>&nbsp;<span class="op" id="2912495">!=</span>&nbsp;<span class="ident" id="2912498">j</span>&nbsp;<span class="op" id="2912500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2912504">if</span>&nbsp;<span class="ident" id="2912507">i</span>&nbsp;<span class="op" id="2912509">&gt;</span>&nbsp;<span class="ident" id="2912511">j</span>&nbsp;<span class="op" id="2912513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912518">swapRange</span><span class="op" id="2912527">(</span><span class="ident" id="2912528">data</span><span class="op" id="2912532">,</span>&nbsp;<span class="ident" id="2912534">p</span><span class="op" id="2912535">-</span><span class="ident" id="2912536">i</span><span class="op" id="2912537">,</span>&nbsp;<span class="ident" id="2912539">p</span><span class="op" id="2912540">,</span>&nbsp;<span class="ident" id="2912542">j</span><span class="op" id="2912543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912548">i</span>&nbsp;<span class="op" id="2912550">-=</span>&nbsp;<span class="ident" id="2912553">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912557">}</span>&nbsp;<span class="keyword" id="2912559">else</span>&nbsp;<span class="op" id="2912564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912569">swapRange</span><span class="op" id="2912578">(</span><span class="ident" id="2912579">data</span><span class="op" id="2912583">,</span>&nbsp;<span class="ident" id="2912585">p</span><span class="op" id="2912586">-</span><span class="ident" id="2912587">i</span><span class="op" id="2912588">,</span>&nbsp;<span class="ident" id="2912590">p</span><span class="op" id="2912591">+</span><span class="ident" id="2912592">j</span><span class="op" id="2912593">-</span><span class="ident" id="2912594">i</span><span class="op" id="2912595">,</span>&nbsp;<span class="ident" id="2912597">i</span><span class="op" id="2912598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912603">j</span>&nbsp;<span class="op" id="2912605">-=</span>&nbsp;<span class="ident" id="2912608">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912612">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2912615">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2912618">swapRange</span><span class="op" id="2912627">(</span><span class="ident" id="2912628">data</span><span class="op" id="2912632">,</span>&nbsp;<span class="ident" id="2912634">p</span><span class="op" id="2912635">-</span><span class="ident" id="2912636">i</span><span class="op" id="2912637">,</span>&nbsp;<span class="ident" id="2912639">p</span><span class="op" id="2912640">,</span>&nbsp;<span class="ident" id="2912642">i</span><span class="op" id="2912643">)</span><br>
<span class="lineno"></span><span class="op" id="2912645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2912648">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
