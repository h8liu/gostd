<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html" class="current">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2317253">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2317309">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2317363">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2317414">//&nbsp;General&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2317449">package</span>&nbsp;<span class="ident" id="2317457">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2317461">import</span>&nbsp;<span class="string" id="2317468">&#34;syscall&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="2317479">//&nbsp;Expand&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;based&nbsp;on&nbsp;the&nbsp;mapping&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="2317558">//&nbsp;For&nbsp;example,&nbsp;os.ExpandEnv(s)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;os.Expand(s,&nbsp;os.Getenv).</span><br>
<span class="lineno"></span><span class="keyword" id="2317632">func</span>&nbsp;<span class="ident" id="2317637">Expand</span><span class="op" id="2317643">(</span><span class="ident" id="2317644">s</span>&nbsp;<span class="builtintype" id="2317646">string</span><span class="op" id="2317652">,</span>&nbsp;<span class="ident" id="2317654">mapping</span>&nbsp;<span class="keyword" id="2317662">func</span><span class="op" id="2317666">(</span><span class="builtintype" id="2317667">string</span><span class="op" id="2317673">)</span>&nbsp;<span class="builtintype" id="2317675">string</span><span class="op" id="2317681">)</span>&nbsp;<span class="builtintype" id="2317683">string</span>&nbsp;<span class="op" id="2317690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2317693">buf</span>&nbsp;<span class="op" id="2317697">:=</span>&nbsp;<span class="builtinfunc" id="2317700">make</span><span class="op" id="2317704">(</span><span class="op" id="2317705">[</span><span class="op" id="2317706">]</span><span class="builtintype" id="2317707">byte</span><span class="op" id="2317711">,</span>&nbsp;<span class="num" id="2317713">0</span><span class="op" id="2317714">,</span>&nbsp;<span class="num" id="2317716">2</span><span class="op" id="2317717">*</span><span class="builtinfunc" id="2317718">len</span><span class="op" id="2317721">(</span><span class="ident" id="2317722">s</span><span class="op" id="2317723">)</span><span class="op" id="2317724">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2317727">//&nbsp;${}&nbsp;is&nbsp;all&nbsp;ASCII,&nbsp;so&nbsp;bytes&nbsp;are&nbsp;fine&nbsp;for&nbsp;this&nbsp;operation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2317787">i</span>&nbsp;<span class="op" id="2317789">:=</span>&nbsp;<span class="num" id="2317792">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2317795">for</span>&nbsp;<span class="ident" id="2317799">j</span>&nbsp;<span class="op" id="2317801">:=</span>&nbsp;<span class="num" id="2317804">0</span><span class="op" id="2317805">;</span>&nbsp;<span class="ident" id="2317807">j</span>&nbsp;<span class="op" id="2317809">&lt;</span>&nbsp;<span class="builtinfunc" id="2317811">len</span><span class="op" id="2317814">(</span><span class="ident" id="2317815">s</span><span class="op" id="2317816">)</span><span class="op" id="2317817">;</span>&nbsp;<span class="ident" id="2317819">j</span><span class="op" id="2317820">++</span>&nbsp;<span class="op" id="2317823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2317827">if</span>&nbsp;<span class="ident" id="2317830">s</span><span class="op" id="2317831">[</span><span class="ident" id="2317832">j</span><span class="op" id="2317833">]</span>&nbsp;<span class="op" id="2317835">==</span>&nbsp;<span class="string" id="2317838">&#39;$&#39;</span>&nbsp;<span class="op" id="2317842">&amp;&amp;</span>&nbsp;<span class="ident" id="2317845">j</span><span class="op" id="2317846">+</span><span class="num" id="2317847">1</span>&nbsp;<span class="op" id="2317849">&lt;</span>&nbsp;<span class="builtinfunc" id="2317851">len</span><span class="op" id="2317854">(</span><span class="ident" id="2317855">s</span><span class="op" id="2317856">)</span>&nbsp;<span class="op" id="2317858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2317863">buf</span>&nbsp;<span class="op" id="2317867">=</span>&nbsp;<span class="builtinfunc" id="2317869">append</span><span class="op" id="2317875">(</span><span class="ident" id="2317876">buf</span><span class="op" id="2317879">,</span>&nbsp;<span class="ident" id="2317881">s</span><span class="op" id="2317882">[</span><span class="ident" id="2317883">i</span><span class="op" id="2317884">:</span><span class="ident" id="2317885">j</span><span class="op" id="2317886">]</span><span class="op" id="2317887">...</span><span class="op" id="2317890">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2317895">name</span><span class="op" id="2317899">,</span>&nbsp;<span class="ident" id="2317901">w</span>&nbsp;<span class="op" id="2317903">:=</span>&nbsp;<span class="ident" id="2317906">getShellName</span><span class="op" id="2317918">(</span><span class="ident" id="2317919">s</span><span class="op" id="2317920">[</span><span class="ident" id="2317921">j</span><span class="op" id="2317922">+</span><span class="num" id="2317923">1</span><span class="op" id="2317924">:</span><span class="op" id="2317925">]</span><span class="op" id="2317926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2317931">buf</span>&nbsp;<span class="op" id="2317935">=</span>&nbsp;<span class="builtinfunc" id="2317937">append</span><span class="op" id="2317943">(</span><span class="ident" id="2317944">buf</span><span class="op" id="2317947">,</span>&nbsp;<span class="ident" id="2317949">mapping</span><span class="op" id="2317956">(</span><span class="ident" id="2317957">name</span><span class="op" id="2317961">)</span><span class="op" id="2317962">...</span><span class="op" id="2317965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2317970">j</span>&nbsp;<span class="op" id="2317972">+=</span>&nbsp;<span class="ident" id="2317975">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2317980">i</span>&nbsp;<span class="op" id="2317982">=</span>&nbsp;<span class="ident" id="2317984">j</span>&nbsp;<span class="op" id="2317986">+</span>&nbsp;<span class="num" id="2317988">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2317992">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2317995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2317998">return</span>&nbsp;<span class="builtintype" id="2318005">string</span><span class="op" id="2318011">(</span><span class="ident" id="2318012">buf</span><span class="op" id="2318015">)</span>&nbsp;<span class="op" id="2318017">+</span>&nbsp;<span class="ident" id="2318019">s</span><span class="op" id="2318020">[</span><span class="ident" id="2318021">i</span><span class="op" id="2318022">:</span><span class="op" id="2318023">]</span><br>
<span class="lineno"></span><span class="op" id="2318025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2318028">//&nbsp;ExpandEnv&nbsp;replaces&nbsp;${var}&nbsp;or&nbsp;$var&nbsp;in&nbsp;the&nbsp;string&nbsp;according&nbsp;to&nbsp;the&nbsp;values</span><br>
<span class="lineno">30</span><span class="comment" id="2318103">//&nbsp;of&nbsp;the&nbsp;current&nbsp;environment&nbsp;variables.&nbsp;&nbsp;References&nbsp;to&nbsp;undefined</span><br>
<span class="lineno"></span><span class="comment" id="2318169">//&nbsp;variables&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;empty&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="2318216">func</span>&nbsp;<span class="ident" id="2318221">ExpandEnv</span><span class="op" id="2318230">(</span><span class="ident" id="2318231">s</span>&nbsp;<span class="builtintype" id="2318233">string</span><span class="op" id="2318239">)</span>&nbsp;<span class="builtintype" id="2318241">string</span>&nbsp;<span class="op" id="2318248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2318251">return</span>&nbsp;<span class="ident" id="2318258">Expand</span><span class="op" id="2318264">(</span><span class="ident" id="2318265">s</span><span class="op" id="2318266">,</span>&nbsp;<span class="ident" id="2318268">Getenv</span><span class="op" id="2318274">)</span><br>
<span class="lineno"></span><span class="op" id="2318276">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="2318279">//&nbsp;isSpellSpecialVar&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;identifies&nbsp;a&nbsp;special</span><br>
<span class="lineno"></span><span class="comment" id="2318351">//&nbsp;shell&nbsp;variable&nbsp;such&nbsp;as&nbsp;$*.</span><br>
<span class="lineno"></span><span class="keyword" id="2318381">func</span>&nbsp;<span class="ident" id="2318386">isShellSpecialVar</span><span class="op" id="2318403">(</span><span class="ident" id="2318404">c</span>&nbsp;<span class="builtintype" id="2318406">uint8</span><span class="op" id="2318411">)</span>&nbsp;<span class="builtintype" id="2318413">bool</span>&nbsp;<span class="op" id="2318418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2318421">switch</span>&nbsp;<span class="ident" id="2318428">c</span>&nbsp;<span class="op" id="2318430">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2318433">case</span>&nbsp;<span class="string" id="2318438">&#39;*&#39;</span><span class="op" id="2318441">,</span>&nbsp;<span class="string" id="2318443">&#39;#&#39;</span><span class="op" id="2318446">,</span>&nbsp;<span class="string" id="2318448">&#39;$&#39;</span><span class="op" id="2318451">,</span>&nbsp;<span class="string" id="2318453">&#39;@&#39;</span><span class="op" id="2318456">,</span>&nbsp;<span class="string" id="2318458">&#39;!&#39;</span><span class="op" id="2318461">,</span>&nbsp;<span class="string" id="2318463">&#39;?&#39;</span><span class="op" id="2318466">,</span>&nbsp;<span class="string" id="2318468">&#39;0&#39;</span><span class="op" id="2318471">,</span>&nbsp;<span class="string" id="2318473">&#39;1&#39;</span><span class="op" id="2318476">,</span>&nbsp;<span class="string" id="2318478">&#39;2&#39;</span><span class="op" id="2318481">,</span>&nbsp;<span class="string" id="2318483">&#39;3&#39;</span><span class="op" id="2318486">,</span>&nbsp;<span class="string" id="2318488">&#39;4&#39;</span><span class="op" id="2318491">,</span>&nbsp;<span class="string" id="2318493">&#39;5&#39;</span><span class="op" id="2318496">,</span>&nbsp;<span class="string" id="2318498">&#39;6&#39;</span><span class="op" id="2318501">,</span>&nbsp;<span class="string" id="2318503">&#39;7&#39;</span><span class="op" id="2318506">,</span>&nbsp;<span class="string" id="2318508">&#39;8&#39;</span><span class="op" id="2318511">,</span>&nbsp;<span class="string" id="2318513">&#39;9&#39;</span><span class="op" id="2318516">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2318520">return</span>&nbsp;<span class="builtintype" id="2318527">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2318533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2318536">return</span>&nbsp;<span class="builtintype" id="2318543">false</span><br>
<span class="lineno"></span><span class="op" id="2318549">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="2318552">//&nbsp;isAlphaNum&nbsp;reports&nbsp;whether&nbsp;the&nbsp;byte&nbsp;is&nbsp;an&nbsp;ASCII&nbsp;letter,&nbsp;number,&nbsp;or&nbsp;underscore</span><br>
<span class="lineno"></span><span class="keyword" id="2318633">func</span>&nbsp;<span class="ident" id="2318638">isAlphaNum</span><span class="op" id="2318648">(</span><span class="ident" id="2318649">c</span>&nbsp;<span class="builtintype" id="2318651">uint8</span><span class="op" id="2318656">)</span>&nbsp;<span class="builtintype" id="2318658">bool</span>&nbsp;<span class="op" id="2318663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2318666">return</span>&nbsp;<span class="ident" id="2318673">c</span>&nbsp;<span class="op" id="2318675">==</span>&nbsp;<span class="string" id="2318678">&#39;_&#39;</span>&nbsp;<span class="op" id="2318682">||</span>&nbsp;<span class="string" id="2318685">&#39;0&#39;</span>&nbsp;<span class="op" id="2318689">&lt;=</span>&nbsp;<span class="ident" id="2318692">c</span>&nbsp;<span class="op" id="2318694">&amp;&amp;</span>&nbsp;<span class="ident" id="2318697">c</span>&nbsp;<span class="op" id="2318699">&lt;=</span>&nbsp;<span class="string" id="2318702">&#39;9&#39;</span>&nbsp;<span class="op" id="2318706">||</span>&nbsp;<span class="string" id="2318709">&#39;a&#39;</span>&nbsp;<span class="op" id="2318713">&lt;=</span>&nbsp;<span class="ident" id="2318716">c</span>&nbsp;<span class="op" id="2318718">&amp;&amp;</span>&nbsp;<span class="ident" id="2318721">c</span>&nbsp;<span class="op" id="2318723">&lt;=</span>&nbsp;<span class="string" id="2318726">&#39;z&#39;</span>&nbsp;<span class="op" id="2318730">||</span>&nbsp;<span class="string" id="2318733">&#39;A&#39;</span>&nbsp;<span class="op" id="2318737">&lt;=</span>&nbsp;<span class="ident" id="2318740">c</span>&nbsp;<span class="op" id="2318742">&amp;&amp;</span>&nbsp;<span class="ident" id="2318745">c</span>&nbsp;<span class="op" id="2318747">&lt;=</span>&nbsp;<span class="string" id="2318750">&#39;Z&#39;</span><br>
<span class="lineno"></span><span class="op" id="2318754">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="2318757">//&nbsp;getName&nbsp;returns&nbsp;the&nbsp;name&nbsp;that&nbsp;begins&nbsp;the&nbsp;string&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes</span><br>
<span class="lineno"></span><span class="comment" id="2318832">//&nbsp;consumed&nbsp;to&nbsp;extract&nbsp;it.&nbsp;&nbsp;If&nbsp;the&nbsp;name&nbsp;is&nbsp;enclosed&nbsp;in&nbsp;{},&nbsp;it&#39;s&nbsp;part&nbsp;of&nbsp;a&nbsp;${}</span><br>
<span class="lineno"></span><span class="comment" id="2318910">//&nbsp;expansion&nbsp;and&nbsp;two&nbsp;more&nbsp;bytes&nbsp;are&nbsp;needed&nbsp;than&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="2318982">func</span>&nbsp;<span class="ident" id="2318987">getShellName</span><span class="op" id="2318999">(</span><span class="ident" id="2319000">s</span>&nbsp;<span class="builtintype" id="2319002">string</span><span class="op" id="2319008">)</span>&nbsp;<span class="op" id="2319010">(</span><span class="builtintype" id="2319011">string</span><span class="op" id="2319017">,</span>&nbsp;<span class="builtintype" id="2319019">int</span><span class="op" id="2319022">)</span>&nbsp;<span class="op" id="2319024">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319027">switch</span>&nbsp;<span class="op" id="2319034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319037">case</span>&nbsp;<span class="ident" id="2319042">s</span><span class="op" id="2319043">[</span><span class="num" id="2319044">0</span><span class="op" id="2319045">]</span>&nbsp;<span class="op" id="2319047">==</span>&nbsp;<span class="string" id="2319050">&#39;{&#39;</span><span class="op" id="2319053">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319057">if</span>&nbsp;<span class="builtinfunc" id="2319060">len</span><span class="op" id="2319063">(</span><span class="ident" id="2319064">s</span><span class="op" id="2319065">)</span>&nbsp;<span class="op" id="2319067">&gt;</span>&nbsp;<span class="num" id="2319069">2</span>&nbsp;<span class="op" id="2319071">&amp;&amp;</span>&nbsp;<span class="ident" id="2319074">isShellSpecialVar</span><span class="op" id="2319091">(</span><span class="ident" id="2319092">s</span><span class="op" id="2319093">[</span><span class="num" id="2319094">1</span><span class="op" id="2319095">]</span><span class="op" id="2319096">)</span>&nbsp;<span class="op" id="2319098">&amp;&amp;</span>&nbsp;<span class="ident" id="2319101">s</span><span class="op" id="2319102">[</span><span class="num" id="2319103">2</span><span class="op" id="2319104">]</span>&nbsp;<span class="op" id="2319106">==</span>&nbsp;<span class="string" id="2319109">&#39;}&#39;</span>&nbsp;<span class="op" id="2319113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319118">return</span>&nbsp;<span class="ident" id="2319125">s</span><span class="op" id="2319126">[</span><span class="num" id="2319127">1</span><span class="op" id="2319128">:</span><span class="num" id="2319129">2</span><span class="op" id="2319130">]</span><span class="op" id="2319131">,</span>&nbsp;<span class="num" id="2319133">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319137">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2319141">//&nbsp;Scan&nbsp;to&nbsp;closing&nbsp;brace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319168">for</span>&nbsp;<span class="ident" id="2319172">i</span>&nbsp;<span class="op" id="2319174">:=</span>&nbsp;<span class="num" id="2319177">1</span><span class="op" id="2319178">;</span>&nbsp;<span class="ident" id="2319180">i</span>&nbsp;<span class="op" id="2319182">&lt;</span>&nbsp;<span class="builtinfunc" id="2319184">len</span><span class="op" id="2319187">(</span><span class="ident" id="2319188">s</span><span class="op" id="2319189">)</span><span class="op" id="2319190">;</span>&nbsp;<span class="ident" id="2319192">i</span><span class="op" id="2319193">++</span>&nbsp;<span class="op" id="2319196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319201">if</span>&nbsp;<span class="ident" id="2319204">s</span><span class="op" id="2319205">[</span><span class="ident" id="2319206">i</span><span class="op" id="2319207">]</span>&nbsp;<span class="op" id="2319209">==</span>&nbsp;<span class="string" id="2319212">&#39;}&#39;</span>&nbsp;<span class="op" id="2319216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319222">return</span>&nbsp;<span class="ident" id="2319229">s</span><span class="op" id="2319230">[</span><span class="num" id="2319231">1</span><span class="op" id="2319232">:</span><span class="ident" id="2319233">i</span><span class="op" id="2319234">]</span><span class="op" id="2319235">,</span>&nbsp;<span class="ident" id="2319237">i</span>&nbsp;<span class="op" id="2319239">+</span>&nbsp;<span class="num" id="2319241">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319246">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319254">return</span>&nbsp;<span class="string" id="2319261">&#34;&#34;</span><span class="op" id="2319263">,</span>&nbsp;<span class="num" id="2319265">1</span>&nbsp;<span class="comment" id="2319267">//&nbsp;Bad&nbsp;syntax;&nbsp;just&nbsp;eat&nbsp;the&nbsp;brace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319303">case</span>&nbsp;<span class="ident" id="2319308">isShellSpecialVar</span><span class="op" id="2319325">(</span><span class="ident" id="2319326">s</span><span class="op" id="2319327">[</span><span class="num" id="2319328">0</span><span class="op" id="2319329">]</span><span class="op" id="2319330">)</span><span class="op" id="2319331">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319335">return</span>&nbsp;<span class="ident" id="2319342">s</span><span class="op" id="2319343">[</span><span class="num" id="2319344">0</span><span class="op" id="2319345">:</span><span class="num" id="2319346">1</span><span class="op" id="2319347">]</span><span class="op" id="2319348">,</span>&nbsp;<span class="num" id="2319350">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319353">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2319356">//&nbsp;Scan&nbsp;alphanumerics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319380">var</span>&nbsp;<span class="ident" id="2319384">i</span>&nbsp;<span class="builtintype" id="2319386">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319391">for</span>&nbsp;<span class="ident" id="2319395">i</span>&nbsp;<span class="op" id="2319397">=</span>&nbsp;<span class="num" id="2319399">0</span><span class="op" id="2319400">;</span>&nbsp;<span class="ident" id="2319402">i</span>&nbsp;<span class="op" id="2319404">&lt;</span>&nbsp;<span class="builtinfunc" id="2319406">len</span><span class="op" id="2319409">(</span><span class="ident" id="2319410">s</span><span class="op" id="2319411">)</span>&nbsp;<span class="op" id="2319413">&amp;&amp;</span>&nbsp;<span class="ident" id="2319416">isAlphaNum</span><span class="op" id="2319426">(</span><span class="ident" id="2319427">s</span><span class="op" id="2319428">[</span><span class="ident" id="2319429">i</span><span class="op" id="2319430">]</span><span class="op" id="2319431">)</span><span class="op" id="2319432">;</span>&nbsp;<span class="ident" id="2319434">i</span><span class="op" id="2319435">++</span>&nbsp;<span class="op" id="2319438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319444">return</span>&nbsp;<span class="ident" id="2319451">s</span><span class="op" id="2319452">[</span><span class="op" id="2319453">:</span><span class="ident" id="2319454">i</span><span class="op" id="2319455">]</span><span class="op" id="2319456">,</span>&nbsp;<span class="ident" id="2319458">i</span><br>
<span class="lineno">75</span><span class="op" id="2319460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2319463">//&nbsp;Getenv&nbsp;retrieves&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno"></span><span class="comment" id="2319539">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;value,&nbsp;which&nbsp;will&nbsp;be&nbsp;empty&nbsp;if&nbsp;the&nbsp;variable&nbsp;is&nbsp;not&nbsp;present.</span><br>
<span class="lineno"></span><span class="keyword" id="2319616">func</span>&nbsp;<span class="ident" id="2319621">Getenv</span><span class="op" id="2319627">(</span><span class="ident" id="2319628">key</span>&nbsp;<span class="builtintype" id="2319632">string</span><span class="op" id="2319638">)</span>&nbsp;<span class="builtintype" id="2319640">string</span>&nbsp;<span class="op" id="2319647">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319650">v</span><span class="op" id="2319651">,</span>&nbsp;<span class="ident" id="2319653">_</span>&nbsp;<span class="op" id="2319655">:=</span>&nbsp;<span class="ident" id="2319658">syscall</span><span class="op" id="2319665">.</span><span class="ident" id="2319666">Getenv</span><span class="op" id="2319672">(</span><span class="ident" id="2319673">key</span><span class="op" id="2319676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319679">return</span>&nbsp;<span class="ident" id="2319686">v</span><br>
<span class="lineno"></span><span class="op" id="2319688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2319691">//&nbsp;Setenv&nbsp;sets&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;named&nbsp;by&nbsp;the&nbsp;key.</span><br>
<span class="lineno">85</span><span class="comment" id="2319762">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="2319794">func</span>&nbsp;<span class="ident" id="2319799">Setenv</span><span class="op" id="2319805">(</span><span class="ident" id="2319806">key</span><span class="op" id="2319809">,</span>&nbsp;<span class="ident" id="2319811">value</span>&nbsp;<span class="builtintype" id="2319817">string</span><span class="op" id="2319823">)</span>&nbsp;<span class="builtintype" id="2319825">error</span>&nbsp;<span class="op" id="2319831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319834">err</span>&nbsp;<span class="op" id="2319838">:=</span>&nbsp;<span class="ident" id="2319841">syscall</span><span class="op" id="2319848">.</span><span class="ident" id="2319849">Setenv</span><span class="op" id="2319855">(</span><span class="ident" id="2319856">key</span><span class="op" id="2319859">,</span>&nbsp;<span class="ident" id="2319861">value</span><span class="op" id="2319866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319869">if</span>&nbsp;<span class="ident" id="2319872">err</span>&nbsp;<span class="op" id="2319876">!=</span>&nbsp;<span class="ident" id="2319879">nil</span>&nbsp;<span class="op" id="2319883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319887">return</span>&nbsp;<span class="ident" id="2319894">NewSyscallError</span><span class="op" id="2319909">(</span><span class="string" id="2319910">&#34;setenv&#34;</span><span class="op" id="2319918">,</span>&nbsp;<span class="ident" id="2319920">err</span><span class="op" id="2319923">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319929">return</span>&nbsp;<span class="ident" id="2319936">nil</span><br>
<span class="lineno"></span><span class="op" id="2319940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2319943">//&nbsp;Unsetenv&nbsp;unsets&nbsp;a&nbsp;single&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno">95</span><span class="keyword" id="2319993">func</span>&nbsp;<span class="ident" id="2319998">Unsetenv</span><span class="op" id="2320006">(</span><span class="ident" id="2320007">key</span>&nbsp;<span class="builtintype" id="2320011">string</span><span class="op" id="2320017">)</span>&nbsp;<span class="builtintype" id="2320019">error</span>&nbsp;<span class="op" id="2320025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320028">return</span>&nbsp;<span class="ident" id="2320035">syscall</span><span class="op" id="2320042">.</span><span class="ident" id="2320043">Unsetenv</span><span class="op" id="2320051">(</span><span class="ident" id="2320052">key</span><span class="op" id="2320055">)</span><br>
<span class="lineno"></span><span class="op" id="2320057">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2320060">//&nbsp;Clearenv&nbsp;deletes&nbsp;all&nbsp;environment&nbsp;variables.</span><br>
<span class="lineno">100</span><span class="keyword" id="2320107">func</span>&nbsp;<span class="ident" id="2320112">Clearenv</span><span class="op" id="2320120">(</span><span class="op" id="2320121">)</span>&nbsp;<span class="op" id="2320123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320126">syscall</span><span class="op" id="2320133">.</span><span class="ident" id="2320134">Clearenv</span><span class="op" id="2320142">(</span><span class="op" id="2320143">)</span><br>
<span class="lineno"></span><span class="op" id="2320145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2320148">//&nbsp;Environ&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;strings&nbsp;representing&nbsp;the&nbsp;environment,</span><br>
<span class="lineno">105</span><span class="comment" id="2320215">//&nbsp;in&nbsp;the&nbsp;form&nbsp;&#34;key=value&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="2320243">func</span>&nbsp;<span class="ident" id="2320248">Environ</span><span class="op" id="2320255">(</span><span class="op" id="2320256">)</span>&nbsp;<span class="op" id="2320258">[</span><span class="op" id="2320259">]</span><span class="builtintype" id="2320260">string</span>&nbsp;<span class="op" id="2320267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320270">return</span>&nbsp;<span class="ident" id="2320277">syscall</span><span class="op" id="2320284">.</span><span class="ident" id="2320285">Environ</span><span class="op" id="2320292">(</span><span class="op" id="2320293">)</span><br>
<span class="lineno"></span><span class="op" id="2320295">}</span>
</div>
</body>
</html>
