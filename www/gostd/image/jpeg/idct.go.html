<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/jpeg</h2>
<ul>
<li><a href="/gostd/image/jpeg/dct_test.go.html">dct_test.go</a></li>
<li><a href="/gostd/image/jpeg/fdct.go.html">fdct.go</a></li>
<li><a href="/gostd/image/jpeg/huffman.go.html">huffman.go</a></li>
<li><a href="/gostd/image/jpeg/idct.go.html" class="current">idct.go</a></li>
<li><a href="/gostd/image/jpeg/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/jpeg/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/jpeg/scan.go.html">scan.go</a></li>
<li><a href="/gostd/image/jpeg/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/jpeg/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5095068">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5095123">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5095177">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5095228">package</span>&nbsp;<span class="ident" id="5095236">jpeg</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5095242">//&nbsp;This&nbsp;is&nbsp;a&nbsp;Go&nbsp;translation&nbsp;of&nbsp;idct.c&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="5095285">//</span><br>
<span class="lineno"></span><span class="comment" id="5095288">//&nbsp;http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_IEC_13818-4_2004_Conformance_Testing/Video/verifier/mpeg2decode_960109.tar.gz</span><br>
<span class="lineno">10</span><span class="comment" id="5095430">//</span><br>
<span class="lineno"></span><span class="comment" id="5095433">//&nbsp;which&nbsp;carries&nbsp;the&nbsp;following&nbsp;notice:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5095473">/*&nbsp;Copyright&nbsp;(C)&nbsp;1996,&nbsp;MPEG&nbsp;Software&nbsp;Simulation&nbsp;Group.&nbsp;All&nbsp;Rights&nbsp;Reserved.&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5095553">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Disclaimer&nbsp;of&nbsp;Warranty<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*&nbsp;These&nbsp;software&nbsp;programs&nbsp;are&nbsp;available&nbsp;to&nbsp;the&nbsp;user&nbsp;without&nbsp;any&nbsp;license&nbsp;fee&nbsp;or<br>
<span class="lineno"></span>&nbsp;*&nbsp;royalty&nbsp;on&nbsp;an&nbsp;&#34;as&nbsp;is&#34;&nbsp;basis.&nbsp;&nbsp;The&nbsp;MPEG&nbsp;Software&nbsp;Simulation&nbsp;Group&nbsp;disclaims<br>
<span class="lineno">20</span>&nbsp;*&nbsp;any&nbsp;and&nbsp;all&nbsp;warranties,&nbsp;whether&nbsp;express,&nbsp;implied,&nbsp;or&nbsp;statuary,&nbsp;including&nbsp;any<br>
<span class="lineno"></span>&nbsp;*&nbsp;implied&nbsp;warranties&nbsp;or&nbsp;merchantability&nbsp;or&nbsp;of&nbsp;fitness&nbsp;for&nbsp;a&nbsp;particular<br>
<span class="lineno"></span>&nbsp;*&nbsp;purpose.&nbsp;&nbsp;In&nbsp;no&nbsp;event&nbsp;shall&nbsp;the&nbsp;copyright-holder&nbsp;be&nbsp;liable&nbsp;for&nbsp;any<br>
<span class="lineno"></span>&nbsp;*&nbsp;incidental,&nbsp;punitive,&nbsp;or&nbsp;consequential&nbsp;damages&nbsp;of&nbsp;any&nbsp;kind&nbsp;whatsoever<br>
<span class="lineno"></span>&nbsp;*&nbsp;arising&nbsp;from&nbsp;the&nbsp;use&nbsp;of&nbsp;these&nbsp;programs.<br>
<span class="lineno">25</span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*&nbsp;This&nbsp;disclaimer&nbsp;of&nbsp;warranty&nbsp;extends&nbsp;to&nbsp;the&nbsp;user&nbsp;of&nbsp;these&nbsp;programs&nbsp;and&nbsp;user&#39;s<br>
<span class="lineno"></span>&nbsp;*&nbsp;customers,&nbsp;employees,&nbsp;agents,&nbsp;transferees,&nbsp;successors,&nbsp;and&nbsp;assigns.<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*&nbsp;The&nbsp;MPEG&nbsp;Software&nbsp;Simulation&nbsp;Group&nbsp;does&nbsp;not&nbsp;represent&nbsp;or&nbsp;warrant&nbsp;that&nbsp;the<br>
<span class="lineno">30</span>&nbsp;*&nbsp;programs&nbsp;furnished&nbsp;hereunder&nbsp;are&nbsp;free&nbsp;of&nbsp;infringement&nbsp;of&nbsp;any&nbsp;third-party<br>
<span class="lineno"></span>&nbsp;*&nbsp;patents.<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Commercial&nbsp;implementations&nbsp;of&nbsp;MPEG-1&nbsp;and&nbsp;MPEG-2&nbsp;video,&nbsp;including&nbsp;shareware,<br>
<span class="lineno"></span>&nbsp;*&nbsp;are&nbsp;subject&nbsp;to&nbsp;royalty&nbsp;fees&nbsp;to&nbsp;patent&nbsp;holders.&nbsp;&nbsp;Many&nbsp;of&nbsp;these&nbsp;patents&nbsp;are<br>
<span class="lineno">35</span>&nbsp;*&nbsp;general&nbsp;enough&nbsp;such&nbsp;that&nbsp;they&nbsp;are&nbsp;unavoidable&nbsp;regardless&nbsp;of&nbsp;implementation<br>
<span class="lineno"></span>&nbsp;*&nbsp;design.<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="5096659">const</span>&nbsp;<span class="ident" id="5096665">blockSize</span>&nbsp;<span class="op" id="5096675">=</span>&nbsp;<span class="num" id="5096677">64</span>&nbsp;<span class="comment" id="5096680">//&nbsp;A&nbsp;DCT&nbsp;block&nbsp;is&nbsp;8x8.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5096704">type</span>&nbsp;<span class="ident" id="5096709">block</span>&nbsp;<span class="op" id="5096715">[</span><span class="ident" id="5096716"><a href="/gostd/image/jpeg/idct.go.html#5096665">blockSize</a></span><span class="op" id="5096725">]</span><span class="builtintype" id="5096726">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5096733">const</span>&nbsp;<span class="op" id="5096739">(</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5096742">w1</span>&nbsp;<span class="op" id="5096745">=</span>&nbsp;<span class="num" id="5096747">2841</span>&nbsp;<span class="comment" id="5096752">//&nbsp;2048*sqrt(2)*cos(1*pi/16)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5096782">w2</span>&nbsp;<span class="op" id="5096785">=</span>&nbsp;<span class="num" id="5096787">2676</span>&nbsp;<span class="comment" id="5096792">//&nbsp;2048*sqrt(2)*cos(2*pi/16)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5096822">w3</span>&nbsp;<span class="op" id="5096825">=</span>&nbsp;<span class="num" id="5096827">2408</span>&nbsp;<span class="comment" id="5096832">//&nbsp;2048*sqrt(2)*cos(3*pi/16)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5096862">w5</span>&nbsp;<span class="op" id="5096865">=</span>&nbsp;<span class="num" id="5096867">1609</span>&nbsp;<span class="comment" id="5096872">//&nbsp;2048*sqrt(2)*cos(5*pi/16)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5096902">w6</span>&nbsp;<span class="op" id="5096905">=</span>&nbsp;<span class="num" id="5096907">1108</span>&nbsp;<span class="comment" id="5096912">//&nbsp;2048*sqrt(2)*cos(6*pi/16)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5096942">w7</span>&nbsp;<span class="op" id="5096945">=</span>&nbsp;<span class="num" id="5096947">565</span>&nbsp;&nbsp;<span class="comment" id="5096952">//&nbsp;2048*sqrt(2)*cos(7*pi/16)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5096983">w1pw7</span>&nbsp;<span class="op" id="5096989">=</span>&nbsp;<span class="ident" id="5096991"><a href="/gostd/image/jpeg/idct.go.html#5096742">w1</a></span>&nbsp;<span class="op" id="5096994">+</span>&nbsp;<span class="ident" id="5096996"><a href="/gostd/image/jpeg/idct.go.html#5096942">w7</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097000">w1mw7</span>&nbsp;<span class="op" id="5097006">=</span>&nbsp;<span class="ident" id="5097008"><a href="/gostd/image/jpeg/idct.go.html#5096742">w1</a></span>&nbsp;<span class="op" id="5097011">-</span>&nbsp;<span class="ident" id="5097013"><a href="/gostd/image/jpeg/idct.go.html#5096942">w7</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097017">w2pw6</span>&nbsp;<span class="op" id="5097023">=</span>&nbsp;<span class="ident" id="5097025"><a href="/gostd/image/jpeg/idct.go.html#5096782">w2</a></span>&nbsp;<span class="op" id="5097028">+</span>&nbsp;<span class="ident" id="5097030"><a href="/gostd/image/jpeg/idct.go.html#5096902">w6</a></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097034">w2mw6</span>&nbsp;<span class="op" id="5097040">=</span>&nbsp;<span class="ident" id="5097042"><a href="/gostd/image/jpeg/idct.go.html#5096782">w2</a></span>&nbsp;<span class="op" id="5097045">-</span>&nbsp;<span class="ident" id="5097047"><a href="/gostd/image/jpeg/idct.go.html#5096902">w6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097051">w3pw5</span>&nbsp;<span class="op" id="5097057">=</span>&nbsp;<span class="ident" id="5097059"><a href="/gostd/image/jpeg/idct.go.html#5096822">w3</a></span>&nbsp;<span class="op" id="5097062">+</span>&nbsp;<span class="ident" id="5097064"><a href="/gostd/image/jpeg/idct.go.html#5096862">w5</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097068">w3mw5</span>&nbsp;<span class="op" id="5097074">=</span>&nbsp;<span class="ident" id="5097076"><a href="/gostd/image/jpeg/idct.go.html#5096822">w3</a></span>&nbsp;<span class="op" id="5097079">-</span>&nbsp;<span class="ident" id="5097081"><a href="/gostd/image/jpeg/idct.go.html#5096862">w5</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097086">r2</span>&nbsp;<span class="op" id="5097089">=</span>&nbsp;<span class="num" id="5097091">181</span>&nbsp;<span class="comment" id="5097095">//&nbsp;256/sqrt(2)</span><br>
<span class="lineno">60</span><span class="op" id="5097110">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5097113">//&nbsp;idct&nbsp;performs&nbsp;a&nbsp;2-D&nbsp;Inverse&nbsp;Discrete&nbsp;Cosine&nbsp;Transformation.</span><br>
<span class="lineno"></span><span class="comment" id="5097176">//</span><br>
<span class="lineno"></span><span class="comment" id="5097179">//&nbsp;The&nbsp;input&nbsp;coefficients&nbsp;should&nbsp;already&nbsp;have&nbsp;been&nbsp;multiplied&nbsp;by&nbsp;the</span><br>
<span class="lineno">65</span><span class="comment" id="5097248">//&nbsp;appropriate&nbsp;quantization&nbsp;table.&nbsp;We&nbsp;use&nbsp;fixed-point&nbsp;computation,&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5097324">//&nbsp;number&nbsp;of&nbsp;bits&nbsp;for&nbsp;the&nbsp;fractional&nbsp;component&nbsp;varying&nbsp;over&nbsp;the&nbsp;intermediate</span><br>
<span class="lineno"></span><span class="comment" id="5097401">//&nbsp;stages.</span><br>
<span class="lineno"></span><span class="comment" id="5097412">//</span><br>
<span class="lineno"></span><span class="comment" id="5097415">//&nbsp;For&nbsp;more&nbsp;on&nbsp;the&nbsp;actual&nbsp;algorithm,&nbsp;see&nbsp;Z.&nbsp;Wang,&nbsp;&#34;Fast&nbsp;algorithms&nbsp;for&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="5097490">//&nbsp;discrete&nbsp;W&nbsp;transform&nbsp;and&nbsp;for&nbsp;the&nbsp;discrete&nbsp;Fourier&nbsp;transform&#34;,&nbsp;IEEE&nbsp;Trans.&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="5097570">//&nbsp;ASSP,&nbsp;Vol.&nbsp;ASSP-&nbsp;32,&nbsp;pp.&nbsp;803-816,&nbsp;Aug.&nbsp;1984.</span><br>
<span class="lineno"></span><span class="keyword" id="5097618">func</span>&nbsp;<span class="ident" id="5097623">idct</span><span class="op" id="5097627">(</span><span class="ident" id="5097628">src</span>&nbsp;<span class="op" id="5097632">*</span><span class="ident" id="5097633"><a href="/gostd/image/jpeg/idct.go.html#5096709">block</a></span><span class="op" id="5097638">)</span>&nbsp;<span class="op" id="5097640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5097643">//&nbsp;Horizontal&nbsp;1-D&nbsp;IDCT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5097668">for</span>&nbsp;<span class="ident" id="5097672">y</span>&nbsp;<span class="op" id="5097674">:=</span>&nbsp;<span class="num" id="5097677">0</span><span class="op" id="5097678">;</span>&nbsp;<span class="ident" id="5097680"><a href="/gostd/image/jpeg/idct.go.html#5097672">y</a></span>&nbsp;<span class="op" id="5097682">&lt;</span>&nbsp;<span class="num" id="5097684">8</span><span class="op" id="5097685">;</span>&nbsp;<span class="ident" id="5097687"><a href="/gostd/image/jpeg/idct.go.html#5097672">y</a></span><span class="op" id="5097688">++</span>&nbsp;<span class="op" id="5097691">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097695">y8</span>&nbsp;<span class="op" id="5097698">:=</span>&nbsp;<span class="ident" id="5097701"><a href="/gostd/image/jpeg/idct.go.html#5097672">y</a></span>&nbsp;<span class="op" id="5097703">*</span>&nbsp;<span class="num" id="5097705">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5097709">//&nbsp;If&nbsp;all&nbsp;the&nbsp;AC&nbsp;components&nbsp;are&nbsp;zero,&nbsp;then&nbsp;the&nbsp;IDCT&nbsp;is&nbsp;trivial.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5097775">if</span>&nbsp;<span class="ident" id="5097778"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097781">[</span><span class="ident" id="5097782"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097784">+</span><span class="num" id="5097785">1</span><span class="op" id="5097786">]</span>&nbsp;<span class="op" id="5097788">==</span>&nbsp;<span class="num" id="5097791">0</span>&nbsp;<span class="op" id="5097793">&amp;&amp;</span>&nbsp;<span class="ident" id="5097796"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097799">[</span><span class="ident" id="5097800"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097802">+</span><span class="num" id="5097803">2</span><span class="op" id="5097804">]</span>&nbsp;<span class="op" id="5097806">==</span>&nbsp;<span class="num" id="5097809">0</span>&nbsp;<span class="op" id="5097811">&amp;&amp;</span>&nbsp;<span class="ident" id="5097814"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097817">[</span><span class="ident" id="5097818"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097820">+</span><span class="num" id="5097821">3</span><span class="op" id="5097822">]</span>&nbsp;<span class="op" id="5097824">==</span>&nbsp;<span class="num" id="5097827">0</span>&nbsp;<span class="op" id="5097829">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097835"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097838">[</span><span class="ident" id="5097839"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097841">+</span><span class="num" id="5097842">4</span><span class="op" id="5097843">]</span>&nbsp;<span class="op" id="5097845">==</span>&nbsp;<span class="num" id="5097848">0</span>&nbsp;<span class="op" id="5097850">&amp;&amp;</span>&nbsp;<span class="ident" id="5097853"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097856">[</span><span class="ident" id="5097857"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097859">+</span><span class="num" id="5097860">5</span><span class="op" id="5097861">]</span>&nbsp;<span class="op" id="5097863">==</span>&nbsp;<span class="num" id="5097866">0</span>&nbsp;<span class="op" id="5097868">&amp;&amp;</span>&nbsp;<span class="ident" id="5097871"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097874">[</span><span class="ident" id="5097875"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097877">+</span><span class="num" id="5097878">6</span><span class="op" id="5097879">]</span>&nbsp;<span class="op" id="5097881">==</span>&nbsp;<span class="num" id="5097884">0</span>&nbsp;<span class="op" id="5097886">&amp;&amp;</span>&nbsp;<span class="ident" id="5097889"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097892">[</span><span class="ident" id="5097893"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097895">+</span><span class="num" id="5097896">7</span><span class="op" id="5097897">]</span>&nbsp;<span class="op" id="5097899">==</span>&nbsp;<span class="num" id="5097902">0</span>&nbsp;<span class="op" id="5097904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097909">dc</span>&nbsp;<span class="op" id="5097912">:=</span>&nbsp;<span class="ident" id="5097915"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097918">[</span><span class="ident" id="5097919"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097921">+</span><span class="num" id="5097922">0</span><span class="op" id="5097923">]</span>&nbsp;<span class="op" id="5097925">&lt;&lt;</span>&nbsp;<span class="num" id="5097928">3</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097933"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097936">[</span><span class="ident" id="5097937"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097939">+</span><span class="num" id="5097940">0</span><span class="op" id="5097941">]</span>&nbsp;<span class="op" id="5097943">=</span>&nbsp;<span class="ident" id="5097945"><a href="/gostd/image/jpeg/idct.go.html#5097909">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097951"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097954">[</span><span class="ident" id="5097955"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097957">+</span><span class="num" id="5097958">1</span><span class="op" id="5097959">]</span>&nbsp;<span class="op" id="5097961">=</span>&nbsp;<span class="ident" id="5097963"><a href="/gostd/image/jpeg/idct.go.html#5097909">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097969"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097972">[</span><span class="ident" id="5097973"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097975">+</span><span class="num" id="5097976">2</span><span class="op" id="5097977">]</span>&nbsp;<span class="op" id="5097979">=</span>&nbsp;<span class="ident" id="5097981"><a href="/gostd/image/jpeg/idct.go.html#5097909">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5097987"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5097990">[</span><span class="ident" id="5097991"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5097993">+</span><span class="num" id="5097994">3</span><span class="op" id="5097995">]</span>&nbsp;<span class="op" id="5097997">=</span>&nbsp;<span class="ident" id="5097999"><a href="/gostd/image/jpeg/idct.go.html#5097909">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098005"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098008">[</span><span class="ident" id="5098009"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098011">+</span><span class="num" id="5098012">4</span><span class="op" id="5098013">]</span>&nbsp;<span class="op" id="5098015">=</span>&nbsp;<span class="ident" id="5098017"><a href="/gostd/image/jpeg/idct.go.html#5097909">dc</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098023"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098026">[</span><span class="ident" id="5098027"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098029">+</span><span class="num" id="5098030">5</span><span class="op" id="5098031">]</span>&nbsp;<span class="op" id="5098033">=</span>&nbsp;<span class="ident" id="5098035"><a href="/gostd/image/jpeg/idct.go.html#5097909">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098041"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098044">[</span><span class="ident" id="5098045"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098047">+</span><span class="num" id="5098048">6</span><span class="op" id="5098049">]</span>&nbsp;<span class="op" id="5098051">=</span>&nbsp;<span class="ident" id="5098053"><a href="/gostd/image/jpeg/idct.go.html#5097909">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098059"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098062">[</span><span class="ident" id="5098063"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098065">+</span><span class="num" id="5098066">7</span><span class="op" id="5098067">]</span>&nbsp;<span class="op" id="5098069">=</span>&nbsp;<span class="ident" id="5098071"><a href="/gostd/image/jpeg/idct.go.html#5097909">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5098077">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5098088">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5098093">//&nbsp;Prescale.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098108">x0</span>&nbsp;<span class="op" id="5098111">:=</span>&nbsp;<span class="op" id="5098114">(</span><span class="ident" id="5098115"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098118">[</span><span class="ident" id="5098119"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098121">+</span><span class="num" id="5098122">0</span><span class="op" id="5098123">]</span>&nbsp;<span class="op" id="5098125">&lt;&lt;</span>&nbsp;<span class="num" id="5098128">11</span><span class="op" id="5098130">)</span>&nbsp;<span class="op" id="5098132">+</span>&nbsp;<span class="num" id="5098134">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098140">x1</span>&nbsp;<span class="op" id="5098143">:=</span>&nbsp;<span class="ident" id="5098146"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098149">[</span><span class="ident" id="5098150"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098152">+</span><span class="num" id="5098153">4</span><span class="op" id="5098154">]</span>&nbsp;<span class="op" id="5098156">&lt;&lt;</span>&nbsp;<span class="num" id="5098159">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098164">x2</span>&nbsp;<span class="op" id="5098167">:=</span>&nbsp;<span class="ident" id="5098170"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098173">[</span><span class="ident" id="5098174"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098176">+</span><span class="num" id="5098177">6</span><span class="op" id="5098178">]</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098182">x3</span>&nbsp;<span class="op" id="5098185">:=</span>&nbsp;<span class="ident" id="5098188"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098191">[</span><span class="ident" id="5098192"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098194">+</span><span class="num" id="5098195">2</span><span class="op" id="5098196">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098200">x4</span>&nbsp;<span class="op" id="5098203">:=</span>&nbsp;<span class="ident" id="5098206"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098209">[</span><span class="ident" id="5098210"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098212">+</span><span class="num" id="5098213">1</span><span class="op" id="5098214">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098218">x5</span>&nbsp;<span class="op" id="5098221">:=</span>&nbsp;<span class="ident" id="5098224"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098227">[</span><span class="ident" id="5098228"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098230">+</span><span class="num" id="5098231">7</span><span class="op" id="5098232">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098236">x6</span>&nbsp;<span class="op" id="5098239">:=</span>&nbsp;<span class="ident" id="5098242"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098245">[</span><span class="ident" id="5098246"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098248">+</span><span class="num" id="5098249">5</span><span class="op" id="5098250">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098254">x7</span>&nbsp;<span class="op" id="5098257">:=</span>&nbsp;<span class="ident" id="5098260"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098263">[</span><span class="ident" id="5098264"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098266">+</span><span class="num" id="5098267">3</span><span class="op" id="5098268">]</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5098273">//&nbsp;Stage&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098287">x8</span>&nbsp;<span class="op" id="5098290">:=</span>&nbsp;<span class="ident" id="5098293"><a href="/gostd/image/jpeg/idct.go.html#5096942">w7</a></span>&nbsp;<span class="op" id="5098296">*</span>&nbsp;<span class="op" id="5098298">(</span><span class="ident" id="5098299"><a href="/gostd/image/jpeg/idct.go.html#5098200">x4</a></span>&nbsp;<span class="op" id="5098302">+</span>&nbsp;<span class="ident" id="5098304"><a href="/gostd/image/jpeg/idct.go.html#5098218">x5</a></span><span class="op" id="5098306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098310"><a href="/gostd/image/jpeg/idct.go.html#5098200">x4</a></span>&nbsp;<span class="op" id="5098313">=</span>&nbsp;<span class="ident" id="5098315"><a href="/gostd/image/jpeg/idct.go.html#5098287">x8</a></span>&nbsp;<span class="op" id="5098318">+</span>&nbsp;<span class="ident" id="5098320"><a href="/gostd/image/jpeg/idct.go.html#5097000">w1mw7</a></span><span class="op" id="5098325">*</span><span class="ident" id="5098326"><a href="/gostd/image/jpeg/idct.go.html#5098200">x4</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098331"><a href="/gostd/image/jpeg/idct.go.html#5098218">x5</a></span>&nbsp;<span class="op" id="5098334">=</span>&nbsp;<span class="ident" id="5098336"><a href="/gostd/image/jpeg/idct.go.html#5098287">x8</a></span>&nbsp;<span class="op" id="5098339">-</span>&nbsp;<span class="ident" id="5098341"><a href="/gostd/image/jpeg/idct.go.html#5096983">w1pw7</a></span><span class="op" id="5098346">*</span><span class="ident" id="5098347"><a href="/gostd/image/jpeg/idct.go.html#5098218">x5</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098352"><a href="/gostd/image/jpeg/idct.go.html#5098287">x8</a></span>&nbsp;<span class="op" id="5098355">=</span>&nbsp;<span class="ident" id="5098357"><a href="/gostd/image/jpeg/idct.go.html#5096822">w3</a></span>&nbsp;<span class="op" id="5098360">*</span>&nbsp;<span class="op" id="5098362">(</span><span class="ident" id="5098363"><a href="/gostd/image/jpeg/idct.go.html#5098236">x6</a></span>&nbsp;<span class="op" id="5098366">+</span>&nbsp;<span class="ident" id="5098368"><a href="/gostd/image/jpeg/idct.go.html#5098254">x7</a></span><span class="op" id="5098370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098374"><a href="/gostd/image/jpeg/idct.go.html#5098236">x6</a></span>&nbsp;<span class="op" id="5098377">=</span>&nbsp;<span class="ident" id="5098379"><a href="/gostd/image/jpeg/idct.go.html#5098287">x8</a></span>&nbsp;<span class="op" id="5098382">-</span>&nbsp;<span class="ident" id="5098384"><a href="/gostd/image/jpeg/idct.go.html#5097068">w3mw5</a></span><span class="op" id="5098389">*</span><span class="ident" id="5098390"><a href="/gostd/image/jpeg/idct.go.html#5098236">x6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098395"><a href="/gostd/image/jpeg/idct.go.html#5098254">x7</a></span>&nbsp;<span class="op" id="5098398">=</span>&nbsp;<span class="ident" id="5098400"><a href="/gostd/image/jpeg/idct.go.html#5098287">x8</a></span>&nbsp;<span class="op" id="5098403">-</span>&nbsp;<span class="ident" id="5098405"><a href="/gostd/image/jpeg/idct.go.html#5097051">w3pw5</a></span><span class="op" id="5098410">*</span><span class="ident" id="5098411"><a href="/gostd/image/jpeg/idct.go.html#5098254">x7</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5098417">//&nbsp;Stage&nbsp;2.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098431"><a href="/gostd/image/jpeg/idct.go.html#5098287">x8</a></span>&nbsp;<span class="op" id="5098434">=</span>&nbsp;<span class="ident" id="5098436"><a href="/gostd/image/jpeg/idct.go.html#5098108">x0</a></span>&nbsp;<span class="op" id="5098439">+</span>&nbsp;<span class="ident" id="5098441"><a href="/gostd/image/jpeg/idct.go.html#5098140">x1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098446"><a href="/gostd/image/jpeg/idct.go.html#5098108">x0</a></span>&nbsp;<span class="op" id="5098449">-=</span>&nbsp;<span class="ident" id="5098452"><a href="/gostd/image/jpeg/idct.go.html#5098140">x1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098457"><a href="/gostd/image/jpeg/idct.go.html#5098140">x1</a></span>&nbsp;<span class="op" id="5098460">=</span>&nbsp;<span class="ident" id="5098462"><a href="/gostd/image/jpeg/idct.go.html#5096902">w6</a></span>&nbsp;<span class="op" id="5098465">*</span>&nbsp;<span class="op" id="5098467">(</span><span class="ident" id="5098468"><a href="/gostd/image/jpeg/idct.go.html#5098182">x3</a></span>&nbsp;<span class="op" id="5098471">+</span>&nbsp;<span class="ident" id="5098473"><a href="/gostd/image/jpeg/idct.go.html#5098164">x2</a></span><span class="op" id="5098475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098479"><a href="/gostd/image/jpeg/idct.go.html#5098164">x2</a></span>&nbsp;<span class="op" id="5098482">=</span>&nbsp;<span class="ident" id="5098484"><a href="/gostd/image/jpeg/idct.go.html#5098140">x1</a></span>&nbsp;<span class="op" id="5098487">-</span>&nbsp;<span class="ident" id="5098489"><a href="/gostd/image/jpeg/idct.go.html#5097017">w2pw6</a></span><span class="op" id="5098494">*</span><span class="ident" id="5098495"><a href="/gostd/image/jpeg/idct.go.html#5098164">x2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098500"><a href="/gostd/image/jpeg/idct.go.html#5098182">x3</a></span>&nbsp;<span class="op" id="5098503">=</span>&nbsp;<span class="ident" id="5098505"><a href="/gostd/image/jpeg/idct.go.html#5098140">x1</a></span>&nbsp;<span class="op" id="5098508">+</span>&nbsp;<span class="ident" id="5098510"><a href="/gostd/image/jpeg/idct.go.html#5097034">w2mw6</a></span><span class="op" id="5098515">*</span><span class="ident" id="5098516"><a href="/gostd/image/jpeg/idct.go.html#5098182">x3</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098521"><a href="/gostd/image/jpeg/idct.go.html#5098140">x1</a></span>&nbsp;<span class="op" id="5098524">=</span>&nbsp;<span class="ident" id="5098526"><a href="/gostd/image/jpeg/idct.go.html#5098200">x4</a></span>&nbsp;<span class="op" id="5098529">+</span>&nbsp;<span class="ident" id="5098531"><a href="/gostd/image/jpeg/idct.go.html#5098236">x6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098536"><a href="/gostd/image/jpeg/idct.go.html#5098200">x4</a></span>&nbsp;<span class="op" id="5098539">-=</span>&nbsp;<span class="ident" id="5098542"><a href="/gostd/image/jpeg/idct.go.html#5098236">x6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098547"><a href="/gostd/image/jpeg/idct.go.html#5098236">x6</a></span>&nbsp;<span class="op" id="5098550">=</span>&nbsp;<span class="ident" id="5098552"><a href="/gostd/image/jpeg/idct.go.html#5098218">x5</a></span>&nbsp;<span class="op" id="5098555">+</span>&nbsp;<span class="ident" id="5098557"><a href="/gostd/image/jpeg/idct.go.html#5098254">x7</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098562"><a href="/gostd/image/jpeg/idct.go.html#5098218">x5</a></span>&nbsp;<span class="op" id="5098565">-=</span>&nbsp;<span class="ident" id="5098568"><a href="/gostd/image/jpeg/idct.go.html#5098254">x7</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5098574">//&nbsp;Stage&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098588"><a href="/gostd/image/jpeg/idct.go.html#5098254">x7</a></span>&nbsp;<span class="op" id="5098591">=</span>&nbsp;<span class="ident" id="5098593"><a href="/gostd/image/jpeg/idct.go.html#5098287">x8</a></span>&nbsp;<span class="op" id="5098596">+</span>&nbsp;<span class="ident" id="5098598"><a href="/gostd/image/jpeg/idct.go.html#5098182">x3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098603"><a href="/gostd/image/jpeg/idct.go.html#5098287">x8</a></span>&nbsp;<span class="op" id="5098606">-=</span>&nbsp;<span class="ident" id="5098609"><a href="/gostd/image/jpeg/idct.go.html#5098182">x3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098614"><a href="/gostd/image/jpeg/idct.go.html#5098182">x3</a></span>&nbsp;<span class="op" id="5098617">=</span>&nbsp;<span class="ident" id="5098619"><a href="/gostd/image/jpeg/idct.go.html#5098108">x0</a></span>&nbsp;<span class="op" id="5098622">+</span>&nbsp;<span class="ident" id="5098624"><a href="/gostd/image/jpeg/idct.go.html#5098164">x2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098629"><a href="/gostd/image/jpeg/idct.go.html#5098108">x0</a></span>&nbsp;<span class="op" id="5098632">-=</span>&nbsp;<span class="ident" id="5098635"><a href="/gostd/image/jpeg/idct.go.html#5098164">x2</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098640"><a href="/gostd/image/jpeg/idct.go.html#5098164">x2</a></span>&nbsp;<span class="op" id="5098643">=</span>&nbsp;<span class="op" id="5098645">(</span><span class="ident" id="5098646"><a href="/gostd/image/jpeg/idct.go.html#5097086">r2</a></span><span class="op" id="5098648">*</span><span class="op" id="5098649">(</span><span class="ident" id="5098650"><a href="/gostd/image/jpeg/idct.go.html#5098200">x4</a></span><span class="op" id="5098652">+</span><span class="ident" id="5098653"><a href="/gostd/image/jpeg/idct.go.html#5098218">x5</a></span><span class="op" id="5098655">)</span>&nbsp;<span class="op" id="5098657">+</span>&nbsp;<span class="num" id="5098659">128</span><span class="op" id="5098662">)</span>&nbsp;<span class="op" id="5098664">&gt;&gt;</span>&nbsp;<span class="num" id="5098667">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098671"><a href="/gostd/image/jpeg/idct.go.html#5098200">x4</a></span>&nbsp;<span class="op" id="5098674">=</span>&nbsp;<span class="op" id="5098676">(</span><span class="ident" id="5098677"><a href="/gostd/image/jpeg/idct.go.html#5097086">r2</a></span><span class="op" id="5098679">*</span><span class="op" id="5098680">(</span><span class="ident" id="5098681"><a href="/gostd/image/jpeg/idct.go.html#5098200">x4</a></span><span class="op" id="5098683">-</span><span class="ident" id="5098684"><a href="/gostd/image/jpeg/idct.go.html#5098218">x5</a></span><span class="op" id="5098686">)</span>&nbsp;<span class="op" id="5098688">+</span>&nbsp;<span class="num" id="5098690">128</span><span class="op" id="5098693">)</span>&nbsp;<span class="op" id="5098695">&gt;&gt;</span>&nbsp;<span class="num" id="5098698">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5098703">//&nbsp;Stage&nbsp;4.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098717"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098720">[</span><span class="ident" id="5098721"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098723">+</span><span class="num" id="5098724">0</span><span class="op" id="5098725">]</span>&nbsp;<span class="op" id="5098727">=</span>&nbsp;<span class="op" id="5098729">(</span><span class="ident" id="5098730"><a href="/gostd/image/jpeg/idct.go.html#5098254">x7</a></span>&nbsp;<span class="op" id="5098733">+</span>&nbsp;<span class="ident" id="5098735"><a href="/gostd/image/jpeg/idct.go.html#5098140">x1</a></span><span class="op" id="5098737">)</span>&nbsp;<span class="op" id="5098739">&gt;&gt;</span>&nbsp;<span class="num" id="5098742">8</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098746"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098749">[</span><span class="ident" id="5098750"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098752">+</span><span class="num" id="5098753">1</span><span class="op" id="5098754">]</span>&nbsp;<span class="op" id="5098756">=</span>&nbsp;<span class="op" id="5098758">(</span><span class="ident" id="5098759"><a href="/gostd/image/jpeg/idct.go.html#5098182">x3</a></span>&nbsp;<span class="op" id="5098762">+</span>&nbsp;<span class="ident" id="5098764"><a href="/gostd/image/jpeg/idct.go.html#5098164">x2</a></span><span class="op" id="5098766">)</span>&nbsp;<span class="op" id="5098768">&gt;&gt;</span>&nbsp;<span class="num" id="5098771">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098775"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098778">[</span><span class="ident" id="5098779"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098781">+</span><span class="num" id="5098782">2</span><span class="op" id="5098783">]</span>&nbsp;<span class="op" id="5098785">=</span>&nbsp;<span class="op" id="5098787">(</span><span class="ident" id="5098788"><a href="/gostd/image/jpeg/idct.go.html#5098108">x0</a></span>&nbsp;<span class="op" id="5098791">+</span>&nbsp;<span class="ident" id="5098793"><a href="/gostd/image/jpeg/idct.go.html#5098200">x4</a></span><span class="op" id="5098795">)</span>&nbsp;<span class="op" id="5098797">&gt;&gt;</span>&nbsp;<span class="num" id="5098800">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098804"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098807">[</span><span class="ident" id="5098808"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098810">+</span><span class="num" id="5098811">3</span><span class="op" id="5098812">]</span>&nbsp;<span class="op" id="5098814">=</span>&nbsp;<span class="op" id="5098816">(</span><span class="ident" id="5098817"><a href="/gostd/image/jpeg/idct.go.html#5098287">x8</a></span>&nbsp;<span class="op" id="5098820">+</span>&nbsp;<span class="ident" id="5098822"><a href="/gostd/image/jpeg/idct.go.html#5098236">x6</a></span><span class="op" id="5098824">)</span>&nbsp;<span class="op" id="5098826">&gt;&gt;</span>&nbsp;<span class="num" id="5098829">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098833"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098836">[</span><span class="ident" id="5098837"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098839">+</span><span class="num" id="5098840">4</span><span class="op" id="5098841">]</span>&nbsp;<span class="op" id="5098843">=</span>&nbsp;<span class="op" id="5098845">(</span><span class="ident" id="5098846"><a href="/gostd/image/jpeg/idct.go.html#5098287">x8</a></span>&nbsp;<span class="op" id="5098849">-</span>&nbsp;<span class="ident" id="5098851"><a href="/gostd/image/jpeg/idct.go.html#5098236">x6</a></span><span class="op" id="5098853">)</span>&nbsp;<span class="op" id="5098855">&gt;&gt;</span>&nbsp;<span class="num" id="5098858">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098862"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098865">[</span><span class="ident" id="5098866"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098868">+</span><span class="num" id="5098869">5</span><span class="op" id="5098870">]</span>&nbsp;<span class="op" id="5098872">=</span>&nbsp;<span class="op" id="5098874">(</span><span class="ident" id="5098875"><a href="/gostd/image/jpeg/idct.go.html#5098108">x0</a></span>&nbsp;<span class="op" id="5098878">-</span>&nbsp;<span class="ident" id="5098880"><a href="/gostd/image/jpeg/idct.go.html#5098200">x4</a></span><span class="op" id="5098882">)</span>&nbsp;<span class="op" id="5098884">&gt;&gt;</span>&nbsp;<span class="num" id="5098887">8</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098891"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098894">[</span><span class="ident" id="5098895"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098897">+</span><span class="num" id="5098898">6</span><span class="op" id="5098899">]</span>&nbsp;<span class="op" id="5098901">=</span>&nbsp;<span class="op" id="5098903">(</span><span class="ident" id="5098904"><a href="/gostd/image/jpeg/idct.go.html#5098182">x3</a></span>&nbsp;<span class="op" id="5098907">-</span>&nbsp;<span class="ident" id="5098909"><a href="/gostd/image/jpeg/idct.go.html#5098164">x2</a></span><span class="op" id="5098911">)</span>&nbsp;<span class="op" id="5098913">&gt;&gt;</span>&nbsp;<span class="num" id="5098916">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5098920"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5098923">[</span><span class="ident" id="5098924"><a href="/gostd/image/jpeg/idct.go.html#5097695">y8</a></span><span class="op" id="5098926">+</span><span class="num" id="5098927">7</span><span class="op" id="5098928">]</span>&nbsp;<span class="op" id="5098930">=</span>&nbsp;<span class="op" id="5098932">(</span><span class="ident" id="5098933"><a href="/gostd/image/jpeg/idct.go.html#5098254">x7</a></span>&nbsp;<span class="op" id="5098936">-</span>&nbsp;<span class="ident" id="5098938"><a href="/gostd/image/jpeg/idct.go.html#5098140">x1</a></span><span class="op" id="5098940">)</span>&nbsp;<span class="op" id="5098942">&gt;&gt;</span>&nbsp;<span class="num" id="5098945">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5098948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5098952">//&nbsp;Vertical&nbsp;1-D&nbsp;IDCT.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5098975">for</span>&nbsp;<span class="ident" id="5098979">x</span>&nbsp;<span class="op" id="5098981">:=</span>&nbsp;<span class="num" id="5098984">0</span><span class="op" id="5098985">;</span>&nbsp;<span class="ident" id="5098987"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span>&nbsp;<span class="op" id="5098989">&lt;</span>&nbsp;<span class="num" id="5098991">8</span><span class="op" id="5098992">;</span>&nbsp;<span class="ident" id="5098994"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5098995">++</span>&nbsp;<span class="op" id="5098998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5099002">//&nbsp;Similar&nbsp;to&nbsp;the&nbsp;horizontal&nbsp;1-D&nbsp;IDCT&nbsp;case,&nbsp;if&nbsp;all&nbsp;the&nbsp;AC&nbsp;components&nbsp;are&nbsp;zero,&nbsp;then&nbsp;the&nbsp;IDCT&nbsp;is&nbsp;trivial.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5099109">//&nbsp;However,&nbsp;after&nbsp;performing&nbsp;the&nbsp;horizontal&nbsp;1-D&nbsp;IDCT,&nbsp;there&nbsp;are&nbsp;typically&nbsp;non-zero&nbsp;AC&nbsp;components,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5099212">//&nbsp;we&nbsp;do&nbsp;not&nbsp;bother&nbsp;to&nbsp;check&nbsp;for&nbsp;the&nbsp;all-zero&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5099267">//&nbsp;Prescale.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099282">y0</span>&nbsp;<span class="op" id="5099285">:=</span>&nbsp;<span class="op" id="5099288">(</span><span class="ident" id="5099289"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5099292">[</span><span class="num" id="5099293">8</span><span class="op" id="5099294">*</span><span class="num" id="5099295">0</span><span class="op" id="5099296">+</span><span class="ident" id="5099297"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5099298">]</span>&nbsp;<span class="op" id="5099300">&lt;&lt;</span>&nbsp;<span class="num" id="5099303">8</span><span class="op" id="5099304">)</span>&nbsp;<span class="op" id="5099306">+</span>&nbsp;<span class="num" id="5099308">8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099315">y1</span>&nbsp;<span class="op" id="5099318">:=</span>&nbsp;<span class="ident" id="5099321"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5099324">[</span><span class="num" id="5099325">8</span><span class="op" id="5099326">*</span><span class="num" id="5099327">4</span><span class="op" id="5099328">+</span><span class="ident" id="5099329"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5099330">]</span>&nbsp;<span class="op" id="5099332">&lt;&lt;</span>&nbsp;<span class="num" id="5099335">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099339">y2</span>&nbsp;<span class="op" id="5099342">:=</span>&nbsp;<span class="ident" id="5099345"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5099348">[</span><span class="num" id="5099349">8</span><span class="op" id="5099350">*</span><span class="num" id="5099351">6</span><span class="op" id="5099352">+</span><span class="ident" id="5099353"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5099354">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099358">y3</span>&nbsp;<span class="op" id="5099361">:=</span>&nbsp;<span class="ident" id="5099364"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5099367">[</span><span class="num" id="5099368">8</span><span class="op" id="5099369">*</span><span class="num" id="5099370">2</span><span class="op" id="5099371">+</span><span class="ident" id="5099372"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5099373">]</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099377">y4</span>&nbsp;<span class="op" id="5099380">:=</span>&nbsp;<span class="ident" id="5099383"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5099386">[</span><span class="num" id="5099387">8</span><span class="op" id="5099388">*</span><span class="num" id="5099389">1</span><span class="op" id="5099390">+</span><span class="ident" id="5099391"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5099392">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099396">y5</span>&nbsp;<span class="op" id="5099399">:=</span>&nbsp;<span class="ident" id="5099402"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5099405">[</span><span class="num" id="5099406">8</span><span class="op" id="5099407">*</span><span class="num" id="5099408">7</span><span class="op" id="5099409">+</span><span class="ident" id="5099410"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5099411">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099415">y6</span>&nbsp;<span class="op" id="5099418">:=</span>&nbsp;<span class="ident" id="5099421"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5099424">[</span><span class="num" id="5099425">8</span><span class="op" id="5099426">*</span><span class="num" id="5099427">5</span><span class="op" id="5099428">+</span><span class="ident" id="5099429"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5099430">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099434">y7</span>&nbsp;<span class="op" id="5099437">:=</span>&nbsp;<span class="ident" id="5099440"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5099443">[</span><span class="num" id="5099444">8</span><span class="op" id="5099445">*</span><span class="num" id="5099446">3</span><span class="op" id="5099447">+</span><span class="ident" id="5099448"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5099449">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5099454">//&nbsp;Stage&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099468">y8</span>&nbsp;<span class="op" id="5099471">:=</span>&nbsp;<span class="ident" id="5099474"><a href="/gostd/image/jpeg/idct.go.html#5096942">w7</a></span><span class="op" id="5099476">*</span><span class="op" id="5099477">(</span><span class="ident" id="5099478"><a href="/gostd/image/jpeg/idct.go.html#5099377">y4</a></span><span class="op" id="5099480">+</span><span class="ident" id="5099481"><a href="/gostd/image/jpeg/idct.go.html#5099396">y5</a></span><span class="op" id="5099483">)</span>&nbsp;<span class="op" id="5099485">+</span>&nbsp;<span class="num" id="5099487">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099491"><a href="/gostd/image/jpeg/idct.go.html#5099377">y4</a></span>&nbsp;<span class="op" id="5099494">=</span>&nbsp;<span class="op" id="5099496">(</span><span class="ident" id="5099497"><a href="/gostd/image/jpeg/idct.go.html#5099468">y8</a></span>&nbsp;<span class="op" id="5099500">+</span>&nbsp;<span class="ident" id="5099502"><a href="/gostd/image/jpeg/idct.go.html#5097000">w1mw7</a></span><span class="op" id="5099507">*</span><span class="ident" id="5099508"><a href="/gostd/image/jpeg/idct.go.html#5099377">y4</a></span><span class="op" id="5099510">)</span>&nbsp;<span class="op" id="5099512">&gt;&gt;</span>&nbsp;<span class="num" id="5099515">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099519"><a href="/gostd/image/jpeg/idct.go.html#5099396">y5</a></span>&nbsp;<span class="op" id="5099522">=</span>&nbsp;<span class="op" id="5099524">(</span><span class="ident" id="5099525"><a href="/gostd/image/jpeg/idct.go.html#5099468">y8</a></span>&nbsp;<span class="op" id="5099528">-</span>&nbsp;<span class="ident" id="5099530"><a href="/gostd/image/jpeg/idct.go.html#5096983">w1pw7</a></span><span class="op" id="5099535">*</span><span class="ident" id="5099536"><a href="/gostd/image/jpeg/idct.go.html#5099396">y5</a></span><span class="op" id="5099538">)</span>&nbsp;<span class="op" id="5099540">&gt;&gt;</span>&nbsp;<span class="num" id="5099543">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099547"><a href="/gostd/image/jpeg/idct.go.html#5099468">y8</a></span>&nbsp;<span class="op" id="5099550">=</span>&nbsp;<span class="ident" id="5099552"><a href="/gostd/image/jpeg/idct.go.html#5096822">w3</a></span><span class="op" id="5099554">*</span><span class="op" id="5099555">(</span><span class="ident" id="5099556"><a href="/gostd/image/jpeg/idct.go.html#5099415">y6</a></span><span class="op" id="5099558">+</span><span class="ident" id="5099559"><a href="/gostd/image/jpeg/idct.go.html#5099434">y7</a></span><span class="op" id="5099561">)</span>&nbsp;<span class="op" id="5099563">+</span>&nbsp;<span class="num" id="5099565">4</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099569"><a href="/gostd/image/jpeg/idct.go.html#5099415">y6</a></span>&nbsp;<span class="op" id="5099572">=</span>&nbsp;<span class="op" id="5099574">(</span><span class="ident" id="5099575"><a href="/gostd/image/jpeg/idct.go.html#5099468">y8</a></span>&nbsp;<span class="op" id="5099578">-</span>&nbsp;<span class="ident" id="5099580"><a href="/gostd/image/jpeg/idct.go.html#5097068">w3mw5</a></span><span class="op" id="5099585">*</span><span class="ident" id="5099586"><a href="/gostd/image/jpeg/idct.go.html#5099415">y6</a></span><span class="op" id="5099588">)</span>&nbsp;<span class="op" id="5099590">&gt;&gt;</span>&nbsp;<span class="num" id="5099593">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099597"><a href="/gostd/image/jpeg/idct.go.html#5099434">y7</a></span>&nbsp;<span class="op" id="5099600">=</span>&nbsp;<span class="op" id="5099602">(</span><span class="ident" id="5099603"><a href="/gostd/image/jpeg/idct.go.html#5099468">y8</a></span>&nbsp;<span class="op" id="5099606">-</span>&nbsp;<span class="ident" id="5099608"><a href="/gostd/image/jpeg/idct.go.html#5097051">w3pw5</a></span><span class="op" id="5099613">*</span><span class="ident" id="5099614"><a href="/gostd/image/jpeg/idct.go.html#5099434">y7</a></span><span class="op" id="5099616">)</span>&nbsp;<span class="op" id="5099618">&gt;&gt;</span>&nbsp;<span class="num" id="5099621">3</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5099626">//&nbsp;Stage&nbsp;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099640"><a href="/gostd/image/jpeg/idct.go.html#5099468">y8</a></span>&nbsp;<span class="op" id="5099643">=</span>&nbsp;<span class="ident" id="5099645"><a href="/gostd/image/jpeg/idct.go.html#5099282">y0</a></span>&nbsp;<span class="op" id="5099648">+</span>&nbsp;<span class="ident" id="5099650"><a href="/gostd/image/jpeg/idct.go.html#5099315">y1</a></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099655"><a href="/gostd/image/jpeg/idct.go.html#5099282">y0</a></span>&nbsp;<span class="op" id="5099658">-=</span>&nbsp;<span class="ident" id="5099661"><a href="/gostd/image/jpeg/idct.go.html#5099315">y1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099666"><a href="/gostd/image/jpeg/idct.go.html#5099315">y1</a></span>&nbsp;<span class="op" id="5099669">=</span>&nbsp;<span class="ident" id="5099671"><a href="/gostd/image/jpeg/idct.go.html#5096902">w6</a></span><span class="op" id="5099673">*</span><span class="op" id="5099674">(</span><span class="ident" id="5099675"><a href="/gostd/image/jpeg/idct.go.html#5099358">y3</a></span><span class="op" id="5099677">+</span><span class="ident" id="5099678"><a href="/gostd/image/jpeg/idct.go.html#5099339">y2</a></span><span class="op" id="5099680">)</span>&nbsp;<span class="op" id="5099682">+</span>&nbsp;<span class="num" id="5099684">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099688"><a href="/gostd/image/jpeg/idct.go.html#5099339">y2</a></span>&nbsp;<span class="op" id="5099691">=</span>&nbsp;<span class="op" id="5099693">(</span><span class="ident" id="5099694"><a href="/gostd/image/jpeg/idct.go.html#5099315">y1</a></span>&nbsp;<span class="op" id="5099697">-</span>&nbsp;<span class="ident" id="5099699"><a href="/gostd/image/jpeg/idct.go.html#5097017">w2pw6</a></span><span class="op" id="5099704">*</span><span class="ident" id="5099705"><a href="/gostd/image/jpeg/idct.go.html#5099339">y2</a></span><span class="op" id="5099707">)</span>&nbsp;<span class="op" id="5099709">&gt;&gt;</span>&nbsp;<span class="num" id="5099712">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099716"><a href="/gostd/image/jpeg/idct.go.html#5099358">y3</a></span>&nbsp;<span class="op" id="5099719">=</span>&nbsp;<span class="op" id="5099721">(</span><span class="ident" id="5099722"><a href="/gostd/image/jpeg/idct.go.html#5099315">y1</a></span>&nbsp;<span class="op" id="5099725">+</span>&nbsp;<span class="ident" id="5099727"><a href="/gostd/image/jpeg/idct.go.html#5097034">w2mw6</a></span><span class="op" id="5099732">*</span><span class="ident" id="5099733"><a href="/gostd/image/jpeg/idct.go.html#5099358">y3</a></span><span class="op" id="5099735">)</span>&nbsp;<span class="op" id="5099737">&gt;&gt;</span>&nbsp;<span class="num" id="5099740">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099744"><a href="/gostd/image/jpeg/idct.go.html#5099315">y1</a></span>&nbsp;<span class="op" id="5099747">=</span>&nbsp;<span class="ident" id="5099749"><a href="/gostd/image/jpeg/idct.go.html#5099377">y4</a></span>&nbsp;<span class="op" id="5099752">+</span>&nbsp;<span class="ident" id="5099754"><a href="/gostd/image/jpeg/idct.go.html#5099415">y6</a></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099759"><a href="/gostd/image/jpeg/idct.go.html#5099377">y4</a></span>&nbsp;<span class="op" id="5099762">-=</span>&nbsp;<span class="ident" id="5099765"><a href="/gostd/image/jpeg/idct.go.html#5099415">y6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099770"><a href="/gostd/image/jpeg/idct.go.html#5099415">y6</a></span>&nbsp;<span class="op" id="5099773">=</span>&nbsp;<span class="ident" id="5099775"><a href="/gostd/image/jpeg/idct.go.html#5099396">y5</a></span>&nbsp;<span class="op" id="5099778">+</span>&nbsp;<span class="ident" id="5099780"><a href="/gostd/image/jpeg/idct.go.html#5099434">y7</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099785"><a href="/gostd/image/jpeg/idct.go.html#5099396">y5</a></span>&nbsp;<span class="op" id="5099788">-=</span>&nbsp;<span class="ident" id="5099791"><a href="/gostd/image/jpeg/idct.go.html#5099434">y7</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5099797">//&nbsp;Stage&nbsp;3.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099811"><a href="/gostd/image/jpeg/idct.go.html#5099434">y7</a></span>&nbsp;<span class="op" id="5099814">=</span>&nbsp;<span class="ident" id="5099816"><a href="/gostd/image/jpeg/idct.go.html#5099468">y8</a></span>&nbsp;<span class="op" id="5099819">+</span>&nbsp;<span class="ident" id="5099821"><a href="/gostd/image/jpeg/idct.go.html#5099358">y3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099826"><a href="/gostd/image/jpeg/idct.go.html#5099468">y8</a></span>&nbsp;<span class="op" id="5099829">-=</span>&nbsp;<span class="ident" id="5099832"><a href="/gostd/image/jpeg/idct.go.html#5099358">y3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099837"><a href="/gostd/image/jpeg/idct.go.html#5099358">y3</a></span>&nbsp;<span class="op" id="5099840">=</span>&nbsp;<span class="ident" id="5099842"><a href="/gostd/image/jpeg/idct.go.html#5099282">y0</a></span>&nbsp;<span class="op" id="5099845">+</span>&nbsp;<span class="ident" id="5099847"><a href="/gostd/image/jpeg/idct.go.html#5099339">y2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099852"><a href="/gostd/image/jpeg/idct.go.html#5099282">y0</a></span>&nbsp;<span class="op" id="5099855">-=</span>&nbsp;<span class="ident" id="5099858"><a href="/gostd/image/jpeg/idct.go.html#5099339">y2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099863"><a href="/gostd/image/jpeg/idct.go.html#5099339">y2</a></span>&nbsp;<span class="op" id="5099866">=</span>&nbsp;<span class="op" id="5099868">(</span><span class="ident" id="5099869"><a href="/gostd/image/jpeg/idct.go.html#5097086">r2</a></span><span class="op" id="5099871">*</span><span class="op" id="5099872">(</span><span class="ident" id="5099873"><a href="/gostd/image/jpeg/idct.go.html#5099377">y4</a></span><span class="op" id="5099875">+</span><span class="ident" id="5099876"><a href="/gostd/image/jpeg/idct.go.html#5099396">y5</a></span><span class="op" id="5099878">)</span>&nbsp;<span class="op" id="5099880">+</span>&nbsp;<span class="num" id="5099882">128</span><span class="op" id="5099885">)</span>&nbsp;<span class="op" id="5099887">&gt;&gt;</span>&nbsp;<span class="num" id="5099890">8</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099894"><a href="/gostd/image/jpeg/idct.go.html#5099377">y4</a></span>&nbsp;<span class="op" id="5099897">=</span>&nbsp;<span class="op" id="5099899">(</span><span class="ident" id="5099900"><a href="/gostd/image/jpeg/idct.go.html#5097086">r2</a></span><span class="op" id="5099902">*</span><span class="op" id="5099903">(</span><span class="ident" id="5099904"><a href="/gostd/image/jpeg/idct.go.html#5099377">y4</a></span><span class="op" id="5099906">-</span><span class="ident" id="5099907"><a href="/gostd/image/jpeg/idct.go.html#5099396">y5</a></span><span class="op" id="5099909">)</span>&nbsp;<span class="op" id="5099911">+</span>&nbsp;<span class="num" id="5099913">128</span><span class="op" id="5099916">)</span>&nbsp;<span class="op" id="5099918">&gt;&gt;</span>&nbsp;<span class="num" id="5099921">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5099926">//&nbsp;Stage&nbsp;4.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099940"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5099943">[</span><span class="num" id="5099944">8</span><span class="op" id="5099945">*</span><span class="num" id="5099946">0</span><span class="op" id="5099947">+</span><span class="ident" id="5099948"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5099949">]</span>&nbsp;<span class="op" id="5099951">=</span>&nbsp;<span class="op" id="5099953">(</span><span class="ident" id="5099954"><a href="/gostd/image/jpeg/idct.go.html#5099434">y7</a></span>&nbsp;<span class="op" id="5099957">+</span>&nbsp;<span class="ident" id="5099959"><a href="/gostd/image/jpeg/idct.go.html#5099315">y1</a></span><span class="op" id="5099961">)</span>&nbsp;<span class="op" id="5099963">&gt;&gt;</span>&nbsp;<span class="num" id="5099966">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5099971"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5099974">[</span><span class="num" id="5099975">8</span><span class="op" id="5099976">*</span><span class="num" id="5099977">1</span><span class="op" id="5099978">+</span><span class="ident" id="5099979"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5099980">]</span>&nbsp;<span class="op" id="5099982">=</span>&nbsp;<span class="op" id="5099984">(</span><span class="ident" id="5099985"><a href="/gostd/image/jpeg/idct.go.html#5099358">y3</a></span>&nbsp;<span class="op" id="5099988">+</span>&nbsp;<span class="ident" id="5099990"><a href="/gostd/image/jpeg/idct.go.html#5099339">y2</a></span><span class="op" id="5099992">)</span>&nbsp;<span class="op" id="5099994">&gt;&gt;</span>&nbsp;<span class="num" id="5099997">14</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100002"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5100005">[</span><span class="num" id="5100006">8</span><span class="op" id="5100007">*</span><span class="num" id="5100008">2</span><span class="op" id="5100009">+</span><span class="ident" id="5100010"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5100011">]</span>&nbsp;<span class="op" id="5100013">=</span>&nbsp;<span class="op" id="5100015">(</span><span class="ident" id="5100016"><a href="/gostd/image/jpeg/idct.go.html#5099282">y0</a></span>&nbsp;<span class="op" id="5100019">+</span>&nbsp;<span class="ident" id="5100021"><a href="/gostd/image/jpeg/idct.go.html#5099377">y4</a></span><span class="op" id="5100023">)</span>&nbsp;<span class="op" id="5100025">&gt;&gt;</span>&nbsp;<span class="num" id="5100028">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100033"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5100036">[</span><span class="num" id="5100037">8</span><span class="op" id="5100038">*</span><span class="num" id="5100039">3</span><span class="op" id="5100040">+</span><span class="ident" id="5100041"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5100042">]</span>&nbsp;<span class="op" id="5100044">=</span>&nbsp;<span class="op" id="5100046">(</span><span class="ident" id="5100047"><a href="/gostd/image/jpeg/idct.go.html#5099468">y8</a></span>&nbsp;<span class="op" id="5100050">+</span>&nbsp;<span class="ident" id="5100052"><a href="/gostd/image/jpeg/idct.go.html#5099415">y6</a></span><span class="op" id="5100054">)</span>&nbsp;<span class="op" id="5100056">&gt;&gt;</span>&nbsp;<span class="num" id="5100059">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100064"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5100067">[</span><span class="num" id="5100068">8</span><span class="op" id="5100069">*</span><span class="num" id="5100070">4</span><span class="op" id="5100071">+</span><span class="ident" id="5100072"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5100073">]</span>&nbsp;<span class="op" id="5100075">=</span>&nbsp;<span class="op" id="5100077">(</span><span class="ident" id="5100078"><a href="/gostd/image/jpeg/idct.go.html#5099468">y8</a></span>&nbsp;<span class="op" id="5100081">-</span>&nbsp;<span class="ident" id="5100083"><a href="/gostd/image/jpeg/idct.go.html#5099415">y6</a></span><span class="op" id="5100085">)</span>&nbsp;<span class="op" id="5100087">&gt;&gt;</span>&nbsp;<span class="num" id="5100090">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100095"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5100098">[</span><span class="num" id="5100099">8</span><span class="op" id="5100100">*</span><span class="num" id="5100101">5</span><span class="op" id="5100102">+</span><span class="ident" id="5100103"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5100104">]</span>&nbsp;<span class="op" id="5100106">=</span>&nbsp;<span class="op" id="5100108">(</span><span class="ident" id="5100109"><a href="/gostd/image/jpeg/idct.go.html#5099282">y0</a></span>&nbsp;<span class="op" id="5100112">-</span>&nbsp;<span class="ident" id="5100114"><a href="/gostd/image/jpeg/idct.go.html#5099377">y4</a></span><span class="op" id="5100116">)</span>&nbsp;<span class="op" id="5100118">&gt;&gt;</span>&nbsp;<span class="num" id="5100121">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100126"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5100129">[</span><span class="num" id="5100130">8</span><span class="op" id="5100131">*</span><span class="num" id="5100132">6</span><span class="op" id="5100133">+</span><span class="ident" id="5100134"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5100135">]</span>&nbsp;<span class="op" id="5100137">=</span>&nbsp;<span class="op" id="5100139">(</span><span class="ident" id="5100140"><a href="/gostd/image/jpeg/idct.go.html#5099358">y3</a></span>&nbsp;<span class="op" id="5100143">-</span>&nbsp;<span class="ident" id="5100145"><a href="/gostd/image/jpeg/idct.go.html#5099339">y2</a></span><span class="op" id="5100147">)</span>&nbsp;<span class="op" id="5100149">&gt;&gt;</span>&nbsp;<span class="num" id="5100152">14</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5100157"><a href="/gostd/image/jpeg/idct.go.html#5097628">src</a></span><span class="op" id="5100160">[</span><span class="num" id="5100161">8</span><span class="op" id="5100162">*</span><span class="num" id="5100163">7</span><span class="op" id="5100164">+</span><span class="ident" id="5100165"><a href="/gostd/image/jpeg/idct.go.html#5098979">x</a></span><span class="op" id="5100166">]</span>&nbsp;<span class="op" id="5100168">=</span>&nbsp;<span class="op" id="5100170">(</span><span class="ident" id="5100171"><a href="/gostd/image/jpeg/idct.go.html#5099434">y7</a></span>&nbsp;<span class="op" id="5100174">-</span>&nbsp;<span class="ident" id="5100176"><a href="/gostd/image/jpeg/idct.go.html#5099315">y1</a></span><span class="op" id="5100178">)</span>&nbsp;<span class="op" id="5100180">&gt;&gt;</span>&nbsp;<span class="num" id="5100183">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5100187">}</span><br>
<span class="lineno"></span><span class="op" id="5100189">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
