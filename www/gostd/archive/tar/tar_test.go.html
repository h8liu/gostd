<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>archive/tar</h2>
<ul>
<li><a href="/gostd/archive/tar/common.go.html">common.go</a></li>
<li><a href="/gostd/archive/tar/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/archive/tar/reader.go.html">reader.go</a></li>
<li><a href="/gostd/archive/tar/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/archive/tar/stat_atim.go.html">stat_atim.go</a></li>
<li><a href="/gostd/archive/tar/stat_unix.go.html">stat_unix.go</a></li>
<li><a href="/gostd/archive/tar/tar_test.go.html">tar_test.go</a></li>
<li><a href="/gostd/archive/tar/writer.go.html">writer.go</a></li>
<li><a href="/gostd/archive/tar/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7119114">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7119169">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7119223">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7119274">package</span>&nbsp;<span class="ident" id="7119282">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7119287">import</span>&nbsp;<span class="op" id="7119294">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7119297">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7119306">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7119319">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7119325">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7119333">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7119344">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7119355">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7119366">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7119373">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7119376">func</span>&nbsp;<span class="ident" id="7119381">TestFileInfoHeader</span><span class="op" id="7119399">(</span><span class="ident" id="7119400">t</span>&nbsp;<span class="op" id="7119402">*</span><span class="ident" id="7119403">testing</span><span class="op" id="7119410">.</span><span class="ident" id="7119411">T</span><span class="op" id="7119412">)</span>&nbsp;<span class="op" id="7119414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7119417">fi</span><span class="op" id="7119419">,</span>&nbsp;<span class="ident" id="7119421">err</span>&nbsp;<span class="op" id="7119425">:=</span>&nbsp;<span class="ident" id="7119428">os</span><span class="op" id="7119430">.</span><span class="ident" id="7119431">Stat</span><span class="op" id="7119435">(</span><span class="string" id="7119436">&#34;testdata/small.txt&#34;</span><span class="op" id="7119456">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7119459">if</span>&nbsp;<span class="ident" id="7119462">err</span>&nbsp;<span class="op" id="7119466">!=</span>&nbsp;<span class="ident" id="7119469">nil</span>&nbsp;<span class="op" id="7119473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7119477">t</span><span class="op" id="7119478">.</span><span class="ident" id="7119479">Fatal</span><span class="op" id="7119484">(</span><span class="ident" id="7119485">err</span><span class="op" id="7119488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7119491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7119494">h</span><span class="op" id="7119495">,</span>&nbsp;<span class="ident" id="7119497">err</span>&nbsp;<span class="op" id="7119501">:=</span>&nbsp;<span class="ident" id="7119504">FileInfoHeader</span><span class="op" id="7119518">(</span><span class="ident" id="7119519">fi</span><span class="op" id="7119521">,</span>&nbsp;<span class="string" id="7119523">&#34;&#34;</span><span class="op" id="7119525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7119528">if</span>&nbsp;<span class="ident" id="7119531">err</span>&nbsp;<span class="op" id="7119535">!=</span>&nbsp;<span class="ident" id="7119538">nil</span>&nbsp;<span class="op" id="7119542">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7119546">t</span><span class="op" id="7119547">.</span><span class="ident" id="7119548">Fatalf</span><span class="op" id="7119554">(</span><span class="string" id="7119555">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="7119575">,</span>&nbsp;<span class="ident" id="7119577">err</span><span class="op" id="7119580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7119583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7119586">if</span>&nbsp;<span class="ident" id="7119589">g</span><span class="op" id="7119590">,</span>&nbsp;<span class="ident" id="7119592">e</span>&nbsp;<span class="op" id="7119594">:=</span>&nbsp;<span class="ident" id="7119597">h</span><span class="op" id="7119598">.</span><span class="ident" id="7119599">Name</span><span class="op" id="7119603">,</span>&nbsp;<span class="string" id="7119605">&#34;small.txt&#34;</span><span class="op" id="7119616">;</span>&nbsp;<span class="ident" id="7119618">g</span>&nbsp;<span class="op" id="7119620">!=</span>&nbsp;<span class="ident" id="7119623">e</span>&nbsp;<span class="op" id="7119625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7119629">t</span><span class="op" id="7119630">.</span><span class="ident" id="7119631">Errorf</span><span class="op" id="7119637">(</span><span class="string" id="7119638">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7119658">,</span>&nbsp;<span class="ident" id="7119660">g</span><span class="op" id="7119661">,</span>&nbsp;<span class="ident" id="7119663">e</span><span class="op" id="7119664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7119667">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7119670">if</span>&nbsp;<span class="ident" id="7119673">g</span><span class="op" id="7119674">,</span>&nbsp;<span class="ident" id="7119676">e</span>&nbsp;<span class="op" id="7119678">:=</span>&nbsp;<span class="ident" id="7119681">h</span><span class="op" id="7119682">.</span><span class="ident" id="7119683">Mode</span><span class="op" id="7119687">,</span>&nbsp;<span class="ident" id="7119689">int64</span><span class="op" id="7119694">(</span><span class="ident" id="7119695">fi</span><span class="op" id="7119697">.</span><span class="ident" id="7119698">Mode</span><span class="op" id="7119702">(</span><span class="op" id="7119703">)</span><span class="op" id="7119704">.</span><span class="ident" id="7119705">Perm</span><span class="op" id="7119709">(</span><span class="op" id="7119710">)</span><span class="op" id="7119711">)</span><span class="op" id="7119712">|</span><span class="ident" id="7119713">c_ISREG</span><span class="op" id="7119720">;</span>&nbsp;<span class="ident" id="7119722">g</span>&nbsp;<span class="op" id="7119724">!=</span>&nbsp;<span class="ident" id="7119727">e</span>&nbsp;<span class="op" id="7119729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7119733">t</span><span class="op" id="7119734">.</span><span class="ident" id="7119735">Errorf</span><span class="op" id="7119741">(</span><span class="string" id="7119742">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="7119764">,</span>&nbsp;<span class="ident" id="7119766">g</span><span class="op" id="7119767">,</span>&nbsp;<span class="ident" id="7119769">e</span><span class="op" id="7119770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7119773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7119776">if</span>&nbsp;<span class="ident" id="7119779">g</span><span class="op" id="7119780">,</span>&nbsp;<span class="ident" id="7119782">e</span>&nbsp;<span class="op" id="7119784">:=</span>&nbsp;<span class="ident" id="7119787">h</span><span class="op" id="7119788">.</span><span class="ident" id="7119789">Size</span><span class="op" id="7119793">,</span>&nbsp;<span class="ident" id="7119795">int64</span><span class="op" id="7119800">(</span><span class="num" id="7119801">5</span><span class="op" id="7119802">)</span><span class="op" id="7119803">;</span>&nbsp;<span class="ident" id="7119805">g</span>&nbsp;<span class="op" id="7119807">!=</span>&nbsp;<span class="ident" id="7119810">e</span>&nbsp;<span class="op" id="7119812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7119816">t</span><span class="op" id="7119817">.</span><span class="ident" id="7119818">Errorf</span><span class="op" id="7119824">(</span><span class="string" id="7119825">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7119845">,</span>&nbsp;<span class="ident" id="7119847">g</span><span class="op" id="7119848">,</span>&nbsp;<span class="ident" id="7119850">e</span><span class="op" id="7119851">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7119854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7119857">if</span>&nbsp;<span class="ident" id="7119860">g</span><span class="op" id="7119861">,</span>&nbsp;<span class="ident" id="7119863">e</span>&nbsp;<span class="op" id="7119865">:=</span>&nbsp;<span class="ident" id="7119868">h</span><span class="op" id="7119869">.</span><span class="ident" id="7119870">ModTime</span><span class="op" id="7119877">,</span>&nbsp;<span class="ident" id="7119879">fi</span><span class="op" id="7119881">.</span><span class="ident" id="7119882">ModTime</span><span class="op" id="7119889">(</span><span class="op" id="7119890">)</span><span class="op" id="7119891">;</span>&nbsp;<span class="op" id="7119893">!</span><span class="ident" id="7119894">g</span><span class="op" id="7119895">.</span><span class="ident" id="7119896">Equal</span><span class="op" id="7119901">(</span><span class="ident" id="7119902">e</span><span class="op" id="7119903">)</span>&nbsp;<span class="op" id="7119905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7119909">t</span><span class="op" id="7119910">.</span><span class="ident" id="7119911">Errorf</span><span class="op" id="7119917">(</span><span class="string" id="7119918">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7119941">,</span>&nbsp;<span class="ident" id="7119943">g</span><span class="op" id="7119944">,</span>&nbsp;<span class="ident" id="7119946">e</span><span class="op" id="7119947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7119950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7119953">//&nbsp;FileInfoHeader&nbsp;should&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;FileInfo</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7120011">if</span>&nbsp;<span class="ident" id="7120014">_</span><span class="op" id="7120015">,</span>&nbsp;<span class="ident" id="7120017">err</span>&nbsp;<span class="op" id="7120021">:=</span>&nbsp;<span class="ident" id="7120024">FileInfoHeader</span><span class="op" id="7120038">(</span><span class="ident" id="7120039">nil</span><span class="op" id="7120042">,</span>&nbsp;<span class="string" id="7120044">&#34;&#34;</span><span class="op" id="7120046">)</span><span class="op" id="7120047">;</span>&nbsp;<span class="ident" id="7120049">err</span>&nbsp;<span class="op" id="7120053">==</span>&nbsp;<span class="ident" id="7120056">nil</span>&nbsp;<span class="op" id="7120060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120064">t</span><span class="op" id="7120065">.</span><span class="ident" id="7120066">Fatalf</span><span class="op" id="7120072">(</span><span class="string" id="7120073">&#34;Expected&nbsp;error&nbsp;when&nbsp;passing&nbsp;nil&nbsp;to&nbsp;FileInfoHeader&#34;</span><span class="op" id="7120124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7120127">}</span><br>
<span class="lineno"></span><span class="op" id="7120129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="7120132">func</span>&nbsp;<span class="ident" id="7120137">TestFileInfoHeaderDir</span><span class="op" id="7120158">(</span><span class="ident" id="7120159">t</span>&nbsp;<span class="op" id="7120161">*</span><span class="ident" id="7120162">testing</span><span class="op" id="7120169">.</span><span class="ident" id="7120170">T</span><span class="op" id="7120171">)</span>&nbsp;<span class="op" id="7120173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120176">fi</span><span class="op" id="7120178">,</span>&nbsp;<span class="ident" id="7120180">err</span>&nbsp;<span class="op" id="7120184">:=</span>&nbsp;<span class="ident" id="7120187">os</span><span class="op" id="7120189">.</span><span class="ident" id="7120190">Stat</span><span class="op" id="7120194">(</span><span class="string" id="7120195">&#34;testdata&#34;</span><span class="op" id="7120205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7120208">if</span>&nbsp;<span class="ident" id="7120211">err</span>&nbsp;<span class="op" id="7120215">!=</span>&nbsp;<span class="ident" id="7120218">nil</span>&nbsp;<span class="op" id="7120222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120226">t</span><span class="op" id="7120227">.</span><span class="ident" id="7120228">Fatal</span><span class="op" id="7120233">(</span><span class="ident" id="7120234">err</span><span class="op" id="7120237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7120240">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120243">h</span><span class="op" id="7120244">,</span>&nbsp;<span class="ident" id="7120246">err</span>&nbsp;<span class="op" id="7120250">:=</span>&nbsp;<span class="ident" id="7120253">FileInfoHeader</span><span class="op" id="7120267">(</span><span class="ident" id="7120268">fi</span><span class="op" id="7120270">,</span>&nbsp;<span class="string" id="7120272">&#34;&#34;</span><span class="op" id="7120274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7120277">if</span>&nbsp;<span class="ident" id="7120280">err</span>&nbsp;<span class="op" id="7120284">!=</span>&nbsp;<span class="ident" id="7120287">nil</span>&nbsp;<span class="op" id="7120291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120295">t</span><span class="op" id="7120296">.</span><span class="ident" id="7120297">Fatalf</span><span class="op" id="7120303">(</span><span class="string" id="7120304">&#34;FileInfoHeader:&nbsp;%v&#34;</span><span class="op" id="7120324">,</span>&nbsp;<span class="ident" id="7120326">err</span><span class="op" id="7120329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7120332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7120335">if</span>&nbsp;<span class="ident" id="7120338">g</span><span class="op" id="7120339">,</span>&nbsp;<span class="ident" id="7120341">e</span>&nbsp;<span class="op" id="7120343">:=</span>&nbsp;<span class="ident" id="7120346">h</span><span class="op" id="7120347">.</span><span class="ident" id="7120348">Name</span><span class="op" id="7120352">,</span>&nbsp;<span class="string" id="7120354">&#34;testdata/&#34;</span><span class="op" id="7120365">;</span>&nbsp;<span class="ident" id="7120367">g</span>&nbsp;<span class="op" id="7120369">!=</span>&nbsp;<span class="ident" id="7120372">e</span>&nbsp;<span class="op" id="7120374">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120378">t</span><span class="op" id="7120379">.</span><span class="ident" id="7120380">Errorf</span><span class="op" id="7120386">(</span><span class="string" id="7120387">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7120407">,</span>&nbsp;<span class="ident" id="7120409">g</span><span class="op" id="7120410">,</span>&nbsp;<span class="ident" id="7120412">e</span><span class="op" id="7120413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7120416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7120419">//&nbsp;Ignoring&nbsp;c_ISGID&nbsp;for&nbsp;golang.org/issue/4867</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7120466">if</span>&nbsp;<span class="ident" id="7120469">g</span><span class="op" id="7120470">,</span>&nbsp;<span class="ident" id="7120472">e</span>&nbsp;<span class="op" id="7120474">:=</span>&nbsp;<span class="ident" id="7120477">h</span><span class="op" id="7120478">.</span><span class="ident" id="7120479">Mode</span><span class="op" id="7120483">&amp;^</span><span class="ident" id="7120485">c_ISGID</span><span class="op" id="7120492">,</span>&nbsp;<span class="ident" id="7120494">int64</span><span class="op" id="7120499">(</span><span class="ident" id="7120500">fi</span><span class="op" id="7120502">.</span><span class="ident" id="7120503">Mode</span><span class="op" id="7120507">(</span><span class="op" id="7120508">)</span><span class="op" id="7120509">.</span><span class="ident" id="7120510">Perm</span><span class="op" id="7120514">(</span><span class="op" id="7120515">)</span><span class="op" id="7120516">)</span><span class="op" id="7120517">|</span><span class="ident" id="7120518">c_ISDIR</span><span class="op" id="7120525">;</span>&nbsp;<span class="ident" id="7120527">g</span>&nbsp;<span class="op" id="7120529">!=</span>&nbsp;<span class="ident" id="7120532">e</span>&nbsp;<span class="op" id="7120534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120538">t</span><span class="op" id="7120539">.</span><span class="ident" id="7120540">Errorf</span><span class="op" id="7120546">(</span><span class="string" id="7120547">&#34;Mode&nbsp;=&nbsp;%#o;&nbsp;want&nbsp;%#o&#34;</span><span class="op" id="7120569">,</span>&nbsp;<span class="ident" id="7120571">g</span><span class="op" id="7120572">,</span>&nbsp;<span class="ident" id="7120574">e</span><span class="op" id="7120575">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7120578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7120581">if</span>&nbsp;<span class="ident" id="7120584">g</span><span class="op" id="7120585">,</span>&nbsp;<span class="ident" id="7120587">e</span>&nbsp;<span class="op" id="7120589">:=</span>&nbsp;<span class="ident" id="7120592">h</span><span class="op" id="7120593">.</span><span class="ident" id="7120594">Size</span><span class="op" id="7120598">,</span>&nbsp;<span class="ident" id="7120600">int64</span><span class="op" id="7120605">(</span><span class="num" id="7120606">0</span><span class="op" id="7120607">)</span><span class="op" id="7120608">;</span>&nbsp;<span class="ident" id="7120610">g</span>&nbsp;<span class="op" id="7120612">!=</span>&nbsp;<span class="ident" id="7120615">e</span>&nbsp;<span class="op" id="7120617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120621">t</span><span class="op" id="7120622">.</span><span class="ident" id="7120623">Errorf</span><span class="op" id="7120629">(</span><span class="string" id="7120630">&#34;Size&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7120650">,</span>&nbsp;<span class="ident" id="7120652">g</span><span class="op" id="7120653">,</span>&nbsp;<span class="ident" id="7120655">e</span><span class="op" id="7120656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7120659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7120662">if</span>&nbsp;<span class="ident" id="7120665">g</span><span class="op" id="7120666">,</span>&nbsp;<span class="ident" id="7120668">e</span>&nbsp;<span class="op" id="7120670">:=</span>&nbsp;<span class="ident" id="7120673">h</span><span class="op" id="7120674">.</span><span class="ident" id="7120675">ModTime</span><span class="op" id="7120682">,</span>&nbsp;<span class="ident" id="7120684">fi</span><span class="op" id="7120686">.</span><span class="ident" id="7120687">ModTime</span><span class="op" id="7120694">(</span><span class="op" id="7120695">)</span><span class="op" id="7120696">;</span>&nbsp;<span class="op" id="7120698">!</span><span class="ident" id="7120699">g</span><span class="op" id="7120700">.</span><span class="ident" id="7120701">Equal</span><span class="op" id="7120706">(</span><span class="ident" id="7120707">e</span><span class="op" id="7120708">)</span>&nbsp;<span class="op" id="7120710">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120714">t</span><span class="op" id="7120715">.</span><span class="ident" id="7120716">Errorf</span><span class="op" id="7120722">(</span><span class="string" id="7120723">&#34;ModTime&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7120746">,</span>&nbsp;<span class="ident" id="7120748">g</span><span class="op" id="7120749">,</span>&nbsp;<span class="ident" id="7120751">e</span><span class="op" id="7120752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7120755">}</span><br>
<span class="lineno"></span><span class="op" id="7120757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7120760">func</span>&nbsp;<span class="ident" id="7120765">TestFileInfoHeaderSymlink</span><span class="op" id="7120790">(</span><span class="ident" id="7120791">t</span>&nbsp;<span class="op" id="7120793">*</span><span class="ident" id="7120794">testing</span><span class="op" id="7120801">.</span><span class="ident" id="7120802">T</span><span class="op" id="7120803">)</span>&nbsp;<span class="op" id="7120805">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120808">h</span><span class="op" id="7120809">,</span>&nbsp;<span class="ident" id="7120811">err</span>&nbsp;<span class="op" id="7120815">:=</span>&nbsp;<span class="ident" id="7120818">FileInfoHeader</span><span class="op" id="7120832">(</span><span class="ident" id="7120833">symlink</span><span class="op" id="7120840">{</span><span class="op" id="7120841">}</span><span class="op" id="7120842">,</span>&nbsp;<span class="string" id="7120844">&#34;some-target&#34;</span><span class="op" id="7120857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7120860">if</span>&nbsp;<span class="ident" id="7120863">err</span>&nbsp;<span class="op" id="7120867">!=</span>&nbsp;<span class="ident" id="7120870">nil</span>&nbsp;<span class="op" id="7120874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120878">t</span><span class="op" id="7120879">.</span><span class="ident" id="7120880">Fatal</span><span class="op" id="7120885">(</span><span class="ident" id="7120886">err</span><span class="op" id="7120889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7120892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7120895">if</span>&nbsp;<span class="ident" id="7120898">g</span><span class="op" id="7120899">,</span>&nbsp;<span class="ident" id="7120901">e</span>&nbsp;<span class="op" id="7120903">:=</span>&nbsp;<span class="ident" id="7120906">h</span><span class="op" id="7120907">.</span><span class="ident" id="7120908">Name</span><span class="op" id="7120912">,</span>&nbsp;<span class="string" id="7120914">&#34;some-symlink&#34;</span><span class="op" id="7120928">;</span>&nbsp;<span class="ident" id="7120930">g</span>&nbsp;<span class="op" id="7120932">!=</span>&nbsp;<span class="ident" id="7120935">e</span>&nbsp;<span class="op" id="7120937">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7120941">t</span><span class="op" id="7120942">.</span><span class="ident" id="7120943">Errorf</span><span class="op" id="7120949">(</span><span class="string" id="7120950">&#34;Name&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7120970">,</span>&nbsp;<span class="ident" id="7120972">g</span><span class="op" id="7120973">,</span>&nbsp;<span class="ident" id="7120975">e</span><span class="op" id="7120976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7120979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7120982">if</span>&nbsp;<span class="ident" id="7120985">g</span><span class="op" id="7120986">,</span>&nbsp;<span class="ident" id="7120988">e</span>&nbsp;<span class="op" id="7120990">:=</span>&nbsp;<span class="ident" id="7120993">h</span><span class="op" id="7120994">.</span><span class="ident" id="7120995">Linkname</span><span class="op" id="7121003">,</span>&nbsp;<span class="string" id="7121005">&#34;some-target&#34;</span><span class="op" id="7121018">;</span>&nbsp;<span class="ident" id="7121020">g</span>&nbsp;<span class="op" id="7121022">!=</span>&nbsp;<span class="ident" id="7121025">e</span>&nbsp;<span class="op" id="7121027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121031">t</span><span class="op" id="7121032">.</span><span class="ident" id="7121033">Errorf</span><span class="op" id="7121039">(</span><span class="string" id="7121040">&#34;Linkname&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7121064">,</span>&nbsp;<span class="ident" id="7121066">g</span><span class="op" id="7121067">,</span>&nbsp;<span class="ident" id="7121069">e</span><span class="op" id="7121070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7121073">}</span><br>
<span class="lineno">80</span><span class="op" id="7121075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7121078">type</span>&nbsp;<span class="ident" id="7121083">symlink</span>&nbsp;<span class="keyword" id="7121091">struct</span><span class="op" id="7121097">{</span><span class="op" id="7121098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7121101">func</span>&nbsp;<span class="op" id="7121106">(</span><span class="ident" id="7121107">symlink</span><span class="op" id="7121114">)</span>&nbsp;<span class="ident" id="7121116">Name</span><span class="op" id="7121120">(</span><span class="op" id="7121121">)</span>&nbsp;<span class="builtintype" id="7121123">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7121136">{</span>&nbsp;<span class="keyword" id="7121138">return</span>&nbsp;<span class="string" id="7121145">&#34;some-symlink&#34;</span>&nbsp;<span class="op" id="7121160">}</span><br>
<span class="lineno">85</span><span class="keyword" id="7121162">func</span>&nbsp;<span class="op" id="7121167">(</span><span class="ident" id="7121168">symlink</span><span class="op" id="7121175">)</span>&nbsp;<span class="ident" id="7121177">Size</span><span class="op" id="7121181">(</span><span class="op" id="7121182">)</span>&nbsp;<span class="ident" id="7121184">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7121197">{</span>&nbsp;<span class="keyword" id="7121199">return</span>&nbsp;<span class="num" id="7121206">0</span>&nbsp;<span class="op" id="7121208">}</span><br>
<span class="lineno"></span><span class="keyword" id="7121210">func</span>&nbsp;<span class="op" id="7121215">(</span><span class="ident" id="7121216">symlink</span><span class="op" id="7121223">)</span>&nbsp;<span class="ident" id="7121225">Mode</span><span class="op" id="7121229">(</span><span class="op" id="7121230">)</span>&nbsp;<span class="ident" id="7121232">os</span><span class="op" id="7121234">.</span><span class="ident" id="7121235">FileMode</span>&nbsp;&nbsp;<span class="op" id="7121245">{</span>&nbsp;<span class="keyword" id="7121247">return</span>&nbsp;<span class="ident" id="7121254">os</span><span class="op" id="7121256">.</span><span class="ident" id="7121257">ModeSymlink</span>&nbsp;<span class="op" id="7121269">}</span><br>
<span class="lineno"></span><span class="keyword" id="7121271">func</span>&nbsp;<span class="op" id="7121276">(</span><span class="ident" id="7121277">symlink</span><span class="op" id="7121284">)</span>&nbsp;<span class="ident" id="7121286">ModTime</span><span class="op" id="7121293">(</span><span class="op" id="7121294">)</span>&nbsp;<span class="ident" id="7121296">time</span><span class="op" id="7121300">.</span><span class="ident" id="7121301">Time</span>&nbsp;<span class="op" id="7121306">{</span>&nbsp;<span class="keyword" id="7121308">return</span>&nbsp;<span class="ident" id="7121315">time</span><span class="op" id="7121319">.</span><span class="ident" id="7121320">Time</span><span class="op" id="7121324">{</span><span class="op" id="7121325">}</span>&nbsp;<span class="op" id="7121327">}</span><br>
<span class="lineno"></span><span class="keyword" id="7121329">func</span>&nbsp;<span class="op" id="7121334">(</span><span class="ident" id="7121335">symlink</span><span class="op" id="7121342">)</span>&nbsp;<span class="ident" id="7121344">IsDir</span><span class="op" id="7121349">(</span><span class="op" id="7121350">)</span>&nbsp;<span class="builtintype" id="7121352">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7121364">{</span>&nbsp;<span class="keyword" id="7121366">return</span>&nbsp;<span class="builtintype" id="7121373">false</span>&nbsp;<span class="op" id="7121379">}</span><br>
<span class="lineno"></span><span class="keyword" id="7121381">func</span>&nbsp;<span class="op" id="7121386">(</span><span class="ident" id="7121387">symlink</span><span class="op" id="7121394">)</span>&nbsp;<span class="ident" id="7121396">Sys</span><span class="op" id="7121399">(</span><span class="op" id="7121400">)</span>&nbsp;<span class="keyword" id="7121402">interface</span><span class="op" id="7121411">{</span><span class="op" id="7121412">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7121416">{</span>&nbsp;<span class="keyword" id="7121418">return</span>&nbsp;<span class="ident" id="7121425">nil</span>&nbsp;<span class="op" id="7121429">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="7121432">func</span>&nbsp;<span class="ident" id="7121437">TestRoundTrip</span><span class="op" id="7121450">(</span><span class="ident" id="7121451">t</span>&nbsp;<span class="op" id="7121453">*</span><span class="ident" id="7121454">testing</span><span class="op" id="7121461">.</span><span class="ident" id="7121462">T</span><span class="op" id="7121463">)</span>&nbsp;<span class="op" id="7121465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121468">data</span>&nbsp;<span class="op" id="7121473">:=</span>&nbsp;<span class="op" id="7121476">[</span><span class="op" id="7121477">]</span><span class="builtintype" id="7121478">byte</span><span class="op" id="7121482">(</span><span class="string" id="7121483">&#34;some&nbsp;file&nbsp;contents&#34;</span><span class="op" id="7121503">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7121507">var</span>&nbsp;<span class="ident" id="7121511">b</span>&nbsp;<span class="ident" id="7121513">bytes</span><span class="op" id="7121518">.</span><span class="ident" id="7121519">Buffer</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121527">tw</span>&nbsp;<span class="op" id="7121530">:=</span>&nbsp;<span class="ident" id="7121533">NewWriter</span><span class="op" id="7121542">(</span><span class="op" id="7121543">&amp;</span><span class="ident" id="7121544">b</span><span class="op" id="7121545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121548">hdr</span>&nbsp;<span class="op" id="7121552">:=</span>&nbsp;<span class="op" id="7121555">&amp;</span><span class="ident" id="7121556">Header</span><span class="op" id="7121562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121566">Name</span><span class="op" id="7121570">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7121575">&#34;file.txt&#34;</span><span class="op" id="7121585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121589">Uid</span><span class="op" id="7121592">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7121598">1</span>&nbsp;<span class="op" id="7121600">&lt;&lt;</span>&nbsp;<span class="num" id="7121603">21</span><span class="op" id="7121605">,</span>&nbsp;<span class="comment" id="7121607">//&nbsp;too&nbsp;big&nbsp;for&nbsp;8&nbsp;octal&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121639">Size</span><span class="op" id="7121643">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7121648">int64</span><span class="op" id="7121653">(</span><span class="builtinfunc" id="7121654">len</span><span class="op" id="7121657">(</span><span class="ident" id="7121658">data</span><span class="op" id="7121662">)</span><span class="op" id="7121663">)</span><span class="op" id="7121664">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121668">ModTime</span><span class="op" id="7121675">:</span>&nbsp;<span class="ident" id="7121677">time</span><span class="op" id="7121681">.</span><span class="ident" id="7121682">Now</span><span class="op" id="7121685">(</span><span class="op" id="7121686">)</span><span class="op" id="7121687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7121690">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7121693">//&nbsp;tar&nbsp;only&nbsp;supports&nbsp;second&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121733">hdr</span><span class="op" id="7121736">.</span><span class="ident" id="7121737">ModTime</span>&nbsp;<span class="op" id="7121745">=</span>&nbsp;<span class="ident" id="7121747">hdr</span><span class="op" id="7121750">.</span><span class="ident" id="7121751">ModTime</span><span class="op" id="7121758">.</span><span class="ident" id="7121759">Add</span><span class="op" id="7121762">(</span><span class="op" id="7121763">-</span><span class="ident" id="7121764">time</span><span class="op" id="7121768">.</span><span class="ident" id="7121769">Duration</span><span class="op" id="7121777">(</span><span class="ident" id="7121778">hdr</span><span class="op" id="7121781">.</span><span class="ident" id="7121782">ModTime</span><span class="op" id="7121789">.</span><span class="ident" id="7121790">Nanosecond</span><span class="op" id="7121800">(</span><span class="op" id="7121801">)</span><span class="op" id="7121802">)</span>&nbsp;<span class="op" id="7121804">*</span>&nbsp;<span class="ident" id="7121806">time</span><span class="op" id="7121810">.</span><span class="ident" id="7121811">Nanosecond</span><span class="op" id="7121821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7121824">if</span>&nbsp;<span class="ident" id="7121827">err</span>&nbsp;<span class="op" id="7121831">:=</span>&nbsp;<span class="ident" id="7121834">tw</span><span class="op" id="7121836">.</span><span class="ident" id="7121837">WriteHeader</span><span class="op" id="7121848">(</span><span class="ident" id="7121849">hdr</span><span class="op" id="7121852">)</span><span class="op" id="7121853">;</span>&nbsp;<span class="ident" id="7121855">err</span>&nbsp;<span class="op" id="7121859">!=</span>&nbsp;<span class="ident" id="7121862">nil</span>&nbsp;<span class="op" id="7121866">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121870">t</span><span class="op" id="7121871">.</span><span class="ident" id="7121872">Fatalf</span><span class="op" id="7121878">(</span><span class="string" id="7121879">&#34;tw.WriteHeader:&nbsp;%v&#34;</span><span class="op" id="7121899">,</span>&nbsp;<span class="ident" id="7121901">err</span><span class="op" id="7121904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7121907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7121910">if</span>&nbsp;<span class="ident" id="7121913">_</span><span class="op" id="7121914">,</span>&nbsp;<span class="ident" id="7121916">err</span>&nbsp;<span class="op" id="7121920">:=</span>&nbsp;<span class="ident" id="7121923">tw</span><span class="op" id="7121925">.</span><span class="ident" id="7121926">Write</span><span class="op" id="7121931">(</span><span class="ident" id="7121932">data</span><span class="op" id="7121936">)</span><span class="op" id="7121937">;</span>&nbsp;<span class="ident" id="7121939">err</span>&nbsp;<span class="op" id="7121943">!=</span>&nbsp;<span class="ident" id="7121946">nil</span>&nbsp;<span class="op" id="7121950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7121954">t</span><span class="op" id="7121955">.</span><span class="ident" id="7121956">Fatalf</span><span class="op" id="7121962">(</span><span class="string" id="7121963">&#34;tw.Write:&nbsp;%v&#34;</span><span class="op" id="7121977">,</span>&nbsp;<span class="ident" id="7121979">err</span><span class="op" id="7121982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7121985">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7121988">if</span>&nbsp;<span class="ident" id="7121991">err</span>&nbsp;<span class="op" id="7121995">:=</span>&nbsp;<span class="ident" id="7121998">tw</span><span class="op" id="7122000">.</span><span class="ident" id="7122001">Close</span><span class="op" id="7122006">(</span><span class="op" id="7122007">)</span><span class="op" id="7122008">;</span>&nbsp;<span class="ident" id="7122010">err</span>&nbsp;<span class="op" id="7122014">!=</span>&nbsp;<span class="ident" id="7122017">nil</span>&nbsp;<span class="op" id="7122021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122025">t</span><span class="op" id="7122026">.</span><span class="ident" id="7122027">Fatalf</span><span class="op" id="7122033">(</span><span class="string" id="7122034">&#34;tw.Close:&nbsp;%v&#34;</span><span class="op" id="7122048">,</span>&nbsp;<span class="ident" id="7122050">err</span><span class="op" id="7122053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7122060">//&nbsp;Read&nbsp;it&nbsp;back.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122078">tr</span>&nbsp;<span class="op" id="7122081">:=</span>&nbsp;<span class="ident" id="7122084">NewReader</span><span class="op" id="7122093">(</span><span class="op" id="7122094">&amp;</span><span class="ident" id="7122095">b</span><span class="op" id="7122096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122099">rHdr</span><span class="op" id="7122103">,</span>&nbsp;<span class="ident" id="7122105">err</span>&nbsp;<span class="op" id="7122109">:=</span>&nbsp;<span class="ident" id="7122112">tr</span><span class="op" id="7122114">.</span><span class="ident" id="7122115">Next</span><span class="op" id="7122119">(</span><span class="op" id="7122120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7122123">if</span>&nbsp;<span class="ident" id="7122126">err</span>&nbsp;<span class="op" id="7122130">!=</span>&nbsp;<span class="ident" id="7122133">nil</span>&nbsp;<span class="op" id="7122137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122141">t</span><span class="op" id="7122142">.</span><span class="ident" id="7122143">Fatalf</span><span class="op" id="7122149">(</span><span class="string" id="7122150">&#34;tr.Next:&nbsp;%v&#34;</span><span class="op" id="7122163">,</span>&nbsp;<span class="ident" id="7122165">err</span><span class="op" id="7122168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122171">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7122174">if</span>&nbsp;<span class="op" id="7122177">!</span><span class="ident" id="7122178">reflect</span><span class="op" id="7122185">.</span><span class="ident" id="7122186">DeepEqual</span><span class="op" id="7122195">(</span><span class="ident" id="7122196">rHdr</span><span class="op" id="7122200">,</span>&nbsp;<span class="ident" id="7122202">hdr</span><span class="op" id="7122205">)</span>&nbsp;<span class="op" id="7122207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122211">t</span><span class="op" id="7122212">.</span><span class="ident" id="7122213">Errorf</span><span class="op" id="7122219">(</span><span class="string" id="7122220">&#34;Header&nbsp;mismatch.\n&nbsp;got&nbsp;%+v\nwant&nbsp;%+v&#34;</span><span class="op" id="7122258">,</span>&nbsp;<span class="ident" id="7122260">rHdr</span><span class="op" id="7122264">,</span>&nbsp;<span class="ident" id="7122266">hdr</span><span class="op" id="7122269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122275">rData</span><span class="op" id="7122280">,</span>&nbsp;<span class="ident" id="7122282">err</span>&nbsp;<span class="op" id="7122286">:=</span>&nbsp;<span class="ident" id="7122289">ioutil</span><span class="op" id="7122295">.</span><span class="ident" id="7122296">ReadAll</span><span class="op" id="7122303">(</span><span class="ident" id="7122304">tr</span><span class="op" id="7122306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7122309">if</span>&nbsp;<span class="ident" id="7122312">err</span>&nbsp;<span class="op" id="7122316">!=</span>&nbsp;<span class="ident" id="7122319">nil</span>&nbsp;<span class="op" id="7122323">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122327">t</span><span class="op" id="7122328">.</span><span class="ident" id="7122329">Fatalf</span><span class="op" id="7122335">(</span><span class="string" id="7122336">&#34;Read:&nbsp;%v&#34;</span><span class="op" id="7122346">,</span>&nbsp;<span class="ident" id="7122348">err</span><span class="op" id="7122351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7122357">if</span>&nbsp;<span class="op" id="7122360">!</span><span class="ident" id="7122361">bytes</span><span class="op" id="7122366">.</span><span class="ident" id="7122367">Equal</span><span class="op" id="7122372">(</span><span class="ident" id="7122373">rData</span><span class="op" id="7122378">,</span>&nbsp;<span class="ident" id="7122380">data</span><span class="op" id="7122384">)</span>&nbsp;<span class="op" id="7122386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122390">t</span><span class="op" id="7122391">.</span><span class="ident" id="7122392">Errorf</span><span class="op" id="7122398">(</span><span class="string" id="7122399">&#34;Data&nbsp;mismatch.\n&nbsp;got&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="7122433">,</span>&nbsp;<span class="ident" id="7122435">rData</span><span class="op" id="7122440">,</span>&nbsp;<span class="ident" id="7122442">data</span><span class="op" id="7122446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122449">}</span><br>
<span class="lineno">130</span><span class="op" id="7122451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7122454">type</span>&nbsp;<span class="ident" id="7122459">headerRoundTripTest</span>&nbsp;<span class="keyword" id="7122479">struct</span>&nbsp;<span class="op" id="7122486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122489">h</span>&nbsp;&nbsp;<span class="op" id="7122492">*</span><span class="ident" id="7122493">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122501">fm</span>&nbsp;<span class="ident" id="7122504">os</span><span class="op" id="7122506">.</span><span class="ident" id="7122507">FileMode</span><br>
<span class="lineno">135</span><span class="op" id="7122516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7122519">func</span>&nbsp;<span class="ident" id="7122524">TestHeaderRoundTrip</span><span class="op" id="7122543">(</span><span class="ident" id="7122544">t</span>&nbsp;<span class="op" id="7122546">*</span><span class="ident" id="7122547">testing</span><span class="op" id="7122554">.</span><span class="ident" id="7122555">T</span><span class="op" id="7122556">)</span>&nbsp;<span class="op" id="7122558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122561">golden</span>&nbsp;<span class="op" id="7122568">:=</span>&nbsp;<span class="op" id="7122571">[</span><span class="op" id="7122572">]</span><span class="ident" id="7122573">headerRoundTripTest</span><span class="op" id="7122592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7122596">//&nbsp;regular&nbsp;file.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122620">h</span><span class="op" id="7122621">:</span>&nbsp;<span class="op" id="7122623">&amp;</span><span class="ident" id="7122624">Header</span><span class="op" id="7122630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122636">Name</span><span class="op" id="7122640">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7122646">&#34;test.txt&#34;</span><span class="op" id="7122656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122662">Mode</span><span class="op" id="7122666">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7122672">0644</span>&nbsp;<span class="op" id="7122677">|</span>&nbsp;<span class="ident" id="7122679">c_ISREG</span><span class="op" id="7122686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122692">Size</span><span class="op" id="7122696">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7122702">12</span><span class="op" id="7122704">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122710">ModTime</span><span class="op" id="7122717">:</span>&nbsp;&nbsp;<span class="ident" id="7122720">time</span><span class="op" id="7122724">.</span><span class="ident" id="7122725">Unix</span><span class="op" id="7122729">(</span><span class="num" id="7122730">1360600916</span><span class="op" id="7122740">,</span>&nbsp;<span class="num" id="7122742">0</span><span class="op" id="7122743">)</span><span class="op" id="7122744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122750">Typeflag</span><span class="op" id="7122758">:</span>&nbsp;<span class="ident" id="7122760">TypeReg</span><span class="op" id="7122767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122772">}</span><span class="op" id="7122773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122778">fm</span><span class="op" id="7122780">:</span>&nbsp;<span class="num" id="7122782">0644</span><span class="op" id="7122786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122790">}</span><span class="op" id="7122791">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7122795">//&nbsp;hard&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122816">h</span><span class="op" id="7122817">:</span>&nbsp;<span class="op" id="7122819">&amp;</span><span class="ident" id="7122820">Header</span><span class="op" id="7122826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122832">Name</span><span class="op" id="7122836">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7122842">&#34;hard.txt&#34;</span><span class="op" id="7122852">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122858">Mode</span><span class="op" id="7122862">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7122868">0644</span>&nbsp;<span class="op" id="7122873">|</span>&nbsp;<span class="ident" id="7122875">c_ISLNK</span><span class="op" id="7122882">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122888">Size</span><span class="op" id="7122892">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7122898">0</span><span class="op" id="7122899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122905">ModTime</span><span class="op" id="7122912">:</span>&nbsp;&nbsp;<span class="ident" id="7122915">time</span><span class="op" id="7122919">.</span><span class="ident" id="7122920">Unix</span><span class="op" id="7122924">(</span><span class="num" id="7122925">1360600916</span><span class="op" id="7122935">,</span>&nbsp;<span class="num" id="7122937">0</span><span class="op" id="7122938">)</span><span class="op" id="7122939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122945">Typeflag</span><span class="op" id="7122953">:</span>&nbsp;<span class="ident" id="7122955">TypeLink</span><span class="op" id="7122963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7122968">}</span><span class="op" id="7122969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7122974">fm</span><span class="op" id="7122976">:</span>&nbsp;<span class="num" id="7122978">0644</span>&nbsp;<span class="op" id="7122983">|</span>&nbsp;<span class="ident" id="7122985">os</span><span class="op" id="7122987">.</span><span class="ident" id="7122988">ModeSymlink</span><span class="op" id="7122999">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123003">}</span><span class="op" id="7123004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7123008">//&nbsp;symbolic&nbsp;link.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123033">h</span><span class="op" id="7123034">:</span>&nbsp;<span class="op" id="7123036">&amp;</span><span class="ident" id="7123037">Header</span><span class="op" id="7123043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123049">Name</span><span class="op" id="7123053">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7123059">&#34;link.txt&#34;</span><span class="op" id="7123069">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123075">Mode</span><span class="op" id="7123079">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7123085">0777</span>&nbsp;<span class="op" id="7123090">|</span>&nbsp;<span class="ident" id="7123092">c_ISLNK</span><span class="op" id="7123099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123105">Size</span><span class="op" id="7123109">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7123115">0</span><span class="op" id="7123116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123122">ModTime</span><span class="op" id="7123129">:</span>&nbsp;&nbsp;<span class="ident" id="7123132">time</span><span class="op" id="7123136">.</span><span class="ident" id="7123137">Unix</span><span class="op" id="7123141">(</span><span class="num" id="7123142">1360600852</span><span class="op" id="7123152">,</span>&nbsp;<span class="num" id="7123154">0</span><span class="op" id="7123155">)</span><span class="op" id="7123156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123162">Typeflag</span><span class="op" id="7123170">:</span>&nbsp;<span class="ident" id="7123172">TypeSymlink</span><span class="op" id="7123183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123188">}</span><span class="op" id="7123189">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123194">fm</span><span class="op" id="7123196">:</span>&nbsp;<span class="num" id="7123198">0777</span>&nbsp;<span class="op" id="7123203">|</span>&nbsp;<span class="ident" id="7123205">os</span><span class="op" id="7123207">.</span><span class="ident" id="7123208">ModeSymlink</span><span class="op" id="7123219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123223">}</span><span class="op" id="7123224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7123228">//&nbsp;character&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123261">h</span><span class="op" id="7123262">:</span>&nbsp;<span class="op" id="7123264">&amp;</span><span class="ident" id="7123265">Header</span><span class="op" id="7123271">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123277">Name</span><span class="op" id="7123281">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7123287">&#34;dev/null&#34;</span><span class="op" id="7123297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123303">Mode</span><span class="op" id="7123307">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7123313">0666</span>&nbsp;<span class="op" id="7123318">|</span>&nbsp;<span class="ident" id="7123320">c_ISCHR</span><span class="op" id="7123327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123333">Size</span><span class="op" id="7123337">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7123343">0</span><span class="op" id="7123344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123350">ModTime</span><span class="op" id="7123357">:</span>&nbsp;&nbsp;<span class="ident" id="7123360">time</span><span class="op" id="7123364">.</span><span class="ident" id="7123365">Unix</span><span class="op" id="7123369">(</span><span class="num" id="7123370">1360578951</span><span class="op" id="7123380">,</span>&nbsp;<span class="num" id="7123382">0</span><span class="op" id="7123383">)</span><span class="op" id="7123384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123390">Typeflag</span><span class="op" id="7123398">:</span>&nbsp;<span class="ident" id="7123400">TypeChar</span><span class="op" id="7123408">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123413">}</span><span class="op" id="7123414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123419">fm</span><span class="op" id="7123421">:</span>&nbsp;<span class="num" id="7123423">0666</span>&nbsp;<span class="op" id="7123428">|</span>&nbsp;<span class="ident" id="7123430">os</span><span class="op" id="7123432">.</span><span class="ident" id="7123433">ModeDevice</span>&nbsp;<span class="op" id="7123444">|</span>&nbsp;<span class="ident" id="7123446">os</span><span class="op" id="7123448">.</span><span class="ident" id="7123449">ModeCharDevice</span><span class="op" id="7123463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123467">}</span><span class="op" id="7123468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7123472">//&nbsp;block&nbsp;device&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123496">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123501">h</span><span class="op" id="7123502">:</span>&nbsp;<span class="op" id="7123504">&amp;</span><span class="ident" id="7123505">Header</span><span class="op" id="7123511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123517">Name</span><span class="op" id="7123521">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7123527">&#34;dev/sda&#34;</span><span class="op" id="7123536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123542">Mode</span><span class="op" id="7123546">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7123552">0660</span>&nbsp;<span class="op" id="7123557">|</span>&nbsp;<span class="ident" id="7123559">c_ISBLK</span><span class="op" id="7123566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123572">Size</span><span class="op" id="7123576">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7123582">0</span><span class="op" id="7123583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123589">ModTime</span><span class="op" id="7123596">:</span>&nbsp;&nbsp;<span class="ident" id="7123599">time</span><span class="op" id="7123603">.</span><span class="ident" id="7123604">Unix</span><span class="op" id="7123608">(</span><span class="num" id="7123609">1360578954</span><span class="op" id="7123619">,</span>&nbsp;<span class="num" id="7123621">0</span><span class="op" id="7123622">)</span><span class="op" id="7123623">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123629">Typeflag</span><span class="op" id="7123637">:</span>&nbsp;<span class="ident" id="7123639">TypeBlock</span><span class="op" id="7123648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123653">}</span><span class="op" id="7123654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123659">fm</span><span class="op" id="7123661">:</span>&nbsp;<span class="num" id="7123663">0660</span>&nbsp;<span class="op" id="7123668">|</span>&nbsp;<span class="ident" id="7123670">os</span><span class="op" id="7123672">.</span><span class="ident" id="7123673">ModeDevice</span><span class="op" id="7123683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123687">}</span><span class="op" id="7123688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7123692">//&nbsp;directory.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123713">h</span><span class="op" id="7123714">:</span>&nbsp;<span class="op" id="7123716">&amp;</span><span class="ident" id="7123717">Header</span><span class="op" id="7123723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123729">Name</span><span class="op" id="7123733">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7123739">&#34;dir/&#34;</span><span class="op" id="7123745">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123751">Mode</span><span class="op" id="7123755">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7123761">0755</span>&nbsp;<span class="op" id="7123766">|</span>&nbsp;<span class="ident" id="7123768">c_ISDIR</span><span class="op" id="7123775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123781">Size</span><span class="op" id="7123785">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7123791">0</span><span class="op" id="7123792">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123798">ModTime</span><span class="op" id="7123805">:</span>&nbsp;&nbsp;<span class="ident" id="7123808">time</span><span class="op" id="7123812">.</span><span class="ident" id="7123813">Unix</span><span class="op" id="7123817">(</span><span class="num" id="7123818">1360601116</span><span class="op" id="7123828">,</span>&nbsp;<span class="num" id="7123830">0</span><span class="op" id="7123831">)</span><span class="op" id="7123832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123838">Typeflag</span><span class="op" id="7123846">:</span>&nbsp;<span class="ident" id="7123848">TypeDir</span><span class="op" id="7123855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123860">}</span><span class="op" id="7123861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123866">fm</span><span class="op" id="7123868">:</span>&nbsp;<span class="num" id="7123870">0755</span>&nbsp;<span class="op" id="7123875">|</span>&nbsp;<span class="ident" id="7123877">os</span><span class="op" id="7123879">.</span><span class="ident" id="7123880">ModeDir</span><span class="op" id="7123887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123891">}</span><span class="op" id="7123892">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7123896">//&nbsp;fifo&nbsp;node.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7123912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123917">h</span><span class="op" id="7123918">:</span>&nbsp;<span class="op" id="7123920">&amp;</span><span class="ident" id="7123921">Header</span><span class="op" id="7123927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123933">Name</span><span class="op" id="7123937">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7123943">&#34;dev/initctl&#34;</span><span class="op" id="7123956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123962">Mode</span><span class="op" id="7123966">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7123972">0600</span>&nbsp;<span class="op" id="7123977">|</span>&nbsp;<span class="ident" id="7123979">c_ISFIFO</span><span class="op" id="7123987">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7123993">Size</span><span class="op" id="7123997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7124003">0</span><span class="op" id="7124004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124010">ModTime</span><span class="op" id="7124017">:</span>&nbsp;&nbsp;<span class="ident" id="7124020">time</span><span class="op" id="7124024">.</span><span class="ident" id="7124025">Unix</span><span class="op" id="7124029">(</span><span class="num" id="7124030">1360578949</span><span class="op" id="7124040">,</span>&nbsp;<span class="num" id="7124042">0</span><span class="op" id="7124043">)</span><span class="op" id="7124044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124050">Typeflag</span><span class="op" id="7124058">:</span>&nbsp;<span class="ident" id="7124060">TypeFifo</span><span class="op" id="7124068">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124073">}</span><span class="op" id="7124074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124079">fm</span><span class="op" id="7124081">:</span>&nbsp;<span class="num" id="7124083">0600</span>&nbsp;<span class="op" id="7124088">|</span>&nbsp;<span class="ident" id="7124090">os</span><span class="op" id="7124092">.</span><span class="ident" id="7124093">ModeNamedPipe</span><span class="op" id="7124106">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124110">}</span><span class="op" id="7124111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7124115">//&nbsp;setuid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124133">h</span><span class="op" id="7124134">:</span>&nbsp;<span class="op" id="7124136">&amp;</span><span class="ident" id="7124137">Header</span><span class="op" id="7124143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124149">Name</span><span class="op" id="7124153">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7124159">&#34;bin/su&#34;</span><span class="op" id="7124167">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124173">Mode</span><span class="op" id="7124177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7124183">0755</span>&nbsp;<span class="op" id="7124188">|</span>&nbsp;<span class="ident" id="7124190">c_ISREG</span>&nbsp;<span class="op" id="7124198">|</span>&nbsp;<span class="ident" id="7124200">c_ISUID</span><span class="op" id="7124207">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124213">Size</span><span class="op" id="7124217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7124223">23232</span><span class="op" id="7124228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124234">ModTime</span><span class="op" id="7124241">:</span>&nbsp;&nbsp;<span class="ident" id="7124244">time</span><span class="op" id="7124248">.</span><span class="ident" id="7124249">Unix</span><span class="op" id="7124253">(</span><span class="num" id="7124254">1355405093</span><span class="op" id="7124264">,</span>&nbsp;<span class="num" id="7124266">0</span><span class="op" id="7124267">)</span><span class="op" id="7124268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124274">Typeflag</span><span class="op" id="7124282">:</span>&nbsp;<span class="ident" id="7124284">TypeReg</span><span class="op" id="7124291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124296">}</span><span class="op" id="7124297">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124302">fm</span><span class="op" id="7124304">:</span>&nbsp;<span class="num" id="7124306">0755</span>&nbsp;<span class="op" id="7124311">|</span>&nbsp;<span class="ident" id="7124313">os</span><span class="op" id="7124315">.</span><span class="ident" id="7124316">ModeSetuid</span><span class="op" id="7124326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124330">}</span><span class="op" id="7124331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7124335">//&nbsp;setguid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124354">h</span><span class="op" id="7124355">:</span>&nbsp;<span class="op" id="7124357">&amp;</span><span class="ident" id="7124358">Header</span><span class="op" id="7124364">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124370">Name</span><span class="op" id="7124374">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7124380">&#34;group.txt&#34;</span><span class="op" id="7124391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124397">Mode</span><span class="op" id="7124401">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7124407">0750</span>&nbsp;<span class="op" id="7124412">|</span>&nbsp;<span class="ident" id="7124414">c_ISREG</span>&nbsp;<span class="op" id="7124422">|</span>&nbsp;<span class="ident" id="7124424">c_ISGID</span><span class="op" id="7124431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124437">Size</span><span class="op" id="7124441">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7124447">0</span><span class="op" id="7124448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124454">ModTime</span><span class="op" id="7124461">:</span>&nbsp;&nbsp;<span class="ident" id="7124464">time</span><span class="op" id="7124468">.</span><span class="ident" id="7124469">Unix</span><span class="op" id="7124473">(</span><span class="num" id="7124474">1360602346</span><span class="op" id="7124484">,</span>&nbsp;<span class="num" id="7124486">0</span><span class="op" id="7124487">)</span><span class="op" id="7124488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124494">Typeflag</span><span class="op" id="7124502">:</span>&nbsp;<span class="ident" id="7124504">TypeReg</span><span class="op" id="7124511">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124516">}</span><span class="op" id="7124517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124522">fm</span><span class="op" id="7124524">:</span>&nbsp;<span class="num" id="7124526">0750</span>&nbsp;<span class="op" id="7124531">|</span>&nbsp;<span class="ident" id="7124533">os</span><span class="op" id="7124535">.</span><span class="ident" id="7124536">ModeSetgid</span><span class="op" id="7124546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124550">}</span><span class="op" id="7124551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7124555">//&nbsp;sticky.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124568">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124573">h</span><span class="op" id="7124574">:</span>&nbsp;<span class="op" id="7124576">&amp;</span><span class="ident" id="7124577">Header</span><span class="op" id="7124583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124589">Name</span><span class="op" id="7124593">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7124599">&#34;sticky.txt&#34;</span><span class="op" id="7124611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124617">Mode</span><span class="op" id="7124621">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7124627">0600</span>&nbsp;<span class="op" id="7124632">|</span>&nbsp;<span class="ident" id="7124634">c_ISREG</span>&nbsp;<span class="op" id="7124642">|</span>&nbsp;<span class="ident" id="7124644">c_ISVTX</span><span class="op" id="7124651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124657">Size</span><span class="op" id="7124661">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7124667">7</span><span class="op" id="7124668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124674">ModTime</span><span class="op" id="7124681">:</span>&nbsp;&nbsp;<span class="ident" id="7124684">time</span><span class="op" id="7124688">.</span><span class="ident" id="7124689">Unix</span><span class="op" id="7124693">(</span><span class="num" id="7124694">1360602540</span><span class="op" id="7124704">,</span>&nbsp;<span class="num" id="7124706">0</span><span class="op" id="7124707">)</span><span class="op" id="7124708">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124714">Typeflag</span><span class="op" id="7124722">:</span>&nbsp;<span class="ident" id="7124724">TypeReg</span><span class="op" id="7124731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124736">}</span><span class="op" id="7124737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124742">fm</span><span class="op" id="7124744">:</span>&nbsp;<span class="num" id="7124746">0600</span>&nbsp;<span class="op" id="7124751">|</span>&nbsp;<span class="ident" id="7124753">os</span><span class="op" id="7124755">.</span><span class="ident" id="7124756">ModeSticky</span><span class="op" id="7124766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124770">}</span><span class="op" id="7124771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124774">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7124778">for</span>&nbsp;<span class="ident" id="7124782">i</span><span class="op" id="7124783">,</span>&nbsp;<span class="ident" id="7124785">g</span>&nbsp;<span class="op" id="7124787">:=</span>&nbsp;<span class="keyword" id="7124790">range</span>&nbsp;<span class="ident" id="7124796">golden</span>&nbsp;<span class="op" id="7124803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124807">fi</span>&nbsp;<span class="op" id="7124810">:=</span>&nbsp;<span class="ident" id="7124813">g</span><span class="op" id="7124814">.</span><span class="ident" id="7124815">h</span><span class="op" id="7124816">.</span><span class="ident" id="7124817">FileInfo</span><span class="op" id="7124825">(</span><span class="op" id="7124826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124830">h2</span><span class="op" id="7124832">,</span>&nbsp;<span class="ident" id="7124834">err</span>&nbsp;<span class="op" id="7124838">:=</span>&nbsp;<span class="ident" id="7124841">FileInfoHeader</span><span class="op" id="7124855">(</span><span class="ident" id="7124856">fi</span><span class="op" id="7124858">,</span>&nbsp;<span class="string" id="7124860">&#34;&#34;</span><span class="op" id="7124862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7124866">if</span>&nbsp;<span class="ident" id="7124869">err</span>&nbsp;<span class="op" id="7124873">!=</span>&nbsp;<span class="ident" id="7124876">nil</span>&nbsp;<span class="op" id="7124880">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124885">t</span><span class="op" id="7124886">.</span><span class="ident" id="7124887">Error</span><span class="op" id="7124892">(</span><span class="ident" id="7124893">err</span><span class="op" id="7124896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7124901">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7124912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7124916">if</span>&nbsp;<span class="ident" id="7124919">strings</span><span class="op" id="7124926">.</span><span class="ident" id="7124927">Contains</span><span class="op" id="7124935">(</span><span class="ident" id="7124936">fi</span><span class="op" id="7124938">.</span><span class="ident" id="7124939">Name</span><span class="op" id="7124943">(</span><span class="op" id="7124944">)</span><span class="op" id="7124945">,</span>&nbsp;<span class="string" id="7124947">&#34;/&#34;</span><span class="op" id="7124950">)</span>&nbsp;<span class="op" id="7124952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7124957">t</span><span class="op" id="7124958">.</span><span class="ident" id="7124959">Errorf</span><span class="op" id="7124965">(</span><span class="string" id="7124966">&#34;FileInfo&nbsp;of&nbsp;%q&nbsp;contains&nbsp;slash:&nbsp;%q&#34;</span><span class="op" id="7125001">,</span>&nbsp;<span class="ident" id="7125003">g</span><span class="op" id="7125004">.</span><span class="ident" id="7125005">h</span><span class="op" id="7125006">.</span><span class="ident" id="7125007">Name</span><span class="op" id="7125011">,</span>&nbsp;<span class="ident" id="7125013">fi</span><span class="op" id="7125015">.</span><span class="ident" id="7125016">Name</span><span class="op" id="7125020">(</span><span class="op" id="7125021">)</span><span class="op" id="7125022">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7125026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7125030">name</span>&nbsp;<span class="op" id="7125035">:=</span>&nbsp;<span class="ident" id="7125038">path</span><span class="op" id="7125042">.</span><span class="ident" id="7125043">Base</span><span class="op" id="7125047">(</span><span class="ident" id="7125048">g</span><span class="op" id="7125049">.</span><span class="ident" id="7125050">h</span><span class="op" id="7125051">.</span><span class="ident" id="7125052">Name</span><span class="op" id="7125056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7125060">if</span>&nbsp;<span class="ident" id="7125063">fi</span><span class="op" id="7125065">.</span><span class="ident" id="7125066">IsDir</span><span class="op" id="7125071">(</span><span class="op" id="7125072">)</span>&nbsp;<span class="op" id="7125074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7125079">name</span>&nbsp;<span class="op" id="7125084">+=</span>&nbsp;<span class="string" id="7125087">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7125093">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7125097">if</span>&nbsp;<span class="ident" id="7125100">got</span><span class="op" id="7125103">,</span>&nbsp;<span class="ident" id="7125105">want</span>&nbsp;<span class="op" id="7125110">:=</span>&nbsp;<span class="ident" id="7125113">h2</span><span class="op" id="7125115">.</span><span class="ident" id="7125116">Name</span><span class="op" id="7125120">,</span>&nbsp;<span class="ident" id="7125122">name</span><span class="op" id="7125126">;</span>&nbsp;<span class="ident" id="7125128">got</span>&nbsp;<span class="op" id="7125132">!=</span>&nbsp;<span class="ident" id="7125135">want</span>&nbsp;<span class="op" id="7125140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7125145">t</span><span class="op" id="7125146">.</span><span class="ident" id="7125147">Errorf</span><span class="op" id="7125153">(</span><span class="string" id="7125154">&#34;i=%d:&nbsp;Name:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7125183">,</span>&nbsp;<span class="ident" id="7125185">i</span><span class="op" id="7125186">,</span>&nbsp;<span class="ident" id="7125188">got</span><span class="op" id="7125191">,</span>&nbsp;<span class="ident" id="7125193">want</span><span class="op" id="7125197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7125201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7125205">if</span>&nbsp;<span class="ident" id="7125208">got</span><span class="op" id="7125211">,</span>&nbsp;<span class="ident" id="7125213">want</span>&nbsp;<span class="op" id="7125218">:=</span>&nbsp;<span class="ident" id="7125221">h2</span><span class="op" id="7125223">.</span><span class="ident" id="7125224">Size</span><span class="op" id="7125228">,</span>&nbsp;<span class="ident" id="7125230">g</span><span class="op" id="7125231">.</span><span class="ident" id="7125232">h</span><span class="op" id="7125233">.</span><span class="ident" id="7125234">Size</span><span class="op" id="7125238">;</span>&nbsp;<span class="ident" id="7125240">got</span>&nbsp;<span class="op" id="7125244">!=</span>&nbsp;<span class="ident" id="7125247">want</span>&nbsp;<span class="op" id="7125252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7125257">t</span><span class="op" id="7125258">.</span><span class="ident" id="7125259">Errorf</span><span class="op" id="7125265">(</span><span class="string" id="7125266">&#34;i=%d:&nbsp;Size:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7125295">,</span>&nbsp;<span class="ident" id="7125297">i</span><span class="op" id="7125298">,</span>&nbsp;<span class="ident" id="7125300">got</span><span class="op" id="7125303">,</span>&nbsp;<span class="ident" id="7125305">want</span><span class="op" id="7125309">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7125313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7125317">if</span>&nbsp;<span class="ident" id="7125320">got</span><span class="op" id="7125323">,</span>&nbsp;<span class="ident" id="7125325">want</span>&nbsp;<span class="op" id="7125330">:=</span>&nbsp;<span class="ident" id="7125333">h2</span><span class="op" id="7125335">.</span><span class="ident" id="7125336">Mode</span><span class="op" id="7125340">,</span>&nbsp;<span class="ident" id="7125342">g</span><span class="op" id="7125343">.</span><span class="ident" id="7125344">h</span><span class="op" id="7125345">.</span><span class="ident" id="7125346">Mode</span><span class="op" id="7125350">;</span>&nbsp;<span class="ident" id="7125352">got</span>&nbsp;<span class="op" id="7125356">!=</span>&nbsp;<span class="ident" id="7125359">want</span>&nbsp;<span class="op" id="7125364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7125369">t</span><span class="op" id="7125370">.</span><span class="ident" id="7125371">Errorf</span><span class="op" id="7125377">(</span><span class="string" id="7125378">&#34;i=%d:&nbsp;Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="7125407">,</span>&nbsp;<span class="ident" id="7125409">i</span><span class="op" id="7125410">,</span>&nbsp;<span class="ident" id="7125412">got</span><span class="op" id="7125415">,</span>&nbsp;<span class="ident" id="7125417">want</span><span class="op" id="7125421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7125425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7125429">if</span>&nbsp;<span class="ident" id="7125432">got</span><span class="op" id="7125435">,</span>&nbsp;<span class="ident" id="7125437">want</span>&nbsp;<span class="op" id="7125442">:=</span>&nbsp;<span class="ident" id="7125445">fi</span><span class="op" id="7125447">.</span><span class="ident" id="7125448">Mode</span><span class="op" id="7125452">(</span><span class="op" id="7125453">)</span><span class="op" id="7125454">,</span>&nbsp;<span class="ident" id="7125456">g</span><span class="op" id="7125457">.</span><span class="ident" id="7125458">fm</span><span class="op" id="7125460">;</span>&nbsp;<span class="ident" id="7125462">got</span>&nbsp;<span class="op" id="7125466">!=</span>&nbsp;<span class="ident" id="7125469">want</span>&nbsp;<span class="op" id="7125474">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7125479">t</span><span class="op" id="7125480">.</span><span class="ident" id="7125481">Errorf</span><span class="op" id="7125487">(</span><span class="string" id="7125488">&#34;i=%d:&nbsp;fi.Mode:&nbsp;got&nbsp;%o,&nbsp;want&nbsp;%o&#34;</span><span class="op" id="7125520">,</span>&nbsp;<span class="ident" id="7125522">i</span><span class="op" id="7125523">,</span>&nbsp;<span class="ident" id="7125525">got</span><span class="op" id="7125528">,</span>&nbsp;<span class="ident" id="7125530">want</span><span class="op" id="7125534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7125538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7125542">if</span>&nbsp;<span class="ident" id="7125545">got</span><span class="op" id="7125548">,</span>&nbsp;<span class="ident" id="7125550">want</span>&nbsp;<span class="op" id="7125555">:=</span>&nbsp;<span class="ident" id="7125558">h2</span><span class="op" id="7125560">.</span><span class="ident" id="7125561">ModTime</span><span class="op" id="7125568">,</span>&nbsp;<span class="ident" id="7125570">g</span><span class="op" id="7125571">.</span><span class="ident" id="7125572">h</span><span class="op" id="7125573">.</span><span class="ident" id="7125574">ModTime</span><span class="op" id="7125581">;</span>&nbsp;<span class="ident" id="7125583">got</span>&nbsp;<span class="op" id="7125587">!=</span>&nbsp;<span class="ident" id="7125590">want</span>&nbsp;<span class="op" id="7125595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7125600">t</span><span class="op" id="7125601">.</span><span class="ident" id="7125602">Errorf</span><span class="op" id="7125608">(</span><span class="string" id="7125609">&#34;i=%d:&nbsp;ModTime:&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7125641">,</span>&nbsp;<span class="ident" id="7125643">i</span><span class="op" id="7125644">,</span>&nbsp;<span class="ident" id="7125646">got</span><span class="op" id="7125649">,</span>&nbsp;<span class="ident" id="7125651">want</span><span class="op" id="7125655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7125659">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7125663">if</span>&nbsp;<span class="ident" id="7125666">sysh</span><span class="op" id="7125670">,</span>&nbsp;<span class="ident" id="7125672">ok</span>&nbsp;<span class="op" id="7125675">:=</span>&nbsp;<span class="ident" id="7125678">fi</span><span class="op" id="7125680">.</span><span class="ident" id="7125681">Sys</span><span class="op" id="7125684">(</span><span class="op" id="7125685">)</span><span class="op" id="7125686">.</span><span class="op" id="7125687">(</span><span class="op" id="7125688">*</span><span class="ident" id="7125689">Header</span><span class="op" id="7125695">)</span><span class="op" id="7125696">;</span>&nbsp;<span class="op" id="7125698">!</span><span class="ident" id="7125699">ok</span>&nbsp;<span class="op" id="7125702">||</span>&nbsp;<span class="ident" id="7125705">sysh</span>&nbsp;<span class="op" id="7125710">!=</span>&nbsp;<span class="ident" id="7125713">g</span><span class="op" id="7125714">.</span><span class="ident" id="7125715">h</span>&nbsp;<span class="op" id="7125717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7125722">t</span><span class="op" id="7125723">.</span><span class="ident" id="7125724">Errorf</span><span class="op" id="7125730">(</span><span class="string" id="7125731">&#34;i=%d:&nbsp;Sys&nbsp;didn&#39;t&nbsp;return&nbsp;original&nbsp;*Header&#34;</span><span class="op" id="7125773">,</span>&nbsp;<span class="ident" id="7125775">i</span><span class="op" id="7125776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7125780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7125783">}</span><br>
<span class="lineno"></span><span class="op" id="7125785">}</span>
</div>
</body>
</html>
