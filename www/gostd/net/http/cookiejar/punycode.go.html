<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html" class="current">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5479090">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5479145">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5479199">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5479250">package</span>&nbsp;<span class="ident" id="5479258">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5479269">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;the&nbsp;Punycode&nbsp;algorithm&nbsp;from&nbsp;RFC&nbsp;3492.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5479332">import</span>&nbsp;<span class="op" id="5479339">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5479342">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5479349">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5479360">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5479375">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5479378">//&nbsp;These&nbsp;parameter&nbsp;values&nbsp;are&nbsp;specified&nbsp;in&nbsp;section&nbsp;5.</span><br>
<span class="lineno"></span><span class="comment" id="5479432">//</span><br>
<span class="lineno"></span><span class="comment" id="5479435">//&nbsp;All&nbsp;computation&nbsp;is&nbsp;done&nbsp;with&nbsp;int32s,&nbsp;so&nbsp;that&nbsp;overflow&nbsp;behavior&nbsp;is&nbsp;identical</span><br>
<span class="lineno"></span><span class="comment" id="5479514">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;int&nbsp;is&nbsp;32-bit&nbsp;or&nbsp;64-bit.</span><br>
<span class="lineno"></span><span class="keyword" id="5479564">const</span>&nbsp;<span class="op" id="5479570">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479573">base</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5479585">int32</span>&nbsp;<span class="op" id="5479591">=</span>&nbsp;<span class="num" id="5479593">36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479597">damp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5479609">int32</span>&nbsp;<span class="op" id="5479615">=</span>&nbsp;<span class="num" id="5479617">700</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479622">initialBias</span>&nbsp;<span class="builtintype" id="5479634">int32</span>&nbsp;<span class="op" id="5479640">=</span>&nbsp;<span class="num" id="5479642">72</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479646">initialN</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5479658">int32</span>&nbsp;<span class="op" id="5479664">=</span>&nbsp;<span class="num" id="5479666">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479671">skew</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5479683">int32</span>&nbsp;<span class="op" id="5479689">=</span>&nbsp;<span class="num" id="5479691">38</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479695">tmax</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5479707">int32</span>&nbsp;<span class="op" id="5479713">=</span>&nbsp;<span class="num" id="5479715">26</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5479719">tmin</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5479731">int32</span>&nbsp;<span class="op" id="5479737">=</span>&nbsp;<span class="num" id="5479739">1</span><br>
<span class="lineno"></span><span class="op" id="5479741">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5479744">//&nbsp;encode&nbsp;encodes&nbsp;a&nbsp;string&nbsp;as&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.3&nbsp;and&nbsp;prepends&nbsp;prefix&nbsp;to</span><br>
<span class="lineno">30</span><span class="comment" id="5479822">//&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="comment" id="5479837">//</span><br>
<span class="lineno"></span><span class="comment" id="5479840">//&nbsp;The&nbsp;&#34;while&nbsp;h&nbsp;&lt;&nbsp;length(input)&#34;&nbsp;line&nbsp;in&nbsp;the&nbsp;specification&nbsp;becomes&nbsp;&#34;for</span><br>
<span class="lineno"></span><span class="comment" id="5479912">//&nbsp;remaining&nbsp;!=&nbsp;0&#34;&nbsp;in&nbsp;the&nbsp;Go&nbsp;code,&nbsp;because&nbsp;len(s)&nbsp;in&nbsp;Go&nbsp;is&nbsp;in&nbsp;bytes,&nbsp;not&nbsp;runes.</span><br>
<span class="lineno"></span><span class="keyword" id="5479992">func</span>&nbsp;<span class="ident" id="5479997">encode</span><span class="op" id="5480003">(</span><span class="ident" id="5480004">prefix</span><span class="op" id="5480010">,</span>&nbsp;<span class="ident" id="5480012">s</span>&nbsp;<span class="builtintype" id="5480014">string</span><span class="op" id="5480020">)</span>&nbsp;<span class="op" id="5480022">(</span><span class="builtintype" id="5480023">string</span><span class="op" id="5480029">,</span>&nbsp;<span class="builtintype" id="5480031">error</span><span class="op" id="5480036">)</span>&nbsp;<span class="op" id="5480038">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480041">output</span>&nbsp;<span class="op" id="5480048">:=</span>&nbsp;<span class="builtinfunc" id="5480051">make</span><span class="op" id="5480055">(</span><span class="op" id="5480056">[</span><span class="op" id="5480057">]</span><span class="builtintype" id="5480058">byte</span><span class="op" id="5480062">,</span>&nbsp;<span class="builtinfunc" id="5480064">len</span><span class="op" id="5480067">(</span><span class="ident" id="5480068">prefix</span><span class="op" id="5480074">)</span><span class="op" id="5480075">,</span>&nbsp;<span class="builtinfunc" id="5480077">len</span><span class="op" id="5480080">(</span><span class="ident" id="5480081">prefix</span><span class="op" id="5480087">)</span><span class="op" id="5480088">+</span><span class="num" id="5480089">1</span><span class="op" id="5480090">+</span><span class="num" id="5480091">2</span><span class="op" id="5480092">*</span><span class="builtinfunc" id="5480093">len</span><span class="op" id="5480096">(</span><span class="ident" id="5480097">s</span><span class="op" id="5480098">)</span><span class="op" id="5480099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5480102">copy</span><span class="op" id="5480106">(</span><span class="ident" id="5480107">output</span><span class="op" id="5480113">,</span>&nbsp;<span class="ident" id="5480115">prefix</span><span class="op" id="5480121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480124">delta</span><span class="op" id="5480129">,</span>&nbsp;<span class="ident" id="5480131">n</span><span class="op" id="5480132">,</span>&nbsp;<span class="ident" id="5480134">bias</span>&nbsp;<span class="op" id="5480139">:=</span>&nbsp;<span class="builtintype" id="5480142">int32</span><span class="op" id="5480147">(</span><span class="num" id="5480148">0</span><span class="op" id="5480149">)</span><span class="op" id="5480150">,</span>&nbsp;<span class="ident" id="5480152">initialN</span><span class="op" id="5480160">,</span>&nbsp;<span class="ident" id="5480162">initialBias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480175">b</span><span class="op" id="5480176">,</span>&nbsp;<span class="ident" id="5480178">remaining</span>&nbsp;<span class="op" id="5480188">:=</span>&nbsp;<span class="builtintype" id="5480191">int32</span><span class="op" id="5480196">(</span><span class="num" id="5480197">0</span><span class="op" id="5480198">)</span><span class="op" id="5480199">,</span>&nbsp;<span class="builtintype" id="5480201">int32</span><span class="op" id="5480206">(</span><span class="num" id="5480207">0</span><span class="op" id="5480208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480211">for</span>&nbsp;<span class="ident" id="5480215">_</span><span class="op" id="5480216">,</span>&nbsp;<span class="ident" id="5480218">r</span>&nbsp;<span class="op" id="5480220">:=</span>&nbsp;<span class="keyword" id="5480223">range</span>&nbsp;<span class="ident" id="5480229">s</span>&nbsp;<span class="op" id="5480231">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480235">if</span>&nbsp;<span class="ident" id="5480238">r</span>&nbsp;<span class="op" id="5480240">&lt;</span>&nbsp;<span class="num" id="5480242">0x80</span>&nbsp;<span class="op" id="5480247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480252">b</span><span class="op" id="5480253">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480259">output</span>&nbsp;<span class="op" id="5480266">=</span>&nbsp;<span class="builtinfunc" id="5480268">append</span><span class="op" id="5480274">(</span><span class="ident" id="5480275">output</span><span class="op" id="5480281">,</span>&nbsp;<span class="builtintype" id="5480283">byte</span><span class="op" id="5480287">(</span><span class="ident" id="5480288">r</span><span class="op" id="5480289">)</span><span class="op" id="5480290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480294">}</span>&nbsp;<span class="keyword" id="5480296">else</span>&nbsp;<span class="op" id="5480301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480306">remaining</span><span class="op" id="5480315">++</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480320">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480326">h</span>&nbsp;<span class="op" id="5480328">:=</span>&nbsp;<span class="ident" id="5480331">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480334">if</span>&nbsp;<span class="ident" id="5480337">b</span>&nbsp;<span class="op" id="5480339">&gt;</span>&nbsp;<span class="num" id="5480341">0</span>&nbsp;<span class="op" id="5480343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480347">output</span>&nbsp;<span class="op" id="5480354">=</span>&nbsp;<span class="builtinfunc" id="5480356">append</span><span class="op" id="5480362">(</span><span class="ident" id="5480363">output</span><span class="op" id="5480369">,</span>&nbsp;<span class="string" id="5480371">&#39;-&#39;</span><span class="op" id="5480374">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480380">for</span>&nbsp;<span class="ident" id="5480384">remaining</span>&nbsp;<span class="op" id="5480394">!=</span>&nbsp;<span class="num" id="5480397">0</span>&nbsp;<span class="op" id="5480399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480403">m</span>&nbsp;<span class="op" id="5480405">:=</span>&nbsp;<span class="builtintype" id="5480408">int32</span><span class="op" id="5480413">(</span><span class="num" id="5480414">0x7fffffff</span><span class="op" id="5480424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480428">for</span>&nbsp;<span class="ident" id="5480432">_</span><span class="op" id="5480433">,</span>&nbsp;<span class="ident" id="5480435">r</span>&nbsp;<span class="op" id="5480437">:=</span>&nbsp;<span class="keyword" id="5480440">range</span>&nbsp;<span class="ident" id="5480446">s</span>&nbsp;<span class="op" id="5480448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480453">if</span>&nbsp;<span class="ident" id="5480456">m</span>&nbsp;<span class="op" id="5480458">&gt;</span>&nbsp;<span class="ident" id="5480460">r</span>&nbsp;<span class="op" id="5480462">&amp;&amp;</span>&nbsp;<span class="ident" id="5480465">r</span>&nbsp;<span class="op" id="5480467">&gt;=</span>&nbsp;<span class="ident" id="5480470">n</span>&nbsp;<span class="op" id="5480472">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480478">m</span>&nbsp;<span class="op" id="5480480">=</span>&nbsp;<span class="ident" id="5480482">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480495">delta</span>&nbsp;<span class="op" id="5480501">+=</span>&nbsp;<span class="op" id="5480504">(</span><span class="ident" id="5480505">m</span>&nbsp;<span class="op" id="5480507">-</span>&nbsp;<span class="ident" id="5480509">n</span><span class="op" id="5480510">)</span>&nbsp;<span class="op" id="5480512">*</span>&nbsp;<span class="op" id="5480514">(</span><span class="ident" id="5480515">h</span>&nbsp;<span class="op" id="5480517">+</span>&nbsp;<span class="num" id="5480519">1</span><span class="op" id="5480520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480524">if</span>&nbsp;<span class="ident" id="5480527">delta</span>&nbsp;<span class="op" id="5480533">&lt;</span>&nbsp;<span class="num" id="5480535">0</span>&nbsp;<span class="op" id="5480537">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480542">return</span>&nbsp;<span class="string" id="5480549">&#34;&#34;</span><span class="op" id="5480551">,</span>&nbsp;<span class="ident" id="5480553">fmt</span><span class="op" id="5480556">.</span><span class="ident" id="5480557">Errorf</span><span class="op" id="5480563">(</span><span class="string" id="5480564">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5480593">,</span>&nbsp;<span class="ident" id="5480595">s</span><span class="op" id="5480596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480604">n</span>&nbsp;<span class="op" id="5480606">=</span>&nbsp;<span class="ident" id="5480608">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480612">for</span>&nbsp;<span class="ident" id="5480616">_</span><span class="op" id="5480617">,</span>&nbsp;<span class="ident" id="5480619">r</span>&nbsp;<span class="op" id="5480621">:=</span>&nbsp;<span class="keyword" id="5480624">range</span>&nbsp;<span class="ident" id="5480630">s</span>&nbsp;<span class="op" id="5480632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480637">if</span>&nbsp;<span class="ident" id="5480640">r</span>&nbsp;<span class="op" id="5480642">&lt;</span>&nbsp;<span class="ident" id="5480644">n</span>&nbsp;<span class="op" id="5480646">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480652">delta</span><span class="op" id="5480657">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480664">if</span>&nbsp;<span class="ident" id="5480667">delta</span>&nbsp;<span class="op" id="5480673">&lt;</span>&nbsp;<span class="num" id="5480675">0</span>&nbsp;<span class="op" id="5480677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480684">return</span>&nbsp;<span class="string" id="5480691">&#34;&#34;</span><span class="op" id="5480693">,</span>&nbsp;<span class="ident" id="5480695">fmt</span><span class="op" id="5480698">.</span><span class="ident" id="5480699">Errorf</span><span class="op" id="5480705">(</span><span class="string" id="5480706">&#34;cookiejar:&nbsp;invalid&nbsp;label&nbsp;%q&#34;</span><span class="op" id="5480735">,</span>&nbsp;<span class="ident" id="5480737">s</span><span class="op" id="5480738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480750">continue</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480767">if</span>&nbsp;<span class="ident" id="5480770">r</span>&nbsp;<span class="op" id="5480772">&gt;</span>&nbsp;<span class="ident" id="5480774">n</span>&nbsp;<span class="op" id="5480776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480782">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480799">q</span>&nbsp;<span class="op" id="5480801">:=</span>&nbsp;<span class="ident" id="5480804">delta</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480813">for</span>&nbsp;<span class="ident" id="5480817">k</span>&nbsp;<span class="op" id="5480819">:=</span>&nbsp;<span class="ident" id="5480822">base</span><span class="op" id="5480826">;</span>&nbsp;<span class="op" id="5480828">;</span>&nbsp;<span class="ident" id="5480830">k</span>&nbsp;<span class="op" id="5480832">+=</span>&nbsp;<span class="ident" id="5480835">base</span>&nbsp;<span class="op" id="5480840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480846">t</span>&nbsp;<span class="op" id="5480848">:=</span>&nbsp;<span class="ident" id="5480851">k</span>&nbsp;<span class="op" id="5480853">-</span>&nbsp;<span class="ident" id="5480855">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480864">if</span>&nbsp;<span class="ident" id="5480867">t</span>&nbsp;<span class="op" id="5480869">&lt;</span>&nbsp;<span class="ident" id="5480871">tmin</span>&nbsp;<span class="op" id="5480876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480883">t</span>&nbsp;<span class="op" id="5480885">=</span>&nbsp;<span class="ident" id="5480887">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480896">}</span>&nbsp;<span class="keyword" id="5480898">else</span>&nbsp;<span class="keyword" id="5480903">if</span>&nbsp;<span class="ident" id="5480906">t</span>&nbsp;<span class="op" id="5480908">&gt;</span>&nbsp;<span class="ident" id="5480910">tmax</span>&nbsp;<span class="op" id="5480915">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480922">t</span>&nbsp;<span class="op" id="5480924">=</span>&nbsp;<span class="ident" id="5480926">tmax</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480941">if</span>&nbsp;<span class="ident" id="5480944">q</span>&nbsp;<span class="op" id="5480946">&lt;</span>&nbsp;<span class="ident" id="5480948">t</span>&nbsp;<span class="op" id="5480950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5480957">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5480967">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5480973">output</span>&nbsp;<span class="op" id="5480980">=</span>&nbsp;<span class="builtinfunc" id="5480982">append</span><span class="op" id="5480988">(</span><span class="ident" id="5480989">output</span><span class="op" id="5480995">,</span>&nbsp;<span class="ident" id="5480997">encodeDigit</span><span class="op" id="5481008">(</span><span class="ident" id="5481009">t</span><span class="op" id="5481010">+</span><span class="op" id="5481011">(</span><span class="ident" id="5481012">q</span><span class="op" id="5481013">-</span><span class="ident" id="5481014">t</span><span class="op" id="5481015">)</span><span class="op" id="5481016">%</span><span class="op" id="5481017">(</span><span class="ident" id="5481018">base</span><span class="op" id="5481022">-</span><span class="ident" id="5481023">t</span><span class="op" id="5481024">)</span><span class="op" id="5481025">)</span><span class="op" id="5481026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481032">q</span>&nbsp;<span class="op" id="5481034">=</span>&nbsp;<span class="op" id="5481036">(</span><span class="ident" id="5481037">q</span>&nbsp;<span class="op" id="5481039">-</span>&nbsp;<span class="ident" id="5481041">t</span><span class="op" id="5481042">)</span>&nbsp;<span class="op" id="5481044">/</span>&nbsp;<span class="op" id="5481046">(</span><span class="ident" id="5481047">base</span>&nbsp;<span class="op" id="5481052">-</span>&nbsp;<span class="ident" id="5481054">t</span><span class="op" id="5481055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5481060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481065">output</span>&nbsp;<span class="op" id="5481072">=</span>&nbsp;<span class="builtinfunc" id="5481074">append</span><span class="op" id="5481080">(</span><span class="ident" id="5481081">output</span><span class="op" id="5481087">,</span>&nbsp;<span class="ident" id="5481089">encodeDigit</span><span class="op" id="5481100">(</span><span class="ident" id="5481101">q</span><span class="op" id="5481102">)</span><span class="op" id="5481103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481108">bias</span>&nbsp;<span class="op" id="5481113">=</span>&nbsp;<span class="ident" id="5481115">adapt</span><span class="op" id="5481120">(</span><span class="ident" id="5481121">delta</span><span class="op" id="5481126">,</span>&nbsp;<span class="ident" id="5481128">h</span><span class="op" id="5481129">+</span><span class="num" id="5481130">1</span><span class="op" id="5481131">,</span>&nbsp;<span class="ident" id="5481133">h</span>&nbsp;<span class="op" id="5481135">==</span>&nbsp;<span class="ident" id="5481138">b</span><span class="op" id="5481139">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481144">delta</span>&nbsp;<span class="op" id="5481150">=</span>&nbsp;<span class="num" id="5481152">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481157">h</span><span class="op" id="5481158">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481164">remaining</span><span class="op" id="5481173">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5481178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481182">delta</span><span class="op" id="5481187">++</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481192">n</span><span class="op" id="5481193">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5481197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481200">return</span>&nbsp;<span class="builtintype" id="5481207">string</span><span class="op" id="5481213">(</span><span class="ident" id="5481214">output</span><span class="op" id="5481220">)</span><span class="op" id="5481221">,</span>&nbsp;<span class="ident" id="5481223">nil</span><br>
<span class="lineno"></span><span class="op" id="5481227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="5481230">func</span>&nbsp;<span class="ident" id="5481235">encodeDigit</span><span class="op" id="5481246">(</span><span class="ident" id="5481247">digit</span>&nbsp;<span class="builtintype" id="5481253">int32</span><span class="op" id="5481258">)</span>&nbsp;<span class="builtintype" id="5481260">byte</span>&nbsp;<span class="op" id="5481265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481268">switch</span>&nbsp;<span class="op" id="5481275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481278">case</span>&nbsp;<span class="num" id="5481283">0</span>&nbsp;<span class="op" id="5481285">&lt;=</span>&nbsp;<span class="ident" id="5481288">digit</span>&nbsp;<span class="op" id="5481294">&amp;&amp;</span>&nbsp;<span class="ident" id="5481297">digit</span>&nbsp;<span class="op" id="5481303">&lt;</span>&nbsp;<span class="num" id="5481305">26</span><span class="op" id="5481307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481311">return</span>&nbsp;<span class="builtintype" id="5481318">byte</span><span class="op" id="5481322">(</span><span class="ident" id="5481323">digit</span>&nbsp;<span class="op" id="5481329">+</span>&nbsp;<span class="string" id="5481331">&#39;a&#39;</span><span class="op" id="5481334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481337">case</span>&nbsp;<span class="num" id="5481342">26</span>&nbsp;<span class="op" id="5481345">&lt;=</span>&nbsp;<span class="ident" id="5481348">digit</span>&nbsp;<span class="op" id="5481354">&amp;&amp;</span>&nbsp;<span class="ident" id="5481357">digit</span>&nbsp;<span class="op" id="5481363">&lt;</span>&nbsp;<span class="num" id="5481365">36</span><span class="op" id="5481367">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481371">return</span>&nbsp;<span class="builtintype" id="5481378">byte</span><span class="op" id="5481382">(</span><span class="ident" id="5481383">digit</span>&nbsp;<span class="op" id="5481389">+</span>&nbsp;<span class="op" id="5481391">(</span><span class="string" id="5481392">&#39;0&#39;</span>&nbsp;<span class="op" id="5481396">-</span>&nbsp;<span class="num" id="5481398">26</span><span class="op" id="5481400">)</span><span class="op" id="5481401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5481404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5481407">panic</span><span class="op" id="5481412">(</span><span class="string" id="5481413">&#34;cookiejar:&nbsp;internal&nbsp;error&nbsp;in&nbsp;punycode&nbsp;encoding&#34;</span><span class="op" id="5481461">)</span><br>
<span class="lineno"></span><span class="op" id="5481463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5481466">//&nbsp;adapt&nbsp;is&nbsp;the&nbsp;bias&nbsp;adaptation&nbsp;function&nbsp;specified&nbsp;in&nbsp;section&nbsp;6.1.</span><br>
<span class="lineno"></span><span class="keyword" id="5481533">func</span>&nbsp;<span class="ident" id="5481538">adapt</span><span class="op" id="5481543">(</span><span class="ident" id="5481544">delta</span><span class="op" id="5481549">,</span>&nbsp;<span class="ident" id="5481551">numPoints</span>&nbsp;<span class="builtintype" id="5481561">int32</span><span class="op" id="5481566">,</span>&nbsp;<span class="ident" id="5481568">firstTime</span>&nbsp;<span class="builtintype" id="5481578">bool</span><span class="op" id="5481582">)</span>&nbsp;<span class="builtintype" id="5481584">int32</span>&nbsp;<span class="op" id="5481590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481593">if</span>&nbsp;<span class="ident" id="5481596">firstTime</span>&nbsp;<span class="op" id="5481606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481610">delta</span>&nbsp;<span class="op" id="5481616">/=</span>&nbsp;<span class="ident" id="5481619">damp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5481625">}</span>&nbsp;<span class="keyword" id="5481627">else</span>&nbsp;<span class="op" id="5481632">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481636">delta</span>&nbsp;<span class="op" id="5481642">/=</span>&nbsp;<span class="num" id="5481645">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5481648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481651">delta</span>&nbsp;<span class="op" id="5481657">+=</span>&nbsp;<span class="ident" id="5481660">delta</span>&nbsp;<span class="op" id="5481666">/</span>&nbsp;<span class="ident" id="5481668">numPoints</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481679">k</span>&nbsp;<span class="op" id="5481681">:=</span>&nbsp;<span class="builtintype" id="5481684">int32</span><span class="op" id="5481689">(</span><span class="num" id="5481690">0</span><span class="op" id="5481691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481694">for</span>&nbsp;<span class="ident" id="5481698">delta</span>&nbsp;<span class="op" id="5481704">&gt;</span>&nbsp;<span class="op" id="5481706">(</span><span class="op" id="5481707">(</span><span class="ident" id="5481708">base</span><span class="op" id="5481712">-</span><span class="ident" id="5481713">tmin</span><span class="op" id="5481717">)</span><span class="op" id="5481718">*</span><span class="ident" id="5481719">tmax</span><span class="op" id="5481723">)</span><span class="op" id="5481724">/</span><span class="num" id="5481725">2</span>&nbsp;<span class="op" id="5481727">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481731">delta</span>&nbsp;<span class="op" id="5481737">/=</span>&nbsp;<span class="ident" id="5481740">base</span>&nbsp;<span class="op" id="5481745">-</span>&nbsp;<span class="ident" id="5481747">tmin</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5481754">k</span>&nbsp;<span class="op" id="5481756">+=</span>&nbsp;<span class="ident" id="5481759">base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5481765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5481768">return</span>&nbsp;<span class="ident" id="5481775">k</span>&nbsp;<span class="op" id="5481777">+</span>&nbsp;<span class="op" id="5481779">(</span><span class="ident" id="5481780">base</span><span class="op" id="5481784">-</span><span class="ident" id="5481785">tmin</span><span class="op" id="5481789">+</span><span class="num" id="5481790">1</span><span class="op" id="5481791">)</span><span class="op" id="5481792">*</span><span class="ident" id="5481793">delta</span><span class="op" id="5481798">/</span><span class="op" id="5481799">(</span><span class="ident" id="5481800">delta</span><span class="op" id="5481805">+</span><span class="ident" id="5481806">skew</span><span class="op" id="5481810">)</span><br>
<span class="lineno"></span><span class="op" id="5481812">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="5481815">//&nbsp;Strictly&nbsp;speaking,&nbsp;the&nbsp;remaining&nbsp;code&nbsp;below&nbsp;deals&nbsp;with&nbsp;IDNA&nbsp;(RFC&nbsp;5890&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5481892">//&nbsp;friends)&nbsp;and&nbsp;not&nbsp;Punycode&nbsp;(RFC&nbsp;3492)&nbsp;per&nbsp;se.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5481941">//&nbsp;acePrefix&nbsp;is&nbsp;the&nbsp;ASCII&nbsp;Compatible&nbsp;Encoding&nbsp;prefix.</span><br>
<span class="lineno">130</span><span class="keyword" id="5481995">const</span>&nbsp;<span class="ident" id="5482001">acePrefix</span>&nbsp;<span class="op" id="5482011">=</span>&nbsp;<span class="string" id="5482013">&#34;xn--&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5482021">//&nbsp;toASCII&nbsp;converts&nbsp;a&nbsp;domain&nbsp;or&nbsp;domain&nbsp;label&nbsp;to&nbsp;its&nbsp;ASCII&nbsp;form.&nbsp;For&nbsp;example,</span><br>
<span class="lineno"></span><span class="comment" id="5482098">//&nbsp;toASCII(&#34;bücher.example.com&#34;)&nbsp;is&nbsp;&#34;xn--bcher-kva.example.com&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5482168">//&nbsp;toASCII(&#34;golang&#34;)&nbsp;is&nbsp;&#34;golang&#34;.</span><br>
<span class="lineno">135</span><span class="keyword" id="5482202">func</span>&nbsp;<span class="ident" id="5482207">toASCII</span><span class="op" id="5482214">(</span><span class="ident" id="5482215">s</span>&nbsp;<span class="builtintype" id="5482217">string</span><span class="op" id="5482223">)</span>&nbsp;<span class="op" id="5482225">(</span><span class="builtintype" id="5482226">string</span><span class="op" id="5482232">,</span>&nbsp;<span class="builtintype" id="5482234">error</span><span class="op" id="5482239">)</span>&nbsp;<span class="op" id="5482241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482244">if</span>&nbsp;<span class="ident" id="5482247">ascii</span><span class="op" id="5482252">(</span><span class="ident" id="5482253">s</span><span class="op" id="5482254">)</span>&nbsp;<span class="op" id="5482256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482260">return</span>&nbsp;<span class="ident" id="5482267">s</span><span class="op" id="5482268">,</span>&nbsp;<span class="ident" id="5482270">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5482275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5482278">labels</span>&nbsp;<span class="op" id="5482285">:=</span>&nbsp;<span class="ident" id="5482288">strings</span><span class="op" id="5482295">.</span><span class="ident" id="5482296">Split</span><span class="op" id="5482301">(</span><span class="ident" id="5482302">s</span><span class="op" id="5482303">,</span>&nbsp;<span class="string" id="5482305">&#34;.&#34;</span><span class="op" id="5482308">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482311">for</span>&nbsp;<span class="ident" id="5482315">i</span><span class="op" id="5482316">,</span>&nbsp;<span class="ident" id="5482318">label</span>&nbsp;<span class="op" id="5482324">:=</span>&nbsp;<span class="keyword" id="5482327">range</span>&nbsp;<span class="ident" id="5482333">labels</span>&nbsp;<span class="op" id="5482340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482344">if</span>&nbsp;<span class="op" id="5482347">!</span><span class="ident" id="5482348">ascii</span><span class="op" id="5482353">(</span><span class="ident" id="5482354">label</span><span class="op" id="5482359">)</span>&nbsp;<span class="op" id="5482361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5482366">a</span><span class="op" id="5482367">,</span>&nbsp;<span class="ident" id="5482369">err</span>&nbsp;<span class="op" id="5482373">:=</span>&nbsp;<span class="ident" id="5482376">encode</span><span class="op" id="5482382">(</span><span class="ident" id="5482383">acePrefix</span><span class="op" id="5482392">,</span>&nbsp;<span class="ident" id="5482394">label</span><span class="op" id="5482399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482404">if</span>&nbsp;<span class="ident" id="5482407">err</span>&nbsp;<span class="op" id="5482411">!=</span>&nbsp;<span class="ident" id="5482414">nil</span>&nbsp;<span class="op" id="5482418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482424">return</span>&nbsp;<span class="string" id="5482431">&#34;&#34;</span><span class="op" id="5482433">,</span>&nbsp;<span class="ident" id="5482435">err</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5482442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5482447">labels</span><span class="op" id="5482453">[</span><span class="ident" id="5482454">i</span><span class="op" id="5482455">]</span>&nbsp;<span class="op" id="5482457">=</span>&nbsp;<span class="ident" id="5482459">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5482463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5482466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482469">return</span>&nbsp;<span class="ident" id="5482476">strings</span><span class="op" id="5482483">.</span><span class="ident" id="5482484">Join</span><span class="op" id="5482488">(</span><span class="ident" id="5482489">labels</span><span class="op" id="5482495">,</span>&nbsp;<span class="string" id="5482497">&#34;.&#34;</span><span class="op" id="5482500">)</span><span class="op" id="5482501">,</span>&nbsp;<span class="ident" id="5482503">nil</span><br>
<span class="lineno">150</span><span class="op" id="5482507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5482510">func</span>&nbsp;<span class="ident" id="5482515">ascii</span><span class="op" id="5482520">(</span><span class="ident" id="5482521">s</span>&nbsp;<span class="builtintype" id="5482523">string</span><span class="op" id="5482529">)</span>&nbsp;<span class="builtintype" id="5482531">bool</span>&nbsp;<span class="op" id="5482536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482539">for</span>&nbsp;<span class="ident" id="5482543">i</span>&nbsp;<span class="op" id="5482545">:=</span>&nbsp;<span class="num" id="5482548">0</span><span class="op" id="5482549">;</span>&nbsp;<span class="ident" id="5482551">i</span>&nbsp;<span class="op" id="5482553">&lt;</span>&nbsp;<span class="builtinfunc" id="5482555">len</span><span class="op" id="5482558">(</span><span class="ident" id="5482559">s</span><span class="op" id="5482560">)</span><span class="op" id="5482561">;</span>&nbsp;<span class="ident" id="5482563">i</span><span class="op" id="5482564">++</span>&nbsp;<span class="op" id="5482567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482571">if</span>&nbsp;<span class="ident" id="5482574">s</span><span class="op" id="5482575">[</span><span class="ident" id="5482576">i</span><span class="op" id="5482577">]</span>&nbsp;<span class="op" id="5482579">&gt;=</span>&nbsp;<span class="ident" id="5482582">utf8</span><span class="op" id="5482586">.</span><span class="ident" id="5482587">RuneSelf</span>&nbsp;<span class="op" id="5482596">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482601">return</span>&nbsp;<span class="builtintype" id="5482608">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5482616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5482619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5482622">return</span>&nbsp;<span class="builtintype" id="5482629">true</span><br>
<span class="lineno"></span><span class="op" id="5482634">}</span>
</div>
</body>
</html>
