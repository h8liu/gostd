<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5998855">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5998910">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5998964">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5999015">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;export&nbsp;filtering&nbsp;of&nbsp;an&nbsp;AST.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5999068">package</span>&nbsp;<span class="ident" id="5999076">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5999081">import</span>&nbsp;<span class="op" id="5999088">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5999091">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5999101">&#34;go/token&#34;</span><br>
<span class="lineno"></span><span class="op" id="5999112">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5999115">//&nbsp;filterIdentList&nbsp;removes&nbsp;unexported&nbsp;names&nbsp;from&nbsp;list&nbsp;in&nbsp;place</span><br>
<span class="lineno">15</span><span class="comment" id="5999178">//&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;list.&nbsp;If&nbsp;blankOk&nbsp;is&nbsp;set,&nbsp;blank</span><br>
<span class="lineno"></span><span class="comment" id="5999238">//&nbsp;identifiers&nbsp;are&nbsp;considered&nbsp;exported&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="5999284">//</span><br>
<span class="lineno"></span><span class="keyword" id="5999287">func</span>&nbsp;<span class="ident" id="5999292">filterIdentList</span><span class="op" id="5999307">(</span><span class="ident" id="5999308">list</span>&nbsp;<span class="op" id="5999313">[</span><span class="op" id="5999314">]</span><span class="op" id="5999315">*</span><span class="ident" id="5999316"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="5999319">.</span><span class="ident" id="5999320">Ident</span><span class="op" id="5999325">,</span>&nbsp;<span class="ident" id="5999327">blankOk</span>&nbsp;<span class="builtintype" id="5999335">bool</span><span class="op" id="5999339">)</span>&nbsp;<span class="op" id="5999341">[</span><span class="op" id="5999342">]</span><span class="op" id="5999343">*</span><span class="ident" id="5999344"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="5999347">.</span><span class="ident" id="5999348">Ident</span>&nbsp;<span class="op" id="5999354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5999357">j</span>&nbsp;<span class="op" id="5999359">:=</span>&nbsp;<span class="num" id="5999362">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5999365">for</span>&nbsp;<span class="ident" id="5999369">_</span><span class="op" id="5999370">,</span>&nbsp;<span class="ident" id="5999372">x</span>&nbsp;<span class="op" id="5999374">:=</span>&nbsp;<span class="keyword" id="5999377">range</span>&nbsp;<span class="ident" id="5999383"><a href="/go/doc/exports.go.html#5999308">list</a></span>&nbsp;<span class="op" id="5999388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5999392">if</span>&nbsp;<span class="ident" id="5999395"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="5999398">.</span><span class="ident" id="5999399">IsExported</span><span class="op" id="5999409">(</span><span class="ident" id="5999410"><a href="/go/doc/exports.go.html#5999372">x</a></span><span class="op" id="5999411">.</span><span class="ident" id="5999412">Name</span><span class="op" id="5999416">)</span>&nbsp;<span class="op" id="5999418">||</span>&nbsp;<span class="op" id="5999421">(</span><span class="ident" id="5999422"><a href="/go/doc/exports.go.html#5999327">blankOk</a></span>&nbsp;<span class="op" id="5999430">&amp;&amp;</span>&nbsp;<span class="ident" id="5999433"><a href="/go/doc/exports.go.html#5999372">x</a></span><span class="op" id="5999434">.</span><span class="ident" id="5999435">Name</span>&nbsp;<span class="op" id="5999440">==</span>&nbsp;<span class="string" id="5999443">&#34;_&#34;</span><span class="op" id="5999446">)</span>&nbsp;<span class="op" id="5999448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5999453"><a href="/go/doc/exports.go.html#5999308">list</a></span><span class="op" id="5999457">[</span><span class="ident" id="5999458"><a href="/go/doc/exports.go.html#5999357">j</a></span><span class="op" id="5999459">]</span>&nbsp;<span class="op" id="5999461">=</span>&nbsp;<span class="ident" id="5999463"><a href="/go/doc/exports.go.html#5999372">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5999468"><a href="/go/doc/exports.go.html#5999357">j</a></span><span class="op" id="5999469">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5999474">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5999477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5999480">return</span>&nbsp;<span class="ident" id="5999487"><a href="/go/doc/exports.go.html#5999308">list</a></span><span class="op" id="5999491">[</span><span class="num" id="5999492">0</span><span class="op" id="5999493">:</span><span class="ident" id="5999494"><a href="/go/doc/exports.go.html#5999357">j</a></span><span class="op" id="5999495">]</span><br>
<span class="lineno"></span><span class="op" id="5999497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5999500">//&nbsp;removeErrorField&nbsp;removes&nbsp;anonymous&nbsp;fields&nbsp;named&nbsp;&#34;error&#34;&nbsp;from&nbsp;an&nbsp;interface.</span><br>
<span class="lineno">30</span><span class="comment" id="5999578">//&nbsp;This&nbsp;is&nbsp;called&nbsp;when&nbsp;&#34;error&#34;&nbsp;has&nbsp;been&nbsp;determined&nbsp;to&nbsp;be&nbsp;a&nbsp;local&nbsp;name,</span><br>
<span class="lineno"></span><span class="comment" id="5999649">//&nbsp;not&nbsp;the&nbsp;predeclared&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="5999678">//</span><br>
<span class="lineno"></span><span class="keyword" id="5999681">func</span>&nbsp;<span class="ident" id="5999686">removeErrorField</span><span class="op" id="5999702">(</span><span class="ident" id="5999703">ityp</span>&nbsp;<span class="op" id="5999708">*</span><span class="ident" id="5999709"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="5999712">.</span><span class="ident" id="5999713">InterfaceType</span><span class="op" id="5999726">)</span>&nbsp;<span class="op" id="5999728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5999731">list</span>&nbsp;<span class="op" id="5999736">:=</span>&nbsp;<span class="ident" id="5999739"><a href="/go/doc/exports.go.html#5999703">ityp</a></span><span class="op" id="5999743">.</span><span class="ident" id="5999744">Methods</span><span class="op" id="5999751">.</span><span class="ident" id="5999752">List</span>&nbsp;<span class="comment" id="5999757">//&nbsp;we&nbsp;know&nbsp;that&nbsp;ityp.Methods&nbsp;!=&nbsp;nil</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5999794">j</span>&nbsp;<span class="op" id="5999796">:=</span>&nbsp;<span class="num" id="5999799">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5999802">for</span>&nbsp;<span class="ident" id="5999806">_</span><span class="op" id="5999807">,</span>&nbsp;<span class="ident" id="5999809">field</span>&nbsp;<span class="op" id="5999815">:=</span>&nbsp;<span class="keyword" id="5999818">range</span>&nbsp;<span class="ident" id="5999824"><a href="/go/doc/exports.go.html#5999731">list</a></span>&nbsp;<span class="op" id="5999829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5999833">keepField</span>&nbsp;<span class="op" id="5999843">:=</span>&nbsp;<span class="ident" id="5999846">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5999853">if</span>&nbsp;<span class="ident" id="5999856">n</span>&nbsp;<span class="op" id="5999858">:=</span>&nbsp;<span class="builtinfunc" id="5999861">len</span><span class="op" id="5999864">(</span><span class="ident" id="5999865"><a href="/go/doc/exports.go.html#5999809">field</a></span><span class="op" id="5999870">.</span><span class="ident" id="5999871">Names</span><span class="op" id="5999876">)</span><span class="op" id="5999877">;</span>&nbsp;<span class="ident" id="5999879"><a href="/go/doc/exports.go.html#5999856">n</a></span>&nbsp;<span class="op" id="5999881">==</span>&nbsp;<span class="num" id="5999884">0</span>&nbsp;<span class="op" id="5999886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5999891">//&nbsp;anonymous&nbsp;field</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5999913">if</span>&nbsp;<span class="ident" id="5999916">fname</span><span class="op" id="5999921">,</span>&nbsp;<span class="ident" id="5999923">_</span>&nbsp;<span class="op" id="5999925">:=</span>&nbsp;<span class="ident" id="5999928"><a href="/go/doc/reader.go.html#6008802">baseTypeName</a></span><span class="op" id="5999940">(</span><span class="ident" id="5999941"><a href="/go/doc/exports.go.html#5999809">field</a></span><span class="op" id="5999946">.</span><span class="ident" id="5999947">Type</span><span class="op" id="5999951">)</span><span class="op" id="5999952">;</span>&nbsp;<span class="ident" id="5999954"><a href="/go/doc/exports.go.html#5999916">fname</a></span>&nbsp;<span class="op" id="5999960">==</span>&nbsp;<span class="string" id="5999963">&#34;error&#34;</span>&nbsp;<span class="op" id="5999971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5999977"><a href="/go/doc/exports.go.html#5999833">keepField</a></span>&nbsp;<span class="op" id="5999987">=</span>&nbsp;<span class="ident" id="5999989">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5999998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6000002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6000006">if</span>&nbsp;<span class="ident" id="6000009"><a href="/go/doc/exports.go.html#5999833">keepField</a></span>&nbsp;<span class="op" id="6000019">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6000024"><a href="/go/doc/exports.go.html#5999731">list</a></span><span class="op" id="6000028">[</span><span class="ident" id="6000029"><a href="/go/doc/exports.go.html#5999794">j</a></span><span class="op" id="6000030">]</span>&nbsp;<span class="op" id="6000032">=</span>&nbsp;<span class="ident" id="6000034"><a href="/go/doc/exports.go.html#5999809">field</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6000043"><a href="/go/doc/exports.go.html#5999794">j</a></span><span class="op" id="6000044">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6000049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6000052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6000055">if</span>&nbsp;<span class="ident" id="6000058"><a href="/go/doc/exports.go.html#5999794">j</a></span>&nbsp;<span class="op" id="6000060">&lt;</span>&nbsp;<span class="builtinfunc" id="6000062">len</span><span class="op" id="6000065">(</span><span class="ident" id="6000066"><a href="/go/doc/exports.go.html#5999731">list</a></span><span class="op" id="6000070">)</span>&nbsp;<span class="op" id="6000072">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6000076"><a href="/go/doc/exports.go.html#5999703">ityp</a></span><span class="op" id="6000080">.</span><span class="ident" id="6000081">Incomplete</span>&nbsp;<span class="op" id="6000092">=</span>&nbsp;<span class="ident" id="6000094">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6000100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6000103"><a href="/go/doc/exports.go.html#5999703">ityp</a></span><span class="op" id="6000107">.</span><span class="ident" id="6000108">Methods</span><span class="op" id="6000115">.</span><span class="ident" id="6000116">List</span>&nbsp;<span class="op" id="6000121">=</span>&nbsp;<span class="ident" id="6000123"><a href="/go/doc/exports.go.html#5999731">list</a></span><span class="op" id="6000127">[</span><span class="num" id="6000128">0</span><span class="op" id="6000129">:</span><span class="ident" id="6000130"><a href="/go/doc/exports.go.html#5999794">j</a></span><span class="op" id="6000131">]</span><br>
<span class="lineno"></span><span class="op" id="6000133">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="6000136">//&nbsp;filterFieldList&nbsp;removes&nbsp;unexported&nbsp;fields&nbsp;(field&nbsp;names)&nbsp;from&nbsp;the&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span><span class="comment" id="6000215">//&nbsp;in&nbsp;place&nbsp;and&nbsp;returns&nbsp;true&nbsp;if&nbsp;fields&nbsp;were&nbsp;removed.&nbsp;Anonymous&nbsp;fields&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="6000289">//&nbsp;recorded&nbsp;with&nbsp;the&nbsp;parent&nbsp;type.&nbsp;filterType&nbsp;is&nbsp;called&nbsp;with&nbsp;the&nbsp;types&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6000362">//&nbsp;all&nbsp;remaining&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6000387">//</span><br>
<span class="lineno">60</span><span class="keyword" id="6000390">func</span>&nbsp;<span class="op" id="6000395">(</span><span class="ident" id="6000396">r</span>&nbsp;<span class="op" id="6000398">*</span><span class="ident" id="6000399"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6000405">)</span>&nbsp;<span class="ident" id="6000407">filterFieldList</span><span class="op" id="6000422">(</span><span class="ident" id="6000423">parent</span>&nbsp;<span class="op" id="6000430">*</span><span class="ident" id="6000431"><a href="/go/doc/reader.go.html#6009421">namedType</a></span><span class="op" id="6000440">,</span>&nbsp;<span class="ident" id="6000442">fields</span>&nbsp;<span class="op" id="6000449">*</span><span class="ident" id="6000450"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6000453">.</span><span class="ident" id="6000454">FieldList</span><span class="op" id="6000463">,</span>&nbsp;<span class="ident" id="6000465">ityp</span>&nbsp;<span class="op" id="6000470">*</span><span class="ident" id="6000471"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6000474">.</span><span class="ident" id="6000475">InterfaceType</span><span class="op" id="6000488">)</span>&nbsp;<span class="op" id="6000490">(</span><span class="ident" id="6000491">removedFields</span>&nbsp;<span class="builtintype" id="6000505">bool</span><span class="op" id="6000509">)</span>&nbsp;<span class="op" id="6000511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6000514">if</span>&nbsp;<span class="ident" id="6000517"><a href="/go/doc/exports.go.html#6000442">fields</a></span>&nbsp;<span class="op" id="6000524">==</span>&nbsp;<span class="ident" id="6000527">nil</span>&nbsp;<span class="op" id="6000531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6000535">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6000543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6000546">list</span>&nbsp;<span class="op" id="6000551">:=</span>&nbsp;<span class="ident" id="6000554"><a href="/go/doc/exports.go.html#6000442">fields</a></span><span class="op" id="6000560">.</span><span class="ident" id="6000561">List</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6000567">j</span>&nbsp;<span class="op" id="6000569">:=</span>&nbsp;<span class="num" id="6000572">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6000575">for</span>&nbsp;<span class="ident" id="6000579">_</span><span class="op" id="6000580">,</span>&nbsp;<span class="ident" id="6000582">field</span>&nbsp;<span class="op" id="6000588">:=</span>&nbsp;<span class="keyword" id="6000591">range</span>&nbsp;<span class="ident" id="6000597"><a href="/go/doc/exports.go.html#6000546">list</a></span>&nbsp;<span class="op" id="6000602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6000606">keepField</span>&nbsp;<span class="op" id="6000616">:=</span>&nbsp;<span class="ident" id="6000619">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6000627">if</span>&nbsp;<span class="ident" id="6000630">n</span>&nbsp;<span class="op" id="6000632">:=</span>&nbsp;<span class="builtinfunc" id="6000635">len</span><span class="op" id="6000638">(</span><span class="ident" id="6000639"><a href="/go/doc/exports.go.html#6000582">field</a></span><span class="op" id="6000644">.</span><span class="ident" id="6000645">Names</span><span class="op" id="6000650">)</span><span class="op" id="6000651">;</span>&nbsp;<span class="ident" id="6000653"><a href="/go/doc/exports.go.html#6000630">n</a></span>&nbsp;<span class="op" id="6000655">==</span>&nbsp;<span class="num" id="6000658">0</span>&nbsp;<span class="op" id="6000660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6000665">//&nbsp;anonymous&nbsp;field</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6000687">fname</span>&nbsp;<span class="op" id="6000693">:=</span>&nbsp;<span class="ident" id="6000696"><a href="/go/doc/exports.go.html#6000396">r</a></span><span class="op" id="6000697">.</span><span class="ident" id="6000698">recordAnonymousField</span><span class="op" id="6000718">(</span><span class="ident" id="6000719"><a href="/go/doc/exports.go.html#6000423">parent</a></span><span class="op" id="6000725">,</span>&nbsp;<span class="ident" id="6000727"><a href="/go/doc/exports.go.html#6000582">field</a></span><span class="op" id="6000732">.</span><span class="ident" id="6000733">Type</span><span class="op" id="6000737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6000742">if</span>&nbsp;<span class="ident" id="6000745"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6000748">.</span><span class="ident" id="6000749">IsExported</span><span class="op" id="6000759">(</span><span class="ident" id="6000760"><a href="/go/doc/exports.go.html#6000687">fname</a></span><span class="op" id="6000765">)</span>&nbsp;<span class="op" id="6000767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6000773"><a href="/go/doc/exports.go.html#6000606">keepField</a></span>&nbsp;<span class="op" id="6000783">=</span>&nbsp;<span class="ident" id="6000785">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6000793">}</span>&nbsp;<span class="keyword" id="6000795">else</span>&nbsp;<span class="keyword" id="6000800">if</span>&nbsp;<span class="ident" id="6000803"><a href="/go/doc/exports.go.html#6000465">ityp</a></span>&nbsp;<span class="op" id="6000808">!=</span>&nbsp;<span class="ident" id="6000811">nil</span>&nbsp;<span class="op" id="6000815">&amp;&amp;</span>&nbsp;<span class="ident" id="6000818"><a href="/go/doc/exports.go.html#6000687">fname</a></span>&nbsp;<span class="op" id="6000824">==</span>&nbsp;<span class="string" id="6000827">&#34;error&#34;</span>&nbsp;<span class="op" id="6000835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6000841">//&nbsp;possibly&nbsp;the&nbsp;predeclared&nbsp;error&nbsp;interface;&nbsp;keep</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6000895">//&nbsp;it&nbsp;for&nbsp;now&nbsp;but&nbsp;remember&nbsp;this&nbsp;interface&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6000949">//&nbsp;it&nbsp;can&nbsp;be&nbsp;fixed&nbsp;if&nbsp;error&nbsp;is&nbsp;also&nbsp;defined&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001005"><a href="/go/doc/exports.go.html#6000606">keepField</a></span>&nbsp;<span class="op" id="6001015">=</span>&nbsp;<span class="ident" id="6001017">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001026"><a href="/go/doc/exports.go.html#6000396">r</a></span><span class="op" id="6001027">.</span><span class="ident" id="6001028">remember</span><span class="op" id="6001036">(</span><span class="ident" id="6001037"><a href="/go/doc/exports.go.html#6000465">ityp</a></span><span class="op" id="6001041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6001046">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6001050">}</span>&nbsp;<span class="keyword" id="6001052">else</span>&nbsp;<span class="op" id="6001057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001062"><a href="/go/doc/exports.go.html#6000582">field</a></span><span class="op" id="6001067">.</span><span class="ident" id="6001068">Names</span>&nbsp;<span class="op" id="6001074">=</span>&nbsp;<span class="ident" id="6001076"><a href="/go/doc/exports.go.html#5999292">filterIdentList</a></span><span class="op" id="6001091">(</span><span class="ident" id="6001092"><a href="/go/doc/exports.go.html#6000582">field</a></span><span class="op" id="6001097">.</span><span class="ident" id="6001098">Names</span><span class="op" id="6001103">,</span>&nbsp;<span class="ident" id="6001105">false</span><span class="op" id="6001110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6001115">if</span>&nbsp;<span class="builtinfunc" id="6001118">len</span><span class="op" id="6001121">(</span><span class="ident" id="6001122"><a href="/go/doc/exports.go.html#6000582">field</a></span><span class="op" id="6001127">.</span><span class="ident" id="6001128">Names</span><span class="op" id="6001133">)</span>&nbsp;<span class="op" id="6001135">&lt;</span>&nbsp;<span class="ident" id="6001137"><a href="/go/doc/exports.go.html#6000630">n</a></span>&nbsp;<span class="op" id="6001139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001145"><a href="/go/doc/exports.go.html#6000491">removedFields</a></span>&nbsp;<span class="op" id="6001159">=</span>&nbsp;<span class="ident" id="6001161">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6001169">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6001174">if</span>&nbsp;<span class="builtinfunc" id="6001177">len</span><span class="op" id="6001180">(</span><span class="ident" id="6001181"><a href="/go/doc/exports.go.html#6000582">field</a></span><span class="op" id="6001186">.</span><span class="ident" id="6001187">Names</span><span class="op" id="6001192">)</span>&nbsp;<span class="op" id="6001194">&gt;</span>&nbsp;<span class="num" id="6001196">0</span>&nbsp;<span class="op" id="6001198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001204"><a href="/go/doc/exports.go.html#6000606">keepField</a></span>&nbsp;<span class="op" id="6001214">=</span>&nbsp;<span class="ident" id="6001216">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6001224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6001228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6001232">if</span>&nbsp;<span class="ident" id="6001235"><a href="/go/doc/exports.go.html#6000606">keepField</a></span>&nbsp;<span class="op" id="6001245">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001250"><a href="/go/doc/exports.go.html#6000396">r</a></span><span class="op" id="6001251">.</span><span class="ident" id="6001252">filterType</span><span class="op" id="6001262">(</span><span class="ident" id="6001263">nil</span><span class="op" id="6001266">,</span>&nbsp;<span class="ident" id="6001268"><a href="/go/doc/exports.go.html#6000582">field</a></span><span class="op" id="6001273">.</span><span class="ident" id="6001274">Type</span><span class="op" id="6001278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001283"><a href="/go/doc/exports.go.html#6000546">list</a></span><span class="op" id="6001287">[</span><span class="ident" id="6001288"><a href="/go/doc/exports.go.html#6000567">j</a></span><span class="op" id="6001289">]</span>&nbsp;<span class="op" id="6001291">=</span>&nbsp;<span class="ident" id="6001293"><a href="/go/doc/exports.go.html#6000582">field</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001302"><a href="/go/doc/exports.go.html#6000567">j</a></span><span class="op" id="6001303">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6001308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6001311">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6001314">if</span>&nbsp;<span class="ident" id="6001317"><a href="/go/doc/exports.go.html#6000567">j</a></span>&nbsp;<span class="op" id="6001319">&lt;</span>&nbsp;<span class="builtinfunc" id="6001321">len</span><span class="op" id="6001324">(</span><span class="ident" id="6001325"><a href="/go/doc/exports.go.html#6000546">list</a></span><span class="op" id="6001329">)</span>&nbsp;<span class="op" id="6001331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001335"><a href="/go/doc/exports.go.html#6000491">removedFields</a></span>&nbsp;<span class="op" id="6001349">=</span>&nbsp;<span class="ident" id="6001351">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6001357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001360"><a href="/go/doc/exports.go.html#6000442">fields</a></span><span class="op" id="6001366">.</span><span class="ident" id="6001367">List</span>&nbsp;<span class="op" id="6001372">=</span>&nbsp;<span class="ident" id="6001374"><a href="/go/doc/exports.go.html#6000546">list</a></span><span class="op" id="6001378">[</span><span class="num" id="6001379">0</span><span class="op" id="6001380">:</span><span class="ident" id="6001381"><a href="/go/doc/exports.go.html#6000567">j</a></span><span class="op" id="6001382">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6001385">return</span><br>
<span class="lineno">100</span><span class="op" id="6001392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6001395">//&nbsp;filterParamList&nbsp;applies&nbsp;filterType&nbsp;to&nbsp;each&nbsp;parameter&nbsp;type&nbsp;in&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6001467">//</span><br>
<span class="lineno"></span><span class="keyword" id="6001470">func</span>&nbsp;<span class="op" id="6001475">(</span><span class="ident" id="6001476">r</span>&nbsp;<span class="op" id="6001478">*</span><span class="ident" id="6001479"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6001485">)</span>&nbsp;<span class="ident" id="6001487">filterParamList</span><span class="op" id="6001502">(</span><span class="ident" id="6001503">fields</span>&nbsp;<span class="op" id="6001510">*</span><span class="ident" id="6001511"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6001514">.</span><span class="ident" id="6001515">FieldList</span><span class="op" id="6001524">)</span>&nbsp;<span class="op" id="6001526">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6001529">if</span>&nbsp;<span class="ident" id="6001532"><a href="/go/doc/exports.go.html#6001503">fields</a></span>&nbsp;<span class="op" id="6001539">!=</span>&nbsp;<span class="ident" id="6001542">nil</span>&nbsp;<span class="op" id="6001546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6001550">for</span>&nbsp;<span class="ident" id="6001554">_</span><span class="op" id="6001555">,</span>&nbsp;<span class="ident" id="6001557">f</span>&nbsp;<span class="op" id="6001559">:=</span>&nbsp;<span class="keyword" id="6001562">range</span>&nbsp;<span class="ident" id="6001568"><a href="/go/doc/exports.go.html#6001503">fields</a></span><span class="op" id="6001574">.</span><span class="ident" id="6001575">List</span>&nbsp;<span class="op" id="6001580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001585"><a href="/go/doc/exports.go.html#6001476">r</a></span><span class="op" id="6001586">.</span><span class="ident" id="6001587">filterType</span><span class="op" id="6001597">(</span><span class="ident" id="6001598">nil</span><span class="op" id="6001601">,</span>&nbsp;<span class="ident" id="6001603"><a href="/go/doc/exports.go.html#6001557">f</a></span><span class="op" id="6001604">.</span><span class="ident" id="6001605">Type</span><span class="op" id="6001609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6001613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6001616">}</span><br>
<span class="lineno">110</span><span class="op" id="6001618">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6001621">//&nbsp;filterType&nbsp;strips&nbsp;any&nbsp;unexported&nbsp;struct&nbsp;fields&nbsp;or&nbsp;method&nbsp;types&nbsp;from&nbsp;typ</span><br>
<span class="lineno"></span><span class="comment" id="6001696">//&nbsp;in&nbsp;place.&nbsp;If&nbsp;fields&nbsp;(or&nbsp;methods)&nbsp;have&nbsp;been&nbsp;removed,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="6001769">//&nbsp;struct&nbsp;or&nbsp;interface&nbsp;type&nbsp;has&nbsp;the&nbsp;Incomplete&nbsp;field&nbsp;set&nbsp;to&nbsp;true.</span><br>
<span class="lineno">115</span><span class="comment" id="6001835">//</span><br>
<span class="lineno"></span><span class="keyword" id="6001838">func</span>&nbsp;<span class="op" id="6001843">(</span><span class="ident" id="6001844">r</span>&nbsp;<span class="op" id="6001846">*</span><span class="ident" id="6001847"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6001853">)</span>&nbsp;<span class="ident" id="6001855">filterType</span><span class="op" id="6001865">(</span><span class="ident" id="6001866">parent</span>&nbsp;<span class="op" id="6001873">*</span><span class="ident" id="6001874"><a href="/go/doc/reader.go.html#6009421">namedType</a></span><span class="op" id="6001883">,</span>&nbsp;<span class="ident" id="6001885">typ</span>&nbsp;<span class="ident" id="6001889"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6001892">.</span><span class="ident" id="6001893">Expr</span><span class="op" id="6001897">)</span>&nbsp;<span class="op" id="6001899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6001902">switch</span>&nbsp;<span class="ident" id="6001909">t</span>&nbsp;<span class="op" id="6001911">:=</span>&nbsp;<span class="ident" id="6001914"><a href="/go/doc/exports.go.html#6001885">typ</a></span><span class="op" id="6001917">.</span><span class="op" id="6001918">(</span><span class="keyword" id="6001919">type</span><span class="op" id="6001923">)</span>&nbsp;<span class="op" id="6001925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6001928">case</span>&nbsp;<span class="op" id="6001933">*</span><span class="ident" id="6001934"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6001937">.</span><span class="ident" id="6001938">Ident</span><span class="op" id="6001943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6001947">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6001965">case</span>&nbsp;<span class="op" id="6001970">*</span><span class="ident" id="6001971"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6001974">.</span><span class="ident" id="6001975">ParenExpr</span><span class="op" id="6001984">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6001988"><a href="/go/doc/exports.go.html#6001844">r</a></span><span class="op" id="6001989">.</span><span class="ident" id="6001990">filterType</span><span class="op" id="6002000">(</span><span class="ident" id="6002001">nil</span><span class="op" id="6002004">,</span>&nbsp;<span class="ident" id="6002006"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002007">.</span><span class="ident" id="6002008">X</span><span class="op" id="6002009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002012">case</span>&nbsp;<span class="op" id="6002017">*</span><span class="ident" id="6002018"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002021">.</span><span class="ident" id="6002022">ArrayType</span><span class="op" id="6002031">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002035"><a href="/go/doc/exports.go.html#6001844">r</a></span><span class="op" id="6002036">.</span><span class="ident" id="6002037">filterType</span><span class="op" id="6002047">(</span><span class="ident" id="6002048">nil</span><span class="op" id="6002051">,</span>&nbsp;<span class="ident" id="6002053"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002054">.</span><span class="ident" id="6002055">Elt</span><span class="op" id="6002058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002061">case</span>&nbsp;<span class="op" id="6002066">*</span><span class="ident" id="6002067"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002070">.</span><span class="ident" id="6002071">StructType</span><span class="op" id="6002081">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002085">if</span>&nbsp;<span class="ident" id="6002088"><a href="/go/doc/exports.go.html#6001844">r</a></span><span class="op" id="6002089">.</span><span class="ident" id="6002090">filterFieldList</span><span class="op" id="6002105">(</span><span class="ident" id="6002106"><a href="/go/doc/exports.go.html#6001866">parent</a></span><span class="op" id="6002112">,</span>&nbsp;<span class="ident" id="6002114"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002115">.</span><span class="ident" id="6002116">Fields</span><span class="op" id="6002122">,</span>&nbsp;<span class="ident" id="6002124">nil</span><span class="op" id="6002127">)</span>&nbsp;<span class="op" id="6002129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002134"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002135">.</span><span class="ident" id="6002136">Incomplete</span>&nbsp;<span class="op" id="6002147">=</span>&nbsp;<span class="ident" id="6002149">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6002156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002159">case</span>&nbsp;<span class="op" id="6002164">*</span><span class="ident" id="6002165"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002168">.</span><span class="ident" id="6002169">FuncType</span><span class="op" id="6002177">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002181"><a href="/go/doc/exports.go.html#6001844">r</a></span><span class="op" id="6002182">.</span><span class="ident" id="6002183">filterParamList</span><span class="op" id="6002198">(</span><span class="ident" id="6002199"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002200">.</span><span class="ident" id="6002201">Params</span><span class="op" id="6002207">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002211"><a href="/go/doc/exports.go.html#6001844">r</a></span><span class="op" id="6002212">.</span><span class="ident" id="6002213">filterParamList</span><span class="op" id="6002228">(</span><span class="ident" id="6002229"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002230">.</span><span class="ident" id="6002231">Results</span><span class="op" id="6002238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002241">case</span>&nbsp;<span class="op" id="6002246">*</span><span class="ident" id="6002247"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002250">.</span><span class="ident" id="6002251">InterfaceType</span><span class="op" id="6002264">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002268">if</span>&nbsp;<span class="ident" id="6002271"><a href="/go/doc/exports.go.html#6001844">r</a></span><span class="op" id="6002272">.</span><span class="ident" id="6002273">filterFieldList</span><span class="op" id="6002288">(</span><span class="ident" id="6002289"><a href="/go/doc/exports.go.html#6001866">parent</a></span><span class="op" id="6002295">,</span>&nbsp;<span class="ident" id="6002297"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002298">.</span><span class="ident" id="6002299">Methods</span><span class="op" id="6002306">,</span>&nbsp;<span class="ident" id="6002308"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002309">)</span>&nbsp;<span class="op" id="6002311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002316"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002317">.</span><span class="ident" id="6002318">Incomplete</span>&nbsp;<span class="op" id="6002329">=</span>&nbsp;<span class="ident" id="6002331">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6002338">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002341">case</span>&nbsp;<span class="op" id="6002346">*</span><span class="ident" id="6002347"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002350">.</span><span class="ident" id="6002351">MapType</span><span class="op" id="6002358">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002362"><a href="/go/doc/exports.go.html#6001844">r</a></span><span class="op" id="6002363">.</span><span class="ident" id="6002364">filterType</span><span class="op" id="6002374">(</span><span class="ident" id="6002375">nil</span><span class="op" id="6002378">,</span>&nbsp;<span class="ident" id="6002380"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002381">.</span><span class="ident" id="6002382">Key</span><span class="op" id="6002385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002389"><a href="/go/doc/exports.go.html#6001844">r</a></span><span class="op" id="6002390">.</span><span class="ident" id="6002391">filterType</span><span class="op" id="6002401">(</span><span class="ident" id="6002402">nil</span><span class="op" id="6002405">,</span>&nbsp;<span class="ident" id="6002407"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002408">.</span><span class="ident" id="6002409">Value</span><span class="op" id="6002414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002417">case</span>&nbsp;<span class="op" id="6002422">*</span><span class="ident" id="6002423"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002426">.</span><span class="ident" id="6002427">ChanType</span><span class="op" id="6002435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002439"><a href="/go/doc/exports.go.html#6001844">r</a></span><span class="op" id="6002440">.</span><span class="ident" id="6002441">filterType</span><span class="op" id="6002451">(</span><span class="ident" id="6002452">nil</span><span class="op" id="6002455">,</span>&nbsp;<span class="ident" id="6002457"><a href="/go/doc/exports.go.html#6001909">t</a></span><span class="op" id="6002458">.</span><span class="ident" id="6002459">Value</span><span class="op" id="6002464">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6002467">}</span><br>
<span class="lineno"></span><span class="op" id="6002469">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6002472">func</span>&nbsp;<span class="op" id="6002477">(</span><span class="ident" id="6002478">r</span>&nbsp;<span class="op" id="6002480">*</span><span class="ident" id="6002481"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6002487">)</span>&nbsp;<span class="ident" id="6002489">filterSpec</span><span class="op" id="6002499">(</span><span class="ident" id="6002500">spec</span>&nbsp;<span class="ident" id="6002505"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002508">.</span><span class="ident" id="6002509">Spec</span><span class="op" id="6002513">,</span>&nbsp;<span class="ident" id="6002515">tok</span>&nbsp;<span class="ident" id="6002519"><a href="/go/doc/exports.go.html#5999101">token</a></span><span class="op" id="6002524">.</span><span class="ident" id="6002525">Token</span><span class="op" id="6002530">)</span>&nbsp;<span class="builtintype" id="6002532">bool</span>&nbsp;<span class="op" id="6002537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002540">switch</span>&nbsp;<span class="ident" id="6002547">s</span>&nbsp;<span class="op" id="6002549">:=</span>&nbsp;<span class="ident" id="6002552"><a href="/go/doc/exports.go.html#6002500">spec</a></span><span class="op" id="6002556">.</span><span class="op" id="6002557">(</span><span class="keyword" id="6002558">type</span><span class="op" id="6002562">)</span>&nbsp;<span class="op" id="6002564">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002567">case</span>&nbsp;<span class="op" id="6002572">*</span><span class="ident" id="6002573"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002576">.</span><span class="ident" id="6002577">ImportSpec</span><span class="op" id="6002587">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6002591">//&nbsp;always&nbsp;keep&nbsp;imports&nbsp;so&nbsp;we&nbsp;can&nbsp;collect&nbsp;them</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002639">return</span>&nbsp;<span class="ident" id="6002646">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002652">case</span>&nbsp;<span class="op" id="6002657">*</span><span class="ident" id="6002658"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002661">.</span><span class="ident" id="6002662">ValueSpec</span><span class="op" id="6002671">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6002675">//&nbsp;special&nbsp;case:&nbsp;consider&nbsp;blank&nbsp;constants&nbsp;as&nbsp;exported</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6002731">//&nbsp;(work-around&nbsp;for&nbsp;issue&nbsp;5397)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002765"><a href="/go/doc/exports.go.html#6002547">s</a></span><span class="op" id="6002766">.</span><span class="ident" id="6002767">Names</span>&nbsp;<span class="op" id="6002773">=</span>&nbsp;<span class="ident" id="6002775"><a href="/go/doc/exports.go.html#5999292">filterIdentList</a></span><span class="op" id="6002790">(</span><span class="ident" id="6002791"><a href="/go/doc/exports.go.html#6002547">s</a></span><span class="op" id="6002792">.</span><span class="ident" id="6002793">Names</span><span class="op" id="6002798">,</span>&nbsp;<span class="ident" id="6002800"><a href="/go/doc/exports.go.html#6002515">tok</a></span>&nbsp;<span class="op" id="6002804">==</span>&nbsp;<span class="ident" id="6002807"><a href="/go/doc/exports.go.html#5999101">token</a></span><span class="op" id="6002812">.</span><span class="ident" id="6002813">CONST</span><span class="op" id="6002818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002822">if</span>&nbsp;<span class="builtinfunc" id="6002825">len</span><span class="op" id="6002828">(</span><span class="ident" id="6002829"><a href="/go/doc/exports.go.html#6002547">s</a></span><span class="op" id="6002830">.</span><span class="ident" id="6002831">Names</span><span class="op" id="6002836">)</span>&nbsp;<span class="op" id="6002838">&gt;</span>&nbsp;<span class="num" id="6002840">0</span>&nbsp;<span class="op" id="6002842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002847"><a href="/go/doc/exports.go.html#6002478">r</a></span><span class="op" id="6002848">.</span><span class="ident" id="6002849">filterType</span><span class="op" id="6002859">(</span><span class="ident" id="6002860">nil</span><span class="op" id="6002863">,</span>&nbsp;<span class="ident" id="6002865"><a href="/go/doc/exports.go.html#6002547">s</a></span><span class="op" id="6002866">.</span><span class="ident" id="6002867">Type</span><span class="op" id="6002871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002876">return</span>&nbsp;<span class="ident" id="6002883">true</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6002890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002893">case</span>&nbsp;<span class="op" id="6002898">*</span><span class="ident" id="6002899"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002902">.</span><span class="ident" id="6002903">TypeSpec</span><span class="op" id="6002911">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6002915">if</span>&nbsp;<span class="ident" id="6002918">name</span>&nbsp;<span class="op" id="6002923">:=</span>&nbsp;<span class="ident" id="6002926"><a href="/go/doc/exports.go.html#6002547">s</a></span><span class="op" id="6002927">.</span><span class="ident" id="6002928">Name</span><span class="op" id="6002932">.</span><span class="ident" id="6002933">Name</span><span class="op" id="6002937">;</span>&nbsp;<span class="ident" id="6002939"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6002942">.</span><span class="ident" id="6002943">IsExported</span><span class="op" id="6002953">(</span><span class="ident" id="6002954"><a href="/go/doc/exports.go.html#6002918">name</a></span><span class="op" id="6002958">)</span>&nbsp;<span class="op" id="6002960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6002965"><a href="/go/doc/exports.go.html#6002478">r</a></span><span class="op" id="6002966">.</span><span class="ident" id="6002967">filterType</span><span class="op" id="6002977">(</span><span class="ident" id="6002978"><a href="/go/doc/exports.go.html#6002478">r</a></span><span class="op" id="6002979">.</span><span class="ident" id="6002980">lookupType</span><span class="op" id="6002990">(</span><span class="ident" id="6002991"><a href="/go/doc/exports.go.html#6002547">s</a></span><span class="op" id="6002992">.</span><span class="ident" id="6002993">Name</span><span class="op" id="6002997">.</span><span class="ident" id="6002998">Name</span><span class="op" id="6003002">)</span><span class="op" id="6003003">,</span>&nbsp;<span class="ident" id="6003005"><a href="/go/doc/exports.go.html#6002547">s</a></span><span class="op" id="6003006">.</span><span class="ident" id="6003007">Type</span><span class="op" id="6003011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003016">return</span>&nbsp;<span class="ident" id="6003023">true</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6003030">}</span>&nbsp;<span class="keyword" id="6003032">else</span>&nbsp;<span class="keyword" id="6003037">if</span>&nbsp;<span class="ident" id="6003040"><a href="/go/doc/exports.go.html#6002918">name</a></span>&nbsp;<span class="op" id="6003045">==</span>&nbsp;<span class="string" id="6003048">&#34;error&#34;</span>&nbsp;<span class="op" id="6003056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6003061">//&nbsp;special&nbsp;case:&nbsp;remember&nbsp;that&nbsp;error&nbsp;is&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6003121"><a href="/go/doc/exports.go.html#6002478">r</a></span><span class="op" id="6003122">.</span><span class="ident" id="6003123">errorDecl</span>&nbsp;<span class="op" id="6003133">=</span>&nbsp;<span class="ident" id="6003135">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6003142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6003145">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003148">return</span>&nbsp;<span class="ident" id="6003155">false</span><br>
<span class="lineno"></span><span class="op" id="6003161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6003164">func</span>&nbsp;<span class="op" id="6003169">(</span><span class="ident" id="6003170">r</span>&nbsp;<span class="op" id="6003172">*</span><span class="ident" id="6003173"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6003179">)</span>&nbsp;<span class="ident" id="6003181">filterSpecList</span><span class="op" id="6003195">(</span><span class="ident" id="6003196">list</span>&nbsp;<span class="op" id="6003201">[</span><span class="op" id="6003202">]</span><span class="ident" id="6003203"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6003206">.</span><span class="ident" id="6003207">Spec</span><span class="op" id="6003211">,</span>&nbsp;<span class="ident" id="6003213">tok</span>&nbsp;<span class="ident" id="6003217"><a href="/go/doc/exports.go.html#5999101">token</a></span><span class="op" id="6003222">.</span><span class="ident" id="6003223">Token</span><span class="op" id="6003228">)</span>&nbsp;<span class="op" id="6003230">[</span><span class="op" id="6003231">]</span><span class="ident" id="6003232"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6003235">.</span><span class="ident" id="6003236">Spec</span>&nbsp;<span class="op" id="6003241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6003244">j</span>&nbsp;<span class="op" id="6003246">:=</span>&nbsp;<span class="num" id="6003249">0</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003252">for</span>&nbsp;<span class="ident" id="6003256">_</span><span class="op" id="6003257">,</span>&nbsp;<span class="ident" id="6003259">s</span>&nbsp;<span class="op" id="6003261">:=</span>&nbsp;<span class="keyword" id="6003264">range</span>&nbsp;<span class="ident" id="6003270"><a href="/go/doc/exports.go.html#6003196">list</a></span>&nbsp;<span class="op" id="6003275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003279">if</span>&nbsp;<span class="ident" id="6003282"><a href="/go/doc/exports.go.html#6003170">r</a></span><span class="op" id="6003283">.</span><span class="ident" id="6003284">filterSpec</span><span class="op" id="6003294">(</span><span class="ident" id="6003295"><a href="/go/doc/exports.go.html#6003259">s</a></span><span class="op" id="6003296">,</span>&nbsp;<span class="ident" id="6003298"><a href="/go/doc/exports.go.html#6003213">tok</a></span><span class="op" id="6003301">)</span>&nbsp;<span class="op" id="6003303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6003308"><a href="/go/doc/exports.go.html#6003196">list</a></span><span class="op" id="6003312">[</span><span class="ident" id="6003313"><a href="/go/doc/exports.go.html#6003244">j</a></span><span class="op" id="6003314">]</span>&nbsp;<span class="op" id="6003316">=</span>&nbsp;<span class="ident" id="6003318"><a href="/go/doc/exports.go.html#6003259">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6003323"><a href="/go/doc/exports.go.html#6003244">j</a></span><span class="op" id="6003324">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6003329">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6003332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003335">return</span>&nbsp;<span class="ident" id="6003342"><a href="/go/doc/exports.go.html#6003196">list</a></span><span class="op" id="6003346">[</span><span class="num" id="6003347">0</span><span class="op" id="6003348">:</span><span class="ident" id="6003349"><a href="/go/doc/exports.go.html#6003244">j</a></span><span class="op" id="6003350">]</span><br>
<span class="lineno"></span><span class="op" id="6003352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6003355">func</span>&nbsp;<span class="op" id="6003360">(</span><span class="ident" id="6003361">r</span>&nbsp;<span class="op" id="6003363">*</span><span class="ident" id="6003364"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6003370">)</span>&nbsp;<span class="ident" id="6003372">filterDecl</span><span class="op" id="6003382">(</span><span class="ident" id="6003383">decl</span>&nbsp;<span class="ident" id="6003388"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6003391">.</span><span class="ident" id="6003392">Decl</span><span class="op" id="6003396">)</span>&nbsp;<span class="builtintype" id="6003398">bool</span>&nbsp;<span class="op" id="6003403">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003406">switch</span>&nbsp;<span class="ident" id="6003413">d</span>&nbsp;<span class="op" id="6003415">:=</span>&nbsp;<span class="ident" id="6003418"><a href="/go/doc/exports.go.html#6003383">decl</a></span><span class="op" id="6003422">.</span><span class="op" id="6003423">(</span><span class="keyword" id="6003424">type</span><span class="op" id="6003428">)</span>&nbsp;<span class="op" id="6003430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003433">case</span>&nbsp;<span class="op" id="6003438">*</span><span class="ident" id="6003439"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6003442">.</span><span class="ident" id="6003443">GenDecl</span><span class="op" id="6003450">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6003454"><a href="/go/doc/exports.go.html#6003413">d</a></span><span class="op" id="6003455">.</span><span class="ident" id="6003456">Specs</span>&nbsp;<span class="op" id="6003462">=</span>&nbsp;<span class="ident" id="6003464"><a href="/go/doc/exports.go.html#6003361">r</a></span><span class="op" id="6003465">.</span><span class="ident" id="6003466">filterSpecList</span><span class="op" id="6003480">(</span><span class="ident" id="6003481"><a href="/go/doc/exports.go.html#6003413">d</a></span><span class="op" id="6003482">.</span><span class="ident" id="6003483">Specs</span><span class="op" id="6003488">,</span>&nbsp;<span class="ident" id="6003490"><a href="/go/doc/exports.go.html#6003413">d</a></span><span class="op" id="6003491">.</span><span class="ident" id="6003492">Tok</span><span class="op" id="6003495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003499">return</span>&nbsp;<span class="builtinfunc" id="6003506">len</span><span class="op" id="6003509">(</span><span class="ident" id="6003510"><a href="/go/doc/exports.go.html#6003413">d</a></span><span class="op" id="6003511">.</span><span class="ident" id="6003512">Specs</span><span class="op" id="6003517">)</span>&nbsp;<span class="op" id="6003519">&gt;</span>&nbsp;<span class="num" id="6003521">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003524">case</span>&nbsp;<span class="op" id="6003529">*</span><span class="ident" id="6003530"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6003533">.</span><span class="ident" id="6003534">FuncDecl</span><span class="op" id="6003542">:</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6003546">//&nbsp;ok&nbsp;to&nbsp;filter&nbsp;these&nbsp;methods&nbsp;early&nbsp;because&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6003596">//&nbsp;conflicting&nbsp;method&nbsp;will&nbsp;be&nbsp;filtered&nbsp;here,&nbsp;too&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6003649">//&nbsp;thus,&nbsp;removing&nbsp;these&nbsp;methods&nbsp;early&nbsp;will&nbsp;not&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6003703">//&nbsp;to&nbsp;the&nbsp;false&nbsp;removal&nbsp;of&nbsp;possible&nbsp;conflicts</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003751">return</span>&nbsp;<span class="ident" id="6003758"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6003761">.</span><span class="ident" id="6003762">IsExported</span><span class="op" id="6003772">(</span><span class="ident" id="6003773"><a href="/go/doc/exports.go.html#6003413">d</a></span><span class="op" id="6003774">.</span><span class="ident" id="6003775">Name</span><span class="op" id="6003779">.</span><span class="ident" id="6003780">Name</span><span class="op" id="6003784">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6003787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003790">return</span>&nbsp;<span class="ident" id="6003797">false</span><br>
<span class="lineno"></span><span class="op" id="6003803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6003806">//&nbsp;fileExports&nbsp;removes&nbsp;unexported&nbsp;declarations&nbsp;from&nbsp;src&nbsp;in&nbsp;place.</span><br>
<span class="lineno">195</span><span class="comment" id="6003872">//</span><br>
<span class="lineno"></span><span class="keyword" id="6003875">func</span>&nbsp;<span class="op" id="6003880">(</span><span class="ident" id="6003881">r</span>&nbsp;<span class="op" id="6003883">*</span><span class="ident" id="6003884"><a href="/go/doc/reader.go.html#6010306">reader</a></span><span class="op" id="6003890">)</span>&nbsp;<span class="ident" id="6003892">fileExports</span><span class="op" id="6003903">(</span><span class="ident" id="6003904">src</span>&nbsp;<span class="op" id="6003908">*</span><span class="ident" id="6003909"><a href="/go/doc/exports.go.html#5999091">ast</a></span><span class="op" id="6003912">.</span><span class="ident" id="6003913">File</span><span class="op" id="6003917">)</span>&nbsp;<span class="op" id="6003919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6003922">j</span>&nbsp;<span class="op" id="6003924">:=</span>&nbsp;<span class="num" id="6003927">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003930">for</span>&nbsp;<span class="ident" id="6003934">_</span><span class="op" id="6003935">,</span>&nbsp;<span class="ident" id="6003937">d</span>&nbsp;<span class="op" id="6003939">:=</span>&nbsp;<span class="keyword" id="6003942">range</span>&nbsp;<span class="ident" id="6003948"><a href="/go/doc/exports.go.html#6003904">src</a></span><span class="op" id="6003951">.</span><span class="ident" id="6003952">Decls</span>&nbsp;<span class="op" id="6003958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6003962">if</span>&nbsp;<span class="ident" id="6003965"><a href="/go/doc/exports.go.html#6003881">r</a></span><span class="op" id="6003966">.</span><span class="ident" id="6003967">filterDecl</span><span class="op" id="6003977">(</span><span class="ident" id="6003978"><a href="/go/doc/exports.go.html#6003937">d</a></span><span class="op" id="6003979">)</span>&nbsp;<span class="op" id="6003981">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6003986"><a href="/go/doc/exports.go.html#6003904">src</a></span><span class="op" id="6003989">.</span><span class="ident" id="6003990">Decls</span><span class="op" id="6003995">[</span><span class="ident" id="6003996"><a href="/go/doc/exports.go.html#6003922">j</a></span><span class="op" id="6003997">]</span>&nbsp;<span class="op" id="6003999">=</span>&nbsp;<span class="ident" id="6004001"><a href="/go/doc/exports.go.html#6003937">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6004006"><a href="/go/doc/exports.go.html#6003922">j</a></span><span class="op" id="6004007">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6004012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6004015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6004018"><a href="/go/doc/exports.go.html#6003904">src</a></span><span class="op" id="6004021">.</span><span class="ident" id="6004022">Decls</span>&nbsp;<span class="op" id="6004028">=</span>&nbsp;<span class="ident" id="6004030"><a href="/go/doc/exports.go.html#6003904">src</a></span><span class="op" id="6004033">.</span><span class="ident" id="6004034">Decls</span><span class="op" id="6004039">[</span><span class="num" id="6004040">0</span><span class="op" id="6004041">:</span><span class="ident" id="6004042"><a href="/go/doc/exports.go.html#6003922">j</a></span><span class="op" id="6004043">]</span><br>
<span class="lineno">205</span><span class="op" id="6004045">}</span>
</div>
</body>
</html>
