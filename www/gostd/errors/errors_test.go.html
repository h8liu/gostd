<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="180030">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="180086">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="180140">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="180191">package</span>&nbsp;<span class="ident" id="180199">errors_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="180212">import</span>&nbsp;<span class="op" id="180219">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="180222">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="180232">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="180239">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="180249">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="180252">func</span>&nbsp;<span class="ident" id="180257">TestNewEqual</span><span class="op" id="180269">(</span><span class="ident" id="180270">t</span>&nbsp;<span class="op" id="180272">*</span><span class="ident" id="180273">testing</span><span class="op" id="180280">.</span><span class="ident" id="180281">T</span><span class="op" id="180282">)</span>&nbsp;<span class="op" id="180284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="180287">//&nbsp;Different&nbsp;allocations&nbsp;should&nbsp;not&nbsp;be&nbsp;equal.</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="180334">if</span>&nbsp;<span class="ident" id="180337">errors</span><span class="op" id="180343">.</span><span class="ident" id="180344">New</span><span class="op" id="180347">(</span><span class="string" id="180348">&#34;abc&#34;</span><span class="op" id="180353">)</span>&nbsp;<span class="op" id="180355">==</span>&nbsp;<span class="ident" id="180358">errors</span><span class="op" id="180364">.</span><span class="ident" id="180365">New</span><span class="op" id="180368">(</span><span class="string" id="180369">&#34;abc&#34;</span><span class="op" id="180374">)</span>&nbsp;<span class="op" id="180376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="180380">t</span><span class="op" id="180381">.</span><span class="ident" id="180382">Errorf</span><span class="op" id="180388">(</span><span class="string" id="180389">`New(&#34;abc&#34;)&nbsp;==&nbsp;New(&#34;abc&#34;)`</span><span class="op" id="180415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="180418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="180421">if</span>&nbsp;<span class="ident" id="180424">errors</span><span class="op" id="180430">.</span><span class="ident" id="180431">New</span><span class="op" id="180434">(</span><span class="string" id="180435">&#34;abc&#34;</span><span class="op" id="180440">)</span>&nbsp;<span class="op" id="180442">==</span>&nbsp;<span class="ident" id="180445">errors</span><span class="op" id="180451">.</span><span class="ident" id="180452">New</span><span class="op" id="180455">(</span><span class="string" id="180456">&#34;xyz&#34;</span><span class="op" id="180461">)</span>&nbsp;<span class="op" id="180463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="180467">t</span><span class="op" id="180468">.</span><span class="ident" id="180469">Errorf</span><span class="op" id="180475">(</span><span class="string" id="180476">`New(&#34;abc&#34;)&nbsp;==&nbsp;New(&#34;xyz&#34;)`</span><span class="op" id="180502">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="180505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="180509">//&nbsp;Same&nbsp;allocation&nbsp;should&nbsp;be&nbsp;equal&nbsp;to&nbsp;itself&nbsp;(not&nbsp;crash).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="180568">err</span>&nbsp;<span class="op" id="180572">:=</span>&nbsp;<span class="ident" id="180575">errors</span><span class="op" id="180581">.</span><span class="ident" id="180582">New</span><span class="op" id="180585">(</span><span class="string" id="180586">&#34;jkl&#34;</span><span class="op" id="180591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="180594">if</span>&nbsp;<span class="ident" id="180597">err</span>&nbsp;<span class="op" id="180601">!=</span>&nbsp;<span class="ident" id="180604">err</span>&nbsp;<span class="op" id="180608">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="180612">t</span><span class="op" id="180613">.</span><span class="ident" id="180614">Errorf</span><span class="op" id="180620">(</span><span class="string" id="180621">`err&nbsp;!=&nbsp;err`</span><span class="op" id="180633">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="180636">}</span><br>
<span class="lineno"></span><span class="op" id="180638">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="180641">func</span>&nbsp;<span class="ident" id="180646">TestErrorMethod</span><span class="op" id="180661">(</span><span class="ident" id="180662">t</span>&nbsp;<span class="op" id="180664">*</span><span class="ident" id="180665">testing</span><span class="op" id="180672">.</span><span class="ident" id="180673">T</span><span class="op" id="180674">)</span>&nbsp;<span class="op" id="180676">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="180679">err</span>&nbsp;<span class="op" id="180683">:=</span>&nbsp;<span class="ident" id="180686">errors</span><span class="op" id="180692">.</span><span class="ident" id="180693">New</span><span class="op" id="180696">(</span><span class="string" id="180697">&#34;abc&#34;</span><span class="op" id="180702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="180705">if</span>&nbsp;<span class="ident" id="180708">err</span><span class="op" id="180711">.</span><span class="ident" id="180712">Error</span><span class="op" id="180717">(</span><span class="op" id="180718">)</span>&nbsp;<span class="op" id="180720">!=</span>&nbsp;<span class="string" id="180723">&#34;abc&#34;</span>&nbsp;<span class="op" id="180729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="180733">t</span><span class="op" id="180734">.</span><span class="ident" id="180735">Errorf</span><span class="op" id="180741">(</span><span class="string" id="180742">`New(&#34;abc&#34;).Error()&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="180776">,</span>&nbsp;<span class="ident" id="180778">err</span><span class="op" id="180781">.</span><span class="ident" id="180782">Error</span><span class="op" id="180787">(</span><span class="op" id="180788">)</span><span class="op" id="180789">,</span>&nbsp;<span class="string" id="180791">&#34;abc&#34;</span><span class="op" id="180796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="180799">}</span><br>
<span class="lineno"></span><span class="op" id="180801">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="180804">func</span>&nbsp;<span class="ident" id="180809">ExampleNew</span><span class="op" id="180819">(</span><span class="op" id="180820">)</span>&nbsp;<span class="op" id="180822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="180825">err</span>&nbsp;<span class="op" id="180829">:=</span>&nbsp;<span class="ident" id="180832">errors</span><span class="op" id="180838">.</span><span class="ident" id="180839">New</span><span class="op" id="180842">(</span><span class="string" id="180843">&#34;emit&nbsp;macho&nbsp;dwarf:&nbsp;elf&nbsp;header&nbsp;corrupted&#34;</span><span class="op" id="180883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="180886">if</span>&nbsp;<span class="ident" id="180889">err</span>&nbsp;<span class="op" id="180893">!=</span>&nbsp;<span class="ident" id="180896">nil</span>&nbsp;<span class="op" id="180900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="180904">fmt</span><span class="op" id="180907">.</span><span class="ident" id="180908">Print</span><span class="op" id="180913">(</span><span class="ident" id="180914">err</span><span class="op" id="180917">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="180920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="180923">//&nbsp;Output:&nbsp;emit&nbsp;macho&nbsp;dwarf:&nbsp;elf&nbsp;header&nbsp;corrupted</span><br>
<span class="lineno"></span><span class="op" id="180973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="180976">//&nbsp;The&nbsp;fmt&nbsp;package&#39;s&nbsp;Errorf&nbsp;function&nbsp;lets&nbsp;us&nbsp;use&nbsp;the&nbsp;package&#39;s&nbsp;formatting</span><br>
<span class="lineno">45</span><span class="comment" id="181050">//&nbsp;features&nbsp;to&nbsp;create&nbsp;descriptive&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="181100">func</span>&nbsp;<span class="ident" id="181105">ExampleNew_errorf</span><span class="op" id="181122">(</span><span class="op" id="181123">)</span>&nbsp;<span class="op" id="181125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="181128">const</span>&nbsp;<span class="ident" id="181134">name</span><span class="op" id="181138">,</span>&nbsp;<span class="ident" id="181140">id</span>&nbsp;<span class="op" id="181143">=</span>&nbsp;<span class="string" id="181145">&#34;bimmler&#34;</span><span class="op" id="181154">,</span>&nbsp;<span class="num" id="181156">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="181160">err</span>&nbsp;<span class="op" id="181164">:=</span>&nbsp;<span class="ident" id="181167">fmt</span><span class="op" id="181170">.</span><span class="ident" id="181171">Errorf</span><span class="op" id="181177">(</span><span class="string" id="181178">&#34;user&nbsp;%q&nbsp;(id&nbsp;%d)&nbsp;not&nbsp;found&#34;</span><span class="op" id="181205">,</span>&nbsp;<span class="ident" id="181207">name</span><span class="op" id="181211">,</span>&nbsp;<span class="ident" id="181213">id</span><span class="op" id="181215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="181218">if</span>&nbsp;<span class="ident" id="181221">err</span>&nbsp;<span class="op" id="181225">!=</span>&nbsp;<span class="ident" id="181228">nil</span>&nbsp;<span class="op" id="181232">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="181236">fmt</span><span class="op" id="181239">.</span><span class="ident" id="181240">Print</span><span class="op" id="181245">(</span><span class="ident" id="181246">err</span><span class="op" id="181249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="181252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="181255">//&nbsp;Output:&nbsp;user&nbsp;&#34;bimmler&#34;&nbsp;(id&nbsp;17)&nbsp;not&nbsp;found</span><br>
<span class="lineno"></span><span class="op" id="181299">}</span>
</div>
</body>
</html>
