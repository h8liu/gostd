<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/xml</h2>
<ul>
<li><a href="/gostd/encoding/xml/atom_test.go.html">atom_test.go</a></li>
<li><a href="/gostd/encoding/xml/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/xml/marshal.go.html" class="current">marshal.go</a></li>
<li><a href="/gostd/encoding/xml/marshal_test.go.html">marshal_test.go</a></li>
<li><a href="/gostd/encoding/xml/read.go.html">read.go</a></li>
<li><a href="/gostd/encoding/xml/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/encoding/xml/typeinfo.go.html">typeinfo.go</a></li>
<li><a href="/gostd/encoding/xml/xml.go.html">xml.go</a></li>
<li><a href="/gostd/encoding/xml/xml_test.go.html">xml_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6184492">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6184547">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6184601">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6184652">package</span>&nbsp;<span class="ident" id="6184660">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6184665">import</span>&nbsp;<span class="op" id="6184672">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6184675">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6184684">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6184693">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6184705">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6184712">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6184718">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6184729">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6184740">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="6184750">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6184753">const</span>&nbsp;<span class="op" id="6184759">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6184762">//&nbsp;A&nbsp;generic&nbsp;XML&nbsp;header&nbsp;suitable&nbsp;for&nbsp;use&nbsp;with&nbsp;the&nbsp;output&nbsp;of&nbsp;Marshal.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6184832">//&nbsp;This&nbsp;is&nbsp;not&nbsp;automatically&nbsp;added&nbsp;to&nbsp;any&nbsp;output&nbsp;of&nbsp;this&nbsp;package,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6184899">//&nbsp;it&nbsp;is&nbsp;provided&nbsp;as&nbsp;a&nbsp;convenience.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6184936">Header</span>&nbsp;<span class="op" id="6184943">=</span>&nbsp;<span class="string" id="6184945">`&lt;?xml&nbsp;version=&#34;1.0&#34;&nbsp;encoding=&#34;UTF-8&#34;?&gt;`</span>&nbsp;<span class="op" id="6184986">+</span>&nbsp;<span class="string" id="6184988">&#34;\n&#34;</span><br>
<span class="lineno"></span><span class="op" id="6184993">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6184996">//&nbsp;Marshal&nbsp;returns&nbsp;the&nbsp;XML&nbsp;encoding&nbsp;of&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="6185038">//</span><br>
<span class="lineno"></span><span class="comment" id="6185041">//&nbsp;Marshal&nbsp;handles&nbsp;an&nbsp;array&nbsp;or&nbsp;slice&nbsp;by&nbsp;marshalling&nbsp;each&nbsp;of&nbsp;the&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="6185115">//&nbsp;Marshal&nbsp;handles&nbsp;a&nbsp;pointer&nbsp;by&nbsp;marshalling&nbsp;the&nbsp;value&nbsp;it&nbsp;points&nbsp;at&nbsp;or,&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6185193">//&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;by&nbsp;writing&nbsp;nothing.&nbsp;&nbsp;Marshal&nbsp;handles&nbsp;an&nbsp;interface&nbsp;value&nbsp;by</span><br>
<span class="lineno">30</span><span class="comment" id="6185271">//&nbsp;marshalling&nbsp;the&nbsp;value&nbsp;it&nbsp;contains&nbsp;or,&nbsp;if&nbsp;the&nbsp;interface&nbsp;value&nbsp;is&nbsp;nil,&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="6185346">//&nbsp;writing&nbsp;nothing.&nbsp;&nbsp;Marshal&nbsp;handles&nbsp;all&nbsp;other&nbsp;data&nbsp;by&nbsp;writing&nbsp;one&nbsp;or&nbsp;more&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="6185425">//&nbsp;elements&nbsp;containing&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="6185458">//</span><br>
<span class="lineno"></span><span class="comment" id="6185461">//&nbsp;The&nbsp;name&nbsp;for&nbsp;the&nbsp;XML&nbsp;elements&nbsp;is&nbsp;taken&nbsp;from,&nbsp;in&nbsp;order&nbsp;of&nbsp;preference:</span><br>
<span class="lineno">35</span><span class="comment" id="6185533">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;tag&nbsp;on&nbsp;the&nbsp;XMLName&nbsp;field,&nbsp;if&nbsp;the&nbsp;data&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6185596">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;of&nbsp;type&nbsp;xml.Name</span><br>
<span class="lineno"></span><span class="comment" id="6185653">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;tag&nbsp;of&nbsp;the&nbsp;struct&nbsp;field&nbsp;used&nbsp;to&nbsp;obtain&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="6185714">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;struct&nbsp;field&nbsp;used&nbsp;to&nbsp;obtain&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="6185776">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;marshalled&nbsp;type</span><br>
<span class="lineno">40</span><span class="comment" id="6185817">//</span><br>
<span class="lineno"></span><span class="comment" id="6185820">//&nbsp;The&nbsp;XML&nbsp;element&nbsp;for&nbsp;a&nbsp;struct&nbsp;contains&nbsp;marshalled&nbsp;elements&nbsp;for&nbsp;each&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6185897">//&nbsp;exported&nbsp;fields&nbsp;of&nbsp;the&nbsp;struct,&nbsp;with&nbsp;these&nbsp;exceptions:</span><br>
<span class="lineno"></span><span class="comment" id="6185954">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;XMLName&nbsp;field,&nbsp;described&nbsp;above,&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno"></span><span class="comment" id="6186011">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;omitted.</span><br>
<span class="lineno">45</span><span class="comment" id="6186053">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;name,attr&#34;&nbsp;becomes&nbsp;an&nbsp;attribute&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="6186117">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6186161">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,attr&#34;&nbsp;becomes&nbsp;an&nbsp;attribute&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6186225">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;name&nbsp;in&nbsp;the&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6186265">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,chardata&#34;&nbsp;is&nbsp;written&nbsp;as&nbsp;character&nbsp;data,</span><br>
<span class="lineno">50</span><span class="comment" id="6186333">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;as&nbsp;an&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6186365">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,innerxml&#34;&nbsp;is&nbsp;written&nbsp;verbatim,&nbsp;not&nbsp;subject</span><br>
<span class="lineno"></span><span class="comment" id="6186436">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;usual&nbsp;marshalling&nbsp;procedure.</span><br>
<span class="lineno"></span><span class="comment" id="6186481">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,comment&#34;&nbsp;is&nbsp;written&nbsp;as&nbsp;an&nbsp;XML&nbsp;comment,&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="6186552">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subject&nbsp;to&nbsp;the&nbsp;usual&nbsp;marshalling&nbsp;procedure.&nbsp;It&nbsp;must&nbsp;not&nbsp;contain</span><br>
<span class="lineno">55</span><span class="comment" id="6186625">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;&#34;--&#34;&nbsp;string&nbsp;within&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="6186661">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;field&nbsp;with&nbsp;a&nbsp;tag&nbsp;including&nbsp;the&nbsp;&#34;omitempty&#34;&nbsp;option&nbsp;is&nbsp;omitted</span><br>
<span class="lineno"></span><span class="comment" id="6186733">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;the&nbsp;field&nbsp;value&nbsp;is&nbsp;empty.&nbsp;The&nbsp;empty&nbsp;values&nbsp;are&nbsp;false,&nbsp;0,&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="6186806">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nil&nbsp;pointer&nbsp;or&nbsp;interface&nbsp;value,&nbsp;and&nbsp;any&nbsp;array,&nbsp;slice,&nbsp;map,&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6186877">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;of&nbsp;length&nbsp;zero.</span><br>
<span class="lineno">60</span><span class="comment" id="6186909">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;an&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="6186979">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="6187025">//</span><br>
<span class="lineno"></span><span class="comment" id="6187028">//&nbsp;If&nbsp;a&nbsp;field&nbsp;uses&nbsp;a&nbsp;tag&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;then&nbsp;the&nbsp;element&nbsp;c&nbsp;will&nbsp;be&nbsp;nested&nbsp;inside</span><br>
<span class="lineno"></span><span class="comment" id="6187103">//&nbsp;parent&nbsp;elements&nbsp;a&nbsp;and&nbsp;b.&nbsp;&nbsp;Fields&nbsp;that&nbsp;appear&nbsp;next&nbsp;to&nbsp;each&nbsp;other&nbsp;that&nbsp;name</span><br>
<span class="lineno">65</span><span class="comment" id="6187180">//&nbsp;the&nbsp;same&nbsp;parent&nbsp;will&nbsp;be&nbsp;enclosed&nbsp;in&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6187236">//</span><br>
<span class="lineno"></span><span class="comment" id="6187239">//&nbsp;See&nbsp;MarshalIndent&nbsp;for&nbsp;an&nbsp;example.</span><br>
<span class="lineno"></span><span class="comment" id="6187276">//</span><br>
<span class="lineno"></span><span class="comment" id="6187279">//&nbsp;Marshal&nbsp;will&nbsp;return&nbsp;an&nbsp;error&nbsp;if&nbsp;asked&nbsp;to&nbsp;marshal&nbsp;a&nbsp;channel,&nbsp;function,&nbsp;or&nbsp;map.</span><br>
<span class="lineno">70</span><span class="keyword" id="6187360">func</span>&nbsp;<span class="ident" id="6187365">Marshal</span><span class="op" id="6187372">(</span><span class="ident" id="6187373">v</span>&nbsp;<span class="keyword" id="6187375">interface</span><span class="op" id="6187384">{</span><span class="op" id="6187385">}</span><span class="op" id="6187386">)</span>&nbsp;<span class="op" id="6187388">(</span><span class="op" id="6187389">[</span><span class="op" id="6187390">]</span><span class="builtintype" id="6187391">byte</span><span class="op" id="6187395">,</span>&nbsp;<span class="builtintype" id="6187397">error</span><span class="op" id="6187402">)</span>&nbsp;<span class="op" id="6187404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6187407">var</span>&nbsp;<span class="ident" id="6187411">b</span>&nbsp;<span class="ident" id="6187413"><a href="/gostd/encoding/xml/marshal.go.html#6184684">bytes</a></span><span class="op" id="6187418">.</span><span class="ident" id="6187419"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6187427">if</span>&nbsp;<span class="ident" id="6187430">err</span>&nbsp;<span class="op" id="6187434">:=</span>&nbsp;<span class="ident" id="6187437"><a href="/gostd/encoding/xml/marshal.go.html#6189597">NewEncoder</a></span><span class="op" id="6187447">(</span><span class="op" id="6187448">&amp;</span><span class="ident" id="6187449"><a href="/gostd/encoding/xml/marshal.go.html#6187411">b</a></span><span class="op" id="6187450">)</span><span class="op" id="6187451">.</span><span class="ident" id="6187452"><a href="/gostd/encoding/xml/marshal.go.html#6190234">Encode</a></span><span class="op" id="6187458">(</span><span class="ident" id="6187459"><a href="/gostd/encoding/xml/marshal.go.html#6187373">v</a></span><span class="op" id="6187460">)</span><span class="op" id="6187461">;</span>&nbsp;<span class="ident" id="6187463"><a href="/gostd/encoding/xml/marshal.go.html#6187430">err</a></span>&nbsp;<span class="op" id="6187467">!=</span>&nbsp;<span class="builtintype" id="6187470">nil</span>&nbsp;<span class="op" id="6187474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6187478">return</span>&nbsp;<span class="builtintype" id="6187485">nil</span><span class="op" id="6187488">,</span>&nbsp;<span class="ident" id="6187490"><a href="/gostd/encoding/xml/marshal.go.html#6187430">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6187495">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6187498">return</span>&nbsp;<span class="ident" id="6187505"><a href="/gostd/encoding/xml/marshal.go.html#6187411">b</a></span><span class="op" id="6187506">.</span><span class="ident" id="6187507"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="6187512">(</span><span class="op" id="6187513">)</span><span class="op" id="6187514">,</span>&nbsp;<span class="builtintype" id="6187516">nil</span><br>
<span class="lineno"></span><span class="op" id="6187520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6187523">//&nbsp;Marshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;marshal</span><br>
<span class="lineno"></span><span class="comment" id="6187593">//&nbsp;themselves&nbsp;into&nbsp;valid&nbsp;XML&nbsp;elements.</span><br>
<span class="lineno">80</span><span class="comment" id="6187632">//</span><br>
<span class="lineno"></span><span class="comment" id="6187635">//&nbsp;MarshalXML&nbsp;encodes&nbsp;the&nbsp;receiver&nbsp;as&nbsp;zero&nbsp;or&nbsp;more&nbsp;XML&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="6187700">//&nbsp;By&nbsp;convention,&nbsp;arrays&nbsp;or&nbsp;slices&nbsp;are&nbsp;typically&nbsp;encoded&nbsp;as&nbsp;a&nbsp;sequence</span><br>
<span class="lineno"></span><span class="comment" id="6187771">//&nbsp;of&nbsp;elements,&nbsp;one&nbsp;per&nbsp;entry.</span><br>
<span class="lineno"></span><span class="comment" id="6187802">//&nbsp;Using&nbsp;start&nbsp;as&nbsp;the&nbsp;element&nbsp;tag&nbsp;is&nbsp;not&nbsp;required,&nbsp;but&nbsp;doing&nbsp;so</span><br>
<span class="lineno">85</span><span class="comment" id="6187866">//&nbsp;will&nbsp;enable&nbsp;Unmarshal&nbsp;to&nbsp;match&nbsp;the&nbsp;XML&nbsp;elements&nbsp;to&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span><span class="comment" id="6187932">//&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6187949">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;construct&nbsp;a&nbsp;separate</span><br>
<span class="lineno"></span><span class="comment" id="6188014">//&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;desired&nbsp;XML&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="6188079">//&nbsp;to&nbsp;encode&nbsp;it&nbsp;using&nbsp;e.EncodeElement.</span><br>
<span class="lineno">90</span><span class="comment" id="6188118">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;e.EncodeToken</span><br>
<span class="lineno"></span><span class="comment" id="6188187">//&nbsp;to&nbsp;generate&nbsp;the&nbsp;XML&nbsp;output&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span><span class="comment" id="6188238">//&nbsp;The&nbsp;sequence&nbsp;of&nbsp;encoded&nbsp;tokens&nbsp;must&nbsp;make&nbsp;up&nbsp;zero&nbsp;or&nbsp;more&nbsp;valid</span><br>
<span class="lineno"></span><span class="comment" id="6188304">//&nbsp;XML&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="6188321">type</span>&nbsp;<span class="ident" id="6188326">Marshaler</span>&nbsp;<span class="keyword" id="6188336">interface</span>&nbsp;<span class="op" id="6188346">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6188349">MarshalXML</span><span class="op" id="6188359">(</span><span class="ident" id="6188360">e</span>&nbsp;<span class="op" id="6188362">*</span><span class="ident" id="6188363"><a href="/gostd/encoding/xml/marshal.go.html#6189507">Encoder</a></span><span class="op" id="6188370">,</span>&nbsp;<span class="ident" id="6188372">start</span>&nbsp;<span class="ident" id="6188378"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><span class="op" id="6188390">)</span>&nbsp;<span class="builtintype" id="6188392">error</span><br>
<span class="lineno"></span><span class="op" id="6188398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6188401">//&nbsp;MarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;marshal</span><br>
<span class="lineno"></span><span class="comment" id="6188475">//&nbsp;themselves&nbsp;into&nbsp;valid&nbsp;XML&nbsp;attributes.</span><br>
<span class="lineno">100</span><span class="comment" id="6188516">//</span><br>
<span class="lineno"></span><span class="comment" id="6188519">//&nbsp;MarshalXMLAttr&nbsp;returns&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;with&nbsp;the&nbsp;encoded&nbsp;value&nbsp;of&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="6188602">//&nbsp;Using&nbsp;name&nbsp;as&nbsp;the&nbsp;attribute&nbsp;name&nbsp;is&nbsp;not&nbsp;required,&nbsp;but&nbsp;doing&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="6188668">//&nbsp;will&nbsp;enable&nbsp;Unmarshal&nbsp;to&nbsp;match&nbsp;the&nbsp;attribute&nbsp;to&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span><span class="comment" id="6188731">//&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">105</span><span class="comment" id="6188748">//&nbsp;If&nbsp;MarshalXMLAttr&nbsp;returns&nbsp;the&nbsp;zero&nbsp;attribute&nbsp;Attr{},&nbsp;no&nbsp;attribute</span><br>
<span class="lineno"></span><span class="comment" id="6188817">//&nbsp;will&nbsp;be&nbsp;generated&nbsp;in&nbsp;the&nbsp;output.</span><br>
<span class="lineno"></span><span class="comment" id="6188853">//&nbsp;MarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6188911">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="6188946">type</span>&nbsp;<span class="ident" id="6188951">MarshalerAttr</span>&nbsp;<span class="keyword" id="6188965">interface</span>&nbsp;<span class="op" id="6188975">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6188978">MarshalXMLAttr</span><span class="op" id="6188992">(</span><span class="ident" id="6188993">name</span>&nbsp;<span class="ident" id="6188998"><a href="/gostd/encoding/xml/xml.go.html#6241995">Name</a></span><span class="op" id="6189002">)</span>&nbsp;<span class="op" id="6189004">(</span><span class="ident" id="6189005"><a href="/gostd/encoding/xml/xml.go.html#6242105">Attr</a></span><span class="op" id="6189009">,</span>&nbsp;<span class="builtintype" id="6189011">error</span><span class="op" id="6189016">)</span><br>
<span class="lineno"></span><span class="op" id="6189018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6189021">//&nbsp;MarshalIndent&nbsp;works&nbsp;like&nbsp;Marshal,&nbsp;but&nbsp;each&nbsp;XML&nbsp;element&nbsp;begins&nbsp;on&nbsp;a&nbsp;new</span><br>
<span class="lineno"></span><span class="comment" id="6189095">//&nbsp;indented&nbsp;line&nbsp;that&nbsp;starts&nbsp;with&nbsp;prefix&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno">115</span><span class="comment" id="6189167">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;nesting&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="6189219">func</span>&nbsp;<span class="ident" id="6189224">MarshalIndent</span><span class="op" id="6189237">(</span><span class="ident" id="6189238">v</span>&nbsp;<span class="keyword" id="6189240">interface</span><span class="op" id="6189249">{</span><span class="op" id="6189250">}</span><span class="op" id="6189251">,</span>&nbsp;<span class="ident" id="6189253">prefix</span><span class="op" id="6189259">,</span>&nbsp;<span class="ident" id="6189261">indent</span>&nbsp;<span class="builtintype" id="6189268">string</span><span class="op" id="6189274">)</span>&nbsp;<span class="op" id="6189276">(</span><span class="op" id="6189277">[</span><span class="op" id="6189278">]</span><span class="builtintype" id="6189279">byte</span><span class="op" id="6189283">,</span>&nbsp;<span class="builtintype" id="6189285">error</span><span class="op" id="6189290">)</span>&nbsp;<span class="op" id="6189292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6189295">var</span>&nbsp;<span class="ident" id="6189299">b</span>&nbsp;<span class="ident" id="6189301"><a href="/gostd/encoding/xml/marshal.go.html#6184684">bytes</a></span><span class="op" id="6189306">.</span><span class="ident" id="6189307"><a href="/gostd/bytes/buffer.go.html#1383251">Buffer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6189315">enc</span>&nbsp;<span class="op" id="6189319">:=</span>&nbsp;<span class="ident" id="6189322"><a href="/gostd/encoding/xml/marshal.go.html#6189597">NewEncoder</a></span><span class="op" id="6189332">(</span><span class="op" id="6189333">&amp;</span><span class="ident" id="6189334"><a href="/gostd/encoding/xml/marshal.go.html#6189299">b</a></span><span class="op" id="6189335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6189338"><a href="/gostd/encoding/xml/marshal.go.html#6189315">enc</a></span><span class="op" id="6189341">.</span><span class="ident" id="6189342"><a href="/gostd/encoding/xml/marshal.go.html#6189939">Indent</a></span><span class="op" id="6189348">(</span><span class="ident" id="6189349"><a href="/gostd/encoding/xml/marshal.go.html#6189253">prefix</a></span><span class="op" id="6189355">,</span>&nbsp;<span class="ident" id="6189357"><a href="/gostd/encoding/xml/marshal.go.html#6189261">indent</a></span><span class="op" id="6189363">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6189366">if</span>&nbsp;<span class="ident" id="6189369">err</span>&nbsp;<span class="op" id="6189373">:=</span>&nbsp;<span class="ident" id="6189376"><a href="/gostd/encoding/xml/marshal.go.html#6189315">enc</a></span><span class="op" id="6189379">.</span><span class="ident" id="6189380"><a href="/gostd/encoding/xml/marshal.go.html#6190234">Encode</a></span><span class="op" id="6189386">(</span><span class="ident" id="6189387"><a href="/gostd/encoding/xml/marshal.go.html#6189238">v</a></span><span class="op" id="6189388">)</span><span class="op" id="6189389">;</span>&nbsp;<span class="ident" id="6189391"><a href="/gostd/encoding/xml/marshal.go.html#6189369">err</a></span>&nbsp;<span class="op" id="6189395">!=</span>&nbsp;<span class="builtintype" id="6189398">nil</span>&nbsp;<span class="op" id="6189402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6189406">return</span>&nbsp;<span class="builtintype" id="6189413">nil</span><span class="op" id="6189416">,</span>&nbsp;<span class="ident" id="6189418"><a href="/gostd/encoding/xml/marshal.go.html#6189369">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6189423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6189426">return</span>&nbsp;<span class="ident" id="6189433"><a href="/gostd/encoding/xml/marshal.go.html#6189299">b</a></span><span class="op" id="6189434">.</span><span class="ident" id="6189435"><a href="/gostd/bytes/buffer.go.html#1384454">Bytes</a></span><span class="op" id="6189440">(</span><span class="op" id="6189441">)</span><span class="op" id="6189442">,</span>&nbsp;<span class="builtintype" id="6189444">nil</span><br>
<span class="lineno"></span><span class="op" id="6189448">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6189451">//&nbsp;An&nbsp;Encoder&nbsp;writes&nbsp;XML&nbsp;data&nbsp;to&nbsp;an&nbsp;output&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="6189502">type</span>&nbsp;<span class="ident" id="6189507">Encoder</span>&nbsp;<span class="keyword" id="6189515">struct</span>&nbsp;<span class="op" id="6189522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6189525">p</span>&nbsp;<span class="ident" id="6189527"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><br>
<span class="lineno"></span><span class="op" id="6189535">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="comment" id="6189538">//&nbsp;NewEncoder&nbsp;returns&nbsp;a&nbsp;new&nbsp;encoder&nbsp;that&nbsp;writes&nbsp;to&nbsp;w.</span><br>
<span class="lineno"></span><span class="keyword" id="6189592">func</span>&nbsp;<span class="ident" id="6189597">NewEncoder</span><span class="op" id="6189607">(</span><span class="ident" id="6189608">w</span>&nbsp;<span class="ident" id="6189610"><a href="/gostd/encoding/xml/marshal.go.html#6184712">io</a></span><span class="op" id="6189612">.</span><span class="ident" id="6189613"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="6189619">)</span>&nbsp;<span class="op" id="6189621">*</span><span class="ident" id="6189622"><a href="/gostd/encoding/xml/marshal.go.html#6189507">Encoder</a></span>&nbsp;<span class="op" id="6189630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6189633">e</span>&nbsp;<span class="op" id="6189635">:=</span>&nbsp;<span class="op" id="6189638">&amp;</span><span class="ident" id="6189639"><a href="/gostd/encoding/xml/marshal.go.html#6189507">Encoder</a></span><span class="op" id="6189646">{</span><span class="ident" id="6189647"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6189654">{</span><span class="ident" id="6189655"><a href="/gostd/encoding/xml/marshal.go.html#6193273">Writer</a></span><span class="op" id="6189661">:</span>&nbsp;<span class="ident" id="6189663"><a href="/gostd/encoding/xml/marshal.go.html#6184675">bufio</a></span><span class="op" id="6189668">.</span><span class="ident" id="6189669"><a href="/gostd/bufio/bufio.go.html#1367149">NewWriter</a></span><span class="op" id="6189678">(</span><span class="ident" id="6189679"><a href="/gostd/encoding/xml/marshal.go.html#6189608">w</a></span><span class="op" id="6189680">)</span><span class="op" id="6189681">}</span><span class="op" id="6189682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6189685"><a href="/gostd/encoding/xml/marshal.go.html#6189633">e</a></span><span class="op" id="6189686">.</span><span class="ident" id="6189687"><a href="/gostd/encoding/xml/marshal.go.html#6189525">p</a></span><span class="op" id="6189688">.</span><span class="ident" id="6189689"><a href="/gostd/encoding/xml/marshal.go.html#6193288">encoder</a></span>&nbsp;<span class="op" id="6189697">=</span>&nbsp;<span class="ident" id="6189699"><a href="/gostd/encoding/xml/marshal.go.html#6189633">e</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6189702">return</span>&nbsp;<span class="ident" id="6189709"><a href="/gostd/encoding/xml/marshal.go.html#6189633">e</a></span><br>
<span class="lineno"></span><span class="op" id="6189711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6189714">//&nbsp;Indent&nbsp;sets&nbsp;the&nbsp;encoder&nbsp;to&nbsp;generate&nbsp;XML&nbsp;in&nbsp;which&nbsp;each&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="6189779">//&nbsp;begins&nbsp;on&nbsp;a&nbsp;new&nbsp;indented&nbsp;line&nbsp;that&nbsp;starts&nbsp;with&nbsp;prefix&nbsp;and&nbsp;is&nbsp;followed&nbsp;by</span><br>
<span class="lineno">140</span><span class="comment" id="6189855">//&nbsp;one&nbsp;or&nbsp;more&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;nesting&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="6189919">func</span>&nbsp;<span class="op" id="6189924">(</span><span class="ident" id="6189925">enc</span>&nbsp;<span class="op" id="6189929">*</span><span class="ident" id="6189930"><a href="/gostd/encoding/xml/marshal.go.html#6189507">Encoder</a></span><span class="op" id="6189937">)</span>&nbsp;<span class="ident" id="6189939">Indent</span><span class="op" id="6189945">(</span><span class="ident" id="6189946">prefix</span><span class="op" id="6189952">,</span>&nbsp;<span class="ident" id="6189954">indent</span>&nbsp;<span class="builtintype" id="6189961">string</span><span class="op" id="6189967">)</span>&nbsp;<span class="op" id="6189969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6189972"><a href="/gostd/encoding/xml/marshal.go.html#6189925">enc</a></span><span class="op" id="6189975">.</span><span class="ident" id="6189976"><a href="/gostd/encoding/xml/marshal.go.html#6189525">p</a></span><span class="op" id="6189977">.</span><span class="ident" id="6189978"><a href="/gostd/encoding/xml/marshal.go.html#6193344">prefix</a></span>&nbsp;<span class="op" id="6189985">=</span>&nbsp;<span class="ident" id="6189987"><a href="/gostd/encoding/xml/marshal.go.html#6189946">prefix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6189995"><a href="/gostd/encoding/xml/marshal.go.html#6189925">enc</a></span><span class="op" id="6189998">.</span><span class="ident" id="6189999"><a href="/gostd/encoding/xml/marshal.go.html#6189525">p</a></span><span class="op" id="6190000">.</span><span class="ident" id="6190001"><a href="/gostd/encoding/xml/marshal.go.html#6193325">indent</a></span>&nbsp;<span class="op" id="6190008">=</span>&nbsp;<span class="ident" id="6190010"><a href="/gostd/encoding/xml/marshal.go.html#6189954">indent</a></span><br>
<span class="lineno"></span><span class="op" id="6190017">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="6190020">//&nbsp;Encode&nbsp;writes&nbsp;the&nbsp;XML&nbsp;encoding&nbsp;of&nbsp;v&nbsp;to&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="6190074">//</span><br>
<span class="lineno"></span><span class="comment" id="6190077">//&nbsp;See&nbsp;the&nbsp;documentation&nbsp;for&nbsp;Marshal&nbsp;for&nbsp;details&nbsp;about&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="6190147">//&nbsp;of&nbsp;Go&nbsp;values&nbsp;to&nbsp;XML.</span><br>
<span class="lineno">150</span><span class="comment" id="6190171">//</span><br>
<span class="lineno"></span><span class="comment" id="6190174">//&nbsp;Encode&nbsp;calls&nbsp;Flush&nbsp;before&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="6190214">func</span>&nbsp;<span class="op" id="6190219">(</span><span class="ident" id="6190220">enc</span>&nbsp;<span class="op" id="6190224">*</span><span class="ident" id="6190225"><a href="/gostd/encoding/xml/marshal.go.html#6189507">Encoder</a></span><span class="op" id="6190232">)</span>&nbsp;<span class="ident" id="6190234">Encode</span><span class="op" id="6190240">(</span><span class="ident" id="6190241">v</span>&nbsp;<span class="keyword" id="6190243">interface</span><span class="op" id="6190252">{</span><span class="op" id="6190253">}</span><span class="op" id="6190254">)</span>&nbsp;<span class="builtintype" id="6190256">error</span>&nbsp;<span class="op" id="6190262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6190265">err</span>&nbsp;<span class="op" id="6190269">:=</span>&nbsp;<span class="ident" id="6190272"><a href="/gostd/encoding/xml/marshal.go.html#6190220">enc</a></span><span class="op" id="6190275">.</span><span class="ident" id="6190276"><a href="/gostd/encoding/xml/marshal.go.html#6189525">p</a></span><span class="op" id="6190277">.</span><span class="ident" id="6190278"><a href="/gostd/encoding/xml/marshal.go.html#6195980">marshalValue</a></span><span class="op" id="6190290">(</span><span class="ident" id="6190291"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6190298">.</span><span class="ident" id="6190299"><a href="/gostd/reflect/value.go.html#2892536">ValueOf</a></span><span class="op" id="6190306">(</span><span class="ident" id="6190307"><a href="/gostd/encoding/xml/marshal.go.html#6190241">v</a></span><span class="op" id="6190308">)</span><span class="op" id="6190309">,</span>&nbsp;<span class="builtintype" id="6190311">nil</span><span class="op" id="6190314">,</span>&nbsp;<span class="builtintype" id="6190316">nil</span><span class="op" id="6190319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6190322">if</span>&nbsp;<span class="ident" id="6190325"><a href="/gostd/encoding/xml/marshal.go.html#6190265">err</a></span>&nbsp;<span class="op" id="6190329">!=</span>&nbsp;<span class="builtintype" id="6190332">nil</span>&nbsp;<span class="op" id="6190336">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6190340">return</span>&nbsp;<span class="ident" id="6190347"><a href="/gostd/encoding/xml/marshal.go.html#6190265">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6190355">return</span>&nbsp;<span class="ident" id="6190362"><a href="/gostd/encoding/xml/marshal.go.html#6190220">enc</a></span><span class="op" id="6190365">.</span><span class="ident" id="6190366"><a href="/gostd/encoding/xml/marshal.go.html#6189525">p</a></span><span class="op" id="6190367">.</span><span class="ident" id="6190368"><a href="/gostd/bufio/bufio.go.html#1367486">Flush</a></span><span class="op" id="6190373">(</span><span class="op" id="6190374">)</span><br>
<span class="lineno"></span><span class="op" id="6190376">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="6190379">//&nbsp;EncodeElement&nbsp;writes&nbsp;the&nbsp;XML&nbsp;encoding&nbsp;of&nbsp;v&nbsp;to&nbsp;the&nbsp;stream,</span><br>
<span class="lineno"></span><span class="comment" id="6190440">//&nbsp;using&nbsp;start&nbsp;as&nbsp;the&nbsp;outermost&nbsp;tag&nbsp;in&nbsp;the&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="comment" id="6190493">//</span><br>
<span class="lineno"></span><span class="comment" id="6190496">//&nbsp;See&nbsp;the&nbsp;documentation&nbsp;for&nbsp;Marshal&nbsp;for&nbsp;details&nbsp;about&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span><span class="comment" id="6190566">//&nbsp;of&nbsp;Go&nbsp;values&nbsp;to&nbsp;XML.</span><br>
<span class="lineno">165</span><span class="comment" id="6190590">//</span><br>
<span class="lineno"></span><span class="comment" id="6190593">//&nbsp;EncodeElement&nbsp;calls&nbsp;Flush&nbsp;before&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="6190640">func</span>&nbsp;<span class="op" id="6190645">(</span><span class="ident" id="6190646">enc</span>&nbsp;<span class="op" id="6190650">*</span><span class="ident" id="6190651"><a href="/gostd/encoding/xml/marshal.go.html#6189507">Encoder</a></span><span class="op" id="6190658">)</span>&nbsp;<span class="ident" id="6190660">EncodeElement</span><span class="op" id="6190673">(</span><span class="ident" id="6190674">v</span>&nbsp;<span class="keyword" id="6190676">interface</span><span class="op" id="6190685">{</span><span class="op" id="6190686">}</span><span class="op" id="6190687">,</span>&nbsp;<span class="ident" id="6190689">start</span>&nbsp;<span class="ident" id="6190695"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><span class="op" id="6190707">)</span>&nbsp;<span class="builtintype" id="6190709">error</span>&nbsp;<span class="op" id="6190715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6190718">err</span>&nbsp;<span class="op" id="6190722">:=</span>&nbsp;<span class="ident" id="6190725"><a href="/gostd/encoding/xml/marshal.go.html#6190646">enc</a></span><span class="op" id="6190728">.</span><span class="ident" id="6190729"><a href="/gostd/encoding/xml/marshal.go.html#6189525">p</a></span><span class="op" id="6190730">.</span><span class="ident" id="6190731"><a href="/gostd/encoding/xml/marshal.go.html#6195980">marshalValue</a></span><span class="op" id="6190743">(</span><span class="ident" id="6190744"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6190751">.</span><span class="ident" id="6190752"><a href="/gostd/reflect/value.go.html#2892536">ValueOf</a></span><span class="op" id="6190759">(</span><span class="ident" id="6190760"><a href="/gostd/encoding/xml/marshal.go.html#6190674">v</a></span><span class="op" id="6190761">)</span><span class="op" id="6190762">,</span>&nbsp;<span class="builtintype" id="6190764">nil</span><span class="op" id="6190767">,</span>&nbsp;<span class="op" id="6190769">&amp;</span><span class="ident" id="6190770"><a href="/gostd/encoding/xml/marshal.go.html#6190689">start</a></span><span class="op" id="6190775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6190778">if</span>&nbsp;<span class="ident" id="6190781"><a href="/gostd/encoding/xml/marshal.go.html#6190718">err</a></span>&nbsp;<span class="op" id="6190785">!=</span>&nbsp;<span class="builtintype" id="6190788">nil</span>&nbsp;<span class="op" id="6190792">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6190796">return</span>&nbsp;<span class="ident" id="6190803"><a href="/gostd/encoding/xml/marshal.go.html#6190718">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6190811">return</span>&nbsp;<span class="ident" id="6190818"><a href="/gostd/encoding/xml/marshal.go.html#6190646">enc</a></span><span class="op" id="6190821">.</span><span class="ident" id="6190822"><a href="/gostd/encoding/xml/marshal.go.html#6189525">p</a></span><span class="op" id="6190823">.</span><span class="ident" id="6190824"><a href="/gostd/bufio/bufio.go.html#1367486">Flush</a></span><span class="op" id="6190829">(</span><span class="op" id="6190830">)</span><br>
<span class="lineno"></span><span class="op" id="6190832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="6190835">var</span>&nbsp;<span class="op" id="6190839">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6190842">endComment</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6190855">=</span>&nbsp;<span class="op" id="6190857">[</span><span class="op" id="6190858">]</span><span class="builtintype" id="6190859">byte</span><span class="op" id="6190863">(</span><span class="string" id="6190864">&#34;--&gt;&#34;</span><span class="op" id="6190869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6190872">endProcInst</span>&nbsp;&nbsp;<span class="op" id="6190885">=</span>&nbsp;<span class="op" id="6190887">[</span><span class="op" id="6190888">]</span><span class="builtintype" id="6190889">byte</span><span class="op" id="6190893">(</span><span class="string" id="6190894">&#34;?&gt;&#34;</span><span class="op" id="6190898">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6190901">endDirective</span>&nbsp;<span class="op" id="6190914">=</span>&nbsp;<span class="op" id="6190916">[</span><span class="op" id="6190917">]</span><span class="builtintype" id="6190918">byte</span><span class="op" id="6190922">(</span><span class="string" id="6190923">&#34;&gt;&#34;</span><span class="op" id="6190926">)</span><br>
<span class="lineno"></span><span class="op" id="6190928">)</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="6190931">//&nbsp;EncodeToken&nbsp;writes&nbsp;the&nbsp;given&nbsp;XML&nbsp;token&nbsp;to&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="comment" id="6190988">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;StartElement&nbsp;and&nbsp;EndElement&nbsp;tokens&nbsp;are&nbsp;not&nbsp;properly&nbsp;matched.</span><br>
<span class="lineno"></span><span class="comment" id="6191075">//</span><br>
<span class="lineno"></span><span class="comment" id="6191078">//&nbsp;EncodeToken&nbsp;does&nbsp;not&nbsp;call&nbsp;Flush,&nbsp;because&nbsp;usually&nbsp;it&nbsp;is&nbsp;part&nbsp;of&nbsp;a&nbsp;larger&nbsp;operation</span><br>
<span class="lineno">185</span><span class="comment" id="6191163">//&nbsp;such&nbsp;as&nbsp;Encode&nbsp;or&nbsp;EncodeElement&nbsp;(or&nbsp;a&nbsp;custom&nbsp;Marshaler&#39;s&nbsp;MarshalXML&nbsp;invoked</span><br>
<span class="lineno"></span><span class="comment" id="6191242">//&nbsp;during&nbsp;those),&nbsp;and&nbsp;those&nbsp;will&nbsp;call&nbsp;Flush&nbsp;when&nbsp;finished.</span><br>
<span class="lineno"></span><span class="comment" id="6191301">//&nbsp;Callers&nbsp;that&nbsp;create&nbsp;an&nbsp;Encoder&nbsp;and&nbsp;then&nbsp;invoke&nbsp;EncodeToken&nbsp;directly,&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="6191381">//&nbsp;using&nbsp;Encode&nbsp;or&nbsp;EncodeElement,&nbsp;need&nbsp;to&nbsp;call&nbsp;Flush&nbsp;when&nbsp;finished&nbsp;to&nbsp;ensure</span><br>
<span class="lineno"></span><span class="comment" id="6191458">//&nbsp;that&nbsp;the&nbsp;XML&nbsp;is&nbsp;written&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno">190</span><span class="comment" id="6191511">//</span><br>
<span class="lineno"></span><span class="comment" id="6191514">//&nbsp;EncodeToken&nbsp;allows&nbsp;writing&nbsp;a&nbsp;ProcInst&nbsp;with&nbsp;Target&nbsp;set&nbsp;to&nbsp;&#34;xml&#34;&nbsp;only&nbsp;as&nbsp;the&nbsp;first&nbsp;token</span><br>
<span class="lineno"></span><span class="comment" id="6191604">//&nbsp;in&nbsp;the&nbsp;stream.</span><br>
<span class="lineno"></span><span class="keyword" id="6191622">func</span>&nbsp;<span class="op" id="6191627">(</span><span class="ident" id="6191628">enc</span>&nbsp;<span class="op" id="6191632">*</span><span class="ident" id="6191633"><a href="/gostd/encoding/xml/marshal.go.html#6189507">Encoder</a></span><span class="op" id="6191640">)</span>&nbsp;<span class="ident" id="6191642">EncodeToken</span><span class="op" id="6191653">(</span><span class="ident" id="6191654">t</span>&nbsp;<span class="ident" id="6191656"><a href="/gostd/encoding/xml/xml.go.html#6242284">Token</a></span><span class="op" id="6191661">)</span>&nbsp;<span class="builtintype" id="6191663">error</span>&nbsp;<span class="op" id="6191669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6191672">p</span>&nbsp;<span class="op" id="6191674">:=</span>&nbsp;<span class="op" id="6191677">&amp;</span><span class="ident" id="6191678"><a href="/gostd/encoding/xml/marshal.go.html#6191628">enc</a></span><span class="op" id="6191681">.</span><span class="ident" id="6191682"><a href="/gostd/encoding/xml/marshal.go.html#6189525">p</a></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191685">switch</span>&nbsp;<span class="ident" id="6191692">t</span>&nbsp;<span class="op" id="6191694">:=</span>&nbsp;<span class="ident" id="6191697"><a href="/gostd/encoding/xml/marshal.go.html#6191654">t</a></span><span class="op" id="6191698">.</span><span class="op" id="6191699">(</span><span class="keyword" id="6191700">type</span><span class="op" id="6191704">)</span>&nbsp;<span class="op" id="6191706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191709">case</span>&nbsp;<span class="ident" id="6191714"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><span class="op" id="6191726">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191730">if</span>&nbsp;<span class="ident" id="6191733">err</span>&nbsp;<span class="op" id="6191737">:=</span>&nbsp;<span class="ident" id="6191740"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6191741">.</span><span class="ident" id="6191742"><a href="/gostd/encoding/xml/marshal.go.html#6202852">writeStart</a></span><span class="op" id="6191752">(</span><span class="op" id="6191753">&amp;</span><span class="ident" id="6191754"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6191755">)</span><span class="op" id="6191756">;</span>&nbsp;<span class="ident" id="6191758"><a href="/gostd/encoding/xml/marshal.go.html#6191733">err</a></span>&nbsp;<span class="op" id="6191762">!=</span>&nbsp;<span class="builtintype" id="6191765">nil</span>&nbsp;<span class="op" id="6191769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191774">return</span>&nbsp;<span class="ident" id="6191781"><a href="/gostd/encoding/xml/marshal.go.html#6191733">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6191787">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191790">case</span>&nbsp;<span class="ident" id="6191795"><a href="/gostd/encoding/xml/xml.go.html#6242712">EndElement</a></span><span class="op" id="6191805">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191809">if</span>&nbsp;<span class="ident" id="6191812">err</span>&nbsp;<span class="op" id="6191816">:=</span>&nbsp;<span class="ident" id="6191819"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6191820">.</span><span class="ident" id="6191821"><a href="/gostd/encoding/xml/marshal.go.html#6203593">writeEnd</a></span><span class="op" id="6191829">(</span><span class="ident" id="6191830"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6191831">.</span><span class="ident" id="6191832"><a href="/gostd/encoding/xml/xml.go.html#6242733">Name</a></span><span class="op" id="6191836">)</span><span class="op" id="6191837">;</span>&nbsp;<span class="ident" id="6191839"><a href="/gostd/encoding/xml/marshal.go.html#6191812">err</a></span>&nbsp;<span class="op" id="6191843">!=</span>&nbsp;<span class="builtintype" id="6191846">nil</span>&nbsp;<span class="op" id="6191850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191855">return</span>&nbsp;<span class="ident" id="6191862"><a href="/gostd/encoding/xml/marshal.go.html#6191812">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6191868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191871">case</span>&nbsp;<span class="ident" id="6191876"><a href="/gostd/encoding/xml/xml.go.html#6242896">CharData</a></span><span class="op" id="6191884">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6191888"><a href="/gostd/encoding/xml/xml.go.html#6283222">EscapeText</a></span><span class="op" id="6191898">(</span><span class="ident" id="6191899"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6191900">,</span>&nbsp;<span class="ident" id="6191902"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6191903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191906">case</span>&nbsp;<span class="ident" id="6191911"><a href="/gostd/encoding/xml/xml.go.html#6243203">Comment</a></span><span class="op" id="6191918">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191922">if</span>&nbsp;<span class="ident" id="6191925"><a href="/gostd/encoding/xml/marshal.go.html#6184684">bytes</a></span><span class="op" id="6191930">.</span><span class="ident" id="6191931"><a href="/gostd/bytes/bytes.go.html#1397486">Contains</a></span><span class="op" id="6191939">(</span><span class="ident" id="6191940"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6191941">,</span>&nbsp;<span class="ident" id="6191943"><a href="/gostd/encoding/xml/marshal.go.html#6190842">endComment</a></span><span class="op" id="6191953">)</span>&nbsp;<span class="op" id="6191955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6191960">return</span>&nbsp;<span class="ident" id="6191967"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6191970">.</span><span class="ident" id="6191971"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6191977">(</span><span class="string" id="6191978">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;Comment&nbsp;containing&nbsp;--&gt;&nbsp;marker&#34;</span><span class="op" id="6192029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6192033">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192037"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192038">.</span><span class="ident" id="6192039"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6192050">(</span><span class="string" id="6192051">&#34;&lt;!--&#34;</span><span class="op" id="6192057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192061"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192062">.</span><span class="ident" id="6192063"><a href="/gostd/bufio/bufio.go.html#1368329">Write</a></span><span class="op" id="6192068">(</span><span class="ident" id="6192069"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6192070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192074"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192075">.</span><span class="ident" id="6192076"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6192087">(</span><span class="string" id="6192088">&#34;--&gt;&#34;</span><span class="op" id="6192093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192097">return</span>&nbsp;<span class="ident" id="6192104"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192105">.</span><span class="ident" id="6192106"><a href="/gostd/encoding/xml/marshal.go.html#6208879">cachedWriteError</a></span><span class="op" id="6192122">(</span><span class="op" id="6192123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192126">case</span>&nbsp;<span class="ident" id="6192131"><a href="/gostd/encoding/xml/xml.go.html#6243372">ProcInst</a></span><span class="op" id="6192139">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6192143">//&nbsp;First&nbsp;token&nbsp;to&nbsp;be&nbsp;encoded&nbsp;which&nbsp;is&nbsp;also&nbsp;a&nbsp;ProcInst&nbsp;with&nbsp;target&nbsp;of&nbsp;xml</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6192218">//&nbsp;is&nbsp;the&nbsp;xml&nbsp;declaration.&nbsp;&nbsp;The&nbsp;only&nbsp;ProcInst&nbsp;where&nbsp;target&nbsp;of&nbsp;xml&nbsp;is&nbsp;allowed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192298">if</span>&nbsp;<span class="ident" id="6192301"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6192302">.</span><span class="ident" id="6192303"><a href="/gostd/encoding/xml/xml.go.html#6243391">Target</a></span>&nbsp;<span class="op" id="6192310">==</span>&nbsp;<span class="string" id="6192313">&#34;xml&#34;</span>&nbsp;<span class="op" id="6192319">&amp;&amp;</span>&nbsp;<span class="ident" id="6192322"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192323">.</span><span class="ident" id="6192324"><a href="/gostd/bufio/bufio.go.html#1368105">Buffered</a></span><span class="op" id="6192332">(</span><span class="op" id="6192333">)</span>&nbsp;<span class="op" id="6192335">!=</span>&nbsp;<span class="num" id="6192338">0</span>&nbsp;<span class="op" id="6192340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192345">return</span>&nbsp;<span class="ident" id="6192352"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6192355">.</span><span class="ident" id="6192356"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6192362">(</span><span class="string" id="6192363">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;ProcInst&nbsp;xml&nbsp;target&nbsp;only&nbsp;valid&nbsp;for&nbsp;xml&nbsp;declaration,&nbsp;first&nbsp;token&nbsp;encoded&#34;</span><span class="op" id="6192456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6192460">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192464">if</span>&nbsp;<span class="op" id="6192467">!</span><span class="ident" id="6192468"><a href="/gostd/encoding/xml/xml.go.html#6268366">isNameString</a></span><span class="op" id="6192480">(</span><span class="ident" id="6192481"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6192482">.</span><span class="ident" id="6192483"><a href="/gostd/encoding/xml/xml.go.html#6243391">Target</a></span><span class="op" id="6192489">)</span>&nbsp;<span class="op" id="6192491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192496">return</span>&nbsp;<span class="ident" id="6192503"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6192506">.</span><span class="ident" id="6192507"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6192513">(</span><span class="string" id="6192514">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;ProcInst&nbsp;with&nbsp;invalid&nbsp;Target&#34;</span><span class="op" id="6192564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6192568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192572">if</span>&nbsp;<span class="ident" id="6192575"><a href="/gostd/encoding/xml/marshal.go.html#6184684">bytes</a></span><span class="op" id="6192580">.</span><span class="ident" id="6192581"><a href="/gostd/bytes/bytes.go.html#1397486">Contains</a></span><span class="op" id="6192589">(</span><span class="ident" id="6192590"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6192591">.</span><span class="ident" id="6192592"><a href="/gostd/encoding/xml/xml.go.html#6243406">Inst</a></span><span class="op" id="6192596">,</span>&nbsp;<span class="ident" id="6192598"><a href="/gostd/encoding/xml/marshal.go.html#6190872">endProcInst</a></span><span class="op" id="6192609">)</span>&nbsp;<span class="op" id="6192611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192616">return</span>&nbsp;<span class="ident" id="6192623"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6192626">.</span><span class="ident" id="6192627"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6192633">(</span><span class="string" id="6192634">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;ProcInst&nbsp;containing&nbsp;?&gt;&nbsp;marker&#34;</span><span class="op" id="6192685">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6192689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192693"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192694">.</span><span class="ident" id="6192695"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6192706">(</span><span class="string" id="6192707">&#34;&lt;?&#34;</span><span class="op" id="6192711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192715"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192716">.</span><span class="ident" id="6192717"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6192728">(</span><span class="ident" id="6192729"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6192730">.</span><span class="ident" id="6192731"><a href="/gostd/encoding/xml/xml.go.html#6243391">Target</a></span><span class="op" id="6192737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192741">if</span>&nbsp;<span class="builtinfunc" id="6192744">len</span><span class="op" id="6192747">(</span><span class="ident" id="6192748"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6192749">.</span><span class="ident" id="6192750"><a href="/gostd/encoding/xml/xml.go.html#6243406">Inst</a></span><span class="op" id="6192754">)</span>&nbsp;<span class="op" id="6192756">&gt;</span>&nbsp;<span class="num" id="6192758">0</span>&nbsp;<span class="op" id="6192760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192765"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192766">.</span><span class="ident" id="6192767"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6192776">(</span><span class="string" id="6192777">&#39;&nbsp;&#39;</span><span class="op" id="6192780">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192785"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192786">.</span><span class="ident" id="6192787"><a href="/gostd/bufio/bufio.go.html#1368329">Write</a></span><span class="op" id="6192792">(</span><span class="ident" id="6192793"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6192794">.</span><span class="ident" id="6192795"><a href="/gostd/encoding/xml/xml.go.html#6243406">Inst</a></span><span class="op" id="6192799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6192803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192807"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192808">.</span><span class="ident" id="6192809"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6192820">(</span><span class="string" id="6192821">&#34;?&gt;&#34;</span><span class="op" id="6192825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192828">case</span>&nbsp;<span class="ident" id="6192833"><a href="/gostd/encoding/xml/xml.go.html#6243618">Directive</a></span><span class="op" id="6192842">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192846">if</span>&nbsp;<span class="ident" id="6192849"><a href="/gostd/encoding/xml/marshal.go.html#6184684">bytes</a></span><span class="op" id="6192854">.</span><span class="ident" id="6192855"><a href="/gostd/bytes/bytes.go.html#1397486">Contains</a></span><span class="op" id="6192863">(</span><span class="ident" id="6192864"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6192865">,</span>&nbsp;<span class="ident" id="6192867"><a href="/gostd/encoding/xml/marshal.go.html#6190901">endDirective</a></span><span class="op" id="6192879">)</span>&nbsp;<span class="op" id="6192881">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6192886">return</span>&nbsp;<span class="ident" id="6192893"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6192896">.</span><span class="ident" id="6192897"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6192903">(</span><span class="string" id="6192904">&#34;xml:&nbsp;EncodeToken&nbsp;of&nbsp;Directive&nbsp;containing&nbsp;&gt;&nbsp;marker&#34;</span><span class="op" id="6192955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6192959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192963"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192964">.</span><span class="ident" id="6192965"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6192976">(</span><span class="string" id="6192977">&#34;&lt;!&#34;</span><span class="op" id="6192981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192985"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192986">.</span><span class="ident" id="6192987"><a href="/gostd/bufio/bufio.go.html#1368329">Write</a></span><span class="op" id="6192992">(</span><span class="ident" id="6192993"><a href="/gostd/encoding/xml/marshal.go.html#6191692">t</a></span><span class="op" id="6192994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6192998"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6192999">.</span><span class="ident" id="6193000"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6193011">(</span><span class="string" id="6193012">&#34;&gt;&#34;</span><span class="op" id="6193015">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6193018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6193021">return</span>&nbsp;<span class="ident" id="6193028"><a href="/gostd/encoding/xml/marshal.go.html#6191672">p</a></span><span class="op" id="6193029">.</span><span class="ident" id="6193030"><a href="/gostd/encoding/xml/marshal.go.html#6208879">cachedWriteError</a></span><span class="op" id="6193046">(</span><span class="op" id="6193047">)</span><br>
<span class="lineno"></span><span class="op" id="6193049">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6193052">//&nbsp;Flush&nbsp;flushes&nbsp;any&nbsp;buffered&nbsp;XML&nbsp;to&nbsp;the&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno">245</span><span class="comment" id="6193112">//&nbsp;See&nbsp;the&nbsp;EncodeToken&nbsp;documentation&nbsp;for&nbsp;details&nbsp;about&nbsp;when&nbsp;it&nbsp;is&nbsp;necessary.</span><br>
<span class="lineno"></span><span class="keyword" id="6193189">func</span>&nbsp;<span class="op" id="6193194">(</span><span class="ident" id="6193195">enc</span>&nbsp;<span class="op" id="6193199">*</span><span class="ident" id="6193200"><a href="/gostd/encoding/xml/marshal.go.html#6189507">Encoder</a></span><span class="op" id="6193207">)</span>&nbsp;<span class="ident" id="6193209">Flush</span><span class="op" id="6193214">(</span><span class="op" id="6193215">)</span>&nbsp;<span class="builtintype" id="6193217">error</span>&nbsp;<span class="op" id="6193223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6193226">return</span>&nbsp;<span class="ident" id="6193233"><a href="/gostd/encoding/xml/marshal.go.html#6193195">enc</a></span><span class="op" id="6193236">.</span><span class="ident" id="6193237"><a href="/gostd/encoding/xml/marshal.go.html#6189525">p</a></span><span class="op" id="6193238">.</span><span class="ident" id="6193239"><a href="/gostd/bufio/bufio.go.html#1367486">Flush</a></span><span class="op" id="6193244">(</span><span class="op" id="6193245">)</span><br>
<span class="lineno"></span><span class="op" id="6193247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="6193250">type</span>&nbsp;<span class="ident" id="6193255">printer</span>&nbsp;<span class="keyword" id="6193263">struct</span>&nbsp;<span class="op" id="6193270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6193273">*</span><span class="ident" id="6193274"><a href="/gostd/encoding/xml/marshal.go.html#6184675">bufio</a></span><span class="op" id="6193279">.</span><span class="ident" id="6193280"><a href="/gostd/bufio/bufio.go.html#1366565">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193288">encoder</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6193299">*</span><span class="ident" id="6193300"><a href="/gostd/encoding/xml/marshal.go.html#6189507">Encoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193309">seq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6193320">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193325">indent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6193336">string</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193344">prefix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6193355">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193363">depth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6193374">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193379">indentedIn</span>&nbsp;<span class="builtintype" id="6193390">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193396">putNewline</span>&nbsp;<span class="builtintype" id="6193407">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193413">attrNS</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6193424">map</span><span class="op" id="6193427">[</span><span class="builtintype" id="6193428">string</span><span class="op" id="6193434">]</span><span class="builtintype" id="6193435">string</span>&nbsp;<span class="comment" id="6193442">//&nbsp;map&nbsp;prefix&nbsp;-&gt;&nbsp;name&nbsp;space</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193471">attrPrefix</span>&nbsp;<span class="keyword" id="6193482">map</span><span class="op" id="6193485">[</span><span class="builtintype" id="6193486">string</span><span class="op" id="6193492">]</span><span class="builtintype" id="6193493">string</span>&nbsp;<span class="comment" id="6193500">//&nbsp;map&nbsp;name&nbsp;space&nbsp;-&gt;&nbsp;prefix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193529">prefixes</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6193540">[</span><span class="op" id="6193541">]</span><span class="builtintype" id="6193542">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6193550">tags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6193561">[</span><span class="op" id="6193562">]</span><span class="ident" id="6193563"><a href="/gostd/encoding/xml/xml.go.html#6241995">Name</a></span><br>
<span class="lineno"></span><span class="op" id="6193568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="comment" id="6193571">//&nbsp;createAttrPrefix&nbsp;finds&nbsp;the&nbsp;name&nbsp;space&nbsp;prefix&nbsp;attribute&nbsp;to&nbsp;use&nbsp;for&nbsp;the&nbsp;given&nbsp;name&nbsp;space,</span><br>
<span class="lineno"></span><span class="comment" id="6193662">//&nbsp;defining&nbsp;a&nbsp;new&nbsp;prefix&nbsp;if&nbsp;necessary.&nbsp;It&nbsp;returns&nbsp;the&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="6193724">func</span>&nbsp;<span class="op" id="6193729">(</span><span class="ident" id="6193730">p</span>&nbsp;<span class="op" id="6193732">*</span><span class="ident" id="6193733"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6193740">)</span>&nbsp;<span class="ident" id="6193742">createAttrPrefix</span><span class="op" id="6193758">(</span><span class="ident" id="6193759">url</span>&nbsp;<span class="builtintype" id="6193763">string</span><span class="op" id="6193769">)</span>&nbsp;<span class="builtintype" id="6193771">string</span>&nbsp;<span class="op" id="6193778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6193781">if</span>&nbsp;<span class="ident" id="6193784">prefix</span>&nbsp;<span class="op" id="6193791">:=</span>&nbsp;<span class="ident" id="6193794"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6193795">.</span><span class="ident" id="6193796"><a href="/gostd/encoding/xml/marshal.go.html#6193471">attrPrefix</a></span><span class="op" id="6193806">[</span><span class="ident" id="6193807"><a href="/gostd/encoding/xml/marshal.go.html#6193759">url</a></span><span class="op" id="6193810">]</span><span class="op" id="6193811">;</span>&nbsp;<span class="ident" id="6193813"><a href="/gostd/encoding/xml/marshal.go.html#6193784">prefix</a></span>&nbsp;<span class="op" id="6193820">!=</span>&nbsp;<span class="string" id="6193823">&#34;&#34;</span>&nbsp;<span class="op" id="6193826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6193830">return</span>&nbsp;<span class="ident" id="6193837"><a href="/gostd/encoding/xml/marshal.go.html#6193784">prefix</a></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6193845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6193849">//&nbsp;The&nbsp;&#34;http://www.w3.org/XML/1998/namespace&#34;&nbsp;name&nbsp;space&nbsp;is&nbsp;predefined&nbsp;as&nbsp;&#34;xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6193930">//&nbsp;and&nbsp;must&nbsp;be&nbsp;referred&nbsp;to&nbsp;that&nbsp;way.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6193968">//&nbsp;(The&nbsp;&#34;http://www.w3.org/2000/xmlns/&#34;&nbsp;name&nbsp;space&nbsp;is&nbsp;also&nbsp;predefined&nbsp;as&nbsp;&#34;xmlns&#34;,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6194051">//&nbsp;but&nbsp;users&nbsp;should&nbsp;not&nbsp;be&nbsp;trying&nbsp;to&nbsp;use&nbsp;that&nbsp;one&nbsp;directly&nbsp;-&nbsp;that&#39;s&nbsp;our&nbsp;job.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194130">if</span>&nbsp;<span class="ident" id="6194133"><a href="/gostd/encoding/xml/marshal.go.html#6193759">url</a></span>&nbsp;<span class="op" id="6194137">==</span>&nbsp;<span class="ident" id="6194140"><a href="/gostd/encoding/xml/xml.go.html#6248901">xmlURL</a></span>&nbsp;<span class="op" id="6194147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194151">return</span>&nbsp;<span class="string" id="6194158">&#34;xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6194165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6194169">//&nbsp;Need&nbsp;to&nbsp;define&nbsp;a&nbsp;new&nbsp;name&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194206">if</span>&nbsp;<span class="ident" id="6194209"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194210">.</span><span class="ident" id="6194211"><a href="/gostd/encoding/xml/marshal.go.html#6193471">attrPrefix</a></span>&nbsp;<span class="op" id="6194222">==</span>&nbsp;<span class="builtintype" id="6194225">nil</span>&nbsp;<span class="op" id="6194229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194233"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194234">.</span><span class="ident" id="6194235"><a href="/gostd/encoding/xml/marshal.go.html#6193471">attrPrefix</a></span>&nbsp;<span class="op" id="6194246">=</span>&nbsp;<span class="builtinfunc" id="6194248">make</span><span class="op" id="6194252">(</span><span class="keyword" id="6194253">map</span><span class="op" id="6194256">[</span><span class="builtintype" id="6194257">string</span><span class="op" id="6194263">]</span><span class="builtintype" id="6194264">string</span><span class="op" id="6194270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194274"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194275">.</span><span class="ident" id="6194276"><a href="/gostd/encoding/xml/marshal.go.html#6193413">attrNS</a></span>&nbsp;<span class="op" id="6194283">=</span>&nbsp;<span class="builtinfunc" id="6194285">make</span><span class="op" id="6194289">(</span><span class="keyword" id="6194290">map</span><span class="op" id="6194293">[</span><span class="builtintype" id="6194294">string</span><span class="op" id="6194300">]</span><span class="builtintype" id="6194301">string</span><span class="op" id="6194307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6194310">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6194314">//&nbsp;Pick&nbsp;a&nbsp;name.&nbsp;We&nbsp;try&nbsp;to&nbsp;use&nbsp;the&nbsp;final&nbsp;element&nbsp;of&nbsp;the&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6194375">//&nbsp;but&nbsp;fall&nbsp;back&nbsp;to&nbsp;_.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194399">prefix</span>&nbsp;<span class="op" id="6194406">:=</span>&nbsp;<span class="ident" id="6194409"><a href="/gostd/encoding/xml/marshal.go.html#6184740">strings</a></span><span class="op" id="6194416">.</span><span class="ident" id="6194417"><a href="/gostd/strings/strings.go.html#2982257">TrimRight</a></span><span class="op" id="6194426">(</span><span class="ident" id="6194427"><a href="/gostd/encoding/xml/marshal.go.html#6193759">url</a></span><span class="op" id="6194430">,</span>&nbsp;<span class="string" id="6194432">&#34;/&#34;</span><span class="op" id="6194435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194438">if</span>&nbsp;<span class="ident" id="6194441">i</span>&nbsp;<span class="op" id="6194443">:=</span>&nbsp;<span class="ident" id="6194446"><a href="/gostd/encoding/xml/marshal.go.html#6184740">strings</a></span><span class="op" id="6194453">.</span><span class="ident" id="6194454"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="6194463">(</span><span class="ident" id="6194464"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><span class="op" id="6194470">,</span>&nbsp;<span class="string" id="6194472">&#34;/&#34;</span><span class="op" id="6194475">)</span><span class="op" id="6194476">;</span>&nbsp;<span class="ident" id="6194478"><a href="/gostd/encoding/xml/marshal.go.html#6194441">i</a></span>&nbsp;<span class="op" id="6194480">&gt;=</span>&nbsp;<span class="num" id="6194483">0</span>&nbsp;<span class="op" id="6194485">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194489"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span>&nbsp;<span class="op" id="6194496">=</span>&nbsp;<span class="ident" id="6194498"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><span class="op" id="6194504">[</span><span class="ident" id="6194505"><a href="/gostd/encoding/xml/marshal.go.html#6194441">i</a></span><span class="op" id="6194506">+</span><span class="num" id="6194507">1</span><span class="op" id="6194508">:</span><span class="op" id="6194509">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6194512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194515">if</span>&nbsp;<span class="ident" id="6194518"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span>&nbsp;<span class="op" id="6194525">==</span>&nbsp;<span class="string" id="6194528">&#34;&#34;</span>&nbsp;<span class="op" id="6194531">||</span>&nbsp;<span class="op" id="6194534">!</span><span class="ident" id="6194535"><a href="/gostd/encoding/xml/xml.go.html#6267964">isName</a></span><span class="op" id="6194541">(</span><span class="op" id="6194542">[</span><span class="op" id="6194543">]</span><span class="builtintype" id="6194544">byte</span><span class="op" id="6194548">(</span><span class="ident" id="6194549"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><span class="op" id="6194555">)</span><span class="op" id="6194556">)</span>&nbsp;<span class="op" id="6194558">||</span>&nbsp;<span class="ident" id="6194561"><a href="/gostd/encoding/xml/marshal.go.html#6184740">strings</a></span><span class="op" id="6194568">.</span><span class="ident" id="6194569"><a href="/gostd/strings/strings.go.html#2968416">Contains</a></span><span class="op" id="6194577">(</span><span class="ident" id="6194578"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><span class="op" id="6194584">,</span>&nbsp;<span class="string" id="6194586">&#34;:&#34;</span><span class="op" id="6194589">)</span>&nbsp;<span class="op" id="6194591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194595"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span>&nbsp;<span class="op" id="6194602">=</span>&nbsp;<span class="string" id="6194604">&#34;_&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6194609">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194612">if</span>&nbsp;<span class="ident" id="6194615"><a href="/gostd/encoding/xml/marshal.go.html#6184740">strings</a></span><span class="op" id="6194622">.</span><span class="ident" id="6194623"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="6194632">(</span><span class="ident" id="6194633"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><span class="op" id="6194639">,</span>&nbsp;<span class="string" id="6194641">&#34;xml&#34;</span><span class="op" id="6194646">)</span>&nbsp;<span class="op" id="6194648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6194652">//&nbsp;xmlanything&nbsp;is&nbsp;reserved.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194682"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span>&nbsp;<span class="op" id="6194689">=</span>&nbsp;<span class="string" id="6194691">&#34;_&#34;</span>&nbsp;<span class="op" id="6194695">+</span>&nbsp;<span class="ident" id="6194697"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6194705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194708">if</span>&nbsp;<span class="ident" id="6194711"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194712">.</span><span class="ident" id="6194713"><a href="/gostd/encoding/xml/marshal.go.html#6193413">attrNS</a></span><span class="op" id="6194719">[</span><span class="ident" id="6194720"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><span class="op" id="6194726">]</span>&nbsp;<span class="op" id="6194728">!=</span>&nbsp;<span class="string" id="6194731">&#34;&#34;</span>&nbsp;<span class="op" id="6194734">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6194738">//&nbsp;Name&nbsp;is&nbsp;taken.&nbsp;Find&nbsp;a&nbsp;better&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194777">for</span>&nbsp;<span class="ident" id="6194781"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194782">.</span><span class="ident" id="6194783"><a href="/gostd/encoding/xml/marshal.go.html#6193309">seq</a></span><span class="op" id="6194786">++</span><span class="op" id="6194788">;</span>&nbsp;<span class="op" id="6194790">;</span>&nbsp;<span class="ident" id="6194792"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194793">.</span><span class="ident" id="6194794"><a href="/gostd/encoding/xml/marshal.go.html#6193309">seq</a></span><span class="op" id="6194797">++</span>&nbsp;<span class="op" id="6194800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194805">if</span>&nbsp;<span class="ident" id="6194808">id</span>&nbsp;<span class="op" id="6194811">:=</span>&nbsp;<span class="ident" id="6194814"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span>&nbsp;<span class="op" id="6194821">+</span>&nbsp;<span class="string" id="6194823">&#34;_&#34;</span>&nbsp;<span class="op" id="6194827">+</span>&nbsp;<span class="ident" id="6194829"><a href="/gostd/encoding/xml/marshal.go.html#6184729">strconv</a></span><span class="op" id="6194836">.</span><span class="ident" id="6194837"><a href="/gostd/strconv/itoa.go.html#2407288">Itoa</a></span><span class="op" id="6194841">(</span><span class="ident" id="6194842"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194843">.</span><span class="ident" id="6194844"><a href="/gostd/encoding/xml/marshal.go.html#6193309">seq</a></span><span class="op" id="6194847">)</span><span class="op" id="6194848">;</span>&nbsp;<span class="ident" id="6194850"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194851">.</span><span class="ident" id="6194852"><a href="/gostd/encoding/xml/marshal.go.html#6193413">attrNS</a></span><span class="op" id="6194858">[</span><span class="ident" id="6194859"><a href="/gostd/encoding/xml/marshal.go.html#6194808">id</a></span><span class="op" id="6194861">]</span>&nbsp;<span class="op" id="6194863">==</span>&nbsp;<span class="string" id="6194866">&#34;&#34;</span>&nbsp;<span class="op" id="6194869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194875"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span>&nbsp;<span class="op" id="6194882">=</span>&nbsp;<span class="ident" id="6194884"><a href="/gostd/encoding/xml/marshal.go.html#6194808">id</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6194891">break</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6194900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6194904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6194907">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194911"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194912">.</span><span class="ident" id="6194913"><a href="/gostd/encoding/xml/marshal.go.html#6193471">attrPrefix</a></span><span class="op" id="6194923">[</span><span class="ident" id="6194924"><a href="/gostd/encoding/xml/marshal.go.html#6193759">url</a></span><span class="op" id="6194927">]</span>&nbsp;<span class="op" id="6194929">=</span>&nbsp;<span class="ident" id="6194931"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194939"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194940">.</span><span class="ident" id="6194941"><a href="/gostd/encoding/xml/marshal.go.html#6193413">attrNS</a></span><span class="op" id="6194947">[</span><span class="ident" id="6194948"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><span class="op" id="6194954">]</span>&nbsp;<span class="op" id="6194956">=</span>&nbsp;<span class="ident" id="6194958"><a href="/gostd/encoding/xml/marshal.go.html#6193759">url</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194964"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194965">.</span><span class="ident" id="6194966"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6194977">(</span><span class="string" id="6194978">`xmlns:`</span><span class="op" id="6194986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6194989"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6194990">.</span><span class="ident" id="6194991"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6195002">(</span><span class="ident" id="6195003"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><span class="op" id="6195009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195012"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6195013">.</span><span class="ident" id="6195014"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6195025">(</span><span class="string" id="6195026">`=&#34;`</span><span class="op" id="6195030">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195033"><a href="/gostd/encoding/xml/xml.go.html#6283222">EscapeText</a></span><span class="op" id="6195043">(</span><span class="ident" id="6195044"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6195045">,</span>&nbsp;<span class="op" id="6195047">[</span><span class="op" id="6195048">]</span><span class="builtintype" id="6195049">byte</span><span class="op" id="6195053">(</span><span class="ident" id="6195054"><a href="/gostd/encoding/xml/marshal.go.html#6193759">url</a></span><span class="op" id="6195057">)</span><span class="op" id="6195058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195061"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6195062">.</span><span class="ident" id="6195063"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6195074">(</span><span class="string" id="6195075">`&#34;&nbsp;`</span><span class="op" id="6195079">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195083"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6195084">.</span><span class="ident" id="6195085"><a href="/gostd/encoding/xml/marshal.go.html#6193529">prefixes</a></span>&nbsp;<span class="op" id="6195094">=</span>&nbsp;<span class="builtinfunc" id="6195096">append</span><span class="op" id="6195102">(</span><span class="ident" id="6195103"><a href="/gostd/encoding/xml/marshal.go.html#6193730">p</a></span><span class="op" id="6195104">.</span><span class="ident" id="6195105"><a href="/gostd/encoding/xml/marshal.go.html#6193529">prefixes</a></span><span class="op" id="6195113">,</span>&nbsp;<span class="ident" id="6195115"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><span class="op" id="6195121">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6195125">return</span>&nbsp;<span class="ident" id="6195132"><a href="/gostd/encoding/xml/marshal.go.html#6194399">prefix</a></span><br>
<span class="lineno"></span><span class="op" id="6195139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6195142">//&nbsp;deleteAttrPrefix&nbsp;removes&nbsp;an&nbsp;attribute&nbsp;name&nbsp;space&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="6195202">func</span>&nbsp;<span class="op" id="6195207">(</span><span class="ident" id="6195208">p</span>&nbsp;<span class="op" id="6195210">*</span><span class="ident" id="6195211"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6195218">)</span>&nbsp;<span class="ident" id="6195220">deleteAttrPrefix</span><span class="op" id="6195236">(</span><span class="ident" id="6195237">prefix</span>&nbsp;<span class="builtintype" id="6195244">string</span><span class="op" id="6195250">)</span>&nbsp;<span class="op" id="6195252">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6195255">delete</span><span class="op" id="6195261">(</span><span class="ident" id="6195262"><a href="/gostd/encoding/xml/marshal.go.html#6195208">p</a></span><span class="op" id="6195263">.</span><span class="ident" id="6195264"><a href="/gostd/encoding/xml/marshal.go.html#6193471">attrPrefix</a></span><span class="op" id="6195274">,</span>&nbsp;<span class="ident" id="6195276"><a href="/gostd/encoding/xml/marshal.go.html#6195208">p</a></span><span class="op" id="6195277">.</span><span class="ident" id="6195278"><a href="/gostd/encoding/xml/marshal.go.html#6193413">attrNS</a></span><span class="op" id="6195284">[</span><span class="ident" id="6195285"><a href="/gostd/encoding/xml/marshal.go.html#6195237">prefix</a></span><span class="op" id="6195291">]</span><span class="op" id="6195292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6195295">delete</span><span class="op" id="6195301">(</span><span class="ident" id="6195302"><a href="/gostd/encoding/xml/marshal.go.html#6195208">p</a></span><span class="op" id="6195303">.</span><span class="ident" id="6195304"><a href="/gostd/encoding/xml/marshal.go.html#6193413">attrNS</a></span><span class="op" id="6195310">,</span>&nbsp;<span class="ident" id="6195312"><a href="/gostd/encoding/xml/marshal.go.html#6195237">prefix</a></span><span class="op" id="6195318">)</span><br>
<span class="lineno"></span><span class="op" id="6195320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6195323">func</span>&nbsp;<span class="op" id="6195328">(</span><span class="ident" id="6195329">p</span>&nbsp;<span class="op" id="6195331">*</span><span class="ident" id="6195332"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6195339">)</span>&nbsp;<span class="ident" id="6195341">markPrefix</span><span class="op" id="6195351">(</span><span class="op" id="6195352">)</span>&nbsp;<span class="op" id="6195354">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195357"><a href="/gostd/encoding/xml/marshal.go.html#6195329">p</a></span><span class="op" id="6195358">.</span><span class="ident" id="6195359"><a href="/gostd/encoding/xml/marshal.go.html#6193529">prefixes</a></span>&nbsp;<span class="op" id="6195368">=</span>&nbsp;<span class="builtinfunc" id="6195370">append</span><span class="op" id="6195376">(</span><span class="ident" id="6195377"><a href="/gostd/encoding/xml/marshal.go.html#6195329">p</a></span><span class="op" id="6195378">.</span><span class="ident" id="6195379"><a href="/gostd/encoding/xml/marshal.go.html#6193529">prefixes</a></span><span class="op" id="6195387">,</span>&nbsp;<span class="string" id="6195389">&#34;&#34;</span><span class="op" id="6195391">)</span><br>
<span class="lineno"></span><span class="op" id="6195393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6195396">func</span>&nbsp;<span class="op" id="6195401">(</span><span class="ident" id="6195402">p</span>&nbsp;<span class="op" id="6195404">*</span><span class="ident" id="6195405"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6195412">)</span>&nbsp;<span class="ident" id="6195414">popPrefix</span><span class="op" id="6195423">(</span><span class="op" id="6195424">)</span>&nbsp;<span class="op" id="6195426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6195429">for</span>&nbsp;<span class="builtinfunc" id="6195433">len</span><span class="op" id="6195436">(</span><span class="ident" id="6195437"><a href="/gostd/encoding/xml/marshal.go.html#6195402">p</a></span><span class="op" id="6195438">.</span><span class="ident" id="6195439"><a href="/gostd/encoding/xml/marshal.go.html#6193529">prefixes</a></span><span class="op" id="6195447">)</span>&nbsp;<span class="op" id="6195449">&gt;</span>&nbsp;<span class="num" id="6195451">0</span>&nbsp;<span class="op" id="6195453">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195457">prefix</span>&nbsp;<span class="op" id="6195464">:=</span>&nbsp;<span class="ident" id="6195467"><a href="/gostd/encoding/xml/marshal.go.html#6195402">p</a></span><span class="op" id="6195468">.</span><span class="ident" id="6195469"><a href="/gostd/encoding/xml/marshal.go.html#6193529">prefixes</a></span><span class="op" id="6195477">[</span><span class="builtinfunc" id="6195478">len</span><span class="op" id="6195481">(</span><span class="ident" id="6195482"><a href="/gostd/encoding/xml/marshal.go.html#6195402">p</a></span><span class="op" id="6195483">.</span><span class="ident" id="6195484"><a href="/gostd/encoding/xml/marshal.go.html#6193529">prefixes</a></span><span class="op" id="6195492">)</span><span class="op" id="6195493">-</span><span class="num" id="6195494">1</span><span class="op" id="6195495">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195499"><a href="/gostd/encoding/xml/marshal.go.html#6195402">p</a></span><span class="op" id="6195500">.</span><span class="ident" id="6195501"><a href="/gostd/encoding/xml/marshal.go.html#6193529">prefixes</a></span>&nbsp;<span class="op" id="6195510">=</span>&nbsp;<span class="ident" id="6195512"><a href="/gostd/encoding/xml/marshal.go.html#6195402">p</a></span><span class="op" id="6195513">.</span><span class="ident" id="6195514"><a href="/gostd/encoding/xml/marshal.go.html#6193529">prefixes</a></span><span class="op" id="6195522">[</span><span class="op" id="6195523">:</span><span class="builtinfunc" id="6195524">len</span><span class="op" id="6195527">(</span><span class="ident" id="6195528"><a href="/gostd/encoding/xml/marshal.go.html#6195402">p</a></span><span class="op" id="6195529">.</span><span class="ident" id="6195530"><a href="/gostd/encoding/xml/marshal.go.html#6193529">prefixes</a></span><span class="op" id="6195538">)</span><span class="op" id="6195539">-</span><span class="num" id="6195540">1</span><span class="op" id="6195541">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6195545">if</span>&nbsp;<span class="ident" id="6195548"><a href="/gostd/encoding/xml/marshal.go.html#6195457">prefix</a></span>&nbsp;<span class="op" id="6195555">==</span>&nbsp;<span class="string" id="6195558">&#34;&#34;</span>&nbsp;<span class="op" id="6195561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6195566">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6195574">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195578"><a href="/gostd/encoding/xml/marshal.go.html#6195402">p</a></span><span class="op" id="6195579">.</span><span class="ident" id="6195580"><a href="/gostd/encoding/xml/marshal.go.html#6195220">deleteAttrPrefix</a></span><span class="op" id="6195596">(</span><span class="ident" id="6195597"><a href="/gostd/encoding/xml/marshal.go.html#6195457">prefix</a></span><span class="op" id="6195603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6195606">}</span><br>
<span class="lineno"></span><span class="op" id="6195608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6195611">var</span>&nbsp;<span class="op" id="6195615">(</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195618">marshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6195636">=</span>&nbsp;<span class="ident" id="6195638"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6195645">.</span><span class="ident" id="6195646"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="6195652">(</span><span class="op" id="6195653">(</span><span class="op" id="6195654">*</span><span class="ident" id="6195655"><a href="/gostd/encoding/xml/marshal.go.html#6188326">Marshaler</a></span><span class="op" id="6195664">)</span><span class="op" id="6195665">(</span><span class="builtintype" id="6195666">nil</span><span class="op" id="6195669">)</span><span class="op" id="6195670">)</span><span class="op" id="6195671">.</span><span class="ident" id="6195672"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6195676">(</span><span class="op" id="6195677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195680">marshalerAttrType</span>&nbsp;<span class="op" id="6195698">=</span>&nbsp;<span class="ident" id="6195700"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6195707">.</span><span class="ident" id="6195708"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="6195714">(</span><span class="op" id="6195715">(</span><span class="op" id="6195716">*</span><span class="ident" id="6195717"><a href="/gostd/encoding/xml/marshal.go.html#6188951">MarshalerAttr</a></span><span class="op" id="6195730">)</span><span class="op" id="6195731">(</span><span class="builtintype" id="6195732">nil</span><span class="op" id="6195735">)</span><span class="op" id="6195736">)</span><span class="op" id="6195737">.</span><span class="ident" id="6195738"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6195742">(</span><span class="op" id="6195743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6195746">textMarshalerType</span>&nbsp;<span class="op" id="6195764">=</span>&nbsp;<span class="ident" id="6195766"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6195773">.</span><span class="ident" id="6195774"><a href="/gostd/reflect/type.go.html#2808718">TypeOf</a></span><span class="op" id="6195780">(</span><span class="op" id="6195781">(</span><span class="op" id="6195782">*</span><span class="ident" id="6195783"><a href="/gostd/encoding/xml/marshal.go.html#6184693">encoding</a></span><span class="op" id="6195791">.</span><span class="ident" id="6195792"><a href="/gostd/encoding/encoding.go.html#4051330">TextMarshaler</a></span><span class="op" id="6195805">)</span><span class="op" id="6195806">(</span><span class="builtintype" id="6195807">nil</span><span class="op" id="6195810">)</span><span class="op" id="6195811">)</span><span class="op" id="6195812">.</span><span class="ident" id="6195813"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6195817">(</span><span class="op" id="6195818">)</span><br>
<span class="lineno"></span><span class="op" id="6195820">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="comment" id="6195823">//&nbsp;marshalValue&nbsp;writes&nbsp;one&nbsp;or&nbsp;more&nbsp;XML&nbsp;elements&nbsp;representing&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6195889">//&nbsp;If&nbsp;val&nbsp;was&nbsp;obtained&nbsp;from&nbsp;a&nbsp;struct&nbsp;field,&nbsp;finfo&nbsp;must&nbsp;have&nbsp;its&nbsp;details.</span><br>
<span class="lineno"></span><span class="keyword" id="6195962">func</span>&nbsp;<span class="op" id="6195967">(</span><span class="ident" id="6195968">p</span>&nbsp;<span class="op" id="6195970">*</span><span class="ident" id="6195971"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6195978">)</span>&nbsp;<span class="ident" id="6195980">marshalValue</span><span class="op" id="6195992">(</span><span class="ident" id="6195993">val</span>&nbsp;<span class="ident" id="6195997"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6196004">.</span><span class="ident" id="6196005"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="6196010">,</span>&nbsp;<span class="ident" id="6196012">finfo</span>&nbsp;<span class="op" id="6196018">*</span><span class="ident" id="6196019"><a href="/gostd/encoding/xml/typeinfo.go.html#6231928">fieldInfo</a></span><span class="op" id="6196028">,</span>&nbsp;<span class="ident" id="6196030">startTemplate</span>&nbsp;<span class="op" id="6196044">*</span><span class="ident" id="6196045"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><span class="op" id="6196057">)</span>&nbsp;<span class="builtintype" id="6196059">error</span>&nbsp;<span class="op" id="6196065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196068">if</span>&nbsp;<span class="ident" id="6196071"><a href="/gostd/encoding/xml/marshal.go.html#6196030">startTemplate</a></span>&nbsp;<span class="op" id="6196085">!=</span>&nbsp;<span class="builtintype" id="6196088">nil</span>&nbsp;<span class="op" id="6196092">&amp;&amp;</span>&nbsp;<span class="ident" id="6196095"><a href="/gostd/encoding/xml/marshal.go.html#6196030">startTemplate</a></span><span class="op" id="6196108">.</span><span class="ident" id="6196109"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6196113">.</span><span class="ident" id="6196114"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6196120">==</span>&nbsp;<span class="string" id="6196123">&#34;&#34;</span>&nbsp;<span class="op" id="6196126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196130">return</span>&nbsp;<span class="ident" id="6196137"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6196140">.</span><span class="ident" id="6196141"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6196147">(</span><span class="string" id="6196148">&#34;xml:&nbsp;EncodeElement&nbsp;of&nbsp;StartElement&nbsp;with&nbsp;missing&nbsp;name&#34;</span><span class="op" id="6196202">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6196205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196209">if</span>&nbsp;<span class="op" id="6196212">!</span><span class="ident" id="6196213"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196216">.</span><span class="ident" id="6196217"><a href="/gostd/reflect/value.go.html#2861333">IsValid</a></span><span class="op" id="6196224">(</span><span class="op" id="6196225">)</span>&nbsp;<span class="op" id="6196227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196231">return</span>&nbsp;<span class="builtintype" id="6196238">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6196243">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196246">if</span>&nbsp;<span class="ident" id="6196249"><a href="/gostd/encoding/xml/marshal.go.html#6196012">finfo</a></span>&nbsp;<span class="op" id="6196255">!=</span>&nbsp;<span class="builtintype" id="6196258">nil</span>&nbsp;<span class="op" id="6196262">&amp;&amp;</span>&nbsp;<span class="ident" id="6196265"><a href="/gostd/encoding/xml/marshal.go.html#6196012">finfo</a></span><span class="op" id="6196270">.</span><span class="ident" id="6196271"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span><span class="op" id="6196276">&amp;</span><span class="ident" id="6196277"><a href="/gostd/encoding/xml/typeinfo.go.html#6232144">fOmitEmpty</a></span>&nbsp;<span class="op" id="6196288">!=</span>&nbsp;<span class="num" id="6196291">0</span>&nbsp;<span class="op" id="6196293">&amp;&amp;</span>&nbsp;<span class="ident" id="6196296"><a href="/gostd/encoding/xml/marshal.go.html#6210672">isEmptyValue</a></span><span class="op" id="6196308">(</span><span class="ident" id="6196309"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196312">)</span>&nbsp;<span class="op" id="6196314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196318">return</span>&nbsp;<span class="builtintype" id="6196325">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6196330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6196334">//&nbsp;Drill&nbsp;into&nbsp;interfaces&nbsp;and&nbsp;pointers.</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6196374">//&nbsp;This&nbsp;can&nbsp;turn&nbsp;into&nbsp;an&nbsp;infinite&nbsp;loop&nbsp;given&nbsp;a&nbsp;cyclic&nbsp;chain,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6196436">//&nbsp;but&nbsp;it&nbsp;matches&nbsp;the&nbsp;Go&nbsp;1&nbsp;behavior.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196474">for</span>&nbsp;<span class="ident" id="6196478"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196481">.</span><span class="ident" id="6196482"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6196486">(</span><span class="op" id="6196487">)</span>&nbsp;<span class="op" id="6196489">==</span>&nbsp;<span class="ident" id="6196492"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6196499">.</span><span class="ident" id="6196500"><a href="/gostd/reflect/type.go.html#2788041">Interface</a></span>&nbsp;<span class="op" id="6196510">||</span>&nbsp;<span class="ident" id="6196513"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196516">.</span><span class="ident" id="6196517"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6196521">(</span><span class="op" id="6196522">)</span>&nbsp;<span class="op" id="6196524">==</span>&nbsp;<span class="ident" id="6196527"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6196534">.</span><span class="ident" id="6196535"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="6196539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196543">if</span>&nbsp;<span class="ident" id="6196546"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196549">.</span><span class="ident" id="6196550"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="6196555">(</span><span class="op" id="6196556">)</span>&nbsp;<span class="op" id="6196558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196563">return</span>&nbsp;<span class="builtintype" id="6196570">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6196576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6196580"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span>&nbsp;<span class="op" id="6196584">=</span>&nbsp;<span class="ident" id="6196586"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196589">.</span><span class="ident" id="6196590"><a href="/gostd/reflect/value.go.html#2853087">Elem</a></span><span class="op" id="6196594">(</span><span class="op" id="6196595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6196598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6196602">kind</span>&nbsp;<span class="op" id="6196607">:=</span>&nbsp;<span class="ident" id="6196610"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196613">.</span><span class="ident" id="6196614"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6196618">(</span><span class="op" id="6196619">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6196622">typ</span>&nbsp;<span class="op" id="6196626">:=</span>&nbsp;<span class="ident" id="6196629"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196632">.</span><span class="ident" id="6196633"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6196637">(</span><span class="op" id="6196638">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6196642">//&nbsp;Check&nbsp;for&nbsp;marshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196667">if</span>&nbsp;<span class="ident" id="6196670"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196673">.</span><span class="ident" id="6196674"><a href="/gostd/reflect/value.go.html#2858331">CanInterface</a></span><span class="op" id="6196686">(</span><span class="op" id="6196687">)</span>&nbsp;<span class="op" id="6196689">&amp;&amp;</span>&nbsp;<span class="ident" id="6196692"><a href="/gostd/encoding/xml/marshal.go.html#6196622">typ</a></span><span class="op" id="6196695">.</span><span class="ident" id="6196696"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="6196706">(</span><span class="ident" id="6196707"><a href="/gostd/encoding/xml/marshal.go.html#6195618">marshalerType</a></span><span class="op" id="6196720">)</span>&nbsp;<span class="op" id="6196722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196726">return</span>&nbsp;<span class="ident" id="6196733"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6196734">.</span><span class="ident" id="6196735"><a href="/gostd/encoding/xml/marshal.go.html#6201891">marshalInterface</a></span><span class="op" id="6196751">(</span><span class="ident" id="6196752"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196755">.</span><span class="ident" id="6196756"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6196765">(</span><span class="op" id="6196766">)</span><span class="op" id="6196767">.</span><span class="op" id="6196768">(</span><span class="ident" id="6196769"><a href="/gostd/encoding/xml/marshal.go.html#6188326">Marshaler</a></span><span class="op" id="6196778">)</span><span class="op" id="6196779">,</span>&nbsp;<span class="ident" id="6196781"><a href="/gostd/encoding/xml/marshal.go.html#6201137">defaultStart</a></span><span class="op" id="6196793">(</span><span class="ident" id="6196794"><a href="/gostd/encoding/xml/marshal.go.html#6196622">typ</a></span><span class="op" id="6196797">,</span>&nbsp;<span class="ident" id="6196799"><a href="/gostd/encoding/xml/marshal.go.html#6196012">finfo</a></span><span class="op" id="6196804">,</span>&nbsp;<span class="ident" id="6196806"><a href="/gostd/encoding/xml/marshal.go.html#6196030">startTemplate</a></span><span class="op" id="6196819">)</span><span class="op" id="6196820">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6196823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196826">if</span>&nbsp;<span class="ident" id="6196829"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196832">.</span><span class="ident" id="6196833"><a href="/gostd/reflect/value.go.html#2840824">CanAddr</a></span><span class="op" id="6196840">(</span><span class="op" id="6196841">)</span>&nbsp;<span class="op" id="6196843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6196847">pv</span>&nbsp;<span class="op" id="6196850">:=</span>&nbsp;<span class="ident" id="6196853"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6196856">.</span><span class="ident" id="6196857"><a href="/gostd/reflect/value.go.html#2839495">Addr</a></span><span class="op" id="6196861">(</span><span class="op" id="6196862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196866">if</span>&nbsp;<span class="ident" id="6196869"><a href="/gostd/encoding/xml/marshal.go.html#6196847">pv</a></span><span class="op" id="6196871">.</span><span class="ident" id="6196872"><a href="/gostd/reflect/value.go.html#2858331">CanInterface</a></span><span class="op" id="6196884">(</span><span class="op" id="6196885">)</span>&nbsp;<span class="op" id="6196887">&amp;&amp;</span>&nbsp;<span class="ident" id="6196890"><a href="/gostd/encoding/xml/marshal.go.html#6196847">pv</a></span><span class="op" id="6196892">.</span><span class="ident" id="6196893"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6196897">(</span><span class="op" id="6196898">)</span><span class="op" id="6196899">.</span><span class="ident" id="6196900"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="6196910">(</span><span class="ident" id="6196911"><a href="/gostd/encoding/xml/marshal.go.html#6195618">marshalerType</a></span><span class="op" id="6196924">)</span>&nbsp;<span class="op" id="6196926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6196931">return</span>&nbsp;<span class="ident" id="6196938"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6196939">.</span><span class="ident" id="6196940"><a href="/gostd/encoding/xml/marshal.go.html#6201891">marshalInterface</a></span><span class="op" id="6196956">(</span><span class="ident" id="6196957"><a href="/gostd/encoding/xml/marshal.go.html#6196847">pv</a></span><span class="op" id="6196959">.</span><span class="ident" id="6196960"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6196969">(</span><span class="op" id="6196970">)</span><span class="op" id="6196971">.</span><span class="op" id="6196972">(</span><span class="ident" id="6196973"><a href="/gostd/encoding/xml/marshal.go.html#6188326">Marshaler</a></span><span class="op" id="6196982">)</span><span class="op" id="6196983">,</span>&nbsp;<span class="ident" id="6196985"><a href="/gostd/encoding/xml/marshal.go.html#6201137">defaultStart</a></span><span class="op" id="6196997">(</span><span class="ident" id="6196998"><a href="/gostd/encoding/xml/marshal.go.html#6196847">pv</a></span><span class="op" id="6197000">.</span><span class="ident" id="6197001"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6197005">(</span><span class="op" id="6197006">)</span><span class="op" id="6197007">,</span>&nbsp;<span class="ident" id="6197009"><a href="/gostd/encoding/xml/marshal.go.html#6196012">finfo</a></span><span class="op" id="6197014">,</span>&nbsp;<span class="ident" id="6197016"><a href="/gostd/encoding/xml/marshal.go.html#6196030">startTemplate</a></span><span class="op" id="6197029">)</span><span class="op" id="6197030">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6197034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6197037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6197041">//&nbsp;Check&nbsp;for&nbsp;text&nbsp;marshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197071">if</span>&nbsp;<span class="ident" id="6197074"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6197077">.</span><span class="ident" id="6197078"><a href="/gostd/reflect/value.go.html#2858331">CanInterface</a></span><span class="op" id="6197090">(</span><span class="op" id="6197091">)</span>&nbsp;<span class="op" id="6197093">&amp;&amp;</span>&nbsp;<span class="ident" id="6197096"><a href="/gostd/encoding/xml/marshal.go.html#6196622">typ</a></span><span class="op" id="6197099">.</span><span class="ident" id="6197100"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="6197110">(</span><span class="ident" id="6197111"><a href="/gostd/encoding/xml/marshal.go.html#6195746">textMarshalerType</a></span><span class="op" id="6197128">)</span>&nbsp;<span class="op" id="6197130">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197134">return</span>&nbsp;<span class="ident" id="6197141"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6197142">.</span><span class="ident" id="6197143"><a href="/gostd/encoding/xml/marshal.go.html#6202529">marshalTextInterface</a></span><span class="op" id="6197163">(</span><span class="ident" id="6197164"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6197167">.</span><span class="ident" id="6197168"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6197177">(</span><span class="op" id="6197178">)</span><span class="op" id="6197179">.</span><span class="op" id="6197180">(</span><span class="ident" id="6197181"><a href="/gostd/encoding/xml/marshal.go.html#6184693">encoding</a></span><span class="op" id="6197189">.</span><span class="ident" id="6197190"><a href="/gostd/encoding/encoding.go.html#4051330">TextMarshaler</a></span><span class="op" id="6197203">)</span><span class="op" id="6197204">,</span>&nbsp;<span class="ident" id="6197206"><a href="/gostd/encoding/xml/marshal.go.html#6201137">defaultStart</a></span><span class="op" id="6197218">(</span><span class="ident" id="6197219"><a href="/gostd/encoding/xml/marshal.go.html#6196622">typ</a></span><span class="op" id="6197222">,</span>&nbsp;<span class="ident" id="6197224"><a href="/gostd/encoding/xml/marshal.go.html#6196012">finfo</a></span><span class="op" id="6197229">,</span>&nbsp;<span class="ident" id="6197231"><a href="/gostd/encoding/xml/marshal.go.html#6196030">startTemplate</a></span><span class="op" id="6197244">)</span><span class="op" id="6197245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6197248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197251">if</span>&nbsp;<span class="ident" id="6197254"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6197257">.</span><span class="ident" id="6197258"><a href="/gostd/reflect/value.go.html#2840824">CanAddr</a></span><span class="op" id="6197265">(</span><span class="op" id="6197266">)</span>&nbsp;<span class="op" id="6197268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6197272">pv</span>&nbsp;<span class="op" id="6197275">:=</span>&nbsp;<span class="ident" id="6197278"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6197281">.</span><span class="ident" id="6197282"><a href="/gostd/reflect/value.go.html#2839495">Addr</a></span><span class="op" id="6197286">(</span><span class="op" id="6197287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197291">if</span>&nbsp;<span class="ident" id="6197294"><a href="/gostd/encoding/xml/marshal.go.html#6197272">pv</a></span><span class="op" id="6197296">.</span><span class="ident" id="6197297"><a href="/gostd/reflect/value.go.html#2858331">CanInterface</a></span><span class="op" id="6197309">(</span><span class="op" id="6197310">)</span>&nbsp;<span class="op" id="6197312">&amp;&amp;</span>&nbsp;<span class="ident" id="6197315"><a href="/gostd/encoding/xml/marshal.go.html#6197272">pv</a></span><span class="op" id="6197317">.</span><span class="ident" id="6197318"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6197322">(</span><span class="op" id="6197323">)</span><span class="op" id="6197324">.</span><span class="ident" id="6197325"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="6197335">(</span><span class="ident" id="6197336"><a href="/gostd/encoding/xml/marshal.go.html#6195746">textMarshalerType</a></span><span class="op" id="6197353">)</span>&nbsp;<span class="op" id="6197355">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197360">return</span>&nbsp;<span class="ident" id="6197367"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6197368">.</span><span class="ident" id="6197369"><a href="/gostd/encoding/xml/marshal.go.html#6202529">marshalTextInterface</a></span><span class="op" id="6197389">(</span><span class="ident" id="6197390"><a href="/gostd/encoding/xml/marshal.go.html#6197272">pv</a></span><span class="op" id="6197392">.</span><span class="ident" id="6197393"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6197402">(</span><span class="op" id="6197403">)</span><span class="op" id="6197404">.</span><span class="op" id="6197405">(</span><span class="ident" id="6197406"><a href="/gostd/encoding/xml/marshal.go.html#6184693">encoding</a></span><span class="op" id="6197414">.</span><span class="ident" id="6197415"><a href="/gostd/encoding/encoding.go.html#4051330">TextMarshaler</a></span><span class="op" id="6197428">)</span><span class="op" id="6197429">,</span>&nbsp;<span class="ident" id="6197431"><a href="/gostd/encoding/xml/marshal.go.html#6201137">defaultStart</a></span><span class="op" id="6197443">(</span><span class="ident" id="6197444"><a href="/gostd/encoding/xml/marshal.go.html#6197272">pv</a></span><span class="op" id="6197446">.</span><span class="ident" id="6197447"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6197451">(</span><span class="op" id="6197452">)</span><span class="op" id="6197453">,</span>&nbsp;<span class="ident" id="6197455"><a href="/gostd/encoding/xml/marshal.go.html#6196012">finfo</a></span><span class="op" id="6197460">,</span>&nbsp;<span class="ident" id="6197462"><a href="/gostd/encoding/xml/marshal.go.html#6196030">startTemplate</a></span><span class="op" id="6197475">)</span><span class="op" id="6197476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6197480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6197483">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6197487">//&nbsp;Slices&nbsp;and&nbsp;arrays&nbsp;iterate&nbsp;over&nbsp;the&nbsp;elements.&nbsp;They&nbsp;do&nbsp;not&nbsp;have&nbsp;an&nbsp;enclosing&nbsp;tag.</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197571">if</span>&nbsp;<span class="op" id="6197574">(</span><span class="ident" id="6197575"><a href="/gostd/encoding/xml/marshal.go.html#6196602">kind</a></span>&nbsp;<span class="op" id="6197580">==</span>&nbsp;<span class="ident" id="6197583"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6197590">.</span><span class="ident" id="6197591"><a href="/gostd/reflect/type.go.html#2788062">Slice</a></span>&nbsp;<span class="op" id="6197597">||</span>&nbsp;<span class="ident" id="6197600"><a href="/gostd/encoding/xml/marshal.go.html#6196602">kind</a></span>&nbsp;<span class="op" id="6197605">==</span>&nbsp;<span class="ident" id="6197608"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6197615">.</span><span class="ident" id="6197616"><a href="/gostd/reflect/type.go.html#2788022">Array</a></span><span class="op" id="6197621">)</span>&nbsp;<span class="op" id="6197623">&amp;&amp;</span>&nbsp;<span class="ident" id="6197626"><a href="/gostd/encoding/xml/marshal.go.html#6196622">typ</a></span><span class="op" id="6197629">.</span><span class="ident" id="6197630"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6197634">(</span><span class="op" id="6197635">)</span><span class="op" id="6197636">.</span><span class="ident" id="6197637"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6197641">(</span><span class="op" id="6197642">)</span>&nbsp;<span class="op" id="6197644">!=</span>&nbsp;<span class="ident" id="6197647"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6197654">.</span><span class="ident" id="6197655"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span>&nbsp;<span class="op" id="6197661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197665">for</span>&nbsp;<span class="ident" id="6197669">i</span><span class="op" id="6197670">,</span>&nbsp;<span class="ident" id="6197672">n</span>&nbsp;<span class="op" id="6197674">:=</span>&nbsp;<span class="num" id="6197677">0</span><span class="op" id="6197678">,</span>&nbsp;<span class="ident" id="6197680"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6197683">.</span><span class="ident" id="6197684"><a href="/gostd/reflect/value.go.html#2861631">Len</a></span><span class="op" id="6197687">(</span><span class="op" id="6197688">)</span><span class="op" id="6197689">;</span>&nbsp;<span class="ident" id="6197691"><a href="/gostd/encoding/xml/marshal.go.html#6197669">i</a></span>&nbsp;<span class="op" id="6197693">&lt;</span>&nbsp;<span class="ident" id="6197695"><a href="/gostd/encoding/xml/marshal.go.html#6197672">n</a></span><span class="op" id="6197696">;</span>&nbsp;<span class="ident" id="6197698"><a href="/gostd/encoding/xml/marshal.go.html#6197669">i</a></span><span class="op" id="6197699">++</span>&nbsp;<span class="op" id="6197702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197707">if</span>&nbsp;<span class="ident" id="6197710">err</span>&nbsp;<span class="op" id="6197714">:=</span>&nbsp;<span class="ident" id="6197717"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6197718">.</span><span class="ident" id="6197719"><a href="/gostd/encoding/xml/marshal.go.html#6195980">marshalValue</a></span><span class="op" id="6197731">(</span><span class="ident" id="6197732"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6197735">.</span><span class="ident" id="6197736"><a href="/gostd/reflect/value.go.html#2856377">Index</a></span><span class="op" id="6197741">(</span><span class="ident" id="6197742"><a href="/gostd/encoding/xml/marshal.go.html#6197669">i</a></span><span class="op" id="6197743">)</span><span class="op" id="6197744">,</span>&nbsp;<span class="ident" id="6197746"><a href="/gostd/encoding/xml/marshal.go.html#6196012">finfo</a></span><span class="op" id="6197751">,</span>&nbsp;<span class="ident" id="6197753"><a href="/gostd/encoding/xml/marshal.go.html#6196030">startTemplate</a></span><span class="op" id="6197766">)</span><span class="op" id="6197767">;</span>&nbsp;<span class="ident" id="6197769"><a href="/gostd/encoding/xml/marshal.go.html#6197710">err</a></span>&nbsp;<span class="op" id="6197773">!=</span>&nbsp;<span class="builtintype" id="6197776">nil</span>&nbsp;<span class="op" id="6197780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197786">return</span>&nbsp;<span class="ident" id="6197793"><a href="/gostd/encoding/xml/marshal.go.html#6197710">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6197800">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6197804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197808">return</span>&nbsp;<span class="builtintype" id="6197815">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6197820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6197824">tinfo</span><span class="op" id="6197829">,</span>&nbsp;<span class="ident" id="6197831">err</span>&nbsp;<span class="op" id="6197835">:=</span>&nbsp;<span class="ident" id="6197838"><a href="/gostd/encoding/xml/typeinfo.go.html#6232458">getTypeInfo</a></span><span class="op" id="6197849">(</span><span class="ident" id="6197850"><a href="/gostd/encoding/xml/marshal.go.html#6196622">typ</a></span><span class="op" id="6197853">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197856">if</span>&nbsp;<span class="ident" id="6197859"><a href="/gostd/encoding/xml/marshal.go.html#6197831">err</a></span>&nbsp;<span class="op" id="6197863">!=</span>&nbsp;<span class="builtintype" id="6197866">nil</span>&nbsp;<span class="op" id="6197870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6197874">return</span>&nbsp;<span class="ident" id="6197881"><a href="/gostd/encoding/xml/marshal.go.html#6197831">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6197886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6197890">//&nbsp;Create&nbsp;start&nbsp;element.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6197916">//&nbsp;Precedence&nbsp;for&nbsp;the&nbsp;XML&nbsp;element&nbsp;name&nbsp;is:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6197960">//&nbsp;0.&nbsp;startTemplate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6197981">//&nbsp;1.&nbsp;XMLName&nbsp;field&nbsp;in&nbsp;underlying&nbsp;struct;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6198024">//&nbsp;2.&nbsp;field&nbsp;name/tag&nbsp;in&nbsp;the&nbsp;struct&nbsp;field;&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6198071">//&nbsp;3.&nbsp;type&nbsp;name</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198088">var</span>&nbsp;<span class="ident" id="6198092">start</span>&nbsp;<span class="ident" id="6198098"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198113">if</span>&nbsp;<span class="ident" id="6198116"><a href="/gostd/encoding/xml/marshal.go.html#6196030">startTemplate</a></span>&nbsp;<span class="op" id="6198130">!=</span>&nbsp;<span class="builtintype" id="6198133">nil</span>&nbsp;<span class="op" id="6198137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198141"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198146">.</span><span class="ident" id="6198147"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span>&nbsp;<span class="op" id="6198152">=</span>&nbsp;<span class="ident" id="6198154"><a href="/gostd/encoding/xml/marshal.go.html#6196030">startTemplate</a></span><span class="op" id="6198167">.</span><span class="ident" id="6198168"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198175"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198180">.</span><span class="ident" id="6198181"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span>&nbsp;<span class="op" id="6198186">=</span>&nbsp;<span class="builtinfunc" id="6198188">append</span><span class="op" id="6198194">(</span><span class="ident" id="6198195"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198200">.</span><span class="ident" id="6198201"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span><span class="op" id="6198205">,</span>&nbsp;<span class="ident" id="6198207"><a href="/gostd/encoding/xml/marshal.go.html#6196030">startTemplate</a></span><span class="op" id="6198220">.</span><span class="ident" id="6198221"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span><span class="op" id="6198225">...</span><span class="op" id="6198228">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6198231">}</span>&nbsp;<span class="keyword" id="6198233">else</span>&nbsp;<span class="keyword" id="6198238">if</span>&nbsp;<span class="ident" id="6198241"><a href="/gostd/encoding/xml/marshal.go.html#6197824">tinfo</a></span><span class="op" id="6198246">.</span><span class="ident" id="6198247"><a href="/gostd/encoding/xml/typeinfo.go.html#6231807">xmlname</a></span>&nbsp;<span class="op" id="6198255">!=</span>&nbsp;<span class="builtintype" id="6198258">nil</span>&nbsp;<span class="op" id="6198262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198266">xmlname</span>&nbsp;<span class="op" id="6198274">:=</span>&nbsp;<span class="ident" id="6198277"><a href="/gostd/encoding/xml/marshal.go.html#6197824">tinfo</a></span><span class="op" id="6198282">.</span><span class="ident" id="6198283"><a href="/gostd/encoding/xml/typeinfo.go.html#6231807">xmlname</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198293">if</span>&nbsp;<span class="ident" id="6198296"><a href="/gostd/encoding/xml/marshal.go.html#6198266">xmlname</a></span><span class="op" id="6198303">.</span><span class="ident" id="6198304"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6198309">!=</span>&nbsp;<span class="string" id="6198312">&#34;&#34;</span>&nbsp;<span class="op" id="6198315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198320"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198325">.</span><span class="ident" id="6198326"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6198330">.</span><span class="ident" id="6198331"><a href="/gostd/encoding/xml/xml.go.html#6242010">Space</a></span><span class="op" id="6198336">,</span>&nbsp;<span class="ident" id="6198338"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198343">.</span><span class="ident" id="6198344"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6198348">.</span><span class="ident" id="6198349"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6198355">=</span>&nbsp;<span class="ident" id="6198357"><a href="/gostd/encoding/xml/marshal.go.html#6198266">xmlname</a></span><span class="op" id="6198364">.</span><span class="ident" id="6198365"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span><span class="op" id="6198370">,</span>&nbsp;<span class="ident" id="6198372"><a href="/gostd/encoding/xml/marshal.go.html#6198266">xmlname</a></span><span class="op" id="6198379">.</span><span class="ident" id="6198380"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6198387">}</span>&nbsp;<span class="keyword" id="6198389">else</span>&nbsp;<span class="keyword" id="6198394">if</span>&nbsp;<span class="ident" id="6198397">v</span><span class="op" id="6198398">,</span>&nbsp;<span class="ident" id="6198400">ok</span>&nbsp;<span class="op" id="6198403">:=</span>&nbsp;<span class="ident" id="6198406"><a href="/gostd/encoding/xml/marshal.go.html#6198266">xmlname</a></span><span class="op" id="6198413">.</span><span class="ident" id="6198414"><a href="/gostd/encoding/xml/typeinfo.go.html#6240677">value</a></span><span class="op" id="6198419">(</span><span class="ident" id="6198420"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6198423">)</span><span class="op" id="6198424">.</span><span class="ident" id="6198425"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6198434">(</span><span class="op" id="6198435">)</span><span class="op" id="6198436">.</span><span class="op" id="6198437">(</span><span class="ident" id="6198438"><a href="/gostd/encoding/xml/xml.go.html#6241995">Name</a></span><span class="op" id="6198442">)</span><span class="op" id="6198443">;</span>&nbsp;<span class="ident" id="6198445"><a href="/gostd/encoding/xml/marshal.go.html#6198400">ok</a></span>&nbsp;<span class="op" id="6198448">&amp;&amp;</span>&nbsp;<span class="ident" id="6198451"><a href="/gostd/encoding/xml/marshal.go.html#6198397">v</a></span><span class="op" id="6198452">.</span><span class="ident" id="6198453"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6198459">!=</span>&nbsp;<span class="string" id="6198462">&#34;&#34;</span>&nbsp;<span class="op" id="6198465">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198470"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198475">.</span><span class="ident" id="6198476"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span>&nbsp;<span class="op" id="6198481">=</span>&nbsp;<span class="ident" id="6198483"><a href="/gostd/encoding/xml/marshal.go.html#6198397">v</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6198487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6198490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198493">if</span>&nbsp;<span class="ident" id="6198496"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198501">.</span><span class="ident" id="6198502"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6198506">.</span><span class="ident" id="6198507"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6198513">==</span>&nbsp;<span class="string" id="6198516">&#34;&#34;</span>&nbsp;<span class="op" id="6198519">&amp;&amp;</span>&nbsp;<span class="ident" id="6198522"><a href="/gostd/encoding/xml/marshal.go.html#6196012">finfo</a></span>&nbsp;<span class="op" id="6198528">!=</span>&nbsp;<span class="builtintype" id="6198531">nil</span>&nbsp;<span class="op" id="6198535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198539"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198544">.</span><span class="ident" id="6198545"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6198549">.</span><span class="ident" id="6198550"><a href="/gostd/encoding/xml/xml.go.html#6242010">Space</a></span><span class="op" id="6198555">,</span>&nbsp;<span class="ident" id="6198557"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198562">.</span><span class="ident" id="6198563"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6198567">.</span><span class="ident" id="6198568"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6198574">=</span>&nbsp;<span class="ident" id="6198576"><a href="/gostd/encoding/xml/marshal.go.html#6196012">finfo</a></span><span class="op" id="6198581">.</span><span class="ident" id="6198582"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span><span class="op" id="6198587">,</span>&nbsp;<span class="ident" id="6198589"><a href="/gostd/encoding/xml/marshal.go.html#6196012">finfo</a></span><span class="op" id="6198594">.</span><span class="ident" id="6198595"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6198601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198604">if</span>&nbsp;<span class="ident" id="6198607"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198612">.</span><span class="ident" id="6198613"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6198617">.</span><span class="ident" id="6198618"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6198624">==</span>&nbsp;<span class="string" id="6198627">&#34;&#34;</span>&nbsp;<span class="op" id="6198630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198634">name</span>&nbsp;<span class="op" id="6198639">:=</span>&nbsp;<span class="ident" id="6198642"><a href="/gostd/encoding/xml/marshal.go.html#6196622">typ</a></span><span class="op" id="6198645">.</span><span class="ident" id="6198646"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="6198650">(</span><span class="op" id="6198651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198655">if</span>&nbsp;<span class="ident" id="6198658"><a href="/gostd/encoding/xml/marshal.go.html#6198634">name</a></span>&nbsp;<span class="op" id="6198663">==</span>&nbsp;<span class="string" id="6198666">&#34;&#34;</span>&nbsp;<span class="op" id="6198669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198674">return</span>&nbsp;<span class="op" id="6198681">&amp;</span><span class="ident" id="6198682"><a href="/gostd/encoding/xml/marshal.go.html#6210512">UnsupportedTypeError</a></span><span class="op" id="6198702">{</span><span class="ident" id="6198703"><a href="/gostd/encoding/xml/marshal.go.html#6196622">typ</a></span><span class="op" id="6198706">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6198710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198714"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6198719">.</span><span class="ident" id="6198720"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6198724">.</span><span class="ident" id="6198725"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6198731">=</span>&nbsp;<span class="ident" id="6198733"><a href="/gostd/encoding/xml/marshal.go.html#6198634">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6198739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6198743">//&nbsp;Attributes</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198758">for</span>&nbsp;<span class="ident" id="6198762">i</span>&nbsp;<span class="op" id="6198764">:=</span>&nbsp;<span class="keyword" id="6198767">range</span>&nbsp;<span class="ident" id="6198773"><a href="/gostd/encoding/xml/marshal.go.html#6197824">tinfo</a></span><span class="op" id="6198778">.</span><span class="ident" id="6198779"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span>&nbsp;<span class="op" id="6198786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198790">finfo</span>&nbsp;<span class="op" id="6198796">:=</span>&nbsp;<span class="op" id="6198799">&amp;</span><span class="ident" id="6198800"><a href="/gostd/encoding/xml/marshal.go.html#6197824">tinfo</a></span><span class="op" id="6198805">.</span><span class="ident" id="6198806"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6198812">[</span><span class="ident" id="6198813"><a href="/gostd/encoding/xml/marshal.go.html#6198762">i</a></span><span class="op" id="6198814">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198818">if</span>&nbsp;<span class="ident" id="6198821"><a href="/gostd/encoding/xml/marshal.go.html#6198790">finfo</a></span><span class="op" id="6198826">.</span><span class="ident" id="6198827"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span><span class="op" id="6198832">&amp;</span><span class="ident" id="6198833"><a href="/gostd/encoding/xml/typeinfo.go.html#6232098">fAttr</a></span>&nbsp;<span class="op" id="6198839">==</span>&nbsp;<span class="num" id="6198842">0</span>&nbsp;<span class="op" id="6198844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198849">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6198860">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198864">fv</span>&nbsp;<span class="op" id="6198867">:=</span>&nbsp;<span class="ident" id="6198870"><a href="/gostd/encoding/xml/marshal.go.html#6198790">finfo</a></span><span class="op" id="6198875">.</span><span class="ident" id="6198876"><a href="/gostd/encoding/xml/typeinfo.go.html#6240677">value</a></span><span class="op" id="6198881">(</span><span class="ident" id="6198882"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6198885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6198889">name</span>&nbsp;<span class="op" id="6198894">:=</span>&nbsp;<span class="ident" id="6198897"><a href="/gostd/encoding/xml/xml.go.html#6241995">Name</a></span><span class="op" id="6198901">{</span><span class="ident" id="6198902"><a href="/gostd/encoding/xml/xml.go.html#6242010">Space</a></span><span class="op" id="6198907">:</span>&nbsp;<span class="ident" id="6198909"><a href="/gostd/encoding/xml/marshal.go.html#6198790">finfo</a></span><span class="op" id="6198914">.</span><span class="ident" id="6198915"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span><span class="op" id="6198920">,</span>&nbsp;<span class="ident" id="6198922"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6198927">:</span>&nbsp;<span class="ident" id="6198929"><a href="/gostd/encoding/xml/marshal.go.html#6198790">finfo</a></span><span class="op" id="6198934">.</span><span class="ident" id="6198935"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span><span class="op" id="6198939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6198944">if</span>&nbsp;<span class="ident" id="6198947"><a href="/gostd/encoding/xml/marshal.go.html#6198790">finfo</a></span><span class="op" id="6198952">.</span><span class="ident" id="6198953"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span><span class="op" id="6198958">&amp;</span><span class="ident" id="6198959"><a href="/gostd/encoding/xml/typeinfo.go.html#6232144">fOmitEmpty</a></span>&nbsp;<span class="op" id="6198970">!=</span>&nbsp;<span class="num" id="6198973">0</span>&nbsp;<span class="op" id="6198975">&amp;&amp;</span>&nbsp;<span class="ident" id="6198978"><a href="/gostd/encoding/xml/marshal.go.html#6210672">isEmptyValue</a></span><span class="op" id="6198990">(</span><span class="ident" id="6198991"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6198993">)</span>&nbsp;<span class="op" id="6198995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199000">continue</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199016">if</span>&nbsp;<span class="ident" id="6199019"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199021">.</span><span class="ident" id="6199022"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6199026">(</span><span class="op" id="6199027">)</span>&nbsp;<span class="op" id="6199029">==</span>&nbsp;<span class="ident" id="6199032"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6199039">.</span><span class="ident" id="6199040"><a href="/gostd/reflect/type.go.html#2788041">Interface</a></span>&nbsp;<span class="op" id="6199050">&amp;&amp;</span>&nbsp;<span class="ident" id="6199053"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199055">.</span><span class="ident" id="6199056"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="6199061">(</span><span class="op" id="6199062">)</span>&nbsp;<span class="op" id="6199064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199069">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199080">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199085">if</span>&nbsp;<span class="ident" id="6199088"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199090">.</span><span class="ident" id="6199091"><a href="/gostd/reflect/value.go.html#2858331">CanInterface</a></span><span class="op" id="6199103">(</span><span class="op" id="6199104">)</span>&nbsp;<span class="op" id="6199106">&amp;&amp;</span>&nbsp;<span class="ident" id="6199109"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199111">.</span><span class="ident" id="6199112"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6199116">(</span><span class="op" id="6199117">)</span><span class="op" id="6199118">.</span><span class="ident" id="6199119"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="6199129">(</span><span class="ident" id="6199130"><a href="/gostd/encoding/xml/marshal.go.html#6195680">marshalerAttrType</a></span><span class="op" id="6199147">)</span>&nbsp;<span class="op" id="6199149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6199154">attr</span><span class="op" id="6199158">,</span>&nbsp;<span class="ident" id="6199160">err</span>&nbsp;<span class="op" id="6199164">:=</span>&nbsp;<span class="ident" id="6199167"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199169">.</span><span class="ident" id="6199170"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6199179">(</span><span class="op" id="6199180">)</span><span class="op" id="6199181">.</span><span class="op" id="6199182">(</span><span class="ident" id="6199183"><a href="/gostd/encoding/xml/marshal.go.html#6188951">MarshalerAttr</a></span><span class="op" id="6199196">)</span><span class="op" id="6199197">.</span><span class="ident" id="6199198"><a href="/gostd/encoding/xml/marshal.go.html#6188978">MarshalXMLAttr</a></span><span class="op" id="6199212">(</span><span class="ident" id="6199213"><a href="/gostd/encoding/xml/marshal.go.html#6198889">name</a></span><span class="op" id="6199217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199222">if</span>&nbsp;<span class="ident" id="6199225"><a href="/gostd/encoding/xml/marshal.go.html#6199160">err</a></span>&nbsp;<span class="op" id="6199229">!=</span>&nbsp;<span class="builtintype" id="6199232">nil</span>&nbsp;<span class="op" id="6199236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199242">return</span>&nbsp;<span class="ident" id="6199249"><a href="/gostd/encoding/xml/marshal.go.html#6199160">err</a></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199261">if</span>&nbsp;<span class="ident" id="6199264"><a href="/gostd/encoding/xml/marshal.go.html#6199154">attr</a></span><span class="op" id="6199268">.</span><span class="ident" id="6199269"><a href="/gostd/encoding/xml/xml.go.html#6242120">Name</a></span><span class="op" id="6199273">.</span><span class="ident" id="6199274"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6199280">!=</span>&nbsp;<span class="string" id="6199283">&#34;&#34;</span>&nbsp;<span class="op" id="6199286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6199292"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6199297">.</span><span class="ident" id="6199298"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span>&nbsp;<span class="op" id="6199303">=</span>&nbsp;<span class="builtinfunc" id="6199305">append</span><span class="op" id="6199311">(</span><span class="ident" id="6199312"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6199317">.</span><span class="ident" id="6199318"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span><span class="op" id="6199322">,</span>&nbsp;<span class="ident" id="6199324"><a href="/gostd/encoding/xml/marshal.go.html#6199154">attr</a></span><span class="op" id="6199328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199338">continue</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199349">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199354">if</span>&nbsp;<span class="ident" id="6199357"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199359">.</span><span class="ident" id="6199360"><a href="/gostd/reflect/value.go.html#2840824">CanAddr</a></span><span class="op" id="6199367">(</span><span class="op" id="6199368">)</span>&nbsp;<span class="op" id="6199370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6199375">pv</span>&nbsp;<span class="op" id="6199378">:=</span>&nbsp;<span class="ident" id="6199381"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199383">.</span><span class="ident" id="6199384"><a href="/gostd/reflect/value.go.html#2839495">Addr</a></span><span class="op" id="6199388">(</span><span class="op" id="6199389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199394">if</span>&nbsp;<span class="ident" id="6199397"><a href="/gostd/encoding/xml/marshal.go.html#6199375">pv</a></span><span class="op" id="6199399">.</span><span class="ident" id="6199400"><a href="/gostd/reflect/value.go.html#2858331">CanInterface</a></span><span class="op" id="6199412">(</span><span class="op" id="6199413">)</span>&nbsp;<span class="op" id="6199415">&amp;&amp;</span>&nbsp;<span class="ident" id="6199418"><a href="/gostd/encoding/xml/marshal.go.html#6199375">pv</a></span><span class="op" id="6199420">.</span><span class="ident" id="6199421"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6199425">(</span><span class="op" id="6199426">)</span><span class="op" id="6199427">.</span><span class="ident" id="6199428"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="6199438">(</span><span class="ident" id="6199439"><a href="/gostd/encoding/xml/marshal.go.html#6195680">marshalerAttrType</a></span><span class="op" id="6199456">)</span>&nbsp;<span class="op" id="6199458">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6199464">attr</span><span class="op" id="6199468">,</span>&nbsp;<span class="ident" id="6199470">err</span>&nbsp;<span class="op" id="6199474">:=</span>&nbsp;<span class="ident" id="6199477"><a href="/gostd/encoding/xml/marshal.go.html#6199375">pv</a></span><span class="op" id="6199479">.</span><span class="ident" id="6199480"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6199489">(</span><span class="op" id="6199490">)</span><span class="op" id="6199491">.</span><span class="op" id="6199492">(</span><span class="ident" id="6199493"><a href="/gostd/encoding/xml/marshal.go.html#6188951">MarshalerAttr</a></span><span class="op" id="6199506">)</span><span class="op" id="6199507">.</span><span class="ident" id="6199508"><a href="/gostd/encoding/xml/marshal.go.html#6188978">MarshalXMLAttr</a></span><span class="op" id="6199522">(</span><span class="ident" id="6199523"><a href="/gostd/encoding/xml/marshal.go.html#6198889">name</a></span><span class="op" id="6199527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199533">if</span>&nbsp;<span class="ident" id="6199536"><a href="/gostd/encoding/xml/marshal.go.html#6199470">err</a></span>&nbsp;<span class="op" id="6199540">!=</span>&nbsp;<span class="builtintype" id="6199543">nil</span>&nbsp;<span class="op" id="6199547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199554">return</span>&nbsp;<span class="ident" id="6199561"><a href="/gostd/encoding/xml/marshal.go.html#6199470">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199575">if</span>&nbsp;<span class="ident" id="6199578"><a href="/gostd/encoding/xml/marshal.go.html#6199464">attr</a></span><span class="op" id="6199582">.</span><span class="ident" id="6199583"><a href="/gostd/encoding/xml/xml.go.html#6242120">Name</a></span><span class="op" id="6199587">.</span><span class="ident" id="6199588"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6199594">!=</span>&nbsp;<span class="string" id="6199597">&#34;&#34;</span>&nbsp;<span class="op" id="6199600">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6199607"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6199612">.</span><span class="ident" id="6199613"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span>&nbsp;<span class="op" id="6199618">=</span>&nbsp;<span class="builtinfunc" id="6199620">append</span><span class="op" id="6199626">(</span><span class="ident" id="6199627"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6199632">.</span><span class="ident" id="6199633"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span><span class="op" id="6199637">,</span>&nbsp;<span class="ident" id="6199639"><a href="/gostd/encoding/xml/marshal.go.html#6199464">attr</a></span><span class="op" id="6199643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199655">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199671">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199676">if</span>&nbsp;<span class="ident" id="6199679"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199681">.</span><span class="ident" id="6199682"><a href="/gostd/reflect/value.go.html#2858331">CanInterface</a></span><span class="op" id="6199694">(</span><span class="op" id="6199695">)</span>&nbsp;<span class="op" id="6199697">&amp;&amp;</span>&nbsp;<span class="ident" id="6199700"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199702">.</span><span class="ident" id="6199703"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6199707">(</span><span class="op" id="6199708">)</span><span class="op" id="6199709">.</span><span class="ident" id="6199710"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="6199720">(</span><span class="ident" id="6199721"><a href="/gostd/encoding/xml/marshal.go.html#6195746">textMarshalerType</a></span><span class="op" id="6199738">)</span>&nbsp;<span class="op" id="6199740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6199745">text</span><span class="op" id="6199749">,</span>&nbsp;<span class="ident" id="6199751">err</span>&nbsp;<span class="op" id="6199755">:=</span>&nbsp;<span class="ident" id="6199758"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199760">.</span><span class="ident" id="6199761"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6199770">(</span><span class="op" id="6199771">)</span><span class="op" id="6199772">.</span><span class="op" id="6199773">(</span><span class="ident" id="6199774"><a href="/gostd/encoding/xml/marshal.go.html#6184693">encoding</a></span><span class="op" id="6199782">.</span><span class="ident" id="6199783"><a href="/gostd/encoding/encoding.go.html#4051330">TextMarshaler</a></span><span class="op" id="6199796">)</span><span class="op" id="6199797">.</span><span class="ident" id="6199798"><a href="/gostd/encoding/encoding.go.html#4051357">MarshalText</a></span><span class="op" id="6199809">(</span><span class="op" id="6199810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199815">if</span>&nbsp;<span class="ident" id="6199818"><a href="/gostd/encoding/xml/marshal.go.html#6199751">err</a></span>&nbsp;<span class="op" id="6199822">!=</span>&nbsp;<span class="builtintype" id="6199825">nil</span>&nbsp;<span class="op" id="6199829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199835">return</span>&nbsp;<span class="ident" id="6199842"><a href="/gostd/encoding/xml/marshal.go.html#6199751">err</a></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6199854"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6199859">.</span><span class="ident" id="6199860"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span>&nbsp;<span class="op" id="6199865">=</span>&nbsp;<span class="builtinfunc" id="6199867">append</span><span class="op" id="6199873">(</span><span class="ident" id="6199874"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6199879">.</span><span class="ident" id="6199880"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span><span class="op" id="6199884">,</span>&nbsp;<span class="ident" id="6199886"><a href="/gostd/encoding/xml/xml.go.html#6242105">Attr</a></span><span class="op" id="6199890">{</span><span class="ident" id="6199891"><a href="/gostd/encoding/xml/marshal.go.html#6198889">name</a></span><span class="op" id="6199895">,</span>&nbsp;<span class="builtintype" id="6199897">string</span><span class="op" id="6199903">(</span><span class="ident" id="6199904"><a href="/gostd/encoding/xml/marshal.go.html#6199745">text</a></span><span class="op" id="6199908">)</span><span class="op" id="6199909">}</span><span class="op" id="6199910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199915">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6199926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199931">if</span>&nbsp;<span class="ident" id="6199934"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199936">.</span><span class="ident" id="6199937"><a href="/gostd/reflect/value.go.html#2840824">CanAddr</a></span><span class="op" id="6199944">(</span><span class="op" id="6199945">)</span>&nbsp;<span class="op" id="6199947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6199952">pv</span>&nbsp;<span class="op" id="6199955">:=</span>&nbsp;<span class="ident" id="6199958"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6199960">.</span><span class="ident" id="6199961"><a href="/gostd/reflect/value.go.html#2839495">Addr</a></span><span class="op" id="6199965">(</span><span class="op" id="6199966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6199971">if</span>&nbsp;<span class="ident" id="6199974"><a href="/gostd/encoding/xml/marshal.go.html#6199952">pv</a></span><span class="op" id="6199976">.</span><span class="ident" id="6199977"><a href="/gostd/reflect/value.go.html#2858331">CanInterface</a></span><span class="op" id="6199989">(</span><span class="op" id="6199990">)</span>&nbsp;<span class="op" id="6199992">&amp;&amp;</span>&nbsp;<span class="ident" id="6199995"><a href="/gostd/encoding/xml/marshal.go.html#6199952">pv</a></span><span class="op" id="6199997">.</span><span class="ident" id="6199998"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6200002">(</span><span class="op" id="6200003">)</span><span class="op" id="6200004">.</span><span class="ident" id="6200005"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="6200015">(</span><span class="ident" id="6200016"><a href="/gostd/encoding/xml/marshal.go.html#6195746">textMarshalerType</a></span><span class="op" id="6200033">)</span>&nbsp;<span class="op" id="6200035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200041">text</span><span class="op" id="6200045">,</span>&nbsp;<span class="ident" id="6200047">err</span>&nbsp;<span class="op" id="6200051">:=</span>&nbsp;<span class="ident" id="6200054"><a href="/gostd/encoding/xml/marshal.go.html#6199952">pv</a></span><span class="op" id="6200056">.</span><span class="ident" id="6200057"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6200066">(</span><span class="op" id="6200067">)</span><span class="op" id="6200068">.</span><span class="op" id="6200069">(</span><span class="ident" id="6200070"><a href="/gostd/encoding/xml/marshal.go.html#6184693">encoding</a></span><span class="op" id="6200078">.</span><span class="ident" id="6200079"><a href="/gostd/encoding/encoding.go.html#4051330">TextMarshaler</a></span><span class="op" id="6200092">)</span><span class="op" id="6200093">.</span><span class="ident" id="6200094"><a href="/gostd/encoding/encoding.go.html#4051357">MarshalText</a></span><span class="op" id="6200105">(</span><span class="op" id="6200106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200112">if</span>&nbsp;<span class="ident" id="6200115"><a href="/gostd/encoding/xml/marshal.go.html#6200047">err</a></span>&nbsp;<span class="op" id="6200119">!=</span>&nbsp;<span class="builtintype" id="6200122">nil</span>&nbsp;<span class="op" id="6200126">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200133">return</span>&nbsp;<span class="ident" id="6200140"><a href="/gostd/encoding/xml/marshal.go.html#6200047">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200154"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6200159">.</span><span class="ident" id="6200160"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span>&nbsp;<span class="op" id="6200165">=</span>&nbsp;<span class="builtinfunc" id="6200167">append</span><span class="op" id="6200173">(</span><span class="ident" id="6200174"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6200179">.</span><span class="ident" id="6200180"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span><span class="op" id="6200184">,</span>&nbsp;<span class="ident" id="6200186"><a href="/gostd/encoding/xml/xml.go.html#6242105">Attr</a></span><span class="op" id="6200190">{</span><span class="ident" id="6200191"><a href="/gostd/encoding/xml/marshal.go.html#6198889">name</a></span><span class="op" id="6200195">,</span>&nbsp;<span class="builtintype" id="6200197">string</span><span class="op" id="6200203">(</span><span class="ident" id="6200204"><a href="/gostd/encoding/xml/marshal.go.html#6200041">text</a></span><span class="op" id="6200208">)</span><span class="op" id="6200209">}</span><span class="op" id="6200210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200216">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200228">}</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6200237">//&nbsp;Dereference&nbsp;or&nbsp;skip&nbsp;nil&nbsp;pointer,&nbsp;interface&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200293">switch</span>&nbsp;<span class="ident" id="6200300"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6200302">.</span><span class="ident" id="6200303"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6200307">(</span><span class="op" id="6200308">)</span>&nbsp;<span class="op" id="6200310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200314">case</span>&nbsp;<span class="ident" id="6200319"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6200326">.</span><span class="ident" id="6200327"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span><span class="op" id="6200330">,</span>&nbsp;<span class="ident" id="6200332"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6200339">.</span><span class="ident" id="6200340"><a href="/gostd/reflect/type.go.html#2788041">Interface</a></span><span class="op" id="6200349">:</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200354">if</span>&nbsp;<span class="ident" id="6200357"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6200359">.</span><span class="ident" id="6200360"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="6200365">(</span><span class="op" id="6200366">)</span>&nbsp;<span class="op" id="6200368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200374">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200391"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span>&nbsp;<span class="op" id="6200394">=</span>&nbsp;<span class="ident" id="6200396"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6200398">.</span><span class="ident" id="6200399"><a href="/gostd/reflect/value.go.html#2853087">Elem</a></span><span class="op" id="6200403">(</span><span class="op" id="6200404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200408">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200413">s</span><span class="op" id="6200414">,</span>&nbsp;<span class="ident" id="6200416">b</span><span class="op" id="6200417">,</span>&nbsp;<span class="ident" id="6200419">err</span>&nbsp;<span class="op" id="6200423">:=</span>&nbsp;<span class="ident" id="6200426"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6200427">.</span><span class="ident" id="6200428"><a href="/gostd/encoding/xml/marshal.go.html#6204345">marshalSimple</a></span><span class="op" id="6200441">(</span><span class="ident" id="6200442"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6200444">.</span><span class="ident" id="6200445"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6200449">(</span><span class="op" id="6200450">)</span><span class="op" id="6200451">,</span>&nbsp;<span class="ident" id="6200453"><a href="/gostd/encoding/xml/marshal.go.html#6198864">fv</a></span><span class="op" id="6200455">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200459">if</span>&nbsp;<span class="ident" id="6200462"><a href="/gostd/encoding/xml/marshal.go.html#6200419">err</a></span>&nbsp;<span class="op" id="6200466">!=</span>&nbsp;<span class="builtintype" id="6200469">nil</span>&nbsp;<span class="op" id="6200473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200478">return</span>&nbsp;<span class="ident" id="6200485"><a href="/gostd/encoding/xml/marshal.go.html#6200419">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200491">}</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200495">if</span>&nbsp;<span class="ident" id="6200498"><a href="/gostd/encoding/xml/marshal.go.html#6200416">b</a></span>&nbsp;<span class="op" id="6200500">!=</span>&nbsp;<span class="builtintype" id="6200503">nil</span>&nbsp;<span class="op" id="6200507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200512"><a href="/gostd/encoding/xml/marshal.go.html#6200413">s</a></span>&nbsp;<span class="op" id="6200514">=</span>&nbsp;<span class="builtintype" id="6200516">string</span><span class="op" id="6200522">(</span><span class="ident" id="6200523"><a href="/gostd/encoding/xml/marshal.go.html#6200416">b</a></span><span class="op" id="6200524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200532"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6200537">.</span><span class="ident" id="6200538"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span>&nbsp;<span class="op" id="6200543">=</span>&nbsp;<span class="builtinfunc" id="6200545">append</span><span class="op" id="6200551">(</span><span class="ident" id="6200552"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6200557">.</span><span class="ident" id="6200558"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span><span class="op" id="6200562">,</span>&nbsp;<span class="ident" id="6200564"><a href="/gostd/encoding/xml/xml.go.html#6242105">Attr</a></span><span class="op" id="6200568">{</span><span class="ident" id="6200569"><a href="/gostd/encoding/xml/marshal.go.html#6198889">name</a></span><span class="op" id="6200573">,</span>&nbsp;<span class="ident" id="6200575"><a href="/gostd/encoding/xml/marshal.go.html#6200413">s</a></span><span class="op" id="6200576">}</span><span class="op" id="6200577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200580">}</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200584">if</span>&nbsp;<span class="ident" id="6200587">err</span>&nbsp;<span class="op" id="6200591">:=</span>&nbsp;<span class="ident" id="6200594"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6200595">.</span><span class="ident" id="6200596"><a href="/gostd/encoding/xml/marshal.go.html#6202852">writeStart</a></span><span class="op" id="6200606">(</span><span class="op" id="6200607">&amp;</span><span class="ident" id="6200608"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6200613">)</span><span class="op" id="6200614">;</span>&nbsp;<span class="ident" id="6200616"><a href="/gostd/encoding/xml/marshal.go.html#6200587">err</a></span>&nbsp;<span class="op" id="6200620">!=</span>&nbsp;<span class="builtintype" id="6200623">nil</span>&nbsp;<span class="op" id="6200627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200631">return</span>&nbsp;<span class="ident" id="6200638"><a href="/gostd/encoding/xml/marshal.go.html#6200587">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200647">if</span>&nbsp;<span class="ident" id="6200650"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6200653">.</span><span class="ident" id="6200654"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6200658">(</span><span class="op" id="6200659">)</span>&nbsp;<span class="op" id="6200661">==</span>&nbsp;<span class="ident" id="6200664"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6200671">.</span><span class="ident" id="6200672"><a href="/gostd/reflect/type.go.html#2788077">Struct</a></span>&nbsp;<span class="op" id="6200679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200683"><a href="/gostd/encoding/xml/marshal.go.html#6197831">err</a></span>&nbsp;<span class="op" id="6200687">=</span>&nbsp;<span class="ident" id="6200689"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6200690">.</span><span class="ident" id="6200691"><a href="/gostd/encoding/xml/marshal.go.html#6205478">marshalStruct</a></span><span class="op" id="6200704">(</span><span class="ident" id="6200705"><a href="/gostd/encoding/xml/marshal.go.html#6197824">tinfo</a></span><span class="op" id="6200710">,</span>&nbsp;<span class="ident" id="6200712"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6200715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200718">}</span>&nbsp;<span class="keyword" id="6200720">else</span>&nbsp;<span class="op" id="6200725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200729">s</span><span class="op" id="6200730">,</span>&nbsp;<span class="ident" id="6200732">b</span><span class="op" id="6200733">,</span>&nbsp;<span class="ident" id="6200735">err1</span>&nbsp;<span class="op" id="6200740">:=</span>&nbsp;<span class="ident" id="6200743"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6200744">.</span><span class="ident" id="6200745"><a href="/gostd/encoding/xml/marshal.go.html#6204345">marshalSimple</a></span><span class="op" id="6200758">(</span><span class="ident" id="6200759"><a href="/gostd/encoding/xml/marshal.go.html#6196622">typ</a></span><span class="op" id="6200762">,</span>&nbsp;<span class="ident" id="6200764"><a href="/gostd/encoding/xml/marshal.go.html#6195993">val</a></span><span class="op" id="6200767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200771">if</span>&nbsp;<span class="ident" id="6200774"><a href="/gostd/encoding/xml/marshal.go.html#6200735">err1</a></span>&nbsp;<span class="op" id="6200779">!=</span>&nbsp;<span class="builtintype" id="6200782">nil</span>&nbsp;<span class="op" id="6200786">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200791"><a href="/gostd/encoding/xml/marshal.go.html#6197831">err</a></span>&nbsp;<span class="op" id="6200795">=</span>&nbsp;<span class="ident" id="6200797"><a href="/gostd/encoding/xml/marshal.go.html#6200735">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200804">}</span>&nbsp;<span class="keyword" id="6200806">else</span>&nbsp;<span class="keyword" id="6200811">if</span>&nbsp;<span class="ident" id="6200814"><a href="/gostd/encoding/xml/marshal.go.html#6200732">b</a></span>&nbsp;<span class="op" id="6200816">!=</span>&nbsp;<span class="builtintype" id="6200819">nil</span>&nbsp;<span class="op" id="6200823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200828"><a href="/gostd/encoding/xml/xml.go.html#6283222">EscapeText</a></span><span class="op" id="6200838">(</span><span class="ident" id="6200839"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6200840">,</span>&nbsp;<span class="ident" id="6200842"><a href="/gostd/encoding/xml/marshal.go.html#6200732">b</a></span><span class="op" id="6200843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200847">}</span>&nbsp;<span class="keyword" id="6200849">else</span>&nbsp;<span class="op" id="6200854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6200859"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6200860">.</span><span class="ident" id="6200861"><a href="/gostd/encoding/xml/xml.go.html#6284074">EscapeString</a></span><span class="op" id="6200873">(</span><span class="ident" id="6200874"><a href="/gostd/encoding/xml/marshal.go.html#6200729">s</a></span><span class="op" id="6200875">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200885">if</span>&nbsp;<span class="ident" id="6200888"><a href="/gostd/encoding/xml/marshal.go.html#6197831">err</a></span>&nbsp;<span class="op" id="6200892">!=</span>&nbsp;<span class="builtintype" id="6200895">nil</span>&nbsp;<span class="op" id="6200899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200903">return</span>&nbsp;<span class="ident" id="6200910"><a href="/gostd/encoding/xml/marshal.go.html#6197831">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200915">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200919">if</span>&nbsp;<span class="ident" id="6200922">err</span>&nbsp;<span class="op" id="6200926">:=</span>&nbsp;<span class="ident" id="6200929"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6200930">.</span><span class="ident" id="6200931"><a href="/gostd/encoding/xml/marshal.go.html#6203593">writeEnd</a></span><span class="op" id="6200939">(</span><span class="ident" id="6200940"><a href="/gostd/encoding/xml/marshal.go.html#6198092">start</a></span><span class="op" id="6200945">.</span><span class="ident" id="6200946"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6200950">)</span><span class="op" id="6200951">;</span>&nbsp;<span class="ident" id="6200953"><a href="/gostd/encoding/xml/marshal.go.html#6200922">err</a></span>&nbsp;<span class="op" id="6200957">!=</span>&nbsp;<span class="builtintype" id="6200960">nil</span>&nbsp;<span class="op" id="6200964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200968">return</span>&nbsp;<span class="ident" id="6200975"><a href="/gostd/encoding/xml/marshal.go.html#6200922">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6200980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6200984">return</span>&nbsp;<span class="ident" id="6200991"><a href="/gostd/encoding/xml/marshal.go.html#6195968">p</a></span><span class="op" id="6200992">.</span><span class="ident" id="6200993"><a href="/gostd/encoding/xml/marshal.go.html#6208879">cachedWriteError</a></span><span class="op" id="6201009">(</span><span class="op" id="6201010">)</span><br>
<span class="lineno"></span><span class="op" id="6201012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6201015">//&nbsp;defaultStart&nbsp;returns&nbsp;the&nbsp;default&nbsp;start&nbsp;element&nbsp;to&nbsp;use,</span><br>
<span class="lineno"></span><span class="comment" id="6201073">//&nbsp;given&nbsp;the&nbsp;reflect&nbsp;type,&nbsp;field&nbsp;info,&nbsp;and&nbsp;start&nbsp;template.</span><br>
<span class="lineno">555</span><span class="keyword" id="6201132">func</span>&nbsp;<span class="ident" id="6201137">defaultStart</span><span class="op" id="6201149">(</span><span class="ident" id="6201150">typ</span>&nbsp;<span class="ident" id="6201154"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6201161">.</span><span class="ident" id="6201162"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="6201166">,</span>&nbsp;<span class="ident" id="6201168">finfo</span>&nbsp;<span class="op" id="6201174">*</span><span class="ident" id="6201175"><a href="/gostd/encoding/xml/typeinfo.go.html#6231928">fieldInfo</a></span><span class="op" id="6201184">,</span>&nbsp;<span class="ident" id="6201186">startTemplate</span>&nbsp;<span class="op" id="6201200">*</span><span class="ident" id="6201201"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><span class="op" id="6201213">)</span>&nbsp;<span class="ident" id="6201215"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span>&nbsp;<span class="op" id="6201228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6201231">var</span>&nbsp;<span class="ident" id="6201235">start</span>&nbsp;<span class="ident" id="6201241"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6201255">//&nbsp;Precedence&nbsp;for&nbsp;the&nbsp;XML&nbsp;element&nbsp;name&nbsp;is&nbsp;as&nbsp;above,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6201308">//&nbsp;except&nbsp;that&nbsp;we&nbsp;do&nbsp;not&nbsp;look&nbsp;inside&nbsp;structs&nbsp;for&nbsp;the&nbsp;first&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6201375">if</span>&nbsp;<span class="ident" id="6201378"><a href="/gostd/encoding/xml/marshal.go.html#6201186">startTemplate</a></span>&nbsp;<span class="op" id="6201392">!=</span>&nbsp;<span class="builtintype" id="6201395">nil</span>&nbsp;<span class="op" id="6201399">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6201403"><a href="/gostd/encoding/xml/marshal.go.html#6201235">start</a></span><span class="op" id="6201408">.</span><span class="ident" id="6201409"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span>&nbsp;<span class="op" id="6201414">=</span>&nbsp;<span class="ident" id="6201416"><a href="/gostd/encoding/xml/marshal.go.html#6201186">startTemplate</a></span><span class="op" id="6201429">.</span><span class="ident" id="6201430"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6201437"><a href="/gostd/encoding/xml/marshal.go.html#6201235">start</a></span><span class="op" id="6201442">.</span><span class="ident" id="6201443"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span>&nbsp;<span class="op" id="6201448">=</span>&nbsp;<span class="builtinfunc" id="6201450">append</span><span class="op" id="6201456">(</span><span class="ident" id="6201457"><a href="/gostd/encoding/xml/marshal.go.html#6201235">start</a></span><span class="op" id="6201462">.</span><span class="ident" id="6201463"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span><span class="op" id="6201467">,</span>&nbsp;<span class="ident" id="6201469"><a href="/gostd/encoding/xml/marshal.go.html#6201186">startTemplate</a></span><span class="op" id="6201482">.</span><span class="ident" id="6201483"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span><span class="op" id="6201487">...</span><span class="op" id="6201490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6201493">}</span>&nbsp;<span class="keyword" id="6201495">else</span>&nbsp;<span class="keyword" id="6201500">if</span>&nbsp;<span class="ident" id="6201503"><a href="/gostd/encoding/xml/marshal.go.html#6201168">finfo</a></span>&nbsp;<span class="op" id="6201509">!=</span>&nbsp;<span class="builtintype" id="6201512">nil</span>&nbsp;<span class="op" id="6201516">&amp;&amp;</span>&nbsp;<span class="ident" id="6201519"><a href="/gostd/encoding/xml/marshal.go.html#6201168">finfo</a></span><span class="op" id="6201524">.</span><span class="ident" id="6201525"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span>&nbsp;<span class="op" id="6201530">!=</span>&nbsp;<span class="string" id="6201533">&#34;&#34;</span>&nbsp;<span class="op" id="6201536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6201540"><a href="/gostd/encoding/xml/marshal.go.html#6201235">start</a></span><span class="op" id="6201545">.</span><span class="ident" id="6201546"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6201550">.</span><span class="ident" id="6201551"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6201557">=</span>&nbsp;<span class="ident" id="6201559"><a href="/gostd/encoding/xml/marshal.go.html#6201168">finfo</a></span><span class="op" id="6201564">.</span><span class="ident" id="6201565"><a href="/gostd/encoding/xml/typeinfo.go.html#6231963">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6201572"><a href="/gostd/encoding/xml/marshal.go.html#6201235">start</a></span><span class="op" id="6201577">.</span><span class="ident" id="6201578"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6201582">.</span><span class="ident" id="6201583"><a href="/gostd/encoding/xml/xml.go.html#6242010">Space</a></span>&nbsp;<span class="op" id="6201589">=</span>&nbsp;<span class="ident" id="6201591"><a href="/gostd/encoding/xml/marshal.go.html#6201168">finfo</a></span><span class="op" id="6201596">.</span><span class="ident" id="6201597"><a href="/gostd/encoding/xml/typeinfo.go.html#6231979">xmlns</a></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6201604">}</span>&nbsp;<span class="keyword" id="6201606">else</span>&nbsp;<span class="keyword" id="6201611">if</span>&nbsp;<span class="ident" id="6201614"><a href="/gostd/encoding/xml/marshal.go.html#6201150">typ</a></span><span class="op" id="6201617">.</span><span class="ident" id="6201618"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="6201622">(</span><span class="op" id="6201623">)</span>&nbsp;<span class="op" id="6201625">!=</span>&nbsp;<span class="string" id="6201628">&#34;&#34;</span>&nbsp;<span class="op" id="6201631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6201635"><a href="/gostd/encoding/xml/marshal.go.html#6201235">start</a></span><span class="op" id="6201640">.</span><span class="ident" id="6201641"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6201645">.</span><span class="ident" id="6201646"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6201652">=</span>&nbsp;<span class="ident" id="6201654"><a href="/gostd/encoding/xml/marshal.go.html#6201150">typ</a></span><span class="op" id="6201657">.</span><span class="ident" id="6201658"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="6201662">(</span><span class="op" id="6201663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6201666">}</span>&nbsp;<span class="keyword" id="6201668">else</span>&nbsp;<span class="op" id="6201673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6201677">//&nbsp;Must&nbsp;be&nbsp;a&nbsp;pointer&nbsp;to&nbsp;a&nbsp;named&nbsp;type,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6201717">//&nbsp;since&nbsp;it&nbsp;has&nbsp;the&nbsp;Marshaler&nbsp;methods.</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6201758"><a href="/gostd/encoding/xml/marshal.go.html#6201235">start</a></span><span class="op" id="6201763">.</span><span class="ident" id="6201764"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6201768">.</span><span class="ident" id="6201769"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6201775">=</span>&nbsp;<span class="ident" id="6201777"><a href="/gostd/encoding/xml/marshal.go.html#6201150">typ</a></span><span class="op" id="6201780">.</span><span class="ident" id="6201781"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6201785">(</span><span class="op" id="6201786">)</span><span class="op" id="6201787">.</span><span class="ident" id="6201788"><a href="/gostd/reflect/type.go.html#2782837">Name</a></span><span class="op" id="6201792">(</span><span class="op" id="6201793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6201796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6201799">return</span>&nbsp;<span class="ident" id="6201806"><a href="/gostd/encoding/xml/marshal.go.html#6201235">start</a></span><br>
<span class="lineno"></span><span class="op" id="6201812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="comment" id="6201815">//&nbsp;marshalInterface&nbsp;marshals&nbsp;a&nbsp;Marshaler&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="6201873">func</span>&nbsp;<span class="op" id="6201878">(</span><span class="ident" id="6201879">p</span>&nbsp;<span class="op" id="6201881">*</span><span class="ident" id="6201882"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6201889">)</span>&nbsp;<span class="ident" id="6201891">marshalInterface</span><span class="op" id="6201907">(</span><span class="ident" id="6201908">val</span>&nbsp;<span class="ident" id="6201912"><a href="/gostd/encoding/xml/marshal.go.html#6188326">Marshaler</a></span><span class="op" id="6201921">,</span>&nbsp;<span class="ident" id="6201923">start</span>&nbsp;<span class="ident" id="6201929"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><span class="op" id="6201941">)</span>&nbsp;<span class="builtintype" id="6201943">error</span>&nbsp;<span class="op" id="6201949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6201952">//&nbsp;Push&nbsp;a&nbsp;marker&nbsp;onto&nbsp;the&nbsp;tag&nbsp;stack&nbsp;so&nbsp;that&nbsp;MarshalXML</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6202008">//&nbsp;cannot&nbsp;close&nbsp;the&nbsp;XML&nbsp;tags&nbsp;that&nbsp;it&nbsp;did&nbsp;not&nbsp;open.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6202060"><a href="/gostd/encoding/xml/marshal.go.html#6201879">p</a></span><span class="op" id="6202061">.</span><span class="ident" id="6202062"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span>&nbsp;<span class="op" id="6202067">=</span>&nbsp;<span class="builtinfunc" id="6202069">append</span><span class="op" id="6202075">(</span><span class="ident" id="6202076"><a href="/gostd/encoding/xml/marshal.go.html#6201879">p</a></span><span class="op" id="6202077">.</span><span class="ident" id="6202078"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6202082">,</span>&nbsp;<span class="ident" id="6202084"><a href="/gostd/encoding/xml/xml.go.html#6241995">Name</a></span><span class="op" id="6202088">{</span><span class="op" id="6202089">}</span><span class="op" id="6202090">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6202093">n</span>&nbsp;<span class="op" id="6202095">:=</span>&nbsp;<span class="builtinfunc" id="6202098">len</span><span class="op" id="6202101">(</span><span class="ident" id="6202102"><a href="/gostd/encoding/xml/marshal.go.html#6201879">p</a></span><span class="op" id="6202103">.</span><span class="ident" id="6202104"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6202108">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6202112">err</span>&nbsp;<span class="op" id="6202116">:=</span>&nbsp;<span class="ident" id="6202119"><a href="/gostd/encoding/xml/marshal.go.html#6201908">val</a></span><span class="op" id="6202122">.</span><span class="ident" id="6202123"><a href="/gostd/encoding/xml/marshal.go.html#6188349">MarshalXML</a></span><span class="op" id="6202133">(</span><span class="ident" id="6202134"><a href="/gostd/encoding/xml/marshal.go.html#6201879">p</a></span><span class="op" id="6202135">.</span><span class="ident" id="6202136"><a href="/gostd/encoding/xml/marshal.go.html#6193288">encoder</a></span><span class="op" id="6202143">,</span>&nbsp;<span class="ident" id="6202145"><a href="/gostd/encoding/xml/marshal.go.html#6201923">start</a></span><span class="op" id="6202150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202153">if</span>&nbsp;<span class="ident" id="6202156"><a href="/gostd/encoding/xml/marshal.go.html#6202112">err</a></span>&nbsp;<span class="op" id="6202160">!=</span>&nbsp;<span class="builtintype" id="6202163">nil</span>&nbsp;<span class="op" id="6202167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202171">return</span>&nbsp;<span class="ident" id="6202178"><a href="/gostd/encoding/xml/marshal.go.html#6202112">err</a></span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6202183">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6202187">//&nbsp;Make&nbsp;sure&nbsp;MarshalXML&nbsp;closed&nbsp;all&nbsp;its&nbsp;tags.&nbsp;p.tags[n-1]&nbsp;is&nbsp;the&nbsp;mark.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202258">if</span>&nbsp;<span class="builtinfunc" id="6202261">len</span><span class="op" id="6202264">(</span><span class="ident" id="6202265"><a href="/gostd/encoding/xml/marshal.go.html#6201879">p</a></span><span class="op" id="6202266">.</span><span class="ident" id="6202267"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6202271">)</span>&nbsp;<span class="op" id="6202273">&gt;</span>&nbsp;<span class="ident" id="6202275"><a href="/gostd/encoding/xml/marshal.go.html#6202093">n</a></span>&nbsp;<span class="op" id="6202277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202281">return</span>&nbsp;<span class="ident" id="6202288"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6202291">.</span><span class="ident" id="6202292"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6202298">(</span><span class="string" id="6202299">&#34;xml:&nbsp;%s.MarshalXML&nbsp;wrote&nbsp;invalid&nbsp;XML:&nbsp;&lt;%s&gt;&nbsp;not&nbsp;closed&#34;</span><span class="op" id="6202354">,</span>&nbsp;<span class="ident" id="6202356"><a href="/gostd/encoding/xml/read.go.html#6218276">receiverType</a></span><span class="op" id="6202368">(</span><span class="ident" id="6202369"><a href="/gostd/encoding/xml/marshal.go.html#6201908">val</a></span><span class="op" id="6202372">)</span><span class="op" id="6202373">,</span>&nbsp;<span class="ident" id="6202375"><a href="/gostd/encoding/xml/marshal.go.html#6201879">p</a></span><span class="op" id="6202376">.</span><span class="ident" id="6202377"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6202381">[</span><span class="builtinfunc" id="6202382">len</span><span class="op" id="6202385">(</span><span class="ident" id="6202386"><a href="/gostd/encoding/xml/marshal.go.html#6201879">p</a></span><span class="op" id="6202387">.</span><span class="ident" id="6202388"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6202392">)</span><span class="op" id="6202393">-</span><span class="num" id="6202394">1</span><span class="op" id="6202395">]</span><span class="op" id="6202396">.</span><span class="ident" id="6202397"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6202402">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6202405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6202408"><a href="/gostd/encoding/xml/marshal.go.html#6201879">p</a></span><span class="op" id="6202409">.</span><span class="ident" id="6202410"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span>&nbsp;<span class="op" id="6202415">=</span>&nbsp;<span class="ident" id="6202417"><a href="/gostd/encoding/xml/marshal.go.html#6201879">p</a></span><span class="op" id="6202418">.</span><span class="ident" id="6202419"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6202423">[</span><span class="op" id="6202424">:</span><span class="ident" id="6202425"><a href="/gostd/encoding/xml/marshal.go.html#6202093">n</a></span><span class="op" id="6202426">-</span><span class="num" id="6202427">1</span><span class="op" id="6202428">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202431">return</span>&nbsp;<span class="builtintype" id="6202438">nil</span><br>
<span class="lineno"></span><span class="op" id="6202442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="6202445">//&nbsp;marshalTextInterface&nbsp;marshals&nbsp;a&nbsp;TextMarshaler&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="6202511">func</span>&nbsp;<span class="op" id="6202516">(</span><span class="ident" id="6202517">p</span>&nbsp;<span class="op" id="6202519">*</span><span class="ident" id="6202520"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6202527">)</span>&nbsp;<span class="ident" id="6202529">marshalTextInterface</span><span class="op" id="6202549">(</span><span class="ident" id="6202550">val</span>&nbsp;<span class="ident" id="6202554"><a href="/gostd/encoding/xml/marshal.go.html#6184693">encoding</a></span><span class="op" id="6202562">.</span><span class="ident" id="6202563"><a href="/gostd/encoding/encoding.go.html#4051330">TextMarshaler</a></span><span class="op" id="6202576">,</span>&nbsp;<span class="ident" id="6202578">start</span>&nbsp;<span class="ident" id="6202584"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><span class="op" id="6202596">)</span>&nbsp;<span class="builtintype" id="6202598">error</span>&nbsp;<span class="op" id="6202604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202607">if</span>&nbsp;<span class="ident" id="6202610">err</span>&nbsp;<span class="op" id="6202614">:=</span>&nbsp;<span class="ident" id="6202617"><a href="/gostd/encoding/xml/marshal.go.html#6202517">p</a></span><span class="op" id="6202618">.</span><span class="ident" id="6202619"><a href="/gostd/encoding/xml/marshal.go.html#6202852">writeStart</a></span><span class="op" id="6202629">(</span><span class="op" id="6202630">&amp;</span><span class="ident" id="6202631"><a href="/gostd/encoding/xml/marshal.go.html#6202578">start</a></span><span class="op" id="6202636">)</span><span class="op" id="6202637">;</span>&nbsp;<span class="ident" id="6202639"><a href="/gostd/encoding/xml/marshal.go.html#6202610">err</a></span>&nbsp;<span class="op" id="6202643">!=</span>&nbsp;<span class="builtintype" id="6202646">nil</span>&nbsp;<span class="op" id="6202650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202654">return</span>&nbsp;<span class="ident" id="6202661"><a href="/gostd/encoding/xml/marshal.go.html#6202610">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6202666">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6202669">text</span><span class="op" id="6202673">,</span>&nbsp;<span class="ident" id="6202675">err</span>&nbsp;<span class="op" id="6202679">:=</span>&nbsp;<span class="ident" id="6202682"><a href="/gostd/encoding/xml/marshal.go.html#6202550">val</a></span><span class="op" id="6202685">.</span><span class="ident" id="6202686"><a href="/gostd/encoding/encoding.go.html#4051357">MarshalText</a></span><span class="op" id="6202697">(</span><span class="op" id="6202698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202701">if</span>&nbsp;<span class="ident" id="6202704"><a href="/gostd/encoding/xml/marshal.go.html#6202675">err</a></span>&nbsp;<span class="op" id="6202708">!=</span>&nbsp;<span class="builtintype" id="6202711">nil</span>&nbsp;<span class="op" id="6202715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202719">return</span>&nbsp;<span class="ident" id="6202726"><a href="/gostd/encoding/xml/marshal.go.html#6202675">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6202731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6202734"><a href="/gostd/encoding/xml/xml.go.html#6283222">EscapeText</a></span><span class="op" id="6202744">(</span><span class="ident" id="6202745"><a href="/gostd/encoding/xml/marshal.go.html#6202517">p</a></span><span class="op" id="6202746">,</span>&nbsp;<span class="ident" id="6202748"><a href="/gostd/encoding/xml/marshal.go.html#6202669">text</a></span><span class="op" id="6202752">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202755">return</span>&nbsp;<span class="ident" id="6202762"><a href="/gostd/encoding/xml/marshal.go.html#6202517">p</a></span><span class="op" id="6202763">.</span><span class="ident" id="6202764"><a href="/gostd/encoding/xml/marshal.go.html#6203593">writeEnd</a></span><span class="op" id="6202772">(</span><span class="ident" id="6202773"><a href="/gostd/encoding/xml/marshal.go.html#6202578">start</a></span><span class="op" id="6202778">.</span><span class="ident" id="6202779"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6202783">)</span><br>
<span class="lineno"></span><span class="op" id="6202785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6202788">//&nbsp;writeStart&nbsp;writes&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="6202834">func</span>&nbsp;<span class="op" id="6202839">(</span><span class="ident" id="6202840">p</span>&nbsp;<span class="op" id="6202842">*</span><span class="ident" id="6202843"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6202850">)</span>&nbsp;<span class="ident" id="6202852">writeStart</span><span class="op" id="6202862">(</span><span class="ident" id="6202863">start</span>&nbsp;<span class="op" id="6202869">*</span><span class="ident" id="6202870"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><span class="op" id="6202882">)</span>&nbsp;<span class="builtintype" id="6202884">error</span>&nbsp;<span class="op" id="6202890">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202893">if</span>&nbsp;<span class="ident" id="6202896"><a href="/gostd/encoding/xml/marshal.go.html#6202863">start</a></span><span class="op" id="6202901">.</span><span class="ident" id="6202902"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6202906">.</span><span class="ident" id="6202907"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6202913">==</span>&nbsp;<span class="string" id="6202916">&#34;&#34;</span>&nbsp;<span class="op" id="6202919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6202923">return</span>&nbsp;<span class="ident" id="6202930"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6202933">.</span><span class="ident" id="6202934"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6202940">(</span><span class="string" id="6202941">&#34;xml:&nbsp;start&nbsp;tag&nbsp;with&nbsp;no&nbsp;name&#34;</span><span class="op" id="6202970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6202973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6202977"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6202978">.</span><span class="ident" id="6202979"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span>&nbsp;<span class="op" id="6202984">=</span>&nbsp;<span class="builtinfunc" id="6202986">append</span><span class="op" id="6202992">(</span><span class="ident" id="6202993"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6202994">.</span><span class="ident" id="6202995"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6202999">,</span>&nbsp;<span class="ident" id="6203001"><a href="/gostd/encoding/xml/marshal.go.html#6202863">start</a></span><span class="op" id="6203006">.</span><span class="ident" id="6203007"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6203011">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203014"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203015">.</span><span class="ident" id="6203016"><a href="/gostd/encoding/xml/marshal.go.html#6195341">markPrefix</a></span><span class="op" id="6203026">(</span><span class="op" id="6203027">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203031"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203032">.</span><span class="ident" id="6203033"><a href="/gostd/encoding/xml/marshal.go.html#6208963">writeIndent</a></span><span class="op" id="6203044">(</span><span class="num" id="6203045">1</span><span class="op" id="6203046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203049"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203050">.</span><span class="ident" id="6203051"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6203060">(</span><span class="string" id="6203061">&#39;&lt;&#39;</span><span class="op" id="6203064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203067"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203068">.</span><span class="ident" id="6203069"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6203080">(</span><span class="ident" id="6203081"><a href="/gostd/encoding/xml/marshal.go.html#6202863">start</a></span><span class="op" id="6203086">.</span><span class="ident" id="6203087"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6203091">.</span><span class="ident" id="6203092"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6203097">)</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203101">if</span>&nbsp;<span class="ident" id="6203104"><a href="/gostd/encoding/xml/marshal.go.html#6202863">start</a></span><span class="op" id="6203109">.</span><span class="ident" id="6203110"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6203114">.</span><span class="ident" id="6203115"><a href="/gostd/encoding/xml/xml.go.html#6242010">Space</a></span>&nbsp;<span class="op" id="6203121">!=</span>&nbsp;<span class="string" id="6203124">&#34;&#34;</span>&nbsp;<span class="op" id="6203127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203131"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203132">.</span><span class="ident" id="6203133"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6203144">(</span><span class="string" id="6203145">`&nbsp;xmlns=&#34;`</span><span class="op" id="6203155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203159"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203160">.</span><span class="ident" id="6203161"><a href="/gostd/encoding/xml/xml.go.html#6284074">EscapeString</a></span><span class="op" id="6203173">(</span><span class="ident" id="6203174"><a href="/gostd/encoding/xml/marshal.go.html#6202863">start</a></span><span class="op" id="6203179">.</span><span class="ident" id="6203180"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6203184">.</span><span class="ident" id="6203185"><a href="/gostd/encoding/xml/xml.go.html#6242010">Space</a></span><span class="op" id="6203190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203194"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203195">.</span><span class="ident" id="6203196"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6203205">(</span><span class="string" id="6203206">&#39;&#34;&#39;</span><span class="op" id="6203209">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6203212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6203216">//&nbsp;Attributes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203231">for</span>&nbsp;<span class="ident" id="6203235">_</span><span class="op" id="6203236">,</span>&nbsp;<span class="ident" id="6203238">attr</span>&nbsp;<span class="op" id="6203243">:=</span>&nbsp;<span class="keyword" id="6203246">range</span>&nbsp;<span class="ident" id="6203252"><a href="/gostd/encoding/xml/marshal.go.html#6202863">start</a></span><span class="op" id="6203257">.</span><span class="ident" id="6203258"><a href="/gostd/encoding/xml/xml.go.html#6242393">Attr</a></span>&nbsp;<span class="op" id="6203263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203267">name</span>&nbsp;<span class="op" id="6203272">:=</span>&nbsp;<span class="ident" id="6203275"><a href="/gostd/encoding/xml/marshal.go.html#6203238">attr</a></span><span class="op" id="6203279">.</span><span class="ident" id="6203280"><a href="/gostd/encoding/xml/xml.go.html#6242120">Name</a></span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203287">if</span>&nbsp;<span class="ident" id="6203290"><a href="/gostd/encoding/xml/marshal.go.html#6203267">name</a></span><span class="op" id="6203294">.</span><span class="ident" id="6203295"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6203301">==</span>&nbsp;<span class="string" id="6203304">&#34;&#34;</span>&nbsp;<span class="op" id="6203307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203312">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6203323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203327"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203328">.</span><span class="ident" id="6203329"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6203338">(</span><span class="string" id="6203339">&#39;&nbsp;&#39;</span><span class="op" id="6203342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203346">if</span>&nbsp;<span class="ident" id="6203349"><a href="/gostd/encoding/xml/marshal.go.html#6203267">name</a></span><span class="op" id="6203353">.</span><span class="ident" id="6203354"><a href="/gostd/encoding/xml/xml.go.html#6242010">Space</a></span>&nbsp;<span class="op" id="6203360">!=</span>&nbsp;<span class="string" id="6203363">&#34;&#34;</span>&nbsp;<span class="op" id="6203366">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203371"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203372">.</span><span class="ident" id="6203373"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6203384">(</span><span class="ident" id="6203385"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203386">.</span><span class="ident" id="6203387"><a href="/gostd/encoding/xml/marshal.go.html#6193742">createAttrPrefix</a></span><span class="op" id="6203403">(</span><span class="ident" id="6203404"><a href="/gostd/encoding/xml/marshal.go.html#6203267">name</a></span><span class="op" id="6203408">.</span><span class="ident" id="6203409"><a href="/gostd/encoding/xml/xml.go.html#6242010">Space</a></span><span class="op" id="6203414">)</span><span class="op" id="6203415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203420"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203421">.</span><span class="ident" id="6203422"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6203431">(</span><span class="string" id="6203432">&#39;:&#39;</span><span class="op" id="6203435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6203439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203443"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203444">.</span><span class="ident" id="6203445"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6203456">(</span><span class="ident" id="6203457"><a href="/gostd/encoding/xml/marshal.go.html#6203267">name</a></span><span class="op" id="6203461">.</span><span class="ident" id="6203462"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6203467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203471"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203472">.</span><span class="ident" id="6203473"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6203484">(</span><span class="string" id="6203485">`=&#34;`</span><span class="op" id="6203489">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203493"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203494">.</span><span class="ident" id="6203495"><a href="/gostd/encoding/xml/xml.go.html#6284074">EscapeString</a></span><span class="op" id="6203507">(</span><span class="ident" id="6203508"><a href="/gostd/encoding/xml/marshal.go.html#6203238">attr</a></span><span class="op" id="6203512">.</span><span class="ident" id="6203513"><a href="/gostd/encoding/xml/xml.go.html#6242132">Value</a></span><span class="op" id="6203518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203522"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203523">.</span><span class="ident" id="6203524"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6203533">(</span><span class="string" id="6203534">&#39;&#34;&#39;</span><span class="op" id="6203537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6203540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6203543"><a href="/gostd/encoding/xml/marshal.go.html#6202840">p</a></span><span class="op" id="6203544">.</span><span class="ident" id="6203545"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6203554">(</span><span class="string" id="6203555">&#39;&gt;&#39;</span><span class="op" id="6203558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203561">return</span>&nbsp;<span class="builtintype" id="6203568">nil</span><br>
<span class="lineno">645</span><span class="op" id="6203572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6203575">func</span>&nbsp;<span class="op" id="6203580">(</span><span class="ident" id="6203581">p</span>&nbsp;<span class="op" id="6203583">*</span><span class="ident" id="6203584"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6203591">)</span>&nbsp;<span class="ident" id="6203593">writeEnd</span><span class="op" id="6203601">(</span><span class="ident" id="6203602">name</span>&nbsp;<span class="ident" id="6203607"><a href="/gostd/encoding/xml/xml.go.html#6241995">Name</a></span><span class="op" id="6203611">)</span>&nbsp;<span class="builtintype" id="6203613">error</span>&nbsp;<span class="op" id="6203619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203622">if</span>&nbsp;<span class="ident" id="6203625"><a href="/gostd/encoding/xml/marshal.go.html#6203602">name</a></span><span class="op" id="6203629">.</span><span class="ident" id="6203630"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6203636">==</span>&nbsp;<span class="string" id="6203639">&#34;&#34;</span>&nbsp;<span class="op" id="6203642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203646">return</span>&nbsp;<span class="ident" id="6203653"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6203656">.</span><span class="ident" id="6203657"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6203663">(</span><span class="string" id="6203664">&#34;xml:&nbsp;end&nbsp;tag&nbsp;with&nbsp;no&nbsp;name&#34;</span><span class="op" id="6203691">)</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6203694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203697">if</span>&nbsp;<span class="builtinfunc" id="6203700">len</span><span class="op" id="6203703">(</span><span class="ident" id="6203704"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6203705">.</span><span class="ident" id="6203706"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6203710">)</span>&nbsp;<span class="op" id="6203712">==</span>&nbsp;<span class="num" id="6203715">0</span>&nbsp;<span class="op" id="6203717">||</span>&nbsp;<span class="ident" id="6203720"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6203721">.</span><span class="ident" id="6203722"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6203726">[</span><span class="builtinfunc" id="6203727">len</span><span class="op" id="6203730">(</span><span class="ident" id="6203731"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6203732">.</span><span class="ident" id="6203733"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6203737">)</span><span class="op" id="6203738">-</span><span class="num" id="6203739">1</span><span class="op" id="6203740">]</span><span class="op" id="6203741">.</span><span class="ident" id="6203742"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6203748">==</span>&nbsp;<span class="string" id="6203751">&#34;&#34;</span>&nbsp;<span class="op" id="6203754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203758">return</span>&nbsp;<span class="ident" id="6203765"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6203768">.</span><span class="ident" id="6203769"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6203775">(</span><span class="string" id="6203776">&#34;xml:&nbsp;end&nbsp;tag&nbsp;&lt;/%s&gt;&nbsp;without&nbsp;start&nbsp;tag&#34;</span><span class="op" id="6203814">,</span>&nbsp;<span class="ident" id="6203816"><a href="/gostd/encoding/xml/marshal.go.html#6203602">name</a></span><span class="op" id="6203820">.</span><span class="ident" id="6203821"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6203826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6203829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203832">if</span>&nbsp;<span class="ident" id="6203835">top</span>&nbsp;<span class="op" id="6203839">:=</span>&nbsp;<span class="ident" id="6203842"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6203843">.</span><span class="ident" id="6203844"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6203848">[</span><span class="builtinfunc" id="6203849">len</span><span class="op" id="6203852">(</span><span class="ident" id="6203853"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6203854">.</span><span class="ident" id="6203855"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6203859">)</span><span class="op" id="6203860">-</span><span class="num" id="6203861">1</span><span class="op" id="6203862">]</span><span class="op" id="6203863">;</span>&nbsp;<span class="ident" id="6203865"><a href="/gostd/encoding/xml/marshal.go.html#6203835">top</a></span>&nbsp;<span class="op" id="6203869">!=</span>&nbsp;<span class="ident" id="6203872"><a href="/gostd/encoding/xml/marshal.go.html#6203602">name</a></span>&nbsp;<span class="op" id="6203877">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203881">if</span>&nbsp;<span class="ident" id="6203884"><a href="/gostd/encoding/xml/marshal.go.html#6203835">top</a></span><span class="op" id="6203887">.</span><span class="ident" id="6203888"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6203894">!=</span>&nbsp;<span class="ident" id="6203897"><a href="/gostd/encoding/xml/marshal.go.html#6203602">name</a></span><span class="op" id="6203901">.</span><span class="ident" id="6203902"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span>&nbsp;<span class="op" id="6203908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6203913">return</span>&nbsp;<span class="ident" id="6203920"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6203923">.</span><span class="ident" id="6203924"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6203930">(</span><span class="string" id="6203931">&#34;xml:&nbsp;end&nbsp;tag&nbsp;&lt;/%s&gt;&nbsp;does&nbsp;not&nbsp;match&nbsp;start&nbsp;tag&nbsp;&lt;%s&gt;&#34;</span><span class="op" id="6203981">,</span>&nbsp;<span class="ident" id="6203983"><a href="/gostd/encoding/xml/marshal.go.html#6203602">name</a></span><span class="op" id="6203987">.</span><span class="ident" id="6203988"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6203993">,</span>&nbsp;<span class="ident" id="6203995"><a href="/gostd/encoding/xml/marshal.go.html#6203835">top</a></span><span class="op" id="6203998">.</span><span class="ident" id="6203999"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6204004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6204008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204012">return</span>&nbsp;<span class="ident" id="6204019"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6204022">.</span><span class="ident" id="6204023"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6204029">(</span><span class="string" id="6204030">&#34;xml:&nbsp;end&nbsp;tag&nbsp;&lt;/%s&gt;&nbsp;in&nbsp;namespace&nbsp;%s&nbsp;does&nbsp;not&nbsp;match&nbsp;start&nbsp;tag&nbsp;&lt;%s&gt;&nbsp;in&nbsp;namespace&nbsp;%s&#34;</span><span class="op" id="6204112">,</span>&nbsp;<span class="ident" id="6204114"><a href="/gostd/encoding/xml/marshal.go.html#6203602">name</a></span><span class="op" id="6204118">.</span><span class="ident" id="6204119"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6204124">,</span>&nbsp;<span class="ident" id="6204126"><a href="/gostd/encoding/xml/marshal.go.html#6203602">name</a></span><span class="op" id="6204130">.</span><span class="ident" id="6204131"><a href="/gostd/encoding/xml/xml.go.html#6242010">Space</a></span><span class="op" id="6204136">,</span>&nbsp;<span class="ident" id="6204138"><a href="/gostd/encoding/xml/marshal.go.html#6203835">top</a></span><span class="op" id="6204141">.</span><span class="ident" id="6204142"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6204147">,</span>&nbsp;<span class="ident" id="6204149"><a href="/gostd/encoding/xml/marshal.go.html#6203835">top</a></span><span class="op" id="6204152">.</span><span class="ident" id="6204153"><a href="/gostd/encoding/xml/xml.go.html#6242010">Space</a></span><span class="op" id="6204158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6204161">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6204164"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6204165">.</span><span class="ident" id="6204166"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span>&nbsp;<span class="op" id="6204171">=</span>&nbsp;<span class="ident" id="6204173"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6204174">.</span><span class="ident" id="6204175"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6204179">[</span><span class="op" id="6204180">:</span><span class="builtinfunc" id="6204181">len</span><span class="op" id="6204184">(</span><span class="ident" id="6204185"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6204186">.</span><span class="ident" id="6204187"><a href="/gostd/encoding/xml/marshal.go.html#6193550">tags</a></span><span class="op" id="6204191">)</span><span class="op" id="6204192">-</span><span class="num" id="6204193">1</span><span class="op" id="6204194">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6204198"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6204199">.</span><span class="ident" id="6204200"><a href="/gostd/encoding/xml/marshal.go.html#6208963">writeIndent</a></span><span class="op" id="6204211">(</span><span class="op" id="6204212">-</span><span class="num" id="6204213">1</span><span class="op" id="6204214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6204217"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6204218">.</span><span class="ident" id="6204219"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6204228">(</span><span class="string" id="6204229">&#39;&lt;&#39;</span><span class="op" id="6204232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6204235"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6204236">.</span><span class="ident" id="6204237"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6204246">(</span><span class="string" id="6204247">&#39;/&#39;</span><span class="op" id="6204250">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6204253"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6204254">.</span><span class="ident" id="6204255"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6204266">(</span><span class="ident" id="6204267"><a href="/gostd/encoding/xml/marshal.go.html#6203602">name</a></span><span class="op" id="6204271">.</span><span class="ident" id="6204272"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6204277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6204280"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6204281">.</span><span class="ident" id="6204282"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6204291">(</span><span class="string" id="6204292">&#39;&gt;&#39;</span><span class="op" id="6204295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6204298"><a href="/gostd/encoding/xml/marshal.go.html#6203581">p</a></span><span class="op" id="6204299">.</span><span class="ident" id="6204300"><a href="/gostd/encoding/xml/marshal.go.html#6195414">popPrefix</a></span><span class="op" id="6204309">(</span><span class="op" id="6204310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204313">return</span>&nbsp;<span class="builtintype" id="6204320">nil</span><br>
<span class="lineno"></span><span class="op" id="6204324">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="6204327">func</span>&nbsp;<span class="op" id="6204332">(</span><span class="ident" id="6204333">p</span>&nbsp;<span class="op" id="6204335">*</span><span class="ident" id="6204336"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6204343">)</span>&nbsp;<span class="ident" id="6204345">marshalSimple</span><span class="op" id="6204358">(</span><span class="ident" id="6204359">typ</span>&nbsp;<span class="ident" id="6204363"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204370">.</span><span class="ident" id="6204371"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><span class="op" id="6204375">,</span>&nbsp;<span class="ident" id="6204377">val</span>&nbsp;<span class="ident" id="6204381"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204388">.</span><span class="ident" id="6204389"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="6204394">)</span>&nbsp;<span class="op" id="6204396">(</span><span class="builtintype" id="6204397">string</span><span class="op" id="6204403">,</span>&nbsp;<span class="op" id="6204405">[</span><span class="op" id="6204406">]</span><span class="builtintype" id="6204407">byte</span><span class="op" id="6204411">,</span>&nbsp;<span class="builtintype" id="6204413">error</span><span class="op" id="6204418">)</span>&nbsp;<span class="op" id="6204420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204423">switch</span>&nbsp;<span class="ident" id="6204430"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6204433">.</span><span class="ident" id="6204434"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6204438">(</span><span class="op" id="6204439">)</span>&nbsp;<span class="op" id="6204441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204444">case</span>&nbsp;<span class="ident" id="6204449"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204456">.</span><span class="ident" id="6204457"><a href="/gostd/reflect/type.go.html#2787903">Int</a></span><span class="op" id="6204460">,</span>&nbsp;<span class="ident" id="6204462"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204469">.</span><span class="ident" id="6204470"><a href="/gostd/reflect/type.go.html#2787908">Int8</a></span><span class="op" id="6204474">,</span>&nbsp;<span class="ident" id="6204476"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204483">.</span><span class="ident" id="6204484"><a href="/gostd/reflect/type.go.html#2787914">Int16</a></span><span class="op" id="6204489">,</span>&nbsp;<span class="ident" id="6204491"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204498">.</span><span class="ident" id="6204499"><a href="/gostd/reflect/type.go.html#2787921">Int32</a></span><span class="op" id="6204504">,</span>&nbsp;<span class="ident" id="6204506"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204513">.</span><span class="ident" id="6204514"><a href="/gostd/reflect/type.go.html#2787928">Int64</a></span><span class="op" id="6204519">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204523">return</span>&nbsp;<span class="ident" id="6204530"><a href="/gostd/encoding/xml/marshal.go.html#6184729">strconv</a></span><span class="op" id="6204537">.</span><span class="ident" id="6204538"><a href="/gostd/strconv/itoa.go.html#2407133">FormatInt</a></span><span class="op" id="6204547">(</span><span class="ident" id="6204548"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6204551">.</span><span class="ident" id="6204552"><a href="/gostd/reflect/value.go.html#2857929">Int</a></span><span class="op" id="6204555">(</span><span class="op" id="6204556">)</span><span class="op" id="6204557">,</span>&nbsp;<span class="num" id="6204559">10</span><span class="op" id="6204561">)</span><span class="op" id="6204562">,</span>&nbsp;<span class="builtintype" id="6204564">nil</span><span class="op" id="6204567">,</span>&nbsp;<span class="builtintype" id="6204569">nil</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204574">case</span>&nbsp;<span class="ident" id="6204579"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204586">.</span><span class="ident" id="6204587"><a href="/gostd/reflect/type.go.html#2787935">Uint</a></span><span class="op" id="6204591">,</span>&nbsp;<span class="ident" id="6204593"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204600">.</span><span class="ident" id="6204601"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span><span class="op" id="6204606">,</span>&nbsp;<span class="ident" id="6204608"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204615">.</span><span class="ident" id="6204616"><a href="/gostd/reflect/type.go.html#2787948">Uint16</a></span><span class="op" id="6204622">,</span>&nbsp;<span class="ident" id="6204624"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204631">.</span><span class="ident" id="6204632"><a href="/gostd/reflect/type.go.html#2787956">Uint32</a></span><span class="op" id="6204638">,</span>&nbsp;<span class="ident" id="6204640"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204647">.</span><span class="ident" id="6204648"><a href="/gostd/reflect/type.go.html#2787964">Uint64</a></span><span class="op" id="6204654">,</span>&nbsp;<span class="ident" id="6204656"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204663">.</span><span class="ident" id="6204664"><a href="/gostd/reflect/type.go.html#2787972">Uintptr</a></span><span class="op" id="6204671">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204675">return</span>&nbsp;<span class="ident" id="6204682"><a href="/gostd/encoding/xml/marshal.go.html#6184729">strconv</a></span><span class="op" id="6204689">.</span><span class="ident" id="6204690"><a href="/gostd/strconv/itoa.go.html#2406855">FormatUint</a></span><span class="op" id="6204700">(</span><span class="ident" id="6204701"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6204704">.</span><span class="ident" id="6204705"><a href="/gostd/reflect/value.go.html#2881772">Uint</a></span><span class="op" id="6204709">(</span><span class="op" id="6204710">)</span><span class="op" id="6204711">,</span>&nbsp;<span class="num" id="6204713">10</span><span class="op" id="6204715">)</span><span class="op" id="6204716">,</span>&nbsp;<span class="builtintype" id="6204718">nil</span><span class="op" id="6204721">,</span>&nbsp;<span class="builtintype" id="6204723">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204728">case</span>&nbsp;<span class="ident" id="6204733"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204740">.</span><span class="ident" id="6204741"><a href="/gostd/reflect/type.go.html#2787981">Float32</a></span><span class="op" id="6204748">,</span>&nbsp;<span class="ident" id="6204750"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204757">.</span><span class="ident" id="6204758"><a href="/gostd/reflect/type.go.html#2787990">Float64</a></span><span class="op" id="6204765">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204769">return</span>&nbsp;<span class="ident" id="6204776"><a href="/gostd/encoding/xml/marshal.go.html#6184729">strconv</a></span><span class="op" id="6204783">.</span><span class="ident" id="6204784"><a href="/gostd/strconv/ftoa.go.html#2386940">FormatFloat</a></span><span class="op" id="6204795">(</span><span class="ident" id="6204796"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6204799">.</span><span class="ident" id="6204800"><a href="/gostd/reflect/value.go.html#2856007">Float</a></span><span class="op" id="6204805">(</span><span class="op" id="6204806">)</span><span class="op" id="6204807">,</span>&nbsp;<span class="string" id="6204809">&#39;g&#39;</span><span class="op" id="6204812">,</span>&nbsp;<span class="op" id="6204814">-</span><span class="num" id="6204815">1</span><span class="op" id="6204816">,</span>&nbsp;<span class="ident" id="6204818"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6204821">.</span><span class="ident" id="6204822"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6204826">(</span><span class="op" id="6204827">)</span><span class="op" id="6204828">.</span><span class="ident" id="6204829"><a href="/gostd/reflect/type.go.html#2784551">Bits</a></span><span class="op" id="6204833">(</span><span class="op" id="6204834">)</span><span class="op" id="6204835">)</span><span class="op" id="6204836">,</span>&nbsp;<span class="builtintype" id="6204838">nil</span><span class="op" id="6204841">,</span>&nbsp;<span class="builtintype" id="6204843">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204848">case</span>&nbsp;<span class="ident" id="6204853"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204860">.</span><span class="ident" id="6204861"><a href="/gostd/reflect/type.go.html#2788069">String</a></span><span class="op" id="6204867">:</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204871">return</span>&nbsp;<span class="ident" id="6204878"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6204881">.</span><span class="ident" id="6204882"><a href="/gostd/reflect/value.go.html#2879739">String</a></span><span class="op" id="6204888">(</span><span class="op" id="6204889">)</span><span class="op" id="6204890">,</span>&nbsp;<span class="builtintype" id="6204892">nil</span><span class="op" id="6204895">,</span>&nbsp;<span class="builtintype" id="6204897">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204902">case</span>&nbsp;<span class="ident" id="6204907"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204914">.</span><span class="ident" id="6204915"><a href="/gostd/reflect/type.go.html#2787897">Bool</a></span><span class="op" id="6204919">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204923">return</span>&nbsp;<span class="ident" id="6204930"><a href="/gostd/encoding/xml/marshal.go.html#6184729">strconv</a></span><span class="op" id="6204937">.</span><span class="ident" id="6204938"><a href="/gostd/strconv/atob.go.html#2340999">FormatBool</a></span><span class="op" id="6204948">(</span><span class="ident" id="6204949"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6204952">.</span><span class="ident" id="6204953"><a href="/gostd/reflect/value.go.html#2839754">Bool</a></span><span class="op" id="6204957">(</span><span class="op" id="6204958">)</span><span class="op" id="6204959">)</span><span class="op" id="6204960">,</span>&nbsp;<span class="builtintype" id="6204962">nil</span><span class="op" id="6204965">,</span>&nbsp;<span class="builtintype" id="6204967">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204972">case</span>&nbsp;<span class="ident" id="6204977"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6204984">.</span><span class="ident" id="6204985"><a href="/gostd/reflect/type.go.html#2788022">Array</a></span><span class="op" id="6204990">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6204994">if</span>&nbsp;<span class="ident" id="6204997"><a href="/gostd/encoding/xml/marshal.go.html#6204359">typ</a></span><span class="op" id="6205000">.</span><span class="ident" id="6205001"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6205005">(</span><span class="op" id="6205006">)</span><span class="op" id="6205007">.</span><span class="ident" id="6205008"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6205012">(</span><span class="op" id="6205013">)</span>&nbsp;<span class="op" id="6205015">!=</span>&nbsp;<span class="ident" id="6205018"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6205025">.</span><span class="ident" id="6205026"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span>&nbsp;<span class="op" id="6205032">{</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205037">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6205045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6205049">//&nbsp;[...]byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205064">var</span>&nbsp;<span class="ident" id="6205068">bytes</span>&nbsp;<span class="op" id="6205074">[</span><span class="op" id="6205075">]</span><span class="builtintype" id="6205076">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205083">if</span>&nbsp;<span class="ident" id="6205086"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6205089">.</span><span class="ident" id="6205090"><a href="/gostd/reflect/value.go.html#2840824">CanAddr</a></span><span class="op" id="6205097">(</span><span class="op" id="6205098">)</span>&nbsp;<span class="op" id="6205100">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6205105"><a href="/gostd/encoding/xml/marshal.go.html#6205068">bytes</a></span>&nbsp;<span class="op" id="6205111">=</span>&nbsp;<span class="ident" id="6205113"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6205116">.</span><span class="ident" id="6205117"><a href="/gostd/reflect/value.go.html#2876670">Slice</a></span><span class="op" id="6205122">(</span><span class="num" id="6205123">0</span><span class="op" id="6205124">,</span>&nbsp;<span class="ident" id="6205126"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6205129">.</span><span class="ident" id="6205130"><a href="/gostd/reflect/value.go.html#2861631">Len</a></span><span class="op" id="6205133">(</span><span class="op" id="6205134">)</span><span class="op" id="6205135">)</span><span class="op" id="6205136">.</span><span class="ident" id="6205137"><a href="/gostd/reflect/value.go.html#2839927">Bytes</a></span><span class="op" id="6205142">(</span><span class="op" id="6205143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6205147">}</span>&nbsp;<span class="keyword" id="6205149">else</span>&nbsp;<span class="op" id="6205154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6205159"><a href="/gostd/encoding/xml/marshal.go.html#6205068">bytes</a></span>&nbsp;<span class="op" id="6205165">=</span>&nbsp;<span class="builtinfunc" id="6205167">make</span><span class="op" id="6205171">(</span><span class="op" id="6205172">[</span><span class="op" id="6205173">]</span><span class="builtintype" id="6205174">byte</span><span class="op" id="6205178">,</span>&nbsp;<span class="ident" id="6205180"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6205183">.</span><span class="ident" id="6205184"><a href="/gostd/reflect/value.go.html#2861631">Len</a></span><span class="op" id="6205187">(</span><span class="op" id="6205188">)</span><span class="op" id="6205189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6205194"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6205201">.</span><span class="ident" id="6205202"><a href="/gostd/reflect/value.go.html#2885267">Copy</a></span><span class="op" id="6205206">(</span><span class="ident" id="6205207"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6205214">.</span><span class="ident" id="6205215"><a href="/gostd/reflect/value.go.html#2892536">ValueOf</a></span><span class="op" id="6205222">(</span><span class="ident" id="6205223"><a href="/gostd/encoding/xml/marshal.go.html#6205068">bytes</a></span><span class="op" id="6205228">)</span><span class="op" id="6205229">,</span>&nbsp;<span class="ident" id="6205231"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6205234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6205238">}</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205242">return</span>&nbsp;<span class="string" id="6205249">&#34;&#34;</span><span class="op" id="6205251">,</span>&nbsp;<span class="ident" id="6205253"><a href="/gostd/encoding/xml/marshal.go.html#6205068">bytes</a></span><span class="op" id="6205258">,</span>&nbsp;<span class="builtintype" id="6205260">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205265">case</span>&nbsp;<span class="ident" id="6205270"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6205277">.</span><span class="ident" id="6205278"><a href="/gostd/reflect/type.go.html#2788062">Slice</a></span><span class="op" id="6205283">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205287">if</span>&nbsp;<span class="ident" id="6205290"><a href="/gostd/encoding/xml/marshal.go.html#6204359">typ</a></span><span class="op" id="6205293">.</span><span class="ident" id="6205294"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6205298">(</span><span class="op" id="6205299">)</span><span class="op" id="6205300">.</span><span class="ident" id="6205301"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6205305">(</span><span class="op" id="6205306">)</span>&nbsp;<span class="op" id="6205308">!=</span>&nbsp;<span class="ident" id="6205311"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6205318">.</span><span class="ident" id="6205319"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span>&nbsp;<span class="op" id="6205325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205330">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6205338">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6205342">//&nbsp;[]byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205354">return</span>&nbsp;<span class="string" id="6205361">&#34;&#34;</span><span class="op" id="6205363">,</span>&nbsp;<span class="ident" id="6205365"><a href="/gostd/encoding/xml/marshal.go.html#6204377">val</a></span><span class="op" id="6205368">.</span><span class="ident" id="6205369"><a href="/gostd/reflect/value.go.html#2839927">Bytes</a></span><span class="op" id="6205374">(</span><span class="op" id="6205375">)</span><span class="op" id="6205376">,</span>&nbsp;<span class="builtintype" id="6205378">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6205383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205386">return</span>&nbsp;<span class="string" id="6205393">&#34;&#34;</span><span class="op" id="6205395">,</span>&nbsp;<span class="builtintype" id="6205397">nil</span><span class="op" id="6205400">,</span>&nbsp;<span class="op" id="6205402">&amp;</span><span class="ident" id="6205403"><a href="/gostd/encoding/xml/marshal.go.html#6210512">UnsupportedTypeError</a></span><span class="op" id="6205423">{</span><span class="ident" id="6205424"><a href="/gostd/encoding/xml/marshal.go.html#6204359">typ</a></span><span class="op" id="6205427">}</span><br>
<span class="lineno"></span><span class="op" id="6205429">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="keyword" id="6205432">var</span>&nbsp;<span class="ident" id="6205436">ddBytes</span>&nbsp;<span class="op" id="6205444">=</span>&nbsp;<span class="op" id="6205446">[</span><span class="op" id="6205447">]</span><span class="builtintype" id="6205448">byte</span><span class="op" id="6205452">(</span><span class="string" id="6205453">&#34;--&#34;</span><span class="op" id="6205457">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6205460">func</span>&nbsp;<span class="op" id="6205465">(</span><span class="ident" id="6205466">p</span>&nbsp;<span class="op" id="6205468">*</span><span class="ident" id="6205469"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6205476">)</span>&nbsp;<span class="ident" id="6205478">marshalStruct</span><span class="op" id="6205491">(</span><span class="ident" id="6205492">tinfo</span>&nbsp;<span class="op" id="6205498">*</span><span class="ident" id="6205499"><a href="/gostd/encoding/xml/typeinfo.go.html#6231788">typeInfo</a></span><span class="op" id="6205507">,</span>&nbsp;<span class="ident" id="6205509">val</span>&nbsp;<span class="ident" id="6205513"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6205520">.</span><span class="ident" id="6205521"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="6205526">)</span>&nbsp;<span class="builtintype" id="6205528">error</span>&nbsp;<span class="op" id="6205534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6205537">s</span>&nbsp;<span class="op" id="6205539">:=</span>&nbsp;<span class="ident" id="6205542"><a href="/gostd/encoding/xml/marshal.go.html#6209453">parentStack</a></span><span class="op" id="6205553">{</span><span class="ident" id="6205554"><a href="/gostd/encoding/xml/marshal.go.html#6209475">p</a></span><span class="op" id="6205555">:</span>&nbsp;<span class="ident" id="6205557"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6205558">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205561">for</span>&nbsp;<span class="ident" id="6205565">i</span>&nbsp;<span class="op" id="6205567">:=</span>&nbsp;<span class="keyword" id="6205570">range</span>&nbsp;<span class="ident" id="6205576"><a href="/gostd/encoding/xml/marshal.go.html#6205492">tinfo</a></span><span class="op" id="6205581">.</span><span class="ident" id="6205582"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span>&nbsp;<span class="op" id="6205589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6205593">finfo</span>&nbsp;<span class="op" id="6205599">:=</span>&nbsp;<span class="op" id="6205602">&amp;</span><span class="ident" id="6205603"><a href="/gostd/encoding/xml/marshal.go.html#6205492">tinfo</a></span><span class="op" id="6205608">.</span><span class="ident" id="6205609"><a href="/gostd/encoding/xml/typeinfo.go.html#6231827">fields</a></span><span class="op" id="6205615">[</span><span class="ident" id="6205616"><a href="/gostd/encoding/xml/marshal.go.html#6205565">i</a></span><span class="op" id="6205617">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205621">if</span>&nbsp;<span class="ident" id="6205624"><a href="/gostd/encoding/xml/marshal.go.html#6205593">finfo</a></span><span class="op" id="6205629">.</span><span class="ident" id="6205630"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span><span class="op" id="6205635">&amp;</span><span class="ident" id="6205636"><a href="/gostd/encoding/xml/typeinfo.go.html#6232098">fAttr</a></span>&nbsp;<span class="op" id="6205642">!=</span>&nbsp;<span class="num" id="6205645">0</span>&nbsp;<span class="op" id="6205647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205652">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6205663">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6205667">vf</span>&nbsp;<span class="op" id="6205670">:=</span>&nbsp;<span class="ident" id="6205673"><a href="/gostd/encoding/xml/marshal.go.html#6205593">finfo</a></span><span class="op" id="6205678">.</span><span class="ident" id="6205679"><a href="/gostd/encoding/xml/typeinfo.go.html#6240677">value</a></span><span class="op" id="6205684">(</span><span class="ident" id="6205685"><a href="/gostd/encoding/xml/marshal.go.html#6205509">val</a></span><span class="op" id="6205688">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6205693">//&nbsp;Dereference&nbsp;or&nbsp;skip&nbsp;nil&nbsp;pointer,&nbsp;interface&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205749">switch</span>&nbsp;<span class="ident" id="6205756"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6205758">.</span><span class="ident" id="6205759"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6205763">(</span><span class="op" id="6205764">)</span>&nbsp;<span class="op" id="6205766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205770">case</span>&nbsp;<span class="ident" id="6205775"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6205782">.</span><span class="ident" id="6205783"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span><span class="op" id="6205786">,</span>&nbsp;<span class="ident" id="6205788"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6205795">.</span><span class="ident" id="6205796"><a href="/gostd/reflect/type.go.html#2788041">Interface</a></span><span class="op" id="6205805">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205810">if</span>&nbsp;<span class="op" id="6205813">!</span><span class="ident" id="6205814"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6205816">.</span><span class="ident" id="6205817"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="6205822">(</span><span class="op" id="6205823">)</span>&nbsp;<span class="op" id="6205825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6205831"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span>&nbsp;<span class="op" id="6205834">=</span>&nbsp;<span class="ident" id="6205836"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6205838">.</span><span class="ident" id="6205839"><a href="/gostd/reflect/value.go.html#2853087">Elem</a></span><span class="op" id="6205843">(</span><span class="op" id="6205844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6205849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6205853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205858">switch</span>&nbsp;<span class="ident" id="6205865"><a href="/gostd/encoding/xml/marshal.go.html#6205593">finfo</a></span><span class="op" id="6205870">.</span><span class="ident" id="6205871"><a href="/gostd/encoding/xml/typeinfo.go.html#6231995">flags</a></span>&nbsp;<span class="op" id="6205877">&amp;</span>&nbsp;<span class="ident" id="6205879"><a href="/gostd/encoding/xml/typeinfo.go.html#6232157">fMode</a></span>&nbsp;<span class="op" id="6205885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205889">case</span>&nbsp;<span class="ident" id="6205894"><a href="/gostd/encoding/xml/typeinfo.go.html#6232105">fCharData</a></span><span class="op" id="6205903">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6205908">if</span>&nbsp;<span class="ident" id="6205911"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6205913">.</span><span class="ident" id="6205914"><a href="/gostd/reflect/value.go.html#2858331">CanInterface</a></span><span class="op" id="6205926">(</span><span class="op" id="6205927">)</span>&nbsp;<span class="op" id="6205929">&amp;&amp;</span>&nbsp;<span class="ident" id="6205932"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6205934">.</span><span class="ident" id="6205935"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6205939">(</span><span class="op" id="6205940">)</span><span class="op" id="6205941">.</span><span class="ident" id="6205942"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="6205952">(</span><span class="ident" id="6205953"><a href="/gostd/encoding/xml/marshal.go.html#6195746">textMarshalerType</a></span><span class="op" id="6205970">)</span>&nbsp;<span class="op" id="6205972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6205978">data</span><span class="op" id="6205982">,</span>&nbsp;<span class="ident" id="6205984">err</span>&nbsp;<span class="op" id="6205988">:=</span>&nbsp;<span class="ident" id="6205991"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6205993">.</span><span class="ident" id="6205994"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6206003">(</span><span class="op" id="6206004">)</span><span class="op" id="6206005">.</span><span class="op" id="6206006">(</span><span class="ident" id="6206007"><a href="/gostd/encoding/xml/marshal.go.html#6184693">encoding</a></span><span class="op" id="6206015">.</span><span class="ident" id="6206016"><a href="/gostd/encoding/encoding.go.html#4051330">TextMarshaler</a></span><span class="op" id="6206029">)</span><span class="op" id="6206030">.</span><span class="ident" id="6206031"><a href="/gostd/encoding/encoding.go.html#4051357">MarshalText</a></span><span class="op" id="6206042">(</span><span class="op" id="6206043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206049">if</span>&nbsp;<span class="ident" id="6206052"><a href="/gostd/encoding/xml/marshal.go.html#6205984">err</a></span>&nbsp;<span class="op" id="6206056">!=</span>&nbsp;<span class="builtintype" id="6206059">nil</span>&nbsp;<span class="op" id="6206063">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206070">return</span>&nbsp;<span class="ident" id="6206077"><a href="/gostd/encoding/xml/marshal.go.html#6205984">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6206085">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6206091"><a href="/gostd/encoding/xml/xml.go.html#6284857">Escape</a></span><span class="op" id="6206097">(</span><span class="ident" id="6206098"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6206099">,</span>&nbsp;<span class="ident" id="6206101"><a href="/gostd/encoding/xml/marshal.go.html#6205978">data</a></span><span class="op" id="6206105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206111">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6206123">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206128">if</span>&nbsp;<span class="ident" id="6206131"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6206133">.</span><span class="ident" id="6206134"><a href="/gostd/reflect/value.go.html#2840824">CanAddr</a></span><span class="op" id="6206141">(</span><span class="op" id="6206142">)</span>&nbsp;<span class="op" id="6206144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6206150">pv</span>&nbsp;<span class="op" id="6206153">:=</span>&nbsp;<span class="ident" id="6206156"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6206158">.</span><span class="ident" id="6206159"><a href="/gostd/reflect/value.go.html#2839495">Addr</a></span><span class="op" id="6206163">(</span><span class="op" id="6206164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206170">if</span>&nbsp;<span class="ident" id="6206173"><a href="/gostd/encoding/xml/marshal.go.html#6206150">pv</a></span><span class="op" id="6206175">.</span><span class="ident" id="6206176"><a href="/gostd/reflect/value.go.html#2858331">CanInterface</a></span><span class="op" id="6206188">(</span><span class="op" id="6206189">)</span>&nbsp;<span class="op" id="6206191">&amp;&amp;</span>&nbsp;<span class="ident" id="6206194"><a href="/gostd/encoding/xml/marshal.go.html#6206150">pv</a></span><span class="op" id="6206196">.</span><span class="ident" id="6206197"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6206201">(</span><span class="op" id="6206202">)</span><span class="op" id="6206203">.</span><span class="ident" id="6206204"><a href="/gostd/reflect/type.go.html#2783706">Implements</a></span><span class="op" id="6206214">(</span><span class="ident" id="6206215"><a href="/gostd/encoding/xml/marshal.go.html#6195746">textMarshalerType</a></span><span class="op" id="6206232">)</span>&nbsp;<span class="op" id="6206234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6206241">data</span><span class="op" id="6206245">,</span>&nbsp;<span class="ident" id="6206247">err</span>&nbsp;<span class="op" id="6206251">:=</span>&nbsp;<span class="ident" id="6206254"><a href="/gostd/encoding/xml/marshal.go.html#6206150">pv</a></span><span class="op" id="6206256">.</span><span class="ident" id="6206257"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6206266">(</span><span class="op" id="6206267">)</span><span class="op" id="6206268">.</span><span class="op" id="6206269">(</span><span class="ident" id="6206270"><a href="/gostd/encoding/xml/marshal.go.html#6184693">encoding</a></span><span class="op" id="6206278">.</span><span class="ident" id="6206279"><a href="/gostd/encoding/encoding.go.html#4051330">TextMarshaler</a></span><span class="op" id="6206292">)</span><span class="op" id="6206293">.</span><span class="ident" id="6206294"><a href="/gostd/encoding/encoding.go.html#4051357">MarshalText</a></span><span class="op" id="6206305">(</span><span class="op" id="6206306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206313">if</span>&nbsp;<span class="ident" id="6206316"><a href="/gostd/encoding/xml/marshal.go.html#6206247">err</a></span>&nbsp;<span class="op" id="6206320">!=</span>&nbsp;<span class="builtintype" id="6206323">nil</span>&nbsp;<span class="op" id="6206327">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206335">return</span>&nbsp;<span class="ident" id="6206342"><a href="/gostd/encoding/xml/marshal.go.html#6206247">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6206351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6206358"><a href="/gostd/encoding/xml/xml.go.html#6284857">Escape</a></span><span class="op" id="6206364">(</span><span class="ident" id="6206365"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6206366">,</span>&nbsp;<span class="ident" id="6206368"><a href="/gostd/encoding/xml/marshal.go.html#6206241">data</a></span><span class="op" id="6206372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206379">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6206392">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6206397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206402">var</span>&nbsp;<span class="ident" id="6206406">scratch</span>&nbsp;<span class="op" id="6206414">[</span><span class="num" id="6206415">64</span><span class="op" id="6206417">]</span><span class="builtintype" id="6206418">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206426">switch</span>&nbsp;<span class="ident" id="6206433"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6206435">.</span><span class="ident" id="6206436"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6206440">(</span><span class="op" id="6206441">)</span>&nbsp;<span class="op" id="6206443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206448">case</span>&nbsp;<span class="ident" id="6206453"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206460">.</span><span class="ident" id="6206461"><a href="/gostd/reflect/type.go.html#2787903">Int</a></span><span class="op" id="6206464">,</span>&nbsp;<span class="ident" id="6206466"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206473">.</span><span class="ident" id="6206474"><a href="/gostd/reflect/type.go.html#2787908">Int8</a></span><span class="op" id="6206478">,</span>&nbsp;<span class="ident" id="6206480"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206487">.</span><span class="ident" id="6206488"><a href="/gostd/reflect/type.go.html#2787914">Int16</a></span><span class="op" id="6206493">,</span>&nbsp;<span class="ident" id="6206495"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206502">.</span><span class="ident" id="6206503"><a href="/gostd/reflect/type.go.html#2787921">Int32</a></span><span class="op" id="6206508">,</span>&nbsp;<span class="ident" id="6206510"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206517">.</span><span class="ident" id="6206518"><a href="/gostd/reflect/type.go.html#2787928">Int64</a></span><span class="op" id="6206523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6206529"><a href="/gostd/encoding/xml/xml.go.html#6284857">Escape</a></span><span class="op" id="6206535">(</span><span class="ident" id="6206536"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6206537">,</span>&nbsp;<span class="ident" id="6206539"><a href="/gostd/encoding/xml/marshal.go.html#6184729">strconv</a></span><span class="op" id="6206546">.</span><span class="ident" id="6206547"><a href="/gostd/strconv/itoa.go.html#2407474">AppendInt</a></span><span class="op" id="6206556">(</span><span class="ident" id="6206557"><a href="/gostd/encoding/xml/marshal.go.html#6206406">scratch</a></span><span class="op" id="6206564">[</span><span class="op" id="6206565">:</span><span class="num" id="6206566">0</span><span class="op" id="6206567">]</span><span class="op" id="6206568">,</span>&nbsp;<span class="ident" id="6206570"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6206572">.</span><span class="ident" id="6206573"><a href="/gostd/reflect/value.go.html#2857929">Int</a></span><span class="op" id="6206576">(</span><span class="op" id="6206577">)</span><span class="op" id="6206578">,</span>&nbsp;<span class="num" id="6206580">10</span><span class="op" id="6206582">)</span><span class="op" id="6206583">)</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206588">case</span>&nbsp;<span class="ident" id="6206593"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206600">.</span><span class="ident" id="6206601"><a href="/gostd/reflect/type.go.html#2787935">Uint</a></span><span class="op" id="6206605">,</span>&nbsp;<span class="ident" id="6206607"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206614">.</span><span class="ident" id="6206615"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span><span class="op" id="6206620">,</span>&nbsp;<span class="ident" id="6206622"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206629">.</span><span class="ident" id="6206630"><a href="/gostd/reflect/type.go.html#2787948">Uint16</a></span><span class="op" id="6206636">,</span>&nbsp;<span class="ident" id="6206638"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206645">.</span><span class="ident" id="6206646"><a href="/gostd/reflect/type.go.html#2787956">Uint32</a></span><span class="op" id="6206652">,</span>&nbsp;<span class="ident" id="6206654"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206661">.</span><span class="ident" id="6206662"><a href="/gostd/reflect/type.go.html#2787964">Uint64</a></span><span class="op" id="6206668">,</span>&nbsp;<span class="ident" id="6206670"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206677">.</span><span class="ident" id="6206678"><a href="/gostd/reflect/type.go.html#2787972">Uintptr</a></span><span class="op" id="6206685">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6206691"><a href="/gostd/encoding/xml/xml.go.html#6284857">Escape</a></span><span class="op" id="6206697">(</span><span class="ident" id="6206698"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6206699">,</span>&nbsp;<span class="ident" id="6206701"><a href="/gostd/encoding/xml/marshal.go.html#6184729">strconv</a></span><span class="op" id="6206708">.</span><span class="ident" id="6206709"><a href="/gostd/strconv/itoa.go.html#2407736">AppendUint</a></span><span class="op" id="6206719">(</span><span class="ident" id="6206720"><a href="/gostd/encoding/xml/marshal.go.html#6206406">scratch</a></span><span class="op" id="6206727">[</span><span class="op" id="6206728">:</span><span class="num" id="6206729">0</span><span class="op" id="6206730">]</span><span class="op" id="6206731">,</span>&nbsp;<span class="ident" id="6206733"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6206735">.</span><span class="ident" id="6206736"><a href="/gostd/reflect/value.go.html#2881772">Uint</a></span><span class="op" id="6206740">(</span><span class="op" id="6206741">)</span><span class="op" id="6206742">,</span>&nbsp;<span class="num" id="6206744">10</span><span class="op" id="6206746">)</span><span class="op" id="6206747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206752">case</span>&nbsp;<span class="ident" id="6206757"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206764">.</span><span class="ident" id="6206765"><a href="/gostd/reflect/type.go.html#2787981">Float32</a></span><span class="op" id="6206772">,</span>&nbsp;<span class="ident" id="6206774"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206781">.</span><span class="ident" id="6206782"><a href="/gostd/reflect/type.go.html#2787990">Float64</a></span><span class="op" id="6206789">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6206795"><a href="/gostd/encoding/xml/xml.go.html#6284857">Escape</a></span><span class="op" id="6206801">(</span><span class="ident" id="6206802"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6206803">,</span>&nbsp;<span class="ident" id="6206805"><a href="/gostd/encoding/xml/marshal.go.html#6184729">strconv</a></span><span class="op" id="6206812">.</span><span class="ident" id="6206813"><a href="/gostd/strconv/ftoa.go.html#2387237">AppendFloat</a></span><span class="op" id="6206824">(</span><span class="ident" id="6206825"><a href="/gostd/encoding/xml/marshal.go.html#6206406">scratch</a></span><span class="op" id="6206832">[</span><span class="op" id="6206833">:</span><span class="num" id="6206834">0</span><span class="op" id="6206835">]</span><span class="op" id="6206836">,</span>&nbsp;<span class="ident" id="6206838"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6206840">.</span><span class="ident" id="6206841"><a href="/gostd/reflect/value.go.html#2856007">Float</a></span><span class="op" id="6206846">(</span><span class="op" id="6206847">)</span><span class="op" id="6206848">,</span>&nbsp;<span class="string" id="6206850">&#39;g&#39;</span><span class="op" id="6206853">,</span>&nbsp;<span class="op" id="6206855">-</span><span class="num" id="6206856">1</span><span class="op" id="6206857">,</span>&nbsp;<span class="ident" id="6206859"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6206861">.</span><span class="ident" id="6206862"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6206866">(</span><span class="op" id="6206867">)</span><span class="op" id="6206868">.</span><span class="ident" id="6206869"><a href="/gostd/reflect/type.go.html#2784551">Bits</a></span><span class="op" id="6206873">(</span><span class="op" id="6206874">)</span><span class="op" id="6206875">)</span><span class="op" id="6206876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206881">case</span>&nbsp;<span class="ident" id="6206886"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206893">.</span><span class="ident" id="6206894"><a href="/gostd/reflect/type.go.html#2787897">Bool</a></span><span class="op" id="6206898">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6206904"><a href="/gostd/encoding/xml/xml.go.html#6284857">Escape</a></span><span class="op" id="6206910">(</span><span class="ident" id="6206911"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6206912">,</span>&nbsp;<span class="ident" id="6206914"><a href="/gostd/encoding/xml/marshal.go.html#6184729">strconv</a></span><span class="op" id="6206921">.</span><span class="ident" id="6206922"><a href="/gostd/strconv/atob.go.html#2341191">AppendBool</a></span><span class="op" id="6206932">(</span><span class="ident" id="6206933"><a href="/gostd/encoding/xml/marshal.go.html#6206406">scratch</a></span><span class="op" id="6206940">[</span><span class="op" id="6206941">:</span><span class="num" id="6206942">0</span><span class="op" id="6206943">]</span><span class="op" id="6206944">,</span>&nbsp;<span class="ident" id="6206946"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6206948">.</span><span class="ident" id="6206949"><a href="/gostd/reflect/value.go.html#2839754">Bool</a></span><span class="op" id="6206953">(</span><span class="op" id="6206954">)</span><span class="op" id="6206955">)</span><span class="op" id="6206956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206961">case</span>&nbsp;<span class="ident" id="6206966"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6206973">.</span><span class="ident" id="6206974"><a href="/gostd/reflect/type.go.html#2788069">String</a></span><span class="op" id="6206980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6206986">if</span>&nbsp;<span class="ident" id="6206989">err</span>&nbsp;<span class="op" id="6206993">:=</span>&nbsp;<span class="ident" id="6206996"><a href="/gostd/encoding/xml/xml.go.html#6283222">EscapeText</a></span><span class="op" id="6207006">(</span><span class="ident" id="6207007"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6207008">,</span>&nbsp;<span class="op" id="6207010">[</span><span class="op" id="6207011">]</span><span class="builtintype" id="6207012">byte</span><span class="op" id="6207016">(</span><span class="ident" id="6207017"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6207019">.</span><span class="ident" id="6207020"><a href="/gostd/reflect/value.go.html#2879739">String</a></span><span class="op" id="6207026">(</span><span class="op" id="6207027">)</span><span class="op" id="6207028">)</span><span class="op" id="6207029">)</span><span class="op" id="6207030">;</span>&nbsp;<span class="ident" id="6207032"><a href="/gostd/encoding/xml/marshal.go.html#6206989">err</a></span>&nbsp;<span class="op" id="6207036">!=</span>&nbsp;<span class="builtintype" id="6207039">nil</span>&nbsp;<span class="op" id="6207043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207050">return</span>&nbsp;<span class="ident" id="6207057"><a href="/gostd/encoding/xml/marshal.go.html#6206989">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6207065">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207070">case</span>&nbsp;<span class="ident" id="6207075"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6207082">.</span><span class="ident" id="6207083"><a href="/gostd/reflect/type.go.html#2788062">Slice</a></span><span class="op" id="6207088">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207094">if</span>&nbsp;<span class="ident" id="6207097">elem</span><span class="op" id="6207101">,</span>&nbsp;<span class="ident" id="6207103">ok</span>&nbsp;<span class="op" id="6207106">:=</span>&nbsp;<span class="ident" id="6207109"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6207111">.</span><span class="ident" id="6207112"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6207121">(</span><span class="op" id="6207122">)</span><span class="op" id="6207123">.</span><span class="op" id="6207124">(</span><span class="op" id="6207125">[</span><span class="op" id="6207126">]</span><span class="builtintype" id="6207127">byte</span><span class="op" id="6207131">)</span><span class="op" id="6207132">;</span>&nbsp;<span class="ident" id="6207134"><a href="/gostd/encoding/xml/marshal.go.html#6207103">ok</a></span>&nbsp;<span class="op" id="6207137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207144">if</span>&nbsp;<span class="ident" id="6207147">err</span>&nbsp;<span class="op" id="6207151">:=</span>&nbsp;<span class="ident" id="6207154"><a href="/gostd/encoding/xml/xml.go.html#6283222">EscapeText</a></span><span class="op" id="6207164">(</span><span class="ident" id="6207165"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6207166">,</span>&nbsp;<span class="ident" id="6207168"><a href="/gostd/encoding/xml/marshal.go.html#6207097">elem</a></span><span class="op" id="6207172">)</span><span class="op" id="6207173">;</span>&nbsp;<span class="ident" id="6207175"><a href="/gostd/encoding/xml/marshal.go.html#6207147">err</a></span>&nbsp;<span class="op" id="6207179">!=</span>&nbsp;<span class="builtintype" id="6207182">nil</span>&nbsp;<span class="op" id="6207186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207194">return</span>&nbsp;<span class="ident" id="6207201"><a href="/gostd/encoding/xml/marshal.go.html#6207147">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6207210">}</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6207216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6207221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207226">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207238">case</span>&nbsp;<span class="ident" id="6207243"><a href="/gostd/encoding/xml/typeinfo.go.html#6232127">fComment</a></span><span class="op" id="6207251">:</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207256">k</span>&nbsp;<span class="op" id="6207258">:=</span>&nbsp;<span class="ident" id="6207261"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6207263">.</span><span class="ident" id="6207264"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6207268">(</span><span class="op" id="6207269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207274">if</span>&nbsp;<span class="op" id="6207277">!</span><span class="op" id="6207278">(</span><span class="ident" id="6207279"><a href="/gostd/encoding/xml/marshal.go.html#6207256">k</a></span>&nbsp;<span class="op" id="6207281">==</span>&nbsp;<span class="ident" id="6207284"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6207291">.</span><span class="ident" id="6207292"><a href="/gostd/reflect/type.go.html#2788069">String</a></span>&nbsp;<span class="op" id="6207299">||</span>&nbsp;<span class="ident" id="6207302"><a href="/gostd/encoding/xml/marshal.go.html#6207256">k</a></span>&nbsp;<span class="op" id="6207304">==</span>&nbsp;<span class="ident" id="6207307"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6207314">.</span><span class="ident" id="6207315"><a href="/gostd/reflect/type.go.html#2788062">Slice</a></span>&nbsp;<span class="op" id="6207321">&amp;&amp;</span>&nbsp;<span class="ident" id="6207324"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6207326">.</span><span class="ident" id="6207327"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6207331">(</span><span class="op" id="6207332">)</span><span class="op" id="6207333">.</span><span class="ident" id="6207334"><a href="/gostd/reflect/type.go.html#2785263">Elem</a></span><span class="op" id="6207338">(</span><span class="op" id="6207339">)</span><span class="op" id="6207340">.</span><span class="ident" id="6207341"><a href="/gostd/reflect/type.go.html#2783619">Kind</a></span><span class="op" id="6207345">(</span><span class="op" id="6207346">)</span>&nbsp;<span class="op" id="6207348">==</span>&nbsp;<span class="ident" id="6207351"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6207358">.</span><span class="ident" id="6207359"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span><span class="op" id="6207364">)</span>&nbsp;<span class="op" id="6207366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207372">return</span>&nbsp;<span class="ident" id="6207379"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6207382">.</span><span class="ident" id="6207383"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6207389">(</span><span class="string" id="6207390">&#34;xml:&nbsp;bad&nbsp;type&nbsp;for&nbsp;comment&nbsp;field&nbsp;of&nbsp;%s&#34;</span><span class="op" id="6207429">,</span>&nbsp;<span class="ident" id="6207431"><a href="/gostd/encoding/xml/marshal.go.html#6205509">val</a></span><span class="op" id="6207434">.</span><span class="ident" id="6207435"><a href="/gostd/reflect/value.go.html#2880910">Type</a></span><span class="op" id="6207439">(</span><span class="op" id="6207440">)</span><span class="op" id="6207441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6207446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207451">if</span>&nbsp;<span class="ident" id="6207454"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6207456">.</span><span class="ident" id="6207457"><a href="/gostd/reflect/value.go.html#2861631">Len</a></span><span class="op" id="6207460">(</span><span class="op" id="6207461">)</span>&nbsp;<span class="op" id="6207463">==</span>&nbsp;<span class="num" id="6207466">0</span>&nbsp;<span class="op" id="6207468">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207474">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6207486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207491"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6207492">.</span><span class="ident" id="6207493"><a href="/gostd/encoding/xml/marshal.go.html#6208963">writeIndent</a></span><span class="op" id="6207504">(</span><span class="num" id="6207505">0</span><span class="op" id="6207506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207511"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6207512">.</span><span class="ident" id="6207513"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6207524">(</span><span class="string" id="6207525">&#34;&lt;!--&#34;</span><span class="op" id="6207531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207536">dashDash</span>&nbsp;<span class="op" id="6207545">:=</span>&nbsp;<span class="builtintype" id="6207548">false</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207557">dashLast</span>&nbsp;<span class="op" id="6207566">:=</span>&nbsp;<span class="builtintype" id="6207569">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207578">switch</span>&nbsp;<span class="ident" id="6207585"><a href="/gostd/encoding/xml/marshal.go.html#6207256">k</a></span>&nbsp;<span class="op" id="6207587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207592">case</span>&nbsp;<span class="ident" id="6207597"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6207604">.</span><span class="ident" id="6207605"><a href="/gostd/reflect/type.go.html#2788069">String</a></span><span class="op" id="6207611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207617">s</span>&nbsp;<span class="op" id="6207619">:=</span>&nbsp;<span class="ident" id="6207622"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6207624">.</span><span class="ident" id="6207625"><a href="/gostd/reflect/value.go.html#2879739">String</a></span><span class="op" id="6207631">(</span><span class="op" id="6207632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207638"><a href="/gostd/encoding/xml/marshal.go.html#6207536">dashDash</a></span>&nbsp;<span class="op" id="6207647">=</span>&nbsp;<span class="ident" id="6207649"><a href="/gostd/encoding/xml/marshal.go.html#6184740">strings</a></span><span class="op" id="6207656">.</span><span class="ident" id="6207657"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="6207662">(</span><span class="ident" id="6207663"><a href="/gostd/encoding/xml/marshal.go.html#6207617">s</a></span><span class="op" id="6207664">,</span>&nbsp;<span class="string" id="6207666">&#34;--&#34;</span><span class="op" id="6207670">)</span>&nbsp;<span class="op" id="6207672">&gt;=</span>&nbsp;<span class="num" id="6207675">0</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207681"><a href="/gostd/encoding/xml/marshal.go.html#6207557">dashLast</a></span>&nbsp;<span class="op" id="6207690">=</span>&nbsp;<span class="ident" id="6207692"><a href="/gostd/encoding/xml/marshal.go.html#6207617">s</a></span><span class="op" id="6207693">[</span><span class="builtinfunc" id="6207694">len</span><span class="op" id="6207697">(</span><span class="ident" id="6207698"><a href="/gostd/encoding/xml/marshal.go.html#6207617">s</a></span><span class="op" id="6207699">)</span><span class="op" id="6207700">-</span><span class="num" id="6207701">1</span><span class="op" id="6207702">]</span>&nbsp;<span class="op" id="6207704">==</span>&nbsp;<span class="string" id="6207707">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207715">if</span>&nbsp;<span class="op" id="6207718">!</span><span class="ident" id="6207719"><a href="/gostd/encoding/xml/marshal.go.html#6207536">dashDash</a></span>&nbsp;<span class="op" id="6207728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207735"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6207736">.</span><span class="ident" id="6207737"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6207748">(</span><span class="ident" id="6207749"><a href="/gostd/encoding/xml/marshal.go.html#6207617">s</a></span><span class="op" id="6207750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6207756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207761">case</span>&nbsp;<span class="ident" id="6207766"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6207773">.</span><span class="ident" id="6207774"><a href="/gostd/reflect/type.go.html#2788062">Slice</a></span><span class="op" id="6207779">:</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207785">b</span>&nbsp;<span class="op" id="6207787">:=</span>&nbsp;<span class="ident" id="6207790"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6207792">.</span><span class="ident" id="6207793"><a href="/gostd/reflect/value.go.html#2839927">Bytes</a></span><span class="op" id="6207798">(</span><span class="op" id="6207799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207805"><a href="/gostd/encoding/xml/marshal.go.html#6207536">dashDash</a></span>&nbsp;<span class="op" id="6207814">=</span>&nbsp;<span class="ident" id="6207816"><a href="/gostd/encoding/xml/marshal.go.html#6184684">bytes</a></span><span class="op" id="6207821">.</span><span class="ident" id="6207822"><a href="/gostd/bytes/bytes.go.html#1397659">Index</a></span><span class="op" id="6207827">(</span><span class="ident" id="6207828"><a href="/gostd/encoding/xml/marshal.go.html#6207785">b</a></span><span class="op" id="6207829">,</span>&nbsp;<span class="ident" id="6207831"><a href="/gostd/encoding/xml/marshal.go.html#6205436">ddBytes</a></span><span class="op" id="6207838">)</span>&nbsp;<span class="op" id="6207840">&gt;=</span>&nbsp;<span class="num" id="6207843">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207849"><a href="/gostd/encoding/xml/marshal.go.html#6207557">dashLast</a></span>&nbsp;<span class="op" id="6207858">=</span>&nbsp;<span class="ident" id="6207860"><a href="/gostd/encoding/xml/marshal.go.html#6207785">b</a></span><span class="op" id="6207861">[</span><span class="builtinfunc" id="6207862">len</span><span class="op" id="6207865">(</span><span class="ident" id="6207866"><a href="/gostd/encoding/xml/marshal.go.html#6207785">b</a></span><span class="op" id="6207867">)</span><span class="op" id="6207868">-</span><span class="num" id="6207869">1</span><span class="op" id="6207870">]</span>&nbsp;<span class="op" id="6207872">==</span>&nbsp;<span class="string" id="6207875">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207883">if</span>&nbsp;<span class="op" id="6207886">!</span><span class="ident" id="6207887"><a href="/gostd/encoding/xml/marshal.go.html#6207536">dashDash</a></span>&nbsp;<span class="op" id="6207896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6207903"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6207904">.</span><span class="ident" id="6207905"><a href="/gostd/bufio/bufio.go.html#1368329">Write</a></span><span class="op" id="6207910">(</span><span class="ident" id="6207911"><a href="/gostd/encoding/xml/marshal.go.html#6207785">b</a></span><span class="op" id="6207912">)</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6207918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207923">default</span><span class="op" id="6207930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6207936">panic</span><span class="op" id="6207941">(</span><span class="string" id="6207942">&#34;can&#39;t&nbsp;happen&#34;</span><span class="op" id="6207956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6207961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207966">if</span>&nbsp;<span class="ident" id="6207969"><a href="/gostd/encoding/xml/marshal.go.html#6207536">dashDash</a></span>&nbsp;<span class="op" id="6207978">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6207984">return</span>&nbsp;<span class="ident" id="6207991"><a href="/gostd/encoding/xml/marshal.go.html#6184705">fmt</a></span><span class="op" id="6207994">.</span><span class="ident" id="6207995"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="6208001">(</span><span class="string" id="6208002">`xml:&nbsp;comments&nbsp;must&nbsp;not&nbsp;contain&nbsp;&#34;--&#34;`</span><span class="op" id="6208039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6208044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208049">if</span>&nbsp;<span class="ident" id="6208052"><a href="/gostd/encoding/xml/marshal.go.html#6207557">dashLast</a></span>&nbsp;<span class="op" id="6208061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6208067">//&nbsp;&#34;---&gt;&#34;&nbsp;is&nbsp;invalid&nbsp;grammar.&nbsp;Make&nbsp;it&nbsp;&#34;-&nbsp;--&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6208117"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6208118">.</span><span class="ident" id="6208119"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6208128">(</span><span class="string" id="6208129">&#39;&nbsp;&#39;</span><span class="op" id="6208132">)</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6208137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6208142"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6208143">.</span><span class="ident" id="6208144"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6208155">(</span><span class="string" id="6208156">&#34;--&gt;&#34;</span><span class="op" id="6208161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208166">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208178">case</span>&nbsp;<span class="ident" id="6208183"><a href="/gostd/encoding/xml/typeinfo.go.html#6232116">fInnerXml</a></span><span class="op" id="6208192">:</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6208197">iface</span>&nbsp;<span class="op" id="6208203">:=</span>&nbsp;<span class="ident" id="6208206"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6208208">.</span><span class="ident" id="6208209"><a href="/gostd/reflect/value.go.html#2858688">Interface</a></span><span class="op" id="6208218">(</span><span class="op" id="6208219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208224">switch</span>&nbsp;<span class="ident" id="6208231">raw</span>&nbsp;<span class="op" id="6208235">:=</span>&nbsp;<span class="ident" id="6208238"><a href="/gostd/encoding/xml/marshal.go.html#6208197">iface</a></span><span class="op" id="6208243">.</span><span class="op" id="6208244">(</span><span class="keyword" id="6208245">type</span><span class="op" id="6208249">)</span>&nbsp;<span class="op" id="6208251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208256">case</span>&nbsp;<span class="op" id="6208261">[</span><span class="op" id="6208262">]</span><span class="builtintype" id="6208263">byte</span><span class="op" id="6208267">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6208273"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6208274">.</span><span class="ident" id="6208275"><a href="/gostd/bufio/bufio.go.html#1368329">Write</a></span><span class="op" id="6208280">(</span><span class="ident" id="6208281"><a href="/gostd/encoding/xml/marshal.go.html#6208231">raw</a></span><span class="op" id="6208284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208290">continue</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208302">case</span>&nbsp;<span class="builtintype" id="6208307">string</span><span class="op" id="6208313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6208319"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6208320">.</span><span class="ident" id="6208321"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6208332">(</span><span class="ident" id="6208333"><a href="/gostd/encoding/xml/marshal.go.html#6208231">raw</a></span><span class="op" id="6208336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208342">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6208354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208359">case</span>&nbsp;<span class="ident" id="6208364"><a href="/gostd/encoding/xml/typeinfo.go.html#6232065">fElement</a></span><span class="op" id="6208372">,</span>&nbsp;<span class="ident" id="6208374"><a href="/gostd/encoding/xml/typeinfo.go.html#6232065">fElement</a></span>&nbsp;<span class="op" id="6208383">|</span>&nbsp;<span class="ident" id="6208385"><a href="/gostd/encoding/xml/typeinfo.go.html#6232137">fAny</a></span><span class="op" id="6208389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208394">if</span>&nbsp;<span class="ident" id="6208397">err</span>&nbsp;<span class="op" id="6208401">:=</span>&nbsp;<span class="ident" id="6208404"><a href="/gostd/encoding/xml/marshal.go.html#6205537">s</a></span><span class="op" id="6208405">.</span><span class="ident" id="6208406"><a href="/gostd/encoding/xml/marshal.go.html#6209754">trim</a></span><span class="op" id="6208410">(</span><span class="ident" id="6208411"><a href="/gostd/encoding/xml/marshal.go.html#6205593">finfo</a></span><span class="op" id="6208416">.</span><span class="ident" id="6208417"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6208424">)</span><span class="op" id="6208425">;</span>&nbsp;<span class="ident" id="6208427"><a href="/gostd/encoding/xml/marshal.go.html#6208397">err</a></span>&nbsp;<span class="op" id="6208431">!=</span>&nbsp;<span class="builtintype" id="6208434">nil</span>&nbsp;<span class="op" id="6208438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208444">return</span>&nbsp;<span class="ident" id="6208451"><a href="/gostd/encoding/xml/marshal.go.html#6208397">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6208458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208463">if</span>&nbsp;<span class="builtinfunc" id="6208466">len</span><span class="op" id="6208469">(</span><span class="ident" id="6208470"><a href="/gostd/encoding/xml/marshal.go.html#6205593">finfo</a></span><span class="op" id="6208475">.</span><span class="ident" id="6208476"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6208483">)</span>&nbsp;<span class="op" id="6208485">&gt;</span>&nbsp;<span class="builtinfunc" id="6208487">len</span><span class="op" id="6208490">(</span><span class="ident" id="6208491"><a href="/gostd/encoding/xml/marshal.go.html#6205537">s</a></span><span class="op" id="6208492">.</span><span class="ident" id="6208493"><a href="/gostd/encoding/xml/marshal.go.html#6209491">stack</a></span><span class="op" id="6208498">)</span>&nbsp;<span class="op" id="6208500">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208506">if</span>&nbsp;<span class="ident" id="6208509"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6208511">.</span><span class="ident" id="6208512"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6208516">(</span><span class="op" id="6208517">)</span>&nbsp;<span class="op" id="6208519">!=</span>&nbsp;<span class="ident" id="6208522"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6208529">.</span><span class="ident" id="6208530"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span>&nbsp;<span class="op" id="6208534">&amp;&amp;</span>&nbsp;<span class="ident" id="6208537"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6208539">.</span><span class="ident" id="6208540"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6208544">(</span><span class="op" id="6208545">)</span>&nbsp;<span class="op" id="6208547">!=</span>&nbsp;<span class="ident" id="6208550"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6208557">.</span><span class="ident" id="6208558"><a href="/gostd/reflect/type.go.html#2788041">Interface</a></span>&nbsp;<span class="op" id="6208568">||</span>&nbsp;<span class="op" id="6208571">!</span><span class="ident" id="6208572"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6208574">.</span><span class="ident" id="6208575"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="6208580">(</span><span class="op" id="6208581">)</span>&nbsp;<span class="op" id="6208583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208590">if</span>&nbsp;<span class="ident" id="6208593">err</span>&nbsp;<span class="op" id="6208597">:=</span>&nbsp;<span class="ident" id="6208600"><a href="/gostd/encoding/xml/marshal.go.html#6205537">s</a></span><span class="op" id="6208601">.</span><span class="ident" id="6208602"><a href="/gostd/encoding/xml/marshal.go.html#6210175">push</a></span><span class="op" id="6208606">(</span><span class="ident" id="6208607"><a href="/gostd/encoding/xml/marshal.go.html#6205593">finfo</a></span><span class="op" id="6208612">.</span><span class="ident" id="6208613"><a href="/gostd/encoding/xml/typeinfo.go.html#6232015">parents</a></span><span class="op" id="6208620">[</span><span class="builtinfunc" id="6208621">len</span><span class="op" id="6208624">(</span><span class="ident" id="6208625"><a href="/gostd/encoding/xml/marshal.go.html#6205537">s</a></span><span class="op" id="6208626">.</span><span class="ident" id="6208627"><a href="/gostd/encoding/xml/marshal.go.html#6209491">stack</a></span><span class="op" id="6208632">)</span><span class="op" id="6208633">:</span><span class="op" id="6208634">]</span><span class="op" id="6208635">)</span><span class="op" id="6208636">;</span>&nbsp;<span class="ident" id="6208638"><a href="/gostd/encoding/xml/marshal.go.html#6208593">err</a></span>&nbsp;<span class="op" id="6208642">!=</span>&nbsp;<span class="builtintype" id="6208645">nil</span>&nbsp;<span class="op" id="6208649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208657">return</span>&nbsp;<span class="ident" id="6208664"><a href="/gostd/encoding/xml/marshal.go.html#6208593">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6208673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6208679">}</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6208684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6208688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208692">if</span>&nbsp;<span class="ident" id="6208695">err</span>&nbsp;<span class="op" id="6208699">:=</span>&nbsp;<span class="ident" id="6208702"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6208703">.</span><span class="ident" id="6208704"><a href="/gostd/encoding/xml/marshal.go.html#6195980">marshalValue</a></span><span class="op" id="6208716">(</span><span class="ident" id="6208717"><a href="/gostd/encoding/xml/marshal.go.html#6205667">vf</a></span><span class="op" id="6208719">,</span>&nbsp;<span class="ident" id="6208721"><a href="/gostd/encoding/xml/marshal.go.html#6205593">finfo</a></span><span class="op" id="6208726">,</span>&nbsp;<span class="builtintype" id="6208728">nil</span><span class="op" id="6208731">)</span><span class="op" id="6208732">;</span>&nbsp;<span class="ident" id="6208734"><a href="/gostd/encoding/xml/marshal.go.html#6208695">err</a></span>&nbsp;<span class="op" id="6208738">!=</span>&nbsp;<span class="builtintype" id="6208741">nil</span>&nbsp;<span class="op" id="6208745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208750">return</span>&nbsp;<span class="ident" id="6208757"><a href="/gostd/encoding/xml/marshal.go.html#6208695">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6208763">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6208766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6208769"><a href="/gostd/encoding/xml/marshal.go.html#6205537">s</a></span><span class="op" id="6208770">.</span><span class="ident" id="6208771"><a href="/gostd/encoding/xml/marshal.go.html#6209754">trim</a></span><span class="op" id="6208775">(</span><span class="builtintype" id="6208776">nil</span><span class="op" id="6208779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208782">return</span>&nbsp;<span class="ident" id="6208789"><a href="/gostd/encoding/xml/marshal.go.html#6205466">p</a></span><span class="op" id="6208790">.</span><span class="ident" id="6208791"><a href="/gostd/encoding/xml/marshal.go.html#6208879">cachedWriteError</a></span><span class="op" id="6208807">(</span><span class="op" id="6208808">)</span><br>
<span class="lineno"></span><span class="op" id="6208810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="6208813">//&nbsp;return&nbsp;the&nbsp;bufio&nbsp;Writer&#39;s&nbsp;cached&nbsp;write&nbsp;error</span><br>
<span class="lineno"></span><span class="keyword" id="6208861">func</span>&nbsp;<span class="op" id="6208866">(</span><span class="ident" id="6208867">p</span>&nbsp;<span class="op" id="6208869">*</span><span class="ident" id="6208870"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6208877">)</span>&nbsp;<span class="ident" id="6208879">cachedWriteError</span><span class="op" id="6208895">(</span><span class="op" id="6208896">)</span>&nbsp;<span class="builtintype" id="6208898">error</span>&nbsp;<span class="op" id="6208904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6208907">_</span><span class="op" id="6208908">,</span>&nbsp;<span class="ident" id="6208910">err</span>&nbsp;<span class="op" id="6208914">:=</span>&nbsp;<span class="ident" id="6208917"><a href="/gostd/encoding/xml/marshal.go.html#6208867">p</a></span><span class="op" id="6208918">.</span><span class="ident" id="6208919"><a href="/gostd/bufio/bufio.go.html#1368329">Write</a></span><span class="op" id="6208924">(</span><span class="builtintype" id="6208925">nil</span><span class="op" id="6208928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208931">return</span>&nbsp;<span class="ident" id="6208938"><a href="/gostd/encoding/xml/marshal.go.html#6208910">err</a></span><br>
<span class="lineno"></span><span class="op" id="6208942">}</span><br>
<span class="lineno">845</span><br>
<span class="lineno"></span><span class="keyword" id="6208945">func</span>&nbsp;<span class="op" id="6208950">(</span><span class="ident" id="6208951">p</span>&nbsp;<span class="op" id="6208953">*</span><span class="ident" id="6208954"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><span class="op" id="6208961">)</span>&nbsp;<span class="ident" id="6208963">writeIndent</span><span class="op" id="6208974">(</span><span class="ident" id="6208975">depthDelta</span>&nbsp;<span class="builtintype" id="6208986">int</span><span class="op" id="6208989">)</span>&nbsp;<span class="op" id="6208991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6208994">if</span>&nbsp;<span class="builtinfunc" id="6208997">len</span><span class="op" id="6209000">(</span><span class="ident" id="6209001"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209002">.</span><span class="ident" id="6209003"><a href="/gostd/encoding/xml/marshal.go.html#6193344">prefix</a></span><span class="op" id="6209009">)</span>&nbsp;<span class="op" id="6209011">==</span>&nbsp;<span class="num" id="6209014">0</span>&nbsp;<span class="op" id="6209016">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6209019">len</span><span class="op" id="6209022">(</span><span class="ident" id="6209023"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209024">.</span><span class="ident" id="6209025"><a href="/gostd/encoding/xml/marshal.go.html#6193325">indent</a></span><span class="op" id="6209031">)</span>&nbsp;<span class="op" id="6209033">==</span>&nbsp;<span class="num" id="6209036">0</span>&nbsp;<span class="op" id="6209038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209042">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209050">}</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209053">if</span>&nbsp;<span class="ident" id="6209056"><a href="/gostd/encoding/xml/marshal.go.html#6208975">depthDelta</a></span>&nbsp;<span class="op" id="6209067">&lt;</span>&nbsp;<span class="num" id="6209069">0</span>&nbsp;<span class="op" id="6209071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209075"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209076">.</span><span class="ident" id="6209077"><a href="/gostd/encoding/xml/marshal.go.html#6193363">depth</a></span><span class="op" id="6209082">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209087">if</span>&nbsp;<span class="ident" id="6209090"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209091">.</span><span class="ident" id="6209092"><a href="/gostd/encoding/xml/marshal.go.html#6193379">indentedIn</a></span>&nbsp;<span class="op" id="6209103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209108"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209109">.</span><span class="ident" id="6209110"><a href="/gostd/encoding/xml/marshal.go.html#6193379">indentedIn</a></span>&nbsp;<span class="op" id="6209121">=</span>&nbsp;<span class="builtintype" id="6209123">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209132">return</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209145"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209146">.</span><span class="ident" id="6209147"><a href="/gostd/encoding/xml/marshal.go.html#6193379">indentedIn</a></span>&nbsp;<span class="op" id="6209158">=</span>&nbsp;<span class="builtintype" id="6209160">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209167">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209170">if</span>&nbsp;<span class="ident" id="6209173"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209174">.</span><span class="ident" id="6209175"><a href="/gostd/encoding/xml/marshal.go.html#6193396">putNewline</a></span>&nbsp;<span class="op" id="6209186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209190"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209191">.</span><span class="ident" id="6209192"><a href="/gostd/bufio/bufio.go.html#1368805">WriteByte</a></span><span class="op" id="6209201">(</span><span class="string" id="6209202">&#39;\n&#39;</span><span class="op" id="6209206">)</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209209">}</span>&nbsp;<span class="keyword" id="6209211">else</span>&nbsp;<span class="op" id="6209216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209220"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209221">.</span><span class="ident" id="6209222"><a href="/gostd/encoding/xml/marshal.go.html#6193396">putNewline</a></span>&nbsp;<span class="op" id="6209233">=</span>&nbsp;<span class="builtintype" id="6209235">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209244">if</span>&nbsp;<span class="builtinfunc" id="6209247">len</span><span class="op" id="6209250">(</span><span class="ident" id="6209251"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209252">.</span><span class="ident" id="6209253"><a href="/gostd/encoding/xml/marshal.go.html#6193344">prefix</a></span><span class="op" id="6209259">)</span>&nbsp;<span class="op" id="6209261">&gt;</span>&nbsp;<span class="num" id="6209263">0</span>&nbsp;<span class="op" id="6209265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209269"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209270">.</span><span class="ident" id="6209271"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6209282">(</span><span class="ident" id="6209283"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209284">.</span><span class="ident" id="6209285"><a href="/gostd/encoding/xml/marshal.go.html#6193344">prefix</a></span><span class="op" id="6209291">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209297">if</span>&nbsp;<span class="builtinfunc" id="6209300">len</span><span class="op" id="6209303">(</span><span class="ident" id="6209304"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209305">.</span><span class="ident" id="6209306"><a href="/gostd/encoding/xml/marshal.go.html#6193325">indent</a></span><span class="op" id="6209312">)</span>&nbsp;<span class="op" id="6209314">&gt;</span>&nbsp;<span class="num" id="6209316">0</span>&nbsp;<span class="op" id="6209318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209322">for</span>&nbsp;<span class="ident" id="6209326">i</span>&nbsp;<span class="op" id="6209328">:=</span>&nbsp;<span class="num" id="6209331">0</span><span class="op" id="6209332">;</span>&nbsp;<span class="ident" id="6209334"><a href="/gostd/encoding/xml/marshal.go.html#6209326">i</a></span>&nbsp;<span class="op" id="6209336">&lt;</span>&nbsp;<span class="ident" id="6209338"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209339">.</span><span class="ident" id="6209340"><a href="/gostd/encoding/xml/marshal.go.html#6193363">depth</a></span><span class="op" id="6209345">;</span>&nbsp;<span class="ident" id="6209347"><a href="/gostd/encoding/xml/marshal.go.html#6209326">i</a></span><span class="op" id="6209348">++</span>&nbsp;<span class="op" id="6209351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209356"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209357">.</span><span class="ident" id="6209358"><a href="/gostd/bufio/bufio.go.html#1369779">WriteString</a></span><span class="op" id="6209369">(</span><span class="ident" id="6209370"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209371">.</span><span class="ident" id="6209372"><a href="/gostd/encoding/xml/marshal.go.html#6193325">indent</a></span><span class="op" id="6209378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209382">}</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209388">if</span>&nbsp;<span class="ident" id="6209391"><a href="/gostd/encoding/xml/marshal.go.html#6208975">depthDelta</a></span>&nbsp;<span class="op" id="6209402">&gt;</span>&nbsp;<span class="num" id="6209404">0</span>&nbsp;<span class="op" id="6209406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209410"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209411">.</span><span class="ident" id="6209412"><a href="/gostd/encoding/xml/marshal.go.html#6193363">depth</a></span><span class="op" id="6209417">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209422"><a href="/gostd/encoding/xml/marshal.go.html#6208951">p</a></span><span class="op" id="6209423">.</span><span class="ident" id="6209424"><a href="/gostd/encoding/xml/marshal.go.html#6193379">indentedIn</a></span>&nbsp;<span class="op" id="6209435">=</span>&nbsp;<span class="builtintype" id="6209437">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209443">}</span><br>
<span class="lineno">875</span><span class="op" id="6209445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6209448">type</span>&nbsp;<span class="ident" id="6209453">parentStack</span>&nbsp;<span class="keyword" id="6209465">struct</span>&nbsp;<span class="op" id="6209472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209475">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209481">*</span><span class="ident" id="6209482"><a href="/gostd/encoding/xml/marshal.go.html#6193255">printer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209491">stack</span>&nbsp;<span class="op" id="6209497">[</span><span class="op" id="6209498">]</span><span class="builtintype" id="6209499">string</span><br>
<span class="lineno">880</span><span class="op" id="6209506">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6209509">//&nbsp;trim&nbsp;updates&nbsp;the&nbsp;XML&nbsp;context&nbsp;to&nbsp;match&nbsp;the&nbsp;longest&nbsp;common&nbsp;prefix&nbsp;of&nbsp;the&nbsp;stack</span><br>
<span class="lineno"></span><span class="comment" id="6209589">//&nbsp;and&nbsp;the&nbsp;given&nbsp;parents.&nbsp;&nbsp;A&nbsp;closing&nbsp;tag&nbsp;will&nbsp;be&nbsp;written&nbsp;for&nbsp;every&nbsp;parent</span><br>
<span class="lineno"></span><span class="comment" id="6209663">//&nbsp;popped.&nbsp;&nbsp;Passing&nbsp;a&nbsp;zero&nbsp;slice&nbsp;or&nbsp;nil&nbsp;will&nbsp;close&nbsp;all&nbsp;the&nbsp;elements.</span><br>
<span class="lineno">885</span><span class="keyword" id="6209732">func</span>&nbsp;<span class="op" id="6209737">(</span><span class="ident" id="6209738">s</span>&nbsp;<span class="op" id="6209740">*</span><span class="ident" id="6209741"><a href="/gostd/encoding/xml/marshal.go.html#6209453">parentStack</a></span><span class="op" id="6209752">)</span>&nbsp;<span class="ident" id="6209754">trim</span><span class="op" id="6209758">(</span><span class="ident" id="6209759">parents</span>&nbsp;<span class="op" id="6209767">[</span><span class="op" id="6209768">]</span><span class="builtintype" id="6209769">string</span><span class="op" id="6209775">)</span>&nbsp;<span class="builtintype" id="6209777">error</span>&nbsp;<span class="op" id="6209783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6209786">split</span>&nbsp;<span class="op" id="6209792">:=</span>&nbsp;<span class="num" id="6209795">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209798">for</span>&nbsp;<span class="op" id="6209802">;</span>&nbsp;<span class="ident" id="6209804"><a href="/gostd/encoding/xml/marshal.go.html#6209786">split</a></span>&nbsp;<span class="op" id="6209810">&lt;</span>&nbsp;<span class="builtinfunc" id="6209812">len</span><span class="op" id="6209815">(</span><span class="ident" id="6209816"><a href="/gostd/encoding/xml/marshal.go.html#6209759">parents</a></span><span class="op" id="6209823">)</span>&nbsp;<span class="op" id="6209825">&amp;&amp;</span>&nbsp;<span class="ident" id="6209828"><a href="/gostd/encoding/xml/marshal.go.html#6209786">split</a></span>&nbsp;<span class="op" id="6209834">&lt;</span>&nbsp;<span class="builtinfunc" id="6209836">len</span><span class="op" id="6209839">(</span><span class="ident" id="6209840"><a href="/gostd/encoding/xml/marshal.go.html#6209738">s</a></span><span class="op" id="6209841">.</span><span class="ident" id="6209842"><a href="/gostd/encoding/xml/marshal.go.html#6209491">stack</a></span><span class="op" id="6209847">)</span><span class="op" id="6209848">;</span>&nbsp;<span class="ident" id="6209850"><a href="/gostd/encoding/xml/marshal.go.html#6209786">split</a></span><span class="op" id="6209855">++</span>&nbsp;<span class="op" id="6209858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209862">if</span>&nbsp;<span class="ident" id="6209865"><a href="/gostd/encoding/xml/marshal.go.html#6209759">parents</a></span><span class="op" id="6209872">[</span><span class="ident" id="6209873"><a href="/gostd/encoding/xml/marshal.go.html#6209786">split</a></span><span class="op" id="6209878">]</span>&nbsp;<span class="op" id="6209880">!=</span>&nbsp;<span class="ident" id="6209883"><a href="/gostd/encoding/xml/marshal.go.html#6209738">s</a></span><span class="op" id="6209884">.</span><span class="ident" id="6209885"><a href="/gostd/encoding/xml/marshal.go.html#6209491">stack</a></span><span class="op" id="6209890">[</span><span class="ident" id="6209891"><a href="/gostd/encoding/xml/marshal.go.html#6209786">split</a></span><span class="op" id="6209896">]</span>&nbsp;<span class="op" id="6209898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209903">break</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6209914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209917">for</span>&nbsp;<span class="ident" id="6209921">i</span>&nbsp;<span class="op" id="6209923">:=</span>&nbsp;<span class="builtinfunc" id="6209926">len</span><span class="op" id="6209929">(</span><span class="ident" id="6209930"><a href="/gostd/encoding/xml/marshal.go.html#6209738">s</a></span><span class="op" id="6209931">.</span><span class="ident" id="6209932"><a href="/gostd/encoding/xml/marshal.go.html#6209491">stack</a></span><span class="op" id="6209937">)</span>&nbsp;<span class="op" id="6209939">-</span>&nbsp;<span class="num" id="6209941">1</span><span class="op" id="6209942">;</span>&nbsp;<span class="ident" id="6209944"><a href="/gostd/encoding/xml/marshal.go.html#6209921">i</a></span>&nbsp;<span class="op" id="6209946">&gt;=</span>&nbsp;<span class="ident" id="6209949"><a href="/gostd/encoding/xml/marshal.go.html#6209786">split</a></span><span class="op" id="6209954">;</span>&nbsp;<span class="ident" id="6209956"><a href="/gostd/encoding/xml/marshal.go.html#6209921">i</a></span><span class="op" id="6209957">--</span>&nbsp;<span class="op" id="6209960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6209964">if</span>&nbsp;<span class="ident" id="6209967">err</span>&nbsp;<span class="op" id="6209971">:=</span>&nbsp;<span class="ident" id="6209974"><a href="/gostd/encoding/xml/marshal.go.html#6209738">s</a></span><span class="op" id="6209975">.</span><span class="ident" id="6209976"><a href="/gostd/encoding/xml/marshal.go.html#6209475">p</a></span><span class="op" id="6209977">.</span><span class="ident" id="6209978"><a href="/gostd/encoding/xml/marshal.go.html#6203593">writeEnd</a></span><span class="op" id="6209986">(</span><span class="ident" id="6209987"><a href="/gostd/encoding/xml/xml.go.html#6241995">Name</a></span><span class="op" id="6209991">{</span><span class="ident" id="6209992"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6209997">:</span>&nbsp;<span class="ident" id="6209999"><a href="/gostd/encoding/xml/marshal.go.html#6209738">s</a></span><span class="op" id="6210000">.</span><span class="ident" id="6210001"><a href="/gostd/encoding/xml/marshal.go.html#6209491">stack</a></span><span class="op" id="6210006">[</span><span class="ident" id="6210007"><a href="/gostd/encoding/xml/marshal.go.html#6209921">i</a></span><span class="op" id="6210008">]</span><span class="op" id="6210009">}</span><span class="op" id="6210010">)</span><span class="op" id="6210011">;</span>&nbsp;<span class="ident" id="6210013"><a href="/gostd/encoding/xml/marshal.go.html#6209967">err</a></span>&nbsp;<span class="op" id="6210017">!=</span>&nbsp;<span class="builtintype" id="6210020">nil</span>&nbsp;<span class="op" id="6210024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210029">return</span>&nbsp;<span class="ident" id="6210036"><a href="/gostd/encoding/xml/marshal.go.html#6209967">err</a></span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6210042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6210045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210048"><a href="/gostd/encoding/xml/marshal.go.html#6209738">s</a></span><span class="op" id="6210049">.</span><span class="ident" id="6210050"><a href="/gostd/encoding/xml/marshal.go.html#6209491">stack</a></span>&nbsp;<span class="op" id="6210056">=</span>&nbsp;<span class="ident" id="6210058"><a href="/gostd/encoding/xml/marshal.go.html#6209759">parents</a></span><span class="op" id="6210065">[</span><span class="op" id="6210066">:</span><span class="ident" id="6210067"><a href="/gostd/encoding/xml/marshal.go.html#6209786">split</a></span><span class="op" id="6210072">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210075">return</span>&nbsp;<span class="builtintype" id="6210082">nil</span><br>
<span class="lineno"></span><span class="op" id="6210086">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span><span class="comment" id="6210089">//&nbsp;push&nbsp;adds&nbsp;parent&nbsp;elements&nbsp;to&nbsp;the&nbsp;stack&nbsp;and&nbsp;writes&nbsp;open&nbsp;tags.</span><br>
<span class="lineno"></span><span class="keyword" id="6210153">func</span>&nbsp;<span class="op" id="6210158">(</span><span class="ident" id="6210159">s</span>&nbsp;<span class="op" id="6210161">*</span><span class="ident" id="6210162"><a href="/gostd/encoding/xml/marshal.go.html#6209453">parentStack</a></span><span class="op" id="6210173">)</span>&nbsp;<span class="ident" id="6210175">push</span><span class="op" id="6210179">(</span><span class="ident" id="6210180">parents</span>&nbsp;<span class="op" id="6210188">[</span><span class="op" id="6210189">]</span><span class="builtintype" id="6210190">string</span><span class="op" id="6210196">)</span>&nbsp;<span class="builtintype" id="6210198">error</span>&nbsp;<span class="op" id="6210204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210207">for</span>&nbsp;<span class="ident" id="6210211">i</span>&nbsp;<span class="op" id="6210213">:=</span>&nbsp;<span class="num" id="6210216">0</span><span class="op" id="6210217">;</span>&nbsp;<span class="ident" id="6210219"><a href="/gostd/encoding/xml/marshal.go.html#6210211">i</a></span>&nbsp;<span class="op" id="6210221">&lt;</span>&nbsp;<span class="builtinfunc" id="6210223">len</span><span class="op" id="6210226">(</span><span class="ident" id="6210227"><a href="/gostd/encoding/xml/marshal.go.html#6210180">parents</a></span><span class="op" id="6210234">)</span><span class="op" id="6210235">;</span>&nbsp;<span class="ident" id="6210237"><a href="/gostd/encoding/xml/marshal.go.html#6210211">i</a></span><span class="op" id="6210238">++</span>&nbsp;<span class="op" id="6210241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210245">if</span>&nbsp;<span class="ident" id="6210248">err</span>&nbsp;<span class="op" id="6210252">:=</span>&nbsp;<span class="ident" id="6210255"><a href="/gostd/encoding/xml/marshal.go.html#6210159">s</a></span><span class="op" id="6210256">.</span><span class="ident" id="6210257"><a href="/gostd/encoding/xml/marshal.go.html#6209475">p</a></span><span class="op" id="6210258">.</span><span class="ident" id="6210259"><a href="/gostd/encoding/xml/marshal.go.html#6202852">writeStart</a></span><span class="op" id="6210269">(</span><span class="op" id="6210270">&amp;</span><span class="ident" id="6210271"><a href="/gostd/encoding/xml/xml.go.html#6242359">StartElement</a></span><span class="op" id="6210283">{</span><span class="ident" id="6210284"><a href="/gostd/encoding/xml/xml.go.html#6242382">Name</a></span><span class="op" id="6210288">:</span>&nbsp;<span class="ident" id="6210290"><a href="/gostd/encoding/xml/xml.go.html#6241995">Name</a></span><span class="op" id="6210294">{</span><span class="ident" id="6210295"><a href="/gostd/encoding/xml/xml.go.html#6242017">Local</a></span><span class="op" id="6210300">:</span>&nbsp;<span class="ident" id="6210302"><a href="/gostd/encoding/xml/marshal.go.html#6210180">parents</a></span><span class="op" id="6210309">[</span><span class="ident" id="6210310"><a href="/gostd/encoding/xml/marshal.go.html#6210211">i</a></span><span class="op" id="6210311">]</span><span class="op" id="6210312">}</span><span class="op" id="6210313">}</span><span class="op" id="6210314">)</span><span class="op" id="6210315">;</span>&nbsp;<span class="ident" id="6210317"><a href="/gostd/encoding/xml/marshal.go.html#6210248">err</a></span>&nbsp;<span class="op" id="6210321">!=</span>&nbsp;<span class="builtintype" id="6210324">nil</span>&nbsp;<span class="op" id="6210328">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210333">return</span>&nbsp;<span class="ident" id="6210340"><a href="/gostd/encoding/xml/marshal.go.html#6210248">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6210346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6210349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210352"><a href="/gostd/encoding/xml/marshal.go.html#6210159">s</a></span><span class="op" id="6210353">.</span><span class="ident" id="6210354"><a href="/gostd/encoding/xml/marshal.go.html#6209491">stack</a></span>&nbsp;<span class="op" id="6210360">=</span>&nbsp;<span class="builtinfunc" id="6210362">append</span><span class="op" id="6210368">(</span><span class="ident" id="6210369"><a href="/gostd/encoding/xml/marshal.go.html#6210159">s</a></span><span class="op" id="6210370">.</span><span class="ident" id="6210371"><a href="/gostd/encoding/xml/marshal.go.html#6209491">stack</a></span><span class="op" id="6210376">,</span>&nbsp;<span class="ident" id="6210378"><a href="/gostd/encoding/xml/marshal.go.html#6210180">parents</a></span><span class="op" id="6210385">...</span><span class="op" id="6210388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210391">return</span>&nbsp;<span class="builtintype" id="6210398">nil</span><br>
<span class="lineno">910</span><span class="op" id="6210402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6210405">//&nbsp;A&nbsp;MarshalXMLError&nbsp;is&nbsp;returned&nbsp;when&nbsp;Marshal&nbsp;encounters&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="6210469">//&nbsp;that&nbsp;cannot&nbsp;be&nbsp;converted&nbsp;into&nbsp;XML.</span><br>
<span class="lineno"></span><span class="keyword" id="6210507">type</span>&nbsp;<span class="ident" id="6210512">UnsupportedTypeError</span>&nbsp;<span class="keyword" id="6210533">struct</span>&nbsp;<span class="op" id="6210540">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6210543">Type</span>&nbsp;<span class="ident" id="6210548"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210555">.</span><span class="ident" id="6210556"><a href="/gostd/reflect/type.go.html#2781467">Type</a></span><br>
<span class="lineno"></span><span class="op" id="6210561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6210564">func</span>&nbsp;<span class="op" id="6210569">(</span><span class="ident" id="6210570">e</span>&nbsp;<span class="op" id="6210572">*</span><span class="ident" id="6210573"><a href="/gostd/encoding/xml/marshal.go.html#6210512">UnsupportedTypeError</a></span><span class="op" id="6210593">)</span>&nbsp;<span class="ident" id="6210595">Error</span><span class="op" id="6210600">(</span><span class="op" id="6210601">)</span>&nbsp;<span class="builtintype" id="6210603">string</span>&nbsp;<span class="op" id="6210610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210613">return</span>&nbsp;<span class="string" id="6210620">&#34;xml:&nbsp;unsupported&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="6210646">+</span>&nbsp;<span class="ident" id="6210648"><a href="/gostd/encoding/xml/marshal.go.html#6210570">e</a></span><span class="op" id="6210649">.</span><span class="ident" id="6210650"><a href="/gostd/encoding/xml/marshal.go.html#6210543">Type</a></span><span class="op" id="6210654">.</span><span class="ident" id="6210655"><a href="/gostd/reflect/type.go.html#2783552">String</a></span><span class="op" id="6210661">(</span><span class="op" id="6210662">)</span><br>
<span class="lineno">920</span><span class="op" id="6210664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6210667">func</span>&nbsp;<span class="ident" id="6210672">isEmptyValue</span><span class="op" id="6210684">(</span><span class="ident" id="6210685">v</span>&nbsp;<span class="ident" id="6210687"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210694">.</span><span class="ident" id="6210695"><a href="/gostd/reflect/value.go.html#2833557">Value</a></span><span class="op" id="6210700">)</span>&nbsp;<span class="builtintype" id="6210702">bool</span>&nbsp;<span class="op" id="6210707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210710">switch</span>&nbsp;<span class="ident" id="6210717"><a href="/gostd/encoding/xml/marshal.go.html#6210685">v</a></span><span class="op" id="6210718">.</span><span class="ident" id="6210719"><a href="/gostd/reflect/value.go.html#2861487">Kind</a></span><span class="op" id="6210723">(</span><span class="op" id="6210724">)</span>&nbsp;<span class="op" id="6210726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210729">case</span>&nbsp;<span class="ident" id="6210734"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210741">.</span><span class="ident" id="6210742"><a href="/gostd/reflect/type.go.html#2788022">Array</a></span><span class="op" id="6210747">,</span>&nbsp;<span class="ident" id="6210749"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210756">.</span><span class="ident" id="6210757"><a href="/gostd/reflect/type.go.html#2788052">Map</a></span><span class="op" id="6210760">,</span>&nbsp;<span class="ident" id="6210762"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210769">.</span><span class="ident" id="6210770"><a href="/gostd/reflect/type.go.html#2788062">Slice</a></span><span class="op" id="6210775">,</span>&nbsp;<span class="ident" id="6210777"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210784">.</span><span class="ident" id="6210785"><a href="/gostd/reflect/type.go.html#2788069">String</a></span><span class="op" id="6210791">:</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210795">return</span>&nbsp;<span class="ident" id="6210802"><a href="/gostd/encoding/xml/marshal.go.html#6210685">v</a></span><span class="op" id="6210803">.</span><span class="ident" id="6210804"><a href="/gostd/reflect/value.go.html#2861631">Len</a></span><span class="op" id="6210807">(</span><span class="op" id="6210808">)</span>&nbsp;<span class="op" id="6210810">==</span>&nbsp;<span class="num" id="6210813">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210816">case</span>&nbsp;<span class="ident" id="6210821"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210828">.</span><span class="ident" id="6210829"><a href="/gostd/reflect/type.go.html#2787897">Bool</a></span><span class="op" id="6210833">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210837">return</span>&nbsp;<span class="op" id="6210844">!</span><span class="ident" id="6210845"><a href="/gostd/encoding/xml/marshal.go.html#6210685">v</a></span><span class="op" id="6210846">.</span><span class="ident" id="6210847"><a href="/gostd/reflect/value.go.html#2839754">Bool</a></span><span class="op" id="6210851">(</span><span class="op" id="6210852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210855">case</span>&nbsp;<span class="ident" id="6210860"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210867">.</span><span class="ident" id="6210868"><a href="/gostd/reflect/type.go.html#2787903">Int</a></span><span class="op" id="6210871">,</span>&nbsp;<span class="ident" id="6210873"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210880">.</span><span class="ident" id="6210881"><a href="/gostd/reflect/type.go.html#2787908">Int8</a></span><span class="op" id="6210885">,</span>&nbsp;<span class="ident" id="6210887"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210894">.</span><span class="ident" id="6210895"><a href="/gostd/reflect/type.go.html#2787914">Int16</a></span><span class="op" id="6210900">,</span>&nbsp;<span class="ident" id="6210902"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210909">.</span><span class="ident" id="6210910"><a href="/gostd/reflect/type.go.html#2787921">Int32</a></span><span class="op" id="6210915">,</span>&nbsp;<span class="ident" id="6210917"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210924">.</span><span class="ident" id="6210925"><a href="/gostd/reflect/type.go.html#2787928">Int64</a></span><span class="op" id="6210930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210934">return</span>&nbsp;<span class="ident" id="6210941"><a href="/gostd/encoding/xml/marshal.go.html#6210685">v</a></span><span class="op" id="6210942">.</span><span class="ident" id="6210943"><a href="/gostd/reflect/value.go.html#2857929">Int</a></span><span class="op" id="6210946">(</span><span class="op" id="6210947">)</span>&nbsp;<span class="op" id="6210949">==</span>&nbsp;<span class="num" id="6210952">0</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6210955">case</span>&nbsp;<span class="ident" id="6210960"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210967">.</span><span class="ident" id="6210968"><a href="/gostd/reflect/type.go.html#2787935">Uint</a></span><span class="op" id="6210972">,</span>&nbsp;<span class="ident" id="6210974"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210981">.</span><span class="ident" id="6210982"><a href="/gostd/reflect/type.go.html#2787941">Uint8</a></span><span class="op" id="6210987">,</span>&nbsp;<span class="ident" id="6210989"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6210996">.</span><span class="ident" id="6210997"><a href="/gostd/reflect/type.go.html#2787948">Uint16</a></span><span class="op" id="6211003">,</span>&nbsp;<span class="ident" id="6211005"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6211012">.</span><span class="ident" id="6211013"><a href="/gostd/reflect/type.go.html#2787956">Uint32</a></span><span class="op" id="6211019">,</span>&nbsp;<span class="ident" id="6211021"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6211028">.</span><span class="ident" id="6211029"><a href="/gostd/reflect/type.go.html#2787964">Uint64</a></span><span class="op" id="6211035">,</span>&nbsp;<span class="ident" id="6211037"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6211044">.</span><span class="ident" id="6211045"><a href="/gostd/reflect/type.go.html#2787972">Uintptr</a></span><span class="op" id="6211052">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6211056">return</span>&nbsp;<span class="ident" id="6211063"><a href="/gostd/encoding/xml/marshal.go.html#6210685">v</a></span><span class="op" id="6211064">.</span><span class="ident" id="6211065"><a href="/gostd/reflect/value.go.html#2881772">Uint</a></span><span class="op" id="6211069">(</span><span class="op" id="6211070">)</span>&nbsp;<span class="op" id="6211072">==</span>&nbsp;<span class="num" id="6211075">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6211078">case</span>&nbsp;<span class="ident" id="6211083"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6211090">.</span><span class="ident" id="6211091"><a href="/gostd/reflect/type.go.html#2787981">Float32</a></span><span class="op" id="6211098">,</span>&nbsp;<span class="ident" id="6211100"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6211107">.</span><span class="ident" id="6211108"><a href="/gostd/reflect/type.go.html#2787990">Float64</a></span><span class="op" id="6211115">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6211119">return</span>&nbsp;<span class="ident" id="6211126"><a href="/gostd/encoding/xml/marshal.go.html#6210685">v</a></span><span class="op" id="6211127">.</span><span class="ident" id="6211128"><a href="/gostd/reflect/value.go.html#2856007">Float</a></span><span class="op" id="6211133">(</span><span class="op" id="6211134">)</span>&nbsp;<span class="op" id="6211136">==</span>&nbsp;<span class="num" id="6211139">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6211142">case</span>&nbsp;<span class="ident" id="6211147"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6211154">.</span><span class="ident" id="6211155"><a href="/gostd/reflect/type.go.html#2788041">Interface</a></span><span class="op" id="6211164">,</span>&nbsp;<span class="ident" id="6211166"><a href="/gostd/encoding/xml/marshal.go.html#6184718">reflect</a></span><span class="op" id="6211173">.</span><span class="ident" id="6211174"><a href="/gostd/reflect/type.go.html#2788057">Ptr</a></span><span class="op" id="6211177">:</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6211181">return</span>&nbsp;<span class="ident" id="6211188"><a href="/gostd/encoding/xml/marshal.go.html#6210685">v</a></span><span class="op" id="6211189">.</span><span class="ident" id="6211190"><a href="/gostd/reflect/value.go.html#2860565">IsNil</a></span><span class="op" id="6211195">(</span><span class="op" id="6211196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6211199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6211202">return</span>&nbsp;<span class="builtintype" id="6211209">false</span><br>
<span class="lineno"></span><span class="op" id="6211215">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
