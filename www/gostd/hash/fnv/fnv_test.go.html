<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/fnv</h2>
<ul>
<li><a href="/gostd/hash/fnv/fnv.go.html">fnv.go</a></li>
<li><a href="/gostd/hash/fnv/fnv_test.go.html">fnv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6805312">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6805367">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6805421">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6805472">package</span>&nbsp;<span class="ident" id="6805480">fnv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6805485">import</span>&nbsp;<span class="op" id="6805492">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6805495">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6805504">&#34;encoding/binary&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6805523">&#34;hash&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6805531">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6805541">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6805544">type</span>&nbsp;<span class="ident" id="6805549">golden</span>&nbsp;<span class="keyword" id="6805556">struct</span>&nbsp;<span class="op" id="6805563">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6805566">sum</span>&nbsp;&nbsp;<span class="op" id="6805571">[</span><span class="op" id="6805572">]</span><span class="builtintype" id="6805573">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6805579">text</span>&nbsp;<span class="builtintype" id="6805584">string</span><br>
<span class="lineno"></span><span class="op" id="6805591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6805594">var</span>&nbsp;<span class="ident" id="6805598">golden32</span>&nbsp;<span class="op" id="6805607">=</span>&nbsp;<span class="op" id="6805609">[</span><span class="op" id="6805610">]</span><span class="ident" id="6805611">golden</span><span class="op" id="6805617">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6805620">{</span><span class="op" id="6805621">[</span><span class="op" id="6805622">]</span><span class="builtintype" id="6805623">byte</span><span class="op" id="6805627">{</span><span class="num" id="6805628">0x81</span><span class="op" id="6805632">,</span>&nbsp;<span class="num" id="6805634">0x1c</span><span class="op" id="6805638">,</span>&nbsp;<span class="num" id="6805640">0x9d</span><span class="op" id="6805644">,</span>&nbsp;<span class="num" id="6805646">0xc5</span><span class="op" id="6805650">}</span><span class="op" id="6805651">,</span>&nbsp;<span class="string" id="6805653">&#34;&#34;</span><span class="op" id="6805655">}</span><span class="op" id="6805656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6805659">{</span><span class="op" id="6805660">[</span><span class="op" id="6805661">]</span><span class="builtintype" id="6805662">byte</span><span class="op" id="6805666">{</span><span class="num" id="6805667">0x05</span><span class="op" id="6805671">,</span>&nbsp;<span class="num" id="6805673">0x0c</span><span class="op" id="6805677">,</span>&nbsp;<span class="num" id="6805679">0x5d</span><span class="op" id="6805683">,</span>&nbsp;<span class="num" id="6805685">0x7e</span><span class="op" id="6805689">}</span><span class="op" id="6805690">,</span>&nbsp;<span class="string" id="6805692">&#34;a&#34;</span><span class="op" id="6805695">}</span><span class="op" id="6805696">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6805699">{</span><span class="op" id="6805700">[</span><span class="op" id="6805701">]</span><span class="builtintype" id="6805702">byte</span><span class="op" id="6805706">{</span><span class="num" id="6805707">0x70</span><span class="op" id="6805711">,</span>&nbsp;<span class="num" id="6805713">0x77</span><span class="op" id="6805717">,</span>&nbsp;<span class="num" id="6805719">0x2d</span><span class="op" id="6805723">,</span>&nbsp;<span class="num" id="6805725">0x38</span><span class="op" id="6805729">}</span><span class="op" id="6805730">,</span>&nbsp;<span class="string" id="6805732">&#34;ab&#34;</span><span class="op" id="6805736">}</span><span class="op" id="6805737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6805740">{</span><span class="op" id="6805741">[</span><span class="op" id="6805742">]</span><span class="builtintype" id="6805743">byte</span><span class="op" id="6805747">{</span><span class="num" id="6805748">0x43</span><span class="op" id="6805752">,</span>&nbsp;<span class="num" id="6805754">0x9c</span><span class="op" id="6805758">,</span>&nbsp;<span class="num" id="6805760">0x2f</span><span class="op" id="6805764">,</span>&nbsp;<span class="num" id="6805766">0x4b</span><span class="op" id="6805770">}</span><span class="op" id="6805771">,</span>&nbsp;<span class="string" id="6805773">&#34;abc&#34;</span><span class="op" id="6805778">}</span><span class="op" id="6805779">,</span><br>
<span class="lineno"></span><span class="op" id="6805781">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6805784">var</span>&nbsp;<span class="ident" id="6805788">golden32a</span>&nbsp;<span class="op" id="6805798">=</span>&nbsp;<span class="op" id="6805800">[</span><span class="op" id="6805801">]</span><span class="ident" id="6805802">golden</span><span class="op" id="6805808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6805811">{</span><span class="op" id="6805812">[</span><span class="op" id="6805813">]</span><span class="builtintype" id="6805814">byte</span><span class="op" id="6805818">{</span><span class="num" id="6805819">0x81</span><span class="op" id="6805823">,</span>&nbsp;<span class="num" id="6805825">0x1c</span><span class="op" id="6805829">,</span>&nbsp;<span class="num" id="6805831">0x9d</span><span class="op" id="6805835">,</span>&nbsp;<span class="num" id="6805837">0xc5</span><span class="op" id="6805841">}</span><span class="op" id="6805842">,</span>&nbsp;<span class="string" id="6805844">&#34;&#34;</span><span class="op" id="6805846">}</span><span class="op" id="6805847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6805850">{</span><span class="op" id="6805851">[</span><span class="op" id="6805852">]</span><span class="builtintype" id="6805853">byte</span><span class="op" id="6805857">{</span><span class="num" id="6805858">0xe4</span><span class="op" id="6805862">,</span>&nbsp;<span class="num" id="6805864">0x0c</span><span class="op" id="6805868">,</span>&nbsp;<span class="num" id="6805870">0x29</span><span class="op" id="6805874">,</span>&nbsp;<span class="num" id="6805876">0x2c</span><span class="op" id="6805880">}</span><span class="op" id="6805881">,</span>&nbsp;<span class="string" id="6805883">&#34;a&#34;</span><span class="op" id="6805886">}</span><span class="op" id="6805887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6805890">{</span><span class="op" id="6805891">[</span><span class="op" id="6805892">]</span><span class="builtintype" id="6805893">byte</span><span class="op" id="6805897">{</span><span class="num" id="6805898">0x4d</span><span class="op" id="6805902">,</span>&nbsp;<span class="num" id="6805904">0x25</span><span class="op" id="6805908">,</span>&nbsp;<span class="num" id="6805910">0x05</span><span class="op" id="6805914">,</span>&nbsp;<span class="num" id="6805916">0xca</span><span class="op" id="6805920">}</span><span class="op" id="6805921">,</span>&nbsp;<span class="string" id="6805923">&#34;ab&#34;</span><span class="op" id="6805927">}</span><span class="op" id="6805928">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6805931">{</span><span class="op" id="6805932">[</span><span class="op" id="6805933">]</span><span class="builtintype" id="6805934">byte</span><span class="op" id="6805938">{</span><span class="num" id="6805939">0x1a</span><span class="op" id="6805943">,</span>&nbsp;<span class="num" id="6805945">0x47</span><span class="op" id="6805949">,</span>&nbsp;<span class="num" id="6805951">0xe9</span><span class="op" id="6805955">,</span>&nbsp;<span class="num" id="6805957">0x0b</span><span class="op" id="6805961">}</span><span class="op" id="6805962">,</span>&nbsp;<span class="string" id="6805964">&#34;abc&#34;</span><span class="op" id="6805969">}</span><span class="op" id="6805970">,</span><br>
<span class="lineno"></span><span class="op" id="6805972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6805975">var</span>&nbsp;<span class="ident" id="6805979">golden64</span>&nbsp;<span class="op" id="6805988">=</span>&nbsp;<span class="op" id="6805990">[</span><span class="op" id="6805991">]</span><span class="ident" id="6805992">golden</span><span class="op" id="6805998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806001">{</span><span class="op" id="6806002">[</span><span class="op" id="6806003">]</span><span class="builtintype" id="6806004">byte</span><span class="op" id="6806008">{</span><span class="num" id="6806009">0xcb</span><span class="op" id="6806013">,</span>&nbsp;<span class="num" id="6806015">0xf2</span><span class="op" id="6806019">,</span>&nbsp;<span class="num" id="6806021">0x9c</span><span class="op" id="6806025">,</span>&nbsp;<span class="num" id="6806027">0xe4</span><span class="op" id="6806031">,</span>&nbsp;<span class="num" id="6806033">0x84</span><span class="op" id="6806037">,</span>&nbsp;<span class="num" id="6806039">0x22</span><span class="op" id="6806043">,</span>&nbsp;<span class="num" id="6806045">0x23</span><span class="op" id="6806049">,</span>&nbsp;<span class="num" id="6806051">0x25</span><span class="op" id="6806055">}</span><span class="op" id="6806056">,</span>&nbsp;<span class="string" id="6806058">&#34;&#34;</span><span class="op" id="6806060">}</span><span class="op" id="6806061">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806064">{</span><span class="op" id="6806065">[</span><span class="op" id="6806066">]</span><span class="builtintype" id="6806067">byte</span><span class="op" id="6806071">{</span><span class="num" id="6806072">0xaf</span><span class="op" id="6806076">,</span>&nbsp;<span class="num" id="6806078">0x63</span><span class="op" id="6806082">,</span>&nbsp;<span class="num" id="6806084">0xbd</span><span class="op" id="6806088">,</span>&nbsp;<span class="num" id="6806090">0x4c</span><span class="op" id="6806094">,</span>&nbsp;<span class="num" id="6806096">0x86</span><span class="op" id="6806100">,</span>&nbsp;<span class="num" id="6806102">0x01</span><span class="op" id="6806106">,</span>&nbsp;<span class="num" id="6806108">0xb7</span><span class="op" id="6806112">,</span>&nbsp;<span class="num" id="6806114">0xbe</span><span class="op" id="6806118">}</span><span class="op" id="6806119">,</span>&nbsp;<span class="string" id="6806121">&#34;a&#34;</span><span class="op" id="6806124">}</span><span class="op" id="6806125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806128">{</span><span class="op" id="6806129">[</span><span class="op" id="6806130">]</span><span class="builtintype" id="6806131">byte</span><span class="op" id="6806135">{</span><span class="num" id="6806136">0x08</span><span class="op" id="6806140">,</span>&nbsp;<span class="num" id="6806142">0x32</span><span class="op" id="6806146">,</span>&nbsp;<span class="num" id="6806148">0x67</span><span class="op" id="6806152">,</span>&nbsp;<span class="num" id="6806154">0x07</span><span class="op" id="6806158">,</span>&nbsp;<span class="num" id="6806160">0xb4</span><span class="op" id="6806164">,</span>&nbsp;<span class="num" id="6806166">0xeb</span><span class="op" id="6806170">,</span>&nbsp;<span class="num" id="6806172">0x37</span><span class="op" id="6806176">,</span>&nbsp;<span class="num" id="6806178">0xb8</span><span class="op" id="6806182">}</span><span class="op" id="6806183">,</span>&nbsp;<span class="string" id="6806185">&#34;ab&#34;</span><span class="op" id="6806189">}</span><span class="op" id="6806190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806193">{</span><span class="op" id="6806194">[</span><span class="op" id="6806195">]</span><span class="builtintype" id="6806196">byte</span><span class="op" id="6806200">{</span><span class="num" id="6806201">0xd8</span><span class="op" id="6806205">,</span>&nbsp;<span class="num" id="6806207">0xdc</span><span class="op" id="6806211">,</span>&nbsp;<span class="num" id="6806213">0xca</span><span class="op" id="6806217">,</span>&nbsp;<span class="num" id="6806219">0x18</span><span class="op" id="6806223">,</span>&nbsp;<span class="num" id="6806225">0x6b</span><span class="op" id="6806229">,</span>&nbsp;<span class="num" id="6806231">0xaf</span><span class="op" id="6806235">,</span>&nbsp;<span class="num" id="6806237">0xad</span><span class="op" id="6806241">,</span>&nbsp;<span class="num" id="6806243">0xcb</span><span class="op" id="6806247">}</span><span class="op" id="6806248">,</span>&nbsp;<span class="string" id="6806250">&#34;abc&#34;</span><span class="op" id="6806255">}</span><span class="op" id="6806256">,</span><br>
<span class="lineno"></span><span class="op" id="6806258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="6806261">var</span>&nbsp;<span class="ident" id="6806265">golden64a</span>&nbsp;<span class="op" id="6806275">=</span>&nbsp;<span class="op" id="6806277">[</span><span class="op" id="6806278">]</span><span class="ident" id="6806279">golden</span><span class="op" id="6806285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806288">{</span><span class="op" id="6806289">[</span><span class="op" id="6806290">]</span><span class="builtintype" id="6806291">byte</span><span class="op" id="6806295">{</span><span class="num" id="6806296">0xcb</span><span class="op" id="6806300">,</span>&nbsp;<span class="num" id="6806302">0xf2</span><span class="op" id="6806306">,</span>&nbsp;<span class="num" id="6806308">0x9c</span><span class="op" id="6806312">,</span>&nbsp;<span class="num" id="6806314">0xe4</span><span class="op" id="6806318">,</span>&nbsp;<span class="num" id="6806320">0x84</span><span class="op" id="6806324">,</span>&nbsp;<span class="num" id="6806326">0x22</span><span class="op" id="6806330">,</span>&nbsp;<span class="num" id="6806332">0x23</span><span class="op" id="6806336">,</span>&nbsp;<span class="num" id="6806338">0x25</span><span class="op" id="6806342">}</span><span class="op" id="6806343">,</span>&nbsp;<span class="string" id="6806345">&#34;&#34;</span><span class="op" id="6806347">}</span><span class="op" id="6806348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806351">{</span><span class="op" id="6806352">[</span><span class="op" id="6806353">]</span><span class="builtintype" id="6806354">byte</span><span class="op" id="6806358">{</span><span class="num" id="6806359">0xaf</span><span class="op" id="6806363">,</span>&nbsp;<span class="num" id="6806365">0x63</span><span class="op" id="6806369">,</span>&nbsp;<span class="num" id="6806371">0xdc</span><span class="op" id="6806375">,</span>&nbsp;<span class="num" id="6806377">0x4c</span><span class="op" id="6806381">,</span>&nbsp;<span class="num" id="6806383">0x86</span><span class="op" id="6806387">,</span>&nbsp;<span class="num" id="6806389">0x01</span><span class="op" id="6806393">,</span>&nbsp;<span class="num" id="6806395">0xec</span><span class="op" id="6806399">,</span>&nbsp;<span class="num" id="6806401">0x8c</span><span class="op" id="6806405">}</span><span class="op" id="6806406">,</span>&nbsp;<span class="string" id="6806408">&#34;a&#34;</span><span class="op" id="6806411">}</span><span class="op" id="6806412">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806415">{</span><span class="op" id="6806416">[</span><span class="op" id="6806417">]</span><span class="builtintype" id="6806418">byte</span><span class="op" id="6806422">{</span><span class="num" id="6806423">0x08</span><span class="op" id="6806427">,</span>&nbsp;<span class="num" id="6806429">0x9c</span><span class="op" id="6806433">,</span>&nbsp;<span class="num" id="6806435">0x44</span><span class="op" id="6806439">,</span>&nbsp;<span class="num" id="6806441">0x07</span><span class="op" id="6806445">,</span>&nbsp;<span class="num" id="6806447">0xb5</span><span class="op" id="6806451">,</span>&nbsp;<span class="num" id="6806453">0x45</span><span class="op" id="6806457">,</span>&nbsp;<span class="num" id="6806459">0x98</span><span class="op" id="6806463">,</span>&nbsp;<span class="num" id="6806465">0x6a</span><span class="op" id="6806469">}</span><span class="op" id="6806470">,</span>&nbsp;<span class="string" id="6806472">&#34;ab&#34;</span><span class="op" id="6806476">}</span><span class="op" id="6806477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6806480">{</span><span class="op" id="6806481">[</span><span class="op" id="6806482">]</span><span class="builtintype" id="6806483">byte</span><span class="op" id="6806487">{</span><span class="num" id="6806488">0xe7</span><span class="op" id="6806492">,</span>&nbsp;<span class="num" id="6806494">0x1f</span><span class="op" id="6806498">,</span>&nbsp;<span class="num" id="6806500">0xa2</span><span class="op" id="6806504">,</span>&nbsp;<span class="num" id="6806506">0x19</span><span class="op" id="6806510">,</span>&nbsp;<span class="num" id="6806512">0x05</span><span class="op" id="6806516">,</span>&nbsp;<span class="num" id="6806518">0x41</span><span class="op" id="6806522">,</span>&nbsp;<span class="num" id="6806524">0x57</span><span class="op" id="6806528">,</span>&nbsp;<span class="num" id="6806530">0x4b</span><span class="op" id="6806534">}</span><span class="op" id="6806535">,</span>&nbsp;<span class="string" id="6806537">&#34;abc&#34;</span><span class="op" id="6806542">}</span><span class="op" id="6806543">,</span><br>
<span class="lineno">45</span><span class="op" id="6806545">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6806548">func</span>&nbsp;<span class="ident" id="6806553">TestGolden32</span><span class="op" id="6806565">(</span><span class="ident" id="6806566">t</span>&nbsp;<span class="op" id="6806568">*</span><span class="ident" id="6806569">testing</span><span class="op" id="6806576">.</span><span class="ident" id="6806577">T</span><span class="op" id="6806578">)</span>&nbsp;<span class="op" id="6806580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6806583">testGolden</span><span class="op" id="6806593">(</span><span class="ident" id="6806594">t</span><span class="op" id="6806595">,</span>&nbsp;<span class="ident" id="6806597">New32</span><span class="op" id="6806602">(</span><span class="op" id="6806603">)</span><span class="op" id="6806604">,</span>&nbsp;<span class="ident" id="6806606">golden32</span><span class="op" id="6806614">)</span><br>
<span class="lineno"></span><span class="op" id="6806616">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="6806619">func</span>&nbsp;<span class="ident" id="6806624">TestGolden32a</span><span class="op" id="6806637">(</span><span class="ident" id="6806638">t</span>&nbsp;<span class="op" id="6806640">*</span><span class="ident" id="6806641">testing</span><span class="op" id="6806648">.</span><span class="ident" id="6806649">T</span><span class="op" id="6806650">)</span>&nbsp;<span class="op" id="6806652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6806655">testGolden</span><span class="op" id="6806665">(</span><span class="ident" id="6806666">t</span><span class="op" id="6806667">,</span>&nbsp;<span class="ident" id="6806669">New32a</span><span class="op" id="6806675">(</span><span class="op" id="6806676">)</span><span class="op" id="6806677">,</span>&nbsp;<span class="ident" id="6806679">golden32a</span><span class="op" id="6806688">)</span><br>
<span class="lineno"></span><span class="op" id="6806690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="keyword" id="6806693">func</span>&nbsp;<span class="ident" id="6806698">TestGolden64</span><span class="op" id="6806710">(</span><span class="ident" id="6806711">t</span>&nbsp;<span class="op" id="6806713">*</span><span class="ident" id="6806714">testing</span><span class="op" id="6806721">.</span><span class="ident" id="6806722">T</span><span class="op" id="6806723">)</span>&nbsp;<span class="op" id="6806725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6806728">testGolden</span><span class="op" id="6806738">(</span><span class="ident" id="6806739">t</span><span class="op" id="6806740">,</span>&nbsp;<span class="ident" id="6806742">New64</span><span class="op" id="6806747">(</span><span class="op" id="6806748">)</span><span class="op" id="6806749">,</span>&nbsp;<span class="ident" id="6806751">golden64</span><span class="op" id="6806759">)</span><br>
<span class="lineno"></span><span class="op" id="6806761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6806764">func</span>&nbsp;<span class="ident" id="6806769">TestGolden64a</span><span class="op" id="6806782">(</span><span class="ident" id="6806783">t</span>&nbsp;<span class="op" id="6806785">*</span><span class="ident" id="6806786">testing</span><span class="op" id="6806793">.</span><span class="ident" id="6806794">T</span><span class="op" id="6806795">)</span>&nbsp;<span class="op" id="6806797">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6806800">testGolden</span><span class="op" id="6806810">(</span><span class="ident" id="6806811">t</span><span class="op" id="6806812">,</span>&nbsp;<span class="ident" id="6806814">New64a</span><span class="op" id="6806820">(</span><span class="op" id="6806821">)</span><span class="op" id="6806822">,</span>&nbsp;<span class="ident" id="6806824">golden64a</span><span class="op" id="6806833">)</span><br>
<span class="lineno"></span><span class="op" id="6806835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6806838">func</span>&nbsp;<span class="ident" id="6806843">testGolden</span><span class="op" id="6806853">(</span><span class="ident" id="6806854">t</span>&nbsp;<span class="op" id="6806856">*</span><span class="ident" id="6806857">testing</span><span class="op" id="6806864">.</span><span class="ident" id="6806865">T</span><span class="op" id="6806866">,</span>&nbsp;<span class="ident" id="6806868">hash</span>&nbsp;<span class="ident" id="6806873">hash</span><span class="op" id="6806877">.</span><span class="ident" id="6806878">Hash</span><span class="op" id="6806882">,</span>&nbsp;<span class="ident" id="6806884">gold</span>&nbsp;<span class="op" id="6806889">[</span><span class="op" id="6806890">]</span><span class="ident" id="6806891">golden</span><span class="op" id="6806897">)</span>&nbsp;<span class="op" id="6806899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6806902">for</span>&nbsp;<span class="ident" id="6806906">_</span><span class="op" id="6806907">,</span>&nbsp;<span class="ident" id="6806909">g</span>&nbsp;<span class="op" id="6806911">:=</span>&nbsp;<span class="keyword" id="6806914">range</span>&nbsp;<span class="ident" id="6806920">gold</span>&nbsp;<span class="op" id="6806925">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6806929">hash</span><span class="op" id="6806933">.</span><span class="ident" id="6806934">Reset</span><span class="op" id="6806939">(</span><span class="op" id="6806940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6806944">done</span><span class="op" id="6806948">,</span>&nbsp;<span class="builtintype" id="6806950">error</span>&nbsp;<span class="op" id="6806956">:=</span>&nbsp;<span class="ident" id="6806959">hash</span><span class="op" id="6806963">.</span><span class="ident" id="6806964">Write</span><span class="op" id="6806969">(</span><span class="op" id="6806970">[</span><span class="op" id="6806971">]</span><span class="builtintype" id="6806972">byte</span><span class="op" id="6806976">(</span><span class="ident" id="6806977">g</span><span class="op" id="6806978">.</span><span class="ident" id="6806979">text</span><span class="op" id="6806983">)</span><span class="op" id="6806984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6806988">if</span>&nbsp;<span class="builtintype" id="6806991">error</span>&nbsp;<span class="op" id="6806997">!=</span>&nbsp;<span class="ident" id="6807000">nil</span>&nbsp;<span class="op" id="6807004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807009">t</span><span class="op" id="6807010">.</span><span class="ident" id="6807011">Fatalf</span><span class="op" id="6807017">(</span><span class="string" id="6807018">&#34;write&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="6807035">,</span>&nbsp;<span class="builtintype" id="6807037">error</span><span class="op" id="6807042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807046">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6807050">if</span>&nbsp;<span class="ident" id="6807053">done</span>&nbsp;<span class="op" id="6807058">!=</span>&nbsp;<span class="builtinfunc" id="6807061">len</span><span class="op" id="6807064">(</span><span class="ident" id="6807065">g</span><span class="op" id="6807066">.</span><span class="ident" id="6807067">text</span><span class="op" id="6807071">)</span>&nbsp;<span class="op" id="6807073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807078">t</span><span class="op" id="6807079">.</span><span class="ident" id="6807080">Fatalf</span><span class="op" id="6807086">(</span><span class="string" id="6807087">&#34;wrote&nbsp;only&nbsp;%d&nbsp;out&nbsp;of&nbsp;%d&nbsp;bytes&#34;</span><span class="op" id="6807118">,</span>&nbsp;<span class="ident" id="6807120">done</span><span class="op" id="6807124">,</span>&nbsp;<span class="builtinfunc" id="6807126">len</span><span class="op" id="6807129">(</span><span class="ident" id="6807130">g</span><span class="op" id="6807131">.</span><span class="ident" id="6807132">text</span><span class="op" id="6807136">)</span><span class="op" id="6807137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6807145">if</span>&nbsp;<span class="ident" id="6807148">actual</span>&nbsp;<span class="op" id="6807155">:=</span>&nbsp;<span class="ident" id="6807158">hash</span><span class="op" id="6807162">.</span><span class="ident" id="6807163">Sum</span><span class="op" id="6807166">(</span><span class="ident" id="6807167">nil</span><span class="op" id="6807170">)</span><span class="op" id="6807171">;</span>&nbsp;<span class="op" id="6807173">!</span><span class="ident" id="6807174">bytes</span><span class="op" id="6807179">.</span><span class="ident" id="6807180">Equal</span><span class="op" id="6807185">(</span><span class="ident" id="6807186">g</span><span class="op" id="6807187">.</span><span class="ident" id="6807188">sum</span><span class="op" id="6807191">,</span>&nbsp;<span class="ident" id="6807193">actual</span><span class="op" id="6807199">)</span>&nbsp;<span class="op" id="6807201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807206">t</span><span class="op" id="6807207">.</span><span class="ident" id="6807208">Errorf</span><span class="op" id="6807214">(</span><span class="string" id="6807215">&#34;hash(%q)&nbsp;=&nbsp;0x%x&nbsp;want&nbsp;0x%x&#34;</span><span class="op" id="6807242">,</span>&nbsp;<span class="ident" id="6807244">g</span><span class="op" id="6807245">.</span><span class="ident" id="6807246">text</span><span class="op" id="6807250">,</span>&nbsp;<span class="ident" id="6807252">actual</span><span class="op" id="6807258">,</span>&nbsp;<span class="ident" id="6807260">g</span><span class="op" id="6807261">.</span><span class="ident" id="6807262">sum</span><span class="op" id="6807265">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807272">}</span><br>
<span class="lineno"></span><span class="op" id="6807274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6807277">func</span>&nbsp;<span class="ident" id="6807282">TestIntegrity32</span><span class="op" id="6807297">(</span><span class="ident" id="6807298">t</span>&nbsp;<span class="op" id="6807300">*</span><span class="ident" id="6807301">testing</span><span class="op" id="6807308">.</span><span class="ident" id="6807309">T</span><span class="op" id="6807310">)</span>&nbsp;<span class="op" id="6807312">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807315">testIntegrity</span><span class="op" id="6807328">(</span><span class="ident" id="6807329">t</span><span class="op" id="6807330">,</span>&nbsp;<span class="ident" id="6807332">New32</span><span class="op" id="6807337">(</span><span class="op" id="6807338">)</span><span class="op" id="6807339">)</span><br>
<span class="lineno"></span><span class="op" id="6807341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6807344">func</span>&nbsp;<span class="ident" id="6807349">TestIntegrity32a</span><span class="op" id="6807365">(</span><span class="ident" id="6807366">t</span>&nbsp;<span class="op" id="6807368">*</span><span class="ident" id="6807369">testing</span><span class="op" id="6807376">.</span><span class="ident" id="6807377">T</span><span class="op" id="6807378">)</span>&nbsp;<span class="op" id="6807380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807383">testIntegrity</span><span class="op" id="6807396">(</span><span class="ident" id="6807397">t</span><span class="op" id="6807398">,</span>&nbsp;<span class="ident" id="6807400">New32a</span><span class="op" id="6807406">(</span><span class="op" id="6807407">)</span><span class="op" id="6807408">)</span><br>
<span class="lineno">85</span><span class="op" id="6807410">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6807413">func</span>&nbsp;<span class="ident" id="6807418">TestIntegrity64</span><span class="op" id="6807433">(</span><span class="ident" id="6807434">t</span>&nbsp;<span class="op" id="6807436">*</span><span class="ident" id="6807437">testing</span><span class="op" id="6807444">.</span><span class="ident" id="6807445">T</span><span class="op" id="6807446">)</span>&nbsp;<span class="op" id="6807448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807451">testIntegrity</span><span class="op" id="6807464">(</span><span class="ident" id="6807465">t</span><span class="op" id="6807466">,</span>&nbsp;<span class="ident" id="6807468">New64</span><span class="op" id="6807473">(</span><span class="op" id="6807474">)</span><span class="op" id="6807475">)</span><br>
<span class="lineno"></span><span class="op" id="6807477">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="6807480">func</span>&nbsp;<span class="ident" id="6807485">TestIntegrity64a</span><span class="op" id="6807501">(</span><span class="ident" id="6807502">t</span>&nbsp;<span class="op" id="6807504">*</span><span class="ident" id="6807505">testing</span><span class="op" id="6807512">.</span><span class="ident" id="6807513">T</span><span class="op" id="6807514">)</span>&nbsp;<span class="op" id="6807516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807519">testIntegrity</span><span class="op" id="6807532">(</span><span class="ident" id="6807533">t</span><span class="op" id="6807534">,</span>&nbsp;<span class="ident" id="6807536">New64a</span><span class="op" id="6807542">(</span><span class="op" id="6807543">)</span><span class="op" id="6807544">)</span><br>
<span class="lineno"></span><span class="op" id="6807546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="6807549">func</span>&nbsp;<span class="ident" id="6807554">testIntegrity</span><span class="op" id="6807567">(</span><span class="ident" id="6807568">t</span>&nbsp;<span class="op" id="6807570">*</span><span class="ident" id="6807571">testing</span><span class="op" id="6807578">.</span><span class="ident" id="6807579">T</span><span class="op" id="6807580">,</span>&nbsp;<span class="ident" id="6807582">h</span>&nbsp;<span class="ident" id="6807584">hash</span><span class="op" id="6807588">.</span><span class="ident" id="6807589">Hash</span><span class="op" id="6807593">)</span>&nbsp;<span class="op" id="6807595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807598">data</span>&nbsp;<span class="op" id="6807603">:=</span>&nbsp;<span class="op" id="6807606">[</span><span class="op" id="6807607">]</span><span class="builtintype" id="6807608">byte</span><span class="op" id="6807612">{</span><span class="string" id="6807613">&#39;1&#39;</span><span class="op" id="6807616">,</span>&nbsp;<span class="string" id="6807618">&#39;2&#39;</span><span class="op" id="6807621">,</span>&nbsp;<span class="num" id="6807623">3</span><span class="op" id="6807624">,</span>&nbsp;<span class="num" id="6807626">4</span><span class="op" id="6807627">,</span>&nbsp;<span class="num" id="6807629">5</span><span class="op" id="6807630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807633">h</span><span class="op" id="6807634">.</span><span class="ident" id="6807635">Write</span><span class="op" id="6807640">(</span><span class="ident" id="6807641">data</span><span class="op" id="6807645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807648">sum</span>&nbsp;<span class="op" id="6807652">:=</span>&nbsp;<span class="ident" id="6807655">h</span><span class="op" id="6807656">.</span><span class="ident" id="6807657">Sum</span><span class="op" id="6807660">(</span><span class="ident" id="6807661">nil</span><span class="op" id="6807664">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6807668">if</span>&nbsp;<span class="ident" id="6807671">size</span>&nbsp;<span class="op" id="6807676">:=</span>&nbsp;<span class="ident" id="6807679">h</span><span class="op" id="6807680">.</span><span class="ident" id="6807681">Size</span><span class="op" id="6807685">(</span><span class="op" id="6807686">)</span><span class="op" id="6807687">;</span>&nbsp;<span class="ident" id="6807689">size</span>&nbsp;<span class="op" id="6807694">!=</span>&nbsp;<span class="builtinfunc" id="6807697">len</span><span class="op" id="6807700">(</span><span class="ident" id="6807701">sum</span><span class="op" id="6807704">)</span>&nbsp;<span class="op" id="6807706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807710">t</span><span class="op" id="6807711">.</span><span class="ident" id="6807712">Fatalf</span><span class="op" id="6807718">(</span><span class="string" id="6807719">&#34;Size()=%d&nbsp;but&nbsp;len(Sum())=%d&#34;</span><span class="op" id="6807748">,</span>&nbsp;<span class="ident" id="6807750">size</span><span class="op" id="6807754">,</span>&nbsp;<span class="builtinfunc" id="6807756">len</span><span class="op" id="6807759">(</span><span class="ident" id="6807760">sum</span><span class="op" id="6807763">)</span><span class="op" id="6807764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6807771">if</span>&nbsp;<span class="ident" id="6807774">a</span>&nbsp;<span class="op" id="6807776">:=</span>&nbsp;<span class="ident" id="6807779">h</span><span class="op" id="6807780">.</span><span class="ident" id="6807781">Sum</span><span class="op" id="6807784">(</span><span class="ident" id="6807785">nil</span><span class="op" id="6807788">)</span><span class="op" id="6807789">;</span>&nbsp;<span class="op" id="6807791">!</span><span class="ident" id="6807792">bytes</span><span class="op" id="6807797">.</span><span class="ident" id="6807798">Equal</span><span class="op" id="6807803">(</span><span class="ident" id="6807804">sum</span><span class="op" id="6807807">,</span>&nbsp;<span class="ident" id="6807809">a</span><span class="op" id="6807810">)</span>&nbsp;<span class="op" id="6807812">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807816">t</span><span class="op" id="6807817">.</span><span class="ident" id="6807818">Fatalf</span><span class="op" id="6807824">(</span><span class="string" id="6807825">&#34;first&nbsp;Sum()=0x%x,&nbsp;second&nbsp;Sum()=0x%x&#34;</span><span class="op" id="6807862">,</span>&nbsp;<span class="ident" id="6807864">sum</span><span class="op" id="6807867">,</span>&nbsp;<span class="ident" id="6807869">a</span><span class="op" id="6807870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6807873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807877">h</span><span class="op" id="6807878">.</span><span class="ident" id="6807879">Reset</span><span class="op" id="6807884">(</span><span class="op" id="6807885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807888">h</span><span class="op" id="6807889">.</span><span class="ident" id="6807890">Write</span><span class="op" id="6807895">(</span><span class="ident" id="6807896">data</span><span class="op" id="6807900">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6807903">if</span>&nbsp;<span class="ident" id="6807906">a</span>&nbsp;<span class="op" id="6807908">:=</span>&nbsp;<span class="ident" id="6807911">h</span><span class="op" id="6807912">.</span><span class="ident" id="6807913">Sum</span><span class="op" id="6807916">(</span><span class="ident" id="6807917">nil</span><span class="op" id="6807920">)</span><span class="op" id="6807921">;</span>&nbsp;<span class="op" id="6807923">!</span><span class="ident" id="6807924">bytes</span><span class="op" id="6807929">.</span><span class="ident" id="6807930">Equal</span><span class="op" id="6807935">(</span><span class="ident" id="6807936">sum</span><span class="op" id="6807939">,</span>&nbsp;<span class="ident" id="6807941">a</span><span class="op" id="6807942">)</span>&nbsp;<span class="op" id="6807944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6807948">t</span><span class="op" id="6807949">.</span><span class="ident" id="6807950">Fatalf</span><span class="op" id="6807956">(</span><span class="string" id="6807957">&#34;Sum()=0x%x,&nbsp;but&nbsp;after&nbsp;Reset()&nbsp;Sum()=0x%x&#34;</span><span class="op" id="6807999">,</span>&nbsp;<span class="ident" id="6808001">sum</span><span class="op" id="6808004">,</span>&nbsp;<span class="ident" id="6808006">a</span><span class="op" id="6808007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808010">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808014">h</span><span class="op" id="6808015">.</span><span class="ident" id="6808016">Reset</span><span class="op" id="6808021">(</span><span class="op" id="6808022">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808025">h</span><span class="op" id="6808026">.</span><span class="ident" id="6808027">Write</span><span class="op" id="6808032">(</span><span class="ident" id="6808033">data</span><span class="op" id="6808037">[</span><span class="op" id="6808038">:</span><span class="num" id="6808039">2</span><span class="op" id="6808040">]</span><span class="op" id="6808041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808044">h</span><span class="op" id="6808045">.</span><span class="ident" id="6808046">Write</span><span class="op" id="6808051">(</span><span class="ident" id="6808052">data</span><span class="op" id="6808056">[</span><span class="num" id="6808057">2</span><span class="op" id="6808058">:</span><span class="op" id="6808059">]</span><span class="op" id="6808060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808063">if</span>&nbsp;<span class="ident" id="6808066">a</span>&nbsp;<span class="op" id="6808068">:=</span>&nbsp;<span class="ident" id="6808071">h</span><span class="op" id="6808072">.</span><span class="ident" id="6808073">Sum</span><span class="op" id="6808076">(</span><span class="ident" id="6808077">nil</span><span class="op" id="6808080">)</span><span class="op" id="6808081">;</span>&nbsp;<span class="op" id="6808083">!</span><span class="ident" id="6808084">bytes</span><span class="op" id="6808089">.</span><span class="ident" id="6808090">Equal</span><span class="op" id="6808095">(</span><span class="ident" id="6808096">sum</span><span class="op" id="6808099">,</span>&nbsp;<span class="ident" id="6808101">a</span><span class="op" id="6808102">)</span>&nbsp;<span class="op" id="6808104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808108">t</span><span class="op" id="6808109">.</span><span class="ident" id="6808110">Fatalf</span><span class="op" id="6808116">(</span><span class="string" id="6808117">&#34;Sum()=0x%x,&nbsp;but&nbsp;with&nbsp;partial&nbsp;writes,&nbsp;Sum()=0x%x&#34;</span><span class="op" id="6808166">,</span>&nbsp;<span class="ident" id="6808168">sum</span><span class="op" id="6808171">,</span>&nbsp;<span class="ident" id="6808173">a</span><span class="op" id="6808174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808177">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808181">switch</span>&nbsp;<span class="ident" id="6808188">h</span><span class="op" id="6808189">.</span><span class="ident" id="6808190">Size</span><span class="op" id="6808194">(</span><span class="op" id="6808195">)</span>&nbsp;<span class="op" id="6808197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808200">case</span>&nbsp;<span class="num" id="6808205">4</span><span class="op" id="6808206">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808210">sum32</span>&nbsp;<span class="op" id="6808216">:=</span>&nbsp;<span class="ident" id="6808219">h</span><span class="op" id="6808220">.</span><span class="op" id="6808221">(</span><span class="ident" id="6808222">hash</span><span class="op" id="6808226">.</span><span class="ident" id="6808227">Hash32</span><span class="op" id="6808233">)</span><span class="op" id="6808234">.</span><span class="ident" id="6808235">Sum32</span><span class="op" id="6808240">(</span><span class="op" id="6808241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808245">if</span>&nbsp;<span class="ident" id="6808248">sum32</span>&nbsp;<span class="op" id="6808254">!=</span>&nbsp;<span class="ident" id="6808257">binary</span><span class="op" id="6808263">.</span><span class="ident" id="6808264">BigEndian</span><span class="op" id="6808273">.</span><span class="ident" id="6808274">Uint32</span><span class="op" id="6808280">(</span><span class="ident" id="6808281">sum</span><span class="op" id="6808284">)</span>&nbsp;<span class="op" id="6808286">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808291">t</span><span class="op" id="6808292">.</span><span class="ident" id="6808293">Fatalf</span><span class="op" id="6808299">(</span><span class="string" id="6808300">&#34;Sum()=0x%x,&nbsp;but&nbsp;Sum32()=0x%x&#34;</span><span class="op" id="6808330">,</span>&nbsp;<span class="ident" id="6808332">sum</span><span class="op" id="6808335">,</span>&nbsp;<span class="ident" id="6808337">sum32</span><span class="op" id="6808342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808349">case</span>&nbsp;<span class="num" id="6808354">8</span><span class="op" id="6808355">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808359">sum64</span>&nbsp;<span class="op" id="6808365">:=</span>&nbsp;<span class="ident" id="6808368">h</span><span class="op" id="6808369">.</span><span class="op" id="6808370">(</span><span class="ident" id="6808371">hash</span><span class="op" id="6808375">.</span><span class="ident" id="6808376">Hash64</span><span class="op" id="6808382">)</span><span class="op" id="6808383">.</span><span class="ident" id="6808384">Sum64</span><span class="op" id="6808389">(</span><span class="op" id="6808390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808394">if</span>&nbsp;<span class="ident" id="6808397">sum64</span>&nbsp;<span class="op" id="6808403">!=</span>&nbsp;<span class="ident" id="6808406">binary</span><span class="op" id="6808412">.</span><span class="ident" id="6808413">BigEndian</span><span class="op" id="6808422">.</span><span class="ident" id="6808423">Uint64</span><span class="op" id="6808429">(</span><span class="ident" id="6808430">sum</span><span class="op" id="6808433">)</span>&nbsp;<span class="op" id="6808435">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808440">t</span><span class="op" id="6808441">.</span><span class="ident" id="6808442">Fatalf</span><span class="op" id="6808448">(</span><span class="string" id="6808449">&#34;Sum()=0x%x,&nbsp;but&nbsp;Sum64()=0x%x&#34;</span><span class="op" id="6808479">,</span>&nbsp;<span class="ident" id="6808481">sum</span><span class="op" id="6808484">,</span>&nbsp;<span class="ident" id="6808486">sum64</span><span class="op" id="6808491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808498">}</span><br>
<span class="lineno"></span><span class="op" id="6808500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="6808503">func</span>&nbsp;<span class="ident" id="6808508">BenchmarkFnv32KB</span><span class="op" id="6808524">(</span><span class="ident" id="6808525">b</span>&nbsp;<span class="op" id="6808527">*</span><span class="ident" id="6808528">testing</span><span class="op" id="6808535">.</span><span class="ident" id="6808536">B</span><span class="op" id="6808537">)</span>&nbsp;<span class="op" id="6808539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808542">benchmarkKB</span><span class="op" id="6808553">(</span><span class="ident" id="6808554">b</span><span class="op" id="6808555">,</span>&nbsp;<span class="ident" id="6808557">New32</span><span class="op" id="6808562">(</span><span class="op" id="6808563">)</span><span class="op" id="6808564">)</span><br>
<span class="lineno"></span><span class="op" id="6808566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6808569">func</span>&nbsp;<span class="ident" id="6808574">BenchmarkFnv32aKB</span><span class="op" id="6808591">(</span><span class="ident" id="6808592">b</span>&nbsp;<span class="op" id="6808594">*</span><span class="ident" id="6808595">testing</span><span class="op" id="6808602">.</span><span class="ident" id="6808603">B</span><span class="op" id="6808604">)</span>&nbsp;<span class="op" id="6808606">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808609">benchmarkKB</span><span class="op" id="6808620">(</span><span class="ident" id="6808621">b</span><span class="op" id="6808622">,</span>&nbsp;<span class="ident" id="6808624">New32a</span><span class="op" id="6808630">(</span><span class="op" id="6808631">)</span><span class="op" id="6808632">)</span><br>
<span class="lineno"></span><span class="op" id="6808634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6808637">func</span>&nbsp;<span class="ident" id="6808642">BenchmarkFnv64KB</span><span class="op" id="6808658">(</span><span class="ident" id="6808659">b</span>&nbsp;<span class="op" id="6808661">*</span><span class="ident" id="6808662">testing</span><span class="op" id="6808669">.</span><span class="ident" id="6808670">B</span><span class="op" id="6808671">)</span>&nbsp;<span class="op" id="6808673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808676">benchmarkKB</span><span class="op" id="6808687">(</span><span class="ident" id="6808688">b</span><span class="op" id="6808689">,</span>&nbsp;<span class="ident" id="6808691">New64</span><span class="op" id="6808696">(</span><span class="op" id="6808697">)</span><span class="op" id="6808698">)</span><br>
<span class="lineno">145</span><span class="op" id="6808700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6808703">func</span>&nbsp;<span class="ident" id="6808708">BenchmarkFnv64aKB</span><span class="op" id="6808725">(</span><span class="ident" id="6808726">b</span>&nbsp;<span class="op" id="6808728">*</span><span class="ident" id="6808729">testing</span><span class="op" id="6808736">.</span><span class="ident" id="6808737">B</span><span class="op" id="6808738">)</span>&nbsp;<span class="op" id="6808740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808743">benchmarkKB</span><span class="op" id="6808754">(</span><span class="ident" id="6808755">b</span><span class="op" id="6808756">,</span>&nbsp;<span class="ident" id="6808758">New64a</span><span class="op" id="6808764">(</span><span class="op" id="6808765">)</span><span class="op" id="6808766">)</span><br>
<span class="lineno"></span><span class="op" id="6808768">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="6808771">func</span>&nbsp;<span class="ident" id="6808776">benchmarkKB</span><span class="op" id="6808787">(</span><span class="ident" id="6808788">b</span>&nbsp;<span class="op" id="6808790">*</span><span class="ident" id="6808791">testing</span><span class="op" id="6808798">.</span><span class="ident" id="6808799">B</span><span class="op" id="6808800">,</span>&nbsp;<span class="ident" id="6808802">h</span>&nbsp;<span class="ident" id="6808804">hash</span><span class="op" id="6808808">.</span><span class="ident" id="6808809">Hash</span><span class="op" id="6808813">)</span>&nbsp;<span class="op" id="6808815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808818">b</span><span class="op" id="6808819">.</span><span class="ident" id="6808820">SetBytes</span><span class="op" id="6808828">(</span><span class="num" id="6808829">1024</span><span class="op" id="6808833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808836">data</span>&nbsp;<span class="op" id="6808841">:=</span>&nbsp;<span class="builtinfunc" id="6808844">make</span><span class="op" id="6808848">(</span><span class="op" id="6808849">[</span><span class="op" id="6808850">]</span><span class="builtintype" id="6808851">byte</span><span class="op" id="6808855">,</span>&nbsp;<span class="num" id="6808857">1024</span><span class="op" id="6808861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808864">for</span>&nbsp;<span class="ident" id="6808868">i</span>&nbsp;<span class="op" id="6808870">:=</span>&nbsp;<span class="keyword" id="6808873">range</span>&nbsp;<span class="ident" id="6808879">data</span>&nbsp;<span class="op" id="6808884">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808888">data</span><span class="op" id="6808892">[</span><span class="ident" id="6808893">i</span><span class="op" id="6808894">]</span>&nbsp;<span class="op" id="6808896">=</span>&nbsp;<span class="builtintype" id="6808898">byte</span><span class="op" id="6808902">(</span><span class="ident" id="6808903">i</span><span class="op" id="6808904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6808907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808910">in</span>&nbsp;<span class="op" id="6808913">:=</span>&nbsp;<span class="builtinfunc" id="6808916">make</span><span class="op" id="6808920">(</span><span class="op" id="6808921">[</span><span class="op" id="6808922">]</span><span class="builtintype" id="6808923">byte</span><span class="op" id="6808927">,</span>&nbsp;<span class="num" id="6808929">0</span><span class="op" id="6808930">,</span>&nbsp;<span class="ident" id="6808932">h</span><span class="op" id="6808933">.</span><span class="ident" id="6808934">Size</span><span class="op" id="6808938">(</span><span class="op" id="6808939">)</span><span class="op" id="6808940">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808944">b</span><span class="op" id="6808945">.</span><span class="ident" id="6808946">ResetTimer</span><span class="op" id="6808956">(</span><span class="op" id="6808957">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6808960">for</span>&nbsp;<span class="ident" id="6808964">i</span>&nbsp;<span class="op" id="6808966">:=</span>&nbsp;<span class="num" id="6808969">0</span><span class="op" id="6808970">;</span>&nbsp;<span class="ident" id="6808972">i</span>&nbsp;<span class="op" id="6808974">&lt;</span>&nbsp;<span class="ident" id="6808976">b</span><span class="op" id="6808977">.</span><span class="ident" id="6808978">N</span><span class="op" id="6808979">;</span>&nbsp;<span class="ident" id="6808981">i</span><span class="op" id="6808982">++</span>&nbsp;<span class="op" id="6808985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6808989">h</span><span class="op" id="6808990">.</span><span class="ident" id="6808991">Reset</span><span class="op" id="6808996">(</span><span class="op" id="6808997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809001">h</span><span class="op" id="6809002">.</span><span class="ident" id="6809003">Write</span><span class="op" id="6809008">(</span><span class="ident" id="6809009">data</span><span class="op" id="6809013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6809017">h</span><span class="op" id="6809018">.</span><span class="ident" id="6809019">Sum</span><span class="op" id="6809022">(</span><span class="ident" id="6809023">in</span><span class="op" id="6809025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6809028">}</span><br>
<span class="lineno">165</span><span class="op" id="6809030">}</span>
</div>
</body>
</html>
