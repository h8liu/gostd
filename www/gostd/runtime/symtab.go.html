<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2081641">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2081696">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2081750">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2081801">package</span>&nbsp;<span class="ident" id="2081809">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2081818">import</span>&nbsp;<span class="string" id="2081825">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2081835">//&nbsp;NOTE:&nbsp;Func&nbsp;does&nbsp;not&nbsp;expose&nbsp;the&nbsp;actual&nbsp;unexported&nbsp;fields,&nbsp;because&nbsp;we&nbsp;return&nbsp;*Func</span><br>
<span class="lineno">10</span><span class="comment" id="2081919">//&nbsp;values&nbsp;to&nbsp;users,&nbsp;and&nbsp;we&nbsp;want&nbsp;to&nbsp;keep&nbsp;them&nbsp;from&nbsp;being&nbsp;able&nbsp;to&nbsp;overwrite&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="2082002">//&nbsp;with&nbsp;(say)&nbsp;*f&nbsp;=&nbsp;Func{}.</span><br>
<span class="lineno"></span><span class="comment" id="2082029">//&nbsp;All&nbsp;code&nbsp;operating&nbsp;on&nbsp;a&nbsp;*Func&nbsp;must&nbsp;call&nbsp;raw&nbsp;to&nbsp;get&nbsp;the&nbsp;*_func&nbsp;instead.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2082104">//&nbsp;A&nbsp;Func&nbsp;represents&nbsp;a&nbsp;Go&nbsp;function&nbsp;in&nbsp;the&nbsp;running&nbsp;binary.</span><br>
<span class="lineno">15</span><span class="keyword" id="2082162">type</span>&nbsp;<span class="ident" id="2082167">Func</span>&nbsp;<span class="keyword" id="2082172">struct</span>&nbsp;<span class="op" id="2082179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082182">opaque</span>&nbsp;<span class="keyword" id="2082189">struct</span><span class="op" id="2082195">{</span><span class="op" id="2082196">}</span>&nbsp;<span class="comment" id="2082198">//&nbsp;unexported&nbsp;field&nbsp;to&nbsp;disallow&nbsp;conversions</span><br>
<span class="lineno"></span><span class="op" id="2082242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2082245">func</span>&nbsp;<span class="op" id="2082250">(</span><span class="ident" id="2082251">f</span>&nbsp;<span class="op" id="2082253">*</span><span class="ident" id="2082254">Func</span><span class="op" id="2082258">)</span>&nbsp;<span class="ident" id="2082260">raw</span><span class="op" id="2082263">(</span><span class="op" id="2082264">)</span>&nbsp;<span class="op" id="2082266">*</span><span class="ident" id="2082267">_func</span>&nbsp;<span class="op" id="2082273">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2082276">return</span>&nbsp;<span class="op" id="2082283">(</span><span class="op" id="2082284">*</span><span class="ident" id="2082285">_func</span><span class="op" id="2082290">)</span><span class="op" id="2082291">(</span><span class="ident" id="2082292">unsafe</span><span class="op" id="2082298">.</span><span class="ident" id="2082299">Pointer</span><span class="op" id="2082306">(</span><span class="ident" id="2082307">f</span><span class="op" id="2082308">)</span><span class="op" id="2082309">)</span><br>
<span class="lineno"></span><span class="op" id="2082311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2082314">//&nbsp;funcdata.h</span><br>
<span class="lineno"></span><span class="keyword" id="2082328">const</span>&nbsp;<span class="op" id="2082334">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082337">_PCDATA_ArgSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082365">=</span>&nbsp;<span class="num" id="2082367">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082370">_PCDATA_StackMapIndex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082398">=</span>&nbsp;<span class="num" id="2082400">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082403">_FUNCDATA_ArgsPointerMaps</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2082431">=</span>&nbsp;<span class="num" id="2082433">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082436">_FUNCDATA_LocalsPointerMaps</span>&nbsp;<span class="op" id="2082464">=</span>&nbsp;<span class="num" id="2082466">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082469">_FUNCDATA_DeadValueMaps</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082497">=</span>&nbsp;<span class="num" id="2082499">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082502">_ArgsSizeUnknown</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082530">=</span>&nbsp;<span class="op" id="2082532">-</span><span class="num" id="2082533">0x80000000</span><br>
<span class="lineno"></span><span class="op" id="2082544">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2082547">var</span>&nbsp;<span class="op" id="2082551">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082554">pclntable</span>&nbsp;<span class="op" id="2082564">[</span><span class="op" id="2082565">]</span><span class="builtintype" id="2082566">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082572">ftab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2082582">[</span><span class="op" id="2082583">]</span><span class="ident" id="2082584">functab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082593">filetab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2082603">[</span><span class="op" id="2082604">]</span><span class="builtintype" id="2082605">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082614">pclntab</span><span class="op" id="2082621">,</span>&nbsp;<span class="ident" id="2082623">epclntab</span>&nbsp;<span class="keyword" id="2082632">struct</span><span class="op" id="2082638">{</span><span class="op" id="2082639">}</span>&nbsp;<span class="comment" id="2082641">//&nbsp;linker&nbsp;symbols</span><br>
<span class="lineno"></span><span class="op" id="2082659">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="2082662">type</span>&nbsp;<span class="ident" id="2082667">functab</span>&nbsp;<span class="keyword" id="2082675">struct</span>&nbsp;<span class="op" id="2082682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082685">entry</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2082693">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082702">funcoff</span>&nbsp;<span class="builtintype" id="2082710">uintptr</span><br>
<span class="lineno"></span><span class="op" id="2082718">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="2082721">func</span>&nbsp;<span class="ident" id="2082726">symtabinit</span><span class="op" id="2082736">(</span><span class="op" id="2082737">)</span>&nbsp;<span class="op" id="2082739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2082742">//&nbsp;See&nbsp;golang.org/s/go12symtab&nbsp;for&nbsp;header:&nbsp;0xfffffffb,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2082798">//&nbsp;two&nbsp;zero&nbsp;bytes,&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;PC&nbsp;quantum,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2082848">//&nbsp;and&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;pointer&nbsp;width&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082898">pcln</span>&nbsp;<span class="op" id="2082903">:=</span>&nbsp;<span class="op" id="2082906">(</span><span class="op" id="2082907">*</span><span class="op" id="2082908">[</span><span class="num" id="2082909">8</span><span class="op" id="2082910">]</span><span class="builtintype" id="2082911">byte</span><span class="op" id="2082915">)</span><span class="op" id="2082916">(</span><span class="ident" id="2082917">unsafe</span><span class="op" id="2082923">.</span><span class="ident" id="2082924">Pointer</span><span class="op" id="2082931">(</span><span class="op" id="2082932">&amp;</span><span class="ident" id="2082933">pclntab</span><span class="op" id="2082940">)</span><span class="op" id="2082941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2082944">pcln32</span>&nbsp;<span class="op" id="2082951">:=</span>&nbsp;<span class="op" id="2082954">(</span><span class="op" id="2082955">*</span><span class="op" id="2082956">[</span><span class="num" id="2082957">2</span><span class="op" id="2082958">]</span><span class="builtintype" id="2082959">uint32</span><span class="op" id="2082965">)</span><span class="op" id="2082966">(</span><span class="ident" id="2082967">unsafe</span><span class="op" id="2082973">.</span><span class="ident" id="2082974">Pointer</span><span class="op" id="2082981">(</span><span class="op" id="2082982">&amp;</span><span class="ident" id="2082983">pclntab</span><span class="op" id="2082990">)</span><span class="op" id="2082991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2082994">if</span>&nbsp;<span class="ident" id="2082997">pcln32</span><span class="op" id="2083003">[</span><span class="num" id="2083004">0</span><span class="op" id="2083005">]</span>&nbsp;<span class="op" id="2083007">!=</span>&nbsp;<span class="num" id="2083010">0xfffffffb</span>&nbsp;<span class="op" id="2083021">||</span>&nbsp;<span class="ident" id="2083024">pcln</span><span class="op" id="2083028">[</span><span class="num" id="2083029">4</span><span class="op" id="2083030">]</span>&nbsp;<span class="op" id="2083032">!=</span>&nbsp;<span class="num" id="2083035">0</span>&nbsp;<span class="op" id="2083037">||</span>&nbsp;<span class="ident" id="2083040">pcln</span><span class="op" id="2083044">[</span><span class="num" id="2083045">5</span><span class="op" id="2083046">]</span>&nbsp;<span class="op" id="2083048">!=</span>&nbsp;<span class="num" id="2083051">0</span>&nbsp;<span class="op" id="2083053">||</span>&nbsp;<span class="ident" id="2083056">pcln</span><span class="op" id="2083060">[</span><span class="num" id="2083061">6</span><span class="op" id="2083062">]</span>&nbsp;<span class="op" id="2083064">!=</span>&nbsp;<span class="ident" id="2083067">_PCQuantum</span>&nbsp;<span class="op" id="2083078">||</span>&nbsp;<span class="ident" id="2083081">pcln</span><span class="op" id="2083085">[</span><span class="num" id="2083086">7</span><span class="op" id="2083087">]</span>&nbsp;<span class="op" id="2083089">!=</span>&nbsp;<span class="ident" id="2083092">ptrSize</span>&nbsp;<span class="op" id="2083100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2083104">println</span><span class="op" id="2083111">(</span><span class="string" id="2083112">&#34;runtime:&nbsp;function&nbsp;symbol&nbsp;table&nbsp;header:&#34;</span><span class="op" id="2083152">,</span>&nbsp;<span class="ident" id="2083154">hex</span><span class="op" id="2083157">(</span><span class="ident" id="2083158">pcln32</span><span class="op" id="2083164">[</span><span class="num" id="2083165">0</span><span class="op" id="2083166">]</span><span class="op" id="2083167">)</span><span class="op" id="2083168">,</span>&nbsp;<span class="ident" id="2083170">hex</span><span class="op" id="2083173">(</span><span class="ident" id="2083174">pcln</span><span class="op" id="2083178">[</span><span class="num" id="2083179">4</span><span class="op" id="2083180">]</span><span class="op" id="2083181">)</span><span class="op" id="2083182">,</span>&nbsp;<span class="ident" id="2083184">hex</span><span class="op" id="2083187">(</span><span class="ident" id="2083188">pcln</span><span class="op" id="2083192">[</span><span class="num" id="2083193">5</span><span class="op" id="2083194">]</span><span class="op" id="2083195">)</span><span class="op" id="2083196">,</span>&nbsp;<span class="ident" id="2083198">hex</span><span class="op" id="2083201">(</span><span class="ident" id="2083202">pcln</span><span class="op" id="2083206">[</span><span class="num" id="2083207">6</span><span class="op" id="2083208">]</span><span class="op" id="2083209">)</span><span class="op" id="2083210">,</span>&nbsp;<span class="ident" id="2083212">hex</span><span class="op" id="2083215">(</span><span class="ident" id="2083216">pcln</span><span class="op" id="2083220">[</span><span class="num" id="2083221">7</span><span class="op" id="2083222">]</span><span class="op" id="2083223">)</span><span class="op" id="2083224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083228">gothrow</span><span class="op" id="2083235">(</span><span class="string" id="2083236">&#34;invalid&nbsp;function&nbsp;symbol&nbsp;table\n&#34;</span><span class="op" id="2083269">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2083272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2083276">//&nbsp;pclntable&nbsp;is&nbsp;all&nbsp;bytes&nbsp;of&nbsp;pclntab&nbsp;symbol.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083322">sp</span>&nbsp;<span class="op" id="2083325">:=</span>&nbsp;<span class="op" id="2083328">(</span><span class="op" id="2083329">*</span><span class="ident" id="2083330">sliceStruct</span><span class="op" id="2083341">)</span><span class="op" id="2083342">(</span><span class="ident" id="2083343">unsafe</span><span class="op" id="2083349">.</span><span class="ident" id="2083350">Pointer</span><span class="op" id="2083357">(</span><span class="op" id="2083358">&amp;</span><span class="ident" id="2083359">pclntable</span><span class="op" id="2083368">)</span><span class="op" id="2083369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083372">sp</span><span class="op" id="2083374">.</span><span class="ident" id="2083375">array</span>&nbsp;<span class="op" id="2083381">=</span>&nbsp;<span class="ident" id="2083383">unsafe</span><span class="op" id="2083389">.</span><span class="ident" id="2083390">Pointer</span><span class="op" id="2083397">(</span><span class="op" id="2083398">&amp;</span><span class="ident" id="2083399">pclntab</span><span class="op" id="2083406">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083409">sp</span><span class="op" id="2083411">.</span><span class="builtinfunc" id="2083412">len</span>&nbsp;<span class="op" id="2083416">=</span>&nbsp;<span class="builtintype" id="2083418">int</span><span class="op" id="2083421">(</span><span class="builtintype" id="2083422">uintptr</span><span class="op" id="2083429">(</span><span class="ident" id="2083430">unsafe</span><span class="op" id="2083436">.</span><span class="ident" id="2083437">Pointer</span><span class="op" id="2083444">(</span><span class="op" id="2083445">&amp;</span><span class="ident" id="2083446">epclntab</span><span class="op" id="2083454">)</span><span class="op" id="2083455">)</span>&nbsp;<span class="op" id="2083457">-</span>&nbsp;<span class="builtintype" id="2083459">uintptr</span><span class="op" id="2083466">(</span><span class="ident" id="2083467">unsafe</span><span class="op" id="2083473">.</span><span class="ident" id="2083474">Pointer</span><span class="op" id="2083481">(</span><span class="op" id="2083482">&amp;</span><span class="ident" id="2083483">pclntab</span><span class="op" id="2083490">)</span><span class="op" id="2083491">)</span><span class="op" id="2083492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083495">sp</span><span class="op" id="2083497">.</span><span class="builtinfunc" id="2083498">cap</span>&nbsp;<span class="op" id="2083502">=</span>&nbsp;<span class="ident" id="2083504">sp</span><span class="op" id="2083506">.</span><span class="builtinfunc" id="2083507">len</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2083513">//&nbsp;ftab&nbsp;is&nbsp;lookup&nbsp;table&nbsp;for&nbsp;function&nbsp;by&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083571">nftab</span>&nbsp;<span class="op" id="2083577">:=</span>&nbsp;<span class="builtintype" id="2083580">int</span><span class="op" id="2083583">(</span><span class="op" id="2083584">*</span><span class="op" id="2083585">(</span><span class="op" id="2083586">*</span><span class="builtintype" id="2083587">uintptr</span><span class="op" id="2083594">)</span><span class="op" id="2083595">(</span><span class="ident" id="2083596">add</span><span class="op" id="2083599">(</span><span class="ident" id="2083600">unsafe</span><span class="op" id="2083606">.</span><span class="ident" id="2083607">Pointer</span><span class="op" id="2083614">(</span><span class="ident" id="2083615">pcln</span><span class="op" id="2083619">)</span><span class="op" id="2083620">,</span>&nbsp;<span class="num" id="2083622">8</span><span class="op" id="2083623">)</span><span class="op" id="2083624">)</span><span class="op" id="2083625">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083628">p</span>&nbsp;<span class="op" id="2083630">:=</span>&nbsp;<span class="ident" id="2083633">add</span><span class="op" id="2083636">(</span><span class="ident" id="2083637">unsafe</span><span class="op" id="2083643">.</span><span class="ident" id="2083644">Pointer</span><span class="op" id="2083651">(</span><span class="ident" id="2083652">pcln</span><span class="op" id="2083656">)</span><span class="op" id="2083657">,</span>&nbsp;<span class="num" id="2083659">8</span><span class="op" id="2083660">+</span><span class="ident" id="2083661">ptrSize</span><span class="op" id="2083668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083671">sp</span>&nbsp;<span class="op" id="2083674">=</span>&nbsp;<span class="op" id="2083676">(</span><span class="op" id="2083677">*</span><span class="ident" id="2083678">sliceStruct</span><span class="op" id="2083689">)</span><span class="op" id="2083690">(</span><span class="ident" id="2083691">unsafe</span><span class="op" id="2083697">.</span><span class="ident" id="2083698">Pointer</span><span class="op" id="2083705">(</span><span class="op" id="2083706">&amp;</span><span class="ident" id="2083707">ftab</span><span class="op" id="2083711">)</span><span class="op" id="2083712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083715">sp</span><span class="op" id="2083717">.</span><span class="ident" id="2083718">array</span>&nbsp;<span class="op" id="2083724">=</span>&nbsp;<span class="ident" id="2083726">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083729">sp</span><span class="op" id="2083731">.</span><span class="builtinfunc" id="2083732">len</span>&nbsp;<span class="op" id="2083736">=</span>&nbsp;<span class="ident" id="2083738">nftab</span>&nbsp;<span class="op" id="2083744">+</span>&nbsp;<span class="num" id="2083746">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083749">sp</span><span class="op" id="2083751">.</span><span class="builtinfunc" id="2083752">cap</span>&nbsp;<span class="op" id="2083756">=</span>&nbsp;<span class="ident" id="2083758">sp</span><span class="op" id="2083760">.</span><span class="builtinfunc" id="2083761">len</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2083766">for</span>&nbsp;<span class="ident" id="2083770">i</span>&nbsp;<span class="op" id="2083772">:=</span>&nbsp;<span class="num" id="2083775">0</span><span class="op" id="2083776">;</span>&nbsp;<span class="ident" id="2083778">i</span>&nbsp;<span class="op" id="2083780">&lt;</span>&nbsp;<span class="ident" id="2083782">nftab</span><span class="op" id="2083787">;</span>&nbsp;<span class="ident" id="2083789">i</span><span class="op" id="2083790">++</span>&nbsp;<span class="op" id="2083793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2083797">//&nbsp;NOTE:&nbsp;ftab[nftab].entry&nbsp;is&nbsp;legal;&nbsp;it&nbsp;is&nbsp;the&nbsp;address&nbsp;beyond&nbsp;the&nbsp;final&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2083881">if</span>&nbsp;<span class="ident" id="2083884">ftab</span><span class="op" id="2083888">[</span><span class="ident" id="2083889">i</span><span class="op" id="2083890">]</span><span class="op" id="2083891">.</span><span class="ident" id="2083892">entry</span>&nbsp;<span class="op" id="2083898">&gt;</span>&nbsp;<span class="ident" id="2083900">ftab</span><span class="op" id="2083904">[</span><span class="ident" id="2083905">i</span><span class="op" id="2083906">+</span><span class="num" id="2083907">1</span><span class="op" id="2083908">]</span><span class="op" id="2083909">.</span><span class="ident" id="2083910">entry</span>&nbsp;<span class="op" id="2083916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083921">f1</span>&nbsp;<span class="op" id="2083924">:=</span>&nbsp;<span class="op" id="2083927">(</span><span class="op" id="2083928">*</span><span class="ident" id="2083929">_func</span><span class="op" id="2083934">)</span><span class="op" id="2083935">(</span><span class="ident" id="2083936">unsafe</span><span class="op" id="2083942">.</span><span class="ident" id="2083943">Pointer</span><span class="op" id="2083950">(</span><span class="op" id="2083951">&amp;</span><span class="ident" id="2083952">pclntable</span><span class="op" id="2083961">[</span><span class="ident" id="2083962">ftab</span><span class="op" id="2083966">[</span><span class="ident" id="2083967">i</span><span class="op" id="2083968">]</span><span class="op" id="2083969">.</span><span class="ident" id="2083970">funcoff</span><span class="op" id="2083977">]</span><span class="op" id="2083978">)</span><span class="op" id="2083979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2083984">f2</span>&nbsp;<span class="op" id="2083987">:=</span>&nbsp;<span class="op" id="2083990">(</span><span class="op" id="2083991">*</span><span class="ident" id="2083992">_func</span><span class="op" id="2083997">)</span><span class="op" id="2083998">(</span><span class="ident" id="2083999">unsafe</span><span class="op" id="2084005">.</span><span class="ident" id="2084006">Pointer</span><span class="op" id="2084013">(</span><span class="op" id="2084014">&amp;</span><span class="ident" id="2084015">pclntable</span><span class="op" id="2084024">[</span><span class="ident" id="2084025">ftab</span><span class="op" id="2084029">[</span><span class="ident" id="2084030">i</span><span class="op" id="2084031">+</span><span class="num" id="2084032">1</span><span class="op" id="2084033">]</span><span class="op" id="2084034">.</span><span class="ident" id="2084035">funcoff</span><span class="op" id="2084042">]</span><span class="op" id="2084043">)</span><span class="op" id="2084044">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084049">f2name</span>&nbsp;<span class="op" id="2084056">:=</span>&nbsp;<span class="string" id="2084059">&#34;end&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2084068">if</span>&nbsp;<span class="ident" id="2084071">i</span><span class="op" id="2084072">+</span><span class="num" id="2084073">1</span>&nbsp;<span class="op" id="2084075">&lt;</span>&nbsp;<span class="ident" id="2084077">nftab</span>&nbsp;<span class="op" id="2084083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084089">f2name</span>&nbsp;<span class="op" id="2084096">=</span>&nbsp;<span class="ident" id="2084098">gofuncname</span><span class="op" id="2084108">(</span><span class="ident" id="2084109">f2</span><span class="op" id="2084111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2084116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2084121">println</span><span class="op" id="2084128">(</span><span class="string" id="2084129">&#34;function&nbsp;symbol&nbsp;table&nbsp;not&nbsp;sorted&nbsp;by&nbsp;program&nbsp;counter:&#34;</span><span class="op" id="2084183">,</span>&nbsp;<span class="ident" id="2084185">hex</span><span class="op" id="2084188">(</span><span class="ident" id="2084189">ftab</span><span class="op" id="2084193">[</span><span class="ident" id="2084194">i</span><span class="op" id="2084195">]</span><span class="op" id="2084196">.</span><span class="ident" id="2084197">entry</span><span class="op" id="2084202">)</span><span class="op" id="2084203">,</span>&nbsp;<span class="ident" id="2084205">gofuncname</span><span class="op" id="2084215">(</span><span class="ident" id="2084216">f1</span><span class="op" id="2084218">)</span><span class="op" id="2084219">,</span>&nbsp;<span class="string" id="2084221">&#34;&gt;&#34;</span><span class="op" id="2084224">,</span>&nbsp;<span class="ident" id="2084226">hex</span><span class="op" id="2084229">(</span><span class="ident" id="2084230">ftab</span><span class="op" id="2084234">[</span><span class="ident" id="2084235">i</span><span class="op" id="2084236">+</span><span class="num" id="2084237">1</span><span class="op" id="2084238">]</span><span class="op" id="2084239">.</span><span class="ident" id="2084240">entry</span><span class="op" id="2084245">)</span><span class="op" id="2084246">,</span>&nbsp;<span class="ident" id="2084248">f2name</span><span class="op" id="2084254">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2084259">for</span>&nbsp;<span class="ident" id="2084263">j</span>&nbsp;<span class="op" id="2084265">:=</span>&nbsp;<span class="num" id="2084268">0</span><span class="op" id="2084269">;</span>&nbsp;<span class="ident" id="2084271">j</span>&nbsp;<span class="op" id="2084273">&lt;=</span>&nbsp;<span class="ident" id="2084276">i</span><span class="op" id="2084277">;</span>&nbsp;<span class="ident" id="2084279">j</span><span class="op" id="2084280">++</span>&nbsp;<span class="op" id="2084283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2084289">print</span><span class="op" id="2084294">(</span><span class="string" id="2084295">&#34;\t&#34;</span><span class="op" id="2084299">,</span>&nbsp;<span class="ident" id="2084301">hex</span><span class="op" id="2084304">(</span><span class="ident" id="2084305">ftab</span><span class="op" id="2084309">[</span><span class="ident" id="2084310">j</span><span class="op" id="2084311">]</span><span class="op" id="2084312">.</span><span class="ident" id="2084313">entry</span><span class="op" id="2084318">)</span><span class="op" id="2084319">,</span>&nbsp;<span class="string" id="2084321">&#34;&nbsp;&#34;</span><span class="op" id="2084324">,</span>&nbsp;<span class="ident" id="2084326">gofuncname</span><span class="op" id="2084336">(</span><span class="op" id="2084337">(</span><span class="op" id="2084338">*</span><span class="ident" id="2084339">_func</span><span class="op" id="2084344">)</span><span class="op" id="2084345">(</span><span class="ident" id="2084346">unsafe</span><span class="op" id="2084352">.</span><span class="ident" id="2084353">Pointer</span><span class="op" id="2084360">(</span><span class="op" id="2084361">&amp;</span><span class="ident" id="2084362">pclntable</span><span class="op" id="2084371">[</span><span class="ident" id="2084372">ftab</span><span class="op" id="2084376">[</span><span class="ident" id="2084377">j</span><span class="op" id="2084378">]</span><span class="op" id="2084379">.</span><span class="ident" id="2084380">funcoff</span><span class="op" id="2084387">]</span><span class="op" id="2084388">)</span><span class="op" id="2084389">)</span><span class="op" id="2084390">)</span><span class="op" id="2084391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2084396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084401">gothrow</span><span class="op" id="2084408">(</span><span class="string" id="2084409">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="2084439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2084443">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2084446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2084450">//&nbsp;The&nbsp;ftab&nbsp;ends&nbsp;with&nbsp;a&nbsp;half&nbsp;functab&nbsp;consisting&nbsp;only&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2084507">//&nbsp;&#39;entry&#39;,&nbsp;followed&nbsp;by&nbsp;a&nbsp;uint32&nbsp;giving&nbsp;the&nbsp;pcln-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2084566">//&nbsp;offset&nbsp;of&nbsp;the&nbsp;file&nbsp;table.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084596">sp</span>&nbsp;<span class="op" id="2084599">=</span>&nbsp;<span class="op" id="2084601">(</span><span class="op" id="2084602">*</span><span class="ident" id="2084603">sliceStruct</span><span class="op" id="2084614">)</span><span class="op" id="2084615">(</span><span class="ident" id="2084616">unsafe</span><span class="op" id="2084622">.</span><span class="ident" id="2084623">Pointer</span><span class="op" id="2084630">(</span><span class="op" id="2084631">&amp;</span><span class="ident" id="2084632">filetab</span><span class="op" id="2084639">)</span><span class="op" id="2084640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084643">end</span>&nbsp;<span class="op" id="2084647">:=</span>&nbsp;<span class="ident" id="2084650">unsafe</span><span class="op" id="2084656">.</span><span class="ident" id="2084657">Pointer</span><span class="op" id="2084664">(</span><span class="op" id="2084665">&amp;</span><span class="ident" id="2084666">ftab</span><span class="op" id="2084670">[</span><span class="ident" id="2084671">nftab</span><span class="op" id="2084676">]</span><span class="op" id="2084677">.</span><span class="ident" id="2084678">funcoff</span><span class="op" id="2084685">)</span>&nbsp;<span class="comment" id="2084687">//&nbsp;just&nbsp;beyond&nbsp;ftab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084708">fileoffset</span>&nbsp;<span class="op" id="2084719">:=</span>&nbsp;<span class="op" id="2084722">*</span><span class="op" id="2084723">(</span><span class="op" id="2084724">*</span><span class="builtintype" id="2084725">uint32</span><span class="op" id="2084731">)</span><span class="op" id="2084732">(</span><span class="ident" id="2084733">end</span><span class="op" id="2084736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084739">sp</span><span class="op" id="2084741">.</span><span class="ident" id="2084742">array</span>&nbsp;<span class="op" id="2084748">=</span>&nbsp;<span class="ident" id="2084750">unsafe</span><span class="op" id="2084756">.</span><span class="ident" id="2084757">Pointer</span><span class="op" id="2084764">(</span><span class="op" id="2084765">&amp;</span><span class="ident" id="2084766">pclntable</span><span class="op" id="2084775">[</span><span class="ident" id="2084776">fileoffset</span><span class="op" id="2084786">]</span><span class="op" id="2084787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2084790">//&nbsp;length&nbsp;is&nbsp;in&nbsp;first&nbsp;element&nbsp;of&nbsp;array.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2084831">//&nbsp;set&nbsp;len&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;can&nbsp;get&nbsp;first&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084877">sp</span><span class="op" id="2084879">.</span><span class="builtinfunc" id="2084880">len</span>&nbsp;<span class="op" id="2084884">=</span>&nbsp;<span class="num" id="2084886">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084889">sp</span><span class="op" id="2084891">.</span><span class="builtinfunc" id="2084892">cap</span>&nbsp;<span class="op" id="2084896">=</span>&nbsp;<span class="num" id="2084898">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084901">sp</span><span class="op" id="2084903">.</span><span class="builtinfunc" id="2084904">len</span>&nbsp;<span class="op" id="2084908">=</span>&nbsp;<span class="builtintype" id="2084910">int</span><span class="op" id="2084913">(</span><span class="ident" id="2084914">filetab</span><span class="op" id="2084921">[</span><span class="num" id="2084922">0</span><span class="op" id="2084923">]</span><span class="op" id="2084924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2084927">sp</span><span class="op" id="2084929">.</span><span class="builtinfunc" id="2084930">cap</span>&nbsp;<span class="op" id="2084934">=</span>&nbsp;<span class="ident" id="2084936">sp</span><span class="op" id="2084938">.</span><span class="builtinfunc" id="2084939">len</span><br>
<span class="lineno">100</span><span class="op" id="2084943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2084946">//&nbsp;FuncForPC&nbsp;returns&nbsp;a&nbsp;*Func&nbsp;describing&nbsp;the&nbsp;function&nbsp;that&nbsp;contains&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2085017">//&nbsp;given&nbsp;program&nbsp;counter&nbsp;address,&nbsp;or&nbsp;else&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="2085064">func</span>&nbsp;<span class="ident" id="2085069">FuncForPC</span><span class="op" id="2085078">(</span><span class="ident" id="2085079">pc</span>&nbsp;<span class="builtintype" id="2085082">uintptr</span><span class="op" id="2085089">)</span>&nbsp;<span class="op" id="2085091">*</span><span class="ident" id="2085092">Func</span>&nbsp;<span class="op" id="2085097">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2085100">return</span>&nbsp;<span class="op" id="2085107">(</span><span class="op" id="2085108">*</span><span class="ident" id="2085109">Func</span><span class="op" id="2085113">)</span><span class="op" id="2085114">(</span><span class="ident" id="2085115">unsafe</span><span class="op" id="2085121">.</span><span class="ident" id="2085122">Pointer</span><span class="op" id="2085129">(</span><span class="ident" id="2085130">findfunc</span><span class="op" id="2085138">(</span><span class="ident" id="2085139">pc</span><span class="op" id="2085141">)</span><span class="op" id="2085142">)</span><span class="op" id="2085143">)</span><br>
<span class="lineno"></span><span class="op" id="2085145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2085148">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="2085190">func</span>&nbsp;<span class="op" id="2085195">(</span><span class="ident" id="2085196">f</span>&nbsp;<span class="op" id="2085198">*</span><span class="ident" id="2085199">Func</span><span class="op" id="2085203">)</span>&nbsp;<span class="ident" id="2085205">Name</span><span class="op" id="2085209">(</span><span class="op" id="2085210">)</span>&nbsp;<span class="builtintype" id="2085212">string</span>&nbsp;<span class="op" id="2085219">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2085222">return</span>&nbsp;<span class="ident" id="2085229">gofuncname</span><span class="op" id="2085239">(</span><span class="ident" id="2085240">f</span><span class="op" id="2085241">.</span><span class="ident" id="2085242">raw</span><span class="op" id="2085245">(</span><span class="op" id="2085246">)</span><span class="op" id="2085247">)</span><br>
<span class="lineno"></span><span class="op" id="2085249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2085252">//&nbsp;Entry&nbsp;returns&nbsp;the&nbsp;entry&nbsp;address&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="2085304">func</span>&nbsp;<span class="op" id="2085309">(</span><span class="ident" id="2085310">f</span>&nbsp;<span class="op" id="2085312">*</span><span class="ident" id="2085313">Func</span><span class="op" id="2085317">)</span>&nbsp;<span class="ident" id="2085319">Entry</span><span class="op" id="2085324">(</span><span class="op" id="2085325">)</span>&nbsp;<span class="builtintype" id="2085327">uintptr</span>&nbsp;<span class="op" id="2085335">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2085338">return</span>&nbsp;<span class="ident" id="2085345">f</span><span class="op" id="2085346">.</span><span class="ident" id="2085347">raw</span><span class="op" id="2085350">(</span><span class="op" id="2085351">)</span><span class="op" id="2085352">.</span><span class="ident" id="2085353">entry</span><br>
<span class="lineno"></span><span class="op" id="2085359">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2085362">//&nbsp;FileLine&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2085419">//&nbsp;source&nbsp;code&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;program&nbsp;counter&nbsp;pc.</span><br>
<span class="lineno">120</span><span class="comment" id="2085475">//&nbsp;The&nbsp;result&nbsp;will&nbsp;not&nbsp;be&nbsp;accurate&nbsp;if&nbsp;pc&nbsp;is&nbsp;not&nbsp;a&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="2085533">//&nbsp;counter&nbsp;within&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="2085554">func</span>&nbsp;<span class="op" id="2085559">(</span><span class="ident" id="2085560">f</span>&nbsp;<span class="op" id="2085562">*</span><span class="ident" id="2085563">Func</span><span class="op" id="2085567">)</span>&nbsp;<span class="ident" id="2085569">FileLine</span><span class="op" id="2085577">(</span><span class="ident" id="2085578">pc</span>&nbsp;<span class="builtintype" id="2085581">uintptr</span><span class="op" id="2085588">)</span>&nbsp;<span class="op" id="2085590">(</span><span class="ident" id="2085591">file</span>&nbsp;<span class="builtintype" id="2085596">string</span><span class="op" id="2085602">,</span>&nbsp;<span class="ident" id="2085604">line</span>&nbsp;<span class="builtintype" id="2085609">int</span><span class="op" id="2085612">)</span>&nbsp;<span class="op" id="2085614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2085617">//&nbsp;Pass&nbsp;strict=false&nbsp;here,&nbsp;because&nbsp;anyone&nbsp;can&nbsp;call&nbsp;this&nbsp;function,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2085684">//&nbsp;and&nbsp;they&nbsp;might&nbsp;just&nbsp;be&nbsp;wrong&nbsp;about&nbsp;targetpc&nbsp;belonging&nbsp;to&nbsp;f.</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2085748">line</span>&nbsp;<span class="op" id="2085753">=</span>&nbsp;<span class="builtintype" id="2085755">int</span><span class="op" id="2085758">(</span><span class="ident" id="2085759">funcline1</span><span class="op" id="2085768">(</span><span class="ident" id="2085769">f</span><span class="op" id="2085770">.</span><span class="ident" id="2085771">raw</span><span class="op" id="2085774">(</span><span class="op" id="2085775">)</span><span class="op" id="2085776">,</span>&nbsp;<span class="ident" id="2085778">pc</span><span class="op" id="2085780">,</span>&nbsp;<span class="op" id="2085782">&amp;</span><span class="ident" id="2085783">file</span><span class="op" id="2085787">,</span>&nbsp;<span class="builtintype" id="2085789">false</span><span class="op" id="2085794">)</span><span class="op" id="2085795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2085798">return</span>&nbsp;<span class="ident" id="2085805">file</span><span class="op" id="2085809">,</span>&nbsp;<span class="ident" id="2085811">line</span><br>
<span class="lineno"></span><span class="op" id="2085816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2085819">func</span>&nbsp;<span class="ident" id="2085824">findfunc</span><span class="op" id="2085832">(</span><span class="ident" id="2085833">pc</span>&nbsp;<span class="builtintype" id="2085836">uintptr</span><span class="op" id="2085843">)</span>&nbsp;<span class="op" id="2085845">*</span><span class="ident" id="2085846">_func</span>&nbsp;<span class="op" id="2085852">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2085855">if</span>&nbsp;<span class="builtinfunc" id="2085858">len</span><span class="op" id="2085861">(</span><span class="ident" id="2085862">ftab</span><span class="op" id="2085866">)</span>&nbsp;<span class="op" id="2085868">==</span>&nbsp;<span class="num" id="2085871">0</span>&nbsp;<span class="op" id="2085873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2085877">return</span>&nbsp;<span class="ident" id="2085884">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2085889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2085893">if</span>&nbsp;<span class="ident" id="2085896">pc</span>&nbsp;<span class="op" id="2085899">&lt;</span>&nbsp;<span class="ident" id="2085901">ftab</span><span class="op" id="2085905">[</span><span class="num" id="2085906">0</span><span class="op" id="2085907">]</span><span class="op" id="2085908">.</span><span class="ident" id="2085909">entry</span>&nbsp;<span class="op" id="2085915">||</span>&nbsp;<span class="ident" id="2085918">pc</span>&nbsp;<span class="op" id="2085921">&gt;=</span>&nbsp;<span class="ident" id="2085924">ftab</span><span class="op" id="2085928">[</span><span class="builtinfunc" id="2085929">len</span><span class="op" id="2085932">(</span><span class="ident" id="2085933">ftab</span><span class="op" id="2085937">)</span><span class="op" id="2085938">-</span><span class="num" id="2085939">1</span><span class="op" id="2085940">]</span><span class="op" id="2085941">.</span><span class="ident" id="2085942">entry</span>&nbsp;<span class="op" id="2085948">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2085952">return</span>&nbsp;<span class="ident" id="2085959">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2085964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2085968">//&nbsp;binary&nbsp;search&nbsp;to&nbsp;find&nbsp;func&nbsp;with&nbsp;entry&nbsp;&lt;=&nbsp;pc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086017">lo</span>&nbsp;<span class="op" id="2086020">:=</span>&nbsp;<span class="num" id="2086023">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086026">nf</span>&nbsp;<span class="op" id="2086029">:=</span>&nbsp;<span class="builtinfunc" id="2086032">len</span><span class="op" id="2086035">(</span><span class="ident" id="2086036">ftab</span><span class="op" id="2086040">)</span>&nbsp;<span class="op" id="2086042">-</span>&nbsp;<span class="num" id="2086044">1</span>&nbsp;<span class="comment" id="2086046">//&nbsp;last&nbsp;entry&nbsp;is&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086073">for</span>&nbsp;<span class="ident" id="2086077">nf</span>&nbsp;<span class="op" id="2086080">&gt;</span>&nbsp;<span class="num" id="2086082">0</span>&nbsp;<span class="op" id="2086084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086088">n</span>&nbsp;<span class="op" id="2086090">:=</span>&nbsp;<span class="ident" id="2086093">nf</span>&nbsp;<span class="op" id="2086096">/</span>&nbsp;<span class="num" id="2086098">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086102">f</span>&nbsp;<span class="op" id="2086104">:=</span>&nbsp;<span class="op" id="2086107">&amp;</span><span class="ident" id="2086108">ftab</span><span class="op" id="2086112">[</span><span class="ident" id="2086113">lo</span><span class="op" id="2086115">+</span><span class="ident" id="2086116">n</span><span class="op" id="2086117">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086121">if</span>&nbsp;<span class="ident" id="2086124">f</span><span class="op" id="2086125">.</span><span class="ident" id="2086126">entry</span>&nbsp;<span class="op" id="2086132">&lt;=</span>&nbsp;<span class="ident" id="2086135">pc</span>&nbsp;<span class="op" id="2086138">&amp;&amp;</span>&nbsp;<span class="ident" id="2086141">pc</span>&nbsp;<span class="op" id="2086144">&lt;</span>&nbsp;<span class="ident" id="2086146">ftab</span><span class="op" id="2086150">[</span><span class="ident" id="2086151">lo</span><span class="op" id="2086153">+</span><span class="ident" id="2086154">n</span><span class="op" id="2086155">+</span><span class="num" id="2086156">1</span><span class="op" id="2086157">]</span><span class="op" id="2086158">.</span><span class="ident" id="2086159">entry</span>&nbsp;<span class="op" id="2086165">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086170">return</span>&nbsp;<span class="op" id="2086177">(</span><span class="op" id="2086178">*</span><span class="ident" id="2086179">_func</span><span class="op" id="2086184">)</span><span class="op" id="2086185">(</span><span class="ident" id="2086186">unsafe</span><span class="op" id="2086192">.</span><span class="ident" id="2086193">Pointer</span><span class="op" id="2086200">(</span><span class="op" id="2086201">&amp;</span><span class="ident" id="2086202">pclntable</span><span class="op" id="2086211">[</span><span class="ident" id="2086212">f</span><span class="op" id="2086213">.</span><span class="ident" id="2086214">funcoff</span><span class="op" id="2086221">]</span><span class="op" id="2086222">)</span><span class="op" id="2086223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2086227">}</span>&nbsp;<span class="keyword" id="2086229">else</span>&nbsp;<span class="keyword" id="2086234">if</span>&nbsp;<span class="ident" id="2086237">pc</span>&nbsp;<span class="op" id="2086240">&lt;</span>&nbsp;<span class="ident" id="2086242">f</span><span class="op" id="2086243">.</span><span class="ident" id="2086244">entry</span>&nbsp;<span class="op" id="2086250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086255">nf</span>&nbsp;<span class="op" id="2086258">=</span>&nbsp;<span class="ident" id="2086260">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2086264">}</span>&nbsp;<span class="keyword" id="2086266">else</span>&nbsp;<span class="op" id="2086271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086276">lo</span>&nbsp;<span class="op" id="2086279">+=</span>&nbsp;<span class="ident" id="2086282">n</span>&nbsp;<span class="op" id="2086284">+</span>&nbsp;<span class="num" id="2086286">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086291">nf</span>&nbsp;<span class="op" id="2086294">-=</span>&nbsp;<span class="ident" id="2086297">n</span>&nbsp;<span class="op" id="2086299">+</span>&nbsp;<span class="num" id="2086301">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2086305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2086308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086312">gothrow</span><span class="op" id="2086319">(</span><span class="string" id="2086320">&#34;findfunc:&nbsp;binary&nbsp;search&nbsp;failed&#34;</span><span class="op" id="2086352">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086355">return</span>&nbsp;<span class="ident" id="2086362">nil</span><br>
<span class="lineno"></span><span class="op" id="2086366">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2086369">func</span>&nbsp;<span class="ident" id="2086374">pcvalue</span><span class="op" id="2086381">(</span><span class="ident" id="2086382">f</span>&nbsp;<span class="op" id="2086384">*</span><span class="ident" id="2086385">_func</span><span class="op" id="2086390">,</span>&nbsp;<span class="ident" id="2086392">off</span>&nbsp;<span class="builtintype" id="2086396">int32</span><span class="op" id="2086401">,</span>&nbsp;<span class="ident" id="2086403">targetpc</span>&nbsp;<span class="builtintype" id="2086412">uintptr</span><span class="op" id="2086419">,</span>&nbsp;<span class="ident" id="2086421">strict</span>&nbsp;<span class="builtintype" id="2086428">bool</span><span class="op" id="2086432">)</span>&nbsp;<span class="builtintype" id="2086434">int32</span>&nbsp;<span class="op" id="2086440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086443">if</span>&nbsp;<span class="ident" id="2086446">off</span>&nbsp;<span class="op" id="2086450">==</span>&nbsp;<span class="num" id="2086453">0</span>&nbsp;<span class="op" id="2086455">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086459">return</span>&nbsp;<span class="op" id="2086466">-</span><span class="num" id="2086467">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2086470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086473">p</span>&nbsp;<span class="op" id="2086475">:=</span>&nbsp;<span class="ident" id="2086478">pclntable</span><span class="op" id="2086487">[</span><span class="ident" id="2086488">off</span><span class="op" id="2086491">:</span><span class="op" id="2086492">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086495">pc</span>&nbsp;<span class="op" id="2086498">:=</span>&nbsp;<span class="ident" id="2086501">f</span><span class="op" id="2086502">.</span><span class="ident" id="2086503">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086510">val</span>&nbsp;<span class="op" id="2086514">:=</span>&nbsp;<span class="builtintype" id="2086517">int32</span><span class="op" id="2086522">(</span><span class="op" id="2086523">-</span><span class="num" id="2086524">1</span><span class="op" id="2086525">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086528">for</span>&nbsp;<span class="op" id="2086532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086536">var</span>&nbsp;<span class="ident" id="2086540">ok</span>&nbsp;<span class="builtintype" id="2086543">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086550">p</span><span class="op" id="2086551">,</span>&nbsp;<span class="ident" id="2086553">ok</span>&nbsp;<span class="op" id="2086556">=</span>&nbsp;<span class="ident" id="2086558">step</span><span class="op" id="2086562">(</span><span class="ident" id="2086563">p</span><span class="op" id="2086564">,</span>&nbsp;<span class="op" id="2086566">&amp;</span><span class="ident" id="2086567">pc</span><span class="op" id="2086569">,</span>&nbsp;<span class="op" id="2086571">&amp;</span><span class="ident" id="2086572">val</span><span class="op" id="2086575">,</span>&nbsp;<span class="ident" id="2086577">pc</span>&nbsp;<span class="op" id="2086580">==</span>&nbsp;<span class="ident" id="2086583">f</span><span class="op" id="2086584">.</span><span class="ident" id="2086585">entry</span><span class="op" id="2086590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086594">if</span>&nbsp;<span class="op" id="2086597">!</span><span class="ident" id="2086598">ok</span>&nbsp;<span class="op" id="2086601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086606">break</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2086614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086618">if</span>&nbsp;<span class="ident" id="2086621">targetpc</span>&nbsp;<span class="op" id="2086630">&lt;</span>&nbsp;<span class="ident" id="2086632">pc</span>&nbsp;<span class="op" id="2086635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086640">return</span>&nbsp;<span class="ident" id="2086647">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2086653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2086656">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2086660">//&nbsp;If&nbsp;there&nbsp;was&nbsp;a&nbsp;table,&nbsp;it&nbsp;should&nbsp;have&nbsp;covered&nbsp;all&nbsp;program&nbsp;counters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2086731">//&nbsp;If&nbsp;not,&nbsp;something&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086763">if</span>&nbsp;<span class="ident" id="2086766">panicking</span>&nbsp;<span class="op" id="2086776">!=</span>&nbsp;<span class="num" id="2086779">0</span>&nbsp;<span class="op" id="2086781">||</span>&nbsp;<span class="op" id="2086784">!</span><span class="ident" id="2086785">strict</span>&nbsp;<span class="op" id="2086792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086796">return</span>&nbsp;<span class="op" id="2086803">-</span><span class="num" id="2086804">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2086807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2086811">print</span><span class="op" id="2086816">(</span><span class="string" id="2086817">&#34;runtime:&nbsp;invalid&nbsp;pc-encoded&nbsp;table&nbsp;f=&#34;</span><span class="op" id="2086855">,</span>&nbsp;<span class="ident" id="2086857">gofuncname</span><span class="op" id="2086867">(</span><span class="ident" id="2086868">f</span><span class="op" id="2086869">)</span><span class="op" id="2086870">,</span>&nbsp;<span class="string" id="2086872">&#34;&nbsp;pc=&#34;</span><span class="op" id="2086878">,</span>&nbsp;<span class="ident" id="2086880">hex</span><span class="op" id="2086883">(</span><span class="ident" id="2086884">pc</span><span class="op" id="2086886">)</span><span class="op" id="2086887">,</span>&nbsp;<span class="string" id="2086889">&#34;&nbsp;targetpc=&#34;</span><span class="op" id="2086901">,</span>&nbsp;<span class="ident" id="2086903">hex</span><span class="op" id="2086906">(</span><span class="ident" id="2086907">targetpc</span><span class="op" id="2086915">)</span><span class="op" id="2086916">,</span>&nbsp;<span class="string" id="2086918">&#34;&nbsp;tab=&#34;</span><span class="op" id="2086925">,</span>&nbsp;<span class="ident" id="2086927">p</span><span class="op" id="2086928">,</span>&nbsp;<span class="string" id="2086930">&#34;\n&#34;</span><span class="op" id="2086934">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086938">p</span>&nbsp;<span class="op" id="2086940">=</span>&nbsp;<span class="ident" id="2086942">pclntable</span><span class="op" id="2086951">[</span><span class="ident" id="2086952">off</span><span class="op" id="2086955">:</span><span class="op" id="2086956">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086959">pc</span>&nbsp;<span class="op" id="2086962">=</span>&nbsp;<span class="ident" id="2086964">f</span><span class="op" id="2086965">.</span><span class="ident" id="2086966">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2086973">val</span>&nbsp;<span class="op" id="2086977">=</span>&nbsp;<span class="op" id="2086979">-</span><span class="num" id="2086980">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086983">for</span>&nbsp;<span class="op" id="2086987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2086991">var</span>&nbsp;<span class="ident" id="2086995">ok</span>&nbsp;<span class="builtintype" id="2086998">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2087005">p</span><span class="op" id="2087006">,</span>&nbsp;<span class="ident" id="2087008">ok</span>&nbsp;<span class="op" id="2087011">=</span>&nbsp;<span class="ident" id="2087013">step</span><span class="op" id="2087017">(</span><span class="ident" id="2087018">p</span><span class="op" id="2087019">,</span>&nbsp;<span class="op" id="2087021">&amp;</span><span class="ident" id="2087022">pc</span><span class="op" id="2087024">,</span>&nbsp;<span class="op" id="2087026">&amp;</span><span class="ident" id="2087027">val</span><span class="op" id="2087030">,</span>&nbsp;<span class="ident" id="2087032">pc</span>&nbsp;<span class="op" id="2087035">==</span>&nbsp;<span class="ident" id="2087038">f</span><span class="op" id="2087039">.</span><span class="ident" id="2087040">entry</span><span class="op" id="2087045">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087049">if</span>&nbsp;<span class="op" id="2087052">!</span><span class="ident" id="2087053">ok</span>&nbsp;<span class="op" id="2087056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087061">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2087069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2087073">print</span><span class="op" id="2087078">(</span><span class="string" id="2087079">&#34;\tvalue=&#34;</span><span class="op" id="2087089">,</span>&nbsp;<span class="ident" id="2087091">val</span><span class="op" id="2087094">,</span>&nbsp;<span class="string" id="2087096">&#34;&nbsp;until&nbsp;pc=&#34;</span><span class="op" id="2087108">,</span>&nbsp;<span class="ident" id="2087110">hex</span><span class="op" id="2087113">(</span><span class="ident" id="2087114">pc</span><span class="op" id="2087116">)</span><span class="op" id="2087117">,</span>&nbsp;<span class="string" id="2087119">&#34;\n&#34;</span><span class="op" id="2087123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2087126">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2087130">gothrow</span><span class="op" id="2087137">(</span><span class="string" id="2087138">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="2087168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087171">return</span>&nbsp;<span class="op" id="2087178">-</span><span class="num" id="2087179">1</span><br>
<span class="lineno"></span><span class="op" id="2087181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="2087184">func</span>&nbsp;<span class="ident" id="2087189">funcname</span><span class="op" id="2087197">(</span><span class="ident" id="2087198">f</span>&nbsp;<span class="op" id="2087200">*</span><span class="ident" id="2087201">_func</span><span class="op" id="2087206">)</span>&nbsp;<span class="op" id="2087208">*</span><span class="builtintype" id="2087209">byte</span>&nbsp;<span class="op" id="2087214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087217">if</span>&nbsp;<span class="ident" id="2087220">f</span>&nbsp;<span class="op" id="2087222">==</span>&nbsp;<span class="ident" id="2087225">nil</span>&nbsp;<span class="op" id="2087229">||</span>&nbsp;<span class="ident" id="2087232">f</span><span class="op" id="2087233">.</span><span class="ident" id="2087234">nameoff</span>&nbsp;<span class="op" id="2087242">==</span>&nbsp;<span class="num" id="2087245">0</span>&nbsp;<span class="op" id="2087247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087251">return</span>&nbsp;<span class="ident" id="2087258">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2087263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087266">return</span>&nbsp;<span class="op" id="2087273">(</span><span class="op" id="2087274">*</span><span class="builtintype" id="2087275">byte</span><span class="op" id="2087279">)</span><span class="op" id="2087280">(</span><span class="ident" id="2087281">unsafe</span><span class="op" id="2087287">.</span><span class="ident" id="2087288">Pointer</span><span class="op" id="2087295">(</span><span class="op" id="2087296">&amp;</span><span class="ident" id="2087297">pclntable</span><span class="op" id="2087306">[</span><span class="ident" id="2087307">f</span><span class="op" id="2087308">.</span><span class="ident" id="2087309">nameoff</span><span class="op" id="2087316">]</span><span class="op" id="2087317">)</span><span class="op" id="2087318">)</span><br>
<span class="lineno">205</span><span class="op" id="2087320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2087323">func</span>&nbsp;<span class="ident" id="2087328">gofuncname</span><span class="op" id="2087338">(</span><span class="ident" id="2087339">f</span>&nbsp;<span class="op" id="2087341">*</span><span class="ident" id="2087342">_func</span><span class="op" id="2087347">)</span>&nbsp;<span class="builtintype" id="2087349">string</span>&nbsp;<span class="op" id="2087356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087359">return</span>&nbsp;<span class="ident" id="2087366">gostringnocopy</span><span class="op" id="2087380">(</span><span class="ident" id="2087381">funcname</span><span class="op" id="2087389">(</span><span class="ident" id="2087390">f</span><span class="op" id="2087391">)</span><span class="op" id="2087392">)</span><br>
<span class="lineno"></span><span class="op" id="2087394">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="2087397">func</span>&nbsp;<span class="ident" id="2087402">funcline1</span><span class="op" id="2087411">(</span><span class="ident" id="2087412">f</span>&nbsp;<span class="op" id="2087414">*</span><span class="ident" id="2087415">_func</span><span class="op" id="2087420">,</span>&nbsp;<span class="ident" id="2087422">targetpc</span>&nbsp;<span class="builtintype" id="2087431">uintptr</span><span class="op" id="2087438">,</span>&nbsp;<span class="ident" id="2087440">file</span>&nbsp;<span class="op" id="2087445">*</span><span class="builtintype" id="2087446">string</span><span class="op" id="2087452">,</span>&nbsp;<span class="ident" id="2087454">strict</span>&nbsp;<span class="builtintype" id="2087461">bool</span><span class="op" id="2087465">)</span>&nbsp;<span class="builtintype" id="2087467">int32</span>&nbsp;<span class="op" id="2087473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2087476">*</span><span class="ident" id="2087477">file</span>&nbsp;<span class="op" id="2087482">=</span>&nbsp;<span class="string" id="2087484">&#34;?&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2087489">fileno</span>&nbsp;<span class="op" id="2087496">:=</span>&nbsp;<span class="builtintype" id="2087499">int</span><span class="op" id="2087502">(</span><span class="ident" id="2087503">pcvalue</span><span class="op" id="2087510">(</span><span class="ident" id="2087511">f</span><span class="op" id="2087512">,</span>&nbsp;<span class="ident" id="2087514">f</span><span class="op" id="2087515">.</span><span class="ident" id="2087516">pcfile</span><span class="op" id="2087522">,</span>&nbsp;<span class="ident" id="2087524">targetpc</span><span class="op" id="2087532">,</span>&nbsp;<span class="ident" id="2087534">strict</span><span class="op" id="2087540">)</span><span class="op" id="2087541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2087544">line</span>&nbsp;<span class="op" id="2087549">:=</span>&nbsp;<span class="ident" id="2087552">pcvalue</span><span class="op" id="2087559">(</span><span class="ident" id="2087560">f</span><span class="op" id="2087561">,</span>&nbsp;<span class="ident" id="2087563">f</span><span class="op" id="2087564">.</span><span class="ident" id="2087565">pcln</span><span class="op" id="2087569">,</span>&nbsp;<span class="ident" id="2087571">targetpc</span><span class="op" id="2087579">,</span>&nbsp;<span class="ident" id="2087581">strict</span><span class="op" id="2087587">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087590">if</span>&nbsp;<span class="ident" id="2087593">fileno</span>&nbsp;<span class="op" id="2087600">==</span>&nbsp;<span class="op" id="2087603">-</span><span class="num" id="2087604">1</span>&nbsp;<span class="op" id="2087606">||</span>&nbsp;<span class="ident" id="2087609">line</span>&nbsp;<span class="op" id="2087614">==</span>&nbsp;<span class="op" id="2087617">-</span><span class="num" id="2087618">1</span>&nbsp;<span class="op" id="2087620">||</span>&nbsp;<span class="ident" id="2087623">fileno</span>&nbsp;<span class="op" id="2087630">&gt;=</span>&nbsp;<span class="builtinfunc" id="2087633">len</span><span class="op" id="2087636">(</span><span class="ident" id="2087637">filetab</span><span class="op" id="2087644">)</span>&nbsp;<span class="op" id="2087646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2087650">//&nbsp;print(&#34;looking&nbsp;for&nbsp;&#34;,&nbsp;hex(targetpc),&nbsp;&#34;&nbsp;in&nbsp;&#34;,&nbsp;gofuncname(f),&nbsp;&#34;&nbsp;got&nbsp;file=&#34;,&nbsp;fileno,&nbsp;&#34;&nbsp;line=&#34;,&nbsp;lineno,&nbsp;&#34;\n&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087761">return</span>&nbsp;<span class="num" id="2087768">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2087771">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2087774">*</span><span class="ident" id="2087775">file</span>&nbsp;<span class="op" id="2087780">=</span>&nbsp;<span class="ident" id="2087782">gostringnocopy</span><span class="op" id="2087796">(</span><span class="op" id="2087797">&amp;</span><span class="ident" id="2087798">pclntable</span><span class="op" id="2087807">[</span><span class="ident" id="2087808">filetab</span><span class="op" id="2087815">[</span><span class="ident" id="2087816">fileno</span><span class="op" id="2087822">]</span><span class="op" id="2087823">]</span><span class="op" id="2087824">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087827">return</span>&nbsp;<span class="ident" id="2087834">line</span><br>
<span class="lineno"></span><span class="op" id="2087839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2087842">func</span>&nbsp;<span class="ident" id="2087847">funcline</span><span class="op" id="2087855">(</span><span class="ident" id="2087856">f</span>&nbsp;<span class="op" id="2087858">*</span><span class="ident" id="2087859">_func</span><span class="op" id="2087864">,</span>&nbsp;<span class="ident" id="2087866">targetpc</span>&nbsp;<span class="builtintype" id="2087875">uintptr</span><span class="op" id="2087882">,</span>&nbsp;<span class="ident" id="2087884">file</span>&nbsp;<span class="op" id="2087889">*</span><span class="builtintype" id="2087890">string</span><span class="op" id="2087896">)</span>&nbsp;<span class="builtintype" id="2087898">int32</span>&nbsp;<span class="op" id="2087904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2087907">return</span>&nbsp;<span class="ident" id="2087914">funcline1</span><span class="op" id="2087923">(</span><span class="ident" id="2087924">f</span><span class="op" id="2087925">,</span>&nbsp;<span class="ident" id="2087927">targetpc</span><span class="op" id="2087935">,</span>&nbsp;<span class="ident" id="2087937">file</span><span class="op" id="2087941">,</span>&nbsp;<span class="builtintype" id="2087943">true</span><span class="op" id="2087947">)</span><br>
<span class="lineno">225</span><span class="op" id="2087949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2087952">func</span>&nbsp;<span class="ident" id="2087957">funcspdelta</span><span class="op" id="2087968">(</span><span class="ident" id="2087969">f</span>&nbsp;<span class="op" id="2087971">*</span><span class="ident" id="2087972">_func</span><span class="op" id="2087977">,</span>&nbsp;<span class="ident" id="2087979">targetpc</span>&nbsp;<span class="builtintype" id="2087988">uintptr</span><span class="op" id="2087995">)</span>&nbsp;<span class="builtintype" id="2087997">int32</span>&nbsp;<span class="op" id="2088003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2088006">x</span>&nbsp;<span class="op" id="2088008">:=</span>&nbsp;<span class="ident" id="2088011">pcvalue</span><span class="op" id="2088018">(</span><span class="ident" id="2088019">f</span><span class="op" id="2088020">,</span>&nbsp;<span class="ident" id="2088022">f</span><span class="op" id="2088023">.</span><span class="ident" id="2088024">pcsp</span><span class="op" id="2088028">,</span>&nbsp;<span class="ident" id="2088030">targetpc</span><span class="op" id="2088038">,</span>&nbsp;<span class="builtintype" id="2088040">true</span><span class="op" id="2088044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2088047">if</span>&nbsp;<span class="ident" id="2088050">x</span><span class="op" id="2088051">&amp;</span><span class="op" id="2088052">(</span><span class="ident" id="2088053">ptrSize</span><span class="op" id="2088060">-</span><span class="num" id="2088061">1</span><span class="op" id="2088062">)</span>&nbsp;<span class="op" id="2088064">!=</span>&nbsp;<span class="num" id="2088067">0</span>&nbsp;<span class="op" id="2088069">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2088073">print</span><span class="op" id="2088078">(</span><span class="string" id="2088079">&#34;invalid&nbsp;spdelta&nbsp;&#34;</span><span class="op" id="2088097">,</span>&nbsp;<span class="ident" id="2088099">hex</span><span class="op" id="2088102">(</span><span class="ident" id="2088103">f</span><span class="op" id="2088104">.</span><span class="ident" id="2088105">entry</span><span class="op" id="2088110">)</span><span class="op" id="2088111">,</span>&nbsp;<span class="string" id="2088113">&#34;&nbsp;&#34;</span><span class="op" id="2088116">,</span>&nbsp;<span class="ident" id="2088118">hex</span><span class="op" id="2088121">(</span><span class="ident" id="2088122">targetpc</span><span class="op" id="2088130">)</span><span class="op" id="2088131">,</span>&nbsp;<span class="string" id="2088133">&#34;&nbsp;&#34;</span><span class="op" id="2088136">,</span>&nbsp;<span class="ident" id="2088138">hex</span><span class="op" id="2088141">(</span><span class="ident" id="2088142">f</span><span class="op" id="2088143">.</span><span class="ident" id="2088144">pcsp</span><span class="op" id="2088148">)</span><span class="op" id="2088149">,</span>&nbsp;<span class="string" id="2088151">&#34;&nbsp;&#34;</span><span class="op" id="2088154">,</span>&nbsp;<span class="ident" id="2088156">x</span><span class="op" id="2088157">,</span>&nbsp;<span class="string" id="2088159">&#34;\n&#34;</span><span class="op" id="2088163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2088166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2088169">return</span>&nbsp;<span class="ident" id="2088176">x</span><br>
<span class="lineno"></span><span class="op" id="2088178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2088181">func</span>&nbsp;<span class="ident" id="2088186">pcdatavalue</span><span class="op" id="2088197">(</span><span class="ident" id="2088198">f</span>&nbsp;<span class="op" id="2088200">*</span><span class="ident" id="2088201">_func</span><span class="op" id="2088206">,</span>&nbsp;<span class="ident" id="2088208">table</span>&nbsp;<span class="builtintype" id="2088214">int32</span><span class="op" id="2088219">,</span>&nbsp;<span class="ident" id="2088221">targetpc</span>&nbsp;<span class="builtintype" id="2088230">uintptr</span><span class="op" id="2088237">)</span>&nbsp;<span class="builtintype" id="2088239">int32</span>&nbsp;<span class="op" id="2088245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2088248">if</span>&nbsp;<span class="ident" id="2088251">table</span>&nbsp;<span class="op" id="2088257">&lt;</span>&nbsp;<span class="num" id="2088259">0</span>&nbsp;<span class="op" id="2088261">||</span>&nbsp;<span class="ident" id="2088264">table</span>&nbsp;<span class="op" id="2088270">&gt;=</span>&nbsp;<span class="ident" id="2088273">f</span><span class="op" id="2088274">.</span><span class="ident" id="2088275">npcdata</span>&nbsp;<span class="op" id="2088283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2088287">return</span>&nbsp;<span class="op" id="2088294">-</span><span class="num" id="2088295">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2088298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2088301">off</span>&nbsp;<span class="op" id="2088305">:=</span>&nbsp;<span class="op" id="2088308">*</span><span class="op" id="2088309">(</span><span class="op" id="2088310">*</span><span class="builtintype" id="2088311">int32</span><span class="op" id="2088316">)</span><span class="op" id="2088317">(</span><span class="ident" id="2088318">add</span><span class="op" id="2088321">(</span><span class="ident" id="2088322">unsafe</span><span class="op" id="2088328">.</span><span class="ident" id="2088329">Pointer</span><span class="op" id="2088336">(</span><span class="op" id="2088337">&amp;</span><span class="ident" id="2088338">f</span><span class="op" id="2088339">.</span><span class="ident" id="2088340">nfuncdata</span><span class="op" id="2088349">)</span><span class="op" id="2088350">,</span>&nbsp;<span class="ident" id="2088352">unsafe</span><span class="op" id="2088358">.</span><span class="ident" id="2088359">Sizeof</span><span class="op" id="2088365">(</span><span class="ident" id="2088366">f</span><span class="op" id="2088367">.</span><span class="ident" id="2088368">nfuncdata</span><span class="op" id="2088377">)</span><span class="op" id="2088378">+</span><span class="builtintype" id="2088379">uintptr</span><span class="op" id="2088386">(</span><span class="ident" id="2088387">table</span><span class="op" id="2088392">)</span><span class="op" id="2088393">*</span><span class="num" id="2088394">4</span><span class="op" id="2088395">)</span><span class="op" id="2088396">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2088399">return</span>&nbsp;<span class="ident" id="2088406">pcvalue</span><span class="op" id="2088413">(</span><span class="ident" id="2088414">f</span><span class="op" id="2088415">,</span>&nbsp;<span class="ident" id="2088417">off</span><span class="op" id="2088420">,</span>&nbsp;<span class="ident" id="2088422">targetpc</span><span class="op" id="2088430">,</span>&nbsp;<span class="builtintype" id="2088432">true</span><span class="op" id="2088436">)</span><br>
<span class="lineno"></span><span class="op" id="2088438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2088441">func</span>&nbsp;<span class="ident" id="2088446">funcdata</span><span class="op" id="2088454">(</span><span class="ident" id="2088455">f</span>&nbsp;<span class="op" id="2088457">*</span><span class="ident" id="2088458">_func</span><span class="op" id="2088463">,</span>&nbsp;<span class="ident" id="2088465">i</span>&nbsp;<span class="builtintype" id="2088467">int32</span><span class="op" id="2088472">)</span>&nbsp;<span class="ident" id="2088474">unsafe</span><span class="op" id="2088480">.</span><span class="ident" id="2088481">Pointer</span>&nbsp;<span class="op" id="2088489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2088492">if</span>&nbsp;<span class="ident" id="2088495">i</span>&nbsp;<span class="op" id="2088497">&lt;</span>&nbsp;<span class="num" id="2088499">0</span>&nbsp;<span class="op" id="2088501">||</span>&nbsp;<span class="ident" id="2088504">i</span>&nbsp;<span class="op" id="2088506">&gt;=</span>&nbsp;<span class="ident" id="2088509">f</span><span class="op" id="2088510">.</span><span class="ident" id="2088511">nfuncdata</span>&nbsp;<span class="op" id="2088521">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2088525">return</span>&nbsp;<span class="ident" id="2088532">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2088537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2088540">p</span>&nbsp;<span class="op" id="2088542">:=</span>&nbsp;<span class="ident" id="2088545">add</span><span class="op" id="2088548">(</span><span class="ident" id="2088549">unsafe</span><span class="op" id="2088555">.</span><span class="ident" id="2088556">Pointer</span><span class="op" id="2088563">(</span><span class="op" id="2088564">&amp;</span><span class="ident" id="2088565">f</span><span class="op" id="2088566">.</span><span class="ident" id="2088567">nfuncdata</span><span class="op" id="2088576">)</span><span class="op" id="2088577">,</span>&nbsp;<span class="ident" id="2088579">unsafe</span><span class="op" id="2088585">.</span><span class="ident" id="2088586">Sizeof</span><span class="op" id="2088592">(</span><span class="ident" id="2088593">f</span><span class="op" id="2088594">.</span><span class="ident" id="2088595">nfuncdata</span><span class="op" id="2088604">)</span><span class="op" id="2088605">+</span><span class="builtintype" id="2088606">uintptr</span><span class="op" id="2088613">(</span><span class="ident" id="2088614">f</span><span class="op" id="2088615">.</span><span class="ident" id="2088616">npcdata</span><span class="op" id="2088623">)</span><span class="op" id="2088624">*</span><span class="num" id="2088625">4</span><span class="op" id="2088626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2088629">if</span>&nbsp;<span class="ident" id="2088632">ptrSize</span>&nbsp;<span class="op" id="2088640">==</span>&nbsp;<span class="num" id="2088643">8</span>&nbsp;<span class="op" id="2088645">&amp;&amp;</span>&nbsp;<span class="builtintype" id="2088648">uintptr</span><span class="op" id="2088655">(</span><span class="ident" id="2088656">p</span><span class="op" id="2088657">)</span><span class="op" id="2088658">&amp;</span><span class="num" id="2088659">4</span>&nbsp;<span class="op" id="2088661">!=</span>&nbsp;<span class="num" id="2088664">0</span>&nbsp;<span class="op" id="2088666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2088670">if</span>&nbsp;<span class="builtintype" id="2088673">uintptr</span><span class="op" id="2088680">(</span><span class="ident" id="2088681">unsafe</span><span class="op" id="2088687">.</span><span class="ident" id="2088688">Pointer</span><span class="op" id="2088695">(</span><span class="ident" id="2088696">f</span><span class="op" id="2088697">)</span><span class="op" id="2088698">)</span><span class="op" id="2088699">&amp;</span><span class="num" id="2088700">4</span>&nbsp;<span class="op" id="2088702">!=</span>&nbsp;<span class="num" id="2088705">0</span>&nbsp;<span class="op" id="2088707">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="2088712">println</span><span class="op" id="2088719">(</span><span class="string" id="2088720">&#34;runtime:&nbsp;misaligned&nbsp;func&#34;</span><span class="op" id="2088746">,</span>&nbsp;<span class="ident" id="2088748">f</span><span class="op" id="2088749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2088753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2088757">p</span>&nbsp;<span class="op" id="2088759">=</span>&nbsp;<span class="ident" id="2088761">add</span><span class="op" id="2088764">(</span><span class="ident" id="2088765">p</span><span class="op" id="2088766">,</span>&nbsp;<span class="num" id="2088768">4</span><span class="op" id="2088769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2088772">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2088775">return</span>&nbsp;<span class="op" id="2088782">*</span><span class="op" id="2088783">(</span><span class="op" id="2088784">*</span><span class="ident" id="2088785">unsafe</span><span class="op" id="2088791">.</span><span class="ident" id="2088792">Pointer</span><span class="op" id="2088799">)</span><span class="op" id="2088800">(</span><span class="ident" id="2088801">add</span><span class="op" id="2088804">(</span><span class="ident" id="2088805">p</span><span class="op" id="2088806">,</span>&nbsp;<span class="builtintype" id="2088808">uintptr</span><span class="op" id="2088815">(</span><span class="ident" id="2088816">i</span><span class="op" id="2088817">)</span><span class="op" id="2088818">*</span><span class="ident" id="2088819">ptrSize</span><span class="op" id="2088826">)</span><span class="op" id="2088827">)</span><br>
<span class="lineno">255</span><span class="op" id="2088829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2088832">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="2088898">func</span>&nbsp;<span class="ident" id="2088903">step</span><span class="op" id="2088907">(</span><span class="ident" id="2088908">p</span>&nbsp;<span class="op" id="2088910">[</span><span class="op" id="2088911">]</span><span class="builtintype" id="2088912">byte</span><span class="op" id="2088916">,</span>&nbsp;<span class="ident" id="2088918">pc</span>&nbsp;<span class="op" id="2088921">*</span><span class="builtintype" id="2088922">uintptr</span><span class="op" id="2088929">,</span>&nbsp;<span class="ident" id="2088931">val</span>&nbsp;<span class="op" id="2088935">*</span><span class="builtintype" id="2088936">int32</span><span class="op" id="2088941">,</span>&nbsp;<span class="ident" id="2088943">first</span>&nbsp;<span class="builtintype" id="2088949">bool</span><span class="op" id="2088953">)</span>&nbsp;<span class="op" id="2088955">(</span><span class="ident" id="2088956">newp</span>&nbsp;<span class="op" id="2088961">[</span><span class="op" id="2088962">]</span><span class="builtintype" id="2088963">byte</span><span class="op" id="2088967">,</span>&nbsp;<span class="ident" id="2088969">ok</span>&nbsp;<span class="builtintype" id="2088972">bool</span><span class="op" id="2088976">)</span>&nbsp;<span class="op" id="2088978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2088981">p</span><span class="op" id="2088982">,</span>&nbsp;<span class="ident" id="2088984">uvdelta</span>&nbsp;<span class="op" id="2088992">:=</span>&nbsp;<span class="ident" id="2088995">readvarint</span><span class="op" id="2089005">(</span><span class="ident" id="2089006">p</span><span class="op" id="2089007">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2089010">if</span>&nbsp;<span class="ident" id="2089013">uvdelta</span>&nbsp;<span class="op" id="2089021">==</span>&nbsp;<span class="num" id="2089024">0</span>&nbsp;<span class="op" id="2089026">&amp;&amp;</span>&nbsp;<span class="op" id="2089029">!</span><span class="ident" id="2089030">first</span>&nbsp;<span class="op" id="2089036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2089040">return</span>&nbsp;<span class="ident" id="2089047">nil</span><span class="op" id="2089050">,</span>&nbsp;<span class="builtintype" id="2089052">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2089059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2089062">if</span>&nbsp;<span class="ident" id="2089065">uvdelta</span><span class="op" id="2089072">&amp;</span><span class="num" id="2089073">1</span>&nbsp;<span class="op" id="2089075">!=</span>&nbsp;<span class="num" id="2089078">0</span>&nbsp;<span class="op" id="2089080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2089084">uvdelta</span>&nbsp;<span class="op" id="2089092">=</span>&nbsp;<span class="op" id="2089094">^</span><span class="op" id="2089095">(</span><span class="ident" id="2089096">uvdelta</span>&nbsp;<span class="op" id="2089104">&gt;&gt;</span>&nbsp;<span class="num" id="2089107">1</span><span class="op" id="2089108">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2089111">}</span>&nbsp;<span class="keyword" id="2089113">else</span>&nbsp;<span class="op" id="2089118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2089122">uvdelta</span>&nbsp;<span class="op" id="2089130">&gt;&gt;=</span>&nbsp;<span class="num" id="2089134">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2089137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2089140">vdelta</span>&nbsp;<span class="op" id="2089147">:=</span>&nbsp;<span class="builtintype" id="2089150">int32</span><span class="op" id="2089155">(</span><span class="ident" id="2089156">uvdelta</span><span class="op" id="2089163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2089166">p</span><span class="op" id="2089167">,</span>&nbsp;<span class="ident" id="2089169">pcdelta</span>&nbsp;<span class="op" id="2089177">:=</span>&nbsp;<span class="ident" id="2089180">readvarint</span><span class="op" id="2089190">(</span><span class="ident" id="2089191">p</span><span class="op" id="2089192">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2089195">*</span><span class="ident" id="2089196">pc</span>&nbsp;<span class="op" id="2089199">+=</span>&nbsp;<span class="builtintype" id="2089202">uintptr</span><span class="op" id="2089209">(</span><span class="ident" id="2089210">pcdelta</span>&nbsp;<span class="op" id="2089218">*</span>&nbsp;<span class="ident" id="2089220">_PCQuantum</span><span class="op" id="2089230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2089233">*</span><span class="ident" id="2089234">val</span>&nbsp;<span class="op" id="2089238">+=</span>&nbsp;<span class="ident" id="2089241">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2089249">return</span>&nbsp;<span class="ident" id="2089256">p</span><span class="op" id="2089257">,</span>&nbsp;<span class="builtintype" id="2089259">true</span><br>
<span class="lineno"></span><span class="op" id="2089264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2089267">//&nbsp;readvarint&nbsp;reads&nbsp;a&nbsp;varint&nbsp;from&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="2089304">func</span>&nbsp;<span class="ident" id="2089309">readvarint</span><span class="op" id="2089319">(</span><span class="ident" id="2089320">p</span>&nbsp;<span class="op" id="2089322">[</span><span class="op" id="2089323">]</span><span class="builtintype" id="2089324">byte</span><span class="op" id="2089328">)</span>&nbsp;<span class="op" id="2089330">(</span><span class="ident" id="2089331">newp</span>&nbsp;<span class="op" id="2089336">[</span><span class="op" id="2089337">]</span><span class="builtintype" id="2089338">byte</span><span class="op" id="2089342">,</span>&nbsp;<span class="ident" id="2089344">val</span>&nbsp;<span class="builtintype" id="2089348">uint32</span><span class="op" id="2089354">)</span>&nbsp;<span class="op" id="2089356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2089359">var</span>&nbsp;<span class="ident" id="2089363">v</span><span class="op" id="2089364">,</span>&nbsp;<span class="ident" id="2089366">shift</span>&nbsp;<span class="builtintype" id="2089372">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2089380">for</span>&nbsp;<span class="op" id="2089384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2089388">b</span>&nbsp;<span class="op" id="2089390">:=</span>&nbsp;<span class="ident" id="2089393">p</span><span class="op" id="2089394">[</span><span class="num" id="2089395">0</span><span class="op" id="2089396">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2089400">p</span>&nbsp;<span class="op" id="2089402">=</span>&nbsp;<span class="ident" id="2089404">p</span><span class="op" id="2089405">[</span><span class="num" id="2089406">1</span><span class="op" id="2089407">:</span><span class="op" id="2089408">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2089412">v</span>&nbsp;<span class="op" id="2089414">|=</span>&nbsp;<span class="op" id="2089417">(</span><span class="builtintype" id="2089418">uint32</span><span class="op" id="2089424">(</span><span class="ident" id="2089425">b</span><span class="op" id="2089426">)</span>&nbsp;<span class="op" id="2089428">&amp;</span>&nbsp;<span class="num" id="2089430">0x7F</span><span class="op" id="2089434">)</span>&nbsp;<span class="op" id="2089436">&lt;&lt;</span>&nbsp;<span class="ident" id="2089439">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2089447">if</span>&nbsp;<span class="ident" id="2089450">b</span><span class="op" id="2089451">&amp;</span><span class="num" id="2089452">0x80</span>&nbsp;<span class="op" id="2089457">==</span>&nbsp;<span class="num" id="2089460">0</span>&nbsp;<span class="op" id="2089462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2089467">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2089475">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2089479">shift</span>&nbsp;<span class="op" id="2089485">+=</span>&nbsp;<span class="num" id="2089488">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2089491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2089494">return</span>&nbsp;<span class="ident" id="2089501">p</span><span class="op" id="2089502">,</span>&nbsp;<span class="ident" id="2089504">v</span><br>
<span class="lineno"></span><span class="op" id="2089506">}</span>
</div>
</body>
</html>
