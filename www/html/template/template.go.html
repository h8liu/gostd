<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4465688">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4465743">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4465797">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4465848">package</span>&nbsp;<span class="ident" id="4465856">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4465866">import</span>&nbsp;<span class="op" id="4465873">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4465876">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4465883">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4465889">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4465902">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4465919">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4465927">&#34;text/template&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4465944">&#34;text/template/parse&#34;</span><br>
<span class="lineno">15</span><span class="op" id="4465966">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4465969">//&nbsp;Template&nbsp;is&nbsp;a&nbsp;specialized&nbsp;Template&nbsp;from&nbsp;&#34;text/template&#34;&nbsp;that&nbsp;produces&nbsp;a&nbsp;safe</span><br>
<span class="lineno"></span><span class="comment" id="4466049">//&nbsp;HTML&nbsp;document&nbsp;fragment.</span><br>
<span class="lineno"></span><span class="keyword" id="4466076">type</span>&nbsp;<span class="ident" id="4466081">Template</span>&nbsp;<span class="keyword" id="4466090">struct</span>&nbsp;<span class="op" id="4466097">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4466100">//&nbsp;Sticky&nbsp;error&nbsp;if&nbsp;escaping&nbsp;fails.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4466136">escapeErr</span>&nbsp;<span class="builtintype" id="4466146">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4466153">//&nbsp;We&nbsp;could&nbsp;embed&nbsp;the&nbsp;text/template&nbsp;field,&nbsp;but&nbsp;it&#39;s&nbsp;safer&nbsp;not&nbsp;to&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4466227">//&nbsp;we&nbsp;need&nbsp;to&nbsp;keep&nbsp;our&nbsp;version&nbsp;of&nbsp;the&nbsp;name&nbsp;space&nbsp;and&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4466296">//&nbsp;template&#39;s&nbsp;in&nbsp;sync.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4466320">text</span>&nbsp;<span class="op" id="4466325">*</span><span class="ident" id="4466326"><a href="/html/template/template.go.html#4465927">template</a></span><span class="op" id="4466334">.</span><span class="ident" id="4466335">Template</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4466345">//&nbsp;The&nbsp;underlying&nbsp;template&#39;s&nbsp;parse&nbsp;tree,&nbsp;updated&nbsp;to&nbsp;be&nbsp;HTML-safe.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4466412">Tree</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4466423">*</span><span class="ident" id="4466424"><a href="/html/template/template.go.html#4465944">parse</a></span><span class="op" id="4466429">.</span><span class="ident" id="4466430">Tree</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4466436">*</span><span class="ident" id="4466437"><a href="/html/template/template.go.html#4466693">nameSpace</a></span>&nbsp;<span class="comment" id="4466447">//&nbsp;common&nbsp;to&nbsp;all&nbsp;associated&nbsp;templates</span><br>
<span class="lineno"></span><span class="op" id="4466485">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="4466488">//&nbsp;escapeOK&nbsp;is&nbsp;a&nbsp;sentinel&nbsp;value&nbsp;used&nbsp;to&nbsp;indicate&nbsp;valid&nbsp;escaping.</span><br>
<span class="lineno"></span><span class="keyword" id="4466553">var</span>&nbsp;<span class="ident" id="4466557">escapeOK</span>&nbsp;<span class="op" id="4466566">=</span>&nbsp;<span class="ident" id="4466568"><a href="/html/template/template.go.html#4465876">fmt</a></span><span class="op" id="4466571">.</span><span class="ident" id="4466572">Errorf</span><span class="op" id="4466578">(</span><span class="string" id="4466579">&#34;template&nbsp;escaped&nbsp;correctly&#34;</span><span class="op" id="4466607">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4466610">//&nbsp;nameSpace&nbsp;is&nbsp;the&nbsp;data&nbsp;structure&nbsp;shared&nbsp;by&nbsp;all&nbsp;templates&nbsp;in&nbsp;an&nbsp;association.</span><br>
<span class="lineno">35</span><span class="keyword" id="4466688">type</span>&nbsp;<span class="ident" id="4466693">nameSpace</span>&nbsp;<span class="keyword" id="4466703">struct</span>&nbsp;<span class="op" id="4466710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4466713">mu</span>&nbsp;&nbsp;<span class="ident" id="4466717"><a href="/html/template/template.go.html#4465919">sync</a></span><span class="op" id="4466721">.</span><span class="ident" id="4466722">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4466729">set</span>&nbsp;<span class="keyword" id="4466733">map</span><span class="op" id="4466736">[</span><span class="builtintype" id="4466737">string</span><span class="op" id="4466743">]</span><span class="op" id="4466744">*</span><span class="ident" id="4466745"><a href="/html/template/template.go.html#4466081">Template</a></span><br>
<span class="lineno"></span><span class="op" id="4466754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="comment" id="4466757">//&nbsp;Templates&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;the&nbsp;templates&nbsp;associated&nbsp;with&nbsp;t,&nbsp;including&nbsp;t</span><br>
<span class="lineno"></span><span class="comment" id="4466834">//&nbsp;itself.</span><br>
<span class="lineno"></span><span class="keyword" id="4466845">func</span>&nbsp;<span class="op" id="4466850">(</span><span class="ident" id="4466851">t</span>&nbsp;<span class="op" id="4466853">*</span><span class="ident" id="4466854"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4466862">)</span>&nbsp;<span class="ident" id="4466864">Templates</span><span class="op" id="4466873">(</span><span class="op" id="4466874">)</span>&nbsp;<span class="op" id="4466876">[</span><span class="op" id="4466877">]</span><span class="op" id="4466878">*</span><span class="ident" id="4466879"><a href="/html/template/template.go.html#4466081">Template</a></span>&nbsp;<span class="op" id="4466888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4466891">ns</span>&nbsp;<span class="op" id="4466894">:=</span>&nbsp;<span class="ident" id="4466897"><a href="/html/template/template.go.html#4466851">t</a></span><span class="op" id="4466898">.</span><span class="ident" id="4466899">nameSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4466910"><a href="/html/template/template.go.html#4466891">ns</a></span><span class="op" id="4466912">.</span><span class="ident" id="4466913">mu</span><span class="op" id="4466915">.</span><span class="ident" id="4466916">Lock</span><span class="op" id="4466920">(</span><span class="op" id="4466921">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4466924">defer</span>&nbsp;<span class="ident" id="4466930"><a href="/html/template/template.go.html#4466891">ns</a></span><span class="op" id="4466932">.</span><span class="ident" id="4466933">mu</span><span class="op" id="4466935">.</span><span class="ident" id="4466936">Unlock</span><span class="op" id="4466942">(</span><span class="op" id="4466943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4466946">//&nbsp;Return&nbsp;a&nbsp;slice&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;expose&nbsp;the&nbsp;map.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4466993">m</span>&nbsp;<span class="op" id="4466995">:=</span>&nbsp;<span class="builtinfunc" id="4466998">make</span><span class="op" id="4467002">(</span><span class="op" id="4467003">[</span><span class="op" id="4467004">]</span><span class="op" id="4467005">*</span><span class="ident" id="4467006"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4467014">,</span>&nbsp;<span class="num" id="4467016">0</span><span class="op" id="4467017">,</span>&nbsp;<span class="builtinfunc" id="4467019">len</span><span class="op" id="4467022">(</span><span class="ident" id="4467023"><a href="/html/template/template.go.html#4466891">ns</a></span><span class="op" id="4467025">.</span><span class="ident" id="4467026">set</span><span class="op" id="4467029">)</span><span class="op" id="4467030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467033">for</span>&nbsp;<span class="ident" id="4467037">_</span><span class="op" id="4467038">,</span>&nbsp;<span class="ident" id="4467040">v</span>&nbsp;<span class="op" id="4467042">:=</span>&nbsp;<span class="keyword" id="4467045">range</span>&nbsp;<span class="ident" id="4467051"><a href="/html/template/template.go.html#4466891">ns</a></span><span class="op" id="4467053">.</span><span class="ident" id="4467054">set</span>&nbsp;<span class="op" id="4467058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4467062"><a href="/html/template/template.go.html#4466993">m</a></span>&nbsp;<span class="op" id="4467064">=</span>&nbsp;<span class="builtinfunc" id="4467066">append</span><span class="op" id="4467072">(</span><span class="ident" id="4467073"><a href="/html/template/template.go.html#4466993">m</a></span><span class="op" id="4467074">,</span>&nbsp;<span class="ident" id="4467076"><a href="/html/template/template.go.html#4467040">v</a></span><span class="op" id="4467077">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4467080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467083">return</span>&nbsp;<span class="ident" id="4467090"><a href="/html/template/template.go.html#4466993">m</a></span><br>
<span class="lineno"></span><span class="op" id="4467092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4467095">//&nbsp;escape&nbsp;escapes&nbsp;all&nbsp;associated&nbsp;templates.</span><br>
<span class="lineno">55</span><span class="keyword" id="4467139">func</span>&nbsp;<span class="op" id="4467144">(</span><span class="ident" id="4467145">t</span>&nbsp;<span class="op" id="4467147">*</span><span class="ident" id="4467148"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4467156">)</span>&nbsp;<span class="ident" id="4467158">escape</span><span class="op" id="4467164">(</span><span class="op" id="4467165">)</span>&nbsp;<span class="builtintype" id="4467167">error</span>&nbsp;<span class="op" id="4467173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4467176"><a href="/html/template/template.go.html#4467145">t</a></span><span class="op" id="4467177">.</span><span class="ident" id="4467178">nameSpace</span><span class="op" id="4467187">.</span><span class="ident" id="4467188">mu</span><span class="op" id="4467190">.</span><span class="ident" id="4467191">Lock</span><span class="op" id="4467195">(</span><span class="op" id="4467196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467199">defer</span>&nbsp;<span class="ident" id="4467205"><a href="/html/template/template.go.html#4467145">t</a></span><span class="op" id="4467206">.</span><span class="ident" id="4467207">nameSpace</span><span class="op" id="4467216">.</span><span class="ident" id="4467217">mu</span><span class="op" id="4467219">.</span><span class="ident" id="4467220">Unlock</span><span class="op" id="4467226">(</span><span class="op" id="4467227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467230">if</span>&nbsp;<span class="ident" id="4467233"><a href="/html/template/template.go.html#4467145">t</a></span><span class="op" id="4467234">.</span><span class="ident" id="4467235">escapeErr</span>&nbsp;<span class="op" id="4467245">==</span>&nbsp;<span class="ident" id="4467248">nil</span>&nbsp;<span class="op" id="4467252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467256">if</span>&nbsp;<span class="ident" id="4467259">err</span>&nbsp;<span class="op" id="4467263">:=</span>&nbsp;<span class="ident" id="4467266"><a href="/html/template/escape.go.html#4423697">escapeTemplate</a></span><span class="op" id="4467280">(</span><span class="ident" id="4467281"><a href="/html/template/template.go.html#4467145">t</a></span><span class="op" id="4467282">,</span>&nbsp;<span class="ident" id="4467284"><a href="/html/template/template.go.html#4467145">t</a></span><span class="op" id="4467285">.</span><span class="ident" id="4467286">text</span><span class="op" id="4467290">.</span><span class="ident" id="4467291">Root</span><span class="op" id="4467295">,</span>&nbsp;<span class="ident" id="4467297"><a href="/html/template/template.go.html#4467145">t</a></span><span class="op" id="4467298">.</span><span class="ident" id="4467299">Name</span><span class="op" id="4467303">(</span><span class="op" id="4467304">)</span><span class="op" id="4467305">)</span><span class="op" id="4467306">;</span>&nbsp;<span class="ident" id="4467308"><a href="/html/template/template.go.html#4467259">err</a></span>&nbsp;<span class="op" id="4467312">!=</span>&nbsp;<span class="ident" id="4467315">nil</span>&nbsp;<span class="op" id="4467319">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467324">return</span>&nbsp;<span class="ident" id="4467331"><a href="/html/template/template.go.html#4467259">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4467337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4467340">}</span>&nbsp;<span class="keyword" id="4467342">else</span>&nbsp;<span class="keyword" id="4467347">if</span>&nbsp;<span class="ident" id="4467350"><a href="/html/template/template.go.html#4467145">t</a></span><span class="op" id="4467351">.</span><span class="ident" id="4467352">escapeErr</span>&nbsp;<span class="op" id="4467362">!=</span>&nbsp;<span class="ident" id="4467365"><a href="/html/template/template.go.html#4466557">escapeOK</a></span>&nbsp;<span class="op" id="4467374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467378">return</span>&nbsp;<span class="ident" id="4467385"><a href="/html/template/template.go.html#4467145">t</a></span><span class="op" id="4467386">.</span><span class="ident" id="4467387">escapeErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4467398">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467401">return</span>&nbsp;<span class="ident" id="4467408">nil</span><br>
<span class="lineno"></span><span class="op" id="4467412">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4467415">//&nbsp;Execute&nbsp;applies&nbsp;a&nbsp;parsed&nbsp;template&nbsp;to&nbsp;the&nbsp;specified&nbsp;data&nbsp;object,</span><br>
<span class="lineno"></span><span class="comment" id="4467482">//&nbsp;writing&nbsp;the&nbsp;output&nbsp;to&nbsp;wr.</span><br>
<span class="lineno">70</span><span class="comment" id="4467511">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;executing&nbsp;the&nbsp;template&nbsp;or&nbsp;writing&nbsp;its&nbsp;output,</span><br>
<span class="lineno"></span><span class="comment" id="4467579">//&nbsp;execution&nbsp;stops,&nbsp;but&nbsp;partial&nbsp;results&nbsp;may&nbsp;already&nbsp;have&nbsp;been&nbsp;written&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4467652">//&nbsp;the&nbsp;output&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="4467674">//&nbsp;A&nbsp;template&nbsp;may&nbsp;be&nbsp;executed&nbsp;safely&nbsp;in&nbsp;parallel.</span><br>
<span class="lineno"></span><span class="keyword" id="4467724">func</span>&nbsp;<span class="op" id="4467729">(</span><span class="ident" id="4467730">t</span>&nbsp;<span class="op" id="4467732">*</span><span class="ident" id="4467733"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4467741">)</span>&nbsp;<span class="ident" id="4467743">Execute</span><span class="op" id="4467750">(</span><span class="ident" id="4467751">wr</span>&nbsp;<span class="ident" id="4467754"><a href="/html/template/template.go.html#4465883">io</a></span><span class="op" id="4467756">.</span><span class="ident" id="4467757">Writer</span><span class="op" id="4467763">,</span>&nbsp;<span class="ident" id="4467765">data</span>&nbsp;<span class="keyword" id="4467770">interface</span><span class="op" id="4467779">{</span><span class="op" id="4467780">}</span><span class="op" id="4467781">)</span>&nbsp;<span class="builtintype" id="4467783">error</span>&nbsp;<span class="op" id="4467789">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467792">if</span>&nbsp;<span class="ident" id="4467795">err</span>&nbsp;<span class="op" id="4467799">:=</span>&nbsp;<span class="ident" id="4467802"><a href="/html/template/template.go.html#4467730">t</a></span><span class="op" id="4467803">.</span><span class="ident" id="4467804">escape</span><span class="op" id="4467810">(</span><span class="op" id="4467811">)</span><span class="op" id="4467812">;</span>&nbsp;<span class="ident" id="4467814"><a href="/html/template/template.go.html#4467795">err</a></span>&nbsp;<span class="op" id="4467818">!=</span>&nbsp;<span class="ident" id="4467821">nil</span>&nbsp;<span class="op" id="4467825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467829">return</span>&nbsp;<span class="ident" id="4467836"><a href="/html/template/template.go.html#4467795">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4467841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4467844">return</span>&nbsp;<span class="ident" id="4467851"><a href="/html/template/template.go.html#4467730">t</a></span><span class="op" id="4467852">.</span><span class="ident" id="4467853">text</span><span class="op" id="4467857">.</span><span class="ident" id="4467858">Execute</span><span class="op" id="4467865">(</span><span class="ident" id="4467866"><a href="/html/template/template.go.html#4467751">wr</a></span><span class="op" id="4467868">,</span>&nbsp;<span class="ident" id="4467870"><a href="/html/template/template.go.html#4467765">data</a></span><span class="op" id="4467874">)</span><br>
<span class="lineno"></span><span class="op" id="4467876">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="4467879">//&nbsp;ExecuteTemplate&nbsp;applies&nbsp;the&nbsp;template&nbsp;associated&nbsp;with&nbsp;t&nbsp;that&nbsp;has&nbsp;the&nbsp;given</span><br>
<span class="lineno"></span><span class="comment" id="4467956">//&nbsp;name&nbsp;to&nbsp;the&nbsp;specified&nbsp;data&nbsp;object&nbsp;and&nbsp;writes&nbsp;the&nbsp;output&nbsp;to&nbsp;wr.</span><br>
<span class="lineno"></span><span class="comment" id="4468022">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs&nbsp;executing&nbsp;the&nbsp;template&nbsp;or&nbsp;writing&nbsp;its&nbsp;output,</span><br>
<span class="lineno"></span><span class="comment" id="4468090">//&nbsp;execution&nbsp;stops,&nbsp;but&nbsp;partial&nbsp;results&nbsp;may&nbsp;already&nbsp;have&nbsp;been&nbsp;written&nbsp;to</span><br>
<span class="lineno">85</span><span class="comment" id="4468163">//&nbsp;the&nbsp;output&nbsp;writer.</span><br>
<span class="lineno"></span><span class="comment" id="4468185">//&nbsp;A&nbsp;template&nbsp;may&nbsp;be&nbsp;executed&nbsp;safely&nbsp;in&nbsp;parallel.</span><br>
<span class="lineno"></span><span class="keyword" id="4468235">func</span>&nbsp;<span class="op" id="4468240">(</span><span class="ident" id="4468241">t</span>&nbsp;<span class="op" id="4468243">*</span><span class="ident" id="4468244"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4468252">)</span>&nbsp;<span class="ident" id="4468254">ExecuteTemplate</span><span class="op" id="4468269">(</span><span class="ident" id="4468270">wr</span>&nbsp;<span class="ident" id="4468273"><a href="/html/template/template.go.html#4465883">io</a></span><span class="op" id="4468275">.</span><span class="ident" id="4468276">Writer</span><span class="op" id="4468282">,</span>&nbsp;<span class="ident" id="4468284">name</span>&nbsp;<span class="builtintype" id="4468289">string</span><span class="op" id="4468295">,</span>&nbsp;<span class="ident" id="4468297">data</span>&nbsp;<span class="keyword" id="4468302">interface</span><span class="op" id="4468311">{</span><span class="op" id="4468312">}</span><span class="op" id="4468313">)</span>&nbsp;<span class="builtintype" id="4468315">error</span>&nbsp;<span class="op" id="4468321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4468324">tmpl</span><span class="op" id="4468328">,</span>&nbsp;<span class="ident" id="4468330">err</span>&nbsp;<span class="op" id="4468334">:=</span>&nbsp;<span class="ident" id="4468337"><a href="/html/template/template.go.html#4468241">t</a></span><span class="op" id="4468338">.</span><span class="ident" id="4468339">lookupAndEscapeTemplate</span><span class="op" id="4468362">(</span><span class="ident" id="4468363"><a href="/html/template/template.go.html#4468284">name</a></span><span class="op" id="4468367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4468370">if</span>&nbsp;<span class="ident" id="4468373"><a href="/html/template/template.go.html#4468330">err</a></span>&nbsp;<span class="op" id="4468377">!=</span>&nbsp;<span class="ident" id="4468380">nil</span>&nbsp;<span class="op" id="4468384">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4468388">return</span>&nbsp;<span class="ident" id="4468395"><a href="/html/template/template.go.html#4468330">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4468400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4468403">return</span>&nbsp;<span class="ident" id="4468410"><a href="/html/template/template.go.html#4468324">tmpl</a></span><span class="op" id="4468414">.</span><span class="ident" id="4468415">text</span><span class="op" id="4468419">.</span><span class="ident" id="4468420">Execute</span><span class="op" id="4468427">(</span><span class="ident" id="4468428"><a href="/html/template/template.go.html#4468270">wr</a></span><span class="op" id="4468430">,</span>&nbsp;<span class="ident" id="4468432"><a href="/html/template/template.go.html#4468297">data</a></span><span class="op" id="4468436">)</span><br>
<span class="lineno"></span><span class="op" id="4468438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="4468441">//&nbsp;lookupAndEscapeTemplate&nbsp;guarantees&nbsp;that&nbsp;the&nbsp;template&nbsp;with&nbsp;the&nbsp;given&nbsp;name</span><br>
<span class="lineno"></span><span class="comment" id="4468517">//&nbsp;is&nbsp;escaped,&nbsp;or&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;cannot&nbsp;be.&nbsp;It&nbsp;returns&nbsp;the&nbsp;named</span><br>
<span class="lineno"></span><span class="comment" id="4468590">//&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="4468603">func</span>&nbsp;<span class="op" id="4468608">(</span><span class="ident" id="4468609">t</span>&nbsp;<span class="op" id="4468611">*</span><span class="ident" id="4468612"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4468620">)</span>&nbsp;<span class="ident" id="4468622">lookupAndEscapeTemplate</span><span class="op" id="4468645">(</span><span class="ident" id="4468646">name</span>&nbsp;<span class="builtintype" id="4468651">string</span><span class="op" id="4468657">)</span>&nbsp;<span class="op" id="4468659">(</span><span class="ident" id="4468660">tmpl</span>&nbsp;<span class="op" id="4468665">*</span><span class="ident" id="4468666"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4468674">,</span>&nbsp;<span class="ident" id="4468676">err</span>&nbsp;<span class="builtintype" id="4468680">error</span><span class="op" id="4468685">)</span>&nbsp;<span class="op" id="4468687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4468690"><a href="/html/template/template.go.html#4468609">t</a></span><span class="op" id="4468691">.</span><span class="ident" id="4468692">nameSpace</span><span class="op" id="4468701">.</span><span class="ident" id="4468702">mu</span><span class="op" id="4468704">.</span><span class="ident" id="4468705">Lock</span><span class="op" id="4468709">(</span><span class="op" id="4468710">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4468713">defer</span>&nbsp;<span class="ident" id="4468719"><a href="/html/template/template.go.html#4468609">t</a></span><span class="op" id="4468720">.</span><span class="ident" id="4468721">nameSpace</span><span class="op" id="4468730">.</span><span class="ident" id="4468731">mu</span><span class="op" id="4468733">.</span><span class="ident" id="4468734">Unlock</span><span class="op" id="4468740">(</span><span class="op" id="4468741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4468744"><a href="/html/template/template.go.html#4468660">tmpl</a></span>&nbsp;<span class="op" id="4468749">=</span>&nbsp;<span class="ident" id="4468751"><a href="/html/template/template.go.html#4468609">t</a></span><span class="op" id="4468752">.</span><span class="ident" id="4468753">set</span><span class="op" id="4468756">[</span><span class="ident" id="4468757"><a href="/html/template/template.go.html#4468646">name</a></span><span class="op" id="4468761">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4468764">if</span>&nbsp;<span class="ident" id="4468767"><a href="/html/template/template.go.html#4468660">tmpl</a></span>&nbsp;<span class="op" id="4468772">==</span>&nbsp;<span class="ident" id="4468775">nil</span>&nbsp;<span class="op" id="4468779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4468783">return</span>&nbsp;<span class="ident" id="4468790">nil</span><span class="op" id="4468793">,</span>&nbsp;<span class="ident" id="4468795"><a href="/html/template/template.go.html#4465876">fmt</a></span><span class="op" id="4468798">.</span><span class="ident" id="4468799">Errorf</span><span class="op" id="4468805">(</span><span class="string" id="4468806">&#34;html/template:&nbsp;%q&nbsp;is&nbsp;undefined&#34;</span><span class="op" id="4468838">,</span>&nbsp;<span class="ident" id="4468840"><a href="/html/template/template.go.html#4468646">name</a></span><span class="op" id="4468844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4468847">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4468850">if</span>&nbsp;<span class="ident" id="4468853"><a href="/html/template/template.go.html#4468660">tmpl</a></span><span class="op" id="4468857">.</span><span class="ident" id="4468858">escapeErr</span>&nbsp;<span class="op" id="4468868">!=</span>&nbsp;<span class="ident" id="4468871">nil</span>&nbsp;<span class="op" id="4468875">&amp;&amp;</span>&nbsp;<span class="ident" id="4468878"><a href="/html/template/template.go.html#4468660">tmpl</a></span><span class="op" id="4468882">.</span><span class="ident" id="4468883">escapeErr</span>&nbsp;<span class="op" id="4468893">!=</span>&nbsp;<span class="ident" id="4468896"><a href="/html/template/template.go.html#4466557">escapeOK</a></span>&nbsp;<span class="op" id="4468905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4468909">return</span>&nbsp;<span class="ident" id="4468916">nil</span><span class="op" id="4468919">,</span>&nbsp;<span class="ident" id="4468921"><a href="/html/template/template.go.html#4468660">tmpl</a></span><span class="op" id="4468925">.</span><span class="ident" id="4468926">escapeErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4468937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4468940">if</span>&nbsp;<span class="ident" id="4468943"><a href="/html/template/template.go.html#4468660">tmpl</a></span><span class="op" id="4468947">.</span><span class="ident" id="4468948">text</span><span class="op" id="4468952">.</span><span class="ident" id="4468953">Tree</span>&nbsp;<span class="op" id="4468958">==</span>&nbsp;<span class="ident" id="4468961">nil</span>&nbsp;<span class="op" id="4468965">||</span>&nbsp;<span class="ident" id="4468968"><a href="/html/template/template.go.html#4468660">tmpl</a></span><span class="op" id="4468972">.</span><span class="ident" id="4468973">text</span><span class="op" id="4468977">.</span><span class="ident" id="4468978">Root</span>&nbsp;<span class="op" id="4468983">==</span>&nbsp;<span class="ident" id="4468986">nil</span>&nbsp;<span class="op" id="4468990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4468994">return</span>&nbsp;<span class="ident" id="4469001">nil</span><span class="op" id="4469004">,</span>&nbsp;<span class="ident" id="4469006"><a href="/html/template/template.go.html#4465876">fmt</a></span><span class="op" id="4469009">.</span><span class="ident" id="4469010">Errorf</span><span class="op" id="4469016">(</span><span class="string" id="4469017">&#34;html/template:&nbsp;%q&nbsp;is&nbsp;an&nbsp;incomplete&nbsp;template&#34;</span><span class="op" id="4469062">,</span>&nbsp;<span class="ident" id="4469064"><a href="/html/template/template.go.html#4468646">name</a></span><span class="op" id="4469068">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4469071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4469074">if</span>&nbsp;<span class="ident" id="4469077"><a href="/html/template/template.go.html#4468609">t</a></span><span class="op" id="4469078">.</span><span class="ident" id="4469079">text</span><span class="op" id="4469083">.</span><span class="ident" id="4469084">Lookup</span><span class="op" id="4469090">(</span><span class="ident" id="4469091"><a href="/html/template/template.go.html#4468646">name</a></span><span class="op" id="4469095">)</span>&nbsp;<span class="op" id="4469097">==</span>&nbsp;<span class="ident" id="4469100">nil</span>&nbsp;<span class="op" id="4469104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4469108">panic</span><span class="op" id="4469113">(</span><span class="string" id="4469114">&#34;html/template&nbsp;internal&nbsp;error:&nbsp;template&nbsp;escaping&nbsp;out&nbsp;of&nbsp;sync&#34;</span><span class="op" id="4469175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4469178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4469181">if</span>&nbsp;<span class="ident" id="4469184"><a href="/html/template/template.go.html#4468660">tmpl</a></span><span class="op" id="4469188">.</span><span class="ident" id="4469189">escapeErr</span>&nbsp;<span class="op" id="4469199">==</span>&nbsp;<span class="ident" id="4469202">nil</span>&nbsp;<span class="op" id="4469206">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4469210"><a href="/html/template/template.go.html#4468676">err</a></span>&nbsp;<span class="op" id="4469214">=</span>&nbsp;<span class="ident" id="4469216"><a href="/html/template/escape.go.html#4423697">escapeTemplate</a></span><span class="op" id="4469230">(</span><span class="ident" id="4469231"><a href="/html/template/template.go.html#4468660">tmpl</a></span><span class="op" id="4469235">,</span>&nbsp;<span class="ident" id="4469237"><a href="/html/template/template.go.html#4468660">tmpl</a></span><span class="op" id="4469241">.</span><span class="ident" id="4469242">text</span><span class="op" id="4469246">.</span><span class="ident" id="4469247">Root</span><span class="op" id="4469251">,</span>&nbsp;<span class="ident" id="4469253"><a href="/html/template/template.go.html#4468646">name</a></span><span class="op" id="4469257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4469260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4469263">return</span>&nbsp;<span class="ident" id="4469270"><a href="/html/template/template.go.html#4468660">tmpl</a></span><span class="op" id="4469274">,</span>&nbsp;<span class="ident" id="4469276"><a href="/html/template/template.go.html#4468676">err</a></span><br>
<span class="lineno"></span><span class="op" id="4469280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="4469283">//&nbsp;Parse&nbsp;parses&nbsp;a&nbsp;string&nbsp;into&nbsp;a&nbsp;template.&nbsp;Nested&nbsp;template&nbsp;definitions</span><br>
<span class="lineno"></span><span class="comment" id="4469353">//&nbsp;will&nbsp;be&nbsp;associated&nbsp;with&nbsp;the&nbsp;top-level&nbsp;template&nbsp;t.&nbsp;Parse&nbsp;may&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="4469419">//&nbsp;called&nbsp;multiple&nbsp;times&nbsp;to&nbsp;parse&nbsp;definitions&nbsp;of&nbsp;templates&nbsp;to&nbsp;associate</span><br>
<span class="lineno"></span><span class="comment" id="4469491">//&nbsp;with&nbsp;t.&nbsp;It&nbsp;is&nbsp;an&nbsp;error&nbsp;if&nbsp;a&nbsp;resulting&nbsp;template&nbsp;is&nbsp;non-empty&nbsp;(contains</span><br>
<span class="lineno"></span><span class="comment" id="4469564">//&nbsp;content&nbsp;other&nbsp;than&nbsp;template&nbsp;definitions)&nbsp;and&nbsp;would&nbsp;replace&nbsp;a</span><br>
<span class="lineno">125</span><span class="comment" id="4469628">//&nbsp;non-empty&nbsp;template&nbsp;with&nbsp;the&nbsp;same&nbsp;name.&nbsp;&nbsp;(In&nbsp;multiple&nbsp;calls&nbsp;to&nbsp;Parse</span><br>
<span class="lineno"></span><span class="comment" id="4469699">//&nbsp;with&nbsp;the&nbsp;same&nbsp;receiver&nbsp;template,&nbsp;only&nbsp;one&nbsp;call&nbsp;can&nbsp;contain&nbsp;text</span><br>
<span class="lineno"></span><span class="comment" id="4469766">//&nbsp;other&nbsp;than&nbsp;space,&nbsp;comments,&nbsp;and&nbsp;template&nbsp;definitions.)</span><br>
<span class="lineno"></span><span class="keyword" id="4469824">func</span>&nbsp;<span class="op" id="4469829">(</span><span class="ident" id="4469830">t</span>&nbsp;<span class="op" id="4469832">*</span><span class="ident" id="4469833"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4469841">)</span>&nbsp;<span class="ident" id="4469843">Parse</span><span class="op" id="4469848">(</span><span class="ident" id="4469849">src</span>&nbsp;<span class="builtintype" id="4469853">string</span><span class="op" id="4469859">)</span>&nbsp;<span class="op" id="4469861">(</span><span class="op" id="4469862">*</span><span class="ident" id="4469863"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4469871">,</span>&nbsp;<span class="builtintype" id="4469873">error</span><span class="op" id="4469878">)</span>&nbsp;<span class="op" id="4469880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4469883"><a href="/html/template/template.go.html#4469830">t</a></span><span class="op" id="4469884">.</span><span class="ident" id="4469885">nameSpace</span><span class="op" id="4469894">.</span><span class="ident" id="4469895">mu</span><span class="op" id="4469897">.</span><span class="ident" id="4469898">Lock</span><span class="op" id="4469902">(</span><span class="op" id="4469903">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4469906"><a href="/html/template/template.go.html#4469830">t</a></span><span class="op" id="4469907">.</span><span class="ident" id="4469908">escapeErr</span>&nbsp;<span class="op" id="4469918">=</span>&nbsp;<span class="ident" id="4469920">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4469925"><a href="/html/template/template.go.html#4469830">t</a></span><span class="op" id="4469926">.</span><span class="ident" id="4469927">nameSpace</span><span class="op" id="4469936">.</span><span class="ident" id="4469937">mu</span><span class="op" id="4469939">.</span><span class="ident" id="4469940">Unlock</span><span class="op" id="4469946">(</span><span class="op" id="4469947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4469950">ret</span><span class="op" id="4469953">,</span>&nbsp;<span class="ident" id="4469955">err</span>&nbsp;<span class="op" id="4469959">:=</span>&nbsp;<span class="ident" id="4469962"><a href="/html/template/template.go.html#4469830">t</a></span><span class="op" id="4469963">.</span><span class="ident" id="4469964">text</span><span class="op" id="4469968">.</span><span class="ident" id="4469969">Parse</span><span class="op" id="4469974">(</span><span class="ident" id="4469975"><a href="/html/template/template.go.html#4469849">src</a></span><span class="op" id="4469978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4469981">if</span>&nbsp;<span class="ident" id="4469984"><a href="/html/template/template.go.html#4469955">err</a></span>&nbsp;<span class="op" id="4469988">!=</span>&nbsp;<span class="ident" id="4469991">nil</span>&nbsp;<span class="op" id="4469995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4469999">return</span>&nbsp;<span class="ident" id="4470006">nil</span><span class="op" id="4470009">,</span>&nbsp;<span class="ident" id="4470011"><a href="/html/template/template.go.html#4469955">err</a></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4470016">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4470019">//&nbsp;In&nbsp;general,&nbsp;all&nbsp;the&nbsp;named&nbsp;templates&nbsp;might&nbsp;have&nbsp;changed&nbsp;underfoot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4470089">//&nbsp;Regardless,&nbsp;some&nbsp;new&nbsp;ones&nbsp;may&nbsp;have&nbsp;been&nbsp;defined.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4470142">//&nbsp;The&nbsp;template.Template&nbsp;set&nbsp;has&nbsp;been&nbsp;updated;&nbsp;update&nbsp;ours.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4470203"><a href="/html/template/template.go.html#4469830">t</a></span><span class="op" id="4470204">.</span><span class="ident" id="4470205">nameSpace</span><span class="op" id="4470214">.</span><span class="ident" id="4470215">mu</span><span class="op" id="4470217">.</span><span class="ident" id="4470218">Lock</span><span class="op" id="4470222">(</span><span class="op" id="4470223">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4470226">defer</span>&nbsp;<span class="ident" id="4470232"><a href="/html/template/template.go.html#4469830">t</a></span><span class="op" id="4470233">.</span><span class="ident" id="4470234">nameSpace</span><span class="op" id="4470243">.</span><span class="ident" id="4470244">mu</span><span class="op" id="4470246">.</span><span class="ident" id="4470247">Unlock</span><span class="op" id="4470253">(</span><span class="op" id="4470254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4470257">for</span>&nbsp;<span class="ident" id="4470261">_</span><span class="op" id="4470262">,</span>&nbsp;<span class="ident" id="4470264">v</span>&nbsp;<span class="op" id="4470266">:=</span>&nbsp;<span class="keyword" id="4470269">range</span>&nbsp;<span class="ident" id="4470275"><a href="/html/template/template.go.html#4469950">ret</a></span><span class="op" id="4470278">.</span><span class="ident" id="4470279">Templates</span><span class="op" id="4470288">(</span><span class="op" id="4470289">)</span>&nbsp;<span class="op" id="4470291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4470295">name</span>&nbsp;<span class="op" id="4470300">:=</span>&nbsp;<span class="ident" id="4470303"><a href="/html/template/template.go.html#4470264">v</a></span><span class="op" id="4470304">.</span><span class="ident" id="4470305">Name</span><span class="op" id="4470309">(</span><span class="op" id="4470310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4470314">tmpl</span>&nbsp;<span class="op" id="4470319">:=</span>&nbsp;<span class="ident" id="4470322"><a href="/html/template/template.go.html#4469830">t</a></span><span class="op" id="4470323">.</span><span class="ident" id="4470324">set</span><span class="op" id="4470327">[</span><span class="ident" id="4470328"><a href="/html/template/template.go.html#4470295">name</a></span><span class="op" id="4470332">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4470336">if</span>&nbsp;<span class="ident" id="4470339"><a href="/html/template/template.go.html#4470314">tmpl</a></span>&nbsp;<span class="op" id="4470344">==</span>&nbsp;<span class="ident" id="4470347">nil</span>&nbsp;<span class="op" id="4470351">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4470356"><a href="/html/template/template.go.html#4470314">tmpl</a></span>&nbsp;<span class="op" id="4470361">=</span>&nbsp;<span class="ident" id="4470363"><a href="/html/template/template.go.html#4469830">t</a></span><span class="op" id="4470364">.</span><span class="builtinfunc" id="4470365">new</span><span class="op" id="4470368">(</span><span class="ident" id="4470369"><a href="/html/template/template.go.html#4470295">name</a></span><span class="op" id="4470373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4470377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4470381">//&nbsp;Restore&nbsp;our&nbsp;record&nbsp;of&nbsp;this&nbsp;text/template&nbsp;to&nbsp;its&nbsp;unescaped&nbsp;original&nbsp;state.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4470460"><a href="/html/template/template.go.html#4470314">tmpl</a></span><span class="op" id="4470464">.</span><span class="ident" id="4470465">escapeErr</span>&nbsp;<span class="op" id="4470475">=</span>&nbsp;<span class="ident" id="4470477">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4470483"><a href="/html/template/template.go.html#4470314">tmpl</a></span><span class="op" id="4470487">.</span><span class="ident" id="4470488">text</span>&nbsp;<span class="op" id="4470493">=</span>&nbsp;<span class="ident" id="4470495"><a href="/html/template/template.go.html#4470264">v</a></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4470499"><a href="/html/template/template.go.html#4470314">tmpl</a></span><span class="op" id="4470503">.</span><span class="ident" id="4470504">Tree</span>&nbsp;<span class="op" id="4470509">=</span>&nbsp;<span class="ident" id="4470511"><a href="/html/template/template.go.html#4470264">v</a></span><span class="op" id="4470512">.</span><span class="ident" id="4470513">Tree</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4470519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4470522">return</span>&nbsp;<span class="ident" id="4470529"><a href="/html/template/template.go.html#4469830">t</a></span><span class="op" id="4470530">,</span>&nbsp;<span class="ident" id="4470532">nil</span><br>
<span class="lineno"></span><span class="op" id="4470536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="4470539">//&nbsp;AddParseTree&nbsp;creates&nbsp;a&nbsp;new&nbsp;template&nbsp;with&nbsp;the&nbsp;name&nbsp;and&nbsp;parse&nbsp;tree</span><br>
<span class="lineno"></span><span class="comment" id="4470607">//&nbsp;and&nbsp;associates&nbsp;it&nbsp;with&nbsp;t.</span><br>
<span class="lineno"></span><span class="comment" id="4470636">//</span><br>
<span class="lineno"></span><span class="comment" id="4470639">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;t&nbsp;has&nbsp;already&nbsp;been&nbsp;executed.</span><br>
<span class="lineno"></span><span class="keyword" id="4470694">func</span>&nbsp;<span class="op" id="4470699">(</span><span class="ident" id="4470700">t</span>&nbsp;<span class="op" id="4470702">*</span><span class="ident" id="4470703"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4470711">)</span>&nbsp;<span class="ident" id="4470713">AddParseTree</span><span class="op" id="4470725">(</span><span class="ident" id="4470726">name</span>&nbsp;<span class="builtintype" id="4470731">string</span><span class="op" id="4470737">,</span>&nbsp;<span class="ident" id="4470739">tree</span>&nbsp;<span class="op" id="4470744">*</span><span class="ident" id="4470745"><a href="/html/template/template.go.html#4465944">parse</a></span><span class="op" id="4470750">.</span><span class="ident" id="4470751">Tree</span><span class="op" id="4470755">)</span>&nbsp;<span class="op" id="4470757">(</span><span class="op" id="4470758">*</span><span class="ident" id="4470759"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4470767">,</span>&nbsp;<span class="builtintype" id="4470769">error</span><span class="op" id="4470774">)</span>&nbsp;<span class="op" id="4470776">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4470779"><a href="/html/template/template.go.html#4470700">t</a></span><span class="op" id="4470780">.</span><span class="ident" id="4470781">nameSpace</span><span class="op" id="4470790">.</span><span class="ident" id="4470791">mu</span><span class="op" id="4470793">.</span><span class="ident" id="4470794">Lock</span><span class="op" id="4470798">(</span><span class="op" id="4470799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4470802">defer</span>&nbsp;<span class="ident" id="4470808"><a href="/html/template/template.go.html#4470700">t</a></span><span class="op" id="4470809">.</span><span class="ident" id="4470810">nameSpace</span><span class="op" id="4470819">.</span><span class="ident" id="4470820">mu</span><span class="op" id="4470822">.</span><span class="ident" id="4470823">Unlock</span><span class="op" id="4470829">(</span><span class="op" id="4470830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4470833">if</span>&nbsp;<span class="ident" id="4470836"><a href="/html/template/template.go.html#4470700">t</a></span><span class="op" id="4470837">.</span><span class="ident" id="4470838">escapeErr</span>&nbsp;<span class="op" id="4470848">!=</span>&nbsp;<span class="ident" id="4470851">nil</span>&nbsp;<span class="op" id="4470855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4470859">return</span>&nbsp;<span class="ident" id="4470866">nil</span><span class="op" id="4470869">,</span>&nbsp;<span class="ident" id="4470871"><a href="/html/template/template.go.html#4465876">fmt</a></span><span class="op" id="4470874">.</span><span class="ident" id="4470875">Errorf</span><span class="op" id="4470881">(</span><span class="string" id="4470882">&#34;html/template:&nbsp;cannot&nbsp;AddParseTree&nbsp;to&nbsp;%q&nbsp;after&nbsp;it&nbsp;has&nbsp;executed&#34;</span><span class="op" id="4470946">,</span>&nbsp;<span class="ident" id="4470948"><a href="/html/template/template.go.html#4470700">t</a></span><span class="op" id="4470949">.</span><span class="ident" id="4470950">Name</span><span class="op" id="4470954">(</span><span class="op" id="4470955">)</span><span class="op" id="4470956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4470959">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4470962">text</span><span class="op" id="4470966">,</span>&nbsp;<span class="ident" id="4470968">err</span>&nbsp;<span class="op" id="4470972">:=</span>&nbsp;<span class="ident" id="4470975"><a href="/html/template/template.go.html#4470700">t</a></span><span class="op" id="4470976">.</span><span class="ident" id="4470977">text</span><span class="op" id="4470981">.</span><span class="ident" id="4470982">AddParseTree</span><span class="op" id="4470994">(</span><span class="ident" id="4470995"><a href="/html/template/template.go.html#4470726">name</a></span><span class="op" id="4470999">,</span>&nbsp;<span class="ident" id="4471001"><a href="/html/template/template.go.html#4470739">tree</a></span><span class="op" id="4471005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4471008">if</span>&nbsp;<span class="ident" id="4471011"><a href="/html/template/template.go.html#4470968">err</a></span>&nbsp;<span class="op" id="4471015">!=</span>&nbsp;<span class="ident" id="4471018">nil</span>&nbsp;<span class="op" id="4471022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4471026">return</span>&nbsp;<span class="ident" id="4471033">nil</span><span class="op" id="4471036">,</span>&nbsp;<span class="ident" id="4471038"><a href="/html/template/template.go.html#4470968">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4471043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471046">ret</span>&nbsp;<span class="op" id="4471050">:=</span>&nbsp;<span class="op" id="4471053">&amp;</span><span class="ident" id="4471054"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4471062">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471066">nil</span><span class="op" id="4471069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471073"><a href="/html/template/template.go.html#4470962">text</a></span><span class="op" id="4471077">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471081"><a href="/html/template/template.go.html#4470962">text</a></span><span class="op" id="4471085">.</span><span class="ident" id="4471086">Tree</span><span class="op" id="4471090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471094"><a href="/html/template/template.go.html#4470700">t</a></span><span class="op" id="4471095">.</span><span class="ident" id="4471096">nameSpace</span><span class="op" id="4471105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4471108">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471111"><a href="/html/template/template.go.html#4470700">t</a></span><span class="op" id="4471112">.</span><span class="ident" id="4471113">set</span><span class="op" id="4471116">[</span><span class="ident" id="4471117"><a href="/html/template/template.go.html#4470726">name</a></span><span class="op" id="4471121">]</span>&nbsp;<span class="op" id="4471123">=</span>&nbsp;<span class="ident" id="4471125"><a href="/html/template/template.go.html#4471046">ret</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4471130">return</span>&nbsp;<span class="ident" id="4471137"><a href="/html/template/template.go.html#4471046">ret</a></span><span class="op" id="4471140">,</span>&nbsp;<span class="ident" id="4471142">nil</span><br>
<span class="lineno"></span><span class="op" id="4471146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4471149">//&nbsp;Clone&nbsp;returns&nbsp;a&nbsp;duplicate&nbsp;of&nbsp;the&nbsp;template,&nbsp;including&nbsp;all&nbsp;associated</span><br>
<span class="lineno">180</span><span class="comment" id="4471220">//&nbsp;templates.&nbsp;The&nbsp;actual&nbsp;representation&nbsp;is&nbsp;not&nbsp;copied,&nbsp;but&nbsp;the&nbsp;name&nbsp;space&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4471297">//&nbsp;associated&nbsp;templates&nbsp;is,&nbsp;so&nbsp;further&nbsp;calls&nbsp;to&nbsp;Parse&nbsp;in&nbsp;the&nbsp;copy&nbsp;will&nbsp;add</span><br>
<span class="lineno"></span><span class="comment" id="4471372">//&nbsp;templates&nbsp;to&nbsp;the&nbsp;copy&nbsp;but&nbsp;not&nbsp;to&nbsp;the&nbsp;original.&nbsp;Clone&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;prepare</span><br>
<span class="lineno"></span><span class="comment" id="4471451">//&nbsp;common&nbsp;templates&nbsp;and&nbsp;use&nbsp;them&nbsp;with&nbsp;variant&nbsp;definitions&nbsp;for&nbsp;other&nbsp;templates</span><br>
<span class="lineno"></span><span class="comment" id="4471529">//&nbsp;by&nbsp;adding&nbsp;the&nbsp;variants&nbsp;after&nbsp;the&nbsp;clone&nbsp;is&nbsp;made.</span><br>
<span class="lineno">185</span><span class="comment" id="4471580">//</span><br>
<span class="lineno"></span><span class="comment" id="4471583">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;t&nbsp;has&nbsp;already&nbsp;been&nbsp;executed.</span><br>
<span class="lineno"></span><span class="keyword" id="4471638">func</span>&nbsp;<span class="op" id="4471643">(</span><span class="ident" id="4471644">t</span>&nbsp;<span class="op" id="4471646">*</span><span class="ident" id="4471647"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4471655">)</span>&nbsp;<span class="ident" id="4471657">Clone</span><span class="op" id="4471662">(</span><span class="op" id="4471663">)</span>&nbsp;<span class="op" id="4471665">(</span><span class="op" id="4471666">*</span><span class="ident" id="4471667"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4471675">,</span>&nbsp;<span class="builtintype" id="4471677">error</span><span class="op" id="4471682">)</span>&nbsp;<span class="op" id="4471684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471687"><a href="/html/template/template.go.html#4471644">t</a></span><span class="op" id="4471688">.</span><span class="ident" id="4471689">nameSpace</span><span class="op" id="4471698">.</span><span class="ident" id="4471699">mu</span><span class="op" id="4471701">.</span><span class="ident" id="4471702">Lock</span><span class="op" id="4471706">(</span><span class="op" id="4471707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4471710">defer</span>&nbsp;<span class="ident" id="4471716"><a href="/html/template/template.go.html#4471644">t</a></span><span class="op" id="4471717">.</span><span class="ident" id="4471718">nameSpace</span><span class="op" id="4471727">.</span><span class="ident" id="4471728">mu</span><span class="op" id="4471730">.</span><span class="ident" id="4471731">Unlock</span><span class="op" id="4471737">(</span><span class="op" id="4471738">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4471741">if</span>&nbsp;<span class="ident" id="4471744"><a href="/html/template/template.go.html#4471644">t</a></span><span class="op" id="4471745">.</span><span class="ident" id="4471746">escapeErr</span>&nbsp;<span class="op" id="4471756">!=</span>&nbsp;<span class="ident" id="4471759">nil</span>&nbsp;<span class="op" id="4471763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4471767">return</span>&nbsp;<span class="ident" id="4471774">nil</span><span class="op" id="4471777">,</span>&nbsp;<span class="ident" id="4471779"><a href="/html/template/template.go.html#4465876">fmt</a></span><span class="op" id="4471782">.</span><span class="ident" id="4471783">Errorf</span><span class="op" id="4471789">(</span><span class="string" id="4471790">&#34;html/template:&nbsp;cannot&nbsp;Clone&nbsp;%q&nbsp;after&nbsp;it&nbsp;has&nbsp;executed&#34;</span><span class="op" id="4471844">,</span>&nbsp;<span class="ident" id="4471846"><a href="/html/template/template.go.html#4471644">t</a></span><span class="op" id="4471847">.</span><span class="ident" id="4471848">Name</span><span class="op" id="4471852">(</span><span class="op" id="4471853">)</span><span class="op" id="4471854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4471857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471860">textClone</span><span class="op" id="4471869">,</span>&nbsp;<span class="ident" id="4471871">err</span>&nbsp;<span class="op" id="4471875">:=</span>&nbsp;<span class="ident" id="4471878"><a href="/html/template/template.go.html#4471644">t</a></span><span class="op" id="4471879">.</span><span class="ident" id="4471880">text</span><span class="op" id="4471884">.</span><span class="ident" id="4471885">Clone</span><span class="op" id="4471890">(</span><span class="op" id="4471891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4471894">if</span>&nbsp;<span class="ident" id="4471897"><a href="/html/template/template.go.html#4471871">err</a></span>&nbsp;<span class="op" id="4471901">!=</span>&nbsp;<span class="ident" id="4471904">nil</span>&nbsp;<span class="op" id="4471908">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4471912">return</span>&nbsp;<span class="ident" id="4471919">nil</span><span class="op" id="4471922">,</span>&nbsp;<span class="ident" id="4471924"><a href="/html/template/template.go.html#4471871">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4471929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471932">ret</span>&nbsp;<span class="op" id="4471936">:=</span>&nbsp;<span class="op" id="4471939">&amp;</span><span class="ident" id="4471940"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4471948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471952">nil</span><span class="op" id="4471955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471959"><a href="/html/template/template.go.html#4471860">textClone</a></span><span class="op" id="4471968">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4471972"><a href="/html/template/template.go.html#4471860">textClone</a></span><span class="op" id="4471981">.</span><span class="ident" id="4471982">Tree</span><span class="op" id="4471986">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4471990">&amp;</span><span class="ident" id="4471991"><a href="/html/template/template.go.html#4466693">nameSpace</a></span><span class="op" id="4472000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472005">set</span><span class="op" id="4472008">:</span>&nbsp;<span class="builtinfunc" id="4472010">make</span><span class="op" id="4472014">(</span><span class="keyword" id="4472015">map</span><span class="op" id="4472018">[</span><span class="builtintype" id="4472019">string</span><span class="op" id="4472025">]</span><span class="op" id="4472026">*</span><span class="ident" id="4472027"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4472035">)</span><span class="op" id="4472036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4472040">}</span><span class="op" id="4472041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4472044">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4472047">for</span>&nbsp;<span class="ident" id="4472051">_</span><span class="op" id="4472052">,</span>&nbsp;<span class="ident" id="4472054">x</span>&nbsp;<span class="op" id="4472056">:=</span>&nbsp;<span class="keyword" id="4472059">range</span>&nbsp;<span class="ident" id="4472065"><a href="/html/template/template.go.html#4471860">textClone</a></span><span class="op" id="4472074">.</span><span class="ident" id="4472075">Templates</span><span class="op" id="4472084">(</span><span class="op" id="4472085">)</span>&nbsp;<span class="op" id="4472087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472091">name</span>&nbsp;<span class="op" id="4472096">:=</span>&nbsp;<span class="ident" id="4472099"><a href="/html/template/template.go.html#4472054">x</a></span><span class="op" id="4472100">.</span><span class="ident" id="4472101">Name</span><span class="op" id="4472105">(</span><span class="op" id="4472106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472110">src</span>&nbsp;<span class="op" id="4472114">:=</span>&nbsp;<span class="ident" id="4472117"><a href="/html/template/template.go.html#4471644">t</a></span><span class="op" id="4472118">.</span><span class="ident" id="4472119">set</span><span class="op" id="4472122">[</span><span class="ident" id="4472123"><a href="/html/template/template.go.html#4472091">name</a></span><span class="op" id="4472127">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4472131">if</span>&nbsp;<span class="ident" id="4472134"><a href="/html/template/template.go.html#4472110">src</a></span>&nbsp;<span class="op" id="4472138">==</span>&nbsp;<span class="ident" id="4472141">nil</span>&nbsp;<span class="op" id="4472145">||</span>&nbsp;<span class="ident" id="4472148"><a href="/html/template/template.go.html#4472110">src</a></span><span class="op" id="4472151">.</span><span class="ident" id="4472152">escapeErr</span>&nbsp;<span class="op" id="4472162">!=</span>&nbsp;<span class="ident" id="4472165">nil</span>&nbsp;<span class="op" id="4472169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4472174">return</span>&nbsp;<span class="ident" id="4472181">nil</span><span class="op" id="4472184">,</span>&nbsp;<span class="ident" id="4472186"><a href="/html/template/template.go.html#4465876">fmt</a></span><span class="op" id="4472189">.</span><span class="ident" id="4472190">Errorf</span><span class="op" id="4472196">(</span><span class="string" id="4472197">&#34;html/template:&nbsp;cannot&nbsp;Clone&nbsp;%q&nbsp;after&nbsp;it&nbsp;has&nbsp;executed&#34;</span><span class="op" id="4472251">,</span>&nbsp;<span class="ident" id="4472253"><a href="/html/template/template.go.html#4471644">t</a></span><span class="op" id="4472254">.</span><span class="ident" id="4472255">Name</span><span class="op" id="4472259">(</span><span class="op" id="4472260">)</span><span class="op" id="4472261">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4472265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472269"><a href="/html/template/template.go.html#4472054">x</a></span><span class="op" id="4472270">.</span><span class="ident" id="4472271">Tree</span>&nbsp;<span class="op" id="4472276">=</span>&nbsp;<span class="ident" id="4472278"><a href="/html/template/template.go.html#4472054">x</a></span><span class="op" id="4472279">.</span><span class="ident" id="4472280">Tree</span><span class="op" id="4472284">.</span><span class="ident" id="4472285">Copy</span><span class="op" id="4472289">(</span><span class="op" id="4472290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472294"><a href="/html/template/template.go.html#4471932">ret</a></span><span class="op" id="4472297">.</span><span class="ident" id="4472298">set</span><span class="op" id="4472301">[</span><span class="ident" id="4472302"><a href="/html/template/template.go.html#4472091">name</a></span><span class="op" id="4472306">]</span>&nbsp;<span class="op" id="4472308">=</span>&nbsp;<span class="op" id="4472310">&amp;</span><span class="ident" id="4472311"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4472319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472324">nil</span><span class="op" id="4472327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472332"><a href="/html/template/template.go.html#4472054">x</a></span><span class="op" id="4472333">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472338"><a href="/html/template/template.go.html#4472054">x</a></span><span class="op" id="4472339">.</span><span class="ident" id="4472340">Tree</span><span class="op" id="4472344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472349"><a href="/html/template/template.go.html#4471932">ret</a></span><span class="op" id="4472352">.</span><span class="ident" id="4472353">nameSpace</span><span class="op" id="4472362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4472366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4472369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4472372">return</span>&nbsp;<span class="ident" id="4472379"><a href="/html/template/template.go.html#4471932">ret</a></span><span class="op" id="4472382">,</span>&nbsp;<span class="ident" id="4472384">nil</span><br>
<span class="lineno">220</span><span class="op" id="4472388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4472391">//&nbsp;New&nbsp;allocates&nbsp;a&nbsp;new&nbsp;HTML&nbsp;template&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="4472449">func</span>&nbsp;<span class="ident" id="4472454">New</span><span class="op" id="4472457">(</span><span class="ident" id="4472458">name</span>&nbsp;<span class="builtintype" id="4472463">string</span><span class="op" id="4472469">)</span>&nbsp;<span class="op" id="4472471">*</span><span class="ident" id="4472472"><a href="/html/template/template.go.html#4466081">Template</a></span>&nbsp;<span class="op" id="4472481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472484">tmpl</span>&nbsp;<span class="op" id="4472489">:=</span>&nbsp;<span class="op" id="4472492">&amp;</span><span class="ident" id="4472493"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4472501">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472505">nil</span><span class="op" id="4472508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472512"><a href="/html/template/template.go.html#4465927">template</a></span><span class="op" id="4472520">.</span><span class="ident" id="4472521">New</span><span class="op" id="4472524">(</span><span class="ident" id="4472525"><a href="/html/template/template.go.html#4472458">name</a></span><span class="op" id="4472529">)</span><span class="op" id="4472530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472534">nil</span><span class="op" id="4472537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4472541">&amp;</span><span class="ident" id="4472542"><a href="/html/template/template.go.html#4466693">nameSpace</a></span><span class="op" id="4472551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472556">set</span><span class="op" id="4472559">:</span>&nbsp;<span class="builtinfunc" id="4472561">make</span><span class="op" id="4472565">(</span><span class="keyword" id="4472566">map</span><span class="op" id="4472569">[</span><span class="builtintype" id="4472570">string</span><span class="op" id="4472576">]</span><span class="op" id="4472577">*</span><span class="ident" id="4472578"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4472586">)</span><span class="op" id="4472587">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4472591">}</span><span class="op" id="4472592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4472595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472598"><a href="/html/template/template.go.html#4472484">tmpl</a></span><span class="op" id="4472602">.</span><span class="ident" id="4472603">set</span><span class="op" id="4472606">[</span><span class="ident" id="4472607"><a href="/html/template/template.go.html#4472458">name</a></span><span class="op" id="4472611">]</span>&nbsp;<span class="op" id="4472613">=</span>&nbsp;<span class="ident" id="4472615"><a href="/html/template/template.go.html#4472484">tmpl</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4472621">return</span>&nbsp;<span class="ident" id="4472628"><a href="/html/template/template.go.html#4472484">tmpl</a></span><br>
<span class="lineno"></span><span class="op" id="4472633">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="4472636">//&nbsp;New&nbsp;allocates&nbsp;a&nbsp;new&nbsp;HTML&nbsp;template&nbsp;associated&nbsp;with&nbsp;the&nbsp;given&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="4472703">//&nbsp;and&nbsp;with&nbsp;the&nbsp;same&nbsp;delimiters.&nbsp;The&nbsp;association,&nbsp;which&nbsp;is&nbsp;transitive,</span><br>
<span class="lineno"></span><span class="comment" id="4472774">//&nbsp;allows&nbsp;one&nbsp;template&nbsp;to&nbsp;invoke&nbsp;another&nbsp;with&nbsp;a&nbsp;{{template}}&nbsp;action.</span><br>
<span class="lineno"></span><span class="keyword" id="4472843">func</span>&nbsp;<span class="op" id="4472848">(</span><span class="ident" id="4472849">t</span>&nbsp;<span class="op" id="4472851">*</span><span class="ident" id="4472852"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4472860">)</span>&nbsp;<span class="ident" id="4472862">New</span><span class="op" id="4472865">(</span><span class="ident" id="4472866">name</span>&nbsp;<span class="builtintype" id="4472871">string</span><span class="op" id="4472877">)</span>&nbsp;<span class="op" id="4472879">*</span><span class="ident" id="4472880"><a href="/html/template/template.go.html#4466081">Template</a></span>&nbsp;<span class="op" id="4472889">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4472892"><a href="/html/template/template.go.html#4472849">t</a></span><span class="op" id="4472893">.</span><span class="ident" id="4472894">nameSpace</span><span class="op" id="4472903">.</span><span class="ident" id="4472904">mu</span><span class="op" id="4472906">.</span><span class="ident" id="4472907">Lock</span><span class="op" id="4472911">(</span><span class="op" id="4472912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4472915">defer</span>&nbsp;<span class="ident" id="4472921"><a href="/html/template/template.go.html#4472849">t</a></span><span class="op" id="4472922">.</span><span class="ident" id="4472923">nameSpace</span><span class="op" id="4472932">.</span><span class="ident" id="4472933">mu</span><span class="op" id="4472935">.</span><span class="ident" id="4472936">Unlock</span><span class="op" id="4472942">(</span><span class="op" id="4472943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4472946">return</span>&nbsp;<span class="ident" id="4472953"><a href="/html/template/template.go.html#4472849">t</a></span><span class="op" id="4472954">.</span><span class="builtinfunc" id="4472955">new</span><span class="op" id="4472958">(</span><span class="ident" id="4472959"><a href="/html/template/template.go.html#4472866">name</a></span><span class="op" id="4472963">)</span><br>
<span class="lineno"></span><span class="op" id="4472965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="4472968">//&nbsp;new&nbsp;is&nbsp;the&nbsp;implementation&nbsp;of&nbsp;New,&nbsp;without&nbsp;the&nbsp;lock.</span><br>
<span class="lineno"></span><span class="keyword" id="4473023">func</span>&nbsp;<span class="op" id="4473028">(</span><span class="ident" id="4473029">t</span>&nbsp;<span class="op" id="4473031">*</span><span class="ident" id="4473032"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4473040">)</span>&nbsp;<span class="builtinfunc" id="4473042">new</span><span class="op" id="4473045">(</span><span class="ident" id="4473046">name</span>&nbsp;<span class="builtintype" id="4473051">string</span><span class="op" id="4473057">)</span>&nbsp;<span class="op" id="4473059">*</span><span class="ident" id="4473060"><a href="/html/template/template.go.html#4466081">Template</a></span>&nbsp;<span class="op" id="4473069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4473072">tmpl</span>&nbsp;<span class="op" id="4473077">:=</span>&nbsp;<span class="op" id="4473080">&amp;</span><span class="ident" id="4473081"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4473089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4473093">nil</span><span class="op" id="4473096">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4473100"><a href="/html/template/template.go.html#4473029">t</a></span><span class="op" id="4473101">.</span><span class="ident" id="4473102">text</span><span class="op" id="4473106">.</span><span class="ident" id="4473107">New</span><span class="op" id="4473110">(</span><span class="ident" id="4473111"><a href="/html/template/template.go.html#4473046">name</a></span><span class="op" id="4473115">)</span><span class="op" id="4473116">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4473120">nil</span><span class="op" id="4473123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4473127"><a href="/html/template/template.go.html#4473029">t</a></span><span class="op" id="4473128">.</span><span class="ident" id="4473129">nameSpace</span><span class="op" id="4473138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4473141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4473144"><a href="/html/template/template.go.html#4473072">tmpl</a></span><span class="op" id="4473148">.</span><span class="ident" id="4473149">set</span><span class="op" id="4473152">[</span><span class="ident" id="4473153"><a href="/html/template/template.go.html#4473046">name</a></span><span class="op" id="4473157">]</span>&nbsp;<span class="op" id="4473159">=</span>&nbsp;<span class="ident" id="4473161"><a href="/html/template/template.go.html#4473072">tmpl</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4473167">return</span>&nbsp;<span class="ident" id="4473174"><a href="/html/template/template.go.html#4473072">tmpl</a></span><br>
<span class="lineno">255</span><span class="op" id="4473179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4473182">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="4473224">func</span>&nbsp;<span class="op" id="4473229">(</span><span class="ident" id="4473230">t</span>&nbsp;<span class="op" id="4473232">*</span><span class="ident" id="4473233"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4473241">)</span>&nbsp;<span class="ident" id="4473243">Name</span><span class="op" id="4473247">(</span><span class="op" id="4473248">)</span>&nbsp;<span class="builtintype" id="4473250">string</span>&nbsp;<span class="op" id="4473257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4473260">return</span>&nbsp;<span class="ident" id="4473267"><a href="/html/template/template.go.html#4473230">t</a></span><span class="op" id="4473268">.</span><span class="ident" id="4473269">text</span><span class="op" id="4473273">.</span><span class="ident" id="4473274">Name</span><span class="op" id="4473278">(</span><span class="op" id="4473279">)</span><br>
<span class="lineno">260</span><span class="op" id="4473281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4473284">//&nbsp;FuncMap&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;map&nbsp;defining&nbsp;the&nbsp;mapping&nbsp;from&nbsp;names&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4473353">//&nbsp;functions.&nbsp;Each&nbsp;function&nbsp;must&nbsp;have&nbsp;either&nbsp;a&nbsp;single&nbsp;return&nbsp;value,&nbsp;or&nbsp;two</span><br>
<span class="lineno"></span><span class="comment" id="4473428">//&nbsp;return&nbsp;values&nbsp;of&nbsp;which&nbsp;the&nbsp;second&nbsp;has&nbsp;type&nbsp;error.&nbsp;In&nbsp;that&nbsp;case,&nbsp;if&nbsp;the</span><br>
<span class="lineno">265</span><span class="comment" id="4473502">//&nbsp;second&nbsp;(error)&nbsp;argument&nbsp;evaluates&nbsp;to&nbsp;non-nil&nbsp;during&nbsp;execution,&nbsp;execution</span><br>
<span class="lineno"></span><span class="comment" id="4473578">//&nbsp;terminates&nbsp;and&nbsp;Execute&nbsp;returns&nbsp;that&nbsp;error.&nbsp;FuncMap&nbsp;has&nbsp;the&nbsp;same&nbsp;base&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="4473655">//&nbsp;as&nbsp;FuncMap&nbsp;in&nbsp;&#34;text/template&#34;,&nbsp;copied&nbsp;here&nbsp;so&nbsp;clients&nbsp;need&nbsp;not&nbsp;import</span><br>
<span class="lineno"></span><span class="comment" id="4473728">//&nbsp;&#34;text/template&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="4473748">type</span>&nbsp;<span class="ident" id="4473753">FuncMap</span>&nbsp;<span class="keyword" id="4473761">map</span><span class="op" id="4473764">[</span><span class="builtintype" id="4473765">string</span><span class="op" id="4473771">]</span><span class="keyword" id="4473772">interface</span><span class="op" id="4473781">{</span><span class="op" id="4473782">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="4473785">//&nbsp;Funcs&nbsp;adds&nbsp;the&nbsp;elements&nbsp;of&nbsp;the&nbsp;argument&nbsp;map&nbsp;to&nbsp;the&nbsp;template&#39;s&nbsp;function&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="4473864">//&nbsp;It&nbsp;panics&nbsp;if&nbsp;a&nbsp;value&nbsp;in&nbsp;the&nbsp;map&nbsp;is&nbsp;not&nbsp;a&nbsp;function&nbsp;with&nbsp;appropriate&nbsp;return</span><br>
<span class="lineno"></span><span class="comment" id="4473941">//&nbsp;type.&nbsp;However,&nbsp;it&nbsp;is&nbsp;legal&nbsp;to&nbsp;overwrite&nbsp;elements&nbsp;of&nbsp;the&nbsp;map.&nbsp;The&nbsp;return</span><br>
<span class="lineno"></span><span class="comment" id="4474016">//&nbsp;value&nbsp;is&nbsp;the&nbsp;template,&nbsp;so&nbsp;calls&nbsp;can&nbsp;be&nbsp;chained.</span><br>
<span class="lineno">275</span><span class="keyword" id="4474067">func</span>&nbsp;<span class="op" id="4474072">(</span><span class="ident" id="4474073">t</span>&nbsp;<span class="op" id="4474075">*</span><span class="ident" id="4474076"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4474084">)</span>&nbsp;<span class="ident" id="4474086">Funcs</span><span class="op" id="4474091">(</span><span class="ident" id="4474092">funcMap</span>&nbsp;<span class="ident" id="4474100"><a href="/html/template/template.go.html#4473753">FuncMap</a></span><span class="op" id="4474107">)</span>&nbsp;<span class="op" id="4474109">*</span><span class="ident" id="4474110"><a href="/html/template/template.go.html#4466081">Template</a></span>&nbsp;<span class="op" id="4474119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4474122"><a href="/html/template/template.go.html#4474073">t</a></span><span class="op" id="4474123">.</span><span class="ident" id="4474124">text</span><span class="op" id="4474128">.</span><span class="ident" id="4474129">Funcs</span><span class="op" id="4474134">(</span><span class="ident" id="4474135"><a href="/html/template/template.go.html#4465927">template</a></span><span class="op" id="4474143">.</span><span class="ident" id="4474144">FuncMap</span><span class="op" id="4474151">(</span><span class="ident" id="4474152"><a href="/html/template/template.go.html#4474092">funcMap</a></span><span class="op" id="4474159">)</span><span class="op" id="4474160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4474163">return</span>&nbsp;<span class="ident" id="4474170"><a href="/html/template/template.go.html#4474073">t</a></span><br>
<span class="lineno"></span><span class="op" id="4474172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span><span class="comment" id="4474175">//&nbsp;Delims&nbsp;sets&nbsp;the&nbsp;action&nbsp;delimiters&nbsp;to&nbsp;the&nbsp;specified&nbsp;strings,&nbsp;to&nbsp;be&nbsp;used&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="4474252">//&nbsp;subsequent&nbsp;calls&nbsp;to&nbsp;Parse,&nbsp;ParseFiles,&nbsp;or&nbsp;ParseGlob.&nbsp;Nested&nbsp;template</span><br>
<span class="lineno"></span><span class="comment" id="4474324">//&nbsp;definitions&nbsp;will&nbsp;inherit&nbsp;the&nbsp;settings.&nbsp;An&nbsp;empty&nbsp;delimiter&nbsp;stands&nbsp;for&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4474400">//&nbsp;corresponding&nbsp;default:&nbsp;{{&nbsp;or&nbsp;}}.</span><br>
<span class="lineno"></span><span class="comment" id="4474436">//&nbsp;The&nbsp;return&nbsp;value&nbsp;is&nbsp;the&nbsp;template,&nbsp;so&nbsp;calls&nbsp;can&nbsp;be&nbsp;chained.</span><br>
<span class="lineno">285</span><span class="keyword" id="4474498">func</span>&nbsp;<span class="op" id="4474503">(</span><span class="ident" id="4474504">t</span>&nbsp;<span class="op" id="4474506">*</span><span class="ident" id="4474507"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4474515">)</span>&nbsp;<span class="ident" id="4474517">Delims</span><span class="op" id="4474523">(</span><span class="ident" id="4474524">left</span><span class="op" id="4474528">,</span>&nbsp;<span class="ident" id="4474530">right</span>&nbsp;<span class="builtintype" id="4474536">string</span><span class="op" id="4474542">)</span>&nbsp;<span class="op" id="4474544">*</span><span class="ident" id="4474545"><a href="/html/template/template.go.html#4466081">Template</a></span>&nbsp;<span class="op" id="4474554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4474557"><a href="/html/template/template.go.html#4474504">t</a></span><span class="op" id="4474558">.</span><span class="ident" id="4474559">text</span><span class="op" id="4474563">.</span><span class="ident" id="4474564">Delims</span><span class="op" id="4474570">(</span><span class="ident" id="4474571"><a href="/html/template/template.go.html#4474524">left</a></span><span class="op" id="4474575">,</span>&nbsp;<span class="ident" id="4474577"><a href="/html/template/template.go.html#4474530">right</a></span><span class="op" id="4474582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4474585">return</span>&nbsp;<span class="ident" id="4474592"><a href="/html/template/template.go.html#4474504">t</a></span><br>
<span class="lineno"></span><span class="op" id="4474594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="comment" id="4474597">//&nbsp;Lookup&nbsp;returns&nbsp;the&nbsp;template&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;that&nbsp;is&nbsp;associated&nbsp;with&nbsp;t,</span><br>
<span class="lineno"></span><span class="comment" id="4474675">//&nbsp;or&nbsp;nil&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;template.</span><br>
<span class="lineno"></span><span class="keyword" id="4474715">func</span>&nbsp;<span class="op" id="4474720">(</span><span class="ident" id="4474721">t</span>&nbsp;<span class="op" id="4474723">*</span><span class="ident" id="4474724"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4474732">)</span>&nbsp;<span class="ident" id="4474734">Lookup</span><span class="op" id="4474740">(</span><span class="ident" id="4474741">name</span>&nbsp;<span class="builtintype" id="4474746">string</span><span class="op" id="4474752">)</span>&nbsp;<span class="op" id="4474754">*</span><span class="ident" id="4474755"><a href="/html/template/template.go.html#4466081">Template</a></span>&nbsp;<span class="op" id="4474764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4474767"><a href="/html/template/template.go.html#4474721">t</a></span><span class="op" id="4474768">.</span><span class="ident" id="4474769">nameSpace</span><span class="op" id="4474778">.</span><span class="ident" id="4474779">mu</span><span class="op" id="4474781">.</span><span class="ident" id="4474782">Lock</span><span class="op" id="4474786">(</span><span class="op" id="4474787">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4474790">defer</span>&nbsp;<span class="ident" id="4474796"><a href="/html/template/template.go.html#4474721">t</a></span><span class="op" id="4474797">.</span><span class="ident" id="4474798">nameSpace</span><span class="op" id="4474807">.</span><span class="ident" id="4474808">mu</span><span class="op" id="4474810">.</span><span class="ident" id="4474811">Unlock</span><span class="op" id="4474817">(</span><span class="op" id="4474818">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4474821">return</span>&nbsp;<span class="ident" id="4474828"><a href="/html/template/template.go.html#4474721">t</a></span><span class="op" id="4474829">.</span><span class="ident" id="4474830">set</span><span class="op" id="4474833">[</span><span class="ident" id="4474834"><a href="/html/template/template.go.html#4474741">name</a></span><span class="op" id="4474838">]</span><br>
<span class="lineno"></span><span class="op" id="4474840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4474843">//&nbsp;Must&nbsp;is&nbsp;a&nbsp;helper&nbsp;that&nbsp;wraps&nbsp;a&nbsp;call&nbsp;to&nbsp;a&nbsp;function&nbsp;returning&nbsp;(*Template,&nbsp;error)</span><br>
<span class="lineno"></span><span class="comment" id="4474924">//&nbsp;and&nbsp;panics&nbsp;if&nbsp;the&nbsp;error&nbsp;is&nbsp;non-nil.&nbsp;It&nbsp;is&nbsp;intended&nbsp;for&nbsp;use&nbsp;in&nbsp;variable&nbsp;initializations</span><br>
<span class="lineno">300</span><span class="comment" id="4475014">//&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="4475025">//&nbsp;&nbsp;&nbsp;&nbspvar&nbsp;t&nbsp;=&nbsp;template.Must(template.New(&#34;name&#34;).Parse(&#34;html&#34;))</span><br>
<span class="lineno"></span><span class="keyword" id="4475086">func</span>&nbsp;<span class="ident" id="4475091">Must</span><span class="op" id="4475095">(</span><span class="ident" id="4475096">t</span>&nbsp;<span class="op" id="4475098">*</span><span class="ident" id="4475099"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4475107">,</span>&nbsp;<span class="ident" id="4475109">err</span>&nbsp;<span class="builtintype" id="4475113">error</span><span class="op" id="4475118">)</span>&nbsp;<span class="op" id="4475120">*</span><span class="ident" id="4475121"><a href="/html/template/template.go.html#4466081">Template</a></span>&nbsp;<span class="op" id="4475130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4475133">if</span>&nbsp;<span class="ident" id="4475136"><a href="/html/template/template.go.html#4475109">err</a></span>&nbsp;<span class="op" id="4475140">!=</span>&nbsp;<span class="ident" id="4475143">nil</span>&nbsp;<span class="op" id="4475147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4475151">panic</span><span class="op" id="4475156">(</span><span class="ident" id="4475157"><a href="/html/template/template.go.html#4475109">err</a></span><span class="op" id="4475160">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4475163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4475166">return</span>&nbsp;<span class="ident" id="4475173"><a href="/html/template/template.go.html#4475096">t</a></span><br>
<span class="lineno"></span><span class="op" id="4475175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4475178">//&nbsp;ParseFiles&nbsp;creates&nbsp;a&nbsp;new&nbsp;Template&nbsp;and&nbsp;parses&nbsp;the&nbsp;template&nbsp;definitions&nbsp;from</span><br>
<span class="lineno">310</span><span class="comment" id="4475256">//&nbsp;the&nbsp;named&nbsp;files.&nbsp;The&nbsp;returned&nbsp;template&#39;s&nbsp;name&nbsp;will&nbsp;have&nbsp;the&nbsp;(base)&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4475335">//&nbsp;(parsed)&nbsp;contents&nbsp;of&nbsp;the&nbsp;first&nbsp;file.&nbsp;There&nbsp;must&nbsp;be&nbsp;at&nbsp;least&nbsp;one&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="4475408">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;parsing&nbsp;stops&nbsp;and&nbsp;the&nbsp;returned&nbsp;*Template&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4475480">func</span>&nbsp;<span class="ident" id="4475485">ParseFiles</span><span class="op" id="4475495">(</span><span class="ident" id="4475496">filenames</span>&nbsp;<span class="op" id="4475506">...</span><span class="builtintype" id="4475509">string</span><span class="op" id="4475515">)</span>&nbsp;<span class="op" id="4475517">(</span><span class="op" id="4475518">*</span><span class="ident" id="4475519"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4475527">,</span>&nbsp;<span class="builtintype" id="4475529">error</span><span class="op" id="4475534">)</span>&nbsp;<span class="op" id="4475536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4475539">return</span>&nbsp;<span class="ident" id="4475546"><a href="/html/template/template.go.html#4476033">parseFiles</a></span><span class="op" id="4475556">(</span><span class="ident" id="4475557">nil</span><span class="op" id="4475560">,</span>&nbsp;<span class="ident" id="4475562"><a href="/html/template/template.go.html#4475496">filenames</a></span><span class="op" id="4475571">...</span><span class="op" id="4475574">)</span><br>
<span class="lineno">315</span><span class="op" id="4475576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4475579">//&nbsp;ParseFiles&nbsp;parses&nbsp;the&nbsp;named&nbsp;files&nbsp;and&nbsp;associates&nbsp;the&nbsp;resulting&nbsp;templates&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="4475660">//&nbsp;t.&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;parsing&nbsp;stops&nbsp;and&nbsp;the&nbsp;returned&nbsp;template&nbsp;is&nbsp;nil;</span><br>
<span class="lineno"></span><span class="comment" id="4475734">//&nbsp;otherwise&nbsp;it&nbsp;is&nbsp;t.&nbsp;There&nbsp;must&nbsp;be&nbsp;at&nbsp;least&nbsp;one&nbsp;file.</span><br>
<span class="lineno">320</span><span class="keyword" id="4475789">func</span>&nbsp;<span class="op" id="4475794">(</span><span class="ident" id="4475795">t</span>&nbsp;<span class="op" id="4475797">*</span><span class="ident" id="4475798"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4475806">)</span>&nbsp;<span class="ident" id="4475808">ParseFiles</span><span class="op" id="4475818">(</span><span class="ident" id="4475819">filenames</span>&nbsp;<span class="op" id="4475829">...</span><span class="builtintype" id="4475832">string</span><span class="op" id="4475838">)</span>&nbsp;<span class="op" id="4475840">(</span><span class="op" id="4475841">*</span><span class="ident" id="4475842"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4475850">,</span>&nbsp;<span class="builtintype" id="4475852">error</span><span class="op" id="4475857">)</span>&nbsp;<span class="op" id="4475859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4475862">return</span>&nbsp;<span class="ident" id="4475869"><a href="/html/template/template.go.html#4476033">parseFiles</a></span><span class="op" id="4475879">(</span><span class="ident" id="4475880"><a href="/html/template/template.go.html#4475795">t</a></span><span class="op" id="4475881">,</span>&nbsp;<span class="ident" id="4475883"><a href="/html/template/template.go.html#4475819">filenames</a></span><span class="op" id="4475892">...</span><span class="op" id="4475895">)</span><br>
<span class="lineno"></span><span class="op" id="4475897">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4475900">//&nbsp;parseFiles&nbsp;is&nbsp;the&nbsp;helper&nbsp;for&nbsp;the&nbsp;method&nbsp;and&nbsp;function.&nbsp;If&nbsp;the&nbsp;argument</span><br>
<span class="lineno">325</span><span class="comment" id="4475973">//&nbsp;template&nbsp;is&nbsp;nil,&nbsp;it&nbsp;is&nbsp;created&nbsp;from&nbsp;the&nbsp;first&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="4476028">func</span>&nbsp;<span class="ident" id="4476033">parseFiles</span><span class="op" id="4476043">(</span><span class="ident" id="4476044">t</span>&nbsp;<span class="op" id="4476046">*</span><span class="ident" id="4476047"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4476055">,</span>&nbsp;<span class="ident" id="4476057">filenames</span>&nbsp;<span class="op" id="4476067">...</span><span class="builtintype" id="4476070">string</span><span class="op" id="4476076">)</span>&nbsp;<span class="op" id="4476078">(</span><span class="op" id="4476079">*</span><span class="ident" id="4476080"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4476088">,</span>&nbsp;<span class="builtintype" id="4476090">error</span><span class="op" id="4476095">)</span>&nbsp;<span class="op" id="4476097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476100">if</span>&nbsp;<span class="builtinfunc" id="4476103">len</span><span class="op" id="4476106">(</span><span class="ident" id="4476107"><a href="/html/template/template.go.html#4476057">filenames</a></span><span class="op" id="4476116">)</span>&nbsp;<span class="op" id="4476118">==</span>&nbsp;<span class="num" id="4476121">0</span>&nbsp;<span class="op" id="4476123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4476127">//&nbsp;Not&nbsp;really&nbsp;a&nbsp;problem,&nbsp;but&nbsp;be&nbsp;consistent.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476173">return</span>&nbsp;<span class="ident" id="4476180">nil</span><span class="op" id="4476183">,</span>&nbsp;<span class="ident" id="4476185"><a href="/html/template/template.go.html#4465876">fmt</a></span><span class="op" id="4476188">.</span><span class="ident" id="4476189">Errorf</span><span class="op" id="4476195">(</span><span class="string" id="4476196">&#34;html/template:&nbsp;no&nbsp;files&nbsp;named&nbsp;in&nbsp;call&nbsp;to&nbsp;ParseFiles&#34;</span><span class="op" id="4476249">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4476252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476255">for</span>&nbsp;<span class="ident" id="4476259">_</span><span class="op" id="4476260">,</span>&nbsp;<span class="ident" id="4476262">filename</span>&nbsp;<span class="op" id="4476271">:=</span>&nbsp;<span class="keyword" id="4476274">range</span>&nbsp;<span class="ident" id="4476280"><a href="/html/template/template.go.html#4476057">filenames</a></span>&nbsp;<span class="op" id="4476290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4476294">b</span><span class="op" id="4476295">,</span>&nbsp;<span class="ident" id="4476297">err</span>&nbsp;<span class="op" id="4476301">:=</span>&nbsp;<span class="ident" id="4476304"><a href="/html/template/template.go.html#4465889">ioutil</a></span><span class="op" id="4476310">.</span><span class="ident" id="4476311">ReadFile</span><span class="op" id="4476319">(</span><span class="ident" id="4476320"><a href="/html/template/template.go.html#4476262">filename</a></span><span class="op" id="4476328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476332">if</span>&nbsp;<span class="ident" id="4476335"><a href="/html/template/template.go.html#4476297">err</a></span>&nbsp;<span class="op" id="4476339">!=</span>&nbsp;<span class="ident" id="4476342">nil</span>&nbsp;<span class="op" id="4476346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476351">return</span>&nbsp;<span class="ident" id="4476358">nil</span><span class="op" id="4476361">,</span>&nbsp;<span class="ident" id="4476363"><a href="/html/template/template.go.html#4476297">err</a></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4476369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4476373">s</span>&nbsp;<span class="op" id="4476375">:=</span>&nbsp;<span class="builtintype" id="4476378">string</span><span class="op" id="4476384">(</span><span class="ident" id="4476385"><a href="/html/template/template.go.html#4476294">b</a></span><span class="op" id="4476386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4476390">name</span>&nbsp;<span class="op" id="4476395">:=</span>&nbsp;<span class="ident" id="4476398"><a href="/html/template/template.go.html#4465902">filepath</a></span><span class="op" id="4476406">.</span><span class="ident" id="4476407">Base</span><span class="op" id="4476411">(</span><span class="ident" id="4476412"><a href="/html/template/template.go.html#4476262">filename</a></span><span class="op" id="4476420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4476424">//&nbsp;First&nbsp;template&nbsp;becomes&nbsp;return&nbsp;value&nbsp;if&nbsp;not&nbsp;already&nbsp;defined,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4476489">//&nbsp;and&nbsp;we&nbsp;use&nbsp;that&nbsp;one&nbsp;for&nbsp;subsequent&nbsp;New&nbsp;calls&nbsp;to&nbsp;associate</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4476552">//&nbsp;all&nbsp;the&nbsp;templates&nbsp;together.&nbsp;Also,&nbsp;if&nbsp;this&nbsp;file&nbsp;has&nbsp;the&nbsp;same&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4476622">//&nbsp;as&nbsp;t,&nbsp;this&nbsp;file&nbsp;becomes&nbsp;the&nbsp;contents&nbsp;of&nbsp;t,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4476673">//&nbsp;&nbsp;t,&nbsp;err&nbsp;:=&nbsp;New(name).Funcs(xxx).ParseFiles(name)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4476727">//&nbsp;works.&nbsp;Otherwise&nbsp;we&nbsp;create&nbsp;a&nbsp;new&nbsp;template&nbsp;associated&nbsp;with&nbsp;t.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476793">var</span>&nbsp;<span class="ident" id="4476797">tmpl</span>&nbsp;<span class="op" id="4476802">*</span><span class="ident" id="4476803"><a href="/html/template/template.go.html#4466081">Template</a></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476814">if</span>&nbsp;<span class="ident" id="4476817"><a href="/html/template/template.go.html#4476044">t</a></span>&nbsp;<span class="op" id="4476819">==</span>&nbsp;<span class="ident" id="4476822">nil</span>&nbsp;<span class="op" id="4476826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4476831"><a href="/html/template/template.go.html#4476044">t</a></span>&nbsp;<span class="op" id="4476833">=</span>&nbsp;<span class="ident" id="4476835"><a href="/html/template/template.go.html#4472454">New</a></span><span class="op" id="4476838">(</span><span class="ident" id="4476839"><a href="/html/template/template.go.html#4476390">name</a></span><span class="op" id="4476843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4476847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476851">if</span>&nbsp;<span class="ident" id="4476854"><a href="/html/template/template.go.html#4476390">name</a></span>&nbsp;<span class="op" id="4476859">==</span>&nbsp;<span class="ident" id="4476862"><a href="/html/template/template.go.html#4476044">t</a></span><span class="op" id="4476863">.</span><span class="ident" id="4476864">Name</span><span class="op" id="4476868">(</span><span class="op" id="4476869">)</span>&nbsp;<span class="op" id="4476871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4476876"><a href="/html/template/template.go.html#4476797">tmpl</a></span>&nbsp;<span class="op" id="4476881">=</span>&nbsp;<span class="ident" id="4476883"><a href="/html/template/template.go.html#4476044">t</a></span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4476887">}</span>&nbsp;<span class="keyword" id="4476889">else</span>&nbsp;<span class="op" id="4476894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4476899"><a href="/html/template/template.go.html#4476797">tmpl</a></span>&nbsp;<span class="op" id="4476904">=</span>&nbsp;<span class="ident" id="4476906"><a href="/html/template/template.go.html#4476044">t</a></span><span class="op" id="4476907">.</span><span class="ident" id="4476908">New</span><span class="op" id="4476911">(</span><span class="ident" id="4476912"><a href="/html/template/template.go.html#4476390">name</a></span><span class="op" id="4476916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4476920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4476924">_</span><span class="op" id="4476925">,</span>&nbsp;<span class="ident" id="4476927"><a href="/html/template/template.go.html#4476297">err</a></span>&nbsp;<span class="op" id="4476931">=</span>&nbsp;<span class="ident" id="4476933"><a href="/html/template/template.go.html#4476797">tmpl</a></span><span class="op" id="4476937">.</span><span class="ident" id="4476938">Parse</span><span class="op" id="4476943">(</span><span class="ident" id="4476944"><a href="/html/template/template.go.html#4476373">s</a></span><span class="op" id="4476945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476949">if</span>&nbsp;<span class="ident" id="4476952"><a href="/html/template/template.go.html#4476297">err</a></span>&nbsp;<span class="op" id="4476956">!=</span>&nbsp;<span class="ident" id="4476959">nil</span>&nbsp;<span class="op" id="4476963">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476968">return</span>&nbsp;<span class="ident" id="4476975">nil</span><span class="op" id="4476978">,</span>&nbsp;<span class="ident" id="4476980"><a href="/html/template/template.go.html#4476297">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4476986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4476989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4476992">return</span>&nbsp;<span class="ident" id="4476999"><a href="/html/template/template.go.html#4476044">t</a></span><span class="op" id="4477000">,</span>&nbsp;<span class="ident" id="4477002">nil</span><br>
<span class="lineno"></span><span class="op" id="4477006">}</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span><span class="comment" id="4477009">//&nbsp;ParseGlob&nbsp;creates&nbsp;a&nbsp;new&nbsp;Template&nbsp;and&nbsp;parses&nbsp;the&nbsp;template&nbsp;definitions&nbsp;from&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4477090">//&nbsp;files&nbsp;identified&nbsp;by&nbsp;the&nbsp;pattern,&nbsp;which&nbsp;must&nbsp;match&nbsp;at&nbsp;least&nbsp;one&nbsp;file.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="4477166">//&nbsp;returned&nbsp;template&nbsp;will&nbsp;have&nbsp;the&nbsp;(base)&nbsp;name&nbsp;and&nbsp;(parsed)&nbsp;contents&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4477242">//&nbsp;first&nbsp;file&nbsp;matched&nbsp;by&nbsp;the&nbsp;pattern.&nbsp;ParseGlob&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;calling</span><br>
<span class="lineno">365</span><span class="comment" id="4477315">//&nbsp;ParseFiles&nbsp;with&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;matched&nbsp;by&nbsp;the&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="4477376">func</span>&nbsp;<span class="ident" id="4477381">ParseGlob</span><span class="op" id="4477390">(</span><span class="ident" id="4477391">pattern</span>&nbsp;<span class="builtintype" id="4477399">string</span><span class="op" id="4477405">)</span>&nbsp;<span class="op" id="4477407">(</span><span class="op" id="4477408">*</span><span class="ident" id="4477409"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4477417">,</span>&nbsp;<span class="builtintype" id="4477419">error</span><span class="op" id="4477424">)</span>&nbsp;<span class="op" id="4477426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4477429">return</span>&nbsp;<span class="ident" id="4477436"><a href="/html/template/template.go.html#4477954">parseGlob</a></span><span class="op" id="4477445">(</span><span class="ident" id="4477446">nil</span><span class="op" id="4477449">,</span>&nbsp;<span class="ident" id="4477451"><a href="/html/template/template.go.html#4477391">pattern</a></span><span class="op" id="4477458">)</span><br>
<span class="lineno"></span><span class="op" id="4477460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="comment" id="4477463">//&nbsp;ParseGlob&nbsp;parses&nbsp;the&nbsp;template&nbsp;definitions&nbsp;in&nbsp;the&nbsp;files&nbsp;identified&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4477539">//&nbsp;pattern&nbsp;and&nbsp;associates&nbsp;the&nbsp;resulting&nbsp;templates&nbsp;with&nbsp;t.&nbsp;The&nbsp;pattern&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4477612">//&nbsp;processed&nbsp;by&nbsp;filepath.Glob&nbsp;and&nbsp;must&nbsp;match&nbsp;at&nbsp;least&nbsp;one&nbsp;file.&nbsp;ParseGlob&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4477689">//&nbsp;equivalent&nbsp;to&nbsp;calling&nbsp;t.ParseFiles&nbsp;with&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;matched&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4477765">//&nbsp;pattern.</span><br>
<span class="lineno">375</span><span class="keyword" id="4477777">func</span>&nbsp;<span class="op" id="4477782">(</span><span class="ident" id="4477783">t</span>&nbsp;<span class="op" id="4477785">*</span><span class="ident" id="4477786"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4477794">)</span>&nbsp;<span class="ident" id="4477796">ParseGlob</span><span class="op" id="4477805">(</span><span class="ident" id="4477806">pattern</span>&nbsp;<span class="builtintype" id="4477814">string</span><span class="op" id="4477820">)</span>&nbsp;<span class="op" id="4477822">(</span><span class="op" id="4477823">*</span><span class="ident" id="4477824"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4477832">,</span>&nbsp;<span class="builtintype" id="4477834">error</span><span class="op" id="4477839">)</span>&nbsp;<span class="op" id="4477841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4477844">return</span>&nbsp;<span class="ident" id="4477851"><a href="/html/template/template.go.html#4477954">parseGlob</a></span><span class="op" id="4477860">(</span><span class="ident" id="4477861"><a href="/html/template/template.go.html#4477783">t</a></span><span class="op" id="4477862">,</span>&nbsp;<span class="ident" id="4477864"><a href="/html/template/template.go.html#4477806">pattern</a></span><span class="op" id="4477871">)</span><br>
<span class="lineno"></span><span class="op" id="4477873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4477876">//&nbsp;parseGlob&nbsp;is&nbsp;the&nbsp;implementation&nbsp;of&nbsp;the&nbsp;function&nbsp;and&nbsp;method&nbsp;ParseGlob.</span><br>
<span class="lineno">380</span><span class="keyword" id="4477949">func</span>&nbsp;<span class="ident" id="4477954">parseGlob</span><span class="op" id="4477963">(</span><span class="ident" id="4477964">t</span>&nbsp;<span class="op" id="4477966">*</span><span class="ident" id="4477967"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4477975">,</span>&nbsp;<span class="ident" id="4477977">pattern</span>&nbsp;<span class="builtintype" id="4477985">string</span><span class="op" id="4477991">)</span>&nbsp;<span class="op" id="4477993">(</span><span class="op" id="4477994">*</span><span class="ident" id="4477995"><a href="/html/template/template.go.html#4466081">Template</a></span><span class="op" id="4478003">,</span>&nbsp;<span class="builtintype" id="4478005">error</span><span class="op" id="4478010">)</span>&nbsp;<span class="op" id="4478012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4478015">filenames</span><span class="op" id="4478024">,</span>&nbsp;<span class="ident" id="4478026">err</span>&nbsp;<span class="op" id="4478030">:=</span>&nbsp;<span class="ident" id="4478033"><a href="/html/template/template.go.html#4465902">filepath</a></span><span class="op" id="4478041">.</span><span class="ident" id="4478042">Glob</span><span class="op" id="4478046">(</span><span class="ident" id="4478047"><a href="/html/template/template.go.html#4477977">pattern</a></span><span class="op" id="4478054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4478057">if</span>&nbsp;<span class="ident" id="4478060"><a href="/html/template/template.go.html#4478026">err</a></span>&nbsp;<span class="op" id="4478064">!=</span>&nbsp;<span class="ident" id="4478067">nil</span>&nbsp;<span class="op" id="4478071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4478075">return</span>&nbsp;<span class="ident" id="4478082">nil</span><span class="op" id="4478085">,</span>&nbsp;<span class="ident" id="4478087"><a href="/html/template/template.go.html#4478026">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4478092">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4478095">if</span>&nbsp;<span class="builtinfunc" id="4478098">len</span><span class="op" id="4478101">(</span><span class="ident" id="4478102"><a href="/html/template/template.go.html#4478015">filenames</a></span><span class="op" id="4478111">)</span>&nbsp;<span class="op" id="4478113">==</span>&nbsp;<span class="num" id="4478116">0</span>&nbsp;<span class="op" id="4478118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4478122">return</span>&nbsp;<span class="ident" id="4478129">nil</span><span class="op" id="4478132">,</span>&nbsp;<span class="ident" id="4478134"><a href="/html/template/template.go.html#4465876">fmt</a></span><span class="op" id="4478137">.</span><span class="ident" id="4478138">Errorf</span><span class="op" id="4478144">(</span><span class="string" id="4478145">&#34;html/template:&nbsp;pattern&nbsp;matches&nbsp;no&nbsp;files:&nbsp;%#q&#34;</span><span class="op" id="4478191">,</span>&nbsp;<span class="ident" id="4478193"><a href="/html/template/template.go.html#4477977">pattern</a></span><span class="op" id="4478200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4478203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4478206">return</span>&nbsp;<span class="ident" id="4478213"><a href="/html/template/template.go.html#4476033">parseFiles</a></span><span class="op" id="4478223">(</span><span class="ident" id="4478224"><a href="/html/template/template.go.html#4477964">t</a></span><span class="op" id="4478225">,</span>&nbsp;<span class="ident" id="4478227"><a href="/html/template/template.go.html#4478015">filenames</a></span><span class="op" id="4478236">...</span><span class="op" id="4478239">)</span><br>
<span class="lineno"></span><span class="op" id="4478241">}</span>
</div>
</body>
</html>
