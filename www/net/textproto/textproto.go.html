<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3646264">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3646320">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3646374">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3646425">//&nbsp;Package&nbsp;textproto&nbsp;implements&nbsp;generic&nbsp;support&nbsp;for&nbsp;text-based&nbsp;request/response</span><br>
<span class="lineno"></span><span class="comment" id="3646505">//&nbsp;protocols&nbsp;in&nbsp;the&nbsp;style&nbsp;of&nbsp;HTTP,&nbsp;NNTP,&nbsp;and&nbsp;SMTP.</span><br>
<span class="lineno"></span><span class="comment" id="3646556">//</span><br>
<span class="lineno"></span><span class="comment" id="3646559">//&nbsp;The&nbsp;package&nbsp;provides:</span><br>
<span class="lineno"></span><span class="comment" id="3646584">//</span><br>
<span class="lineno">10</span><span class="comment" id="3646587">//&nbsp;Error,&nbsp;which&nbsp;represents&nbsp;a&nbsp;numeric&nbsp;error&nbsp;response&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="3646644">//&nbsp;a&nbsp;server.</span><br>
<span class="lineno"></span><span class="comment" id="3646657">//</span><br>
<span class="lineno"></span><span class="comment" id="3646660">//&nbsp;Pipeline,&nbsp;to&nbsp;manage&nbsp;pipelined&nbsp;requests&nbsp;and&nbsp;responses</span><br>
<span class="lineno"></span><span class="comment" id="3646716">//&nbsp;in&nbsp;a&nbsp;client.</span><br>
<span class="lineno">15</span><span class="comment" id="3646732">//</span><br>
<span class="lineno"></span><span class="comment" id="3646735">//&nbsp;Reader,&nbsp;to&nbsp;read&nbsp;numeric&nbsp;response&nbsp;code&nbsp;lines,</span><br>
<span class="lineno"></span><span class="comment" id="3646783">//&nbsp;key:&nbsp;value&nbsp;headers,&nbsp;lines&nbsp;wrapped&nbsp;with&nbsp;leading&nbsp;spaces</span><br>
<span class="lineno"></span><span class="comment" id="3646840">//&nbsp;on&nbsp;continuation&nbsp;lines,&nbsp;and&nbsp;whole&nbsp;text&nbsp;blocks&nbsp;ending</span><br>
<span class="lineno"></span><span class="comment" id="3646895">//&nbsp;with&nbsp;a&nbsp;dot&nbsp;on&nbsp;a&nbsp;line&nbsp;by&nbsp;itself.</span><br>
<span class="lineno">20</span><span class="comment" id="3646930">//</span><br>
<span class="lineno"></span><span class="comment" id="3646933">//&nbsp;Writer,&nbsp;to&nbsp;write&nbsp;dot-encoded&nbsp;text&nbsp;blocks.</span><br>
<span class="lineno"></span><span class="comment" id="3646978">//</span><br>
<span class="lineno"></span><span class="comment" id="3646981">//&nbsp;Conn,&nbsp;a&nbsp;convenient&nbsp;packaging&nbsp;of&nbsp;Reader,&nbsp;Writer,&nbsp;and&nbsp;Pipeline&nbsp;for&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="3647053">//&nbsp;with&nbsp;a&nbsp;single&nbsp;network&nbsp;connection.</span><br>
<span class="lineno">25</span><span class="comment" id="3647090">//</span><br>
<span class="lineno"></span><span class="keyword" id="3647093">package</span>&nbsp;<span class="ident" id="3647101">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3647112">import</span>&nbsp;<span class="op" id="3647119">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3647122">&#34;bufio&#34;</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3647131">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3647138">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3647144">&#34;net&#34;</span><br>
<span class="lineno"></span><span class="op" id="3647150">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3647153">//&nbsp;An&nbsp;Error&nbsp;represents&nbsp;a&nbsp;numeric&nbsp;error&nbsp;response&nbsp;from&nbsp;a&nbsp;server.</span><br>
<span class="lineno"></span><span class="keyword" id="3647216">type</span>&nbsp;<span class="ident" id="3647221">Error</span>&nbsp;<span class="keyword" id="3647227">struct</span>&nbsp;<span class="op" id="3647234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3647237">Code</span>&nbsp;<span class="builtintype" id="3647242">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3647247">Msg</span>&nbsp;&nbsp;<span class="builtintype" id="3647252">string</span><br>
<span class="lineno"></span><span class="op" id="3647259">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="3647262">func</span>&nbsp;<span class="op" id="3647267">(</span><span class="ident" id="3647268">e</span>&nbsp;<span class="op" id="3647270">*</span><span class="ident" id="3647271"><a href="/net/textproto/textproto.go.html#3647221">Error</a></span><span class="op" id="3647276">)</span>&nbsp;<span class="ident" id="3647278">Error</span><span class="op" id="3647283">(</span><span class="op" id="3647284">)</span>&nbsp;<span class="builtintype" id="3647286">string</span>&nbsp;<span class="op" id="3647293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3647296">return</span>&nbsp;<span class="ident" id="3647303"><a href="/net/textproto/textproto.go.html#3647131">fmt</a></span><span class="op" id="3647306">.</span><span class="ident" id="3647307">Sprintf</span><span class="op" id="3647314">(</span><span class="string" id="3647315">&#34;%03d&nbsp;%s&#34;</span><span class="op" id="3647324">,</span>&nbsp;<span class="ident" id="3647326"><a href="/net/textproto/textproto.go.html#3647268">e</a></span><span class="op" id="3647327">.</span><span class="ident" id="3647328">Code</span><span class="op" id="3647332">,</span>&nbsp;<span class="ident" id="3647334"><a href="/net/textproto/textproto.go.html#3647268">e</a></span><span class="op" id="3647335">.</span><span class="ident" id="3647336">Msg</span><span class="op" id="3647339">)</span><br>
<span class="lineno"></span><span class="op" id="3647341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3647344">//&nbsp;A&nbsp;ProtocolError&nbsp;describes&nbsp;a&nbsp;protocol&nbsp;violation&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="3647399">//&nbsp;as&nbsp;an&nbsp;invalid&nbsp;response&nbsp;or&nbsp;a&nbsp;hung-up&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3647450">type</span>&nbsp;<span class="ident" id="3647455">ProtocolError</span>&nbsp;<span class="builtintype" id="3647469">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3647477">func</span>&nbsp;<span class="op" id="3647482">(</span><span class="ident" id="3647483">p</span>&nbsp;<span class="ident" id="3647485"><a href="/net/textproto/textproto.go.html#3647455">ProtocolError</a></span><span class="op" id="3647498">)</span>&nbsp;<span class="ident" id="3647500">Error</span><span class="op" id="3647505">(</span><span class="op" id="3647506">)</span>&nbsp;<span class="builtintype" id="3647508">string</span>&nbsp;<span class="op" id="3647515">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3647518">return</span>&nbsp;<span class="builtintype" id="3647525">string</span><span class="op" id="3647531">(</span><span class="ident" id="3647532"><a href="/net/textproto/textproto.go.html#3647483">p</a></span><span class="op" id="3647533">)</span><br>
<span class="lineno"></span><span class="op" id="3647535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3647538">//&nbsp;A&nbsp;Conn&nbsp;represents&nbsp;a&nbsp;textual&nbsp;network&nbsp;protocol&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="3647598">//&nbsp;It&nbsp;consists&nbsp;of&nbsp;a&nbsp;Reader&nbsp;and&nbsp;Writer&nbsp;to&nbsp;manage&nbsp;I/O</span><br>
<span class="lineno">55</span><span class="comment" id="3647650">//&nbsp;and&nbsp;a&nbsp;Pipeline&nbsp;to&nbsp;sequence&nbsp;concurrent&nbsp;requests&nbsp;on&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="comment" id="3647719">//&nbsp;These&nbsp;embedded&nbsp;types&nbsp;carry&nbsp;methods&nbsp;with&nbsp;them;</span><br>
<span class="lineno"></span><span class="comment" id="3647768">//&nbsp;see&nbsp;the&nbsp;documentation&nbsp;of&nbsp;those&nbsp;types&nbsp;for&nbsp;details.</span><br>
<span class="lineno"></span><span class="keyword" id="3647821">type</span>&nbsp;<span class="ident" id="3647826">Conn</span>&nbsp;<span class="keyword" id="3647831">struct</span>&nbsp;<span class="op" id="3647838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3647841"><a href="/net/textproto/reader.go.html#3630518">Reader</a></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3647849"><a href="/net/textproto/writer.go.html#3650372">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3647857"><a href="/net/textproto/pipeline.go.html#3627779">Pipeline</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3647867">conn</span>&nbsp;<span class="ident" id="3647872"><a href="/net/textproto/textproto.go.html#3647138">io</a></span><span class="op" id="3647874">.</span><span class="ident" id="3647875">ReadWriteCloser</span><br>
<span class="lineno"></span><span class="op" id="3647891">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="comment" id="3647894">//&nbsp;NewConn&nbsp;returns&nbsp;a&nbsp;new&nbsp;Conn&nbsp;using&nbsp;conn&nbsp;for&nbsp;I/O.</span><br>
<span class="lineno"></span><span class="keyword" id="3647944">func</span>&nbsp;<span class="ident" id="3647949">NewConn</span><span class="op" id="3647956">(</span><span class="ident" id="3647957">conn</span>&nbsp;<span class="ident" id="3647962"><a href="/net/textproto/textproto.go.html#3647138">io</a></span><span class="op" id="3647964">.</span><span class="ident" id="3647965">ReadWriteCloser</span><span class="op" id="3647980">)</span>&nbsp;<span class="op" id="3647982">*</span><span class="ident" id="3647983"><a href="/net/textproto/textproto.go.html#3647826">Conn</a></span>&nbsp;<span class="op" id="3647988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3647991">return</span>&nbsp;<span class="op" id="3647998">&amp;</span><span class="ident" id="3647999"><a href="/net/textproto/textproto.go.html#3647826">Conn</a></span><span class="op" id="3648003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3648007">Reader</span><span class="op" id="3648013">:</span>&nbsp;<span class="ident" id="3648015"><a href="/net/textproto/reader.go.html#3630518">Reader</a></span><span class="op" id="3648021">{</span><span class="ident" id="3648022">R</span><span class="op" id="3648023">:</span>&nbsp;<span class="ident" id="3648025"><a href="/net/textproto/textproto.go.html#3647122">bufio</a></span><span class="op" id="3648030">.</span><span class="ident" id="3648031">NewReader</span><span class="op" id="3648040">(</span><span class="ident" id="3648041"><a href="/net/textproto/textproto.go.html#3647957">conn</a></span><span class="op" id="3648045">)</span><span class="op" id="3648046">}</span><span class="op" id="3648047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3648051">Writer</span><span class="op" id="3648057">:</span>&nbsp;<span class="ident" id="3648059"><a href="/net/textproto/writer.go.html#3650372">Writer</a></span><span class="op" id="3648065">{</span><span class="ident" id="3648066">W</span><span class="op" id="3648067">:</span>&nbsp;<span class="ident" id="3648069"><a href="/net/textproto/textproto.go.html#3647122">bufio</a></span><span class="op" id="3648074">.</span><span class="ident" id="3648075">NewWriter</span><span class="op" id="3648084">(</span><span class="ident" id="3648085"><a href="/net/textproto/textproto.go.html#3647957">conn</a></span><span class="op" id="3648089">)</span><span class="op" id="3648090">}</span><span class="op" id="3648091">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3648095">conn</span><span class="op" id="3648099">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3648103"><a href="/net/textproto/textproto.go.html#3647957">conn</a></span><span class="op" id="3648107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3648110">}</span><br>
<span class="lineno"></span><span class="op" id="3648112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3648115">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;connection.</span><br>
<span class="lineno">75</span><span class="keyword" id="3648147">func</span>&nbsp;<span class="op" id="3648152">(</span><span class="ident" id="3648153">c</span>&nbsp;<span class="op" id="3648155">*</span><span class="ident" id="3648156"><a href="/net/textproto/textproto.go.html#3647826">Conn</a></span><span class="op" id="3648160">)</span>&nbsp;<span class="ident" id="3648162">Close</span><span class="op" id="3648167">(</span><span class="op" id="3648168">)</span>&nbsp;<span class="builtintype" id="3648170">error</span>&nbsp;<span class="op" id="3648176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3648179">return</span>&nbsp;<span class="ident" id="3648186"><a href="/net/textproto/textproto.go.html#3648153">c</a></span><span class="op" id="3648187">.</span><span class="ident" id="3648188">conn</span><span class="op" id="3648192">.</span><span class="ident" id="3648193">Close</span><span class="op" id="3648198">(</span><span class="op" id="3648199">)</span><br>
<span class="lineno"></span><span class="op" id="3648201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3648204">//&nbsp;Dial&nbsp;connects&nbsp;to&nbsp;the&nbsp;given&nbsp;address&nbsp;on&nbsp;the&nbsp;given&nbsp;network&nbsp;using&nbsp;net.Dial</span><br>
<span class="lineno">80</span><span class="comment" id="3648278">//&nbsp;and&nbsp;then&nbsp;returns&nbsp;a&nbsp;new&nbsp;Conn&nbsp;for&nbsp;the&nbsp;connection.</span><br>
<span class="lineno"></span><span class="keyword" id="3648329">func</span>&nbsp;<span class="ident" id="3648334">Dial</span><span class="op" id="3648338">(</span><span class="ident" id="3648339">network</span><span class="op" id="3648346">,</span>&nbsp;<span class="ident" id="3648348">addr</span>&nbsp;<span class="builtintype" id="3648353">string</span><span class="op" id="3648359">)</span>&nbsp;<span class="op" id="3648361">(</span><span class="op" id="3648362">*</span><span class="ident" id="3648363"><a href="/net/textproto/textproto.go.html#3647826">Conn</a></span><span class="op" id="3648367">,</span>&nbsp;<span class="builtintype" id="3648369">error</span><span class="op" id="3648374">)</span>&nbsp;<span class="op" id="3648376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3648379">c</span><span class="op" id="3648380">,</span>&nbsp;<span class="ident" id="3648382">err</span>&nbsp;<span class="op" id="3648386">:=</span>&nbsp;<span class="ident" id="3648389"><a href="/net/textproto/textproto.go.html#3647144">net</a></span><span class="op" id="3648392">.</span><span class="ident" id="3648393">Dial</span><span class="op" id="3648397">(</span><span class="ident" id="3648398"><a href="/net/textproto/textproto.go.html#3648339">network</a></span><span class="op" id="3648405">,</span>&nbsp;<span class="ident" id="3648407"><a href="/net/textproto/textproto.go.html#3648348">addr</a></span><span class="op" id="3648411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3648414">if</span>&nbsp;<span class="ident" id="3648417"><a href="/net/textproto/textproto.go.html#3648382">err</a></span>&nbsp;<span class="op" id="3648421">!=</span>&nbsp;<span class="ident" id="3648424">nil</span>&nbsp;<span class="op" id="3648428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3648432">return</span>&nbsp;<span class="ident" id="3648439">nil</span><span class="op" id="3648442">,</span>&nbsp;<span class="ident" id="3648444"><a href="/net/textproto/textproto.go.html#3648382">err</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3648449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3648452">return</span>&nbsp;<span class="ident" id="3648459"><a href="/net/textproto/textproto.go.html#3647949">NewConn</a></span><span class="op" id="3648466">(</span><span class="ident" id="3648467"><a href="/net/textproto/textproto.go.html#3648379">c</a></span><span class="op" id="3648468">)</span><span class="op" id="3648469">,</span>&nbsp;<span class="ident" id="3648471">nil</span><br>
<span class="lineno"></span><span class="op" id="3648475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3648478">//&nbsp;Cmd&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method&nbsp;that&nbsp;sends&nbsp;a&nbsp;command&nbsp;after</span><br>
<span class="lineno">90</span><span class="comment" id="3648536">//&nbsp;waiting&nbsp;its&nbsp;turn&nbsp;in&nbsp;the&nbsp;pipeline.&nbsp;&nbsp;The&nbsp;command&nbsp;text&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3648598">//&nbsp;result&nbsp;of&nbsp;formatting&nbsp;format&nbsp;with&nbsp;args&nbsp;and&nbsp;appending&nbsp;\r\n.</span><br>
<span class="lineno"></span><span class="comment" id="3648659">//&nbsp;Cmd&nbsp;returns&nbsp;the&nbsp;id&nbsp;of&nbsp;the&nbsp;command,&nbsp;for&nbsp;use&nbsp;with&nbsp;StartResponse&nbsp;and&nbsp;EndResponse.</span><br>
<span class="lineno"></span><span class="comment" id="3648741">//</span><br>
<span class="lineno"></span><span class="comment" id="3648744">//&nbsp;For&nbsp;example,&nbsp;a&nbsp;client&nbsp;might&nbsp;run&nbsp;a&nbsp;HELP&nbsp;command&nbsp;that&nbsp;returns&nbsp;a&nbsp;dot-body</span><br>
<span class="lineno">95</span><span class="comment" id="3648818">//&nbsp;by&nbsp;using:</span><br>
<span class="lineno"></span><span class="comment" id="3648831">//</span><br>
<span class="lineno"></span><span class="comment" id="3648834">//&nbsp;&nbsp;&nbsp;&nbspid,&nbsp;err&nbsp;:=&nbsp;c.Cmd(&#34;HELP&#34;)</span><br>
<span class="lineno"></span><span class="comment" id="3648862">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="3648881">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspreturn&nbsp;nil,&nbsp;err</span><br>
<span class="lineno">100</span><span class="comment" id="3648901">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="3648906">//</span><br>
<span class="lineno"></span><span class="comment" id="3648909">//&nbsp;&nbsp;&nbsp;&nbspc.StartResponse(id)</span><br>
<span class="lineno"></span><span class="comment" id="3648932">//&nbsp;&nbsp;&nbsp;&nbspdefer&nbsp;c.EndResponse(id)</span><br>
<span class="lineno"></span><span class="comment" id="3648959">//</span><br>
<span class="lineno">105</span><span class="comment" id="3648962">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;_,&nbsp;_,&nbsp;err&nbsp;=&nbsp;c.ReadCodeLine(110);&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="3649014">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspreturn&nbsp;nil,&nbsp;err</span><br>
<span class="lineno"></span><span class="comment" id="3649034">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="3649039">//&nbsp;&nbsp;&nbsp;&nbsptext,&nbsp;err&nbsp;:=&nbsp;c.ReadDotBytes()</span><br>
<span class="lineno"></span><span class="comment" id="3649072">//&nbsp;&nbsp;&nbsp;&nbspif&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</span><br>
<span class="lineno">110</span><span class="comment" id="3649091">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspreturn&nbsp;nil,&nbsp;err</span><br>
<span class="lineno"></span><span class="comment" id="3649111">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="3649116">//&nbsp;&nbsp;&nbsp;&nbspreturn&nbsp;c.ReadCodeLine(250)</span><br>
<span class="lineno"></span><span class="comment" id="3649146">//</span><br>
<span class="lineno"></span><span class="keyword" id="3649149">func</span>&nbsp;<span class="op" id="3649154">(</span><span class="ident" id="3649155">c</span>&nbsp;<span class="op" id="3649157">*</span><span class="ident" id="3649158"><a href="/net/textproto/textproto.go.html#3647826">Conn</a></span><span class="op" id="3649162">)</span>&nbsp;<span class="ident" id="3649164">Cmd</span><span class="op" id="3649167">(</span><span class="ident" id="3649168">format</span>&nbsp;<span class="builtintype" id="3649175">string</span><span class="op" id="3649181">,</span>&nbsp;<span class="ident" id="3649183">args</span>&nbsp;<span class="op" id="3649188">...</span><span class="keyword" id="3649191">interface</span><span class="op" id="3649200">{</span><span class="op" id="3649201">}</span><span class="op" id="3649202">)</span>&nbsp;<span class="op" id="3649204">(</span><span class="ident" id="3649205">id</span>&nbsp;<span class="builtintype" id="3649208">uint</span><span class="op" id="3649212">,</span>&nbsp;<span class="ident" id="3649214">err</span>&nbsp;<span class="builtintype" id="3649218">error</span><span class="op" id="3649223">)</span>&nbsp;<span class="op" id="3649225">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649228"><a href="/net/textproto/textproto.go.html#3649205">id</a></span>&nbsp;<span class="op" id="3649231">=</span>&nbsp;<span class="ident" id="3649233"><a href="/net/textproto/textproto.go.html#3649155">c</a></span><span class="op" id="3649234">.</span><span class="ident" id="3649235">Next</span><span class="op" id="3649239">(</span><span class="op" id="3649240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649243"><a href="/net/textproto/textproto.go.html#3649155">c</a></span><span class="op" id="3649244">.</span><span class="ident" id="3649245">StartRequest</span><span class="op" id="3649257">(</span><span class="ident" id="3649258"><a href="/net/textproto/textproto.go.html#3649205">id</a></span><span class="op" id="3649260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649263"><a href="/net/textproto/textproto.go.html#3649214">err</a></span>&nbsp;<span class="op" id="3649267">=</span>&nbsp;<span class="ident" id="3649269"><a href="/net/textproto/textproto.go.html#3649155">c</a></span><span class="op" id="3649270">.</span><span class="ident" id="3649271">PrintfLine</span><span class="op" id="3649281">(</span><span class="ident" id="3649282"><a href="/net/textproto/textproto.go.html#3649168">format</a></span><span class="op" id="3649288">,</span>&nbsp;<span class="ident" id="3649290"><a href="/net/textproto/textproto.go.html#3649183">args</a></span><span class="op" id="3649294">...</span><span class="op" id="3649297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649300"><a href="/net/textproto/textproto.go.html#3649155">c</a></span><span class="op" id="3649301">.</span><span class="ident" id="3649302">EndRequest</span><span class="op" id="3649312">(</span><span class="ident" id="3649313"><a href="/net/textproto/textproto.go.html#3649205">id</a></span><span class="op" id="3649315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649318">if</span>&nbsp;<span class="ident" id="3649321"><a href="/net/textproto/textproto.go.html#3649214">err</a></span>&nbsp;<span class="op" id="3649325">!=</span>&nbsp;<span class="ident" id="3649328">nil</span>&nbsp;<span class="op" id="3649332">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649336">return</span>&nbsp;<span class="num" id="3649343">0</span><span class="op" id="3649344">,</span>&nbsp;<span class="ident" id="3649346"><a href="/net/textproto/textproto.go.html#3649214">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3649351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649354">return</span>&nbsp;<span class="ident" id="3649361"><a href="/net/textproto/textproto.go.html#3649205">id</a></span><span class="op" id="3649363">,</span>&nbsp;<span class="ident" id="3649365">nil</span><br>
<span class="lineno"></span><span class="op" id="3649369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="3649372">//&nbsp;TrimString&nbsp;returns&nbsp;s&nbsp;without&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;ASCII&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="3649438">func</span>&nbsp;<span class="ident" id="3649443">TrimString</span><span class="op" id="3649453">(</span><span class="ident" id="3649454">s</span>&nbsp;<span class="builtintype" id="3649456">string</span><span class="op" id="3649462">)</span>&nbsp;<span class="builtintype" id="3649464">string</span>&nbsp;<span class="op" id="3649471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649474">for</span>&nbsp;<span class="builtinfunc" id="3649478">len</span><span class="op" id="3649481">(</span><span class="ident" id="3649482"><a href="/net/textproto/textproto.go.html#3649454">s</a></span><span class="op" id="3649483">)</span>&nbsp;<span class="op" id="3649485">&gt;</span>&nbsp;<span class="num" id="3649487">0</span>&nbsp;<span class="op" id="3649489">&amp;&amp;</span>&nbsp;<span class="ident" id="3649492"><a href="/net/textproto/textproto.go.html#3649851">isASCIISpace</a></span><span class="op" id="3649504">(</span><span class="ident" id="3649505"><a href="/net/textproto/textproto.go.html#3649454">s</a></span><span class="op" id="3649506">[</span><span class="num" id="3649507">0</span><span class="op" id="3649508">]</span><span class="op" id="3649509">)</span>&nbsp;<span class="op" id="3649511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649515"><a href="/net/textproto/textproto.go.html#3649454">s</a></span>&nbsp;<span class="op" id="3649517">=</span>&nbsp;<span class="ident" id="3649519"><a href="/net/textproto/textproto.go.html#3649454">s</a></span><span class="op" id="3649520">[</span><span class="num" id="3649521">1</span><span class="op" id="3649522">:</span><span class="op" id="3649523">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3649526">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649529">for</span>&nbsp;<span class="builtinfunc" id="3649533">len</span><span class="op" id="3649536">(</span><span class="ident" id="3649537"><a href="/net/textproto/textproto.go.html#3649454">s</a></span><span class="op" id="3649538">)</span>&nbsp;<span class="op" id="3649540">&gt;</span>&nbsp;<span class="num" id="3649542">0</span>&nbsp;<span class="op" id="3649544">&amp;&amp;</span>&nbsp;<span class="ident" id="3649547"><a href="/net/textproto/textproto.go.html#3649851">isASCIISpace</a></span><span class="op" id="3649559">(</span><span class="ident" id="3649560"><a href="/net/textproto/textproto.go.html#3649454">s</a></span><span class="op" id="3649561">[</span><span class="builtinfunc" id="3649562">len</span><span class="op" id="3649565">(</span><span class="ident" id="3649566"><a href="/net/textproto/textproto.go.html#3649454">s</a></span><span class="op" id="3649567">)</span><span class="op" id="3649568">-</span><span class="num" id="3649569">1</span><span class="op" id="3649570">]</span><span class="op" id="3649571">)</span>&nbsp;<span class="op" id="3649573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649577"><a href="/net/textproto/textproto.go.html#3649454">s</a></span>&nbsp;<span class="op" id="3649579">=</span>&nbsp;<span class="ident" id="3649581"><a href="/net/textproto/textproto.go.html#3649454">s</a></span><span class="op" id="3649582">[</span><span class="op" id="3649583">:</span><span class="builtinfunc" id="3649584">len</span><span class="op" id="3649587">(</span><span class="ident" id="3649588"><a href="/net/textproto/textproto.go.html#3649454">s</a></span><span class="op" id="3649589">)</span><span class="op" id="3649590">-</span><span class="num" id="3649591">1</span><span class="op" id="3649592">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3649595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649598">return</span>&nbsp;<span class="ident" id="3649605"><a href="/net/textproto/textproto.go.html#3649454">s</a></span><br>
<span class="lineno"></span><span class="op" id="3649607">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="3649610">//&nbsp;TrimBytes&nbsp;returns&nbsp;b&nbsp;without&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;ASCII&nbsp;space.</span><br>
<span class="lineno"></span><span class="keyword" id="3649675">func</span>&nbsp;<span class="ident" id="3649680">TrimBytes</span><span class="op" id="3649689">(</span><span class="ident" id="3649690">b</span>&nbsp;<span class="op" id="3649692">[</span><span class="op" id="3649693">]</span><span class="builtintype" id="3649694">byte</span><span class="op" id="3649698">)</span>&nbsp;<span class="op" id="3649700">[</span><span class="op" id="3649701">]</span><span class="builtintype" id="3649702">byte</span>&nbsp;<span class="op" id="3649707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649710">for</span>&nbsp;<span class="builtinfunc" id="3649714">len</span><span class="op" id="3649717">(</span><span class="ident" id="3649718"><a href="/net/textproto/textproto.go.html#3649690">b</a></span><span class="op" id="3649719">)</span>&nbsp;<span class="op" id="3649721">&gt;</span>&nbsp;<span class="num" id="3649723">0</span>&nbsp;<span class="op" id="3649725">&amp;&amp;</span>&nbsp;<span class="ident" id="3649728"><a href="/net/textproto/textproto.go.html#3649851">isASCIISpace</a></span><span class="op" id="3649740">(</span><span class="ident" id="3649741"><a href="/net/textproto/textproto.go.html#3649690">b</a></span><span class="op" id="3649742">[</span><span class="num" id="3649743">0</span><span class="op" id="3649744">]</span><span class="op" id="3649745">)</span>&nbsp;<span class="op" id="3649747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649751"><a href="/net/textproto/textproto.go.html#3649690">b</a></span>&nbsp;<span class="op" id="3649753">=</span>&nbsp;<span class="ident" id="3649755"><a href="/net/textproto/textproto.go.html#3649690">b</a></span><span class="op" id="3649756">[</span><span class="num" id="3649757">1</span><span class="op" id="3649758">:</span><span class="op" id="3649759">]</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3649762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649765">for</span>&nbsp;<span class="builtinfunc" id="3649769">len</span><span class="op" id="3649772">(</span><span class="ident" id="3649773"><a href="/net/textproto/textproto.go.html#3649690">b</a></span><span class="op" id="3649774">)</span>&nbsp;<span class="op" id="3649776">&gt;</span>&nbsp;<span class="num" id="3649778">0</span>&nbsp;<span class="op" id="3649780">&amp;&amp;</span>&nbsp;<span class="ident" id="3649783"><a href="/net/textproto/textproto.go.html#3649851">isASCIISpace</a></span><span class="op" id="3649795">(</span><span class="ident" id="3649796"><a href="/net/textproto/textproto.go.html#3649690">b</a></span><span class="op" id="3649797">[</span><span class="builtinfunc" id="3649798">len</span><span class="op" id="3649801">(</span><span class="ident" id="3649802"><a href="/net/textproto/textproto.go.html#3649690">b</a></span><span class="op" id="3649803">)</span><span class="op" id="3649804">-</span><span class="num" id="3649805">1</span><span class="op" id="3649806">]</span><span class="op" id="3649807">)</span>&nbsp;<span class="op" id="3649809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649813"><a href="/net/textproto/textproto.go.html#3649690">b</a></span>&nbsp;<span class="op" id="3649815">=</span>&nbsp;<span class="ident" id="3649817"><a href="/net/textproto/textproto.go.html#3649690">b</a></span><span class="op" id="3649818">[</span><span class="op" id="3649819">:</span><span class="builtinfunc" id="3649820">len</span><span class="op" id="3649823">(</span><span class="ident" id="3649824"><a href="/net/textproto/textproto.go.html#3649690">b</a></span><span class="op" id="3649825">)</span><span class="op" id="3649826">-</span><span class="num" id="3649827">1</span><span class="op" id="3649828">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3649831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649834">return</span>&nbsp;<span class="ident" id="3649841"><a href="/net/textproto/textproto.go.html#3649690">b</a></span><br>
<span class="lineno">145</span><span class="op" id="3649843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3649846">func</span>&nbsp;<span class="ident" id="3649851">isASCIISpace</span><span class="op" id="3649863">(</span><span class="ident" id="3649864">b</span>&nbsp;<span class="builtintype" id="3649866">byte</span><span class="op" id="3649870">)</span>&nbsp;<span class="builtintype" id="3649872">bool</span>&nbsp;<span class="op" id="3649877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3649880">return</span>&nbsp;<span class="ident" id="3649887"><a href="/net/textproto/textproto.go.html#3649864">b</a></span>&nbsp;<span class="op" id="3649889">==</span>&nbsp;<span class="string" id="3649892">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3649896">||</span>&nbsp;<span class="ident" id="3649899"><a href="/net/textproto/textproto.go.html#3649864">b</a></span>&nbsp;<span class="op" id="3649901">==</span>&nbsp;<span class="string" id="3649904">&#39;\t&#39;</span>&nbsp;<span class="op" id="3649909">||</span>&nbsp;<span class="ident" id="3649912"><a href="/net/textproto/textproto.go.html#3649864">b</a></span>&nbsp;<span class="op" id="3649914">==</span>&nbsp;<span class="string" id="3649917">&#39;\n&#39;</span>&nbsp;<span class="op" id="3649922">||</span>&nbsp;<span class="ident" id="3649925"><a href="/net/textproto/textproto.go.html#3649864">b</a></span>&nbsp;<span class="op" id="3649927">==</span>&nbsp;<span class="string" id="3649930">&#39;\r&#39;</span><br>
<span class="lineno"></span><span class="op" id="3649935">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="3649938">func</span>&nbsp;<span class="ident" id="3649943">isASCIILetter</span><span class="op" id="3649956">(</span><span class="ident" id="3649957">b</span>&nbsp;<span class="builtintype" id="3649959">byte</span><span class="op" id="3649963">)</span>&nbsp;<span class="builtintype" id="3649965">bool</span>&nbsp;<span class="op" id="3649970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3649973"><a href="/net/textproto/textproto.go.html#3649957">b</a></span>&nbsp;<span class="op" id="3649975">|=</span>&nbsp;<span class="num" id="3649978">0x20</span>&nbsp;<span class="comment" id="3649983">//&nbsp;make&nbsp;lower&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3650003">return</span>&nbsp;<span class="string" id="3650010">&#39;a&#39;</span>&nbsp;<span class="op" id="3650014">&lt;=</span>&nbsp;<span class="ident" id="3650017"><a href="/net/textproto/textproto.go.html#3649957">b</a></span>&nbsp;<span class="op" id="3650019">&amp;&amp;</span>&nbsp;<span class="ident" id="3650022"><a href="/net/textproto/textproto.go.html#3649957">b</a></span>&nbsp;<span class="op" id="3650024">&lt;=</span>&nbsp;<span class="string" id="3650027">&#39;z&#39;</span><br>
<span class="lineno"></span><span class="op" id="3650031">}</span>
</div>
</body>
</html>
