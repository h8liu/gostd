<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html" class="current">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8476060">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8476115">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8476169">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8476220">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8476287">package</span>&nbsp;<span class="ident" id="8476295">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8476300">import</span>&nbsp;<span class="op" id="8476307">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8476310">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8476319">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8476329">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8476336">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8476342">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8476349">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8476360">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8476371">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8476378">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8476381">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8476441">type</span>&nbsp;<span class="ident" id="8476446">ByteStruct</span>&nbsp;<span class="keyword" id="8476457">struct</span>&nbsp;<span class="op" id="8476464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476467">a</span>&nbsp;<span class="builtintype" id="8476469">byte</span>&nbsp;<span class="comment" id="8476474">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8476499">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8476502">type</span>&nbsp;<span class="ident" id="8476507">StringStruct</span>&nbsp;<span class="keyword" id="8476520">struct</span>&nbsp;<span class="op" id="8476527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476530">s</span>&nbsp;<span class="builtintype" id="8476532">string</span>&nbsp;<span class="comment" id="8476539">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8476564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8476567">type</span>&nbsp;<span class="ident" id="8476572">ArrayStruct</span>&nbsp;<span class="keyword" id="8476584">struct</span>&nbsp;<span class="op" id="8476591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476594">a</span>&nbsp;<span class="op" id="8476596">[</span><span class="num" id="8476597">8192</span><span class="op" id="8476601">]</span><span class="builtintype" id="8476602">byte</span>&nbsp;<span class="comment" id="8476607">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8476632">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8476635">type</span>&nbsp;<span class="ident" id="8476640">Gobber</span>&nbsp;<span class="builtintype" id="8476647">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="8476652">type</span>&nbsp;<span class="ident" id="8476657">ValueGobber</span>&nbsp;<span class="builtintype" id="8476669">string</span>&nbsp;<span class="comment" id="8476676">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8476726">type</span>&nbsp;<span class="ident" id="8476731">BinaryGobber</span>&nbsp;<span class="builtintype" id="8476744">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="8476749">type</span>&nbsp;<span class="ident" id="8476754">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="8476772">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8476780">type</span>&nbsp;<span class="ident" id="8476785">TextGobber</span>&nbsp;<span class="builtintype" id="8476796">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8476801">type</span>&nbsp;<span class="ident" id="8476806">TextValueGobber</span>&nbsp;<span class="builtintype" id="8476822">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="8476830">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8476855">func</span>&nbsp;<span class="op" id="8476860">(</span><span class="ident" id="8476861">g</span>&nbsp;<span class="op" id="8476863">*</span><span class="ident" id="8476864">ByteStruct</span><span class="op" id="8476874">)</span>&nbsp;<span class="ident" id="8476876">GobEncode</span><span class="op" id="8476885">(</span><span class="op" id="8476886">)</span>&nbsp;<span class="op" id="8476888">(</span><span class="op" id="8476889">[</span><span class="op" id="8476890">]</span><span class="builtintype" id="8476891">byte</span><span class="op" id="8476895">,</span>&nbsp;<span class="builtintype" id="8476897">error</span><span class="op" id="8476902">)</span>&nbsp;<span class="op" id="8476904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476907">b</span>&nbsp;<span class="op" id="8476909">:=</span>&nbsp;<span class="builtinfunc" id="8476912">make</span><span class="op" id="8476916">(</span><span class="op" id="8476917">[</span><span class="op" id="8476918">]</span><span class="builtintype" id="8476919">byte</span><span class="op" id="8476923">,</span>&nbsp;<span class="num" id="8476925">3</span><span class="op" id="8476926">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476929">b</span><span class="op" id="8476930">[</span><span class="num" id="8476931">0</span><span class="op" id="8476932">]</span>&nbsp;<span class="op" id="8476934">=</span>&nbsp;<span class="ident" id="8476936">g</span><span class="op" id="8476937">.</span><span class="ident" id="8476938">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476941">b</span><span class="op" id="8476942">[</span><span class="num" id="8476943">1</span><span class="op" id="8476944">]</span>&nbsp;<span class="op" id="8476946">=</span>&nbsp;<span class="ident" id="8476948">g</span><span class="op" id="8476949">.</span><span class="ident" id="8476950">a</span>&nbsp;<span class="op" id="8476952">+</span>&nbsp;<span class="num" id="8476954">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8476957">b</span><span class="op" id="8476958">[</span><span class="num" id="8476959">2</span><span class="op" id="8476960">]</span>&nbsp;<span class="op" id="8476962">=</span>&nbsp;<span class="ident" id="8476964">g</span><span class="op" id="8476965">.</span><span class="ident" id="8476966">a</span>&nbsp;<span class="op" id="8476968">+</span>&nbsp;<span class="num" id="8476970">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8476973">return</span>&nbsp;<span class="ident" id="8476980">b</span><span class="op" id="8476981">,</span>&nbsp;<span class="ident" id="8476983">nil</span><br>
<span class="lineno"></span><span class="op" id="8476987">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8476990">func</span>&nbsp;<span class="op" id="8476995">(</span><span class="ident" id="8476996">g</span>&nbsp;<span class="op" id="8476998">*</span><span class="ident" id="8476999">ByteStruct</span><span class="op" id="8477009">)</span>&nbsp;<span class="ident" id="8477011">GobDecode</span><span class="op" id="8477020">(</span><span class="ident" id="8477021">data</span>&nbsp;<span class="op" id="8477026">[</span><span class="op" id="8477027">]</span><span class="builtintype" id="8477028">byte</span><span class="op" id="8477032">)</span>&nbsp;<span class="builtintype" id="8477034">error</span>&nbsp;<span class="op" id="8477040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477043">if</span>&nbsp;<span class="ident" id="8477046">g</span>&nbsp;<span class="op" id="8477048">==</span>&nbsp;<span class="ident" id="8477051">nil</span>&nbsp;<span class="op" id="8477055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477059">return</span>&nbsp;<span class="ident" id="8477066">errors</span><span class="op" id="8477072">.</span><span class="ident" id="8477073">New</span><span class="op" id="8477076">(</span><span class="string" id="8477077">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="8477091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477094">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8477097">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477135">if</span>&nbsp;<span class="builtinfunc" id="8477138">len</span><span class="op" id="8477141">(</span><span class="ident" id="8477142">data</span><span class="op" id="8477146">)</span>&nbsp;<span class="op" id="8477148">==</span>&nbsp;<span class="num" id="8477151">0</span>&nbsp;<span class="op" id="8477153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477157">return</span>&nbsp;<span class="ident" id="8477164">io</span><span class="op" id="8477166">.</span><span class="ident" id="8477167">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8477175">g</span><span class="op" id="8477176">.</span><span class="ident" id="8477177">a</span>&nbsp;<span class="op" id="8477179">=</span>&nbsp;<span class="ident" id="8477181">data</span><span class="op" id="8477185">[</span><span class="num" id="8477186">0</span><span class="op" id="8477187">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477190">for</span>&nbsp;<span class="ident" id="8477194">i</span><span class="op" id="8477195">,</span>&nbsp;<span class="ident" id="8477197">c</span>&nbsp;<span class="op" id="8477199">:=</span>&nbsp;<span class="keyword" id="8477202">range</span>&nbsp;<span class="ident" id="8477208">data</span>&nbsp;<span class="op" id="8477213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477217">if</span>&nbsp;<span class="ident" id="8477220">c</span>&nbsp;<span class="op" id="8477222">!=</span>&nbsp;<span class="ident" id="8477225">g</span><span class="op" id="8477226">.</span><span class="ident" id="8477227">a</span><span class="op" id="8477228">+</span><span class="builtintype" id="8477229">byte</span><span class="op" id="8477233">(</span><span class="ident" id="8477234">i</span><span class="op" id="8477235">)</span>&nbsp;<span class="op" id="8477237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477242">return</span>&nbsp;<span class="ident" id="8477249">errors</span><span class="op" id="8477255">.</span><span class="ident" id="8477256">New</span><span class="op" id="8477259">(</span><span class="string" id="8477260">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8477283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477290">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477293">return</span>&nbsp;<span class="ident" id="8477300">nil</span><br>
<span class="lineno"></span><span class="op" id="8477304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8477307">func</span>&nbsp;<span class="op" id="8477312">(</span><span class="ident" id="8477313">g</span>&nbsp;<span class="op" id="8477315">*</span><span class="ident" id="8477316">StringStruct</span><span class="op" id="8477328">)</span>&nbsp;<span class="ident" id="8477330">GobEncode</span><span class="op" id="8477339">(</span><span class="op" id="8477340">)</span>&nbsp;<span class="op" id="8477342">(</span><span class="op" id="8477343">[</span><span class="op" id="8477344">]</span><span class="builtintype" id="8477345">byte</span><span class="op" id="8477349">,</span>&nbsp;<span class="builtintype" id="8477351">error</span><span class="op" id="8477356">)</span>&nbsp;<span class="op" id="8477358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477361">return</span>&nbsp;<span class="op" id="8477368">[</span><span class="op" id="8477369">]</span><span class="builtintype" id="8477370">byte</span><span class="op" id="8477374">(</span><span class="ident" id="8477375">g</span><span class="op" id="8477376">.</span><span class="ident" id="8477377">s</span><span class="op" id="8477378">)</span><span class="op" id="8477379">,</span>&nbsp;<span class="ident" id="8477381">nil</span><br>
<span class="lineno">75</span><span class="op" id="8477385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8477388">func</span>&nbsp;<span class="op" id="8477393">(</span><span class="ident" id="8477394">g</span>&nbsp;<span class="op" id="8477396">*</span><span class="ident" id="8477397">StringStruct</span><span class="op" id="8477409">)</span>&nbsp;<span class="ident" id="8477411">GobDecode</span><span class="op" id="8477420">(</span><span class="ident" id="8477421">data</span>&nbsp;<span class="op" id="8477426">[</span><span class="op" id="8477427">]</span><span class="builtintype" id="8477428">byte</span><span class="op" id="8477432">)</span>&nbsp;<span class="builtintype" id="8477434">error</span>&nbsp;<span class="op" id="8477440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8477443">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477481">if</span>&nbsp;<span class="builtinfunc" id="8477484">len</span><span class="op" id="8477487">(</span><span class="ident" id="8477488">data</span><span class="op" id="8477492">)</span>&nbsp;<span class="op" id="8477494">==</span>&nbsp;<span class="num" id="8477497">0</span>&nbsp;<span class="op" id="8477499">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477503">return</span>&nbsp;<span class="ident" id="8477510">io</span><span class="op" id="8477512">.</span><span class="ident" id="8477513">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8477521">a</span>&nbsp;<span class="op" id="8477523">:=</span>&nbsp;<span class="ident" id="8477526">data</span><span class="op" id="8477530">[</span><span class="num" id="8477531">0</span><span class="op" id="8477532">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477535">for</span>&nbsp;<span class="ident" id="8477539">i</span><span class="op" id="8477540">,</span>&nbsp;<span class="ident" id="8477542">c</span>&nbsp;<span class="op" id="8477544">:=</span>&nbsp;<span class="keyword" id="8477547">range</span>&nbsp;<span class="ident" id="8477553">data</span>&nbsp;<span class="op" id="8477558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477562">if</span>&nbsp;<span class="ident" id="8477565">c</span>&nbsp;<span class="op" id="8477567">!=</span>&nbsp;<span class="ident" id="8477570">a</span><span class="op" id="8477571">+</span><span class="builtintype" id="8477572">byte</span><span class="op" id="8477576">(</span><span class="ident" id="8477577">i</span><span class="op" id="8477578">)</span>&nbsp;<span class="op" id="8477580">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477585">return</span>&nbsp;<span class="ident" id="8477592">errors</span><span class="op" id="8477598">.</span><span class="ident" id="8477599">New</span><span class="op" id="8477602">(</span><span class="string" id="8477603">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8477626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8477636">g</span><span class="op" id="8477637">.</span><span class="ident" id="8477638">s</span>&nbsp;<span class="op" id="8477640">=</span>&nbsp;<span class="builtintype" id="8477642">string</span><span class="op" id="8477648">(</span><span class="ident" id="8477649">data</span><span class="op" id="8477653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477656">return</span>&nbsp;<span class="ident" id="8477663">nil</span><br>
<span class="lineno">90</span><span class="op" id="8477667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8477670">func</span>&nbsp;<span class="op" id="8477675">(</span><span class="ident" id="8477676">a</span>&nbsp;<span class="op" id="8477678">*</span><span class="ident" id="8477679">ArrayStruct</span><span class="op" id="8477690">)</span>&nbsp;<span class="ident" id="8477692">GobEncode</span><span class="op" id="8477701">(</span><span class="op" id="8477702">)</span>&nbsp;<span class="op" id="8477704">(</span><span class="op" id="8477705">[</span><span class="op" id="8477706">]</span><span class="builtintype" id="8477707">byte</span><span class="op" id="8477711">,</span>&nbsp;<span class="builtintype" id="8477713">error</span><span class="op" id="8477718">)</span>&nbsp;<span class="op" id="8477720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477723">return</span>&nbsp;<span class="ident" id="8477730">a</span><span class="op" id="8477731">.</span><span class="ident" id="8477732">a</span><span class="op" id="8477733">[</span><span class="op" id="8477734">:</span><span class="op" id="8477735">]</span><span class="op" id="8477736">,</span>&nbsp;<span class="ident" id="8477738">nil</span><br>
<span class="lineno"></span><span class="op" id="8477742">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="8477745">func</span>&nbsp;<span class="op" id="8477750">(</span><span class="ident" id="8477751">a</span>&nbsp;<span class="op" id="8477753">*</span><span class="ident" id="8477754">ArrayStruct</span><span class="op" id="8477765">)</span>&nbsp;<span class="ident" id="8477767">GobDecode</span><span class="op" id="8477776">(</span><span class="ident" id="8477777">data</span>&nbsp;<span class="op" id="8477782">[</span><span class="op" id="8477783">]</span><span class="builtintype" id="8477784">byte</span><span class="op" id="8477788">)</span>&nbsp;<span class="builtintype" id="8477790">error</span>&nbsp;<span class="op" id="8477796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477799">if</span>&nbsp;<span class="builtinfunc" id="8477802">len</span><span class="op" id="8477805">(</span><span class="ident" id="8477806">data</span><span class="op" id="8477810">)</span>&nbsp;<span class="op" id="8477812">!=</span>&nbsp;<span class="builtinfunc" id="8477815">len</span><span class="op" id="8477818">(</span><span class="ident" id="8477819">a</span><span class="op" id="8477820">.</span><span class="ident" id="8477821">a</span><span class="op" id="8477822">)</span>&nbsp;<span class="op" id="8477824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477828">return</span>&nbsp;<span class="ident" id="8477835">errors</span><span class="op" id="8477841">.</span><span class="ident" id="8477842">New</span><span class="op" id="8477845">(</span><span class="string" id="8477846">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="8477876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8477879">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8477882">copy</span><span class="op" id="8477886">(</span><span class="ident" id="8477887">a</span><span class="op" id="8477888">.</span><span class="ident" id="8477889">a</span><span class="op" id="8477890">[</span><span class="op" id="8477891">:</span><span class="op" id="8477892">]</span><span class="op" id="8477893">,</span>&nbsp;<span class="ident" id="8477895">data</span><span class="op" id="8477899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477902">return</span>&nbsp;<span class="ident" id="8477909">nil</span><br>
<span class="lineno"></span><span class="op" id="8477913">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8477916">func</span>&nbsp;<span class="op" id="8477921">(</span><span class="ident" id="8477922">g</span>&nbsp;<span class="op" id="8477924">*</span><span class="ident" id="8477925">Gobber</span><span class="op" id="8477931">)</span>&nbsp;<span class="ident" id="8477933">GobEncode</span><span class="op" id="8477942">(</span><span class="op" id="8477943">)</span>&nbsp;<span class="op" id="8477945">(</span><span class="op" id="8477946">[</span><span class="op" id="8477947">]</span><span class="builtintype" id="8477948">byte</span><span class="op" id="8477952">,</span>&nbsp;<span class="builtintype" id="8477954">error</span><span class="op" id="8477959">)</span>&nbsp;<span class="op" id="8477961">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8477964">return</span>&nbsp;<span class="op" id="8477971">[</span><span class="op" id="8477972">]</span><span class="builtintype" id="8477973">byte</span><span class="op" id="8477977">(</span><span class="ident" id="8477978">fmt</span><span class="op" id="8477981">.</span><span class="ident" id="8477982">Sprintf</span><span class="op" id="8477989">(</span><span class="string" id="8477990">&#34;VALUE=%d&#34;</span><span class="op" id="8478000">,</span>&nbsp;<span class="op" id="8478002">*</span><span class="ident" id="8478003">g</span><span class="op" id="8478004">)</span><span class="op" id="8478005">)</span><span class="op" id="8478006">,</span>&nbsp;<span class="ident" id="8478008">nil</span><br>
<span class="lineno"></span><span class="op" id="8478012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8478015">func</span>&nbsp;<span class="op" id="8478020">(</span><span class="ident" id="8478021">g</span>&nbsp;<span class="op" id="8478023">*</span><span class="ident" id="8478024">Gobber</span><span class="op" id="8478030">)</span>&nbsp;<span class="ident" id="8478032">GobDecode</span><span class="op" id="8478041">(</span><span class="ident" id="8478042">data</span>&nbsp;<span class="op" id="8478047">[</span><span class="op" id="8478048">]</span><span class="builtintype" id="8478049">byte</span><span class="op" id="8478053">)</span>&nbsp;<span class="builtintype" id="8478055">error</span>&nbsp;<span class="op" id="8478061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478064">_</span><span class="op" id="8478065">,</span>&nbsp;<span class="ident" id="8478067">err</span>&nbsp;<span class="op" id="8478071">:=</span>&nbsp;<span class="ident" id="8478074">fmt</span><span class="op" id="8478077">.</span><span class="ident" id="8478078">Sscanf</span><span class="op" id="8478084">(</span><span class="builtintype" id="8478085">string</span><span class="op" id="8478091">(</span><span class="ident" id="8478092">data</span><span class="op" id="8478096">)</span><span class="op" id="8478097">,</span>&nbsp;<span class="string" id="8478099">&#34;VALUE=%d&#34;</span><span class="op" id="8478109">,</span>&nbsp;<span class="op" id="8478111">(</span><span class="op" id="8478112">*</span><span class="builtintype" id="8478113">int</span><span class="op" id="8478116">)</span><span class="op" id="8478117">(</span><span class="ident" id="8478118">g</span><span class="op" id="8478119">)</span><span class="op" id="8478120">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8478123">return</span>&nbsp;<span class="ident" id="8478130">err</span><br>
<span class="lineno"></span><span class="op" id="8478134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8478137">func</span>&nbsp;<span class="op" id="8478142">(</span><span class="ident" id="8478143">g</span>&nbsp;<span class="op" id="8478145">*</span><span class="ident" id="8478146">BinaryGobber</span><span class="op" id="8478158">)</span>&nbsp;<span class="ident" id="8478160">MarshalBinary</span><span class="op" id="8478173">(</span><span class="op" id="8478174">)</span>&nbsp;<span class="op" id="8478176">(</span><span class="op" id="8478177">[</span><span class="op" id="8478178">]</span><span class="builtintype" id="8478179">byte</span><span class="op" id="8478183">,</span>&nbsp;<span class="builtintype" id="8478185">error</span><span class="op" id="8478190">)</span>&nbsp;<span class="op" id="8478192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8478195">return</span>&nbsp;<span class="op" id="8478202">[</span><span class="op" id="8478203">]</span><span class="builtintype" id="8478204">byte</span><span class="op" id="8478208">(</span><span class="ident" id="8478209">fmt</span><span class="op" id="8478212">.</span><span class="ident" id="8478213">Sprintf</span><span class="op" id="8478220">(</span><span class="string" id="8478221">&#34;VALUE=%d&#34;</span><span class="op" id="8478231">,</span>&nbsp;<span class="op" id="8478233">*</span><span class="ident" id="8478234">g</span><span class="op" id="8478235">)</span><span class="op" id="8478236">)</span><span class="op" id="8478237">,</span>&nbsp;<span class="ident" id="8478239">nil</span><br>
<span class="lineno">115</span><span class="op" id="8478243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8478246">func</span>&nbsp;<span class="op" id="8478251">(</span><span class="ident" id="8478252">g</span>&nbsp;<span class="op" id="8478254">*</span><span class="ident" id="8478255">BinaryGobber</span><span class="op" id="8478267">)</span>&nbsp;<span class="ident" id="8478269">UnmarshalBinary</span><span class="op" id="8478284">(</span><span class="ident" id="8478285">data</span>&nbsp;<span class="op" id="8478290">[</span><span class="op" id="8478291">]</span><span class="builtintype" id="8478292">byte</span><span class="op" id="8478296">)</span>&nbsp;<span class="builtintype" id="8478298">error</span>&nbsp;<span class="op" id="8478304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478307">_</span><span class="op" id="8478308">,</span>&nbsp;<span class="ident" id="8478310">err</span>&nbsp;<span class="op" id="8478314">:=</span>&nbsp;<span class="ident" id="8478317">fmt</span><span class="op" id="8478320">.</span><span class="ident" id="8478321">Sscanf</span><span class="op" id="8478327">(</span><span class="builtintype" id="8478328">string</span><span class="op" id="8478334">(</span><span class="ident" id="8478335">data</span><span class="op" id="8478339">)</span><span class="op" id="8478340">,</span>&nbsp;<span class="string" id="8478342">&#34;VALUE=%d&#34;</span><span class="op" id="8478352">,</span>&nbsp;<span class="op" id="8478354">(</span><span class="op" id="8478355">*</span><span class="builtintype" id="8478356">int</span><span class="op" id="8478359">)</span><span class="op" id="8478360">(</span><span class="ident" id="8478361">g</span><span class="op" id="8478362">)</span><span class="op" id="8478363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8478366">return</span>&nbsp;<span class="ident" id="8478373">err</span><br>
<span class="lineno">120</span><span class="op" id="8478377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8478380">func</span>&nbsp;<span class="op" id="8478385">(</span><span class="ident" id="8478386">g</span>&nbsp;<span class="op" id="8478388">*</span><span class="ident" id="8478389">TextGobber</span><span class="op" id="8478399">)</span>&nbsp;<span class="ident" id="8478401">MarshalText</span><span class="op" id="8478412">(</span><span class="op" id="8478413">)</span>&nbsp;<span class="op" id="8478415">(</span><span class="op" id="8478416">[</span><span class="op" id="8478417">]</span><span class="builtintype" id="8478418">byte</span><span class="op" id="8478422">,</span>&nbsp;<span class="builtintype" id="8478424">error</span><span class="op" id="8478429">)</span>&nbsp;<span class="op" id="8478431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8478434">return</span>&nbsp;<span class="op" id="8478441">[</span><span class="op" id="8478442">]</span><span class="builtintype" id="8478443">byte</span><span class="op" id="8478447">(</span><span class="ident" id="8478448">fmt</span><span class="op" id="8478451">.</span><span class="ident" id="8478452">Sprintf</span><span class="op" id="8478459">(</span><span class="string" id="8478460">&#34;VALUE=%d&#34;</span><span class="op" id="8478470">,</span>&nbsp;<span class="op" id="8478472">*</span><span class="ident" id="8478473">g</span><span class="op" id="8478474">)</span><span class="op" id="8478475">)</span><span class="op" id="8478476">,</span>&nbsp;<span class="ident" id="8478478">nil</span><br>
<span class="lineno"></span><span class="op" id="8478482">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="8478485">func</span>&nbsp;<span class="op" id="8478490">(</span><span class="ident" id="8478491">g</span>&nbsp;<span class="op" id="8478493">*</span><span class="ident" id="8478494">TextGobber</span><span class="op" id="8478504">)</span>&nbsp;<span class="ident" id="8478506">UnmarshalText</span><span class="op" id="8478519">(</span><span class="ident" id="8478520">data</span>&nbsp;<span class="op" id="8478525">[</span><span class="op" id="8478526">]</span><span class="builtintype" id="8478527">byte</span><span class="op" id="8478531">)</span>&nbsp;<span class="builtintype" id="8478533">error</span>&nbsp;<span class="op" id="8478539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478542">_</span><span class="op" id="8478543">,</span>&nbsp;<span class="ident" id="8478545">err</span>&nbsp;<span class="op" id="8478549">:=</span>&nbsp;<span class="ident" id="8478552">fmt</span><span class="op" id="8478555">.</span><span class="ident" id="8478556">Sscanf</span><span class="op" id="8478562">(</span><span class="builtintype" id="8478563">string</span><span class="op" id="8478569">(</span><span class="ident" id="8478570">data</span><span class="op" id="8478574">)</span><span class="op" id="8478575">,</span>&nbsp;<span class="string" id="8478577">&#34;VALUE=%d&#34;</span><span class="op" id="8478587">,</span>&nbsp;<span class="op" id="8478589">(</span><span class="op" id="8478590">*</span><span class="builtintype" id="8478591">int</span><span class="op" id="8478594">)</span><span class="op" id="8478595">(</span><span class="ident" id="8478596">g</span><span class="op" id="8478597">)</span><span class="op" id="8478598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8478601">return</span>&nbsp;<span class="ident" id="8478608">err</span><br>
<span class="lineno"></span><span class="op" id="8478612">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="8478615">func</span>&nbsp;<span class="op" id="8478620">(</span><span class="ident" id="8478621">v</span>&nbsp;<span class="ident" id="8478623">ValueGobber</span><span class="op" id="8478634">)</span>&nbsp;<span class="ident" id="8478636">GobEncode</span><span class="op" id="8478645">(</span><span class="op" id="8478646">)</span>&nbsp;<span class="op" id="8478648">(</span><span class="op" id="8478649">[</span><span class="op" id="8478650">]</span><span class="builtintype" id="8478651">byte</span><span class="op" id="8478655">,</span>&nbsp;<span class="builtintype" id="8478657">error</span><span class="op" id="8478662">)</span>&nbsp;<span class="op" id="8478664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8478667">return</span>&nbsp;<span class="op" id="8478674">[</span><span class="op" id="8478675">]</span><span class="builtintype" id="8478676">byte</span><span class="op" id="8478680">(</span><span class="ident" id="8478681">fmt</span><span class="op" id="8478684">.</span><span class="ident" id="8478685">Sprintf</span><span class="op" id="8478692">(</span><span class="string" id="8478693">&#34;VALUE=%s&#34;</span><span class="op" id="8478703">,</span>&nbsp;<span class="ident" id="8478705">v</span><span class="op" id="8478706">)</span><span class="op" id="8478707">)</span><span class="op" id="8478708">,</span>&nbsp;<span class="ident" id="8478710">nil</span><br>
<span class="lineno"></span><span class="op" id="8478714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8478717">func</span>&nbsp;<span class="op" id="8478722">(</span><span class="ident" id="8478723">v</span>&nbsp;<span class="op" id="8478725">*</span><span class="ident" id="8478726">ValueGobber</span><span class="op" id="8478737">)</span>&nbsp;<span class="ident" id="8478739">GobDecode</span><span class="op" id="8478748">(</span><span class="ident" id="8478749">data</span>&nbsp;<span class="op" id="8478754">[</span><span class="op" id="8478755">]</span><span class="builtintype" id="8478756">byte</span><span class="op" id="8478760">)</span>&nbsp;<span class="builtintype" id="8478762">error</span>&nbsp;<span class="op" id="8478768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8478771">_</span><span class="op" id="8478772">,</span>&nbsp;<span class="ident" id="8478774">err</span>&nbsp;<span class="op" id="8478778">:=</span>&nbsp;<span class="ident" id="8478781">fmt</span><span class="op" id="8478784">.</span><span class="ident" id="8478785">Sscanf</span><span class="op" id="8478791">(</span><span class="builtintype" id="8478792">string</span><span class="op" id="8478798">(</span><span class="ident" id="8478799">data</span><span class="op" id="8478803">)</span><span class="op" id="8478804">,</span>&nbsp;<span class="string" id="8478806">&#34;VALUE=%s&#34;</span><span class="op" id="8478816">,</span>&nbsp;<span class="op" id="8478818">(</span><span class="op" id="8478819">*</span><span class="builtintype" id="8478820">string</span><span class="op" id="8478826">)</span><span class="op" id="8478827">(</span><span class="ident" id="8478828">v</span><span class="op" id="8478829">)</span><span class="op" id="8478830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8478833">return</span>&nbsp;<span class="ident" id="8478840">err</span><br>
<span class="lineno"></span><span class="op" id="8478844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="8478847">func</span>&nbsp;<span class="op" id="8478852">(</span><span class="ident" id="8478853">v</span>&nbsp;<span class="ident" id="8478855">BinaryValueGobber</span><span class="op" id="8478872">)</span>&nbsp;<span class="ident" id="8478874">MarshalBinary</span><span class="op" id="8478887">(</span><span class="op" id="8478888">)</span>&nbsp;<span class="op" id="8478890">(</span><span class="op" id="8478891">[</span><span class="op" id="8478892">]</span><span class="builtintype" id="8478893">byte</span><span class="op" id="8478897">,</span>&nbsp;<span class="builtintype" id="8478899">error</span><span class="op" id="8478904">)</span>&nbsp;<span class="op" id="8478906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8478909">return</span>&nbsp;<span class="op" id="8478916">[</span><span class="op" id="8478917">]</span><span class="builtintype" id="8478918">byte</span><span class="op" id="8478922">(</span><span class="ident" id="8478923">fmt</span><span class="op" id="8478926">.</span><span class="ident" id="8478927">Sprintf</span><span class="op" id="8478934">(</span><span class="string" id="8478935">&#34;VALUE=%s&#34;</span><span class="op" id="8478945">,</span>&nbsp;<span class="ident" id="8478947">v</span><span class="op" id="8478948">)</span><span class="op" id="8478949">)</span><span class="op" id="8478950">,</span>&nbsp;<span class="ident" id="8478952">nil</span><br>
<span class="lineno"></span><span class="op" id="8478956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8478959">func</span>&nbsp;<span class="op" id="8478964">(</span><span class="ident" id="8478965">v</span>&nbsp;<span class="op" id="8478967">*</span><span class="ident" id="8478968">BinaryValueGobber</span><span class="op" id="8478985">)</span>&nbsp;<span class="ident" id="8478987">UnmarshalBinary</span><span class="op" id="8479002">(</span><span class="ident" id="8479003">data</span>&nbsp;<span class="op" id="8479008">[</span><span class="op" id="8479009">]</span><span class="builtintype" id="8479010">byte</span><span class="op" id="8479014">)</span>&nbsp;<span class="builtintype" id="8479016">error</span>&nbsp;<span class="op" id="8479022">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479025">_</span><span class="op" id="8479026">,</span>&nbsp;<span class="ident" id="8479028">err</span>&nbsp;<span class="op" id="8479032">:=</span>&nbsp;<span class="ident" id="8479035">fmt</span><span class="op" id="8479038">.</span><span class="ident" id="8479039">Sscanf</span><span class="op" id="8479045">(</span><span class="builtintype" id="8479046">string</span><span class="op" id="8479052">(</span><span class="ident" id="8479053">data</span><span class="op" id="8479057">)</span><span class="op" id="8479058">,</span>&nbsp;<span class="string" id="8479060">&#34;VALUE=%s&#34;</span><span class="op" id="8479070">,</span>&nbsp;<span class="op" id="8479072">(</span><span class="op" id="8479073">*</span><span class="builtintype" id="8479074">string</span><span class="op" id="8479080">)</span><span class="op" id="8479081">(</span><span class="ident" id="8479082">v</span><span class="op" id="8479083">)</span><span class="op" id="8479084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479087">return</span>&nbsp;<span class="ident" id="8479094">err</span><br>
<span class="lineno"></span><span class="op" id="8479098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8479101">func</span>&nbsp;<span class="op" id="8479106">(</span><span class="ident" id="8479107">v</span>&nbsp;<span class="ident" id="8479109">TextValueGobber</span><span class="op" id="8479124">)</span>&nbsp;<span class="ident" id="8479126">MarshalText</span><span class="op" id="8479137">(</span><span class="op" id="8479138">)</span>&nbsp;<span class="op" id="8479140">(</span><span class="op" id="8479141">[</span><span class="op" id="8479142">]</span><span class="builtintype" id="8479143">byte</span><span class="op" id="8479147">,</span>&nbsp;<span class="builtintype" id="8479149">error</span><span class="op" id="8479154">)</span>&nbsp;<span class="op" id="8479156">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479159">return</span>&nbsp;<span class="op" id="8479166">[</span><span class="op" id="8479167">]</span><span class="builtintype" id="8479168">byte</span><span class="op" id="8479172">(</span><span class="ident" id="8479173">fmt</span><span class="op" id="8479176">.</span><span class="ident" id="8479177">Sprintf</span><span class="op" id="8479184">(</span><span class="string" id="8479185">&#34;VALUE=%s&#34;</span><span class="op" id="8479195">,</span>&nbsp;<span class="ident" id="8479197">v</span><span class="op" id="8479198">)</span><span class="op" id="8479199">)</span><span class="op" id="8479200">,</span>&nbsp;<span class="ident" id="8479202">nil</span><br>
<span class="lineno"></span><span class="op" id="8479206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8479209">func</span>&nbsp;<span class="op" id="8479214">(</span><span class="ident" id="8479215">v</span>&nbsp;<span class="op" id="8479217">*</span><span class="ident" id="8479218">TextValueGobber</span><span class="op" id="8479233">)</span>&nbsp;<span class="ident" id="8479235">UnmarshalText</span><span class="op" id="8479248">(</span><span class="ident" id="8479249">data</span>&nbsp;<span class="op" id="8479254">[</span><span class="op" id="8479255">]</span><span class="builtintype" id="8479256">byte</span><span class="op" id="8479260">)</span>&nbsp;<span class="builtintype" id="8479262">error</span>&nbsp;<span class="op" id="8479268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479271">_</span><span class="op" id="8479272">,</span>&nbsp;<span class="ident" id="8479274">err</span>&nbsp;<span class="op" id="8479278">:=</span>&nbsp;<span class="ident" id="8479281">fmt</span><span class="op" id="8479284">.</span><span class="ident" id="8479285">Sscanf</span><span class="op" id="8479291">(</span><span class="builtintype" id="8479292">string</span><span class="op" id="8479298">(</span><span class="ident" id="8479299">data</span><span class="op" id="8479303">)</span><span class="op" id="8479304">,</span>&nbsp;<span class="string" id="8479306">&#34;VALUE=%s&#34;</span><span class="op" id="8479316">,</span>&nbsp;<span class="op" id="8479318">(</span><span class="op" id="8479319">*</span><span class="builtintype" id="8479320">string</span><span class="op" id="8479326">)</span><span class="op" id="8479327">(</span><span class="ident" id="8479328">v</span><span class="op" id="8479329">)</span><span class="op" id="8479330">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8479333">return</span>&nbsp;<span class="ident" id="8479340">err</span><br>
<span class="lineno"></span><span class="op" id="8479344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8479347">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8479393">type</span>&nbsp;<span class="ident" id="8479398">GobTest0</span>&nbsp;<span class="keyword" id="8479407">struct</span>&nbsp;<span class="op" id="8479414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479417">X</span>&nbsp;<span class="builtintype" id="8479419">int</span>&nbsp;<span class="comment" id="8479423">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479480">G</span>&nbsp;<span class="op" id="8479482">*</span><span class="ident" id="8479483">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="8479494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="8479497">type</span>&nbsp;<span class="ident" id="8479502">GobTest1</span>&nbsp;<span class="keyword" id="8479511">struct</span>&nbsp;<span class="op" id="8479518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479521">X</span>&nbsp;<span class="builtintype" id="8479523">int</span>&nbsp;<span class="comment" id="8479527">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479584">G</span>&nbsp;<span class="op" id="8479586">*</span><span class="ident" id="8479587">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="8479600">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8479603">type</span>&nbsp;<span class="ident" id="8479608">GobTest2</span>&nbsp;<span class="keyword" id="8479617">struct</span>&nbsp;<span class="op" id="8479624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479627">X</span>&nbsp;<span class="builtintype" id="8479629">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8479636">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479693">G</span>&nbsp;<span class="builtintype" id="8479695">string</span>&nbsp;<span class="comment" id="8479702">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="8479746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="8479749">type</span>&nbsp;<span class="ident" id="8479754">GobTest3</span>&nbsp;<span class="keyword" id="8479763">struct</span>&nbsp;<span class="op" id="8479770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479773">X</span>&nbsp;<span class="builtintype" id="8479775">int</span>&nbsp;<span class="comment" id="8479779">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479836">G</span>&nbsp;<span class="op" id="8479838">*</span><span class="ident" id="8479839">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479847">B</span>&nbsp;<span class="op" id="8479849">*</span><span class="ident" id="8479850">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479864">T</span>&nbsp;<span class="op" id="8479866">*</span><span class="ident" id="8479867">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="8479878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8479881">type</span>&nbsp;<span class="ident" id="8479886">GobTest4</span>&nbsp;<span class="keyword" id="8479895">struct</span>&nbsp;<span class="op" id="8479902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479905">X</span>&nbsp;&nbsp;<span class="builtintype" id="8479908">int</span>&nbsp;<span class="comment" id="8479912">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479969">V</span>&nbsp;&nbsp;<span class="ident" id="8479972">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8479985">BV</span>&nbsp;<span class="ident" id="8479988">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480007">TV</span>&nbsp;<span class="ident" id="8480010">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8480026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8480029">type</span>&nbsp;<span class="ident" id="8480034">GobTest5</span>&nbsp;<span class="keyword" id="8480043">struct</span>&nbsp;<span class="op" id="8480050">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480053">X</span>&nbsp;&nbsp;<span class="builtintype" id="8480056">int</span>&nbsp;<span class="comment" id="8480060">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480117">V</span>&nbsp;&nbsp;<span class="op" id="8480120">*</span><span class="ident" id="8480121">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480134">BV</span>&nbsp;<span class="op" id="8480137">*</span><span class="ident" id="8480138">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480157">TV</span>&nbsp;<span class="op" id="8480160">*</span><span class="ident" id="8480161">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8480177">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="8480180">type</span>&nbsp;<span class="ident" id="8480185">GobTest6</span>&nbsp;<span class="keyword" id="8480194">struct</span>&nbsp;<span class="op" id="8480201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480204">X</span>&nbsp;&nbsp;<span class="builtintype" id="8480207">int</span>&nbsp;<span class="comment" id="8480211">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480268">V</span>&nbsp;&nbsp;<span class="ident" id="8480271">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480284">W</span>&nbsp;&nbsp;<span class="op" id="8480287">*</span><span class="ident" id="8480288">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480301">BV</span>&nbsp;<span class="ident" id="8480304">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480323">BW</span>&nbsp;<span class="op" id="8480326">*</span><span class="ident" id="8480327">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480346">TV</span>&nbsp;<span class="ident" id="8480349">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480366">TW</span>&nbsp;<span class="op" id="8480369">*</span><span class="ident" id="8480370">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8480386">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="8480389">type</span>&nbsp;<span class="ident" id="8480394">GobTest7</span>&nbsp;<span class="keyword" id="8480403">struct</span>&nbsp;<span class="op" id="8480410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480413">X</span>&nbsp;&nbsp;<span class="builtintype" id="8480416">int</span>&nbsp;<span class="comment" id="8480420">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480477">V</span>&nbsp;&nbsp;<span class="op" id="8480480">*</span><span class="ident" id="8480481">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480494">W</span>&nbsp;&nbsp;<span class="ident" id="8480497">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480510">BV</span>&nbsp;<span class="op" id="8480513">*</span><span class="ident" id="8480514">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480533">BW</span>&nbsp;<span class="ident" id="8480536">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480555">TV</span>&nbsp;<span class="op" id="8480558">*</span><span class="ident" id="8480559">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480576">TW</span>&nbsp;<span class="ident" id="8480579">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8480595">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="8480598">type</span>&nbsp;<span class="ident" id="8480603">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="8480624">struct</span>&nbsp;<span class="op" id="8480631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480634">X</span>&nbsp;<span class="builtintype" id="8480636">int</span>&nbsp;<span class="comment" id="8480640">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="8480696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="8480699">type</span>&nbsp;<span class="ident" id="8480704">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="8480723">struct</span>&nbsp;<span class="op" id="8480730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480733">X</span>&nbsp;<span class="builtintype" id="8480735">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8480748">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480805">G</span>&nbsp;<span class="ident" id="8480807">StringStruct</span>&nbsp;<span class="comment" id="8480820">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8480838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="8480841">type</span>&nbsp;<span class="ident" id="8480846">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="8480868">struct</span>&nbsp;<span class="op" id="8480875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480878">X</span>&nbsp;<span class="builtintype" id="8480880">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8480896">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8480953">G</span>&nbsp;<span class="op" id="8480955">*</span><span class="op" id="8480956">*</span><span class="op" id="8480957">*</span><span class="ident" id="8480958">StringStruct</span>&nbsp;<span class="comment" id="8480971">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8481004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="8481007">type</span>&nbsp;<span class="ident" id="8481012">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="8481031">struct</span>&nbsp;<span class="op" id="8481038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481041">X</span>&nbsp;<span class="builtintype" id="8481043">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8481055">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481112">A</span>&nbsp;<span class="ident" id="8481114">ArrayStruct</span>&nbsp;<span class="comment" id="8481126">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8481144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="8481147">type</span>&nbsp;<span class="ident" id="8481152">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="8481179">struct</span>&nbsp;<span class="op" id="8481186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481189">X</span>&nbsp;<span class="builtintype" id="8481191">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8481206">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481263">A</span>&nbsp;<span class="op" id="8481265">*</span><span class="op" id="8481266">*</span><span class="op" id="8481267">*</span><span class="ident" id="8481268">ArrayStruct</span>&nbsp;<span class="comment" id="8481280">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8481317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8481320">func</span>&nbsp;<span class="ident" id="8481325">TestGobEncoderField</span><span class="op" id="8481344">(</span><span class="ident" id="8481345">t</span>&nbsp;<span class="op" id="8481347">*</span><span class="ident" id="8481348">testing</span><span class="op" id="8481355">.</span><span class="ident" id="8481356">T</span><span class="op" id="8481357">)</span>&nbsp;<span class="op" id="8481359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481362">b</span>&nbsp;<span class="op" id="8481364">:=</span>&nbsp;<span class="builtinfunc" id="8481367">new</span><span class="op" id="8481370">(</span><span class="ident" id="8481371">bytes</span><span class="op" id="8481376">.</span><span class="ident" id="8481377">Buffer</span><span class="op" id="8481383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8481386">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481424">enc</span>&nbsp;<span class="op" id="8481428">:=</span>&nbsp;<span class="ident" id="8481431">NewEncoder</span><span class="op" id="8481441">(</span><span class="ident" id="8481442">b</span><span class="op" id="8481443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481446">err</span>&nbsp;<span class="op" id="8481450">:=</span>&nbsp;<span class="ident" id="8481453">enc</span><span class="op" id="8481456">.</span><span class="ident" id="8481457">Encode</span><span class="op" id="8481463">(</span><span class="ident" id="8481464">GobTest0</span><span class="op" id="8481472">{</span><span class="num" id="8481473">17</span><span class="op" id="8481475">,</span>&nbsp;<span class="op" id="8481477">&amp;</span><span class="ident" id="8481478">ByteStruct</span><span class="op" id="8481488">{</span><span class="string" id="8481489">&#39;A&#39;</span><span class="op" id="8481492">}</span><span class="op" id="8481493">}</span><span class="op" id="8481494">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481497">if</span>&nbsp;<span class="ident" id="8481500">err</span>&nbsp;<span class="op" id="8481504">!=</span>&nbsp;<span class="ident" id="8481507">nil</span>&nbsp;<span class="op" id="8481511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481515">t</span><span class="op" id="8481516">.</span><span class="ident" id="8481517">Fatal</span><span class="op" id="8481522">(</span><span class="string" id="8481523">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8481538">,</span>&nbsp;<span class="ident" id="8481540">err</span><span class="op" id="8481543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481549">dec</span>&nbsp;<span class="op" id="8481553">:=</span>&nbsp;<span class="ident" id="8481556">NewDecoder</span><span class="op" id="8481566">(</span><span class="ident" id="8481567">b</span><span class="op" id="8481568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481571">x</span>&nbsp;<span class="op" id="8481573">:=</span>&nbsp;<span class="builtinfunc" id="8481576">new</span><span class="op" id="8481579">(</span><span class="ident" id="8481580">GobTest0</span><span class="op" id="8481588">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481591">err</span>&nbsp;<span class="op" id="8481595">=</span>&nbsp;<span class="ident" id="8481597">dec</span><span class="op" id="8481600">.</span><span class="ident" id="8481601">Decode</span><span class="op" id="8481607">(</span><span class="ident" id="8481608">x</span><span class="op" id="8481609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481612">if</span>&nbsp;<span class="ident" id="8481615">err</span>&nbsp;<span class="op" id="8481619">!=</span>&nbsp;<span class="ident" id="8481622">nil</span>&nbsp;<span class="op" id="8481626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481630">t</span><span class="op" id="8481631">.</span><span class="ident" id="8481632">Fatal</span><span class="op" id="8481637">(</span><span class="string" id="8481638">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8481653">,</span>&nbsp;<span class="ident" id="8481655">err</span><span class="op" id="8481658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481664">if</span>&nbsp;<span class="ident" id="8481667">x</span><span class="op" id="8481668">.</span><span class="ident" id="8481669">G</span><span class="op" id="8481670">.</span><span class="ident" id="8481671">a</span>&nbsp;<span class="op" id="8481673">!=</span>&nbsp;<span class="string" id="8481676">&#39;A&#39;</span>&nbsp;<span class="op" id="8481680">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481684">t</span><span class="op" id="8481685">.</span><span class="ident" id="8481686">Errorf</span><span class="op" id="8481692">(</span><span class="string" id="8481693">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8481714">,</span>&nbsp;<span class="ident" id="8481716">x</span><span class="op" id="8481717">.</span><span class="ident" id="8481718">G</span><span class="op" id="8481719">.</span><span class="ident" id="8481720">a</span><span class="op" id="8481721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8481727">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481767">b</span><span class="op" id="8481768">.</span><span class="ident" id="8481769">Reset</span><span class="op" id="8481774">(</span><span class="op" id="8481775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481778">gobber</span>&nbsp;<span class="op" id="8481785">:=</span>&nbsp;<span class="ident" id="8481788">Gobber</span><span class="op" id="8481794">(</span><span class="num" id="8481795">23</span><span class="op" id="8481797">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481800">bgobber</span>&nbsp;<span class="op" id="8481808">:=</span>&nbsp;<span class="ident" id="8481811">BinaryGobber</span><span class="op" id="8481823">(</span><span class="num" id="8481824">24</span><span class="op" id="8481826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481829">tgobber</span>&nbsp;<span class="op" id="8481837">:=</span>&nbsp;<span class="ident" id="8481840">TextGobber</span><span class="op" id="8481850">(</span><span class="num" id="8481851">25</span><span class="op" id="8481853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481856">err</span>&nbsp;<span class="op" id="8481860">=</span>&nbsp;<span class="ident" id="8481862">enc</span><span class="op" id="8481865">.</span><span class="ident" id="8481866">Encode</span><span class="op" id="8481872">(</span><span class="ident" id="8481873">GobTest3</span><span class="op" id="8481881">{</span><span class="num" id="8481882">17</span><span class="op" id="8481884">,</span>&nbsp;<span class="op" id="8481886">&amp;</span><span class="ident" id="8481887">gobber</span><span class="op" id="8481893">,</span>&nbsp;<span class="op" id="8481895">&amp;</span><span class="ident" id="8481896">bgobber</span><span class="op" id="8481903">,</span>&nbsp;<span class="op" id="8481905">&amp;</span><span class="ident" id="8481906">tgobber</span><span class="op" id="8481913">}</span><span class="op" id="8481914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8481917">if</span>&nbsp;<span class="ident" id="8481920">err</span>&nbsp;<span class="op" id="8481924">!=</span>&nbsp;<span class="ident" id="8481927">nil</span>&nbsp;<span class="op" id="8481931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481935">t</span><span class="op" id="8481936">.</span><span class="ident" id="8481937">Fatal</span><span class="op" id="8481942">(</span><span class="string" id="8481943">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8481958">,</span>&nbsp;<span class="ident" id="8481960">err</span><span class="op" id="8481963">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8481966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481969">y</span>&nbsp;<span class="op" id="8481971">:=</span>&nbsp;<span class="builtinfunc" id="8481974">new</span><span class="op" id="8481977">(</span><span class="ident" id="8481978">GobTest3</span><span class="op" id="8481986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8481989">err</span>&nbsp;<span class="op" id="8481993">=</span>&nbsp;<span class="ident" id="8481995">dec</span><span class="op" id="8481998">.</span><span class="ident" id="8481999">Decode</span><span class="op" id="8482005">(</span><span class="ident" id="8482006">y</span><span class="op" id="8482007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482010">if</span>&nbsp;<span class="ident" id="8482013">err</span>&nbsp;<span class="op" id="8482017">!=</span>&nbsp;<span class="ident" id="8482020">nil</span>&nbsp;<span class="op" id="8482024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482028">t</span><span class="op" id="8482029">.</span><span class="ident" id="8482030">Fatal</span><span class="op" id="8482035">(</span><span class="string" id="8482036">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8482051">,</span>&nbsp;<span class="ident" id="8482053">err</span><span class="op" id="8482056">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482062">if</span>&nbsp;<span class="op" id="8482065">*</span><span class="ident" id="8482066">y</span><span class="op" id="8482067">.</span><span class="ident" id="8482068">G</span>&nbsp;<span class="op" id="8482070">!=</span>&nbsp;<span class="num" id="8482073">23</span>&nbsp;<span class="op" id="8482076">||</span>&nbsp;<span class="op" id="8482079">*</span><span class="ident" id="8482080">y</span><span class="op" id="8482081">.</span><span class="ident" id="8482082">B</span>&nbsp;<span class="op" id="8482084">!=</span>&nbsp;<span class="num" id="8482087">24</span>&nbsp;<span class="op" id="8482090">||</span>&nbsp;<span class="op" id="8482093">*</span><span class="ident" id="8482094">y</span><span class="op" id="8482095">.</span><span class="ident" id="8482096">T</span>&nbsp;<span class="op" id="8482098">!=</span>&nbsp;<span class="num" id="8482101">25</span>&nbsp;<span class="op" id="8482104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482108">t</span><span class="op" id="8482109">.</span><span class="ident" id="8482110">Errorf</span><span class="op" id="8482116">(</span><span class="string" id="8482117">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8482138">,</span>&nbsp;<span class="op" id="8482140">*</span><span class="ident" id="8482141">y</span><span class="op" id="8482142">.</span><span class="ident" id="8482143">G</span><span class="op" id="8482144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482147">}</span><br>
<span class="lineno"></span><span class="op" id="8482149">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="8482152">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="8482219">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8482262">func</span>&nbsp;<span class="ident" id="8482267">TestGobEncoderValueField</span><span class="op" id="8482291">(</span><span class="ident" id="8482292">t</span>&nbsp;<span class="op" id="8482294">*</span><span class="ident" id="8482295">testing</span><span class="op" id="8482302">.</span><span class="ident" id="8482303">T</span><span class="op" id="8482304">)</span>&nbsp;<span class="op" id="8482306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482309">b</span>&nbsp;<span class="op" id="8482311">:=</span>&nbsp;<span class="builtinfunc" id="8482314">new</span><span class="op" id="8482317">(</span><span class="ident" id="8482318">bytes</span><span class="op" id="8482323">.</span><span class="ident" id="8482324">Buffer</span><span class="op" id="8482330">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8482333">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482371">enc</span>&nbsp;<span class="op" id="8482375">:=</span>&nbsp;<span class="ident" id="8482378">NewEncoder</span><span class="op" id="8482388">(</span><span class="ident" id="8482389">b</span><span class="op" id="8482390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482393">err</span>&nbsp;<span class="op" id="8482397">:=</span>&nbsp;<span class="ident" id="8482400">enc</span><span class="op" id="8482403">.</span><span class="ident" id="8482404">Encode</span><span class="op" id="8482410">(</span><span class="op" id="8482411">&amp;</span><span class="ident" id="8482412">GobTestValueEncDec</span><span class="op" id="8482430">{</span><span class="num" id="8482431">17</span><span class="op" id="8482433">,</span>&nbsp;<span class="ident" id="8482435">StringStruct</span><span class="op" id="8482447">{</span><span class="string" id="8482448">&#34;HIJKL&#34;</span><span class="op" id="8482455">}</span><span class="op" id="8482456">}</span><span class="op" id="8482457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482460">if</span>&nbsp;<span class="ident" id="8482463">err</span>&nbsp;<span class="op" id="8482467">!=</span>&nbsp;<span class="ident" id="8482470">nil</span>&nbsp;<span class="op" id="8482474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482478">t</span><span class="op" id="8482479">.</span><span class="ident" id="8482480">Fatal</span><span class="op" id="8482485">(</span><span class="string" id="8482486">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8482501">,</span>&nbsp;<span class="ident" id="8482503">err</span><span class="op" id="8482506">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482512">dec</span>&nbsp;<span class="op" id="8482516">:=</span>&nbsp;<span class="ident" id="8482519">NewDecoder</span><span class="op" id="8482529">(</span><span class="ident" id="8482530">b</span><span class="op" id="8482531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482534">x</span>&nbsp;<span class="op" id="8482536">:=</span>&nbsp;<span class="builtinfunc" id="8482539">new</span><span class="op" id="8482542">(</span><span class="ident" id="8482543">GobTestValueEncDec</span><span class="op" id="8482561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482564">err</span>&nbsp;<span class="op" id="8482568">=</span>&nbsp;<span class="ident" id="8482570">dec</span><span class="op" id="8482573">.</span><span class="ident" id="8482574">Decode</span><span class="op" id="8482580">(</span><span class="ident" id="8482581">x</span><span class="op" id="8482582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482585">if</span>&nbsp;<span class="ident" id="8482588">err</span>&nbsp;<span class="op" id="8482592">!=</span>&nbsp;<span class="ident" id="8482595">nil</span>&nbsp;<span class="op" id="8482599">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482603">t</span><span class="op" id="8482604">.</span><span class="ident" id="8482605">Fatal</span><span class="op" id="8482610">(</span><span class="string" id="8482611">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8482626">,</span>&nbsp;<span class="ident" id="8482628">err</span><span class="op" id="8482631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8482637">if</span>&nbsp;<span class="ident" id="8482640">x</span><span class="op" id="8482641">.</span><span class="ident" id="8482642">G</span><span class="op" id="8482643">.</span><span class="ident" id="8482644">s</span>&nbsp;<span class="op" id="8482646">!=</span>&nbsp;<span class="string" id="8482649">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8482657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482661">t</span><span class="op" id="8482662">.</span><span class="ident" id="8482663">Errorf</span><span class="op" id="8482669">(</span><span class="string" id="8482670">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8482695">,</span>&nbsp;<span class="ident" id="8482697">x</span><span class="op" id="8482698">.</span><span class="ident" id="8482699">G</span><span class="op" id="8482700">.</span><span class="ident" id="8482701">s</span><span class="op" id="8482702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8482705">}</span><br>
<span class="lineno">295</span><span class="op" id="8482707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8482710">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="8482763">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="8482799">func</span>&nbsp;<span class="ident" id="8482804">TestGobEncoderIndirectField</span><span class="op" id="8482831">(</span><span class="ident" id="8482832">t</span>&nbsp;<span class="op" id="8482834">*</span><span class="ident" id="8482835">testing</span><span class="op" id="8482842">.</span><span class="ident" id="8482843">T</span><span class="op" id="8482844">)</span>&nbsp;<span class="op" id="8482846">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482849">b</span>&nbsp;<span class="op" id="8482851">:=</span>&nbsp;<span class="builtinfunc" id="8482854">new</span><span class="op" id="8482857">(</span><span class="ident" id="8482858">bytes</span><span class="op" id="8482863">.</span><span class="ident" id="8482864">Buffer</span><span class="op" id="8482870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8482873">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482911">enc</span>&nbsp;<span class="op" id="8482915">:=</span>&nbsp;<span class="ident" id="8482918">NewEncoder</span><span class="op" id="8482928">(</span><span class="ident" id="8482929">b</span><span class="op" id="8482930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482933">s</span>&nbsp;<span class="op" id="8482935">:=</span>&nbsp;<span class="op" id="8482938">&amp;</span><span class="ident" id="8482939">StringStruct</span><span class="op" id="8482951">{</span><span class="string" id="8482952">&#34;HIJKL&#34;</span><span class="op" id="8482959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482962">sp</span>&nbsp;<span class="op" id="8482965">:=</span>&nbsp;<span class="op" id="8482968">&amp;</span><span class="ident" id="8482969">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8482972">err</span>&nbsp;<span class="op" id="8482976">:=</span>&nbsp;<span class="ident" id="8482979">enc</span><span class="op" id="8482982">.</span><span class="ident" id="8482983">Encode</span><span class="op" id="8482989">(</span><span class="ident" id="8482990">GobTestIndirectEncDec</span><span class="op" id="8483011">{</span><span class="num" id="8483012">17</span><span class="op" id="8483014">,</span>&nbsp;<span class="op" id="8483016">&amp;</span><span class="ident" id="8483017">sp</span><span class="op" id="8483019">}</span><span class="op" id="8483020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483023">if</span>&nbsp;<span class="ident" id="8483026">err</span>&nbsp;<span class="op" id="8483030">!=</span>&nbsp;<span class="ident" id="8483033">nil</span>&nbsp;<span class="op" id="8483037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483041">t</span><span class="op" id="8483042">.</span><span class="ident" id="8483043">Fatal</span><span class="op" id="8483048">(</span><span class="string" id="8483049">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8483064">,</span>&nbsp;<span class="ident" id="8483066">err</span><span class="op" id="8483069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483075">dec</span>&nbsp;<span class="op" id="8483079">:=</span>&nbsp;<span class="ident" id="8483082">NewDecoder</span><span class="op" id="8483092">(</span><span class="ident" id="8483093">b</span><span class="op" id="8483094">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483097">x</span>&nbsp;<span class="op" id="8483099">:=</span>&nbsp;<span class="builtinfunc" id="8483102">new</span><span class="op" id="8483105">(</span><span class="ident" id="8483106">GobTestIndirectEncDec</span><span class="op" id="8483127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483130">err</span>&nbsp;<span class="op" id="8483134">=</span>&nbsp;<span class="ident" id="8483136">dec</span><span class="op" id="8483139">.</span><span class="ident" id="8483140">Decode</span><span class="op" id="8483146">(</span><span class="ident" id="8483147">x</span><span class="op" id="8483148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483151">if</span>&nbsp;<span class="ident" id="8483154">err</span>&nbsp;<span class="op" id="8483158">!=</span>&nbsp;<span class="ident" id="8483161">nil</span>&nbsp;<span class="op" id="8483165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483169">t</span><span class="op" id="8483170">.</span><span class="ident" id="8483171">Fatal</span><span class="op" id="8483176">(</span><span class="string" id="8483177">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8483192">,</span>&nbsp;<span class="ident" id="8483194">err</span><span class="op" id="8483197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483200">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483203">if</span>&nbsp;<span class="op" id="8483206">(</span><span class="op" id="8483207">*</span><span class="op" id="8483208">*</span><span class="op" id="8483209">*</span><span class="ident" id="8483210">x</span><span class="op" id="8483211">.</span><span class="ident" id="8483212">G</span><span class="op" id="8483213">)</span><span class="op" id="8483214">.</span><span class="ident" id="8483215">s</span>&nbsp;<span class="op" id="8483217">!=</span>&nbsp;<span class="string" id="8483220">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8483228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483232">t</span><span class="op" id="8483233">.</span><span class="ident" id="8483234">Errorf</span><span class="op" id="8483240">(</span><span class="string" id="8483241">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8483266">,</span>&nbsp;<span class="op" id="8483268">(</span><span class="op" id="8483269">*</span><span class="op" id="8483270">*</span><span class="op" id="8483271">*</span><span class="ident" id="8483272">x</span><span class="op" id="8483273">.</span><span class="ident" id="8483274">G</span><span class="op" id="8483275">)</span><span class="op" id="8483276">.</span><span class="ident" id="8483277">s</span><span class="op" id="8483278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483281">}</span><br>
<span class="lineno"></span><span class="op" id="8483283">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="8483286">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8483327">func</span>&nbsp;<span class="ident" id="8483332">TestGobEncoderArrayField</span><span class="op" id="8483356">(</span><span class="ident" id="8483357">t</span>&nbsp;<span class="op" id="8483359">*</span><span class="ident" id="8483360">testing</span><span class="op" id="8483367">.</span><span class="ident" id="8483368">T</span><span class="op" id="8483369">)</span>&nbsp;<span class="op" id="8483371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483374">b</span>&nbsp;<span class="op" id="8483376">:=</span>&nbsp;<span class="builtinfunc" id="8483379">new</span><span class="op" id="8483382">(</span><span class="ident" id="8483383">bytes</span><span class="op" id="8483388">.</span><span class="ident" id="8483389">Buffer</span><span class="op" id="8483395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483398">enc</span>&nbsp;<span class="op" id="8483402">:=</span>&nbsp;<span class="ident" id="8483405">NewEncoder</span><span class="op" id="8483415">(</span><span class="ident" id="8483416">b</span><span class="op" id="8483417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483420">var</span>&nbsp;<span class="ident" id="8483424">a</span>&nbsp;<span class="ident" id="8483426">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483446">a</span><span class="op" id="8483447">.</span><span class="ident" id="8483448">X</span>&nbsp;<span class="op" id="8483450">=</span>&nbsp;<span class="num" id="8483452">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483456">for</span>&nbsp;<span class="ident" id="8483460">i</span>&nbsp;<span class="op" id="8483462">:=</span>&nbsp;<span class="keyword" id="8483465">range</span>&nbsp;<span class="ident" id="8483471">a</span><span class="op" id="8483472">.</span><span class="ident" id="8483473">A</span><span class="op" id="8483474">.</span><span class="ident" id="8483475">a</span>&nbsp;<span class="op" id="8483477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483481">a</span><span class="op" id="8483482">.</span><span class="ident" id="8483483">A</span><span class="op" id="8483484">.</span><span class="ident" id="8483485">a</span><span class="op" id="8483486">[</span><span class="ident" id="8483487">i</span><span class="op" id="8483488">]</span>&nbsp;<span class="op" id="8483490">=</span>&nbsp;<span class="builtintype" id="8483492">byte</span><span class="op" id="8483496">(</span><span class="ident" id="8483497">i</span><span class="op" id="8483498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483504">err</span>&nbsp;<span class="op" id="8483508">:=</span>&nbsp;<span class="ident" id="8483511">enc</span><span class="op" id="8483514">.</span><span class="ident" id="8483515">Encode</span><span class="op" id="8483521">(</span><span class="op" id="8483522">&amp;</span><span class="ident" id="8483523">a</span><span class="op" id="8483524">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483527">if</span>&nbsp;<span class="ident" id="8483530">err</span>&nbsp;<span class="op" id="8483534">!=</span>&nbsp;<span class="ident" id="8483537">nil</span>&nbsp;<span class="op" id="8483541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483545">t</span><span class="op" id="8483546">.</span><span class="ident" id="8483547">Fatal</span><span class="op" id="8483552">(</span><span class="string" id="8483553">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8483568">,</span>&nbsp;<span class="ident" id="8483570">err</span><span class="op" id="8483573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483579">dec</span>&nbsp;<span class="op" id="8483583">:=</span>&nbsp;<span class="ident" id="8483586">NewDecoder</span><span class="op" id="8483596">(</span><span class="ident" id="8483597">b</span><span class="op" id="8483598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483601">x</span>&nbsp;<span class="op" id="8483603">:=</span>&nbsp;<span class="builtinfunc" id="8483606">new</span><span class="op" id="8483609">(</span><span class="ident" id="8483610">GobTestArrayEncDec</span><span class="op" id="8483628">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483631">err</span>&nbsp;<span class="op" id="8483635">=</span>&nbsp;<span class="ident" id="8483637">dec</span><span class="op" id="8483640">.</span><span class="ident" id="8483641">Decode</span><span class="op" id="8483647">(</span><span class="ident" id="8483648">x</span><span class="op" id="8483649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483652">if</span>&nbsp;<span class="ident" id="8483655">err</span>&nbsp;<span class="op" id="8483659">!=</span>&nbsp;<span class="ident" id="8483662">nil</span>&nbsp;<span class="op" id="8483666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483670">t</span><span class="op" id="8483671">.</span><span class="ident" id="8483672">Fatal</span><span class="op" id="8483677">(</span><span class="string" id="8483678">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8483693">,</span>&nbsp;<span class="ident" id="8483695">err</span><span class="op" id="8483698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483704">for</span>&nbsp;<span class="ident" id="8483708">i</span><span class="op" id="8483709">,</span>&nbsp;<span class="ident" id="8483711">v</span>&nbsp;<span class="op" id="8483713">:=</span>&nbsp;<span class="keyword" id="8483716">range</span>&nbsp;<span class="ident" id="8483722">x</span><span class="op" id="8483723">.</span><span class="ident" id="8483724">A</span><span class="op" id="8483725">.</span><span class="ident" id="8483726">a</span>&nbsp;<span class="op" id="8483728">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483732">if</span>&nbsp;<span class="ident" id="8483735">v</span>&nbsp;<span class="op" id="8483737">!=</span>&nbsp;<span class="builtintype" id="8483740">byte</span><span class="op" id="8483744">(</span><span class="ident" id="8483745">i</span><span class="op" id="8483746">)</span>&nbsp;<span class="op" id="8483748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483753">t</span><span class="op" id="8483754">.</span><span class="ident" id="8483755">Errorf</span><span class="op" id="8483761">(</span><span class="string" id="8483762">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8483782">,</span>&nbsp;<span class="builtintype" id="8483784">byte</span><span class="op" id="8483788">(</span><span class="ident" id="8483789">i</span><span class="op" id="8483790">)</span><span class="op" id="8483791">,</span>&nbsp;<span class="ident" id="8483793">v</span><span class="op" id="8483794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483799">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483810">}</span><br>
<span class="lineno">345</span><span class="op" id="8483812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8483815">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8483869">func</span>&nbsp;<span class="ident" id="8483874">TestGobEncoderIndirectArrayField</span><span class="op" id="8483906">(</span><span class="ident" id="8483907">t</span>&nbsp;<span class="op" id="8483909">*</span><span class="ident" id="8483910">testing</span><span class="op" id="8483917">.</span><span class="ident" id="8483918">T</span><span class="op" id="8483919">)</span>&nbsp;<span class="op" id="8483921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483924">b</span>&nbsp;<span class="op" id="8483926">:=</span>&nbsp;<span class="builtinfunc" id="8483929">new</span><span class="op" id="8483932">(</span><span class="ident" id="8483933">bytes</span><span class="op" id="8483938">.</span><span class="ident" id="8483939">Buffer</span><span class="op" id="8483945">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483948">enc</span>&nbsp;<span class="op" id="8483952">:=</span>&nbsp;<span class="ident" id="8483955">NewEncoder</span><span class="op" id="8483965">(</span><span class="ident" id="8483966">b</span><span class="op" id="8483967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8483970">var</span>&nbsp;<span class="ident" id="8483974">a</span>&nbsp;<span class="ident" id="8483976">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484004">a</span><span class="op" id="8484005">.</span><span class="ident" id="8484006">X</span>&nbsp;<span class="op" id="8484008">=</span>&nbsp;<span class="num" id="8484010">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8484014">var</span>&nbsp;<span class="ident" id="8484018">array</span>&nbsp;<span class="ident" id="8484024">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484037">ap</span>&nbsp;<span class="op" id="8484040">:=</span>&nbsp;<span class="op" id="8484043">&amp;</span><span class="ident" id="8484044">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484051">app</span>&nbsp;<span class="op" id="8484055">:=</span>&nbsp;<span class="op" id="8484058">&amp;</span><span class="ident" id="8484059">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484063">a</span><span class="op" id="8484064">.</span><span class="ident" id="8484065">A</span>&nbsp;<span class="op" id="8484067">=</span>&nbsp;<span class="op" id="8484069">&amp;</span><span class="ident" id="8484070">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8484075">for</span>&nbsp;<span class="ident" id="8484079">i</span>&nbsp;<span class="op" id="8484081">:=</span>&nbsp;<span class="keyword" id="8484084">range</span>&nbsp;<span class="ident" id="8484090">array</span><span class="op" id="8484095">.</span><span class="ident" id="8484096">a</span>&nbsp;<span class="op" id="8484098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484102">array</span><span class="op" id="8484107">.</span><span class="ident" id="8484108">a</span><span class="op" id="8484109">[</span><span class="ident" id="8484110">i</span><span class="op" id="8484111">]</span>&nbsp;<span class="op" id="8484113">=</span>&nbsp;<span class="builtintype" id="8484115">byte</span><span class="op" id="8484119">(</span><span class="ident" id="8484120">i</span><span class="op" id="8484121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484124">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484127">err</span>&nbsp;<span class="op" id="8484131">:=</span>&nbsp;<span class="ident" id="8484134">enc</span><span class="op" id="8484137">.</span><span class="ident" id="8484138">Encode</span><span class="op" id="8484144">(</span><span class="ident" id="8484145">a</span><span class="op" id="8484146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8484149">if</span>&nbsp;<span class="ident" id="8484152">err</span>&nbsp;<span class="op" id="8484156">!=</span>&nbsp;<span class="ident" id="8484159">nil</span>&nbsp;<span class="op" id="8484163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484167">t</span><span class="op" id="8484168">.</span><span class="ident" id="8484169">Fatal</span><span class="op" id="8484174">(</span><span class="string" id="8484175">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8484190">,</span>&nbsp;<span class="ident" id="8484192">err</span><span class="op" id="8484195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484201">dec</span>&nbsp;<span class="op" id="8484205">:=</span>&nbsp;<span class="ident" id="8484208">NewDecoder</span><span class="op" id="8484218">(</span><span class="ident" id="8484219">b</span><span class="op" id="8484220">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484223">x</span>&nbsp;<span class="op" id="8484225">:=</span>&nbsp;<span class="builtinfunc" id="8484228">new</span><span class="op" id="8484231">(</span><span class="ident" id="8484232">GobTestIndirectArrayEncDec</span><span class="op" id="8484258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484261">err</span>&nbsp;<span class="op" id="8484265">=</span>&nbsp;<span class="ident" id="8484267">dec</span><span class="op" id="8484270">.</span><span class="ident" id="8484271">Decode</span><span class="op" id="8484277">(</span><span class="ident" id="8484278">x</span><span class="op" id="8484279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8484282">if</span>&nbsp;<span class="ident" id="8484285">err</span>&nbsp;<span class="op" id="8484289">!=</span>&nbsp;<span class="ident" id="8484292">nil</span>&nbsp;<span class="op" id="8484296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484300">t</span><span class="op" id="8484301">.</span><span class="ident" id="8484302">Fatal</span><span class="op" id="8484307">(</span><span class="string" id="8484308">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8484323">,</span>&nbsp;<span class="ident" id="8484325">err</span><span class="op" id="8484328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484331">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8484334">for</span>&nbsp;<span class="ident" id="8484338">i</span><span class="op" id="8484339">,</span>&nbsp;<span class="ident" id="8484341">v</span>&nbsp;<span class="op" id="8484343">:=</span>&nbsp;<span class="keyword" id="8484346">range</span>&nbsp;<span class="op" id="8484352">(</span><span class="op" id="8484353">*</span><span class="op" id="8484354">*</span><span class="op" id="8484355">*</span><span class="ident" id="8484356">x</span><span class="op" id="8484357">.</span><span class="ident" id="8484358">A</span><span class="op" id="8484359">)</span><span class="op" id="8484360">.</span><span class="ident" id="8484361">a</span>&nbsp;<span class="op" id="8484363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8484367">if</span>&nbsp;<span class="ident" id="8484370">v</span>&nbsp;<span class="op" id="8484372">!=</span>&nbsp;<span class="builtintype" id="8484375">byte</span><span class="op" id="8484379">(</span><span class="ident" id="8484380">i</span><span class="op" id="8484381">)</span>&nbsp;<span class="op" id="8484383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484388">t</span><span class="op" id="8484389">.</span><span class="ident" id="8484390">Errorf</span><span class="op" id="8484396">(</span><span class="string" id="8484397">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8484417">,</span>&nbsp;<span class="builtintype" id="8484419">byte</span><span class="op" id="8484423">(</span><span class="ident" id="8484424">i</span><span class="op" id="8484425">)</span><span class="op" id="8484426">,</span>&nbsp;<span class="ident" id="8484428">v</span><span class="op" id="8484429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8484434">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484442">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484445">}</span><br>
<span class="lineno"></span><span class="op" id="8484447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8484450">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8484512">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="8484575">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="8484636">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="8484696">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="8484719">func</span>&nbsp;<span class="ident" id="8484724">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="8484759">(</span><span class="ident" id="8484760">t</span>&nbsp;<span class="op" id="8484762">*</span><span class="ident" id="8484763">testing</span><span class="op" id="8484770">.</span><span class="ident" id="8484771">T</span><span class="op" id="8484772">)</span>&nbsp;<span class="op" id="8484774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484777">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484821">b</span>&nbsp;<span class="op" id="8484823">:=</span>&nbsp;<span class="builtinfunc" id="8484826">new</span><span class="op" id="8484829">(</span><span class="ident" id="8484830">bytes</span><span class="op" id="8484835">.</span><span class="ident" id="8484836">Buffer</span><span class="op" id="8484842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484845">enc</span>&nbsp;<span class="op" id="8484849">:=</span>&nbsp;<span class="ident" id="8484852">NewEncoder</span><span class="op" id="8484862">(</span><span class="ident" id="8484863">b</span><span class="op" id="8484864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484867">err</span>&nbsp;<span class="op" id="8484871">:=</span>&nbsp;<span class="ident" id="8484874">enc</span><span class="op" id="8484877">.</span><span class="ident" id="8484878">Encode</span><span class="op" id="8484884">(</span><span class="ident" id="8484885">GobTest1</span><span class="op" id="8484893">{</span><span class="num" id="8484894">17</span><span class="op" id="8484896">,</span>&nbsp;<span class="op" id="8484898">&amp;</span><span class="ident" id="8484899">StringStruct</span><span class="op" id="8484911">{</span><span class="string" id="8484912">&#34;ABC&#34;</span><span class="op" id="8484917">}</span><span class="op" id="8484918">}</span><span class="op" id="8484919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8484922">if</span>&nbsp;<span class="ident" id="8484925">err</span>&nbsp;<span class="op" id="8484929">!=</span>&nbsp;<span class="ident" id="8484932">nil</span>&nbsp;<span class="op" id="8484936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484940">t</span><span class="op" id="8484941">.</span><span class="ident" id="8484942">Fatal</span><span class="op" id="8484947">(</span><span class="string" id="8484948">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8484963">,</span>&nbsp;<span class="ident" id="8484965">err</span><span class="op" id="8484968">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484974">dec</span>&nbsp;<span class="op" id="8484978">:=</span>&nbsp;<span class="ident" id="8484981">NewDecoder</span><span class="op" id="8484991">(</span><span class="ident" id="8484992">b</span><span class="op" id="8484993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8484996">x</span>&nbsp;<span class="op" id="8484998">:=</span>&nbsp;<span class="builtinfunc" id="8485001">new</span><span class="op" id="8485004">(</span><span class="ident" id="8485005">GobTest0</span><span class="op" id="8485013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485016">err</span>&nbsp;<span class="op" id="8485020">=</span>&nbsp;<span class="ident" id="8485022">dec</span><span class="op" id="8485025">.</span><span class="ident" id="8485026">Decode</span><span class="op" id="8485032">(</span><span class="ident" id="8485033">x</span><span class="op" id="8485034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8485037">if</span>&nbsp;<span class="ident" id="8485040">err</span>&nbsp;<span class="op" id="8485044">!=</span>&nbsp;<span class="ident" id="8485047">nil</span>&nbsp;<span class="op" id="8485051">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485055">t</span><span class="op" id="8485056">.</span><span class="ident" id="8485057">Fatal</span><span class="op" id="8485062">(</span><span class="string" id="8485063">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8485078">,</span>&nbsp;<span class="ident" id="8485080">err</span><span class="op" id="8485083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8485089">if</span>&nbsp;<span class="ident" id="8485092">x</span><span class="op" id="8485093">.</span><span class="ident" id="8485094">G</span><span class="op" id="8485095">.</span><span class="ident" id="8485096">a</span>&nbsp;<span class="op" id="8485098">!=</span>&nbsp;<span class="string" id="8485101">&#39;A&#39;</span>&nbsp;<span class="op" id="8485105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485109">t</span><span class="op" id="8485110">.</span><span class="ident" id="8485111">Errorf</span><span class="op" id="8485117">(</span><span class="string" id="8485118">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8485139">,</span>&nbsp;<span class="ident" id="8485141">x</span><span class="op" id="8485142">.</span><span class="ident" id="8485143">G</span><span class="op" id="8485144">.</span><span class="ident" id="8485145">a</span><span class="op" id="8485146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485149">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485152">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485214">b</span><span class="op" id="8485215">.</span><span class="ident" id="8485216">Reset</span><span class="op" id="8485221">(</span><span class="op" id="8485222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485225">err</span>&nbsp;<span class="op" id="8485229">=</span>&nbsp;<span class="ident" id="8485231">enc</span><span class="op" id="8485234">.</span><span class="ident" id="8485235">Encode</span><span class="op" id="8485241">(</span><span class="ident" id="8485242">GobTest0</span><span class="op" id="8485250">{</span><span class="num" id="8485251">17</span><span class="op" id="8485253">,</span>&nbsp;<span class="op" id="8485255">&amp;</span><span class="ident" id="8485256">ByteStruct</span><span class="op" id="8485266">{</span><span class="string" id="8485267">&#39;X&#39;</span><span class="op" id="8485270">}</span><span class="op" id="8485271">}</span><span class="op" id="8485272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8485275">if</span>&nbsp;<span class="ident" id="8485278">err</span>&nbsp;<span class="op" id="8485282">!=</span>&nbsp;<span class="ident" id="8485285">nil</span>&nbsp;<span class="op" id="8485289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485293">t</span><span class="op" id="8485294">.</span><span class="ident" id="8485295">Fatal</span><span class="op" id="8485300">(</span><span class="string" id="8485301">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8485316">,</span>&nbsp;<span class="ident" id="8485318">err</span><span class="op" id="8485321">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485327">y</span>&nbsp;<span class="op" id="8485329">:=</span>&nbsp;<span class="builtinfunc" id="8485332">new</span><span class="op" id="8485335">(</span><span class="ident" id="8485336">GobTest1</span><span class="op" id="8485344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485347">err</span>&nbsp;<span class="op" id="8485351">=</span>&nbsp;<span class="ident" id="8485353">dec</span><span class="op" id="8485356">.</span><span class="ident" id="8485357">Decode</span><span class="op" id="8485363">(</span><span class="ident" id="8485364">y</span><span class="op" id="8485365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8485368">if</span>&nbsp;<span class="ident" id="8485371">err</span>&nbsp;<span class="op" id="8485375">!=</span>&nbsp;<span class="ident" id="8485378">nil</span>&nbsp;<span class="op" id="8485382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485386">t</span><span class="op" id="8485387">.</span><span class="ident" id="8485388">Fatal</span><span class="op" id="8485393">(</span><span class="string" id="8485394">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8485409">,</span>&nbsp;<span class="ident" id="8485411">err</span><span class="op" id="8485414">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8485420">if</span>&nbsp;<span class="ident" id="8485423">y</span><span class="op" id="8485424">.</span><span class="ident" id="8485425">G</span><span class="op" id="8485426">.</span><span class="ident" id="8485427">s</span>&nbsp;<span class="op" id="8485429">!=</span>&nbsp;<span class="string" id="8485432">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="8485438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485442">t</span><span class="op" id="8485443">.</span><span class="ident" id="8485444">Fatalf</span><span class="op" id="8485450">(</span><span class="string" id="8485451">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8485474">,</span>&nbsp;<span class="ident" id="8485476">y</span><span class="op" id="8485477">.</span><span class="ident" id="8485478">G</span><span class="op" id="8485479">.</span><span class="ident" id="8485480">s</span><span class="op" id="8485481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485484">}</span><br>
<span class="lineno"></span><span class="op" id="8485486">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="8485489">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="8485551">func</span>&nbsp;<span class="ident" id="8485556">TestGobEncoderValueEncoder</span><span class="op" id="8485582">(</span><span class="ident" id="8485583">t</span>&nbsp;<span class="op" id="8485585">*</span><span class="ident" id="8485586">testing</span><span class="op" id="8485593">.</span><span class="ident" id="8485594">T</span><span class="op" id="8485595">)</span>&nbsp;<span class="op" id="8485597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485600">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485644">b</span>&nbsp;<span class="op" id="8485646">:=</span>&nbsp;<span class="builtinfunc" id="8485649">new</span><span class="op" id="8485652">(</span><span class="ident" id="8485653">bytes</span><span class="op" id="8485658">.</span><span class="ident" id="8485659">Buffer</span><span class="op" id="8485665">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485668">enc</span>&nbsp;<span class="op" id="8485672">:=</span>&nbsp;<span class="ident" id="8485675">NewEncoder</span><span class="op" id="8485685">(</span><span class="ident" id="8485686">b</span><span class="op" id="8485687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485690">err</span>&nbsp;<span class="op" id="8485694">:=</span>&nbsp;<span class="ident" id="8485697">enc</span><span class="op" id="8485700">.</span><span class="ident" id="8485701">Encode</span><span class="op" id="8485707">(</span><span class="ident" id="8485708">GobTest4</span><span class="op" id="8485716">{</span><span class="num" id="8485717">17</span><span class="op" id="8485719">,</span>&nbsp;<span class="ident" id="8485721">ValueGobber</span><span class="op" id="8485732">(</span><span class="string" id="8485733">&#34;hello&#34;</span><span class="op" id="8485740">)</span><span class="op" id="8485741">,</span>&nbsp;<span class="ident" id="8485743">BinaryValueGobber</span><span class="op" id="8485760">(</span><span class="string" id="8485761">&#34;&#34;</span><span class="op" id="8485779">)</span><span class="op" id="8485780">,</span>&nbsp;<span class="ident" id="8485782">TextValueGobber</span><span class="op" id="8485797">(</span><span class="string" id="8485798">&#34;&#34;</span><span class="op" id="8485815">)</span><span class="op" id="8485816">}</span><span class="op" id="8485817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8485820">if</span>&nbsp;<span class="ident" id="8485823">err</span>&nbsp;<span class="op" id="8485827">!=</span>&nbsp;<span class="ident" id="8485830">nil</span>&nbsp;<span class="op" id="8485834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485838">t</span><span class="op" id="8485839">.</span><span class="ident" id="8485840">Fatal</span><span class="op" id="8485845">(</span><span class="string" id="8485846">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8485861">,</span>&nbsp;<span class="ident" id="8485863">err</span><span class="op" id="8485866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485869">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485872">dec</span>&nbsp;<span class="op" id="8485876">:=</span>&nbsp;<span class="ident" id="8485879">NewDecoder</span><span class="op" id="8485889">(</span><span class="ident" id="8485890">b</span><span class="op" id="8485891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485894">x</span>&nbsp;<span class="op" id="8485896">:=</span>&nbsp;<span class="builtinfunc" id="8485899">new</span><span class="op" id="8485902">(</span><span class="ident" id="8485903">GobTest5</span><span class="op" id="8485911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485914">err</span>&nbsp;<span class="op" id="8485918">=</span>&nbsp;<span class="ident" id="8485920">dec</span><span class="op" id="8485923">.</span><span class="ident" id="8485924">Decode</span><span class="op" id="8485930">(</span><span class="ident" id="8485931">x</span><span class="op" id="8485932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8485935">if</span>&nbsp;<span class="ident" id="8485938">err</span>&nbsp;<span class="op" id="8485942">!=</span>&nbsp;<span class="ident" id="8485945">nil</span>&nbsp;<span class="op" id="8485949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485953">t</span><span class="op" id="8485954">.</span><span class="ident" id="8485955">Fatal</span><span class="op" id="8485960">(</span><span class="string" id="8485961">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8485976">,</span>&nbsp;<span class="ident" id="8485978">err</span><span class="op" id="8485981">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8485987">if</span>&nbsp;<span class="op" id="8485990">*</span><span class="ident" id="8485991">x</span><span class="op" id="8485992">.</span><span class="ident" id="8485993">V</span>&nbsp;<span class="op" id="8485995">!=</span>&nbsp;<span class="string" id="8485998">&#34;hello&#34;</span>&nbsp;<span class="op" id="8486006">||</span>&nbsp;<span class="op" id="8486009">*</span><span class="ident" id="8486010">x</span><span class="op" id="8486011">.</span><span class="ident" id="8486012">BV</span>&nbsp;<span class="op" id="8486015">!=</span>&nbsp;<span class="string" id="8486018">&#34;&#34;</span>&nbsp;<span class="op" id="8486037">||</span>&nbsp;<span class="op" id="8486040">*</span><span class="ident" id="8486041">x</span><span class="op" id="8486042">.</span><span class="ident" id="8486043">TV</span>&nbsp;<span class="op" id="8486046">!=</span>&nbsp;<span class="string" id="8486049">&#34;&#34;</span>&nbsp;<span class="op" id="8486067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486071">t</span><span class="op" id="8486072">.</span><span class="ident" id="8486073">Errorf</span><span class="op" id="8486079">(</span><span class="string" id="8486080">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8486105">,</span>&nbsp;<span class="op" id="8486107">*</span><span class="ident" id="8486108">x</span><span class="op" id="8486109">.</span><span class="ident" id="8486110">V</span><span class="op" id="8486111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486114">}</span><br>
<span class="lineno"></span><span class="op" id="8486116">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="8486119">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8486187">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="8486228">func</span>&nbsp;<span class="ident" id="8486233">TestGobEncoderValueThenPointer</span><span class="op" id="8486263">(</span><span class="ident" id="8486264">t</span>&nbsp;<span class="op" id="8486266">*</span><span class="ident" id="8486267">testing</span><span class="op" id="8486274">.</span><span class="ident" id="8486275">T</span><span class="op" id="8486276">)</span>&nbsp;<span class="op" id="8486278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486281">v</span>&nbsp;<span class="op" id="8486283">:=</span>&nbsp;<span class="ident" id="8486286">ValueGobber</span><span class="op" id="8486297">(</span><span class="string" id="8486298">&#34;forty-two&#34;</span><span class="op" id="8486309">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486312">w</span>&nbsp;<span class="op" id="8486314">:=</span>&nbsp;<span class="ident" id="8486317">ValueGobber</span><span class="op" id="8486328">(</span><span class="string" id="8486329">&#34;six-by-nine&#34;</span><span class="op" id="8486342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486345">bv</span>&nbsp;<span class="op" id="8486348">:=</span>&nbsp;<span class="ident" id="8486351">BinaryValueGobber</span><span class="op" id="8486368">(</span><span class="string" id="8486369">&#34;1nanocentury&#34;</span><span class="op" id="8486383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486386">bw</span>&nbsp;<span class="op" id="8486389">:=</span>&nbsp;<span class="ident" id="8486392">BinaryValueGobber</span><span class="op" id="8486409">(</span><span class="string" id="8486410">&#34;seconds&#34;</span><span class="op" id="8486421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486424">tv</span>&nbsp;<span class="op" id="8486427">:=</span>&nbsp;<span class="ident" id="8486430">TextValueGobber</span><span class="op" id="8486445">(</span><span class="string" id="8486446">&#34;gravitationalacceleration&#34;</span><span class="op" id="8486473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486476">tw</span>&nbsp;<span class="op" id="8486479">:=</span>&nbsp;<span class="ident" id="8486482">TextValueGobber</span><span class="op" id="8486497">(</span><span class="string" id="8486498">&#34;ft/s&#34;</span><span class="op" id="8486510">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8486514">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8486585">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486649">b</span>&nbsp;<span class="op" id="8486651">:=</span>&nbsp;<span class="builtinfunc" id="8486654">new</span><span class="op" id="8486657">(</span><span class="ident" id="8486658">bytes</span><span class="op" id="8486663">.</span><span class="ident" id="8486664">Buffer</span><span class="op" id="8486670">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486673">enc</span>&nbsp;<span class="op" id="8486677">:=</span>&nbsp;<span class="ident" id="8486680">NewEncoder</span><span class="op" id="8486690">(</span><span class="ident" id="8486691">b</span><span class="op" id="8486692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8486695">if</span>&nbsp;<span class="ident" id="8486698">err</span>&nbsp;<span class="op" id="8486702">:=</span>&nbsp;<span class="ident" id="8486705">enc</span><span class="op" id="8486708">.</span><span class="ident" id="8486709">Encode</span><span class="op" id="8486715">(</span><span class="ident" id="8486716">GobTest6</span><span class="op" id="8486724">{</span><span class="num" id="8486725">42</span><span class="op" id="8486727">,</span>&nbsp;<span class="ident" id="8486729">v</span><span class="op" id="8486730">,</span>&nbsp;<span class="op" id="8486732">&amp;</span><span class="ident" id="8486733">w</span><span class="op" id="8486734">,</span>&nbsp;<span class="ident" id="8486736">bv</span><span class="op" id="8486738">,</span>&nbsp;<span class="op" id="8486740">&amp;</span><span class="ident" id="8486741">bw</span><span class="op" id="8486743">,</span>&nbsp;<span class="ident" id="8486745">tv</span><span class="op" id="8486747">,</span>&nbsp;<span class="op" id="8486749">&amp;</span><span class="ident" id="8486750">tw</span><span class="op" id="8486752">}</span><span class="op" id="8486753">)</span><span class="op" id="8486754">;</span>&nbsp;<span class="ident" id="8486756">err</span>&nbsp;<span class="op" id="8486760">!=</span>&nbsp;<span class="ident" id="8486763">nil</span>&nbsp;<span class="op" id="8486767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486771">t</span><span class="op" id="8486772">.</span><span class="ident" id="8486773">Fatal</span><span class="op" id="8486778">(</span><span class="string" id="8486779">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8486794">,</span>&nbsp;<span class="ident" id="8486796">err</span><span class="op" id="8486799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486805">dec</span>&nbsp;<span class="op" id="8486809">:=</span>&nbsp;<span class="ident" id="8486812">NewDecoder</span><span class="op" id="8486822">(</span><span class="ident" id="8486823">b</span><span class="op" id="8486824">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486827">x</span>&nbsp;<span class="op" id="8486829">:=</span>&nbsp;<span class="builtinfunc" id="8486832">new</span><span class="op" id="8486835">(</span><span class="ident" id="8486836">GobTest6</span><span class="op" id="8486844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8486847">if</span>&nbsp;<span class="ident" id="8486850">err</span>&nbsp;<span class="op" id="8486854">:=</span>&nbsp;<span class="ident" id="8486857">dec</span><span class="op" id="8486860">.</span><span class="ident" id="8486861">Decode</span><span class="op" id="8486867">(</span><span class="ident" id="8486868">x</span><span class="op" id="8486869">)</span><span class="op" id="8486870">;</span>&nbsp;<span class="ident" id="8486872">err</span>&nbsp;<span class="op" id="8486876">!=</span>&nbsp;<span class="ident" id="8486879">nil</span>&nbsp;<span class="op" id="8486883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486887">t</span><span class="op" id="8486888">.</span><span class="ident" id="8486889">Fatal</span><span class="op" id="8486894">(</span><span class="string" id="8486895">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8486910">,</span>&nbsp;<span class="ident" id="8486912">err</span><span class="op" id="8486915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8486922">if</span>&nbsp;<span class="ident" id="8486925">got</span><span class="op" id="8486928">,</span>&nbsp;<span class="ident" id="8486930">want</span>&nbsp;<span class="op" id="8486935">:=</span>&nbsp;<span class="ident" id="8486938">x</span><span class="op" id="8486939">.</span><span class="ident" id="8486940">V</span><span class="op" id="8486941">,</span>&nbsp;<span class="ident" id="8486943">v</span><span class="op" id="8486944">;</span>&nbsp;<span class="ident" id="8486946">got</span>&nbsp;<span class="op" id="8486950">!=</span>&nbsp;<span class="ident" id="8486953">want</span>&nbsp;<span class="op" id="8486958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486962">t</span><span class="op" id="8486963">.</span><span class="ident" id="8486964">Errorf</span><span class="op" id="8486970">(</span><span class="string" id="8486971">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8486988">,</span>&nbsp;<span class="ident" id="8486990">got</span><span class="op" id="8486993">,</span>&nbsp;<span class="ident" id="8486995">want</span><span class="op" id="8486999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8487005">if</span>&nbsp;<span class="ident" id="8487008">got</span><span class="op" id="8487011">,</span>&nbsp;<span class="ident" id="8487013">want</span>&nbsp;<span class="op" id="8487018">:=</span>&nbsp;<span class="ident" id="8487021">x</span><span class="op" id="8487022">.</span><span class="ident" id="8487023">W</span><span class="op" id="8487024">,</span>&nbsp;<span class="ident" id="8487026">w</span><span class="op" id="8487027">;</span>&nbsp;<span class="ident" id="8487029">got</span>&nbsp;<span class="op" id="8487033">==</span>&nbsp;<span class="ident" id="8487036">nil</span>&nbsp;<span class="op" id="8487040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487044">t</span><span class="op" id="8487045">.</span><span class="ident" id="8487046">Errorf</span><span class="op" id="8487052">(</span><span class="string" id="8487053">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8487071">,</span>&nbsp;<span class="ident" id="8487073">want</span><span class="op" id="8487077">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487080">}</span>&nbsp;<span class="keyword" id="8487082">else</span>&nbsp;<span class="keyword" id="8487087">if</span>&nbsp;<span class="op" id="8487090">*</span><span class="ident" id="8487091">got</span>&nbsp;<span class="op" id="8487095">!=</span>&nbsp;<span class="ident" id="8487098">want</span>&nbsp;<span class="op" id="8487103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487107">t</span><span class="op" id="8487108">.</span><span class="ident" id="8487109">Errorf</span><span class="op" id="8487115">(</span><span class="string" id="8487116">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8487133">,</span>&nbsp;<span class="op" id="8487135">*</span><span class="ident" id="8487136">got</span><span class="op" id="8487139">,</span>&nbsp;<span class="ident" id="8487141">want</span><span class="op" id="8487145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8487152">if</span>&nbsp;<span class="ident" id="8487155">got</span><span class="op" id="8487158">,</span>&nbsp;<span class="ident" id="8487160">want</span>&nbsp;<span class="op" id="8487165">:=</span>&nbsp;<span class="ident" id="8487168">x</span><span class="op" id="8487169">.</span><span class="ident" id="8487170">BV</span><span class="op" id="8487172">,</span>&nbsp;<span class="ident" id="8487174">bv</span><span class="op" id="8487176">;</span>&nbsp;<span class="ident" id="8487178">got</span>&nbsp;<span class="op" id="8487182">!=</span>&nbsp;<span class="ident" id="8487185">want</span>&nbsp;<span class="op" id="8487190">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487194">t</span><span class="op" id="8487195">.</span><span class="ident" id="8487196">Errorf</span><span class="op" id="8487202">(</span><span class="string" id="8487203">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8487221">,</span>&nbsp;<span class="ident" id="8487223">got</span><span class="op" id="8487226">,</span>&nbsp;<span class="ident" id="8487228">want</span><span class="op" id="8487232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8487238">if</span>&nbsp;<span class="ident" id="8487241">got</span><span class="op" id="8487244">,</span>&nbsp;<span class="ident" id="8487246">want</span>&nbsp;<span class="op" id="8487251">:=</span>&nbsp;<span class="ident" id="8487254">x</span><span class="op" id="8487255">.</span><span class="ident" id="8487256">BW</span><span class="op" id="8487258">,</span>&nbsp;<span class="ident" id="8487260">bw</span><span class="op" id="8487262">;</span>&nbsp;<span class="ident" id="8487264">got</span>&nbsp;<span class="op" id="8487268">==</span>&nbsp;<span class="ident" id="8487271">nil</span>&nbsp;<span class="op" id="8487275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487279">t</span><span class="op" id="8487280">.</span><span class="ident" id="8487281">Errorf</span><span class="op" id="8487287">(</span><span class="string" id="8487288">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8487307">,</span>&nbsp;<span class="ident" id="8487309">want</span><span class="op" id="8487313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487316">}</span>&nbsp;<span class="keyword" id="8487318">else</span>&nbsp;<span class="keyword" id="8487323">if</span>&nbsp;<span class="op" id="8487326">*</span><span class="ident" id="8487327">got</span>&nbsp;<span class="op" id="8487331">!=</span>&nbsp;<span class="ident" id="8487334">want</span>&nbsp;<span class="op" id="8487339">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487343">t</span><span class="op" id="8487344">.</span><span class="ident" id="8487345">Errorf</span><span class="op" id="8487351">(</span><span class="string" id="8487352">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8487370">,</span>&nbsp;<span class="op" id="8487372">*</span><span class="ident" id="8487373">got</span><span class="op" id="8487376">,</span>&nbsp;<span class="ident" id="8487378">want</span><span class="op" id="8487382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8487389">if</span>&nbsp;<span class="ident" id="8487392">got</span><span class="op" id="8487395">,</span>&nbsp;<span class="ident" id="8487397">want</span>&nbsp;<span class="op" id="8487402">:=</span>&nbsp;<span class="ident" id="8487405">x</span><span class="op" id="8487406">.</span><span class="ident" id="8487407">TV</span><span class="op" id="8487409">,</span>&nbsp;<span class="ident" id="8487411">tv</span><span class="op" id="8487413">;</span>&nbsp;<span class="ident" id="8487415">got</span>&nbsp;<span class="op" id="8487419">!=</span>&nbsp;<span class="ident" id="8487422">want</span>&nbsp;<span class="op" id="8487427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487431">t</span><span class="op" id="8487432">.</span><span class="ident" id="8487433">Errorf</span><span class="op" id="8487439">(</span><span class="string" id="8487440">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8487458">,</span>&nbsp;<span class="ident" id="8487460">got</span><span class="op" id="8487463">,</span>&nbsp;<span class="ident" id="8487465">want</span><span class="op" id="8487469">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8487475">if</span>&nbsp;<span class="ident" id="8487478">got</span><span class="op" id="8487481">,</span>&nbsp;<span class="ident" id="8487483">want</span>&nbsp;<span class="op" id="8487488">:=</span>&nbsp;<span class="ident" id="8487491">x</span><span class="op" id="8487492">.</span><span class="ident" id="8487493">TW</span><span class="op" id="8487495">,</span>&nbsp;<span class="ident" id="8487497">tw</span><span class="op" id="8487499">;</span>&nbsp;<span class="ident" id="8487501">got</span>&nbsp;<span class="op" id="8487505">==</span>&nbsp;<span class="ident" id="8487508">nil</span>&nbsp;<span class="op" id="8487512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487516">t</span><span class="op" id="8487517">.</span><span class="ident" id="8487518">Errorf</span><span class="op" id="8487524">(</span><span class="string" id="8487525">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8487544">,</span>&nbsp;<span class="ident" id="8487546">want</span><span class="op" id="8487550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487553">}</span>&nbsp;<span class="keyword" id="8487555">else</span>&nbsp;<span class="keyword" id="8487560">if</span>&nbsp;<span class="op" id="8487563">*</span><span class="ident" id="8487564">got</span>&nbsp;<span class="op" id="8487568">!=</span>&nbsp;<span class="ident" id="8487571">want</span>&nbsp;<span class="op" id="8487576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487580">t</span><span class="op" id="8487581">.</span><span class="ident" id="8487582">Errorf</span><span class="op" id="8487588">(</span><span class="string" id="8487589">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8487607">,</span>&nbsp;<span class="op" id="8487609">*</span><span class="ident" id="8487610">got</span><span class="op" id="8487613">,</span>&nbsp;<span class="ident" id="8487615">want</span><span class="op" id="8487619">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487622">}</span><br>
<span class="lineno"></span><span class="op" id="8487624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8487627">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8487695">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="8487725">func</span>&nbsp;<span class="ident" id="8487730">TestGobEncoderPointerThenValue</span><span class="op" id="8487760">(</span><span class="ident" id="8487761">t</span>&nbsp;<span class="op" id="8487763">*</span><span class="ident" id="8487764">testing</span><span class="op" id="8487771">.</span><span class="ident" id="8487772">T</span><span class="op" id="8487773">)</span>&nbsp;<span class="op" id="8487775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487778">v</span>&nbsp;<span class="op" id="8487780">:=</span>&nbsp;<span class="ident" id="8487783">ValueGobber</span><span class="op" id="8487794">(</span><span class="string" id="8487795">&#34;forty-two&#34;</span><span class="op" id="8487806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487809">w</span>&nbsp;<span class="op" id="8487811">:=</span>&nbsp;<span class="ident" id="8487814">ValueGobber</span><span class="op" id="8487825">(</span><span class="string" id="8487826">&#34;six-by-nine&#34;</span><span class="op" id="8487839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487842">bv</span>&nbsp;<span class="op" id="8487845">:=</span>&nbsp;<span class="ident" id="8487848">BinaryValueGobber</span><span class="op" id="8487865">(</span><span class="string" id="8487866">&#34;1nanocentury&#34;</span><span class="op" id="8487880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487883">bw</span>&nbsp;<span class="op" id="8487886">:=</span>&nbsp;<span class="ident" id="8487889">BinaryValueGobber</span><span class="op" id="8487906">(</span><span class="string" id="8487907">&#34;seconds&#34;</span><span class="op" id="8487918">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487921">tv</span>&nbsp;<span class="op" id="8487924">:=</span>&nbsp;<span class="ident" id="8487927">TextValueGobber</span><span class="op" id="8487942">(</span><span class="string" id="8487943">&#34;gravitationalacceleration&#34;</span><span class="op" id="8487970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487973">tw</span>&nbsp;<span class="op" id="8487976">:=</span>&nbsp;<span class="ident" id="8487979">TextValueGobber</span><span class="op" id="8487994">(</span><span class="string" id="8487995">&#34;ft/s&#34;</span><span class="op" id="8488007">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488011">b</span>&nbsp;<span class="op" id="8488013">:=</span>&nbsp;<span class="builtinfunc" id="8488016">new</span><span class="op" id="8488019">(</span><span class="ident" id="8488020">bytes</span><span class="op" id="8488025">.</span><span class="ident" id="8488026">Buffer</span><span class="op" id="8488032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488035">enc</span>&nbsp;<span class="op" id="8488039">:=</span>&nbsp;<span class="ident" id="8488042">NewEncoder</span><span class="op" id="8488052">(</span><span class="ident" id="8488053">b</span><span class="op" id="8488054">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8488057">if</span>&nbsp;<span class="ident" id="8488060">err</span>&nbsp;<span class="op" id="8488064">:=</span>&nbsp;<span class="ident" id="8488067">enc</span><span class="op" id="8488070">.</span><span class="ident" id="8488071">Encode</span><span class="op" id="8488077">(</span><span class="ident" id="8488078">GobTest7</span><span class="op" id="8488086">{</span><span class="num" id="8488087">42</span><span class="op" id="8488089">,</span>&nbsp;<span class="op" id="8488091">&amp;</span><span class="ident" id="8488092">v</span><span class="op" id="8488093">,</span>&nbsp;<span class="ident" id="8488095">w</span><span class="op" id="8488096">,</span>&nbsp;<span class="op" id="8488098">&amp;</span><span class="ident" id="8488099">bv</span><span class="op" id="8488101">,</span>&nbsp;<span class="ident" id="8488103">bw</span><span class="op" id="8488105">,</span>&nbsp;<span class="op" id="8488107">&amp;</span><span class="ident" id="8488108">tv</span><span class="op" id="8488110">,</span>&nbsp;<span class="ident" id="8488112">tw</span><span class="op" id="8488114">}</span><span class="op" id="8488115">)</span><span class="op" id="8488116">;</span>&nbsp;<span class="ident" id="8488118">err</span>&nbsp;<span class="op" id="8488122">!=</span>&nbsp;<span class="ident" id="8488125">nil</span>&nbsp;<span class="op" id="8488129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488133">t</span><span class="op" id="8488134">.</span><span class="ident" id="8488135">Fatal</span><span class="op" id="8488140">(</span><span class="string" id="8488141">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8488156">,</span>&nbsp;<span class="ident" id="8488158">err</span><span class="op" id="8488161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488167">dec</span>&nbsp;<span class="op" id="8488171">:=</span>&nbsp;<span class="ident" id="8488174">NewDecoder</span><span class="op" id="8488184">(</span><span class="ident" id="8488185">b</span><span class="op" id="8488186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488189">x</span>&nbsp;<span class="op" id="8488191">:=</span>&nbsp;<span class="builtinfunc" id="8488194">new</span><span class="op" id="8488197">(</span><span class="ident" id="8488198">GobTest7</span><span class="op" id="8488206">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8488209">if</span>&nbsp;<span class="ident" id="8488212">err</span>&nbsp;<span class="op" id="8488216">:=</span>&nbsp;<span class="ident" id="8488219">dec</span><span class="op" id="8488222">.</span><span class="ident" id="8488223">Decode</span><span class="op" id="8488229">(</span><span class="ident" id="8488230">x</span><span class="op" id="8488231">)</span><span class="op" id="8488232">;</span>&nbsp;<span class="ident" id="8488234">err</span>&nbsp;<span class="op" id="8488238">!=</span>&nbsp;<span class="ident" id="8488241">nil</span>&nbsp;<span class="op" id="8488245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488249">t</span><span class="op" id="8488250">.</span><span class="ident" id="8488251">Fatal</span><span class="op" id="8488256">(</span><span class="string" id="8488257">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8488272">,</span>&nbsp;<span class="ident" id="8488274">err</span><span class="op" id="8488277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8488284">if</span>&nbsp;<span class="ident" id="8488287">got</span><span class="op" id="8488290">,</span>&nbsp;<span class="ident" id="8488292">want</span>&nbsp;<span class="op" id="8488297">:=</span>&nbsp;<span class="ident" id="8488300">x</span><span class="op" id="8488301">.</span><span class="ident" id="8488302">V</span><span class="op" id="8488303">,</span>&nbsp;<span class="ident" id="8488305">v</span><span class="op" id="8488306">;</span>&nbsp;<span class="ident" id="8488308">got</span>&nbsp;<span class="op" id="8488312">==</span>&nbsp;<span class="ident" id="8488315">nil</span>&nbsp;<span class="op" id="8488319">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488323">t</span><span class="op" id="8488324">.</span><span class="ident" id="8488325">Errorf</span><span class="op" id="8488331">(</span><span class="string" id="8488332">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8488350">,</span>&nbsp;<span class="ident" id="8488352">want</span><span class="op" id="8488356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488359">}</span>&nbsp;<span class="keyword" id="8488361">else</span>&nbsp;<span class="keyword" id="8488366">if</span>&nbsp;<span class="op" id="8488369">*</span><span class="ident" id="8488370">got</span>&nbsp;<span class="op" id="8488374">!=</span>&nbsp;<span class="ident" id="8488377">want</span>&nbsp;<span class="op" id="8488382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488386">t</span><span class="op" id="8488387">.</span><span class="ident" id="8488388">Errorf</span><span class="op" id="8488394">(</span><span class="string" id="8488395">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8488412">,</span>&nbsp;<span class="op" id="8488414">*</span><span class="ident" id="8488415">got</span><span class="op" id="8488418">,</span>&nbsp;<span class="ident" id="8488420">want</span><span class="op" id="8488424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8488430">if</span>&nbsp;<span class="ident" id="8488433">got</span><span class="op" id="8488436">,</span>&nbsp;<span class="ident" id="8488438">want</span>&nbsp;<span class="op" id="8488443">:=</span>&nbsp;<span class="ident" id="8488446">x</span><span class="op" id="8488447">.</span><span class="ident" id="8488448">W</span><span class="op" id="8488449">,</span>&nbsp;<span class="ident" id="8488451">w</span><span class="op" id="8488452">;</span>&nbsp;<span class="ident" id="8488454">got</span>&nbsp;<span class="op" id="8488458">!=</span>&nbsp;<span class="ident" id="8488461">want</span>&nbsp;<span class="op" id="8488466">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488470">t</span><span class="op" id="8488471">.</span><span class="ident" id="8488472">Errorf</span><span class="op" id="8488478">(</span><span class="string" id="8488479">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8488496">,</span>&nbsp;<span class="ident" id="8488498">got</span><span class="op" id="8488501">,</span>&nbsp;<span class="ident" id="8488503">want</span><span class="op" id="8488507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8488514">if</span>&nbsp;<span class="ident" id="8488517">got</span><span class="op" id="8488520">,</span>&nbsp;<span class="ident" id="8488522">want</span>&nbsp;<span class="op" id="8488527">:=</span>&nbsp;<span class="ident" id="8488530">x</span><span class="op" id="8488531">.</span><span class="ident" id="8488532">BV</span><span class="op" id="8488534">,</span>&nbsp;<span class="ident" id="8488536">bv</span><span class="op" id="8488538">;</span>&nbsp;<span class="ident" id="8488540">got</span>&nbsp;<span class="op" id="8488544">==</span>&nbsp;<span class="ident" id="8488547">nil</span>&nbsp;<span class="op" id="8488551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488555">t</span><span class="op" id="8488556">.</span><span class="ident" id="8488557">Errorf</span><span class="op" id="8488563">(</span><span class="string" id="8488564">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8488583">,</span>&nbsp;<span class="ident" id="8488585">want</span><span class="op" id="8488589">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488592">}</span>&nbsp;<span class="keyword" id="8488594">else</span>&nbsp;<span class="keyword" id="8488599">if</span>&nbsp;<span class="op" id="8488602">*</span><span class="ident" id="8488603">got</span>&nbsp;<span class="op" id="8488607">!=</span>&nbsp;<span class="ident" id="8488610">want</span>&nbsp;<span class="op" id="8488615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488619">t</span><span class="op" id="8488620">.</span><span class="ident" id="8488621">Errorf</span><span class="op" id="8488627">(</span><span class="string" id="8488628">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8488646">,</span>&nbsp;<span class="op" id="8488648">*</span><span class="ident" id="8488649">got</span><span class="op" id="8488652">,</span>&nbsp;<span class="ident" id="8488654">want</span><span class="op" id="8488658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8488664">if</span>&nbsp;<span class="ident" id="8488667">got</span><span class="op" id="8488670">,</span>&nbsp;<span class="ident" id="8488672">want</span>&nbsp;<span class="op" id="8488677">:=</span>&nbsp;<span class="ident" id="8488680">x</span><span class="op" id="8488681">.</span><span class="ident" id="8488682">BW</span><span class="op" id="8488684">,</span>&nbsp;<span class="ident" id="8488686">bw</span><span class="op" id="8488688">;</span>&nbsp;<span class="ident" id="8488690">got</span>&nbsp;<span class="op" id="8488694">!=</span>&nbsp;<span class="ident" id="8488697">want</span>&nbsp;<span class="op" id="8488702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488706">t</span><span class="op" id="8488707">.</span><span class="ident" id="8488708">Errorf</span><span class="op" id="8488714">(</span><span class="string" id="8488715">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8488733">,</span>&nbsp;<span class="ident" id="8488735">got</span><span class="op" id="8488738">,</span>&nbsp;<span class="ident" id="8488740">want</span><span class="op" id="8488744">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8488751">if</span>&nbsp;<span class="ident" id="8488754">got</span><span class="op" id="8488757">,</span>&nbsp;<span class="ident" id="8488759">want</span>&nbsp;<span class="op" id="8488764">:=</span>&nbsp;<span class="ident" id="8488767">x</span><span class="op" id="8488768">.</span><span class="ident" id="8488769">TV</span><span class="op" id="8488771">,</span>&nbsp;<span class="ident" id="8488773">tv</span><span class="op" id="8488775">;</span>&nbsp;<span class="ident" id="8488777">got</span>&nbsp;<span class="op" id="8488781">==</span>&nbsp;<span class="ident" id="8488784">nil</span>&nbsp;<span class="op" id="8488788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488792">t</span><span class="op" id="8488793">.</span><span class="ident" id="8488794">Errorf</span><span class="op" id="8488800">(</span><span class="string" id="8488801">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8488820">,</span>&nbsp;<span class="ident" id="8488822">want</span><span class="op" id="8488826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488829">}</span>&nbsp;<span class="keyword" id="8488831">else</span>&nbsp;<span class="keyword" id="8488836">if</span>&nbsp;<span class="op" id="8488839">*</span><span class="ident" id="8488840">got</span>&nbsp;<span class="op" id="8488844">!=</span>&nbsp;<span class="ident" id="8488847">want</span>&nbsp;<span class="op" id="8488852">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488856">t</span><span class="op" id="8488857">.</span><span class="ident" id="8488858">Errorf</span><span class="op" id="8488864">(</span><span class="string" id="8488865">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8488883">,</span>&nbsp;<span class="op" id="8488885">*</span><span class="ident" id="8488886">got</span><span class="op" id="8488889">,</span>&nbsp;<span class="ident" id="8488891">want</span><span class="op" id="8488895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8488901">if</span>&nbsp;<span class="ident" id="8488904">got</span><span class="op" id="8488907">,</span>&nbsp;<span class="ident" id="8488909">want</span>&nbsp;<span class="op" id="8488914">:=</span>&nbsp;<span class="ident" id="8488917">x</span><span class="op" id="8488918">.</span><span class="ident" id="8488919">TW</span><span class="op" id="8488921">,</span>&nbsp;<span class="ident" id="8488923">tw</span><span class="op" id="8488925">;</span>&nbsp;<span class="ident" id="8488927">got</span>&nbsp;<span class="op" id="8488931">!=</span>&nbsp;<span class="ident" id="8488934">want</span>&nbsp;<span class="op" id="8488939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488943">t</span><span class="op" id="8488944">.</span><span class="ident" id="8488945">Errorf</span><span class="op" id="8488951">(</span><span class="string" id="8488952">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8488970">,</span>&nbsp;<span class="ident" id="8488972">got</span><span class="op" id="8488975">,</span>&nbsp;<span class="ident" id="8488977">want</span><span class="op" id="8488981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488984">}</span><br>
<span class="lineno">535</span><span class="op" id="8488986">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8488989">func</span>&nbsp;<span class="ident" id="8488994">TestGobEncoderFieldTypeError</span><span class="op" id="8489022">(</span><span class="ident" id="8489023">t</span>&nbsp;<span class="op" id="8489025">*</span><span class="ident" id="8489026">testing</span><span class="op" id="8489033">.</span><span class="ident" id="8489034">T</span><span class="op" id="8489035">)</span>&nbsp;<span class="op" id="8489037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489040">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489077">b</span>&nbsp;<span class="op" id="8489079">:=</span>&nbsp;<span class="builtinfunc" id="8489082">new</span><span class="op" id="8489085">(</span><span class="ident" id="8489086">bytes</span><span class="op" id="8489091">.</span><span class="ident" id="8489092">Buffer</span><span class="op" id="8489098">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489101">enc</span>&nbsp;<span class="op" id="8489105">:=</span>&nbsp;<span class="ident" id="8489108">NewEncoder</span><span class="op" id="8489118">(</span><span class="ident" id="8489119">b</span><span class="op" id="8489120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489123">err</span>&nbsp;<span class="op" id="8489127">:=</span>&nbsp;<span class="ident" id="8489130">enc</span><span class="op" id="8489133">.</span><span class="ident" id="8489134">Encode</span><span class="op" id="8489140">(</span><span class="ident" id="8489141">GobTest1</span><span class="op" id="8489149">{</span><span class="num" id="8489150">17</span><span class="op" id="8489152">,</span>&nbsp;<span class="op" id="8489154">&amp;</span><span class="ident" id="8489155">StringStruct</span><span class="op" id="8489167">{</span><span class="string" id="8489168">&#34;ABC&#34;</span><span class="op" id="8489173">}</span><span class="op" id="8489174">}</span><span class="op" id="8489175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489178">if</span>&nbsp;<span class="ident" id="8489181">err</span>&nbsp;<span class="op" id="8489185">!=</span>&nbsp;<span class="ident" id="8489188">nil</span>&nbsp;<span class="op" id="8489192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489196">t</span><span class="op" id="8489197">.</span><span class="ident" id="8489198">Fatal</span><span class="op" id="8489203">(</span><span class="string" id="8489204">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8489219">,</span>&nbsp;<span class="ident" id="8489221">err</span><span class="op" id="8489224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489227">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489230">dec</span>&nbsp;<span class="op" id="8489234">:=</span>&nbsp;<span class="ident" id="8489237">NewDecoder</span><span class="op" id="8489247">(</span><span class="ident" id="8489248">b</span><span class="op" id="8489249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489252">x</span>&nbsp;<span class="op" id="8489254">:=</span>&nbsp;<span class="op" id="8489257">&amp;</span><span class="ident" id="8489258">GobTest2</span><span class="op" id="8489266">{</span><span class="op" id="8489267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489270">err</span>&nbsp;<span class="op" id="8489274">=</span>&nbsp;<span class="ident" id="8489276">dec</span><span class="op" id="8489279">.</span><span class="ident" id="8489280">Decode</span><span class="op" id="8489286">(</span><span class="ident" id="8489287">x</span><span class="op" id="8489288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489291">if</span>&nbsp;<span class="ident" id="8489294">err</span>&nbsp;<span class="op" id="8489298">==</span>&nbsp;<span class="ident" id="8489301">nil</span>&nbsp;<span class="op" id="8489305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489309">t</span><span class="op" id="8489310">.</span><span class="ident" id="8489311">Fatal</span><span class="op" id="8489316">(</span><span class="string" id="8489317">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="8489387">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489390">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489393">if</span>&nbsp;<span class="ident" id="8489396">strings</span><span class="op" id="8489403">.</span><span class="ident" id="8489404">Index</span><span class="op" id="8489409">(</span><span class="ident" id="8489410">err</span><span class="op" id="8489413">.</span><span class="ident" id="8489414">Error</span><span class="op" id="8489419">(</span><span class="op" id="8489420">)</span><span class="op" id="8489421">,</span>&nbsp;<span class="string" id="8489423">&#34;type&#34;</span><span class="op" id="8489429">)</span>&nbsp;<span class="op" id="8489431">&lt;</span>&nbsp;<span class="num" id="8489433">0</span>&nbsp;<span class="op" id="8489435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489439">t</span><span class="op" id="8489440">.</span><span class="ident" id="8489441">Fatal</span><span class="op" id="8489446">(</span><span class="string" id="8489447">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8489473">,</span>&nbsp;<span class="ident" id="8489475">err</span><span class="op" id="8489478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489484">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489521">b</span><span class="op" id="8489522">.</span><span class="ident" id="8489523">Reset</span><span class="op" id="8489528">(</span><span class="op" id="8489529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489532">err</span>&nbsp;<span class="op" id="8489536">=</span>&nbsp;<span class="ident" id="8489538">enc</span><span class="op" id="8489541">.</span><span class="ident" id="8489542">Encode</span><span class="op" id="8489548">(</span><span class="ident" id="8489549">GobTest2</span><span class="op" id="8489557">{</span><span class="num" id="8489558">17</span><span class="op" id="8489560">,</span>&nbsp;<span class="string" id="8489562">&#34;ABC&#34;</span><span class="op" id="8489567">}</span><span class="op" id="8489568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489571">if</span>&nbsp;<span class="ident" id="8489574">err</span>&nbsp;<span class="op" id="8489578">!=</span>&nbsp;<span class="ident" id="8489581">nil</span>&nbsp;<span class="op" id="8489585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489589">t</span><span class="op" id="8489590">.</span><span class="ident" id="8489591">Fatal</span><span class="op" id="8489596">(</span><span class="string" id="8489597">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8489612">,</span>&nbsp;<span class="ident" id="8489614">err</span><span class="op" id="8489617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489620">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489623">y</span>&nbsp;<span class="op" id="8489625">:=</span>&nbsp;<span class="op" id="8489628">&amp;</span><span class="ident" id="8489629">GobTest1</span><span class="op" id="8489637">{</span><span class="op" id="8489638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489641">err</span>&nbsp;<span class="op" id="8489645">=</span>&nbsp;<span class="ident" id="8489647">dec</span><span class="op" id="8489650">.</span><span class="ident" id="8489651">Decode</span><span class="op" id="8489657">(</span><span class="ident" id="8489658">y</span><span class="op" id="8489659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489662">if</span>&nbsp;<span class="ident" id="8489665">err</span>&nbsp;<span class="op" id="8489669">==</span>&nbsp;<span class="ident" id="8489672">nil</span>&nbsp;<span class="op" id="8489676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489680">t</span><span class="op" id="8489681">.</span><span class="ident" id="8489682">Fatal</span><span class="op" id="8489687">(</span><span class="string" id="8489688">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="8489758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489761">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489764">if</span>&nbsp;<span class="ident" id="8489767">strings</span><span class="op" id="8489774">.</span><span class="ident" id="8489775">Index</span><span class="op" id="8489780">(</span><span class="ident" id="8489781">err</span><span class="op" id="8489784">.</span><span class="ident" id="8489785">Error</span><span class="op" id="8489790">(</span><span class="op" id="8489791">)</span><span class="op" id="8489792">,</span>&nbsp;<span class="string" id="8489794">&#34;type&#34;</span><span class="op" id="8489800">)</span>&nbsp;<span class="op" id="8489802">&lt;</span>&nbsp;<span class="num" id="8489804">0</span>&nbsp;<span class="op" id="8489806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489810">t</span><span class="op" id="8489811">.</span><span class="ident" id="8489812">Fatal</span><span class="op" id="8489817">(</span><span class="string" id="8489818">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8489844">,</span>&nbsp;<span class="ident" id="8489846">err</span><span class="op" id="8489849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489852">}</span><br>
<span class="lineno"></span><span class="op" id="8489854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="8489857">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="8489942">func</span>&nbsp;<span class="ident" id="8489947">TestGobEncoderStructSingleton</span><span class="op" id="8489976">(</span><span class="ident" id="8489977">t</span>&nbsp;<span class="op" id="8489979">*</span><span class="ident" id="8489980">testing</span><span class="op" id="8489987">.</span><span class="ident" id="8489988">T</span><span class="op" id="8489989">)</span>&nbsp;<span class="op" id="8489991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489994">b</span>&nbsp;<span class="op" id="8489996">:=</span>&nbsp;<span class="builtinfunc" id="8489999">new</span><span class="op" id="8490002">(</span><span class="ident" id="8490003">bytes</span><span class="op" id="8490008">.</span><span class="ident" id="8490009">Buffer</span><span class="op" id="8490015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490018">enc</span>&nbsp;<span class="op" id="8490022">:=</span>&nbsp;<span class="ident" id="8490025">NewEncoder</span><span class="op" id="8490035">(</span><span class="ident" id="8490036">b</span><span class="op" id="8490037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490040">err</span>&nbsp;<span class="op" id="8490044">:=</span>&nbsp;<span class="ident" id="8490047">enc</span><span class="op" id="8490050">.</span><span class="ident" id="8490051">Encode</span><span class="op" id="8490057">(</span><span class="op" id="8490058">&amp;</span><span class="ident" id="8490059">ByteStruct</span><span class="op" id="8490069">{</span><span class="string" id="8490070">&#39;A&#39;</span><span class="op" id="8490073">}</span><span class="op" id="8490074">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490077">if</span>&nbsp;<span class="ident" id="8490080">err</span>&nbsp;<span class="op" id="8490084">!=</span>&nbsp;<span class="ident" id="8490087">nil</span>&nbsp;<span class="op" id="8490091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490095">t</span><span class="op" id="8490096">.</span><span class="ident" id="8490097">Fatal</span><span class="op" id="8490102">(</span><span class="string" id="8490103">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8490118">,</span>&nbsp;<span class="ident" id="8490120">err</span><span class="op" id="8490123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490129">dec</span>&nbsp;<span class="op" id="8490133">:=</span>&nbsp;<span class="ident" id="8490136">NewDecoder</span><span class="op" id="8490146">(</span><span class="ident" id="8490147">b</span><span class="op" id="8490148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490151">x</span>&nbsp;<span class="op" id="8490153">:=</span>&nbsp;<span class="builtinfunc" id="8490156">new</span><span class="op" id="8490159">(</span><span class="ident" id="8490160">ByteStruct</span><span class="op" id="8490170">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490173">err</span>&nbsp;<span class="op" id="8490177">=</span>&nbsp;<span class="ident" id="8490179">dec</span><span class="op" id="8490182">.</span><span class="ident" id="8490183">Decode</span><span class="op" id="8490189">(</span><span class="ident" id="8490190">x</span><span class="op" id="8490191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490194">if</span>&nbsp;<span class="ident" id="8490197">err</span>&nbsp;<span class="op" id="8490201">!=</span>&nbsp;<span class="ident" id="8490204">nil</span>&nbsp;<span class="op" id="8490208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490212">t</span><span class="op" id="8490213">.</span><span class="ident" id="8490214">Fatal</span><span class="op" id="8490219">(</span><span class="string" id="8490220">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8490235">,</span>&nbsp;<span class="ident" id="8490237">err</span><span class="op" id="8490240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490246">if</span>&nbsp;<span class="ident" id="8490249">x</span><span class="op" id="8490250">.</span><span class="ident" id="8490251">a</span>&nbsp;<span class="op" id="8490253">!=</span>&nbsp;<span class="string" id="8490256">&#39;A&#39;</span>&nbsp;<span class="op" id="8490260">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490264">t</span><span class="op" id="8490265">.</span><span class="ident" id="8490266">Errorf</span><span class="op" id="8490272">(</span><span class="string" id="8490273">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8490294">,</span>&nbsp;<span class="ident" id="8490296">x</span><span class="op" id="8490297">.</span><span class="ident" id="8490298">a</span><span class="op" id="8490299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490302">}</span><br>
<span class="lineno"></span><span class="op" id="8490304">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8490307">func</span>&nbsp;<span class="ident" id="8490312">TestGobEncoderNonStructSingleton</span><span class="op" id="8490344">(</span><span class="ident" id="8490345">t</span>&nbsp;<span class="op" id="8490347">*</span><span class="ident" id="8490348">testing</span><span class="op" id="8490355">.</span><span class="ident" id="8490356">T</span><span class="op" id="8490357">)</span>&nbsp;<span class="op" id="8490359">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490362">b</span>&nbsp;<span class="op" id="8490364">:=</span>&nbsp;<span class="builtinfunc" id="8490367">new</span><span class="op" id="8490370">(</span><span class="ident" id="8490371">bytes</span><span class="op" id="8490376">.</span><span class="ident" id="8490377">Buffer</span><span class="op" id="8490383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490386">enc</span>&nbsp;<span class="op" id="8490390">:=</span>&nbsp;<span class="ident" id="8490393">NewEncoder</span><span class="op" id="8490403">(</span><span class="ident" id="8490404">b</span><span class="op" id="8490405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490408">var</span>&nbsp;<span class="ident" id="8490412">g</span>&nbsp;<span class="ident" id="8490414">Gobber</span>&nbsp;<span class="op" id="8490421">=</span>&nbsp;<span class="num" id="8490423">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490429">err</span>&nbsp;<span class="op" id="8490433">:=</span>&nbsp;<span class="ident" id="8490436">enc</span><span class="op" id="8490439">.</span><span class="ident" id="8490440">Encode</span><span class="op" id="8490446">(</span><span class="op" id="8490447">&amp;</span><span class="ident" id="8490448">g</span><span class="op" id="8490449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490452">if</span>&nbsp;<span class="ident" id="8490455">err</span>&nbsp;<span class="op" id="8490459">!=</span>&nbsp;<span class="ident" id="8490462">nil</span>&nbsp;<span class="op" id="8490466">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490470">t</span><span class="op" id="8490471">.</span><span class="ident" id="8490472">Fatal</span><span class="op" id="8490477">(</span><span class="string" id="8490478">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8490493">,</span>&nbsp;<span class="ident" id="8490495">err</span><span class="op" id="8490498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490504">dec</span>&nbsp;<span class="op" id="8490508">:=</span>&nbsp;<span class="ident" id="8490511">NewDecoder</span><span class="op" id="8490521">(</span><span class="ident" id="8490522">b</span><span class="op" id="8490523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490526">var</span>&nbsp;<span class="ident" id="8490530">x</span>&nbsp;<span class="ident" id="8490532">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490540">err</span>&nbsp;<span class="op" id="8490544">=</span>&nbsp;<span class="ident" id="8490546">dec</span><span class="op" id="8490549">.</span><span class="ident" id="8490550">Decode</span><span class="op" id="8490556">(</span><span class="op" id="8490557">&amp;</span><span class="ident" id="8490558">x</span><span class="op" id="8490559">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490562">if</span>&nbsp;<span class="ident" id="8490565">err</span>&nbsp;<span class="op" id="8490569">!=</span>&nbsp;<span class="ident" id="8490572">nil</span>&nbsp;<span class="op" id="8490576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490580">t</span><span class="op" id="8490581">.</span><span class="ident" id="8490582">Fatal</span><span class="op" id="8490587">(</span><span class="string" id="8490588">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8490603">,</span>&nbsp;<span class="ident" id="8490605">err</span><span class="op" id="8490608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490614">if</span>&nbsp;<span class="ident" id="8490617">x</span>&nbsp;<span class="op" id="8490619">!=</span>&nbsp;<span class="num" id="8490622">1234</span>&nbsp;<span class="op" id="8490627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490631">t</span><span class="op" id="8490632">.</span><span class="ident" id="8490633">Errorf</span><span class="op" id="8490639">(</span><span class="string" id="8490640">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8490662">,</span>&nbsp;<span class="ident" id="8490664">x</span><span class="op" id="8490665">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490668">}</span><br>
<span class="lineno"></span><span class="op" id="8490670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8490673">func</span>&nbsp;<span class="ident" id="8490678">TestGobEncoderIgnoreStructField</span><span class="op" id="8490709">(</span><span class="ident" id="8490710">t</span>&nbsp;<span class="op" id="8490712">*</span><span class="ident" id="8490713">testing</span><span class="op" id="8490720">.</span><span class="ident" id="8490721">T</span><span class="op" id="8490722">)</span>&nbsp;<span class="op" id="8490724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490727">b</span>&nbsp;<span class="op" id="8490729">:=</span>&nbsp;<span class="builtinfunc" id="8490732">new</span><span class="op" id="8490735">(</span><span class="ident" id="8490736">bytes</span><span class="op" id="8490741">.</span><span class="ident" id="8490742">Buffer</span><span class="op" id="8490748">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8490751">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490789">enc</span>&nbsp;<span class="op" id="8490793">:=</span>&nbsp;<span class="ident" id="8490796">NewEncoder</span><span class="op" id="8490806">(</span><span class="ident" id="8490807">b</span><span class="op" id="8490808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490811">err</span>&nbsp;<span class="op" id="8490815">:=</span>&nbsp;<span class="ident" id="8490818">enc</span><span class="op" id="8490821">.</span><span class="ident" id="8490822">Encode</span><span class="op" id="8490828">(</span><span class="ident" id="8490829">GobTest0</span><span class="op" id="8490837">{</span><span class="num" id="8490838">17</span><span class="op" id="8490840">,</span>&nbsp;<span class="op" id="8490842">&amp;</span><span class="ident" id="8490843">ByteStruct</span><span class="op" id="8490853">{</span><span class="string" id="8490854">&#39;A&#39;</span><span class="op" id="8490857">}</span><span class="op" id="8490858">}</span><span class="op" id="8490859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490862">if</span>&nbsp;<span class="ident" id="8490865">err</span>&nbsp;<span class="op" id="8490869">!=</span>&nbsp;<span class="ident" id="8490872">nil</span>&nbsp;<span class="op" id="8490876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490880">t</span><span class="op" id="8490881">.</span><span class="ident" id="8490882">Fatal</span><span class="op" id="8490887">(</span><span class="string" id="8490888">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8490903">,</span>&nbsp;<span class="ident" id="8490905">err</span><span class="op" id="8490908">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490914">dec</span>&nbsp;<span class="op" id="8490918">:=</span>&nbsp;<span class="ident" id="8490921">NewDecoder</span><span class="op" id="8490931">(</span><span class="ident" id="8490932">b</span><span class="op" id="8490933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490936">x</span>&nbsp;<span class="op" id="8490938">:=</span>&nbsp;<span class="builtinfunc" id="8490941">new</span><span class="op" id="8490944">(</span><span class="ident" id="8490945">GobTestIgnoreEncoder</span><span class="op" id="8490965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490968">err</span>&nbsp;<span class="op" id="8490972">=</span>&nbsp;<span class="ident" id="8490974">dec</span><span class="op" id="8490977">.</span><span class="ident" id="8490978">Decode</span><span class="op" id="8490984">(</span><span class="ident" id="8490985">x</span><span class="op" id="8490986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490989">if</span>&nbsp;<span class="ident" id="8490992">err</span>&nbsp;<span class="op" id="8490996">!=</span>&nbsp;<span class="ident" id="8490999">nil</span>&nbsp;<span class="op" id="8491003">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491007">t</span><span class="op" id="8491008">.</span><span class="ident" id="8491009">Fatal</span><span class="op" id="8491014">(</span><span class="string" id="8491015">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8491030">,</span>&nbsp;<span class="ident" id="8491032">err</span><span class="op" id="8491035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8491041">if</span>&nbsp;<span class="ident" id="8491044">x</span><span class="op" id="8491045">.</span><span class="ident" id="8491046">X</span>&nbsp;<span class="op" id="8491048">!=</span>&nbsp;<span class="num" id="8491051">17</span>&nbsp;<span class="op" id="8491054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491058">t</span><span class="op" id="8491059">.</span><span class="ident" id="8491060">Errorf</span><span class="op" id="8491066">(</span><span class="string" id="8491067">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8491087">,</span>&nbsp;<span class="ident" id="8491089">x</span><span class="op" id="8491090">.</span><span class="ident" id="8491091">X</span><span class="op" id="8491092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491095">}</span><br>
<span class="lineno">625</span><span class="op" id="8491097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8491100">func</span>&nbsp;<span class="ident" id="8491105">TestGobEncoderIgnoreNonStructField</span><span class="op" id="8491139">(</span><span class="ident" id="8491140">t</span>&nbsp;<span class="op" id="8491142">*</span><span class="ident" id="8491143">testing</span><span class="op" id="8491150">.</span><span class="ident" id="8491151">T</span><span class="op" id="8491152">)</span>&nbsp;<span class="op" id="8491154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491157">b</span>&nbsp;<span class="op" id="8491159">:=</span>&nbsp;<span class="builtinfunc" id="8491162">new</span><span class="op" id="8491165">(</span><span class="ident" id="8491166">bytes</span><span class="op" id="8491171">.</span><span class="ident" id="8491172">Buffer</span><span class="op" id="8491178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8491181">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491219">enc</span>&nbsp;<span class="op" id="8491223">:=</span>&nbsp;<span class="ident" id="8491226">NewEncoder</span><span class="op" id="8491236">(</span><span class="ident" id="8491237">b</span><span class="op" id="8491238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491241">gobber</span>&nbsp;<span class="op" id="8491248">:=</span>&nbsp;<span class="ident" id="8491251">Gobber</span><span class="op" id="8491257">(</span><span class="num" id="8491258">23</span><span class="op" id="8491260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491263">bgobber</span>&nbsp;<span class="op" id="8491271">:=</span>&nbsp;<span class="ident" id="8491274">BinaryGobber</span><span class="op" id="8491286">(</span><span class="num" id="8491287">24</span><span class="op" id="8491289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491292">tgobber</span>&nbsp;<span class="op" id="8491300">:=</span>&nbsp;<span class="ident" id="8491303">TextGobber</span><span class="op" id="8491313">(</span><span class="num" id="8491314">25</span><span class="op" id="8491316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491319">err</span>&nbsp;<span class="op" id="8491323">:=</span>&nbsp;<span class="ident" id="8491326">enc</span><span class="op" id="8491329">.</span><span class="ident" id="8491330">Encode</span><span class="op" id="8491336">(</span><span class="ident" id="8491337">GobTest3</span><span class="op" id="8491345">{</span><span class="num" id="8491346">17</span><span class="op" id="8491348">,</span>&nbsp;<span class="op" id="8491350">&amp;</span><span class="ident" id="8491351">gobber</span><span class="op" id="8491357">,</span>&nbsp;<span class="op" id="8491359">&amp;</span><span class="ident" id="8491360">bgobber</span><span class="op" id="8491367">,</span>&nbsp;<span class="op" id="8491369">&amp;</span><span class="ident" id="8491370">tgobber</span><span class="op" id="8491377">}</span><span class="op" id="8491378">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8491381">if</span>&nbsp;<span class="ident" id="8491384">err</span>&nbsp;<span class="op" id="8491388">!=</span>&nbsp;<span class="ident" id="8491391">nil</span>&nbsp;<span class="op" id="8491395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491399">t</span><span class="op" id="8491400">.</span><span class="ident" id="8491401">Fatal</span><span class="op" id="8491406">(</span><span class="string" id="8491407">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8491422">,</span>&nbsp;<span class="ident" id="8491424">err</span><span class="op" id="8491427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491433">dec</span>&nbsp;<span class="op" id="8491437">:=</span>&nbsp;<span class="ident" id="8491440">NewDecoder</span><span class="op" id="8491450">(</span><span class="ident" id="8491451">b</span><span class="op" id="8491452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491455">x</span>&nbsp;<span class="op" id="8491457">:=</span>&nbsp;<span class="builtinfunc" id="8491460">new</span><span class="op" id="8491463">(</span><span class="ident" id="8491464">GobTestIgnoreEncoder</span><span class="op" id="8491484">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491487">err</span>&nbsp;<span class="op" id="8491491">=</span>&nbsp;<span class="ident" id="8491493">dec</span><span class="op" id="8491496">.</span><span class="ident" id="8491497">Decode</span><span class="op" id="8491503">(</span><span class="ident" id="8491504">x</span><span class="op" id="8491505">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8491508">if</span>&nbsp;<span class="ident" id="8491511">err</span>&nbsp;<span class="op" id="8491515">!=</span>&nbsp;<span class="ident" id="8491518">nil</span>&nbsp;<span class="op" id="8491522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491526">t</span><span class="op" id="8491527">.</span><span class="ident" id="8491528">Fatal</span><span class="op" id="8491533">(</span><span class="string" id="8491534">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8491549">,</span>&nbsp;<span class="ident" id="8491551">err</span><span class="op" id="8491554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8491560">if</span>&nbsp;<span class="ident" id="8491563">x</span><span class="op" id="8491564">.</span><span class="ident" id="8491565">X</span>&nbsp;<span class="op" id="8491567">!=</span>&nbsp;<span class="num" id="8491570">17</span>&nbsp;<span class="op" id="8491573">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491577">t</span><span class="op" id="8491578">.</span><span class="ident" id="8491579">Errorf</span><span class="op" id="8491585">(</span><span class="string" id="8491586">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8491606">,</span>&nbsp;<span class="ident" id="8491608">x</span><span class="op" id="8491609">.</span><span class="ident" id="8491610">X</span><span class="op" id="8491611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491614">}</span><br>
<span class="lineno"></span><span class="op" id="8491616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8491619">func</span>&nbsp;<span class="ident" id="8491624">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="8491654">(</span><span class="ident" id="8491655">t</span>&nbsp;<span class="op" id="8491657">*</span><span class="ident" id="8491658">testing</span><span class="op" id="8491665">.</span><span class="ident" id="8491666">T</span><span class="op" id="8491667">)</span>&nbsp;<span class="op" id="8491669">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491672">b</span>&nbsp;<span class="op" id="8491674">:=</span>&nbsp;<span class="builtinfunc" id="8491677">new</span><span class="op" id="8491680">(</span><span class="ident" id="8491681">bytes</span><span class="op" id="8491686">.</span><span class="ident" id="8491687">Buffer</span><span class="op" id="8491693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8491696">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491734">enc</span>&nbsp;<span class="op" id="8491738">:=</span>&nbsp;<span class="ident" id="8491741">NewEncoder</span><span class="op" id="8491751">(</span><span class="ident" id="8491752">b</span><span class="op" id="8491753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491756">err</span>&nbsp;<span class="op" id="8491760">:=</span>&nbsp;<span class="ident" id="8491763">enc</span><span class="op" id="8491766">.</span><span class="ident" id="8491767">Encode</span><span class="op" id="8491773">(</span><span class="ident" id="8491774">GobTest0</span><span class="op" id="8491782">{</span><span class="ident" id="8491783">X</span><span class="op" id="8491784">:</span>&nbsp;<span class="num" id="8491786">18</span><span class="op" id="8491788">}</span><span class="op" id="8491789">)</span>&nbsp;<span class="comment" id="8491791">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8491804">if</span>&nbsp;<span class="ident" id="8491807">err</span>&nbsp;<span class="op" id="8491811">!=</span>&nbsp;<span class="ident" id="8491814">nil</span>&nbsp;<span class="op" id="8491818">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491822">t</span><span class="op" id="8491823">.</span><span class="ident" id="8491824">Fatal</span><span class="op" id="8491829">(</span><span class="string" id="8491830">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8491845">,</span>&nbsp;<span class="ident" id="8491847">err</span><span class="op" id="8491850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491856">dec</span>&nbsp;<span class="op" id="8491860">:=</span>&nbsp;<span class="ident" id="8491863">NewDecoder</span><span class="op" id="8491873">(</span><span class="ident" id="8491874">b</span><span class="op" id="8491875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491878">x</span>&nbsp;<span class="op" id="8491880">:=</span>&nbsp;<span class="builtinfunc" id="8491883">new</span><span class="op" id="8491886">(</span><span class="ident" id="8491887">GobTest0</span><span class="op" id="8491895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491898">err</span>&nbsp;<span class="op" id="8491902">=</span>&nbsp;<span class="ident" id="8491904">dec</span><span class="op" id="8491907">.</span><span class="ident" id="8491908">Decode</span><span class="op" id="8491914">(</span><span class="ident" id="8491915">x</span><span class="op" id="8491916">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8491919">if</span>&nbsp;<span class="ident" id="8491922">err</span>&nbsp;<span class="op" id="8491926">!=</span>&nbsp;<span class="ident" id="8491929">nil</span>&nbsp;<span class="op" id="8491933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491937">t</span><span class="op" id="8491938">.</span><span class="ident" id="8491939">Fatal</span><span class="op" id="8491944">(</span><span class="string" id="8491945">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8491960">,</span>&nbsp;<span class="ident" id="8491962">err</span><span class="op" id="8491965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8491971">if</span>&nbsp;<span class="ident" id="8491974">x</span><span class="op" id="8491975">.</span><span class="ident" id="8491976">X</span>&nbsp;<span class="op" id="8491978">!=</span>&nbsp;<span class="num" id="8491981">18</span>&nbsp;<span class="op" id="8491984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491988">t</span><span class="op" id="8491989">.</span><span class="ident" id="8491990">Errorf</span><span class="op" id="8491996">(</span><span class="string" id="8491997">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8492024">,</span>&nbsp;<span class="ident" id="8492026">x</span><span class="op" id="8492027">.</span><span class="ident" id="8492028">X</span><span class="op" id="8492029">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492035">if</span>&nbsp;<span class="ident" id="8492038">x</span><span class="op" id="8492039">.</span><span class="ident" id="8492040">G</span>&nbsp;<span class="op" id="8492042">!=</span>&nbsp;<span class="ident" id="8492045">nil</span>&nbsp;<span class="op" id="8492049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492053">t</span><span class="op" id="8492054">.</span><span class="ident" id="8492055">Errorf</span><span class="op" id="8492061">(</span><span class="string" id="8492062">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8492090">,</span>&nbsp;<span class="ident" id="8492092">x</span><span class="op" id="8492093">.</span><span class="ident" id="8492094">G</span><span class="op" id="8492095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492098">}</span><br>
<span class="lineno"></span><span class="op" id="8492100">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="8492103">type</span>&nbsp;<span class="ident" id="8492108">gobDecoderBug0</span>&nbsp;<span class="keyword" id="8492123">struct</span>&nbsp;<span class="op" id="8492130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492133">foo</span><span class="op" id="8492136">,</span>&nbsp;<span class="ident" id="8492138">bar</span>&nbsp;<span class="builtintype" id="8492142">string</span><br>
<span class="lineno"></span><span class="op" id="8492149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="8492152">func</span>&nbsp;<span class="op" id="8492157">(</span><span class="ident" id="8492158">br</span>&nbsp;<span class="op" id="8492161">*</span><span class="ident" id="8492162">gobDecoderBug0</span><span class="op" id="8492176">)</span>&nbsp;<span class="ident" id="8492178">String</span><span class="op" id="8492184">(</span><span class="op" id="8492185">)</span>&nbsp;<span class="builtintype" id="8492187">string</span>&nbsp;<span class="op" id="8492194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492197">return</span>&nbsp;<span class="ident" id="8492204">br</span><span class="op" id="8492206">.</span><span class="ident" id="8492207">foo</span>&nbsp;<span class="op" id="8492211">+</span>&nbsp;<span class="string" id="8492213">&#34;-&#34;</span>&nbsp;<span class="op" id="8492217">+</span>&nbsp;<span class="ident" id="8492219">br</span><span class="op" id="8492221">.</span><span class="ident" id="8492222">bar</span><br>
<span class="lineno"></span><span class="op" id="8492226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8492229">func</span>&nbsp;<span class="op" id="8492234">(</span><span class="ident" id="8492235">br</span>&nbsp;<span class="op" id="8492238">*</span><span class="ident" id="8492239">gobDecoderBug0</span><span class="op" id="8492253">)</span>&nbsp;<span class="ident" id="8492255">GobEncode</span><span class="op" id="8492264">(</span><span class="op" id="8492265">)</span>&nbsp;<span class="op" id="8492267">(</span><span class="op" id="8492268">[</span><span class="op" id="8492269">]</span><span class="builtintype" id="8492270">byte</span><span class="op" id="8492274">,</span>&nbsp;<span class="builtintype" id="8492276">error</span><span class="op" id="8492281">)</span>&nbsp;<span class="op" id="8492283">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492286">return</span>&nbsp;<span class="op" id="8492293">[</span><span class="op" id="8492294">]</span><span class="builtintype" id="8492295">byte</span><span class="op" id="8492299">(</span><span class="ident" id="8492300">br</span><span class="op" id="8492302">.</span><span class="ident" id="8492303">String</span><span class="op" id="8492309">(</span><span class="op" id="8492310">)</span><span class="op" id="8492311">)</span><span class="op" id="8492312">,</span>&nbsp;<span class="ident" id="8492314">nil</span><br>
<span class="lineno"></span><span class="op" id="8492318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8492321">func</span>&nbsp;<span class="op" id="8492326">(</span><span class="ident" id="8492327">br</span>&nbsp;<span class="op" id="8492330">*</span><span class="ident" id="8492331">gobDecoderBug0</span><span class="op" id="8492345">)</span>&nbsp;<span class="ident" id="8492347">GobDecode</span><span class="op" id="8492356">(</span><span class="ident" id="8492357">b</span>&nbsp;<span class="op" id="8492359">[</span><span class="op" id="8492360">]</span><span class="builtintype" id="8492361">byte</span><span class="op" id="8492365">)</span>&nbsp;<span class="builtintype" id="8492367">error</span>&nbsp;<span class="op" id="8492373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492376">br</span><span class="op" id="8492378">.</span><span class="ident" id="8492379">foo</span>&nbsp;<span class="op" id="8492383">=</span>&nbsp;<span class="string" id="8492385">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492392">br</span><span class="op" id="8492394">.</span><span class="ident" id="8492395">bar</span>&nbsp;<span class="op" id="8492399">=</span>&nbsp;<span class="string" id="8492401">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492408">return</span>&nbsp;<span class="ident" id="8492415">nil</span><br>
<span class="lineno"></span><span class="op" id="8492419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8492422">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="8492488">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="8492510">func</span>&nbsp;<span class="ident" id="8492515">TestGobEncoderExtraIndirect</span><span class="op" id="8492542">(</span><span class="ident" id="8492543">t</span>&nbsp;<span class="op" id="8492545">*</span><span class="ident" id="8492546">testing</span><span class="op" id="8492553">.</span><span class="ident" id="8492554">T</span><span class="op" id="8492555">)</span>&nbsp;<span class="op" id="8492557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492560">gdb</span>&nbsp;<span class="op" id="8492564">:=</span>&nbsp;<span class="op" id="8492567">&amp;</span><span class="ident" id="8492568">gobDecoderBug0</span><span class="op" id="8492582">{</span><span class="string" id="8492583">&#34;foo&#34;</span><span class="op" id="8492588">,</span>&nbsp;<span class="string" id="8492590">&#34;bar&#34;</span><span class="op" id="8492595">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492598">buf</span>&nbsp;<span class="op" id="8492602">:=</span>&nbsp;<span class="builtinfunc" id="8492605">new</span><span class="op" id="8492608">(</span><span class="ident" id="8492609">bytes</span><span class="op" id="8492614">.</span><span class="ident" id="8492615">Buffer</span><span class="op" id="8492621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492624">e</span>&nbsp;<span class="op" id="8492626">:=</span>&nbsp;<span class="ident" id="8492629">NewEncoder</span><span class="op" id="8492639">(</span><span class="ident" id="8492640">buf</span><span class="op" id="8492643">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492646">if</span>&nbsp;<span class="ident" id="8492649">err</span>&nbsp;<span class="op" id="8492653">:=</span>&nbsp;<span class="ident" id="8492656">e</span><span class="op" id="8492657">.</span><span class="ident" id="8492658">Encode</span><span class="op" id="8492664">(</span><span class="ident" id="8492665">gdb</span><span class="op" id="8492668">)</span><span class="op" id="8492669">;</span>&nbsp;<span class="ident" id="8492671">err</span>&nbsp;<span class="op" id="8492675">!=</span>&nbsp;<span class="ident" id="8492678">nil</span>&nbsp;<span class="op" id="8492682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492686">t</span><span class="op" id="8492687">.</span><span class="ident" id="8492688">Fatalf</span><span class="op" id="8492694">(</span><span class="string" id="8492695">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="8492707">,</span>&nbsp;<span class="ident" id="8492709">err</span><span class="op" id="8492712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492718">d</span>&nbsp;<span class="op" id="8492720">:=</span>&nbsp;<span class="ident" id="8492723">NewDecoder</span><span class="op" id="8492733">(</span><span class="ident" id="8492734">buf</span><span class="op" id="8492737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492740">var</span>&nbsp;<span class="ident" id="8492744">got</span>&nbsp;<span class="op" id="8492748">*</span><span class="ident" id="8492749">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492765">if</span>&nbsp;<span class="ident" id="8492768">err</span>&nbsp;<span class="op" id="8492772">:=</span>&nbsp;<span class="ident" id="8492775">d</span><span class="op" id="8492776">.</span><span class="ident" id="8492777">Decode</span><span class="op" id="8492783">(</span><span class="op" id="8492784">&amp;</span><span class="ident" id="8492785">got</span><span class="op" id="8492788">)</span><span class="op" id="8492789">;</span>&nbsp;<span class="ident" id="8492791">err</span>&nbsp;<span class="op" id="8492795">!=</span>&nbsp;<span class="ident" id="8492798">nil</span>&nbsp;<span class="op" id="8492802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492806">t</span><span class="op" id="8492807">.</span><span class="ident" id="8492808">Fatalf</span><span class="op" id="8492814">(</span><span class="string" id="8492815">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8492827">,</span>&nbsp;<span class="ident" id="8492829">err</span><span class="op" id="8492832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492838">if</span>&nbsp;<span class="ident" id="8492841">got</span><span class="op" id="8492844">.</span><span class="ident" id="8492845">foo</span>&nbsp;<span class="op" id="8492849">!=</span>&nbsp;<span class="ident" id="8492852">gdb</span><span class="op" id="8492855">.</span><span class="ident" id="8492856">foo</span>&nbsp;<span class="op" id="8492860">||</span>&nbsp;<span class="ident" id="8492863">got</span><span class="op" id="8492866">.</span><span class="ident" id="8492867">bar</span>&nbsp;<span class="op" id="8492871">!=</span>&nbsp;<span class="ident" id="8492874">gdb</span><span class="op" id="8492877">.</span><span class="ident" id="8492878">bar</span>&nbsp;<span class="op" id="8492882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492886">t</span><span class="op" id="8492887">.</span><span class="ident" id="8492888">Errorf</span><span class="op" id="8492894">(</span><span class="string" id="8492895">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8492914">,</span>&nbsp;<span class="ident" id="8492916">got</span><span class="op" id="8492919">,</span>&nbsp;<span class="ident" id="8492921">gdb</span><span class="op" id="8492924">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492927">}</span><br>
<span class="lineno"></span><span class="op" id="8492929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8492932">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="8492996">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="8493065">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="8493127">type</span>&nbsp;<span class="ident" id="8493132">isZeroBug</span>&nbsp;<span class="keyword" id="8493142">struct</span>&nbsp;<span class="op" id="8493149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493152">T</span>&nbsp;<span class="ident" id="8493154">time</span><span class="op" id="8493158">.</span><span class="ident" id="8493159">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493165">S</span>&nbsp;<span class="builtintype" id="8493167">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493175">I</span>&nbsp;<span class="builtintype" id="8493177">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493182">A</span>&nbsp;<span class="ident" id="8493184">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493200">F</span>&nbsp;<span class="ident" id="8493202">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="8493221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8493224">type</span>&nbsp;<span class="ident" id="8493229">isZeroBugArray</span>&nbsp;<span class="op" id="8493244">[</span><span class="num" id="8493245">2</span><span class="op" id="8493246">]</span><span class="builtintype" id="8493247">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="8493254">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="8493314">func</span>&nbsp;<span class="op" id="8493319">(</span><span class="ident" id="8493320">a</span>&nbsp;<span class="ident" id="8493322">isZeroBugArray</span><span class="op" id="8493336">)</span>&nbsp;<span class="ident" id="8493338">GobEncode</span><span class="op" id="8493347">(</span><span class="op" id="8493348">)</span>&nbsp;<span class="op" id="8493350">(</span><span class="ident" id="8493351">b</span>&nbsp;<span class="op" id="8493353">[</span><span class="op" id="8493354">]</span><span class="builtintype" id="8493355">byte</span><span class="op" id="8493359">,</span>&nbsp;<span class="ident" id="8493361">e</span>&nbsp;<span class="builtintype" id="8493363">error</span><span class="op" id="8493368">)</span>&nbsp;<span class="op" id="8493370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493373">b</span>&nbsp;<span class="op" id="8493375">=</span>&nbsp;<span class="builtinfunc" id="8493377">append</span><span class="op" id="8493383">(</span><span class="ident" id="8493384">b</span><span class="op" id="8493385">,</span>&nbsp;<span class="ident" id="8493387">a</span><span class="op" id="8493388">[</span><span class="op" id="8493389">:</span><span class="op" id="8493390">]</span><span class="op" id="8493391">...</span><span class="op" id="8493394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493397">return</span>&nbsp;<span class="ident" id="8493404">b</span><span class="op" id="8493405">,</span>&nbsp;<span class="ident" id="8493407">nil</span><br>
<span class="lineno">725</span><span class="op" id="8493411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8493414">func</span>&nbsp;<span class="op" id="8493419">(</span><span class="ident" id="8493420">a</span>&nbsp;<span class="op" id="8493422">*</span><span class="ident" id="8493423">isZeroBugArray</span><span class="op" id="8493437">)</span>&nbsp;<span class="ident" id="8493439">GobDecode</span><span class="op" id="8493448">(</span><span class="ident" id="8493449">data</span>&nbsp;<span class="op" id="8493454">[</span><span class="op" id="8493455">]</span><span class="builtintype" id="8493456">byte</span><span class="op" id="8493460">)</span>&nbsp;<span class="builtintype" id="8493462">error</span>&nbsp;<span class="op" id="8493468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493471">if</span>&nbsp;<span class="builtinfunc" id="8493474">len</span><span class="op" id="8493477">(</span><span class="ident" id="8493478">data</span><span class="op" id="8493482">)</span>&nbsp;<span class="op" id="8493484">!=</span>&nbsp;<span class="builtinfunc" id="8493487">len</span><span class="op" id="8493490">(</span><span class="ident" id="8493491">a</span><span class="op" id="8493492">)</span>&nbsp;<span class="op" id="8493494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493498">return</span>&nbsp;<span class="ident" id="8493505">io</span><span class="op" id="8493507">.</span><span class="ident" id="8493508">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8493513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493516">a</span><span class="op" id="8493517">[</span><span class="num" id="8493518">0</span><span class="op" id="8493519">]</span>&nbsp;<span class="op" id="8493521">=</span>&nbsp;<span class="ident" id="8493523">data</span><span class="op" id="8493527">[</span><span class="num" id="8493528">0</span><span class="op" id="8493529">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493532">a</span><span class="op" id="8493533">[</span><span class="num" id="8493534">1</span><span class="op" id="8493535">]</span>&nbsp;<span class="op" id="8493537">=</span>&nbsp;<span class="ident" id="8493539">data</span><span class="op" id="8493543">[</span><span class="num" id="8493544">1</span><span class="op" id="8493545">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493548">return</span>&nbsp;<span class="ident" id="8493555">nil</span><br>
<span class="lineno"></span><span class="op" id="8493559">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="8493562">type</span>&nbsp;<span class="ident" id="8493567">isZeroBugInterface</span>&nbsp;<span class="keyword" id="8493586">struct</span>&nbsp;<span class="op" id="8493593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493596">I</span>&nbsp;<span class="keyword" id="8493598">interface</span><span class="op" id="8493607">{</span><span class="op" id="8493608">}</span><br>
<span class="lineno"></span><span class="op" id="8493610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="8493613">func</span>&nbsp;<span class="op" id="8493618">(</span><span class="ident" id="8493619">i</span>&nbsp;<span class="ident" id="8493621">isZeroBugInterface</span><span class="op" id="8493639">)</span>&nbsp;<span class="ident" id="8493641">GobEncode</span><span class="op" id="8493650">(</span><span class="op" id="8493651">)</span>&nbsp;<span class="op" id="8493653">(</span><span class="ident" id="8493654">b</span>&nbsp;<span class="op" id="8493656">[</span><span class="op" id="8493657">]</span><span class="builtintype" id="8493658">byte</span><span class="op" id="8493662">,</span>&nbsp;<span class="ident" id="8493664">e</span>&nbsp;<span class="builtintype" id="8493666">error</span><span class="op" id="8493671">)</span>&nbsp;<span class="op" id="8493673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493676">return</span>&nbsp;<span class="op" id="8493683">[</span><span class="op" id="8493684">]</span><span class="builtintype" id="8493685">byte</span><span class="op" id="8493689">{</span><span class="op" id="8493690">}</span><span class="op" id="8493691">,</span>&nbsp;<span class="ident" id="8493693">nil</span><br>
<span class="lineno"></span><span class="op" id="8493697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8493700">func</span>&nbsp;<span class="op" id="8493705">(</span><span class="ident" id="8493706">i</span>&nbsp;<span class="op" id="8493708">*</span><span class="ident" id="8493709">isZeroBugInterface</span><span class="op" id="8493727">)</span>&nbsp;<span class="ident" id="8493729">GobDecode</span><span class="op" id="8493738">(</span><span class="ident" id="8493739">data</span>&nbsp;<span class="op" id="8493744">[</span><span class="op" id="8493745">]</span><span class="builtintype" id="8493746">byte</span><span class="op" id="8493750">)</span>&nbsp;<span class="builtintype" id="8493752">error</span>&nbsp;<span class="op" id="8493758">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493761">return</span>&nbsp;<span class="ident" id="8493768">nil</span><br>
<span class="lineno"></span><span class="op" id="8493772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8493775">func</span>&nbsp;<span class="ident" id="8493780">TestGobEncodeIsZero</span><span class="op" id="8493799">(</span><span class="ident" id="8493800">t</span>&nbsp;<span class="op" id="8493802">*</span><span class="ident" id="8493803">testing</span><span class="op" id="8493810">.</span><span class="ident" id="8493811">T</span><span class="op" id="8493812">)</span>&nbsp;<span class="op" id="8493814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493817">x</span>&nbsp;<span class="op" id="8493819">:=</span>&nbsp;<span class="ident" id="8493822">isZeroBug</span><span class="op" id="8493831">{</span><span class="ident" id="8493832">time</span><span class="op" id="8493836">.</span><span class="ident" id="8493837">Now</span><span class="op" id="8493840">(</span><span class="op" id="8493841">)</span><span class="op" id="8493842">,</span>&nbsp;<span class="string" id="8493844">&#34;hello&#34;</span><span class="op" id="8493851">,</span>&nbsp;<span class="op" id="8493853">-</span><span class="num" id="8493854">55</span><span class="op" id="8493856">,</span>&nbsp;<span class="ident" id="8493858">isZeroBugArray</span><span class="op" id="8493872">{</span><span class="num" id="8493873">1</span><span class="op" id="8493874">,</span>&nbsp;<span class="num" id="8493876">2</span><span class="op" id="8493877">}</span><span class="op" id="8493878">,</span>&nbsp;<span class="ident" id="8493880">isZeroBugInterface</span><span class="op" id="8493898">{</span><span class="op" id="8493899">}</span><span class="op" id="8493900">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493903">b</span>&nbsp;<span class="op" id="8493905">:=</span>&nbsp;<span class="builtinfunc" id="8493908">new</span><span class="op" id="8493911">(</span><span class="ident" id="8493912">bytes</span><span class="op" id="8493917">.</span><span class="ident" id="8493918">Buffer</span><span class="op" id="8493924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493927">enc</span>&nbsp;<span class="op" id="8493931">:=</span>&nbsp;<span class="ident" id="8493934">NewEncoder</span><span class="op" id="8493944">(</span><span class="ident" id="8493945">b</span><span class="op" id="8493946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493949">err</span>&nbsp;<span class="op" id="8493953">:=</span>&nbsp;<span class="ident" id="8493956">enc</span><span class="op" id="8493959">.</span><span class="ident" id="8493960">Encode</span><span class="op" id="8493966">(</span><span class="ident" id="8493967">x</span><span class="op" id="8493968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493971">if</span>&nbsp;<span class="ident" id="8493974">err</span>&nbsp;<span class="op" id="8493978">!=</span>&nbsp;<span class="ident" id="8493981">nil</span>&nbsp;<span class="op" id="8493985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493989">t</span><span class="op" id="8493990">.</span><span class="ident" id="8493991">Fatal</span><span class="op" id="8493996">(</span><span class="string" id="8493997">&#34;encode:&#34;</span><span class="op" id="8494006">,</span>&nbsp;<span class="ident" id="8494008">err</span><span class="op" id="8494011">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494017">var</span>&nbsp;<span class="ident" id="8494021">y</span>&nbsp;<span class="ident" id="8494023">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494034">dec</span>&nbsp;<span class="op" id="8494038">:=</span>&nbsp;<span class="ident" id="8494041">NewDecoder</span><span class="op" id="8494051">(</span><span class="ident" id="8494052">b</span><span class="op" id="8494053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494056">err</span>&nbsp;<span class="op" id="8494060">=</span>&nbsp;<span class="ident" id="8494062">dec</span><span class="op" id="8494065">.</span><span class="ident" id="8494066">Decode</span><span class="op" id="8494072">(</span><span class="op" id="8494073">&amp;</span><span class="ident" id="8494074">y</span><span class="op" id="8494075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494078">if</span>&nbsp;<span class="ident" id="8494081">err</span>&nbsp;<span class="op" id="8494085">!=</span>&nbsp;<span class="ident" id="8494088">nil</span>&nbsp;<span class="op" id="8494092">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494096">t</span><span class="op" id="8494097">.</span><span class="ident" id="8494098">Fatal</span><span class="op" id="8494103">(</span><span class="string" id="8494104">&#34;decode:&#34;</span><span class="op" id="8494113">,</span>&nbsp;<span class="ident" id="8494115">err</span><span class="op" id="8494118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494124">if</span>&nbsp;<span class="ident" id="8494127">x</span>&nbsp;<span class="op" id="8494129">!=</span>&nbsp;<span class="ident" id="8494132">y</span>&nbsp;<span class="op" id="8494134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494138">t</span><span class="op" id="8494139">.</span><span class="ident" id="8494140">Fatalf</span><span class="op" id="8494146">(</span><span class="string" id="8494147">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8494157">,</span>&nbsp;<span class="ident" id="8494159">x</span><span class="op" id="8494160">,</span>&nbsp;<span class="ident" id="8494162">y</span><span class="op" id="8494163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494166">}</span><br>
<span class="lineno">765</span><span class="op" id="8494168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8494171">func</span>&nbsp;<span class="ident" id="8494176">TestGobEncodePtrError</span><span class="op" id="8494197">(</span><span class="ident" id="8494198">t</span>&nbsp;<span class="op" id="8494200">*</span><span class="ident" id="8494201">testing</span><span class="op" id="8494208">.</span><span class="ident" id="8494209">T</span><span class="op" id="8494210">)</span>&nbsp;<span class="op" id="8494212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494215">var</span>&nbsp;<span class="ident" id="8494219">err</span>&nbsp;<span class="builtintype" id="8494223">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494230">b</span>&nbsp;<span class="op" id="8494232">:=</span>&nbsp;<span class="builtinfunc" id="8494235">new</span><span class="op" id="8494238">(</span><span class="ident" id="8494239">bytes</span><span class="op" id="8494244">.</span><span class="ident" id="8494245">Buffer</span><span class="op" id="8494251">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494254">enc</span>&nbsp;<span class="op" id="8494258">:=</span>&nbsp;<span class="ident" id="8494261">NewEncoder</span><span class="op" id="8494271">(</span><span class="ident" id="8494272">b</span><span class="op" id="8494273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494276">err</span>&nbsp;<span class="op" id="8494280">=</span>&nbsp;<span class="ident" id="8494282">enc</span><span class="op" id="8494285">.</span><span class="ident" id="8494286">Encode</span><span class="op" id="8494292">(</span><span class="op" id="8494293">&amp;</span><span class="ident" id="8494294">err</span><span class="op" id="8494297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494300">if</span>&nbsp;<span class="ident" id="8494303">err</span>&nbsp;<span class="op" id="8494307">!=</span>&nbsp;<span class="ident" id="8494310">nil</span>&nbsp;<span class="op" id="8494314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494318">t</span><span class="op" id="8494319">.</span><span class="ident" id="8494320">Fatal</span><span class="op" id="8494325">(</span><span class="string" id="8494326">&#34;encode:&#34;</span><span class="op" id="8494335">,</span>&nbsp;<span class="ident" id="8494337">err</span><span class="op" id="8494340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494343">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494346">dec</span>&nbsp;<span class="op" id="8494350">:=</span>&nbsp;<span class="ident" id="8494353">NewDecoder</span><span class="op" id="8494363">(</span><span class="ident" id="8494364">b</span><span class="op" id="8494365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494368">err2</span>&nbsp;<span class="op" id="8494373">:=</span>&nbsp;<span class="ident" id="8494376">fmt</span><span class="op" id="8494379">.</span><span class="ident" id="8494380">Errorf</span><span class="op" id="8494386">(</span><span class="string" id="8494387">&#34;foo&#34;</span><span class="op" id="8494392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494395">err</span>&nbsp;<span class="op" id="8494399">=</span>&nbsp;<span class="ident" id="8494401">dec</span><span class="op" id="8494404">.</span><span class="ident" id="8494405">Decode</span><span class="op" id="8494411">(</span><span class="op" id="8494412">&amp;</span><span class="ident" id="8494413">err2</span><span class="op" id="8494417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494420">if</span>&nbsp;<span class="ident" id="8494423">err</span>&nbsp;<span class="op" id="8494427">!=</span>&nbsp;<span class="ident" id="8494430">nil</span>&nbsp;<span class="op" id="8494434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494438">t</span><span class="op" id="8494439">.</span><span class="ident" id="8494440">Fatal</span><span class="op" id="8494445">(</span><span class="string" id="8494446">&#34;decode:&#34;</span><span class="op" id="8494455">,</span>&nbsp;<span class="ident" id="8494457">err</span><span class="op" id="8494460">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494466">if</span>&nbsp;<span class="ident" id="8494469">err2</span>&nbsp;<span class="op" id="8494474">!=</span>&nbsp;<span class="ident" id="8494477">nil</span>&nbsp;<span class="op" id="8494481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494485">t</span><span class="op" id="8494486">.</span><span class="ident" id="8494487">Fatalf</span><span class="op" id="8494493">(</span><span class="string" id="8494494">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8494516">,</span>&nbsp;<span class="ident" id="8494518">err2</span><span class="op" id="8494522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494525">}</span><br>
<span class="lineno"></span><span class="op" id="8494527">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="8494530">func</span>&nbsp;<span class="ident" id="8494535">TestNetIP</span><span class="op" id="8494544">(</span><span class="ident" id="8494545">t</span>&nbsp;<span class="op" id="8494547">*</span><span class="ident" id="8494548">testing</span><span class="op" id="8494555">.</span><span class="ident" id="8494556">T</span><span class="op" id="8494557">)</span>&nbsp;<span class="op" id="8494559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8494562">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494605">enc</span>&nbsp;<span class="op" id="8494609">:=</span>&nbsp;<span class="op" id="8494612">[</span><span class="op" id="8494613">]</span><span class="builtintype" id="8494614">byte</span><span class="op" id="8494618">{</span><span class="num" id="8494619">0x07</span><span class="op" id="8494623">,</span>&nbsp;<span class="num" id="8494625">0x0a</span><span class="op" id="8494629">,</span>&nbsp;<span class="num" id="8494631">0x00</span><span class="op" id="8494635">,</span>&nbsp;<span class="num" id="8494637">0x04</span><span class="op" id="8494641">,</span>&nbsp;<span class="num" id="8494643">0x01</span><span class="op" id="8494647">,</span>&nbsp;<span class="num" id="8494649">0x02</span><span class="op" id="8494653">,</span>&nbsp;<span class="num" id="8494655">0x03</span><span class="op" id="8494659">,</span>&nbsp;<span class="num" id="8494661">0x04</span><span class="op" id="8494665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494669">var</span>&nbsp;<span class="ident" id="8494673">ip</span>&nbsp;<span class="ident" id="8494676">net</span><span class="op" id="8494679">.</span><span class="ident" id="8494680">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494684">err</span>&nbsp;<span class="op" id="8494688">:=</span>&nbsp;<span class="ident" id="8494691">NewDecoder</span><span class="op" id="8494701">(</span><span class="ident" id="8494702">bytes</span><span class="op" id="8494707">.</span><span class="ident" id="8494708">NewReader</span><span class="op" id="8494717">(</span><span class="ident" id="8494718">enc</span><span class="op" id="8494721">)</span><span class="op" id="8494722">)</span><span class="op" id="8494723">.</span><span class="ident" id="8494724">Decode</span><span class="op" id="8494730">(</span><span class="op" id="8494731">&amp;</span><span class="ident" id="8494732">ip</span><span class="op" id="8494734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494737">if</span>&nbsp;<span class="ident" id="8494740">err</span>&nbsp;<span class="op" id="8494744">!=</span>&nbsp;<span class="ident" id="8494747">nil</span>&nbsp;<span class="op" id="8494751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494755">t</span><span class="op" id="8494756">.</span><span class="ident" id="8494757">Fatalf</span><span class="op" id="8494763">(</span><span class="string" id="8494764">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8494776">,</span>&nbsp;<span class="ident" id="8494778">err</span><span class="op" id="8494781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494784">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494787">if</span>&nbsp;<span class="ident" id="8494790">ip</span><span class="op" id="8494792">.</span><span class="ident" id="8494793">String</span><span class="op" id="8494799">(</span><span class="op" id="8494800">)</span>&nbsp;<span class="op" id="8494802">!=</span>&nbsp;<span class="string" id="8494805">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="8494815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494819">t</span><span class="op" id="8494820">.</span><span class="ident" id="8494821">Errorf</span><span class="op" id="8494827">(</span><span class="string" id="8494828">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="8494857">,</span>&nbsp;<span class="ident" id="8494859">ip</span><span class="op" id="8494861">.</span><span class="ident" id="8494862">String</span><span class="op" id="8494868">(</span><span class="op" id="8494869">)</span><span class="op" id="8494870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494873">}</span><br>
<span class="lineno"></span><span class="op" id="8494875">}</span>
</div>
</body>
</html>
