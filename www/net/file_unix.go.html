<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2587474">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2587529">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2587583">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2587634">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2587699">package</span>&nbsp;<span class="ident" id="2587707">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2587712">import</span>&nbsp;<span class="op" id="2587719">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2587722">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2587728">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2587738">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2587741">func</span>&nbsp;<span class="ident" id="2587746">newFileFD</span><span class="op" id="2587755">(</span><span class="ident" id="2587756">f</span>&nbsp;<span class="op" id="2587758">*</span><span class="ident" id="2587759"><a href="/net/file_unix.go.html#2587722">os</a></span><span class="op" id="2587761">.</span><span class="ident" id="2587762">File</span><span class="op" id="2587766">)</span>&nbsp;<span class="op" id="2587768">(</span><span class="op" id="2587769">*</span><span class="ident" id="2587770"><a href="/net/fd_unix.go.html#2575420">netFD</a></span><span class="op" id="2587775">,</span>&nbsp;<span class="builtintype" id="2587777">error</span><span class="op" id="2587782">)</span>&nbsp;<span class="op" id="2587784">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587787">fd</span><span class="op" id="2587789">,</span>&nbsp;<span class="ident" id="2587791">err</span>&nbsp;<span class="op" id="2587795">:=</span>&nbsp;<span class="ident" id="2587798"><a href="/net/fd_unix.go.html#2585385">dupCloseOnExec</a></span><span class="op" id="2587812">(</span><span class="builtintype" id="2587813">int</span><span class="op" id="2587816">(</span><span class="ident" id="2587817"><a href="/net/file_unix.go.html#2587756">f</a></span><span class="op" id="2587818">.</span><span class="ident" id="2587819">Fd</span><span class="op" id="2587821">(</span><span class="op" id="2587822">)</span><span class="op" id="2587823">)</span><span class="op" id="2587824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587827">if</span>&nbsp;<span class="ident" id="2587830"><a href="/net/file_unix.go.html#2587791">err</a></span>&nbsp;<span class="op" id="2587834">!=</span>&nbsp;<span class="ident" id="2587837">nil</span>&nbsp;<span class="op" id="2587841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587845">return</span>&nbsp;<span class="ident" id="2587852">nil</span><span class="op" id="2587855">,</span>&nbsp;<span class="ident" id="2587857"><a href="/net/file_unix.go.html#2587722">os</a></span><span class="op" id="2587859">.</span><span class="ident" id="2587860">NewSyscallError</span><span class="op" id="2587875">(</span><span class="string" id="2587876">&#34;dup&#34;</span><span class="op" id="2587881">,</span>&nbsp;<span class="ident" id="2587883"><a href="/net/file_unix.go.html#2587791">err</a></span><span class="op" id="2587886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2587889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587893">if</span>&nbsp;<span class="ident" id="2587896"><a href="/net/file_unix.go.html#2587791">err</a></span>&nbsp;<span class="op" id="2587900">=</span>&nbsp;<span class="ident" id="2587902"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2587909">.</span><span class="ident" id="2587910">SetNonblock</span><span class="op" id="2587921">(</span><span class="ident" id="2587922"><a href="/net/file_unix.go.html#2587787">fd</a></span><span class="op" id="2587924">,</span>&nbsp;<span class="ident" id="2587926">true</span><span class="op" id="2587930">)</span><span class="op" id="2587931">;</span>&nbsp;<span class="ident" id="2587933"><a href="/net/file_unix.go.html#2587791">err</a></span>&nbsp;<span class="op" id="2587937">!=</span>&nbsp;<span class="ident" id="2587940">nil</span>&nbsp;<span class="op" id="2587944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587948"><a href="/net/fd_unix.go.html#2587250">closesocket</a></span><span class="op" id="2587959">(</span><span class="ident" id="2587960"><a href="/net/file_unix.go.html#2587787">fd</a></span><span class="op" id="2587962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2587966">return</span>&nbsp;<span class="ident" id="2587973">nil</span><span class="op" id="2587976">,</span>&nbsp;<span class="ident" id="2587978"><a href="/net/file_unix.go.html#2587791">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2587983">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2587987">sotype</span><span class="op" id="2587993">,</span>&nbsp;<span class="ident" id="2587995"><a href="/net/file_unix.go.html#2587791">err</a></span>&nbsp;<span class="op" id="2587999">:=</span>&nbsp;<span class="ident" id="2588002"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588009">.</span><span class="ident" id="2588010">GetsockoptInt</span><span class="op" id="2588023">(</span><span class="ident" id="2588024"><a href="/net/file_unix.go.html#2587787">fd</a></span><span class="op" id="2588026">,</span>&nbsp;<span class="ident" id="2588028"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588035">.</span><span class="ident" id="2588036">SOL_SOCKET</span><span class="op" id="2588046">,</span>&nbsp;<span class="ident" id="2588048"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588055">.</span><span class="ident" id="2588056">SO_TYPE</span><span class="op" id="2588063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588066">if</span>&nbsp;<span class="ident" id="2588069"><a href="/net/file_unix.go.html#2587791">err</a></span>&nbsp;<span class="op" id="2588073">!=</span>&nbsp;<span class="ident" id="2588076">nil</span>&nbsp;<span class="op" id="2588080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588084"><a href="/net/fd_unix.go.html#2587250">closesocket</a></span><span class="op" id="2588095">(</span><span class="ident" id="2588096"><a href="/net/file_unix.go.html#2587787">fd</a></span><span class="op" id="2588098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588102">return</span>&nbsp;<span class="ident" id="2588109">nil</span><span class="op" id="2588112">,</span>&nbsp;<span class="ident" id="2588114"><a href="/net/file_unix.go.html#2587722">os</a></span><span class="op" id="2588116">.</span><span class="ident" id="2588117">NewSyscallError</span><span class="op" id="2588132">(</span><span class="string" id="2588133">&#34;getsockopt&#34;</span><span class="op" id="2588145">,</span>&nbsp;<span class="ident" id="2588147"><a href="/net/file_unix.go.html#2587791">err</a></span><span class="op" id="2588150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588153">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588157">family</span>&nbsp;<span class="op" id="2588164">:=</span>&nbsp;<span class="ident" id="2588167"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588174">.</span><span class="ident" id="2588175">AF_UNSPEC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588186">toAddr</span>&nbsp;<span class="op" id="2588193">:=</span>&nbsp;<span class="ident" id="2588196"><a href="/net/tcpsock_posix.go.html#2693333">sockaddrToTCP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588211">lsa</span><span class="op" id="2588214">,</span>&nbsp;<span class="ident" id="2588216">_</span>&nbsp;<span class="op" id="2588218">:=</span>&nbsp;<span class="ident" id="2588221"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588228">.</span><span class="ident" id="2588229">Getsockname</span><span class="op" id="2588240">(</span><span class="ident" id="2588241"><a href="/net/file_unix.go.html#2587787">fd</a></span><span class="op" id="2588243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588246">switch</span>&nbsp;<span class="ident" id="2588253"><a href="/net/file_unix.go.html#2588211">lsa</a></span><span class="op" id="2588256">.</span><span class="op" id="2588257">(</span><span class="keyword" id="2588258">type</span><span class="op" id="2588262">)</span>&nbsp;<span class="op" id="2588264">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588267">default</span><span class="op" id="2588274">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588278"><a href="/net/fd_unix.go.html#2587250">closesocket</a></span><span class="op" id="2588289">(</span><span class="ident" id="2588290"><a href="/net/file_unix.go.html#2587787">fd</a></span><span class="op" id="2588292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588296">return</span>&nbsp;<span class="ident" id="2588303">nil</span><span class="op" id="2588306">,</span>&nbsp;<span class="ident" id="2588308"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588315">.</span><span class="ident" id="2588316">EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588324">case</span>&nbsp;<span class="op" id="2588329">*</span><span class="ident" id="2588330"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588337">.</span><span class="ident" id="2588338">SockaddrInet4</span><span class="op" id="2588351">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588355"><a href="/net/file_unix.go.html#2588157">family</a></span>&nbsp;<span class="op" id="2588362">=</span>&nbsp;<span class="ident" id="2588364"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588371">.</span><span class="ident" id="2588372">AF_INET</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588382">if</span>&nbsp;<span class="ident" id="2588385"><a href="/net/file_unix.go.html#2587987">sotype</a></span>&nbsp;<span class="op" id="2588392">==</span>&nbsp;<span class="ident" id="2588395"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588402">.</span><span class="ident" id="2588403">SOCK_DGRAM</span>&nbsp;<span class="op" id="2588414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588419"><a href="/net/file_unix.go.html#2588186">toAddr</a></span>&nbsp;<span class="op" id="2588426">=</span>&nbsp;<span class="ident" id="2588428"><a href="/net/udpsock_posix.go.html#2705391">sockaddrToUDP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588444">}</span>&nbsp;<span class="keyword" id="2588446">else</span>&nbsp;<span class="keyword" id="2588451">if</span>&nbsp;<span class="ident" id="2588454"><a href="/net/file_unix.go.html#2587987">sotype</a></span>&nbsp;<span class="op" id="2588461">==</span>&nbsp;<span class="ident" id="2588464"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588471">.</span><span class="ident" id="2588472">SOCK_RAW</span>&nbsp;<span class="op" id="2588481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588486"><a href="/net/file_unix.go.html#2588186">toAddr</a></span>&nbsp;<span class="op" id="2588493">=</span>&nbsp;<span class="ident" id="2588495"><a href="/net/iprawsock_posix.go.html#2621057">sockaddrToIP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588510">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588513">case</span>&nbsp;<span class="op" id="2588518">*</span><span class="ident" id="2588519"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588526">.</span><span class="ident" id="2588527">SockaddrInet6</span><span class="op" id="2588540">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588544"><a href="/net/file_unix.go.html#2588157">family</a></span>&nbsp;<span class="op" id="2588551">=</span>&nbsp;<span class="ident" id="2588553"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588560">.</span><span class="ident" id="2588561">AF_INET6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588572">if</span>&nbsp;<span class="ident" id="2588575"><a href="/net/file_unix.go.html#2587987">sotype</a></span>&nbsp;<span class="op" id="2588582">==</span>&nbsp;<span class="ident" id="2588585"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588592">.</span><span class="ident" id="2588593">SOCK_DGRAM</span>&nbsp;<span class="op" id="2588604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588609"><a href="/net/file_unix.go.html#2588186">toAddr</a></span>&nbsp;<span class="op" id="2588616">=</span>&nbsp;<span class="ident" id="2588618"><a href="/net/udpsock_posix.go.html#2705391">sockaddrToUDP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588634">}</span>&nbsp;<span class="keyword" id="2588636">else</span>&nbsp;<span class="keyword" id="2588641">if</span>&nbsp;<span class="ident" id="2588644"><a href="/net/file_unix.go.html#2587987">sotype</a></span>&nbsp;<span class="op" id="2588651">==</span>&nbsp;<span class="ident" id="2588654"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588661">.</span><span class="ident" id="2588662">SOCK_RAW</span>&nbsp;<span class="op" id="2588671">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588676"><a href="/net/file_unix.go.html#2588186">toAddr</a></span>&nbsp;<span class="op" id="2588683">=</span>&nbsp;<span class="ident" id="2588685"><a href="/net/iprawsock_posix.go.html#2621057">sockaddrToIP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588703">case</span>&nbsp;<span class="op" id="2588708">*</span><span class="ident" id="2588709"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588716">.</span><span class="ident" id="2588717">SockaddrUnix</span><span class="op" id="2588729">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588733"><a href="/net/file_unix.go.html#2588157">family</a></span>&nbsp;<span class="op" id="2588740">=</span>&nbsp;<span class="ident" id="2588742"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588749">.</span><span class="ident" id="2588750">AF_UNIX</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588760"><a href="/net/file_unix.go.html#2588186">toAddr</a></span>&nbsp;<span class="op" id="2588767">=</span>&nbsp;<span class="ident" id="2588769"><a href="/net/unixsock_posix.go.html#2715391">sockaddrToUnix</a></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2588786">if</span>&nbsp;<span class="ident" id="2588789"><a href="/net/file_unix.go.html#2587987">sotype</a></span>&nbsp;<span class="op" id="2588796">==</span>&nbsp;<span class="ident" id="2588799"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588806">.</span><span class="ident" id="2588807">SOCK_DGRAM</span>&nbsp;<span class="op" id="2588818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588823"><a href="/net/file_unix.go.html#2588186">toAddr</a></span>&nbsp;<span class="op" id="2588830">=</span>&nbsp;<span class="ident" id="2588832"><a href="/net/unixsock_posix.go.html#2715549">sockaddrToUnixgram</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588853">}</span>&nbsp;<span class="keyword" id="2588855">else</span>&nbsp;<span class="keyword" id="2588860">if</span>&nbsp;<span class="ident" id="2588863"><a href="/net/file_unix.go.html#2587987">sotype</a></span>&nbsp;<span class="op" id="2588870">==</span>&nbsp;<span class="ident" id="2588873"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588880">.</span><span class="ident" id="2588881">SOCK_SEQPACKET</span>&nbsp;<span class="op" id="2588896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588901"><a href="/net/file_unix.go.html#2588186">toAddr</a></span>&nbsp;<span class="op" id="2588908">=</span>&nbsp;<span class="ident" id="2588910"><a href="/net/unixsock_posix.go.html#2715715">sockaddrToUnixpacket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588933">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2588936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588939">laddr</span>&nbsp;<span class="op" id="2588945">:=</span>&nbsp;<span class="ident" id="2588948"><a href="/net/file_unix.go.html#2588186">toAddr</a></span><span class="op" id="2588954">(</span><span class="ident" id="2588955"><a href="/net/file_unix.go.html#2588211">lsa</a></span><span class="op" id="2588958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588961">rsa</span><span class="op" id="2588964">,</span>&nbsp;<span class="ident" id="2588966">_</span>&nbsp;<span class="op" id="2588968">:=</span>&nbsp;<span class="ident" id="2588971"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2588978">.</span><span class="ident" id="2588979">Getpeername</span><span class="op" id="2588990">(</span><span class="ident" id="2588991"><a href="/net/file_unix.go.html#2587787">fd</a></span><span class="op" id="2588993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2588996">raddr</span>&nbsp;<span class="op" id="2589002">:=</span>&nbsp;<span class="ident" id="2589005"><a href="/net/file_unix.go.html#2588186">toAddr</a></span><span class="op" id="2589011">(</span><span class="ident" id="2589012"><a href="/net/file_unix.go.html#2588961">rsa</a></span><span class="op" id="2589015">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2589019">netfd</span><span class="op" id="2589024">,</span>&nbsp;<span class="ident" id="2589026"><a href="/net/file_unix.go.html#2587791">err</a></span>&nbsp;<span class="op" id="2589030">:=</span>&nbsp;<span class="ident" id="2589033"><a href="/net/fd_unix.go.html#2575871">newFD</a></span><span class="op" id="2589038">(</span><span class="ident" id="2589039"><a href="/net/file_unix.go.html#2587787">fd</a></span><span class="op" id="2589041">,</span>&nbsp;<span class="ident" id="2589043"><a href="/net/file_unix.go.html#2588157">family</a></span><span class="op" id="2589049">,</span>&nbsp;<span class="ident" id="2589051"><a href="/net/file_unix.go.html#2587987">sotype</a></span><span class="op" id="2589057">,</span>&nbsp;<span class="ident" id="2589059"><a href="/net/file_unix.go.html#2588939">laddr</a></span><span class="op" id="2589064">.</span><span class="ident" id="2589065">Network</span><span class="op" id="2589072">(</span><span class="op" id="2589073">)</span><span class="op" id="2589074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589077">if</span>&nbsp;<span class="ident" id="2589080"><a href="/net/file_unix.go.html#2587791">err</a></span>&nbsp;<span class="op" id="2589084">!=</span>&nbsp;<span class="ident" id="2589087">nil</span>&nbsp;<span class="op" id="2589091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2589095"><a href="/net/fd_unix.go.html#2587250">closesocket</a></span><span class="op" id="2589106">(</span><span class="ident" id="2589107"><a href="/net/file_unix.go.html#2587787">fd</a></span><span class="op" id="2589109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589113">return</span>&nbsp;<span class="ident" id="2589120">nil</span><span class="op" id="2589123">,</span>&nbsp;<span class="ident" id="2589125"><a href="/net/file_unix.go.html#2587791">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589130">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589133">if</span>&nbsp;<span class="ident" id="2589136">err</span>&nbsp;<span class="op" id="2589140">:=</span>&nbsp;<span class="ident" id="2589143"><a href="/net/file_unix.go.html#2589019">netfd</a></span><span class="op" id="2589148">.</span><span class="ident" id="2589149">init</span><span class="op" id="2589153">(</span><span class="op" id="2589154">)</span><span class="op" id="2589155">;</span>&nbsp;<span class="ident" id="2589157"><a href="/net/file_unix.go.html#2589136">err</a></span>&nbsp;<span class="op" id="2589161">!=</span>&nbsp;<span class="ident" id="2589164">nil</span>&nbsp;<span class="op" id="2589168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2589172"><a href="/net/file_unix.go.html#2589019">netfd</a></span><span class="op" id="2589177">.</span><span class="ident" id="2589178">Close</span><span class="op" id="2589183">(</span><span class="op" id="2589184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589188">return</span>&nbsp;<span class="ident" id="2589195">nil</span><span class="op" id="2589198">,</span>&nbsp;<span class="ident" id="2589200"><a href="/net/file_unix.go.html#2589136">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2589208"><a href="/net/file_unix.go.html#2589019">netfd</a></span><span class="op" id="2589213">.</span><span class="ident" id="2589214">setAddr</span><span class="op" id="2589221">(</span><span class="ident" id="2589222"><a href="/net/file_unix.go.html#2588939">laddr</a></span><span class="op" id="2589227">,</span>&nbsp;<span class="ident" id="2589229"><a href="/net/file_unix.go.html#2588996">raddr</a></span><span class="op" id="2589234">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589237">return</span>&nbsp;<span class="ident" id="2589244"><a href="/net/file_unix.go.html#2589019">netfd</a></span><span class="op" id="2589249">,</span>&nbsp;<span class="ident" id="2589251">nil</span><br>
<span class="lineno"></span><span class="op" id="2589255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2589258">//&nbsp;FileConn&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;network&nbsp;connection&nbsp;corresponding&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2589328">//&nbsp;the&nbsp;open&nbsp;file&nbsp;f.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when</span><br>
<span class="lineno">80</span><span class="comment" id="2589399">//&nbsp;finished.&nbsp;&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2589465">//&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="2589478">func</span>&nbsp;<span class="ident" id="2589483">FileConn</span><span class="op" id="2589491">(</span><span class="ident" id="2589492">f</span>&nbsp;<span class="op" id="2589494">*</span><span class="ident" id="2589495"><a href="/net/file_unix.go.html#2587722">os</a></span><span class="op" id="2589497">.</span><span class="ident" id="2589498">File</span><span class="op" id="2589502">)</span>&nbsp;<span class="op" id="2589504">(</span><span class="ident" id="2589505">c</span>&nbsp;<span class="ident" id="2589507"><a href="/net/net.go.html#2652476">Conn</a></span><span class="op" id="2589511">,</span>&nbsp;<span class="ident" id="2589513">err</span>&nbsp;<span class="builtintype" id="2589517">error</span><span class="op" id="2589522">)</span>&nbsp;<span class="op" id="2589524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2589527">fd</span><span class="op" id="2589529">,</span>&nbsp;<span class="ident" id="2589531"><a href="/net/file_unix.go.html#2589513">err</a></span>&nbsp;<span class="op" id="2589535">:=</span>&nbsp;<span class="ident" id="2589538"><a href="/net/file_unix.go.html#2587746">newFileFD</a></span><span class="op" id="2589547">(</span><span class="ident" id="2589548"><a href="/net/file_unix.go.html#2589492">f</a></span><span class="op" id="2589549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589552">if</span>&nbsp;<span class="ident" id="2589555"><a href="/net/file_unix.go.html#2589513">err</a></span>&nbsp;<span class="op" id="2589559">!=</span>&nbsp;<span class="ident" id="2589562">nil</span>&nbsp;<span class="op" id="2589566">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589570">return</span>&nbsp;<span class="ident" id="2589577">nil</span><span class="op" id="2589580">,</span>&nbsp;<span class="ident" id="2589582"><a href="/net/file_unix.go.html#2589513">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589590">switch</span>&nbsp;<span class="ident" id="2589597"><a href="/net/file_unix.go.html#2589527">fd</a></span><span class="op" id="2589599">.</span><span class="ident" id="2589600">laddr</span><span class="op" id="2589605">.</span><span class="op" id="2589606">(</span><span class="keyword" id="2589607">type</span><span class="op" id="2589611">)</span>&nbsp;<span class="op" id="2589613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589616">case</span>&nbsp;<span class="op" id="2589621">*</span><span class="ident" id="2589622"><a href="/net/tcpsock.go.html#2691528">TCPAddr</a></span><span class="op" id="2589629">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589633">return</span>&nbsp;<span class="ident" id="2589640"><a href="/net/tcpsock_posix.go.html#2694191">newTCPConn</a></span><span class="op" id="2589650">(</span><span class="ident" id="2589651"><a href="/net/file_unix.go.html#2589527">fd</a></span><span class="op" id="2589653">)</span><span class="op" id="2589654">,</span>&nbsp;<span class="ident" id="2589656">nil</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589661">case</span>&nbsp;<span class="op" id="2589666">*</span><span class="ident" id="2589667"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="2589674">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589678">return</span>&nbsp;<span class="ident" id="2589685"><a href="/net/udpsock_posix.go.html#2706266">newUDPConn</a></span><span class="op" id="2589695">(</span><span class="ident" id="2589696"><a href="/net/file_unix.go.html#2589527">fd</a></span><span class="op" id="2589698">)</span><span class="op" id="2589699">,</span>&nbsp;<span class="ident" id="2589701">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589706">case</span>&nbsp;<span class="op" id="2589711">*</span><span class="ident" id="2589712"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="2589718">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589722">return</span>&nbsp;<span class="ident" id="2589729"><a href="/net/iprawsock_posix.go.html#2621888">newIPConn</a></span><span class="op" id="2589738">(</span><span class="ident" id="2589739"><a href="/net/file_unix.go.html#2589527">fd</a></span><span class="op" id="2589741">)</span><span class="op" id="2589742">,</span>&nbsp;<span class="ident" id="2589744">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589749">case</span>&nbsp;<span class="op" id="2589754">*</span><span class="ident" id="2589755"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2589763">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589767">return</span>&nbsp;<span class="ident" id="2589774"><a href="/net/unixsock_posix.go.html#2716562">newUnixConn</a></span><span class="op" id="2589785">(</span><span class="ident" id="2589786"><a href="/net/file_unix.go.html#2589527">fd</a></span><span class="op" id="2589788">)</span><span class="op" id="2589789">,</span>&nbsp;<span class="ident" id="2589791">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2589796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2589799"><a href="/net/file_unix.go.html#2589527">fd</a></span><span class="op" id="2589801">.</span><span class="ident" id="2589802">Close</span><span class="op" id="2589807">(</span><span class="op" id="2589808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2589811">return</span>&nbsp;<span class="ident" id="2589818">nil</span><span class="op" id="2589821">,</span>&nbsp;<span class="ident" id="2589823"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2589830">.</span><span class="ident" id="2589831">EINVAL</span><br>
<span class="lineno"></span><span class="op" id="2589838">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="2589841">//&nbsp;FileListener&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;network&nbsp;listener&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="2589910">//&nbsp;to&nbsp;the&nbsp;open&nbsp;file&nbsp;f.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;l</span><br>
<span class="lineno"></span><span class="comment" id="2589979">//&nbsp;when&nbsp;finished.&nbsp;&nbsp;Closing&nbsp;l&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="2590050">//&nbsp;affect&nbsp;l.</span><br>
<span class="lineno">105</span><span class="keyword" id="2590063">func</span>&nbsp;<span class="ident" id="2590068">FileListener</span><span class="op" id="2590080">(</span><span class="ident" id="2590081">f</span>&nbsp;<span class="op" id="2590083">*</span><span class="ident" id="2590084"><a href="/net/file_unix.go.html#2587722">os</a></span><span class="op" id="2590086">.</span><span class="ident" id="2590087">File</span><span class="op" id="2590091">)</span>&nbsp;<span class="op" id="2590093">(</span><span class="ident" id="2590094">l</span>&nbsp;<span class="ident" id="2590096"><a href="/net/net.go.html#2658762">Listener</a></span><span class="op" id="2590104">,</span>&nbsp;<span class="ident" id="2590106">err</span>&nbsp;<span class="builtintype" id="2590110">error</span><span class="op" id="2590115">)</span>&nbsp;<span class="op" id="2590117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590120">fd</span><span class="op" id="2590122">,</span>&nbsp;<span class="ident" id="2590124"><a href="/net/file_unix.go.html#2590106">err</a></span>&nbsp;<span class="op" id="2590128">:=</span>&nbsp;<span class="ident" id="2590131"><a href="/net/file_unix.go.html#2587746">newFileFD</a></span><span class="op" id="2590140">(</span><span class="ident" id="2590141"><a href="/net/file_unix.go.html#2590081">f</a></span><span class="op" id="2590142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590145">if</span>&nbsp;<span class="ident" id="2590148"><a href="/net/file_unix.go.html#2590106">err</a></span>&nbsp;<span class="op" id="2590152">!=</span>&nbsp;<span class="ident" id="2590155">nil</span>&nbsp;<span class="op" id="2590159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590163">return</span>&nbsp;<span class="ident" id="2590170">nil</span><span class="op" id="2590173">,</span>&nbsp;<span class="ident" id="2590175"><a href="/net/file_unix.go.html#2590106">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2590180">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590183">switch</span>&nbsp;<span class="ident" id="2590190">laddr</span>&nbsp;<span class="op" id="2590196">:=</span>&nbsp;<span class="ident" id="2590199"><a href="/net/file_unix.go.html#2590120">fd</a></span><span class="op" id="2590201">.</span><span class="ident" id="2590202">laddr</span><span class="op" id="2590207">.</span><span class="op" id="2590208">(</span><span class="keyword" id="2590209">type</span><span class="op" id="2590213">)</span>&nbsp;<span class="op" id="2590215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590218">case</span>&nbsp;<span class="op" id="2590223">*</span><span class="ident" id="2590224"><a href="/net/tcpsock.go.html#2691528">TCPAddr</a></span><span class="op" id="2590231">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590235">return</span>&nbsp;<span class="op" id="2590242">&amp;</span><span class="ident" id="2590243"><a href="/net/tcpsock_posix.go.html#2699965">TCPListener</a></span><span class="op" id="2590254">{</span><span class="ident" id="2590255"><a href="/net/file_unix.go.html#2590120">fd</a></span><span class="op" id="2590257">}</span><span class="op" id="2590258">,</span>&nbsp;<span class="ident" id="2590260">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590265">case</span>&nbsp;<span class="op" id="2590270">*</span><span class="ident" id="2590271"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2590279">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590283">return</span>&nbsp;<span class="op" id="2590290">&amp;</span><span class="ident" id="2590291"><a href="/net/unixsock_posix.go.html#2721271">UnixListener</a></span><span class="op" id="2590303">{</span><span class="ident" id="2590304"><a href="/net/file_unix.go.html#2590120">fd</a></span><span class="op" id="2590306">,</span>&nbsp;<span class="ident" id="2590308"><a href="/net/file_unix.go.html#2590190">laddr</a></span><span class="op" id="2590313">.</span><span class="ident" id="2590314">Name</span><span class="op" id="2590318">}</span><span class="op" id="2590319">,</span>&nbsp;<span class="ident" id="2590321">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2590326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590329"><a href="/net/file_unix.go.html#2590120">fd</a></span><span class="op" id="2590331">.</span><span class="ident" id="2590332">Close</span><span class="op" id="2590337">(</span><span class="op" id="2590338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590341">return</span>&nbsp;<span class="ident" id="2590348">nil</span><span class="op" id="2590351">,</span>&nbsp;<span class="ident" id="2590353"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2590360">.</span><span class="ident" id="2590361">EINVAL</span><br>
<span class="lineno"></span><span class="op" id="2590368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="2590371">//&nbsp;FilePacketConn&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;packet&nbsp;network&nbsp;connection</span><br>
<span class="lineno"></span><span class="comment" id="2590437">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;open&nbsp;file&nbsp;f.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="2590494">//&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when&nbsp;finished.&nbsp;&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect</span><br>
<span class="lineno"></span><span class="comment" id="2590565">//&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="2590604">func</span>&nbsp;<span class="ident" id="2590609">FilePacketConn</span><span class="op" id="2590623">(</span><span class="ident" id="2590624">f</span>&nbsp;<span class="op" id="2590626">*</span><span class="ident" id="2590627"><a href="/net/file_unix.go.html#2587722">os</a></span><span class="op" id="2590629">.</span><span class="ident" id="2590630">File</span><span class="op" id="2590634">)</span>&nbsp;<span class="op" id="2590636">(</span><span class="ident" id="2590637">c</span>&nbsp;<span class="ident" id="2590639"><a href="/net/net.go.html#2656892">PacketConn</a></span><span class="op" id="2590649">,</span>&nbsp;<span class="ident" id="2590651">err</span>&nbsp;<span class="builtintype" id="2590655">error</span><span class="op" id="2590660">)</span>&nbsp;<span class="op" id="2590662">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590665">fd</span><span class="op" id="2590667">,</span>&nbsp;<span class="ident" id="2590669"><a href="/net/file_unix.go.html#2590651">err</a></span>&nbsp;<span class="op" id="2590673">:=</span>&nbsp;<span class="ident" id="2590676"><a href="/net/file_unix.go.html#2587746">newFileFD</a></span><span class="op" id="2590685">(</span><span class="ident" id="2590686"><a href="/net/file_unix.go.html#2590624">f</a></span><span class="op" id="2590687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590690">if</span>&nbsp;<span class="ident" id="2590693"><a href="/net/file_unix.go.html#2590651">err</a></span>&nbsp;<span class="op" id="2590697">!=</span>&nbsp;<span class="ident" id="2590700">nil</span>&nbsp;<span class="op" id="2590704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590708">return</span>&nbsp;<span class="ident" id="2590715">nil</span><span class="op" id="2590718">,</span>&nbsp;<span class="ident" id="2590720"><a href="/net/file_unix.go.html#2590651">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2590725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590728">switch</span>&nbsp;<span class="ident" id="2590735"><a href="/net/file_unix.go.html#2590665">fd</a></span><span class="op" id="2590737">.</span><span class="ident" id="2590738">laddr</span><span class="op" id="2590743">.</span><span class="op" id="2590744">(</span><span class="keyword" id="2590745">type</span><span class="op" id="2590749">)</span>&nbsp;<span class="op" id="2590751">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590754">case</span>&nbsp;<span class="op" id="2590759">*</span><span class="ident" id="2590760"><a href="/net/udpsock.go.html#2703901">UDPAddr</a></span><span class="op" id="2590767">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590771">return</span>&nbsp;<span class="ident" id="2590778"><a href="/net/udpsock_posix.go.html#2706266">newUDPConn</a></span><span class="op" id="2590788">(</span><span class="ident" id="2590789"><a href="/net/file_unix.go.html#2590665">fd</a></span><span class="op" id="2590791">)</span><span class="op" id="2590792">,</span>&nbsp;<span class="ident" id="2590794">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590799">case</span>&nbsp;<span class="op" id="2590804">*</span><span class="ident" id="2590805"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="2590811">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590815">return</span>&nbsp;<span class="ident" id="2590822"><a href="/net/iprawsock_posix.go.html#2621888">newIPConn</a></span><span class="op" id="2590831">(</span><span class="ident" id="2590832"><a href="/net/file_unix.go.html#2590665">fd</a></span><span class="op" id="2590834">)</span><span class="op" id="2590835">,</span>&nbsp;<span class="ident" id="2590837">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590842">case</span>&nbsp;<span class="op" id="2590847">*</span><span class="ident" id="2590848"><a href="/net/unixsock.go.html#2713560">UnixAddr</a></span><span class="op" id="2590856">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590860">return</span>&nbsp;<span class="ident" id="2590867"><a href="/net/unixsock_posix.go.html#2716562">newUnixConn</a></span><span class="op" id="2590878">(</span><span class="ident" id="2590879"><a href="/net/file_unix.go.html#2590665">fd</a></span><span class="op" id="2590881">)</span><span class="op" id="2590882">,</span>&nbsp;<span class="ident" id="2590884">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2590889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2590892"><a href="/net/file_unix.go.html#2590665">fd</a></span><span class="op" id="2590894">.</span><span class="ident" id="2590895">Close</span><span class="op" id="2590900">(</span><span class="op" id="2590901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2590904">return</span>&nbsp;<span class="ident" id="2590911">nil</span><span class="op" id="2590914">,</span>&nbsp;<span class="ident" id="2590916"><a href="/net/file_unix.go.html#2587728">syscall</a></span><span class="op" id="2590923">.</span><span class="ident" id="2590924">EINVAL</span><br>
<span class="lineno"></span><span class="op" id="2590931">}</span>
</div>
</body>
</html>
