<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1738668">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1738723">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1738777">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1738828">package</span>&nbsp;<span class="ident" id="1738836">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1738845">import</span>&nbsp;<span class="string" id="1738852">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1738862">//&nbsp;NOTE:&nbsp;Func&nbsp;does&nbsp;not&nbsp;expose&nbsp;the&nbsp;actual&nbsp;unexported&nbsp;fields,&nbsp;because&nbsp;we&nbsp;return&nbsp;*Func</span><br>
<span class="lineno">10</span><span class="comment" id="1738946">//&nbsp;values&nbsp;to&nbsp;users,&nbsp;and&nbsp;we&nbsp;want&nbsp;to&nbsp;keep&nbsp;them&nbsp;from&nbsp;being&nbsp;able&nbsp;to&nbsp;overwrite&nbsp;the&nbsp;data</span><br>
<span class="lineno"></span><span class="comment" id="1739029">//&nbsp;with&nbsp;(say)&nbsp;*f&nbsp;=&nbsp;Func{}.</span><br>
<span class="lineno"></span><span class="comment" id="1739056">//&nbsp;All&nbsp;code&nbsp;operating&nbsp;on&nbsp;a&nbsp;*Func&nbsp;must&nbsp;call&nbsp;raw&nbsp;to&nbsp;get&nbsp;the&nbsp;*_func&nbsp;instead.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1739131">//&nbsp;A&nbsp;Func&nbsp;represents&nbsp;a&nbsp;Go&nbsp;function&nbsp;in&nbsp;the&nbsp;running&nbsp;binary.</span><br>
<span class="lineno">15</span><span class="keyword" id="1739189">type</span>&nbsp;<span class="ident" id="1739194">Func</span>&nbsp;<span class="keyword" id="1739199">struct</span>&nbsp;<span class="op" id="1739206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739209">opaque</span>&nbsp;<span class="keyword" id="1739216">struct</span><span class="op" id="1739222">{</span><span class="op" id="1739223">}</span>&nbsp;<span class="comment" id="1739225">//&nbsp;unexported&nbsp;field&nbsp;to&nbsp;disallow&nbsp;conversions</span><br>
<span class="lineno"></span><span class="op" id="1739269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1739272">func</span>&nbsp;<span class="op" id="1739277">(</span><span class="ident" id="1739278">f</span>&nbsp;<span class="op" id="1739280">*</span><span class="ident" id="1739281">Func</span><span class="op" id="1739285">)</span>&nbsp;<span class="ident" id="1739287">raw</span><span class="op" id="1739290">(</span><span class="op" id="1739291">)</span>&nbsp;<span class="op" id="1739293">*</span><span class="ident" id="1739294">_func</span>&nbsp;<span class="op" id="1739300">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1739303">return</span>&nbsp;<span class="op" id="1739310">(</span><span class="op" id="1739311">*</span><span class="ident" id="1739312">_func</span><span class="op" id="1739317">)</span><span class="op" id="1739318">(</span><span class="ident" id="1739319">unsafe</span><span class="op" id="1739325">.</span><span class="ident" id="1739326">Pointer</span><span class="op" id="1739333">(</span><span class="ident" id="1739334">f</span><span class="op" id="1739335">)</span><span class="op" id="1739336">)</span><br>
<span class="lineno"></span><span class="op" id="1739338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1739341">//&nbsp;funcdata.h</span><br>
<span class="lineno"></span><span class="keyword" id="1739355">const</span>&nbsp;<span class="op" id="1739361">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739364">_PCDATA_ArgSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1739392">=</span>&nbsp;<span class="num" id="1739394">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739397">_PCDATA_StackMapIndex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1739425">=</span>&nbsp;<span class="num" id="1739427">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739430">_FUNCDATA_ArgsPointerMaps</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1739458">=</span>&nbsp;<span class="num" id="1739460">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739463">_FUNCDATA_LocalsPointerMaps</span>&nbsp;<span class="op" id="1739491">=</span>&nbsp;<span class="num" id="1739493">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739496">_FUNCDATA_DeadValueMaps</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1739524">=</span>&nbsp;<span class="num" id="1739526">2</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739529">_ArgsSizeUnknown</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1739557">=</span>&nbsp;<span class="op" id="1739559">-</span><span class="num" id="1739560">0x80000000</span><br>
<span class="lineno"></span><span class="op" id="1739571">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1739574">var</span>&nbsp;<span class="op" id="1739578">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739581">pclntable</span>&nbsp;<span class="op" id="1739591">[</span><span class="op" id="1739592">]</span><span class="builtintype" id="1739593">byte</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739599">ftab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1739609">[</span><span class="op" id="1739610">]</span><span class="ident" id="1739611">functab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739620">filetab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1739630">[</span><span class="op" id="1739631">]</span><span class="builtintype" id="1739632">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739641">pclntab</span><span class="op" id="1739648">,</span>&nbsp;<span class="ident" id="1739650">epclntab</span>&nbsp;<span class="keyword" id="1739659">struct</span><span class="op" id="1739665">{</span><span class="op" id="1739666">}</span>&nbsp;<span class="comment" id="1739668">//&nbsp;linker&nbsp;symbols</span><br>
<span class="lineno"></span><span class="op" id="1739686">)</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="1739689">type</span>&nbsp;<span class="ident" id="1739694">functab</span>&nbsp;<span class="keyword" id="1739702">struct</span>&nbsp;<span class="op" id="1739709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739712">entry</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1739720">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739729">funcoff</span>&nbsp;<span class="builtintype" id="1739737">uintptr</span><br>
<span class="lineno"></span><span class="op" id="1739745">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="1739748">func</span>&nbsp;<span class="ident" id="1739753">symtabinit</span><span class="op" id="1739763">(</span><span class="op" id="1739764">)</span>&nbsp;<span class="op" id="1739766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1739769">//&nbsp;See&nbsp;golang.org/s/go12symtab&nbsp;for&nbsp;header:&nbsp;0xfffffffb,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1739825">//&nbsp;two&nbsp;zero&nbsp;bytes,&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;PC&nbsp;quantum,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1739875">//&nbsp;and&nbsp;a&nbsp;byte&nbsp;giving&nbsp;the&nbsp;pointer&nbsp;width&nbsp;in&nbsp;bytes.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739925">pcln</span>&nbsp;<span class="op" id="1739930">:=</span>&nbsp;<span class="op" id="1739933">(</span><span class="op" id="1739934">*</span><span class="op" id="1739935">[</span><span class="num" id="1739936">8</span><span class="op" id="1739937">]</span><span class="builtintype" id="1739938">byte</span><span class="op" id="1739942">)</span><span class="op" id="1739943">(</span><span class="ident" id="1739944">unsafe</span><span class="op" id="1739950">.</span><span class="ident" id="1739951">Pointer</span><span class="op" id="1739958">(</span><span class="op" id="1739959">&amp;</span><span class="ident" id="1739960">pclntab</span><span class="op" id="1739967">)</span><span class="op" id="1739968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1739971">pcln32</span>&nbsp;<span class="op" id="1739978">:=</span>&nbsp;<span class="op" id="1739981">(</span><span class="op" id="1739982">*</span><span class="op" id="1739983">[</span><span class="num" id="1739984">2</span><span class="op" id="1739985">]</span><span class="builtintype" id="1739986">uint32</span><span class="op" id="1739992">)</span><span class="op" id="1739993">(</span><span class="ident" id="1739994">unsafe</span><span class="op" id="1740000">.</span><span class="ident" id="1740001">Pointer</span><span class="op" id="1740008">(</span><span class="op" id="1740009">&amp;</span><span class="ident" id="1740010">pclntab</span><span class="op" id="1740017">)</span><span class="op" id="1740018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740021">if</span>&nbsp;<span class="ident" id="1740024">pcln32</span><span class="op" id="1740030">[</span><span class="num" id="1740031">0</span><span class="op" id="1740032">]</span>&nbsp;<span class="op" id="1740034">!=</span>&nbsp;<span class="num" id="1740037">0xfffffffb</span>&nbsp;<span class="op" id="1740048">||</span>&nbsp;<span class="ident" id="1740051">pcln</span><span class="op" id="1740055">[</span><span class="num" id="1740056">4</span><span class="op" id="1740057">]</span>&nbsp;<span class="op" id="1740059">!=</span>&nbsp;<span class="num" id="1740062">0</span>&nbsp;<span class="op" id="1740064">||</span>&nbsp;<span class="ident" id="1740067">pcln</span><span class="op" id="1740071">[</span><span class="num" id="1740072">5</span><span class="op" id="1740073">]</span>&nbsp;<span class="op" id="1740075">!=</span>&nbsp;<span class="num" id="1740078">0</span>&nbsp;<span class="op" id="1740080">||</span>&nbsp;<span class="ident" id="1740083">pcln</span><span class="op" id="1740087">[</span><span class="num" id="1740088">6</span><span class="op" id="1740089">]</span>&nbsp;<span class="op" id="1740091">!=</span>&nbsp;<span class="ident" id="1740094">_PCQuantum</span>&nbsp;<span class="op" id="1740105">||</span>&nbsp;<span class="ident" id="1740108">pcln</span><span class="op" id="1740112">[</span><span class="num" id="1740113">7</span><span class="op" id="1740114">]</span>&nbsp;<span class="op" id="1740116">!=</span>&nbsp;<span class="ident" id="1740119">ptrSize</span>&nbsp;<span class="op" id="1740127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1740131">println</span><span class="op" id="1740138">(</span><span class="string" id="1740139">&#34;runtime:&nbsp;function&nbsp;symbol&nbsp;table&nbsp;header:&#34;</span><span class="op" id="1740179">,</span>&nbsp;<span class="ident" id="1740181">hex</span><span class="op" id="1740184">(</span><span class="ident" id="1740185">pcln32</span><span class="op" id="1740191">[</span><span class="num" id="1740192">0</span><span class="op" id="1740193">]</span><span class="op" id="1740194">)</span><span class="op" id="1740195">,</span>&nbsp;<span class="ident" id="1740197">hex</span><span class="op" id="1740200">(</span><span class="ident" id="1740201">pcln</span><span class="op" id="1740205">[</span><span class="num" id="1740206">4</span><span class="op" id="1740207">]</span><span class="op" id="1740208">)</span><span class="op" id="1740209">,</span>&nbsp;<span class="ident" id="1740211">hex</span><span class="op" id="1740214">(</span><span class="ident" id="1740215">pcln</span><span class="op" id="1740219">[</span><span class="num" id="1740220">5</span><span class="op" id="1740221">]</span><span class="op" id="1740222">)</span><span class="op" id="1740223">,</span>&nbsp;<span class="ident" id="1740225">hex</span><span class="op" id="1740228">(</span><span class="ident" id="1740229">pcln</span><span class="op" id="1740233">[</span><span class="num" id="1740234">6</span><span class="op" id="1740235">]</span><span class="op" id="1740236">)</span><span class="op" id="1740237">,</span>&nbsp;<span class="ident" id="1740239">hex</span><span class="op" id="1740242">(</span><span class="ident" id="1740243">pcln</span><span class="op" id="1740247">[</span><span class="num" id="1740248">7</span><span class="op" id="1740249">]</span><span class="op" id="1740250">)</span><span class="op" id="1740251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740255">gothrow</span><span class="op" id="1740262">(</span><span class="string" id="1740263">&#34;invalid&nbsp;function&nbsp;symbol&nbsp;table\n&#34;</span><span class="op" id="1740296">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1740299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1740303">//&nbsp;pclntable&nbsp;is&nbsp;all&nbsp;bytes&nbsp;of&nbsp;pclntab&nbsp;symbol.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740349">sp</span>&nbsp;<span class="op" id="1740352">:=</span>&nbsp;<span class="op" id="1740355">(</span><span class="op" id="1740356">*</span><span class="ident" id="1740357">sliceStruct</span><span class="op" id="1740368">)</span><span class="op" id="1740369">(</span><span class="ident" id="1740370">unsafe</span><span class="op" id="1740376">.</span><span class="ident" id="1740377">Pointer</span><span class="op" id="1740384">(</span><span class="op" id="1740385">&amp;</span><span class="ident" id="1740386">pclntable</span><span class="op" id="1740395">)</span><span class="op" id="1740396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740399">sp</span><span class="op" id="1740401">.</span><span class="ident" id="1740402">array</span>&nbsp;<span class="op" id="1740408">=</span>&nbsp;<span class="ident" id="1740410">unsafe</span><span class="op" id="1740416">.</span><span class="ident" id="1740417">Pointer</span><span class="op" id="1740424">(</span><span class="op" id="1740425">&amp;</span><span class="ident" id="1740426">pclntab</span><span class="op" id="1740433">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740436">sp</span><span class="op" id="1740438">.</span><span class="builtinfunc" id="1740439">len</span>&nbsp;<span class="op" id="1740443">=</span>&nbsp;<span class="builtintype" id="1740445">int</span><span class="op" id="1740448">(</span><span class="builtintype" id="1740449">uintptr</span><span class="op" id="1740456">(</span><span class="ident" id="1740457">unsafe</span><span class="op" id="1740463">.</span><span class="ident" id="1740464">Pointer</span><span class="op" id="1740471">(</span><span class="op" id="1740472">&amp;</span><span class="ident" id="1740473">epclntab</span><span class="op" id="1740481">)</span><span class="op" id="1740482">)</span>&nbsp;<span class="op" id="1740484">-</span>&nbsp;<span class="builtintype" id="1740486">uintptr</span><span class="op" id="1740493">(</span><span class="ident" id="1740494">unsafe</span><span class="op" id="1740500">.</span><span class="ident" id="1740501">Pointer</span><span class="op" id="1740508">(</span><span class="op" id="1740509">&amp;</span><span class="ident" id="1740510">pclntab</span><span class="op" id="1740517">)</span><span class="op" id="1740518">)</span><span class="op" id="1740519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740522">sp</span><span class="op" id="1740524">.</span><span class="builtinfunc" id="1740525">cap</span>&nbsp;<span class="op" id="1740529">=</span>&nbsp;<span class="ident" id="1740531">sp</span><span class="op" id="1740533">.</span><span class="builtinfunc" id="1740534">len</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1740540">//&nbsp;ftab&nbsp;is&nbsp;lookup&nbsp;table&nbsp;for&nbsp;function&nbsp;by&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740598">nftab</span>&nbsp;<span class="op" id="1740604">:=</span>&nbsp;<span class="builtintype" id="1740607">int</span><span class="op" id="1740610">(</span><span class="op" id="1740611">*</span><span class="op" id="1740612">(</span><span class="op" id="1740613">*</span><span class="builtintype" id="1740614">uintptr</span><span class="op" id="1740621">)</span><span class="op" id="1740622">(</span><span class="ident" id="1740623">add</span><span class="op" id="1740626">(</span><span class="ident" id="1740627">unsafe</span><span class="op" id="1740633">.</span><span class="ident" id="1740634">Pointer</span><span class="op" id="1740641">(</span><span class="ident" id="1740642">pcln</span><span class="op" id="1740646">)</span><span class="op" id="1740647">,</span>&nbsp;<span class="num" id="1740649">8</span><span class="op" id="1740650">)</span><span class="op" id="1740651">)</span><span class="op" id="1740652">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740655">p</span>&nbsp;<span class="op" id="1740657">:=</span>&nbsp;<span class="ident" id="1740660">add</span><span class="op" id="1740663">(</span><span class="ident" id="1740664">unsafe</span><span class="op" id="1740670">.</span><span class="ident" id="1740671">Pointer</span><span class="op" id="1740678">(</span><span class="ident" id="1740679">pcln</span><span class="op" id="1740683">)</span><span class="op" id="1740684">,</span>&nbsp;<span class="num" id="1740686">8</span><span class="op" id="1740687">+</span><span class="ident" id="1740688">ptrSize</span><span class="op" id="1740695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740698">sp</span>&nbsp;<span class="op" id="1740701">=</span>&nbsp;<span class="op" id="1740703">(</span><span class="op" id="1740704">*</span><span class="ident" id="1740705">sliceStruct</span><span class="op" id="1740716">)</span><span class="op" id="1740717">(</span><span class="ident" id="1740718">unsafe</span><span class="op" id="1740724">.</span><span class="ident" id="1740725">Pointer</span><span class="op" id="1740732">(</span><span class="op" id="1740733">&amp;</span><span class="ident" id="1740734">ftab</span><span class="op" id="1740738">)</span><span class="op" id="1740739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740742">sp</span><span class="op" id="1740744">.</span><span class="ident" id="1740745">array</span>&nbsp;<span class="op" id="1740751">=</span>&nbsp;<span class="ident" id="1740753">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740756">sp</span><span class="op" id="1740758">.</span><span class="builtinfunc" id="1740759">len</span>&nbsp;<span class="op" id="1740763">=</span>&nbsp;<span class="ident" id="1740765">nftab</span>&nbsp;<span class="op" id="1740771">+</span>&nbsp;<span class="num" id="1740773">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740776">sp</span><span class="op" id="1740778">.</span><span class="builtinfunc" id="1740779">cap</span>&nbsp;<span class="op" id="1740783">=</span>&nbsp;<span class="ident" id="1740785">sp</span><span class="op" id="1740787">.</span><span class="builtinfunc" id="1740788">len</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740793">for</span>&nbsp;<span class="ident" id="1740797">i</span>&nbsp;<span class="op" id="1740799">:=</span>&nbsp;<span class="num" id="1740802">0</span><span class="op" id="1740803">;</span>&nbsp;<span class="ident" id="1740805">i</span>&nbsp;<span class="op" id="1740807">&lt;</span>&nbsp;<span class="ident" id="1740809">nftab</span><span class="op" id="1740814">;</span>&nbsp;<span class="ident" id="1740816">i</span><span class="op" id="1740817">++</span>&nbsp;<span class="op" id="1740820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1740824">//&nbsp;NOTE:&nbsp;ftab[nftab].entry&nbsp;is&nbsp;legal;&nbsp;it&nbsp;is&nbsp;the&nbsp;address&nbsp;beyond&nbsp;the&nbsp;final&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1740908">if</span>&nbsp;<span class="ident" id="1740911">ftab</span><span class="op" id="1740915">[</span><span class="ident" id="1740916">i</span><span class="op" id="1740917">]</span><span class="op" id="1740918">.</span><span class="ident" id="1740919">entry</span>&nbsp;<span class="op" id="1740925">&gt;</span>&nbsp;<span class="ident" id="1740927">ftab</span><span class="op" id="1740931">[</span><span class="ident" id="1740932">i</span><span class="op" id="1740933">+</span><span class="num" id="1740934">1</span><span class="op" id="1740935">]</span><span class="op" id="1740936">.</span><span class="ident" id="1740937">entry</span>&nbsp;<span class="op" id="1740943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1740948">f1</span>&nbsp;<span class="op" id="1740951">:=</span>&nbsp;<span class="op" id="1740954">(</span><span class="op" id="1740955">*</span><span class="ident" id="1740956">_func</span><span class="op" id="1740961">)</span><span class="op" id="1740962">(</span><span class="ident" id="1740963">unsafe</span><span class="op" id="1740969">.</span><span class="ident" id="1740970">Pointer</span><span class="op" id="1740977">(</span><span class="op" id="1740978">&amp;</span><span class="ident" id="1740979">pclntable</span><span class="op" id="1740988">[</span><span class="ident" id="1740989">ftab</span><span class="op" id="1740993">[</span><span class="ident" id="1740994">i</span><span class="op" id="1740995">]</span><span class="op" id="1740996">.</span><span class="ident" id="1740997">funcoff</span><span class="op" id="1741004">]</span><span class="op" id="1741005">)</span><span class="op" id="1741006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741011">f2</span>&nbsp;<span class="op" id="1741014">:=</span>&nbsp;<span class="op" id="1741017">(</span><span class="op" id="1741018">*</span><span class="ident" id="1741019">_func</span><span class="op" id="1741024">)</span><span class="op" id="1741025">(</span><span class="ident" id="1741026">unsafe</span><span class="op" id="1741032">.</span><span class="ident" id="1741033">Pointer</span><span class="op" id="1741040">(</span><span class="op" id="1741041">&amp;</span><span class="ident" id="1741042">pclntable</span><span class="op" id="1741051">[</span><span class="ident" id="1741052">ftab</span><span class="op" id="1741056">[</span><span class="ident" id="1741057">i</span><span class="op" id="1741058">+</span><span class="num" id="1741059">1</span><span class="op" id="1741060">]</span><span class="op" id="1741061">.</span><span class="ident" id="1741062">funcoff</span><span class="op" id="1741069">]</span><span class="op" id="1741070">)</span><span class="op" id="1741071">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741076">f2name</span>&nbsp;<span class="op" id="1741083">:=</span>&nbsp;<span class="string" id="1741086">&#34;end&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1741095">if</span>&nbsp;<span class="ident" id="1741098">i</span><span class="op" id="1741099">+</span><span class="num" id="1741100">1</span>&nbsp;<span class="op" id="1741102">&lt;</span>&nbsp;<span class="ident" id="1741104">nftab</span>&nbsp;<span class="op" id="1741110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741116">f2name</span>&nbsp;<span class="op" id="1741123">=</span>&nbsp;<span class="ident" id="1741125">gofuncname</span><span class="op" id="1741135">(</span><span class="ident" id="1741136">f2</span><span class="op" id="1741138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1741143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1741148">println</span><span class="op" id="1741155">(</span><span class="string" id="1741156">&#34;function&nbsp;symbol&nbsp;table&nbsp;not&nbsp;sorted&nbsp;by&nbsp;program&nbsp;counter:&#34;</span><span class="op" id="1741210">,</span>&nbsp;<span class="ident" id="1741212">hex</span><span class="op" id="1741215">(</span><span class="ident" id="1741216">ftab</span><span class="op" id="1741220">[</span><span class="ident" id="1741221">i</span><span class="op" id="1741222">]</span><span class="op" id="1741223">.</span><span class="ident" id="1741224">entry</span><span class="op" id="1741229">)</span><span class="op" id="1741230">,</span>&nbsp;<span class="ident" id="1741232">gofuncname</span><span class="op" id="1741242">(</span><span class="ident" id="1741243">f1</span><span class="op" id="1741245">)</span><span class="op" id="1741246">,</span>&nbsp;<span class="string" id="1741248">&#34;&gt;&#34;</span><span class="op" id="1741251">,</span>&nbsp;<span class="ident" id="1741253">hex</span><span class="op" id="1741256">(</span><span class="ident" id="1741257">ftab</span><span class="op" id="1741261">[</span><span class="ident" id="1741262">i</span><span class="op" id="1741263">+</span><span class="num" id="1741264">1</span><span class="op" id="1741265">]</span><span class="op" id="1741266">.</span><span class="ident" id="1741267">entry</span><span class="op" id="1741272">)</span><span class="op" id="1741273">,</span>&nbsp;<span class="ident" id="1741275">f2name</span><span class="op" id="1741281">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1741286">for</span>&nbsp;<span class="ident" id="1741290">j</span>&nbsp;<span class="op" id="1741292">:=</span>&nbsp;<span class="num" id="1741295">0</span><span class="op" id="1741296">;</span>&nbsp;<span class="ident" id="1741298">j</span>&nbsp;<span class="op" id="1741300">&lt;=</span>&nbsp;<span class="ident" id="1741303">i</span><span class="op" id="1741304">;</span>&nbsp;<span class="ident" id="1741306">j</span><span class="op" id="1741307">++</span>&nbsp;<span class="op" id="1741310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1741316">print</span><span class="op" id="1741321">(</span><span class="string" id="1741322">&#34;\t&#34;</span><span class="op" id="1741326">,</span>&nbsp;<span class="ident" id="1741328">hex</span><span class="op" id="1741331">(</span><span class="ident" id="1741332">ftab</span><span class="op" id="1741336">[</span><span class="ident" id="1741337">j</span><span class="op" id="1741338">]</span><span class="op" id="1741339">.</span><span class="ident" id="1741340">entry</span><span class="op" id="1741345">)</span><span class="op" id="1741346">,</span>&nbsp;<span class="string" id="1741348">&#34;&nbsp;&#34;</span><span class="op" id="1741351">,</span>&nbsp;<span class="ident" id="1741353">gofuncname</span><span class="op" id="1741363">(</span><span class="op" id="1741364">(</span><span class="op" id="1741365">*</span><span class="ident" id="1741366">_func</span><span class="op" id="1741371">)</span><span class="op" id="1741372">(</span><span class="ident" id="1741373">unsafe</span><span class="op" id="1741379">.</span><span class="ident" id="1741380">Pointer</span><span class="op" id="1741387">(</span><span class="op" id="1741388">&amp;</span><span class="ident" id="1741389">pclntable</span><span class="op" id="1741398">[</span><span class="ident" id="1741399">ftab</span><span class="op" id="1741403">[</span><span class="ident" id="1741404">j</span><span class="op" id="1741405">]</span><span class="op" id="1741406">.</span><span class="ident" id="1741407">funcoff</span><span class="op" id="1741414">]</span><span class="op" id="1741415">)</span><span class="op" id="1741416">)</span><span class="op" id="1741417">)</span><span class="op" id="1741418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1741423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741428">gothrow</span><span class="op" id="1741435">(</span><span class="string" id="1741436">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1741466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1741470">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1741473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1741477">//&nbsp;The&nbsp;ftab&nbsp;ends&nbsp;with&nbsp;a&nbsp;half&nbsp;functab&nbsp;consisting&nbsp;only&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1741534">//&nbsp;&#39;entry&#39;,&nbsp;followed&nbsp;by&nbsp;a&nbsp;uint32&nbsp;giving&nbsp;the&nbsp;pcln-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1741593">//&nbsp;offset&nbsp;of&nbsp;the&nbsp;file&nbsp;table.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741623">sp</span>&nbsp;<span class="op" id="1741626">=</span>&nbsp;<span class="op" id="1741628">(</span><span class="op" id="1741629">*</span><span class="ident" id="1741630">sliceStruct</span><span class="op" id="1741641">)</span><span class="op" id="1741642">(</span><span class="ident" id="1741643">unsafe</span><span class="op" id="1741649">.</span><span class="ident" id="1741650">Pointer</span><span class="op" id="1741657">(</span><span class="op" id="1741658">&amp;</span><span class="ident" id="1741659">filetab</span><span class="op" id="1741666">)</span><span class="op" id="1741667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741670">end</span>&nbsp;<span class="op" id="1741674">:=</span>&nbsp;<span class="ident" id="1741677">unsafe</span><span class="op" id="1741683">.</span><span class="ident" id="1741684">Pointer</span><span class="op" id="1741691">(</span><span class="op" id="1741692">&amp;</span><span class="ident" id="1741693">ftab</span><span class="op" id="1741697">[</span><span class="ident" id="1741698">nftab</span><span class="op" id="1741703">]</span><span class="op" id="1741704">.</span><span class="ident" id="1741705">funcoff</span><span class="op" id="1741712">)</span>&nbsp;<span class="comment" id="1741714">//&nbsp;just&nbsp;beyond&nbsp;ftab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741735">fileoffset</span>&nbsp;<span class="op" id="1741746">:=</span>&nbsp;<span class="op" id="1741749">*</span><span class="op" id="1741750">(</span><span class="op" id="1741751">*</span><span class="builtintype" id="1741752">uint32</span><span class="op" id="1741758">)</span><span class="op" id="1741759">(</span><span class="ident" id="1741760">end</span><span class="op" id="1741763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741766">sp</span><span class="op" id="1741768">.</span><span class="ident" id="1741769">array</span>&nbsp;<span class="op" id="1741775">=</span>&nbsp;<span class="ident" id="1741777">unsafe</span><span class="op" id="1741783">.</span><span class="ident" id="1741784">Pointer</span><span class="op" id="1741791">(</span><span class="op" id="1741792">&amp;</span><span class="ident" id="1741793">pclntable</span><span class="op" id="1741802">[</span><span class="ident" id="1741803">fileoffset</span><span class="op" id="1741813">]</span><span class="op" id="1741814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1741817">//&nbsp;length&nbsp;is&nbsp;in&nbsp;first&nbsp;element&nbsp;of&nbsp;array.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1741858">//&nbsp;set&nbsp;len&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;can&nbsp;get&nbsp;first&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741904">sp</span><span class="op" id="1741906">.</span><span class="builtinfunc" id="1741907">len</span>&nbsp;<span class="op" id="1741911">=</span>&nbsp;<span class="num" id="1741913">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741916">sp</span><span class="op" id="1741918">.</span><span class="builtinfunc" id="1741919">cap</span>&nbsp;<span class="op" id="1741923">=</span>&nbsp;<span class="num" id="1741925">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741928">sp</span><span class="op" id="1741930">.</span><span class="builtinfunc" id="1741931">len</span>&nbsp;<span class="op" id="1741935">=</span>&nbsp;<span class="builtintype" id="1741937">int</span><span class="op" id="1741940">(</span><span class="ident" id="1741941">filetab</span><span class="op" id="1741948">[</span><span class="num" id="1741949">0</span><span class="op" id="1741950">]</span><span class="op" id="1741951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1741954">sp</span><span class="op" id="1741956">.</span><span class="builtinfunc" id="1741957">cap</span>&nbsp;<span class="op" id="1741961">=</span>&nbsp;<span class="ident" id="1741963">sp</span><span class="op" id="1741965">.</span><span class="builtinfunc" id="1741966">len</span><br>
<span class="lineno">100</span><span class="op" id="1741970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1741973">//&nbsp;FuncForPC&nbsp;returns&nbsp;a&nbsp;*Func&nbsp;describing&nbsp;the&nbsp;function&nbsp;that&nbsp;contains&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1742044">//&nbsp;given&nbsp;program&nbsp;counter&nbsp;address,&nbsp;or&nbsp;else&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1742091">func</span>&nbsp;<span class="ident" id="1742096">FuncForPC</span><span class="op" id="1742105">(</span><span class="ident" id="1742106">pc</span>&nbsp;<span class="builtintype" id="1742109">uintptr</span><span class="op" id="1742116">)</span>&nbsp;<span class="op" id="1742118">*</span><span class="ident" id="1742119">Func</span>&nbsp;<span class="op" id="1742124">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742127">return</span>&nbsp;<span class="op" id="1742134">(</span><span class="op" id="1742135">*</span><span class="ident" id="1742136">Func</span><span class="op" id="1742140">)</span><span class="op" id="1742141">(</span><span class="ident" id="1742142">unsafe</span><span class="op" id="1742148">.</span><span class="ident" id="1742149">Pointer</span><span class="op" id="1742156">(</span><span class="ident" id="1742157">findfunc</span><span class="op" id="1742165">(</span><span class="ident" id="1742166">pc</span><span class="op" id="1742168">)</span><span class="op" id="1742169">)</span><span class="op" id="1742170">)</span><br>
<span class="lineno"></span><span class="op" id="1742172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1742175">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1742217">func</span>&nbsp;<span class="op" id="1742222">(</span><span class="ident" id="1742223">f</span>&nbsp;<span class="op" id="1742225">*</span><span class="ident" id="1742226">Func</span><span class="op" id="1742230">)</span>&nbsp;<span class="ident" id="1742232">Name</span><span class="op" id="1742236">(</span><span class="op" id="1742237">)</span>&nbsp;<span class="builtintype" id="1742239">string</span>&nbsp;<span class="op" id="1742246">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742249">return</span>&nbsp;<span class="ident" id="1742256">gofuncname</span><span class="op" id="1742266">(</span><span class="ident" id="1742267">f</span><span class="op" id="1742268">.</span><span class="ident" id="1742269">raw</span><span class="op" id="1742272">(</span><span class="op" id="1742273">)</span><span class="op" id="1742274">)</span><br>
<span class="lineno"></span><span class="op" id="1742276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1742279">//&nbsp;Entry&nbsp;returns&nbsp;the&nbsp;entry&nbsp;address&nbsp;of&nbsp;the&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="1742331">func</span>&nbsp;<span class="op" id="1742336">(</span><span class="ident" id="1742337">f</span>&nbsp;<span class="op" id="1742339">*</span><span class="ident" id="1742340">Func</span><span class="op" id="1742344">)</span>&nbsp;<span class="ident" id="1742346">Entry</span><span class="op" id="1742351">(</span><span class="op" id="1742352">)</span>&nbsp;<span class="builtintype" id="1742354">uintptr</span>&nbsp;<span class="op" id="1742362">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742365">return</span>&nbsp;<span class="ident" id="1742372">f</span><span class="op" id="1742373">.</span><span class="ident" id="1742374">raw</span><span class="op" id="1742377">(</span><span class="op" id="1742378">)</span><span class="op" id="1742379">.</span><span class="ident" id="1742380">entry</span><br>
<span class="lineno"></span><span class="op" id="1742386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1742389">//&nbsp;FileLine&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1742446">//&nbsp;source&nbsp;code&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;program&nbsp;counter&nbsp;pc.</span><br>
<span class="lineno">120</span><span class="comment" id="1742502">//&nbsp;The&nbsp;result&nbsp;will&nbsp;not&nbsp;be&nbsp;accurate&nbsp;if&nbsp;pc&nbsp;is&nbsp;not&nbsp;a&nbsp;program</span><br>
<span class="lineno"></span><span class="comment" id="1742560">//&nbsp;counter&nbsp;within&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="1742581">func</span>&nbsp;<span class="op" id="1742586">(</span><span class="ident" id="1742587">f</span>&nbsp;<span class="op" id="1742589">*</span><span class="ident" id="1742590">Func</span><span class="op" id="1742594">)</span>&nbsp;<span class="ident" id="1742596">FileLine</span><span class="op" id="1742604">(</span><span class="ident" id="1742605">pc</span>&nbsp;<span class="builtintype" id="1742608">uintptr</span><span class="op" id="1742615">)</span>&nbsp;<span class="op" id="1742617">(</span><span class="ident" id="1742618">file</span>&nbsp;<span class="builtintype" id="1742623">string</span><span class="op" id="1742629">,</span>&nbsp;<span class="ident" id="1742631">line</span>&nbsp;<span class="builtintype" id="1742636">int</span><span class="op" id="1742639">)</span>&nbsp;<span class="op" id="1742641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1742644">//&nbsp;Pass&nbsp;strict=false&nbsp;here,&nbsp;because&nbsp;anyone&nbsp;can&nbsp;call&nbsp;this&nbsp;function,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1742711">//&nbsp;and&nbsp;they&nbsp;might&nbsp;just&nbsp;be&nbsp;wrong&nbsp;about&nbsp;targetpc&nbsp;belonging&nbsp;to&nbsp;f.</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1742775">line</span>&nbsp;<span class="op" id="1742780">=</span>&nbsp;<span class="builtintype" id="1742782">int</span><span class="op" id="1742785">(</span><span class="ident" id="1742786">funcline1</span><span class="op" id="1742795">(</span><span class="ident" id="1742796">f</span><span class="op" id="1742797">.</span><span class="ident" id="1742798">raw</span><span class="op" id="1742801">(</span><span class="op" id="1742802">)</span><span class="op" id="1742803">,</span>&nbsp;<span class="ident" id="1742805">pc</span><span class="op" id="1742807">,</span>&nbsp;<span class="op" id="1742809">&amp;</span><span class="ident" id="1742810">file</span><span class="op" id="1742814">,</span>&nbsp;<span class="builtintype" id="1742816">false</span><span class="op" id="1742821">)</span><span class="op" id="1742822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742825">return</span>&nbsp;<span class="ident" id="1742832">file</span><span class="op" id="1742836">,</span>&nbsp;<span class="ident" id="1742838">line</span><br>
<span class="lineno"></span><span class="op" id="1742843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1742846">func</span>&nbsp;<span class="ident" id="1742851">findfunc</span><span class="op" id="1742859">(</span><span class="ident" id="1742860">pc</span>&nbsp;<span class="builtintype" id="1742863">uintptr</span><span class="op" id="1742870">)</span>&nbsp;<span class="op" id="1742872">*</span><span class="ident" id="1742873">_func</span>&nbsp;<span class="op" id="1742879">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742882">if</span>&nbsp;<span class="builtinfunc" id="1742885">len</span><span class="op" id="1742888">(</span><span class="ident" id="1742889">ftab</span><span class="op" id="1742893">)</span>&nbsp;<span class="op" id="1742895">==</span>&nbsp;<span class="num" id="1742898">0</span>&nbsp;<span class="op" id="1742900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742904">return</span>&nbsp;<span class="ident" id="1742911">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1742916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742920">if</span>&nbsp;<span class="ident" id="1742923">pc</span>&nbsp;<span class="op" id="1742926">&lt;</span>&nbsp;<span class="ident" id="1742928">ftab</span><span class="op" id="1742932">[</span><span class="num" id="1742933">0</span><span class="op" id="1742934">]</span><span class="op" id="1742935">.</span><span class="ident" id="1742936">entry</span>&nbsp;<span class="op" id="1742942">||</span>&nbsp;<span class="ident" id="1742945">pc</span>&nbsp;<span class="op" id="1742948">&gt;=</span>&nbsp;<span class="ident" id="1742951">ftab</span><span class="op" id="1742955">[</span><span class="builtinfunc" id="1742956">len</span><span class="op" id="1742959">(</span><span class="ident" id="1742960">ftab</span><span class="op" id="1742964">)</span><span class="op" id="1742965">-</span><span class="num" id="1742966">1</span><span class="op" id="1742967">]</span><span class="op" id="1742968">.</span><span class="ident" id="1742969">entry</span>&nbsp;<span class="op" id="1742975">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1742979">return</span>&nbsp;<span class="ident" id="1742986">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1742991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1742995">//&nbsp;binary&nbsp;search&nbsp;to&nbsp;find&nbsp;func&nbsp;with&nbsp;entry&nbsp;&lt;=&nbsp;pc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743044">lo</span>&nbsp;<span class="op" id="1743047">:=</span>&nbsp;<span class="num" id="1743050">0</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743053">nf</span>&nbsp;<span class="op" id="1743056">:=</span>&nbsp;<span class="builtinfunc" id="1743059">len</span><span class="op" id="1743062">(</span><span class="ident" id="1743063">ftab</span><span class="op" id="1743067">)</span>&nbsp;<span class="op" id="1743069">-</span>&nbsp;<span class="num" id="1743071">1</span>&nbsp;<span class="comment" id="1743073">//&nbsp;last&nbsp;entry&nbsp;is&nbsp;sentinel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743100">for</span>&nbsp;<span class="ident" id="1743104">nf</span>&nbsp;<span class="op" id="1743107">&gt;</span>&nbsp;<span class="num" id="1743109">0</span>&nbsp;<span class="op" id="1743111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743115">n</span>&nbsp;<span class="op" id="1743117">:=</span>&nbsp;<span class="ident" id="1743120">nf</span>&nbsp;<span class="op" id="1743123">/</span>&nbsp;<span class="num" id="1743125">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743129">f</span>&nbsp;<span class="op" id="1743131">:=</span>&nbsp;<span class="op" id="1743134">&amp;</span><span class="ident" id="1743135">ftab</span><span class="op" id="1743139">[</span><span class="ident" id="1743140">lo</span><span class="op" id="1743142">+</span><span class="ident" id="1743143">n</span><span class="op" id="1743144">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743148">if</span>&nbsp;<span class="ident" id="1743151">f</span><span class="op" id="1743152">.</span><span class="ident" id="1743153">entry</span>&nbsp;<span class="op" id="1743159">&lt;=</span>&nbsp;<span class="ident" id="1743162">pc</span>&nbsp;<span class="op" id="1743165">&amp;&amp;</span>&nbsp;<span class="ident" id="1743168">pc</span>&nbsp;<span class="op" id="1743171">&lt;</span>&nbsp;<span class="ident" id="1743173">ftab</span><span class="op" id="1743177">[</span><span class="ident" id="1743178">lo</span><span class="op" id="1743180">+</span><span class="ident" id="1743181">n</span><span class="op" id="1743182">+</span><span class="num" id="1743183">1</span><span class="op" id="1743184">]</span><span class="op" id="1743185">.</span><span class="ident" id="1743186">entry</span>&nbsp;<span class="op" id="1743192">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743197">return</span>&nbsp;<span class="op" id="1743204">(</span><span class="op" id="1743205">*</span><span class="ident" id="1743206">_func</span><span class="op" id="1743211">)</span><span class="op" id="1743212">(</span><span class="ident" id="1743213">unsafe</span><span class="op" id="1743219">.</span><span class="ident" id="1743220">Pointer</span><span class="op" id="1743227">(</span><span class="op" id="1743228">&amp;</span><span class="ident" id="1743229">pclntable</span><span class="op" id="1743238">[</span><span class="ident" id="1743239">f</span><span class="op" id="1743240">.</span><span class="ident" id="1743241">funcoff</span><span class="op" id="1743248">]</span><span class="op" id="1743249">)</span><span class="op" id="1743250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743254">}</span>&nbsp;<span class="keyword" id="1743256">else</span>&nbsp;<span class="keyword" id="1743261">if</span>&nbsp;<span class="ident" id="1743264">pc</span>&nbsp;<span class="op" id="1743267">&lt;</span>&nbsp;<span class="ident" id="1743269">f</span><span class="op" id="1743270">.</span><span class="ident" id="1743271">entry</span>&nbsp;<span class="op" id="1743277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743282">nf</span>&nbsp;<span class="op" id="1743285">=</span>&nbsp;<span class="ident" id="1743287">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743291">}</span>&nbsp;<span class="keyword" id="1743293">else</span>&nbsp;<span class="op" id="1743298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743303">lo</span>&nbsp;<span class="op" id="1743306">+=</span>&nbsp;<span class="ident" id="1743309">n</span>&nbsp;<span class="op" id="1743311">+</span>&nbsp;<span class="num" id="1743313">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743318">nf</span>&nbsp;<span class="op" id="1743321">-=</span>&nbsp;<span class="ident" id="1743324">n</span>&nbsp;<span class="op" id="1743326">+</span>&nbsp;<span class="num" id="1743328">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743339">gothrow</span><span class="op" id="1743346">(</span><span class="string" id="1743347">&#34;findfunc:&nbsp;binary&nbsp;search&nbsp;failed&#34;</span><span class="op" id="1743379">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743382">return</span>&nbsp;<span class="ident" id="1743389">nil</span><br>
<span class="lineno"></span><span class="op" id="1743393">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1743396">func</span>&nbsp;<span class="ident" id="1743401">pcvalue</span><span class="op" id="1743408">(</span><span class="ident" id="1743409">f</span>&nbsp;<span class="op" id="1743411">*</span><span class="ident" id="1743412">_func</span><span class="op" id="1743417">,</span>&nbsp;<span class="ident" id="1743419">off</span>&nbsp;<span class="builtintype" id="1743423">int32</span><span class="op" id="1743428">,</span>&nbsp;<span class="ident" id="1743430">targetpc</span>&nbsp;<span class="builtintype" id="1743439">uintptr</span><span class="op" id="1743446">,</span>&nbsp;<span class="ident" id="1743448">strict</span>&nbsp;<span class="builtintype" id="1743455">bool</span><span class="op" id="1743459">)</span>&nbsp;<span class="builtintype" id="1743461">int32</span>&nbsp;<span class="op" id="1743467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743470">if</span>&nbsp;<span class="ident" id="1743473">off</span>&nbsp;<span class="op" id="1743477">==</span>&nbsp;<span class="num" id="1743480">0</span>&nbsp;<span class="op" id="1743482">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743486">return</span>&nbsp;<span class="op" id="1743493">-</span><span class="num" id="1743494">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743500">p</span>&nbsp;<span class="op" id="1743502">:=</span>&nbsp;<span class="ident" id="1743505">pclntable</span><span class="op" id="1743514">[</span><span class="ident" id="1743515">off</span><span class="op" id="1743518">:</span><span class="op" id="1743519">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743522">pc</span>&nbsp;<span class="op" id="1743525">:=</span>&nbsp;<span class="ident" id="1743528">f</span><span class="op" id="1743529">.</span><span class="ident" id="1743530">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743537">val</span>&nbsp;<span class="op" id="1743541">:=</span>&nbsp;<span class="builtintype" id="1743544">int32</span><span class="op" id="1743549">(</span><span class="op" id="1743550">-</span><span class="num" id="1743551">1</span><span class="op" id="1743552">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743555">for</span>&nbsp;<span class="op" id="1743559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743563">var</span>&nbsp;<span class="ident" id="1743567">ok</span>&nbsp;<span class="builtintype" id="1743570">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743577">p</span><span class="op" id="1743578">,</span>&nbsp;<span class="ident" id="1743580">ok</span>&nbsp;<span class="op" id="1743583">=</span>&nbsp;<span class="ident" id="1743585">step</span><span class="op" id="1743589">(</span><span class="ident" id="1743590">p</span><span class="op" id="1743591">,</span>&nbsp;<span class="op" id="1743593">&amp;</span><span class="ident" id="1743594">pc</span><span class="op" id="1743596">,</span>&nbsp;<span class="op" id="1743598">&amp;</span><span class="ident" id="1743599">val</span><span class="op" id="1743602">,</span>&nbsp;<span class="ident" id="1743604">pc</span>&nbsp;<span class="op" id="1743607">==</span>&nbsp;<span class="ident" id="1743610">f</span><span class="op" id="1743611">.</span><span class="ident" id="1743612">entry</span><span class="op" id="1743617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743621">if</span>&nbsp;<span class="op" id="1743624">!</span><span class="ident" id="1743625">ok</span>&nbsp;<span class="op" id="1743628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743633">break</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743645">if</span>&nbsp;<span class="ident" id="1743648">targetpc</span>&nbsp;<span class="op" id="1743657">&lt;</span>&nbsp;<span class="ident" id="1743659">pc</span>&nbsp;<span class="op" id="1743662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743667">return</span>&nbsp;<span class="ident" id="1743674">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743683">}</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1743687">//&nbsp;If&nbsp;there&nbsp;was&nbsp;a&nbsp;table,&nbsp;it&nbsp;should&nbsp;have&nbsp;covered&nbsp;all&nbsp;program&nbsp;counters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1743758">//&nbsp;If&nbsp;not,&nbsp;something&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743790">if</span>&nbsp;<span class="ident" id="1743793">panicking</span>&nbsp;<span class="op" id="1743803">!=</span>&nbsp;<span class="num" id="1743806">0</span>&nbsp;<span class="op" id="1743808">||</span>&nbsp;<span class="op" id="1743811">!</span><span class="ident" id="1743812">strict</span>&nbsp;<span class="op" id="1743819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1743823">return</span>&nbsp;<span class="op" id="1743830">-</span><span class="num" id="1743831">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1743834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1743838">print</span><span class="op" id="1743843">(</span><span class="string" id="1743844">&#34;runtime:&nbsp;invalid&nbsp;pc-encoded&nbsp;table&nbsp;f=&#34;</span><span class="op" id="1743882">,</span>&nbsp;<span class="ident" id="1743884">gofuncname</span><span class="op" id="1743894">(</span><span class="ident" id="1743895">f</span><span class="op" id="1743896">)</span><span class="op" id="1743897">,</span>&nbsp;<span class="string" id="1743899">&#34;&nbsp;pc=&#34;</span><span class="op" id="1743905">,</span>&nbsp;<span class="ident" id="1743907">hex</span><span class="op" id="1743910">(</span><span class="ident" id="1743911">pc</span><span class="op" id="1743913">)</span><span class="op" id="1743914">,</span>&nbsp;<span class="string" id="1743916">&#34;&nbsp;targetpc=&#34;</span><span class="op" id="1743928">,</span>&nbsp;<span class="ident" id="1743930">hex</span><span class="op" id="1743933">(</span><span class="ident" id="1743934">targetpc</span><span class="op" id="1743942">)</span><span class="op" id="1743943">,</span>&nbsp;<span class="string" id="1743945">&#34;&nbsp;tab=&#34;</span><span class="op" id="1743952">,</span>&nbsp;<span class="ident" id="1743954">p</span><span class="op" id="1743955">,</span>&nbsp;<span class="string" id="1743957">&#34;\n&#34;</span><span class="op" id="1743961">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743965">p</span>&nbsp;<span class="op" id="1743967">=</span>&nbsp;<span class="ident" id="1743969">pclntable</span><span class="op" id="1743978">[</span><span class="ident" id="1743979">off</span><span class="op" id="1743982">:</span><span class="op" id="1743983">]</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1743986">pc</span>&nbsp;<span class="op" id="1743989">=</span>&nbsp;<span class="ident" id="1743991">f</span><span class="op" id="1743992">.</span><span class="ident" id="1743993">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744000">val</span>&nbsp;<span class="op" id="1744004">=</span>&nbsp;<span class="op" id="1744006">-</span><span class="num" id="1744007">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744010">for</span>&nbsp;<span class="op" id="1744014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744018">var</span>&nbsp;<span class="ident" id="1744022">ok</span>&nbsp;<span class="builtintype" id="1744025">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744032">p</span><span class="op" id="1744033">,</span>&nbsp;<span class="ident" id="1744035">ok</span>&nbsp;<span class="op" id="1744038">=</span>&nbsp;<span class="ident" id="1744040">step</span><span class="op" id="1744044">(</span><span class="ident" id="1744045">p</span><span class="op" id="1744046">,</span>&nbsp;<span class="op" id="1744048">&amp;</span><span class="ident" id="1744049">pc</span><span class="op" id="1744051">,</span>&nbsp;<span class="op" id="1744053">&amp;</span><span class="ident" id="1744054">val</span><span class="op" id="1744057">,</span>&nbsp;<span class="ident" id="1744059">pc</span>&nbsp;<span class="op" id="1744062">==</span>&nbsp;<span class="ident" id="1744065">f</span><span class="op" id="1744066">.</span><span class="ident" id="1744067">entry</span><span class="op" id="1744072">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744076">if</span>&nbsp;<span class="op" id="1744079">!</span><span class="ident" id="1744080">ok</span>&nbsp;<span class="op" id="1744083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744088">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1744096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1744100">print</span><span class="op" id="1744105">(</span><span class="string" id="1744106">&#34;\tvalue=&#34;</span><span class="op" id="1744116">,</span>&nbsp;<span class="ident" id="1744118">val</span><span class="op" id="1744121">,</span>&nbsp;<span class="string" id="1744123">&#34;&nbsp;until&nbsp;pc=&#34;</span><span class="op" id="1744135">,</span>&nbsp;<span class="ident" id="1744137">hex</span><span class="op" id="1744140">(</span><span class="ident" id="1744141">pc</span><span class="op" id="1744143">)</span><span class="op" id="1744144">,</span>&nbsp;<span class="string" id="1744146">&#34;\n&#34;</span><span class="op" id="1744150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1744153">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744157">gothrow</span><span class="op" id="1744164">(</span><span class="string" id="1744165">&#34;invalid&nbsp;runtime&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="1744195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744198">return</span>&nbsp;<span class="op" id="1744205">-</span><span class="num" id="1744206">1</span><br>
<span class="lineno"></span><span class="op" id="1744208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="1744211">func</span>&nbsp;<span class="ident" id="1744216">funcname</span><span class="op" id="1744224">(</span><span class="ident" id="1744225">f</span>&nbsp;<span class="op" id="1744227">*</span><span class="ident" id="1744228">_func</span><span class="op" id="1744233">)</span>&nbsp;<span class="op" id="1744235">*</span><span class="builtintype" id="1744236">byte</span>&nbsp;<span class="op" id="1744241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744244">if</span>&nbsp;<span class="ident" id="1744247">f</span>&nbsp;<span class="op" id="1744249">==</span>&nbsp;<span class="ident" id="1744252">nil</span>&nbsp;<span class="op" id="1744256">||</span>&nbsp;<span class="ident" id="1744259">f</span><span class="op" id="1744260">.</span><span class="ident" id="1744261">nameoff</span>&nbsp;<span class="op" id="1744269">==</span>&nbsp;<span class="num" id="1744272">0</span>&nbsp;<span class="op" id="1744274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744278">return</span>&nbsp;<span class="ident" id="1744285">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1744290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744293">return</span>&nbsp;<span class="op" id="1744300">(</span><span class="op" id="1744301">*</span><span class="builtintype" id="1744302">byte</span><span class="op" id="1744306">)</span><span class="op" id="1744307">(</span><span class="ident" id="1744308">unsafe</span><span class="op" id="1744314">.</span><span class="ident" id="1744315">Pointer</span><span class="op" id="1744322">(</span><span class="op" id="1744323">&amp;</span><span class="ident" id="1744324">pclntable</span><span class="op" id="1744333">[</span><span class="ident" id="1744334">f</span><span class="op" id="1744335">.</span><span class="ident" id="1744336">nameoff</span><span class="op" id="1744343">]</span><span class="op" id="1744344">)</span><span class="op" id="1744345">)</span><br>
<span class="lineno">205</span><span class="op" id="1744347">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1744350">func</span>&nbsp;<span class="ident" id="1744355">gofuncname</span><span class="op" id="1744365">(</span><span class="ident" id="1744366">f</span>&nbsp;<span class="op" id="1744368">*</span><span class="ident" id="1744369">_func</span><span class="op" id="1744374">)</span>&nbsp;<span class="builtintype" id="1744376">string</span>&nbsp;<span class="op" id="1744383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744386">return</span>&nbsp;<span class="ident" id="1744393">gostringnocopy</span><span class="op" id="1744407">(</span><span class="ident" id="1744408">funcname</span><span class="op" id="1744416">(</span><span class="ident" id="1744417">f</span><span class="op" id="1744418">)</span><span class="op" id="1744419">)</span><br>
<span class="lineno"></span><span class="op" id="1744421">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1744424">func</span>&nbsp;<span class="ident" id="1744429">funcline1</span><span class="op" id="1744438">(</span><span class="ident" id="1744439">f</span>&nbsp;<span class="op" id="1744441">*</span><span class="ident" id="1744442">_func</span><span class="op" id="1744447">,</span>&nbsp;<span class="ident" id="1744449">targetpc</span>&nbsp;<span class="builtintype" id="1744458">uintptr</span><span class="op" id="1744465">,</span>&nbsp;<span class="ident" id="1744467">file</span>&nbsp;<span class="op" id="1744472">*</span><span class="builtintype" id="1744473">string</span><span class="op" id="1744479">,</span>&nbsp;<span class="ident" id="1744481">strict</span>&nbsp;<span class="builtintype" id="1744488">bool</span><span class="op" id="1744492">)</span>&nbsp;<span class="builtintype" id="1744494">int32</span>&nbsp;<span class="op" id="1744500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1744503">*</span><span class="ident" id="1744504">file</span>&nbsp;<span class="op" id="1744509">=</span>&nbsp;<span class="string" id="1744511">&#34;?&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744516">fileno</span>&nbsp;<span class="op" id="1744523">:=</span>&nbsp;<span class="builtintype" id="1744526">int</span><span class="op" id="1744529">(</span><span class="ident" id="1744530">pcvalue</span><span class="op" id="1744537">(</span><span class="ident" id="1744538">f</span><span class="op" id="1744539">,</span>&nbsp;<span class="ident" id="1744541">f</span><span class="op" id="1744542">.</span><span class="ident" id="1744543">pcfile</span><span class="op" id="1744549">,</span>&nbsp;<span class="ident" id="1744551">targetpc</span><span class="op" id="1744559">,</span>&nbsp;<span class="ident" id="1744561">strict</span><span class="op" id="1744567">)</span><span class="op" id="1744568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1744571">line</span>&nbsp;<span class="op" id="1744576">:=</span>&nbsp;<span class="ident" id="1744579">pcvalue</span><span class="op" id="1744586">(</span><span class="ident" id="1744587">f</span><span class="op" id="1744588">,</span>&nbsp;<span class="ident" id="1744590">f</span><span class="op" id="1744591">.</span><span class="ident" id="1744592">pcln</span><span class="op" id="1744596">,</span>&nbsp;<span class="ident" id="1744598">targetpc</span><span class="op" id="1744606">,</span>&nbsp;<span class="ident" id="1744608">strict</span><span class="op" id="1744614">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744617">if</span>&nbsp;<span class="ident" id="1744620">fileno</span>&nbsp;<span class="op" id="1744627">==</span>&nbsp;<span class="op" id="1744630">-</span><span class="num" id="1744631">1</span>&nbsp;<span class="op" id="1744633">||</span>&nbsp;<span class="ident" id="1744636">line</span>&nbsp;<span class="op" id="1744641">==</span>&nbsp;<span class="op" id="1744644">-</span><span class="num" id="1744645">1</span>&nbsp;<span class="op" id="1744647">||</span>&nbsp;<span class="ident" id="1744650">fileno</span>&nbsp;<span class="op" id="1744657">&gt;=</span>&nbsp;<span class="builtinfunc" id="1744660">len</span><span class="op" id="1744663">(</span><span class="ident" id="1744664">filetab</span><span class="op" id="1744671">)</span>&nbsp;<span class="op" id="1744673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1744677">//&nbsp;print(&#34;looking&nbsp;for&nbsp;&#34;,&nbsp;hex(targetpc),&nbsp;&#34;&nbsp;in&nbsp;&#34;,&nbsp;gofuncname(f),&nbsp;&#34;&nbsp;got&nbsp;file=&#34;,&nbsp;fileno,&nbsp;&#34;&nbsp;line=&#34;,&nbsp;lineno,&nbsp;&#34;\n&#34;)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744788">return</span>&nbsp;<span class="num" id="1744795">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1744798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1744801">*</span><span class="ident" id="1744802">file</span>&nbsp;<span class="op" id="1744807">=</span>&nbsp;<span class="ident" id="1744809">gostringnocopy</span><span class="op" id="1744823">(</span><span class="op" id="1744824">&amp;</span><span class="ident" id="1744825">pclntable</span><span class="op" id="1744834">[</span><span class="ident" id="1744835">filetab</span><span class="op" id="1744842">[</span><span class="ident" id="1744843">fileno</span><span class="op" id="1744849">]</span><span class="op" id="1744850">]</span><span class="op" id="1744851">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744854">return</span>&nbsp;<span class="ident" id="1744861">line</span><br>
<span class="lineno"></span><span class="op" id="1744866">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1744869">func</span>&nbsp;<span class="ident" id="1744874">funcline</span><span class="op" id="1744882">(</span><span class="ident" id="1744883">f</span>&nbsp;<span class="op" id="1744885">*</span><span class="ident" id="1744886">_func</span><span class="op" id="1744891">,</span>&nbsp;<span class="ident" id="1744893">targetpc</span>&nbsp;<span class="builtintype" id="1744902">uintptr</span><span class="op" id="1744909">,</span>&nbsp;<span class="ident" id="1744911">file</span>&nbsp;<span class="op" id="1744916">*</span><span class="builtintype" id="1744917">string</span><span class="op" id="1744923">)</span>&nbsp;<span class="builtintype" id="1744925">int32</span>&nbsp;<span class="op" id="1744931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1744934">return</span>&nbsp;<span class="ident" id="1744941">funcline1</span><span class="op" id="1744950">(</span><span class="ident" id="1744951">f</span><span class="op" id="1744952">,</span>&nbsp;<span class="ident" id="1744954">targetpc</span><span class="op" id="1744962">,</span>&nbsp;<span class="ident" id="1744964">file</span><span class="op" id="1744968">,</span>&nbsp;<span class="builtintype" id="1744970">true</span><span class="op" id="1744974">)</span><br>
<span class="lineno">225</span><span class="op" id="1744976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1744979">func</span>&nbsp;<span class="ident" id="1744984">funcspdelta</span><span class="op" id="1744995">(</span><span class="ident" id="1744996">f</span>&nbsp;<span class="op" id="1744998">*</span><span class="ident" id="1744999">_func</span><span class="op" id="1745004">,</span>&nbsp;<span class="ident" id="1745006">targetpc</span>&nbsp;<span class="builtintype" id="1745015">uintptr</span><span class="op" id="1745022">)</span>&nbsp;<span class="builtintype" id="1745024">int32</span>&nbsp;<span class="op" id="1745030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745033">x</span>&nbsp;<span class="op" id="1745035">:=</span>&nbsp;<span class="ident" id="1745038">pcvalue</span><span class="op" id="1745045">(</span><span class="ident" id="1745046">f</span><span class="op" id="1745047">,</span>&nbsp;<span class="ident" id="1745049">f</span><span class="op" id="1745050">.</span><span class="ident" id="1745051">pcsp</span><span class="op" id="1745055">,</span>&nbsp;<span class="ident" id="1745057">targetpc</span><span class="op" id="1745065">,</span>&nbsp;<span class="builtintype" id="1745067">true</span><span class="op" id="1745071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745074">if</span>&nbsp;<span class="ident" id="1745077">x</span><span class="op" id="1745078">&amp;</span><span class="op" id="1745079">(</span><span class="ident" id="1745080">ptrSize</span><span class="op" id="1745087">-</span><span class="num" id="1745088">1</span><span class="op" id="1745089">)</span>&nbsp;<span class="op" id="1745091">!=</span>&nbsp;<span class="num" id="1745094">0</span>&nbsp;<span class="op" id="1745096">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1745100">print</span><span class="op" id="1745105">(</span><span class="string" id="1745106">&#34;invalid&nbsp;spdelta&nbsp;&#34;</span><span class="op" id="1745124">,</span>&nbsp;<span class="ident" id="1745126">hex</span><span class="op" id="1745129">(</span><span class="ident" id="1745130">f</span><span class="op" id="1745131">.</span><span class="ident" id="1745132">entry</span><span class="op" id="1745137">)</span><span class="op" id="1745138">,</span>&nbsp;<span class="string" id="1745140">&#34;&nbsp;&#34;</span><span class="op" id="1745143">,</span>&nbsp;<span class="ident" id="1745145">hex</span><span class="op" id="1745148">(</span><span class="ident" id="1745149">targetpc</span><span class="op" id="1745157">)</span><span class="op" id="1745158">,</span>&nbsp;<span class="string" id="1745160">&#34;&nbsp;&#34;</span><span class="op" id="1745163">,</span>&nbsp;<span class="ident" id="1745165">hex</span><span class="op" id="1745168">(</span><span class="ident" id="1745169">f</span><span class="op" id="1745170">.</span><span class="ident" id="1745171">pcsp</span><span class="op" id="1745175">)</span><span class="op" id="1745176">,</span>&nbsp;<span class="string" id="1745178">&#34;&nbsp;&#34;</span><span class="op" id="1745181">,</span>&nbsp;<span class="ident" id="1745183">x</span><span class="op" id="1745184">,</span>&nbsp;<span class="string" id="1745186">&#34;\n&#34;</span><span class="op" id="1745190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745196">return</span>&nbsp;<span class="ident" id="1745203">x</span><br>
<span class="lineno"></span><span class="op" id="1745205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="1745208">func</span>&nbsp;<span class="ident" id="1745213">pcdatavalue</span><span class="op" id="1745224">(</span><span class="ident" id="1745225">f</span>&nbsp;<span class="op" id="1745227">*</span><span class="ident" id="1745228">_func</span><span class="op" id="1745233">,</span>&nbsp;<span class="ident" id="1745235">table</span>&nbsp;<span class="builtintype" id="1745241">int32</span><span class="op" id="1745246">,</span>&nbsp;<span class="ident" id="1745248">targetpc</span>&nbsp;<span class="builtintype" id="1745257">uintptr</span><span class="op" id="1745264">)</span>&nbsp;<span class="builtintype" id="1745266">int32</span>&nbsp;<span class="op" id="1745272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745275">if</span>&nbsp;<span class="ident" id="1745278">table</span>&nbsp;<span class="op" id="1745284">&lt;</span>&nbsp;<span class="num" id="1745286">0</span>&nbsp;<span class="op" id="1745288">||</span>&nbsp;<span class="ident" id="1745291">table</span>&nbsp;<span class="op" id="1745297">&gt;=</span>&nbsp;<span class="ident" id="1745300">f</span><span class="op" id="1745301">.</span><span class="ident" id="1745302">npcdata</span>&nbsp;<span class="op" id="1745310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745314">return</span>&nbsp;<span class="op" id="1745321">-</span><span class="num" id="1745322">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745328">off</span>&nbsp;<span class="op" id="1745332">:=</span>&nbsp;<span class="op" id="1745335">*</span><span class="op" id="1745336">(</span><span class="op" id="1745337">*</span><span class="builtintype" id="1745338">int32</span><span class="op" id="1745343">)</span><span class="op" id="1745344">(</span><span class="ident" id="1745345">add</span><span class="op" id="1745348">(</span><span class="ident" id="1745349">unsafe</span><span class="op" id="1745355">.</span><span class="ident" id="1745356">Pointer</span><span class="op" id="1745363">(</span><span class="op" id="1745364">&amp;</span><span class="ident" id="1745365">f</span><span class="op" id="1745366">.</span><span class="ident" id="1745367">nfuncdata</span><span class="op" id="1745376">)</span><span class="op" id="1745377">,</span>&nbsp;<span class="ident" id="1745379">unsafe</span><span class="op" id="1745385">.</span><span class="ident" id="1745386">Sizeof</span><span class="op" id="1745392">(</span><span class="ident" id="1745393">f</span><span class="op" id="1745394">.</span><span class="ident" id="1745395">nfuncdata</span><span class="op" id="1745404">)</span><span class="op" id="1745405">+</span><span class="builtintype" id="1745406">uintptr</span><span class="op" id="1745413">(</span><span class="ident" id="1745414">table</span><span class="op" id="1745419">)</span><span class="op" id="1745420">*</span><span class="num" id="1745421">4</span><span class="op" id="1745422">)</span><span class="op" id="1745423">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745426">return</span>&nbsp;<span class="ident" id="1745433">pcvalue</span><span class="op" id="1745440">(</span><span class="ident" id="1745441">f</span><span class="op" id="1745442">,</span>&nbsp;<span class="ident" id="1745444">off</span><span class="op" id="1745447">,</span>&nbsp;<span class="ident" id="1745449">targetpc</span><span class="op" id="1745457">,</span>&nbsp;<span class="builtintype" id="1745459">true</span><span class="op" id="1745463">)</span><br>
<span class="lineno"></span><span class="op" id="1745465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1745468">func</span>&nbsp;<span class="ident" id="1745473">funcdata</span><span class="op" id="1745481">(</span><span class="ident" id="1745482">f</span>&nbsp;<span class="op" id="1745484">*</span><span class="ident" id="1745485">_func</span><span class="op" id="1745490">,</span>&nbsp;<span class="ident" id="1745492">i</span>&nbsp;<span class="builtintype" id="1745494">int32</span><span class="op" id="1745499">)</span>&nbsp;<span class="ident" id="1745501">unsafe</span><span class="op" id="1745507">.</span><span class="ident" id="1745508">Pointer</span>&nbsp;<span class="op" id="1745516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745519">if</span>&nbsp;<span class="ident" id="1745522">i</span>&nbsp;<span class="op" id="1745524">&lt;</span>&nbsp;<span class="num" id="1745526">0</span>&nbsp;<span class="op" id="1745528">||</span>&nbsp;<span class="ident" id="1745531">i</span>&nbsp;<span class="op" id="1745533">&gt;=</span>&nbsp;<span class="ident" id="1745536">f</span><span class="op" id="1745537">.</span><span class="ident" id="1745538">nfuncdata</span>&nbsp;<span class="op" id="1745548">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745552">return</span>&nbsp;<span class="ident" id="1745559">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745567">p</span>&nbsp;<span class="op" id="1745569">:=</span>&nbsp;<span class="ident" id="1745572">add</span><span class="op" id="1745575">(</span><span class="ident" id="1745576">unsafe</span><span class="op" id="1745582">.</span><span class="ident" id="1745583">Pointer</span><span class="op" id="1745590">(</span><span class="op" id="1745591">&amp;</span><span class="ident" id="1745592">f</span><span class="op" id="1745593">.</span><span class="ident" id="1745594">nfuncdata</span><span class="op" id="1745603">)</span><span class="op" id="1745604">,</span>&nbsp;<span class="ident" id="1745606">unsafe</span><span class="op" id="1745612">.</span><span class="ident" id="1745613">Sizeof</span><span class="op" id="1745619">(</span><span class="ident" id="1745620">f</span><span class="op" id="1745621">.</span><span class="ident" id="1745622">nfuncdata</span><span class="op" id="1745631">)</span><span class="op" id="1745632">+</span><span class="builtintype" id="1745633">uintptr</span><span class="op" id="1745640">(</span><span class="ident" id="1745641">f</span><span class="op" id="1745642">.</span><span class="ident" id="1745643">npcdata</span><span class="op" id="1745650">)</span><span class="op" id="1745651">*</span><span class="num" id="1745652">4</span><span class="op" id="1745653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745656">if</span>&nbsp;<span class="ident" id="1745659">ptrSize</span>&nbsp;<span class="op" id="1745667">==</span>&nbsp;<span class="num" id="1745670">8</span>&nbsp;<span class="op" id="1745672">&amp;&amp;</span>&nbsp;<span class="builtintype" id="1745675">uintptr</span><span class="op" id="1745682">(</span><span class="ident" id="1745683">p</span><span class="op" id="1745684">)</span><span class="op" id="1745685">&amp;</span><span class="num" id="1745686">4</span>&nbsp;<span class="op" id="1745688">!=</span>&nbsp;<span class="num" id="1745691">0</span>&nbsp;<span class="op" id="1745693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745697">if</span>&nbsp;<span class="builtintype" id="1745700">uintptr</span><span class="op" id="1745707">(</span><span class="ident" id="1745708">unsafe</span><span class="op" id="1745714">.</span><span class="ident" id="1745715">Pointer</span><span class="op" id="1745722">(</span><span class="ident" id="1745723">f</span><span class="op" id="1745724">)</span><span class="op" id="1745725">)</span><span class="op" id="1745726">&amp;</span><span class="num" id="1745727">4</span>&nbsp;<span class="op" id="1745729">!=</span>&nbsp;<span class="num" id="1745732">0</span>&nbsp;<span class="op" id="1745734">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1745739">println</span><span class="op" id="1745746">(</span><span class="string" id="1745747">&#34;runtime:&nbsp;misaligned&nbsp;func&#34;</span><span class="op" id="1745773">,</span>&nbsp;<span class="ident" id="1745775">f</span><span class="op" id="1745776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1745784">p</span>&nbsp;<span class="op" id="1745786">=</span>&nbsp;<span class="ident" id="1745788">add</span><span class="op" id="1745791">(</span><span class="ident" id="1745792">p</span><span class="op" id="1745793">,</span>&nbsp;<span class="num" id="1745795">4</span><span class="op" id="1745796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1745799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1745802">return</span>&nbsp;<span class="op" id="1745809">*</span><span class="op" id="1745810">(</span><span class="op" id="1745811">*</span><span class="ident" id="1745812">unsafe</span><span class="op" id="1745818">.</span><span class="ident" id="1745819">Pointer</span><span class="op" id="1745826">)</span><span class="op" id="1745827">(</span><span class="ident" id="1745828">add</span><span class="op" id="1745831">(</span><span class="ident" id="1745832">p</span><span class="op" id="1745833">,</span>&nbsp;<span class="builtintype" id="1745835">uintptr</span><span class="op" id="1745842">(</span><span class="ident" id="1745843">i</span><span class="op" id="1745844">)</span><span class="op" id="1745845">*</span><span class="ident" id="1745846">ptrSize</span><span class="op" id="1745853">)</span><span class="op" id="1745854">)</span><br>
<span class="lineno">255</span><span class="op" id="1745856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1745859">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="1745925">func</span>&nbsp;<span class="ident" id="1745930">step</span><span class="op" id="1745934">(</span><span class="ident" id="1745935">p</span>&nbsp;<span class="op" id="1745937">[</span><span class="op" id="1745938">]</span><span class="builtintype" id="1745939">byte</span><span class="op" id="1745943">,</span>&nbsp;<span class="ident" id="1745945">pc</span>&nbsp;<span class="op" id="1745948">*</span><span class="builtintype" id="1745949">uintptr</span><span class="op" id="1745956">,</span>&nbsp;<span class="ident" id="1745958">val</span>&nbsp;<span class="op" id="1745962">*</span><span class="builtintype" id="1745963">int32</span><span class="op" id="1745968">,</span>&nbsp;<span class="ident" id="1745970">first</span>&nbsp;<span class="builtintype" id="1745976">bool</span><span class="op" id="1745980">)</span>&nbsp;<span class="op" id="1745982">(</span><span class="ident" id="1745983">newp</span>&nbsp;<span class="op" id="1745988">[</span><span class="op" id="1745989">]</span><span class="builtintype" id="1745990">byte</span><span class="op" id="1745994">,</span>&nbsp;<span class="ident" id="1745996">ok</span>&nbsp;<span class="builtintype" id="1745999">bool</span><span class="op" id="1746003">)</span>&nbsp;<span class="op" id="1746005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746008">p</span><span class="op" id="1746009">,</span>&nbsp;<span class="ident" id="1746011">uvdelta</span>&nbsp;<span class="op" id="1746019">:=</span>&nbsp;<span class="ident" id="1746022">readvarint</span><span class="op" id="1746032">(</span><span class="ident" id="1746033">p</span><span class="op" id="1746034">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746037">if</span>&nbsp;<span class="ident" id="1746040">uvdelta</span>&nbsp;<span class="op" id="1746048">==</span>&nbsp;<span class="num" id="1746051">0</span>&nbsp;<span class="op" id="1746053">&amp;&amp;</span>&nbsp;<span class="op" id="1746056">!</span><span class="ident" id="1746057">first</span>&nbsp;<span class="op" id="1746063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746067">return</span>&nbsp;<span class="ident" id="1746074">nil</span><span class="op" id="1746077">,</span>&nbsp;<span class="builtintype" id="1746079">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746089">if</span>&nbsp;<span class="ident" id="1746092">uvdelta</span><span class="op" id="1746099">&amp;</span><span class="num" id="1746100">1</span>&nbsp;<span class="op" id="1746102">!=</span>&nbsp;<span class="num" id="1746105">0</span>&nbsp;<span class="op" id="1746107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746111">uvdelta</span>&nbsp;<span class="op" id="1746119">=</span>&nbsp;<span class="op" id="1746121">^</span><span class="op" id="1746122">(</span><span class="ident" id="1746123">uvdelta</span>&nbsp;<span class="op" id="1746131">&gt;&gt;</span>&nbsp;<span class="num" id="1746134">1</span><span class="op" id="1746135">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746138">}</span>&nbsp;<span class="keyword" id="1746140">else</span>&nbsp;<span class="op" id="1746145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746149">uvdelta</span>&nbsp;<span class="op" id="1746157">&gt;&gt;=</span>&nbsp;<span class="num" id="1746161">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746167">vdelta</span>&nbsp;<span class="op" id="1746174">:=</span>&nbsp;<span class="builtintype" id="1746177">int32</span><span class="op" id="1746182">(</span><span class="ident" id="1746183">uvdelta</span><span class="op" id="1746190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746193">p</span><span class="op" id="1746194">,</span>&nbsp;<span class="ident" id="1746196">pcdelta</span>&nbsp;<span class="op" id="1746204">:=</span>&nbsp;<span class="ident" id="1746207">readvarint</span><span class="op" id="1746217">(</span><span class="ident" id="1746218">p</span><span class="op" id="1746219">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746222">*</span><span class="ident" id="1746223">pc</span>&nbsp;<span class="op" id="1746226">+=</span>&nbsp;<span class="builtintype" id="1746229">uintptr</span><span class="op" id="1746236">(</span><span class="ident" id="1746237">pcdelta</span>&nbsp;<span class="op" id="1746245">*</span>&nbsp;<span class="ident" id="1746247">_PCQuantum</span><span class="op" id="1746257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746260">*</span><span class="ident" id="1746261">val</span>&nbsp;<span class="op" id="1746265">+=</span>&nbsp;<span class="ident" id="1746268">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746276">return</span>&nbsp;<span class="ident" id="1746283">p</span><span class="op" id="1746284">,</span>&nbsp;<span class="builtintype" id="1746286">true</span><br>
<span class="lineno"></span><span class="op" id="1746291">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="1746294">//&nbsp;readvarint&nbsp;reads&nbsp;a&nbsp;varint&nbsp;from&nbsp;p.</span><br>
<span class="lineno"></span><span class="keyword" id="1746331">func</span>&nbsp;<span class="ident" id="1746336">readvarint</span><span class="op" id="1746346">(</span><span class="ident" id="1746347">p</span>&nbsp;<span class="op" id="1746349">[</span><span class="op" id="1746350">]</span><span class="builtintype" id="1746351">byte</span><span class="op" id="1746355">)</span>&nbsp;<span class="op" id="1746357">(</span><span class="ident" id="1746358">newp</span>&nbsp;<span class="op" id="1746363">[</span><span class="op" id="1746364">]</span><span class="builtintype" id="1746365">byte</span><span class="op" id="1746369">,</span>&nbsp;<span class="ident" id="1746371">val</span>&nbsp;<span class="builtintype" id="1746375">uint32</span><span class="op" id="1746381">)</span>&nbsp;<span class="op" id="1746383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746386">var</span>&nbsp;<span class="ident" id="1746390">v</span><span class="op" id="1746391">,</span>&nbsp;<span class="ident" id="1746393">shift</span>&nbsp;<span class="builtintype" id="1746399">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746407">for</span>&nbsp;<span class="op" id="1746411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746415">b</span>&nbsp;<span class="op" id="1746417">:=</span>&nbsp;<span class="ident" id="1746420">p</span><span class="op" id="1746421">[</span><span class="num" id="1746422">0</span><span class="op" id="1746423">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746427">p</span>&nbsp;<span class="op" id="1746429">=</span>&nbsp;<span class="ident" id="1746431">p</span><span class="op" id="1746432">[</span><span class="num" id="1746433">1</span><span class="op" id="1746434">:</span><span class="op" id="1746435">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746439">v</span>&nbsp;<span class="op" id="1746441">|=</span>&nbsp;<span class="op" id="1746444">(</span><span class="builtintype" id="1746445">uint32</span><span class="op" id="1746451">(</span><span class="ident" id="1746452">b</span><span class="op" id="1746453">)</span>&nbsp;<span class="op" id="1746455">&amp;</span>&nbsp;<span class="num" id="1746457">0x7F</span><span class="op" id="1746461">)</span>&nbsp;<span class="op" id="1746463">&lt;&lt;</span>&nbsp;<span class="ident" id="1746466">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746474">if</span>&nbsp;<span class="ident" id="1746477">b</span><span class="op" id="1746478">&amp;</span><span class="num" id="1746479">0x80</span>&nbsp;<span class="op" id="1746484">==</span>&nbsp;<span class="num" id="1746487">0</span>&nbsp;<span class="op" id="1746489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746494">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746502">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1746506">shift</span>&nbsp;<span class="op" id="1746512">+=</span>&nbsp;<span class="num" id="1746515">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1746518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1746521">return</span>&nbsp;<span class="ident" id="1746528">p</span><span class="op" id="1746529">,</span>&nbsp;<span class="ident" id="1746531">v</span><br>
<span class="lineno"></span><span class="op" id="1746533">}</span>
</div>
</body>
</html>
