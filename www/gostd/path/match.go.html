<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html" class="current">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3339925">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3339980">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3340034">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3340085">package</span>&nbsp;<span class="ident" id="3340093">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3340099">import</span>&nbsp;<span class="op" id="3340106">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3340109">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3340119">&#34;strings&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3340130">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3340145">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3340148">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3340209">var</span>&nbsp;<span class="ident" id="3340213">ErrBadPattern</span>&nbsp;<span class="op" id="3340227">=</span>&nbsp;<span class="ident" id="3340229">errors</span><span class="op" id="3340235">.</span><span class="ident" id="3340236">New</span><span class="op" id="3340239">(</span><span class="string" id="3340240">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3340265">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3340268">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="comment" id="3340335">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3340361">//</span><br>
<span class="lineno"></span><span class="comment" id="3340364">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno">20</span><span class="comment" id="3340376">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3340389">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno"></span><span class="comment" id="3340398">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-/&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3340455">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-/&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3340506">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno">25</span><span class="comment" id="3340546">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3340598">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3340661">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3340697">//</span><br>
<span class="lineno"></span><span class="comment" id="3340700">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno">30</span><span class="comment" id="3340720">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3340778">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3340814">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3340868">//</span><br>
<span class="lineno"></span><span class="comment" id="3340871">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno">35</span><span class="comment" id="3340941">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3341008">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="comment" id="3341025">//</span><br>
<span class="lineno"></span><span class="keyword" id="3341028">func</span>&nbsp;<span class="ident" id="3341033">Match</span><span class="op" id="3341038">(</span><span class="ident" id="3341039">pattern</span><span class="op" id="3341046">,</span>&nbsp;<span class="ident" id="3341048">name</span>&nbsp;<span class="builtintype" id="3341053">string</span><span class="op" id="3341059">)</span>&nbsp;<span class="op" id="3341061">(</span><span class="ident" id="3341062">matched</span>&nbsp;<span class="builtintype" id="3341070">bool</span><span class="op" id="3341074">,</span>&nbsp;<span class="ident" id="3341076">err</span>&nbsp;<span class="builtintype" id="3341080">error</span><span class="op" id="3341085">)</span>&nbsp;<span class="op" id="3341087">{</span><br>
<span class="lineno"></span><span class="ident" id="3341089">Pattern</span><span class="op" id="3341096">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341099">for</span>&nbsp;<span class="builtinfunc" id="3341103">len</span><span class="op" id="3341106">(</span><span class="ident" id="3341107">pattern</span><span class="op" id="3341114">)</span>&nbsp;<span class="op" id="3341116">&gt;</span>&nbsp;<span class="num" id="3341118">0</span>&nbsp;<span class="op" id="3341120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341124">var</span>&nbsp;<span class="ident" id="3341128">star</span>&nbsp;<span class="builtintype" id="3341133">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341140">var</span>&nbsp;<span class="ident" id="3341144">chunk</span>&nbsp;<span class="builtintype" id="3341150">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341159">star</span><span class="op" id="3341163">,</span>&nbsp;<span class="ident" id="3341165">chunk</span><span class="op" id="3341170">,</span>&nbsp;<span class="ident" id="3341172">pattern</span>&nbsp;<span class="op" id="3341180">=</span>&nbsp;<span class="ident" id="3341182">scanChunk</span><span class="op" id="3341191">(</span><span class="ident" id="3341192">pattern</span><span class="op" id="3341199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341203">if</span>&nbsp;<span class="ident" id="3341206">star</span>&nbsp;<span class="op" id="3341211">&amp;&amp;</span>&nbsp;<span class="ident" id="3341214">chunk</span>&nbsp;<span class="op" id="3341220">==</span>&nbsp;<span class="string" id="3341223">&#34;&#34;</span>&nbsp;<span class="op" id="3341226">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341231">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341290">return</span>&nbsp;<span class="ident" id="3341297">strings</span><span class="op" id="3341304">.</span><span class="ident" id="3341305">Index</span><span class="op" id="3341310">(</span><span class="ident" id="3341311">name</span><span class="op" id="3341315">,</span>&nbsp;<span class="string" id="3341317">&#34;/&#34;</span><span class="op" id="3341320">)</span>&nbsp;<span class="op" id="3341322">&lt;</span>&nbsp;<span class="num" id="3341324">0</span><span class="op" id="3341325">,</span>&nbsp;<span class="ident" id="3341327">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3341333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341337">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341378">t</span><span class="op" id="3341379">,</span>&nbsp;<span class="ident" id="3341381">ok</span><span class="op" id="3341383">,</span>&nbsp;<span class="ident" id="3341385">err</span>&nbsp;<span class="op" id="3341389">:=</span>&nbsp;<span class="ident" id="3341392">matchChunk</span><span class="op" id="3341402">(</span><span class="ident" id="3341403">chunk</span><span class="op" id="3341408">,</span>&nbsp;<span class="ident" id="3341410">name</span><span class="op" id="3341414">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341418">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341483">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341553">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341573">if</span>&nbsp;<span class="ident" id="3341576">ok</span>&nbsp;<span class="op" id="3341579">&amp;&amp;</span>&nbsp;<span class="op" id="3341582">(</span><span class="builtinfunc" id="3341583">len</span><span class="op" id="3341586">(</span><span class="ident" id="3341587">t</span><span class="op" id="3341588">)</span>&nbsp;<span class="op" id="3341590">==</span>&nbsp;<span class="num" id="3341593">0</span>&nbsp;<span class="op" id="3341595">||</span>&nbsp;<span class="builtinfunc" id="3341598">len</span><span class="op" id="3341601">(</span><span class="ident" id="3341602">pattern</span><span class="op" id="3341609">)</span>&nbsp;<span class="op" id="3341611">&gt;</span>&nbsp;<span class="num" id="3341613">0</span><span class="op" id="3341614">)</span>&nbsp;<span class="op" id="3341616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341621">name</span>&nbsp;<span class="op" id="3341626">=</span>&nbsp;<span class="ident" id="3341628">t</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341633">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3341644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341648">if</span>&nbsp;<span class="ident" id="3341651">err</span>&nbsp;<span class="op" id="3341655">!=</span>&nbsp;<span class="ident" id="3341658">nil</span>&nbsp;<span class="op" id="3341662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341667">return</span>&nbsp;<span class="builtintype" id="3341674">false</span><span class="op" id="3341679">,</span>&nbsp;<span class="ident" id="3341681">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3341687">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341691">if</span>&nbsp;<span class="ident" id="3341694">star</span>&nbsp;<span class="op" id="3341699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341704">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341745">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341766">for</span>&nbsp;<span class="ident" id="3341770">i</span>&nbsp;<span class="op" id="3341772">:=</span>&nbsp;<span class="num" id="3341775">0</span><span class="op" id="3341776">;</span>&nbsp;<span class="ident" id="3341778">i</span>&nbsp;<span class="op" id="3341780">&lt;</span>&nbsp;<span class="builtinfunc" id="3341782">len</span><span class="op" id="3341785">(</span><span class="ident" id="3341786">name</span><span class="op" id="3341790">)</span>&nbsp;<span class="op" id="3341792">&amp;&amp;</span>&nbsp;<span class="ident" id="3341795">name</span><span class="op" id="3341799">[</span><span class="ident" id="3341800">i</span><span class="op" id="3341801">]</span>&nbsp;<span class="op" id="3341803">!=</span>&nbsp;<span class="string" id="3341806">&#39;/&#39;</span><span class="op" id="3341809">;</span>&nbsp;<span class="ident" id="3341811">i</span><span class="op" id="3341812">++</span>&nbsp;<span class="op" id="3341815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3341821">t</span><span class="op" id="3341822">,</span>&nbsp;<span class="ident" id="3341824">ok</span><span class="op" id="3341826">,</span>&nbsp;<span class="ident" id="3341828">err</span>&nbsp;<span class="op" id="3341832">:=</span>&nbsp;<span class="ident" id="3341835">matchChunk</span><span class="op" id="3341845">(</span><span class="ident" id="3341846">chunk</span><span class="op" id="3341851">,</span>&nbsp;<span class="ident" id="3341853">name</span><span class="op" id="3341857">[</span><span class="ident" id="3341858">i</span><span class="op" id="3341859">+</span><span class="num" id="3341860">1</span><span class="op" id="3341861">:</span><span class="op" id="3341862">]</span><span class="op" id="3341863">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341869">if</span>&nbsp;<span class="ident" id="3341872">ok</span>&nbsp;<span class="op" id="3341875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3341882">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341947">if</span>&nbsp;<span class="builtinfunc" id="3341950">len</span><span class="op" id="3341953">(</span><span class="ident" id="3341954">pattern</span><span class="op" id="3341961">)</span>&nbsp;<span class="op" id="3341963">==</span>&nbsp;<span class="num" id="3341966">0</span>&nbsp;<span class="op" id="3341968">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3341971">len</span><span class="op" id="3341974">(</span><span class="ident" id="3341975">t</span><span class="op" id="3341976">)</span>&nbsp;<span class="op" id="3341978">&gt;</span>&nbsp;<span class="num" id="3341980">0</span>&nbsp;<span class="op" id="3341982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3341990">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342004">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3342011">name</span>&nbsp;<span class="op" id="3342016">=</span>&nbsp;<span class="ident" id="3342018">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342025">continue</span>&nbsp;<span class="ident" id="3342034">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342052">if</span>&nbsp;<span class="ident" id="3342055">err</span>&nbsp;<span class="op" id="3342059">!=</span>&nbsp;<span class="ident" id="3342062">nil</span>&nbsp;<span class="op" id="3342066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342073">return</span>&nbsp;<span class="builtintype" id="3342080">false</span><span class="op" id="3342085">,</span>&nbsp;<span class="ident" id="3342087">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342108">return</span>&nbsp;<span class="builtintype" id="3342115">false</span><span class="op" id="3342120">,</span>&nbsp;<span class="ident" id="3342122">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342127">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342130">return</span>&nbsp;<span class="builtinfunc" id="3342137">len</span><span class="op" id="3342140">(</span><span class="ident" id="3342141">name</span><span class="op" id="3342145">)</span>&nbsp;<span class="op" id="3342147">==</span>&nbsp;<span class="num" id="3342150">0</span><span class="op" id="3342151">,</span>&nbsp;<span class="ident" id="3342153">nil</span><br>
<span class="lineno"></span><span class="op" id="3342157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3342160">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="3342234">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno">85</span><span class="keyword" id="3342266">func</span>&nbsp;<span class="ident" id="3342271">scanChunk</span><span class="op" id="3342280">(</span><span class="ident" id="3342281">pattern</span>&nbsp;<span class="builtintype" id="3342289">string</span><span class="op" id="3342295">)</span>&nbsp;<span class="op" id="3342297">(</span><span class="ident" id="3342298">star</span>&nbsp;<span class="builtintype" id="3342303">bool</span><span class="op" id="3342307">,</span>&nbsp;<span class="ident" id="3342309">chunk</span><span class="op" id="3342314">,</span>&nbsp;<span class="ident" id="3342316">rest</span>&nbsp;<span class="builtintype" id="3342321">string</span><span class="op" id="3342327">)</span>&nbsp;<span class="op" id="3342329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342332">for</span>&nbsp;<span class="builtinfunc" id="3342336">len</span><span class="op" id="3342339">(</span><span class="ident" id="3342340">pattern</span><span class="op" id="3342347">)</span>&nbsp;<span class="op" id="3342349">&gt;</span>&nbsp;<span class="num" id="3342351">0</span>&nbsp;<span class="op" id="3342353">&amp;&amp;</span>&nbsp;<span class="ident" id="3342356">pattern</span><span class="op" id="3342363">[</span><span class="num" id="3342364">0</span><span class="op" id="3342365">]</span>&nbsp;<span class="op" id="3342367">==</span>&nbsp;<span class="string" id="3342370">&#39;*&#39;</span>&nbsp;<span class="op" id="3342374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3342378">pattern</span>&nbsp;<span class="op" id="3342386">=</span>&nbsp;<span class="ident" id="3342388">pattern</span><span class="op" id="3342395">[</span><span class="num" id="3342396">1</span><span class="op" id="3342397">:</span><span class="op" id="3342398">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3342402">star</span>&nbsp;<span class="op" id="3342407">=</span>&nbsp;<span class="builtintype" id="3342409">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342415">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3342418">inrange</span>&nbsp;<span class="op" id="3342426">:=</span>&nbsp;<span class="builtintype" id="3342429">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342436">var</span>&nbsp;<span class="ident" id="3342440">i</span>&nbsp;<span class="builtintype" id="3342442">int</span><br>
<span class="lineno"></span><span class="ident" id="3342446">Scan</span><span class="op" id="3342450">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342453">for</span>&nbsp;<span class="ident" id="3342457">i</span>&nbsp;<span class="op" id="3342459">=</span>&nbsp;<span class="num" id="3342461">0</span><span class="op" id="3342462">;</span>&nbsp;<span class="ident" id="3342464">i</span>&nbsp;<span class="op" id="3342466">&lt;</span>&nbsp;<span class="builtinfunc" id="3342468">len</span><span class="op" id="3342471">(</span><span class="ident" id="3342472">pattern</span><span class="op" id="3342479">)</span><span class="op" id="3342480">;</span>&nbsp;<span class="ident" id="3342482">i</span><span class="op" id="3342483">++</span>&nbsp;<span class="op" id="3342486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342490">switch</span>&nbsp;<span class="ident" id="3342497">pattern</span><span class="op" id="3342504">[</span><span class="ident" id="3342505">i</span><span class="op" id="3342506">]</span>&nbsp;<span class="op" id="3342508">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342512">case</span>&nbsp;<span class="string" id="3342517">&#39;\\&#39;</span><span class="op" id="3342521">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3342526">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342580">if</span>&nbsp;<span class="ident" id="3342583">i</span><span class="op" id="3342584">+</span><span class="num" id="3342585">1</span>&nbsp;<span class="op" id="3342587">&lt;</span>&nbsp;<span class="builtinfunc" id="3342589">len</span><span class="op" id="3342592">(</span><span class="ident" id="3342593">pattern</span><span class="op" id="3342600">)</span>&nbsp;<span class="op" id="3342602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3342608">i</span><span class="op" id="3342609">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342615">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342619">case</span>&nbsp;<span class="string" id="3342624">&#39;[&#39;</span><span class="op" id="3342627">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3342632">inrange</span>&nbsp;<span class="op" id="3342640">=</span>&nbsp;<span class="builtintype" id="3342642">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342649">case</span>&nbsp;<span class="string" id="3342654">&#39;]&#39;</span><span class="op" id="3342657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3342662">inrange</span>&nbsp;<span class="op" id="3342670">=</span>&nbsp;<span class="builtintype" id="3342672">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342680">case</span>&nbsp;<span class="string" id="3342685">&#39;*&#39;</span><span class="op" id="3342688">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342693">if</span>&nbsp;<span class="op" id="3342696">!</span><span class="ident" id="3342697">inrange</span>&nbsp;<span class="op" id="3342705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342711">break</span>&nbsp;<span class="ident" id="3342717">Scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3342732">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3342735">return</span>&nbsp;<span class="ident" id="3342742">star</span><span class="op" id="3342746">,</span>&nbsp;<span class="ident" id="3342748">pattern</span><span class="op" id="3342755">[</span><span class="num" id="3342756">0</span><span class="op" id="3342757">:</span><span class="ident" id="3342758">i</span><span class="op" id="3342759">]</span><span class="op" id="3342760">,</span>&nbsp;<span class="ident" id="3342762">pattern</span><span class="op" id="3342769">[</span><span class="ident" id="3342770">i</span><span class="op" id="3342771">:</span><span class="op" id="3342772">]</span><br>
<span class="lineno"></span><span class="op" id="3342774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3342777">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3342840">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno">115</span><span class="comment" id="3342899">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3342974">func</span>&nbsp;<span class="ident" id="3342979">matchChunk</span><span class="op" id="3342989">(</span><span class="ident" id="3342990">chunk</span><span class="op" id="3342995">,</span>&nbsp;<span class="ident" id="3342997">s</span>&nbsp;<span class="builtintype" id="3342999">string</span><span class="op" id="3343005">)</span>&nbsp;<span class="op" id="3343007">(</span><span class="ident" id="3343008">rest</span>&nbsp;<span class="builtintype" id="3343013">string</span><span class="op" id="3343019">,</span>&nbsp;<span class="ident" id="3343021">ok</span>&nbsp;<span class="builtintype" id="3343024">bool</span><span class="op" id="3343028">,</span>&nbsp;<span class="ident" id="3343030">err</span>&nbsp;<span class="builtintype" id="3343034">error</span><span class="op" id="3343039">)</span>&nbsp;<span class="op" id="3343041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343044">for</span>&nbsp;<span class="builtinfunc" id="3343048">len</span><span class="op" id="3343051">(</span><span class="ident" id="3343052">chunk</span><span class="op" id="3343057">)</span>&nbsp;<span class="op" id="3343059">&gt;</span>&nbsp;<span class="num" id="3343061">0</span>&nbsp;<span class="op" id="3343063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343067">if</span>&nbsp;<span class="builtinfunc" id="3343070">len</span><span class="op" id="3343073">(</span><span class="ident" id="3343074">s</span><span class="op" id="3343075">)</span>&nbsp;<span class="op" id="3343077">==</span>&nbsp;<span class="num" id="3343080">0</span>&nbsp;<span class="op" id="3343082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343087">return</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343100">switch</span>&nbsp;<span class="ident" id="3343107">chunk</span><span class="op" id="3343112">[</span><span class="num" id="3343113">0</span><span class="op" id="3343114">]</span>&nbsp;<span class="op" id="3343116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343120">case</span>&nbsp;<span class="string" id="3343125">&#39;[&#39;</span><span class="op" id="3343128">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3343133">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343155">r</span><span class="op" id="3343156">,</span>&nbsp;<span class="ident" id="3343158">n</span>&nbsp;<span class="op" id="3343160">:=</span>&nbsp;<span class="ident" id="3343163">utf8</span><span class="op" id="3343167">.</span><span class="ident" id="3343168">DecodeRuneInString</span><span class="op" id="3343186">(</span><span class="ident" id="3343187">s</span><span class="op" id="3343188">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343193">s</span>&nbsp;<span class="op" id="3343195">=</span>&nbsp;<span class="ident" id="3343197">s</span><span class="op" id="3343198">[</span><span class="ident" id="3343199">n</span><span class="op" id="3343200">:</span><span class="op" id="3343201">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343206">chunk</span>&nbsp;<span class="op" id="3343212">=</span>&nbsp;<span class="ident" id="3343214">chunk</span><span class="op" id="3343219">[</span><span class="num" id="3343220">1</span><span class="op" id="3343221">:</span><span class="op" id="3343222">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3343227">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343250">notNegated</span>&nbsp;<span class="op" id="3343261">:=</span>&nbsp;<span class="builtintype" id="3343264">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343272">if</span>&nbsp;<span class="builtinfunc" id="3343275">len</span><span class="op" id="3343278">(</span><span class="ident" id="3343279">chunk</span><span class="op" id="3343284">)</span>&nbsp;<span class="op" id="3343286">&gt;</span>&nbsp;<span class="num" id="3343288">0</span>&nbsp;<span class="op" id="3343290">&amp;&amp;</span>&nbsp;<span class="ident" id="3343293">chunk</span><span class="op" id="3343298">[</span><span class="num" id="3343299">0</span><span class="op" id="3343300">]</span>&nbsp;<span class="op" id="3343302">==</span>&nbsp;<span class="string" id="3343305">&#39;^&#39;</span>&nbsp;<span class="op" id="3343309">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343315">notNegated</span>&nbsp;<span class="op" id="3343326">=</span>&nbsp;<span class="builtintype" id="3343328">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343338">chunk</span>&nbsp;<span class="op" id="3343344">=</span>&nbsp;<span class="ident" id="3343346">chunk</span><span class="op" id="3343351">[</span><span class="num" id="3343352">1</span><span class="op" id="3343353">:</span><span class="op" id="3343354">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3343364">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343387">match</span>&nbsp;<span class="op" id="3343393">:=</span>&nbsp;<span class="builtintype" id="3343396">false</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343405">nrange</span>&nbsp;<span class="op" id="3343412">:=</span>&nbsp;<span class="num" id="3343415">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343420">for</span>&nbsp;<span class="op" id="3343424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343430">if</span>&nbsp;<span class="builtinfunc" id="3343433">len</span><span class="op" id="3343436">(</span><span class="ident" id="3343437">chunk</span><span class="op" id="3343442">)</span>&nbsp;<span class="op" id="3343444">&gt;</span>&nbsp;<span class="num" id="3343446">0</span>&nbsp;<span class="op" id="3343448">&amp;&amp;</span>&nbsp;<span class="ident" id="3343451">chunk</span><span class="op" id="3343456">[</span><span class="num" id="3343457">0</span><span class="op" id="3343458">]</span>&nbsp;<span class="op" id="3343460">==</span>&nbsp;<span class="string" id="3343463">&#39;]&#39;</span>&nbsp;<span class="op" id="3343467">&amp;&amp;</span>&nbsp;<span class="ident" id="3343470">nrange</span>&nbsp;<span class="op" id="3343477">&gt;</span>&nbsp;<span class="num" id="3343479">0</span>&nbsp;<span class="op" id="3343481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343488">chunk</span>&nbsp;<span class="op" id="3343494">=</span>&nbsp;<span class="ident" id="3343496">chunk</span><span class="op" id="3343501">[</span><span class="num" id="3343502">1</span><span class="op" id="3343503">:</span><span class="op" id="3343504">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343511">break</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343527">var</span>&nbsp;<span class="ident" id="3343531">lo</span><span class="op" id="3343533">,</span>&nbsp;<span class="ident" id="3343535">hi</span>&nbsp;<span class="builtintype" id="3343538">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343547">if</span>&nbsp;<span class="ident" id="3343550">lo</span><span class="op" id="3343552">,</span>&nbsp;<span class="ident" id="3343554">chunk</span><span class="op" id="3343559">,</span>&nbsp;<span class="ident" id="3343561">err</span>&nbsp;<span class="op" id="3343565">=</span>&nbsp;<span class="ident" id="3343567">getEsc</span><span class="op" id="3343573">(</span><span class="ident" id="3343574">chunk</span><span class="op" id="3343579">)</span><span class="op" id="3343580">;</span>&nbsp;<span class="ident" id="3343582">err</span>&nbsp;<span class="op" id="3343586">!=</span>&nbsp;<span class="ident" id="3343589">nil</span>&nbsp;<span class="op" id="3343593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343600">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343611">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343617">hi</span>&nbsp;<span class="op" id="3343620">=</span>&nbsp;<span class="ident" id="3343622">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343629">if</span>&nbsp;<span class="ident" id="3343632">chunk</span><span class="op" id="3343637">[</span><span class="num" id="3343638">0</span><span class="op" id="3343639">]</span>&nbsp;<span class="op" id="3343641">==</span>&nbsp;<span class="string" id="3343644">&#39;-&#39;</span>&nbsp;<span class="op" id="3343648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343655">if</span>&nbsp;<span class="ident" id="3343658">hi</span><span class="op" id="3343660">,</span>&nbsp;<span class="ident" id="3343662">chunk</span><span class="op" id="3343667">,</span>&nbsp;<span class="ident" id="3343669">err</span>&nbsp;<span class="op" id="3343673">=</span>&nbsp;<span class="ident" id="3343675">getEsc</span><span class="op" id="3343681">(</span><span class="ident" id="3343682">chunk</span><span class="op" id="3343687">[</span><span class="num" id="3343688">1</span><span class="op" id="3343689">:</span><span class="op" id="3343690">]</span><span class="op" id="3343691">)</span><span class="op" id="3343692">;</span>&nbsp;<span class="ident" id="3343694">err</span>&nbsp;<span class="op" id="3343698">!=</span>&nbsp;<span class="ident" id="3343701">nil</span>&nbsp;<span class="op" id="3343705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343713">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343725">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343737">if</span>&nbsp;<span class="ident" id="3343740">lo</span>&nbsp;<span class="op" id="3343743">&lt;=</span>&nbsp;<span class="ident" id="3343746">r</span>&nbsp;<span class="op" id="3343748">&amp;&amp;</span>&nbsp;<span class="ident" id="3343751">r</span>&nbsp;<span class="op" id="3343753">&lt;=</span>&nbsp;<span class="ident" id="3343756">hi</span>&nbsp;<span class="op" id="3343759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343766">match</span>&nbsp;<span class="op" id="3343772">=</span>&nbsp;<span class="builtintype" id="3343774">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343789">nrange</span><span class="op" id="3343795">++</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343806">if</span>&nbsp;<span class="ident" id="3343809">match</span>&nbsp;<span class="op" id="3343815">!=</span>&nbsp;<span class="ident" id="3343818">notNegated</span>&nbsp;<span class="op" id="3343829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343835">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343850">case</span>&nbsp;<span class="string" id="3343855">&#39;?&#39;</span><span class="op" id="3343858">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343863">if</span>&nbsp;<span class="ident" id="3343866">s</span><span class="op" id="3343867">[</span><span class="num" id="3343868">0</span><span class="op" id="3343869">]</span>&nbsp;<span class="op" id="3343871">==</span>&nbsp;<span class="string" id="3343874">&#39;/&#39;</span>&nbsp;<span class="op" id="3343878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343884">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3343894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343899">_</span><span class="op" id="3343900">,</span>&nbsp;<span class="ident" id="3343902">n</span>&nbsp;<span class="op" id="3343904">:=</span>&nbsp;<span class="ident" id="3343907">utf8</span><span class="op" id="3343911">.</span><span class="ident" id="3343912">DecodeRuneInString</span><span class="op" id="3343930">(</span><span class="ident" id="3343931">s</span><span class="op" id="3343932">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343937">s</span>&nbsp;<span class="op" id="3343939">=</span>&nbsp;<span class="ident" id="3343941">s</span><span class="op" id="3343942">[</span><span class="ident" id="3343943">n</span><span class="op" id="3343944">:</span><span class="op" id="3343945">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343950">chunk</span>&nbsp;<span class="op" id="3343956">=</span>&nbsp;<span class="ident" id="3343958">chunk</span><span class="op" id="3343963">[</span><span class="num" id="3343964">1</span><span class="op" id="3343965">:</span><span class="op" id="3343966">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3343971">case</span>&nbsp;<span class="string" id="3343976">&#39;\\&#39;</span><span class="op" id="3343980">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3343985">chunk</span>&nbsp;<span class="op" id="3343991">=</span>&nbsp;<span class="ident" id="3343993">chunk</span><span class="op" id="3343998">[</span><span class="num" id="3343999">1</span><span class="op" id="3344000">:</span><span class="op" id="3344001">]</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344006">if</span>&nbsp;<span class="builtinfunc" id="3344009">len</span><span class="op" id="3344012">(</span><span class="ident" id="3344013">chunk</span><span class="op" id="3344018">)</span>&nbsp;<span class="op" id="3344020">==</span>&nbsp;<span class="num" id="3344023">0</span>&nbsp;<span class="op" id="3344025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344031">err</span>&nbsp;<span class="op" id="3344035">=</span>&nbsp;<span class="ident" id="3344037">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344055">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344070">fallthrough</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344085">default</span><span class="op" id="3344092">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344097">if</span>&nbsp;<span class="ident" id="3344100">chunk</span><span class="op" id="3344105">[</span><span class="num" id="3344106">0</span><span class="op" id="3344107">]</span>&nbsp;<span class="op" id="3344109">!=</span>&nbsp;<span class="ident" id="3344112">s</span><span class="op" id="3344113">[</span><span class="num" id="3344114">0</span><span class="op" id="3344115">]</span>&nbsp;<span class="op" id="3344117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344123">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344133">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344138">s</span>&nbsp;<span class="op" id="3344140">=</span>&nbsp;<span class="ident" id="3344142">s</span><span class="op" id="3344143">[</span><span class="num" id="3344144">1</span><span class="op" id="3344145">:</span><span class="op" id="3344146">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344151">chunk</span>&nbsp;<span class="op" id="3344157">=</span>&nbsp;<span class="ident" id="3344159">chunk</span><span class="op" id="3344164">[</span><span class="num" id="3344165">1</span><span class="op" id="3344166">:</span><span class="op" id="3344167">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344177">return</span>&nbsp;<span class="ident" id="3344184">s</span><span class="op" id="3344185">,</span>&nbsp;<span class="builtintype" id="3344187">true</span><span class="op" id="3344191">,</span>&nbsp;<span class="ident" id="3344193">nil</span><br>
<span class="lineno">185</span><span class="op" id="3344197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3344200">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3344279">func</span>&nbsp;<span class="ident" id="3344284">getEsc</span><span class="op" id="3344290">(</span><span class="ident" id="3344291">chunk</span>&nbsp;<span class="builtintype" id="3344297">string</span><span class="op" id="3344303">)</span>&nbsp;<span class="op" id="3344305">(</span><span class="ident" id="3344306">r</span>&nbsp;<span class="builtintype" id="3344308">rune</span><span class="op" id="3344312">,</span>&nbsp;<span class="ident" id="3344314">nchunk</span>&nbsp;<span class="builtintype" id="3344321">string</span><span class="op" id="3344327">,</span>&nbsp;<span class="ident" id="3344329">err</span>&nbsp;<span class="builtintype" id="3344333">error</span><span class="op" id="3344338">)</span>&nbsp;<span class="op" id="3344340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344343">if</span>&nbsp;<span class="builtinfunc" id="3344346">len</span><span class="op" id="3344349">(</span><span class="ident" id="3344350">chunk</span><span class="op" id="3344355">)</span>&nbsp;<span class="op" id="3344357">==</span>&nbsp;<span class="num" id="3344360">0</span>&nbsp;<span class="op" id="3344362">||</span>&nbsp;<span class="ident" id="3344365">chunk</span><span class="op" id="3344370">[</span><span class="num" id="3344371">0</span><span class="op" id="3344372">]</span>&nbsp;<span class="op" id="3344374">==</span>&nbsp;<span class="string" id="3344377">&#39;-&#39;</span>&nbsp;<span class="op" id="3344381">||</span>&nbsp;<span class="ident" id="3344384">chunk</span><span class="op" id="3344389">[</span><span class="num" id="3344390">0</span><span class="op" id="3344391">]</span>&nbsp;<span class="op" id="3344393">==</span>&nbsp;<span class="string" id="3344396">&#39;]&#39;</span>&nbsp;<span class="op" id="3344400">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344404">err</span>&nbsp;<span class="op" id="3344408">=</span>&nbsp;<span class="ident" id="3344410">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344426">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344437">if</span>&nbsp;<span class="ident" id="3344440">chunk</span><span class="op" id="3344445">[</span><span class="num" id="3344446">0</span><span class="op" id="3344447">]</span>&nbsp;<span class="op" id="3344449">==</span>&nbsp;<span class="string" id="3344452">&#39;\\&#39;</span>&nbsp;<span class="op" id="3344457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344461">chunk</span>&nbsp;<span class="op" id="3344467">=</span>&nbsp;<span class="ident" id="3344469">chunk</span><span class="op" id="3344474">[</span><span class="num" id="3344475">1</span><span class="op" id="3344476">:</span><span class="op" id="3344477">]</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344481">if</span>&nbsp;<span class="builtinfunc" id="3344484">len</span><span class="op" id="3344487">(</span><span class="ident" id="3344488">chunk</span><span class="op" id="3344493">)</span>&nbsp;<span class="op" id="3344495">==</span>&nbsp;<span class="num" id="3344498">0</span>&nbsp;<span class="op" id="3344500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344505">err</span>&nbsp;<span class="op" id="3344509">=</span>&nbsp;<span class="ident" id="3344511">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344528">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344540">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344543">r</span><span class="op" id="3344544">,</span>&nbsp;<span class="ident" id="3344546">n</span>&nbsp;<span class="op" id="3344548">:=</span>&nbsp;<span class="ident" id="3344551">utf8</span><span class="op" id="3344555">.</span><span class="ident" id="3344556">DecodeRuneInString</span><span class="op" id="3344574">(</span><span class="ident" id="3344575">chunk</span><span class="op" id="3344580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344583">if</span>&nbsp;<span class="ident" id="3344586">r</span>&nbsp;<span class="op" id="3344588">==</span>&nbsp;<span class="ident" id="3344591">utf8</span><span class="op" id="3344595">.</span><span class="ident" id="3344596">RuneError</span>&nbsp;<span class="op" id="3344606">&amp;&amp;</span>&nbsp;<span class="ident" id="3344609">n</span>&nbsp;<span class="op" id="3344611">==</span>&nbsp;<span class="num" id="3344614">1</span>&nbsp;<span class="op" id="3344616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344620">err</span>&nbsp;<span class="op" id="3344624">=</span>&nbsp;<span class="ident" id="3344626">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344644">nchunk</span>&nbsp;<span class="op" id="3344651">=</span>&nbsp;<span class="ident" id="3344653">chunk</span><span class="op" id="3344658">[</span><span class="ident" id="3344659">n</span><span class="op" id="3344660">:</span><span class="op" id="3344661">]</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344664">if</span>&nbsp;<span class="builtinfunc" id="3344667">len</span><span class="op" id="3344670">(</span><span class="ident" id="3344671">nchunk</span><span class="op" id="3344677">)</span>&nbsp;<span class="op" id="3344679">==</span>&nbsp;<span class="num" id="3344682">0</span>&nbsp;<span class="op" id="3344684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3344688">err</span>&nbsp;<span class="op" id="3344692">=</span>&nbsp;<span class="ident" id="3344694">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3344709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3344712">return</span><br>
<span class="lineno"></span><span class="op" id="3344719">}</span>
</div>
</body>
</html>
