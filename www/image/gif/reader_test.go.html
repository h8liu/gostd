<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6729473">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6729528">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6729582">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6729633">package</span>&nbsp;<span class="ident" id="6729641">gif</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6729646">import</span>&nbsp;<span class="op" id="6729653">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6729656">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6729665">&#34;compress/lzw&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6729681">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6729690">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6729705">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6729716">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6729726">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6729729">//&nbsp;header,&nbsp;palette&nbsp;and&nbsp;trailer&nbsp;are&nbsp;parts&nbsp;of&nbsp;a&nbsp;valid&nbsp;2x1&nbsp;GIF&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="6729796">const</span>&nbsp;<span class="op" id="6729802">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729805">headerStr</span>&nbsp;<span class="op" id="6729815">=</span>&nbsp;<span class="string" id="6729817">&#34;GIF89a&#34;</span>&nbsp;<span class="op" id="6729826">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6729830">&#34;\x02\x00\x01\x00&#34;</span>&nbsp;<span class="op" id="6729849">+</span>&nbsp;<span class="comment" id="6729851">//&nbsp;width=2,&nbsp;height=1</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6729874">&#34;\x80\x00\x00&#34;</span>&nbsp;<span class="comment" id="6729889">//&nbsp;headerFields=(a&nbsp;color&nbsp;map&nbsp;of&nbsp;2&nbsp;pixels),&nbsp;backgroundIndex,&nbsp;aspect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6729957">paletteStr</span>&nbsp;<span class="op" id="6729968">=</span>&nbsp;<span class="string" id="6729970">&#34;\x10\x20\x30\x40\x50\x60&#34;</span>&nbsp;<span class="comment" id="6729997">//&nbsp;the&nbsp;color&nbsp;map,&nbsp;also&nbsp;known&nbsp;as&nbsp;a&nbsp;palette</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730040">trailerStr</span>&nbsp;<span class="op" id="6730051">=</span>&nbsp;<span class="string" id="6730053">&#34;\x3b&#34;</span><br>
<span class="lineno"></span><span class="op" id="6730060">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="6730063">//&nbsp;lzwEncode&nbsp;returns&nbsp;an&nbsp;LZW&nbsp;encoding&nbsp;(with&nbsp;2-bit&nbsp;literals)&nbsp;of&nbsp;n&nbsp;zeroes.</span><br>
<span class="lineno"></span><span class="keyword" id="6730135">func</span>&nbsp;<span class="ident" id="6730140">lzwEncode</span><span class="op" id="6730149">(</span><span class="ident" id="6730150">n</span>&nbsp;<span class="builtintype" id="6730152">int</span><span class="op" id="6730155">)</span>&nbsp;<span class="op" id="6730157">[</span><span class="op" id="6730158">]</span><span class="builtintype" id="6730159">byte</span>&nbsp;<span class="op" id="6730164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730167">b</span>&nbsp;<span class="op" id="6730169">:=</span>&nbsp;<span class="op" id="6730172">&amp;</span><span class="ident" id="6730173"><a href="/image/gif/reader_test.go.html#6729656">bytes</a></span><span class="op" id="6730178">.</span><span class="ident" id="6730179">Buffer</span><span class="op" id="6730185">{</span><span class="op" id="6730186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730189">w</span>&nbsp;<span class="op" id="6730191">:=</span>&nbsp;<span class="ident" id="6730194"><a href="/image/gif/reader_test.go.html#6729665">lzw</a></span><span class="op" id="6730197">.</span><span class="ident" id="6730198">NewWriter</span><span class="op" id="6730207">(</span><span class="ident" id="6730208"><a href="/image/gif/reader_test.go.html#6730167">b</a></span><span class="op" id="6730209">,</span>&nbsp;<span class="ident" id="6730211"><a href="/image/gif/reader_test.go.html#6729665">lzw</a></span><span class="op" id="6730214">.</span><span class="ident" id="6730215">LSB</span><span class="op" id="6730218">,</span>&nbsp;<span class="num" id="6730220">2</span><span class="op" id="6730221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730224"><a href="/image/gif/reader_test.go.html#6730189">w</a></span><span class="op" id="6730225">.</span><span class="ident" id="6730226">Write</span><span class="op" id="6730231">(</span><span class="builtinfunc" id="6730232">make</span><span class="op" id="6730236">(</span><span class="op" id="6730237">[</span><span class="op" id="6730238">]</span><span class="builtintype" id="6730239">byte</span><span class="op" id="6730243">,</span>&nbsp;<span class="ident" id="6730245"><a href="/image/gif/reader_test.go.html#6730150">n</a></span><span class="op" id="6730246">)</span><span class="op" id="6730247">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730250"><a href="/image/gif/reader_test.go.html#6730189">w</a></span><span class="op" id="6730251">.</span><span class="ident" id="6730252">Close</span><span class="op" id="6730257">(</span><span class="op" id="6730258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730261">return</span>&nbsp;<span class="ident" id="6730268"><a href="/image/gif/reader_test.go.html#6730167">b</a></span><span class="op" id="6730269">.</span><span class="ident" id="6730270">Bytes</span><span class="op" id="6730275">(</span><span class="op" id="6730276">)</span><br>
<span class="lineno"></span><span class="op" id="6730278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6730281">func</span>&nbsp;<span class="ident" id="6730286">TestDecode</span><span class="op" id="6730296">(</span><span class="ident" id="6730297">t</span>&nbsp;<span class="op" id="6730299">*</span><span class="ident" id="6730300"><a href="/image/gif/reader_test.go.html#6729716">testing</a></span><span class="op" id="6730307">.</span><span class="ident" id="6730308">T</span><span class="op" id="6730309">)</span>&nbsp;<span class="op" id="6730311">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730314">testCases</span>&nbsp;<span class="op" id="6730324">:=</span>&nbsp;<span class="op" id="6730327">[</span><span class="op" id="6730328">]</span><span class="keyword" id="6730329">struct</span>&nbsp;<span class="op" id="6730336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730340">nPix</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6730348">int</span>&nbsp;&nbsp;<span class="comment" id="6730353">//&nbsp;The&nbsp;number&nbsp;of&nbsp;pixels&nbsp;in&nbsp;the&nbsp;image&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730398">extra</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6730406">bool</span>&nbsp;<span class="comment" id="6730411">//&nbsp;Whether&nbsp;to&nbsp;write&nbsp;an&nbsp;extra&nbsp;block&nbsp;after&nbsp;the&nbsp;LZW-encoded&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730476">wantErr</span>&nbsp;<span class="builtintype" id="6730484">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730491">}</span><span class="op" id="6730492">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730496">{</span><span class="num" id="6730497">0</span><span class="op" id="6730498">,</span>&nbsp;<span class="builtintype" id="6730500">false</span><span class="op" id="6730505">,</span>&nbsp;<span class="ident" id="6730507"><a href="/image/gif/reader.go.html#6253796">errNotEnough</a></span><span class="op" id="6730519">}</span><span class="op" id="6730520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730524">{</span><span class="num" id="6730525">1</span><span class="op" id="6730526">,</span>&nbsp;<span class="builtintype" id="6730528">false</span><span class="op" id="6730533">,</span>&nbsp;<span class="ident" id="6730535"><a href="/image/gif/reader.go.html#6253796">errNotEnough</a></span><span class="op" id="6730547">}</span><span class="op" id="6730548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730552">{</span><span class="num" id="6730553">2</span><span class="op" id="6730554">,</span>&nbsp;<span class="builtintype" id="6730556">false</span><span class="op" id="6730561">,</span>&nbsp;<span class="ident" id="6730563">nil</span><span class="op" id="6730566">}</span><span class="op" id="6730567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730571">{</span><span class="num" id="6730572">2</span><span class="op" id="6730573">,</span>&nbsp;<span class="builtintype" id="6730575">true</span><span class="op" id="6730579">,</span>&nbsp;<span class="ident" id="6730581"><a href="/image/gif/reader.go.html#6253853">errTooMuch</a></span><span class="op" id="6730591">}</span><span class="op" id="6730592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730596">{</span><span class="num" id="6730597">3</span><span class="op" id="6730598">,</span>&nbsp;<span class="builtintype" id="6730600">false</span><span class="op" id="6730605">,</span>&nbsp;<span class="ident" id="6730607"><a href="/image/gif/reader.go.html#6253853">errTooMuch</a></span><span class="op" id="6730617">}</span><span class="op" id="6730618">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6730621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6730624">for</span>&nbsp;<span class="ident" id="6730628">_</span><span class="op" id="6730629">,</span>&nbsp;<span class="ident" id="6730631">tc</span>&nbsp;<span class="op" id="6730634">:=</span>&nbsp;<span class="keyword" id="6730637">range</span>&nbsp;<span class="ident" id="6730643"><a href="/image/gif/reader_test.go.html#6730314">testCases</a></span>&nbsp;<span class="op" id="6730653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730657">b</span>&nbsp;<span class="op" id="6730659">:=</span>&nbsp;<span class="op" id="6730662">&amp;</span><span class="ident" id="6730663"><a href="/image/gif/reader_test.go.html#6729656">bytes</a></span><span class="op" id="6730668">.</span><span class="ident" id="6730669">Buffer</span><span class="op" id="6730675">{</span><span class="op" id="6730676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730680"><a href="/image/gif/reader_test.go.html#6730657">b</a></span><span class="op" id="6730681">.</span><span class="ident" id="6730682">WriteString</span><span class="op" id="6730693">(</span><span class="ident" id="6730694"><a href="/image/gif/reader_test.go.html#6729805">headerStr</a></span><span class="op" id="6730703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730707"><a href="/image/gif/reader_test.go.html#6730657">b</a></span><span class="op" id="6730708">.</span><span class="ident" id="6730709">WriteString</span><span class="op" id="6730720">(</span><span class="ident" id="6730721"><a href="/image/gif/reader_test.go.html#6729957">paletteStr</a></span><span class="op" id="6730731">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6730735">//&nbsp;Write&nbsp;an&nbsp;image&nbsp;with&nbsp;bounds&nbsp;2x1&nbsp;but&nbsp;tc.nPix&nbsp;pixels.&nbsp;If&nbsp;tc.nPix&nbsp;!=&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6730807">//&nbsp;then&nbsp;this&nbsp;should&nbsp;result&nbsp;in&nbsp;an&nbsp;invalid&nbsp;GIF&nbsp;image.&nbsp;First,&nbsp;write&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6730876">//&nbsp;magic&nbsp;0x2c&nbsp;(image&nbsp;descriptor)&nbsp;byte,&nbsp;bounds=(0,0)-(2,1),&nbsp;a&nbsp;flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6730945">//&nbsp;byte,&nbsp;and&nbsp;2-bit&nbsp;LZW&nbsp;literals.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6730980"><a href="/image/gif/reader_test.go.html#6730657">b</a></span><span class="op" id="6730981">.</span><span class="ident" id="6730982">WriteString</span><span class="op" id="6730993">(</span><span class="string" id="6730994">&#34;\x2c\x00\x00\x00\x00\x02\x00\x01\x00\x00\x02&#34;</span><span class="op" id="6731040">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731044">if</span>&nbsp;<span class="ident" id="6731047"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731049">.</span><span class="ident" id="6731050">nPix</span>&nbsp;<span class="op" id="6731055">&gt;</span>&nbsp;<span class="num" id="6731057">0</span>&nbsp;<span class="op" id="6731059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731064">enc</span>&nbsp;<span class="op" id="6731068">:=</span>&nbsp;<span class="ident" id="6731071"><a href="/image/gif/reader_test.go.html#6730140">lzwEncode</a></span><span class="op" id="6731080">(</span><span class="ident" id="6731081"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731083">.</span><span class="ident" id="6731084">nPix</span><span class="op" id="6731088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731093">if</span>&nbsp;<span class="builtinfunc" id="6731096">len</span><span class="op" id="6731099">(</span><span class="ident" id="6731100"><a href="/image/gif/reader_test.go.html#6731064">enc</a></span><span class="op" id="6731103">)</span>&nbsp;<span class="op" id="6731105">&gt;</span>&nbsp;<span class="num" id="6731107">0xff</span>&nbsp;<span class="op" id="6731112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731118"><a href="/image/gif/reader_test.go.html#6730297">t</a></span><span class="op" id="6731119">.</span><span class="ident" id="6731120">Errorf</span><span class="op" id="6731126">(</span><span class="string" id="6731127">&#34;nPix=%d,&nbsp;extra=%t:&nbsp;compressed&nbsp;length&nbsp;%d&nbsp;is&nbsp;too&nbsp;large&#34;</span><span class="op" id="6731181">,</span>&nbsp;<span class="ident" id="6731183"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731185">.</span><span class="ident" id="6731186">nPix</span><span class="op" id="6731190">,</span>&nbsp;<span class="ident" id="6731192"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731194">.</span><span class="ident" id="6731195">extra</span><span class="op" id="6731200">,</span>&nbsp;<span class="builtinfunc" id="6731202">len</span><span class="op" id="6731205">(</span><span class="ident" id="6731206"><a href="/image/gif/reader_test.go.html#6731064">enc</a></span><span class="op" id="6731209">)</span><span class="op" id="6731210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731216">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731233"><a href="/image/gif/reader_test.go.html#6730657">b</a></span><span class="op" id="6731234">.</span><span class="ident" id="6731235">WriteByte</span><span class="op" id="6731244">(</span><span class="builtintype" id="6731245">byte</span><span class="op" id="6731249">(</span><span class="builtinfunc" id="6731250">len</span><span class="op" id="6731253">(</span><span class="ident" id="6731254"><a href="/image/gif/reader_test.go.html#6731064">enc</a></span><span class="op" id="6731257">)</span><span class="op" id="6731258">)</span><span class="op" id="6731259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731264"><a href="/image/gif/reader_test.go.html#6730657">b</a></span><span class="op" id="6731265">.</span><span class="ident" id="6731266">Write</span><span class="op" id="6731271">(</span><span class="ident" id="6731272"><a href="/image/gif/reader_test.go.html#6731064">enc</a></span><span class="op" id="6731275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731283">if</span>&nbsp;<span class="ident" id="6731286"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731288">.</span><span class="ident" id="6731289">extra</span>&nbsp;<span class="op" id="6731295">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731300"><a href="/image/gif/reader_test.go.html#6730657">b</a></span><span class="op" id="6731301">.</span><span class="ident" id="6731302">WriteString</span><span class="op" id="6731313">(</span><span class="string" id="6731314">&#34;\x01\x02&#34;</span><span class="op" id="6731324">)</span>&nbsp;<span class="comment" id="6731326">//&nbsp;A&nbsp;1-byte&nbsp;payload&nbsp;with&nbsp;an&nbsp;0x02&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731371"><a href="/image/gif/reader_test.go.html#6730657">b</a></span><span class="op" id="6731372">.</span><span class="ident" id="6731373">WriteByte</span><span class="op" id="6731382">(</span><span class="num" id="6731383">0x00</span><span class="op" id="6731387">)</span>&nbsp;<span class="comment" id="6731389">//&nbsp;An&nbsp;empty&nbsp;block&nbsp;signifies&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;image&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731446"><a href="/image/gif/reader_test.go.html#6730657">b</a></span><span class="op" id="6731447">.</span><span class="ident" id="6731448">WriteString</span><span class="op" id="6731459">(</span><span class="ident" id="6731460"><a href="/image/gif/reader_test.go.html#6730040">trailerStr</a></span><span class="op" id="6731470">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731475">got</span><span class="op" id="6731478">,</span>&nbsp;<span class="ident" id="6731480">err</span>&nbsp;<span class="op" id="6731484">:=</span>&nbsp;<span class="ident" id="6731487"><a href="/image/gif/reader.go.html#6263779">Decode</a></span><span class="op" id="6731493">(</span><span class="ident" id="6731494"><a href="/image/gif/reader_test.go.html#6730657">b</a></span><span class="op" id="6731495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731499">if</span>&nbsp;<span class="ident" id="6731502"><a href="/image/gif/reader_test.go.html#6731480">err</a></span>&nbsp;<span class="op" id="6731506">!=</span>&nbsp;<span class="ident" id="6731509"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731511">.</span><span class="ident" id="6731512">wantErr</span>&nbsp;<span class="op" id="6731520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731525"><a href="/image/gif/reader_test.go.html#6730297">t</a></span><span class="op" id="6731526">.</span><span class="ident" id="6731527">Errorf</span><span class="op" id="6731533">(</span><span class="string" id="6731534">&#34;nPix=%d,&nbsp;extra=%t\ngot&nbsp;&nbsp;%v\nwant&nbsp;%v&#34;</span><span class="op" id="6731571">,</span>&nbsp;<span class="ident" id="6731573"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731575">.</span><span class="ident" id="6731576">nPix</span><span class="op" id="6731580">,</span>&nbsp;<span class="ident" id="6731582"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731584">.</span><span class="ident" id="6731585">extra</span><span class="op" id="6731590">,</span>&nbsp;<span class="ident" id="6731592"><a href="/image/gif/reader_test.go.html#6731480">err</a></span><span class="op" id="6731595">,</span>&nbsp;<span class="ident" id="6731597"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731599">.</span><span class="ident" id="6731600">wantErr</span><span class="op" id="6731607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731611">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731616">if</span>&nbsp;<span class="ident" id="6731619"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731621">.</span><span class="ident" id="6731622">wantErr</span>&nbsp;<span class="op" id="6731630">!=</span>&nbsp;<span class="ident" id="6731633">nil</span>&nbsp;<span class="op" id="6731637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731642">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731657">want</span>&nbsp;<span class="op" id="6731662">:=</span>&nbsp;<span class="op" id="6731665">&amp;</span><span class="ident" id="6731666"><a href="/image/gif/reader_test.go.html#6729681">image</a></span><span class="op" id="6731671">.</span><span class="ident" id="6731672">Paletted</span><span class="op" id="6731680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731685">Pix</span><span class="op" id="6731688">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6731693">[</span><span class="op" id="6731694">]</span><span class="builtintype" id="6731695">uint8</span><span class="op" id="6731700">{</span><span class="num" id="6731701">0</span><span class="op" id="6731702">,</span>&nbsp;<span class="num" id="6731704">0</span><span class="op" id="6731705">}</span><span class="op" id="6731706">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731711">Stride</span><span class="op" id="6731717">:</span>&nbsp;<span class="num" id="6731719">2</span><span class="op" id="6731720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731725">Rect</span><span class="op" id="6731729">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6731733"><a href="/image/gif/reader_test.go.html#6729681">image</a></span><span class="op" id="6731738">.</span><span class="ident" id="6731739">Rect</span><span class="op" id="6731743">(</span><span class="num" id="6731744">0</span><span class="op" id="6731745">,</span>&nbsp;<span class="num" id="6731747">0</span><span class="op" id="6731748">,</span>&nbsp;<span class="num" id="6731750">2</span><span class="op" id="6731751">,</span>&nbsp;<span class="num" id="6731753">1</span><span class="op" id="6731754">)</span><span class="op" id="6731755">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731760">Palette</span><span class="op" id="6731767">:</span>&nbsp;<span class="ident" id="6731769"><a href="/image/gif/reader_test.go.html#6729690">color</a></span><span class="op" id="6731774">.</span><span class="ident" id="6731775">Palette</span><span class="op" id="6731782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731788"><a href="/image/gif/reader_test.go.html#6729690">color</a></span><span class="op" id="6731793">.</span><span class="ident" id="6731794">RGBA</span><span class="op" id="6731798">{</span><span class="num" id="6731799">0x10</span><span class="op" id="6731803">,</span>&nbsp;<span class="num" id="6731805">0x20</span><span class="op" id="6731809">,</span>&nbsp;<span class="num" id="6731811">0x30</span><span class="op" id="6731815">,</span>&nbsp;<span class="num" id="6731817">0xff</span><span class="op" id="6731821">}</span><span class="op" id="6731822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731828"><a href="/image/gif/reader_test.go.html#6729690">color</a></span><span class="op" id="6731833">.</span><span class="ident" id="6731834">RGBA</span><span class="op" id="6731838">{</span><span class="num" id="6731839">0x40</span><span class="op" id="6731843">,</span>&nbsp;<span class="num" id="6731845">0x50</span><span class="op" id="6731849">,</span>&nbsp;<span class="num" id="6731851">0x60</span><span class="op" id="6731855">,</span>&nbsp;<span class="num" id="6731857">0xff</span><span class="op" id="6731861">}</span><span class="op" id="6731862">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731867">}</span><span class="op" id="6731868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6731876">if</span>&nbsp;<span class="op" id="6731879">!</span><span class="ident" id="6731880"><a href="/image/gif/reader_test.go.html#6729705">reflect</a></span><span class="op" id="6731887">.</span><span class="ident" id="6731888">DeepEqual</span><span class="op" id="6731897">(</span><span class="ident" id="6731898"><a href="/image/gif/reader_test.go.html#6731475">got</a></span><span class="op" id="6731901">,</span>&nbsp;<span class="ident" id="6731903"><a href="/image/gif/reader_test.go.html#6731657">want</a></span><span class="op" id="6731907">)</span>&nbsp;<span class="op" id="6731909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6731914"><a href="/image/gif/reader_test.go.html#6730297">t</a></span><span class="op" id="6731915">.</span><span class="ident" id="6731916">Errorf</span><span class="op" id="6731922">(</span><span class="string" id="6731923">&#34;nPix=%d,&nbsp;extra=%t\ngot&nbsp;&nbsp;%v\nwant&nbsp;%v&#34;</span><span class="op" id="6731960">,</span>&nbsp;<span class="ident" id="6731962"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731964">.</span><span class="ident" id="6731965">nPix</span><span class="op" id="6731969">,</span>&nbsp;<span class="ident" id="6731971"><a href="/image/gif/reader_test.go.html#6730631">tc</a></span><span class="op" id="6731973">.</span><span class="ident" id="6731974">extra</span><span class="op" id="6731979">,</span>&nbsp;<span class="ident" id="6731981"><a href="/image/gif/reader_test.go.html#6731475">got</a></span><span class="op" id="6731984">,</span>&nbsp;<span class="ident" id="6731986"><a href="/image/gif/reader_test.go.html#6731657">want</a></span><span class="op" id="6731990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731994">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6731997">}</span><br>
<span class="lineno"></span><span class="op" id="6731999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6732002">func</span>&nbsp;<span class="ident" id="6732007">TestTransparentIndex</span><span class="op" id="6732027">(</span><span class="ident" id="6732028">t</span>&nbsp;<span class="op" id="6732030">*</span><span class="ident" id="6732031"><a href="/image/gif/reader_test.go.html#6729716">testing</a></span><span class="op" id="6732038">.</span><span class="ident" id="6732039">T</span><span class="op" id="6732040">)</span>&nbsp;<span class="op" id="6732042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732045">b</span>&nbsp;<span class="op" id="6732047">:=</span>&nbsp;<span class="op" id="6732050">&amp;</span><span class="ident" id="6732051"><a href="/image/gif/reader_test.go.html#6729656">bytes</a></span><span class="op" id="6732056">.</span><span class="ident" id="6732057">Buffer</span><span class="op" id="6732063">{</span><span class="op" id="6732064">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732067"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732068">.</span><span class="ident" id="6732069">WriteString</span><span class="op" id="6732080">(</span><span class="ident" id="6732081"><a href="/image/gif/reader_test.go.html#6729805">headerStr</a></span><span class="op" id="6732090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732093"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732094">.</span><span class="ident" id="6732095">WriteString</span><span class="op" id="6732106">(</span><span class="ident" id="6732107"><a href="/image/gif/reader_test.go.html#6729957">paletteStr</a></span><span class="op" id="6732117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6732120">for</span>&nbsp;<span class="ident" id="6732124">transparentIndex</span>&nbsp;<span class="op" id="6732141">:=</span>&nbsp;<span class="num" id="6732144">0</span><span class="op" id="6732145">;</span>&nbsp;<span class="ident" id="6732147"><a href="/image/gif/reader_test.go.html#6732124">transparentIndex</a></span>&nbsp;<span class="op" id="6732164">&lt;</span>&nbsp;<span class="num" id="6732166">3</span><span class="op" id="6732167">;</span>&nbsp;<span class="ident" id="6732169"><a href="/image/gif/reader_test.go.html#6732124">transparentIndex</a></span><span class="op" id="6732185">++</span>&nbsp;<span class="op" id="6732188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6732192">if</span>&nbsp;<span class="ident" id="6732195"><a href="/image/gif/reader_test.go.html#6732124">transparentIndex</a></span>&nbsp;<span class="op" id="6732212">&lt;</span>&nbsp;<span class="num" id="6732214">2</span>&nbsp;<span class="op" id="6732216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6732221">//&nbsp;Write&nbsp;the&nbsp;graphic&nbsp;control&nbsp;for&nbsp;the&nbsp;transparent&nbsp;index.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732280"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732281">.</span><span class="ident" id="6732282">WriteString</span><span class="op" id="6732293">(</span><span class="string" id="6732294">&#34;\x21\xf9\x00\x01\x00\x00&#34;</span><span class="op" id="6732320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732325"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732326">.</span><span class="ident" id="6732327">WriteByte</span><span class="op" id="6732336">(</span><span class="builtintype" id="6732337">byte</span><span class="op" id="6732341">(</span><span class="ident" id="6732342"><a href="/image/gif/reader_test.go.html#6732124">transparentIndex</a></span><span class="op" id="6732358">)</span><span class="op" id="6732359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732364"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732365">.</span><span class="ident" id="6732366">WriteByte</span><span class="op" id="6732375">(</span><span class="num" id="6732376">0</span><span class="op" id="6732377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6732381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6732385">//&nbsp;Write&nbsp;an&nbsp;image&nbsp;with&nbsp;bounds&nbsp;2x1,&nbsp;as&nbsp;per&nbsp;TestDecode.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732441"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732442">.</span><span class="ident" id="6732443">WriteString</span><span class="op" id="6732454">(</span><span class="string" id="6732455">&#34;\x2c\x00\x00\x00\x00\x02\x00\x01\x00\x00\x02&#34;</span><span class="op" id="6732501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732505">enc</span>&nbsp;<span class="op" id="6732509">:=</span>&nbsp;<span class="ident" id="6732512"><a href="/image/gif/reader_test.go.html#6730140">lzwEncode</a></span><span class="op" id="6732521">(</span><span class="num" id="6732522">2</span><span class="op" id="6732523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6732527">if</span>&nbsp;<span class="builtinfunc" id="6732530">len</span><span class="op" id="6732533">(</span><span class="ident" id="6732534"><a href="/image/gif/reader_test.go.html#6732505">enc</a></span><span class="op" id="6732537">)</span>&nbsp;<span class="op" id="6732539">&gt;</span>&nbsp;<span class="num" id="6732541">0xff</span>&nbsp;<span class="op" id="6732546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732551"><a href="/image/gif/reader_test.go.html#6732028">t</a></span><span class="op" id="6732552">.</span><span class="ident" id="6732553">Fatalf</span><span class="op" id="6732559">(</span><span class="string" id="6732560">&#34;compressed&nbsp;length&nbsp;%d&nbsp;is&nbsp;too&nbsp;large&#34;</span><span class="op" id="6732595">,</span>&nbsp;<span class="builtinfunc" id="6732597">len</span><span class="op" id="6732600">(</span><span class="ident" id="6732601"><a href="/image/gif/reader_test.go.html#6732505">enc</a></span><span class="op" id="6732604">)</span><span class="op" id="6732605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6732609">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732613"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732614">.</span><span class="ident" id="6732615">WriteByte</span><span class="op" id="6732624">(</span><span class="builtintype" id="6732625">byte</span><span class="op" id="6732629">(</span><span class="builtinfunc" id="6732630">len</span><span class="op" id="6732633">(</span><span class="ident" id="6732634"><a href="/image/gif/reader_test.go.html#6732505">enc</a></span><span class="op" id="6732637">)</span><span class="op" id="6732638">)</span><span class="op" id="6732639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732643"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732644">.</span><span class="ident" id="6732645">Write</span><span class="op" id="6732650">(</span><span class="ident" id="6732651"><a href="/image/gif/reader_test.go.html#6732505">enc</a></span><span class="op" id="6732654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732658"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732659">.</span><span class="ident" id="6732660">WriteByte</span><span class="op" id="6732669">(</span><span class="num" id="6732670">0x00</span><span class="op" id="6732674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6732677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732680"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732681">.</span><span class="ident" id="6732682">WriteString</span><span class="op" id="6732693">(</span><span class="ident" id="6732694"><a href="/image/gif/reader_test.go.html#6730040">trailerStr</a></span><span class="op" id="6732704">)</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732708">g</span><span class="op" id="6732709">,</span>&nbsp;<span class="ident" id="6732711">err</span>&nbsp;<span class="op" id="6732715">:=</span>&nbsp;<span class="ident" id="6732718"><a href="/image/gif/reader.go.html#6264324">DecodeAll</a></span><span class="op" id="6732727">(</span><span class="ident" id="6732728"><a href="/image/gif/reader_test.go.html#6732045">b</a></span><span class="op" id="6732729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6732732">if</span>&nbsp;<span class="ident" id="6732735"><a href="/image/gif/reader_test.go.html#6732711">err</a></span>&nbsp;<span class="op" id="6732739">!=</span>&nbsp;<span class="ident" id="6732742">nil</span>&nbsp;<span class="op" id="6732746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732750"><a href="/image/gif/reader_test.go.html#6732028">t</a></span><span class="op" id="6732751">.</span><span class="ident" id="6732752">Fatalf</span><span class="op" id="6732758">(</span><span class="string" id="6732759">&#34;DecodeAll:&nbsp;%v&#34;</span><span class="op" id="6732774">,</span>&nbsp;<span class="ident" id="6732776"><a href="/image/gif/reader_test.go.html#6732711">err</a></span><span class="op" id="6732779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6732782">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732785">c0</span>&nbsp;<span class="op" id="6732788">:=</span>&nbsp;<span class="ident" id="6732791"><a href="/image/gif/reader_test.go.html#6729690">color</a></span><span class="op" id="6732796">.</span><span class="ident" id="6732797">RGBA</span><span class="op" id="6732801">{</span><span class="ident" id="6732802"><a href="/image/gif/reader_test.go.html#6729957">paletteStr</a></span><span class="op" id="6732812">[</span><span class="num" id="6732813">0</span><span class="op" id="6732814">]</span><span class="op" id="6732815">,</span>&nbsp;<span class="ident" id="6732817"><a href="/image/gif/reader_test.go.html#6729957">paletteStr</a></span><span class="op" id="6732827">[</span><span class="num" id="6732828">1</span><span class="op" id="6732829">]</span><span class="op" id="6732830">,</span>&nbsp;<span class="ident" id="6732832"><a href="/image/gif/reader_test.go.html#6729957">paletteStr</a></span><span class="op" id="6732842">[</span><span class="num" id="6732843">2</span><span class="op" id="6732844">]</span><span class="op" id="6732845">,</span>&nbsp;<span class="num" id="6732847">0xff</span><span class="op" id="6732851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732854">c1</span>&nbsp;<span class="op" id="6732857">:=</span>&nbsp;<span class="ident" id="6732860"><a href="/image/gif/reader_test.go.html#6729690">color</a></span><span class="op" id="6732865">.</span><span class="ident" id="6732866">RGBA</span><span class="op" id="6732870">{</span><span class="ident" id="6732871"><a href="/image/gif/reader_test.go.html#6729957">paletteStr</a></span><span class="op" id="6732881">[</span><span class="num" id="6732882">3</span><span class="op" id="6732883">]</span><span class="op" id="6732884">,</span>&nbsp;<span class="ident" id="6732886"><a href="/image/gif/reader_test.go.html#6729957">paletteStr</a></span><span class="op" id="6732896">[</span><span class="num" id="6732897">4</span><span class="op" id="6732898">]</span><span class="op" id="6732899">,</span>&nbsp;<span class="ident" id="6732901"><a href="/image/gif/reader_test.go.html#6729957">paletteStr</a></span><span class="op" id="6732911">[</span><span class="num" id="6732912">5</span><span class="op" id="6732913">]</span><span class="op" id="6732914">,</span>&nbsp;<span class="num" id="6732916">0xff</span><span class="op" id="6732920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732923">cz</span>&nbsp;<span class="op" id="6732926">:=</span>&nbsp;<span class="ident" id="6732929"><a href="/image/gif/reader_test.go.html#6729690">color</a></span><span class="op" id="6732934">.</span><span class="ident" id="6732935">RGBA</span><span class="op" id="6732939">{</span><span class="op" id="6732940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6732943">wants</span>&nbsp;<span class="op" id="6732949">:=</span>&nbsp;<span class="op" id="6732952">[</span><span class="op" id="6732953">]</span><span class="ident" id="6732954"><a href="/image/gif/reader_test.go.html#6729690">color</a></span><span class="op" id="6732959">.</span><span class="ident" id="6732960">Palette</span><span class="op" id="6732967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6732971">{</span><span class="ident" id="6732972"><a href="/image/gif/reader_test.go.html#6732923">cz</a></span><span class="op" id="6732974">,</span>&nbsp;<span class="ident" id="6732976"><a href="/image/gif/reader_test.go.html#6732854">c1</a></span><span class="op" id="6732978">}</span><span class="op" id="6732979">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6732983">{</span><span class="ident" id="6732984"><a href="/image/gif/reader_test.go.html#6732785">c0</a></span><span class="op" id="6732986">,</span>&nbsp;<span class="ident" id="6732988"><a href="/image/gif/reader_test.go.html#6732923">cz</a></span><span class="op" id="6732990">}</span><span class="op" id="6732991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6732995">{</span><span class="ident" id="6732996"><a href="/image/gif/reader_test.go.html#6732785">c0</a></span><span class="op" id="6732998">,</span>&nbsp;<span class="ident" id="6733000"><a href="/image/gif/reader_test.go.html#6732854">c1</a></span><span class="op" id="6733002">}</span><span class="op" id="6733003">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6733006">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6733009">if</span>&nbsp;<span class="builtinfunc" id="6733012">len</span><span class="op" id="6733015">(</span><span class="ident" id="6733016"><a href="/image/gif/reader_test.go.html#6732708">g</a></span><span class="op" id="6733017">.</span><span class="ident" id="6733018">Image</span><span class="op" id="6733023">)</span>&nbsp;<span class="op" id="6733025">!=</span>&nbsp;<span class="builtinfunc" id="6733028">len</span><span class="op" id="6733031">(</span><span class="ident" id="6733032"><a href="/image/gif/reader_test.go.html#6732943">wants</a></span><span class="op" id="6733037">)</span>&nbsp;<span class="op" id="6733039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733043"><a href="/image/gif/reader_test.go.html#6732028">t</a></span><span class="op" id="6733044">.</span><span class="ident" id="6733045">Fatalf</span><span class="op" id="6733051">(</span><span class="string" id="6733052">&#34;got&nbsp;%d&nbsp;images,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="6733076">,</span>&nbsp;<span class="builtinfunc" id="6733078">len</span><span class="op" id="6733081">(</span><span class="ident" id="6733082"><a href="/image/gif/reader_test.go.html#6732708">g</a></span><span class="op" id="6733083">.</span><span class="ident" id="6733084">Image</span><span class="op" id="6733089">)</span><span class="op" id="6733090">,</span>&nbsp;<span class="builtinfunc" id="6733092">len</span><span class="op" id="6733095">(</span><span class="ident" id="6733096"><a href="/image/gif/reader_test.go.html#6732943">wants</a></span><span class="op" id="6733101">)</span><span class="op" id="6733102">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6733105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6733108">for</span>&nbsp;<span class="ident" id="6733112">i</span><span class="op" id="6733113">,</span>&nbsp;<span class="ident" id="6733115">want</span>&nbsp;<span class="op" id="6733120">:=</span>&nbsp;<span class="keyword" id="6733123">range</span>&nbsp;<span class="ident" id="6733129"><a href="/image/gif/reader_test.go.html#6732943">wants</a></span>&nbsp;<span class="op" id="6733135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733139">got</span>&nbsp;<span class="op" id="6733143">:=</span>&nbsp;<span class="ident" id="6733146"><a href="/image/gif/reader_test.go.html#6732708">g</a></span><span class="op" id="6733147">.</span><span class="ident" id="6733148">Image</span><span class="op" id="6733153">[</span><span class="ident" id="6733154"><a href="/image/gif/reader_test.go.html#6733112">i</a></span><span class="op" id="6733155">]</span><span class="op" id="6733156">.</span><span class="ident" id="6733157">Palette</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6733167">if</span>&nbsp;<span class="op" id="6733170">!</span><span class="ident" id="6733171"><a href="/image/gif/reader_test.go.html#6729705">reflect</a></span><span class="op" id="6733178">.</span><span class="ident" id="6733179">DeepEqual</span><span class="op" id="6733188">(</span><span class="ident" id="6733189"><a href="/image/gif/reader_test.go.html#6733139">got</a></span><span class="op" id="6733192">,</span>&nbsp;<span class="ident" id="6733194"><a href="/image/gif/reader_test.go.html#6733115">want</a></span><span class="op" id="6733198">)</span>&nbsp;<span class="op" id="6733200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733205"><a href="/image/gif/reader_test.go.html#6732028">t</a></span><span class="op" id="6733206">.</span><span class="ident" id="6733207">Errorf</span><span class="op" id="6733213">(</span><span class="string" id="6733214">&#34;palette&nbsp;#%d:\ngot&nbsp;&nbsp;%v\nwant&nbsp;%v&#34;</span><span class="op" id="6733246">,</span>&nbsp;<span class="ident" id="6733248"><a href="/image/gif/reader_test.go.html#6733112">i</a></span><span class="op" id="6733249">,</span>&nbsp;<span class="ident" id="6733251"><a href="/image/gif/reader_test.go.html#6733139">got</a></span><span class="op" id="6733254">,</span>&nbsp;<span class="ident" id="6733256"><a href="/image/gif/reader_test.go.html#6733115">want</a></span><span class="op" id="6733260">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6733264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6733267">}</span><br>
<span class="lineno"></span><span class="op" id="6733269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6733272">//&nbsp;testGIF&nbsp;is&nbsp;a&nbsp;simple&nbsp;GIF&nbsp;that&nbsp;we&nbsp;can&nbsp;modify&nbsp;to&nbsp;test&nbsp;different&nbsp;scenarios.</span><br>
<span class="lineno">140</span><span class="keyword" id="6733347">var</span>&nbsp;<span class="ident" id="6733351">testGIF</span>&nbsp;<span class="op" id="6733359">=</span>&nbsp;<span class="op" id="6733361">[</span><span class="op" id="6733362">]</span><span class="builtintype" id="6733363">byte</span><span class="op" id="6733367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6733370">&#39;G&#39;</span><span class="op" id="6733373">,</span>&nbsp;<span class="string" id="6733375">&#39;I&#39;</span><span class="op" id="6733378">,</span>&nbsp;<span class="string" id="6733380">&#39;F&#39;</span><span class="op" id="6733383">,</span>&nbsp;<span class="string" id="6733385">&#39;8&#39;</span><span class="op" id="6733388">,</span>&nbsp;<span class="string" id="6733390">&#39;9&#39;</span><span class="op" id="6733393">,</span>&nbsp;<span class="string" id="6733395">&#39;a&#39;</span><span class="op" id="6733398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6733401">1</span><span class="op" id="6733402">,</span>&nbsp;<span class="num" id="6733404">0</span><span class="op" id="6733405">,</span>&nbsp;<span class="num" id="6733407">1</span><span class="op" id="6733408">,</span>&nbsp;<span class="num" id="6733410">0</span><span class="op" id="6733411">,</span>&nbsp;<span class="comment" id="6733413">//&nbsp;w=1,&nbsp;h=1&nbsp;(6)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6733430">128</span><span class="op" id="6733433">,</span>&nbsp;<span class="num" id="6733435">0</span><span class="op" id="6733436">,</span>&nbsp;<span class="num" id="6733438">0</span><span class="op" id="6733439">,</span>&nbsp;<span class="comment" id="6733441">//&nbsp;headerFields,&nbsp;bg,&nbsp;aspect&nbsp;(10)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6733475">0</span><span class="op" id="6733476">,</span>&nbsp;<span class="num" id="6733478">0</span><span class="op" id="6733479">,</span>&nbsp;<span class="num" id="6733481">0</span><span class="op" id="6733482">,</span>&nbsp;<span class="num" id="6733484">1</span><span class="op" id="6733485">,</span>&nbsp;<span class="num" id="6733487">1</span><span class="op" id="6733488">,</span>&nbsp;<span class="num" id="6733490">1</span><span class="op" id="6733491">,</span>&nbsp;<span class="comment" id="6733493">//&nbsp;color&nbsp;map&nbsp;and&nbsp;graphics&nbsp;control&nbsp;(13)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6733533">0x21</span><span class="op" id="6733537">,</span>&nbsp;<span class="num" id="6733539">0xf9</span><span class="op" id="6733543">,</span>&nbsp;<span class="num" id="6733545">0x04</span><span class="op" id="6733549">,</span>&nbsp;<span class="num" id="6733551">0x00</span><span class="op" id="6733555">,</span>&nbsp;<span class="num" id="6733557">0x00</span><span class="op" id="6733561">,</span>&nbsp;<span class="num" id="6733563">0x00</span><span class="op" id="6733567">,</span>&nbsp;<span class="num" id="6733569">0xff</span><span class="op" id="6733573">,</span>&nbsp;<span class="num" id="6733575">0x00</span><span class="op" id="6733579">,</span>&nbsp;<span class="comment" id="6733581">//&nbsp;(19)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733590">//&nbsp;frame&nbsp;1&nbsp;(0,0&nbsp;-&nbsp;1,1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6733614">0x2c</span><span class="op" id="6733618">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6733621">0x00</span><span class="op" id="6733625">,</span>&nbsp;<span class="num" id="6733627">0x00</span><span class="op" id="6733631">,</span>&nbsp;<span class="num" id="6733633">0x00</span><span class="op" id="6733637">,</span>&nbsp;<span class="num" id="6733639">0x00</span><span class="op" id="6733643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6733646">0x01</span><span class="op" id="6733650">,</span>&nbsp;<span class="num" id="6733652">0x00</span><span class="op" id="6733656">,</span>&nbsp;<span class="num" id="6733658">0x01</span><span class="op" id="6733662">,</span>&nbsp;<span class="num" id="6733664">0x00</span><span class="op" id="6733668">,</span>&nbsp;<span class="comment" id="6733670">//&nbsp;(32)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6733679">0x00</span><span class="op" id="6733683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6733686">0x02</span><span class="op" id="6733690">,</span>&nbsp;<span class="num" id="6733692">0x02</span><span class="op" id="6733696">,</span>&nbsp;<span class="num" id="6733698">0x4c</span><span class="op" id="6733702">,</span>&nbsp;<span class="num" id="6733704">0x01</span><span class="op" id="6733708">,</span>&nbsp;<span class="num" id="6733710">0x00</span><span class="op" id="6733714">,</span>&nbsp;<span class="comment" id="6733716">//&nbsp;lzw&nbsp;pixels</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733731">//&nbsp;trailer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6733743">0x3b</span><span class="op" id="6733747">,</span><br>
<span class="lineno"></span><span class="op" id="6733749">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="6733752">func</span>&nbsp;<span class="ident" id="6733757">try</span><span class="op" id="6733760">(</span><span class="ident" id="6733761">t</span>&nbsp;<span class="op" id="6733763">*</span><span class="ident" id="6733764"><a href="/image/gif/reader_test.go.html#6729716">testing</a></span><span class="op" id="6733771">.</span><span class="ident" id="6733772">T</span><span class="op" id="6733773">,</span>&nbsp;<span class="ident" id="6733775">b</span>&nbsp;<span class="op" id="6733777">[</span><span class="op" id="6733778">]</span><span class="builtintype" id="6733779">byte</span><span class="op" id="6733783">,</span>&nbsp;<span class="ident" id="6733785">want</span>&nbsp;<span class="builtintype" id="6733790">string</span><span class="op" id="6733796">)</span>&nbsp;<span class="op" id="6733798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733801">_</span><span class="op" id="6733802">,</span>&nbsp;<span class="ident" id="6733804">err</span>&nbsp;<span class="op" id="6733808">:=</span>&nbsp;<span class="ident" id="6733811"><a href="/image/gif/reader.go.html#6264324">DecodeAll</a></span><span class="op" id="6733820">(</span><span class="ident" id="6733821"><a href="/image/gif/reader_test.go.html#6729656">bytes</a></span><span class="op" id="6733826">.</span><span class="ident" id="6733827">NewReader</span><span class="op" id="6733836">(</span><span class="ident" id="6733837"><a href="/image/gif/reader_test.go.html#6733775">b</a></span><span class="op" id="6733838">)</span><span class="op" id="6733839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6733842">var</span>&nbsp;<span class="ident" id="6733846">got</span>&nbsp;<span class="builtintype" id="6733850">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6733858">if</span>&nbsp;<span class="ident" id="6733861"><a href="/image/gif/reader_test.go.html#6733804">err</a></span>&nbsp;<span class="op" id="6733865">!=</span>&nbsp;<span class="ident" id="6733868">nil</span>&nbsp;<span class="op" id="6733872">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733876"><a href="/image/gif/reader_test.go.html#6733846">got</a></span>&nbsp;<span class="op" id="6733880">=</span>&nbsp;<span class="ident" id="6733882"><a href="/image/gif/reader_test.go.html#6733804">err</a></span><span class="op" id="6733885">.</span><span class="ident" id="6733886">Error</span><span class="op" id="6733891">(</span><span class="op" id="6733892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6733895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6733898">if</span>&nbsp;<span class="ident" id="6733901"><a href="/image/gif/reader_test.go.html#6733846">got</a></span>&nbsp;<span class="op" id="6733905">!=</span>&nbsp;<span class="ident" id="6733908"><a href="/image/gif/reader_test.go.html#6733785">want</a></span>&nbsp;<span class="op" id="6733913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6733917"><a href="/image/gif/reader_test.go.html#6733761">t</a></span><span class="op" id="6733918">.</span><span class="ident" id="6733919">Fatalf</span><span class="op" id="6733925">(</span><span class="string" id="6733926">&#34;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6733943">,</span>&nbsp;<span class="ident" id="6733945"><a href="/image/gif/reader_test.go.html#6733846">got</a></span><span class="op" id="6733948">,</span>&nbsp;<span class="ident" id="6733950"><a href="/image/gif/reader_test.go.html#6733785">want</a></span><span class="op" id="6733954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6733957">}</span><br>
<span class="lineno">165</span><span class="op" id="6733959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6733962">func</span>&nbsp;<span class="ident" id="6733967">TestBounds</span><span class="op" id="6733977">(</span><span class="ident" id="6733978">t</span>&nbsp;<span class="op" id="6733980">*</span><span class="ident" id="6733981"><a href="/image/gif/reader_test.go.html#6729716">testing</a></span><span class="op" id="6733988">.</span><span class="ident" id="6733989">T</span><span class="op" id="6733990">)</span>&nbsp;<span class="op" id="6733992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6733995">//&nbsp;Make&nbsp;a&nbsp;local&nbsp;copy&nbsp;of&nbsp;testGIF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734029">gif</span>&nbsp;<span class="op" id="6734033">:=</span>&nbsp;<span class="builtinfunc" id="6734036">make</span><span class="op" id="6734040">(</span><span class="op" id="6734041">[</span><span class="op" id="6734042">]</span><span class="builtintype" id="6734043">byte</span><span class="op" id="6734047">,</span>&nbsp;<span class="builtinfunc" id="6734049">len</span><span class="op" id="6734052">(</span><span class="ident" id="6734053"><a href="/image/gif/reader_test.go.html#6733351">testGIF</a></span><span class="op" id="6734060">)</span><span class="op" id="6734061">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6734064">copy</span><span class="op" id="6734068">(</span><span class="ident" id="6734069"><a href="/image/gif/reader_test.go.html#6734029">gif</a></span><span class="op" id="6734072">,</span>&nbsp;<span class="ident" id="6734074"><a href="/image/gif/reader_test.go.html#6733351">testGIF</a></span><span class="op" id="6734081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734084">//&nbsp;Make&nbsp;the&nbsp;bounds&nbsp;too&nbsp;big,&nbsp;just&nbsp;by&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734126"><a href="/image/gif/reader_test.go.html#6734029">gif</a></span><span class="op" id="6734129">[</span><span class="num" id="6734130">32</span><span class="op" id="6734132">]</span>&nbsp;<span class="op" id="6734134">=</span>&nbsp;<span class="num" id="6734136">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734139">want</span>&nbsp;<span class="op" id="6734144">:=</span>&nbsp;<span class="string" id="6734147">&#34;gif:&nbsp;frame&nbsp;bounds&nbsp;larger&nbsp;than&nbsp;image&nbsp;bounds&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734193"><a href="/image/gif/reader_test.go.html#6733757">try</a></span><span class="op" id="6734196">(</span><span class="ident" id="6734197"><a href="/image/gif/reader_test.go.html#6733978">t</a></span><span class="op" id="6734198">,</span>&nbsp;<span class="ident" id="6734200"><a href="/image/gif/reader_test.go.html#6734029">gif</a></span><span class="op" id="6734203">,</span>&nbsp;<span class="ident" id="6734205"><a href="/image/gif/reader_test.go.html#6734139">want</a></span><span class="op" id="6734209">)</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734213">//&nbsp;Make&nbsp;the&nbsp;bounds&nbsp;too&nbsp;small;&nbsp;does&nbsp;not&nbsp;trigger&nbsp;bounds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734268">//&nbsp;check,&nbsp;but&nbsp;now&nbsp;there&#39;s&nbsp;too&nbsp;much&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734310"><a href="/image/gif/reader_test.go.html#6734029">gif</a></span><span class="op" id="6734313">[</span><span class="num" id="6734314">32</span><span class="op" id="6734316">]</span>&nbsp;<span class="op" id="6734318">=</span>&nbsp;<span class="num" id="6734320">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734323"><a href="/image/gif/reader_test.go.html#6734139">want</a></span>&nbsp;<span class="op" id="6734328">=</span>&nbsp;<span class="string" id="6734330">&#34;gif:&nbsp;too&nbsp;much&nbsp;image&nbsp;data&#34;</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734358"><a href="/image/gif/reader_test.go.html#6733757">try</a></span><span class="op" id="6734361">(</span><span class="ident" id="6734362"><a href="/image/gif/reader_test.go.html#6733978">t</a></span><span class="op" id="6734363">,</span>&nbsp;<span class="ident" id="6734365"><a href="/image/gif/reader_test.go.html#6734029">gif</a></span><span class="op" id="6734368">,</span>&nbsp;<span class="ident" id="6734370"><a href="/image/gif/reader_test.go.html#6734139">want</a></span><span class="op" id="6734374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734377"><a href="/image/gif/reader_test.go.html#6734029">gif</a></span><span class="op" id="6734380">[</span><span class="num" id="6734381">32</span><span class="op" id="6734383">]</span>&nbsp;<span class="op" id="6734385">=</span>&nbsp;<span class="num" id="6734387">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734391">//&nbsp;Make&nbsp;the&nbsp;bounds&nbsp;really&nbsp;big,&nbsp;expect&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734440"><a href="/image/gif/reader_test.go.html#6734139">want</a></span>&nbsp;<span class="op" id="6734445">=</span>&nbsp;<span class="string" id="6734447">&#34;gif:&nbsp;frame&nbsp;bounds&nbsp;larger&nbsp;than&nbsp;image&nbsp;bounds&#34;</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6734493">for</span>&nbsp;<span class="ident" id="6734497">i</span>&nbsp;<span class="op" id="6734499">:=</span>&nbsp;<span class="num" id="6734502">0</span><span class="op" id="6734503">;</span>&nbsp;<span class="ident" id="6734505"><a href="/image/gif/reader_test.go.html#6734497">i</a></span>&nbsp;<span class="op" id="6734507">&lt;</span>&nbsp;<span class="num" id="6734509">4</span><span class="op" id="6734510">;</span>&nbsp;<span class="ident" id="6734512"><a href="/image/gif/reader_test.go.html#6734497">i</a></span><span class="op" id="6734513">++</span>&nbsp;<span class="op" id="6734516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734520"><a href="/image/gif/reader_test.go.html#6734029">gif</a></span><span class="op" id="6734523">[</span><span class="num" id="6734524">32</span><span class="op" id="6734526">+</span><span class="ident" id="6734527"><a href="/image/gif/reader_test.go.html#6734497">i</a></span><span class="op" id="6734528">]</span>&nbsp;<span class="op" id="6734530">=</span>&nbsp;<span class="num" id="6734532">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6734538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734541"><a href="/image/gif/reader_test.go.html#6733757">try</a></span><span class="op" id="6734544">(</span><span class="ident" id="6734545"><a href="/image/gif/reader_test.go.html#6733978">t</a></span><span class="op" id="6734546">,</span>&nbsp;<span class="ident" id="6734548"><a href="/image/gif/reader_test.go.html#6734029">gif</a></span><span class="op" id="6734551">,</span>&nbsp;<span class="ident" id="6734553"><a href="/image/gif/reader_test.go.html#6734139">want</a></span><span class="op" id="6734557">)</span><br>
<span class="lineno"></span><span class="op" id="6734559">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="keyword" id="6734562">func</span>&nbsp;<span class="ident" id="6734567">TestNoPalette</span><span class="op" id="6734580">(</span><span class="ident" id="6734581">t</span>&nbsp;<span class="op" id="6734583">*</span><span class="ident" id="6734584"><a href="/image/gif/reader_test.go.html#6729716">testing</a></span><span class="op" id="6734591">.</span><span class="ident" id="6734592">T</span><span class="op" id="6734593">)</span>&nbsp;<span class="op" id="6734595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734598">b</span>&nbsp;<span class="op" id="6734600">:=</span>&nbsp;<span class="op" id="6734603">&amp;</span><span class="ident" id="6734604"><a href="/image/gif/reader_test.go.html#6729656">bytes</a></span><span class="op" id="6734609">.</span><span class="ident" id="6734610">Buffer</span><span class="op" id="6734616">{</span><span class="op" id="6734617">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734621">//&nbsp;Manufacture&nbsp;a&nbsp;GIF&nbsp;with&nbsp;no&nbsp;palette,&nbsp;so&nbsp;any&nbsp;pixel&nbsp;at&nbsp;all</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734680">//&nbsp;will&nbsp;be&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734701"><a href="/image/gif/reader_test.go.html#6734598">b</a></span><span class="op" id="6734702">.</span><span class="ident" id="6734703">WriteString</span><span class="op" id="6734714">(</span><span class="ident" id="6734715"><a href="/image/gif/reader_test.go.html#6729805">headerStr</a></span><span class="op" id="6734724">[</span><span class="op" id="6734725">:</span><span class="builtinfunc" id="6734726">len</span><span class="op" id="6734729">(</span><span class="ident" id="6734730"><a href="/image/gif/reader_test.go.html#6729805">headerStr</a></span><span class="op" id="6734739">)</span><span class="op" id="6734740">-</span><span class="num" id="6734741">3</span><span class="op" id="6734742">]</span><span class="op" id="6734743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734746"><a href="/image/gif/reader_test.go.html#6734598">b</a></span><span class="op" id="6734747">.</span><span class="ident" id="6734748">WriteString</span><span class="op" id="6734759">(</span><span class="string" id="6734760">&#34;\x00\x00\x00&#34;</span><span class="op" id="6734774">)</span>&nbsp;<span class="comment" id="6734776">//&nbsp;No&nbsp;global&nbsp;palette.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734800">//&nbsp;Image&nbsp;descriptor:&nbsp;2x1,&nbsp;no&nbsp;local&nbsp;palette.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734845"><a href="/image/gif/reader_test.go.html#6734598">b</a></span><span class="op" id="6734846">.</span><span class="ident" id="6734847">WriteString</span><span class="op" id="6734858">(</span><span class="string" id="6734859">&#34;\x2c\x00\x00\x00\x00\x02\x00\x01\x00\x00\x02&#34;</span><span class="op" id="6734905">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6734909">//&nbsp;Encode&nbsp;the&nbsp;pixels:&nbsp;neither&nbsp;is&nbsp;in&nbsp;range,&nbsp;because&nbsp;there&nbsp;is&nbsp;no&nbsp;palette.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6734982">pix</span>&nbsp;<span class="op" id="6734986">:=</span>&nbsp;<span class="op" id="6734989">[</span><span class="op" id="6734990">]</span><span class="builtintype" id="6734991">byte</span><span class="op" id="6734995">{</span><span class="num" id="6734996">0</span><span class="op" id="6734997">,</span>&nbsp;<span class="num" id="6734999">128</span><span class="op" id="6735002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735005">enc</span>&nbsp;<span class="op" id="6735009">:=</span>&nbsp;<span class="op" id="6735012">&amp;</span><span class="ident" id="6735013"><a href="/image/gif/reader_test.go.html#6729656">bytes</a></span><span class="op" id="6735018">.</span><span class="ident" id="6735019">Buffer</span><span class="op" id="6735025">{</span><span class="op" id="6735026">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735029">w</span>&nbsp;<span class="op" id="6735031">:=</span>&nbsp;<span class="ident" id="6735034"><a href="/image/gif/reader_test.go.html#6729665">lzw</a></span><span class="op" id="6735037">.</span><span class="ident" id="6735038">NewWriter</span><span class="op" id="6735047">(</span><span class="ident" id="6735048"><a href="/image/gif/reader_test.go.html#6735005">enc</a></span><span class="op" id="6735051">,</span>&nbsp;<span class="ident" id="6735053"><a href="/image/gif/reader_test.go.html#6729665">lzw</a></span><span class="op" id="6735056">.</span><span class="ident" id="6735057">LSB</span><span class="op" id="6735060">,</span>&nbsp;<span class="num" id="6735062">2</span><span class="op" id="6735063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735066"><a href="/image/gif/reader_test.go.html#6735029">w</a></span><span class="op" id="6735067">.</span><span class="ident" id="6735068">Write</span><span class="op" id="6735073">(</span><span class="ident" id="6735074"><a href="/image/gif/reader_test.go.html#6734982">pix</a></span><span class="op" id="6735077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735080"><a href="/image/gif/reader_test.go.html#6735029">w</a></span><span class="op" id="6735081">.</span><span class="ident" id="6735082">Close</span><span class="op" id="6735087">(</span><span class="op" id="6735088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735091"><a href="/image/gif/reader_test.go.html#6734598">b</a></span><span class="op" id="6735092">.</span><span class="ident" id="6735093">WriteByte</span><span class="op" id="6735102">(</span><span class="builtintype" id="6735103">byte</span><span class="op" id="6735107">(</span><span class="builtinfunc" id="6735108">len</span><span class="op" id="6735111">(</span><span class="ident" id="6735112"><a href="/image/gif/reader_test.go.html#6735005">enc</a></span><span class="op" id="6735115">.</span><span class="ident" id="6735116">Bytes</span><span class="op" id="6735121">(</span><span class="op" id="6735122">)</span><span class="op" id="6735123">)</span><span class="op" id="6735124">)</span><span class="op" id="6735125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735128"><a href="/image/gif/reader_test.go.html#6734598">b</a></span><span class="op" id="6735129">.</span><span class="ident" id="6735130">Write</span><span class="op" id="6735135">(</span><span class="ident" id="6735136"><a href="/image/gif/reader_test.go.html#6735005">enc</a></span><span class="op" id="6735139">.</span><span class="ident" id="6735140">Bytes</span><span class="op" id="6735145">(</span><span class="op" id="6735146">)</span><span class="op" id="6735147">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735150"><a href="/image/gif/reader_test.go.html#6734598">b</a></span><span class="op" id="6735151">.</span><span class="ident" id="6735152">WriteByte</span><span class="op" id="6735161">(</span><span class="num" id="6735162">0x00</span><span class="op" id="6735166">)</span>&nbsp;<span class="comment" id="6735168">//&nbsp;An&nbsp;empty&nbsp;block&nbsp;signifies&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;image&nbsp;data.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735225"><a href="/image/gif/reader_test.go.html#6734598">b</a></span><span class="op" id="6735226">.</span><span class="ident" id="6735227">WriteString</span><span class="op" id="6735238">(</span><span class="ident" id="6735239"><a href="/image/gif/reader_test.go.html#6730040">trailerStr</a></span><span class="op" id="6735249">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735253"><a href="/image/gif/reader_test.go.html#6733757">try</a></span><span class="op" id="6735256">(</span><span class="ident" id="6735257"><a href="/image/gif/reader_test.go.html#6734581">t</a></span><span class="op" id="6735258">,</span>&nbsp;<span class="ident" id="6735260"><a href="/image/gif/reader_test.go.html#6734598">b</a></span><span class="op" id="6735261">.</span><span class="ident" id="6735262">Bytes</span><span class="op" id="6735267">(</span><span class="op" id="6735268">)</span><span class="op" id="6735269">,</span>&nbsp;<span class="string" id="6735271">&#34;gif:&nbsp;invalid&nbsp;pixel&nbsp;value&#34;</span><span class="op" id="6735297">)</span><br>
<span class="lineno">215</span><span class="op" id="6735299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6735302">func</span>&nbsp;<span class="ident" id="6735307">TestPixelOutsidePaletteRange</span><span class="op" id="6735335">(</span><span class="ident" id="6735336">t</span>&nbsp;<span class="op" id="6735338">*</span><span class="ident" id="6735339"><a href="/image/gif/reader_test.go.html#6729716">testing</a></span><span class="op" id="6735346">.</span><span class="ident" id="6735347">T</span><span class="op" id="6735348">)</span>&nbsp;<span class="op" id="6735350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6735353">for</span>&nbsp;<span class="ident" id="6735357">_</span><span class="op" id="6735358">,</span>&nbsp;<span class="ident" id="6735360">pval</span>&nbsp;<span class="op" id="6735365">:=</span>&nbsp;<span class="keyword" id="6735368">range</span>&nbsp;<span class="op" id="6735374">[</span><span class="op" id="6735375">]</span><span class="builtintype" id="6735376">byte</span><span class="op" id="6735380">{</span><span class="num" id="6735381">0</span><span class="op" id="6735382">,</span>&nbsp;<span class="num" id="6735384">1</span><span class="op" id="6735385">,</span>&nbsp;<span class="num" id="6735387">2</span><span class="op" id="6735388">,</span>&nbsp;<span class="num" id="6735390">3</span><span class="op" id="6735391">,</span>&nbsp;<span class="num" id="6735393">255</span><span class="op" id="6735396">}</span>&nbsp;<span class="op" id="6735398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735402">b</span>&nbsp;<span class="op" id="6735404">:=</span>&nbsp;<span class="op" id="6735407">&amp;</span><span class="ident" id="6735408"><a href="/image/gif/reader_test.go.html#6729656">bytes</a></span><span class="op" id="6735413">.</span><span class="ident" id="6735414">Buffer</span><span class="op" id="6735420">{</span><span class="op" id="6735421">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735426">//&nbsp;Manufacture&nbsp;a&nbsp;GIF&nbsp;with&nbsp;a&nbsp;2&nbsp;color&nbsp;palette.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735473"><a href="/image/gif/reader_test.go.html#6735402">b</a></span><span class="op" id="6735474">.</span><span class="ident" id="6735475">WriteString</span><span class="op" id="6735486">(</span><span class="ident" id="6735487"><a href="/image/gif/reader_test.go.html#6729805">headerStr</a></span><span class="op" id="6735496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735500"><a href="/image/gif/reader_test.go.html#6735402">b</a></span><span class="op" id="6735501">.</span><span class="ident" id="6735502">WriteString</span><span class="op" id="6735513">(</span><span class="ident" id="6735514"><a href="/image/gif/reader_test.go.html#6729957">paletteStr</a></span><span class="op" id="6735524">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735529">//&nbsp;Image&nbsp;descriptor:&nbsp;2x1,&nbsp;no&nbsp;local&nbsp;palette.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735575"><a href="/image/gif/reader_test.go.html#6735402">b</a></span><span class="op" id="6735576">.</span><span class="ident" id="6735577">WriteString</span><span class="op" id="6735588">(</span><span class="string" id="6735589">&#34;\x2c\x00\x00\x00\x00\x02\x00\x01\x00\x00\x02&#34;</span><span class="op" id="6735635">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735640">//&nbsp;Encode&nbsp;the&nbsp;pixels;&nbsp;some&nbsp;pvals&nbsp;trigger&nbsp;the&nbsp;expected&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735703">pix</span>&nbsp;<span class="op" id="6735707">:=</span>&nbsp;<span class="op" id="6735710">[</span><span class="op" id="6735711">]</span><span class="builtintype" id="6735712">byte</span><span class="op" id="6735716">{</span><span class="ident" id="6735717"><a href="/image/gif/reader_test.go.html#6735360">pval</a></span><span class="op" id="6735721">,</span>&nbsp;<span class="ident" id="6735723"><a href="/image/gif/reader_test.go.html#6735360">pval</a></span><span class="op" id="6735727">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735731">enc</span>&nbsp;<span class="op" id="6735735">:=</span>&nbsp;<span class="op" id="6735738">&amp;</span><span class="ident" id="6735739"><a href="/image/gif/reader_test.go.html#6729656">bytes</a></span><span class="op" id="6735744">.</span><span class="ident" id="6735745">Buffer</span><span class="op" id="6735751">{</span><span class="op" id="6735752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735756">w</span>&nbsp;<span class="op" id="6735758">:=</span>&nbsp;<span class="ident" id="6735761"><a href="/image/gif/reader_test.go.html#6729665">lzw</a></span><span class="op" id="6735764">.</span><span class="ident" id="6735765">NewWriter</span><span class="op" id="6735774">(</span><span class="ident" id="6735775"><a href="/image/gif/reader_test.go.html#6735731">enc</a></span><span class="op" id="6735778">,</span>&nbsp;<span class="ident" id="6735780"><a href="/image/gif/reader_test.go.html#6729665">lzw</a></span><span class="op" id="6735783">.</span><span class="ident" id="6735784">LSB</span><span class="op" id="6735787">,</span>&nbsp;<span class="num" id="6735789">2</span><span class="op" id="6735790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735794"><a href="/image/gif/reader_test.go.html#6735756">w</a></span><span class="op" id="6735795">.</span><span class="ident" id="6735796">Write</span><span class="op" id="6735801">(</span><span class="ident" id="6735802"><a href="/image/gif/reader_test.go.html#6735703">pix</a></span><span class="op" id="6735805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735809"><a href="/image/gif/reader_test.go.html#6735756">w</a></span><span class="op" id="6735810">.</span><span class="ident" id="6735811">Close</span><span class="op" id="6735816">(</span><span class="op" id="6735817">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735821"><a href="/image/gif/reader_test.go.html#6735402">b</a></span><span class="op" id="6735822">.</span><span class="ident" id="6735823">WriteByte</span><span class="op" id="6735832">(</span><span class="builtintype" id="6735833">byte</span><span class="op" id="6735837">(</span><span class="builtinfunc" id="6735838">len</span><span class="op" id="6735841">(</span><span class="ident" id="6735842"><a href="/image/gif/reader_test.go.html#6735731">enc</a></span><span class="op" id="6735845">.</span><span class="ident" id="6735846">Bytes</span><span class="op" id="6735851">(</span><span class="op" id="6735852">)</span><span class="op" id="6735853">)</span><span class="op" id="6735854">)</span><span class="op" id="6735855">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735859"><a href="/image/gif/reader_test.go.html#6735402">b</a></span><span class="op" id="6735860">.</span><span class="ident" id="6735861">Write</span><span class="op" id="6735866">(</span><span class="ident" id="6735867"><a href="/image/gif/reader_test.go.html#6735731">enc</a></span><span class="op" id="6735870">.</span><span class="ident" id="6735871">Bytes</span><span class="op" id="6735876">(</span><span class="op" id="6735877">)</span><span class="op" id="6735878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735882"><a href="/image/gif/reader_test.go.html#6735402">b</a></span><span class="op" id="6735883">.</span><span class="ident" id="6735884">WriteByte</span><span class="op" id="6735893">(</span><span class="num" id="6735894">0x00</span><span class="op" id="6735898">)</span>&nbsp;<span class="comment" id="6735900">//&nbsp;An&nbsp;empty&nbsp;block&nbsp;signifies&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;image&nbsp;data.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6735958"><a href="/image/gif/reader_test.go.html#6735402">b</a></span><span class="op" id="6735959">.</span><span class="ident" id="6735960">WriteString</span><span class="op" id="6735971">(</span><span class="ident" id="6735972"><a href="/image/gif/reader_test.go.html#6730040">trailerStr</a></span><span class="op" id="6735982">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6735987">//&nbsp;No&nbsp;error&nbsp;expected,&nbsp;unless&nbsp;the&nbsp;pixels&nbsp;are&nbsp;beyond&nbsp;the&nbsp;2&nbsp;color&nbsp;palette.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736061">want</span>&nbsp;<span class="op" id="6736066">:=</span>&nbsp;<span class="string" id="6736069">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6736074">if</span>&nbsp;<span class="ident" id="6736077"><a href="/image/gif/reader_test.go.html#6735360">pval</a></span>&nbsp;<span class="op" id="6736082">&gt;=</span>&nbsp;<span class="num" id="6736085">2</span>&nbsp;<span class="op" id="6736087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736092"><a href="/image/gif/reader_test.go.html#6736061">want</a></span>&nbsp;<span class="op" id="6736097">=</span>&nbsp;<span class="string" id="6736099">&#34;gif:&nbsp;invalid&nbsp;pixel&nbsp;value&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736128">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6736132"><a href="/image/gif/reader_test.go.html#6733757">try</a></span><span class="op" id="6736135">(</span><span class="ident" id="6736136"><a href="/image/gif/reader_test.go.html#6735336">t</a></span><span class="op" id="6736137">,</span>&nbsp;<span class="ident" id="6736139"><a href="/image/gif/reader_test.go.html#6735402">b</a></span><span class="op" id="6736140">.</span><span class="ident" id="6736141">Bytes</span><span class="op" id="6736146">(</span><span class="op" id="6736147">)</span><span class="op" id="6736148">,</span>&nbsp;<span class="ident" id="6736150"><a href="/image/gif/reader_test.go.html#6736061">want</a></span><span class="op" id="6736154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6736157">}</span><br>
<span class="lineno"></span><span class="op" id="6736159">}</span>
</div>
</body>
</html>
