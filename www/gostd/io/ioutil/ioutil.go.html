<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html" class="current">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3321052">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3321107">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3321161">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3321212">//&nbsp;Package&nbsp;ioutil&nbsp;implements&nbsp;some&nbsp;I/O&nbsp;utility&nbsp;functions.</span><br>
<span class="lineno"></span><span class="keyword" id="3321269">package</span>&nbsp;<span class="ident" id="3321277">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3321285">import</span>&nbsp;<span class="op" id="3321292">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3321295">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3321304">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3321310">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3321316">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3321324">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="3321331">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3321334">//&nbsp;readAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="3321409">//&nbsp;from&nbsp;the&nbsp;internal&nbsp;buffer&nbsp;allocated&nbsp;with&nbsp;a&nbsp;specified&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="keyword" id="3321474">func</span>&nbsp;<span class="ident" id="3321479">readAll</span><span class="op" id="3321486">(</span><span class="ident" id="3321487">r</span>&nbsp;<span class="ident" id="3321489">io</span><span class="op" id="3321491">.</span><span class="ident" id="3321492">Reader</span><span class="op" id="3321498">,</span>&nbsp;<span class="ident" id="3321500">capacity</span>&nbsp;<span class="builtintype" id="3321509">int64</span><span class="op" id="3321514">)</span>&nbsp;<span class="op" id="3321516">(</span><span class="ident" id="3321517">b</span>&nbsp;<span class="op" id="3321519">[</span><span class="op" id="3321520">]</span><span class="builtintype" id="3321521">byte</span><span class="op" id="3321525">,</span>&nbsp;<span class="ident" id="3321527">err</span>&nbsp;<span class="builtintype" id="3321531">error</span><span class="op" id="3321536">)</span>&nbsp;<span class="op" id="3321538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3321541">buf</span>&nbsp;<span class="op" id="3321545">:=</span>&nbsp;<span class="ident" id="3321548">bytes</span><span class="op" id="3321553">.</span><span class="ident" id="3321554">NewBuffer</span><span class="op" id="3321563">(</span><span class="builtinfunc" id="3321564">make</span><span class="op" id="3321568">(</span><span class="op" id="3321569">[</span><span class="op" id="3321570">]</span><span class="builtintype" id="3321571">byte</span><span class="op" id="3321575">,</span>&nbsp;<span class="num" id="3321577">0</span><span class="op" id="3321578">,</span>&nbsp;<span class="ident" id="3321580">capacity</span><span class="op" id="3321588">)</span><span class="op" id="3321589">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3321592">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;overflows,&nbsp;we&nbsp;will&nbsp;get&nbsp;bytes.ErrTooLarge.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3321652">//&nbsp;Return&nbsp;that&nbsp;as&nbsp;an&nbsp;error.&nbsp;Any&nbsp;other&nbsp;panic&nbsp;remains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3321706">defer</span>&nbsp;<span class="keyword" id="3321712">func</span><span class="op" id="3321716">(</span><span class="op" id="3321717">)</span>&nbsp;<span class="op" id="3321719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3321723">e</span>&nbsp;<span class="op" id="3321725">:=</span>&nbsp;<span class="builtinfunc" id="3321728">recover</span><span class="op" id="3321735">(</span><span class="op" id="3321736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3321740">if</span>&nbsp;<span class="ident" id="3321743">e</span>&nbsp;<span class="op" id="3321745">==</span>&nbsp;<span class="builtintype" id="3321748">nil</span>&nbsp;<span class="op" id="3321752">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3321757">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3321766">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3321770">if</span>&nbsp;<span class="ident" id="3321773">panicErr</span><span class="op" id="3321781">,</span>&nbsp;<span class="ident" id="3321783">ok</span>&nbsp;<span class="op" id="3321786">:=</span>&nbsp;<span class="ident" id="3321789">e</span><span class="op" id="3321790">.</span><span class="op" id="3321791">(</span><span class="builtintype" id="3321792">error</span><span class="op" id="3321797">)</span><span class="op" id="3321798">;</span>&nbsp;<span class="ident" id="3321800">ok</span>&nbsp;<span class="op" id="3321803">&amp;&amp;</span>&nbsp;<span class="ident" id="3321806">panicErr</span>&nbsp;<span class="op" id="3321815">==</span>&nbsp;<span class="ident" id="3321818">bytes</span><span class="op" id="3321823">.</span><span class="ident" id="3321824">ErrTooLarge</span>&nbsp;<span class="op" id="3321836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3321841">err</span>&nbsp;<span class="op" id="3321845">=</span>&nbsp;<span class="ident" id="3321847">panicErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3321858">}</span>&nbsp;<span class="keyword" id="3321860">else</span>&nbsp;<span class="op" id="3321865">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3321870">panic</span><span class="op" id="3321875">(</span><span class="ident" id="3321876">e</span><span class="op" id="3321877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3321881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3321884">}</span><span class="op" id="3321885">(</span><span class="op" id="3321886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3321889">_</span><span class="op" id="3321890">,</span>&nbsp;<span class="ident" id="3321892">err</span>&nbsp;<span class="op" id="3321896">=</span>&nbsp;<span class="ident" id="3321898">buf</span><span class="op" id="3321901">.</span><span class="ident" id="3321902">ReadFrom</span><span class="op" id="3321910">(</span><span class="ident" id="3321911">r</span><span class="op" id="3321912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3321915">return</span>&nbsp;<span class="ident" id="3321922">buf</span><span class="op" id="3321925">.</span><span class="ident" id="3321926">Bytes</span><span class="op" id="3321931">(</span><span class="op" id="3321932">)</span><span class="op" id="3321933">,</span>&nbsp;<span class="ident" id="3321935">err</span><br>
<span class="lineno">35</span><span class="op" id="3321939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3321942">//&nbsp;ReadAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="3322018">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3322094">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;from&nbsp;src&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read</span><br>
<span class="lineno">40</span><span class="comment" id="3322168">//&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3322199">func</span>&nbsp;<span class="ident" id="3322204">ReadAll</span><span class="op" id="3322211">(</span><span class="ident" id="3322212">r</span>&nbsp;<span class="ident" id="3322214">io</span><span class="op" id="3322216">.</span><span class="ident" id="3322217">Reader</span><span class="op" id="3322223">)</span>&nbsp;<span class="op" id="3322225">(</span><span class="op" id="3322226">[</span><span class="op" id="3322227">]</span><span class="builtintype" id="3322228">byte</span><span class="op" id="3322232">,</span>&nbsp;<span class="builtintype" id="3322234">error</span><span class="op" id="3322239">)</span>&nbsp;<span class="op" id="3322241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3322244">return</span>&nbsp;<span class="ident" id="3322251">readAll</span><span class="op" id="3322258">(</span><span class="ident" id="3322259">r</span><span class="op" id="3322260">,</span>&nbsp;<span class="ident" id="3322262">bytes</span><span class="op" id="3322267">.</span><span class="ident" id="3322268">MinRead</span><span class="op" id="3322275">)</span><br>
<span class="lineno"></span><span class="op" id="3322277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3322280">//&nbsp;ReadFile&nbsp;reads&nbsp;the&nbsp;file&nbsp;named&nbsp;by&nbsp;filename&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents.</span><br>
<span class="lineno"></span><span class="comment" id="3322351">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadFile</span><br>
<span class="lineno"></span><span class="comment" id="3322425">//&nbsp;reads&nbsp;the&nbsp;whole&nbsp;file,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read&nbsp;as&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3322497">//&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3322516">func</span>&nbsp;<span class="ident" id="3322521">ReadFile</span><span class="op" id="3322529">(</span><span class="ident" id="3322530">filename</span>&nbsp;<span class="builtintype" id="3322539">string</span><span class="op" id="3322545">)</span>&nbsp;<span class="op" id="3322547">(</span><span class="op" id="3322548">[</span><span class="op" id="3322549">]</span><span class="builtintype" id="3322550">byte</span><span class="op" id="3322554">,</span>&nbsp;<span class="builtintype" id="3322556">error</span><span class="op" id="3322561">)</span>&nbsp;<span class="op" id="3322563">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3322566">f</span><span class="op" id="3322567">,</span>&nbsp;<span class="ident" id="3322569">err</span>&nbsp;<span class="op" id="3322573">:=</span>&nbsp;<span class="ident" id="3322576">os</span><span class="op" id="3322578">.</span><span class="ident" id="3322579">Open</span><span class="op" id="3322583">(</span><span class="ident" id="3322584">filename</span><span class="op" id="3322592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3322595">if</span>&nbsp;<span class="ident" id="3322598">err</span>&nbsp;<span class="op" id="3322602">!=</span>&nbsp;<span class="builtintype" id="3322605">nil</span>&nbsp;<span class="op" id="3322609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3322613">return</span>&nbsp;<span class="builtintype" id="3322620">nil</span><span class="op" id="3322623">,</span>&nbsp;<span class="ident" id="3322625">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3322630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3322633">defer</span>&nbsp;<span class="ident" id="3322639">f</span><span class="op" id="3322640">.</span><span class="ident" id="3322641">Close</span><span class="op" id="3322646">(</span><span class="op" id="3322647">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322650">//&nbsp;It&#39;s&nbsp;a&nbsp;good&nbsp;but&nbsp;not&nbsp;certain&nbsp;bet&nbsp;that&nbsp;FileInfo&nbsp;will&nbsp;tell&nbsp;us&nbsp;exactly&nbsp;how&nbsp;much&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322733">//&nbsp;read,&nbsp;so&nbsp;let&#39;s&nbsp;try&nbsp;it&nbsp;but&nbsp;be&nbsp;prepared&nbsp;for&nbsp;the&nbsp;answer&nbsp;to&nbsp;be&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3322803">var</span>&nbsp;<span class="ident" id="3322807">n</span>&nbsp;<span class="builtintype" id="3322809">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3322817">if</span>&nbsp;<span class="ident" id="3322820">fi</span><span class="op" id="3322822">,</span>&nbsp;<span class="ident" id="3322824">err</span>&nbsp;<span class="op" id="3322828">:=</span>&nbsp;<span class="ident" id="3322831">f</span><span class="op" id="3322832">.</span><span class="ident" id="3322833">Stat</span><span class="op" id="3322837">(</span><span class="op" id="3322838">)</span><span class="op" id="3322839">;</span>&nbsp;<span class="ident" id="3322841">err</span>&nbsp;<span class="op" id="3322845">==</span>&nbsp;<span class="builtintype" id="3322848">nil</span>&nbsp;<span class="op" id="3322852">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322856">//&nbsp;Don&#39;t&nbsp;preallocate&nbsp;a&nbsp;huge&nbsp;buffer,&nbsp;just&nbsp;in&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3322908">if</span>&nbsp;<span class="ident" id="3322911">size</span>&nbsp;<span class="op" id="3322916">:=</span>&nbsp;<span class="ident" id="3322919">fi</span><span class="op" id="3322921">.</span><span class="ident" id="3322922">Size</span><span class="op" id="3322926">(</span><span class="op" id="3322927">)</span><span class="op" id="3322928">;</span>&nbsp;<span class="ident" id="3322930">size</span>&nbsp;<span class="op" id="3322935">&lt;</span>&nbsp;<span class="num" id="3322937">1e9</span>&nbsp;<span class="op" id="3322941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3322946">n</span>&nbsp;<span class="op" id="3322948">=</span>&nbsp;<span class="ident" id="3322950">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3322957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3322960">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3322963">//&nbsp;As&nbsp;initial&nbsp;capacity&nbsp;for&nbsp;readAll,&nbsp;use&nbsp;n&nbsp;+&nbsp;a&nbsp;little&nbsp;extra&nbsp;in&nbsp;case&nbsp;Size&nbsp;is&nbsp;zero,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323045">//&nbsp;and&nbsp;to&nbsp;avoid&nbsp;another&nbsp;allocation&nbsp;after&nbsp;Read&nbsp;has&nbsp;filled&nbsp;the&nbsp;buffer.&nbsp;&nbsp;The&nbsp;readAll</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323128">//&nbsp;call&nbsp;will&nbsp;read&nbsp;into&nbsp;its&nbsp;allocated&nbsp;internal&nbsp;buffer&nbsp;cheaply.&nbsp;&nbsp;If&nbsp;the&nbsp;size&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323208">//&nbsp;wrong,&nbsp;we&#39;ll&nbsp;either&nbsp;waste&nbsp;some&nbsp;space&nbsp;off&nbsp;the&nbsp;end&nbsp;or&nbsp;reallocate&nbsp;as&nbsp;needed,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3323290">//&nbsp;in&nbsp;the&nbsp;overwhelmingly&nbsp;common&nbsp;case&nbsp;we&#39;ll&nbsp;get&nbsp;it&nbsp;just&nbsp;right.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323353">return</span>&nbsp;<span class="ident" id="3323360">readAll</span><span class="op" id="3323367">(</span><span class="ident" id="3323368">f</span><span class="op" id="3323369">,</span>&nbsp;<span class="ident" id="3323371">n</span><span class="op" id="3323372">+</span><span class="ident" id="3323373">bytes</span><span class="op" id="3323378">.</span><span class="ident" id="3323379">MinRead</span><span class="op" id="3323386">)</span><br>
<span class="lineno"></span><span class="op" id="3323388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3323391">//&nbsp;WriteFile&nbsp;writes&nbsp;data&nbsp;to&nbsp;a&nbsp;file&nbsp;named&nbsp;by&nbsp;filename.</span><br>
<span class="lineno"></span><span class="comment" id="3323445">//&nbsp;If&nbsp;the&nbsp;file&nbsp;does&nbsp;not&nbsp;exist,&nbsp;WriteFile&nbsp;creates&nbsp;it&nbsp;with&nbsp;permissions&nbsp;perm;</span><br>
<span class="lineno">75</span><span class="comment" id="3323520">//&nbsp;otherwise&nbsp;WriteFile&nbsp;truncates&nbsp;it&nbsp;before&nbsp;writing.</span><br>
<span class="lineno"></span><span class="keyword" id="3323572">func</span>&nbsp;<span class="ident" id="3323577">WriteFile</span><span class="op" id="3323586">(</span><span class="ident" id="3323587">filename</span>&nbsp;<span class="builtintype" id="3323596">string</span><span class="op" id="3323602">,</span>&nbsp;<span class="ident" id="3323604">data</span>&nbsp;<span class="op" id="3323609">[</span><span class="op" id="3323610">]</span><span class="builtintype" id="3323611">byte</span><span class="op" id="3323615">,</span>&nbsp;<span class="ident" id="3323617">perm</span>&nbsp;<span class="ident" id="3323622">os</span><span class="op" id="3323624">.</span><span class="ident" id="3323625">FileMode</span><span class="op" id="3323633">)</span>&nbsp;<span class="builtintype" id="3323635">error</span>&nbsp;<span class="op" id="3323641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323644">f</span><span class="op" id="3323645">,</span>&nbsp;<span class="ident" id="3323647">err</span>&nbsp;<span class="op" id="3323651">:=</span>&nbsp;<span class="ident" id="3323654">os</span><span class="op" id="3323656">.</span><span class="ident" id="3323657">OpenFile</span><span class="op" id="3323665">(</span><span class="ident" id="3323666">filename</span><span class="op" id="3323674">,</span>&nbsp;<span class="ident" id="3323676">os</span><span class="op" id="3323678">.</span><span class="ident" id="3323679">O_WRONLY</span><span class="op" id="3323687">|</span><span class="ident" id="3323688">os</span><span class="op" id="3323690">.</span><span class="ident" id="3323691">O_CREATE</span><span class="op" id="3323699">|</span><span class="ident" id="3323700">os</span><span class="op" id="3323702">.</span><span class="ident" id="3323703">O_TRUNC</span><span class="op" id="3323710">,</span>&nbsp;<span class="ident" id="3323712">perm</span><span class="op" id="3323716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323719">if</span>&nbsp;<span class="ident" id="3323722">err</span>&nbsp;<span class="op" id="3323726">!=</span>&nbsp;<span class="builtintype" id="3323729">nil</span>&nbsp;<span class="op" id="3323733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323737">return</span>&nbsp;<span class="ident" id="3323744">err</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3323749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323752">n</span><span class="op" id="3323753">,</span>&nbsp;<span class="ident" id="3323755">err</span>&nbsp;<span class="op" id="3323759">:=</span>&nbsp;<span class="ident" id="3323762">f</span><span class="op" id="3323763">.</span><span class="ident" id="3323764">Write</span><span class="op" id="3323769">(</span><span class="ident" id="3323770">data</span><span class="op" id="3323774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323777">if</span>&nbsp;<span class="ident" id="3323780">err</span>&nbsp;<span class="op" id="3323784">==</span>&nbsp;<span class="builtintype" id="3323787">nil</span>&nbsp;<span class="op" id="3323791">&amp;&amp;</span>&nbsp;<span class="ident" id="3323794">n</span>&nbsp;<span class="op" id="3323796">&lt;</span>&nbsp;<span class="builtinfunc" id="3323798">len</span><span class="op" id="3323801">(</span><span class="ident" id="3323802">data</span><span class="op" id="3323806">)</span>&nbsp;<span class="op" id="3323808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323812">err</span>&nbsp;<span class="op" id="3323816">=</span>&nbsp;<span class="ident" id="3323818">io</span><span class="op" id="3323820">.</span><span class="ident" id="3323821">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3323836">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323839">if</span>&nbsp;<span class="ident" id="3323842">err1</span>&nbsp;<span class="op" id="3323847">:=</span>&nbsp;<span class="ident" id="3323850">f</span><span class="op" id="3323851">.</span><span class="ident" id="3323852">Close</span><span class="op" id="3323857">(</span><span class="op" id="3323858">)</span><span class="op" id="3323859">;</span>&nbsp;<span class="ident" id="3323861">err</span>&nbsp;<span class="op" id="3323865">==</span>&nbsp;<span class="builtintype" id="3323868">nil</span>&nbsp;<span class="op" id="3323872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3323876">err</span>&nbsp;<span class="op" id="3323880">=</span>&nbsp;<span class="ident" id="3323882">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3323888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3323891">return</span>&nbsp;<span class="ident" id="3323898">err</span><br>
<span class="lineno"></span><span class="op" id="3323902">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="3323905">//&nbsp;byName&nbsp;implements&nbsp;sort.Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3323942">type</span>&nbsp;<span class="ident" id="3323947">byName</span>&nbsp;<span class="op" id="3323954">[</span><span class="op" id="3323955">]</span><span class="ident" id="3323956">os</span><span class="op" id="3323958">.</span><span class="ident" id="3323959">FileInfo</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3323969">func</span>&nbsp;<span class="op" id="3323974">(</span><span class="ident" id="3323975">f</span>&nbsp;<span class="ident" id="3323977">byName</span><span class="op" id="3323983">)</span>&nbsp;<span class="ident" id="3323985">Len</span><span class="op" id="3323988">(</span><span class="op" id="3323989">)</span>&nbsp;<span class="builtintype" id="3323991">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3324005">{</span>&nbsp;<span class="keyword" id="3324007">return</span>&nbsp;<span class="builtinfunc" id="3324014">len</span><span class="op" id="3324017">(</span><span class="ident" id="3324018">f</span><span class="op" id="3324019">)</span>&nbsp;<span class="op" id="3324021">}</span><br>
<span class="lineno">95</span><span class="keyword" id="3324023">func</span>&nbsp;<span class="op" id="3324028">(</span><span class="ident" id="3324029">f</span>&nbsp;<span class="ident" id="3324031">byName</span><span class="op" id="3324037">)</span>&nbsp;<span class="ident" id="3324039">Less</span><span class="op" id="3324043">(</span><span class="ident" id="3324044">i</span><span class="op" id="3324045">,</span>&nbsp;<span class="ident" id="3324047">j</span>&nbsp;<span class="builtintype" id="3324049">int</span><span class="op" id="3324052">)</span>&nbsp;<span class="builtintype" id="3324054">bool</span>&nbsp;<span class="op" id="3324059">{</span>&nbsp;<span class="keyword" id="3324061">return</span>&nbsp;<span class="ident" id="3324068">f</span><span class="op" id="3324069">[</span><span class="ident" id="3324070">i</span><span class="op" id="3324071">]</span><span class="op" id="3324072">.</span><span class="ident" id="3324073">Name</span><span class="op" id="3324077">(</span><span class="op" id="3324078">)</span>&nbsp;<span class="op" id="3324080">&lt;</span>&nbsp;<span class="ident" id="3324082">f</span><span class="op" id="3324083">[</span><span class="ident" id="3324084">j</span><span class="op" id="3324085">]</span><span class="op" id="3324086">.</span><span class="ident" id="3324087">Name</span><span class="op" id="3324091">(</span><span class="op" id="3324092">)</span>&nbsp;<span class="op" id="3324094">}</span><br>
<span class="lineno"></span><span class="keyword" id="3324096">func</span>&nbsp;<span class="op" id="3324101">(</span><span class="ident" id="3324102">f</span>&nbsp;<span class="ident" id="3324104">byName</span><span class="op" id="3324110">)</span>&nbsp;<span class="ident" id="3324112">Swap</span><span class="op" id="3324116">(</span><span class="ident" id="3324117">i</span><span class="op" id="3324118">,</span>&nbsp;<span class="ident" id="3324120">j</span>&nbsp;<span class="builtintype" id="3324122">int</span><span class="op" id="3324125">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3324132">{</span>&nbsp;<span class="ident" id="3324134">f</span><span class="op" id="3324135">[</span><span class="ident" id="3324136">i</span><span class="op" id="3324137">]</span><span class="op" id="3324138">,</span>&nbsp;<span class="ident" id="3324140">f</span><span class="op" id="3324141">[</span><span class="ident" id="3324142">j</span><span class="op" id="3324143">]</span>&nbsp;<span class="op" id="3324145">=</span>&nbsp;<span class="ident" id="3324147">f</span><span class="op" id="3324148">[</span><span class="ident" id="3324149">j</span><span class="op" id="3324150">]</span><span class="op" id="3324151">,</span>&nbsp;<span class="ident" id="3324153">f</span><span class="op" id="3324154">[</span><span class="ident" id="3324155">i</span><span class="op" id="3324156">]</span>&nbsp;<span class="op" id="3324158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3324161">//&nbsp;ReadDir&nbsp;reads&nbsp;the&nbsp;directory&nbsp;named&nbsp;by&nbsp;dirname&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3324221">//&nbsp;a&nbsp;list&nbsp;of&nbsp;sorted&nbsp;directory&nbsp;entries.</span><br>
<span class="lineno">100</span><span class="keyword" id="3324260">func</span>&nbsp;<span class="ident" id="3324265">ReadDir</span><span class="op" id="3324272">(</span><span class="ident" id="3324273">dirname</span>&nbsp;<span class="builtintype" id="3324281">string</span><span class="op" id="3324287">)</span>&nbsp;<span class="op" id="3324289">(</span><span class="op" id="3324290">[</span><span class="op" id="3324291">]</span><span class="ident" id="3324292">os</span><span class="op" id="3324294">.</span><span class="ident" id="3324295">FileInfo</span><span class="op" id="3324303">,</span>&nbsp;<span class="builtintype" id="3324305">error</span><span class="op" id="3324310">)</span>&nbsp;<span class="op" id="3324312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324315">f</span><span class="op" id="3324316">,</span>&nbsp;<span class="ident" id="3324318">err</span>&nbsp;<span class="op" id="3324322">:=</span>&nbsp;<span class="ident" id="3324325">os</span><span class="op" id="3324327">.</span><span class="ident" id="3324328">Open</span><span class="op" id="3324332">(</span><span class="ident" id="3324333">dirname</span><span class="op" id="3324340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324343">if</span>&nbsp;<span class="ident" id="3324346">err</span>&nbsp;<span class="op" id="3324350">!=</span>&nbsp;<span class="builtintype" id="3324353">nil</span>&nbsp;<span class="op" id="3324357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324361">return</span>&nbsp;<span class="builtintype" id="3324368">nil</span><span class="op" id="3324371">,</span>&nbsp;<span class="ident" id="3324373">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3324378">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324381">list</span><span class="op" id="3324385">,</span>&nbsp;<span class="ident" id="3324387">err</span>&nbsp;<span class="op" id="3324391">:=</span>&nbsp;<span class="ident" id="3324394">f</span><span class="op" id="3324395">.</span><span class="ident" id="3324396">Readdir</span><span class="op" id="3324403">(</span><span class="op" id="3324404">-</span><span class="num" id="3324405">1</span><span class="op" id="3324406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324409">f</span><span class="op" id="3324410">.</span><span class="ident" id="3324411">Close</span><span class="op" id="3324416">(</span><span class="op" id="3324417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324420">if</span>&nbsp;<span class="ident" id="3324423">err</span>&nbsp;<span class="op" id="3324427">!=</span>&nbsp;<span class="builtintype" id="3324430">nil</span>&nbsp;<span class="op" id="3324434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324438">return</span>&nbsp;<span class="builtintype" id="3324445">nil</span><span class="op" id="3324448">,</span>&nbsp;<span class="ident" id="3324450">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3324455">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324458">sort</span><span class="op" id="3324462">.</span><span class="ident" id="3324463">Sort</span><span class="op" id="3324467">(</span><span class="ident" id="3324468">byName</span><span class="op" id="3324474">(</span><span class="ident" id="3324475">list</span><span class="op" id="3324479">)</span><span class="op" id="3324480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324483">return</span>&nbsp;<span class="ident" id="3324490">list</span><span class="op" id="3324494">,</span>&nbsp;<span class="builtintype" id="3324496">nil</span><br>
<span class="lineno"></span><span class="op" id="3324500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3324503">type</span>&nbsp;<span class="ident" id="3324508">nopCloser</span>&nbsp;<span class="keyword" id="3324518">struct</span>&nbsp;<span class="op" id="3324525">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3324528">io</span><span class="op" id="3324530">.</span><span class="ident" id="3324531">Reader</span><br>
<span class="lineno"></span><span class="op" id="3324538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3324541">func</span>&nbsp;<span class="op" id="3324546">(</span><span class="ident" id="3324547">nopCloser</span><span class="op" id="3324556">)</span>&nbsp;<span class="ident" id="3324558">Close</span><span class="op" id="3324563">(</span><span class="op" id="3324564">)</span>&nbsp;<span class="builtintype" id="3324566">error</span>&nbsp;<span class="op" id="3324572">{</span>&nbsp;<span class="keyword" id="3324574">return</span>&nbsp;<span class="builtintype" id="3324581">nil</span>&nbsp;<span class="op" id="3324585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="3324588">//&nbsp;NopCloser&nbsp;returns&nbsp;a&nbsp;ReadCloser&nbsp;with&nbsp;a&nbsp;no-op&nbsp;Close&nbsp;method&nbsp;wrapping</span><br>
<span class="lineno"></span><span class="comment" id="3324657">//&nbsp;the&nbsp;provided&nbsp;Reader&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="3324683">func</span>&nbsp;<span class="ident" id="3324688">NopCloser</span><span class="op" id="3324697">(</span><span class="ident" id="3324698">r</span>&nbsp;<span class="ident" id="3324700">io</span><span class="op" id="3324702">.</span><span class="ident" id="3324703">Reader</span><span class="op" id="3324709">)</span>&nbsp;<span class="ident" id="3324711">io</span><span class="op" id="3324713">.</span><span class="ident" id="3324714">ReadCloser</span>&nbsp;<span class="op" id="3324725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324728">return</span>&nbsp;<span class="ident" id="3324735">nopCloser</span><span class="op" id="3324744">{</span><span class="ident" id="3324745">r</span><span class="op" id="3324746">}</span><br>
<span class="lineno"></span><span class="op" id="3324748">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="3324751">type</span>&nbsp;<span class="ident" id="3324756">devNull</span>&nbsp;<span class="builtintype" id="3324764">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3324769">//&nbsp;devNull&nbsp;implements&nbsp;ReaderFrom&nbsp;as&nbsp;an&nbsp;optimization&nbsp;so&nbsp;io.Copy&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3324835">//&nbsp;ioutil.Discard&nbsp;can&nbsp;avoid&nbsp;doing&nbsp;unnecessary&nbsp;work.</span><br>
<span class="lineno">130</span><span class="keyword" id="3324887">var</span>&nbsp;<span class="ident" id="3324891">_</span>&nbsp;<span class="ident" id="3324893">io</span><span class="op" id="3324895">.</span><span class="ident" id="3324896">ReaderFrom</span>&nbsp;<span class="op" id="3324907">=</span>&nbsp;<span class="ident" id="3324909">devNull</span><span class="op" id="3324916">(</span><span class="num" id="3324917">0</span><span class="op" id="3324918">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3324921">func</span>&nbsp;<span class="op" id="3324926">(</span><span class="ident" id="3324927">devNull</span><span class="op" id="3324934">)</span>&nbsp;<span class="ident" id="3324936">Write</span><span class="op" id="3324941">(</span><span class="ident" id="3324942">p</span>&nbsp;<span class="op" id="3324944">[</span><span class="op" id="3324945">]</span><span class="builtintype" id="3324946">byte</span><span class="op" id="3324950">)</span>&nbsp;<span class="op" id="3324952">(</span><span class="builtintype" id="3324953">int</span><span class="op" id="3324956">,</span>&nbsp;<span class="builtintype" id="3324958">error</span><span class="op" id="3324963">)</span>&nbsp;<span class="op" id="3324965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3324968">return</span>&nbsp;<span class="builtinfunc" id="3324975">len</span><span class="op" id="3324978">(</span><span class="ident" id="3324979">p</span><span class="op" id="3324980">)</span><span class="op" id="3324981">,</span>&nbsp;<span class="builtintype" id="3324983">nil</span><br>
<span class="lineno"></span><span class="op" id="3324987">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="3324990">func</span>&nbsp;<span class="op" id="3324995">(</span><span class="ident" id="3324996">devNull</span><span class="op" id="3325003">)</span>&nbsp;<span class="ident" id="3325005">WriteString</span><span class="op" id="3325016">(</span><span class="ident" id="3325017">s</span>&nbsp;<span class="builtintype" id="3325019">string</span><span class="op" id="3325025">)</span>&nbsp;<span class="op" id="3325027">(</span><span class="builtintype" id="3325028">int</span><span class="op" id="3325031">,</span>&nbsp;<span class="builtintype" id="3325033">error</span><span class="op" id="3325038">)</span>&nbsp;<span class="op" id="3325040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325043">return</span>&nbsp;<span class="builtinfunc" id="3325050">len</span><span class="op" id="3325053">(</span><span class="ident" id="3325054">s</span><span class="op" id="3325055">)</span><span class="op" id="3325056">,</span>&nbsp;<span class="builtintype" id="3325058">nil</span><br>
<span class="lineno"></span><span class="op" id="3325062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="3325065">var</span>&nbsp;<span class="ident" id="3325069">blackHolePool</span>&nbsp;<span class="op" id="3325083">=</span>&nbsp;<span class="ident" id="3325085">sync</span><span class="op" id="3325089">.</span><span class="ident" id="3325090">Pool</span><span class="op" id="3325094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3325097">New</span><span class="op" id="3325100">:</span>&nbsp;<span class="keyword" id="3325102">func</span><span class="op" id="3325106">(</span><span class="op" id="3325107">)</span>&nbsp;<span class="keyword" id="3325109">interface</span><span class="op" id="3325118">{</span><span class="op" id="3325119">}</span>&nbsp;<span class="op" id="3325121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3325125">b</span>&nbsp;<span class="op" id="3325127">:=</span>&nbsp;<span class="builtinfunc" id="3325130">make</span><span class="op" id="3325134">(</span><span class="op" id="3325135">[</span><span class="op" id="3325136">]</span><span class="builtintype" id="3325137">byte</span><span class="op" id="3325141">,</span>&nbsp;<span class="num" id="3325143">8192</span><span class="op" id="3325147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325151">return</span>&nbsp;<span class="op" id="3325158">&amp;</span><span class="ident" id="3325159">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3325162">}</span><span class="op" id="3325163">,</span><br>
<span class="lineno">145</span><span class="op" id="3325165">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3325168">func</span>&nbsp;<span class="op" id="3325173">(</span><span class="ident" id="3325174">devNull</span><span class="op" id="3325181">)</span>&nbsp;<span class="ident" id="3325183">ReadFrom</span><span class="op" id="3325191">(</span><span class="ident" id="3325192">r</span>&nbsp;<span class="ident" id="3325194">io</span><span class="op" id="3325196">.</span><span class="ident" id="3325197">Reader</span><span class="op" id="3325203">)</span>&nbsp;<span class="op" id="3325205">(</span><span class="ident" id="3325206">n</span>&nbsp;<span class="builtintype" id="3325208">int64</span><span class="op" id="3325213">,</span>&nbsp;<span class="ident" id="3325215">err</span>&nbsp;<span class="builtintype" id="3325219">error</span><span class="op" id="3325224">)</span>&nbsp;<span class="op" id="3325226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3325229">bufp</span>&nbsp;<span class="op" id="3325234">:=</span>&nbsp;<span class="ident" id="3325237">blackHolePool</span><span class="op" id="3325250">.</span><span class="ident" id="3325251">Get</span><span class="op" id="3325254">(</span><span class="op" id="3325255">)</span><span class="op" id="3325256">.</span><span class="op" id="3325257">(</span><span class="op" id="3325258">*</span><span class="op" id="3325259">[</span><span class="op" id="3325260">]</span><span class="builtintype" id="3325261">byte</span><span class="op" id="3325265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3325268">readSize</span>&nbsp;<span class="op" id="3325277">:=</span>&nbsp;<span class="num" id="3325280">0</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325283">for</span>&nbsp;<span class="op" id="3325287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3325291">readSize</span><span class="op" id="3325299">,</span>&nbsp;<span class="ident" id="3325301">err</span>&nbsp;<span class="op" id="3325305">=</span>&nbsp;<span class="ident" id="3325307">r</span><span class="op" id="3325308">.</span><span class="ident" id="3325309">Read</span><span class="op" id="3325313">(</span><span class="op" id="3325314">*</span><span class="ident" id="3325315">bufp</span><span class="op" id="3325319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3325323">n</span>&nbsp;<span class="op" id="3325325">+=</span>&nbsp;<span class="builtintype" id="3325328">int64</span><span class="op" id="3325333">(</span><span class="ident" id="3325334">readSize</span><span class="op" id="3325342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325346">if</span>&nbsp;<span class="ident" id="3325349">err</span>&nbsp;<span class="op" id="3325353">!=</span>&nbsp;<span class="builtintype" id="3325356">nil</span>&nbsp;<span class="op" id="3325360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3325365">blackHolePool</span><span class="op" id="3325378">.</span><span class="ident" id="3325379">Put</span><span class="op" id="3325382">(</span><span class="ident" id="3325383">bufp</span><span class="op" id="3325387">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325392">if</span>&nbsp;<span class="ident" id="3325395">err</span>&nbsp;<span class="op" id="3325399">==</span>&nbsp;<span class="ident" id="3325402">io</span><span class="op" id="3325404">.</span><span class="ident" id="3325405">EOF</span>&nbsp;<span class="op" id="3325409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325415">return</span>&nbsp;<span class="ident" id="3325422">n</span><span class="op" id="3325423">,</span>&nbsp;<span class="builtintype" id="3325425">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3325432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3325437">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3325446">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3325449">}</span><br>
<span class="lineno"></span><span class="op" id="3325451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3325454">//&nbsp;Discard&nbsp;is&nbsp;an&nbsp;io.Writer&nbsp;on&nbsp;which&nbsp;all&nbsp;Write&nbsp;calls&nbsp;succeed</span><br>
<span class="lineno"></span><span class="comment" id="3325514">//&nbsp;without&nbsp;doing&nbsp;anything.</span><br>
<span class="lineno">165</span><span class="keyword" id="3325541">var</span>&nbsp;<span class="ident" id="3325545">Discard</span>&nbsp;<span class="ident" id="3325553">io</span><span class="op" id="3325555">.</span><span class="ident" id="3325556">Writer</span>&nbsp;<span class="op" id="3325563">=</span>&nbsp;<span class="ident" id="3325565">devNull</span><span class="op" id="3325572">(</span><span class="num" id="3325573">0</span><span class="op" id="3325574">)</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
