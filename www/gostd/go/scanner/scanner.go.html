<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/scanner</h2>
<ul>
<li><a href="/gostd/go/scanner/errors.go.html">errors.go</a></li>
<li><a href="/gostd/go/scanner/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/scanner/scanner.go.html" class="current">scanner.go</a></li>
<li><a href="/gostd/go/scanner/scanner_test.go.html">scanner_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4775175">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4775230">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4775284">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4775335">//&nbsp;Package&nbsp;scanner&nbsp;implements&nbsp;a&nbsp;scanner&nbsp;for&nbsp;Go&nbsp;source&nbsp;text.</span><br>
<span class="lineno"></span><span class="comment" id="4775395">//&nbsp;It&nbsp;takes&nbsp;a&nbsp;[]byte&nbsp;as&nbsp;source&nbsp;which&nbsp;can&nbsp;then&nbsp;be&nbsp;tokenized</span><br>
<span class="lineno"></span><span class="comment" id="4775454">//&nbsp;through&nbsp;repeated&nbsp;calls&nbsp;to&nbsp;the&nbsp;Scan&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="4775500">//</span><br>
<span class="lineno"></span><span class="keyword" id="4775503">package</span>&nbsp;<span class="ident" id="4775511">scanner</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="4775520">import</span>&nbsp;<span class="op" id="4775527">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4775530">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4775539">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4775546">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4775558">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4775575">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4775586">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4775597">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4775612">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="4775615">//&nbsp;An&nbsp;ErrorHandler&nbsp;may&nbsp;be&nbsp;provided&nbsp;to&nbsp;Scanner.Init.&nbsp;If&nbsp;a&nbsp;syntax&nbsp;error&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="4775688">//&nbsp;encountered&nbsp;and&nbsp;a&nbsp;handler&nbsp;was&nbsp;installed,&nbsp;the&nbsp;handler&nbsp;is&nbsp;called&nbsp;with&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4775761">//&nbsp;position&nbsp;and&nbsp;an&nbsp;error&nbsp;message.&nbsp;The&nbsp;position&nbsp;points&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="4775835">//&nbsp;the&nbsp;offending&nbsp;token.</span><br>
<span class="lineno">25</span><span class="comment" id="4775859">//</span><br>
<span class="lineno"></span><span class="keyword" id="4775862">type</span>&nbsp;<span class="ident" id="4775867">ErrorHandler</span>&nbsp;<span class="keyword" id="4775880">func</span><span class="op" id="4775884">(</span><span class="ident" id="4775885">pos</span>&nbsp;<span class="ident" id="4775889">token</span><span class="op" id="4775894">.</span><span class="ident" id="4775895">Position</span><span class="op" id="4775903">,</span>&nbsp;<span class="ident" id="4775905">msg</span>&nbsp;<span class="builtintype" id="4775909">string</span><span class="op" id="4775915">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4775918">//&nbsp;A&nbsp;Scanner&nbsp;holds&nbsp;the&nbsp;scanner&#39;s&nbsp;internal&nbsp;state&nbsp;while&nbsp;processing</span><br>
<span class="lineno"></span><span class="comment" id="4775983">//&nbsp;a&nbsp;given&nbsp;text.&nbsp;&nbsp;It&nbsp;can&nbsp;be&nbsp;allocated&nbsp;as&nbsp;part&nbsp;of&nbsp;another&nbsp;data</span><br>
<span class="lineno">30</span><span class="comment" id="4776045">//&nbsp;structure&nbsp;but&nbsp;must&nbsp;be&nbsp;initialized&nbsp;via&nbsp;Init&nbsp;before&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="4776103">//</span><br>
<span class="lineno"></span><span class="keyword" id="4776106">type</span>&nbsp;<span class="ident" id="4776111">Scanner</span>&nbsp;<span class="keyword" id="4776119">struct</span>&nbsp;<span class="op" id="4776126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776129">//&nbsp;immutable&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776149">file</span>&nbsp;<span class="op" id="4776154">*</span><span class="ident" id="4776155">token</span><span class="op" id="4776160">.</span><span class="ident" id="4776161">File</span>&nbsp;&nbsp;<span class="comment" id="4776167">//&nbsp;source&nbsp;file&nbsp;handle</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776190">dir</span>&nbsp;&nbsp;<span class="builtintype" id="4776195">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776208">//&nbsp;directory&nbsp;portion&nbsp;of&nbsp;file.Name()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776245">src</span>&nbsp;&nbsp;<span class="op" id="4776250">[</span><span class="op" id="4776251">]</span><span class="builtintype" id="4776252">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776263">//&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776274">err</span>&nbsp;&nbsp;<span class="ident" id="4776279">ErrorHandler</span>&nbsp;<span class="comment" id="4776292">//&nbsp;error&nbsp;reporting;&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776320">mode</span>&nbsp;<span class="ident" id="4776325">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776338">//&nbsp;scanning&nbsp;mode</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776357">//&nbsp;scanning&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776376">ch</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4776387">rune</span>&nbsp;<span class="comment" id="4776392">//&nbsp;current&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776414">offset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4776425">int</span>&nbsp;&nbsp;<span class="comment" id="4776430">//&nbsp;character&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776451">rdOffset</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4776462">int</span>&nbsp;&nbsp;<span class="comment" id="4776467">//&nbsp;reading&nbsp;offset&nbsp;(position&nbsp;after&nbsp;current&nbsp;character)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776521">lineOffset</span>&nbsp;<span class="builtintype" id="4776532">int</span>&nbsp;&nbsp;<span class="comment" id="4776537">//&nbsp;current&nbsp;line&nbsp;offset</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776561">insertSemi</span>&nbsp;<span class="builtintype" id="4776572">bool</span>&nbsp;<span class="comment" id="4776577">//&nbsp;insert&nbsp;a&nbsp;semicolon&nbsp;before&nbsp;next&nbsp;newline</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4776621">//&nbsp;public&nbsp;state&nbsp;-&nbsp;ok&nbsp;to&nbsp;modify</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776653">ErrorCount</span>&nbsp;<span class="builtintype" id="4776664">int</span>&nbsp;<span class="comment" id="4776668">//&nbsp;number&nbsp;of&nbsp;errors&nbsp;encountered</span><br>
<span class="lineno"></span><span class="op" id="4776700">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4776703">const</span>&nbsp;<span class="ident" id="4776709">bom</span>&nbsp;<span class="op" id="4776713">=</span>&nbsp;<span class="num" id="4776715">0xFEFF</span>&nbsp;<span class="comment" id="4776722">//&nbsp;byte&nbsp;order&nbsp;mark,&nbsp;only&nbsp;permitted&nbsp;as&nbsp;very&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4776782">//&nbsp;Read&nbsp;the&nbsp;next&nbsp;Unicode&nbsp;char&nbsp;into&nbsp;s.ch.</span><br>
<span class="lineno"></span><span class="comment" id="4776823">//&nbsp;s.ch&nbsp;&lt;&nbsp;0&nbsp;means&nbsp;end-of-file.</span><br>
<span class="lineno">55</span><span class="comment" id="4776854">//</span><br>
<span class="lineno"></span><span class="keyword" id="4776857">func</span>&nbsp;<span class="op" id="4776862">(</span><span class="ident" id="4776863">s</span>&nbsp;<span class="op" id="4776865">*</span><span class="ident" id="4776866">Scanner</span><span class="op" id="4776873">)</span>&nbsp;<span class="ident" id="4776875">next</span><span class="op" id="4776879">(</span><span class="op" id="4776880">)</span>&nbsp;<span class="op" id="4776882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776885">if</span>&nbsp;<span class="ident" id="4776888">s</span><span class="op" id="4776889">.</span><span class="ident" id="4776890">rdOffset</span>&nbsp;<span class="op" id="4776899">&lt;</span>&nbsp;<span class="builtinfunc" id="4776901">len</span><span class="op" id="4776904">(</span><span class="ident" id="4776905">s</span><span class="op" id="4776906">.</span><span class="ident" id="4776907">src</span><span class="op" id="4776910">)</span>&nbsp;<span class="op" id="4776912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776916">s</span><span class="op" id="4776917">.</span><span class="ident" id="4776918">offset</span>&nbsp;<span class="op" id="4776925">=</span>&nbsp;<span class="ident" id="4776927">s</span><span class="op" id="4776928">.</span><span class="ident" id="4776929">rdOffset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4776940">if</span>&nbsp;<span class="ident" id="4776943">s</span><span class="op" id="4776944">.</span><span class="ident" id="4776945">ch</span>&nbsp;<span class="op" id="4776948">==</span>&nbsp;<span class="string" id="4776951">&#39;\n&#39;</span>&nbsp;<span class="op" id="4776956">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776961">s</span><span class="op" id="4776962">.</span><span class="ident" id="4776963">lineOffset</span>&nbsp;<span class="op" id="4776974">=</span>&nbsp;<span class="ident" id="4776976">s</span><span class="op" id="4776977">.</span><span class="ident" id="4776978">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4776988">s</span><span class="op" id="4776989">.</span><span class="ident" id="4776990">file</span><span class="op" id="4776994">.</span><span class="ident" id="4776995">AddLine</span><span class="op" id="4777002">(</span><span class="ident" id="4777003">s</span><span class="op" id="4777004">.</span><span class="ident" id="4777005">offset</span><span class="op" id="4777011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777019">r</span><span class="op" id="4777020">,</span>&nbsp;<span class="ident" id="4777022">w</span>&nbsp;<span class="op" id="4777024">:=</span>&nbsp;<span class="builtintype" id="4777027">rune</span><span class="op" id="4777031">(</span><span class="ident" id="4777032">s</span><span class="op" id="4777033">.</span><span class="ident" id="4777034">src</span><span class="op" id="4777037">[</span><span class="ident" id="4777038">s</span><span class="op" id="4777039">.</span><span class="ident" id="4777040">rdOffset</span><span class="op" id="4777048">]</span><span class="op" id="4777049">)</span><span class="op" id="4777050">,</span>&nbsp;<span class="num" id="4777052">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777056">switch</span>&nbsp;<span class="op" id="4777063">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777067">case</span>&nbsp;<span class="ident" id="4777072">r</span>&nbsp;<span class="op" id="4777074">==</span>&nbsp;<span class="num" id="4777077">0</span><span class="op" id="4777078">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777083">s</span><span class="op" id="4777084">.</span><span class="builtintype" id="4777085">error</span><span class="op" id="4777090">(</span><span class="ident" id="4777091">s</span><span class="op" id="4777092">.</span><span class="ident" id="4777093">offset</span><span class="op" id="4777099">,</span>&nbsp;<span class="string" id="4777101">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op" id="4777124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777128">case</span>&nbsp;<span class="ident" id="4777133">r</span>&nbsp;<span class="op" id="4777135">&gt;=</span>&nbsp;<span class="num" id="4777138">0x80</span><span class="op" id="4777142">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4777147">//&nbsp;not&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777163">r</span><span class="op" id="4777164">,</span>&nbsp;<span class="ident" id="4777166">w</span>&nbsp;<span class="op" id="4777168">=</span>&nbsp;<span class="ident" id="4777170">utf8</span><span class="op" id="4777174">.</span><span class="ident" id="4777175">DecodeRune</span><span class="op" id="4777185">(</span><span class="ident" id="4777186">s</span><span class="op" id="4777187">.</span><span class="ident" id="4777188">src</span><span class="op" id="4777191">[</span><span class="ident" id="4777192">s</span><span class="op" id="4777193">.</span><span class="ident" id="4777194">rdOffset</span><span class="op" id="4777202">:</span><span class="op" id="4777203">]</span><span class="op" id="4777204">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777209">if</span>&nbsp;<span class="ident" id="4777212">r</span>&nbsp;<span class="op" id="4777214">==</span>&nbsp;<span class="ident" id="4777217">utf8</span><span class="op" id="4777221">.</span><span class="ident" id="4777222">RuneError</span>&nbsp;<span class="op" id="4777232">&amp;&amp;</span>&nbsp;<span class="ident" id="4777235">w</span>&nbsp;<span class="op" id="4777237">==</span>&nbsp;<span class="num" id="4777240">1</span>&nbsp;<span class="op" id="4777242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777248">s</span><span class="op" id="4777249">.</span><span class="builtintype" id="4777250">error</span><span class="op" id="4777255">(</span><span class="ident" id="4777256">s</span><span class="op" id="4777257">.</span><span class="ident" id="4777258">offset</span><span class="op" id="4777264">,</span>&nbsp;<span class="string" id="4777266">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op" id="4777290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777295">}</span>&nbsp;<span class="keyword" id="4777297">else</span>&nbsp;<span class="keyword" id="4777302">if</span>&nbsp;<span class="ident" id="4777305">r</span>&nbsp;<span class="op" id="4777307">==</span>&nbsp;<span class="ident" id="4777310">bom</span>&nbsp;<span class="op" id="4777314">&amp;&amp;</span>&nbsp;<span class="ident" id="4777317">s</span><span class="op" id="4777318">.</span><span class="ident" id="4777319">offset</span>&nbsp;<span class="op" id="4777326">&gt;</span>&nbsp;<span class="num" id="4777328">0</span>&nbsp;<span class="op" id="4777330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777336">s</span><span class="op" id="4777337">.</span><span class="builtintype" id="4777338">error</span><span class="op" id="4777343">(</span><span class="ident" id="4777344">s</span><span class="op" id="4777345">.</span><span class="ident" id="4777346">offset</span><span class="op" id="4777352">,</span>&nbsp;<span class="string" id="4777354">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op" id="4777379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777384">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777392">s</span><span class="op" id="4777393">.</span><span class="ident" id="4777394">rdOffset</span>&nbsp;<span class="op" id="4777403">+=</span>&nbsp;<span class="ident" id="4777406">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777410">s</span><span class="op" id="4777411">.</span><span class="ident" id="4777412">ch</span>&nbsp;<span class="op" id="4777415">=</span>&nbsp;<span class="ident" id="4777417">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777420">}</span>&nbsp;<span class="keyword" id="4777422">else</span>&nbsp;<span class="op" id="4777427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777431">s</span><span class="op" id="4777432">.</span><span class="ident" id="4777433">offset</span>&nbsp;<span class="op" id="4777440">=</span>&nbsp;<span class="builtinfunc" id="4777442">len</span><span class="op" id="4777445">(</span><span class="ident" id="4777446">s</span><span class="op" id="4777447">.</span><span class="ident" id="4777448">src</span><span class="op" id="4777451">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4777455">if</span>&nbsp;<span class="ident" id="4777458">s</span><span class="op" id="4777459">.</span><span class="ident" id="4777460">ch</span>&nbsp;<span class="op" id="4777463">==</span>&nbsp;<span class="string" id="4777466">&#39;\n&#39;</span>&nbsp;<span class="op" id="4777471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777476">s</span><span class="op" id="4777477">.</span><span class="ident" id="4777478">lineOffset</span>&nbsp;<span class="op" id="4777489">=</span>&nbsp;<span class="ident" id="4777491">s</span><span class="op" id="4777492">.</span><span class="ident" id="4777493">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777503">s</span><span class="op" id="4777504">.</span><span class="ident" id="4777505">file</span><span class="op" id="4777509">.</span><span class="ident" id="4777510">AddLine</span><span class="op" id="4777517">(</span><span class="ident" id="4777518">s</span><span class="op" id="4777519">.</span><span class="ident" id="4777520">offset</span><span class="op" id="4777526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777534">s</span><span class="op" id="4777535">.</span><span class="ident" id="4777536">ch</span>&nbsp;<span class="op" id="4777539">=</span>&nbsp;<span class="op" id="4777541">-</span><span class="num" id="4777542">1</span>&nbsp;<span class="comment" id="4777544">//&nbsp;eof</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4777552">}</span><br>
<span class="lineno"></span><span class="op" id="4777554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4777557">//&nbsp;A&nbsp;mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).</span><br>
<span class="lineno"></span><span class="comment" id="4777599">//&nbsp;They&nbsp;control&nbsp;scanner&nbsp;behavior.</span><br>
<span class="lineno">90</span><span class="comment" id="4777633">//</span><br>
<span class="lineno"></span><span class="keyword" id="4777636">type</span>&nbsp;<span class="ident" id="4777641">Mode</span>&nbsp;<span class="builtintype" id="4777646">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4777652">const</span>&nbsp;<span class="op" id="4777658">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777661">ScanComments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777677">Mode</span>&nbsp;<span class="op" id="4777682">=</span>&nbsp;<span class="num" id="4777684">1</span>&nbsp;<span class="op" id="4777686">&lt;&lt;</span>&nbsp;<span class="ident" id="4777689">iota</span>&nbsp;<span class="comment" id="4777694">//&nbsp;return&nbsp;comments&nbsp;as&nbsp;COMMENT&nbsp;tokens</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4777732">dontInsertSemis</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4777765">//&nbsp;do&nbsp;not&nbsp;automatically&nbsp;insert&nbsp;semicolons&nbsp;-&nbsp;for&nbsp;testing&nbsp;only</span><br>
<span class="lineno"></span><span class="op" id="4777826">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4777829">//&nbsp;Init&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;s&nbsp;to&nbsp;tokenize&nbsp;the&nbsp;text&nbsp;src&nbsp;by&nbsp;setting&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4777900">//&nbsp;scanner&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;src.&nbsp;The&nbsp;scanner&nbsp;uses&nbsp;the&nbsp;file&nbsp;set&nbsp;file</span><br>
<span class="lineno">100</span><span class="comment" id="4777971">//&nbsp;for&nbsp;position&nbsp;information&nbsp;and&nbsp;it&nbsp;adds&nbsp;line&nbsp;information&nbsp;for&nbsp;each&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="4778043">//&nbsp;It&nbsp;is&nbsp;ok&nbsp;to&nbsp;re-use&nbsp;the&nbsp;same&nbsp;file&nbsp;when&nbsp;re-scanning&nbsp;the&nbsp;same&nbsp;file&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="4778113">//&nbsp;line&nbsp;information&nbsp;which&nbsp;is&nbsp;already&nbsp;present&nbsp;is&nbsp;ignored.&nbsp;Init&nbsp;causes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4778184">//&nbsp;panic&nbsp;if&nbsp;the&nbsp;file&nbsp;size&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;src&nbsp;size.</span><br>
<span class="lineno"></span><span class="comment" id="4778239">//</span><br>
<span class="lineno">105</span><span class="comment" id="4778242">//&nbsp;Calls&nbsp;to&nbsp;Scan&nbsp;will&nbsp;invoke&nbsp;the&nbsp;error&nbsp;handler&nbsp;err&nbsp;if&nbsp;they&nbsp;encounter&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4778313">//&nbsp;syntax&nbsp;error&nbsp;and&nbsp;err&nbsp;is&nbsp;not&nbsp;nil.&nbsp;Also,&nbsp;for&nbsp;each&nbsp;error&nbsp;encountered,</span><br>
<span class="lineno"></span><span class="comment" id="4778383">//&nbsp;the&nbsp;Scanner&nbsp;field&nbsp;ErrorCount&nbsp;is&nbsp;incremented&nbsp;by&nbsp;one.&nbsp;The&nbsp;mode&nbsp;parameter</span><br>
<span class="lineno"></span><span class="comment" id="4778457">//&nbsp;determines&nbsp;how&nbsp;comments&nbsp;are&nbsp;handled.</span><br>
<span class="lineno"></span><span class="comment" id="4778497">//</span><br>
<span class="lineno">110</span><span class="comment" id="4778500">//&nbsp;Note&nbsp;that&nbsp;Init&nbsp;may&nbsp;call&nbsp;err&nbsp;if&nbsp;there&nbsp;is&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;first&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="4778575">//&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="4778591">//</span><br>
<span class="lineno"></span><span class="keyword" id="4778594">func</span>&nbsp;<span class="op" id="4778599">(</span><span class="ident" id="4778600">s</span>&nbsp;<span class="op" id="4778602">*</span><span class="ident" id="4778603">Scanner</span><span class="op" id="4778610">)</span>&nbsp;<span class="ident" id="4778612">Init</span><span class="op" id="4778616">(</span><span class="ident" id="4778617">file</span>&nbsp;<span class="op" id="4778622">*</span><span class="ident" id="4778623">token</span><span class="op" id="4778628">.</span><span class="ident" id="4778629">File</span><span class="op" id="4778633">,</span>&nbsp;<span class="ident" id="4778635">src</span>&nbsp;<span class="op" id="4778639">[</span><span class="op" id="4778640">]</span><span class="builtintype" id="4778641">byte</span><span class="op" id="4778645">,</span>&nbsp;<span class="ident" id="4778647">err</span>&nbsp;<span class="ident" id="4778651">ErrorHandler</span><span class="op" id="4778663">,</span>&nbsp;<span class="ident" id="4778665">mode</span>&nbsp;<span class="ident" id="4778670">Mode</span><span class="op" id="4778674">)</span>&nbsp;<span class="op" id="4778676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4778679">//&nbsp;Explicitly&nbsp;initialize&nbsp;all&nbsp;fields&nbsp;since&nbsp;a&nbsp;scanner&nbsp;may&nbsp;be&nbsp;reused.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4778747">if</span>&nbsp;<span class="ident" id="4778750">file</span><span class="op" id="4778754">.</span><span class="ident" id="4778755">Size</span><span class="op" id="4778759">(</span><span class="op" id="4778760">)</span>&nbsp;<span class="op" id="4778762">!=</span>&nbsp;<span class="builtinfunc" id="4778765">len</span><span class="op" id="4778768">(</span><span class="ident" id="4778769">src</span><span class="op" id="4778772">)</span>&nbsp;<span class="op" id="4778774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4778778">panic</span><span class="op" id="4778783">(</span><span class="ident" id="4778784">fmt</span><span class="op" id="4778787">.</span><span class="ident" id="4778788">Sprintf</span><span class="op" id="4778795">(</span><span class="string" id="4778796">&#34;file&nbsp;size&nbsp;(%d)&nbsp;does&nbsp;not&nbsp;match&nbsp;src&nbsp;len&nbsp;(%d)&#34;</span><span class="op" id="4778840">,</span>&nbsp;<span class="ident" id="4778842">file</span><span class="op" id="4778846">.</span><span class="ident" id="4778847">Size</span><span class="op" id="4778851">(</span><span class="op" id="4778852">)</span><span class="op" id="4778853">,</span>&nbsp;<span class="builtinfunc" id="4778855">len</span><span class="op" id="4778858">(</span><span class="ident" id="4778859">src</span><span class="op" id="4778862">)</span><span class="op" id="4778863">)</span><span class="op" id="4778864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4778867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778870">s</span><span class="op" id="4778871">.</span><span class="ident" id="4778872">file</span>&nbsp;<span class="op" id="4778877">=</span>&nbsp;<span class="ident" id="4778879">file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778885">s</span><span class="op" id="4778886">.</span><span class="ident" id="4778887">dir</span><span class="op" id="4778890">,</span>&nbsp;<span class="ident" id="4778892">_</span>&nbsp;<span class="op" id="4778894">=</span>&nbsp;<span class="ident" id="4778896">filepath</span><span class="op" id="4778904">.</span><span class="ident" id="4778905">Split</span><span class="op" id="4778910">(</span><span class="ident" id="4778911">file</span><span class="op" id="4778915">.</span><span class="ident" id="4778916">Name</span><span class="op" id="4778920">(</span><span class="op" id="4778921">)</span><span class="op" id="4778922">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778925">s</span><span class="op" id="4778926">.</span><span class="ident" id="4778927">src</span>&nbsp;<span class="op" id="4778931">=</span>&nbsp;<span class="ident" id="4778933">src</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778938">s</span><span class="op" id="4778939">.</span><span class="ident" id="4778940">err</span>&nbsp;<span class="op" id="4778944">=</span>&nbsp;<span class="ident" id="4778946">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778951">s</span><span class="op" id="4778952">.</span><span class="ident" id="4778953">mode</span>&nbsp;<span class="op" id="4778958">=</span>&nbsp;<span class="ident" id="4778960">mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778967">s</span><span class="op" id="4778968">.</span><span class="ident" id="4778969">ch</span>&nbsp;<span class="op" id="4778972">=</span>&nbsp;<span class="string" id="4778974">&#39;&nbsp;&#39;</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778979">s</span><span class="op" id="4778980">.</span><span class="ident" id="4778981">offset</span>&nbsp;<span class="op" id="4778988">=</span>&nbsp;<span class="num" id="4778990">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4778993">s</span><span class="op" id="4778994">.</span><span class="ident" id="4778995">rdOffset</span>&nbsp;<span class="op" id="4779004">=</span>&nbsp;<span class="num" id="4779006">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779009">s</span><span class="op" id="4779010">.</span><span class="ident" id="4779011">lineOffset</span>&nbsp;<span class="op" id="4779022">=</span>&nbsp;<span class="num" id="4779024">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779027">s</span><span class="op" id="4779028">.</span><span class="ident" id="4779029">insertSemi</span>&nbsp;<span class="op" id="4779040">=</span>&nbsp;<span class="builtintype" id="4779042">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779049">s</span><span class="op" id="4779050">.</span><span class="ident" id="4779051">ErrorCount</span>&nbsp;<span class="op" id="4779062">=</span>&nbsp;<span class="num" id="4779064">0</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779068">s</span><span class="op" id="4779069">.</span><span class="ident" id="4779070">next</span><span class="op" id="4779074">(</span><span class="op" id="4779075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4779078">if</span>&nbsp;<span class="ident" id="4779081">s</span><span class="op" id="4779082">.</span><span class="ident" id="4779083">ch</span>&nbsp;<span class="op" id="4779086">==</span>&nbsp;<span class="ident" id="4779089">bom</span>&nbsp;<span class="op" id="4779093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779097">s</span><span class="op" id="4779098">.</span><span class="ident" id="4779099">next</span><span class="op" id="4779103">(</span><span class="op" id="4779104">)</span>&nbsp;<span class="comment" id="4779106">//&nbsp;ignore&nbsp;BOM&nbsp;at&nbsp;file&nbsp;beginning</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4779139">}</span><br>
<span class="lineno">135</span><span class="op" id="4779141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4779144">func</span>&nbsp;<span class="op" id="4779149">(</span><span class="ident" id="4779150">s</span>&nbsp;<span class="op" id="4779152">*</span><span class="ident" id="4779153">Scanner</span><span class="op" id="4779160">)</span>&nbsp;<span class="builtintype" id="4779162">error</span><span class="op" id="4779167">(</span><span class="ident" id="4779168">offs</span>&nbsp;<span class="builtintype" id="4779173">int</span><span class="op" id="4779176">,</span>&nbsp;<span class="ident" id="4779178">msg</span>&nbsp;<span class="builtintype" id="4779182">string</span><span class="op" id="4779188">)</span>&nbsp;<span class="op" id="4779190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4779193">if</span>&nbsp;<span class="ident" id="4779196">s</span><span class="op" id="4779197">.</span><span class="ident" id="4779198">err</span>&nbsp;<span class="op" id="4779202">!=</span>&nbsp;<span class="builtintype" id="4779205">nil</span>&nbsp;<span class="op" id="4779209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779213">s</span><span class="op" id="4779214">.</span><span class="ident" id="4779215">err</span><span class="op" id="4779218">(</span><span class="ident" id="4779219">s</span><span class="op" id="4779220">.</span><span class="ident" id="4779221">file</span><span class="op" id="4779225">.</span><span class="ident" id="4779226">Position</span><span class="op" id="4779234">(</span><span class="ident" id="4779235">s</span><span class="op" id="4779236">.</span><span class="ident" id="4779237">file</span><span class="op" id="4779241">.</span><span class="ident" id="4779242">Pos</span><span class="op" id="4779245">(</span><span class="ident" id="4779246">offs</span><span class="op" id="4779250">)</span><span class="op" id="4779251">)</span><span class="op" id="4779252">,</span>&nbsp;<span class="ident" id="4779254">msg</span><span class="op" id="4779257">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4779260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779263">s</span><span class="op" id="4779264">.</span><span class="ident" id="4779265">ErrorCount</span><span class="op" id="4779275">++</span><br>
<span class="lineno"></span><span class="op" id="4779278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4779281">var</span>&nbsp;<span class="ident" id="4779285">prefix</span>&nbsp;<span class="op" id="4779292">=</span>&nbsp;<span class="op" id="4779294">[</span><span class="op" id="4779295">]</span><span class="builtintype" id="4779296">byte</span><span class="op" id="4779300">(</span><span class="string" id="4779301">&#34;//line&nbsp;&#34;</span><span class="op" id="4779310">)</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="4779313">func</span>&nbsp;<span class="op" id="4779318">(</span><span class="ident" id="4779319">s</span>&nbsp;<span class="op" id="4779321">*</span><span class="ident" id="4779322">Scanner</span><span class="op" id="4779329">)</span>&nbsp;<span class="ident" id="4779331">interpretLineComment</span><span class="op" id="4779351">(</span><span class="ident" id="4779352">text</span>&nbsp;<span class="op" id="4779357">[</span><span class="op" id="4779358">]</span><span class="builtintype" id="4779359">byte</span><span class="op" id="4779363">)</span>&nbsp;<span class="op" id="4779365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4779368">if</span>&nbsp;<span class="ident" id="4779371">bytes</span><span class="op" id="4779376">.</span><span class="ident" id="4779377">HasPrefix</span><span class="op" id="4779386">(</span><span class="ident" id="4779387">text</span><span class="op" id="4779391">,</span>&nbsp;<span class="ident" id="4779393">prefix</span><span class="op" id="4779399">)</span>&nbsp;<span class="op" id="4779401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4779405">//&nbsp;get&nbsp;filename&nbsp;and&nbsp;line&nbsp;number,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4779447">if</span>&nbsp;<span class="ident" id="4779450">i</span>&nbsp;<span class="op" id="4779452">:=</span>&nbsp;<span class="ident" id="4779455">bytes</span><span class="op" id="4779460">.</span><span class="ident" id="4779461">LastIndex</span><span class="op" id="4779470">(</span><span class="ident" id="4779471">text</span><span class="op" id="4779475">,</span>&nbsp;<span class="op" id="4779477">[</span><span class="op" id="4779478">]</span><span class="builtintype" id="4779479">byte</span><span class="op" id="4779483">{</span><span class="string" id="4779484">&#39;:&#39;</span><span class="op" id="4779487">}</span><span class="op" id="4779488">)</span><span class="op" id="4779489">;</span>&nbsp;<span class="ident" id="4779491">i</span>&nbsp;<span class="op" id="4779493">&gt;</span>&nbsp;<span class="num" id="4779495">0</span>&nbsp;<span class="op" id="4779497">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4779502">if</span>&nbsp;<span class="ident" id="4779505">line</span><span class="op" id="4779509">,</span>&nbsp;<span class="ident" id="4779511">err</span>&nbsp;<span class="op" id="4779515">:=</span>&nbsp;<span class="ident" id="4779518">strconv</span><span class="op" id="4779525">.</span><span class="ident" id="4779526">Atoi</span><span class="op" id="4779530">(</span><span class="builtintype" id="4779531">string</span><span class="op" id="4779537">(</span><span class="ident" id="4779538">text</span><span class="op" id="4779542">[</span><span class="ident" id="4779543">i</span><span class="op" id="4779544">+</span><span class="num" id="4779545">1</span><span class="op" id="4779546">:</span><span class="op" id="4779547">]</span><span class="op" id="4779548">)</span><span class="op" id="4779549">)</span><span class="op" id="4779550">;</span>&nbsp;<span class="ident" id="4779552">err</span>&nbsp;<span class="op" id="4779556">==</span>&nbsp;<span class="builtintype" id="4779559">nil</span>&nbsp;<span class="op" id="4779563">&amp;&amp;</span>&nbsp;<span class="ident" id="4779566">line</span>&nbsp;<span class="op" id="4779571">&gt;</span>&nbsp;<span class="num" id="4779573">0</span>&nbsp;<span class="op" id="4779575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4779581">//&nbsp;valid&nbsp;//line&nbsp;filename:line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779623">filename</span>&nbsp;<span class="op" id="4779632">:=</span>&nbsp;<span class="builtintype" id="4779635">string</span><span class="op" id="4779641">(</span><span class="ident" id="4779642">bytes</span><span class="op" id="4779647">.</span><span class="ident" id="4779648">TrimSpace</span><span class="op" id="4779657">(</span><span class="ident" id="4779658">text</span><span class="op" id="4779662">[</span><span class="builtinfunc" id="4779663">len</span><span class="op" id="4779666">(</span><span class="ident" id="4779667">prefix</span><span class="op" id="4779673">)</span><span class="op" id="4779674">:</span><span class="ident" id="4779675">i</span><span class="op" id="4779676">]</span><span class="op" id="4779677">)</span><span class="op" id="4779678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4779684">if</span>&nbsp;<span class="ident" id="4779687">filename</span>&nbsp;<span class="op" id="4779696">!=</span>&nbsp;<span class="string" id="4779699">&#34;&#34;</span>&nbsp;<span class="op" id="4779702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779709">filename</span>&nbsp;<span class="op" id="4779718">=</span>&nbsp;<span class="ident" id="4779720">filepath</span><span class="op" id="4779728">.</span><span class="ident" id="4779729">Clean</span><span class="op" id="4779734">(</span><span class="ident" id="4779735">filename</span><span class="op" id="4779743">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4779750">if</span>&nbsp;<span class="op" id="4779753">!</span><span class="ident" id="4779754">filepath</span><span class="op" id="4779762">.</span><span class="ident" id="4779763">IsAbs</span><span class="op" id="4779768">(</span><span class="ident" id="4779769">filename</span><span class="op" id="4779777">)</span>&nbsp;<span class="op" id="4779779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4779787">//&nbsp;make&nbsp;filename&nbsp;relative&nbsp;to&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779840">filename</span>&nbsp;<span class="op" id="4779849">=</span>&nbsp;<span class="ident" id="4779851">filepath</span><span class="op" id="4779859">.</span><span class="ident" id="4779860">Join</span><span class="op" id="4779864">(</span><span class="ident" id="4779865">s</span><span class="op" id="4779866">.</span><span class="ident" id="4779867">dir</span><span class="op" id="4779870">,</span>&nbsp;<span class="ident" id="4779872">filename</span><span class="op" id="4779880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4779887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4779893">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4779899">//&nbsp;update&nbsp;scanner&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4779930">s</span><span class="op" id="4779931">.</span><span class="ident" id="4779932">file</span><span class="op" id="4779936">.</span><span class="ident" id="4779937">AddLineInfo</span><span class="op" id="4779948">(</span><span class="ident" id="4779949">s</span><span class="op" id="4779950">.</span><span class="ident" id="4779951">lineOffset</span><span class="op" id="4779961">+</span><span class="builtinfunc" id="4779962">len</span><span class="op" id="4779965">(</span><span class="ident" id="4779966">text</span><span class="op" id="4779970">)</span><span class="op" id="4779971">+</span><span class="num" id="4779972">1</span><span class="op" id="4779973">,</span>&nbsp;<span class="ident" id="4779975">filename</span><span class="op" id="4779983">,</span>&nbsp;<span class="ident" id="4779985">line</span><span class="op" id="4779989">)</span>&nbsp;<span class="comment" id="4779991">//&nbsp;+len(text)+1&nbsp;since&nbsp;comment&nbsp;applies&nbsp;to&nbsp;next&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780052">}</span><br>
<span class="lineno">165</span><span class="op" id="4780054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4780057">func</span>&nbsp;<span class="op" id="4780062">(</span><span class="ident" id="4780063">s</span>&nbsp;<span class="op" id="4780065">*</span><span class="ident" id="4780066">Scanner</span><span class="op" id="4780073">)</span>&nbsp;<span class="ident" id="4780075">scanComment</span><span class="op" id="4780086">(</span><span class="op" id="4780087">)</span>&nbsp;<span class="builtintype" id="4780089">string</span>&nbsp;<span class="op" id="4780096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4780099">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed;&nbsp;s.ch&nbsp;==&nbsp;&#39;/&#39;&nbsp;||&nbsp;s.ch&nbsp;==&nbsp;&#39;*&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780160">offs</span>&nbsp;<span class="op" id="4780165">:=</span>&nbsp;<span class="ident" id="4780168">s</span><span class="op" id="4780169">.</span><span class="ident" id="4780170">offset</span>&nbsp;<span class="op" id="4780177">-</span>&nbsp;<span class="num" id="4780179">1</span>&nbsp;<span class="comment" id="4780181">//&nbsp;position&nbsp;of&nbsp;initial&nbsp;&#39;/&#39;</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780209">hasCR</span>&nbsp;<span class="op" id="4780215">:=</span>&nbsp;<span class="builtintype" id="4780218">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780226">if</span>&nbsp;<span class="ident" id="4780229">s</span><span class="op" id="4780230">.</span><span class="ident" id="4780231">ch</span>&nbsp;<span class="op" id="4780234">==</span>&nbsp;<span class="string" id="4780237">&#39;/&#39;</span>&nbsp;<span class="op" id="4780241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4780245">//-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780264">s</span><span class="op" id="4780265">.</span><span class="ident" id="4780266">next</span><span class="op" id="4780270">(</span><span class="op" id="4780271">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780275">for</span>&nbsp;<span class="ident" id="4780279">s</span><span class="op" id="4780280">.</span><span class="ident" id="4780281">ch</span>&nbsp;<span class="op" id="4780284">!=</span>&nbsp;<span class="string" id="4780287">&#39;\n&#39;</span>&nbsp;<span class="op" id="4780292">&amp;&amp;</span>&nbsp;<span class="ident" id="4780295">s</span><span class="op" id="4780296">.</span><span class="ident" id="4780297">ch</span>&nbsp;<span class="op" id="4780300">&gt;=</span>&nbsp;<span class="num" id="4780303">0</span>&nbsp;<span class="op" id="4780305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780310">if</span>&nbsp;<span class="ident" id="4780313">s</span><span class="op" id="4780314">.</span><span class="ident" id="4780315">ch</span>&nbsp;<span class="op" id="4780318">==</span>&nbsp;<span class="string" id="4780321">&#39;\r&#39;</span>&nbsp;<span class="op" id="4780326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780332">hasCR</span>&nbsp;<span class="op" id="4780338">=</span>&nbsp;<span class="builtintype" id="4780340">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780353">s</span><span class="op" id="4780354">.</span><span class="ident" id="4780355">next</span><span class="op" id="4780359">(</span><span class="op" id="4780360">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780368">if</span>&nbsp;<span class="ident" id="4780371">offs</span>&nbsp;<span class="op" id="4780376">==</span>&nbsp;<span class="ident" id="4780379">s</span><span class="op" id="4780380">.</span><span class="ident" id="4780381">lineOffset</span>&nbsp;<span class="op" id="4780392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4780397">//&nbsp;comment&nbsp;starts&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;current&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780455">s</span><span class="op" id="4780456">.</span><span class="ident" id="4780457">interpretLineComment</span><span class="op" id="4780477">(</span><span class="ident" id="4780478">s</span><span class="op" id="4780479">.</span><span class="ident" id="4780480">src</span><span class="op" id="4780483">[</span><span class="ident" id="4780484">offs</span><span class="op" id="4780488">:</span><span class="ident" id="4780489">s</span><span class="op" id="4780490">.</span><span class="ident" id="4780491">offset</span><span class="op" id="4780497">]</span><span class="op" id="4780498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780502">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780506">goto</span>&nbsp;<span class="ident" id="4780511">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4780521">/*-style&nbsp;comment&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780542">s</span><span class="op" id="4780543">.</span><span class="ident" id="4780544">next</span><span class="op" id="4780548">(</span><span class="op" id="4780549">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780552">for</span>&nbsp;<span class="ident" id="4780556">s</span><span class="op" id="4780557">.</span><span class="ident" id="4780558">ch</span>&nbsp;<span class="op" id="4780561">&gt;=</span>&nbsp;<span class="num" id="4780564">0</span>&nbsp;<span class="op" id="4780566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780570">ch</span>&nbsp;<span class="op" id="4780573">:=</span>&nbsp;<span class="ident" id="4780576">s</span><span class="op" id="4780577">.</span><span class="ident" id="4780578">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780583">if</span>&nbsp;<span class="ident" id="4780586">ch</span>&nbsp;<span class="op" id="4780589">==</span>&nbsp;<span class="string" id="4780592">&#39;\r&#39;</span>&nbsp;<span class="op" id="4780597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780602">hasCR</span>&nbsp;<span class="op" id="4780608">=</span>&nbsp;<span class="builtintype" id="4780610">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780617">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780621">s</span><span class="op" id="4780622">.</span><span class="ident" id="4780623">next</span><span class="op" id="4780627">(</span><span class="op" id="4780628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780632">if</span>&nbsp;<span class="ident" id="4780635">ch</span>&nbsp;<span class="op" id="4780638">==</span>&nbsp;<span class="string" id="4780641">&#39;*&#39;</span>&nbsp;<span class="op" id="4780645">&amp;&amp;</span>&nbsp;<span class="ident" id="4780648">s</span><span class="op" id="4780649">.</span><span class="ident" id="4780650">ch</span>&nbsp;<span class="op" id="4780653">==</span>&nbsp;<span class="string" id="4780656">&#39;/&#39;</span>&nbsp;<span class="op" id="4780660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780665">s</span><span class="op" id="4780666">.</span><span class="ident" id="4780667">next</span><span class="op" id="4780671">(</span><span class="op" id="4780672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780677">goto</span>&nbsp;<span class="ident" id="4780682">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780689">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780696">s</span><span class="op" id="4780697">.</span><span class="builtintype" id="4780698">error</span><span class="op" id="4780703">(</span><span class="ident" id="4780704">offs</span><span class="op" id="4780708">,</span>&nbsp;<span class="string" id="4780710">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4780734">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="4780737">exit</span><span class="op" id="4780741">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780744">lit</span>&nbsp;<span class="op" id="4780748">:=</span>&nbsp;<span class="ident" id="4780751">s</span><span class="op" id="4780752">.</span><span class="ident" id="4780753">src</span><span class="op" id="4780756">[</span><span class="ident" id="4780757">offs</span><span class="op" id="4780761">:</span><span class="ident" id="4780762">s</span><span class="op" id="4780763">.</span><span class="ident" id="4780764">offset</span><span class="op" id="4780770">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780773">if</span>&nbsp;<span class="ident" id="4780776">hasCR</span>&nbsp;<span class="op" id="4780782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780786">lit</span>&nbsp;<span class="op" id="4780790">=</span>&nbsp;<span class="ident" id="4780792">stripCR</span><span class="op" id="4780799">(</span><span class="ident" id="4780800">lit</span><span class="op" id="4780803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4780806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780810">return</span>&nbsp;<span class="builtintype" id="4780817">string</span><span class="op" id="4780823">(</span><span class="ident" id="4780824">lit</span><span class="op" id="4780827">)</span><br>
<span class="lineno"></span><span class="op" id="4780829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4780832">func</span>&nbsp;<span class="op" id="4780837">(</span><span class="ident" id="4780838">s</span>&nbsp;<span class="op" id="4780840">*</span><span class="ident" id="4780841">Scanner</span><span class="op" id="4780848">)</span>&nbsp;<span class="ident" id="4780850">findLineEnd</span><span class="op" id="4780861">(</span><span class="op" id="4780862">)</span>&nbsp;<span class="builtintype" id="4780864">bool</span>&nbsp;<span class="op" id="4780869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4780872">//&nbsp;initial&nbsp;&#39;/&#39;&nbsp;already&nbsp;consumed</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4780906">defer</span>&nbsp;<span class="keyword" id="4780912">func</span><span class="op" id="4780916">(</span><span class="ident" id="4780917">offs</span>&nbsp;<span class="builtintype" id="4780922">int</span><span class="op" id="4780925">)</span>&nbsp;<span class="op" id="4780927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4780931">//&nbsp;reset&nbsp;scanner&nbsp;state&nbsp;to&nbsp;where&nbsp;it&nbsp;was&nbsp;upon&nbsp;calling&nbsp;findLineEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4780997">s</span><span class="op" id="4780998">.</span><span class="ident" id="4780999">ch</span>&nbsp;<span class="op" id="4781002">=</span>&nbsp;<span class="string" id="4781004">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781010">s</span><span class="op" id="4781011">.</span><span class="ident" id="4781012">offset</span>&nbsp;<span class="op" id="4781019">=</span>&nbsp;<span class="ident" id="4781021">offs</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781028">s</span><span class="op" id="4781029">.</span><span class="ident" id="4781030">rdOffset</span>&nbsp;<span class="op" id="4781039">=</span>&nbsp;<span class="ident" id="4781041">offs</span>&nbsp;<span class="op" id="4781046">+</span>&nbsp;<span class="num" id="4781048">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781052">s</span><span class="op" id="4781053">.</span><span class="ident" id="4781054">next</span><span class="op" id="4781058">(</span><span class="op" id="4781059">)</span>&nbsp;<span class="comment" id="4781061">//&nbsp;consume&nbsp;initial&nbsp;&#39;/&#39;&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781091">}</span><span class="op" id="4781092">(</span><span class="ident" id="4781093">s</span><span class="op" id="4781094">.</span><span class="ident" id="4781095">offset</span>&nbsp;<span class="op" id="4781102">-</span>&nbsp;<span class="num" id="4781104">1</span><span class="op" id="4781105">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4781109">//&nbsp;read&nbsp;ahead&nbsp;until&nbsp;a&nbsp;newline,&nbsp;EOF,&nbsp;or&nbsp;non-comment&nbsp;token&nbsp;is&nbsp;found</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781176">for</span>&nbsp;<span class="ident" id="4781180">s</span><span class="op" id="4781181">.</span><span class="ident" id="4781182">ch</span>&nbsp;<span class="op" id="4781185">==</span>&nbsp;<span class="string" id="4781188">&#39;/&#39;</span>&nbsp;<span class="op" id="4781192">||</span>&nbsp;<span class="ident" id="4781195">s</span><span class="op" id="4781196">.</span><span class="ident" id="4781197">ch</span>&nbsp;<span class="op" id="4781200">==</span>&nbsp;<span class="string" id="4781203">&#39;*&#39;</span>&nbsp;<span class="op" id="4781207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781211">if</span>&nbsp;<span class="ident" id="4781214">s</span><span class="op" id="4781215">.</span><span class="ident" id="4781216">ch</span>&nbsp;<span class="op" id="4781219">==</span>&nbsp;<span class="string" id="4781222">&#39;/&#39;</span>&nbsp;<span class="op" id="4781226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4781231">//-style&nbsp;comment&nbsp;always&nbsp;contains&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781277">return</span>&nbsp;<span class="builtintype" id="4781284">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781291">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4781295">/*-style&nbsp;comment:&nbsp;look&nbsp;for&nbsp;newline&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781335">s</span><span class="op" id="4781336">.</span><span class="ident" id="4781337">next</span><span class="op" id="4781341">(</span><span class="op" id="4781342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781346">for</span>&nbsp;<span class="ident" id="4781350">s</span><span class="op" id="4781351">.</span><span class="ident" id="4781352">ch</span>&nbsp;<span class="op" id="4781355">&gt;=</span>&nbsp;<span class="num" id="4781358">0</span>&nbsp;<span class="op" id="4781360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781365">ch</span>&nbsp;<span class="op" id="4781368">:=</span>&nbsp;<span class="ident" id="4781371">s</span><span class="op" id="4781372">.</span><span class="ident" id="4781373">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781379">if</span>&nbsp;<span class="ident" id="4781382">ch</span>&nbsp;<span class="op" id="4781385">==</span>&nbsp;<span class="string" id="4781388">&#39;\n&#39;</span>&nbsp;<span class="op" id="4781393">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781399">return</span>&nbsp;<span class="builtintype" id="4781406">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781419">s</span><span class="op" id="4781420">.</span><span class="ident" id="4781421">next</span><span class="op" id="4781425">(</span><span class="op" id="4781426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781431">if</span>&nbsp;<span class="ident" id="4781434">ch</span>&nbsp;<span class="op" id="4781437">==</span>&nbsp;<span class="string" id="4781440">&#39;*&#39;</span>&nbsp;<span class="op" id="4781444">&amp;&amp;</span>&nbsp;<span class="ident" id="4781447">s</span><span class="op" id="4781448">.</span><span class="ident" id="4781449">ch</span>&nbsp;<span class="op" id="4781452">==</span>&nbsp;<span class="string" id="4781455">&#39;/&#39;</span>&nbsp;<span class="op" id="4781459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781465">s</span><span class="op" id="4781466">.</span><span class="ident" id="4781467">next</span><span class="op" id="4781471">(</span><span class="op" id="4781472">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781478">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781495">s</span><span class="op" id="4781496">.</span><span class="ident" id="4781497">skipWhitespace</span><span class="op" id="4781511">(</span><span class="op" id="4781512">)</span>&nbsp;<span class="comment" id="4781514">//&nbsp;s.insertSemi&nbsp;is&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781539">if</span>&nbsp;<span class="ident" id="4781542">s</span><span class="op" id="4781543">.</span><span class="ident" id="4781544">ch</span>&nbsp;<span class="op" id="4781547">&lt;</span>&nbsp;<span class="num" id="4781549">0</span>&nbsp;<span class="op" id="4781551">||</span>&nbsp;<span class="ident" id="4781554">s</span><span class="op" id="4781555">.</span><span class="ident" id="4781556">ch</span>&nbsp;<span class="op" id="4781559">==</span>&nbsp;<span class="string" id="4781562">&#39;\n&#39;</span>&nbsp;<span class="op" id="4781567">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781572">return</span>&nbsp;<span class="builtintype" id="4781579">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781590">if</span>&nbsp;<span class="ident" id="4781593">s</span><span class="op" id="4781594">.</span><span class="ident" id="4781595">ch</span>&nbsp;<span class="op" id="4781598">!=</span>&nbsp;<span class="string" id="4781601">&#39;/&#39;</span>&nbsp;<span class="op" id="4781605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4781610">//&nbsp;non-comment&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781634">return</span>&nbsp;<span class="builtintype" id="4781641">false</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781653">s</span><span class="op" id="4781654">.</span><span class="ident" id="4781655">next</span><span class="op" id="4781659">(</span><span class="op" id="4781660">)</span>&nbsp;<span class="comment" id="4781662">//&nbsp;consume&nbsp;&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4781678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781682">return</span>&nbsp;<span class="builtintype" id="4781689">false</span><br>
<span class="lineno">255</span><span class="op" id="4781695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4781698">func</span>&nbsp;<span class="ident" id="4781703">isLetter</span><span class="op" id="4781711">(</span><span class="ident" id="4781712">ch</span>&nbsp;<span class="builtintype" id="4781715">rune</span><span class="op" id="4781719">)</span>&nbsp;<span class="builtintype" id="4781721">bool</span>&nbsp;<span class="op" id="4781726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781729">return</span>&nbsp;<span class="string" id="4781736">&#39;a&#39;</span>&nbsp;<span class="op" id="4781740">&lt;=</span>&nbsp;<span class="ident" id="4781743">ch</span>&nbsp;<span class="op" id="4781746">&amp;&amp;</span>&nbsp;<span class="ident" id="4781749">ch</span>&nbsp;<span class="op" id="4781752">&lt;=</span>&nbsp;<span class="string" id="4781755">&#39;z&#39;</span>&nbsp;<span class="op" id="4781759">||</span>&nbsp;<span class="string" id="4781762">&#39;A&#39;</span>&nbsp;<span class="op" id="4781766">&lt;=</span>&nbsp;<span class="ident" id="4781769">ch</span>&nbsp;<span class="op" id="4781772">&amp;&amp;</span>&nbsp;<span class="ident" id="4781775">ch</span>&nbsp;<span class="op" id="4781778">&lt;=</span>&nbsp;<span class="string" id="4781781">&#39;Z&#39;</span>&nbsp;<span class="op" id="4781785">||</span>&nbsp;<span class="ident" id="4781788">ch</span>&nbsp;<span class="op" id="4781791">==</span>&nbsp;<span class="string" id="4781794">&#39;_&#39;</span>&nbsp;<span class="op" id="4781798">||</span>&nbsp;<span class="ident" id="4781801">ch</span>&nbsp;<span class="op" id="4781804">&gt;=</span>&nbsp;<span class="num" id="4781807">0x80</span>&nbsp;<span class="op" id="4781812">&amp;&amp;</span>&nbsp;<span class="ident" id="4781815">unicode</span><span class="op" id="4781822">.</span><span class="ident" id="4781823">IsLetter</span><span class="op" id="4781831">(</span><span class="ident" id="4781832">ch</span><span class="op" id="4781834">)</span><br>
<span class="lineno"></span><span class="op" id="4781836">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4781839">func</span>&nbsp;<span class="ident" id="4781844">isDigit</span><span class="op" id="4781851">(</span><span class="ident" id="4781852">ch</span>&nbsp;<span class="builtintype" id="4781855">rune</span><span class="op" id="4781859">)</span>&nbsp;<span class="builtintype" id="4781861">bool</span>&nbsp;<span class="op" id="4781866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4781869">return</span>&nbsp;<span class="string" id="4781876">&#39;0&#39;</span>&nbsp;<span class="op" id="4781880">&lt;=</span>&nbsp;<span class="ident" id="4781883">ch</span>&nbsp;<span class="op" id="4781886">&amp;&amp;</span>&nbsp;<span class="ident" id="4781889">ch</span>&nbsp;<span class="op" id="4781892">&lt;=</span>&nbsp;<span class="string" id="4781895">&#39;9&#39;</span>&nbsp;<span class="op" id="4781899">||</span>&nbsp;<span class="ident" id="4781902">ch</span>&nbsp;<span class="op" id="4781905">&gt;=</span>&nbsp;<span class="num" id="4781908">0x80</span>&nbsp;<span class="op" id="4781913">&amp;&amp;</span>&nbsp;<span class="ident" id="4781916">unicode</span><span class="op" id="4781923">.</span><span class="ident" id="4781924">IsDigit</span><span class="op" id="4781931">(</span><span class="ident" id="4781932">ch</span><span class="op" id="4781934">)</span><br>
<span class="lineno"></span><span class="op" id="4781936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="4781939">func</span>&nbsp;<span class="op" id="4781944">(</span><span class="ident" id="4781945">s</span>&nbsp;<span class="op" id="4781947">*</span><span class="ident" id="4781948">Scanner</span><span class="op" id="4781955">)</span>&nbsp;<span class="ident" id="4781957">scanIdentifier</span><span class="op" id="4781971">(</span><span class="op" id="4781972">)</span>&nbsp;<span class="builtintype" id="4781974">string</span>&nbsp;<span class="op" id="4781981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4781984">offs</span>&nbsp;<span class="op" id="4781989">:=</span>&nbsp;<span class="ident" id="4781992">s</span><span class="op" id="4781993">.</span><span class="ident" id="4781994">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782002">for</span>&nbsp;<span class="ident" id="4782006">isLetter</span><span class="op" id="4782014">(</span><span class="ident" id="4782015">s</span><span class="op" id="4782016">.</span><span class="ident" id="4782017">ch</span><span class="op" id="4782019">)</span>&nbsp;<span class="op" id="4782021">||</span>&nbsp;<span class="ident" id="4782024">isDigit</span><span class="op" id="4782031">(</span><span class="ident" id="4782032">s</span><span class="op" id="4782033">.</span><span class="ident" id="4782034">ch</span><span class="op" id="4782036">)</span>&nbsp;<span class="op" id="4782038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782042">s</span><span class="op" id="4782043">.</span><span class="ident" id="4782044">next</span><span class="op" id="4782048">(</span><span class="op" id="4782049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782052">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782055">return</span>&nbsp;<span class="builtintype" id="4782062">string</span><span class="op" id="4782068">(</span><span class="ident" id="4782069">s</span><span class="op" id="4782070">.</span><span class="ident" id="4782071">src</span><span class="op" id="4782074">[</span><span class="ident" id="4782075">offs</span><span class="op" id="4782079">:</span><span class="ident" id="4782080">s</span><span class="op" id="4782081">.</span><span class="ident" id="4782082">offset</span><span class="op" id="4782088">]</span><span class="op" id="4782089">)</span><br>
<span class="lineno"></span><span class="op" id="4782091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4782094">func</span>&nbsp;<span class="ident" id="4782099">digitVal</span><span class="op" id="4782107">(</span><span class="ident" id="4782108">ch</span>&nbsp;<span class="builtintype" id="4782111">rune</span><span class="op" id="4782115">)</span>&nbsp;<span class="builtintype" id="4782117">int</span>&nbsp;<span class="op" id="4782121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782124">switch</span>&nbsp;<span class="op" id="4782131">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782134">case</span>&nbsp;<span class="string" id="4782139">&#39;0&#39;</span>&nbsp;<span class="op" id="4782143">&lt;=</span>&nbsp;<span class="ident" id="4782146">ch</span>&nbsp;<span class="op" id="4782149">&amp;&amp;</span>&nbsp;<span class="ident" id="4782152">ch</span>&nbsp;<span class="op" id="4782155">&lt;=</span>&nbsp;<span class="string" id="4782158">&#39;9&#39;</span><span class="op" id="4782161">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782165">return</span>&nbsp;<span class="builtintype" id="4782172">int</span><span class="op" id="4782175">(</span><span class="ident" id="4782176">ch</span>&nbsp;<span class="op" id="4782179">-</span>&nbsp;<span class="string" id="4782181">&#39;0&#39;</span><span class="op" id="4782184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782187">case</span>&nbsp;<span class="string" id="4782192">&#39;a&#39;</span>&nbsp;<span class="op" id="4782196">&lt;=</span>&nbsp;<span class="ident" id="4782199">ch</span>&nbsp;<span class="op" id="4782202">&amp;&amp;</span>&nbsp;<span class="ident" id="4782205">ch</span>&nbsp;<span class="op" id="4782208">&lt;=</span>&nbsp;<span class="string" id="4782211">&#39;f&#39;</span><span class="op" id="4782214">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782218">return</span>&nbsp;<span class="builtintype" id="4782225">int</span><span class="op" id="4782228">(</span><span class="ident" id="4782229">ch</span>&nbsp;<span class="op" id="4782232">-</span>&nbsp;<span class="string" id="4782234">&#39;a&#39;</span>&nbsp;<span class="op" id="4782238">+</span>&nbsp;<span class="num" id="4782240">10</span><span class="op" id="4782242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782245">case</span>&nbsp;<span class="string" id="4782250">&#39;A&#39;</span>&nbsp;<span class="op" id="4782254">&lt;=</span>&nbsp;<span class="ident" id="4782257">ch</span>&nbsp;<span class="op" id="4782260">&amp;&amp;</span>&nbsp;<span class="ident" id="4782263">ch</span>&nbsp;<span class="op" id="4782266">&lt;=</span>&nbsp;<span class="string" id="4782269">&#39;F&#39;</span><span class="op" id="4782272">:</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782276">return</span>&nbsp;<span class="builtintype" id="4782283">int</span><span class="op" id="4782286">(</span><span class="ident" id="4782287">ch</span>&nbsp;<span class="op" id="4782290">-</span>&nbsp;<span class="string" id="4782292">&#39;A&#39;</span>&nbsp;<span class="op" id="4782296">+</span>&nbsp;<span class="num" id="4782298">10</span><span class="op" id="4782300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782306">return</span>&nbsp;<span class="num" id="4782313">16</span>&nbsp;<span class="comment" id="4782316">//&nbsp;larger&nbsp;than&nbsp;any&nbsp;legal&nbsp;digit&nbsp;val</span><br>
<span class="lineno"></span><span class="op" id="4782351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="4782354">func</span>&nbsp;<span class="op" id="4782359">(</span><span class="ident" id="4782360">s</span>&nbsp;<span class="op" id="4782362">*</span><span class="ident" id="4782363">Scanner</span><span class="op" id="4782370">)</span>&nbsp;<span class="ident" id="4782372">scanMantissa</span><span class="op" id="4782384">(</span><span class="ident" id="4782385">base</span>&nbsp;<span class="builtintype" id="4782390">int</span><span class="op" id="4782393">)</span>&nbsp;<span class="op" id="4782395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782398">for</span>&nbsp;<span class="ident" id="4782402">digitVal</span><span class="op" id="4782410">(</span><span class="ident" id="4782411">s</span><span class="op" id="4782412">.</span><span class="ident" id="4782413">ch</span><span class="op" id="4782415">)</span>&nbsp;<span class="op" id="4782417">&lt;</span>&nbsp;<span class="ident" id="4782419">base</span>&nbsp;<span class="op" id="4782424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782428">s</span><span class="op" id="4782429">.</span><span class="ident" id="4782430">next</span><span class="op" id="4782434">(</span><span class="op" id="4782435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782438">}</span><br>
<span class="lineno"></span><span class="op" id="4782440">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="keyword" id="4782443">func</span>&nbsp;<span class="op" id="4782448">(</span><span class="ident" id="4782449">s</span>&nbsp;<span class="op" id="4782451">*</span><span class="ident" id="4782452">Scanner</span><span class="op" id="4782459">)</span>&nbsp;<span class="ident" id="4782461">scanNumber</span><span class="op" id="4782471">(</span><span class="ident" id="4782472">seenDecimalPoint</span>&nbsp;<span class="builtintype" id="4782489">bool</span><span class="op" id="4782493">)</span>&nbsp;<span class="op" id="4782495">(</span><span class="ident" id="4782496">token</span><span class="op" id="4782501">.</span><span class="ident" id="4782502">Token</span><span class="op" id="4782507">,</span>&nbsp;<span class="builtintype" id="4782509">string</span><span class="op" id="4782515">)</span>&nbsp;<span class="op" id="4782517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4782520">//&nbsp;digitVal(s.ch)&nbsp;&lt;&nbsp;10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782544">offs</span>&nbsp;<span class="op" id="4782549">:=</span>&nbsp;<span class="ident" id="4782552">s</span><span class="op" id="4782553">.</span><span class="ident" id="4782554">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782562">tok</span>&nbsp;<span class="op" id="4782566">:=</span>&nbsp;<span class="ident" id="4782569">token</span><span class="op" id="4782574">.</span><span class="ident" id="4782575">INT</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782581">if</span>&nbsp;<span class="ident" id="4782584">seenDecimalPoint</span>&nbsp;<span class="op" id="4782601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782605">offs</span><span class="op" id="4782609">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782614">tok</span>&nbsp;<span class="op" id="4782618">=</span>&nbsp;<span class="ident" id="4782620">token</span><span class="op" id="4782625">.</span><span class="ident" id="4782626">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782634">s</span><span class="op" id="4782635">.</span><span class="ident" id="4782636">scanMantissa</span><span class="op" id="4782648">(</span><span class="num" id="4782649">10</span><span class="op" id="4782651">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782655">goto</span>&nbsp;<span class="ident" id="4782660">exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782674">if</span>&nbsp;<span class="ident" id="4782677">s</span><span class="op" id="4782678">.</span><span class="ident" id="4782679">ch</span>&nbsp;<span class="op" id="4782682">==</span>&nbsp;<span class="string" id="4782685">&#39;0&#39;</span>&nbsp;<span class="op" id="4782689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4782693">//&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782711">offs</span>&nbsp;<span class="op" id="4782716">:=</span>&nbsp;<span class="ident" id="4782719">s</span><span class="op" id="4782720">.</span><span class="ident" id="4782721">offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782730">s</span><span class="op" id="4782731">.</span><span class="ident" id="4782732">next</span><span class="op" id="4782736">(</span><span class="op" id="4782737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782741">if</span>&nbsp;<span class="ident" id="4782744">s</span><span class="op" id="4782745">.</span><span class="ident" id="4782746">ch</span>&nbsp;<span class="op" id="4782749">==</span>&nbsp;<span class="string" id="4782752">&#39;x&#39;</span>&nbsp;<span class="op" id="4782756">||</span>&nbsp;<span class="ident" id="4782759">s</span><span class="op" id="4782760">.</span><span class="ident" id="4782761">ch</span>&nbsp;<span class="op" id="4782764">==</span>&nbsp;<span class="string" id="4782767">&#39;X&#39;</span>&nbsp;<span class="op" id="4782771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4782776">//&nbsp;hexadecimal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782798">s</span><span class="op" id="4782799">.</span><span class="ident" id="4782800">next</span><span class="op" id="4782804">(</span><span class="op" id="4782805">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782810">s</span><span class="op" id="4782811">.</span><span class="ident" id="4782812">scanMantissa</span><span class="op" id="4782824">(</span><span class="num" id="4782825">16</span><span class="op" id="4782827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4782832">if</span>&nbsp;<span class="ident" id="4782835">s</span><span class="op" id="4782836">.</span><span class="ident" id="4782837">offset</span><span class="op" id="4782843">-</span><span class="ident" id="4782844">offs</span>&nbsp;<span class="op" id="4782849">&lt;=</span>&nbsp;<span class="num" id="4782852">2</span>&nbsp;<span class="op" id="4782854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4782860">//&nbsp;only&nbsp;scanned&nbsp;&#34;0x&#34;&nbsp;or&nbsp;&#34;0X&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782893">s</span><span class="op" id="4782894">.</span><span class="builtintype" id="4782895">error</span><span class="op" id="4782900">(</span><span class="ident" id="4782901">offs</span><span class="op" id="4782905">,</span>&nbsp;<span class="string" id="4782907">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op" id="4782935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782940">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4782944">}</span>&nbsp;<span class="keyword" id="4782946">else</span>&nbsp;<span class="op" id="4782951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4782956">//&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4782981">seenDecimalDigit</span>&nbsp;<span class="op" id="4782998">:=</span>&nbsp;<span class="builtintype" id="4783001">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783010">s</span><span class="op" id="4783011">.</span><span class="ident" id="4783012">scanMantissa</span><span class="op" id="4783024">(</span><span class="num" id="4783025">8</span><span class="op" id="4783026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783031">if</span>&nbsp;<span class="ident" id="4783034">s</span><span class="op" id="4783035">.</span><span class="ident" id="4783036">ch</span>&nbsp;<span class="op" id="4783039">==</span>&nbsp;<span class="string" id="4783042">&#39;8&#39;</span>&nbsp;<span class="op" id="4783046">||</span>&nbsp;<span class="ident" id="4783049">s</span><span class="op" id="4783050">.</span><span class="ident" id="4783051">ch</span>&nbsp;<span class="op" id="4783054">==</span>&nbsp;<span class="string" id="4783057">&#39;9&#39;</span>&nbsp;<span class="op" id="4783061">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4783067">//&nbsp;illegal&nbsp;octal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783101">seenDecimalDigit</span>&nbsp;<span class="op" id="4783118">=</span>&nbsp;<span class="builtintype" id="4783120">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783129">s</span><span class="op" id="4783130">.</span><span class="ident" id="4783131">scanMantissa</span><span class="op" id="4783143">(</span><span class="num" id="4783144">10</span><span class="op" id="4783146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783156">if</span>&nbsp;<span class="ident" id="4783159">s</span><span class="op" id="4783160">.</span><span class="ident" id="4783161">ch</span>&nbsp;<span class="op" id="4783164">==</span>&nbsp;<span class="string" id="4783167">&#39;.&#39;</span>&nbsp;<span class="op" id="4783171">||</span>&nbsp;<span class="ident" id="4783174">s</span><span class="op" id="4783175">.</span><span class="ident" id="4783176">ch</span>&nbsp;<span class="op" id="4783179">==</span>&nbsp;<span class="string" id="4783182">&#39;e&#39;</span>&nbsp;<span class="op" id="4783186">||</span>&nbsp;<span class="ident" id="4783189">s</span><span class="op" id="4783190">.</span><span class="ident" id="4783191">ch</span>&nbsp;<span class="op" id="4783194">==</span>&nbsp;<span class="string" id="4783197">&#39;E&#39;</span>&nbsp;<span class="op" id="4783201">||</span>&nbsp;<span class="ident" id="4783204">s</span><span class="op" id="4783205">.</span><span class="ident" id="4783206">ch</span>&nbsp;<span class="op" id="4783209">==</span>&nbsp;<span class="string" id="4783212">&#39;i&#39;</span>&nbsp;<span class="op" id="4783216">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783222">goto</span>&nbsp;<span class="ident" id="4783227">fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4783244">//&nbsp;octal&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783260">if</span>&nbsp;<span class="ident" id="4783263">seenDecimalDigit</span>&nbsp;<span class="op" id="4783280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783286">s</span><span class="op" id="4783287">.</span><span class="builtintype" id="4783288">error</span><span class="op" id="4783293">(</span><span class="ident" id="4783294">offs</span><span class="op" id="4783298">,</span>&nbsp;<span class="string" id="4783300">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op" id="4783322">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783335">goto</span>&nbsp;<span class="ident" id="4783340">exit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4783350">//&nbsp;decimal&nbsp;int&nbsp;or&nbsp;float</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783375">s</span><span class="op" id="4783376">.</span><span class="ident" id="4783377">scanMantissa</span><span class="op" id="4783389">(</span><span class="num" id="4783390">10</span><span class="op" id="4783392">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="4783395">fraction</span><span class="op" id="4783403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783406">if</span>&nbsp;<span class="ident" id="4783409">s</span><span class="op" id="4783410">.</span><span class="ident" id="4783411">ch</span>&nbsp;<span class="op" id="4783414">==</span>&nbsp;<span class="string" id="4783417">&#39;.&#39;</span>&nbsp;<span class="op" id="4783421">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783425">tok</span>&nbsp;<span class="op" id="4783429">=</span>&nbsp;<span class="ident" id="4783431">token</span><span class="op" id="4783436">.</span><span class="ident" id="4783437">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783445">s</span><span class="op" id="4783446">.</span><span class="ident" id="4783447">next</span><span class="op" id="4783451">(</span><span class="op" id="4783452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783456">s</span><span class="op" id="4783457">.</span><span class="ident" id="4783458">scanMantissa</span><span class="op" id="4783470">(</span><span class="num" id="4783471">10</span><span class="op" id="4783473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="ident" id="4783479">exponent</span><span class="op" id="4783487">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783490">if</span>&nbsp;<span class="ident" id="4783493">s</span><span class="op" id="4783494">.</span><span class="ident" id="4783495">ch</span>&nbsp;<span class="op" id="4783498">==</span>&nbsp;<span class="string" id="4783501">&#39;e&#39;</span>&nbsp;<span class="op" id="4783505">||</span>&nbsp;<span class="ident" id="4783508">s</span><span class="op" id="4783509">.</span><span class="ident" id="4783510">ch</span>&nbsp;<span class="op" id="4783513">==</span>&nbsp;<span class="string" id="4783516">&#39;E&#39;</span>&nbsp;<span class="op" id="4783520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783524">tok</span>&nbsp;<span class="op" id="4783528">=</span>&nbsp;<span class="ident" id="4783530">token</span><span class="op" id="4783535">.</span><span class="ident" id="4783536">FLOAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783544">s</span><span class="op" id="4783545">.</span><span class="ident" id="4783546">next</span><span class="op" id="4783550">(</span><span class="op" id="4783551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783555">if</span>&nbsp;<span class="ident" id="4783558">s</span><span class="op" id="4783559">.</span><span class="ident" id="4783560">ch</span>&nbsp;<span class="op" id="4783563">==</span>&nbsp;<span class="string" id="4783566">&#39;-&#39;</span>&nbsp;<span class="op" id="4783570">||</span>&nbsp;<span class="ident" id="4783573">s</span><span class="op" id="4783574">.</span><span class="ident" id="4783575">ch</span>&nbsp;<span class="op" id="4783578">==</span>&nbsp;<span class="string" id="4783581">&#39;+&#39;</span>&nbsp;<span class="op" id="4783585">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783590">s</span><span class="op" id="4783591">.</span><span class="ident" id="4783592">next</span><span class="op" id="4783596">(</span><span class="op" id="4783597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783605">s</span><span class="op" id="4783606">.</span><span class="ident" id="4783607">scanMantissa</span><span class="op" id="4783619">(</span><span class="num" id="4783620">10</span><span class="op" id="4783622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783629">if</span>&nbsp;<span class="ident" id="4783632">s</span><span class="op" id="4783633">.</span><span class="ident" id="4783634">ch</span>&nbsp;<span class="op" id="4783637">==</span>&nbsp;<span class="string" id="4783640">&#39;i&#39;</span>&nbsp;<span class="op" id="4783644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783648">tok</span>&nbsp;<span class="op" id="4783652">=</span>&nbsp;<span class="ident" id="4783654">token</span><span class="op" id="4783659">.</span><span class="ident" id="4783660">IMAG</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4783667">s</span><span class="op" id="4783668">.</span><span class="ident" id="4783669">next</span><span class="op" id="4783673">(</span><span class="op" id="4783674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4783677">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="ident" id="4783680">exit</span><span class="op" id="4783684">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4783687">return</span>&nbsp;<span class="ident" id="4783694">tok</span><span class="op" id="4783697">,</span>&nbsp;<span class="builtintype" id="4783699">string</span><span class="op" id="4783705">(</span><span class="ident" id="4783706">s</span><span class="op" id="4783707">.</span><span class="ident" id="4783708">src</span><span class="op" id="4783711">[</span><span class="ident" id="4783712">offs</span><span class="op" id="4783716">:</span><span class="ident" id="4783717">s</span><span class="op" id="4783718">.</span><span class="ident" id="4783719">offset</span><span class="op" id="4783725">]</span><span class="op" id="4783726">)</span><br>
<span class="lineno"></span><span class="op" id="4783728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4783731">//&nbsp;scanEscape&nbsp;parses&nbsp;an&nbsp;escape&nbsp;sequence&nbsp;where&nbsp;rune&nbsp;is&nbsp;the&nbsp;accepted</span><br>
<span class="lineno">365</span><span class="comment" id="4783798">//&nbsp;escaped&nbsp;quote.&nbsp;In&nbsp;case&nbsp;of&nbsp;a&nbsp;syntax&nbsp;error,&nbsp;it&nbsp;stops&nbsp;at&nbsp;the&nbsp;offending</span><br>
<span class="lineno"></span><span class="comment" id="4783869">//&nbsp;character&nbsp;(without&nbsp;consuming&nbsp;it)&nbsp;and&nbsp;returns&nbsp;false.&nbsp;Otherwise</span><br>
<span class="lineno"></span><span class="comment" id="4783934">//&nbsp;it&nbsp;returns&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="4783954">func</span>&nbsp;<span class="op" id="4783959">(</span><span class="ident" id="4783960">s</span>&nbsp;<span class="op" id="4783962">*</span><span class="ident" id="4783963">Scanner</span><span class="op" id="4783970">)</span>&nbsp;<span class="ident" id="4783972">scanEscape</span><span class="op" id="4783982">(</span><span class="ident" id="4783983">quote</span>&nbsp;<span class="builtintype" id="4783989">rune</span><span class="op" id="4783993">)</span>&nbsp;<span class="builtintype" id="4783995">bool</span>&nbsp;<span class="op" id="4784000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784003">offs</span>&nbsp;<span class="op" id="4784008">:=</span>&nbsp;<span class="ident" id="4784011">s</span><span class="op" id="4784012">.</span><span class="ident" id="4784013">offset</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784022">var</span>&nbsp;<span class="ident" id="4784026">n</span>&nbsp;<span class="builtintype" id="4784028">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784033">var</span>&nbsp;<span class="ident" id="4784037">base</span><span class="op" id="4784041">,</span>&nbsp;<span class="ident" id="4784043">max</span>&nbsp;<span class="builtintype" id="4784047">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784055">switch</span>&nbsp;<span class="ident" id="4784062">s</span><span class="op" id="4784063">.</span><span class="ident" id="4784064">ch</span>&nbsp;<span class="op" id="4784067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784070">case</span>&nbsp;<span class="string" id="4784075">&#39;a&#39;</span><span class="op" id="4784078">,</span>&nbsp;<span class="string" id="4784080">&#39;b&#39;</span><span class="op" id="4784083">,</span>&nbsp;<span class="string" id="4784085">&#39;f&#39;</span><span class="op" id="4784088">,</span>&nbsp;<span class="string" id="4784090">&#39;n&#39;</span><span class="op" id="4784093">,</span>&nbsp;<span class="string" id="4784095">&#39;r&#39;</span><span class="op" id="4784098">,</span>&nbsp;<span class="string" id="4784100">&#39;t&#39;</span><span class="op" id="4784103">,</span>&nbsp;<span class="string" id="4784105">&#39;v&#39;</span><span class="op" id="4784108">,</span>&nbsp;<span class="string" id="4784110">&#39;\\&#39;</span><span class="op" id="4784114">,</span>&nbsp;<span class="ident" id="4784116">quote</span><span class="op" id="4784121">:</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784125">s</span><span class="op" id="4784126">.</span><span class="ident" id="4784127">next</span><span class="op" id="4784131">(</span><span class="op" id="4784132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784136">return</span>&nbsp;<span class="builtintype" id="4784143">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784149">case</span>&nbsp;<span class="string" id="4784154">&#39;0&#39;</span><span class="op" id="4784157">,</span>&nbsp;<span class="string" id="4784159">&#39;1&#39;</span><span class="op" id="4784162">,</span>&nbsp;<span class="string" id="4784164">&#39;2&#39;</span><span class="op" id="4784167">,</span>&nbsp;<span class="string" id="4784169">&#39;3&#39;</span><span class="op" id="4784172">,</span>&nbsp;<span class="string" id="4784174">&#39;4&#39;</span><span class="op" id="4784177">,</span>&nbsp;<span class="string" id="4784179">&#39;5&#39;</span><span class="op" id="4784182">,</span>&nbsp;<span class="string" id="4784184">&#39;6&#39;</span><span class="op" id="4784187">,</span>&nbsp;<span class="string" id="4784189">&#39;7&#39;</span><span class="op" id="4784192">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784196">n</span><span class="op" id="4784197">,</span>&nbsp;<span class="ident" id="4784199">base</span><span class="op" id="4784203">,</span>&nbsp;<span class="ident" id="4784205">max</span>&nbsp;<span class="op" id="4784209">=</span>&nbsp;<span class="num" id="4784211">3</span><span class="op" id="4784212">,</span>&nbsp;<span class="num" id="4784214">8</span><span class="op" id="4784215">,</span>&nbsp;<span class="num" id="4784217">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784222">case</span>&nbsp;<span class="string" id="4784227">&#39;x&#39;</span><span class="op" id="4784230">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784234">s</span><span class="op" id="4784235">.</span><span class="ident" id="4784236">next</span><span class="op" id="4784240">(</span><span class="op" id="4784241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784245">n</span><span class="op" id="4784246">,</span>&nbsp;<span class="ident" id="4784248">base</span><span class="op" id="4784252">,</span>&nbsp;<span class="ident" id="4784254">max</span>&nbsp;<span class="op" id="4784258">=</span>&nbsp;<span class="num" id="4784260">2</span><span class="op" id="4784261">,</span>&nbsp;<span class="num" id="4784263">16</span><span class="op" id="4784265">,</span>&nbsp;<span class="num" id="4784267">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784272">case</span>&nbsp;<span class="string" id="4784277">&#39;u&#39;</span><span class="op" id="4784280">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784284">s</span><span class="op" id="4784285">.</span><span class="ident" id="4784286">next</span><span class="op" id="4784290">(</span><span class="op" id="4784291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784295">n</span><span class="op" id="4784296">,</span>&nbsp;<span class="ident" id="4784298">base</span><span class="op" id="4784302">,</span>&nbsp;<span class="ident" id="4784304">max</span>&nbsp;<span class="op" id="4784308">=</span>&nbsp;<span class="num" id="4784310">4</span><span class="op" id="4784311">,</span>&nbsp;<span class="num" id="4784313">16</span><span class="op" id="4784315">,</span>&nbsp;<span class="ident" id="4784317">unicode</span><span class="op" id="4784324">.</span><span class="ident" id="4784325">MaxRune</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784334">case</span>&nbsp;<span class="string" id="4784339">&#39;U&#39;</span><span class="op" id="4784342">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784346">s</span><span class="op" id="4784347">.</span><span class="ident" id="4784348">next</span><span class="op" id="4784352">(</span><span class="op" id="4784353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784357">n</span><span class="op" id="4784358">,</span>&nbsp;<span class="ident" id="4784360">base</span><span class="op" id="4784364">,</span>&nbsp;<span class="ident" id="4784366">max</span>&nbsp;<span class="op" id="4784370">=</span>&nbsp;<span class="num" id="4784372">8</span><span class="op" id="4784373">,</span>&nbsp;<span class="num" id="4784375">16</span><span class="op" id="4784377">,</span>&nbsp;<span class="ident" id="4784379">unicode</span><span class="op" id="4784386">.</span><span class="ident" id="4784387">MaxRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784396">default</span><span class="op" id="4784403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784407">msg</span>&nbsp;<span class="op" id="4784411">:=</span>&nbsp;<span class="string" id="4784414">&#34;unknown&nbsp;escape&nbsp;sequence&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784442">if</span>&nbsp;<span class="ident" id="4784445">s</span><span class="op" id="4784446">.</span><span class="ident" id="4784447">ch</span>&nbsp;<span class="op" id="4784450">&lt;</span>&nbsp;<span class="num" id="4784452">0</span>&nbsp;<span class="op" id="4784454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784459">msg</span>&nbsp;<span class="op" id="4784463">=</span>&nbsp;<span class="string" id="4784465">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784504">s</span><span class="op" id="4784505">.</span><span class="builtintype" id="4784506">error</span><span class="op" id="4784511">(</span><span class="ident" id="4784512">offs</span><span class="op" id="4784516">,</span>&nbsp;<span class="ident" id="4784518">msg</span><span class="op" id="4784521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784525">return</span>&nbsp;<span class="builtintype" id="4784532">false</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784543">var</span>&nbsp;<span class="ident" id="4784547">x</span>&nbsp;<span class="builtintype" id="4784549">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784557">for</span>&nbsp;<span class="ident" id="4784561">n</span>&nbsp;<span class="op" id="4784563">&gt;</span>&nbsp;<span class="num" id="4784565">0</span>&nbsp;<span class="op" id="4784567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784571">d</span>&nbsp;<span class="op" id="4784573">:=</span>&nbsp;<span class="builtintype" id="4784576">uint32</span><span class="op" id="4784582">(</span><span class="ident" id="4784583">digitVal</span><span class="op" id="4784591">(</span><span class="ident" id="4784592">s</span><span class="op" id="4784593">.</span><span class="ident" id="4784594">ch</span><span class="op" id="4784596">)</span><span class="op" id="4784597">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784601">if</span>&nbsp;<span class="ident" id="4784604">d</span>&nbsp;<span class="op" id="4784606">&gt;=</span>&nbsp;<span class="ident" id="4784609">base</span>&nbsp;<span class="op" id="4784614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784619">msg</span>&nbsp;<span class="op" id="4784623">:=</span>&nbsp;<span class="ident" id="4784626">fmt</span><span class="op" id="4784629">.</span><span class="ident" id="4784630">Sprintf</span><span class="op" id="4784637">(</span><span class="string" id="4784638">&#34;illegal&nbsp;character&nbsp;%#U&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op" id="4784680">,</span>&nbsp;<span class="ident" id="4784682">s</span><span class="op" id="4784683">.</span><span class="ident" id="4784684">ch</span><span class="op" id="4784686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784691">if</span>&nbsp;<span class="ident" id="4784694">s</span><span class="op" id="4784695">.</span><span class="ident" id="4784696">ch</span>&nbsp;<span class="op" id="4784699">&lt;</span>&nbsp;<span class="num" id="4784701">0</span>&nbsp;<span class="op" id="4784703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784709">msg</span>&nbsp;<span class="op" id="4784713">=</span>&nbsp;<span class="string" id="4784715">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784751">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784756">s</span><span class="op" id="4784757">.</span><span class="builtintype" id="4784758">error</span><span class="op" id="4784763">(</span><span class="ident" id="4784764">s</span><span class="op" id="4784765">.</span><span class="ident" id="4784766">offset</span><span class="op" id="4784772">,</span>&nbsp;<span class="ident" id="4784774">msg</span><span class="op" id="4784777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784782">return</span>&nbsp;<span class="builtintype" id="4784789">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784801">x</span>&nbsp;<span class="op" id="4784803">=</span>&nbsp;<span class="ident" id="4784805">x</span><span class="op" id="4784806">*</span><span class="ident" id="4784807">base</span>&nbsp;<span class="op" id="4784812">+</span>&nbsp;<span class="ident" id="4784814">d</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784818">s</span><span class="op" id="4784819">.</span><span class="ident" id="4784820">next</span><span class="op" id="4784824">(</span><span class="op" id="4784825">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784829">n</span><span class="op" id="4784830">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784838">if</span>&nbsp;<span class="ident" id="4784841">x</span>&nbsp;<span class="op" id="4784843">&gt;</span>&nbsp;<span class="ident" id="4784845">max</span>&nbsp;<span class="op" id="4784849">||</span>&nbsp;<span class="num" id="4784852">0xD800</span>&nbsp;<span class="op" id="4784859">&lt;=</span>&nbsp;<span class="ident" id="4784862">x</span>&nbsp;<span class="op" id="4784864">&amp;&amp;</span>&nbsp;<span class="ident" id="4784867">x</span>&nbsp;<span class="op" id="4784869">&lt;</span>&nbsp;<span class="num" id="4784871">0xE000</span>&nbsp;<span class="op" id="4784878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4784882">s</span><span class="op" id="4784883">.</span><span class="builtintype" id="4784884">error</span><span class="op" id="4784889">(</span><span class="ident" id="4784890">offs</span><span class="op" id="4784894">,</span>&nbsp;<span class="string" id="4784896">&#34;escape&nbsp;sequence&nbsp;is&nbsp;invalid&nbsp;Unicode&nbsp;code&nbsp;point&#34;</span><span class="op" id="4784943">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784947">return</span>&nbsp;<span class="builtintype" id="4784954">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4784961">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4784965">return</span>&nbsp;<span class="builtintype" id="4784972">true</span><br>
<span class="lineno"></span><span class="op" id="4784977">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span><span class="keyword" id="4784980">func</span>&nbsp;<span class="op" id="4784985">(</span><span class="ident" id="4784986">s</span>&nbsp;<span class="op" id="4784988">*</span><span class="ident" id="4784989">Scanner</span><span class="op" id="4784996">)</span>&nbsp;<span class="ident" id="4784998">scanRune</span><span class="op" id="4785006">(</span><span class="op" id="4785007">)</span>&nbsp;<span class="builtintype" id="4785009">string</span>&nbsp;<span class="op" id="4785016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4785019">//&nbsp;&#39;\&#39;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785053">offs</span>&nbsp;<span class="op" id="4785058">:=</span>&nbsp;<span class="ident" id="4785061">s</span><span class="op" id="4785062">.</span><span class="ident" id="4785063">offset</span>&nbsp;<span class="op" id="4785070">-</span>&nbsp;<span class="num" id="4785072">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785076">valid</span>&nbsp;<span class="op" id="4785082">:=</span>&nbsp;<span class="builtintype" id="4785085">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785091">n</span>&nbsp;<span class="op" id="4785093">:=</span>&nbsp;<span class="num" id="4785096">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785099">for</span>&nbsp;<span class="op" id="4785103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785107">ch</span>&nbsp;<span class="op" id="4785110">:=</span>&nbsp;<span class="ident" id="4785113">s</span><span class="op" id="4785114">.</span><span class="ident" id="4785115">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785120">if</span>&nbsp;<span class="ident" id="4785123">ch</span>&nbsp;<span class="op" id="4785126">==</span>&nbsp;<span class="string" id="4785129">&#39;\n&#39;</span>&nbsp;<span class="op" id="4785134">||</span>&nbsp;<span class="ident" id="4785137">ch</span>&nbsp;<span class="op" id="4785140">&lt;</span>&nbsp;<span class="num" id="4785142">0</span>&nbsp;<span class="op" id="4785144">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4785149">//&nbsp;only&nbsp;report&nbsp;error&nbsp;if&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;one&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785202">if</span>&nbsp;<span class="ident" id="4785205">valid</span>&nbsp;<span class="op" id="4785211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785217">s</span><span class="op" id="4785218">.</span><span class="builtintype" id="4785219">error</span><span class="op" id="4785224">(</span><span class="ident" id="4785225">offs</span><span class="op" id="4785229">,</span>&nbsp;<span class="string" id="4785231">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4785260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785266">valid</span>&nbsp;<span class="op" id="4785272">=</span>&nbsp;<span class="builtintype" id="4785274">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785283">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785288">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785300">s</span><span class="op" id="4785301">.</span><span class="ident" id="4785302">next</span><span class="op" id="4785306">(</span><span class="op" id="4785307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785311">if</span>&nbsp;<span class="ident" id="4785314">ch</span>&nbsp;<span class="op" id="4785317">==</span>&nbsp;<span class="string" id="4785320">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="4785325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785330">break</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785342">n</span><span class="op" id="4785343">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785348">if</span>&nbsp;<span class="ident" id="4785351">ch</span>&nbsp;<span class="op" id="4785354">==</span>&nbsp;<span class="string" id="4785357">&#39;\\&#39;</span>&nbsp;<span class="op" id="4785362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785367">if</span>&nbsp;<span class="op" id="4785370">!</span><span class="ident" id="4785371">s</span><span class="op" id="4785372">.</span><span class="ident" id="4785373">scanEscape</span><span class="op" id="4785383">(</span><span class="string" id="4785384">&#39;\&#39;&#39;</span><span class="op" id="4785388">)</span>&nbsp;<span class="op" id="4785390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785396">valid</span>&nbsp;<span class="op" id="4785402">=</span>&nbsp;<span class="builtintype" id="4785404">false</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4785418">//&nbsp;continue&nbsp;to&nbsp;read&nbsp;to&nbsp;closing&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785464">if</span>&nbsp;<span class="ident" id="4785467">valid</span>&nbsp;<span class="op" id="4785473">&amp;&amp;</span>&nbsp;<span class="ident" id="4785476">n</span>&nbsp;<span class="op" id="4785478">!=</span>&nbsp;<span class="num" id="4785481">1</span>&nbsp;<span class="op" id="4785483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785487">s</span><span class="op" id="4785488">.</span><span class="builtintype" id="4785489">error</span><span class="op" id="4785494">(</span><span class="ident" id="4785495">offs</span><span class="op" id="4785499">,</span>&nbsp;<span class="string" id="4785501">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op" id="4785523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785530">return</span>&nbsp;<span class="builtintype" id="4785537">string</span><span class="op" id="4785543">(</span><span class="ident" id="4785544">s</span><span class="op" id="4785545">.</span><span class="ident" id="4785546">src</span><span class="op" id="4785549">[</span><span class="ident" id="4785550">offs</span><span class="op" id="4785554">:</span><span class="ident" id="4785555">s</span><span class="op" id="4785556">.</span><span class="ident" id="4785557">offset</span><span class="op" id="4785563">]</span><span class="op" id="4785564">)</span><br>
<span class="lineno">455</span><span class="op" id="4785566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4785569">func</span>&nbsp;<span class="op" id="4785574">(</span><span class="ident" id="4785575">s</span>&nbsp;<span class="op" id="4785577">*</span><span class="ident" id="4785578">Scanner</span><span class="op" id="4785585">)</span>&nbsp;<span class="ident" id="4785587">scanString</span><span class="op" id="4785597">(</span><span class="op" id="4785598">)</span>&nbsp;<span class="builtintype" id="4785600">string</span>&nbsp;<span class="op" id="4785607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4785610">//&nbsp;&#39;&#34;&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785643">offs</span>&nbsp;<span class="op" id="4785648">:=</span>&nbsp;<span class="ident" id="4785651">s</span><span class="op" id="4785652">.</span><span class="ident" id="4785653">offset</span>&nbsp;<span class="op" id="4785660">-</span>&nbsp;<span class="num" id="4785662">1</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785666">for</span>&nbsp;<span class="op" id="4785670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785674">ch</span>&nbsp;<span class="op" id="4785677">:=</span>&nbsp;<span class="ident" id="4785680">s</span><span class="op" id="4785681">.</span><span class="ident" id="4785682">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785687">if</span>&nbsp;<span class="ident" id="4785690">ch</span>&nbsp;<span class="op" id="4785693">==</span>&nbsp;<span class="string" id="4785696">&#39;\n&#39;</span>&nbsp;<span class="op" id="4785701">||</span>&nbsp;<span class="ident" id="4785704">ch</span>&nbsp;<span class="op" id="4785707">&lt;</span>&nbsp;<span class="num" id="4785709">0</span>&nbsp;<span class="op" id="4785711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785716">s</span><span class="op" id="4785717">.</span><span class="builtintype" id="4785718">error</span><span class="op" id="4785723">(</span><span class="ident" id="4785724">offs</span><span class="op" id="4785728">,</span>&nbsp;<span class="string" id="4785730">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4785761">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785766">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785778">s</span><span class="op" id="4785779">.</span><span class="ident" id="4785780">next</span><span class="op" id="4785784">(</span><span class="op" id="4785785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785789">if</span>&nbsp;<span class="ident" id="4785792">ch</span>&nbsp;<span class="op" id="4785795">==</span>&nbsp;<span class="string" id="4785798">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="4785802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785807">break</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785819">if</span>&nbsp;<span class="ident" id="4785822">ch</span>&nbsp;<span class="op" id="4785825">==</span>&nbsp;<span class="string" id="4785828">&#39;\\&#39;</span>&nbsp;<span class="op" id="4785833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785838">s</span><span class="op" id="4785839">.</span><span class="ident" id="4785840">scanEscape</span><span class="op" id="4785850">(</span><span class="string" id="4785851">&#39;&#34;&#39;</span><span class="op" id="4785854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4785861">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785865">return</span>&nbsp;<span class="builtintype" id="4785872">string</span><span class="op" id="4785878">(</span><span class="ident" id="4785879">s</span><span class="op" id="4785880">.</span><span class="ident" id="4785881">src</span><span class="op" id="4785884">[</span><span class="ident" id="4785885">offs</span><span class="op" id="4785889">:</span><span class="ident" id="4785890">s</span><span class="op" id="4785891">.</span><span class="ident" id="4785892">offset</span><span class="op" id="4785898">]</span><span class="op" id="4785899">)</span><br>
<span class="lineno"></span><span class="op" id="4785901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4785904">func</span>&nbsp;<span class="ident" id="4785909">stripCR</span><span class="op" id="4785916">(</span><span class="ident" id="4785917">b</span>&nbsp;<span class="op" id="4785919">[</span><span class="op" id="4785920">]</span><span class="builtintype" id="4785921">byte</span><span class="op" id="4785925">)</span>&nbsp;<span class="op" id="4785927">[</span><span class="op" id="4785928">]</span><span class="builtintype" id="4785929">byte</span>&nbsp;<span class="op" id="4785934">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785937">c</span>&nbsp;<span class="op" id="4785939">:=</span>&nbsp;<span class="builtinfunc" id="4785942">make</span><span class="op" id="4785946">(</span><span class="op" id="4785947">[</span><span class="op" id="4785948">]</span><span class="builtintype" id="4785949">byte</span><span class="op" id="4785953">,</span>&nbsp;<span class="builtinfunc" id="4785955">len</span><span class="op" id="4785958">(</span><span class="ident" id="4785959">b</span><span class="op" id="4785960">)</span><span class="op" id="4785961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4785964">i</span>&nbsp;<span class="op" id="4785966">:=</span>&nbsp;<span class="num" id="4785969">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785972">for</span>&nbsp;<span class="ident" id="4785976">_</span><span class="op" id="4785977">,</span>&nbsp;<span class="ident" id="4785979">ch</span>&nbsp;<span class="op" id="4785982">:=</span>&nbsp;<span class="keyword" id="4785985">range</span>&nbsp;<span class="ident" id="4785991">b</span>&nbsp;<span class="op" id="4785993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4785997">if</span>&nbsp;<span class="ident" id="4786000">ch</span>&nbsp;<span class="op" id="4786003">!=</span>&nbsp;<span class="string" id="4786006">&#39;\r&#39;</span>&nbsp;<span class="op" id="4786011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786016">c</span><span class="op" id="4786017">[</span><span class="ident" id="4786018">i</span><span class="op" id="4786019">]</span>&nbsp;<span class="op" id="4786021">=</span>&nbsp;<span class="ident" id="4786023">ch</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786029">i</span><span class="op" id="4786030">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786041">return</span>&nbsp;<span class="ident" id="4786048">c</span><span class="op" id="4786049">[</span><span class="op" id="4786050">:</span><span class="ident" id="4786051">i</span><span class="op" id="4786052">]</span><br>
<span class="lineno"></span><span class="op" id="4786054">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span><span class="keyword" id="4786057">func</span>&nbsp;<span class="op" id="4786062">(</span><span class="ident" id="4786063">s</span>&nbsp;<span class="op" id="4786065">*</span><span class="ident" id="4786066">Scanner</span><span class="op" id="4786073">)</span>&nbsp;<span class="ident" id="4786075">scanRawString</span><span class="op" id="4786088">(</span><span class="op" id="4786089">)</span>&nbsp;<span class="builtintype" id="4786091">string</span>&nbsp;<span class="op" id="4786098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4786101">//&nbsp;&#39;`&#39;&nbsp;opening&nbsp;already&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786134">offs</span>&nbsp;<span class="op" id="4786139">:=</span>&nbsp;<span class="ident" id="4786142">s</span><span class="op" id="4786143">.</span><span class="ident" id="4786144">offset</span>&nbsp;<span class="op" id="4786151">-</span>&nbsp;<span class="num" id="4786153">1</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786157">hasCR</span>&nbsp;<span class="op" id="4786163">:=</span>&nbsp;<span class="builtintype" id="4786166">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786173">for</span>&nbsp;<span class="op" id="4786177">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786181">ch</span>&nbsp;<span class="op" id="4786184">:=</span>&nbsp;<span class="ident" id="4786187">s</span><span class="op" id="4786188">.</span><span class="ident" id="4786189">ch</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786194">if</span>&nbsp;<span class="ident" id="4786197">ch</span>&nbsp;<span class="op" id="4786200">&lt;</span>&nbsp;<span class="num" id="4786202">0</span>&nbsp;<span class="op" id="4786204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786209">s</span><span class="op" id="4786210">.</span><span class="builtintype" id="4786211">error</span><span class="op" id="4786216">(</span><span class="ident" id="4786217">offs</span><span class="op" id="4786221">,</span>&nbsp;<span class="string" id="4786223">&#34;raw&nbsp;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op" id="4786258">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786263">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786275">s</span><span class="op" id="4786276">.</span><span class="ident" id="4786277">next</span><span class="op" id="4786281">(</span><span class="op" id="4786282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786286">if</span>&nbsp;<span class="ident" id="4786289">ch</span>&nbsp;<span class="op" id="4786292">==</span>&nbsp;<span class="string" id="4786295">&#39;`&#39;</span>&nbsp;<span class="op" id="4786299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786304">break</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786316">if</span>&nbsp;<span class="ident" id="4786319">ch</span>&nbsp;<span class="op" id="4786322">==</span>&nbsp;<span class="string" id="4786325">&#39;\r&#39;</span>&nbsp;<span class="op" id="4786330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786335">hasCR</span>&nbsp;<span class="op" id="4786341">=</span>&nbsp;<span class="builtintype" id="4786343">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786353">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786357">lit</span>&nbsp;<span class="op" id="4786361">:=</span>&nbsp;<span class="ident" id="4786364">s</span><span class="op" id="4786365">.</span><span class="ident" id="4786366">src</span><span class="op" id="4786369">[</span><span class="ident" id="4786370">offs</span><span class="op" id="4786374">:</span><span class="ident" id="4786375">s</span><span class="op" id="4786376">.</span><span class="ident" id="4786377">offset</span><span class="op" id="4786383">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786386">if</span>&nbsp;<span class="ident" id="4786389">hasCR</span>&nbsp;<span class="op" id="4786395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786399">lit</span>&nbsp;<span class="op" id="4786403">=</span>&nbsp;<span class="ident" id="4786405">stripCR</span><span class="op" id="4786412">(</span><span class="ident" id="4786413">lit</span><span class="op" id="4786416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786419">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786423">return</span>&nbsp;<span class="builtintype" id="4786430">string</span><span class="op" id="4786436">(</span><span class="ident" id="4786437">lit</span><span class="op" id="4786440">)</span><br>
<span class="lineno"></span><span class="op" id="4786442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4786445">func</span>&nbsp;<span class="op" id="4786450">(</span><span class="ident" id="4786451">s</span>&nbsp;<span class="op" id="4786453">*</span><span class="ident" id="4786454">Scanner</span><span class="op" id="4786461">)</span>&nbsp;<span class="ident" id="4786463">skipWhitespace</span><span class="op" id="4786477">(</span><span class="op" id="4786478">)</span>&nbsp;<span class="op" id="4786480">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786483">for</span>&nbsp;<span class="ident" id="4786487">s</span><span class="op" id="4786488">.</span><span class="ident" id="4786489">ch</span>&nbsp;<span class="op" id="4786492">==</span>&nbsp;<span class="string" id="4786495">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="4786499">||</span>&nbsp;<span class="ident" id="4786502">s</span><span class="op" id="4786503">.</span><span class="ident" id="4786504">ch</span>&nbsp;<span class="op" id="4786507">==</span>&nbsp;<span class="string" id="4786510">&#39;\t&#39;</span>&nbsp;<span class="op" id="4786515">||</span>&nbsp;<span class="ident" id="4786518">s</span><span class="op" id="4786519">.</span><span class="ident" id="4786520">ch</span>&nbsp;<span class="op" id="4786523">==</span>&nbsp;<span class="string" id="4786526">&#39;\n&#39;</span>&nbsp;<span class="op" id="4786531">&amp;&amp;</span>&nbsp;<span class="op" id="4786534">!</span><span class="ident" id="4786535">s</span><span class="op" id="4786536">.</span><span class="ident" id="4786537">insertSemi</span>&nbsp;<span class="op" id="4786548">||</span>&nbsp;<span class="ident" id="4786551">s</span><span class="op" id="4786552">.</span><span class="ident" id="4786553">ch</span>&nbsp;<span class="op" id="4786556">==</span>&nbsp;<span class="string" id="4786559">&#39;\r&#39;</span>&nbsp;<span class="op" id="4786564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4786568">s</span><span class="op" id="4786569">.</span><span class="ident" id="4786570">next</span><span class="op" id="4786574">(</span><span class="op" id="4786575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4786578">}</span><br>
<span class="lineno"></span><span class="op" id="4786580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span><span class="comment" id="4786583">//&nbsp;Helper&nbsp;functions&nbsp;for&nbsp;scanning&nbsp;multi-byte&nbsp;tokens&nbsp;such&nbsp;as&nbsp;&gt;&gt;&nbsp;+=&nbsp;&gt;&gt;=&nbsp;.</span><br>
<span class="lineno"></span><span class="comment" id="4786654">//&nbsp;Different&nbsp;routines&nbsp;recognize&nbsp;different&nbsp;length&nbsp;tok_i&nbsp;based&nbsp;on&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="4786726">//&nbsp;of&nbsp;ch_i.&nbsp;If&nbsp;a&nbsp;token&nbsp;ends&nbsp;in&nbsp;&#39;=&#39;,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok1&nbsp;or&nbsp;tok3</span><br>
<span class="lineno"></span><span class="comment" id="4786789">//&nbsp;respectively.&nbsp;Otherwise,&nbsp;the&nbsp;result&nbsp;is&nbsp;tok0&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;other</span><br>
<span class="lineno"></span><span class="comment" id="4786858">//&nbsp;matching&nbsp;character,&nbsp;or&nbsp;tok2&nbsp;if&nbsp;the&nbsp;matching&nbsp;character&nbsp;was&nbsp;ch2.</span><br>
<span class="lineno">530</span><br>
<span class="lineno"></span><span class="keyword" id="4786925">func</span>&nbsp;<span class="op" id="4786930">(</span><span class="ident" id="4786931">s</span>&nbsp;<span class="op" id="4786933">*</span><span class="ident" id="4786934">Scanner</span><span class="op" id="4786941">)</span>&nbsp;<span class="ident" id="4786943">switch2</span><span class="op" id="4786950">(</span><span class="ident" id="4786951">tok0</span><span class="op" id="4786955">,</span>&nbsp;<span class="ident" id="4786957">tok1</span>&nbsp;<span class="ident" id="4786962">token</span><span class="op" id="4786967">.</span><span class="ident" id="4786968">Token</span><span class="op" id="4786973">)</span>&nbsp;<span class="ident" id="4786975">token</span><span class="op" id="4786980">.</span><span class="ident" id="4786981">Token</span>&nbsp;<span class="op" id="4786987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4786990">if</span>&nbsp;<span class="ident" id="4786993">s</span><span class="op" id="4786994">.</span><span class="ident" id="4786995">ch</span>&nbsp;<span class="op" id="4786998">==</span>&nbsp;<span class="string" id="4787001">&#39;=&#39;</span>&nbsp;<span class="op" id="4787005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787009">s</span><span class="op" id="4787010">.</span><span class="ident" id="4787011">next</span><span class="op" id="4787015">(</span><span class="op" id="4787016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787020">return</span>&nbsp;<span class="ident" id="4787027">tok1</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4787033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787036">return</span>&nbsp;<span class="ident" id="4787043">tok0</span><br>
<span class="lineno"></span><span class="op" id="4787048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4787051">func</span>&nbsp;<span class="op" id="4787056">(</span><span class="ident" id="4787057">s</span>&nbsp;<span class="op" id="4787059">*</span><span class="ident" id="4787060">Scanner</span><span class="op" id="4787067">)</span>&nbsp;<span class="ident" id="4787069">switch3</span><span class="op" id="4787076">(</span><span class="ident" id="4787077">tok0</span><span class="op" id="4787081">,</span>&nbsp;<span class="ident" id="4787083">tok1</span>&nbsp;<span class="ident" id="4787088">token</span><span class="op" id="4787093">.</span><span class="ident" id="4787094">Token</span><span class="op" id="4787099">,</span>&nbsp;<span class="ident" id="4787101">ch2</span>&nbsp;<span class="builtintype" id="4787105">rune</span><span class="op" id="4787109">,</span>&nbsp;<span class="ident" id="4787111">tok2</span>&nbsp;<span class="ident" id="4787116">token</span><span class="op" id="4787121">.</span><span class="ident" id="4787122">Token</span><span class="op" id="4787127">)</span>&nbsp;<span class="ident" id="4787129">token</span><span class="op" id="4787134">.</span><span class="ident" id="4787135">Token</span>&nbsp;<span class="op" id="4787141">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787144">if</span>&nbsp;<span class="ident" id="4787147">s</span><span class="op" id="4787148">.</span><span class="ident" id="4787149">ch</span>&nbsp;<span class="op" id="4787152">==</span>&nbsp;<span class="string" id="4787155">&#39;=&#39;</span>&nbsp;<span class="op" id="4787159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787163">s</span><span class="op" id="4787164">.</span><span class="ident" id="4787165">next</span><span class="op" id="4787169">(</span><span class="op" id="4787170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787174">return</span>&nbsp;<span class="ident" id="4787181">tok1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4787187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787190">if</span>&nbsp;<span class="ident" id="4787193">s</span><span class="op" id="4787194">.</span><span class="ident" id="4787195">ch</span>&nbsp;<span class="op" id="4787198">==</span>&nbsp;<span class="ident" id="4787201">ch2</span>&nbsp;<span class="op" id="4787205">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787209">s</span><span class="op" id="4787210">.</span><span class="ident" id="4787211">next</span><span class="op" id="4787215">(</span><span class="op" id="4787216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787220">return</span>&nbsp;<span class="ident" id="4787227">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4787233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787236">return</span>&nbsp;<span class="ident" id="4787243">tok0</span><br>
<span class="lineno"></span><span class="op" id="4787248">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="keyword" id="4787251">func</span>&nbsp;<span class="op" id="4787256">(</span><span class="ident" id="4787257">s</span>&nbsp;<span class="op" id="4787259">*</span><span class="ident" id="4787260">Scanner</span><span class="op" id="4787267">)</span>&nbsp;<span class="ident" id="4787269">switch4</span><span class="op" id="4787276">(</span><span class="ident" id="4787277">tok0</span><span class="op" id="4787281">,</span>&nbsp;<span class="ident" id="4787283">tok1</span>&nbsp;<span class="ident" id="4787288">token</span><span class="op" id="4787293">.</span><span class="ident" id="4787294">Token</span><span class="op" id="4787299">,</span>&nbsp;<span class="ident" id="4787301">ch2</span>&nbsp;<span class="builtintype" id="4787305">rune</span><span class="op" id="4787309">,</span>&nbsp;<span class="ident" id="4787311">tok2</span><span class="op" id="4787315">,</span>&nbsp;<span class="ident" id="4787317">tok3</span>&nbsp;<span class="ident" id="4787322">token</span><span class="op" id="4787327">.</span><span class="ident" id="4787328">Token</span><span class="op" id="4787333">)</span>&nbsp;<span class="ident" id="4787335">token</span><span class="op" id="4787340">.</span><span class="ident" id="4787341">Token</span>&nbsp;<span class="op" id="4787347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787350">if</span>&nbsp;<span class="ident" id="4787353">s</span><span class="op" id="4787354">.</span><span class="ident" id="4787355">ch</span>&nbsp;<span class="op" id="4787358">==</span>&nbsp;<span class="string" id="4787361">&#39;=&#39;</span>&nbsp;<span class="op" id="4787365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787369">s</span><span class="op" id="4787370">.</span><span class="ident" id="4787371">next</span><span class="op" id="4787375">(</span><span class="op" id="4787376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787380">return</span>&nbsp;<span class="ident" id="4787387">tok1</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4787393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787396">if</span>&nbsp;<span class="ident" id="4787399">s</span><span class="op" id="4787400">.</span><span class="ident" id="4787401">ch</span>&nbsp;<span class="op" id="4787404">==</span>&nbsp;<span class="ident" id="4787407">ch2</span>&nbsp;<span class="op" id="4787411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787415">s</span><span class="op" id="4787416">.</span><span class="ident" id="4787417">next</span><span class="op" id="4787421">(</span><span class="op" id="4787422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787426">if</span>&nbsp;<span class="ident" id="4787429">s</span><span class="op" id="4787430">.</span><span class="ident" id="4787431">ch</span>&nbsp;<span class="op" id="4787434">==</span>&nbsp;<span class="string" id="4787437">&#39;=&#39;</span>&nbsp;<span class="op" id="4787441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4787446">s</span><span class="op" id="4787447">.</span><span class="ident" id="4787448">next</span><span class="op" id="4787452">(</span><span class="op" id="4787453">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787458">return</span>&nbsp;<span class="ident" id="4787465">tok3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4787472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787476">return</span>&nbsp;<span class="ident" id="4787483">tok2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4787489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4787492">return</span>&nbsp;<span class="ident" id="4787499">tok0</span><br>
<span class="lineno">565</span><span class="op" id="4787504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4787507">//&nbsp;Scan&nbsp;scans&nbsp;the&nbsp;next&nbsp;token&nbsp;and&nbsp;returns&nbsp;the&nbsp;token&nbsp;position,&nbsp;the&nbsp;token,</span><br>
<span class="lineno"></span><span class="comment" id="4787579">//&nbsp;and&nbsp;its&nbsp;literal&nbsp;string&nbsp;if&nbsp;applicable.&nbsp;The&nbsp;source&nbsp;end&nbsp;is&nbsp;indicated&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="4787651">//&nbsp;token.EOF.</span><br>
<span class="lineno">570</span><span class="comment" id="4787665">//</span><br>
<span class="lineno"></span><span class="comment" id="4787668">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;literal&nbsp;(token.IDENT,&nbsp;token.INT,&nbsp;token.FLOAT,</span><br>
<span class="lineno"></span><span class="comment" id="4787744">//&nbsp;token.IMAG,&nbsp;token.CHAR,&nbsp;token.STRING)&nbsp;or&nbsp;token.COMMENT,&nbsp;the&nbsp;literal&nbsp;string</span><br>
<span class="lineno"></span><span class="comment" id="4787822">//&nbsp;has&nbsp;the&nbsp;corresponding&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="4787854">//</span><br>
<span class="lineno">575</span><span class="comment" id="4787857">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;a&nbsp;keyword,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the&nbsp;keyword.</span><br>
<span class="lineno"></span><span class="comment" id="4787931">//</span><br>
<span class="lineno"></span><span class="comment" id="4787934">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.SEMICOLON,&nbsp;the&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="4787997">//&nbsp;literal&nbsp;string&nbsp;is&nbsp;&#34;;&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;present&nbsp;in&nbsp;the&nbsp;source,</span><br>
<span class="lineno"></span><span class="comment" id="4788066">//&nbsp;and&nbsp;&#34;\n&#34;&nbsp;if&nbsp;the&nbsp;semicolon&nbsp;was&nbsp;inserted&nbsp;because&nbsp;of&nbsp;a&nbsp;newline&nbsp;or</span><br>
<span class="lineno">580</span><span class="comment" id="4788132">//&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno"></span><span class="comment" id="4788143">//</span><br>
<span class="lineno"></span><span class="comment" id="4788146">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;token&nbsp;is&nbsp;token.ILLEGAL,&nbsp;the&nbsp;literal&nbsp;string&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4788215">//&nbsp;offending&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="4788239">//</span><br>
<span class="lineno">585</span><span class="comment" id="4788242">//&nbsp;In&nbsp;all&nbsp;other&nbsp;cases,&nbsp;Scan&nbsp;returns&nbsp;an&nbsp;empty&nbsp;literal&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="4788303">//</span><br>
<span class="lineno"></span><span class="comment" id="4788306">//&nbsp;For&nbsp;more&nbsp;tolerant&nbsp;parsing,&nbsp;Scan&nbsp;will&nbsp;return&nbsp;a&nbsp;valid&nbsp;token&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="4788370">//&nbsp;possible&nbsp;even&nbsp;if&nbsp;a&nbsp;syntax&nbsp;error&nbsp;was&nbsp;encountered.&nbsp;Thus,&nbsp;even</span><br>
<span class="lineno"></span><span class="comment" id="4788433">//&nbsp;if&nbsp;the&nbsp;resulting&nbsp;token&nbsp;sequence&nbsp;contains&nbsp;no&nbsp;illegal&nbsp;tokens,</span><br>
<span class="lineno">590</span><span class="comment" id="4788496">//&nbsp;a&nbsp;client&nbsp;may&nbsp;not&nbsp;assume&nbsp;that&nbsp;no&nbsp;error&nbsp;occurred.&nbsp;Instead&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="4788558">//&nbsp;must&nbsp;check&nbsp;the&nbsp;scanner&#39;s&nbsp;ErrorCount&nbsp;or&nbsp;the&nbsp;number&nbsp;of&nbsp;calls</span><br>
<span class="lineno"></span><span class="comment" id="4788620">//&nbsp;of&nbsp;the&nbsp;error&nbsp;handler,&nbsp;if&nbsp;there&nbsp;was&nbsp;one&nbsp;installed.</span><br>
<span class="lineno"></span><span class="comment" id="4788673">//</span><br>
<span class="lineno"></span><span class="comment" id="4788676">//&nbsp;Scan&nbsp;adds&nbsp;line&nbsp;information&nbsp;to&nbsp;the&nbsp;file&nbsp;added&nbsp;to&nbsp;the&nbsp;file</span><br>
<span class="lineno">595</span><span class="comment" id="4788736">//&nbsp;set&nbsp;with&nbsp;Init.&nbsp;Token&nbsp;positions&nbsp;are&nbsp;relative&nbsp;to&nbsp;that&nbsp;file</span><br>
<span class="lineno"></span><span class="comment" id="4788796">//&nbsp;and&nbsp;thus&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set.</span><br>
<span class="lineno"></span><span class="comment" id="4788834">//</span><br>
<span class="lineno"></span><span class="keyword" id="4788837">func</span>&nbsp;<span class="op" id="4788842">(</span><span class="ident" id="4788843">s</span>&nbsp;<span class="op" id="4788845">*</span><span class="ident" id="4788846">Scanner</span><span class="op" id="4788853">)</span>&nbsp;<span class="ident" id="4788855">Scan</span><span class="op" id="4788859">(</span><span class="op" id="4788860">)</span>&nbsp;<span class="op" id="4788862">(</span><span class="ident" id="4788863">pos</span>&nbsp;<span class="ident" id="4788867">token</span><span class="op" id="4788872">.</span><span class="ident" id="4788873">Pos</span><span class="op" id="4788876">,</span>&nbsp;<span class="ident" id="4788878">tok</span>&nbsp;<span class="ident" id="4788882">token</span><span class="op" id="4788887">.</span><span class="ident" id="4788888">Token</span><span class="op" id="4788893">,</span>&nbsp;<span class="ident" id="4788895">lit</span>&nbsp;<span class="builtintype" id="4788899">string</span><span class="op" id="4788905">)</span>&nbsp;<span class="op" id="4788907">{</span><br>
<span class="lineno"></span><span class="ident" id="4788909">scanAgain</span><span class="op" id="4788918">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788921">s</span><span class="op" id="4788922">.</span><span class="ident" id="4788923">skipWhitespace</span><span class="op" id="4788937">(</span><span class="op" id="4788938">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4788942">//&nbsp;current&nbsp;token&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4788966">pos</span>&nbsp;<span class="op" id="4788970">=</span>&nbsp;<span class="ident" id="4788972">s</span><span class="op" id="4788973">.</span><span class="ident" id="4788974">file</span><span class="op" id="4788978">.</span><span class="ident" id="4788979">Pos</span><span class="op" id="4788982">(</span><span class="ident" id="4788983">s</span><span class="op" id="4788984">.</span><span class="ident" id="4788985">offset</span><span class="op" id="4788991">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4788995">//&nbsp;determine&nbsp;token&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789021">insertSemi</span>&nbsp;<span class="op" id="4789032">:=</span>&nbsp;<span class="builtintype" id="4789035">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789042">switch</span>&nbsp;<span class="ident" id="4789049">ch</span>&nbsp;<span class="op" id="4789052">:=</span>&nbsp;<span class="ident" id="4789055">s</span><span class="op" id="4789056">.</span><span class="ident" id="4789057">ch</span><span class="op" id="4789059">;</span>&nbsp;<span class="op" id="4789061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789064">case</span>&nbsp;<span class="ident" id="4789069">isLetter</span><span class="op" id="4789077">(</span><span class="ident" id="4789078">ch</span><span class="op" id="4789080">)</span><span class="op" id="4789081">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789085">lit</span>&nbsp;<span class="op" id="4789089">=</span>&nbsp;<span class="ident" id="4789091">s</span><span class="op" id="4789092">.</span><span class="ident" id="4789093">scanIdentifier</span><span class="op" id="4789107">(</span><span class="op" id="4789108">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789112">if</span>&nbsp;<span class="builtinfunc" id="4789115">len</span><span class="op" id="4789118">(</span><span class="ident" id="4789119">lit</span><span class="op" id="4789122">)</span>&nbsp;<span class="op" id="4789124">&gt;</span>&nbsp;<span class="num" id="4789126">1</span>&nbsp;<span class="op" id="4789128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4789133">//&nbsp;keywords&nbsp;are&nbsp;longer&nbsp;than&nbsp;one&nbsp;letter&nbsp;-&nbsp;avoid&nbsp;lookup&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789200">tok</span>&nbsp;<span class="op" id="4789204">=</span>&nbsp;<span class="ident" id="4789206">token</span><span class="op" id="4789211">.</span><span class="ident" id="4789212">Lookup</span><span class="op" id="4789218">(</span><span class="ident" id="4789219">lit</span><span class="op" id="4789222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789227">switch</span>&nbsp;<span class="ident" id="4789234">tok</span>&nbsp;<span class="op" id="4789238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789243">case</span>&nbsp;<span class="ident" id="4789248">token</span><span class="op" id="4789253">.</span><span class="ident" id="4789254">IDENT</span><span class="op" id="4789259">,</span>&nbsp;<span class="ident" id="4789261">token</span><span class="op" id="4789266">.</span><span class="ident" id="4789267">BREAK</span><span class="op" id="4789272">,</span>&nbsp;<span class="ident" id="4789274">token</span><span class="op" id="4789279">.</span><span class="ident" id="4789280">CONTINUE</span><span class="op" id="4789288">,</span>&nbsp;<span class="ident" id="4789290">token</span><span class="op" id="4789295">.</span><span class="ident" id="4789296">FALLTHROUGH</span><span class="op" id="4789307">,</span>&nbsp;<span class="ident" id="4789309">token</span><span class="op" id="4789314">.</span><span class="ident" id="4789315">RETURN</span><span class="op" id="4789321">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789327">insertSemi</span>&nbsp;<span class="op" id="4789338">=</span>&nbsp;<span class="builtintype" id="4789340">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789352">}</span>&nbsp;<span class="keyword" id="4789354">else</span>&nbsp;<span class="op" id="4789359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789364">insertSemi</span>&nbsp;<span class="op" id="4789375">=</span>&nbsp;<span class="builtintype" id="4789377">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789385">tok</span>&nbsp;<span class="op" id="4789389">=</span>&nbsp;<span class="ident" id="4789391">token</span><span class="op" id="4789396">.</span><span class="ident" id="4789397">IDENT</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789408">case</span>&nbsp;<span class="string" id="4789413">&#39;0&#39;</span>&nbsp;<span class="op" id="4789417">&lt;=</span>&nbsp;<span class="ident" id="4789420">ch</span>&nbsp;<span class="op" id="4789423">&amp;&amp;</span>&nbsp;<span class="ident" id="4789426">ch</span>&nbsp;<span class="op" id="4789429">&lt;=</span>&nbsp;<span class="string" id="4789432">&#39;9&#39;</span><span class="op" id="4789435">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789439">insertSemi</span>&nbsp;<span class="op" id="4789450">=</span>&nbsp;<span class="builtintype" id="4789452">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789459">tok</span><span class="op" id="4789462">,</span>&nbsp;<span class="ident" id="4789464">lit</span>&nbsp;<span class="op" id="4789468">=</span>&nbsp;<span class="ident" id="4789470">s</span><span class="op" id="4789471">.</span><span class="ident" id="4789472">scanNumber</span><span class="op" id="4789482">(</span><span class="builtintype" id="4789483">false</span><span class="op" id="4789488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789491">default</span><span class="op" id="4789498">:</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789502">s</span><span class="op" id="4789503">.</span><span class="ident" id="4789504">next</span><span class="op" id="4789508">(</span><span class="op" id="4789509">)</span>&nbsp;<span class="comment" id="4789511">//&nbsp;always&nbsp;make&nbsp;progress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789537">switch</span>&nbsp;<span class="ident" id="4789544">ch</span>&nbsp;<span class="op" id="4789547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789551">case</span>&nbsp;<span class="op" id="4789556">-</span><span class="num" id="4789557">1</span><span class="op" id="4789558">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789563">if</span>&nbsp;<span class="ident" id="4789566">s</span><span class="op" id="4789567">.</span><span class="ident" id="4789568">insertSemi</span>&nbsp;<span class="op" id="4789579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789585">s</span><span class="op" id="4789586">.</span><span class="ident" id="4789587">insertSemi</span>&nbsp;<span class="op" id="4789598">=</span>&nbsp;<span class="builtintype" id="4789600">false</span>&nbsp;<span class="comment" id="4789606">//&nbsp;EOF&nbsp;consumed</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789626">return</span>&nbsp;<span class="ident" id="4789633">pos</span><span class="op" id="4789636">,</span>&nbsp;<span class="ident" id="4789638">token</span><span class="op" id="4789643">.</span><span class="ident" id="4789644">SEMICOLON</span><span class="op" id="4789653">,</span>&nbsp;<span class="string" id="4789655">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4789663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789668">tok</span>&nbsp;<span class="op" id="4789672">=</span>&nbsp;<span class="ident" id="4789674">token</span><span class="op" id="4789679">.</span><span class="ident" id="4789680">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789686">case</span>&nbsp;<span class="string" id="4789691">&#39;\n&#39;</span><span class="op" id="4789695">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4789700">//&nbsp;we&nbsp;only&nbsp;reach&nbsp;here&nbsp;if&nbsp;s.insertSemi&nbsp;was</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4789745">//&nbsp;set&nbsp;in&nbsp;the&nbsp;first&nbsp;place&nbsp;and&nbsp;exited&nbsp;early</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4789791">//&nbsp;from&nbsp;s.skipWhitespace()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789821">s</span><span class="op" id="4789822">.</span><span class="ident" id="4789823">insertSemi</span>&nbsp;<span class="op" id="4789834">=</span>&nbsp;<span class="builtintype" id="4789836">false</span>&nbsp;<span class="comment" id="4789842">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789865">return</span>&nbsp;<span class="ident" id="4789872">pos</span><span class="op" id="4789875">,</span>&nbsp;<span class="ident" id="4789877">token</span><span class="op" id="4789882">.</span><span class="ident" id="4789883">SEMICOLON</span><span class="op" id="4789892">,</span>&nbsp;<span class="string" id="4789894">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789901">case</span>&nbsp;<span class="string" id="4789906">&#39;&#34;&#39;</span><span class="op" id="4789909">:</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789914">insertSemi</span>&nbsp;<span class="op" id="4789925">=</span>&nbsp;<span class="builtintype" id="4789927">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789935">tok</span>&nbsp;<span class="op" id="4789939">=</span>&nbsp;<span class="ident" id="4789941">token</span><span class="op" id="4789946">.</span><span class="ident" id="4789947">STRING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789957">lit</span>&nbsp;<span class="op" id="4789961">=</span>&nbsp;<span class="ident" id="4789963">s</span><span class="op" id="4789964">.</span><span class="ident" id="4789965">scanString</span><span class="op" id="4789975">(</span><span class="op" id="4789976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4789980">case</span>&nbsp;<span class="string" id="4789985">&#39;\&#39;&#39;</span><span class="op" id="4789989">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4789994">insertSemi</span>&nbsp;<span class="op" id="4790005">=</span>&nbsp;<span class="builtintype" id="4790007">true</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790015">tok</span>&nbsp;<span class="op" id="4790019">=</span>&nbsp;<span class="ident" id="4790021">token</span><span class="op" id="4790026">.</span><span class="ident" id="4790027">CHAR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790035">lit</span>&nbsp;<span class="op" id="4790039">=</span>&nbsp;<span class="ident" id="4790041">s</span><span class="op" id="4790042">.</span><span class="ident" id="4790043">scanRune</span><span class="op" id="4790051">(</span><span class="op" id="4790052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790056">case</span>&nbsp;<span class="string" id="4790061">&#39;`&#39;</span><span class="op" id="4790064">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790069">insertSemi</span>&nbsp;<span class="op" id="4790080">=</span>&nbsp;<span class="builtintype" id="4790082">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790090">tok</span>&nbsp;<span class="op" id="4790094">=</span>&nbsp;<span class="ident" id="4790096">token</span><span class="op" id="4790101">.</span><span class="ident" id="4790102">STRING</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790112">lit</span>&nbsp;<span class="op" id="4790116">=</span>&nbsp;<span class="ident" id="4790118">s</span><span class="op" id="4790119">.</span><span class="ident" id="4790120">scanRawString</span><span class="op" id="4790133">(</span><span class="op" id="4790134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790138">case</span>&nbsp;<span class="string" id="4790143">&#39;:&#39;</span><span class="op" id="4790146">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790151">tok</span>&nbsp;<span class="op" id="4790155">=</span>&nbsp;<span class="ident" id="4790157">s</span><span class="op" id="4790158">.</span><span class="ident" id="4790159">switch2</span><span class="op" id="4790166">(</span><span class="ident" id="4790167">token</span><span class="op" id="4790172">.</span><span class="ident" id="4790173">COLON</span><span class="op" id="4790178">,</span>&nbsp;<span class="ident" id="4790180">token</span><span class="op" id="4790185">.</span><span class="ident" id="4790186">DEFINE</span><span class="op" id="4790192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790196">case</span>&nbsp;<span class="string" id="4790201">&#39;.&#39;</span><span class="op" id="4790204">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790209">if</span>&nbsp;<span class="string" id="4790212">&#39;0&#39;</span>&nbsp;<span class="op" id="4790216">&lt;=</span>&nbsp;<span class="ident" id="4790219">s</span><span class="op" id="4790220">.</span><span class="ident" id="4790221">ch</span>&nbsp;<span class="op" id="4790224">&amp;&amp;</span>&nbsp;<span class="ident" id="4790227">s</span><span class="op" id="4790228">.</span><span class="ident" id="4790229">ch</span>&nbsp;<span class="op" id="4790232">&lt;=</span>&nbsp;<span class="string" id="4790235">&#39;9&#39;</span>&nbsp;<span class="op" id="4790239">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790245">insertSemi</span>&nbsp;<span class="op" id="4790256">=</span>&nbsp;<span class="builtintype" id="4790258">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790267">tok</span><span class="op" id="4790270">,</span>&nbsp;<span class="ident" id="4790272">lit</span>&nbsp;<span class="op" id="4790276">=</span>&nbsp;<span class="ident" id="4790278">s</span><span class="op" id="4790279">.</span><span class="ident" id="4790280">scanNumber</span><span class="op" id="4790290">(</span><span class="builtintype" id="4790291">true</span><span class="op" id="4790295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790300">}</span>&nbsp;<span class="keyword" id="4790302">else</span>&nbsp;<span class="keyword" id="4790307">if</span>&nbsp;<span class="ident" id="4790310">s</span><span class="op" id="4790311">.</span><span class="ident" id="4790312">ch</span>&nbsp;<span class="op" id="4790315">==</span>&nbsp;<span class="string" id="4790318">&#39;.&#39;</span>&nbsp;<span class="op" id="4790322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790328">s</span><span class="op" id="4790329">.</span><span class="ident" id="4790330">next</span><span class="op" id="4790334">(</span><span class="op" id="4790335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790341">if</span>&nbsp;<span class="ident" id="4790344">s</span><span class="op" id="4790345">.</span><span class="ident" id="4790346">ch</span>&nbsp;<span class="op" id="4790349">==</span>&nbsp;<span class="string" id="4790352">&#39;.&#39;</span>&nbsp;<span class="op" id="4790356">{</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790363">s</span><span class="op" id="4790364">.</span><span class="ident" id="4790365">next</span><span class="op" id="4790369">(</span><span class="op" id="4790370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790377">tok</span>&nbsp;<span class="op" id="4790381">=</span>&nbsp;<span class="ident" id="4790383">token</span><span class="op" id="4790388">.</span><span class="ident" id="4790389">ELLIPSIS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790407">}</span>&nbsp;<span class="keyword" id="4790409">else</span>&nbsp;<span class="op" id="4790414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790420">tok</span>&nbsp;<span class="op" id="4790424">=</span>&nbsp;<span class="ident" id="4790426">token</span><span class="op" id="4790431">.</span><span class="ident" id="4790432">PERIOD</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790442">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790446">case</span>&nbsp;<span class="string" id="4790451">&#39;,&#39;</span><span class="op" id="4790454">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790459">tok</span>&nbsp;<span class="op" id="4790463">=</span>&nbsp;<span class="ident" id="4790465">token</span><span class="op" id="4790470">.</span><span class="ident" id="4790471">COMMA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790479">case</span>&nbsp;<span class="string" id="4790484">&#39;;&#39;</span><span class="op" id="4790487">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790492">tok</span>&nbsp;<span class="op" id="4790496">=</span>&nbsp;<span class="ident" id="4790498">token</span><span class="op" id="4790503">.</span><span class="ident" id="4790504">SEMICOLON</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790517">lit</span>&nbsp;<span class="op" id="4790521">=</span>&nbsp;<span class="string" id="4790523">&#34;;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790529">case</span>&nbsp;<span class="string" id="4790534">&#39;(&#39;</span><span class="op" id="4790537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790542">tok</span>&nbsp;<span class="op" id="4790546">=</span>&nbsp;<span class="ident" id="4790548">token</span><span class="op" id="4790553">.</span><span class="ident" id="4790554">LPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790563">case</span>&nbsp;<span class="string" id="4790568">&#39;)&#39;</span><span class="op" id="4790571">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790576">insertSemi</span>&nbsp;<span class="op" id="4790587">=</span>&nbsp;<span class="builtintype" id="4790589">true</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790597">tok</span>&nbsp;<span class="op" id="4790601">=</span>&nbsp;<span class="ident" id="4790603">token</span><span class="op" id="4790608">.</span><span class="ident" id="4790609">RPAREN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790618">case</span>&nbsp;<span class="string" id="4790623">&#39;[&#39;</span><span class="op" id="4790626">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790631">tok</span>&nbsp;<span class="op" id="4790635">=</span>&nbsp;<span class="ident" id="4790637">token</span><span class="op" id="4790642">.</span><span class="ident" id="4790643">LBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790652">case</span>&nbsp;<span class="string" id="4790657">&#39;]&#39;</span><span class="op" id="4790660">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790665">insertSemi</span>&nbsp;<span class="op" id="4790676">=</span>&nbsp;<span class="builtintype" id="4790678">true</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790686">tok</span>&nbsp;<span class="op" id="4790690">=</span>&nbsp;<span class="ident" id="4790692">token</span><span class="op" id="4790697">.</span><span class="ident" id="4790698">RBRACK</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790707">case</span>&nbsp;<span class="string" id="4790712">&#39;{&#39;</span><span class="op" id="4790715">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790720">tok</span>&nbsp;<span class="op" id="4790724">=</span>&nbsp;<span class="ident" id="4790726">token</span><span class="op" id="4790731">.</span><span class="ident" id="4790732">LBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790741">case</span>&nbsp;<span class="string" id="4790746">&#39;}&#39;</span><span class="op" id="4790749">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790754">insertSemi</span>&nbsp;<span class="op" id="4790765">=</span>&nbsp;<span class="builtintype" id="4790767">true</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790775">tok</span>&nbsp;<span class="op" id="4790779">=</span>&nbsp;<span class="ident" id="4790781">token</span><span class="op" id="4790786">.</span><span class="ident" id="4790787">RBRACE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790796">case</span>&nbsp;<span class="string" id="4790801">&#39;+&#39;</span><span class="op" id="4790804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790809">tok</span>&nbsp;<span class="op" id="4790813">=</span>&nbsp;<span class="ident" id="4790815">s</span><span class="op" id="4790816">.</span><span class="ident" id="4790817">switch3</span><span class="op" id="4790824">(</span><span class="ident" id="4790825">token</span><span class="op" id="4790830">.</span><span class="ident" id="4790831">ADD</span><span class="op" id="4790834">,</span>&nbsp;<span class="ident" id="4790836">token</span><span class="op" id="4790841">.</span><span class="ident" id="4790842">ADD_ASSIGN</span><span class="op" id="4790852">,</span>&nbsp;<span class="string" id="4790854">&#39;+&#39;</span><span class="op" id="4790857">,</span>&nbsp;<span class="ident" id="4790859">token</span><span class="op" id="4790864">.</span><span class="ident" id="4790865">INC</span><span class="op" id="4790868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790873">if</span>&nbsp;<span class="ident" id="4790876">tok</span>&nbsp;<span class="op" id="4790880">==</span>&nbsp;<span class="ident" id="4790883">token</span><span class="op" id="4790888">.</span><span class="ident" id="4790889">INC</span>&nbsp;<span class="op" id="4790893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790899">insertSemi</span>&nbsp;<span class="op" id="4790910">=</span>&nbsp;<span class="builtintype" id="4790912">true</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4790920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4790924">case</span>&nbsp;<span class="string" id="4790929">&#39;-&#39;</span><span class="op" id="4790932">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4790937">tok</span>&nbsp;<span class="op" id="4790941">=</span>&nbsp;<span class="ident" id="4790943">s</span><span class="op" id="4790944">.</span><span class="ident" id="4790945">switch3</span><span class="op" id="4790952">(</span><span class="ident" id="4790953">token</span><span class="op" id="4790958">.</span><span class="ident" id="4790959">SUB</span><span class="op" id="4790962">,</span>&nbsp;<span class="ident" id="4790964">token</span><span class="op" id="4790969">.</span><span class="ident" id="4790970">SUB_ASSIGN</span><span class="op" id="4790980">,</span>&nbsp;<span class="string" id="4790982">&#39;-&#39;</span><span class="op" id="4790985">,</span>&nbsp;<span class="ident" id="4790987">token</span><span class="op" id="4790992">.</span><span class="ident" id="4790993">DEC</span><span class="op" id="4790996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791001">if</span>&nbsp;<span class="ident" id="4791004">tok</span>&nbsp;<span class="op" id="4791008">==</span>&nbsp;<span class="ident" id="4791011">token</span><span class="op" id="4791016">.</span><span class="ident" id="4791017">DEC</span>&nbsp;<span class="op" id="4791021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791027">insertSemi</span>&nbsp;<span class="op" id="4791038">=</span>&nbsp;<span class="builtintype" id="4791040">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4791048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791052">case</span>&nbsp;<span class="string" id="4791057">&#39;*&#39;</span><span class="op" id="4791060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791065">tok</span>&nbsp;<span class="op" id="4791069">=</span>&nbsp;<span class="ident" id="4791071">s</span><span class="op" id="4791072">.</span><span class="ident" id="4791073">switch2</span><span class="op" id="4791080">(</span><span class="ident" id="4791081">token</span><span class="op" id="4791086">.</span><span class="ident" id="4791087">MUL</span><span class="op" id="4791090">,</span>&nbsp;<span class="ident" id="4791092">token</span><span class="op" id="4791097">.</span><span class="ident" id="4791098">MUL_ASSIGN</span><span class="op" id="4791108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791112">case</span>&nbsp;<span class="string" id="4791117">&#39;/&#39;</span><span class="op" id="4791120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791125">if</span>&nbsp;<span class="ident" id="4791128">s</span><span class="op" id="4791129">.</span><span class="ident" id="4791130">ch</span>&nbsp;<span class="op" id="4791133">==</span>&nbsp;<span class="string" id="4791136">&#39;/&#39;</span>&nbsp;<span class="op" id="4791140">||</span>&nbsp;<span class="ident" id="4791143">s</span><span class="op" id="4791144">.</span><span class="ident" id="4791145">ch</span>&nbsp;<span class="op" id="4791148">==</span>&nbsp;<span class="string" id="4791151">&#39;*&#39;</span>&nbsp;<span class="op" id="4791155">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4791161">//&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791176">if</span>&nbsp;<span class="ident" id="4791179">s</span><span class="op" id="4791180">.</span><span class="ident" id="4791181">insertSemi</span>&nbsp;<span class="op" id="4791192">&amp;&amp;</span>&nbsp;<span class="ident" id="4791195">s</span><span class="op" id="4791196">.</span><span class="ident" id="4791197">findLineEnd</span><span class="op" id="4791208">(</span><span class="op" id="4791209">)</span>&nbsp;<span class="op" id="4791211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4791218">//&nbsp;reset&nbsp;position&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791273">s</span><span class="op" id="4791274">.</span><span class="ident" id="4791275">ch</span>&nbsp;<span class="op" id="4791278">=</span>&nbsp;<span class="string" id="4791280">&#39;/&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791289">s</span><span class="op" id="4791290">.</span><span class="ident" id="4791291">offset</span>&nbsp;<span class="op" id="4791298">=</span>&nbsp;<span class="ident" id="4791300">s</span><span class="op" id="4791301">.</span><span class="ident" id="4791302">file</span><span class="op" id="4791306">.</span><span class="ident" id="4791307">Offset</span><span class="op" id="4791313">(</span><span class="ident" id="4791314">pos</span><span class="op" id="4791317">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791324">s</span><span class="op" id="4791325">.</span><span class="ident" id="4791326">rdOffset</span>&nbsp;<span class="op" id="4791335">=</span>&nbsp;<span class="ident" id="4791337">s</span><span class="op" id="4791338">.</span><span class="ident" id="4791339">offset</span>&nbsp;<span class="op" id="4791346">+</span>&nbsp;<span class="num" id="4791348">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791355">s</span><span class="op" id="4791356">.</span><span class="ident" id="4791357">insertSemi</span>&nbsp;<span class="op" id="4791368">=</span>&nbsp;<span class="builtintype" id="4791370">false</span>&nbsp;<span class="comment" id="4791376">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791401">return</span>&nbsp;<span class="ident" id="4791408">pos</span><span class="op" id="4791411">,</span>&nbsp;<span class="ident" id="4791413">token</span><span class="op" id="4791418">.</span><span class="ident" id="4791419">SEMICOLON</span><span class="op" id="4791428">,</span>&nbsp;<span class="string" id="4791430">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4791439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791445">lit</span>&nbsp;<span class="op" id="4791449">=</span>&nbsp;<span class="ident" id="4791451">s</span><span class="op" id="4791452">.</span><span class="ident" id="4791453">scanComment</span><span class="op" id="4791464">(</span><span class="op" id="4791465">)</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791471">if</span>&nbsp;<span class="ident" id="4791474">s</span><span class="op" id="4791475">.</span><span class="ident" id="4791476">mode</span><span class="op" id="4791480">&amp;</span><span class="ident" id="4791481">ScanComments</span>&nbsp;<span class="op" id="4791494">==</span>&nbsp;<span class="num" id="4791497">0</span>&nbsp;<span class="op" id="4791499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4791506">//&nbsp;skip&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791527">s</span><span class="op" id="4791528">.</span><span class="ident" id="4791529">insertSemi</span>&nbsp;<span class="op" id="4791540">=</span>&nbsp;<span class="builtintype" id="4791542">false</span>&nbsp;<span class="comment" id="4791548">//&nbsp;newline&nbsp;consumed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791573">goto</span>&nbsp;<span class="ident" id="4791578">scanAgain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4791592">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791598">tok</span>&nbsp;<span class="op" id="4791602">=</span>&nbsp;<span class="ident" id="4791604">token</span><span class="op" id="4791609">.</span><span class="ident" id="4791610">COMMENT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4791621">}</span>&nbsp;<span class="keyword" id="4791623">else</span>&nbsp;<span class="op" id="4791628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791634">tok</span>&nbsp;<span class="op" id="4791638">=</span>&nbsp;<span class="ident" id="4791640">s</span><span class="op" id="4791641">.</span><span class="ident" id="4791642">switch2</span><span class="op" id="4791649">(</span><span class="ident" id="4791650">token</span><span class="op" id="4791655">.</span><span class="ident" id="4791656">QUO</span><span class="op" id="4791659">,</span>&nbsp;<span class="ident" id="4791661">token</span><span class="op" id="4791666">.</span><span class="ident" id="4791667">QUO_ASSIGN</span><span class="op" id="4791677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4791682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791686">case</span>&nbsp;<span class="string" id="4791691">&#39;%&#39;</span><span class="op" id="4791694">:</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791699">tok</span>&nbsp;<span class="op" id="4791703">=</span>&nbsp;<span class="ident" id="4791705">s</span><span class="op" id="4791706">.</span><span class="ident" id="4791707">switch2</span><span class="op" id="4791714">(</span><span class="ident" id="4791715">token</span><span class="op" id="4791720">.</span><span class="ident" id="4791721">REM</span><span class="op" id="4791724">,</span>&nbsp;<span class="ident" id="4791726">token</span><span class="op" id="4791731">.</span><span class="ident" id="4791732">REM_ASSIGN</span><span class="op" id="4791742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791746">case</span>&nbsp;<span class="string" id="4791751">&#39;^&#39;</span><span class="op" id="4791754">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791759">tok</span>&nbsp;<span class="op" id="4791763">=</span>&nbsp;<span class="ident" id="4791765">s</span><span class="op" id="4791766">.</span><span class="ident" id="4791767">switch2</span><span class="op" id="4791774">(</span><span class="ident" id="4791775">token</span><span class="op" id="4791780">.</span><span class="ident" id="4791781">XOR</span><span class="op" id="4791784">,</span>&nbsp;<span class="ident" id="4791786">token</span><span class="op" id="4791791">.</span><span class="ident" id="4791792">XOR_ASSIGN</span><span class="op" id="4791802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791806">case</span>&nbsp;<span class="string" id="4791811">&#39;&lt;&#39;</span><span class="op" id="4791814">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791819">if</span>&nbsp;<span class="ident" id="4791822">s</span><span class="op" id="4791823">.</span><span class="ident" id="4791824">ch</span>&nbsp;<span class="op" id="4791827">==</span>&nbsp;<span class="string" id="4791830">&#39;-&#39;</span>&nbsp;<span class="op" id="4791834">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791840">s</span><span class="op" id="4791841">.</span><span class="ident" id="4791842">next</span><span class="op" id="4791846">(</span><span class="op" id="4791847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791853">tok</span>&nbsp;<span class="op" id="4791857">=</span>&nbsp;<span class="ident" id="4791859">token</span><span class="op" id="4791864">.</span><span class="ident" id="4791865">ARROW</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4791874">}</span>&nbsp;<span class="keyword" id="4791876">else</span>&nbsp;<span class="op" id="4791881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791887">tok</span>&nbsp;<span class="op" id="4791891">=</span>&nbsp;<span class="ident" id="4791893">s</span><span class="op" id="4791894">.</span><span class="ident" id="4791895">switch4</span><span class="op" id="4791902">(</span><span class="ident" id="4791903">token</span><span class="op" id="4791908">.</span><span class="ident" id="4791909">LSS</span><span class="op" id="4791912">,</span>&nbsp;<span class="ident" id="4791914">token</span><span class="op" id="4791919">.</span><span class="ident" id="4791920">LEQ</span><span class="op" id="4791923">,</span>&nbsp;<span class="string" id="4791925">&#39;&lt;&#39;</span><span class="op" id="4791928">,</span>&nbsp;<span class="ident" id="4791930">token</span><span class="op" id="4791935">.</span><span class="ident" id="4791936">SHL</span><span class="op" id="4791939">,</span>&nbsp;<span class="ident" id="4791941">token</span><span class="op" id="4791946">.</span><span class="ident" id="4791947">SHL_ASSIGN</span><span class="op" id="4791957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4791962">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4791966">case</span>&nbsp;<span class="string" id="4791971">&#39;&gt;&#39;</span><span class="op" id="4791974">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4791979">tok</span>&nbsp;<span class="op" id="4791983">=</span>&nbsp;<span class="ident" id="4791985">s</span><span class="op" id="4791986">.</span><span class="ident" id="4791987">switch4</span><span class="op" id="4791994">(</span><span class="ident" id="4791995">token</span><span class="op" id="4792000">.</span><span class="ident" id="4792001">GTR</span><span class="op" id="4792004">,</span>&nbsp;<span class="ident" id="4792006">token</span><span class="op" id="4792011">.</span><span class="ident" id="4792012">GEQ</span><span class="op" id="4792015">,</span>&nbsp;<span class="string" id="4792017">&#39;&gt;&#39;</span><span class="op" id="4792020">,</span>&nbsp;<span class="ident" id="4792022">token</span><span class="op" id="4792027">.</span><span class="ident" id="4792028">SHR</span><span class="op" id="4792031">,</span>&nbsp;<span class="ident" id="4792033">token</span><span class="op" id="4792038">.</span><span class="ident" id="4792039">SHR_ASSIGN</span><span class="op" id="4792049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4792053">case</span>&nbsp;<span class="string" id="4792058">&#39;=&#39;</span><span class="op" id="4792061">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792066">tok</span>&nbsp;<span class="op" id="4792070">=</span>&nbsp;<span class="ident" id="4792072">s</span><span class="op" id="4792073">.</span><span class="ident" id="4792074">switch2</span><span class="op" id="4792081">(</span><span class="ident" id="4792082">token</span><span class="op" id="4792087">.</span><span class="ident" id="4792088">ASSIGN</span><span class="op" id="4792094">,</span>&nbsp;<span class="ident" id="4792096">token</span><span class="op" id="4792101">.</span><span class="ident" id="4792102">EQL</span><span class="op" id="4792105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4792109">case</span>&nbsp;<span class="string" id="4792114">&#39;!&#39;</span><span class="op" id="4792117">:</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792122">tok</span>&nbsp;<span class="op" id="4792126">=</span>&nbsp;<span class="ident" id="4792128">s</span><span class="op" id="4792129">.</span><span class="ident" id="4792130">switch2</span><span class="op" id="4792137">(</span><span class="ident" id="4792138">token</span><span class="op" id="4792143">.</span><span class="ident" id="4792144">NOT</span><span class="op" id="4792147">,</span>&nbsp;<span class="ident" id="4792149">token</span><span class="op" id="4792154">.</span><span class="ident" id="4792155">NEQ</span><span class="op" id="4792158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4792162">case</span>&nbsp;<span class="string" id="4792167">&#39;&amp;&#39;</span><span class="op" id="4792170">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4792175">if</span>&nbsp;<span class="ident" id="4792178">s</span><span class="op" id="4792179">.</span><span class="ident" id="4792180">ch</span>&nbsp;<span class="op" id="4792183">==</span>&nbsp;<span class="string" id="4792186">&#39;^&#39;</span>&nbsp;<span class="op" id="4792190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792196">s</span><span class="op" id="4792197">.</span><span class="ident" id="4792198">next</span><span class="op" id="4792202">(</span><span class="op" id="4792203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792209">tok</span>&nbsp;<span class="op" id="4792213">=</span>&nbsp;<span class="ident" id="4792215">s</span><span class="op" id="4792216">.</span><span class="ident" id="4792217">switch2</span><span class="op" id="4792224">(</span><span class="ident" id="4792225">token</span><span class="op" id="4792230">.</span><span class="ident" id="4792231">AND_NOT</span><span class="op" id="4792238">,</span>&nbsp;<span class="ident" id="4792240">token</span><span class="op" id="4792245">.</span><span class="ident" id="4792246">AND_NOT_ASSIGN</span><span class="op" id="4792260">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4792265">}</span>&nbsp;<span class="keyword" id="4792267">else</span>&nbsp;<span class="op" id="4792272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792278">tok</span>&nbsp;<span class="op" id="4792282">=</span>&nbsp;<span class="ident" id="4792284">s</span><span class="op" id="4792285">.</span><span class="ident" id="4792286">switch3</span><span class="op" id="4792293">(</span><span class="ident" id="4792294">token</span><span class="op" id="4792299">.</span><span class="ident" id="4792300">AND</span><span class="op" id="4792303">,</span>&nbsp;<span class="ident" id="4792305">token</span><span class="op" id="4792310">.</span><span class="ident" id="4792311">AND_ASSIGN</span><span class="op" id="4792321">,</span>&nbsp;<span class="string" id="4792323">&#39;&amp;&#39;</span><span class="op" id="4792326">,</span>&nbsp;<span class="ident" id="4792328">token</span><span class="op" id="4792333">.</span><span class="ident" id="4792334">LAND</span><span class="op" id="4792338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4792343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4792347">case</span>&nbsp;<span class="string" id="4792352">&#39;|&#39;</span><span class="op" id="4792355">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792360">tok</span>&nbsp;<span class="op" id="4792364">=</span>&nbsp;<span class="ident" id="4792366">s</span><span class="op" id="4792367">.</span><span class="ident" id="4792368">switch3</span><span class="op" id="4792375">(</span><span class="ident" id="4792376">token</span><span class="op" id="4792381">.</span><span class="ident" id="4792382">OR</span><span class="op" id="4792384">,</span>&nbsp;<span class="ident" id="4792386">token</span><span class="op" id="4792391">.</span><span class="ident" id="4792392">OR_ASSIGN</span><span class="op" id="4792401">,</span>&nbsp;<span class="string" id="4792403">&#39;|&#39;</span><span class="op" id="4792406">,</span>&nbsp;<span class="ident" id="4792408">token</span><span class="op" id="4792413">.</span><span class="ident" id="4792414">LOR</span><span class="op" id="4792417">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4792421">default</span><span class="op" id="4792428">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4792433">//&nbsp;next&nbsp;reports&nbsp;unexpected&nbsp;BOMs&nbsp;-&nbsp;don&#39;t&nbsp;repeat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4792483">if</span>&nbsp;<span class="ident" id="4792486">ch</span>&nbsp;<span class="op" id="4792489">!=</span>&nbsp;<span class="ident" id="4792492">bom</span>&nbsp;<span class="op" id="4792496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792502">s</span><span class="op" id="4792503">.</span><span class="builtintype" id="4792504">error</span><span class="op" id="4792509">(</span><span class="ident" id="4792510">s</span><span class="op" id="4792511">.</span><span class="ident" id="4792512">file</span><span class="op" id="4792516">.</span><span class="ident" id="4792517">Offset</span><span class="op" id="4792523">(</span><span class="ident" id="4792524">pos</span><span class="op" id="4792527">)</span><span class="op" id="4792528">,</span>&nbsp;<span class="ident" id="4792530">fmt</span><span class="op" id="4792533">.</span><span class="ident" id="4792534">Sprintf</span><span class="op" id="4792541">(</span><span class="string" id="4792542">&#34;illegal&nbsp;character&nbsp;%#U&#34;</span><span class="op" id="4792565">,</span>&nbsp;<span class="ident" id="4792567">ch</span><span class="op" id="4792569">)</span><span class="op" id="4792570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4792575">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792580">insertSemi</span>&nbsp;<span class="op" id="4792591">=</span>&nbsp;<span class="ident" id="4792593">s</span><span class="op" id="4792594">.</span><span class="ident" id="4792595">insertSemi</span>&nbsp;<span class="comment" id="4792606">//&nbsp;preserve&nbsp;insertSemi&nbsp;info</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792637">tok</span>&nbsp;<span class="op" id="4792641">=</span>&nbsp;<span class="ident" id="4792643">token</span><span class="op" id="4792648">.</span><span class="ident" id="4792649">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792660">lit</span>&nbsp;<span class="op" id="4792664">=</span>&nbsp;<span class="builtintype" id="4792666">string</span><span class="op" id="4792672">(</span><span class="ident" id="4792673">ch</span><span class="op" id="4792675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4792679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4792682">}</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4792685">if</span>&nbsp;<span class="ident" id="4792688">s</span><span class="op" id="4792689">.</span><span class="ident" id="4792690">mode</span><span class="op" id="4792694">&amp;</span><span class="ident" id="4792695">dontInsertSemis</span>&nbsp;<span class="op" id="4792711">==</span>&nbsp;<span class="num" id="4792714">0</span>&nbsp;<span class="op" id="4792716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4792720">s</span><span class="op" id="4792721">.</span><span class="ident" id="4792722">insertSemi</span>&nbsp;<span class="op" id="4792733">=</span>&nbsp;<span class="ident" id="4792735">insertSemi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4792747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4792751">return</span><br>
<span class="lineno">760</span><span class="op" id="4792758">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
