<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6879471">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6879527">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6879581">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6879632">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="6879711">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6879720">package</span>&nbsp;<span class="ident" id="6879728">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6879733">import</span>&nbsp;<span class="op" id="6879740">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6879743">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6879749">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6879760">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6879771">&#34;testing&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6879782">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6879789">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6879792">func</span>&nbsp;<span class="ident" id="6879797">packetConnTestData</span><span class="op" id="6879815">(</span><span class="ident" id="6879816">t</span>&nbsp;<span class="op" id="6879818">*</span><span class="ident" id="6879819"><a href="/net/packetconn_test.go.html#6879771">testing</a></span><span class="op" id="6879826">.</span><span class="ident" id="6879827">T</span><span class="op" id="6879828">,</span>&nbsp;<span class="ident" id="6879830">net</span>&nbsp;<span class="builtintype" id="6879834">string</span><span class="op" id="6879840">,</span>&nbsp;<span class="ident" id="6879842">i</span>&nbsp;<span class="builtintype" id="6879844">int</span><span class="op" id="6879847">)</span>&nbsp;<span class="op" id="6879849">(</span><span class="op" id="6879850">[</span><span class="op" id="6879851">]</span><span class="builtintype" id="6879852">byte</span><span class="op" id="6879856">,</span>&nbsp;<span class="keyword" id="6879858">func</span><span class="op" id="6879862">(</span><span class="op" id="6879863">)</span><span class="op" id="6879864">)</span>&nbsp;<span class="op" id="6879866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6879869">switch</span>&nbsp;<span class="ident" id="6879876"><a href="/net/packetconn_test.go.html#6879830">net</a></span>&nbsp;<span class="op" id="6879880">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6879883">case</span>&nbsp;<span class="string" id="6879888">&#34;udp&#34;</span><span class="op" id="6879893">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6879897">return</span>&nbsp;<span class="op" id="6879904">[</span><span class="op" id="6879905">]</span><span class="builtintype" id="6879906">byte</span><span class="op" id="6879910">(</span><span class="string" id="6879911">&#34;UDP&nbsp;PACKETCONN&nbsp;TEST&#34;</span><span class="op" id="6879932">)</span><span class="op" id="6879933">,</span>&nbsp;<span class="ident" id="6879935">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6879940">case</span>&nbsp;<span class="string" id="6879945">&#34;ip&#34;</span><span class="op" id="6879949">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6879953">if</span>&nbsp;<span class="ident" id="6879956">skip</span><span class="op" id="6879960">,</span>&nbsp;<span class="ident" id="6879962">skipmsg</span>&nbsp;<span class="op" id="6879970">:=</span>&nbsp;<span class="ident" id="6879973"><a href="/net/ipraw_test.go.html#6846958">skipRawSocketTest</a></span><span class="op" id="6879990">(</span><span class="ident" id="6879991"><a href="/net/packetconn_test.go.html#6879816">t</a></span><span class="op" id="6879992">)</span><span class="op" id="6879993">;</span>&nbsp;<span class="ident" id="6879995"><a href="/net/packetconn_test.go.html#6879956">skip</a></span>&nbsp;<span class="op" id="6880000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880005">return</span>&nbsp;<span class="ident" id="6880012">nil</span><span class="op" id="6880015">,</span>&nbsp;<span class="keyword" id="6880017">func</span><span class="op" id="6880021">(</span><span class="op" id="6880022">)</span>&nbsp;<span class="op" id="6880024">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880030"><a href="/net/packetconn_test.go.html#6879816">t</a></span><span class="op" id="6880031">.</span><span class="ident" id="6880032">Logf</span><span class="op" id="6880036">(</span><span class="ident" id="6880037"><a href="/net/packetconn_test.go.html#6879962">skipmsg</a></span><span class="op" id="6880044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880057">b</span><span class="op" id="6880058">,</span>&nbsp;<span class="ident" id="6880060">err</span>&nbsp;<span class="op" id="6880064">:=</span>&nbsp;<span class="op" id="6880067">(</span><span class="op" id="6880068">&amp;</span><span class="ident" id="6880069"><a href="/net/mockicmp_test.go.html#6864139">icmpMessage</a></span><span class="op" id="6880080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880085">Type</span><span class="op" id="6880089">:</span>&nbsp;<span class="ident" id="6880091"><a href="/net/mockicmp_test.go.html#6863993">icmpv4EchoRequest</a></span><span class="op" id="6880108">,</span>&nbsp;<span class="ident" id="6880110">Code</span><span class="op" id="6880114">:</span>&nbsp;<span class="num" id="6880116">0</span><span class="op" id="6880117">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880122">Body</span><span class="op" id="6880126">:</span>&nbsp;<span class="op" id="6880128">&amp;</span><span class="ident" id="6880129"><a href="/net/mockicmp_test.go.html#6865797">icmpEcho</a></span><span class="op" id="6880137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880143">ID</span><span class="op" id="6880145">:</span>&nbsp;<span class="ident" id="6880147"><a href="/net/packetconn_test.go.html#6879743">os</a></span><span class="op" id="6880149">.</span><span class="ident" id="6880150">Getpid</span><span class="op" id="6880156">(</span><span class="op" id="6880157">)</span>&nbsp;<span class="op" id="6880159">&amp;</span>&nbsp;<span class="num" id="6880161">0xffff</span><span class="op" id="6880167">,</span>&nbsp;<span class="ident" id="6880169">Seq</span><span class="op" id="6880172">:</span>&nbsp;<span class="ident" id="6880174"><a href="/net/packetconn_test.go.html#6879842">i</a></span>&nbsp;<span class="op" id="6880176">+</span>&nbsp;<span class="num" id="6880178">1</span><span class="op" id="6880179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880185">Data</span><span class="op" id="6880189">:</span>&nbsp;<span class="op" id="6880191">[</span><span class="op" id="6880192">]</span><span class="builtintype" id="6880193">byte</span><span class="op" id="6880197">(</span><span class="string" id="6880198">&#34;IP&nbsp;PACKETCONN&nbsp;TEST&#34;</span><span class="op" id="6880218">)</span><span class="op" id="6880219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880224">}</span><span class="op" id="6880225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880229">}</span><span class="op" id="6880230">)</span><span class="op" id="6880231">.</span><span class="ident" id="6880232">Marshal</span><span class="op" id="6880239">(</span><span class="op" id="6880240">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880244">if</span>&nbsp;<span class="ident" id="6880247"><a href="/net/packetconn_test.go.html#6880060">err</a></span>&nbsp;<span class="op" id="6880251">!=</span>&nbsp;<span class="ident" id="6880254">nil</span>&nbsp;<span class="op" id="6880258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880263">return</span>&nbsp;<span class="ident" id="6880270">nil</span><span class="op" id="6880273">,</span>&nbsp;<span class="keyword" id="6880275">func</span><span class="op" id="6880279">(</span><span class="op" id="6880280">)</span>&nbsp;<span class="op" id="6880282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880288"><a href="/net/packetconn_test.go.html#6879816">t</a></span><span class="op" id="6880289">.</span><span class="ident" id="6880290">Fatalf</span><span class="op" id="6880296">(</span><span class="string" id="6880297">&#34;icmpMessage.Marshal&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6880329">,</span>&nbsp;<span class="ident" id="6880331"><a href="/net/packetconn_test.go.html#6880060">err</a></span><span class="op" id="6880334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880343">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880347">return</span>&nbsp;<span class="ident" id="6880354"><a href="/net/packetconn_test.go.html#6880057">b</a></span><span class="op" id="6880355">,</span>&nbsp;<span class="ident" id="6880357">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880362">case</span>&nbsp;<span class="string" id="6880367">&#34;unixgram&#34;</span><span class="op" id="6880377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880381">switch</span>&nbsp;<span class="ident" id="6880388"><a href="/net/packetconn_test.go.html#6879749">runtime</a></span><span class="op" id="6880395">.</span><span class="ident" id="6880396">GOOS</span>&nbsp;<span class="op" id="6880401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880405">case</span>&nbsp;<span class="string" id="6880410">&#34;nacl&#34;</span><span class="op" id="6880416">,</span>&nbsp;<span class="string" id="6880418">&#34;plan9&#34;</span><span class="op" id="6880425">,</span>&nbsp;<span class="string" id="6880427">&#34;windows&#34;</span><span class="op" id="6880436">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880441">return</span>&nbsp;<span class="ident" id="6880448">nil</span><span class="op" id="6880451">,</span>&nbsp;<span class="keyword" id="6880453">func</span><span class="op" id="6880457">(</span><span class="op" id="6880458">)</span>&nbsp;<span class="op" id="6880460">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880466"><a href="/net/packetconn_test.go.html#6879816">t</a></span><span class="op" id="6880467">.</span><span class="ident" id="6880468">Logf</span><span class="op" id="6880472">(</span><span class="string" id="6880473">&#34;skipping&nbsp;%q&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6880497">,</span>&nbsp;<span class="ident" id="6880499"><a href="/net/packetconn_test.go.html#6879830">net</a></span><span class="op" id="6880502">,</span>&nbsp;<span class="ident" id="6880504"><a href="/net/packetconn_test.go.html#6879749">runtime</a></span><span class="op" id="6880511">.</span><span class="ident" id="6880512">GOOS</span><span class="op" id="6880516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880525">default</span><span class="op" id="6880532">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880537">return</span>&nbsp;<span class="op" id="6880544">[</span><span class="op" id="6880545">]</span><span class="builtintype" id="6880546">byte</span><span class="op" id="6880550">(</span><span class="string" id="6880551">&#34;UNIXGRAM&nbsp;PACKETCONN&nbsp;TEST&#34;</span><span class="op" id="6880577">)</span><span class="op" id="6880578">,</span>&nbsp;<span class="ident" id="6880580">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880586">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880589">default</span><span class="op" id="6880596">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880600">return</span>&nbsp;<span class="ident" id="6880607">nil</span><span class="op" id="6880610">,</span>&nbsp;<span class="keyword" id="6880612">func</span><span class="op" id="6880616">(</span><span class="op" id="6880617">)</span>&nbsp;<span class="op" id="6880619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880624"><a href="/net/packetconn_test.go.html#6879816">t</a></span><span class="op" id="6880625">.</span><span class="ident" id="6880626">Logf</span><span class="op" id="6880630">(</span><span class="string" id="6880631">&#34;skipping&nbsp;%q&nbsp;test&#34;</span><span class="op" id="6880649">,</span>&nbsp;<span class="ident" id="6880651"><a href="/net/packetconn_test.go.html#6879830">net</a></span><span class="op" id="6880654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880661">}</span><br>
<span class="lineno">55</span><span class="op" id="6880663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6880666">var</span>&nbsp;<span class="ident" id="6880670">packetConnTests</span>&nbsp;<span class="op" id="6880686">=</span>&nbsp;<span class="op" id="6880688">[</span><span class="op" id="6880689">]</span><span class="keyword" id="6880690">struct</span>&nbsp;<span class="op" id="6880697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880700">net</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6880706">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880714">addr1</span>&nbsp;<span class="builtintype" id="6880720">string</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880728">addr2</span>&nbsp;<span class="builtintype" id="6880734">string</span><br>
<span class="lineno"></span><span class="op" id="6880741">}</span><span class="op" id="6880742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880745">{</span><span class="string" id="6880746">&#34;udp&#34;</span><span class="op" id="6880751">,</span>&nbsp;<span class="string" id="6880753">&#34;127.0.0.1:0&#34;</span><span class="op" id="6880766">,</span>&nbsp;<span class="string" id="6880768">&#34;127.0.0.1:0&#34;</span><span class="op" id="6880781">}</span><span class="op" id="6880782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880785">{</span><span class="string" id="6880786">&#34;ip:icmp&#34;</span><span class="op" id="6880795">,</span>&nbsp;<span class="string" id="6880797">&#34;127.0.0.1&#34;</span><span class="op" id="6880808">,</span>&nbsp;<span class="string" id="6880810">&#34;127.0.0.1&#34;</span><span class="op" id="6880821">}</span><span class="op" id="6880822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6880825">{</span><span class="string" id="6880826">&#34;unixgram&#34;</span><span class="op" id="6880836">,</span>&nbsp;<span class="ident" id="6880838"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6880850">(</span><span class="op" id="6880851">)</span><span class="op" id="6880852">,</span>&nbsp;<span class="ident" id="6880854"><a href="/net/protoconn_test.go.html#6888470">testUnixAddr</a></span><span class="op" id="6880866">(</span><span class="op" id="6880867">)</span><span class="op" id="6880868">}</span><span class="op" id="6880869">,</span><br>
<span class="lineno">65</span><span class="op" id="6880871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6880874">func</span>&nbsp;<span class="ident" id="6880879">TestPacketConn</span><span class="op" id="6880893">(</span><span class="ident" id="6880894">t</span>&nbsp;<span class="op" id="6880896">*</span><span class="ident" id="6880897"><a href="/net/packetconn_test.go.html#6879771">testing</a></span><span class="op" id="6880904">.</span><span class="ident" id="6880905">T</span><span class="op" id="6880906">)</span>&nbsp;<span class="op" id="6880908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880911">closer</span>&nbsp;<span class="op" id="6880918">:=</span>&nbsp;<span class="keyword" id="6880921">func</span><span class="op" id="6880925">(</span><span class="ident" id="6880926">c</span>&nbsp;<span class="ident" id="6880928"><a href="/net/net.go.html#2656892">PacketConn</a></span><span class="op" id="6880938">,</span>&nbsp;<span class="ident" id="6880940">net</span><span class="op" id="6880943">,</span>&nbsp;<span class="ident" id="6880945">addr1</span><span class="op" id="6880950">,</span>&nbsp;<span class="ident" id="6880952">addr2</span>&nbsp;<span class="builtintype" id="6880958">string</span><span class="op" id="6880964">)</span>&nbsp;<span class="op" id="6880966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6880970"><a href="/net/packetconn_test.go.html#6880926">c</a></span><span class="op" id="6880971">.</span><span class="ident" id="6880972">Close</span><span class="op" id="6880977">(</span><span class="op" id="6880978">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880982">switch</span>&nbsp;<span class="ident" id="6880989"><a href="/net/packetconn_test.go.html#6880940">net</a></span>&nbsp;<span class="op" id="6880993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6880997">case</span>&nbsp;<span class="string" id="6881002">&#34;unixgram&#34;</span><span class="op" id="6881012">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881017"><a href="/net/packetconn_test.go.html#6879743">os</a></span><span class="op" id="6881019">.</span><span class="ident" id="6881020">Remove</span><span class="op" id="6881026">(</span><span class="ident" id="6881027"><a href="/net/packetconn_test.go.html#6880945">addr1</a></span><span class="op" id="6881032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881037"><a href="/net/packetconn_test.go.html#6879743">os</a></span><span class="op" id="6881039">.</span><span class="ident" id="6881040">Remove</span><span class="op" id="6881046">(</span><span class="ident" id="6881047"><a href="/net/packetconn_test.go.html#6880952">addr2</a></span><span class="op" id="6881052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6881056">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6881059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6881063">for</span>&nbsp;<span class="ident" id="6881067">i</span><span class="op" id="6881068">,</span>&nbsp;<span class="ident" id="6881070">tt</span>&nbsp;<span class="op" id="6881073">:=</span>&nbsp;<span class="keyword" id="6881076">range</span>&nbsp;<span class="ident" id="6881082"><a href="/net/packetconn_test.go.html#6880670">packetConnTests</a></span>&nbsp;<span class="op" id="6881098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881102">netstr</span>&nbsp;<span class="op" id="6881109">:=</span>&nbsp;<span class="ident" id="6881112"><a href="/net/packetconn_test.go.html#6879760">strings</a></span><span class="op" id="6881119">.</span><span class="ident" id="6881120">Split</span><span class="op" id="6881125">(</span><span class="ident" id="6881126"><a href="/net/packetconn_test.go.html#6881070">tt</a></span><span class="op" id="6881128">.</span><span class="ident" id="6881129">net</span><span class="op" id="6881132">,</span>&nbsp;<span class="string" id="6881134">&#34;:&#34;</span><span class="op" id="6881137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881141">wb</span><span class="op" id="6881143">,</span>&nbsp;<span class="ident" id="6881145">skipOrFatalFn</span>&nbsp;<span class="op" id="6881159">:=</span>&nbsp;<span class="ident" id="6881162"><a href="/net/packetconn_test.go.html#6879797">packetConnTestData</a></span><span class="op" id="6881180">(</span><span class="ident" id="6881181"><a href="/net/packetconn_test.go.html#6880894">t</a></span><span class="op" id="6881182">,</span>&nbsp;<span class="ident" id="6881184"><a href="/net/packetconn_test.go.html#6881102">netstr</a></span><span class="op" id="6881190">[</span><span class="num" id="6881191">0</span><span class="op" id="6881192">]</span><span class="op" id="6881193">,</span>&nbsp;<span class="ident" id="6881195"><a href="/net/packetconn_test.go.html#6881067">i</a></span><span class="op" id="6881196">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6881200">if</span>&nbsp;<span class="ident" id="6881203"><a href="/net/packetconn_test.go.html#6881145">skipOrFatalFn</a></span>&nbsp;<span class="op" id="6881217">!=</span>&nbsp;<span class="ident" id="6881220">nil</span>&nbsp;<span class="op" id="6881224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881229"><a href="/net/packetconn_test.go.html#6881145">skipOrFatalFn</a></span><span class="op" id="6881242">(</span><span class="op" id="6881243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6881248">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6881259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881264">c1</span><span class="op" id="6881266">,</span>&nbsp;<span class="ident" id="6881268">err</span>&nbsp;<span class="op" id="6881272">:=</span>&nbsp;<span class="ident" id="6881275"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6881287">(</span><span class="ident" id="6881288"><a href="/net/packetconn_test.go.html#6881070">tt</a></span><span class="op" id="6881290">.</span><span class="ident" id="6881291">net</span><span class="op" id="6881294">,</span>&nbsp;<span class="ident" id="6881296"><a href="/net/packetconn_test.go.html#6881070">tt</a></span><span class="op" id="6881298">.</span><span class="ident" id="6881299">addr1</span><span class="op" id="6881304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6881308">if</span>&nbsp;<span class="ident" id="6881311"><a href="/net/packetconn_test.go.html#6881268">err</a></span>&nbsp;<span class="op" id="6881315">!=</span>&nbsp;<span class="ident" id="6881318">nil</span>&nbsp;<span class="op" id="6881322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881327"><a href="/net/packetconn_test.go.html#6880894">t</a></span><span class="op" id="6881328">.</span><span class="ident" id="6881329">Fatalf</span><span class="op" id="6881335">(</span><span class="string" id="6881336">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6881361">,</span>&nbsp;<span class="ident" id="6881363"><a href="/net/packetconn_test.go.html#6881268">err</a></span><span class="op" id="6881366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6881370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6881374">defer</span>&nbsp;<span class="ident" id="6881380"><a href="/net/packetconn_test.go.html#6880911">closer</a></span><span class="op" id="6881386">(</span><span class="ident" id="6881387"><a href="/net/packetconn_test.go.html#6881264">c1</a></span><span class="op" id="6881389">,</span>&nbsp;<span class="ident" id="6881391"><a href="/net/packetconn_test.go.html#6881102">netstr</a></span><span class="op" id="6881397">[</span><span class="num" id="6881398">0</span><span class="op" id="6881399">]</span><span class="op" id="6881400">,</span>&nbsp;<span class="ident" id="6881402"><a href="/net/packetconn_test.go.html#6881070">tt</a></span><span class="op" id="6881404">.</span><span class="ident" id="6881405">addr1</span><span class="op" id="6881410">,</span>&nbsp;<span class="ident" id="6881412"><a href="/net/packetconn_test.go.html#6881070">tt</a></span><span class="op" id="6881414">.</span><span class="ident" id="6881415">addr2</span><span class="op" id="6881420">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881424"><a href="/net/packetconn_test.go.html#6881264">c1</a></span><span class="op" id="6881426">.</span><span class="ident" id="6881427">LocalAddr</span><span class="op" id="6881436">(</span><span class="op" id="6881437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881441"><a href="/net/packetconn_test.go.html#6881264">c1</a></span><span class="op" id="6881443">.</span><span class="ident" id="6881444">SetDeadline</span><span class="op" id="6881455">(</span><span class="ident" id="6881456"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881460">.</span><span class="ident" id="6881461">Now</span><span class="op" id="6881464">(</span><span class="op" id="6881465">)</span><span class="op" id="6881466">.</span><span class="ident" id="6881467">Add</span><span class="op" id="6881470">(</span><span class="num" id="6881471">100</span>&nbsp;<span class="op" id="6881475">*</span>&nbsp;<span class="ident" id="6881477"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881481">.</span><span class="ident" id="6881482">Millisecond</span><span class="op" id="6881493">)</span><span class="op" id="6881494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881498"><a href="/net/packetconn_test.go.html#6881264">c1</a></span><span class="op" id="6881500">.</span><span class="ident" id="6881501">SetReadDeadline</span><span class="op" id="6881516">(</span><span class="ident" id="6881517"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881521">.</span><span class="ident" id="6881522">Now</span><span class="op" id="6881525">(</span><span class="op" id="6881526">)</span><span class="op" id="6881527">.</span><span class="ident" id="6881528">Add</span><span class="op" id="6881531">(</span><span class="num" id="6881532">100</span>&nbsp;<span class="op" id="6881536">*</span>&nbsp;<span class="ident" id="6881538"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881542">.</span><span class="ident" id="6881543">Millisecond</span><span class="op" id="6881554">)</span><span class="op" id="6881555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881559"><a href="/net/packetconn_test.go.html#6881264">c1</a></span><span class="op" id="6881561">.</span><span class="ident" id="6881562">SetWriteDeadline</span><span class="op" id="6881578">(</span><span class="ident" id="6881579"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881583">.</span><span class="ident" id="6881584">Now</span><span class="op" id="6881587">(</span><span class="op" id="6881588">)</span><span class="op" id="6881589">.</span><span class="ident" id="6881590">Add</span><span class="op" id="6881593">(</span><span class="num" id="6881594">100</span>&nbsp;<span class="op" id="6881598">*</span>&nbsp;<span class="ident" id="6881600"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881604">.</span><span class="ident" id="6881605">Millisecond</span><span class="op" id="6881616">)</span><span class="op" id="6881617">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881622">c2</span><span class="op" id="6881624">,</span>&nbsp;<span class="ident" id="6881626"><a href="/net/packetconn_test.go.html#6881268">err</a></span>&nbsp;<span class="op" id="6881630">:=</span>&nbsp;<span class="ident" id="6881633"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6881645">(</span><span class="ident" id="6881646"><a href="/net/packetconn_test.go.html#6881070">tt</a></span><span class="op" id="6881648">.</span><span class="ident" id="6881649">net</span><span class="op" id="6881652">,</span>&nbsp;<span class="ident" id="6881654"><a href="/net/packetconn_test.go.html#6881070">tt</a></span><span class="op" id="6881656">.</span><span class="ident" id="6881657">addr2</span><span class="op" id="6881662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6881666">if</span>&nbsp;<span class="ident" id="6881669"><a href="/net/packetconn_test.go.html#6881268">err</a></span>&nbsp;<span class="op" id="6881673">!=</span>&nbsp;<span class="ident" id="6881676">nil</span>&nbsp;<span class="op" id="6881680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881685"><a href="/net/packetconn_test.go.html#6880894">t</a></span><span class="op" id="6881686">.</span><span class="ident" id="6881687">Fatalf</span><span class="op" id="6881693">(</span><span class="string" id="6881694">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6881719">,</span>&nbsp;<span class="ident" id="6881721"><a href="/net/packetconn_test.go.html#6881268">err</a></span><span class="op" id="6881724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6881728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6881732">defer</span>&nbsp;<span class="ident" id="6881738"><a href="/net/packetconn_test.go.html#6880911">closer</a></span><span class="op" id="6881744">(</span><span class="ident" id="6881745"><a href="/net/packetconn_test.go.html#6881622">c2</a></span><span class="op" id="6881747">,</span>&nbsp;<span class="ident" id="6881749"><a href="/net/packetconn_test.go.html#6881102">netstr</a></span><span class="op" id="6881755">[</span><span class="num" id="6881756">0</span><span class="op" id="6881757">]</span><span class="op" id="6881758">,</span>&nbsp;<span class="ident" id="6881760"><a href="/net/packetconn_test.go.html#6881070">tt</a></span><span class="op" id="6881762">.</span><span class="ident" id="6881763">addr1</span><span class="op" id="6881768">,</span>&nbsp;<span class="ident" id="6881770"><a href="/net/packetconn_test.go.html#6881070">tt</a></span><span class="op" id="6881772">.</span><span class="ident" id="6881773">addr2</span><span class="op" id="6881778">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881782"><a href="/net/packetconn_test.go.html#6881622">c2</a></span><span class="op" id="6881784">.</span><span class="ident" id="6881785">LocalAddr</span><span class="op" id="6881794">(</span><span class="op" id="6881795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881799"><a href="/net/packetconn_test.go.html#6881622">c2</a></span><span class="op" id="6881801">.</span><span class="ident" id="6881802">SetDeadline</span><span class="op" id="6881813">(</span><span class="ident" id="6881814"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881818">.</span><span class="ident" id="6881819">Now</span><span class="op" id="6881822">(</span><span class="op" id="6881823">)</span><span class="op" id="6881824">.</span><span class="ident" id="6881825">Add</span><span class="op" id="6881828">(</span><span class="num" id="6881829">100</span>&nbsp;<span class="op" id="6881833">*</span>&nbsp;<span class="ident" id="6881835"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881839">.</span><span class="ident" id="6881840">Millisecond</span><span class="op" id="6881851">)</span><span class="op" id="6881852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881856"><a href="/net/packetconn_test.go.html#6881622">c2</a></span><span class="op" id="6881858">.</span><span class="ident" id="6881859">SetReadDeadline</span><span class="op" id="6881874">(</span><span class="ident" id="6881875"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881879">.</span><span class="ident" id="6881880">Now</span><span class="op" id="6881883">(</span><span class="op" id="6881884">)</span><span class="op" id="6881885">.</span><span class="ident" id="6881886">Add</span><span class="op" id="6881889">(</span><span class="num" id="6881890">100</span>&nbsp;<span class="op" id="6881894">*</span>&nbsp;<span class="ident" id="6881896"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881900">.</span><span class="ident" id="6881901">Millisecond</span><span class="op" id="6881912">)</span><span class="op" id="6881913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6881917"><a href="/net/packetconn_test.go.html#6881622">c2</a></span><span class="op" id="6881919">.</span><span class="ident" id="6881920">SetWriteDeadline</span><span class="op" id="6881936">(</span><span class="ident" id="6881937"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881941">.</span><span class="ident" id="6881942">Now</span><span class="op" id="6881945">(</span><span class="op" id="6881946">)</span><span class="op" id="6881947">.</span><span class="ident" id="6881948">Add</span><span class="op" id="6881951">(</span><span class="num" id="6881952">100</span>&nbsp;<span class="op" id="6881956">*</span>&nbsp;<span class="ident" id="6881958"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6881962">.</span><span class="ident" id="6881963">Millisecond</span><span class="op" id="6881974">)</span><span class="op" id="6881975">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6881980">if</span>&nbsp;<span class="ident" id="6881983">_</span><span class="op" id="6881984">,</span>&nbsp;<span class="ident" id="6881986">err</span>&nbsp;<span class="op" id="6881990">:=</span>&nbsp;<span class="ident" id="6881993"><a href="/net/packetconn_test.go.html#6881264">c1</a></span><span class="op" id="6881995">.</span><span class="ident" id="6881996">WriteTo</span><span class="op" id="6882003">(</span><span class="ident" id="6882004"><a href="/net/packetconn_test.go.html#6881141">wb</a></span><span class="op" id="6882006">,</span>&nbsp;<span class="ident" id="6882008"><a href="/net/packetconn_test.go.html#6881622">c2</a></span><span class="op" id="6882010">.</span><span class="ident" id="6882011">LocalAddr</span><span class="op" id="6882020">(</span><span class="op" id="6882021">)</span><span class="op" id="6882022">)</span><span class="op" id="6882023">;</span>&nbsp;<span class="ident" id="6882025"><a href="/net/packetconn_test.go.html#6881986">err</a></span>&nbsp;<span class="op" id="6882029">!=</span>&nbsp;<span class="ident" id="6882032">nil</span>&nbsp;<span class="op" id="6882036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882041"><a href="/net/packetconn_test.go.html#6880894">t</a></span><span class="op" id="6882042">.</span><span class="ident" id="6882043">Fatalf</span><span class="op" id="6882049">(</span><span class="string" id="6882050">&#34;PacketConn.WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6882081">,</span>&nbsp;<span class="ident" id="6882083"><a href="/net/packetconn_test.go.html#6881986">err</a></span><span class="op" id="6882086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6882090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882094">rb2</span>&nbsp;<span class="op" id="6882098">:=</span>&nbsp;<span class="builtinfunc" id="6882101">make</span><span class="op" id="6882105">(</span><span class="op" id="6882106">[</span><span class="op" id="6882107">]</span><span class="builtintype" id="6882108">byte</span><span class="op" id="6882112">,</span>&nbsp;<span class="num" id="6882114">128</span><span class="op" id="6882117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882121">if</span>&nbsp;<span class="ident" id="6882124">_</span><span class="op" id="6882125">,</span>&nbsp;<span class="ident" id="6882127">_</span><span class="op" id="6882128">,</span>&nbsp;<span class="ident" id="6882130">err</span>&nbsp;<span class="op" id="6882134">:=</span>&nbsp;<span class="ident" id="6882137"><a href="/net/packetconn_test.go.html#6881622">c2</a></span><span class="op" id="6882139">.</span><span class="ident" id="6882140">ReadFrom</span><span class="op" id="6882148">(</span><span class="ident" id="6882149"><a href="/net/packetconn_test.go.html#6882094">rb2</a></span><span class="op" id="6882152">)</span><span class="op" id="6882153">;</span>&nbsp;<span class="ident" id="6882155"><a href="/net/packetconn_test.go.html#6882130">err</a></span>&nbsp;<span class="op" id="6882159">!=</span>&nbsp;<span class="ident" id="6882162">nil</span>&nbsp;<span class="op" id="6882166">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882171"><a href="/net/packetconn_test.go.html#6880894">t</a></span><span class="op" id="6882172">.</span><span class="ident" id="6882173">Fatalf</span><span class="op" id="6882179">(</span><span class="string" id="6882180">&#34;PacketConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6882212">,</span>&nbsp;<span class="ident" id="6882214"><a href="/net/packetconn_test.go.html#6882130">err</a></span><span class="op" id="6882217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6882221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882225">if</span>&nbsp;<span class="ident" id="6882228">_</span><span class="op" id="6882229">,</span>&nbsp;<span class="ident" id="6882231">err</span>&nbsp;<span class="op" id="6882235">:=</span>&nbsp;<span class="ident" id="6882238"><a href="/net/packetconn_test.go.html#6881622">c2</a></span><span class="op" id="6882240">.</span><span class="ident" id="6882241">WriteTo</span><span class="op" id="6882248">(</span><span class="ident" id="6882249"><a href="/net/packetconn_test.go.html#6881141">wb</a></span><span class="op" id="6882251">,</span>&nbsp;<span class="ident" id="6882253"><a href="/net/packetconn_test.go.html#6881264">c1</a></span><span class="op" id="6882255">.</span><span class="ident" id="6882256">LocalAddr</span><span class="op" id="6882265">(</span><span class="op" id="6882266">)</span><span class="op" id="6882267">)</span><span class="op" id="6882268">;</span>&nbsp;<span class="ident" id="6882270"><a href="/net/packetconn_test.go.html#6882231">err</a></span>&nbsp;<span class="op" id="6882274">!=</span>&nbsp;<span class="ident" id="6882277">nil</span>&nbsp;<span class="op" id="6882281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882286"><a href="/net/packetconn_test.go.html#6880894">t</a></span><span class="op" id="6882287">.</span><span class="ident" id="6882288">Fatalf</span><span class="op" id="6882294">(</span><span class="string" id="6882295">&#34;PacketConn.WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6882326">,</span>&nbsp;<span class="ident" id="6882328"><a href="/net/packetconn_test.go.html#6882231">err</a></span><span class="op" id="6882331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6882335">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882339">rb1</span>&nbsp;<span class="op" id="6882343">:=</span>&nbsp;<span class="builtinfunc" id="6882346">make</span><span class="op" id="6882350">(</span><span class="op" id="6882351">[</span><span class="op" id="6882352">]</span><span class="builtintype" id="6882353">byte</span><span class="op" id="6882357">,</span>&nbsp;<span class="num" id="6882359">128</span><span class="op" id="6882362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882366">if</span>&nbsp;<span class="ident" id="6882369">_</span><span class="op" id="6882370">,</span>&nbsp;<span class="ident" id="6882372">_</span><span class="op" id="6882373">,</span>&nbsp;<span class="ident" id="6882375">err</span>&nbsp;<span class="op" id="6882379">:=</span>&nbsp;<span class="ident" id="6882382"><a href="/net/packetconn_test.go.html#6881264">c1</a></span><span class="op" id="6882384">.</span><span class="ident" id="6882385">ReadFrom</span><span class="op" id="6882393">(</span><span class="ident" id="6882394"><a href="/net/packetconn_test.go.html#6882339">rb1</a></span><span class="op" id="6882397">)</span><span class="op" id="6882398">;</span>&nbsp;<span class="ident" id="6882400"><a href="/net/packetconn_test.go.html#6882375">err</a></span>&nbsp;<span class="op" id="6882404">!=</span>&nbsp;<span class="ident" id="6882407">nil</span>&nbsp;<span class="op" id="6882411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882416"><a href="/net/packetconn_test.go.html#6880894">t</a></span><span class="op" id="6882417">.</span><span class="ident" id="6882418">Fatalf</span><span class="op" id="6882424">(</span><span class="string" id="6882425">&#34;PacketConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6882457">,</span>&nbsp;<span class="ident" id="6882459"><a href="/net/packetconn_test.go.html#6882375">err</a></span><span class="op" id="6882462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6882466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6882469">}</span><br>
<span class="lineno">120</span><span class="op" id="6882471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6882474">func</span>&nbsp;<span class="ident" id="6882479">TestConnAndPacketConn</span><span class="op" id="6882500">(</span><span class="ident" id="6882501">t</span>&nbsp;<span class="op" id="6882503">*</span><span class="ident" id="6882504"><a href="/net/packetconn_test.go.html#6879771">testing</a></span><span class="op" id="6882511">.</span><span class="ident" id="6882512">T</span><span class="op" id="6882513">)</span>&nbsp;<span class="op" id="6882515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882518">closer</span>&nbsp;<span class="op" id="6882525">:=</span>&nbsp;<span class="keyword" id="6882528">func</span><span class="op" id="6882532">(</span><span class="ident" id="6882533">c</span>&nbsp;<span class="ident" id="6882535"><a href="/net/net.go.html#2656892">PacketConn</a></span><span class="op" id="6882545">,</span>&nbsp;<span class="ident" id="6882547">net</span><span class="op" id="6882550">,</span>&nbsp;<span class="ident" id="6882552">addr1</span><span class="op" id="6882557">,</span>&nbsp;<span class="ident" id="6882559">addr2</span>&nbsp;<span class="builtintype" id="6882565">string</span><span class="op" id="6882571">)</span>&nbsp;<span class="op" id="6882573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882577"><a href="/net/packetconn_test.go.html#6882533">c</a></span><span class="op" id="6882578">.</span><span class="ident" id="6882579">Close</span><span class="op" id="6882584">(</span><span class="op" id="6882585">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882589">switch</span>&nbsp;<span class="ident" id="6882596"><a href="/net/packetconn_test.go.html#6882547">net</a></span>&nbsp;<span class="op" id="6882600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882604">case</span>&nbsp;<span class="string" id="6882609">&#34;unixgram&#34;</span><span class="op" id="6882619">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882624"><a href="/net/packetconn_test.go.html#6879743">os</a></span><span class="op" id="6882626">.</span><span class="ident" id="6882627">Remove</span><span class="op" id="6882633">(</span><span class="ident" id="6882634"><a href="/net/packetconn_test.go.html#6882552">addr1</a></span><span class="op" id="6882639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882644"><a href="/net/packetconn_test.go.html#6879743">os</a></span><span class="op" id="6882646">.</span><span class="ident" id="6882647">Remove</span><span class="op" id="6882653">(</span><span class="ident" id="6882654"><a href="/net/packetconn_test.go.html#6882559">addr2</a></span><span class="op" id="6882659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6882663">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6882666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882670">for</span>&nbsp;<span class="ident" id="6882674">i</span><span class="op" id="6882675">,</span>&nbsp;<span class="ident" id="6882677">tt</span>&nbsp;<span class="op" id="6882680">:=</span>&nbsp;<span class="keyword" id="6882683">range</span>&nbsp;<span class="ident" id="6882689"><a href="/net/packetconn_test.go.html#6880670">packetConnTests</a></span>&nbsp;<span class="op" id="6882705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882709">var</span>&nbsp;<span class="ident" id="6882713">wb</span>&nbsp;<span class="op" id="6882716">[</span><span class="op" id="6882717">]</span><span class="builtintype" id="6882718">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882725">netstr</span>&nbsp;<span class="op" id="6882732">:=</span>&nbsp;<span class="ident" id="6882735"><a href="/net/packetconn_test.go.html#6879760">strings</a></span><span class="op" id="6882742">.</span><span class="ident" id="6882743">Split</span><span class="op" id="6882748">(</span><span class="ident" id="6882749"><a href="/net/packetconn_test.go.html#6882677">tt</a></span><span class="op" id="6882751">.</span><span class="ident" id="6882752">net</span><span class="op" id="6882755">,</span>&nbsp;<span class="string" id="6882757">&#34;:&#34;</span><span class="op" id="6882760">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882764"><a href="/net/packetconn_test.go.html#6882713">wb</a></span><span class="op" id="6882766">,</span>&nbsp;<span class="ident" id="6882768">skipOrFatalFn</span>&nbsp;<span class="op" id="6882782">:=</span>&nbsp;<span class="ident" id="6882785"><a href="/net/packetconn_test.go.html#6879797">packetConnTestData</a></span><span class="op" id="6882803">(</span><span class="ident" id="6882804"><a href="/net/packetconn_test.go.html#6882501">t</a></span><span class="op" id="6882805">,</span>&nbsp;<span class="ident" id="6882807"><a href="/net/packetconn_test.go.html#6882725">netstr</a></span><span class="op" id="6882813">[</span><span class="num" id="6882814">0</span><span class="op" id="6882815">]</span><span class="op" id="6882816">,</span>&nbsp;<span class="ident" id="6882818"><a href="/net/packetconn_test.go.html#6882674">i</a></span><span class="op" id="6882819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882823">if</span>&nbsp;<span class="ident" id="6882826"><a href="/net/packetconn_test.go.html#6882768">skipOrFatalFn</a></span>&nbsp;<span class="op" id="6882840">!=</span>&nbsp;<span class="ident" id="6882843">nil</span>&nbsp;<span class="op" id="6882847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882852"><a href="/net/packetconn_test.go.html#6882768">skipOrFatalFn</a></span><span class="op" id="6882865">(</span><span class="op" id="6882866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882871">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6882882">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882887">c1</span><span class="op" id="6882889">,</span>&nbsp;<span class="ident" id="6882891">err</span>&nbsp;<span class="op" id="6882895">:=</span>&nbsp;<span class="ident" id="6882898"><a href="/net/dial.go.html#2525968">ListenPacket</a></span><span class="op" id="6882910">(</span><span class="ident" id="6882911"><a href="/net/packetconn_test.go.html#6882677">tt</a></span><span class="op" id="6882913">.</span><span class="ident" id="6882914">net</span><span class="op" id="6882917">,</span>&nbsp;<span class="ident" id="6882919"><a href="/net/packetconn_test.go.html#6882677">tt</a></span><span class="op" id="6882921">.</span><span class="ident" id="6882922">addr1</span><span class="op" id="6882927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882931">if</span>&nbsp;<span class="ident" id="6882934"><a href="/net/packetconn_test.go.html#6882891">err</a></span>&nbsp;<span class="op" id="6882938">!=</span>&nbsp;<span class="ident" id="6882941">nil</span>&nbsp;<span class="op" id="6882945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6882950"><a href="/net/packetconn_test.go.html#6882501">t</a></span><span class="op" id="6882951">.</span><span class="ident" id="6882952">Fatalf</span><span class="op" id="6882958">(</span><span class="string" id="6882959">&#34;ListenPacket&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6882984">,</span>&nbsp;<span class="ident" id="6882986"><a href="/net/packetconn_test.go.html#6882891">err</a></span><span class="op" id="6882989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6882993">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6882997">defer</span>&nbsp;<span class="ident" id="6883003"><a href="/net/packetconn_test.go.html#6882518">closer</a></span><span class="op" id="6883009">(</span><span class="ident" id="6883010"><a href="/net/packetconn_test.go.html#6882887">c1</a></span><span class="op" id="6883012">,</span>&nbsp;<span class="ident" id="6883014"><a href="/net/packetconn_test.go.html#6882725">netstr</a></span><span class="op" id="6883020">[</span><span class="num" id="6883021">0</span><span class="op" id="6883022">]</span><span class="op" id="6883023">,</span>&nbsp;<span class="ident" id="6883025"><a href="/net/packetconn_test.go.html#6882677">tt</a></span><span class="op" id="6883027">.</span><span class="ident" id="6883028">addr1</span><span class="op" id="6883033">,</span>&nbsp;<span class="ident" id="6883035"><a href="/net/packetconn_test.go.html#6882677">tt</a></span><span class="op" id="6883037">.</span><span class="ident" id="6883038">addr2</span><span class="op" id="6883043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883047"><a href="/net/packetconn_test.go.html#6882887">c1</a></span><span class="op" id="6883049">.</span><span class="ident" id="6883050">LocalAddr</span><span class="op" id="6883059">(</span><span class="op" id="6883060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883064"><a href="/net/packetconn_test.go.html#6882887">c1</a></span><span class="op" id="6883066">.</span><span class="ident" id="6883067">SetDeadline</span><span class="op" id="6883078">(</span><span class="ident" id="6883079"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883083">.</span><span class="ident" id="6883084">Now</span><span class="op" id="6883087">(</span><span class="op" id="6883088">)</span><span class="op" id="6883089">.</span><span class="ident" id="6883090">Add</span><span class="op" id="6883093">(</span><span class="num" id="6883094">100</span>&nbsp;<span class="op" id="6883098">*</span>&nbsp;<span class="ident" id="6883100"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883104">.</span><span class="ident" id="6883105">Millisecond</span><span class="op" id="6883116">)</span><span class="op" id="6883117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883121"><a href="/net/packetconn_test.go.html#6882887">c1</a></span><span class="op" id="6883123">.</span><span class="ident" id="6883124">SetReadDeadline</span><span class="op" id="6883139">(</span><span class="ident" id="6883140"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883144">.</span><span class="ident" id="6883145">Now</span><span class="op" id="6883148">(</span><span class="op" id="6883149">)</span><span class="op" id="6883150">.</span><span class="ident" id="6883151">Add</span><span class="op" id="6883154">(</span><span class="num" id="6883155">100</span>&nbsp;<span class="op" id="6883159">*</span>&nbsp;<span class="ident" id="6883161"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883165">.</span><span class="ident" id="6883166">Millisecond</span><span class="op" id="6883177">)</span><span class="op" id="6883178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883182"><a href="/net/packetconn_test.go.html#6882887">c1</a></span><span class="op" id="6883184">.</span><span class="ident" id="6883185">SetWriteDeadline</span><span class="op" id="6883201">(</span><span class="ident" id="6883202"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883206">.</span><span class="ident" id="6883207">Now</span><span class="op" id="6883210">(</span><span class="op" id="6883211">)</span><span class="op" id="6883212">.</span><span class="ident" id="6883213">Add</span><span class="op" id="6883216">(</span><span class="num" id="6883217">100</span>&nbsp;<span class="op" id="6883221">*</span>&nbsp;<span class="ident" id="6883223"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883227">.</span><span class="ident" id="6883228">Millisecond</span><span class="op" id="6883239">)</span><span class="op" id="6883240">)</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883245">c2</span><span class="op" id="6883247">,</span>&nbsp;<span class="ident" id="6883249"><a href="/net/packetconn_test.go.html#6882891">err</a></span>&nbsp;<span class="op" id="6883253">:=</span>&nbsp;<span class="ident" id="6883256"><a href="/net/dial.go.html#2521518">Dial</a></span><span class="op" id="6883260">(</span><span class="ident" id="6883261"><a href="/net/packetconn_test.go.html#6882677">tt</a></span><span class="op" id="6883263">.</span><span class="ident" id="6883264">net</span><span class="op" id="6883267">,</span>&nbsp;<span class="ident" id="6883269"><a href="/net/packetconn_test.go.html#6882887">c1</a></span><span class="op" id="6883271">.</span><span class="ident" id="6883272">LocalAddr</span><span class="op" id="6883281">(</span><span class="op" id="6883282">)</span><span class="op" id="6883283">.</span><span class="ident" id="6883284">String</span><span class="op" id="6883290">(</span><span class="op" id="6883291">)</span><span class="op" id="6883292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883296">if</span>&nbsp;<span class="ident" id="6883299"><a href="/net/packetconn_test.go.html#6882891">err</a></span>&nbsp;<span class="op" id="6883303">!=</span>&nbsp;<span class="ident" id="6883306">nil</span>&nbsp;<span class="op" id="6883310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883315"><a href="/net/packetconn_test.go.html#6882501">t</a></span><span class="op" id="6883316">.</span><span class="ident" id="6883317">Fatalf</span><span class="op" id="6883323">(</span><span class="string" id="6883324">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6883341">,</span>&nbsp;<span class="ident" id="6883343"><a href="/net/packetconn_test.go.html#6882891">err</a></span><span class="op" id="6883346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6883350">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883354">defer</span>&nbsp;<span class="ident" id="6883360"><a href="/net/packetconn_test.go.html#6883245">c2</a></span><span class="op" id="6883362">.</span><span class="ident" id="6883363">Close</span><span class="op" id="6883368">(</span><span class="op" id="6883369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883373"><a href="/net/packetconn_test.go.html#6883245">c2</a></span><span class="op" id="6883375">.</span><span class="ident" id="6883376">LocalAddr</span><span class="op" id="6883385">(</span><span class="op" id="6883386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883390"><a href="/net/packetconn_test.go.html#6883245">c2</a></span><span class="op" id="6883392">.</span><span class="ident" id="6883393">RemoteAddr</span><span class="op" id="6883403">(</span><span class="op" id="6883404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883408"><a href="/net/packetconn_test.go.html#6883245">c2</a></span><span class="op" id="6883410">.</span><span class="ident" id="6883411">SetDeadline</span><span class="op" id="6883422">(</span><span class="ident" id="6883423"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883427">.</span><span class="ident" id="6883428">Now</span><span class="op" id="6883431">(</span><span class="op" id="6883432">)</span><span class="op" id="6883433">.</span><span class="ident" id="6883434">Add</span><span class="op" id="6883437">(</span><span class="num" id="6883438">100</span>&nbsp;<span class="op" id="6883442">*</span>&nbsp;<span class="ident" id="6883444"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883448">.</span><span class="ident" id="6883449">Millisecond</span><span class="op" id="6883460">)</span><span class="op" id="6883461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883465"><a href="/net/packetconn_test.go.html#6883245">c2</a></span><span class="op" id="6883467">.</span><span class="ident" id="6883468">SetReadDeadline</span><span class="op" id="6883483">(</span><span class="ident" id="6883484"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883488">.</span><span class="ident" id="6883489">Now</span><span class="op" id="6883492">(</span><span class="op" id="6883493">)</span><span class="op" id="6883494">.</span><span class="ident" id="6883495">Add</span><span class="op" id="6883498">(</span><span class="num" id="6883499">100</span>&nbsp;<span class="op" id="6883503">*</span>&nbsp;<span class="ident" id="6883505"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883509">.</span><span class="ident" id="6883510">Millisecond</span><span class="op" id="6883521">)</span><span class="op" id="6883522">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883526"><a href="/net/packetconn_test.go.html#6883245">c2</a></span><span class="op" id="6883528">.</span><span class="ident" id="6883529">SetWriteDeadline</span><span class="op" id="6883545">(</span><span class="ident" id="6883546"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883550">.</span><span class="ident" id="6883551">Now</span><span class="op" id="6883554">(</span><span class="op" id="6883555">)</span><span class="op" id="6883556">.</span><span class="ident" id="6883557">Add</span><span class="op" id="6883560">(</span><span class="num" id="6883561">100</span>&nbsp;<span class="op" id="6883565">*</span>&nbsp;<span class="ident" id="6883567"><a href="/net/packetconn_test.go.html#6879782">time</a></span><span class="op" id="6883571">.</span><span class="ident" id="6883572">Millisecond</span><span class="op" id="6883583">)</span><span class="op" id="6883584">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883589">if</span>&nbsp;<span class="ident" id="6883592">_</span><span class="op" id="6883593">,</span>&nbsp;<span class="ident" id="6883595">err</span>&nbsp;<span class="op" id="6883599">:=</span>&nbsp;<span class="ident" id="6883602"><a href="/net/packetconn_test.go.html#6883245">c2</a></span><span class="op" id="6883604">.</span><span class="ident" id="6883605">Write</span><span class="op" id="6883610">(</span><span class="ident" id="6883611"><a href="/net/packetconn_test.go.html#6882713">wb</a></span><span class="op" id="6883613">)</span><span class="op" id="6883614">;</span>&nbsp;<span class="ident" id="6883616"><a href="/net/packetconn_test.go.html#6883595">err</a></span>&nbsp;<span class="op" id="6883620">!=</span>&nbsp;<span class="ident" id="6883623">nil</span>&nbsp;<span class="op" id="6883627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883632"><a href="/net/packetconn_test.go.html#6882501">t</a></span><span class="op" id="6883633">.</span><span class="ident" id="6883634">Fatalf</span><span class="op" id="6883640">(</span><span class="string" id="6883641">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6883664">,</span>&nbsp;<span class="ident" id="6883666"><a href="/net/packetconn_test.go.html#6883595">err</a></span><span class="op" id="6883669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6883673">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883677">rb1</span>&nbsp;<span class="op" id="6883681">:=</span>&nbsp;<span class="builtinfunc" id="6883684">make</span><span class="op" id="6883688">(</span><span class="op" id="6883689">[</span><span class="op" id="6883690">]</span><span class="builtintype" id="6883691">byte</span><span class="op" id="6883695">,</span>&nbsp;<span class="num" id="6883697">128</span><span class="op" id="6883700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883704">if</span>&nbsp;<span class="ident" id="6883707">_</span><span class="op" id="6883708">,</span>&nbsp;<span class="ident" id="6883710">_</span><span class="op" id="6883711">,</span>&nbsp;<span class="ident" id="6883713">err</span>&nbsp;<span class="op" id="6883717">:=</span>&nbsp;<span class="ident" id="6883720"><a href="/net/packetconn_test.go.html#6882887">c1</a></span><span class="op" id="6883722">.</span><span class="ident" id="6883723">ReadFrom</span><span class="op" id="6883731">(</span><span class="ident" id="6883732"><a href="/net/packetconn_test.go.html#6883677">rb1</a></span><span class="op" id="6883735">)</span><span class="op" id="6883736">;</span>&nbsp;<span class="ident" id="6883738"><a href="/net/packetconn_test.go.html#6883713">err</a></span>&nbsp;<span class="op" id="6883742">!=</span>&nbsp;<span class="ident" id="6883745">nil</span>&nbsp;<span class="op" id="6883749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883754"><a href="/net/packetconn_test.go.html#6882501">t</a></span><span class="op" id="6883755">.</span><span class="ident" id="6883756">Fatalf</span><span class="op" id="6883762">(</span><span class="string" id="6883763">&#34;PacketConn.ReadFrom&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6883795">,</span>&nbsp;<span class="ident" id="6883797"><a href="/net/packetconn_test.go.html#6883713">err</a></span><span class="op" id="6883800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6883804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883808">var</span>&nbsp;<span class="ident" id="6883812">dst</span>&nbsp;<span class="ident" id="6883816"><a href="/net/net.go.html#2652238">Addr</a></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883823">switch</span>&nbsp;<span class="ident" id="6883830"><a href="/net/packetconn_test.go.html#6882725">netstr</a></span><span class="op" id="6883836">[</span><span class="num" id="6883837">0</span><span class="op" id="6883838">]</span>&nbsp;<span class="op" id="6883840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883844">case</span>&nbsp;<span class="string" id="6883849">&#34;ip&#34;</span><span class="op" id="6883853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883858"><a href="/net/packetconn_test.go.html#6883812">dst</a></span>&nbsp;<span class="op" id="6883862">=</span>&nbsp;<span class="op" id="6883864">&amp;</span><span class="ident" id="6883865"><a href="/net/iprawsock.go.html#2619177">IPAddr</a></span><span class="op" id="6883871">{</span><span class="ident" id="6883872">IP</span><span class="op" id="6883874">:</span>&nbsp;<span class="ident" id="6883876"><a href="/net/ip.go.html#2604600">IPv4</a></span><span class="op" id="6883880">(</span><span class="num" id="6883881">127</span><span class="op" id="6883884">,</span>&nbsp;<span class="num" id="6883886">0</span><span class="op" id="6883887">,</span>&nbsp;<span class="num" id="6883889">0</span><span class="op" id="6883890">,</span>&nbsp;<span class="num" id="6883892">1</span><span class="op" id="6883893">)</span><span class="op" id="6883894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883898">case</span>&nbsp;<span class="string" id="6883903">&#34;unixgram&#34;</span><span class="op" id="6883913">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883918">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883929">default</span><span class="op" id="6883936">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6883941"><a href="/net/packetconn_test.go.html#6883812">dst</a></span>&nbsp;<span class="op" id="6883945">=</span>&nbsp;<span class="ident" id="6883947"><a href="/net/packetconn_test.go.html#6883245">c2</a></span><span class="op" id="6883949">.</span><span class="ident" id="6883950">LocalAddr</span><span class="op" id="6883959">(</span><span class="op" id="6883960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6883964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6883968">if</span>&nbsp;<span class="ident" id="6883971">_</span><span class="op" id="6883972">,</span>&nbsp;<span class="ident" id="6883974">err</span>&nbsp;<span class="op" id="6883978">:=</span>&nbsp;<span class="ident" id="6883981"><a href="/net/packetconn_test.go.html#6882887">c1</a></span><span class="op" id="6883983">.</span><span class="ident" id="6883984">WriteTo</span><span class="op" id="6883991">(</span><span class="ident" id="6883992"><a href="/net/packetconn_test.go.html#6882713">wb</a></span><span class="op" id="6883994">,</span>&nbsp;<span class="ident" id="6883996"><a href="/net/packetconn_test.go.html#6883812">dst</a></span><span class="op" id="6883999">)</span><span class="op" id="6884000">;</span>&nbsp;<span class="ident" id="6884002"><a href="/net/packetconn_test.go.html#6883974">err</a></span>&nbsp;<span class="op" id="6884006">!=</span>&nbsp;<span class="ident" id="6884009">nil</span>&nbsp;<span class="op" id="6884013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884018"><a href="/net/packetconn_test.go.html#6882501">t</a></span><span class="op" id="6884019">.</span><span class="ident" id="6884020">Fatalf</span><span class="op" id="6884026">(</span><span class="string" id="6884027">&#34;PacketConn.WriteTo&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6884058">,</span>&nbsp;<span class="ident" id="6884060"><a href="/net/packetconn_test.go.html#6883974">err</a></span><span class="op" id="6884063">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6884067">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884071">rb2</span>&nbsp;<span class="op" id="6884075">:=</span>&nbsp;<span class="builtinfunc" id="6884078">make</span><span class="op" id="6884082">(</span><span class="op" id="6884083">[</span><span class="op" id="6884084">]</span><span class="builtintype" id="6884085">byte</span><span class="op" id="6884089">,</span>&nbsp;<span class="num" id="6884091">128</span><span class="op" id="6884094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6884098">if</span>&nbsp;<span class="ident" id="6884101">_</span><span class="op" id="6884102">,</span>&nbsp;<span class="ident" id="6884104">err</span>&nbsp;<span class="op" id="6884108">:=</span>&nbsp;<span class="ident" id="6884111"><a href="/net/packetconn_test.go.html#6883245">c2</a></span><span class="op" id="6884113">.</span><span class="ident" id="6884114">Read</span><span class="op" id="6884118">(</span><span class="ident" id="6884119"><a href="/net/packetconn_test.go.html#6884071">rb2</a></span><span class="op" id="6884122">)</span><span class="op" id="6884123">;</span>&nbsp;<span class="ident" id="6884125"><a href="/net/packetconn_test.go.html#6884104">err</a></span>&nbsp;<span class="op" id="6884129">!=</span>&nbsp;<span class="ident" id="6884132">nil</span>&nbsp;<span class="op" id="6884136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884141"><a href="/net/packetconn_test.go.html#6882501">t</a></span><span class="op" id="6884142">.</span><span class="ident" id="6884143">Fatalf</span><span class="op" id="6884149">(</span><span class="string" id="6884150">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6884172">,</span>&nbsp;<span class="ident" id="6884174"><a href="/net/packetconn_test.go.html#6884104">err</a></span><span class="op" id="6884177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6884181">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6884184">}</span><br>
<span class="lineno"></span><span class="op" id="6884186">}</span>
</div>
</body>
</html>
