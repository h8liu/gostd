<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3374802">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3374857">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3374911">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3374962">//&nbsp;Parse&nbsp;nodes.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3374979">package</span>&nbsp;<span class="ident" id="3374987">parse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3374994">import</span>&nbsp;<span class="op" id="3375001">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3375004">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3375013">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3375020">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3375031">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3375041">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="3375044">var</span>&nbsp;<span class="ident" id="3375048">textFormat</span>&nbsp;<span class="op" id="3375059">=</span>&nbsp;<span class="string" id="3375061">&#34;%s&#34;</span>&nbsp;<span class="comment" id="3375066">//&nbsp;Changed&nbsp;to&nbsp;&#34;%q&#34;&nbsp;in&nbsp;tests&nbsp;for&nbsp;better&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3375122">//&nbsp;A&nbsp;Node&nbsp;is&nbsp;an&nbsp;element&nbsp;in&nbsp;the&nbsp;parse&nbsp;tree.&nbsp;The&nbsp;interface&nbsp;is&nbsp;trivial.</span><br>
<span class="lineno"></span><span class="comment" id="3375191">//&nbsp;The&nbsp;interface&nbsp;contains&nbsp;an&nbsp;unexported&nbsp;method&nbsp;so&nbsp;that&nbsp;only</span><br>
<span class="lineno">20</span><span class="comment" id="3375251">//&nbsp;types&nbsp;local&nbsp;to&nbsp;this&nbsp;package&nbsp;can&nbsp;satisfy&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="3375298">type</span>&nbsp;<span class="ident" id="3375303">Node</span>&nbsp;<span class="keyword" id="3375308">interface</span>&nbsp;<span class="op" id="3375318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3375321">Type</span><span class="op" id="3375325">(</span><span class="op" id="3375326">)</span>&nbsp;<span class="ident" id="3375328"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3375338">String</span><span class="op" id="3375344">(</span><span class="op" id="3375345">)</span>&nbsp;<span class="builtintype" id="3375347">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3375355">//&nbsp;Copy&nbsp;does&nbsp;a&nbsp;deep&nbsp;copy&nbsp;of&nbsp;the&nbsp;Node&nbsp;and&nbsp;all&nbsp;its&nbsp;components.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3375417">//&nbsp;To&nbsp;avoid&nbsp;type&nbsp;assertions,&nbsp;some&nbsp;XxxNodes&nbsp;also&nbsp;have&nbsp;specialized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3375483">//&nbsp;CopyXxx&nbsp;methods&nbsp;that&nbsp;return&nbsp;*XxxNode.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3375525">Copy</span><span class="op" id="3375529">(</span><span class="op" id="3375530">)</span>&nbsp;<span class="ident" id="3375532"><a href="/text/template/parse/node.go.html#3375303">Node</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3375538">Position</span><span class="op" id="3375546">(</span><span class="op" id="3375547">)</span>&nbsp;<span class="ident" id="3375549"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span>&nbsp;<span class="comment" id="3375553">//&nbsp;byte&nbsp;position&nbsp;of&nbsp;start&nbsp;of&nbsp;node&nbsp;in&nbsp;full&nbsp;original&nbsp;input&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3375618">//&nbsp;tree&nbsp;returns&nbsp;the&nbsp;containing&nbsp;*Tree.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3375657">//&nbsp;It&nbsp;is&nbsp;unexported&nbsp;so&nbsp;all&nbsp;implementations&nbsp;of&nbsp;Node&nbsp;are&nbsp;in&nbsp;this&nbsp;package.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3375730">tree</span><span class="op" id="3375734">(</span><span class="op" id="3375735">)</span>&nbsp;<span class="op" id="3375737">*</span><span class="ident" id="3375738"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span><span class="op" id="3375743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3375746">//&nbsp;NodeType&nbsp;identifies&nbsp;the&nbsp;type&nbsp;of&nbsp;a&nbsp;parse&nbsp;tree&nbsp;node.</span><br>
<span class="lineno">35</span><span class="keyword" id="3375800">type</span>&nbsp;<span class="ident" id="3375805">NodeType</span>&nbsp;<span class="builtintype" id="3375814">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3375819">//&nbsp;Pos&nbsp;represents&nbsp;a&nbsp;byte&nbsp;position&nbsp;in&nbsp;the&nbsp;original&nbsp;input&nbsp;text&nbsp;from&nbsp;which</span><br>
<span class="lineno"></span><span class="comment" id="3375891">//&nbsp;this&nbsp;template&nbsp;was&nbsp;parsed.</span><br>
<span class="lineno"></span><span class="keyword" id="3375920">type</span>&nbsp;<span class="ident" id="3375925">Pos</span>&nbsp;<span class="builtintype" id="3375929">int</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="3375934">func</span>&nbsp;<span class="op" id="3375939">(</span><span class="ident" id="3375940">p</span>&nbsp;<span class="ident" id="3375942"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3375945">)</span>&nbsp;<span class="ident" id="3375947">Position</span><span class="op" id="3375955">(</span><span class="op" id="3375956">)</span>&nbsp;<span class="ident" id="3375958"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span>&nbsp;<span class="op" id="3375962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3375965">return</span>&nbsp;<span class="ident" id="3375972"><a href="/text/template/parse/node.go.html#3375940">p</a></span><br>
<span class="lineno"></span><span class="op" id="3375974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3375977">//&nbsp;Type&nbsp;returns&nbsp;itself&nbsp;and&nbsp;provides&nbsp;an&nbsp;easy&nbsp;default&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="3376044">//&nbsp;for&nbsp;embedding&nbsp;in&nbsp;a&nbsp;Node.&nbsp;Embedded&nbsp;in&nbsp;all&nbsp;non-trivial&nbsp;Nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="3376107">func</span>&nbsp;<span class="op" id="3376112">(</span><span class="ident" id="3376113">t</span>&nbsp;<span class="ident" id="3376115"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><span class="op" id="3376123">)</span>&nbsp;<span class="ident" id="3376125">Type</span><span class="op" id="3376129">(</span><span class="op" id="3376130">)</span>&nbsp;<span class="ident" id="3376132"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span>&nbsp;<span class="op" id="3376141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3376144">return</span>&nbsp;<span class="ident" id="3376151"><a href="/text/template/parse/node.go.html#3376113">t</a></span><br>
<span class="lineno"></span><span class="op" id="3376153">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="3376156">const</span>&nbsp;<span class="op" id="3376162">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376165">NodeText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3376180"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span>&nbsp;<span class="op" id="3376189">=</span>&nbsp;<span class="ident" id="3376191">iota</span>&nbsp;<span class="comment" id="3376196">//&nbsp;Plain&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376212">NodeAction</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376243">//&nbsp;A&nbsp;non-control&nbsp;action&nbsp;such&nbsp;as&nbsp;a&nbsp;field&nbsp;evaluation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376296">NodeBool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376327">//&nbsp;A&nbsp;boolean&nbsp;constant.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376351">NodeChain</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376382">//&nbsp;A&nbsp;sequence&nbsp;of&nbsp;field&nbsp;accesses.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376416">NodeCommand</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376447">//&nbsp;An&nbsp;element&nbsp;of&nbsp;a&nbsp;pipeline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376477">NodeDot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376508">//&nbsp;The&nbsp;cursor,&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376529">nodeElse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376560">//&nbsp;An&nbsp;else&nbsp;action.&nbsp;Not&nbsp;added&nbsp;to&nbsp;tree.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376599">nodeEnd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376630">//&nbsp;An&nbsp;end&nbsp;action.&nbsp;Not&nbsp;added&nbsp;to&nbsp;tree.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376668">NodeField</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376699">//&nbsp;A&nbsp;field&nbsp;or&nbsp;method&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376727">NodeIdentifier</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376758">//&nbsp;An&nbsp;identifier;&nbsp;always&nbsp;a&nbsp;function&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376801">NodeIf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376832">//&nbsp;An&nbsp;if&nbsp;action.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376850">NodeList</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376881">//&nbsp;A&nbsp;list&nbsp;of&nbsp;Nodes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376902">NodeNil</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376933">//&nbsp;An&nbsp;untyped&nbsp;nil&nbsp;constant.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3376962">NodeNumber</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3376993">//&nbsp;A&nbsp;numerical&nbsp;constant.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377019">NodePipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377050">//&nbsp;A&nbsp;pipeline&nbsp;of&nbsp;commands.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377078">NodeRange</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377109">//&nbsp;A&nbsp;range&nbsp;action.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377129">NodeString</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377160">//&nbsp;A&nbsp;string&nbsp;constant.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377183">NodeTemplate</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377214">//&nbsp;A&nbsp;template&nbsp;invocation&nbsp;action.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377248">NodeVariable</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377279">//&nbsp;A&nbsp;$&nbsp;variable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377297">NodeWith</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3377328">//&nbsp;A&nbsp;with&nbsp;action.</span><br>
<span class="lineno"></span><span class="op" id="3377346">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3377349">//&nbsp;Nodes.</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="3377360">//&nbsp;ListNode&nbsp;holds&nbsp;a&nbsp;sequence&nbsp;of&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="3377399">type</span>&nbsp;<span class="ident" id="3377404">ListNode</span>&nbsp;<span class="keyword" id="3377413">struct</span>&nbsp;<span class="op" id="3377420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377423"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377433"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377438">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3377444">*</span><span class="ident" id="3377445"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377451">Nodes</span>&nbsp;<span class="op" id="3377457">[</span><span class="op" id="3377458">]</span><span class="ident" id="3377459"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="comment" id="3377464">//&nbsp;The&nbsp;element&nbsp;nodes&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno"></span><span class="op" id="3377503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3377506">func</span>&nbsp;<span class="op" id="3377511">(</span><span class="ident" id="3377512">t</span>&nbsp;<span class="op" id="3377514">*</span><span class="ident" id="3377515"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3377519">)</span>&nbsp;<span class="ident" id="3377521">newList</span><span class="op" id="3377528">(</span><span class="ident" id="3377529">pos</span>&nbsp;<span class="ident" id="3377533"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3377536">)</span>&nbsp;<span class="op" id="3377538">*</span><span class="ident" id="3377539"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span>&nbsp;<span class="op" id="3377548">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377551">return</span>&nbsp;<span class="op" id="3377558">&amp;</span><span class="ident" id="3377559"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span><span class="op" id="3377567">{</span><span class="ident" id="3377568">tr</span><span class="op" id="3377570">:</span>&nbsp;<span class="ident" id="3377572"><a href="/text/template/parse/node.go.html#3377512">t</a></span><span class="op" id="3377573">,</span>&nbsp;<span class="ident" id="3377575">NodeType</span><span class="op" id="3377583">:</span>&nbsp;<span class="ident" id="3377585"><a href="/text/template/parse/node.go.html#3376850">NodeList</a></span><span class="op" id="3377593">,</span>&nbsp;<span class="ident" id="3377595">Pos</span><span class="op" id="3377598">:</span>&nbsp;<span class="ident" id="3377600"><a href="/text/template/parse/node.go.html#3377529">pos</a></span><span class="op" id="3377603">}</span><br>
<span class="lineno"></span><span class="op" id="3377605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3377608">func</span>&nbsp;<span class="op" id="3377613">(</span><span class="ident" id="3377614">l</span>&nbsp;<span class="op" id="3377616">*</span><span class="ident" id="3377617"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span><span class="op" id="3377625">)</span>&nbsp;<span class="builtinfunc" id="3377627">append</span><span class="op" id="3377633">(</span><span class="ident" id="3377634">n</span>&nbsp;<span class="ident" id="3377636"><a href="/text/template/parse/node.go.html#3375303">Node</a></span><span class="op" id="3377640">)</span>&nbsp;<span class="op" id="3377642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377645"><a href="/text/template/parse/node.go.html#3377614">l</a></span><span class="op" id="3377646">.</span><span class="ident" id="3377647">Nodes</span>&nbsp;<span class="op" id="3377653">=</span>&nbsp;<span class="builtinfunc" id="3377655">append</span><span class="op" id="3377661">(</span><span class="ident" id="3377662"><a href="/text/template/parse/node.go.html#3377614">l</a></span><span class="op" id="3377663">.</span><span class="ident" id="3377664">Nodes</span><span class="op" id="3377669">,</span>&nbsp;<span class="ident" id="3377671"><a href="/text/template/parse/node.go.html#3377634">n</a></span><span class="op" id="3377672">)</span><br>
<span class="lineno">90</span><span class="op" id="3377674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3377677">func</span>&nbsp;<span class="op" id="3377682">(</span><span class="ident" id="3377683">l</span>&nbsp;<span class="op" id="3377685">*</span><span class="ident" id="3377686"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span><span class="op" id="3377694">)</span>&nbsp;<span class="ident" id="3377696">tree</span><span class="op" id="3377700">(</span><span class="op" id="3377701">)</span>&nbsp;<span class="op" id="3377703">*</span><span class="ident" id="3377704"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3377709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377712">return</span>&nbsp;<span class="ident" id="3377719"><a href="/text/template/parse/node.go.html#3377683">l</a></span><span class="op" id="3377720">.</span><span class="ident" id="3377721">tr</span><br>
<span class="lineno"></span><span class="op" id="3377724">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="3377727">func</span>&nbsp;<span class="op" id="3377732">(</span><span class="ident" id="3377733">l</span>&nbsp;<span class="op" id="3377735">*</span><span class="ident" id="3377736"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span><span class="op" id="3377744">)</span>&nbsp;<span class="ident" id="3377746">String</span><span class="op" id="3377752">(</span><span class="op" id="3377753">)</span>&nbsp;<span class="builtintype" id="3377755">string</span>&nbsp;<span class="op" id="3377762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377765">b</span>&nbsp;<span class="op" id="3377767">:=</span>&nbsp;<span class="builtinfunc" id="3377770">new</span><span class="op" id="3377773">(</span><span class="ident" id="3377774"><a href="/text/template/parse/node.go.html#3375004">bytes</a></span><span class="op" id="3377779">.</span><span class="ident" id="3377780">Buffer</span><span class="op" id="3377786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377789">for</span>&nbsp;<span class="ident" id="3377793">_</span><span class="op" id="3377794">,</span>&nbsp;<span class="ident" id="3377796">n</span>&nbsp;<span class="op" id="3377798">:=</span>&nbsp;<span class="keyword" id="3377801">range</span>&nbsp;<span class="ident" id="3377807"><a href="/text/template/parse/node.go.html#3377733">l</a></span><span class="op" id="3377808">.</span><span class="ident" id="3377809">Nodes</span>&nbsp;<span class="op" id="3377815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377819"><a href="/text/template/parse/node.go.html#3375013">fmt</a></span><span class="op" id="3377822">.</span><span class="ident" id="3377823">Fprint</span><span class="op" id="3377829">(</span><span class="ident" id="3377830"><a href="/text/template/parse/node.go.html#3377765">b</a></span><span class="op" id="3377831">,</span>&nbsp;<span class="ident" id="3377833"><a href="/text/template/parse/node.go.html#3377796">n</a></span><span class="op" id="3377834">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3377837">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377840">return</span>&nbsp;<span class="ident" id="3377847"><a href="/text/template/parse/node.go.html#3377765">b</a></span><span class="op" id="3377848">.</span><span class="ident" id="3377849">String</span><span class="op" id="3377855">(</span><span class="op" id="3377856">)</span><br>
<span class="lineno"></span><span class="op" id="3377858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3377861">func</span>&nbsp;<span class="op" id="3377866">(</span><span class="ident" id="3377867">l</span>&nbsp;<span class="op" id="3377869">*</span><span class="ident" id="3377870"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span><span class="op" id="3377878">)</span>&nbsp;<span class="ident" id="3377880">CopyList</span><span class="op" id="3377888">(</span><span class="op" id="3377889">)</span>&nbsp;<span class="op" id="3377891">*</span><span class="ident" id="3377892"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span>&nbsp;<span class="op" id="3377901">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377904">if</span>&nbsp;<span class="ident" id="3377907"><a href="/text/template/parse/node.go.html#3377867">l</a></span>&nbsp;<span class="op" id="3377909">==</span>&nbsp;<span class="ident" id="3377912">nil</span>&nbsp;<span class="op" id="3377916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377920">return</span>&nbsp;<span class="ident" id="3377927"><a href="/text/template/parse/node.go.html#3377867">l</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3377930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377933">n</span>&nbsp;<span class="op" id="3377935">:=</span>&nbsp;<span class="ident" id="3377938"><a href="/text/template/parse/node.go.html#3377867">l</a></span><span class="op" id="3377939">.</span><span class="ident" id="3377940">tr</span><span class="op" id="3377942">.</span><span class="ident" id="3377943">newList</span><span class="op" id="3377950">(</span><span class="ident" id="3377951"><a href="/text/template/parse/node.go.html#3377867">l</a></span><span class="op" id="3377952">.</span><span class="ident" id="3377953">Pos</span><span class="op" id="3377956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3377959">for</span>&nbsp;<span class="ident" id="3377963">_</span><span class="op" id="3377964">,</span>&nbsp;<span class="ident" id="3377966">elem</span>&nbsp;<span class="op" id="3377971">:=</span>&nbsp;<span class="keyword" id="3377974">range</span>&nbsp;<span class="ident" id="3377980"><a href="/text/template/parse/node.go.html#3377867">l</a></span><span class="op" id="3377981">.</span><span class="ident" id="3377982">Nodes</span>&nbsp;<span class="op" id="3377988">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3377992"><a href="/text/template/parse/node.go.html#3377933">n</a></span><span class="op" id="3377993">.</span><span class="builtinfunc" id="3377994">append</span><span class="op" id="3378000">(</span><span class="ident" id="3378001"><a href="/text/template/parse/node.go.html#3377966">elem</a></span><span class="op" id="3378005">.</span><span class="ident" id="3378006">Copy</span><span class="op" id="3378010">(</span><span class="op" id="3378011">)</span><span class="op" id="3378012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3378015">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3378018">return</span>&nbsp;<span class="ident" id="3378025"><a href="/text/template/parse/node.go.html#3377933">n</a></span><br>
<span class="lineno"></span><span class="op" id="3378027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="3378030">func</span>&nbsp;<span class="op" id="3378035">(</span><span class="ident" id="3378036">l</span>&nbsp;<span class="op" id="3378038">*</span><span class="ident" id="3378039"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span><span class="op" id="3378047">)</span>&nbsp;<span class="ident" id="3378049">Copy</span><span class="op" id="3378053">(</span><span class="op" id="3378054">)</span>&nbsp;<span class="ident" id="3378056"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3378061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3378064">return</span>&nbsp;<span class="ident" id="3378071"><a href="/text/template/parse/node.go.html#3378036">l</a></span><span class="op" id="3378072">.</span><span class="ident" id="3378073">CopyList</span><span class="op" id="3378081">(</span><span class="op" id="3378082">)</span><br>
<span class="lineno"></span><span class="op" id="3378084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3378087">//&nbsp;TextNode&nbsp;holds&nbsp;plain&nbsp;text.</span><br>
<span class="lineno">120</span><span class="keyword" id="3378117">type</span>&nbsp;<span class="ident" id="3378122">TextNode</span>&nbsp;<span class="keyword" id="3378131">struct</span>&nbsp;<span class="op" id="3378138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3378141"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3378151"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3378156">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3378161">*</span><span class="ident" id="3378162"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3378168">Text</span>&nbsp;<span class="op" id="3378173">[</span><span class="op" id="3378174">]</span><span class="builtintype" id="3378175">byte</span>&nbsp;<span class="comment" id="3378180">//&nbsp;The&nbsp;text;&nbsp;may&nbsp;span&nbsp;newlines.</span><br>
<span class="lineno">125</span><span class="op" id="3378212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3378215">func</span>&nbsp;<span class="op" id="3378220">(</span><span class="ident" id="3378221">t</span>&nbsp;<span class="op" id="3378223">*</span><span class="ident" id="3378224"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3378228">)</span>&nbsp;<span class="ident" id="3378230">newText</span><span class="op" id="3378237">(</span><span class="ident" id="3378238">pos</span>&nbsp;<span class="ident" id="3378242"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3378245">,</span>&nbsp;<span class="ident" id="3378247">text</span>&nbsp;<span class="builtintype" id="3378252">string</span><span class="op" id="3378258">)</span>&nbsp;<span class="op" id="3378260">*</span><span class="ident" id="3378261"><a href="/text/template/parse/node.go.html#3378122">TextNode</a></span>&nbsp;<span class="op" id="3378270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3378273">return</span>&nbsp;<span class="op" id="3378280">&amp;</span><span class="ident" id="3378281"><a href="/text/template/parse/node.go.html#3378122">TextNode</a></span><span class="op" id="3378289">{</span><span class="ident" id="3378290">tr</span><span class="op" id="3378292">:</span>&nbsp;<span class="ident" id="3378294"><a href="/text/template/parse/node.go.html#3378221">t</a></span><span class="op" id="3378295">,</span>&nbsp;<span class="ident" id="3378297">NodeType</span><span class="op" id="3378305">:</span>&nbsp;<span class="ident" id="3378307"><a href="/text/template/parse/node.go.html#3376165">NodeText</a></span><span class="op" id="3378315">,</span>&nbsp;<span class="ident" id="3378317">Pos</span><span class="op" id="3378320">:</span>&nbsp;<span class="ident" id="3378322"><a href="/text/template/parse/node.go.html#3378238">pos</a></span><span class="op" id="3378325">,</span>&nbsp;<span class="ident" id="3378327">Text</span><span class="op" id="3378331">:</span>&nbsp;<span class="op" id="3378333">[</span><span class="op" id="3378334">]</span><span class="builtintype" id="3378335">byte</span><span class="op" id="3378339">(</span><span class="ident" id="3378340"><a href="/text/template/parse/node.go.html#3378247">text</a></span><span class="op" id="3378344">)</span><span class="op" id="3378345">}</span><br>
<span class="lineno"></span><span class="op" id="3378347">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="3378350">func</span>&nbsp;<span class="op" id="3378355">(</span><span class="ident" id="3378356">t</span>&nbsp;<span class="op" id="3378358">*</span><span class="ident" id="3378359"><a href="/text/template/parse/node.go.html#3378122">TextNode</a></span><span class="op" id="3378367">)</span>&nbsp;<span class="ident" id="3378369">String</span><span class="op" id="3378375">(</span><span class="op" id="3378376">)</span>&nbsp;<span class="builtintype" id="3378378">string</span>&nbsp;<span class="op" id="3378385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3378388">return</span>&nbsp;<span class="ident" id="3378395"><a href="/text/template/parse/node.go.html#3375013">fmt</a></span><span class="op" id="3378398">.</span><span class="ident" id="3378399">Sprintf</span><span class="op" id="3378406">(</span><span class="ident" id="3378407"><a href="/text/template/parse/node.go.html#3375048">textFormat</a></span><span class="op" id="3378417">,</span>&nbsp;<span class="ident" id="3378419"><a href="/text/template/parse/node.go.html#3378356">t</a></span><span class="op" id="3378420">.</span><span class="ident" id="3378421">Text</span><span class="op" id="3378425">)</span><br>
<span class="lineno"></span><span class="op" id="3378427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="3378430">func</span>&nbsp;<span class="op" id="3378435">(</span><span class="ident" id="3378436">t</span>&nbsp;<span class="op" id="3378438">*</span><span class="ident" id="3378439"><a href="/text/template/parse/node.go.html#3378122">TextNode</a></span><span class="op" id="3378447">)</span>&nbsp;<span class="ident" id="3378449">tree</span><span class="op" id="3378453">(</span><span class="op" id="3378454">)</span>&nbsp;<span class="op" id="3378456">*</span><span class="ident" id="3378457"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3378462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3378465">return</span>&nbsp;<span class="ident" id="3378472"><a href="/text/template/parse/node.go.html#3378436">t</a></span><span class="op" id="3378473">.</span><span class="ident" id="3378474">tr</span><br>
<span class="lineno"></span><span class="op" id="3378477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3378480">func</span>&nbsp;<span class="op" id="3378485">(</span><span class="ident" id="3378486">t</span>&nbsp;<span class="op" id="3378488">*</span><span class="ident" id="3378489"><a href="/text/template/parse/node.go.html#3378122">TextNode</a></span><span class="op" id="3378497">)</span>&nbsp;<span class="ident" id="3378499">Copy</span><span class="op" id="3378503">(</span><span class="op" id="3378504">)</span>&nbsp;<span class="ident" id="3378506"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3378511">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3378514">return</span>&nbsp;<span class="op" id="3378521">&amp;</span><span class="ident" id="3378522"><a href="/text/template/parse/node.go.html#3378122">TextNode</a></span><span class="op" id="3378530">{</span><span class="ident" id="3378531">tr</span><span class="op" id="3378533">:</span>&nbsp;<span class="ident" id="3378535"><a href="/text/template/parse/node.go.html#3378486">t</a></span><span class="op" id="3378536">.</span><span class="ident" id="3378537">tr</span><span class="op" id="3378539">,</span>&nbsp;<span class="ident" id="3378541">NodeType</span><span class="op" id="3378549">:</span>&nbsp;<span class="ident" id="3378551"><a href="/text/template/parse/node.go.html#3376165">NodeText</a></span><span class="op" id="3378559">,</span>&nbsp;<span class="ident" id="3378561">Pos</span><span class="op" id="3378564">:</span>&nbsp;<span class="ident" id="3378566"><a href="/text/template/parse/node.go.html#3378486">t</a></span><span class="op" id="3378567">.</span><span class="ident" id="3378568">Pos</span><span class="op" id="3378571">,</span>&nbsp;<span class="ident" id="3378573">Text</span><span class="op" id="3378577">:</span>&nbsp;<span class="builtinfunc" id="3378579">append</span><span class="op" id="3378585">(</span><span class="op" id="3378586">[</span><span class="op" id="3378587">]</span><span class="builtintype" id="3378588">byte</span><span class="op" id="3378592">{</span><span class="op" id="3378593">}</span><span class="op" id="3378594">,</span>&nbsp;<span class="ident" id="3378596"><a href="/text/template/parse/node.go.html#3378486">t</a></span><span class="op" id="3378597">.</span><span class="ident" id="3378598">Text</span><span class="op" id="3378602">...</span><span class="op" id="3378605">)</span><span class="op" id="3378606">}</span><br>
<span class="lineno"></span><span class="op" id="3378608">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3378611">//&nbsp;PipeNode&nbsp;holds&nbsp;a&nbsp;pipeline&nbsp;with&nbsp;optional&nbsp;declaration</span><br>
<span class="lineno"></span><span class="keyword" id="3378666">type</span>&nbsp;<span class="ident" id="3378671">PipeNode</span>&nbsp;<span class="keyword" id="3378680">struct</span>&nbsp;<span class="op" id="3378687">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3378690"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3378700"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3378705">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3378710">*</span><span class="ident" id="3378711"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3378717">Line</span>&nbsp;<span class="builtintype" id="3378722">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3378738">//&nbsp;The&nbsp;line&nbsp;number&nbsp;in&nbsp;the&nbsp;input&nbsp;(deprecated;&nbsp;kept&nbsp;for&nbsp;compatibility)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3378808">Decl</span>&nbsp;<span class="op" id="3378813">[</span><span class="op" id="3378814">]</span><span class="op" id="3378815">*</span><span class="ident" id="3378816"><a href="/text/template/parse/node.go.html#3382630">VariableNode</a></span>&nbsp;<span class="comment" id="3378829">//&nbsp;Variable&nbsp;declarations&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3378873">Cmds</span>&nbsp;<span class="op" id="3378878">[</span><span class="op" id="3378879">]</span><span class="op" id="3378880">*</span><span class="ident" id="3378881"><a href="/text/template/parse/node.go.html#3380702">CommandNode</a></span>&nbsp;&nbsp;<span class="comment" id="3378894">//&nbsp;The&nbsp;commands&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno"></span><span class="op" id="3378928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3378931">func</span>&nbsp;<span class="op" id="3378936">(</span><span class="ident" id="3378937">t</span>&nbsp;<span class="op" id="3378939">*</span><span class="ident" id="3378940"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3378944">)</span>&nbsp;<span class="ident" id="3378946">newPipeline</span><span class="op" id="3378957">(</span><span class="ident" id="3378958">pos</span>&nbsp;<span class="ident" id="3378962"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3378965">,</span>&nbsp;<span class="ident" id="3378967">line</span>&nbsp;<span class="builtintype" id="3378972">int</span><span class="op" id="3378975">,</span>&nbsp;<span class="ident" id="3378977">decl</span>&nbsp;<span class="op" id="3378982">[</span><span class="op" id="3378983">]</span><span class="op" id="3378984">*</span><span class="ident" id="3378985"><a href="/text/template/parse/node.go.html#3382630">VariableNode</a></span><span class="op" id="3378997">)</span>&nbsp;<span class="op" id="3378999">*</span><span class="ident" id="3379000"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span>&nbsp;<span class="op" id="3379009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379012">return</span>&nbsp;<span class="op" id="3379019">&amp;</span><span class="ident" id="3379020"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3379028">{</span><span class="ident" id="3379029">tr</span><span class="op" id="3379031">:</span>&nbsp;<span class="ident" id="3379033"><a href="/text/template/parse/node.go.html#3378937">t</a></span><span class="op" id="3379034">,</span>&nbsp;<span class="ident" id="3379036">NodeType</span><span class="op" id="3379044">:</span>&nbsp;<span class="ident" id="3379046"><a href="/text/template/parse/node.go.html#3377019">NodePipe</a></span><span class="op" id="3379054">,</span>&nbsp;<span class="ident" id="3379056">Pos</span><span class="op" id="3379059">:</span>&nbsp;<span class="ident" id="3379061"><a href="/text/template/parse/node.go.html#3378958">pos</a></span><span class="op" id="3379064">,</span>&nbsp;<span class="ident" id="3379066">Line</span><span class="op" id="3379070">:</span>&nbsp;<span class="ident" id="3379072"><a href="/text/template/parse/node.go.html#3378967">line</a></span><span class="op" id="3379076">,</span>&nbsp;<span class="ident" id="3379078">Decl</span><span class="op" id="3379082">:</span>&nbsp;<span class="ident" id="3379084"><a href="/text/template/parse/node.go.html#3378977">decl</a></span><span class="op" id="3379088">}</span><br>
<span class="lineno">155</span><span class="op" id="3379090">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3379093">func</span>&nbsp;<span class="op" id="3379098">(</span><span class="ident" id="3379099">p</span>&nbsp;<span class="op" id="3379101">*</span><span class="ident" id="3379102"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3379110">)</span>&nbsp;<span class="builtinfunc" id="3379112">append</span><span class="op" id="3379118">(</span><span class="ident" id="3379119">command</span>&nbsp;<span class="op" id="3379127">*</span><span class="ident" id="3379128"><a href="/text/template/parse/node.go.html#3380702">CommandNode</a></span><span class="op" id="3379139">)</span>&nbsp;<span class="op" id="3379141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3379144"><a href="/text/template/parse/node.go.html#3379099">p</a></span><span class="op" id="3379145">.</span><span class="ident" id="3379146">Cmds</span>&nbsp;<span class="op" id="3379151">=</span>&nbsp;<span class="builtinfunc" id="3379153">append</span><span class="op" id="3379159">(</span><span class="ident" id="3379160"><a href="/text/template/parse/node.go.html#3379099">p</a></span><span class="op" id="3379161">.</span><span class="ident" id="3379162">Cmds</span><span class="op" id="3379166">,</span>&nbsp;<span class="ident" id="3379168"><a href="/text/template/parse/node.go.html#3379119">command</a></span><span class="op" id="3379175">)</span><br>
<span class="lineno"></span><span class="op" id="3379177">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="keyword" id="3379180">func</span>&nbsp;<span class="op" id="3379185">(</span><span class="ident" id="3379186">p</span>&nbsp;<span class="op" id="3379188">*</span><span class="ident" id="3379189"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3379197">)</span>&nbsp;<span class="ident" id="3379199">String</span><span class="op" id="3379205">(</span><span class="op" id="3379206">)</span>&nbsp;<span class="builtintype" id="3379208">string</span>&nbsp;<span class="op" id="3379215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3379218">s</span>&nbsp;<span class="op" id="3379220">:=</span>&nbsp;<span class="string" id="3379223">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379227">if</span>&nbsp;<span class="builtinfunc" id="3379230">len</span><span class="op" id="3379233">(</span><span class="ident" id="3379234"><a href="/text/template/parse/node.go.html#3379186">p</a></span><span class="op" id="3379235">.</span><span class="ident" id="3379236">Decl</span><span class="op" id="3379240">)</span>&nbsp;<span class="op" id="3379242">&gt;</span>&nbsp;<span class="num" id="3379244">0</span>&nbsp;<span class="op" id="3379246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379250">for</span>&nbsp;<span class="ident" id="3379254">i</span><span class="op" id="3379255">,</span>&nbsp;<span class="ident" id="3379257">v</span>&nbsp;<span class="op" id="3379259">:=</span>&nbsp;<span class="keyword" id="3379262">range</span>&nbsp;<span class="ident" id="3379268"><a href="/text/template/parse/node.go.html#3379186">p</a></span><span class="op" id="3379269">.</span><span class="ident" id="3379270">Decl</span>&nbsp;<span class="op" id="3379275">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379280">if</span>&nbsp;<span class="ident" id="3379283"><a href="/text/template/parse/node.go.html#3379254">i</a></span>&nbsp;<span class="op" id="3379285">&gt;</span>&nbsp;<span class="num" id="3379287">0</span>&nbsp;<span class="op" id="3379289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3379295"><a href="/text/template/parse/node.go.html#3379218">s</a></span>&nbsp;<span class="op" id="3379297">+=</span>&nbsp;<span class="string" id="3379300">&#34;,&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3379308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3379313"><a href="/text/template/parse/node.go.html#3379218">s</a></span>&nbsp;<span class="op" id="3379315">+=</span>&nbsp;<span class="ident" id="3379318"><a href="/text/template/parse/node.go.html#3379257">v</a></span><span class="op" id="3379319">.</span><span class="ident" id="3379320">String</span><span class="op" id="3379326">(</span><span class="op" id="3379327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3379331">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3379335"><a href="/text/template/parse/node.go.html#3379218">s</a></span>&nbsp;<span class="op" id="3379337">+=</span>&nbsp;<span class="string" id="3379340">&#34;&nbsp;:=&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3379348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379351">for</span>&nbsp;<span class="ident" id="3379355">i</span><span class="op" id="3379356">,</span>&nbsp;<span class="ident" id="3379358">c</span>&nbsp;<span class="op" id="3379360">:=</span>&nbsp;<span class="keyword" id="3379363">range</span>&nbsp;<span class="ident" id="3379369"><a href="/text/template/parse/node.go.html#3379186">p</a></span><span class="op" id="3379370">.</span><span class="ident" id="3379371">Cmds</span>&nbsp;<span class="op" id="3379376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379380">if</span>&nbsp;<span class="ident" id="3379383"><a href="/text/template/parse/node.go.html#3379355">i</a></span>&nbsp;<span class="op" id="3379385">&gt;</span>&nbsp;<span class="num" id="3379387">0</span>&nbsp;<span class="op" id="3379389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3379394"><a href="/text/template/parse/node.go.html#3379218">s</a></span>&nbsp;<span class="op" id="3379396">+=</span>&nbsp;<span class="string" id="3379399">&#34;&nbsp;|&nbsp;&#34;</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3379407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3379411"><a href="/text/template/parse/node.go.html#3379218">s</a></span>&nbsp;<span class="op" id="3379413">+=</span>&nbsp;<span class="ident" id="3379416"><a href="/text/template/parse/node.go.html#3379358">c</a></span><span class="op" id="3379417">.</span><span class="ident" id="3379418">String</span><span class="op" id="3379424">(</span><span class="op" id="3379425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3379428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379431">return</span>&nbsp;<span class="ident" id="3379438"><a href="/text/template/parse/node.go.html#3379218">s</a></span><br>
<span class="lineno"></span><span class="op" id="3379440">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="3379443">func</span>&nbsp;<span class="op" id="3379448">(</span><span class="ident" id="3379449">p</span>&nbsp;<span class="op" id="3379451">*</span><span class="ident" id="3379452"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3379460">)</span>&nbsp;<span class="ident" id="3379462">tree</span><span class="op" id="3379466">(</span><span class="op" id="3379467">)</span>&nbsp;<span class="op" id="3379469">*</span><span class="ident" id="3379470"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3379475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379478">return</span>&nbsp;<span class="ident" id="3379485"><a href="/text/template/parse/node.go.html#3379449">p</a></span><span class="op" id="3379486">.</span><span class="ident" id="3379487">tr</span><br>
<span class="lineno"></span><span class="op" id="3379490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="3379493">func</span>&nbsp;<span class="op" id="3379498">(</span><span class="ident" id="3379499">p</span>&nbsp;<span class="op" id="3379501">*</span><span class="ident" id="3379502"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3379510">)</span>&nbsp;<span class="ident" id="3379512">CopyPipe</span><span class="op" id="3379520">(</span><span class="op" id="3379521">)</span>&nbsp;<span class="op" id="3379523">*</span><span class="ident" id="3379524"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span>&nbsp;<span class="op" id="3379533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379536">if</span>&nbsp;<span class="ident" id="3379539"><a href="/text/template/parse/node.go.html#3379499">p</a></span>&nbsp;<span class="op" id="3379541">==</span>&nbsp;<span class="ident" id="3379544">nil</span>&nbsp;<span class="op" id="3379548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379552">return</span>&nbsp;<span class="ident" id="3379559"><a href="/text/template/parse/node.go.html#3379499">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3379562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379565">var</span>&nbsp;<span class="ident" id="3379569">decl</span>&nbsp;<span class="op" id="3379574">[</span><span class="op" id="3379575">]</span><span class="op" id="3379576">*</span><span class="ident" id="3379577"><a href="/text/template/parse/node.go.html#3382630">VariableNode</a></span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379591">for</span>&nbsp;<span class="ident" id="3379595">_</span><span class="op" id="3379596">,</span>&nbsp;<span class="ident" id="3379598">d</span>&nbsp;<span class="op" id="3379600">:=</span>&nbsp;<span class="keyword" id="3379603">range</span>&nbsp;<span class="ident" id="3379609"><a href="/text/template/parse/node.go.html#3379499">p</a></span><span class="op" id="3379610">.</span><span class="ident" id="3379611">Decl</span>&nbsp;<span class="op" id="3379616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3379620"><a href="/text/template/parse/node.go.html#3379569">decl</a></span>&nbsp;<span class="op" id="3379625">=</span>&nbsp;<span class="builtinfunc" id="3379627">append</span><span class="op" id="3379633">(</span><span class="ident" id="3379634"><a href="/text/template/parse/node.go.html#3379569">decl</a></span><span class="op" id="3379638">,</span>&nbsp;<span class="ident" id="3379640"><a href="/text/template/parse/node.go.html#3379598">d</a></span><span class="op" id="3379641">.</span><span class="ident" id="3379642">Copy</span><span class="op" id="3379646">(</span><span class="op" id="3379647">)</span><span class="op" id="3379648">.</span><span class="op" id="3379649">(</span><span class="op" id="3379650">*</span><span class="ident" id="3379651"><a href="/text/template/parse/node.go.html#3382630">VariableNode</a></span><span class="op" id="3379663">)</span><span class="op" id="3379664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3379667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3379670">n</span>&nbsp;<span class="op" id="3379672">:=</span>&nbsp;<span class="ident" id="3379675"><a href="/text/template/parse/node.go.html#3379499">p</a></span><span class="op" id="3379676">.</span><span class="ident" id="3379677">tr</span><span class="op" id="3379679">.</span><span class="ident" id="3379680">newPipeline</span><span class="op" id="3379691">(</span><span class="ident" id="3379692"><a href="/text/template/parse/node.go.html#3379499">p</a></span><span class="op" id="3379693">.</span><span class="ident" id="3379694">Pos</span><span class="op" id="3379697">,</span>&nbsp;<span class="ident" id="3379699"><a href="/text/template/parse/node.go.html#3379499">p</a></span><span class="op" id="3379700">.</span><span class="ident" id="3379701">Line</span><span class="op" id="3379705">,</span>&nbsp;<span class="ident" id="3379707"><a href="/text/template/parse/node.go.html#3379569">decl</a></span><span class="op" id="3379711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379714">for</span>&nbsp;<span class="ident" id="3379718">_</span><span class="op" id="3379719">,</span>&nbsp;<span class="ident" id="3379721">c</span>&nbsp;<span class="op" id="3379723">:=</span>&nbsp;<span class="keyword" id="3379726">range</span>&nbsp;<span class="ident" id="3379732"><a href="/text/template/parse/node.go.html#3379499">p</a></span><span class="op" id="3379733">.</span><span class="ident" id="3379734">Cmds</span>&nbsp;<span class="op" id="3379739">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3379743"><a href="/text/template/parse/node.go.html#3379670">n</a></span><span class="op" id="3379744">.</span><span class="builtinfunc" id="3379745">append</span><span class="op" id="3379751">(</span><span class="ident" id="3379752"><a href="/text/template/parse/node.go.html#3379721">c</a></span><span class="op" id="3379753">.</span><span class="ident" id="3379754">Copy</span><span class="op" id="3379758">(</span><span class="op" id="3379759">)</span><span class="op" id="3379760">.</span><span class="op" id="3379761">(</span><span class="op" id="3379762">*</span><span class="ident" id="3379763"><a href="/text/template/parse/node.go.html#3380702">CommandNode</a></span><span class="op" id="3379774">)</span><span class="op" id="3379775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3379778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379781">return</span>&nbsp;<span class="ident" id="3379788"><a href="/text/template/parse/node.go.html#3379670">n</a></span><br>
<span class="lineno"></span><span class="op" id="3379790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="3379793">func</span>&nbsp;<span class="op" id="3379798">(</span><span class="ident" id="3379799">p</span>&nbsp;<span class="op" id="3379801">*</span><span class="ident" id="3379802"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3379810">)</span>&nbsp;<span class="ident" id="3379812">Copy</span><span class="op" id="3379816">(</span><span class="op" id="3379817">)</span>&nbsp;<span class="ident" id="3379819"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3379824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3379827">return</span>&nbsp;<span class="ident" id="3379834"><a href="/text/template/parse/node.go.html#3379799">p</a></span><span class="op" id="3379835">.</span><span class="ident" id="3379836">CopyPipe</span><span class="op" id="3379844">(</span><span class="op" id="3379845">)</span><br>
<span class="lineno"></span><span class="op" id="3379847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3379850">//&nbsp;ActionNode&nbsp;holds&nbsp;an&nbsp;action&nbsp;(something&nbsp;bounded&nbsp;by&nbsp;delimiters).</span><br>
<span class="lineno">205</span><span class="comment" id="3379915">//&nbsp;Control&nbsp;actions&nbsp;have&nbsp;their&nbsp;own&nbsp;nodes;&nbsp;ActionNode&nbsp;represents&nbsp;simple</span><br>
<span class="lineno"></span><span class="comment" id="3379985">//&nbsp;ones&nbsp;such&nbsp;as&nbsp;field&nbsp;evaluations&nbsp;and&nbsp;parenthesized&nbsp;pipelines.</span><br>
<span class="lineno"></span><span class="keyword" id="3380048">type</span>&nbsp;<span class="ident" id="3380053">ActionNode</span>&nbsp;<span class="keyword" id="3380064">struct</span>&nbsp;<span class="op" id="3380071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3380074"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3380084"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3380089">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3380094">*</span><span class="ident" id="3380095"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3380101">Line</span>&nbsp;<span class="builtintype" id="3380106">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3380116">//&nbsp;The&nbsp;line&nbsp;number&nbsp;in&nbsp;the&nbsp;input&nbsp;(deprecated;&nbsp;kept&nbsp;for&nbsp;compatibility)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3380186">Pipe</span>&nbsp;<span class="op" id="3380191">*</span><span class="ident" id="3380192"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span>&nbsp;<span class="comment" id="3380201">//&nbsp;The&nbsp;pipeline&nbsp;in&nbsp;the&nbsp;action.</span><br>
<span class="lineno"></span><span class="op" id="3380232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="3380235">func</span>&nbsp;<span class="op" id="3380240">(</span><span class="ident" id="3380241">t</span>&nbsp;<span class="op" id="3380243">*</span><span class="ident" id="3380244"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3380248">)</span>&nbsp;<span class="ident" id="3380250">newAction</span><span class="op" id="3380259">(</span><span class="ident" id="3380260">pos</span>&nbsp;<span class="ident" id="3380264"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3380267">,</span>&nbsp;<span class="ident" id="3380269">line</span>&nbsp;<span class="builtintype" id="3380274">int</span><span class="op" id="3380277">,</span>&nbsp;<span class="ident" id="3380279">pipe</span>&nbsp;<span class="op" id="3380284">*</span><span class="ident" id="3380285"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3380293">)</span>&nbsp;<span class="op" id="3380295">*</span><span class="ident" id="3380296"><a href="/text/template/parse/node.go.html#3380053">ActionNode</a></span>&nbsp;<span class="op" id="3380307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3380310">return</span>&nbsp;<span class="op" id="3380317">&amp;</span><span class="ident" id="3380318"><a href="/text/template/parse/node.go.html#3380053">ActionNode</a></span><span class="op" id="3380328">{</span><span class="ident" id="3380329">tr</span><span class="op" id="3380331">:</span>&nbsp;<span class="ident" id="3380333"><a href="/text/template/parse/node.go.html#3380241">t</a></span><span class="op" id="3380334">,</span>&nbsp;<span class="ident" id="3380336">NodeType</span><span class="op" id="3380344">:</span>&nbsp;<span class="ident" id="3380346"><a href="/text/template/parse/node.go.html#3376212">NodeAction</a></span><span class="op" id="3380356">,</span>&nbsp;<span class="ident" id="3380358">Pos</span><span class="op" id="3380361">:</span>&nbsp;<span class="ident" id="3380363"><a href="/text/template/parse/node.go.html#3380260">pos</a></span><span class="op" id="3380366">,</span>&nbsp;<span class="ident" id="3380368">Line</span><span class="op" id="3380372">:</span>&nbsp;<span class="ident" id="3380374"><a href="/text/template/parse/node.go.html#3380269">line</a></span><span class="op" id="3380378">,</span>&nbsp;<span class="ident" id="3380380">Pipe</span><span class="op" id="3380384">:</span>&nbsp;<span class="ident" id="3380386"><a href="/text/template/parse/node.go.html#3380279">pipe</a></span><span class="op" id="3380390">}</span><br>
<span class="lineno"></span><span class="op" id="3380392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3380395">func</span>&nbsp;<span class="op" id="3380400">(</span><span class="ident" id="3380401">a</span>&nbsp;<span class="op" id="3380403">*</span><span class="ident" id="3380404"><a href="/text/template/parse/node.go.html#3380053">ActionNode</a></span><span class="op" id="3380414">)</span>&nbsp;<span class="ident" id="3380416">String</span><span class="op" id="3380422">(</span><span class="op" id="3380423">)</span>&nbsp;<span class="builtintype" id="3380425">string</span>&nbsp;<span class="op" id="3380432">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3380435">return</span>&nbsp;<span class="ident" id="3380442"><a href="/text/template/parse/node.go.html#3375013">fmt</a></span><span class="op" id="3380445">.</span><span class="ident" id="3380446">Sprintf</span><span class="op" id="3380453">(</span><span class="string" id="3380454">&#34;{{%s}}&#34;</span><span class="op" id="3380462">,</span>&nbsp;<span class="ident" id="3380464"><a href="/text/template/parse/node.go.html#3380401">a</a></span><span class="op" id="3380465">.</span><span class="ident" id="3380466">Pipe</span><span class="op" id="3380470">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="op" id="3380473">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3380476">func</span>&nbsp;<span class="op" id="3380481">(</span><span class="ident" id="3380482">a</span>&nbsp;<span class="op" id="3380484">*</span><span class="ident" id="3380485"><a href="/text/template/parse/node.go.html#3380053">ActionNode</a></span><span class="op" id="3380495">)</span>&nbsp;<span class="ident" id="3380497">tree</span><span class="op" id="3380501">(</span><span class="op" id="3380502">)</span>&nbsp;<span class="op" id="3380504">*</span><span class="ident" id="3380505"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3380510">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3380513">return</span>&nbsp;<span class="ident" id="3380520"><a href="/text/template/parse/node.go.html#3380482">a</a></span><span class="op" id="3380521">.</span><span class="ident" id="3380522">tr</span><br>
<span class="lineno"></span><span class="op" id="3380525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3380528">func</span>&nbsp;<span class="op" id="3380533">(</span><span class="ident" id="3380534">a</span>&nbsp;<span class="op" id="3380536">*</span><span class="ident" id="3380537"><a href="/text/template/parse/node.go.html#3380053">ActionNode</a></span><span class="op" id="3380547">)</span>&nbsp;<span class="ident" id="3380549">Copy</span><span class="op" id="3380553">(</span><span class="op" id="3380554">)</span>&nbsp;<span class="ident" id="3380556"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3380561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3380564">return</span>&nbsp;<span class="ident" id="3380571"><a href="/text/template/parse/node.go.html#3380534">a</a></span><span class="op" id="3380572">.</span><span class="ident" id="3380573">tr</span><span class="op" id="3380575">.</span><span class="ident" id="3380576">newAction</span><span class="op" id="3380585">(</span><span class="ident" id="3380586"><a href="/text/template/parse/node.go.html#3380534">a</a></span><span class="op" id="3380587">.</span><span class="ident" id="3380588">Pos</span><span class="op" id="3380591">,</span>&nbsp;<span class="ident" id="3380593"><a href="/text/template/parse/node.go.html#3380534">a</a></span><span class="op" id="3380594">.</span><span class="ident" id="3380595">Line</span><span class="op" id="3380599">,</span>&nbsp;<span class="ident" id="3380601"><a href="/text/template/parse/node.go.html#3380534">a</a></span><span class="op" id="3380602">.</span><span class="ident" id="3380603">Pipe</span><span class="op" id="3380607">.</span><span class="ident" id="3380608">CopyPipe</span><span class="op" id="3380616">(</span><span class="op" id="3380617">)</span><span class="op" id="3380618">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="op" id="3380621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3380624">//&nbsp;CommandNode&nbsp;holds&nbsp;a&nbsp;command&nbsp;(a&nbsp;pipeline&nbsp;inside&nbsp;an&nbsp;evaluating&nbsp;action).</span><br>
<span class="lineno"></span><span class="keyword" id="3380697">type</span>&nbsp;<span class="ident" id="3380702">CommandNode</span>&nbsp;<span class="keyword" id="3380714">struct</span>&nbsp;<span class="op" id="3380721">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3380724"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3380734"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3380739">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3380744">*</span><span class="ident" id="3380745"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3380751">Args</span>&nbsp;<span class="op" id="3380756">[</span><span class="op" id="3380757">]</span><span class="ident" id="3380758"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="comment" id="3380763">//&nbsp;Arguments&nbsp;in&nbsp;lexical&nbsp;order:&nbsp;Identifier,&nbsp;field,&nbsp;or&nbsp;constant.</span><br>
<span class="lineno"></span><span class="op" id="3380826">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span><span class="keyword" id="3380829">func</span>&nbsp;<span class="op" id="3380834">(</span><span class="ident" id="3380835">t</span>&nbsp;<span class="op" id="3380837">*</span><span class="ident" id="3380838"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3380842">)</span>&nbsp;<span class="ident" id="3380844">newCommand</span><span class="op" id="3380854">(</span><span class="ident" id="3380855">pos</span>&nbsp;<span class="ident" id="3380859"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3380862">)</span>&nbsp;<span class="op" id="3380864">*</span><span class="ident" id="3380865"><a href="/text/template/parse/node.go.html#3380702">CommandNode</a></span>&nbsp;<span class="op" id="3380877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3380880">return</span>&nbsp;<span class="op" id="3380887">&amp;</span><span class="ident" id="3380888"><a href="/text/template/parse/node.go.html#3380702">CommandNode</a></span><span class="op" id="3380899">{</span><span class="ident" id="3380900">tr</span><span class="op" id="3380902">:</span>&nbsp;<span class="ident" id="3380904"><a href="/text/template/parse/node.go.html#3380835">t</a></span><span class="op" id="3380905">,</span>&nbsp;<span class="ident" id="3380907">NodeType</span><span class="op" id="3380915">:</span>&nbsp;<span class="ident" id="3380917"><a href="/text/template/parse/node.go.html#3376416">NodeCommand</a></span><span class="op" id="3380928">,</span>&nbsp;<span class="ident" id="3380930">Pos</span><span class="op" id="3380933">:</span>&nbsp;<span class="ident" id="3380935"><a href="/text/template/parse/node.go.html#3380855">pos</a></span><span class="op" id="3380938">}</span><br>
<span class="lineno"></span><span class="op" id="3380940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="3380943">func</span>&nbsp;<span class="op" id="3380948">(</span><span class="ident" id="3380949">c</span>&nbsp;<span class="op" id="3380951">*</span><span class="ident" id="3380952"><a href="/text/template/parse/node.go.html#3380702">CommandNode</a></span><span class="op" id="3380963">)</span>&nbsp;<span class="builtinfunc" id="3380965">append</span><span class="op" id="3380971">(</span><span class="ident" id="3380972">arg</span>&nbsp;<span class="ident" id="3380976"><a href="/text/template/parse/node.go.html#3375303">Node</a></span><span class="op" id="3380980">)</span>&nbsp;<span class="op" id="3380982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3380985"><a href="/text/template/parse/node.go.html#3380949">c</a></span><span class="op" id="3380986">.</span><span class="ident" id="3380987">Args</span>&nbsp;<span class="op" id="3380992">=</span>&nbsp;<span class="builtinfunc" id="3380994">append</span><span class="op" id="3381000">(</span><span class="ident" id="3381001"><a href="/text/template/parse/node.go.html#3380949">c</a></span><span class="op" id="3381002">.</span><span class="ident" id="3381003">Args</span><span class="op" id="3381007">,</span>&nbsp;<span class="ident" id="3381009"><a href="/text/template/parse/node.go.html#3380972">arg</a></span><span class="op" id="3381012">)</span><br>
<span class="lineno"></span><span class="op" id="3381014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3381017">func</span>&nbsp;<span class="op" id="3381022">(</span><span class="ident" id="3381023">c</span>&nbsp;<span class="op" id="3381025">*</span><span class="ident" id="3381026"><a href="/text/template/parse/node.go.html#3380702">CommandNode</a></span><span class="op" id="3381037">)</span>&nbsp;<span class="ident" id="3381039">String</span><span class="op" id="3381045">(</span><span class="op" id="3381046">)</span>&nbsp;<span class="builtintype" id="3381048">string</span>&nbsp;<span class="op" id="3381055">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3381058">s</span>&nbsp;<span class="op" id="3381060">:=</span>&nbsp;<span class="string" id="3381063">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381067">for</span>&nbsp;<span class="ident" id="3381071">i</span><span class="op" id="3381072">,</span>&nbsp;<span class="ident" id="3381074">arg</span>&nbsp;<span class="op" id="3381078">:=</span>&nbsp;<span class="keyword" id="3381081">range</span>&nbsp;<span class="ident" id="3381087"><a href="/text/template/parse/node.go.html#3381023">c</a></span><span class="op" id="3381088">.</span><span class="ident" id="3381089">Args</span>&nbsp;<span class="op" id="3381094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381098">if</span>&nbsp;<span class="ident" id="3381101"><a href="/text/template/parse/node.go.html#3381071">i</a></span>&nbsp;<span class="op" id="3381103">&gt;</span>&nbsp;<span class="num" id="3381105">0</span>&nbsp;<span class="op" id="3381107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3381112"><a href="/text/template/parse/node.go.html#3381058">s</a></span>&nbsp;<span class="op" id="3381114">+=</span>&nbsp;<span class="string" id="3381117">&#34;&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3381123">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381127">if</span>&nbsp;<span class="ident" id="3381130">arg</span><span class="op" id="3381133">,</span>&nbsp;<span class="ident" id="3381135">ok</span>&nbsp;<span class="op" id="3381138">:=</span>&nbsp;<span class="ident" id="3381141"><a href="/text/template/parse/node.go.html#3381074">arg</a></span><span class="op" id="3381144">.</span><span class="op" id="3381145">(</span><span class="op" id="3381146">*</span><span class="ident" id="3381147"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3381155">)</span><span class="op" id="3381156">;</span>&nbsp;<span class="ident" id="3381158"><a href="/text/template/parse/node.go.html#3381135">ok</a></span>&nbsp;<span class="op" id="3381161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3381166"><a href="/text/template/parse/node.go.html#3381058">s</a></span>&nbsp;<span class="op" id="3381168">+=</span>&nbsp;<span class="string" id="3381171">&#34;(&#34;</span>&nbsp;<span class="op" id="3381175">+</span>&nbsp;<span class="ident" id="3381177"><a href="/text/template/parse/node.go.html#3381130">arg</a></span><span class="op" id="3381180">.</span><span class="ident" id="3381181">String</span><span class="op" id="3381187">(</span><span class="op" id="3381188">)</span>&nbsp;<span class="op" id="3381190">+</span>&nbsp;<span class="string" id="3381192">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381199">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3381210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3381214"><a href="/text/template/parse/node.go.html#3381058">s</a></span>&nbsp;<span class="op" id="3381216">+=</span>&nbsp;<span class="ident" id="3381219"><a href="/text/template/parse/node.go.html#3381074">arg</a></span><span class="op" id="3381222">.</span><span class="ident" id="3381223">String</span><span class="op" id="3381229">(</span><span class="op" id="3381230">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3381233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381236">return</span>&nbsp;<span class="ident" id="3381243"><a href="/text/template/parse/node.go.html#3381058">s</a></span><br>
<span class="lineno"></span><span class="op" id="3381245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3381248">func</span>&nbsp;<span class="op" id="3381253">(</span><span class="ident" id="3381254">c</span>&nbsp;<span class="op" id="3381256">*</span><span class="ident" id="3381257"><a href="/text/template/parse/node.go.html#3380702">CommandNode</a></span><span class="op" id="3381268">)</span>&nbsp;<span class="ident" id="3381270">tree</span><span class="op" id="3381274">(</span><span class="op" id="3381275">)</span>&nbsp;<span class="op" id="3381277">*</span><span class="ident" id="3381278"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3381283">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381286">return</span>&nbsp;<span class="ident" id="3381293"><a href="/text/template/parse/node.go.html#3381254">c</a></span><span class="op" id="3381294">.</span><span class="ident" id="3381295">tr</span><br>
<span class="lineno"></span><span class="op" id="3381298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3381301">func</span>&nbsp;<span class="op" id="3381306">(</span><span class="ident" id="3381307">c</span>&nbsp;<span class="op" id="3381309">*</span><span class="ident" id="3381310"><a href="/text/template/parse/node.go.html#3380702">CommandNode</a></span><span class="op" id="3381321">)</span>&nbsp;<span class="ident" id="3381323">Copy</span><span class="op" id="3381327">(</span><span class="op" id="3381328">)</span>&nbsp;<span class="ident" id="3381330"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3381335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381338">if</span>&nbsp;<span class="ident" id="3381341"><a href="/text/template/parse/node.go.html#3381307">c</a></span>&nbsp;<span class="op" id="3381343">==</span>&nbsp;<span class="ident" id="3381346">nil</span>&nbsp;<span class="op" id="3381350">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381354">return</span>&nbsp;<span class="ident" id="3381361"><a href="/text/template/parse/node.go.html#3381307">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3381364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3381367">n</span>&nbsp;<span class="op" id="3381369">:=</span>&nbsp;<span class="ident" id="3381372"><a href="/text/template/parse/node.go.html#3381307">c</a></span><span class="op" id="3381373">.</span><span class="ident" id="3381374">tr</span><span class="op" id="3381376">.</span><span class="ident" id="3381377">newCommand</span><span class="op" id="3381387">(</span><span class="ident" id="3381388"><a href="/text/template/parse/node.go.html#3381307">c</a></span><span class="op" id="3381389">.</span><span class="ident" id="3381390">Pos</span><span class="op" id="3381393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381396">for</span>&nbsp;<span class="ident" id="3381400">_</span><span class="op" id="3381401">,</span>&nbsp;<span class="ident" id="3381403">c</span>&nbsp;<span class="op" id="3381405">:=</span>&nbsp;<span class="keyword" id="3381408">range</span>&nbsp;<span class="ident" id="3381414"><a href="/text/template/parse/node.go.html#3381307">c</a></span><span class="op" id="3381415">.</span><span class="ident" id="3381416">Args</span>&nbsp;<span class="op" id="3381421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3381425"><a href="/text/template/parse/node.go.html#3381367">n</a></span><span class="op" id="3381426">.</span><span class="builtinfunc" id="3381427">append</span><span class="op" id="3381433">(</span><span class="ident" id="3381434"><a href="/text/template/parse/node.go.html#3381403">c</a></span><span class="op" id="3381435">.</span><span class="ident" id="3381436">Copy</span><span class="op" id="3381440">(</span><span class="op" id="3381441">)</span><span class="op" id="3381442">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3381445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381448">return</span>&nbsp;<span class="ident" id="3381455"><a href="/text/template/parse/node.go.html#3381367">n</a></span><br>
<span class="lineno"></span><span class="op" id="3381457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3381460">//&nbsp;IdentifierNode&nbsp;holds&nbsp;an&nbsp;identifier.</span><br>
<span class="lineno">280</span><span class="keyword" id="3381499">type</span>&nbsp;<span class="ident" id="3381504">IdentifierNode</span>&nbsp;<span class="keyword" id="3381519">struct</span>&nbsp;<span class="op" id="3381526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3381529"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3381539"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3381544">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3381550">*</span><span class="ident" id="3381551"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3381557">Ident</span>&nbsp;<span class="builtintype" id="3381563">string</span>&nbsp;<span class="comment" id="3381570">//&nbsp;The&nbsp;identifier&#39;s&nbsp;name.</span><br>
<span class="lineno">285</span><span class="op" id="3381596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3381599">//&nbsp;NewIdentifier&nbsp;returns&nbsp;a&nbsp;new&nbsp;IdentifierNode&nbsp;with&nbsp;the&nbsp;given&nbsp;identifier&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="3381677">func</span>&nbsp;<span class="ident" id="3381682">NewIdentifier</span><span class="op" id="3381695">(</span><span class="ident" id="3381696">ident</span>&nbsp;<span class="builtintype" id="3381702">string</span><span class="op" id="3381708">)</span>&nbsp;<span class="op" id="3381710">*</span><span class="ident" id="3381711"><a href="/text/template/parse/node.go.html#3381504">IdentifierNode</a></span>&nbsp;<span class="op" id="3381726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3381729">return</span>&nbsp;<span class="op" id="3381736">&amp;</span><span class="ident" id="3381737"><a href="/text/template/parse/node.go.html#3381504">IdentifierNode</a></span><span class="op" id="3381751">{</span><span class="ident" id="3381752">NodeType</span><span class="op" id="3381760">:</span>&nbsp;<span class="ident" id="3381762"><a href="/text/template/parse/node.go.html#3376727">NodeIdentifier</a></span><span class="op" id="3381776">,</span>&nbsp;<span class="ident" id="3381778">Ident</span><span class="op" id="3381783">:</span>&nbsp;<span class="ident" id="3381785"><a href="/text/template/parse/node.go.html#3381696">ident</a></span><span class="op" id="3381790">}</span><br>
<span class="lineno">290</span><span class="op" id="3381792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3381795">//&nbsp;SetPos&nbsp;sets&nbsp;the&nbsp;position.&nbsp;NewIdentifier&nbsp;is&nbsp;a&nbsp;public&nbsp;method&nbsp;so&nbsp;we&nbsp;can&#39;t&nbsp;modify&nbsp;its&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="3381891">//&nbsp;Chained&nbsp;for&nbsp;convenience.</span><br>
<span class="lineno"></span><span class="comment" id="3381919">//&nbsp;TODO:&nbsp;fix&nbsp;one&nbsp;day?</span><br>
<span class="lineno">295</span><span class="keyword" id="3381941">func</span>&nbsp;<span class="op" id="3381946">(</span><span class="ident" id="3381947">i</span>&nbsp;<span class="op" id="3381949">*</span><span class="ident" id="3381950"><a href="/text/template/parse/node.go.html#3381504">IdentifierNode</a></span><span class="op" id="3381964">)</span>&nbsp;<span class="ident" id="3381966">SetPos</span><span class="op" id="3381972">(</span><span class="ident" id="3381973">pos</span>&nbsp;<span class="ident" id="3381977"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3381980">)</span>&nbsp;<span class="op" id="3381982">*</span><span class="ident" id="3381983"><a href="/text/template/parse/node.go.html#3381504">IdentifierNode</a></span>&nbsp;<span class="op" id="3381998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3382001"><a href="/text/template/parse/node.go.html#3381947">i</a></span><span class="op" id="3382002">.</span><span class="ident" id="3382003">Pos</span>&nbsp;<span class="op" id="3382007">=</span>&nbsp;<span class="ident" id="3382009"><a href="/text/template/parse/node.go.html#3381973">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3382014">return</span>&nbsp;<span class="ident" id="3382021"><a href="/text/template/parse/node.go.html#3381947">i</a></span><br>
<span class="lineno"></span><span class="op" id="3382023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span><span class="comment" id="3382026">//&nbsp;SetTree&nbsp;sets&nbsp;the&nbsp;parent&nbsp;tree&nbsp;for&nbsp;the&nbsp;node.&nbsp;NewIdentifier&nbsp;is&nbsp;a&nbsp;public&nbsp;method&nbsp;so&nbsp;we&nbsp;can&#39;t&nbsp;modify&nbsp;its&nbsp;signature.</span><br>
<span class="lineno"></span><span class="comment" id="3382139">//&nbsp;Chained&nbsp;for&nbsp;convenience.</span><br>
<span class="lineno"></span><span class="comment" id="3382167">//&nbsp;TODO:&nbsp;fix&nbsp;one&nbsp;day?</span><br>
<span class="lineno"></span><span class="keyword" id="3382189">func</span>&nbsp;<span class="op" id="3382194">(</span><span class="ident" id="3382195">i</span>&nbsp;<span class="op" id="3382197">*</span><span class="ident" id="3382198"><a href="/text/template/parse/node.go.html#3381504">IdentifierNode</a></span><span class="op" id="3382212">)</span>&nbsp;<span class="ident" id="3382214">SetTree</span><span class="op" id="3382221">(</span><span class="ident" id="3382222">t</span>&nbsp;<span class="op" id="3382224">*</span><span class="ident" id="3382225"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3382229">)</span>&nbsp;<span class="op" id="3382231">*</span><span class="ident" id="3382232"><a href="/text/template/parse/node.go.html#3381504">IdentifierNode</a></span>&nbsp;<span class="op" id="3382247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3382250"><a href="/text/template/parse/node.go.html#3382195">i</a></span><span class="op" id="3382251">.</span><span class="ident" id="3382252">tr</span>&nbsp;<span class="op" id="3382255">=</span>&nbsp;<span class="ident" id="3382257"><a href="/text/template/parse/node.go.html#3382222">t</a></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3382260">return</span>&nbsp;<span class="ident" id="3382267"><a href="/text/template/parse/node.go.html#3382195">i</a></span><br>
<span class="lineno"></span><span class="op" id="3382269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3382272">func</span>&nbsp;<span class="op" id="3382277">(</span><span class="ident" id="3382278">i</span>&nbsp;<span class="op" id="3382280">*</span><span class="ident" id="3382281"><a href="/text/template/parse/node.go.html#3381504">IdentifierNode</a></span><span class="op" id="3382295">)</span>&nbsp;<span class="ident" id="3382297">String</span><span class="op" id="3382303">(</span><span class="op" id="3382304">)</span>&nbsp;<span class="builtintype" id="3382306">string</span>&nbsp;<span class="op" id="3382313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3382316">return</span>&nbsp;<span class="ident" id="3382323"><a href="/text/template/parse/node.go.html#3382278">i</a></span><span class="op" id="3382324">.</span><span class="ident" id="3382325">Ident</span><br>
<span class="lineno">310</span><span class="op" id="3382331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3382334">func</span>&nbsp;<span class="op" id="3382339">(</span><span class="ident" id="3382340">i</span>&nbsp;<span class="op" id="3382342">*</span><span class="ident" id="3382343"><a href="/text/template/parse/node.go.html#3381504">IdentifierNode</a></span><span class="op" id="3382357">)</span>&nbsp;<span class="ident" id="3382359">tree</span><span class="op" id="3382363">(</span><span class="op" id="3382364">)</span>&nbsp;<span class="op" id="3382366">*</span><span class="ident" id="3382367"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3382372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3382375">return</span>&nbsp;<span class="ident" id="3382382"><a href="/text/template/parse/node.go.html#3382340">i</a></span><span class="op" id="3382383">.</span><span class="ident" id="3382384">tr</span><br>
<span class="lineno"></span><span class="op" id="3382387">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span><span class="keyword" id="3382390">func</span>&nbsp;<span class="op" id="3382395">(</span><span class="ident" id="3382396">i</span>&nbsp;<span class="op" id="3382398">*</span><span class="ident" id="3382399"><a href="/text/template/parse/node.go.html#3381504">IdentifierNode</a></span><span class="op" id="3382413">)</span>&nbsp;<span class="ident" id="3382415">Copy</span><span class="op" id="3382419">(</span><span class="op" id="3382420">)</span>&nbsp;<span class="ident" id="3382422"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3382427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3382430">return</span>&nbsp;<span class="ident" id="3382437"><a href="/text/template/parse/node.go.html#3381682">NewIdentifier</a></span><span class="op" id="3382450">(</span><span class="ident" id="3382451"><a href="/text/template/parse/node.go.html#3382396">i</a></span><span class="op" id="3382452">.</span><span class="ident" id="3382453">Ident</span><span class="op" id="3382458">)</span><span class="op" id="3382459">.</span><span class="ident" id="3382460">SetTree</span><span class="op" id="3382467">(</span><span class="ident" id="3382468"><a href="/text/template/parse/node.go.html#3382396">i</a></span><span class="op" id="3382469">.</span><span class="ident" id="3382470">tr</span><span class="op" id="3382472">)</span><span class="op" id="3382473">.</span><span class="ident" id="3382474">SetPos</span><span class="op" id="3382480">(</span><span class="ident" id="3382481"><a href="/text/template/parse/node.go.html#3382396">i</a></span><span class="op" id="3382482">.</span><span class="ident" id="3382483">Pos</span><span class="op" id="3382486">)</span><br>
<span class="lineno"></span><span class="op" id="3382488">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="3382491">//&nbsp;VariableNode&nbsp;holds&nbsp;a&nbsp;list&nbsp;of&nbsp;variable&nbsp;names,&nbsp;possibly&nbsp;with&nbsp;chained&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="3382567">//&nbsp;accesses.&nbsp;The&nbsp;dollar&nbsp;sign&nbsp;is&nbsp;part&nbsp;of&nbsp;the&nbsp;(first)&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="3382625">type</span>&nbsp;<span class="ident" id="3382630">VariableNode</span>&nbsp;<span class="keyword" id="3382643">struct</span>&nbsp;<span class="op" id="3382650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3382653"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3382663"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3382668">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3382674">*</span><span class="ident" id="3382675"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3382681">Ident</span>&nbsp;<span class="op" id="3382687">[</span><span class="op" id="3382688">]</span><span class="builtintype" id="3382689">string</span>&nbsp;<span class="comment" id="3382696">//&nbsp;Variable&nbsp;name&nbsp;and&nbsp;fields&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno"></span><span class="op" id="3382742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3382745">func</span>&nbsp;<span class="op" id="3382750">(</span><span class="ident" id="3382751">t</span>&nbsp;<span class="op" id="3382753">*</span><span class="ident" id="3382754"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3382758">)</span>&nbsp;<span class="ident" id="3382760">newVariable</span><span class="op" id="3382771">(</span><span class="ident" id="3382772">pos</span>&nbsp;<span class="ident" id="3382776"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3382779">,</span>&nbsp;<span class="ident" id="3382781">ident</span>&nbsp;<span class="builtintype" id="3382787">string</span><span class="op" id="3382793">)</span>&nbsp;<span class="op" id="3382795">*</span><span class="ident" id="3382796"><a href="/text/template/parse/node.go.html#3382630">VariableNode</a></span>&nbsp;<span class="op" id="3382809">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3382812">return</span>&nbsp;<span class="op" id="3382819">&amp;</span><span class="ident" id="3382820"><a href="/text/template/parse/node.go.html#3382630">VariableNode</a></span><span class="op" id="3382832">{</span><span class="ident" id="3382833">tr</span><span class="op" id="3382835">:</span>&nbsp;<span class="ident" id="3382837"><a href="/text/template/parse/node.go.html#3382751">t</a></span><span class="op" id="3382838">,</span>&nbsp;<span class="ident" id="3382840">NodeType</span><span class="op" id="3382848">:</span>&nbsp;<span class="ident" id="3382850"><a href="/text/template/parse/node.go.html#3377248">NodeVariable</a></span><span class="op" id="3382862">,</span>&nbsp;<span class="ident" id="3382864">Pos</span><span class="op" id="3382867">:</span>&nbsp;<span class="ident" id="3382869"><a href="/text/template/parse/node.go.html#3382772">pos</a></span><span class="op" id="3382872">,</span>&nbsp;<span class="ident" id="3382874">Ident</span><span class="op" id="3382879">:</span>&nbsp;<span class="ident" id="3382881"><a href="/text/template/parse/node.go.html#3375031">strings</a></span><span class="op" id="3382888">.</span><span class="ident" id="3382889">Split</span><span class="op" id="3382894">(</span><span class="ident" id="3382895"><a href="/text/template/parse/node.go.html#3382781">ident</a></span><span class="op" id="3382900">,</span>&nbsp;<span class="string" id="3382902">&#34;.&#34;</span><span class="op" id="3382905">)</span><span class="op" id="3382906">}</span><br>
<span class="lineno"></span><span class="op" id="3382908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3382911">func</span>&nbsp;<span class="op" id="3382916">(</span><span class="ident" id="3382917">v</span>&nbsp;<span class="op" id="3382919">*</span><span class="ident" id="3382920"><a href="/text/template/parse/node.go.html#3382630">VariableNode</a></span><span class="op" id="3382932">)</span>&nbsp;<span class="ident" id="3382934">String</span><span class="op" id="3382940">(</span><span class="op" id="3382941">)</span>&nbsp;<span class="builtintype" id="3382943">string</span>&nbsp;<span class="op" id="3382950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3382953">s</span>&nbsp;<span class="op" id="3382955">:=</span>&nbsp;<span class="string" id="3382958">&#34;&#34;</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3382962">for</span>&nbsp;<span class="ident" id="3382966">i</span><span class="op" id="3382967">,</span>&nbsp;<span class="ident" id="3382969">id</span>&nbsp;<span class="op" id="3382972">:=</span>&nbsp;<span class="keyword" id="3382975">range</span>&nbsp;<span class="ident" id="3382981"><a href="/text/template/parse/node.go.html#3382917">v</a></span><span class="op" id="3382982">.</span><span class="ident" id="3382983">Ident</span>&nbsp;<span class="op" id="3382989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3382993">if</span>&nbsp;<span class="ident" id="3382996"><a href="/text/template/parse/node.go.html#3382966">i</a></span>&nbsp;<span class="op" id="3382998">&gt;</span>&nbsp;<span class="num" id="3383000">0</span>&nbsp;<span class="op" id="3383002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383007"><a href="/text/template/parse/node.go.html#3382953">s</a></span>&nbsp;<span class="op" id="3383009">+=</span>&nbsp;<span class="string" id="3383012">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3383018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383022"><a href="/text/template/parse/node.go.html#3382953">s</a></span>&nbsp;<span class="op" id="3383024">+=</span>&nbsp;<span class="ident" id="3383027"><a href="/text/template/parse/node.go.html#3382969">id</a></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3383031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383034">return</span>&nbsp;<span class="ident" id="3383041"><a href="/text/template/parse/node.go.html#3382953">s</a></span><br>
<span class="lineno"></span><span class="op" id="3383043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3383046">func</span>&nbsp;<span class="op" id="3383051">(</span><span class="ident" id="3383052">v</span>&nbsp;<span class="op" id="3383054">*</span><span class="ident" id="3383055"><a href="/text/template/parse/node.go.html#3382630">VariableNode</a></span><span class="op" id="3383067">)</span>&nbsp;<span class="ident" id="3383069">tree</span><span class="op" id="3383073">(</span><span class="op" id="3383074">)</span>&nbsp;<span class="op" id="3383076">*</span><span class="ident" id="3383077"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3383082">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383085">return</span>&nbsp;<span class="ident" id="3383092"><a href="/text/template/parse/node.go.html#3383052">v</a></span><span class="op" id="3383093">.</span><span class="ident" id="3383094">tr</span><br>
<span class="lineno"></span><span class="op" id="3383097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3383100">func</span>&nbsp;<span class="op" id="3383105">(</span><span class="ident" id="3383106">v</span>&nbsp;<span class="op" id="3383108">*</span><span class="ident" id="3383109"><a href="/text/template/parse/node.go.html#3382630">VariableNode</a></span><span class="op" id="3383121">)</span>&nbsp;<span class="ident" id="3383123">Copy</span><span class="op" id="3383127">(</span><span class="op" id="3383128">)</span>&nbsp;<span class="ident" id="3383130"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3383135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383138">return</span>&nbsp;<span class="op" id="3383145">&amp;</span><span class="ident" id="3383146"><a href="/text/template/parse/node.go.html#3382630">VariableNode</a></span><span class="op" id="3383158">{</span><span class="ident" id="3383159">tr</span><span class="op" id="3383161">:</span>&nbsp;<span class="ident" id="3383163"><a href="/text/template/parse/node.go.html#3383106">v</a></span><span class="op" id="3383164">.</span><span class="ident" id="3383165">tr</span><span class="op" id="3383167">,</span>&nbsp;<span class="ident" id="3383169">NodeType</span><span class="op" id="3383177">:</span>&nbsp;<span class="ident" id="3383179"><a href="/text/template/parse/node.go.html#3377248">NodeVariable</a></span><span class="op" id="3383191">,</span>&nbsp;<span class="ident" id="3383193">Pos</span><span class="op" id="3383196">:</span>&nbsp;<span class="ident" id="3383198"><a href="/text/template/parse/node.go.html#3383106">v</a></span><span class="op" id="3383199">.</span><span class="ident" id="3383200">Pos</span><span class="op" id="3383203">,</span>&nbsp;<span class="ident" id="3383205">Ident</span><span class="op" id="3383210">:</span>&nbsp;<span class="builtinfunc" id="3383212">append</span><span class="op" id="3383218">(</span><span class="op" id="3383219">[</span><span class="op" id="3383220">]</span><span class="builtintype" id="3383221">string</span><span class="op" id="3383227">{</span><span class="op" id="3383228">}</span><span class="op" id="3383229">,</span>&nbsp;<span class="ident" id="3383231"><a href="/text/template/parse/node.go.html#3383106">v</a></span><span class="op" id="3383232">.</span><span class="ident" id="3383233">Ident</span><span class="op" id="3383238">...</span><span class="op" id="3383241">)</span><span class="op" id="3383242">}</span><br>
<span class="lineno">350</span><span class="op" id="3383244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3383247">//&nbsp;DotNode&nbsp;holds&nbsp;the&nbsp;special&nbsp;identifier&nbsp;&#39;.&#39;.</span><br>
<span class="lineno"></span><span class="keyword" id="3383292">type</span>&nbsp;<span class="ident" id="3383297">DotNode</span>&nbsp;<span class="keyword" id="3383305">struct</span>&nbsp;<span class="op" id="3383312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383315"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383325"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383330">tr</span>&nbsp;<span class="op" id="3383333">*</span><span class="ident" id="3383334"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span><span class="op" id="3383339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3383342">func</span>&nbsp;<span class="op" id="3383347">(</span><span class="ident" id="3383348">t</span>&nbsp;<span class="op" id="3383350">*</span><span class="ident" id="3383351"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3383355">)</span>&nbsp;<span class="ident" id="3383357">newDot</span><span class="op" id="3383363">(</span><span class="ident" id="3383364">pos</span>&nbsp;<span class="ident" id="3383368"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3383371">)</span>&nbsp;<span class="op" id="3383373">*</span><span class="ident" id="3383374"><a href="/text/template/parse/node.go.html#3383297">DotNode</a></span>&nbsp;<span class="op" id="3383382">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383385">return</span>&nbsp;<span class="op" id="3383392">&amp;</span><span class="ident" id="3383393"><a href="/text/template/parse/node.go.html#3383297">DotNode</a></span><span class="op" id="3383400">{</span><span class="ident" id="3383401">tr</span><span class="op" id="3383403">:</span>&nbsp;<span class="ident" id="3383405"><a href="/text/template/parse/node.go.html#3383348">t</a></span><span class="op" id="3383406">,</span>&nbsp;<span class="ident" id="3383408">NodeType</span><span class="op" id="3383416">:</span>&nbsp;<span class="ident" id="3383418"><a href="/text/template/parse/node.go.html#3376477">NodeDot</a></span><span class="op" id="3383425">,</span>&nbsp;<span class="ident" id="3383427">Pos</span><span class="op" id="3383430">:</span>&nbsp;<span class="ident" id="3383432"><a href="/text/template/parse/node.go.html#3383364">pos</a></span><span class="op" id="3383435">}</span><br>
<span class="lineno"></span><span class="op" id="3383437">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3383440">func</span>&nbsp;<span class="op" id="3383445">(</span><span class="ident" id="3383446">d</span>&nbsp;<span class="op" id="3383448">*</span><span class="ident" id="3383449"><a href="/text/template/parse/node.go.html#3383297">DotNode</a></span><span class="op" id="3383456">)</span>&nbsp;<span class="ident" id="3383458">Type</span><span class="op" id="3383462">(</span><span class="op" id="3383463">)</span>&nbsp;<span class="ident" id="3383465"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span>&nbsp;<span class="op" id="3383474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3383477">//&nbsp;Override&nbsp;method&nbsp;on&nbsp;embedded&nbsp;NodeType&nbsp;for&nbsp;API&nbsp;compatibility.</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3383541">//&nbsp;TODO:&nbsp;Not&nbsp;really&nbsp;a&nbsp;problem;&nbsp;could&nbsp;change&nbsp;API&nbsp;without&nbsp;effect&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3383609">//&nbsp;api&nbsp;tool&nbsp;complains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383633">return</span>&nbsp;<span class="ident" id="3383640"><a href="/text/template/parse/node.go.html#3376477">NodeDot</a></span><br>
<span class="lineno"></span><span class="op" id="3383648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="3383651">func</span>&nbsp;<span class="op" id="3383656">(</span><span class="ident" id="3383657">d</span>&nbsp;<span class="op" id="3383659">*</span><span class="ident" id="3383660"><a href="/text/template/parse/node.go.html#3383297">DotNode</a></span><span class="op" id="3383667">)</span>&nbsp;<span class="ident" id="3383669">String</span><span class="op" id="3383675">(</span><span class="op" id="3383676">)</span>&nbsp;<span class="builtintype" id="3383678">string</span>&nbsp;<span class="op" id="3383685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383688">return</span>&nbsp;<span class="string" id="3383695">&#34;.&#34;</span><br>
<span class="lineno"></span><span class="op" id="3383699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3383702">func</span>&nbsp;<span class="op" id="3383707">(</span><span class="ident" id="3383708">d</span>&nbsp;<span class="op" id="3383710">*</span><span class="ident" id="3383711"><a href="/text/template/parse/node.go.html#3383297">DotNode</a></span><span class="op" id="3383718">)</span>&nbsp;<span class="ident" id="3383720">tree</span><span class="op" id="3383724">(</span><span class="op" id="3383725">)</span>&nbsp;<span class="op" id="3383727">*</span><span class="ident" id="3383728"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3383733">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383736">return</span>&nbsp;<span class="ident" id="3383743"><a href="/text/template/parse/node.go.html#3383708">d</a></span><span class="op" id="3383744">.</span><span class="ident" id="3383745">tr</span><br>
<span class="lineno"></span><span class="op" id="3383748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3383751">func</span>&nbsp;<span class="op" id="3383756">(</span><span class="ident" id="3383757">d</span>&nbsp;<span class="op" id="3383759">*</span><span class="ident" id="3383760"><a href="/text/template/parse/node.go.html#3383297">DotNode</a></span><span class="op" id="3383767">)</span>&nbsp;<span class="ident" id="3383769">Copy</span><span class="op" id="3383773">(</span><span class="op" id="3383774">)</span>&nbsp;<span class="ident" id="3383776"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3383781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383784">return</span>&nbsp;<span class="ident" id="3383791"><a href="/text/template/parse/node.go.html#3383757">d</a></span><span class="op" id="3383792">.</span><span class="ident" id="3383793">tr</span><span class="op" id="3383795">.</span><span class="ident" id="3383796">newDot</span><span class="op" id="3383802">(</span><span class="ident" id="3383803"><a href="/text/template/parse/node.go.html#3383757">d</a></span><span class="op" id="3383804">.</span><span class="ident" id="3383805">Pos</span><span class="op" id="3383808">)</span><br>
<span class="lineno">380</span><span class="op" id="3383810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3383813">//&nbsp;NilNode&nbsp;holds&nbsp;the&nbsp;special&nbsp;identifier&nbsp;&#39;nil&#39;&nbsp;representing&nbsp;an&nbsp;untyped&nbsp;nil&nbsp;constant.</span><br>
<span class="lineno"></span><span class="keyword" id="3383897">type</span>&nbsp;<span class="ident" id="3383902">NilNode</span>&nbsp;<span class="keyword" id="3383910">struct</span>&nbsp;<span class="op" id="3383917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383920"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383930"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383935">tr</span>&nbsp;<span class="op" id="3383938">*</span><span class="ident" id="3383939"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span><span class="op" id="3383944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3383947">func</span>&nbsp;<span class="op" id="3383952">(</span><span class="ident" id="3383953">t</span>&nbsp;<span class="op" id="3383955">*</span><span class="ident" id="3383956"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3383960">)</span>&nbsp;<span class="ident" id="3383962">newNil</span><span class="op" id="3383968">(</span><span class="ident" id="3383969">pos</span>&nbsp;<span class="ident" id="3383973"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3383976">)</span>&nbsp;<span class="op" id="3383978">*</span><span class="ident" id="3383979"><a href="/text/template/parse/node.go.html#3383902">NilNode</a></span>&nbsp;<span class="op" id="3383987">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383990">return</span>&nbsp;<span class="op" id="3383997">&amp;</span><span class="ident" id="3383998"><a href="/text/template/parse/node.go.html#3383902">NilNode</a></span><span class="op" id="3384005">{</span><span class="ident" id="3384006">tr</span><span class="op" id="3384008">:</span>&nbsp;<span class="ident" id="3384010"><a href="/text/template/parse/node.go.html#3383953">t</a></span><span class="op" id="3384011">,</span>&nbsp;<span class="ident" id="3384013">NodeType</span><span class="op" id="3384021">:</span>&nbsp;<span class="ident" id="3384023"><a href="/text/template/parse/node.go.html#3376902">NodeNil</a></span><span class="op" id="3384030">,</span>&nbsp;<span class="ident" id="3384032">Pos</span><span class="op" id="3384035">:</span>&nbsp;<span class="ident" id="3384037"><a href="/text/template/parse/node.go.html#3383969">pos</a></span><span class="op" id="3384040">}</span><br>
<span class="lineno"></span><span class="op" id="3384042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3384045">func</span>&nbsp;<span class="op" id="3384050">(</span><span class="ident" id="3384051">n</span>&nbsp;<span class="op" id="3384053">*</span><span class="ident" id="3384054"><a href="/text/template/parse/node.go.html#3383902">NilNode</a></span><span class="op" id="3384061">)</span>&nbsp;<span class="ident" id="3384063">Type</span><span class="op" id="3384067">(</span><span class="op" id="3384068">)</span>&nbsp;<span class="ident" id="3384070"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span>&nbsp;<span class="op" id="3384079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3384082">//&nbsp;Override&nbsp;method&nbsp;on&nbsp;embedded&nbsp;NodeType&nbsp;for&nbsp;API&nbsp;compatibility.</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3384146">//&nbsp;TODO:&nbsp;Not&nbsp;really&nbsp;a&nbsp;problem;&nbsp;could&nbsp;change&nbsp;API&nbsp;without&nbsp;effect&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3384214">//&nbsp;api&nbsp;tool&nbsp;complains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384238">return</span>&nbsp;<span class="ident" id="3384245"><a href="/text/template/parse/node.go.html#3376902">NodeNil</a></span><br>
<span class="lineno"></span><span class="op" id="3384253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span><span class="keyword" id="3384256">func</span>&nbsp;<span class="op" id="3384261">(</span><span class="ident" id="3384262">n</span>&nbsp;<span class="op" id="3384264">*</span><span class="ident" id="3384265"><a href="/text/template/parse/node.go.html#3383902">NilNode</a></span><span class="op" id="3384272">)</span>&nbsp;<span class="ident" id="3384274">String</span><span class="op" id="3384280">(</span><span class="op" id="3384281">)</span>&nbsp;<span class="builtintype" id="3384283">string</span>&nbsp;<span class="op" id="3384290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384293">return</span>&nbsp;<span class="string" id="3384300">&#34;nil&#34;</span><br>
<span class="lineno"></span><span class="op" id="3384306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3384309">func</span>&nbsp;<span class="op" id="3384314">(</span><span class="ident" id="3384315">n</span>&nbsp;<span class="op" id="3384317">*</span><span class="ident" id="3384318"><a href="/text/template/parse/node.go.html#3383902">NilNode</a></span><span class="op" id="3384325">)</span>&nbsp;<span class="ident" id="3384327">tree</span><span class="op" id="3384331">(</span><span class="op" id="3384332">)</span>&nbsp;<span class="op" id="3384334">*</span><span class="ident" id="3384335"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3384340">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384343">return</span>&nbsp;<span class="ident" id="3384350"><a href="/text/template/parse/node.go.html#3384315">n</a></span><span class="op" id="3384351">.</span><span class="ident" id="3384352">tr</span><br>
<span class="lineno"></span><span class="op" id="3384355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3384358">func</span>&nbsp;<span class="op" id="3384363">(</span><span class="ident" id="3384364">n</span>&nbsp;<span class="op" id="3384366">*</span><span class="ident" id="3384367"><a href="/text/template/parse/node.go.html#3383902">NilNode</a></span><span class="op" id="3384374">)</span>&nbsp;<span class="ident" id="3384376">Copy</span><span class="op" id="3384380">(</span><span class="op" id="3384381">)</span>&nbsp;<span class="ident" id="3384383"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3384388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384391">return</span>&nbsp;<span class="ident" id="3384398"><a href="/text/template/parse/node.go.html#3384364">n</a></span><span class="op" id="3384399">.</span><span class="ident" id="3384400">tr</span><span class="op" id="3384402">.</span><span class="ident" id="3384403">newNil</span><span class="op" id="3384409">(</span><span class="ident" id="3384410"><a href="/text/template/parse/node.go.html#3384364">n</a></span><span class="op" id="3384411">.</span><span class="ident" id="3384412">Pos</span><span class="op" id="3384415">)</span><br>
<span class="lineno">410</span><span class="op" id="3384417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3384420">//&nbsp;FieldNode&nbsp;holds&nbsp;a&nbsp;field&nbsp;(identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;).</span><br>
<span class="lineno"></span><span class="comment" id="3384479">//&nbsp;The&nbsp;names&nbsp;may&nbsp;be&nbsp;chained&nbsp;(&#39;.x.y&#39;).</span><br>
<span class="lineno"></span><span class="comment" id="3384517">//&nbsp;The&nbsp;period&nbsp;is&nbsp;dropped&nbsp;from&nbsp;each&nbsp;ident.</span><br>
<span class="lineno">415</span><span class="keyword" id="3384559">type</span>&nbsp;<span class="ident" id="3384564">FieldNode</span>&nbsp;<span class="keyword" id="3384574">struct</span>&nbsp;<span class="op" id="3384581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3384584"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3384594"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3384599">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3384605">*</span><span class="ident" id="3384606"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3384612">Ident</span>&nbsp;<span class="op" id="3384618">[</span><span class="op" id="3384619">]</span><span class="builtintype" id="3384620">string</span>&nbsp;<span class="comment" id="3384627">//&nbsp;The&nbsp;identifiers&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno">420</span><span class="op" id="3384664">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3384667">func</span>&nbsp;<span class="op" id="3384672">(</span><span class="ident" id="3384673">t</span>&nbsp;<span class="op" id="3384675">*</span><span class="ident" id="3384676"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3384680">)</span>&nbsp;<span class="ident" id="3384682">newField</span><span class="op" id="3384690">(</span><span class="ident" id="3384691">pos</span>&nbsp;<span class="ident" id="3384695"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3384698">,</span>&nbsp;<span class="ident" id="3384700">ident</span>&nbsp;<span class="builtintype" id="3384706">string</span><span class="op" id="3384712">)</span>&nbsp;<span class="op" id="3384714">*</span><span class="ident" id="3384715"><a href="/text/template/parse/node.go.html#3384564">FieldNode</a></span>&nbsp;<span class="op" id="3384725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384728">return</span>&nbsp;<span class="op" id="3384735">&amp;</span><span class="ident" id="3384736"><a href="/text/template/parse/node.go.html#3384564">FieldNode</a></span><span class="op" id="3384745">{</span><span class="ident" id="3384746">tr</span><span class="op" id="3384748">:</span>&nbsp;<span class="ident" id="3384750"><a href="/text/template/parse/node.go.html#3384673">t</a></span><span class="op" id="3384751">,</span>&nbsp;<span class="ident" id="3384753">NodeType</span><span class="op" id="3384761">:</span>&nbsp;<span class="ident" id="3384763"><a href="/text/template/parse/node.go.html#3376668">NodeField</a></span><span class="op" id="3384772">,</span>&nbsp;<span class="ident" id="3384774">Pos</span><span class="op" id="3384777">:</span>&nbsp;<span class="ident" id="3384779"><a href="/text/template/parse/node.go.html#3384691">pos</a></span><span class="op" id="3384782">,</span>&nbsp;<span class="ident" id="3384784">Ident</span><span class="op" id="3384789">:</span>&nbsp;<span class="ident" id="3384791"><a href="/text/template/parse/node.go.html#3375031">strings</a></span><span class="op" id="3384798">.</span><span class="ident" id="3384799">Split</span><span class="op" id="3384804">(</span><span class="ident" id="3384805"><a href="/text/template/parse/node.go.html#3384700">ident</a></span><span class="op" id="3384810">[</span><span class="num" id="3384811">1</span><span class="op" id="3384812">:</span><span class="op" id="3384813">]</span><span class="op" id="3384814">,</span>&nbsp;<span class="string" id="3384816">&#34;.&#34;</span><span class="op" id="3384819">)</span><span class="op" id="3384820">}</span>&nbsp;<span class="comment" id="3384822">//&nbsp;[1:]&nbsp;to&nbsp;drop&nbsp;leading&nbsp;period</span><br>
<span class="lineno"></span><span class="op" id="3384853">}</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span><span class="keyword" id="3384856">func</span>&nbsp;<span class="op" id="3384861">(</span><span class="ident" id="3384862">f</span>&nbsp;<span class="op" id="3384864">*</span><span class="ident" id="3384865"><a href="/text/template/parse/node.go.html#3384564">FieldNode</a></span><span class="op" id="3384874">)</span>&nbsp;<span class="ident" id="3384876">String</span><span class="op" id="3384882">(</span><span class="op" id="3384883">)</span>&nbsp;<span class="builtintype" id="3384885">string</span>&nbsp;<span class="op" id="3384892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3384895">s</span>&nbsp;<span class="op" id="3384897">:=</span>&nbsp;<span class="string" id="3384900">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384904">for</span>&nbsp;<span class="ident" id="3384908">_</span><span class="op" id="3384909">,</span>&nbsp;<span class="ident" id="3384911">id</span>&nbsp;<span class="op" id="3384914">:=</span>&nbsp;<span class="keyword" id="3384917">range</span>&nbsp;<span class="ident" id="3384923"><a href="/text/template/parse/node.go.html#3384862">f</a></span><span class="op" id="3384924">.</span><span class="ident" id="3384925">Ident</span>&nbsp;<span class="op" id="3384931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3384935"><a href="/text/template/parse/node.go.html#3384895">s</a></span>&nbsp;<span class="op" id="3384937">+=</span>&nbsp;<span class="string" id="3384940">&#34;.&#34;</span>&nbsp;<span class="op" id="3384944">+</span>&nbsp;<span class="ident" id="3384946"><a href="/text/template/parse/node.go.html#3384911">id</a></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3384950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384953">return</span>&nbsp;<span class="ident" id="3384960"><a href="/text/template/parse/node.go.html#3384895">s</a></span><br>
<span class="lineno"></span><span class="op" id="3384962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3384965">func</span>&nbsp;<span class="op" id="3384970">(</span><span class="ident" id="3384971">f</span>&nbsp;<span class="op" id="3384973">*</span><span class="ident" id="3384974"><a href="/text/template/parse/node.go.html#3384564">FieldNode</a></span><span class="op" id="3384983">)</span>&nbsp;<span class="ident" id="3384985">tree</span><span class="op" id="3384989">(</span><span class="op" id="3384990">)</span>&nbsp;<span class="op" id="3384992">*</span><span class="ident" id="3384993"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3384998">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3385001">return</span>&nbsp;<span class="ident" id="3385008"><a href="/text/template/parse/node.go.html#3384971">f</a></span><span class="op" id="3385009">.</span><span class="ident" id="3385010">tr</span><br>
<span class="lineno"></span><span class="op" id="3385013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3385016">func</span>&nbsp;<span class="op" id="3385021">(</span><span class="ident" id="3385022">f</span>&nbsp;<span class="op" id="3385024">*</span><span class="ident" id="3385025"><a href="/text/template/parse/node.go.html#3384564">FieldNode</a></span><span class="op" id="3385034">)</span>&nbsp;<span class="ident" id="3385036">Copy</span><span class="op" id="3385040">(</span><span class="op" id="3385041">)</span>&nbsp;<span class="ident" id="3385043"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3385048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3385051">return</span>&nbsp;<span class="op" id="3385058">&amp;</span><span class="ident" id="3385059"><a href="/text/template/parse/node.go.html#3384564">FieldNode</a></span><span class="op" id="3385068">{</span><span class="ident" id="3385069">tr</span><span class="op" id="3385071">:</span>&nbsp;<span class="ident" id="3385073"><a href="/text/template/parse/node.go.html#3385022">f</a></span><span class="op" id="3385074">.</span><span class="ident" id="3385075">tr</span><span class="op" id="3385077">,</span>&nbsp;<span class="ident" id="3385079">NodeType</span><span class="op" id="3385087">:</span>&nbsp;<span class="ident" id="3385089"><a href="/text/template/parse/node.go.html#3376668">NodeField</a></span><span class="op" id="3385098">,</span>&nbsp;<span class="ident" id="3385100">Pos</span><span class="op" id="3385103">:</span>&nbsp;<span class="ident" id="3385105"><a href="/text/template/parse/node.go.html#3385022">f</a></span><span class="op" id="3385106">.</span><span class="ident" id="3385107">Pos</span><span class="op" id="3385110">,</span>&nbsp;<span class="ident" id="3385112">Ident</span><span class="op" id="3385117">:</span>&nbsp;<span class="builtinfunc" id="3385119">append</span><span class="op" id="3385125">(</span><span class="op" id="3385126">[</span><span class="op" id="3385127">]</span><span class="builtintype" id="3385128">string</span><span class="op" id="3385134">{</span><span class="op" id="3385135">}</span><span class="op" id="3385136">,</span>&nbsp;<span class="ident" id="3385138"><a href="/text/template/parse/node.go.html#3385022">f</a></span><span class="op" id="3385139">.</span><span class="ident" id="3385140">Ident</span><span class="op" id="3385145">...</span><span class="op" id="3385148">)</span><span class="op" id="3385149">}</span><br>
<span class="lineno">440</span><span class="op" id="3385151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3385154">//&nbsp;ChainNode&nbsp;holds&nbsp;a&nbsp;term&nbsp;followed&nbsp;by&nbsp;a&nbsp;chain&nbsp;of&nbsp;field&nbsp;accesses&nbsp;(identifier&nbsp;starting&nbsp;with&nbsp;&#39;.&#39;).</span><br>
<span class="lineno"></span><span class="comment" id="3385250">//&nbsp;The&nbsp;names&nbsp;may&nbsp;be&nbsp;chained&nbsp;(&#39;.x.y&#39;).</span><br>
<span class="lineno"></span><span class="comment" id="3385288">//&nbsp;The&nbsp;periods&nbsp;are&nbsp;dropped&nbsp;from&nbsp;each&nbsp;ident.</span><br>
<span class="lineno">445</span><span class="keyword" id="3385332">type</span>&nbsp;<span class="ident" id="3385337">ChainNode</span>&nbsp;<span class="keyword" id="3385347">struct</span>&nbsp;<span class="op" id="3385354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3385357"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3385367"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3385372">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3385378">*</span><span class="ident" id="3385379"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3385385">Node</span>&nbsp;&nbsp;<span class="ident" id="3385391"><a href="/text/template/parse/node.go.html#3375303">Node</a></span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3385397">Field</span>&nbsp;<span class="op" id="3385403">[</span><span class="op" id="3385404">]</span><span class="builtintype" id="3385405">string</span>&nbsp;<span class="comment" id="3385412">//&nbsp;The&nbsp;identifiers&nbsp;in&nbsp;lexical&nbsp;order.</span><br>
<span class="lineno"></span><span class="op" id="3385449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3385452">func</span>&nbsp;<span class="op" id="3385457">(</span><span class="ident" id="3385458">t</span>&nbsp;<span class="op" id="3385460">*</span><span class="ident" id="3385461"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3385465">)</span>&nbsp;<span class="ident" id="3385467">newChain</span><span class="op" id="3385475">(</span><span class="ident" id="3385476">pos</span>&nbsp;<span class="ident" id="3385480"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3385483">,</span>&nbsp;<span class="ident" id="3385485">node</span>&nbsp;<span class="ident" id="3385490"><a href="/text/template/parse/node.go.html#3375303">Node</a></span><span class="op" id="3385494">)</span>&nbsp;<span class="op" id="3385496">*</span><span class="ident" id="3385497"><a href="/text/template/parse/node.go.html#3385337">ChainNode</a></span>&nbsp;<span class="op" id="3385507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3385510">return</span>&nbsp;<span class="op" id="3385517">&amp;</span><span class="ident" id="3385518"><a href="/text/template/parse/node.go.html#3385337">ChainNode</a></span><span class="op" id="3385527">{</span><span class="ident" id="3385528">tr</span><span class="op" id="3385530">:</span>&nbsp;<span class="ident" id="3385532"><a href="/text/template/parse/node.go.html#3385458">t</a></span><span class="op" id="3385533">,</span>&nbsp;<span class="ident" id="3385535">NodeType</span><span class="op" id="3385543">:</span>&nbsp;<span class="ident" id="3385545"><a href="/text/template/parse/node.go.html#3376351">NodeChain</a></span><span class="op" id="3385554">,</span>&nbsp;<span class="ident" id="3385556">Pos</span><span class="op" id="3385559">:</span>&nbsp;<span class="ident" id="3385561"><a href="/text/template/parse/node.go.html#3385476">pos</a></span><span class="op" id="3385564">,</span>&nbsp;<span class="ident" id="3385566">Node</span><span class="op" id="3385570">:</span>&nbsp;<span class="ident" id="3385572"><a href="/text/template/parse/node.go.html#3385485">node</a></span><span class="op" id="3385576">}</span><br>
<span class="lineno">455</span><span class="op" id="3385578">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3385581">//&nbsp;Add&nbsp;adds&nbsp;the&nbsp;named&nbsp;field&nbsp;(which&nbsp;should&nbsp;start&nbsp;with&nbsp;a&nbsp;period)&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;chain.</span><br>
<span class="lineno"></span><span class="keyword" id="3385669">func</span>&nbsp;<span class="op" id="3385674">(</span><span class="ident" id="3385675">c</span>&nbsp;<span class="op" id="3385677">*</span><span class="ident" id="3385678"><a href="/text/template/parse/node.go.html#3385337">ChainNode</a></span><span class="op" id="3385687">)</span>&nbsp;<span class="ident" id="3385689">Add</span><span class="op" id="3385692">(</span><span class="ident" id="3385693">field</span>&nbsp;<span class="builtintype" id="3385699">string</span><span class="op" id="3385705">)</span>&nbsp;<span class="op" id="3385707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3385710">if</span>&nbsp;<span class="builtinfunc" id="3385713">len</span><span class="op" id="3385716">(</span><span class="ident" id="3385717"><a href="/text/template/parse/node.go.html#3385693">field</a></span><span class="op" id="3385722">)</span>&nbsp;<span class="op" id="3385724">==</span>&nbsp;<span class="num" id="3385727">0</span>&nbsp;<span class="op" id="3385729">||</span>&nbsp;<span class="ident" id="3385732"><a href="/text/template/parse/node.go.html#3385693">field</a></span><span class="op" id="3385737">[</span><span class="num" id="3385738">0</span><span class="op" id="3385739">]</span>&nbsp;<span class="op" id="3385741">!=</span>&nbsp;<span class="string" id="3385744">&#39;.&#39;</span>&nbsp;<span class="op" id="3385748">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3385752">panic</span><span class="op" id="3385757">(</span><span class="string" id="3385758">&#34;no&nbsp;dot&nbsp;in&nbsp;field&#34;</span><span class="op" id="3385775">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3385778">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3385781"><a href="/text/template/parse/node.go.html#3385693">field</a></span>&nbsp;<span class="op" id="3385787">=</span>&nbsp;<span class="ident" id="3385789"><a href="/text/template/parse/node.go.html#3385693">field</a></span><span class="op" id="3385794">[</span><span class="num" id="3385795">1</span><span class="op" id="3385796">:</span><span class="op" id="3385797">]</span>&nbsp;<span class="comment" id="3385799">//&nbsp;Remove&nbsp;leading&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3385823">if</span>&nbsp;<span class="ident" id="3385826"><a href="/text/template/parse/node.go.html#3385693">field</a></span>&nbsp;<span class="op" id="3385832">==</span>&nbsp;<span class="string" id="3385835">&#34;&#34;</span>&nbsp;<span class="op" id="3385838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3385842">panic</span><span class="op" id="3385847">(</span><span class="string" id="3385848">&#34;empty&nbsp;field&#34;</span><span class="op" id="3385861">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3385864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3385867"><a href="/text/template/parse/node.go.html#3385675">c</a></span><span class="op" id="3385868">.</span><span class="ident" id="3385869">Field</span>&nbsp;<span class="op" id="3385875">=</span>&nbsp;<span class="builtinfunc" id="3385877">append</span><span class="op" id="3385883">(</span><span class="ident" id="3385884"><a href="/text/template/parse/node.go.html#3385675">c</a></span><span class="op" id="3385885">.</span><span class="ident" id="3385886">Field</span><span class="op" id="3385891">,</span>&nbsp;<span class="ident" id="3385893"><a href="/text/template/parse/node.go.html#3385693">field</a></span><span class="op" id="3385898">)</span><br>
<span class="lineno"></span><span class="op" id="3385900">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3385903">func</span>&nbsp;<span class="op" id="3385908">(</span><span class="ident" id="3385909">c</span>&nbsp;<span class="op" id="3385911">*</span><span class="ident" id="3385912"><a href="/text/template/parse/node.go.html#3385337">ChainNode</a></span><span class="op" id="3385921">)</span>&nbsp;<span class="ident" id="3385923">String</span><span class="op" id="3385929">(</span><span class="op" id="3385930">)</span>&nbsp;<span class="builtintype" id="3385932">string</span>&nbsp;<span class="op" id="3385939">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3385942">s</span>&nbsp;<span class="op" id="3385944">:=</span>&nbsp;<span class="ident" id="3385947"><a href="/text/template/parse/node.go.html#3385909">c</a></span><span class="op" id="3385948">.</span><span class="ident" id="3385949">Node</span><span class="op" id="3385953">.</span><span class="ident" id="3385954">String</span><span class="op" id="3385960">(</span><span class="op" id="3385961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3385964">if</span>&nbsp;<span class="ident" id="3385967">_</span><span class="op" id="3385968">,</span>&nbsp;<span class="ident" id="3385970">ok</span>&nbsp;<span class="op" id="3385973">:=</span>&nbsp;<span class="ident" id="3385976"><a href="/text/template/parse/node.go.html#3385909">c</a></span><span class="op" id="3385977">.</span><span class="ident" id="3385978">Node</span><span class="op" id="3385982">.</span><span class="op" id="3385983">(</span><span class="op" id="3385984">*</span><span class="ident" id="3385985"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3385993">)</span><span class="op" id="3385994">;</span>&nbsp;<span class="ident" id="3385996"><a href="/text/template/parse/node.go.html#3385970">ok</a></span>&nbsp;<span class="op" id="3385999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3386003"><a href="/text/template/parse/node.go.html#3385942">s</a></span>&nbsp;<span class="op" id="3386005">=</span>&nbsp;<span class="string" id="3386007">&#34;(&#34;</span>&nbsp;<span class="op" id="3386011">+</span>&nbsp;<span class="ident" id="3386013"><a href="/text/template/parse/node.go.html#3385942">s</a></span>&nbsp;<span class="op" id="3386015">+</span>&nbsp;<span class="string" id="3386017">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3386022">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3386025">for</span>&nbsp;<span class="ident" id="3386029">_</span><span class="op" id="3386030">,</span>&nbsp;<span class="ident" id="3386032">field</span>&nbsp;<span class="op" id="3386038">:=</span>&nbsp;<span class="keyword" id="3386041">range</span>&nbsp;<span class="ident" id="3386047"><a href="/text/template/parse/node.go.html#3385909">c</a></span><span class="op" id="3386048">.</span><span class="ident" id="3386049">Field</span>&nbsp;<span class="op" id="3386055">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3386059"><a href="/text/template/parse/node.go.html#3385942">s</a></span>&nbsp;<span class="op" id="3386061">+=</span>&nbsp;<span class="string" id="3386064">&#34;.&#34;</span>&nbsp;<span class="op" id="3386068">+</span>&nbsp;<span class="ident" id="3386070"><a href="/text/template/parse/node.go.html#3386032">field</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3386077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3386080">return</span>&nbsp;<span class="ident" id="3386087"><a href="/text/template/parse/node.go.html#3385942">s</a></span><br>
<span class="lineno"></span><span class="op" id="3386089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="3386092">func</span>&nbsp;<span class="op" id="3386097">(</span><span class="ident" id="3386098">c</span>&nbsp;<span class="op" id="3386100">*</span><span class="ident" id="3386101"><a href="/text/template/parse/node.go.html#3385337">ChainNode</a></span><span class="op" id="3386110">)</span>&nbsp;<span class="ident" id="3386112">tree</span><span class="op" id="3386116">(</span><span class="op" id="3386117">)</span>&nbsp;<span class="op" id="3386119">*</span><span class="ident" id="3386120"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3386125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3386128">return</span>&nbsp;<span class="ident" id="3386135"><a href="/text/template/parse/node.go.html#3386098">c</a></span><span class="op" id="3386136">.</span><span class="ident" id="3386137">tr</span><br>
<span class="lineno"></span><span class="op" id="3386140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3386143">func</span>&nbsp;<span class="op" id="3386148">(</span><span class="ident" id="3386149">c</span>&nbsp;<span class="op" id="3386151">*</span><span class="ident" id="3386152"><a href="/text/template/parse/node.go.html#3385337">ChainNode</a></span><span class="op" id="3386161">)</span>&nbsp;<span class="ident" id="3386163">Copy</span><span class="op" id="3386167">(</span><span class="op" id="3386168">)</span>&nbsp;<span class="ident" id="3386170"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3386175">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3386178">return</span>&nbsp;<span class="op" id="3386185">&amp;</span><span class="ident" id="3386186"><a href="/text/template/parse/node.go.html#3385337">ChainNode</a></span><span class="op" id="3386195">{</span><span class="ident" id="3386196">tr</span><span class="op" id="3386198">:</span>&nbsp;<span class="ident" id="3386200"><a href="/text/template/parse/node.go.html#3386149">c</a></span><span class="op" id="3386201">.</span><span class="ident" id="3386202">tr</span><span class="op" id="3386204">,</span>&nbsp;<span class="ident" id="3386206">NodeType</span><span class="op" id="3386214">:</span>&nbsp;<span class="ident" id="3386216"><a href="/text/template/parse/node.go.html#3376351">NodeChain</a></span><span class="op" id="3386225">,</span>&nbsp;<span class="ident" id="3386227">Pos</span><span class="op" id="3386230">:</span>&nbsp;<span class="ident" id="3386232"><a href="/text/template/parse/node.go.html#3386149">c</a></span><span class="op" id="3386233">.</span><span class="ident" id="3386234">Pos</span><span class="op" id="3386237">,</span>&nbsp;<span class="ident" id="3386239">Node</span><span class="op" id="3386243">:</span>&nbsp;<span class="ident" id="3386245"><a href="/text/template/parse/node.go.html#3386149">c</a></span><span class="op" id="3386246">.</span><span class="ident" id="3386247">Node</span><span class="op" id="3386251">,</span>&nbsp;<span class="ident" id="3386253">Field</span><span class="op" id="3386258">:</span>&nbsp;<span class="builtinfunc" id="3386260">append</span><span class="op" id="3386266">(</span><span class="op" id="3386267">[</span><span class="op" id="3386268">]</span><span class="builtintype" id="3386269">string</span><span class="op" id="3386275">{</span><span class="op" id="3386276">}</span><span class="op" id="3386277">,</span>&nbsp;<span class="ident" id="3386279"><a href="/text/template/parse/node.go.html#3386149">c</a></span><span class="op" id="3386280">.</span><span class="ident" id="3386281">Field</span><span class="op" id="3386286">...</span><span class="op" id="3386289">)</span><span class="op" id="3386290">}</span><br>
<span class="lineno"></span><span class="op" id="3386292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3386295">//&nbsp;BoolNode&nbsp;holds&nbsp;a&nbsp;boolean&nbsp;constant.</span><br>
<span class="lineno"></span><span class="keyword" id="3386333">type</span>&nbsp;<span class="ident" id="3386338">BoolNode</span>&nbsp;<span class="keyword" id="3386347">struct</span>&nbsp;<span class="op" id="3386354">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3386357"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3386367"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3386372">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3386377">*</span><span class="ident" id="3386378"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3386384">True</span>&nbsp;<span class="builtintype" id="3386389">bool</span>&nbsp;<span class="comment" id="3386394">//&nbsp;The&nbsp;value&nbsp;of&nbsp;the&nbsp;boolean&nbsp;constant.</span><br>
<span class="lineno"></span><span class="op" id="3386432">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="keyword" id="3386435">func</span>&nbsp;<span class="op" id="3386440">(</span><span class="ident" id="3386441">t</span>&nbsp;<span class="op" id="3386443">*</span><span class="ident" id="3386444"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3386448">)</span>&nbsp;<span class="ident" id="3386450">newBool</span><span class="op" id="3386457">(</span><span class="ident" id="3386458">pos</span>&nbsp;<span class="ident" id="3386462"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3386465">,</span>&nbsp;<span class="ident" id="3386467">true</span>&nbsp;<span class="builtintype" id="3386472">bool</span><span class="op" id="3386476">)</span>&nbsp;<span class="op" id="3386478">*</span><span class="ident" id="3386479"><a href="/text/template/parse/node.go.html#3386338">BoolNode</a></span>&nbsp;<span class="op" id="3386488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3386491">return</span>&nbsp;<span class="op" id="3386498">&amp;</span><span class="ident" id="3386499"><a href="/text/template/parse/node.go.html#3386338">BoolNode</a></span><span class="op" id="3386507">{</span><span class="ident" id="3386508">tr</span><span class="op" id="3386510">:</span>&nbsp;<span class="ident" id="3386512"><a href="/text/template/parse/node.go.html#3386441">t</a></span><span class="op" id="3386513">,</span>&nbsp;<span class="ident" id="3386515">NodeType</span><span class="op" id="3386523">:</span>&nbsp;<span class="ident" id="3386525"><a href="/text/template/parse/node.go.html#3376296">NodeBool</a></span><span class="op" id="3386533">,</span>&nbsp;<span class="ident" id="3386535">Pos</span><span class="op" id="3386538">:</span>&nbsp;<span class="ident" id="3386540"><a href="/text/template/parse/node.go.html#3386458">pos</a></span><span class="op" id="3386543">,</span>&nbsp;<span class="ident" id="3386545">True</span><span class="op" id="3386549">:</span>&nbsp;<span class="ident" id="3386551"><a href="/text/template/parse/node.go.html#3386467">true</a></span><span class="op" id="3386555">}</span><br>
<span class="lineno"></span><span class="op" id="3386557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="3386560">func</span>&nbsp;<span class="op" id="3386565">(</span><span class="ident" id="3386566">b</span>&nbsp;<span class="op" id="3386568">*</span><span class="ident" id="3386569"><a href="/text/template/parse/node.go.html#3386338">BoolNode</a></span><span class="op" id="3386577">)</span>&nbsp;<span class="ident" id="3386579">String</span><span class="op" id="3386585">(</span><span class="op" id="3386586">)</span>&nbsp;<span class="builtintype" id="3386588">string</span>&nbsp;<span class="op" id="3386595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3386598">if</span>&nbsp;<span class="ident" id="3386601"><a href="/text/template/parse/node.go.html#3386566">b</a></span><span class="op" id="3386602">.</span><span class="ident" id="3386603">True</span>&nbsp;<span class="op" id="3386608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3386612">return</span>&nbsp;<span class="string" id="3386619">&#34;true&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3386627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3386630">return</span>&nbsp;<span class="string" id="3386637">&#34;false&#34;</span><br>
<span class="lineno">505</span><span class="op" id="3386645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3386648">func</span>&nbsp;<span class="op" id="3386653">(</span><span class="ident" id="3386654">b</span>&nbsp;<span class="op" id="3386656">*</span><span class="ident" id="3386657"><a href="/text/template/parse/node.go.html#3386338">BoolNode</a></span><span class="op" id="3386665">)</span>&nbsp;<span class="ident" id="3386667">tree</span><span class="op" id="3386671">(</span><span class="op" id="3386672">)</span>&nbsp;<span class="op" id="3386674">*</span><span class="ident" id="3386675"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3386680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3386683">return</span>&nbsp;<span class="ident" id="3386690"><a href="/text/template/parse/node.go.html#3386654">b</a></span><span class="op" id="3386691">.</span><span class="ident" id="3386692">tr</span><br>
<span class="lineno"></span><span class="op" id="3386695">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span><span class="keyword" id="3386698">func</span>&nbsp;<span class="op" id="3386703">(</span><span class="ident" id="3386704">b</span>&nbsp;<span class="op" id="3386706">*</span><span class="ident" id="3386707"><a href="/text/template/parse/node.go.html#3386338">BoolNode</a></span><span class="op" id="3386715">)</span>&nbsp;<span class="ident" id="3386717">Copy</span><span class="op" id="3386721">(</span><span class="op" id="3386722">)</span>&nbsp;<span class="ident" id="3386724"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3386729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3386732">return</span>&nbsp;<span class="ident" id="3386739"><a href="/text/template/parse/node.go.html#3386704">b</a></span><span class="op" id="3386740">.</span><span class="ident" id="3386741">tr</span><span class="op" id="3386743">.</span><span class="ident" id="3386744">newBool</span><span class="op" id="3386751">(</span><span class="ident" id="3386752"><a href="/text/template/parse/node.go.html#3386704">b</a></span><span class="op" id="3386753">.</span><span class="ident" id="3386754">Pos</span><span class="op" id="3386757">,</span>&nbsp;<span class="ident" id="3386759"><a href="/text/template/parse/node.go.html#3386704">b</a></span><span class="op" id="3386760">.</span><span class="ident" id="3386761">True</span><span class="op" id="3386765">)</span><br>
<span class="lineno"></span><span class="op" id="3386767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="comment" id="3386770">//&nbsp;NumberNode&nbsp;holds&nbsp;a&nbsp;number:&nbsp;signed&nbsp;or&nbsp;unsigned&nbsp;integer,&nbsp;float,&nbsp;or&nbsp;complex.</span><br>
<span class="lineno"></span><span class="comment" id="3386847">//&nbsp;The&nbsp;value&nbsp;is&nbsp;parsed&nbsp;and&nbsp;stored&nbsp;under&nbsp;all&nbsp;the&nbsp;types&nbsp;that&nbsp;can&nbsp;represent&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3386931">//&nbsp;This&nbsp;simulates&nbsp;in&nbsp;a&nbsp;small&nbsp;amount&nbsp;of&nbsp;code&nbsp;the&nbsp;behavior&nbsp;of&nbsp;Go&#39;s&nbsp;ideal&nbsp;constants.</span><br>
<span class="lineno"></span><span class="keyword" id="3387013">type</span>&nbsp;<span class="ident" id="3387018">NumberNode</span>&nbsp;<span class="keyword" id="3387029">struct</span>&nbsp;<span class="op" id="3387036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387039"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387049"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387054">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3387065">*</span><span class="ident" id="3387066"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387072">IsInt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3387083">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387094">//&nbsp;Number&nbsp;has&nbsp;an&nbsp;integral&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387128">IsUint</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3387139">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387150">//&nbsp;Number&nbsp;has&nbsp;an&nbsp;unsigned&nbsp;integral&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387193">IsFloat</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3387204">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387215">//&nbsp;Number&nbsp;has&nbsp;a&nbsp;floating-point&nbsp;value.</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387254">IsComplex</span>&nbsp;&nbsp;<span class="builtintype" id="3387265">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387276">//&nbsp;Number&nbsp;is&nbsp;complex.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387299">Int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387310">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387321">//&nbsp;The&nbsp;signed&nbsp;integer&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387351">Uint64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3387362">uint64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387373">//&nbsp;The&nbsp;unsigned&nbsp;integer&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387405">Float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3387416">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387427">//&nbsp;The&nbsp;floating-point&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387457">Complex128</span>&nbsp;<span class="builtintype" id="3387468">complex128</span>&nbsp;<span class="comment" id="3387479">//&nbsp;The&nbsp;complex&nbsp;value.</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387502">Text</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3387513">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3387524">//&nbsp;The&nbsp;original&nbsp;textual&nbsp;representation&nbsp;from&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="op" id="3387579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3387582">func</span>&nbsp;<span class="op" id="3387587">(</span><span class="ident" id="3387588">t</span>&nbsp;<span class="op" id="3387590">*</span><span class="ident" id="3387591"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3387595">)</span>&nbsp;<span class="ident" id="3387597">newNumber</span><span class="op" id="3387606">(</span><span class="ident" id="3387607">pos</span>&nbsp;<span class="ident" id="3387611"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3387614">,</span>&nbsp;<span class="ident" id="3387616">text</span>&nbsp;<span class="builtintype" id="3387621">string</span><span class="op" id="3387627">,</span>&nbsp;<span class="ident" id="3387629">typ</span>&nbsp;<span class="ident" id="3387633"><a href="/text/template/parse/lex.go.html#3361762">itemType</a></span><span class="op" id="3387641">)</span>&nbsp;<span class="op" id="3387643">(</span><span class="op" id="3387644">*</span><span class="ident" id="3387645"><a href="/text/template/parse/node.go.html#3387018">NumberNode</a></span><span class="op" id="3387655">,</span>&nbsp;<span class="builtintype" id="3387657">error</span><span class="op" id="3387662">)</span>&nbsp;<span class="op" id="3387664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387667">n</span>&nbsp;<span class="op" id="3387669">:=</span>&nbsp;<span class="op" id="3387672">&amp;</span><span class="ident" id="3387673"><a href="/text/template/parse/node.go.html#3387018">NumberNode</a></span><span class="op" id="3387683">{</span><span class="ident" id="3387684">tr</span><span class="op" id="3387686">:</span>&nbsp;<span class="ident" id="3387688"><a href="/text/template/parse/node.go.html#3387588">t</a></span><span class="op" id="3387689">,</span>&nbsp;<span class="ident" id="3387691">NodeType</span><span class="op" id="3387699">:</span>&nbsp;<span class="ident" id="3387701"><a href="/text/template/parse/node.go.html#3376962">NodeNumber</a></span><span class="op" id="3387711">,</span>&nbsp;<span class="ident" id="3387713">Pos</span><span class="op" id="3387716">:</span>&nbsp;<span class="ident" id="3387718"><a href="/text/template/parse/node.go.html#3387607">pos</a></span><span class="op" id="3387721">,</span>&nbsp;<span class="ident" id="3387723">Text</span><span class="op" id="3387727">:</span>&nbsp;<span class="ident" id="3387729"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3387733">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3387736">switch</span>&nbsp;<span class="ident" id="3387743"><a href="/text/template/parse/node.go.html#3387629">typ</a></span>&nbsp;<span class="op" id="3387747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3387750">case</span>&nbsp;<span class="ident" id="3387755"><a href="/text/template/parse/lex.go.html#3362003">itemCharConstant</a></span><span class="op" id="3387771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="3387775">rune</span><span class="op" id="3387779">,</span>&nbsp;<span class="ident" id="3387781">_</span><span class="op" id="3387782">,</span>&nbsp;<span class="ident" id="3387784">tail</span><span class="op" id="3387788">,</span>&nbsp;<span class="ident" id="3387790">err</span>&nbsp;<span class="op" id="3387794">:=</span>&nbsp;<span class="ident" id="3387797"><a href="/text/template/parse/node.go.html#3375020">strconv</a></span><span class="op" id="3387804">.</span><span class="ident" id="3387805">UnquoteChar</span><span class="op" id="3387816">(</span><span class="ident" id="3387817"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3387821">[</span><span class="num" id="3387822">1</span><span class="op" id="3387823">:</span><span class="op" id="3387824">]</span><span class="op" id="3387825">,</span>&nbsp;<span class="ident" id="3387827"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3387831">[</span><span class="num" id="3387832">0</span><span class="op" id="3387833">]</span><span class="op" id="3387834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3387838">if</span>&nbsp;<span class="ident" id="3387841"><a href="/text/template/parse/node.go.html#3387790">err</a></span>&nbsp;<span class="op" id="3387845">!=</span>&nbsp;<span class="ident" id="3387848">nil</span>&nbsp;<span class="op" id="3387852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3387857">return</span>&nbsp;<span class="ident" id="3387864">nil</span><span class="op" id="3387867">,</span>&nbsp;<span class="ident" id="3387869"><a href="/text/template/parse/node.go.html#3387790">err</a></span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3387875">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3387879">if</span>&nbsp;<span class="ident" id="3387882"><a href="/text/template/parse/node.go.html#3387784">tail</a></span>&nbsp;<span class="op" id="3387887">!=</span>&nbsp;<span class="string" id="3387890">&#34;&#39;&#34;</span>&nbsp;<span class="op" id="3387894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3387899">return</span>&nbsp;<span class="ident" id="3387906">nil</span><span class="op" id="3387909">,</span>&nbsp;<span class="ident" id="3387911"><a href="/text/template/parse/node.go.html#3375013">fmt</a></span><span class="op" id="3387914">.</span><span class="ident" id="3387915">Errorf</span><span class="op" id="3387921">(</span><span class="string" id="3387922">&#34;malformed&nbsp;character&nbsp;constant:&nbsp;%s&#34;</span><span class="op" id="3387956">,</span>&nbsp;<span class="ident" id="3387958"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3387962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3387966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387970"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3387971">.</span><span class="ident" id="3387972">Int64</span>&nbsp;<span class="op" id="3387978">=</span>&nbsp;<span class="ident" id="3387980">int64</span><span class="op" id="3387985">(</span><span class="builtintype" id="3387986"><a href="/text/template/parse/node.go.html#3387775">rune</a></span><span class="op" id="3387990">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3387994"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3387995">.</span><span class="ident" id="3387996">IsInt</span>&nbsp;<span class="op" id="3388002">=</span>&nbsp;<span class="ident" id="3388004">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388011"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388012">.</span><span class="ident" id="3388013">Uint64</span>&nbsp;<span class="op" id="3388020">=</span>&nbsp;<span class="ident" id="3388022">uint64</span><span class="op" id="3388028">(</span><span class="builtintype" id="3388029"><a href="/text/template/parse/node.go.html#3387775">rune</a></span><span class="op" id="3388033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388037"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388038">.</span><span class="ident" id="3388039">IsUint</span>&nbsp;<span class="op" id="3388046">=</span>&nbsp;<span class="ident" id="3388048">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388055"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388056">.</span><span class="ident" id="3388057">Float64</span>&nbsp;<span class="op" id="3388065">=</span>&nbsp;<span class="builtintype" id="3388067">float64</span><span class="op" id="3388074">(</span><span class="builtintype" id="3388075"><a href="/text/template/parse/node.go.html#3387775">rune</a></span><span class="op" id="3388079">)</span>&nbsp;<span class="comment" id="3388081">//&nbsp;odd&nbsp;but&nbsp;those&nbsp;are&nbsp;the&nbsp;rules.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388115"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388116">.</span><span class="ident" id="3388117">IsFloat</span>&nbsp;<span class="op" id="3388125">=</span>&nbsp;<span class="ident" id="3388127">true</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388134">return</span>&nbsp;<span class="ident" id="3388141"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388142">,</span>&nbsp;<span class="ident" id="3388144">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388149">case</span>&nbsp;<span class="ident" id="3388154"><a href="/text/template/parse/lex.go.html#3362059">itemComplex</a></span><span class="op" id="3388165">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3388169">//&nbsp;fmt.Sscan&nbsp;can&nbsp;parse&nbsp;the&nbsp;pair,&nbsp;so&nbsp;let&nbsp;it&nbsp;do&nbsp;the&nbsp;work.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388227">if</span>&nbsp;<span class="ident" id="3388230">_</span><span class="op" id="3388231">,</span>&nbsp;<span class="ident" id="3388233">err</span>&nbsp;<span class="op" id="3388237">:=</span>&nbsp;<span class="ident" id="3388240"><a href="/text/template/parse/node.go.html#3375013">fmt</a></span><span class="op" id="3388243">.</span><span class="ident" id="3388244">Sscan</span><span class="op" id="3388249">(</span><span class="ident" id="3388250"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3388254">,</span>&nbsp;<span class="op" id="3388256">&amp;</span><span class="ident" id="3388257"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388258">.</span><span class="ident" id="3388259">Complex128</span><span class="op" id="3388269">)</span><span class="op" id="3388270">;</span>&nbsp;<span class="ident" id="3388272"><a href="/text/template/parse/node.go.html#3388233">err</a></span>&nbsp;<span class="op" id="3388276">!=</span>&nbsp;<span class="ident" id="3388279">nil</span>&nbsp;<span class="op" id="3388283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388288">return</span>&nbsp;<span class="ident" id="3388295">nil</span><span class="op" id="3388298">,</span>&nbsp;<span class="ident" id="3388300"><a href="/text/template/parse/node.go.html#3388233">err</a></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3388306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388310"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388311">.</span><span class="ident" id="3388312">IsComplex</span>&nbsp;<span class="op" id="3388322">=</span>&nbsp;<span class="ident" id="3388324">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388331"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388332">.</span><span class="ident" id="3388333">simplifyComplex</span><span class="op" id="3388348">(</span><span class="op" id="3388349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388353">return</span>&nbsp;<span class="ident" id="3388360"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388361">,</span>&nbsp;<span class="ident" id="3388363">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3388368">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3388371">//&nbsp;Imaginary&nbsp;constants&nbsp;can&nbsp;only&nbsp;be&nbsp;complex&nbsp;unless&nbsp;they&nbsp;are&nbsp;zero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388437">if</span>&nbsp;<span class="builtinfunc" id="3388440">len</span><span class="op" id="3388443">(</span><span class="ident" id="3388444"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3388448">)</span>&nbsp;<span class="op" id="3388450">&gt;</span>&nbsp;<span class="num" id="3388452">0</span>&nbsp;<span class="op" id="3388454">&amp;&amp;</span>&nbsp;<span class="ident" id="3388457"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3388461">[</span><span class="builtinfunc" id="3388462">len</span><span class="op" id="3388465">(</span><span class="ident" id="3388466"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3388470">)</span><span class="op" id="3388471">-</span><span class="num" id="3388472">1</span><span class="op" id="3388473">]</span>&nbsp;<span class="op" id="3388475">==</span>&nbsp;<span class="string" id="3388478">&#39;i&#39;</span>&nbsp;<span class="op" id="3388482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388486">f</span><span class="op" id="3388487">,</span>&nbsp;<span class="ident" id="3388489">err</span>&nbsp;<span class="op" id="3388493">:=</span>&nbsp;<span class="ident" id="3388496"><a href="/text/template/parse/node.go.html#3375020">strconv</a></span><span class="op" id="3388503">.</span><span class="ident" id="3388504">ParseFloat</span><span class="op" id="3388514">(</span><span class="ident" id="3388515"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3388519">[</span><span class="op" id="3388520">:</span><span class="builtinfunc" id="3388521">len</span><span class="op" id="3388524">(</span><span class="ident" id="3388525"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3388529">)</span><span class="op" id="3388530">-</span><span class="num" id="3388531">1</span><span class="op" id="3388532">]</span><span class="op" id="3388533">,</span>&nbsp;<span class="num" id="3388535">64</span><span class="op" id="3388537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388541">if</span>&nbsp;<span class="ident" id="3388544"><a href="/text/template/parse/node.go.html#3388489">err</a></span>&nbsp;<span class="op" id="3388548">==</span>&nbsp;<span class="ident" id="3388551">nil</span>&nbsp;<span class="op" id="3388555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388560"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388561">.</span><span class="ident" id="3388562">IsComplex</span>&nbsp;<span class="op" id="3388572">=</span>&nbsp;<span class="ident" id="3388574">true</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388582"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388583">.</span><span class="ident" id="3388584">Complex128</span>&nbsp;<span class="op" id="3388595">=</span>&nbsp;<span class="builtinfunc" id="3388597">complex</span><span class="op" id="3388604">(</span><span class="num" id="3388605">0</span><span class="op" id="3388606">,</span>&nbsp;<span class="ident" id="3388608"><a href="/text/template/parse/node.go.html#3388486">f</a></span><span class="op" id="3388609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388614"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388615">.</span><span class="ident" id="3388616">simplifyComplex</span><span class="op" id="3388631">(</span><span class="op" id="3388632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388637">return</span>&nbsp;<span class="ident" id="3388644"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388645">,</span>&nbsp;<span class="ident" id="3388647">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3388653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3388656">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3388659">//&nbsp;Do&nbsp;integer&nbsp;test&nbsp;first&nbsp;so&nbsp;we&nbsp;get&nbsp;0x123&nbsp;etc.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388706">u</span><span class="op" id="3388707">,</span>&nbsp;<span class="ident" id="3388709">err</span>&nbsp;<span class="op" id="3388713">:=</span>&nbsp;<span class="ident" id="3388716"><a href="/text/template/parse/node.go.html#3375020">strconv</a></span><span class="op" id="3388723">.</span><span class="ident" id="3388724">ParseUint</span><span class="op" id="3388733">(</span><span class="ident" id="3388734"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3388738">,</span>&nbsp;<span class="num" id="3388740">0</span><span class="op" id="3388741">,</span>&nbsp;<span class="num" id="3388743">64</span><span class="op" id="3388745">)</span>&nbsp;<span class="comment" id="3388747">//&nbsp;will&nbsp;fail&nbsp;for&nbsp;-0;&nbsp;fixed&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388782">if</span>&nbsp;<span class="ident" id="3388785"><a href="/text/template/parse/node.go.html#3388709">err</a></span>&nbsp;<span class="op" id="3388789">==</span>&nbsp;<span class="ident" id="3388792">nil</span>&nbsp;<span class="op" id="3388796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388800"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388801">.</span><span class="ident" id="3388802">IsUint</span>&nbsp;<span class="op" id="3388809">=</span>&nbsp;<span class="ident" id="3388811">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388818"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388819">.</span><span class="ident" id="3388820">Uint64</span>&nbsp;<span class="op" id="3388827">=</span>&nbsp;<span class="ident" id="3388829"><a href="/text/template/parse/node.go.html#3388706">u</a></span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3388832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388835">i</span><span class="op" id="3388836">,</span>&nbsp;<span class="ident" id="3388838"><a href="/text/template/parse/node.go.html#3388709">err</a></span>&nbsp;<span class="op" id="3388842">:=</span>&nbsp;<span class="ident" id="3388845"><a href="/text/template/parse/node.go.html#3375020">strconv</a></span><span class="op" id="3388852">.</span><span class="ident" id="3388853">ParseInt</span><span class="op" id="3388861">(</span><span class="ident" id="3388862"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3388866">,</span>&nbsp;<span class="num" id="3388868">0</span><span class="op" id="3388869">,</span>&nbsp;<span class="num" id="3388871">64</span><span class="op" id="3388873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388876">if</span>&nbsp;<span class="ident" id="3388879"><a href="/text/template/parse/node.go.html#3388709">err</a></span>&nbsp;<span class="op" id="3388883">==</span>&nbsp;<span class="ident" id="3388886">nil</span>&nbsp;<span class="op" id="3388890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388894"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388895">.</span><span class="ident" id="3388896">IsInt</span>&nbsp;<span class="op" id="3388902">=</span>&nbsp;<span class="ident" id="3388904">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388911"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388912">.</span><span class="ident" id="3388913">Int64</span>&nbsp;<span class="op" id="3388919">=</span>&nbsp;<span class="ident" id="3388921"><a href="/text/template/parse/node.go.html#3388835">i</a></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3388925">if</span>&nbsp;<span class="ident" id="3388928"><a href="/text/template/parse/node.go.html#3388835">i</a></span>&nbsp;<span class="op" id="3388930">==</span>&nbsp;<span class="num" id="3388933">0</span>&nbsp;<span class="op" id="3388935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388940"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388941">.</span><span class="ident" id="3388942">IsUint</span>&nbsp;<span class="op" id="3388949">=</span>&nbsp;<span class="ident" id="3388951">true</span>&nbsp;<span class="comment" id="3388956">//&nbsp;in&nbsp;case&nbsp;of&nbsp;-0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3388977"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3388978">.</span><span class="ident" id="3388979">Uint64</span>&nbsp;<span class="op" id="3388986">=</span>&nbsp;<span class="ident" id="3388988"><a href="/text/template/parse/node.go.html#3388706">u</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3388992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3388995">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3388998">//&nbsp;If&nbsp;an&nbsp;integer&nbsp;extraction&nbsp;succeeded,&nbsp;promote&nbsp;the&nbsp;float.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3389057">if</span>&nbsp;<span class="ident" id="3389060"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389061">.</span><span class="ident" id="3389062">IsInt</span>&nbsp;<span class="op" id="3389068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389072"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389073">.</span><span class="ident" id="3389074">IsFloat</span>&nbsp;<span class="op" id="3389082">=</span>&nbsp;<span class="ident" id="3389084">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389091"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389092">.</span><span class="ident" id="3389093">Float64</span>&nbsp;<span class="op" id="3389101">=</span>&nbsp;<span class="builtintype" id="3389103">float64</span><span class="op" id="3389110">(</span><span class="ident" id="3389111"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389112">.</span><span class="ident" id="3389113">Int64</span><span class="op" id="3389118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3389121">}</span>&nbsp;<span class="keyword" id="3389123">else</span>&nbsp;<span class="keyword" id="3389128">if</span>&nbsp;<span class="ident" id="3389131"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389132">.</span><span class="ident" id="3389133">IsUint</span>&nbsp;<span class="op" id="3389140">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389144"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389145">.</span><span class="ident" id="3389146">IsFloat</span>&nbsp;<span class="op" id="3389154">=</span>&nbsp;<span class="ident" id="3389156">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389163"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389164">.</span><span class="ident" id="3389165">Float64</span>&nbsp;<span class="op" id="3389173">=</span>&nbsp;<span class="builtintype" id="3389175">float64</span><span class="op" id="3389182">(</span><span class="ident" id="3389183"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389184">.</span><span class="ident" id="3389185">Uint64</span><span class="op" id="3389191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3389194">}</span>&nbsp;<span class="keyword" id="3389196">else</span>&nbsp;<span class="op" id="3389201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389205">f</span><span class="op" id="3389206">,</span>&nbsp;<span class="ident" id="3389208">err</span>&nbsp;<span class="op" id="3389212">:=</span>&nbsp;<span class="ident" id="3389215"><a href="/text/template/parse/node.go.html#3375020">strconv</a></span><span class="op" id="3389222">.</span><span class="ident" id="3389223">ParseFloat</span><span class="op" id="3389233">(</span><span class="ident" id="3389234"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3389238">,</span>&nbsp;<span class="num" id="3389240">64</span><span class="op" id="3389242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3389246">if</span>&nbsp;<span class="ident" id="3389249"><a href="/text/template/parse/node.go.html#3389208">err</a></span>&nbsp;<span class="op" id="3389253">==</span>&nbsp;<span class="ident" id="3389256">nil</span>&nbsp;<span class="op" id="3389260">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389265"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389266">.</span><span class="ident" id="3389267">IsFloat</span>&nbsp;<span class="op" id="3389275">=</span>&nbsp;<span class="ident" id="3389277">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389285"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389286">.</span><span class="ident" id="3389287">Float64</span>&nbsp;<span class="op" id="3389295">=</span>&nbsp;<span class="ident" id="3389297"><a href="/text/template/parse/node.go.html#3389205">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3389302">//&nbsp;If&nbsp;a&nbsp;floating-point&nbsp;extraction&nbsp;succeeded,&nbsp;extract&nbsp;the&nbsp;int&nbsp;if&nbsp;needed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3389377">if</span>&nbsp;<span class="op" id="3389380">!</span><span class="ident" id="3389381"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389382">.</span><span class="ident" id="3389383">IsInt</span>&nbsp;<span class="op" id="3389389">&amp;&amp;</span>&nbsp;<span class="builtintype" id="3389392">float64</span><span class="op" id="3389399">(</span><span class="ident" id="3389400">int64</span><span class="op" id="3389405">(</span><span class="ident" id="3389406"><a href="/text/template/parse/node.go.html#3389205">f</a></span><span class="op" id="3389407">)</span><span class="op" id="3389408">)</span>&nbsp;<span class="op" id="3389410">==</span>&nbsp;<span class="ident" id="3389413"><a href="/text/template/parse/node.go.html#3389205">f</a></span>&nbsp;<span class="op" id="3389415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389421"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389422">.</span><span class="ident" id="3389423">IsInt</span>&nbsp;<span class="op" id="3389429">=</span>&nbsp;<span class="ident" id="3389431">true</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389440"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389441">.</span><span class="ident" id="3389442">Int64</span>&nbsp;<span class="op" id="3389448">=</span>&nbsp;<span class="ident" id="3389450">int64</span><span class="op" id="3389455">(</span><span class="ident" id="3389456"><a href="/text/template/parse/node.go.html#3389205">f</a></span><span class="op" id="3389457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3389462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3389467">if</span>&nbsp;<span class="op" id="3389470">!</span><span class="ident" id="3389471"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389472">.</span><span class="ident" id="3389473">IsUint</span>&nbsp;<span class="op" id="3389480">&amp;&amp;</span>&nbsp;<span class="builtintype" id="3389483">float64</span><span class="op" id="3389490">(</span><span class="ident" id="3389491">uint64</span><span class="op" id="3389497">(</span><span class="ident" id="3389498"><a href="/text/template/parse/node.go.html#3389205">f</a></span><span class="op" id="3389499">)</span><span class="op" id="3389500">)</span>&nbsp;<span class="op" id="3389502">==</span>&nbsp;<span class="ident" id="3389505"><a href="/text/template/parse/node.go.html#3389205">f</a></span>&nbsp;<span class="op" id="3389507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389513"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389514">.</span><span class="ident" id="3389515">IsUint</span>&nbsp;<span class="op" id="3389522">=</span>&nbsp;<span class="ident" id="3389524">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389533"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389534">.</span><span class="ident" id="3389535">Uint64</span>&nbsp;<span class="op" id="3389542">=</span>&nbsp;<span class="ident" id="3389544">uint64</span><span class="op" id="3389550">(</span><span class="ident" id="3389551"><a href="/text/template/parse/node.go.html#3389205">f</a></span><span class="op" id="3389552">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3389557">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3389561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3389564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3389567">if</span>&nbsp;<span class="op" id="3389570">!</span><span class="ident" id="3389571"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389572">.</span><span class="ident" id="3389573">IsInt</span>&nbsp;<span class="op" id="3389579">&amp;&amp;</span>&nbsp;<span class="op" id="3389582">!</span><span class="ident" id="3389583"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389584">.</span><span class="ident" id="3389585">IsUint</span>&nbsp;<span class="op" id="3389592">&amp;&amp;</span>&nbsp;<span class="op" id="3389595">!</span><span class="ident" id="3389596"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389597">.</span><span class="ident" id="3389598">IsFloat</span>&nbsp;<span class="op" id="3389606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3389610">return</span>&nbsp;<span class="ident" id="3389617">nil</span><span class="op" id="3389620">,</span>&nbsp;<span class="ident" id="3389622"><a href="/text/template/parse/node.go.html#3375013">fmt</a></span><span class="op" id="3389625">.</span><span class="ident" id="3389626">Errorf</span><span class="op" id="3389632">(</span><span class="string" id="3389633">&#34;illegal&nbsp;number&nbsp;syntax:&nbsp;%q&#34;</span><span class="op" id="3389660">,</span>&nbsp;<span class="ident" id="3389662"><a href="/text/template/parse/node.go.html#3387616">text</a></span><span class="op" id="3389666">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3389669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3389672">return</span>&nbsp;<span class="ident" id="3389679"><a href="/text/template/parse/node.go.html#3387667">n</a></span><span class="op" id="3389680">,</span>&nbsp;<span class="ident" id="3389682">nil</span><br>
<span class="lineno"></span><span class="op" id="3389686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3389689">//&nbsp;simplifyComplex&nbsp;pulls&nbsp;out&nbsp;any&nbsp;other&nbsp;types&nbsp;that&nbsp;are&nbsp;represented&nbsp;by&nbsp;the&nbsp;complex&nbsp;number.</span><br>
<span class="lineno">615</span><span class="comment" id="3389778">//&nbsp;These&nbsp;all&nbsp;require&nbsp;that&nbsp;the&nbsp;imaginary&nbsp;part&nbsp;be&nbsp;zero.</span><br>
<span class="lineno"></span><span class="keyword" id="3389832">func</span>&nbsp;<span class="op" id="3389837">(</span><span class="ident" id="3389838">n</span>&nbsp;<span class="op" id="3389840">*</span><span class="ident" id="3389841"><a href="/text/template/parse/node.go.html#3387018">NumberNode</a></span><span class="op" id="3389851">)</span>&nbsp;<span class="ident" id="3389853">simplifyComplex</span><span class="op" id="3389868">(</span><span class="op" id="3389869">)</span>&nbsp;<span class="op" id="3389871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389874"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3389875">.</span><span class="ident" id="3389876">IsFloat</span>&nbsp;<span class="op" id="3389884">=</span>&nbsp;<span class="builtinfunc" id="3389886">imag</span><span class="op" id="3389890">(</span><span class="ident" id="3389891"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3389892">.</span><span class="ident" id="3389893">Complex128</span><span class="op" id="3389903">)</span>&nbsp;<span class="op" id="3389905">==</span>&nbsp;<span class="num" id="3389908">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3389911">if</span>&nbsp;<span class="ident" id="3389914"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3389915">.</span><span class="ident" id="3389916">IsFloat</span>&nbsp;<span class="op" id="3389924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389928"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3389929">.</span><span class="ident" id="3389930">Float64</span>&nbsp;<span class="op" id="3389938">=</span>&nbsp;<span class="builtinfunc" id="3389940">real</span><span class="op" id="3389944">(</span><span class="ident" id="3389945"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3389946">.</span><span class="ident" id="3389947">Complex128</span><span class="op" id="3389957">)</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3389961"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3389962">.</span><span class="ident" id="3389963">IsInt</span>&nbsp;<span class="op" id="3389969">=</span>&nbsp;<span class="builtintype" id="3389971">float64</span><span class="op" id="3389978">(</span><span class="ident" id="3389979">int64</span><span class="op" id="3389984">(</span><span class="ident" id="3389985"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3389986">.</span><span class="ident" id="3389987">Float64</span><span class="op" id="3389994">)</span><span class="op" id="3389995">)</span>&nbsp;<span class="op" id="3389997">==</span>&nbsp;<span class="ident" id="3390000"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3390001">.</span><span class="ident" id="3390002">Float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3390012">if</span>&nbsp;<span class="ident" id="3390015"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3390016">.</span><span class="ident" id="3390017">IsInt</span>&nbsp;<span class="op" id="3390023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3390028"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3390029">.</span><span class="ident" id="3390030">Int64</span>&nbsp;<span class="op" id="3390036">=</span>&nbsp;<span class="ident" id="3390038">int64</span><span class="op" id="3390043">(</span><span class="ident" id="3390044"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3390045">.</span><span class="ident" id="3390046">Float64</span><span class="op" id="3390053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3390057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3390061"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3390062">.</span><span class="ident" id="3390063">IsUint</span>&nbsp;<span class="op" id="3390070">=</span>&nbsp;<span class="builtintype" id="3390072">float64</span><span class="op" id="3390079">(</span><span class="ident" id="3390080">uint64</span><span class="op" id="3390086">(</span><span class="ident" id="3390087"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3390088">.</span><span class="ident" id="3390089">Float64</span><span class="op" id="3390096">)</span><span class="op" id="3390097">)</span>&nbsp;<span class="op" id="3390099">==</span>&nbsp;<span class="ident" id="3390102"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3390103">.</span><span class="ident" id="3390104">Float64</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3390114">if</span>&nbsp;<span class="ident" id="3390117"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3390118">.</span><span class="ident" id="3390119">IsUint</span>&nbsp;<span class="op" id="3390126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3390131"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3390132">.</span><span class="ident" id="3390133">Uint64</span>&nbsp;<span class="op" id="3390140">=</span>&nbsp;<span class="ident" id="3390142">uint64</span><span class="op" id="3390148">(</span><span class="ident" id="3390149"><a href="/text/template/parse/node.go.html#3389838">n</a></span><span class="op" id="3390150">.</span><span class="ident" id="3390151">Float64</span><span class="op" id="3390158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3390162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3390165">}</span><br>
<span class="lineno"></span><span class="op" id="3390167">}</span><br>
<span class="lineno">630</span><br>
<span class="lineno"></span><span class="keyword" id="3390170">func</span>&nbsp;<span class="op" id="3390175">(</span><span class="ident" id="3390176">n</span>&nbsp;<span class="op" id="3390178">*</span><span class="ident" id="3390179"><a href="/text/template/parse/node.go.html#3387018">NumberNode</a></span><span class="op" id="3390189">)</span>&nbsp;<span class="ident" id="3390191">String</span><span class="op" id="3390197">(</span><span class="op" id="3390198">)</span>&nbsp;<span class="builtintype" id="3390200">string</span>&nbsp;<span class="op" id="3390207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3390210">return</span>&nbsp;<span class="ident" id="3390217"><a href="/text/template/parse/node.go.html#3390176">n</a></span><span class="op" id="3390218">.</span><span class="ident" id="3390219">Text</span><br>
<span class="lineno"></span><span class="op" id="3390224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span><span class="keyword" id="3390227">func</span>&nbsp;<span class="op" id="3390232">(</span><span class="ident" id="3390233">n</span>&nbsp;<span class="op" id="3390235">*</span><span class="ident" id="3390236"><a href="/text/template/parse/node.go.html#3387018">NumberNode</a></span><span class="op" id="3390246">)</span>&nbsp;<span class="ident" id="3390248">tree</span><span class="op" id="3390252">(</span><span class="op" id="3390253">)</span>&nbsp;<span class="op" id="3390255">*</span><span class="ident" id="3390256"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3390261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3390264">return</span>&nbsp;<span class="ident" id="3390271"><a href="/text/template/parse/node.go.html#3390233">n</a></span><span class="op" id="3390272">.</span><span class="ident" id="3390273">tr</span><br>
<span class="lineno"></span><span class="op" id="3390276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3390279">func</span>&nbsp;<span class="op" id="3390284">(</span><span class="ident" id="3390285">n</span>&nbsp;<span class="op" id="3390287">*</span><span class="ident" id="3390288"><a href="/text/template/parse/node.go.html#3387018">NumberNode</a></span><span class="op" id="3390298">)</span>&nbsp;<span class="ident" id="3390300">Copy</span><span class="op" id="3390304">(</span><span class="op" id="3390305">)</span>&nbsp;<span class="ident" id="3390307"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3390312">{</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3390315">nn</span>&nbsp;<span class="op" id="3390318">:=</span>&nbsp;<span class="builtinfunc" id="3390321">new</span><span class="op" id="3390324">(</span><span class="ident" id="3390325"><a href="/text/template/parse/node.go.html#3387018">NumberNode</a></span><span class="op" id="3390335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3390338">*</span><span class="ident" id="3390339"><a href="/text/template/parse/node.go.html#3390315">nn</a></span>&nbsp;<span class="op" id="3390342">=</span>&nbsp;<span class="op" id="3390344">*</span><span class="ident" id="3390345"><a href="/text/template/parse/node.go.html#3390285">n</a></span>&nbsp;<span class="comment" id="3390347">//&nbsp;Easy,&nbsp;fast,&nbsp;correct.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3390372">return</span>&nbsp;<span class="ident" id="3390379"><a href="/text/template/parse/node.go.html#3390315">nn</a></span><br>
<span class="lineno"></span><span class="op" id="3390382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">645</span><span class="comment" id="3390385">//&nbsp;StringNode&nbsp;holds&nbsp;a&nbsp;string&nbsp;constant.&nbsp;The&nbsp;value&nbsp;has&nbsp;been&nbsp;&#34;unquoted&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3390455">type</span>&nbsp;<span class="ident" id="3390460">StringNode</span>&nbsp;<span class="keyword" id="3390471">struct</span>&nbsp;<span class="op" id="3390478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3390481"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3390491"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3390496">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3390503">*</span><span class="ident" id="3390504"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3390510">Quoted</span>&nbsp;<span class="builtintype" id="3390517">string</span>&nbsp;<span class="comment" id="3390524">//&nbsp;The&nbsp;original&nbsp;text&nbsp;of&nbsp;the&nbsp;string,&nbsp;with&nbsp;quotes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3390574">Text</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3390581">string</span>&nbsp;<span class="comment" id="3390588">//&nbsp;The&nbsp;string,&nbsp;after&nbsp;quote&nbsp;processing.</span><br>
<span class="lineno"></span><span class="op" id="3390627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3390630">func</span>&nbsp;<span class="op" id="3390635">(</span><span class="ident" id="3390636">t</span>&nbsp;<span class="op" id="3390638">*</span><span class="ident" id="3390639"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3390643">)</span>&nbsp;<span class="ident" id="3390645">newString</span><span class="op" id="3390654">(</span><span class="ident" id="3390655">pos</span>&nbsp;<span class="ident" id="3390659"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3390662">,</span>&nbsp;<span class="ident" id="3390664">orig</span><span class="op" id="3390668">,</span>&nbsp;<span class="ident" id="3390670">text</span>&nbsp;<span class="builtintype" id="3390675">string</span><span class="op" id="3390681">)</span>&nbsp;<span class="op" id="3390683">*</span><span class="ident" id="3390684"><a href="/text/template/parse/node.go.html#3390460">StringNode</a></span>&nbsp;<span class="op" id="3390695">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3390698">return</span>&nbsp;<span class="op" id="3390705">&amp;</span><span class="ident" id="3390706"><a href="/text/template/parse/node.go.html#3390460">StringNode</a></span><span class="op" id="3390716">{</span><span class="ident" id="3390717">tr</span><span class="op" id="3390719">:</span>&nbsp;<span class="ident" id="3390721"><a href="/text/template/parse/node.go.html#3390636">t</a></span><span class="op" id="3390722">,</span>&nbsp;<span class="ident" id="3390724">NodeType</span><span class="op" id="3390732">:</span>&nbsp;<span class="ident" id="3390734"><a href="/text/template/parse/node.go.html#3377129">NodeString</a></span><span class="op" id="3390744">,</span>&nbsp;<span class="ident" id="3390746">Pos</span><span class="op" id="3390749">:</span>&nbsp;<span class="ident" id="3390751"><a href="/text/template/parse/node.go.html#3390655">pos</a></span><span class="op" id="3390754">,</span>&nbsp;<span class="ident" id="3390756">Quoted</span><span class="op" id="3390762">:</span>&nbsp;<span class="ident" id="3390764"><a href="/text/template/parse/node.go.html#3390664">orig</a></span><span class="op" id="3390768">,</span>&nbsp;<span class="ident" id="3390770">Text</span><span class="op" id="3390774">:</span>&nbsp;<span class="ident" id="3390776"><a href="/text/template/parse/node.go.html#3390670">text</a></span><span class="op" id="3390780">}</span><br>
<span class="lineno"></span><span class="op" id="3390782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3390785">func</span>&nbsp;<span class="op" id="3390790">(</span><span class="ident" id="3390791">s</span>&nbsp;<span class="op" id="3390793">*</span><span class="ident" id="3390794"><a href="/text/template/parse/node.go.html#3390460">StringNode</a></span><span class="op" id="3390804">)</span>&nbsp;<span class="ident" id="3390806">String</span><span class="op" id="3390812">(</span><span class="op" id="3390813">)</span>&nbsp;<span class="builtintype" id="3390815">string</span>&nbsp;<span class="op" id="3390822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3390825">return</span>&nbsp;<span class="ident" id="3390832"><a href="/text/template/parse/node.go.html#3390791">s</a></span><span class="op" id="3390833">.</span><span class="ident" id="3390834">Quoted</span><br>
<span class="lineno">660</span><span class="op" id="3390841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3390844">func</span>&nbsp;<span class="op" id="3390849">(</span><span class="ident" id="3390850">s</span>&nbsp;<span class="op" id="3390852">*</span><span class="ident" id="3390853"><a href="/text/template/parse/node.go.html#3390460">StringNode</a></span><span class="op" id="3390863">)</span>&nbsp;<span class="ident" id="3390865">tree</span><span class="op" id="3390869">(</span><span class="op" id="3390870">)</span>&nbsp;<span class="op" id="3390872">*</span><span class="ident" id="3390873"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3390878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3390881">return</span>&nbsp;<span class="ident" id="3390888"><a href="/text/template/parse/node.go.html#3390850">s</a></span><span class="op" id="3390889">.</span><span class="ident" id="3390890">tr</span><br>
<span class="lineno"></span><span class="op" id="3390893">}</span><br>
<span class="lineno">665</span><br>
<span class="lineno"></span><span class="keyword" id="3390896">func</span>&nbsp;<span class="op" id="3390901">(</span><span class="ident" id="3390902">s</span>&nbsp;<span class="op" id="3390904">*</span><span class="ident" id="3390905"><a href="/text/template/parse/node.go.html#3390460">StringNode</a></span><span class="op" id="3390915">)</span>&nbsp;<span class="ident" id="3390917">Copy</span><span class="op" id="3390921">(</span><span class="op" id="3390922">)</span>&nbsp;<span class="ident" id="3390924"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3390929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3390932">return</span>&nbsp;<span class="ident" id="3390939"><a href="/text/template/parse/node.go.html#3390902">s</a></span><span class="op" id="3390940">.</span><span class="ident" id="3390941">tr</span><span class="op" id="3390943">.</span><span class="ident" id="3390944">newString</span><span class="op" id="3390953">(</span><span class="ident" id="3390954"><a href="/text/template/parse/node.go.html#3390902">s</a></span><span class="op" id="3390955">.</span><span class="ident" id="3390956">Pos</span><span class="op" id="3390959">,</span>&nbsp;<span class="ident" id="3390961"><a href="/text/template/parse/node.go.html#3390902">s</a></span><span class="op" id="3390962">.</span><span class="ident" id="3390963">Quoted</span><span class="op" id="3390969">,</span>&nbsp;<span class="ident" id="3390971"><a href="/text/template/parse/node.go.html#3390902">s</a></span><span class="op" id="3390972">.</span><span class="ident" id="3390973">Text</span><span class="op" id="3390977">)</span><br>
<span class="lineno"></span><span class="op" id="3390979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">670</span><span class="comment" id="3390982">//&nbsp;endNode&nbsp;represents&nbsp;an&nbsp;{{end}}&nbsp;action.</span><br>
<span class="lineno"></span><span class="comment" id="3391023">//&nbsp;It&nbsp;does&nbsp;not&nbsp;appear&nbsp;in&nbsp;the&nbsp;final&nbsp;parse&nbsp;tree.</span><br>
<span class="lineno"></span><span class="keyword" id="3391070">type</span>&nbsp;<span class="ident" id="3391075">endNode</span>&nbsp;<span class="keyword" id="3391083">struct</span>&nbsp;<span class="op" id="3391090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3391093"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3391103"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3391108">tr</span>&nbsp;<span class="op" id="3391111">*</span><span class="ident" id="3391112"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span><span class="op" id="3391117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3391120">func</span>&nbsp;<span class="op" id="3391125">(</span><span class="ident" id="3391126">t</span>&nbsp;<span class="op" id="3391128">*</span><span class="ident" id="3391129"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3391133">)</span>&nbsp;<span class="ident" id="3391135">newEnd</span><span class="op" id="3391141">(</span><span class="ident" id="3391142">pos</span>&nbsp;<span class="ident" id="3391146"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3391149">)</span>&nbsp;<span class="op" id="3391151">*</span><span class="ident" id="3391152"><a href="/text/template/parse/node.go.html#3391075">endNode</a></span>&nbsp;<span class="op" id="3391160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3391163">return</span>&nbsp;<span class="op" id="3391170">&amp;</span><span class="ident" id="3391171"><a href="/text/template/parse/node.go.html#3391075">endNode</a></span><span class="op" id="3391178">{</span><span class="ident" id="3391179">tr</span><span class="op" id="3391181">:</span>&nbsp;<span class="ident" id="3391183"><a href="/text/template/parse/node.go.html#3391126">t</a></span><span class="op" id="3391184">,</span>&nbsp;<span class="ident" id="3391186">NodeType</span><span class="op" id="3391194">:</span>&nbsp;<span class="ident" id="3391196"><a href="/text/template/parse/node.go.html#3376599">nodeEnd</a></span><span class="op" id="3391203">,</span>&nbsp;<span class="ident" id="3391205">Pos</span><span class="op" id="3391208">:</span>&nbsp;<span class="ident" id="3391210"><a href="/text/template/parse/node.go.html#3391142">pos</a></span><span class="op" id="3391213">}</span><br>
<span class="lineno">680</span><span class="op" id="3391215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3391218">func</span>&nbsp;<span class="op" id="3391223">(</span><span class="ident" id="3391224">e</span>&nbsp;<span class="op" id="3391226">*</span><span class="ident" id="3391227"><a href="/text/template/parse/node.go.html#3391075">endNode</a></span><span class="op" id="3391234">)</span>&nbsp;<span class="ident" id="3391236">String</span><span class="op" id="3391242">(</span><span class="op" id="3391243">)</span>&nbsp;<span class="builtintype" id="3391245">string</span>&nbsp;<span class="op" id="3391252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3391255">return</span>&nbsp;<span class="string" id="3391262">&#34;{{end}}&#34;</span><br>
<span class="lineno"></span><span class="op" id="3391272">}</span><br>
<span class="lineno">685</span><br>
<span class="lineno"></span><span class="keyword" id="3391275">func</span>&nbsp;<span class="op" id="3391280">(</span><span class="ident" id="3391281">e</span>&nbsp;<span class="op" id="3391283">*</span><span class="ident" id="3391284"><a href="/text/template/parse/node.go.html#3391075">endNode</a></span><span class="op" id="3391291">)</span>&nbsp;<span class="ident" id="3391293">tree</span><span class="op" id="3391297">(</span><span class="op" id="3391298">)</span>&nbsp;<span class="op" id="3391300">*</span><span class="ident" id="3391301"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3391306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3391309">return</span>&nbsp;<span class="ident" id="3391316"><a href="/text/template/parse/node.go.html#3391281">e</a></span><span class="op" id="3391317">.</span><span class="ident" id="3391318">tr</span><br>
<span class="lineno"></span><span class="op" id="3391321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="3391324">func</span>&nbsp;<span class="op" id="3391329">(</span><span class="ident" id="3391330">e</span>&nbsp;<span class="op" id="3391332">*</span><span class="ident" id="3391333"><a href="/text/template/parse/node.go.html#3391075">endNode</a></span><span class="op" id="3391340">)</span>&nbsp;<span class="ident" id="3391342">Copy</span><span class="op" id="3391346">(</span><span class="op" id="3391347">)</span>&nbsp;<span class="ident" id="3391349"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3391354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3391357">return</span>&nbsp;<span class="ident" id="3391364"><a href="/text/template/parse/node.go.html#3391330">e</a></span><span class="op" id="3391365">.</span><span class="ident" id="3391366">tr</span><span class="op" id="3391368">.</span><span class="ident" id="3391369">newEnd</span><span class="op" id="3391375">(</span><span class="ident" id="3391376"><a href="/text/template/parse/node.go.html#3391330">e</a></span><span class="op" id="3391377">.</span><span class="ident" id="3391378">Pos</span><span class="op" id="3391381">)</span><br>
<span class="lineno"></span><span class="op" id="3391383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3391386">//&nbsp;elseNode&nbsp;represents&nbsp;an&nbsp;{{else}}&nbsp;action.&nbsp;Does&nbsp;not&nbsp;appear&nbsp;in&nbsp;the&nbsp;final&nbsp;tree.</span><br>
<span class="lineno">695</span><span class="keyword" id="3391464">type</span>&nbsp;<span class="ident" id="3391469">elseNode</span>&nbsp;<span class="keyword" id="3391478">struct</span>&nbsp;<span class="op" id="3391485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3391488"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3391498"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3391503">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3391508">*</span><span class="ident" id="3391509"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3391515">Line</span>&nbsp;<span class="builtintype" id="3391520">int</span>&nbsp;<span class="comment" id="3391524">//&nbsp;The&nbsp;line&nbsp;number&nbsp;in&nbsp;the&nbsp;input&nbsp;(deprecated;&nbsp;kept&nbsp;for&nbsp;compatibility)</span><br>
<span class="lineno">700</span><span class="op" id="3391593">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3391596">func</span>&nbsp;<span class="op" id="3391601">(</span><span class="ident" id="3391602">t</span>&nbsp;<span class="op" id="3391604">*</span><span class="ident" id="3391605"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3391609">)</span>&nbsp;<span class="ident" id="3391611">newElse</span><span class="op" id="3391618">(</span><span class="ident" id="3391619">pos</span>&nbsp;<span class="ident" id="3391623"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3391626">,</span>&nbsp;<span class="ident" id="3391628">line</span>&nbsp;<span class="builtintype" id="3391633">int</span><span class="op" id="3391636">)</span>&nbsp;<span class="op" id="3391638">*</span><span class="ident" id="3391639"><a href="/text/template/parse/node.go.html#3391469">elseNode</a></span>&nbsp;<span class="op" id="3391648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3391651">return</span>&nbsp;<span class="op" id="3391658">&amp;</span><span class="ident" id="3391659"><a href="/text/template/parse/node.go.html#3391469">elseNode</a></span><span class="op" id="3391667">{</span><span class="ident" id="3391668">tr</span><span class="op" id="3391670">:</span>&nbsp;<span class="ident" id="3391672"><a href="/text/template/parse/node.go.html#3391602">t</a></span><span class="op" id="3391673">,</span>&nbsp;<span class="ident" id="3391675">NodeType</span><span class="op" id="3391683">:</span>&nbsp;<span class="ident" id="3391685"><a href="/text/template/parse/node.go.html#3376529">nodeElse</a></span><span class="op" id="3391693">,</span>&nbsp;<span class="ident" id="3391695">Pos</span><span class="op" id="3391698">:</span>&nbsp;<span class="ident" id="3391700"><a href="/text/template/parse/node.go.html#3391619">pos</a></span><span class="op" id="3391703">,</span>&nbsp;<span class="ident" id="3391705">Line</span><span class="op" id="3391709">:</span>&nbsp;<span class="ident" id="3391711"><a href="/text/template/parse/node.go.html#3391628">line</a></span><span class="op" id="3391715">}</span><br>
<span class="lineno"></span><span class="op" id="3391717">}</span><br>
<span class="lineno">705</span><br>
<span class="lineno"></span><span class="keyword" id="3391720">func</span>&nbsp;<span class="op" id="3391725">(</span><span class="ident" id="3391726">e</span>&nbsp;<span class="op" id="3391728">*</span><span class="ident" id="3391729"><a href="/text/template/parse/node.go.html#3391469">elseNode</a></span><span class="op" id="3391737">)</span>&nbsp;<span class="ident" id="3391739">Type</span><span class="op" id="3391743">(</span><span class="op" id="3391744">)</span>&nbsp;<span class="ident" id="3391746"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span>&nbsp;<span class="op" id="3391755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3391758">return</span>&nbsp;<span class="ident" id="3391765"><a href="/text/template/parse/node.go.html#3376529">nodeElse</a></span><br>
<span class="lineno"></span><span class="op" id="3391774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">710</span><span class="keyword" id="3391777">func</span>&nbsp;<span class="op" id="3391782">(</span><span class="ident" id="3391783">e</span>&nbsp;<span class="op" id="3391785">*</span><span class="ident" id="3391786"><a href="/text/template/parse/node.go.html#3391469">elseNode</a></span><span class="op" id="3391794">)</span>&nbsp;<span class="ident" id="3391796">String</span><span class="op" id="3391802">(</span><span class="op" id="3391803">)</span>&nbsp;<span class="builtintype" id="3391805">string</span>&nbsp;<span class="op" id="3391812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3391815">return</span>&nbsp;<span class="string" id="3391822">&#34;{{else}}&#34;</span><br>
<span class="lineno"></span><span class="op" id="3391833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3391836">func</span>&nbsp;<span class="op" id="3391841">(</span><span class="ident" id="3391842">e</span>&nbsp;<span class="op" id="3391844">*</span><span class="ident" id="3391845"><a href="/text/template/parse/node.go.html#3391469">elseNode</a></span><span class="op" id="3391853">)</span>&nbsp;<span class="ident" id="3391855">tree</span><span class="op" id="3391859">(</span><span class="op" id="3391860">)</span>&nbsp;<span class="op" id="3391862">*</span><span class="ident" id="3391863"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3391868">{</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3391871">return</span>&nbsp;<span class="ident" id="3391878"><a href="/text/template/parse/node.go.html#3391842">e</a></span><span class="op" id="3391879">.</span><span class="ident" id="3391880">tr</span><br>
<span class="lineno"></span><span class="op" id="3391883">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3391886">func</span>&nbsp;<span class="op" id="3391891">(</span><span class="ident" id="3391892">e</span>&nbsp;<span class="op" id="3391894">*</span><span class="ident" id="3391895"><a href="/text/template/parse/node.go.html#3391469">elseNode</a></span><span class="op" id="3391903">)</span>&nbsp;<span class="ident" id="3391905">Copy</span><span class="op" id="3391909">(</span><span class="op" id="3391910">)</span>&nbsp;<span class="ident" id="3391912"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3391917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3391920">return</span>&nbsp;<span class="ident" id="3391927"><a href="/text/template/parse/node.go.html#3391892">e</a></span><span class="op" id="3391928">.</span><span class="ident" id="3391929">tr</span><span class="op" id="3391931">.</span><span class="ident" id="3391932">newElse</span><span class="op" id="3391939">(</span><span class="ident" id="3391940"><a href="/text/template/parse/node.go.html#3391892">e</a></span><span class="op" id="3391941">.</span><span class="ident" id="3391942">Pos</span><span class="op" id="3391945">,</span>&nbsp;<span class="ident" id="3391947"><a href="/text/template/parse/node.go.html#3391892">e</a></span><span class="op" id="3391948">.</span><span class="ident" id="3391949">Line</span><span class="op" id="3391953">)</span><br>
<span class="lineno">720</span><span class="op" id="3391955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3391958">//&nbsp;BranchNode&nbsp;is&nbsp;the&nbsp;common&nbsp;representation&nbsp;of&nbsp;if,&nbsp;range,&nbsp;and&nbsp;with.</span><br>
<span class="lineno"></span><span class="keyword" id="3392025">type</span>&nbsp;<span class="ident" id="3392030">BranchNode</span>&nbsp;<span class="keyword" id="3392041">struct</span>&nbsp;<span class="op" id="3392048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392051"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392061"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392066">tr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3392075">*</span><span class="ident" id="3392076"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392082">Line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3392091">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3392101">//&nbsp;The&nbsp;line&nbsp;number&nbsp;in&nbsp;the&nbsp;input&nbsp;(deprecated;&nbsp;kept&nbsp;for&nbsp;compatibility)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392171">Pipe</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3392180">*</span><span class="ident" id="3392181"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span>&nbsp;<span class="comment" id="3392190">//&nbsp;The&nbsp;pipeline&nbsp;to&nbsp;be&nbsp;evaluated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392224">List</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3392233">*</span><span class="ident" id="3392234"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span>&nbsp;<span class="comment" id="3392243">//&nbsp;What&nbsp;to&nbsp;execute&nbsp;if&nbsp;the&nbsp;value&nbsp;is&nbsp;non-empty.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392290">ElseList</span>&nbsp;<span class="op" id="3392299">*</span><span class="ident" id="3392300"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span>&nbsp;<span class="comment" id="3392309">//&nbsp;What&nbsp;to&nbsp;execute&nbsp;if&nbsp;the&nbsp;value&nbsp;is&nbsp;empty&nbsp;(nil&nbsp;if&nbsp;absent).</span><br>
<span class="lineno"></span><span class="op" id="3392367">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3392370">func</span>&nbsp;<span class="op" id="3392375">(</span><span class="ident" id="3392376">b</span>&nbsp;<span class="op" id="3392378">*</span><span class="ident" id="3392379"><a href="/text/template/parse/node.go.html#3392030">BranchNode</a></span><span class="op" id="3392389">)</span>&nbsp;<span class="ident" id="3392391">String</span><span class="op" id="3392397">(</span><span class="op" id="3392398">)</span>&nbsp;<span class="builtintype" id="3392400">string</span>&nbsp;<span class="op" id="3392407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392410">name</span>&nbsp;<span class="op" id="3392415">:=</span>&nbsp;<span class="string" id="3392418">&#34;&#34;</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392422">switch</span>&nbsp;<span class="ident" id="3392429"><a href="/text/template/parse/node.go.html#3392376">b</a></span><span class="op" id="3392430">.</span><span class="ident" id="3392431">NodeType</span>&nbsp;<span class="op" id="3392440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392443">case</span>&nbsp;<span class="ident" id="3392448"><a href="/text/template/parse/node.go.html#3376801">NodeIf</a></span><span class="op" id="3392454">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392458"><a href="/text/template/parse/node.go.html#3392410">name</a></span>&nbsp;<span class="op" id="3392463">=</span>&nbsp;<span class="string" id="3392465">&#34;if&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392471">case</span>&nbsp;<span class="ident" id="3392476"><a href="/text/template/parse/node.go.html#3377078">NodeRange</a></span><span class="op" id="3392485">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392489"><a href="/text/template/parse/node.go.html#3392410">name</a></span>&nbsp;<span class="op" id="3392494">=</span>&nbsp;<span class="string" id="3392496">&#34;range&#34;</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392505">case</span>&nbsp;<span class="ident" id="3392510"><a href="/text/template/parse/node.go.html#3377297">NodeWith</a></span><span class="op" id="3392518">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3392522"><a href="/text/template/parse/node.go.html#3392410">name</a></span>&nbsp;<span class="op" id="3392527">=</span>&nbsp;<span class="string" id="3392529">&#34;with&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392537">default</span><span class="op" id="3392544">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3392548">panic</span><span class="op" id="3392553">(</span><span class="string" id="3392554">&#34;unknown&nbsp;branch&nbsp;type&#34;</span><span class="op" id="3392575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3392578">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392581">if</span>&nbsp;<span class="ident" id="3392584"><a href="/text/template/parse/node.go.html#3392376">b</a></span><span class="op" id="3392585">.</span><span class="ident" id="3392586">ElseList</span>&nbsp;<span class="op" id="3392595">!=</span>&nbsp;<span class="ident" id="3392598">nil</span>&nbsp;<span class="op" id="3392602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392606">return</span>&nbsp;<span class="ident" id="3392613"><a href="/text/template/parse/node.go.html#3375013">fmt</a></span><span class="op" id="3392616">.</span><span class="ident" id="3392617">Sprintf</span><span class="op" id="3392624">(</span><span class="string" id="3392625">&#34;{{%s&nbsp;%s}}%s{{else}}%s{{end}}&#34;</span><span class="op" id="3392655">,</span>&nbsp;<span class="ident" id="3392657"><a href="/text/template/parse/node.go.html#3392410">name</a></span><span class="op" id="3392661">,</span>&nbsp;<span class="ident" id="3392663"><a href="/text/template/parse/node.go.html#3392376">b</a></span><span class="op" id="3392664">.</span><span class="ident" id="3392665">Pipe</span><span class="op" id="3392669">,</span>&nbsp;<span class="ident" id="3392671"><a href="/text/template/parse/node.go.html#3392376">b</a></span><span class="op" id="3392672">.</span><span class="ident" id="3392673">List</span><span class="op" id="3392677">,</span>&nbsp;<span class="ident" id="3392679"><a href="/text/template/parse/node.go.html#3392376">b</a></span><span class="op" id="3392680">.</span><span class="ident" id="3392681">ElseList</span><span class="op" id="3392689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3392692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392695">return</span>&nbsp;<span class="ident" id="3392702"><a href="/text/template/parse/node.go.html#3375013">fmt</a></span><span class="op" id="3392705">.</span><span class="ident" id="3392706">Sprintf</span><span class="op" id="3392713">(</span><span class="string" id="3392714">&#34;{{%s&nbsp;%s}}%s{{end}}&#34;</span><span class="op" id="3392734">,</span>&nbsp;<span class="ident" id="3392736"><a href="/text/template/parse/node.go.html#3392410">name</a></span><span class="op" id="3392740">,</span>&nbsp;<span class="ident" id="3392742"><a href="/text/template/parse/node.go.html#3392376">b</a></span><span class="op" id="3392743">.</span><span class="ident" id="3392744">Pipe</span><span class="op" id="3392748">,</span>&nbsp;<span class="ident" id="3392750"><a href="/text/template/parse/node.go.html#3392376">b</a></span><span class="op" id="3392751">.</span><span class="ident" id="3392752">List</span><span class="op" id="3392756">)</span><br>
<span class="lineno"></span><span class="op" id="3392758">}</span><br>
<span class="lineno">750</span><br>
<span class="lineno"></span><span class="keyword" id="3392761">func</span>&nbsp;<span class="op" id="3392766">(</span><span class="ident" id="3392767">b</span>&nbsp;<span class="op" id="3392769">*</span><span class="ident" id="3392770"><a href="/text/template/parse/node.go.html#3392030">BranchNode</a></span><span class="op" id="3392780">)</span>&nbsp;<span class="ident" id="3392782">tree</span><span class="op" id="3392786">(</span><span class="op" id="3392787">)</span>&nbsp;<span class="op" id="3392789">*</span><span class="ident" id="3392790"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3392795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392798">return</span>&nbsp;<span class="ident" id="3392805"><a href="/text/template/parse/node.go.html#3392767">b</a></span><span class="op" id="3392806">.</span><span class="ident" id="3392807">tr</span><br>
<span class="lineno"></span><span class="op" id="3392810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="keyword" id="3392813">func</span>&nbsp;<span class="op" id="3392818">(</span><span class="ident" id="3392819">b</span>&nbsp;<span class="op" id="3392821">*</span><span class="ident" id="3392822"><a href="/text/template/parse/node.go.html#3392030">BranchNode</a></span><span class="op" id="3392832">)</span>&nbsp;<span class="ident" id="3392834">Copy</span><span class="op" id="3392838">(</span><span class="op" id="3392839">)</span>&nbsp;<span class="ident" id="3392841"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3392846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392849">switch</span>&nbsp;<span class="ident" id="3392856"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3392857">.</span><span class="ident" id="3392858">NodeType</span>&nbsp;<span class="op" id="3392867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392870">case</span>&nbsp;<span class="ident" id="3392875"><a href="/text/template/parse/node.go.html#3376801">NodeIf</a></span><span class="op" id="3392881">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392885">return</span>&nbsp;<span class="ident" id="3392892"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3392893">.</span><span class="ident" id="3392894">tr</span><span class="op" id="3392896">.</span><span class="ident" id="3392897">newIf</span><span class="op" id="3392902">(</span><span class="ident" id="3392903"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3392904">.</span><span class="ident" id="3392905">Pos</span><span class="op" id="3392908">,</span>&nbsp;<span class="ident" id="3392910"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3392911">.</span><span class="ident" id="3392912">Line</span><span class="op" id="3392916">,</span>&nbsp;<span class="ident" id="3392918"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3392919">.</span><span class="ident" id="3392920">Pipe</span><span class="op" id="3392924">,</span>&nbsp;<span class="ident" id="3392926"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3392927">.</span><span class="ident" id="3392928">List</span><span class="op" id="3392932">,</span>&nbsp;<span class="ident" id="3392934"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3392935">.</span><span class="ident" id="3392936">ElseList</span><span class="op" id="3392944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392947">case</span>&nbsp;<span class="ident" id="3392952"><a href="/text/template/parse/node.go.html#3377078">NodeRange</a></span><span class="op" id="3392961">:</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3392965">return</span>&nbsp;<span class="ident" id="3392972"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3392973">.</span><span class="ident" id="3392974">tr</span><span class="op" id="3392976">.</span><span class="ident" id="3392977">newRange</span><span class="op" id="3392985">(</span><span class="ident" id="3392986"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3392987">.</span><span class="ident" id="3392988">Pos</span><span class="op" id="3392991">,</span>&nbsp;<span class="ident" id="3392993"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3392994">.</span><span class="ident" id="3392995">Line</span><span class="op" id="3392999">,</span>&nbsp;<span class="ident" id="3393001"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3393002">.</span><span class="ident" id="3393003">Pipe</span><span class="op" id="3393007">,</span>&nbsp;<span class="ident" id="3393009"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3393010">.</span><span class="ident" id="3393011">List</span><span class="op" id="3393015">,</span>&nbsp;<span class="ident" id="3393017"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3393018">.</span><span class="ident" id="3393019">ElseList</span><span class="op" id="3393027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3393030">case</span>&nbsp;<span class="ident" id="3393035"><a href="/text/template/parse/node.go.html#3377297">NodeWith</a></span><span class="op" id="3393043">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3393047">return</span>&nbsp;<span class="ident" id="3393054"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3393055">.</span><span class="ident" id="3393056">tr</span><span class="op" id="3393058">.</span><span class="ident" id="3393059">newWith</span><span class="op" id="3393066">(</span><span class="ident" id="3393067"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3393068">.</span><span class="ident" id="3393069">Pos</span><span class="op" id="3393072">,</span>&nbsp;<span class="ident" id="3393074"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3393075">.</span><span class="ident" id="3393076">Line</span><span class="op" id="3393080">,</span>&nbsp;<span class="ident" id="3393082"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3393083">.</span><span class="ident" id="3393084">Pipe</span><span class="op" id="3393088">,</span>&nbsp;<span class="ident" id="3393090"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3393091">.</span><span class="ident" id="3393092">List</span><span class="op" id="3393096">,</span>&nbsp;<span class="ident" id="3393098"><a href="/text/template/parse/node.go.html#3392819">b</a></span><span class="op" id="3393099">.</span><span class="ident" id="3393100">ElseList</span><span class="op" id="3393108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3393111">default</span><span class="op" id="3393118">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3393122">panic</span><span class="op" id="3393127">(</span><span class="string" id="3393128">&#34;unknown&nbsp;branch&nbsp;type&#34;</span><span class="op" id="3393149">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3393152">}</span><br>
<span class="lineno"></span><span class="op" id="3393154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3393157">//&nbsp;IfNode&nbsp;represents&nbsp;an&nbsp;{{if}}&nbsp;action&nbsp;and&nbsp;its&nbsp;commands.</span><br>
<span class="lineno"></span><span class="keyword" id="3393213">type</span>&nbsp;<span class="ident" id="3393218">IfNode</span>&nbsp;<span class="keyword" id="3393225">struct</span>&nbsp;<span class="op" id="3393232">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3393235"><a href="/text/template/parse/node.go.html#3392030">BranchNode</a></span><br>
<span class="lineno"></span><span class="op" id="3393246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3393249">func</span>&nbsp;<span class="op" id="3393254">(</span><span class="ident" id="3393255">t</span>&nbsp;<span class="op" id="3393257">*</span><span class="ident" id="3393258"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3393262">)</span>&nbsp;<span class="ident" id="3393264">newIf</span><span class="op" id="3393269">(</span><span class="ident" id="3393270">pos</span>&nbsp;<span class="ident" id="3393274"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3393277">,</span>&nbsp;<span class="ident" id="3393279">line</span>&nbsp;<span class="builtintype" id="3393284">int</span><span class="op" id="3393287">,</span>&nbsp;<span class="ident" id="3393289">pipe</span>&nbsp;<span class="op" id="3393294">*</span><span class="ident" id="3393295"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3393303">,</span>&nbsp;<span class="ident" id="3393305">list</span><span class="op" id="3393309">,</span>&nbsp;<span class="ident" id="3393311">elseList</span>&nbsp;<span class="op" id="3393320">*</span><span class="ident" id="3393321"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span><span class="op" id="3393329">)</span>&nbsp;<span class="op" id="3393331">*</span><span class="ident" id="3393332"><a href="/text/template/parse/node.go.html#3393218">IfNode</a></span>&nbsp;<span class="op" id="3393339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3393342">return</span>&nbsp;<span class="op" id="3393349">&amp;</span><span class="ident" id="3393350"><a href="/text/template/parse/node.go.html#3393218">IfNode</a></span><span class="op" id="3393356">{</span><span class="ident" id="3393357"><a href="/text/template/parse/node.go.html#3392030">BranchNode</a></span><span class="op" id="3393367">{</span><span class="ident" id="3393368">tr</span><span class="op" id="3393370">:</span>&nbsp;<span class="ident" id="3393372"><a href="/text/template/parse/node.go.html#3393255">t</a></span><span class="op" id="3393373">,</span>&nbsp;<span class="ident" id="3393375">NodeType</span><span class="op" id="3393383">:</span>&nbsp;<span class="ident" id="3393385"><a href="/text/template/parse/node.go.html#3376801">NodeIf</a></span><span class="op" id="3393391">,</span>&nbsp;<span class="ident" id="3393393">Pos</span><span class="op" id="3393396">:</span>&nbsp;<span class="ident" id="3393398"><a href="/text/template/parse/node.go.html#3393270">pos</a></span><span class="op" id="3393401">,</span>&nbsp;<span class="ident" id="3393403">Line</span><span class="op" id="3393407">:</span>&nbsp;<span class="ident" id="3393409"><a href="/text/template/parse/node.go.html#3393279">line</a></span><span class="op" id="3393413">,</span>&nbsp;<span class="ident" id="3393415">Pipe</span><span class="op" id="3393419">:</span>&nbsp;<span class="ident" id="3393421"><a href="/text/template/parse/node.go.html#3393289">pipe</a></span><span class="op" id="3393425">,</span>&nbsp;<span class="ident" id="3393427">List</span><span class="op" id="3393431">:</span>&nbsp;<span class="ident" id="3393433"><a href="/text/template/parse/node.go.html#3393305">list</a></span><span class="op" id="3393437">,</span>&nbsp;<span class="ident" id="3393439">ElseList</span><span class="op" id="3393447">:</span>&nbsp;<span class="ident" id="3393449"><a href="/text/template/parse/node.go.html#3393311">elseList</a></span><span class="op" id="3393457">}</span><span class="op" id="3393458">}</span><br>
<span class="lineno">775</span><span class="op" id="3393460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3393463">func</span>&nbsp;<span class="op" id="3393468">(</span><span class="ident" id="3393469">i</span>&nbsp;<span class="op" id="3393471">*</span><span class="ident" id="3393472"><a href="/text/template/parse/node.go.html#3393218">IfNode</a></span><span class="op" id="3393478">)</span>&nbsp;<span class="ident" id="3393480">Copy</span><span class="op" id="3393484">(</span><span class="op" id="3393485">)</span>&nbsp;<span class="ident" id="3393487"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3393492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3393495">return</span>&nbsp;<span class="ident" id="3393502"><a href="/text/template/parse/node.go.html#3393469">i</a></span><span class="op" id="3393503">.</span><span class="ident" id="3393504">tr</span><span class="op" id="3393506">.</span><span class="ident" id="3393507">newIf</span><span class="op" id="3393512">(</span><span class="ident" id="3393513"><a href="/text/template/parse/node.go.html#3393469">i</a></span><span class="op" id="3393514">.</span><span class="ident" id="3393515">Pos</span><span class="op" id="3393518">,</span>&nbsp;<span class="ident" id="3393520"><a href="/text/template/parse/node.go.html#3393469">i</a></span><span class="op" id="3393521">.</span><span class="ident" id="3393522">Line</span><span class="op" id="3393526">,</span>&nbsp;<span class="ident" id="3393528"><a href="/text/template/parse/node.go.html#3393469">i</a></span><span class="op" id="3393529">.</span><span class="ident" id="3393530">Pipe</span><span class="op" id="3393534">.</span><span class="ident" id="3393535">CopyPipe</span><span class="op" id="3393543">(</span><span class="op" id="3393544">)</span><span class="op" id="3393545">,</span>&nbsp;<span class="ident" id="3393547"><a href="/text/template/parse/node.go.html#3393469">i</a></span><span class="op" id="3393548">.</span><span class="ident" id="3393549">List</span><span class="op" id="3393553">.</span><span class="ident" id="3393554">CopyList</span><span class="op" id="3393562">(</span><span class="op" id="3393563">)</span><span class="op" id="3393564">,</span>&nbsp;<span class="ident" id="3393566"><a href="/text/template/parse/node.go.html#3393469">i</a></span><span class="op" id="3393567">.</span><span class="ident" id="3393568">ElseList</span><span class="op" id="3393576">.</span><span class="ident" id="3393577">CopyList</span><span class="op" id="3393585">(</span><span class="op" id="3393586">)</span><span class="op" id="3393587">)</span><br>
<span class="lineno"></span><span class="op" id="3393589">}</span><br>
<span class="lineno">780</span><br>
<span class="lineno"></span><span class="comment" id="3393592">//&nbsp;RangeNode&nbsp;represents&nbsp;a&nbsp;{{range}}&nbsp;action&nbsp;and&nbsp;its&nbsp;commands.</span><br>
<span class="lineno"></span><span class="keyword" id="3393653">type</span>&nbsp;<span class="ident" id="3393658">RangeNode</span>&nbsp;<span class="keyword" id="3393668">struct</span>&nbsp;<span class="op" id="3393675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3393678"><a href="/text/template/parse/node.go.html#3392030">BranchNode</a></span><br>
<span class="lineno"></span><span class="op" id="3393689">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="3393692">func</span>&nbsp;<span class="op" id="3393697">(</span><span class="ident" id="3393698">t</span>&nbsp;<span class="op" id="3393700">*</span><span class="ident" id="3393701"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3393705">)</span>&nbsp;<span class="ident" id="3393707">newRange</span><span class="op" id="3393715">(</span><span class="ident" id="3393716">pos</span>&nbsp;<span class="ident" id="3393720"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3393723">,</span>&nbsp;<span class="ident" id="3393725">line</span>&nbsp;<span class="builtintype" id="3393730">int</span><span class="op" id="3393733">,</span>&nbsp;<span class="ident" id="3393735">pipe</span>&nbsp;<span class="op" id="3393740">*</span><span class="ident" id="3393741"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3393749">,</span>&nbsp;<span class="ident" id="3393751">list</span><span class="op" id="3393755">,</span>&nbsp;<span class="ident" id="3393757">elseList</span>&nbsp;<span class="op" id="3393766">*</span><span class="ident" id="3393767"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span><span class="op" id="3393775">)</span>&nbsp;<span class="op" id="3393777">*</span><span class="ident" id="3393778"><a href="/text/template/parse/node.go.html#3393658">RangeNode</a></span>&nbsp;<span class="op" id="3393788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3393791">return</span>&nbsp;<span class="op" id="3393798">&amp;</span><span class="ident" id="3393799"><a href="/text/template/parse/node.go.html#3393658">RangeNode</a></span><span class="op" id="3393808">{</span><span class="ident" id="3393809"><a href="/text/template/parse/node.go.html#3392030">BranchNode</a></span><span class="op" id="3393819">{</span><span class="ident" id="3393820">tr</span><span class="op" id="3393822">:</span>&nbsp;<span class="ident" id="3393824"><a href="/text/template/parse/node.go.html#3393698">t</a></span><span class="op" id="3393825">,</span>&nbsp;<span class="ident" id="3393827">NodeType</span><span class="op" id="3393835">:</span>&nbsp;<span class="ident" id="3393837"><a href="/text/template/parse/node.go.html#3377078">NodeRange</a></span><span class="op" id="3393846">,</span>&nbsp;<span class="ident" id="3393848">Pos</span><span class="op" id="3393851">:</span>&nbsp;<span class="ident" id="3393853"><a href="/text/template/parse/node.go.html#3393716">pos</a></span><span class="op" id="3393856">,</span>&nbsp;<span class="ident" id="3393858">Line</span><span class="op" id="3393862">:</span>&nbsp;<span class="ident" id="3393864"><a href="/text/template/parse/node.go.html#3393725">line</a></span><span class="op" id="3393868">,</span>&nbsp;<span class="ident" id="3393870">Pipe</span><span class="op" id="3393874">:</span>&nbsp;<span class="ident" id="3393876"><a href="/text/template/parse/node.go.html#3393735">pipe</a></span><span class="op" id="3393880">,</span>&nbsp;<span class="ident" id="3393882">List</span><span class="op" id="3393886">:</span>&nbsp;<span class="ident" id="3393888"><a href="/text/template/parse/node.go.html#3393751">list</a></span><span class="op" id="3393892">,</span>&nbsp;<span class="ident" id="3393894">ElseList</span><span class="op" id="3393902">:</span>&nbsp;<span class="ident" id="3393904"><a href="/text/template/parse/node.go.html#3393757">elseList</a></span><span class="op" id="3393912">}</span><span class="op" id="3393913">}</span><br>
<span class="lineno"></span><span class="op" id="3393915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span><span class="keyword" id="3393918">func</span>&nbsp;<span class="op" id="3393923">(</span><span class="ident" id="3393924">r</span>&nbsp;<span class="op" id="3393926">*</span><span class="ident" id="3393927"><a href="/text/template/parse/node.go.html#3393658">RangeNode</a></span><span class="op" id="3393936">)</span>&nbsp;<span class="ident" id="3393938">Copy</span><span class="op" id="3393942">(</span><span class="op" id="3393943">)</span>&nbsp;<span class="ident" id="3393945"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3393950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3393953">return</span>&nbsp;<span class="ident" id="3393960"><a href="/text/template/parse/node.go.html#3393924">r</a></span><span class="op" id="3393961">.</span><span class="ident" id="3393962">tr</span><span class="op" id="3393964">.</span><span class="ident" id="3393965">newRange</span><span class="op" id="3393973">(</span><span class="ident" id="3393974"><a href="/text/template/parse/node.go.html#3393924">r</a></span><span class="op" id="3393975">.</span><span class="ident" id="3393976">Pos</span><span class="op" id="3393979">,</span>&nbsp;<span class="ident" id="3393981"><a href="/text/template/parse/node.go.html#3393924">r</a></span><span class="op" id="3393982">.</span><span class="ident" id="3393983">Line</span><span class="op" id="3393987">,</span>&nbsp;<span class="ident" id="3393989"><a href="/text/template/parse/node.go.html#3393924">r</a></span><span class="op" id="3393990">.</span><span class="ident" id="3393991">Pipe</span><span class="op" id="3393995">.</span><span class="ident" id="3393996">CopyPipe</span><span class="op" id="3394004">(</span><span class="op" id="3394005">)</span><span class="op" id="3394006">,</span>&nbsp;<span class="ident" id="3394008"><a href="/text/template/parse/node.go.html#3393924">r</a></span><span class="op" id="3394009">.</span><span class="ident" id="3394010">List</span><span class="op" id="3394014">.</span><span class="ident" id="3394015">CopyList</span><span class="op" id="3394023">(</span><span class="op" id="3394024">)</span><span class="op" id="3394025">,</span>&nbsp;<span class="ident" id="3394027"><a href="/text/template/parse/node.go.html#3393924">r</a></span><span class="op" id="3394028">.</span><span class="ident" id="3394029">ElseList</span><span class="op" id="3394037">.</span><span class="ident" id="3394038">CopyList</span><span class="op" id="3394046">(</span><span class="op" id="3394047">)</span><span class="op" id="3394048">)</span><br>
<span class="lineno"></span><span class="op" id="3394050">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3394053">//&nbsp;WithNode&nbsp;represents&nbsp;a&nbsp;{{with}}&nbsp;action&nbsp;and&nbsp;its&nbsp;commands.</span><br>
<span class="lineno">795</span><span class="keyword" id="3394112">type</span>&nbsp;<span class="ident" id="3394117">WithNode</span>&nbsp;<span class="keyword" id="3394126">struct</span>&nbsp;<span class="op" id="3394133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3394136"><a href="/text/template/parse/node.go.html#3392030">BranchNode</a></span><br>
<span class="lineno"></span><span class="op" id="3394147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3394150">func</span>&nbsp;<span class="op" id="3394155">(</span><span class="ident" id="3394156">t</span>&nbsp;<span class="op" id="3394158">*</span><span class="ident" id="3394159"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3394163">)</span>&nbsp;<span class="ident" id="3394165">newWith</span><span class="op" id="3394172">(</span><span class="ident" id="3394173">pos</span>&nbsp;<span class="ident" id="3394177"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3394180">,</span>&nbsp;<span class="ident" id="3394182">line</span>&nbsp;<span class="builtintype" id="3394187">int</span><span class="op" id="3394190">,</span>&nbsp;<span class="ident" id="3394192">pipe</span>&nbsp;<span class="op" id="3394197">*</span><span class="ident" id="3394198"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3394206">,</span>&nbsp;<span class="ident" id="3394208">list</span><span class="op" id="3394212">,</span>&nbsp;<span class="ident" id="3394214">elseList</span>&nbsp;<span class="op" id="3394223">*</span><span class="ident" id="3394224"><a href="/text/template/parse/node.go.html#3377404">ListNode</a></span><span class="op" id="3394232">)</span>&nbsp;<span class="op" id="3394234">*</span><span class="ident" id="3394235"><a href="/text/template/parse/node.go.html#3394117">WithNode</a></span>&nbsp;<span class="op" id="3394244">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3394247">return</span>&nbsp;<span class="op" id="3394254">&amp;</span><span class="ident" id="3394255"><a href="/text/template/parse/node.go.html#3394117">WithNode</a></span><span class="op" id="3394263">{</span><span class="ident" id="3394264"><a href="/text/template/parse/node.go.html#3392030">BranchNode</a></span><span class="op" id="3394274">{</span><span class="ident" id="3394275">tr</span><span class="op" id="3394277">:</span>&nbsp;<span class="ident" id="3394279"><a href="/text/template/parse/node.go.html#3394156">t</a></span><span class="op" id="3394280">,</span>&nbsp;<span class="ident" id="3394282">NodeType</span><span class="op" id="3394290">:</span>&nbsp;<span class="ident" id="3394292"><a href="/text/template/parse/node.go.html#3377297">NodeWith</a></span><span class="op" id="3394300">,</span>&nbsp;<span class="ident" id="3394302">Pos</span><span class="op" id="3394305">:</span>&nbsp;<span class="ident" id="3394307"><a href="/text/template/parse/node.go.html#3394173">pos</a></span><span class="op" id="3394310">,</span>&nbsp;<span class="ident" id="3394312">Line</span><span class="op" id="3394316">:</span>&nbsp;<span class="ident" id="3394318"><a href="/text/template/parse/node.go.html#3394182">line</a></span><span class="op" id="3394322">,</span>&nbsp;<span class="ident" id="3394324">Pipe</span><span class="op" id="3394328">:</span>&nbsp;<span class="ident" id="3394330"><a href="/text/template/parse/node.go.html#3394192">pipe</a></span><span class="op" id="3394334">,</span>&nbsp;<span class="ident" id="3394336">List</span><span class="op" id="3394340">:</span>&nbsp;<span class="ident" id="3394342"><a href="/text/template/parse/node.go.html#3394208">list</a></span><span class="op" id="3394346">,</span>&nbsp;<span class="ident" id="3394348">ElseList</span><span class="op" id="3394356">:</span>&nbsp;<span class="ident" id="3394358"><a href="/text/template/parse/node.go.html#3394214">elseList</a></span><span class="op" id="3394366">}</span><span class="op" id="3394367">}</span><br>
<span class="lineno"></span><span class="op" id="3394369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3394372">func</span>&nbsp;<span class="op" id="3394377">(</span><span class="ident" id="3394378">w</span>&nbsp;<span class="op" id="3394380">*</span><span class="ident" id="3394381"><a href="/text/template/parse/node.go.html#3394117">WithNode</a></span><span class="op" id="3394389">)</span>&nbsp;<span class="ident" id="3394391">Copy</span><span class="op" id="3394395">(</span><span class="op" id="3394396">)</span>&nbsp;<span class="ident" id="3394398"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3394403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3394406">return</span>&nbsp;<span class="ident" id="3394413"><a href="/text/template/parse/node.go.html#3394378">w</a></span><span class="op" id="3394414">.</span><span class="ident" id="3394415">tr</span><span class="op" id="3394417">.</span><span class="ident" id="3394418">newWith</span><span class="op" id="3394425">(</span><span class="ident" id="3394426"><a href="/text/template/parse/node.go.html#3394378">w</a></span><span class="op" id="3394427">.</span><span class="ident" id="3394428">Pos</span><span class="op" id="3394431">,</span>&nbsp;<span class="ident" id="3394433"><a href="/text/template/parse/node.go.html#3394378">w</a></span><span class="op" id="3394434">.</span><span class="ident" id="3394435">Line</span><span class="op" id="3394439">,</span>&nbsp;<span class="ident" id="3394441"><a href="/text/template/parse/node.go.html#3394378">w</a></span><span class="op" id="3394442">.</span><span class="ident" id="3394443">Pipe</span><span class="op" id="3394447">.</span><span class="ident" id="3394448">CopyPipe</span><span class="op" id="3394456">(</span><span class="op" id="3394457">)</span><span class="op" id="3394458">,</span>&nbsp;<span class="ident" id="3394460"><a href="/text/template/parse/node.go.html#3394378">w</a></span><span class="op" id="3394461">.</span><span class="ident" id="3394462">List</span><span class="op" id="3394466">.</span><span class="ident" id="3394467">CopyList</span><span class="op" id="3394475">(</span><span class="op" id="3394476">)</span><span class="op" id="3394477">,</span>&nbsp;<span class="ident" id="3394479"><a href="/text/template/parse/node.go.html#3394378">w</a></span><span class="op" id="3394480">.</span><span class="ident" id="3394481">ElseList</span><span class="op" id="3394489">.</span><span class="ident" id="3394490">CopyList</span><span class="op" id="3394498">(</span><span class="op" id="3394499">)</span><span class="op" id="3394500">)</span><br>
<span class="lineno">805</span><span class="op" id="3394502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3394505">//&nbsp;TemplateNode&nbsp;represents&nbsp;a&nbsp;{{template}}&nbsp;action.</span><br>
<span class="lineno"></span><span class="keyword" id="3394555">type</span>&nbsp;<span class="ident" id="3394560">TemplateNode</span>&nbsp;<span class="keyword" id="3394573">struct</span>&nbsp;<span class="op" id="3394580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3394583"><a href="/text/template/parse/node.go.html#3375805">NodeType</a></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3394593"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3394598">tr</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3394603">*</span><span class="ident" id="3394604"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3394610">Line</span>&nbsp;<span class="builtintype" id="3394615">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3394625">//&nbsp;The&nbsp;line&nbsp;number&nbsp;in&nbsp;the&nbsp;input&nbsp;(deprecated;&nbsp;kept&nbsp;for&nbsp;compatibility)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3394695">Name</span>&nbsp;<span class="builtintype" id="3394700">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3394710">//&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;template&nbsp;(unquoted).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3394751">Pipe</span>&nbsp;<span class="op" id="3394756">*</span><span class="ident" id="3394757"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span>&nbsp;<span class="comment" id="3394766">//&nbsp;The&nbsp;command&nbsp;to&nbsp;evaluate&nbsp;as&nbsp;dot&nbsp;for&nbsp;the&nbsp;template.</span><br>
<span class="lineno">815</span><span class="op" id="3394818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3394821">func</span>&nbsp;<span class="op" id="3394826">(</span><span class="ident" id="3394827">t</span>&nbsp;<span class="op" id="3394829">*</span><span class="ident" id="3394830"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span><span class="op" id="3394834">)</span>&nbsp;<span class="ident" id="3394836">newTemplate</span><span class="op" id="3394847">(</span><span class="ident" id="3394848">pos</span>&nbsp;<span class="ident" id="3394852"><a href="/text/template/parse/node.go.html#3375925">Pos</a></span><span class="op" id="3394855">,</span>&nbsp;<span class="ident" id="3394857">line</span>&nbsp;<span class="builtintype" id="3394862">int</span><span class="op" id="3394865">,</span>&nbsp;<span class="ident" id="3394867">name</span>&nbsp;<span class="builtintype" id="3394872">string</span><span class="op" id="3394878">,</span>&nbsp;<span class="ident" id="3394880">pipe</span>&nbsp;<span class="op" id="3394885">*</span><span class="ident" id="3394886"><a href="/text/template/parse/node.go.html#3378671">PipeNode</a></span><span class="op" id="3394894">)</span>&nbsp;<span class="op" id="3394896">*</span><span class="ident" id="3394897"><a href="/text/template/parse/node.go.html#3394560">TemplateNode</a></span>&nbsp;<span class="op" id="3394910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3394913">return</span>&nbsp;<span class="op" id="3394920">&amp;</span><span class="ident" id="3394921"><a href="/text/template/parse/node.go.html#3394560">TemplateNode</a></span><span class="op" id="3394933">{</span><span class="ident" id="3394934">tr</span><span class="op" id="3394936">:</span>&nbsp;<span class="ident" id="3394938"><a href="/text/template/parse/node.go.html#3394827">t</a></span><span class="op" id="3394939">,</span>&nbsp;<span class="ident" id="3394941">NodeType</span><span class="op" id="3394949">:</span>&nbsp;<span class="ident" id="3394951"><a href="/text/template/parse/node.go.html#3377183">NodeTemplate</a></span><span class="op" id="3394963">,</span>&nbsp;<span class="ident" id="3394965">Pos</span><span class="op" id="3394968">:</span>&nbsp;<span class="ident" id="3394970"><a href="/text/template/parse/node.go.html#3394848">pos</a></span><span class="op" id="3394973">,</span>&nbsp;<span class="ident" id="3394975">Line</span><span class="op" id="3394979">:</span>&nbsp;<span class="ident" id="3394981"><a href="/text/template/parse/node.go.html#3394857">line</a></span><span class="op" id="3394985">,</span>&nbsp;<span class="ident" id="3394987">Name</span><span class="op" id="3394991">:</span>&nbsp;<span class="ident" id="3394993"><a href="/text/template/parse/node.go.html#3394867">name</a></span><span class="op" id="3394997">,</span>&nbsp;<span class="ident" id="3394999">Pipe</span><span class="op" id="3395003">:</span>&nbsp;<span class="ident" id="3395005"><a href="/text/template/parse/node.go.html#3394880">pipe</a></span><span class="op" id="3395009">}</span><br>
<span class="lineno"></span><span class="op" id="3395011">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="keyword" id="3395014">func</span>&nbsp;<span class="op" id="3395019">(</span><span class="ident" id="3395020">t</span>&nbsp;<span class="op" id="3395022">*</span><span class="ident" id="3395023"><a href="/text/template/parse/node.go.html#3394560">TemplateNode</a></span><span class="op" id="3395035">)</span>&nbsp;<span class="ident" id="3395037">String</span><span class="op" id="3395043">(</span><span class="op" id="3395044">)</span>&nbsp;<span class="builtintype" id="3395046">string</span>&nbsp;<span class="op" id="3395053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3395056">if</span>&nbsp;<span class="ident" id="3395059"><a href="/text/template/parse/node.go.html#3395020">t</a></span><span class="op" id="3395060">.</span><span class="ident" id="3395061">Pipe</span>&nbsp;<span class="op" id="3395066">==</span>&nbsp;<span class="ident" id="3395069">nil</span>&nbsp;<span class="op" id="3395073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3395077">return</span>&nbsp;<span class="ident" id="3395084"><a href="/text/template/parse/node.go.html#3375013">fmt</a></span><span class="op" id="3395087">.</span><span class="ident" id="3395088">Sprintf</span><span class="op" id="3395095">(</span><span class="string" id="3395096">&#34;{{template&nbsp;%q}}&#34;</span><span class="op" id="3395113">,</span>&nbsp;<span class="ident" id="3395115"><a href="/text/template/parse/node.go.html#3395020">t</a></span><span class="op" id="3395116">.</span><span class="ident" id="3395117">Name</span><span class="op" id="3395121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3395124">}</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3395127">return</span>&nbsp;<span class="ident" id="3395134"><a href="/text/template/parse/node.go.html#3375013">fmt</a></span><span class="op" id="3395137">.</span><span class="ident" id="3395138">Sprintf</span><span class="op" id="3395145">(</span><span class="string" id="3395146">&#34;{{template&nbsp;%q&nbsp;%s}}&#34;</span><span class="op" id="3395166">,</span>&nbsp;<span class="ident" id="3395168"><a href="/text/template/parse/node.go.html#3395020">t</a></span><span class="op" id="3395169">.</span><span class="ident" id="3395170">Name</span><span class="op" id="3395174">,</span>&nbsp;<span class="ident" id="3395176"><a href="/text/template/parse/node.go.html#3395020">t</a></span><span class="op" id="3395177">.</span><span class="ident" id="3395178">Pipe</span><span class="op" id="3395182">)</span><br>
<span class="lineno"></span><span class="op" id="3395184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3395187">func</span>&nbsp;<span class="op" id="3395192">(</span><span class="ident" id="3395193">t</span>&nbsp;<span class="op" id="3395195">*</span><span class="ident" id="3395196"><a href="/text/template/parse/node.go.html#3394560">TemplateNode</a></span><span class="op" id="3395208">)</span>&nbsp;<span class="ident" id="3395210">tree</span><span class="op" id="3395214">(</span><span class="op" id="3395215">)</span>&nbsp;<span class="op" id="3395217">*</span><span class="ident" id="3395218"><a href="/text/template/parse/parse.go.html#3395910">Tree</a></span>&nbsp;<span class="op" id="3395223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3395226">return</span>&nbsp;<span class="ident" id="3395233"><a href="/text/template/parse/node.go.html#3395193">t</a></span><span class="op" id="3395234">.</span><span class="ident" id="3395235">tr</span><br>
<span class="lineno">830</span><span class="op" id="3395238">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3395241">func</span>&nbsp;<span class="op" id="3395246">(</span><span class="ident" id="3395247">t</span>&nbsp;<span class="op" id="3395249">*</span><span class="ident" id="3395250"><a href="/text/template/parse/node.go.html#3394560">TemplateNode</a></span><span class="op" id="3395262">)</span>&nbsp;<span class="ident" id="3395264">Copy</span><span class="op" id="3395268">(</span><span class="op" id="3395269">)</span>&nbsp;<span class="ident" id="3395271"><a href="/text/template/parse/node.go.html#3375303">Node</a></span>&nbsp;<span class="op" id="3395276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3395279">return</span>&nbsp;<span class="ident" id="3395286"><a href="/text/template/parse/node.go.html#3395247">t</a></span><span class="op" id="3395287">.</span><span class="ident" id="3395288">tr</span><span class="op" id="3395290">.</span><span class="ident" id="3395291">newTemplate</span><span class="op" id="3395302">(</span><span class="ident" id="3395303"><a href="/text/template/parse/node.go.html#3395247">t</a></span><span class="op" id="3395304">.</span><span class="ident" id="3395305">Pos</span><span class="op" id="3395308">,</span>&nbsp;<span class="ident" id="3395310"><a href="/text/template/parse/node.go.html#3395247">t</a></span><span class="op" id="3395311">.</span><span class="ident" id="3395312">Line</span><span class="op" id="3395316">,</span>&nbsp;<span class="ident" id="3395318"><a href="/text/template/parse/node.go.html#3395247">t</a></span><span class="op" id="3395319">.</span><span class="ident" id="3395320">Name</span><span class="op" id="3395324">,</span>&nbsp;<span class="ident" id="3395326"><a href="/text/template/parse/node.go.html#3395247">t</a></span><span class="op" id="3395327">.</span><span class="ident" id="3395328">Pipe</span><span class="op" id="3395332">.</span><span class="ident" id="3395333">CopyPipe</span><span class="op" id="3395341">(</span><span class="op" id="3395342">)</span><span class="op" id="3395343">)</span><br>
<span class="lineno"></span><span class="op" id="3395345">}</span>
</div>
</body>
</html>
