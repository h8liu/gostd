<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6826866">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6826922">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6826976">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6827027">package</span>&nbsp;<span class="ident" id="6827035">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6827041">import</span>&nbsp;<span class="op" id="6827048">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827051">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827060">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827071">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827082">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6827089">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6827092">var</span>&nbsp;<span class="ident" id="6827096">headerWriteTests</span>&nbsp;<span class="op" id="6827113">=</span>&nbsp;<span class="op" id="6827115">[</span><span class="op" id="6827116">]</span><span class="keyword" id="6827117">struct</span>&nbsp;<span class="op" id="6827124">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827127">h</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6827136">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827144">exclude</span>&nbsp;&nbsp;<span class="keyword" id="6827153">map</span><span class="op" id="6827156">[</span><span class="builtintype" id="6827157">string</span><span class="op" id="6827163">]</span><span class="builtintype" id="6827164">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827170">expected</span>&nbsp;<span class="builtintype" id="6827179">string</span><br>
<span class="lineno"></span><span class="op" id="6827186">}</span><span class="op" id="6827187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827190">{</span><span class="ident" id="6827191">Header</span><span class="op" id="6827197">{</span><span class="op" id="6827198">}</span><span class="op" id="6827199">,</span>&nbsp;<span class="ident" id="6827201">nil</span><span class="op" id="6827204">,</span>&nbsp;<span class="string" id="6827206">&#34;&#34;</span><span class="op" id="6827208">}</span><span class="op" id="6827209">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827216">Header</span><span class="op" id="6827222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827227">&#34;Content-Type&#34;</span><span class="op" id="6827241">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6827245">{</span><span class="string" id="6827246">&#34;text/html;&nbsp;charset=UTF-8&#34;</span><span class="op" id="6827272">}</span><span class="op" id="6827273">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827278">&#34;Content-Length&#34;</span><span class="op" id="6827294">:</span>&nbsp;<span class="op" id="6827296">{</span><span class="string" id="6827297">&#34;0&#34;</span><span class="op" id="6827300">}</span><span class="op" id="6827301">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827305">}</span><span class="op" id="6827306">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827310">nil</span><span class="op" id="6827313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827317">&#34;Content-Length:&nbsp;0\r\nContent-Type:&nbsp;text/html;&nbsp;charset=UTF-8\r\n&#34;</span><span class="op" id="6827382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827385">}</span><span class="op" id="6827386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827393">Header</span><span class="op" id="6827399">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827404">&#34;Content-Length&#34;</span><span class="op" id="6827420">:</span>&nbsp;<span class="op" id="6827422">{</span><span class="string" id="6827423">&#34;0&#34;</span><span class="op" id="6827426">,</span>&nbsp;<span class="string" id="6827428">&#34;1&#34;</span><span class="op" id="6827431">,</span>&nbsp;<span class="string" id="6827433">&#34;2&#34;</span><span class="op" id="6827436">}</span><span class="op" id="6827437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827441">}</span><span class="op" id="6827442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827446">nil</span><span class="op" id="6827449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827453">&#34;Content-Length:&nbsp;0\r\nContent-Length:&nbsp;1\r\nContent-Length:&nbsp;2\r\n&#34;</span><span class="op" id="6827518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827521">}</span><span class="op" id="6827522">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827529">Header</span><span class="op" id="6827535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827540">&#34;Expires&#34;</span><span class="op" id="6827549">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6827560">{</span><span class="string" id="6827561">&#34;-1&#34;</span><span class="op" id="6827565">}</span><span class="op" id="6827566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827571">&#34;Content-Length&#34;</span><span class="op" id="6827587">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6827591">{</span><span class="string" id="6827592">&#34;0&#34;</span><span class="op" id="6827595">}</span><span class="op" id="6827596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827601">&#34;Content-Encoding&#34;</span><span class="op" id="6827619">:</span>&nbsp;<span class="op" id="6827621">{</span><span class="string" id="6827622">&#34;gzip&#34;</span><span class="op" id="6827628">}</span><span class="op" id="6827629">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827633">}</span><span class="op" id="6827634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6827638">map</span><span class="op" id="6827641">[</span><span class="builtintype" id="6827642">string</span><span class="op" id="6827648">]</span><span class="builtintype" id="6827649">bool</span><span class="op" id="6827653">{</span><span class="string" id="6827654">&#34;Content-Length&#34;</span><span class="op" id="6827670">:</span>&nbsp;<span class="builtintype" id="6827672">true</span><span class="op" id="6827676">}</span><span class="op" id="6827677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827681">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="6827724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827727">}</span><span class="op" id="6827728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827731">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827735">Header</span><span class="op" id="6827741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827746">&#34;Expires&#34;</span><span class="op" id="6827755">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6827766">{</span><span class="string" id="6827767">&#34;-1&#34;</span><span class="op" id="6827771">}</span><span class="op" id="6827772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827777">&#34;Content-Length&#34;</span><span class="op" id="6827793">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6827797">{</span><span class="string" id="6827798">&#34;0&#34;</span><span class="op" id="6827801">,</span>&nbsp;<span class="string" id="6827803">&#34;1&#34;</span><span class="op" id="6827806">,</span>&nbsp;<span class="string" id="6827808">&#34;2&#34;</span><span class="op" id="6827811">}</span><span class="op" id="6827812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827817">&#34;Content-Encoding&#34;</span><span class="op" id="6827835">:</span>&nbsp;<span class="op" id="6827837">{</span><span class="string" id="6827838">&#34;gzip&#34;</span><span class="op" id="6827844">}</span><span class="op" id="6827845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827849">}</span><span class="op" id="6827850">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6827854">map</span><span class="op" id="6827857">[</span><span class="builtintype" id="6827858">string</span><span class="op" id="6827864">]</span><span class="builtintype" id="6827865">bool</span><span class="op" id="6827869">{</span><span class="string" id="6827870">&#34;Content-Length&#34;</span><span class="op" id="6827886">:</span>&nbsp;<span class="builtintype" id="6827888">true</span><span class="op" id="6827892">}</span><span class="op" id="6827893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827897">&#34;Content-Encoding:&nbsp;gzip\r\nExpires:&nbsp;-1\r\n&#34;</span><span class="op" id="6827940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827943">}</span><span class="op" id="6827944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6827947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6827951">Header</span><span class="op" id="6827957">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827962">&#34;Expires&#34;</span><span class="op" id="6827971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6827982">{</span><span class="string" id="6827983">&#34;-1&#34;</span><span class="op" id="6827987">}</span><span class="op" id="6827988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6827993">&#34;Content-Length&#34;</span><span class="op" id="6828009">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6828013">{</span><span class="string" id="6828014">&#34;0&#34;</span><span class="op" id="6828017">}</span><span class="op" id="6828018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828023">&#34;Content-Encoding&#34;</span><span class="op" id="6828041">:</span>&nbsp;<span class="op" id="6828043">{</span><span class="string" id="6828044">&#34;gzip&#34;</span><span class="op" id="6828050">}</span><span class="op" id="6828051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6828055">}</span><span class="op" id="6828056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6828060">map</span><span class="op" id="6828063">[</span><span class="builtintype" id="6828064">string</span><span class="op" id="6828070">]</span><span class="builtintype" id="6828071">bool</span><span class="op" id="6828075">{</span><span class="string" id="6828076">&#34;Content-Length&#34;</span><span class="op" id="6828092">:</span>&nbsp;<span class="builtintype" id="6828094">true</span><span class="op" id="6828098">,</span>&nbsp;<span class="string" id="6828100">&#34;Expires&#34;</span><span class="op" id="6828109">:</span>&nbsp;<span class="builtintype" id="6828111">true</span><span class="op" id="6828115">,</span>&nbsp;<span class="string" id="6828117">&#34;Content-Encoding&#34;</span><span class="op" id="6828135">:</span>&nbsp;<span class="builtintype" id="6828137">true</span><span class="op" id="6828141">}</span><span class="op" id="6828142">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828146">&#34;&#34;</span><span class="op" id="6828148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6828151">}</span><span class="op" id="6828152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6828155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6828159">Header</span><span class="op" id="6828165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828170">&#34;Nil&#34;</span><span class="op" id="6828175">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6828186">nil</span><span class="op" id="6828189">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828194">&#34;Empty&#34;</span><span class="op" id="6828201">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6828210">{</span><span class="op" id="6828211">}</span><span class="op" id="6828212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828217">&#34;Blank&#34;</span><span class="op" id="6828224">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6828233">{</span><span class="string" id="6828234">&#34;&#34;</span><span class="op" id="6828236">}</span><span class="op" id="6828237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828242">&#34;Double-Blank&#34;</span><span class="op" id="6828256">:</span>&nbsp;<span class="op" id="6828258">{</span><span class="string" id="6828259">&#34;&#34;</span><span class="op" id="6828261">,</span>&nbsp;<span class="string" id="6828263">&#34;&#34;</span><span class="op" id="6828265">}</span><span class="op" id="6828266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6828270">}</span><span class="op" id="6828271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6828275">nil</span><span class="op" id="6828278">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828282">&#34;Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\nDouble-Blank:&nbsp;\r\n&#34;</span><span class="op" id="6828331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6828334">}</span><span class="op" id="6828335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6828338">//&nbsp;Tests&nbsp;header&nbsp;sorting&nbsp;when&nbsp;over&nbsp;the&nbsp;insertion&nbsp;sort&nbsp;threshold&nbsp;side:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6828408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6828412">Header</span><span class="op" id="6828418">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828423">&#34;k1&#34;</span><span class="op" id="6828427">:</span>&nbsp;<span class="op" id="6828429">{</span><span class="string" id="6828430">&#34;1a&#34;</span><span class="op" id="6828434">,</span>&nbsp;<span class="string" id="6828436">&#34;1b&#34;</span><span class="op" id="6828440">}</span><span class="op" id="6828441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828446">&#34;k2&#34;</span><span class="op" id="6828450">:</span>&nbsp;<span class="op" id="6828452">{</span><span class="string" id="6828453">&#34;2a&#34;</span><span class="op" id="6828457">,</span>&nbsp;<span class="string" id="6828459">&#34;2b&#34;</span><span class="op" id="6828463">}</span><span class="op" id="6828464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828469">&#34;k3&#34;</span><span class="op" id="6828473">:</span>&nbsp;<span class="op" id="6828475">{</span><span class="string" id="6828476">&#34;3a&#34;</span><span class="op" id="6828480">,</span>&nbsp;<span class="string" id="6828482">&#34;3b&#34;</span><span class="op" id="6828486">}</span><span class="op" id="6828487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828492">&#34;k4&#34;</span><span class="op" id="6828496">:</span>&nbsp;<span class="op" id="6828498">{</span><span class="string" id="6828499">&#34;4a&#34;</span><span class="op" id="6828503">,</span>&nbsp;<span class="string" id="6828505">&#34;4b&#34;</span><span class="op" id="6828509">}</span><span class="op" id="6828510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828515">&#34;k5&#34;</span><span class="op" id="6828519">:</span>&nbsp;<span class="op" id="6828521">{</span><span class="string" id="6828522">&#34;5a&#34;</span><span class="op" id="6828526">,</span>&nbsp;<span class="string" id="6828528">&#34;5b&#34;</span><span class="op" id="6828532">}</span><span class="op" id="6828533">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828538">&#34;k6&#34;</span><span class="op" id="6828542">:</span>&nbsp;<span class="op" id="6828544">{</span><span class="string" id="6828545">&#34;6a&#34;</span><span class="op" id="6828549">,</span>&nbsp;<span class="string" id="6828551">&#34;6b&#34;</span><span class="op" id="6828555">}</span><span class="op" id="6828556">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828561">&#34;k7&#34;</span><span class="op" id="6828565">:</span>&nbsp;<span class="op" id="6828567">{</span><span class="string" id="6828568">&#34;7a&#34;</span><span class="op" id="6828572">,</span>&nbsp;<span class="string" id="6828574">&#34;7b&#34;</span><span class="op" id="6828578">}</span><span class="op" id="6828579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828584">&#34;k8&#34;</span><span class="op" id="6828588">:</span>&nbsp;<span class="op" id="6828590">{</span><span class="string" id="6828591">&#34;8a&#34;</span><span class="op" id="6828595">,</span>&nbsp;<span class="string" id="6828597">&#34;8b&#34;</span><span class="op" id="6828601">}</span><span class="op" id="6828602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828607">&#34;k9&#34;</span><span class="op" id="6828611">:</span>&nbsp;<span class="op" id="6828613">{</span><span class="string" id="6828614">&#34;9a&#34;</span><span class="op" id="6828618">,</span>&nbsp;<span class="string" id="6828620">&#34;9b&#34;</span><span class="op" id="6828624">}</span><span class="op" id="6828625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6828629">}</span><span class="op" id="6828630">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6828634">map</span><span class="op" id="6828637">[</span><span class="builtintype" id="6828638">string</span><span class="op" id="6828644">]</span><span class="builtintype" id="6828645">bool</span><span class="op" id="6828649">{</span><span class="string" id="6828650">&#34;k5&#34;</span><span class="op" id="6828654">:</span>&nbsp;<span class="builtintype" id="6828656">true</span><span class="op" id="6828660">}</span><span class="op" id="6828661">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828665">&#34;k1:&nbsp;1a\r\nk1:&nbsp;1b\r\nk2:&nbsp;2a\r\nk2:&nbsp;2b\r\nk3:&nbsp;3a\r\nk3:&nbsp;3b\r\n&#34;</span>&nbsp;<span class="op" id="6828728">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828733">&#34;k4:&nbsp;4a\r\nk4:&nbsp;4b\r\nk6:&nbsp;6a\r\nk6:&nbsp;6b\r\n&#34;</span>&nbsp;<span class="op" id="6828776">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6828781">&#34;k7:&nbsp;7a\r\nk7:&nbsp;7b\r\nk8:&nbsp;8a\r\nk8:&nbsp;8b\r\nk9:&nbsp;9a\r\nk9:&nbsp;9b\r\n&#34;</span><span class="op" id="6828843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6828846">}</span><span class="op" id="6828847">,</span><br>
<span class="lineno">90</span><span class="op" id="6828849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6828852">func</span>&nbsp;<span class="ident" id="6828857">TestHeaderWrite</span><span class="op" id="6828872">(</span><span class="ident" id="6828873">t</span>&nbsp;<span class="op" id="6828875">*</span><span class="ident" id="6828876">testing</span><span class="op" id="6828883">.</span><span class="ident" id="6828884">T</span><span class="op" id="6828885">)</span>&nbsp;<span class="op" id="6828887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6828890">var</span>&nbsp;<span class="ident" id="6828894">buf</span>&nbsp;<span class="ident" id="6828898">bytes</span><span class="op" id="6828903">.</span><span class="ident" id="6828904">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6828912">for</span>&nbsp;<span class="ident" id="6828916">i</span><span class="op" id="6828917">,</span>&nbsp;<span class="ident" id="6828919">test</span>&nbsp;<span class="op" id="6828924">:=</span>&nbsp;<span class="keyword" id="6828927">range</span>&nbsp;<span class="ident" id="6828933">headerWriteTests</span>&nbsp;<span class="op" id="6828950">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6828954">test</span><span class="op" id="6828958">.</span><span class="ident" id="6828959">h</span><span class="op" id="6828960">.</span><span class="ident" id="6828961">WriteSubset</span><span class="op" id="6828972">(</span><span class="op" id="6828973">&amp;</span><span class="ident" id="6828974">buf</span><span class="op" id="6828977">,</span>&nbsp;<span class="ident" id="6828979">test</span><span class="op" id="6828983">.</span><span class="ident" id="6828984">exclude</span><span class="op" id="6828991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6828995">if</span>&nbsp;<span class="ident" id="6828998">buf</span><span class="op" id="6829001">.</span><span class="ident" id="6829002">String</span><span class="op" id="6829008">(</span><span class="op" id="6829009">)</span>&nbsp;<span class="op" id="6829011">!=</span>&nbsp;<span class="ident" id="6829014">test</span><span class="op" id="6829018">.</span><span class="ident" id="6829019">expected</span>&nbsp;<span class="op" id="6829028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829033">t</span><span class="op" id="6829034">.</span><span class="ident" id="6829035">Errorf</span><span class="op" id="6829041">(</span><span class="string" id="6829042">&#34;#%d:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="6829068">,</span>&nbsp;<span class="ident" id="6829070">i</span><span class="op" id="6829071">,</span>&nbsp;<span class="ident" id="6829073">buf</span><span class="op" id="6829076">.</span><span class="ident" id="6829077">String</span><span class="op" id="6829083">(</span><span class="op" id="6829084">)</span><span class="op" id="6829085">,</span>&nbsp;<span class="ident" id="6829087">test</span><span class="op" id="6829091">.</span><span class="ident" id="6829092">expected</span><span class="op" id="6829100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829108">buf</span><span class="op" id="6829111">.</span><span class="ident" id="6829112">Reset</span><span class="op" id="6829117">(</span><span class="op" id="6829118">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829121">}</span><br>
<span class="lineno"></span><span class="op" id="6829123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6829126">var</span>&nbsp;<span class="ident" id="6829130">parseTimeTests</span>&nbsp;<span class="op" id="6829145">=</span>&nbsp;<span class="op" id="6829147">[</span><span class="op" id="6829148">]</span><span class="keyword" id="6829149">struct</span>&nbsp;<span class="op" id="6829156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829159">h</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6829163">Header</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829171">err</span>&nbsp;<span class="builtintype" id="6829175">bool</span><br>
<span class="lineno"></span><span class="op" id="6829180">}</span><span class="op" id="6829181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829184">{</span><span class="ident" id="6829185">Header</span><span class="op" id="6829191">{</span><span class="string" id="6829192">&#34;Date&#34;</span><span class="op" id="6829198">:</span>&nbsp;<span class="op" id="6829200">{</span><span class="string" id="6829201">&#34;&#34;</span><span class="op" id="6829203">}</span><span class="op" id="6829204">}</span><span class="op" id="6829205">,</span>&nbsp;<span class="builtintype" id="6829207">true</span><span class="op" id="6829211">}</span><span class="op" id="6829212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829215">{</span><span class="ident" id="6829216">Header</span><span class="op" id="6829222">{</span><span class="string" id="6829223">&#34;Date&#34;</span><span class="op" id="6829229">:</span>&nbsp;<span class="op" id="6829231">{</span><span class="string" id="6829232">&#34;invalid&#34;</span><span class="op" id="6829241">}</span><span class="op" id="6829242">}</span><span class="op" id="6829243">,</span>&nbsp;<span class="builtintype" id="6829245">true</span><span class="op" id="6829249">}</span><span class="op" id="6829250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829253">{</span><span class="ident" id="6829254">Header</span><span class="op" id="6829260">{</span><span class="string" id="6829261">&#34;Date&#34;</span><span class="op" id="6829267">:</span>&nbsp;<span class="op" id="6829269">{</span><span class="string" id="6829270">&#34;1994-11-06T08:49:37Z00:00&#34;</span><span class="op" id="6829297">}</span><span class="op" id="6829298">}</span><span class="op" id="6829299">,</span>&nbsp;<span class="builtintype" id="6829301">true</span><span class="op" id="6829305">}</span><span class="op" id="6829306">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829309">{</span><span class="ident" id="6829310">Header</span><span class="op" id="6829316">{</span><span class="string" id="6829317">&#34;Date&#34;</span><span class="op" id="6829323">:</span>&nbsp;<span class="op" id="6829325">{</span><span class="string" id="6829326">&#34;Sun,&nbsp;06&nbsp;Nov&nbsp;1994&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="6829357">}</span><span class="op" id="6829358">}</span><span class="op" id="6829359">,</span>&nbsp;<span class="builtintype" id="6829361">false</span><span class="op" id="6829366">}</span><span class="op" id="6829367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829370">{</span><span class="ident" id="6829371">Header</span><span class="op" id="6829377">{</span><span class="string" id="6829378">&#34;Date&#34;</span><span class="op" id="6829384">:</span>&nbsp;<span class="op" id="6829386">{</span><span class="string" id="6829387">&#34;Sunday,&nbsp;06-Nov-94&nbsp;08:49:37&nbsp;GMT&#34;</span><span class="op" id="6829419">}</span><span class="op" id="6829420">}</span><span class="op" id="6829421">,</span>&nbsp;<span class="builtintype" id="6829423">false</span><span class="op" id="6829428">}</span><span class="op" id="6829429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829432">{</span><span class="ident" id="6829433">Header</span><span class="op" id="6829439">{</span><span class="string" id="6829440">&#34;Date&#34;</span><span class="op" id="6829446">:</span>&nbsp;<span class="op" id="6829448">{</span><span class="string" id="6829449">&#34;Sun&nbsp;Nov&nbsp;&nbsp;6&nbsp;08:49:37&nbsp;1994&#34;</span><span class="op" id="6829475">}</span><span class="op" id="6829476">}</span><span class="op" id="6829477">,</span>&nbsp;<span class="builtintype" id="6829479">false</span><span class="op" id="6829484">}</span><span class="op" id="6829485">,</span><br>
<span class="lineno"></span><span class="op" id="6829487">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="keyword" id="6829490">func</span>&nbsp;<span class="ident" id="6829495">TestParseTime</span><span class="op" id="6829508">(</span><span class="ident" id="6829509">t</span>&nbsp;<span class="op" id="6829511">*</span><span class="ident" id="6829512">testing</span><span class="op" id="6829519">.</span><span class="ident" id="6829520">T</span><span class="op" id="6829521">)</span>&nbsp;<span class="op" id="6829523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829526">expect</span>&nbsp;<span class="op" id="6829533">:=</span>&nbsp;<span class="ident" id="6829536">time</span><span class="op" id="6829540">.</span><span class="ident" id="6829541">Date</span><span class="op" id="6829545">(</span><span class="num" id="6829546">1994</span><span class="op" id="6829550">,</span>&nbsp;<span class="num" id="6829552">11</span><span class="op" id="6829554">,</span>&nbsp;<span class="num" id="6829556">6</span><span class="op" id="6829557">,</span>&nbsp;<span class="num" id="6829559">8</span><span class="op" id="6829560">,</span>&nbsp;<span class="num" id="6829562">49</span><span class="op" id="6829564">,</span>&nbsp;<span class="num" id="6829566">37</span><span class="op" id="6829568">,</span>&nbsp;<span class="num" id="6829570">0</span><span class="op" id="6829571">,</span>&nbsp;<span class="ident" id="6829573">time</span><span class="op" id="6829577">.</span><span class="ident" id="6829578">UTC</span><span class="op" id="6829581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6829584">for</span>&nbsp;<span class="ident" id="6829588">i</span><span class="op" id="6829589">,</span>&nbsp;<span class="ident" id="6829591">test</span>&nbsp;<span class="op" id="6829596">:=</span>&nbsp;<span class="keyword" id="6829599">range</span>&nbsp;<span class="ident" id="6829605">parseTimeTests</span>&nbsp;<span class="op" id="6829620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829624">d</span><span class="op" id="6829625">,</span>&nbsp;<span class="ident" id="6829627">err</span>&nbsp;<span class="op" id="6829631">:=</span>&nbsp;<span class="ident" id="6829634">ParseTime</span><span class="op" id="6829643">(</span><span class="ident" id="6829644">test</span><span class="op" id="6829648">.</span><span class="ident" id="6829649">h</span><span class="op" id="6829650">.</span><span class="ident" id="6829651">Get</span><span class="op" id="6829654">(</span><span class="string" id="6829655">&#34;Date&#34;</span><span class="op" id="6829661">)</span><span class="op" id="6829662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6829666">if</span>&nbsp;<span class="ident" id="6829669">err</span>&nbsp;<span class="op" id="6829673">!=</span>&nbsp;<span class="ident" id="6829676">nil</span>&nbsp;<span class="op" id="6829680">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6829685">if</span>&nbsp;<span class="op" id="6829688">!</span><span class="ident" id="6829689">test</span><span class="op" id="6829693">.</span><span class="ident" id="6829694">err</span>&nbsp;<span class="op" id="6829698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829704">t</span><span class="op" id="6829705">.</span><span class="ident" id="6829706">Errorf</span><span class="op" id="6829712">(</span><span class="string" id="6829713">&#34;#%d:\n&nbsp;got&nbsp;err:&nbsp;%v&#34;</span><span class="op" id="6829733">,</span>&nbsp;<span class="ident" id="6829735">i</span><span class="op" id="6829736">,</span>&nbsp;<span class="ident" id="6829738">err</span><span class="op" id="6829741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829746">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6829751">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829762">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6829766">if</span>&nbsp;<span class="ident" id="6829769">test</span><span class="op" id="6829773">.</span><span class="ident" id="6829774">err</span>&nbsp;<span class="op" id="6829778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829783">t</span><span class="op" id="6829784">.</span><span class="ident" id="6829785">Errorf</span><span class="op" id="6829791">(</span><span class="string" id="6829792">&#34;#%d:\n&nbsp;&nbsp;should&nbsp;err&#34;</span><span class="op" id="6829812">,</span>&nbsp;<span class="ident" id="6829814">i</span><span class="op" id="6829815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6829820">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6829835">if</span>&nbsp;<span class="op" id="6829838">!</span><span class="ident" id="6829839">expect</span><span class="op" id="6829845">.</span><span class="ident" id="6829846">Equal</span><span class="op" id="6829851">(</span><span class="ident" id="6829852">d</span><span class="op" id="6829853">)</span>&nbsp;<span class="op" id="6829855">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829860">t</span><span class="op" id="6829861">.</span><span class="ident" id="6829862">Errorf</span><span class="op" id="6829868">(</span><span class="string" id="6829869">&#34;#%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="6829895">,</span>&nbsp;<span class="ident" id="6829897">i</span><span class="op" id="6829898">,</span>&nbsp;<span class="ident" id="6829900">d</span><span class="op" id="6829901">,</span>&nbsp;<span class="ident" id="6829903">expect</span><span class="op" id="6829909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6829916">}</span><br>
<span class="lineno"></span><span class="op" id="6829918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="6829921">type</span>&nbsp;<span class="ident" id="6829926">hasTokenTest</span>&nbsp;<span class="keyword" id="6829939">struct</span>&nbsp;<span class="op" id="6829946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829949">header</span>&nbsp;<span class="builtintype" id="6829956">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829964">token</span>&nbsp;&nbsp;<span class="builtintype" id="6829971">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6829979">want</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6829986">bool</span><br>
<span class="lineno"></span><span class="op" id="6829991">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6829994">var</span>&nbsp;<span class="ident" id="6829998">hasTokenTests</span>&nbsp;<span class="op" id="6830012">=</span>&nbsp;<span class="op" id="6830014">[</span><span class="op" id="6830015">]</span><span class="ident" id="6830016">hasTokenTest</span><span class="op" id="6830028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830031">{</span><span class="string" id="6830032">&#34;&#34;</span><span class="op" id="6830034">,</span>&nbsp;<span class="string" id="6830036">&#34;&#34;</span><span class="op" id="6830038">,</span>&nbsp;<span class="builtintype" id="6830040">false</span><span class="op" id="6830045">}</span><span class="op" id="6830046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830049">{</span><span class="string" id="6830050">&#34;&#34;</span><span class="op" id="6830052">,</span>&nbsp;<span class="string" id="6830054">&#34;foo&#34;</span><span class="op" id="6830059">,</span>&nbsp;<span class="builtintype" id="6830061">false</span><span class="op" id="6830066">}</span><span class="op" id="6830067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830070">{</span><span class="string" id="6830071">&#34;foo&#34;</span><span class="op" id="6830076">,</span>&nbsp;<span class="string" id="6830078">&#34;foo&#34;</span><span class="op" id="6830083">,</span>&nbsp;<span class="builtintype" id="6830085">true</span><span class="op" id="6830089">}</span><span class="op" id="6830090">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830093">{</span><span class="string" id="6830094">&#34;foo&nbsp;&#34;</span><span class="op" id="6830100">,</span>&nbsp;<span class="string" id="6830102">&#34;foo&#34;</span><span class="op" id="6830107">,</span>&nbsp;<span class="builtintype" id="6830109">true</span><span class="op" id="6830113">}</span><span class="op" id="6830114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830117">{</span><span class="string" id="6830118">&#34;&nbsp;foo&#34;</span><span class="op" id="6830124">,</span>&nbsp;<span class="string" id="6830126">&#34;foo&#34;</span><span class="op" id="6830131">,</span>&nbsp;<span class="builtintype" id="6830133">true</span><span class="op" id="6830137">}</span><span class="op" id="6830138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830141">{</span><span class="string" id="6830142">&#34;&nbsp;foo&nbsp;&#34;</span><span class="op" id="6830149">,</span>&nbsp;<span class="string" id="6830151">&#34;foo&#34;</span><span class="op" id="6830156">,</span>&nbsp;<span class="builtintype" id="6830158">true</span><span class="op" id="6830162">}</span><span class="op" id="6830163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830166">{</span><span class="string" id="6830167">&#34;foo,bar&#34;</span><span class="op" id="6830176">,</span>&nbsp;<span class="string" id="6830178">&#34;foo&#34;</span><span class="op" id="6830183">,</span>&nbsp;<span class="builtintype" id="6830185">true</span><span class="op" id="6830189">}</span><span class="op" id="6830190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830193">{</span><span class="string" id="6830194">&#34;bar,foo&#34;</span><span class="op" id="6830203">,</span>&nbsp;<span class="string" id="6830205">&#34;foo&#34;</span><span class="op" id="6830210">,</span>&nbsp;<span class="builtintype" id="6830212">true</span><span class="op" id="6830216">}</span><span class="op" id="6830217">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830220">{</span><span class="string" id="6830221">&#34;bar,&nbsp;foo&#34;</span><span class="op" id="6830231">,</span>&nbsp;<span class="string" id="6830233">&#34;foo&#34;</span><span class="op" id="6830238">,</span>&nbsp;<span class="builtintype" id="6830240">true</span><span class="op" id="6830244">}</span><span class="op" id="6830245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830248">{</span><span class="string" id="6830249">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="6830263">,</span>&nbsp;<span class="string" id="6830265">&#34;foo&#34;</span><span class="op" id="6830270">,</span>&nbsp;<span class="builtintype" id="6830272">true</span><span class="op" id="6830276">}</span><span class="op" id="6830277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830280">{</span><span class="string" id="6830281">&#34;bar,&nbsp;foo,baz&#34;</span><span class="op" id="6830295">,</span>&nbsp;<span class="string" id="6830297">&#34;foo&#34;</span><span class="op" id="6830302">,</span>&nbsp;<span class="builtintype" id="6830304">true</span><span class="op" id="6830308">}</span><span class="op" id="6830309">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830312">{</span><span class="string" id="6830313">&#34;bar,foo,&nbsp;baz&#34;</span><span class="op" id="6830327">,</span>&nbsp;<span class="string" id="6830329">&#34;foo&#34;</span><span class="op" id="6830334">,</span>&nbsp;<span class="builtintype" id="6830336">true</span><span class="op" id="6830340">}</span><span class="op" id="6830341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830344">{</span><span class="string" id="6830345">&#34;bar,&nbsp;foo,&nbsp;baz&#34;</span><span class="op" id="6830360">,</span>&nbsp;<span class="string" id="6830362">&#34;foo&#34;</span><span class="op" id="6830367">,</span>&nbsp;<span class="builtintype" id="6830369">true</span><span class="op" id="6830373">}</span><span class="op" id="6830374">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830377">{</span><span class="string" id="6830378">&#34;FOO&#34;</span><span class="op" id="6830383">,</span>&nbsp;<span class="string" id="6830385">&#34;foo&#34;</span><span class="op" id="6830390">,</span>&nbsp;<span class="builtintype" id="6830392">true</span><span class="op" id="6830396">}</span><span class="op" id="6830397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830400">{</span><span class="string" id="6830401">&#34;FOO&nbsp;&#34;</span><span class="op" id="6830407">,</span>&nbsp;<span class="string" id="6830409">&#34;foo&#34;</span><span class="op" id="6830414">,</span>&nbsp;<span class="builtintype" id="6830416">true</span><span class="op" id="6830420">}</span><span class="op" id="6830421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830424">{</span><span class="string" id="6830425">&#34;&nbsp;FOO&#34;</span><span class="op" id="6830431">,</span>&nbsp;<span class="string" id="6830433">&#34;foo&#34;</span><span class="op" id="6830438">,</span>&nbsp;<span class="builtintype" id="6830440">true</span><span class="op" id="6830444">}</span><span class="op" id="6830445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830448">{</span><span class="string" id="6830449">&#34;&nbsp;FOO&nbsp;&#34;</span><span class="op" id="6830456">,</span>&nbsp;<span class="string" id="6830458">&#34;foo&#34;</span><span class="op" id="6830463">,</span>&nbsp;<span class="builtintype" id="6830465">true</span><span class="op" id="6830469">}</span><span class="op" id="6830470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830473">{</span><span class="string" id="6830474">&#34;FOO,BAR&#34;</span><span class="op" id="6830483">,</span>&nbsp;<span class="string" id="6830485">&#34;foo&#34;</span><span class="op" id="6830490">,</span>&nbsp;<span class="builtintype" id="6830492">true</span><span class="op" id="6830496">}</span><span class="op" id="6830497">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830500">{</span><span class="string" id="6830501">&#34;BAR,FOO&#34;</span><span class="op" id="6830510">,</span>&nbsp;<span class="string" id="6830512">&#34;foo&#34;</span><span class="op" id="6830517">,</span>&nbsp;<span class="builtintype" id="6830519">true</span><span class="op" id="6830523">}</span><span class="op" id="6830524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830527">{</span><span class="string" id="6830528">&#34;BAR,&nbsp;FOO&#34;</span><span class="op" id="6830538">,</span>&nbsp;<span class="string" id="6830540">&#34;foo&#34;</span><span class="op" id="6830545">,</span>&nbsp;<span class="builtintype" id="6830547">true</span><span class="op" id="6830551">}</span><span class="op" id="6830552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830555">{</span><span class="string" id="6830556">&#34;BAR,FOO,&nbsp;baz&#34;</span><span class="op" id="6830570">,</span>&nbsp;<span class="string" id="6830572">&#34;foo&#34;</span><span class="op" id="6830577">,</span>&nbsp;<span class="builtintype" id="6830579">true</span><span class="op" id="6830583">}</span><span class="op" id="6830584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830587">{</span><span class="string" id="6830588">&#34;BAR,&nbsp;FOO,BAZ&#34;</span><span class="op" id="6830602">,</span>&nbsp;<span class="string" id="6830604">&#34;foo&#34;</span><span class="op" id="6830609">,</span>&nbsp;<span class="builtintype" id="6830611">true</span><span class="op" id="6830615">}</span><span class="op" id="6830616">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830619">{</span><span class="string" id="6830620">&#34;BAR,FOO,&nbsp;BAZ&#34;</span><span class="op" id="6830634">,</span>&nbsp;<span class="string" id="6830636">&#34;foo&#34;</span><span class="op" id="6830641">,</span>&nbsp;<span class="builtintype" id="6830643">true</span><span class="op" id="6830647">}</span><span class="op" id="6830648">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830651">{</span><span class="string" id="6830652">&#34;BAR,&nbsp;FOO,&nbsp;BAZ&#34;</span><span class="op" id="6830667">,</span>&nbsp;<span class="string" id="6830669">&#34;foo&#34;</span><span class="op" id="6830674">,</span>&nbsp;<span class="builtintype" id="6830676">true</span><span class="op" id="6830680">}</span><span class="op" id="6830681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830684">{</span><span class="string" id="6830685">&#34;foobar&#34;</span><span class="op" id="6830693">,</span>&nbsp;<span class="string" id="6830695">&#34;foo&#34;</span><span class="op" id="6830700">,</span>&nbsp;<span class="builtintype" id="6830702">false</span><span class="op" id="6830707">}</span><span class="op" id="6830708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830711">{</span><span class="string" id="6830712">&#34;barfoo&nbsp;&#34;</span><span class="op" id="6830721">,</span>&nbsp;<span class="string" id="6830723">&#34;foo&#34;</span><span class="op" id="6830728">,</span>&nbsp;<span class="builtintype" id="6830730">false</span><span class="op" id="6830735">}</span><span class="op" id="6830736">,</span><br>
<span class="lineno"></span><span class="op" id="6830738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="6830741">func</span>&nbsp;<span class="ident" id="6830746">TestHasToken</span><span class="op" id="6830758">(</span><span class="ident" id="6830759">t</span>&nbsp;<span class="op" id="6830761">*</span><span class="ident" id="6830762">testing</span><span class="op" id="6830769">.</span><span class="ident" id="6830770">T</span><span class="op" id="6830771">)</span>&nbsp;<span class="op" id="6830773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6830776">for</span>&nbsp;<span class="ident" id="6830780">_</span><span class="op" id="6830781">,</span>&nbsp;<span class="ident" id="6830783">tt</span>&nbsp;<span class="op" id="6830786">:=</span>&nbsp;<span class="keyword" id="6830789">range</span>&nbsp;<span class="ident" id="6830795">hasTokenTests</span>&nbsp;<span class="op" id="6830809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6830813">if</span>&nbsp;<span class="ident" id="6830816">hasToken</span><span class="op" id="6830824">(</span><span class="ident" id="6830825">tt</span><span class="op" id="6830827">.</span><span class="ident" id="6830828">header</span><span class="op" id="6830834">,</span>&nbsp;<span class="ident" id="6830836">tt</span><span class="op" id="6830838">.</span><span class="ident" id="6830839">token</span><span class="op" id="6830844">)</span>&nbsp;<span class="op" id="6830846">!=</span>&nbsp;<span class="ident" id="6830849">tt</span><span class="op" id="6830851">.</span><span class="ident" id="6830852">want</span>&nbsp;<span class="op" id="6830857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6830862">t</span><span class="op" id="6830863">.</span><span class="ident" id="6830864">Errorf</span><span class="op" id="6830870">(</span><span class="string" id="6830871">&#34;hasToken(%q,&nbsp;%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6830903">,</span>&nbsp;<span class="ident" id="6830905">tt</span><span class="op" id="6830907">.</span><span class="ident" id="6830908">header</span><span class="op" id="6830914">,</span>&nbsp;<span class="ident" id="6830916">tt</span><span class="op" id="6830918">.</span><span class="ident" id="6830919">token</span><span class="op" id="6830924">,</span>&nbsp;<span class="op" id="6830926">!</span><span class="ident" id="6830927">tt</span><span class="op" id="6830929">.</span><span class="ident" id="6830930">want</span><span class="op" id="6830934">,</span>&nbsp;<span class="ident" id="6830936">tt</span><span class="op" id="6830938">.</span><span class="ident" id="6830939">want</span><span class="op" id="6830943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830947">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6830950">}</span><br>
<span class="lineno"></span><span class="op" id="6830952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6830955">var</span>&nbsp;<span class="ident" id="6830959">testHeader</span>&nbsp;<span class="op" id="6830970">=</span>&nbsp;<span class="ident" id="6830972">Header</span><span class="op" id="6830978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6830981">&#34;Content-Length&#34;</span><span class="op" id="6830997">:</span>&nbsp;<span class="op" id="6830999">{</span><span class="string" id="6831000">&#34;123&#34;</span><span class="op" id="6831005">}</span><span class="op" id="6831006">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6831009">&#34;Content-Type&#34;</span><span class="op" id="6831023">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6831027">{</span><span class="string" id="6831028">&#34;text/plain&#34;</span><span class="op" id="6831040">}</span><span class="op" id="6831041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6831044">&#34;Date&#34;</span><span class="op" id="6831050">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6831062">{</span><span class="string" id="6831063">&#34;some&nbsp;date&nbsp;at&nbsp;some&nbsp;time&nbsp;Z&#34;</span><span class="op" id="6831089">}</span><span class="op" id="6831090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6831093">&#34;Server&#34;</span><span class="op" id="6831101">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6831111">{</span><span class="ident" id="6831112">DefaultUserAgent</span><span class="op" id="6831128">}</span><span class="op" id="6831129">,</span><br>
<span class="lineno"></span><span class="op" id="6831131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword" id="6831134">var</span>&nbsp;<span class="ident" id="6831138">buf</span>&nbsp;<span class="ident" id="6831142">bytes</span><span class="op" id="6831147">.</span><span class="ident" id="6831148">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6831156">func</span>&nbsp;<span class="ident" id="6831161">BenchmarkHeaderWriteSubset</span><span class="op" id="6831187">(</span><span class="ident" id="6831188">b</span>&nbsp;<span class="op" id="6831190">*</span><span class="ident" id="6831191">testing</span><span class="op" id="6831198">.</span><span class="ident" id="6831199">B</span><span class="op" id="6831200">)</span>&nbsp;<span class="op" id="6831202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6831205">b</span><span class="op" id="6831206">.</span><span class="ident" id="6831207">ReportAllocs</span><span class="op" id="6831219">(</span><span class="op" id="6831220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6831223">for</span>&nbsp;<span class="ident" id="6831227">i</span>&nbsp;<span class="op" id="6831229">:=</span>&nbsp;<span class="num" id="6831232">0</span><span class="op" id="6831233">;</span>&nbsp;<span class="ident" id="6831235">i</span>&nbsp;<span class="op" id="6831237">&lt;</span>&nbsp;<span class="ident" id="6831239">b</span><span class="op" id="6831240">.</span><span class="ident" id="6831241">N</span><span class="op" id="6831242">;</span>&nbsp;<span class="ident" id="6831244">i</span><span class="op" id="6831245">++</span>&nbsp;<span class="op" id="6831248">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6831252">buf</span><span class="op" id="6831255">.</span><span class="ident" id="6831256">Reset</span><span class="op" id="6831261">(</span><span class="op" id="6831262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6831266">testHeader</span><span class="op" id="6831276">.</span><span class="ident" id="6831277">WriteSubset</span><span class="op" id="6831288">(</span><span class="op" id="6831289">&amp;</span><span class="ident" id="6831290">buf</span><span class="op" id="6831293">,</span>&nbsp;<span class="ident" id="6831295">nil</span><span class="op" id="6831298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6831301">}</span><br>
<span class="lineno"></span><span class="op" id="6831303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="6831306">func</span>&nbsp;<span class="ident" id="6831311">TestHeaderWriteSubsetAllocs</span><span class="op" id="6831338">(</span><span class="ident" id="6831339">t</span>&nbsp;<span class="op" id="6831341">*</span><span class="ident" id="6831342">testing</span><span class="op" id="6831349">.</span><span class="ident" id="6831350">T</span><span class="op" id="6831351">)</span>&nbsp;<span class="op" id="6831353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6831356">if</span>&nbsp;<span class="ident" id="6831359">testing</span><span class="op" id="6831366">.</span><span class="ident" id="6831367">Short</span><span class="op" id="6831372">(</span><span class="op" id="6831373">)</span>&nbsp;<span class="op" id="6831375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6831379">t</span><span class="op" id="6831380">.</span><span class="ident" id="6831381">Skip</span><span class="op" id="6831385">(</span><span class="string" id="6831386">&#34;skipping&nbsp;alloc&nbsp;test&nbsp;in&nbsp;short&nbsp;mode&#34;</span><span class="op" id="6831421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6831424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6831427">if</span>&nbsp;<span class="ident" id="6831430">raceEnabled</span>&nbsp;<span class="op" id="6831442">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6831446">t</span><span class="op" id="6831447">.</span><span class="ident" id="6831448">Skip</span><span class="op" id="6831452">(</span><span class="string" id="6831453">&#34;skipping&nbsp;test&nbsp;under&nbsp;race&nbsp;detector&#34;</span><span class="op" id="6831488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6831491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6831494">if</span>&nbsp;<span class="ident" id="6831497">runtime</span><span class="op" id="6831504">.</span><span class="ident" id="6831505">GOMAXPROCS</span><span class="op" id="6831515">(</span><span class="num" id="6831516">0</span><span class="op" id="6831517">)</span>&nbsp;<span class="op" id="6831519">&gt;</span>&nbsp;<span class="num" id="6831521">1</span>&nbsp;<span class="op" id="6831523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6831527">t</span><span class="op" id="6831528">.</span><span class="ident" id="6831529">Skip</span><span class="op" id="6831533">(</span><span class="string" id="6831534">&#34;skipping;&nbsp;GOMAXPROCS&gt;1&#34;</span><span class="op" id="6831558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6831561">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6831564">n</span>&nbsp;<span class="op" id="6831566">:=</span>&nbsp;<span class="ident" id="6831569">testing</span><span class="op" id="6831576">.</span><span class="ident" id="6831577">AllocsPerRun</span><span class="op" id="6831589">(</span><span class="num" id="6831590">100</span><span class="op" id="6831593">,</span>&nbsp;<span class="keyword" id="6831595">func</span><span class="op" id="6831599">(</span><span class="op" id="6831600">)</span>&nbsp;<span class="op" id="6831602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6831606">buf</span><span class="op" id="6831609">.</span><span class="ident" id="6831610">Reset</span><span class="op" id="6831615">(</span><span class="op" id="6831616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6831620">testHeader</span><span class="op" id="6831630">.</span><span class="ident" id="6831631">WriteSubset</span><span class="op" id="6831642">(</span><span class="op" id="6831643">&amp;</span><span class="ident" id="6831644">buf</span><span class="op" id="6831647">,</span>&nbsp;<span class="ident" id="6831649">nil</span><span class="op" id="6831652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6831655">}</span><span class="op" id="6831656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6831659">if</span>&nbsp;<span class="ident" id="6831662">n</span>&nbsp;<span class="op" id="6831664">&gt;</span>&nbsp;<span class="num" id="6831666">0</span>&nbsp;<span class="op" id="6831668">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6831672">t</span><span class="op" id="6831673">.</span><span class="ident" id="6831674">Errorf</span><span class="op" id="6831680">(</span><span class="string" id="6831681">&#34;allocs&nbsp;=&nbsp;%g;&nbsp;want&nbsp;0&#34;</span><span class="op" id="6831702">,</span>&nbsp;<span class="ident" id="6831704">n</span><span class="op" id="6831705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6831708">}</span><br>
<span class="lineno"></span><span class="op" id="6831710">}</span>
</div>
</body>
</html>
