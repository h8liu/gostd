<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>crypto/rand</h2>
<ul>
<li><a href="/gostd/crypto/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/crypto/rand/rand_linux.go.html">rand_linux.go</a></li>
<li><a href="/gostd/crypto/rand/rand_test.go.html">rand_test.go</a></li>
<li><a href="/gostd/crypto/rand/rand_unix.go.html">rand_unix.go</a></li>
<li><a href="/gostd/crypto/rand/util.go.html">util.go</a></li>
<li><a href="/gostd/crypto/rand/util_test.go.html">util_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8597429">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8597485">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8597539">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8597590">package</span>&nbsp;<span class="ident" id="8597598">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8597604">import</span>&nbsp;<span class="op" id="8597611">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8597614">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8597623">&#34;compress/flate&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8597641">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8597647">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8597657">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8597660">func</span>&nbsp;<span class="ident" id="8597665">TestRead</span><span class="op" id="8597673">(</span><span class="ident" id="8597674">t</span>&nbsp;<span class="op" id="8597676">*</span><span class="ident" id="8597677">testing</span><span class="op" id="8597684">.</span><span class="ident" id="8597685">T</span><span class="op" id="8597686">)</span>&nbsp;<span class="op" id="8597688">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8597691">var</span>&nbsp;<span class="ident" id="8597695">n</span>&nbsp;<span class="builtintype" id="8597697">int</span>&nbsp;<span class="op" id="8597701">=</span>&nbsp;<span class="num" id="8597703">4e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8597708">if</span>&nbsp;<span class="ident" id="8597711">testing</span><span class="op" id="8597718">.</span><span class="ident" id="8597719">Short</span><span class="op" id="8597724">(</span><span class="op" id="8597725">)</span>&nbsp;<span class="op" id="8597727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597731">n</span>&nbsp;<span class="op" id="8597733">=</span>&nbsp;<span class="num" id="8597735">1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8597740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597743">b</span>&nbsp;<span class="op" id="8597745">:=</span>&nbsp;<span class="builtinfunc" id="8597748">make</span><span class="op" id="8597752">(</span><span class="op" id="8597753">[</span><span class="op" id="8597754">]</span><span class="builtintype" id="8597755">byte</span><span class="op" id="8597759">,</span>&nbsp;<span class="ident" id="8597761">n</span><span class="op" id="8597762">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597765">n</span><span class="op" id="8597766">,</span>&nbsp;<span class="ident" id="8597768">err</span>&nbsp;<span class="op" id="8597772">:=</span>&nbsp;<span class="ident" id="8597775">io</span><span class="op" id="8597777">.</span><span class="ident" id="8597778">ReadFull</span><span class="op" id="8597786">(</span><span class="ident" id="8597787">Reader</span><span class="op" id="8597793">,</span>&nbsp;<span class="ident" id="8597795">b</span><span class="op" id="8597796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8597799">if</span>&nbsp;<span class="ident" id="8597802">n</span>&nbsp;<span class="op" id="8597804">!=</span>&nbsp;<span class="builtinfunc" id="8597807">len</span><span class="op" id="8597810">(</span><span class="ident" id="8597811">b</span><span class="op" id="8597812">)</span>&nbsp;<span class="op" id="8597814">||</span>&nbsp;<span class="ident" id="8597817">err</span>&nbsp;<span class="op" id="8597821">!=</span>&nbsp;<span class="ident" id="8597824">nil</span>&nbsp;<span class="op" id="8597828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597832">t</span><span class="op" id="8597833">.</span><span class="ident" id="8597834">Fatalf</span><span class="op" id="8597840">(</span><span class="string" id="8597841">&#34;ReadFull(buf)&nbsp;=&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="8597865">,</span>&nbsp;<span class="ident" id="8597867">n</span><span class="op" id="8597868">,</span>&nbsp;<span class="ident" id="8597870">err</span><span class="op" id="8597873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8597876">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8597880">var</span>&nbsp;<span class="ident" id="8597884">z</span>&nbsp;<span class="ident" id="8597886">bytes</span><span class="op" id="8597891">.</span><span class="ident" id="8597892">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597900">f</span><span class="op" id="8597901">,</span>&nbsp;<span class="ident" id="8597903">_</span>&nbsp;<span class="op" id="8597905">:=</span>&nbsp;<span class="ident" id="8597908">flate</span><span class="op" id="8597913">.</span><span class="ident" id="8597914">NewWriter</span><span class="op" id="8597923">(</span><span class="op" id="8597924">&amp;</span><span class="ident" id="8597925">z</span><span class="op" id="8597926">,</span>&nbsp;<span class="num" id="8597928">5</span><span class="op" id="8597929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597932">f</span><span class="op" id="8597933">.</span><span class="ident" id="8597934">Write</span><span class="op" id="8597939">(</span><span class="ident" id="8597940">b</span><span class="op" id="8597941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597944">f</span><span class="op" id="8597945">.</span><span class="ident" id="8597946">Close</span><span class="op" id="8597951">(</span><span class="op" id="8597952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8597955">if</span>&nbsp;<span class="ident" id="8597958">z</span><span class="op" id="8597959">.</span><span class="ident" id="8597960">Len</span><span class="op" id="8597963">(</span><span class="op" id="8597964">)</span>&nbsp;<span class="op" id="8597966">&lt;</span>&nbsp;<span class="builtinfunc" id="8597968">len</span><span class="op" id="8597971">(</span><span class="ident" id="8597972">b</span><span class="op" id="8597973">)</span><span class="op" id="8597974">*</span><span class="num" id="8597975">99</span><span class="op" id="8597977">/</span><span class="num" id="8597978">100</span>&nbsp;<span class="op" id="8597982">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8597986">t</span><span class="op" id="8597987">.</span><span class="ident" id="8597988">Fatalf</span><span class="op" id="8597994">(</span><span class="string" id="8597995">&#34;Compressed&nbsp;%d&nbsp;-&gt;&nbsp;%d&#34;</span><span class="op" id="8598016">,</span>&nbsp;<span class="builtinfunc" id="8598018">len</span><span class="op" id="8598021">(</span><span class="ident" id="8598022">b</span><span class="op" id="8598023">)</span><span class="op" id="8598024">,</span>&nbsp;<span class="ident" id="8598026">z</span><span class="op" id="8598027">.</span><span class="ident" id="8598028">Len</span><span class="op" id="8598031">(</span><span class="op" id="8598032">)</span><span class="op" id="8598033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8598036">}</span><br>
<span class="lineno"></span><span class="op" id="8598038">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8598041">func</span>&nbsp;<span class="ident" id="8598046">TestReadEmpty</span><span class="op" id="8598059">(</span><span class="ident" id="8598060">t</span>&nbsp;<span class="op" id="8598062">*</span><span class="ident" id="8598063">testing</span><span class="op" id="8598070">.</span><span class="ident" id="8598071">T</span><span class="op" id="8598072">)</span>&nbsp;<span class="op" id="8598074">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8598077">n</span><span class="op" id="8598078">,</span>&nbsp;<span class="ident" id="8598080">err</span>&nbsp;<span class="op" id="8598084">:=</span>&nbsp;<span class="ident" id="8598087">Reader</span><span class="op" id="8598093">.</span><span class="ident" id="8598094">Read</span><span class="op" id="8598098">(</span><span class="builtinfunc" id="8598099">make</span><span class="op" id="8598103">(</span><span class="op" id="8598104">[</span><span class="op" id="8598105">]</span><span class="builtintype" id="8598106">byte</span><span class="op" id="8598110">,</span>&nbsp;<span class="num" id="8598112">0</span><span class="op" id="8598113">)</span><span class="op" id="8598114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8598117">if</span>&nbsp;<span class="ident" id="8598120">n</span>&nbsp;<span class="op" id="8598122">!=</span>&nbsp;<span class="num" id="8598125">0</span>&nbsp;<span class="op" id="8598127">||</span>&nbsp;<span class="ident" id="8598130">err</span>&nbsp;<span class="op" id="8598134">!=</span>&nbsp;<span class="ident" id="8598137">nil</span>&nbsp;<span class="op" id="8598141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8598145">t</span><span class="op" id="8598146">.</span><span class="ident" id="8598147">Fatalf</span><span class="op" id="8598153">(</span><span class="string" id="8598154">&#34;Read(make([]byte,&nbsp;0))&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="8598186">,</span>&nbsp;<span class="ident" id="8598188">n</span><span class="op" id="8598189">,</span>&nbsp;<span class="ident" id="8598191">err</span><span class="op" id="8598194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8598197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8598200">n</span><span class="op" id="8598201">,</span>&nbsp;<span class="ident" id="8598203">err</span>&nbsp;<span class="op" id="8598207">=</span>&nbsp;<span class="ident" id="8598209">Reader</span><span class="op" id="8598215">.</span><span class="ident" id="8598216">Read</span><span class="op" id="8598220">(</span><span class="ident" id="8598221">nil</span><span class="op" id="8598224">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8598227">if</span>&nbsp;<span class="ident" id="8598230">n</span>&nbsp;<span class="op" id="8598232">!=</span>&nbsp;<span class="num" id="8598235">0</span>&nbsp;<span class="op" id="8598237">||</span>&nbsp;<span class="ident" id="8598240">err</span>&nbsp;<span class="op" id="8598244">!=</span>&nbsp;<span class="ident" id="8598247">nil</span>&nbsp;<span class="op" id="8598251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8598255">t</span><span class="op" id="8598256">.</span><span class="ident" id="8598257">Fatalf</span><span class="op" id="8598263">(</span><span class="string" id="8598264">&#34;Read(nil)&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="8598284">,</span>&nbsp;<span class="ident" id="8598286">n</span><span class="op" id="8598287">,</span>&nbsp;<span class="ident" id="8598289">err</span><span class="op" id="8598292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8598295">}</span><br>
<span class="lineno"></span><span class="op" id="8598297">}</span>
</div>
</body>
</html>
