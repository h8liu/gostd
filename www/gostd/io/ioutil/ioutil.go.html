<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3188665">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3188720">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3188774">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3188825">//&nbsp;Package&nbsp;ioutil&nbsp;implements&nbsp;some&nbsp;I/O&nbsp;utility&nbsp;functions.</span><br>
<span class="lineno"></span><span class="keyword" id="3188882">package</span>&nbsp;<span class="ident" id="3188890">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3188898">import</span>&nbsp;<span class="op" id="3188905">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3188908">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3188917">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3188923">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3188929">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3188937">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="3188944">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3188947">//&nbsp;readAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read</span><br>
<span class="lineno"></span><span class="comment" id="3189022">//&nbsp;from&nbsp;the&nbsp;internal&nbsp;buffer&nbsp;allocated&nbsp;with&nbsp;a&nbsp;specified&nbsp;capacity.</span><br>
<span class="lineno"></span><span class="keyword" id="3189087">func</span>&nbsp;<span class="ident" id="3189092">readAll</span><span class="op" id="3189099">(</span><span class="ident" id="3189100">r</span>&nbsp;<span class="ident" id="3189102">io</span><span class="op" id="3189104">.</span><span class="ident" id="3189105">Reader</span><span class="op" id="3189111">,</span>&nbsp;<span class="ident" id="3189113">capacity</span>&nbsp;<span class="ident" id="3189122">int64</span><span class="op" id="3189127">)</span>&nbsp;<span class="op" id="3189129">(</span><span class="ident" id="3189130">b</span>&nbsp;<span class="op" id="3189132">[</span><span class="op" id="3189133">]</span><span class="builtintype" id="3189134">byte</span><span class="op" id="3189138">,</span>&nbsp;<span class="ident" id="3189140">err</span>&nbsp;<span class="builtintype" id="3189144">error</span><span class="op" id="3189149">)</span>&nbsp;<span class="op" id="3189151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3189154">buf</span>&nbsp;<span class="op" id="3189158">:=</span>&nbsp;<span class="ident" id="3189161">bytes</span><span class="op" id="3189166">.</span><span class="ident" id="3189167">NewBuffer</span><span class="op" id="3189176">(</span><span class="builtinfunc" id="3189177">make</span><span class="op" id="3189181">(</span><span class="op" id="3189182">[</span><span class="op" id="3189183">]</span><span class="builtintype" id="3189184">byte</span><span class="op" id="3189188">,</span>&nbsp;<span class="num" id="3189190">0</span><span class="op" id="3189191">,</span>&nbsp;<span class="ident" id="3189193">capacity</span><span class="op" id="3189201">)</span><span class="op" id="3189202">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3189205">//&nbsp;If&nbsp;the&nbsp;buffer&nbsp;overflows,&nbsp;we&nbsp;will&nbsp;get&nbsp;bytes.ErrTooLarge.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3189265">//&nbsp;Return&nbsp;that&nbsp;as&nbsp;an&nbsp;error.&nbsp;Any&nbsp;other&nbsp;panic&nbsp;remains.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3189319">defer</span>&nbsp;<span class="keyword" id="3189325">func</span><span class="op" id="3189329">(</span><span class="op" id="3189330">)</span>&nbsp;<span class="op" id="3189332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3189336">e</span>&nbsp;<span class="op" id="3189338">:=</span>&nbsp;<span class="builtinfunc" id="3189341">recover</span><span class="op" id="3189348">(</span><span class="op" id="3189349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3189353">if</span>&nbsp;<span class="ident" id="3189356">e</span>&nbsp;<span class="op" id="3189358">==</span>&nbsp;<span class="ident" id="3189361">nil</span>&nbsp;<span class="op" id="3189365">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3189370">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3189379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3189383">if</span>&nbsp;<span class="ident" id="3189386">panicErr</span><span class="op" id="3189394">,</span>&nbsp;<span class="ident" id="3189396">ok</span>&nbsp;<span class="op" id="3189399">:=</span>&nbsp;<span class="ident" id="3189402">e</span><span class="op" id="3189403">.</span><span class="op" id="3189404">(</span><span class="builtintype" id="3189405">error</span><span class="op" id="3189410">)</span><span class="op" id="3189411">;</span>&nbsp;<span class="ident" id="3189413">ok</span>&nbsp;<span class="op" id="3189416">&amp;&amp;</span>&nbsp;<span class="ident" id="3189419">panicErr</span>&nbsp;<span class="op" id="3189428">==</span>&nbsp;<span class="ident" id="3189431">bytes</span><span class="op" id="3189436">.</span><span class="ident" id="3189437">ErrTooLarge</span>&nbsp;<span class="op" id="3189449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3189454">err</span>&nbsp;<span class="op" id="3189458">=</span>&nbsp;<span class="ident" id="3189460">panicErr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3189471">}</span>&nbsp;<span class="keyword" id="3189473">else</span>&nbsp;<span class="op" id="3189478">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3189483">panic</span><span class="op" id="3189488">(</span><span class="ident" id="3189489">e</span><span class="op" id="3189490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3189494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3189497">}</span><span class="op" id="3189498">(</span><span class="op" id="3189499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3189502">_</span><span class="op" id="3189503">,</span>&nbsp;<span class="ident" id="3189505">err</span>&nbsp;<span class="op" id="3189509">=</span>&nbsp;<span class="ident" id="3189511">buf</span><span class="op" id="3189514">.</span><span class="ident" id="3189515">ReadFrom</span><span class="op" id="3189523">(</span><span class="ident" id="3189524">r</span><span class="op" id="3189525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3189528">return</span>&nbsp;<span class="ident" id="3189535">buf</span><span class="op" id="3189538">.</span><span class="ident" id="3189539">Bytes</span><span class="op" id="3189544">(</span><span class="op" id="3189545">)</span><span class="op" id="3189546">,</span>&nbsp;<span class="ident" id="3189548">err</span><br>
<span class="lineno">35</span><span class="op" id="3189552">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3189555">//&nbsp;ReadAll&nbsp;reads&nbsp;from&nbsp;r&nbsp;until&nbsp;an&nbsp;error&nbsp;or&nbsp;EOF&nbsp;and&nbsp;returns&nbsp;the&nbsp;data&nbsp;it&nbsp;read.</span><br>
<span class="lineno"></span><span class="comment" id="3189631">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3189707">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;from&nbsp;src&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read</span><br>
<span class="lineno">40</span><span class="comment" id="3189781">//&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3189812">func</span>&nbsp;<span class="ident" id="3189817">ReadAll</span><span class="op" id="3189824">(</span><span class="ident" id="3189825">r</span>&nbsp;<span class="ident" id="3189827">io</span><span class="op" id="3189829">.</span><span class="ident" id="3189830">Reader</span><span class="op" id="3189836">)</span>&nbsp;<span class="op" id="3189838">(</span><span class="op" id="3189839">[</span><span class="op" id="3189840">]</span><span class="builtintype" id="3189841">byte</span><span class="op" id="3189845">,</span>&nbsp;<span class="builtintype" id="3189847">error</span><span class="op" id="3189852">)</span>&nbsp;<span class="op" id="3189854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3189857">return</span>&nbsp;<span class="ident" id="3189864">readAll</span><span class="op" id="3189871">(</span><span class="ident" id="3189872">r</span><span class="op" id="3189873">,</span>&nbsp;<span class="ident" id="3189875">bytes</span><span class="op" id="3189880">.</span><span class="ident" id="3189881">MinRead</span><span class="op" id="3189888">)</span><br>
<span class="lineno"></span><span class="op" id="3189890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3189893">//&nbsp;ReadFile&nbsp;reads&nbsp;the&nbsp;file&nbsp;named&nbsp;by&nbsp;filename&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents.</span><br>
<span class="lineno"></span><span class="comment" id="3189964">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadFile</span><br>
<span class="lineno"></span><span class="comment" id="3190038">//&nbsp;reads&nbsp;the&nbsp;whole&nbsp;file,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;an&nbsp;EOF&nbsp;from&nbsp;Read&nbsp;as&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3190110">//&nbsp;to&nbsp;be&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="3190129">func</span>&nbsp;<span class="ident" id="3190134">ReadFile</span><span class="op" id="3190142">(</span><span class="ident" id="3190143">filename</span>&nbsp;<span class="builtintype" id="3190152">string</span><span class="op" id="3190158">)</span>&nbsp;<span class="op" id="3190160">(</span><span class="op" id="3190161">[</span><span class="op" id="3190162">]</span><span class="builtintype" id="3190163">byte</span><span class="op" id="3190167">,</span>&nbsp;<span class="builtintype" id="3190169">error</span><span class="op" id="3190174">)</span>&nbsp;<span class="op" id="3190176">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3190179">f</span><span class="op" id="3190180">,</span>&nbsp;<span class="ident" id="3190182">err</span>&nbsp;<span class="op" id="3190186">:=</span>&nbsp;<span class="ident" id="3190189">os</span><span class="op" id="3190191">.</span><span class="ident" id="3190192">Open</span><span class="op" id="3190196">(</span><span class="ident" id="3190197">filename</span><span class="op" id="3190205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3190208">if</span>&nbsp;<span class="ident" id="3190211">err</span>&nbsp;<span class="op" id="3190215">!=</span>&nbsp;<span class="ident" id="3190218">nil</span>&nbsp;<span class="op" id="3190222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3190226">return</span>&nbsp;<span class="ident" id="3190233">nil</span><span class="op" id="3190236">,</span>&nbsp;<span class="ident" id="3190238">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3190243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3190246">defer</span>&nbsp;<span class="ident" id="3190252">f</span><span class="op" id="3190253">.</span><span class="ident" id="3190254">Close</span><span class="op" id="3190259">(</span><span class="op" id="3190260">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190263">//&nbsp;It&#39;s&nbsp;a&nbsp;good&nbsp;but&nbsp;not&nbsp;certain&nbsp;bet&nbsp;that&nbsp;FileInfo&nbsp;will&nbsp;tell&nbsp;us&nbsp;exactly&nbsp;how&nbsp;much&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190346">//&nbsp;read,&nbsp;so&nbsp;let&#39;s&nbsp;try&nbsp;it&nbsp;but&nbsp;be&nbsp;prepared&nbsp;for&nbsp;the&nbsp;answer&nbsp;to&nbsp;be&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3190416">var</span>&nbsp;<span class="ident" id="3190420">n</span>&nbsp;<span class="ident" id="3190422">int64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3190430">if</span>&nbsp;<span class="ident" id="3190433">fi</span><span class="op" id="3190435">,</span>&nbsp;<span class="ident" id="3190437">err</span>&nbsp;<span class="op" id="3190441">:=</span>&nbsp;<span class="ident" id="3190444">f</span><span class="op" id="3190445">.</span><span class="ident" id="3190446">Stat</span><span class="op" id="3190450">(</span><span class="op" id="3190451">)</span><span class="op" id="3190452">;</span>&nbsp;<span class="ident" id="3190454">err</span>&nbsp;<span class="op" id="3190458">==</span>&nbsp;<span class="ident" id="3190461">nil</span>&nbsp;<span class="op" id="3190465">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190469">//&nbsp;Don&#39;t&nbsp;preallocate&nbsp;a&nbsp;huge&nbsp;buffer,&nbsp;just&nbsp;in&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3190521">if</span>&nbsp;<span class="ident" id="3190524">size</span>&nbsp;<span class="op" id="3190529">:=</span>&nbsp;<span class="ident" id="3190532">fi</span><span class="op" id="3190534">.</span><span class="ident" id="3190535">Size</span><span class="op" id="3190539">(</span><span class="op" id="3190540">)</span><span class="op" id="3190541">;</span>&nbsp;<span class="ident" id="3190543">size</span>&nbsp;<span class="op" id="3190548">&lt;</span>&nbsp;<span class="num" id="3190550">1e9</span>&nbsp;<span class="op" id="3190554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3190559">n</span>&nbsp;<span class="op" id="3190561">=</span>&nbsp;<span class="ident" id="3190563">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3190570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3190573">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190576">//&nbsp;As&nbsp;initial&nbsp;capacity&nbsp;for&nbsp;readAll,&nbsp;use&nbsp;n&nbsp;+&nbsp;a&nbsp;little&nbsp;extra&nbsp;in&nbsp;case&nbsp;Size&nbsp;is&nbsp;zero,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190658">//&nbsp;and&nbsp;to&nbsp;avoid&nbsp;another&nbsp;allocation&nbsp;after&nbsp;Read&nbsp;has&nbsp;filled&nbsp;the&nbsp;buffer.&nbsp;&nbsp;The&nbsp;readAll</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190741">//&nbsp;call&nbsp;will&nbsp;read&nbsp;into&nbsp;its&nbsp;allocated&nbsp;internal&nbsp;buffer&nbsp;cheaply.&nbsp;&nbsp;If&nbsp;the&nbsp;size&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190821">//&nbsp;wrong,&nbsp;we&#39;ll&nbsp;either&nbsp;waste&nbsp;some&nbsp;space&nbsp;off&nbsp;the&nbsp;end&nbsp;or&nbsp;reallocate&nbsp;as&nbsp;needed,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3190903">//&nbsp;in&nbsp;the&nbsp;overwhelmingly&nbsp;common&nbsp;case&nbsp;we&#39;ll&nbsp;get&nbsp;it&nbsp;just&nbsp;right.</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3190966">return</span>&nbsp;<span class="ident" id="3190973">readAll</span><span class="op" id="3190980">(</span><span class="ident" id="3190981">f</span><span class="op" id="3190982">,</span>&nbsp;<span class="ident" id="3190984">n</span><span class="op" id="3190985">+</span><span class="ident" id="3190986">bytes</span><span class="op" id="3190991">.</span><span class="ident" id="3190992">MinRead</span><span class="op" id="3190999">)</span><br>
<span class="lineno"></span><span class="op" id="3191001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3191004">//&nbsp;WriteFile&nbsp;writes&nbsp;data&nbsp;to&nbsp;a&nbsp;file&nbsp;named&nbsp;by&nbsp;filename.</span><br>
<span class="lineno"></span><span class="comment" id="3191058">//&nbsp;If&nbsp;the&nbsp;file&nbsp;does&nbsp;not&nbsp;exist,&nbsp;WriteFile&nbsp;creates&nbsp;it&nbsp;with&nbsp;permissions&nbsp;perm;</span><br>
<span class="lineno">75</span><span class="comment" id="3191133">//&nbsp;otherwise&nbsp;WriteFile&nbsp;truncates&nbsp;it&nbsp;before&nbsp;writing.</span><br>
<span class="lineno"></span><span class="keyword" id="3191185">func</span>&nbsp;<span class="ident" id="3191190">WriteFile</span><span class="op" id="3191199">(</span><span class="ident" id="3191200">filename</span>&nbsp;<span class="builtintype" id="3191209">string</span><span class="op" id="3191215">,</span>&nbsp;<span class="ident" id="3191217">data</span>&nbsp;<span class="op" id="3191222">[</span><span class="op" id="3191223">]</span><span class="builtintype" id="3191224">byte</span><span class="op" id="3191228">,</span>&nbsp;<span class="ident" id="3191230">perm</span>&nbsp;<span class="ident" id="3191235">os</span><span class="op" id="3191237">.</span><span class="ident" id="3191238">FileMode</span><span class="op" id="3191246">)</span>&nbsp;<span class="builtintype" id="3191248">error</span>&nbsp;<span class="op" id="3191254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191257">f</span><span class="op" id="3191258">,</span>&nbsp;<span class="ident" id="3191260">err</span>&nbsp;<span class="op" id="3191264">:=</span>&nbsp;<span class="ident" id="3191267">os</span><span class="op" id="3191269">.</span><span class="ident" id="3191270">OpenFile</span><span class="op" id="3191278">(</span><span class="ident" id="3191279">filename</span><span class="op" id="3191287">,</span>&nbsp;<span class="ident" id="3191289">os</span><span class="op" id="3191291">.</span><span class="ident" id="3191292">O_WRONLY</span><span class="op" id="3191300">|</span><span class="ident" id="3191301">os</span><span class="op" id="3191303">.</span><span class="ident" id="3191304">O_CREATE</span><span class="op" id="3191312">|</span><span class="ident" id="3191313">os</span><span class="op" id="3191315">.</span><span class="ident" id="3191316">O_TRUNC</span><span class="op" id="3191323">,</span>&nbsp;<span class="ident" id="3191325">perm</span><span class="op" id="3191329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191332">if</span>&nbsp;<span class="ident" id="3191335">err</span>&nbsp;<span class="op" id="3191339">!=</span>&nbsp;<span class="ident" id="3191342">nil</span>&nbsp;<span class="op" id="3191346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191350">return</span>&nbsp;<span class="ident" id="3191357">err</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3191362">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191365">n</span><span class="op" id="3191366">,</span>&nbsp;<span class="ident" id="3191368">err</span>&nbsp;<span class="op" id="3191372">:=</span>&nbsp;<span class="ident" id="3191375">f</span><span class="op" id="3191376">.</span><span class="ident" id="3191377">Write</span><span class="op" id="3191382">(</span><span class="ident" id="3191383">data</span><span class="op" id="3191387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191390">if</span>&nbsp;<span class="ident" id="3191393">err</span>&nbsp;<span class="op" id="3191397">==</span>&nbsp;<span class="ident" id="3191400">nil</span>&nbsp;<span class="op" id="3191404">&amp;&amp;</span>&nbsp;<span class="ident" id="3191407">n</span>&nbsp;<span class="op" id="3191409">&lt;</span>&nbsp;<span class="builtinfunc" id="3191411">len</span><span class="op" id="3191414">(</span><span class="ident" id="3191415">data</span><span class="op" id="3191419">)</span>&nbsp;<span class="op" id="3191421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191425">err</span>&nbsp;<span class="op" id="3191429">=</span>&nbsp;<span class="ident" id="3191431">io</span><span class="op" id="3191433">.</span><span class="ident" id="3191434">ErrShortWrite</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3191449">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191452">if</span>&nbsp;<span class="ident" id="3191455">err1</span>&nbsp;<span class="op" id="3191460">:=</span>&nbsp;<span class="ident" id="3191463">f</span><span class="op" id="3191464">.</span><span class="ident" id="3191465">Close</span><span class="op" id="3191470">(</span><span class="op" id="3191471">)</span><span class="op" id="3191472">;</span>&nbsp;<span class="ident" id="3191474">err</span>&nbsp;<span class="op" id="3191478">==</span>&nbsp;<span class="ident" id="3191481">nil</span>&nbsp;<span class="op" id="3191485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191489">err</span>&nbsp;<span class="op" id="3191493">=</span>&nbsp;<span class="ident" id="3191495">err1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3191501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191504">return</span>&nbsp;<span class="ident" id="3191511">err</span><br>
<span class="lineno"></span><span class="op" id="3191515">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="3191518">//&nbsp;byName&nbsp;implements&nbsp;sort.Interface.</span><br>
<span class="lineno"></span><span class="keyword" id="3191555">type</span>&nbsp;<span class="ident" id="3191560">byName</span>&nbsp;<span class="op" id="3191567">[</span><span class="op" id="3191568">]</span><span class="ident" id="3191569">os</span><span class="op" id="3191571">.</span><span class="ident" id="3191572">FileInfo</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3191582">func</span>&nbsp;<span class="op" id="3191587">(</span><span class="ident" id="3191588">f</span>&nbsp;<span class="ident" id="3191590">byName</span><span class="op" id="3191596">)</span>&nbsp;<span class="ident" id="3191598">Len</span><span class="op" id="3191601">(</span><span class="op" id="3191602">)</span>&nbsp;<span class="builtintype" id="3191604">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3191618">{</span>&nbsp;<span class="keyword" id="3191620">return</span>&nbsp;<span class="builtinfunc" id="3191627">len</span><span class="op" id="3191630">(</span><span class="ident" id="3191631">f</span><span class="op" id="3191632">)</span>&nbsp;<span class="op" id="3191634">}</span><br>
<span class="lineno">95</span><span class="keyword" id="3191636">func</span>&nbsp;<span class="op" id="3191641">(</span><span class="ident" id="3191642">f</span>&nbsp;<span class="ident" id="3191644">byName</span><span class="op" id="3191650">)</span>&nbsp;<span class="ident" id="3191652">Less</span><span class="op" id="3191656">(</span><span class="ident" id="3191657">i</span><span class="op" id="3191658">,</span>&nbsp;<span class="ident" id="3191660">j</span>&nbsp;<span class="builtintype" id="3191662">int</span><span class="op" id="3191665">)</span>&nbsp;<span class="builtintype" id="3191667">bool</span>&nbsp;<span class="op" id="3191672">{</span>&nbsp;<span class="keyword" id="3191674">return</span>&nbsp;<span class="ident" id="3191681">f</span><span class="op" id="3191682">[</span><span class="ident" id="3191683">i</span><span class="op" id="3191684">]</span><span class="op" id="3191685">.</span><span class="ident" id="3191686">Name</span><span class="op" id="3191690">(</span><span class="op" id="3191691">)</span>&nbsp;<span class="op" id="3191693">&lt;</span>&nbsp;<span class="ident" id="3191695">f</span><span class="op" id="3191696">[</span><span class="ident" id="3191697">j</span><span class="op" id="3191698">]</span><span class="op" id="3191699">.</span><span class="ident" id="3191700">Name</span><span class="op" id="3191704">(</span><span class="op" id="3191705">)</span>&nbsp;<span class="op" id="3191707">}</span><br>
<span class="lineno"></span><span class="keyword" id="3191709">func</span>&nbsp;<span class="op" id="3191714">(</span><span class="ident" id="3191715">f</span>&nbsp;<span class="ident" id="3191717">byName</span><span class="op" id="3191723">)</span>&nbsp;<span class="ident" id="3191725">Swap</span><span class="op" id="3191729">(</span><span class="ident" id="3191730">i</span><span class="op" id="3191731">,</span>&nbsp;<span class="ident" id="3191733">j</span>&nbsp;<span class="builtintype" id="3191735">int</span><span class="op" id="3191738">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3191745">{</span>&nbsp;<span class="ident" id="3191747">f</span><span class="op" id="3191748">[</span><span class="ident" id="3191749">i</span><span class="op" id="3191750">]</span><span class="op" id="3191751">,</span>&nbsp;<span class="ident" id="3191753">f</span><span class="op" id="3191754">[</span><span class="ident" id="3191755">j</span><span class="op" id="3191756">]</span>&nbsp;<span class="op" id="3191758">=</span>&nbsp;<span class="ident" id="3191760">f</span><span class="op" id="3191761">[</span><span class="ident" id="3191762">j</span><span class="op" id="3191763">]</span><span class="op" id="3191764">,</span>&nbsp;<span class="ident" id="3191766">f</span><span class="op" id="3191767">[</span><span class="ident" id="3191768">i</span><span class="op" id="3191769">]</span>&nbsp;<span class="op" id="3191771">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3191774">//&nbsp;ReadDir&nbsp;reads&nbsp;the&nbsp;directory&nbsp;named&nbsp;by&nbsp;dirname&nbsp;and&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="3191834">//&nbsp;a&nbsp;list&nbsp;of&nbsp;sorted&nbsp;directory&nbsp;entries.</span><br>
<span class="lineno">100</span><span class="keyword" id="3191873">func</span>&nbsp;<span class="ident" id="3191878">ReadDir</span><span class="op" id="3191885">(</span><span class="ident" id="3191886">dirname</span>&nbsp;<span class="builtintype" id="3191894">string</span><span class="op" id="3191900">)</span>&nbsp;<span class="op" id="3191902">(</span><span class="op" id="3191903">[</span><span class="op" id="3191904">]</span><span class="ident" id="3191905">os</span><span class="op" id="3191907">.</span><span class="ident" id="3191908">FileInfo</span><span class="op" id="3191916">,</span>&nbsp;<span class="builtintype" id="3191918">error</span><span class="op" id="3191923">)</span>&nbsp;<span class="op" id="3191925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191928">f</span><span class="op" id="3191929">,</span>&nbsp;<span class="ident" id="3191931">err</span>&nbsp;<span class="op" id="3191935">:=</span>&nbsp;<span class="ident" id="3191938">os</span><span class="op" id="3191940">.</span><span class="ident" id="3191941">Open</span><span class="op" id="3191945">(</span><span class="ident" id="3191946">dirname</span><span class="op" id="3191953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191956">if</span>&nbsp;<span class="ident" id="3191959">err</span>&nbsp;<span class="op" id="3191963">!=</span>&nbsp;<span class="ident" id="3191966">nil</span>&nbsp;<span class="op" id="3191970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3191974">return</span>&nbsp;<span class="ident" id="3191981">nil</span><span class="op" id="3191984">,</span>&nbsp;<span class="ident" id="3191986">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3191991">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3191994">list</span><span class="op" id="3191998">,</span>&nbsp;<span class="ident" id="3192000">err</span>&nbsp;<span class="op" id="3192004">:=</span>&nbsp;<span class="ident" id="3192007">f</span><span class="op" id="3192008">.</span><span class="ident" id="3192009">Readdir</span><span class="op" id="3192016">(</span><span class="op" id="3192017">-</span><span class="num" id="3192018">1</span><span class="op" id="3192019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192022">f</span><span class="op" id="3192023">.</span><span class="ident" id="3192024">Close</span><span class="op" id="3192029">(</span><span class="op" id="3192030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192033">if</span>&nbsp;<span class="ident" id="3192036">err</span>&nbsp;<span class="op" id="3192040">!=</span>&nbsp;<span class="ident" id="3192043">nil</span>&nbsp;<span class="op" id="3192047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192051">return</span>&nbsp;<span class="ident" id="3192058">nil</span><span class="op" id="3192061">,</span>&nbsp;<span class="ident" id="3192063">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3192068">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192071">sort</span><span class="op" id="3192075">.</span><span class="ident" id="3192076">Sort</span><span class="op" id="3192080">(</span><span class="ident" id="3192081">byName</span><span class="op" id="3192087">(</span><span class="ident" id="3192088">list</span><span class="op" id="3192092">)</span><span class="op" id="3192093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192096">return</span>&nbsp;<span class="ident" id="3192103">list</span><span class="op" id="3192107">,</span>&nbsp;<span class="ident" id="3192109">nil</span><br>
<span class="lineno"></span><span class="op" id="3192113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3192116">type</span>&nbsp;<span class="ident" id="3192121">nopCloser</span>&nbsp;<span class="keyword" id="3192131">struct</span>&nbsp;<span class="op" id="3192138">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192141">io</span><span class="op" id="3192143">.</span><span class="ident" id="3192144">Reader</span><br>
<span class="lineno"></span><span class="op" id="3192151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3192154">func</span>&nbsp;<span class="op" id="3192159">(</span><span class="ident" id="3192160">nopCloser</span><span class="op" id="3192169">)</span>&nbsp;<span class="ident" id="3192171">Close</span><span class="op" id="3192176">(</span><span class="op" id="3192177">)</span>&nbsp;<span class="builtintype" id="3192179">error</span>&nbsp;<span class="op" id="3192185">{</span>&nbsp;<span class="keyword" id="3192187">return</span>&nbsp;<span class="ident" id="3192194">nil</span>&nbsp;<span class="op" id="3192198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="3192201">//&nbsp;NopCloser&nbsp;returns&nbsp;a&nbsp;ReadCloser&nbsp;with&nbsp;a&nbsp;no-op&nbsp;Close&nbsp;method&nbsp;wrapping</span><br>
<span class="lineno"></span><span class="comment" id="3192270">//&nbsp;the&nbsp;provided&nbsp;Reader&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="3192296">func</span>&nbsp;<span class="ident" id="3192301">NopCloser</span><span class="op" id="3192310">(</span><span class="ident" id="3192311">r</span>&nbsp;<span class="ident" id="3192313">io</span><span class="op" id="3192315">.</span><span class="ident" id="3192316">Reader</span><span class="op" id="3192322">)</span>&nbsp;<span class="ident" id="3192324">io</span><span class="op" id="3192326">.</span><span class="ident" id="3192327">ReadCloser</span>&nbsp;<span class="op" id="3192338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192341">return</span>&nbsp;<span class="ident" id="3192348">nopCloser</span><span class="op" id="3192357">{</span><span class="ident" id="3192358">r</span><span class="op" id="3192359">}</span><br>
<span class="lineno"></span><span class="op" id="3192361">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="3192364">type</span>&nbsp;<span class="ident" id="3192369">devNull</span>&nbsp;<span class="builtintype" id="3192377">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3192382">//&nbsp;devNull&nbsp;implements&nbsp;ReaderFrom&nbsp;as&nbsp;an&nbsp;optimization&nbsp;so&nbsp;io.Copy&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3192448">//&nbsp;ioutil.Discard&nbsp;can&nbsp;avoid&nbsp;doing&nbsp;unnecessary&nbsp;work.</span><br>
<span class="lineno">130</span><span class="keyword" id="3192500">var</span>&nbsp;<span class="ident" id="3192504">_</span>&nbsp;<span class="ident" id="3192506">io</span><span class="op" id="3192508">.</span><span class="ident" id="3192509">ReaderFrom</span>&nbsp;<span class="op" id="3192520">=</span>&nbsp;<span class="ident" id="3192522">devNull</span><span class="op" id="3192529">(</span><span class="num" id="3192530">0</span><span class="op" id="3192531">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3192534">func</span>&nbsp;<span class="op" id="3192539">(</span><span class="ident" id="3192540">devNull</span><span class="op" id="3192547">)</span>&nbsp;<span class="ident" id="3192549">Write</span><span class="op" id="3192554">(</span><span class="ident" id="3192555">p</span>&nbsp;<span class="op" id="3192557">[</span><span class="op" id="3192558">]</span><span class="builtintype" id="3192559">byte</span><span class="op" id="3192563">)</span>&nbsp;<span class="op" id="3192565">(</span><span class="builtintype" id="3192566">int</span><span class="op" id="3192569">,</span>&nbsp;<span class="builtintype" id="3192571">error</span><span class="op" id="3192576">)</span>&nbsp;<span class="op" id="3192578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192581">return</span>&nbsp;<span class="builtinfunc" id="3192588">len</span><span class="op" id="3192591">(</span><span class="ident" id="3192592">p</span><span class="op" id="3192593">)</span><span class="op" id="3192594">,</span>&nbsp;<span class="ident" id="3192596">nil</span><br>
<span class="lineno"></span><span class="op" id="3192600">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="keyword" id="3192603">func</span>&nbsp;<span class="op" id="3192608">(</span><span class="ident" id="3192609">devNull</span><span class="op" id="3192616">)</span>&nbsp;<span class="ident" id="3192618">WriteString</span><span class="op" id="3192629">(</span><span class="ident" id="3192630">s</span>&nbsp;<span class="builtintype" id="3192632">string</span><span class="op" id="3192638">)</span>&nbsp;<span class="op" id="3192640">(</span><span class="builtintype" id="3192641">int</span><span class="op" id="3192644">,</span>&nbsp;<span class="builtintype" id="3192646">error</span><span class="op" id="3192651">)</span>&nbsp;<span class="op" id="3192653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192656">return</span>&nbsp;<span class="builtinfunc" id="3192663">len</span><span class="op" id="3192666">(</span><span class="ident" id="3192667">s</span><span class="op" id="3192668">)</span><span class="op" id="3192669">,</span>&nbsp;<span class="ident" id="3192671">nil</span><br>
<span class="lineno"></span><span class="op" id="3192675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="3192678">var</span>&nbsp;<span class="ident" id="3192682">blackHolePool</span>&nbsp;<span class="op" id="3192696">=</span>&nbsp;<span class="ident" id="3192698">sync</span><span class="op" id="3192702">.</span><span class="ident" id="3192703">Pool</span><span class="op" id="3192707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192710">New</span><span class="op" id="3192713">:</span>&nbsp;<span class="keyword" id="3192715">func</span><span class="op" id="3192719">(</span><span class="op" id="3192720">)</span>&nbsp;<span class="keyword" id="3192722">interface</span><span class="op" id="3192731">{</span><span class="op" id="3192732">}</span>&nbsp;<span class="op" id="3192734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192738">b</span>&nbsp;<span class="op" id="3192740">:=</span>&nbsp;<span class="builtinfunc" id="3192743">make</span><span class="op" id="3192747">(</span><span class="op" id="3192748">[</span><span class="op" id="3192749">]</span><span class="builtintype" id="3192750">byte</span><span class="op" id="3192754">,</span>&nbsp;<span class="num" id="3192756">8192</span><span class="op" id="3192760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192764">return</span>&nbsp;<span class="op" id="3192771">&amp;</span><span class="ident" id="3192772">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3192775">}</span><span class="op" id="3192776">,</span><br>
<span class="lineno">145</span><span class="op" id="3192778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3192781">func</span>&nbsp;<span class="op" id="3192786">(</span><span class="ident" id="3192787">devNull</span><span class="op" id="3192794">)</span>&nbsp;<span class="ident" id="3192796">ReadFrom</span><span class="op" id="3192804">(</span><span class="ident" id="3192805">r</span>&nbsp;<span class="ident" id="3192807">io</span><span class="op" id="3192809">.</span><span class="ident" id="3192810">Reader</span><span class="op" id="3192816">)</span>&nbsp;<span class="op" id="3192818">(</span><span class="ident" id="3192819">n</span>&nbsp;<span class="ident" id="3192821">int64</span><span class="op" id="3192826">,</span>&nbsp;<span class="ident" id="3192828">err</span>&nbsp;<span class="builtintype" id="3192832">error</span><span class="op" id="3192837">)</span>&nbsp;<span class="op" id="3192839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192842">bufp</span>&nbsp;<span class="op" id="3192847">:=</span>&nbsp;<span class="ident" id="3192850">blackHolePool</span><span class="op" id="3192863">.</span><span class="ident" id="3192864">Get</span><span class="op" id="3192867">(</span><span class="op" id="3192868">)</span><span class="op" id="3192869">.</span><span class="op" id="3192870">(</span><span class="op" id="3192871">*</span><span class="op" id="3192872">[</span><span class="op" id="3192873">]</span><span class="builtintype" id="3192874">byte</span><span class="op" id="3192878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192881">readSize</span>&nbsp;<span class="op" id="3192890">:=</span>&nbsp;<span class="num" id="3192893">0</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192896">for</span>&nbsp;<span class="op" id="3192900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192904">readSize</span><span class="op" id="3192912">,</span>&nbsp;<span class="ident" id="3192914">err</span>&nbsp;<span class="op" id="3192918">=</span>&nbsp;<span class="ident" id="3192920">r</span><span class="op" id="3192921">.</span><span class="ident" id="3192922">Read</span><span class="op" id="3192926">(</span><span class="op" id="3192927">*</span><span class="ident" id="3192928">bufp</span><span class="op" id="3192932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192936">n</span>&nbsp;<span class="op" id="3192938">+=</span>&nbsp;<span class="ident" id="3192941">int64</span><span class="op" id="3192946">(</span><span class="ident" id="3192947">readSize</span><span class="op" id="3192955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3192959">if</span>&nbsp;<span class="ident" id="3192962">err</span>&nbsp;<span class="op" id="3192966">!=</span>&nbsp;<span class="ident" id="3192969">nil</span>&nbsp;<span class="op" id="3192973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3192978">blackHolePool</span><span class="op" id="3192991">.</span><span class="ident" id="3192992">Put</span><span class="op" id="3192995">(</span><span class="ident" id="3192996">bufp</span><span class="op" id="3193000">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193005">if</span>&nbsp;<span class="ident" id="3193008">err</span>&nbsp;<span class="op" id="3193012">==</span>&nbsp;<span class="ident" id="3193015">io</span><span class="op" id="3193017">.</span><span class="ident" id="3193018">EOF</span>&nbsp;<span class="op" id="3193022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193028">return</span>&nbsp;<span class="ident" id="3193035">n</span><span class="op" id="3193036">,</span>&nbsp;<span class="ident" id="3193038">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3193045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3193050">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3193059">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3193062">}</span><br>
<span class="lineno"></span><span class="op" id="3193064">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3193067">//&nbsp;Discard&nbsp;is&nbsp;an&nbsp;io.Writer&nbsp;on&nbsp;which&nbsp;all&nbsp;Write&nbsp;calls&nbsp;succeed</span><br>
<span class="lineno"></span><span class="comment" id="3193127">//&nbsp;without&nbsp;doing&nbsp;anything.</span><br>
<span class="lineno">165</span><span class="keyword" id="3193154">var</span>&nbsp;<span class="ident" id="3193158">Discard</span>&nbsp;<span class="ident" id="3193166">io</span><span class="op" id="3193168">.</span><span class="ident" id="3193169">Writer</span>&nbsp;<span class="op" id="3193176">=</span>&nbsp;<span class="ident" id="3193178">devNull</span><span class="op" id="3193185">(</span><span class="num" id="3193186">0</span><span class="op" id="3193187">)</span>
</div>
</body>
</html>
