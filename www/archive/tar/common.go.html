<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6185647">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6185702">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6185756">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6185807">//&nbsp;Package&nbsp;tar&nbsp;implements&nbsp;access&nbsp;to&nbsp;tar&nbsp;archives.</span><br>
<span class="lineno"></span><span class="comment" id="6185857">//&nbsp;It&nbsp;aims&nbsp;to&nbsp;cover&nbsp;most&nbsp;of&nbsp;the&nbsp;variations,&nbsp;including&nbsp;those&nbsp;produced</span><br>
<span class="lineno"></span><span class="comment" id="6185926">//&nbsp;by&nbsp;GNU&nbsp;and&nbsp;BSD&nbsp;tars.</span><br>
<span class="lineno"></span><span class="comment" id="6185950">//</span><br>
<span class="lineno"></span><span class="comment" id="6185953">//&nbsp;References:</span><br>
<span class="lineno">10</span><span class="comment" id="6185968">//&nbsp;&nbsp;&nbsp;http://www.freebsd.org/cgi/man.cgi?query=tar&amp;sektion=5</span><br>
<span class="lineno"></span><span class="comment" id="6186028">//&nbsp;&nbsp;&nbsp;http://www.gnu.org/software/tar/manual/html_node/Standard.html</span><br>
<span class="lineno"></span><span class="comment" id="6186096">//&nbsp;&nbsp;&nbsp;http://pubs.opengroup.org/onlinepubs/9699919799/utilities/pax.html</span><br>
<span class="lineno"></span><span class="keyword" id="6186168">package</span>&nbsp;<span class="ident" id="6186176">tar</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="6186181">import</span>&nbsp;<span class="op" id="6186188">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6186191">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6186200">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6186210">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6186217">&#34;os&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6186223">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6186231">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6186238">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6186241">const</span>&nbsp;<span class="op" id="6186247">(</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186250">blockSize</span>&nbsp;<span class="op" id="6186260">=</span>&nbsp;<span class="num" id="6186262">512</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6186268">//&nbsp;Types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186278">TypeReg</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186296">=</span>&nbsp;<span class="string" id="6186298">&#39;0&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186305">//&nbsp;regular&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186322">TypeRegA</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186340">=</span>&nbsp;<span class="string" id="6186342">&#39;\x00&#39;</span>&nbsp;<span class="comment" id="6186349">//&nbsp;regular&nbsp;file</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186366">TypeLink</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186384">=</span>&nbsp;<span class="string" id="6186386">&#39;1&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186393">//&nbsp;hard&nbsp;link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186407">TypeSymlink</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186425">=</span>&nbsp;<span class="string" id="6186427">&#39;2&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186434">//&nbsp;symbolic&nbsp;link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186452">TypeChar</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186470">=</span>&nbsp;<span class="string" id="6186472">&#39;3&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186479">//&nbsp;character&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186505">TypeBlock</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186523">=</span>&nbsp;<span class="string" id="6186525">&#39;4&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186532">//&nbsp;block&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186554">TypeDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186572">=</span>&nbsp;<span class="string" id="6186574">&#39;5&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186581">//&nbsp;directory</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186595">TypeFifo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186613">=</span>&nbsp;<span class="string" id="6186615">&#39;6&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186622">//&nbsp;fifo&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186636">TypeCont</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186654">=</span>&nbsp;<span class="string" id="6186656">&#39;7&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186663">//&nbsp;reserved</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186676">TypeXHeader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186694">=</span>&nbsp;<span class="string" id="6186696">&#39;x&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186703">//&nbsp;extended&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186723">TypeXGlobalHeader</span>&nbsp;<span class="op" id="6186741">=</span>&nbsp;<span class="string" id="6186743">&#39;g&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186750">//&nbsp;global&nbsp;extended&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186777">TypeGNULongName</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6186795">=</span>&nbsp;<span class="string" id="6186797">&#39;L&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186804">//&nbsp;Next&nbsp;file&nbsp;has&nbsp;a&nbsp;long&nbsp;name</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186834">TypeGNULongLink</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6186852">=</span>&nbsp;<span class="string" id="6186854">&#39;K&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186861">//&nbsp;Next&nbsp;file&nbsp;symlinks&nbsp;to&nbsp;a&nbsp;file&nbsp;w/&nbsp;a&nbsp;long&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186909">TypeGNUSparse</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6186927">=</span>&nbsp;<span class="string" id="6186929">&#39;S&#39;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6186936">//&nbsp;sparse&nbsp;file</span><br>
<span class="lineno"></span><span class="op" id="6186951">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6186954">//&nbsp;A&nbsp;Header&nbsp;represents&nbsp;a&nbsp;single&nbsp;header&nbsp;in&nbsp;a&nbsp;tar&nbsp;archive.</span><br>
<span class="lineno">45</span><span class="comment" id="6187011">//&nbsp;Some&nbsp;fields&nbsp;may&nbsp;not&nbsp;be&nbsp;populated.</span><br>
<span class="lineno"></span><span class="keyword" id="6187048">type</span>&nbsp;<span class="ident" id="6187053">Header</span>&nbsp;<span class="keyword" id="6187060">struct</span>&nbsp;<span class="op" id="6187067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187070">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6187081">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187091">//&nbsp;name&nbsp;of&nbsp;header&nbsp;file&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187121">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6187132">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187142">//&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187171">Uid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6187182">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187192">//&nbsp;user&nbsp;id&nbsp;of&nbsp;owner</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187213">Gid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6187224">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187234">//&nbsp;group&nbsp;id&nbsp;of&nbsp;owner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187256">Size</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6187267">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187277">//&nbsp;length&nbsp;in&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187297">ModTime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6187308"><a href="/archive/tar/common.go.html#6186231">time</a></span><span class="op" id="6187312">.</span><span class="ident" id="6187313">Time</span>&nbsp;<span class="comment" id="6187318">//&nbsp;modified&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187336">Typeflag</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6187347">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187357">//&nbsp;type&nbsp;of&nbsp;header&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187382">Linkname</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6187393">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187403">//&nbsp;target&nbsp;name&nbsp;of&nbsp;link</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187427">Uname</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6187438">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187448">//&nbsp;user&nbsp;name&nbsp;of&nbsp;owner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187471">Gname</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6187482">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187492">//&nbsp;group&nbsp;name&nbsp;of&nbsp;owner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187516">Devmajor</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6187527">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187537">//&nbsp;major&nbsp;number&nbsp;of&nbsp;character&nbsp;or&nbsp;block&nbsp;device</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187583">Devminor</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6187594">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6187604">//&nbsp;minor&nbsp;number&nbsp;of&nbsp;character&nbsp;or&nbsp;block&nbsp;device</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187650">AccessTime</span>&nbsp;<span class="ident" id="6187661"><a href="/archive/tar/common.go.html#6186231">time</a></span><span class="op" id="6187665">.</span><span class="ident" id="6187666">Time</span>&nbsp;<span class="comment" id="6187671">//&nbsp;access&nbsp;time</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187687">ChangeTime</span>&nbsp;<span class="ident" id="6187698"><a href="/archive/tar/common.go.html#6186231">time</a></span><span class="op" id="6187702">.</span><span class="ident" id="6187703">Time</span>&nbsp;<span class="comment" id="6187708">//&nbsp;status&nbsp;change&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187731">Xattrs</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6187742">map</span><span class="op" id="6187745">[</span><span class="builtintype" id="6187746">string</span><span class="op" id="6187752">]</span><span class="builtintype" id="6187753">string</span><br>
<span class="lineno"></span><span class="op" id="6187760">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6187763">//&nbsp;File&nbsp;name&nbsp;constants&nbsp;from&nbsp;the&nbsp;tar&nbsp;spec.</span><br>
<span class="lineno">65</span><span class="keyword" id="6187805">const</span>&nbsp;<span class="op" id="6187811">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187814">fileNameSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6187833">=</span>&nbsp;<span class="num" id="6187835">100</span>&nbsp;<span class="comment" id="6187839">//&nbsp;Maximum&nbsp;number&nbsp;of&nbsp;bytes&nbsp;in&nbsp;a&nbsp;standard&nbsp;tar&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187891">fileNamePrefixSize</span>&nbsp;<span class="op" id="6187910">=</span>&nbsp;<span class="num" id="6187912">155</span>&nbsp;<span class="comment" id="6187916">//&nbsp;Maximum&nbsp;number&nbsp;of&nbsp;ustar&nbsp;extension&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="op" id="6187960">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="comment" id="6187963">//&nbsp;FileInfo&nbsp;returns&nbsp;an&nbsp;os.FileInfo&nbsp;for&nbsp;the&nbsp;Header.</span><br>
<span class="lineno"></span><span class="keyword" id="6188014">func</span>&nbsp;<span class="op" id="6188019">(</span><span class="ident" id="6188020">h</span>&nbsp;<span class="op" id="6188022">*</span><span class="ident" id="6188023"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6188029">)</span>&nbsp;<span class="ident" id="6188031">FileInfo</span><span class="op" id="6188039">(</span><span class="op" id="6188040">)</span>&nbsp;<span class="ident" id="6188042"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6188044">.</span><span class="ident" id="6188045">FileInfo</span>&nbsp;<span class="op" id="6188054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188057">return</span>&nbsp;<span class="ident" id="6188064"><a href="/archive/tar/common.go.html#6188132">headerFileInfo</a></span><span class="op" id="6188078">{</span><span class="ident" id="6188079"><a href="/archive/tar/common.go.html#6188020">h</a></span><span class="op" id="6188080">}</span><br>
<span class="lineno"></span><span class="op" id="6188082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="6188085">//&nbsp;headerFileInfo&nbsp;implements&nbsp;os.FileInfo.</span><br>
<span class="lineno"></span><span class="keyword" id="6188127">type</span>&nbsp;<span class="ident" id="6188132">headerFileInfo</span>&nbsp;<span class="keyword" id="6188147">struct</span>&nbsp;<span class="op" id="6188154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188157">h</span>&nbsp;<span class="op" id="6188159">*</span><span class="ident" id="6188160"><a href="/archive/tar/common.go.html#6187053">Header</a></span><br>
<span class="lineno"></span><span class="op" id="6188167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="6188170">func</span>&nbsp;<span class="op" id="6188175">(</span><span class="ident" id="6188176">fi</span>&nbsp;<span class="ident" id="6188179"><a href="/archive/tar/common.go.html#6188132">headerFileInfo</a></span><span class="op" id="6188193">)</span>&nbsp;<span class="ident" id="6188195">Size</span><span class="op" id="6188199">(</span><span class="op" id="6188200">)</span>&nbsp;<span class="ident" id="6188202">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6188215">{</span>&nbsp;<span class="keyword" id="6188217">return</span>&nbsp;<span class="ident" id="6188224"><a href="/archive/tar/common.go.html#6188176">fi</a></span><span class="op" id="6188226">.</span><span class="ident" id="6188227">h</span><span class="op" id="6188228">.</span><span class="ident" id="6188229">Size</span>&nbsp;<span class="op" id="6188234">}</span><br>
<span class="lineno"></span><span class="keyword" id="6188236">func</span>&nbsp;<span class="op" id="6188241">(</span><span class="ident" id="6188242">fi</span>&nbsp;<span class="ident" id="6188245"><a href="/archive/tar/common.go.html#6188132">headerFileInfo</a></span><span class="op" id="6188259">)</span>&nbsp;<span class="ident" id="6188261">IsDir</span><span class="op" id="6188266">(</span><span class="op" id="6188267">)</span>&nbsp;<span class="builtintype" id="6188269">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6188281">{</span>&nbsp;<span class="keyword" id="6188283">return</span>&nbsp;<span class="ident" id="6188290"><a href="/archive/tar/common.go.html#6188242">fi</a></span><span class="op" id="6188292">.</span><span class="ident" id="6188293">Mode</span><span class="op" id="6188297">(</span><span class="op" id="6188298">)</span><span class="op" id="6188299">.</span><span class="ident" id="6188300">IsDir</span><span class="op" id="6188305">(</span><span class="op" id="6188306">)</span>&nbsp;<span class="op" id="6188308">}</span><br>
<span class="lineno"></span><span class="keyword" id="6188310">func</span>&nbsp;<span class="op" id="6188315">(</span><span class="ident" id="6188316">fi</span>&nbsp;<span class="ident" id="6188319"><a href="/archive/tar/common.go.html#6188132">headerFileInfo</a></span><span class="op" id="6188333">)</span>&nbsp;<span class="ident" id="6188335">ModTime</span><span class="op" id="6188342">(</span><span class="op" id="6188343">)</span>&nbsp;<span class="ident" id="6188345"><a href="/archive/tar/common.go.html#6186231">time</a></span><span class="op" id="6188349">.</span><span class="ident" id="6188350">Time</span>&nbsp;<span class="op" id="6188355">{</span>&nbsp;<span class="keyword" id="6188357">return</span>&nbsp;<span class="ident" id="6188364"><a href="/archive/tar/common.go.html#6188316">fi</a></span><span class="op" id="6188366">.</span><span class="ident" id="6188367">h</span><span class="op" id="6188368">.</span><span class="ident" id="6188369">ModTime</span>&nbsp;<span class="op" id="6188377">}</span><br>
<span class="lineno"></span><span class="keyword" id="6188379">func</span>&nbsp;<span class="op" id="6188384">(</span><span class="ident" id="6188385">fi</span>&nbsp;<span class="ident" id="6188388"><a href="/archive/tar/common.go.html#6188132">headerFileInfo</a></span><span class="op" id="6188402">)</span>&nbsp;<span class="ident" id="6188404">Sys</span><span class="op" id="6188407">(</span><span class="op" id="6188408">)</span>&nbsp;<span class="keyword" id="6188410">interface</span><span class="op" id="6188419">{</span><span class="op" id="6188420">}</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6188424">{</span>&nbsp;<span class="keyword" id="6188426">return</span>&nbsp;<span class="ident" id="6188433"><a href="/archive/tar/common.go.html#6188385">fi</a></span><span class="op" id="6188435">.</span><span class="ident" id="6188436">h</span>&nbsp;<span class="op" id="6188438">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="6188441">//&nbsp;Name&nbsp;returns&nbsp;the&nbsp;base&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6188484">func</span>&nbsp;<span class="op" id="6188489">(</span><span class="ident" id="6188490">fi</span>&nbsp;<span class="ident" id="6188493"><a href="/archive/tar/common.go.html#6188132">headerFileInfo</a></span><span class="op" id="6188507">)</span>&nbsp;<span class="ident" id="6188509">Name</span><span class="op" id="6188513">(</span><span class="op" id="6188514">)</span>&nbsp;<span class="builtintype" id="6188516">string</span>&nbsp;<span class="op" id="6188523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188526">if</span>&nbsp;<span class="ident" id="6188529"><a href="/archive/tar/common.go.html#6188490">fi</a></span><span class="op" id="6188531">.</span><span class="ident" id="6188532">IsDir</span><span class="op" id="6188537">(</span><span class="op" id="6188538">)</span>&nbsp;<span class="op" id="6188540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188544">return</span>&nbsp;<span class="ident" id="6188551"><a href="/archive/tar/common.go.html#6186223">path</a></span><span class="op" id="6188555">.</span><span class="ident" id="6188556">Base</span><span class="op" id="6188560">(</span><span class="ident" id="6188561"><a href="/archive/tar/common.go.html#6186223">path</a></span><span class="op" id="6188565">.</span><span class="ident" id="6188566">Clean</span><span class="op" id="6188571">(</span><span class="ident" id="6188572"><a href="/archive/tar/common.go.html#6188490">fi</a></span><span class="op" id="6188574">.</span><span class="ident" id="6188575">h</span><span class="op" id="6188576">.</span><span class="ident" id="6188577">Name</span><span class="op" id="6188581">)</span><span class="op" id="6188582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188585">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188588">return</span>&nbsp;<span class="ident" id="6188595"><a href="/archive/tar/common.go.html#6186223">path</a></span><span class="op" id="6188599">.</span><span class="ident" id="6188600">Base</span><span class="op" id="6188604">(</span><span class="ident" id="6188605"><a href="/archive/tar/common.go.html#6188490">fi</a></span><span class="op" id="6188607">.</span><span class="ident" id="6188608">h</span><span class="op" id="6188609">.</span><span class="ident" id="6188610">Name</span><span class="op" id="6188614">)</span><br>
<span class="lineno"></span><span class="op" id="6188616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6188619">//&nbsp;Mode&nbsp;returns&nbsp;the&nbsp;permission&nbsp;and&nbsp;mode&nbsp;bits&nbsp;for&nbsp;the&nbsp;headerFileInfo.</span><br>
<span class="lineno"></span><span class="keyword" id="6188688">func</span>&nbsp;<span class="op" id="6188693">(</span><span class="ident" id="6188694">fi</span>&nbsp;<span class="ident" id="6188697"><a href="/archive/tar/common.go.html#6188132">headerFileInfo</a></span><span class="op" id="6188711">)</span>&nbsp;<span class="ident" id="6188713">Mode</span><span class="op" id="6188717">(</span><span class="op" id="6188718">)</span>&nbsp;<span class="op" id="6188720">(</span><span class="ident" id="6188721">mode</span>&nbsp;<span class="ident" id="6188726"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6188728">.</span><span class="ident" id="6188729">FileMode</span><span class="op" id="6188737">)</span>&nbsp;<span class="op" id="6188739">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6188742">//&nbsp;Set&nbsp;file&nbsp;permission&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188772"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6188777">=</span>&nbsp;<span class="ident" id="6188779"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6188781">.</span><span class="ident" id="6188782">FileMode</span><span class="op" id="6188790">(</span><span class="ident" id="6188791"><a href="/archive/tar/common.go.html#6188694">fi</a></span><span class="op" id="6188793">.</span><span class="ident" id="6188794">h</span><span class="op" id="6188795">.</span><span class="ident" id="6188796">Mode</span><span class="op" id="6188800">)</span><span class="op" id="6188801">.</span><span class="ident" id="6188802">Perm</span><span class="op" id="6188806">(</span><span class="op" id="6188807">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6188811">//&nbsp;Set&nbsp;setuid,&nbsp;setgid&nbsp;and&nbsp;sticky&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188851">if</span>&nbsp;<span class="ident" id="6188854"><a href="/archive/tar/common.go.html#6188694">fi</a></span><span class="op" id="6188856">.</span><span class="ident" id="6188857">h</span><span class="op" id="6188858">.</span><span class="ident" id="6188859">Mode</span><span class="op" id="6188863">&amp;</span><span class="ident" id="6188864"><a href="/archive/tar/common.go.html#6190163">c_ISUID</a></span>&nbsp;<span class="op" id="6188872">!=</span>&nbsp;<span class="num" id="6188875">0</span>&nbsp;<span class="op" id="6188877">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6188881">//&nbsp;setuid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188893"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6188898">|=</span>&nbsp;<span class="ident" id="6188901"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6188903">.</span><span class="ident" id="6188904">ModeSetuid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188919">if</span>&nbsp;<span class="ident" id="6188922"><a href="/archive/tar/common.go.html#6188694">fi</a></span><span class="op" id="6188924">.</span><span class="ident" id="6188925">h</span><span class="op" id="6188926">.</span><span class="ident" id="6188927">Mode</span><span class="op" id="6188931">&amp;</span><span class="ident" id="6188932"><a href="/archive/tar/common.go.html#6190194">c_ISGID</a></span>&nbsp;<span class="op" id="6188940">!=</span>&nbsp;<span class="num" id="6188943">0</span>&nbsp;<span class="op" id="6188945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6188949">//&nbsp;setgid</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188961"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6188966">|=</span>&nbsp;<span class="ident" id="6188969"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6188971">.</span><span class="ident" id="6188972">ModeSetgid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188987">if</span>&nbsp;<span class="ident" id="6188990"><a href="/archive/tar/common.go.html#6188694">fi</a></span><span class="op" id="6188992">.</span><span class="ident" id="6188993">h</span><span class="op" id="6188994">.</span><span class="ident" id="6188995">Mode</span><span class="op" id="6188999">&amp;</span><span class="ident" id="6189000"><a href="/archive/tar/common.go.html#6190225">c_ISVTX</a></span>&nbsp;<span class="op" id="6189008">!=</span>&nbsp;<span class="num" id="6189011">0</span>&nbsp;<span class="op" id="6189013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189017">//&nbsp;sticky</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189029"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189034">|=</span>&nbsp;<span class="ident" id="6189037"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189039">.</span><span class="ident" id="6189040">ModeSticky</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189056">//&nbsp;Set&nbsp;file&nbsp;mode&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189080">//&nbsp;clear&nbsp;perm,&nbsp;setuid,&nbsp;setgid&nbsp;and&nbsp;sticky&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189128">m</span>&nbsp;<span class="op" id="6189130">:=</span>&nbsp;<span class="ident" id="6189133"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189135">.</span><span class="ident" id="6189136">FileMode</span><span class="op" id="6189144">(</span><span class="ident" id="6189145"><a href="/archive/tar/common.go.html#6188694">fi</a></span><span class="op" id="6189147">.</span><span class="ident" id="6189148">h</span><span class="op" id="6189149">.</span><span class="ident" id="6189150">Mode</span><span class="op" id="6189154">)</span>&nbsp;<span class="op" id="6189156">&amp;^</span>&nbsp;<span class="num" id="6189159">07777</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189166">if</span>&nbsp;<span class="ident" id="6189169"><a href="/archive/tar/common.go.html#6189128">m</a></span>&nbsp;<span class="op" id="6189171">==</span>&nbsp;<span class="ident" id="6189174"><a href="/archive/tar/common.go.html#6190271">c_ISDIR</a></span>&nbsp;<span class="op" id="6189182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189186">//&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189201"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189206">|=</span>&nbsp;<span class="ident" id="6189209"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189211">.</span><span class="ident" id="6189212">ModeDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189224">if</span>&nbsp;<span class="ident" id="6189227"><a href="/archive/tar/common.go.html#6189128">m</a></span>&nbsp;<span class="op" id="6189229">==</span>&nbsp;<span class="ident" id="6189232"><a href="/archive/tar/common.go.html#6190304">c_ISFIFO</a></span>&nbsp;<span class="op" id="6189241">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189245">//&nbsp;named&nbsp;pipe&nbsp;(FIFO)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189268"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189273">|=</span>&nbsp;<span class="ident" id="6189276"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189278">.</span><span class="ident" id="6189279">ModeNamedPipe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189297">if</span>&nbsp;<span class="ident" id="6189300"><a href="/archive/tar/common.go.html#6189128">m</a></span>&nbsp;<span class="op" id="6189302">==</span>&nbsp;<span class="ident" id="6189305"><a href="/archive/tar/common.go.html#6190368">c_ISLNK</a></span>&nbsp;<span class="op" id="6189313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189317">//&nbsp;symbolic&nbsp;link</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189336"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189341">|=</span>&nbsp;<span class="ident" id="6189344"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189346">.</span><span class="ident" id="6189347">ModeSymlink</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189363">if</span>&nbsp;<span class="ident" id="6189366"><a href="/archive/tar/common.go.html#6189128">m</a></span>&nbsp;<span class="op" id="6189368">==</span>&nbsp;<span class="ident" id="6189371"><a href="/archive/tar/common.go.html#6190405">c_ISBLK</a></span>&nbsp;<span class="op" id="6189379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189383">//&nbsp;device&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189400"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189405">|=</span>&nbsp;<span class="ident" id="6189408"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189410">.</span><span class="ident" id="6189411">ModeDevice</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189426">if</span>&nbsp;<span class="ident" id="6189429"><a href="/archive/tar/common.go.html#6189128">m</a></span>&nbsp;<span class="op" id="6189431">==</span>&nbsp;<span class="ident" id="6189434"><a href="/archive/tar/common.go.html#6190447">c_ISCHR</a></span>&nbsp;<span class="op" id="6189442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189446">//&nbsp;Unix&nbsp;character&nbsp;device</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189473"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189478">|=</span>&nbsp;<span class="ident" id="6189481"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189483">.</span><span class="ident" id="6189484">ModeDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189497"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189502">|=</span>&nbsp;<span class="ident" id="6189505"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189507">.</span><span class="ident" id="6189508">ModeCharDevice</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189527">if</span>&nbsp;<span class="ident" id="6189530"><a href="/archive/tar/common.go.html#6189128">m</a></span>&nbsp;<span class="op" id="6189532">==</span>&nbsp;<span class="ident" id="6189535"><a href="/archive/tar/common.go.html#6190493">c_ISSOCK</a></span>&nbsp;<span class="op" id="6189544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189548">//&nbsp;Unix&nbsp;domain&nbsp;socket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189572"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189577">|=</span>&nbsp;<span class="ident" id="6189580"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189582">.</span><span class="ident" id="6189583">ModeSocket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189595">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189599">switch</span>&nbsp;<span class="ident" id="6189606"><a href="/archive/tar/common.go.html#6188694">fi</a></span><span class="op" id="6189608">.</span><span class="ident" id="6189609">h</span><span class="op" id="6189610">.</span><span class="ident" id="6189611">Typeflag</span>&nbsp;<span class="op" id="6189620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189623">case</span>&nbsp;<span class="ident" id="6189628"><a href="/archive/tar/common.go.html#6186366">TypeLink</a></span><span class="op" id="6189636">,</span>&nbsp;<span class="ident" id="6189638"><a href="/archive/tar/common.go.html#6186407">TypeSymlink</a></span><span class="op" id="6189649">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189653">//&nbsp;hard&nbsp;link,&nbsp;symbolic&nbsp;link</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189683"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189688">|=</span>&nbsp;<span class="ident" id="6189691"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189693">.</span><span class="ident" id="6189694">ModeSymlink</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189707">case</span>&nbsp;<span class="ident" id="6189712"><a href="/archive/tar/common.go.html#6186452">TypeChar</a></span><span class="op" id="6189720">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189724">//&nbsp;character&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189751"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189756">|=</span>&nbsp;<span class="ident" id="6189759"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189761">.</span><span class="ident" id="6189762">ModeDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189775"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189780">|=</span>&nbsp;<span class="ident" id="6189783"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189785">.</span><span class="ident" id="6189786">ModeCharDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189802">case</span>&nbsp;<span class="ident" id="6189807"><a href="/archive/tar/common.go.html#6186505">TypeBlock</a></span><span class="op" id="6189816">:</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189820">//&nbsp;block&nbsp;device&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189843"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189848">|=</span>&nbsp;<span class="ident" id="6189851"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189853">.</span><span class="ident" id="6189854">ModeDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189866">case</span>&nbsp;<span class="ident" id="6189871"><a href="/archive/tar/common.go.html#6186554">TypeDir</a></span><span class="op" id="6189878">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189882">//&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189897"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189902">|=</span>&nbsp;<span class="ident" id="6189905"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189907">.</span><span class="ident" id="6189908">ModeDir</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189917">case</span>&nbsp;<span class="ident" id="6189922"><a href="/archive/tar/common.go.html#6186595">TypeFifo</a></span><span class="op" id="6189930">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189934">//&nbsp;fifo&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189949"><a href="/archive/tar/common.go.html#6188721">mode</a></span>&nbsp;<span class="op" id="6189954">|=</span>&nbsp;<span class="ident" id="6189957"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6189959">.</span><span class="ident" id="6189960">ModeNamedPipe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189979">return</span>&nbsp;<span class="ident" id="6189986"><a href="/archive/tar/common.go.html#6188721">mode</a></span><br>
<span class="lineno"></span><span class="op" id="6189991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6189994">//&nbsp;sysStat,&nbsp;if&nbsp;non-nil,&nbsp;populates&nbsp;h&nbsp;from&nbsp;system-dependent&nbsp;fields&nbsp;of&nbsp;fi.</span><br>
<span class="lineno"></span><span class="keyword" id="6190066">var</span>&nbsp;<span class="ident" id="6190070">sysStat</span>&nbsp;<span class="keyword" id="6190078">func</span><span class="op" id="6190082">(</span><span class="ident" id="6190083">fi</span>&nbsp;<span class="ident" id="6190086"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6190088">.</span><span class="ident" id="6190089">FileInfo</span><span class="op" id="6190097">,</span>&nbsp;<span class="ident" id="6190099">h</span>&nbsp;<span class="op" id="6190101">*</span><span class="ident" id="6190102"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6190108">)</span>&nbsp;<span class="builtintype" id="6190110">error</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="comment" id="6190117">//&nbsp;Mode&nbsp;constants&nbsp;from&nbsp;the&nbsp;tar&nbsp;spec.</span><br>
<span class="lineno"></span><span class="keyword" id="6190154">const</span>&nbsp;<span class="op" id="6190160">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190163">c_ISUID</span>&nbsp;&nbsp;<span class="op" id="6190172">=</span>&nbsp;<span class="num" id="6190174">04000</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6190182">//&nbsp;Set&nbsp;uid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190194">c_ISGID</span>&nbsp;&nbsp;<span class="op" id="6190203">=</span>&nbsp;<span class="num" id="6190205">02000</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6190213">//&nbsp;Set&nbsp;gid</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190225">c_ISVTX</span>&nbsp;&nbsp;<span class="op" id="6190234">=</span>&nbsp;<span class="num" id="6190236">01000</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6190244">//&nbsp;Save&nbsp;text&nbsp;(sticky&nbsp;bit)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190271">c_ISDIR</span>&nbsp;&nbsp;<span class="op" id="6190280">=</span>&nbsp;<span class="num" id="6190282">040000</span>&nbsp;&nbsp;<span class="comment" id="6190290">//&nbsp;Directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190304">c_ISFIFO</span>&nbsp;<span class="op" id="6190313">=</span>&nbsp;<span class="num" id="6190315">010000</span>&nbsp;&nbsp;<span class="comment" id="6190323">//&nbsp;FIFO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190332">c_ISREG</span>&nbsp;&nbsp;<span class="op" id="6190341">=</span>&nbsp;<span class="num" id="6190343">0100000</span>&nbsp;<span class="comment" id="6190351">//&nbsp;Regular&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190368">c_ISLNK</span>&nbsp;&nbsp;<span class="op" id="6190377">=</span>&nbsp;<span class="num" id="6190379">0120000</span>&nbsp;<span class="comment" id="6190387">//&nbsp;Symbolic&nbsp;link</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190405">c_ISBLK</span>&nbsp;&nbsp;<span class="op" id="6190414">=</span>&nbsp;<span class="num" id="6190416">060000</span>&nbsp;&nbsp;<span class="comment" id="6190424">//&nbsp;Block&nbsp;special&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190447">c_ISCHR</span>&nbsp;&nbsp;<span class="op" id="6190456">=</span>&nbsp;<span class="num" id="6190458">020000</span>&nbsp;&nbsp;<span class="comment" id="6190466">//&nbsp;Character&nbsp;special&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190493">c_ISSOCK</span>&nbsp;<span class="op" id="6190502">=</span>&nbsp;<span class="num" id="6190504">0140000</span>&nbsp;<span class="comment" id="6190512">//&nbsp;Socket</span><br>
<span class="lineno"></span><span class="op" id="6190522">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="comment" id="6190525">//&nbsp;Keywords&nbsp;for&nbsp;the&nbsp;PAX&nbsp;Extended&nbsp;Header</span><br>
<span class="lineno"></span><span class="keyword" id="6190565">const</span>&nbsp;<span class="op" id="6190571">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190574">paxAtime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190586">=</span>&nbsp;<span class="string" id="6190588">&#34;atime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190597">paxCharset</span>&nbsp;&nbsp;<span class="op" id="6190609">=</span>&nbsp;<span class="string" id="6190611">&#34;charset&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190622">paxComment</span>&nbsp;&nbsp;<span class="op" id="6190634">=</span>&nbsp;<span class="string" id="6190636">&#34;comment&#34;</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190647">paxCtime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190659">=</span>&nbsp;<span class="string" id="6190661">&#34;ctime&#34;</span>&nbsp;<span class="comment" id="6190669">//&nbsp;please&nbsp;note&nbsp;that&nbsp;ctime&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;pax&nbsp;header.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190723">paxGid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190735">=</span>&nbsp;<span class="string" id="6190737">&#34;gid&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190744">paxGname</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190756">=</span>&nbsp;<span class="string" id="6190758">&#34;gname&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190767">paxLinkpath</span>&nbsp;<span class="op" id="6190779">=</span>&nbsp;<span class="string" id="6190781">&#34;linkpath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190793">paxMtime</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190805">=</span>&nbsp;<span class="string" id="6190807">&#34;mtime&#34;</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190816">paxPath</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190828">=</span>&nbsp;<span class="string" id="6190830">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190838">paxSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190850">=</span>&nbsp;<span class="string" id="6190852">&#34;size&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190860">paxUid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190872">=</span>&nbsp;<span class="string" id="6190874">&#34;uid&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190881">paxUname</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190893">=</span>&nbsp;<span class="string" id="6190895">&#34;uname&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190904">paxXattr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190916">=</span>&nbsp;<span class="string" id="6190918">&#34;SCHILY.xattr.&#34;</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190935">paxNone</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6190947">=</span>&nbsp;<span class="string" id="6190949">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="6190952">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6190955">//&nbsp;FileInfoHeader&nbsp;creates&nbsp;a&nbsp;partially-populated&nbsp;Header&nbsp;from&nbsp;fi.</span><br>
<span class="lineno"></span><span class="comment" id="6191019">//&nbsp;If&nbsp;fi&nbsp;describes&nbsp;a&nbsp;symlink,&nbsp;FileInfoHeader&nbsp;records&nbsp;link&nbsp;as&nbsp;the&nbsp;link&nbsp;target.</span><br>
<span class="lineno">200</span><span class="comment" id="6191097">//&nbsp;If&nbsp;fi&nbsp;describes&nbsp;a&nbsp;directory,&nbsp;a&nbsp;slash&nbsp;is&nbsp;appended&nbsp;to&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="6191162">//&nbsp;Because&nbsp;os.FileInfo&#39;s&nbsp;Name&nbsp;method&nbsp;returns&nbsp;only&nbsp;the&nbsp;base&nbsp;name&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6191229">//&nbsp;the&nbsp;file&nbsp;it&nbsp;describes,&nbsp;it&nbsp;may&nbsp;be&nbsp;necessary&nbsp;to&nbsp;modify&nbsp;the&nbsp;Name&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6191300">//&nbsp;of&nbsp;the&nbsp;returned&nbsp;header&nbsp;to&nbsp;provide&nbsp;the&nbsp;full&nbsp;path&nbsp;name&nbsp;of&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="6191369">func</span>&nbsp;<span class="ident" id="6191374">FileInfoHeader</span><span class="op" id="6191388">(</span><span class="ident" id="6191389">fi</span>&nbsp;<span class="ident" id="6191392"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6191394">.</span><span class="ident" id="6191395">FileInfo</span><span class="op" id="6191403">,</span>&nbsp;<span class="ident" id="6191405">link</span>&nbsp;<span class="builtintype" id="6191410">string</span><span class="op" id="6191416">)</span>&nbsp;<span class="op" id="6191418">(</span><span class="op" id="6191419">*</span><span class="ident" id="6191420"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6191426">,</span>&nbsp;<span class="builtintype" id="6191428">error</span><span class="op" id="6191433">)</span>&nbsp;<span class="op" id="6191435">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191438">if</span>&nbsp;<span class="ident" id="6191441"><a href="/archive/tar/common.go.html#6191389">fi</a></span>&nbsp;<span class="op" id="6191444">==</span>&nbsp;<span class="ident" id="6191447">nil</span>&nbsp;<span class="op" id="6191451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191455">return</span>&nbsp;<span class="ident" id="6191462">nil</span><span class="op" id="6191465">,</span>&nbsp;<span class="ident" id="6191467"><a href="/archive/tar/common.go.html#6186200">errors</a></span><span class="op" id="6191473">.</span><span class="ident" id="6191474">New</span><span class="op" id="6191477">(</span><span class="string" id="6191478">&#34;tar:&nbsp;FileInfo&nbsp;is&nbsp;nil&#34;</span><span class="op" id="6191500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191506">fm</span>&nbsp;<span class="op" id="6191509">:=</span>&nbsp;<span class="ident" id="6191512"><a href="/archive/tar/common.go.html#6191389">fi</a></span><span class="op" id="6191514">.</span><span class="ident" id="6191515">Mode</span><span class="op" id="6191519">(</span><span class="op" id="6191520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191523">h</span>&nbsp;<span class="op" id="6191525">:=</span>&nbsp;<span class="op" id="6191528">&amp;</span><span class="ident" id="6191529"><a href="/archive/tar/common.go.html#6187053">Header</a></span><span class="op" id="6191535">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191539">Name</span><span class="op" id="6191543">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6191548"><a href="/archive/tar/common.go.html#6191389">fi</a></span><span class="op" id="6191550">.</span><span class="ident" id="6191551">Name</span><span class="op" id="6191555">(</span><span class="op" id="6191556">)</span><span class="op" id="6191557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191561">ModTime</span><span class="op" id="6191568">:</span>&nbsp;<span class="ident" id="6191570"><a href="/archive/tar/common.go.html#6191389">fi</a></span><span class="op" id="6191572">.</span><span class="ident" id="6191573">ModTime</span><span class="op" id="6191580">(</span><span class="op" id="6191581">)</span><span class="op" id="6191582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191586">Mode</span><span class="op" id="6191590">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6191595">int64</span><span class="op" id="6191600">(</span><span class="ident" id="6191601"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6191603">.</span><span class="ident" id="6191604">Perm</span><span class="op" id="6191608">(</span><span class="op" id="6191609">)</span><span class="op" id="6191610">)</span><span class="op" id="6191611">,</span>&nbsp;<span class="comment" id="6191613">//&nbsp;or&#39;d&nbsp;with&nbsp;c_IS*&nbsp;constants&nbsp;later</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191652">switch</span>&nbsp;<span class="op" id="6191659">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191662">case</span>&nbsp;<span class="ident" id="6191667"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6191669">.</span><span class="ident" id="6191670">IsRegular</span><span class="op" id="6191679">(</span><span class="op" id="6191680">)</span><span class="op" id="6191681">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191685"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6191686">.</span><span class="ident" id="6191687">Mode</span>&nbsp;<span class="op" id="6191692">|=</span>&nbsp;<span class="ident" id="6191695"><a href="/archive/tar/common.go.html#6190332">c_ISREG</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191705"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6191706">.</span><span class="ident" id="6191707">Typeflag</span>&nbsp;<span class="op" id="6191716">=</span>&nbsp;<span class="ident" id="6191718"><a href="/archive/tar/common.go.html#6186278">TypeReg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191728"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6191729">.</span><span class="ident" id="6191730">Size</span>&nbsp;<span class="op" id="6191735">=</span>&nbsp;<span class="ident" id="6191737"><a href="/archive/tar/common.go.html#6191389">fi</a></span><span class="op" id="6191739">.</span><span class="ident" id="6191740">Size</span><span class="op" id="6191744">(</span><span class="op" id="6191745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191748">case</span>&nbsp;<span class="ident" id="6191753"><a href="/archive/tar/common.go.html#6191389">fi</a></span><span class="op" id="6191755">.</span><span class="ident" id="6191756">IsDir</span><span class="op" id="6191761">(</span><span class="op" id="6191762">)</span><span class="op" id="6191763">:</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191767"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6191768">.</span><span class="ident" id="6191769">Typeflag</span>&nbsp;<span class="op" id="6191778">=</span>&nbsp;<span class="ident" id="6191780"><a href="/archive/tar/common.go.html#6186554">TypeDir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191790"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6191791">.</span><span class="ident" id="6191792">Mode</span>&nbsp;<span class="op" id="6191797">|=</span>&nbsp;<span class="ident" id="6191800"><a href="/archive/tar/common.go.html#6190271">c_ISDIR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191810"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6191811">.</span><span class="ident" id="6191812">Name</span>&nbsp;<span class="op" id="6191817">+=</span>&nbsp;<span class="string" id="6191820">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191825">case</span>&nbsp;<span class="ident" id="6191830"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6191832">&amp;</span><span class="ident" id="6191833"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6191835">.</span><span class="ident" id="6191836">ModeSymlink</span>&nbsp;<span class="op" id="6191848">!=</span>&nbsp;<span class="num" id="6191851">0</span><span class="op" id="6191852">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191856"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6191857">.</span><span class="ident" id="6191858">Typeflag</span>&nbsp;<span class="op" id="6191867">=</span>&nbsp;<span class="ident" id="6191869"><a href="/archive/tar/common.go.html#6186407">TypeSymlink</a></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191883"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6191884">.</span><span class="ident" id="6191885">Mode</span>&nbsp;<span class="op" id="6191890">|=</span>&nbsp;<span class="ident" id="6191893"><a href="/archive/tar/common.go.html#6190368">c_ISLNK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191903"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6191904">.</span><span class="ident" id="6191905">Linkname</span>&nbsp;<span class="op" id="6191914">=</span>&nbsp;<span class="ident" id="6191916"><a href="/archive/tar/common.go.html#6191405">link</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191922">case</span>&nbsp;<span class="ident" id="6191927"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6191929">&amp;</span><span class="ident" id="6191930"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6191932">.</span><span class="ident" id="6191933">ModeDevice</span>&nbsp;<span class="op" id="6191944">!=</span>&nbsp;<span class="num" id="6191947">0</span><span class="op" id="6191948">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191952">if</span>&nbsp;<span class="ident" id="6191955"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6191957">&amp;</span><span class="ident" id="6191958"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6191960">.</span><span class="ident" id="6191961">ModeCharDevice</span>&nbsp;<span class="op" id="6191976">!=</span>&nbsp;<span class="num" id="6191979">0</span>&nbsp;<span class="op" id="6191981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191986"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6191987">.</span><span class="ident" id="6191988">Mode</span>&nbsp;<span class="op" id="6191993">|=</span>&nbsp;<span class="ident" id="6191996"><a href="/archive/tar/common.go.html#6190447">c_ISCHR</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192007"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192008">.</span><span class="ident" id="6192009">Typeflag</span>&nbsp;<span class="op" id="6192018">=</span>&nbsp;<span class="ident" id="6192020"><a href="/archive/tar/common.go.html#6186452">TypeChar</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192031">}</span>&nbsp;<span class="keyword" id="6192033">else</span>&nbsp;<span class="op" id="6192038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192043"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192044">.</span><span class="ident" id="6192045">Mode</span>&nbsp;<span class="op" id="6192050">|=</span>&nbsp;<span class="ident" id="6192053"><a href="/archive/tar/common.go.html#6190405">c_ISBLK</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192064"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192065">.</span><span class="ident" id="6192066">Typeflag</span>&nbsp;<span class="op" id="6192075">=</span>&nbsp;<span class="ident" id="6192077"><a href="/archive/tar/common.go.html#6186505">TypeBlock</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192089">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192092">case</span>&nbsp;<span class="ident" id="6192097"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6192099">&amp;</span><span class="ident" id="6192100"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6192102">.</span><span class="ident" id="6192103">ModeNamedPipe</span>&nbsp;<span class="op" id="6192117">!=</span>&nbsp;<span class="num" id="6192120">0</span><span class="op" id="6192121">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192125"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192126">.</span><span class="ident" id="6192127">Typeflag</span>&nbsp;<span class="op" id="6192136">=</span>&nbsp;<span class="ident" id="6192138"><a href="/archive/tar/common.go.html#6186595">TypeFifo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192149"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192150">.</span><span class="ident" id="6192151">Mode</span>&nbsp;<span class="op" id="6192156">|=</span>&nbsp;<span class="ident" id="6192159"><a href="/archive/tar/common.go.html#6190304">c_ISFIFO</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192169">case</span>&nbsp;<span class="ident" id="6192174"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6192176">&amp;</span><span class="ident" id="6192177"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6192179">.</span><span class="ident" id="6192180">ModeSocket</span>&nbsp;<span class="op" id="6192191">!=</span>&nbsp;<span class="num" id="6192194">0</span><span class="op" id="6192195">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192199"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192200">.</span><span class="ident" id="6192201">Mode</span>&nbsp;<span class="op" id="6192206">|=</span>&nbsp;<span class="ident" id="6192209"><a href="/archive/tar/common.go.html#6190493">c_ISSOCK</a></span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192219">default</span><span class="op" id="6192226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192230">return</span>&nbsp;<span class="ident" id="6192237">nil</span><span class="op" id="6192240">,</span>&nbsp;<span class="ident" id="6192242"><a href="/archive/tar/common.go.html#6186210">fmt</a></span><span class="op" id="6192245">.</span><span class="ident" id="6192246">Errorf</span><span class="op" id="6192252">(</span><span class="string" id="6192253">&#34;archive/tar:&nbsp;unknown&nbsp;file&nbsp;mode&nbsp;%v&#34;</span><span class="op" id="6192288">,</span>&nbsp;<span class="ident" id="6192290"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6192292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192298">if</span>&nbsp;<span class="ident" id="6192301"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6192303">&amp;</span><span class="ident" id="6192304"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6192306">.</span><span class="ident" id="6192307">ModeSetuid</span>&nbsp;<span class="op" id="6192318">!=</span>&nbsp;<span class="num" id="6192321">0</span>&nbsp;<span class="op" id="6192323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192327"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192328">.</span><span class="ident" id="6192329">Mode</span>&nbsp;<span class="op" id="6192334">|=</span>&nbsp;<span class="ident" id="6192337"><a href="/archive/tar/common.go.html#6190163">c_ISUID</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192349">if</span>&nbsp;<span class="ident" id="6192352"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6192354">&amp;</span><span class="ident" id="6192355"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6192357">.</span><span class="ident" id="6192358">ModeSetgid</span>&nbsp;<span class="op" id="6192369">!=</span>&nbsp;<span class="num" id="6192372">0</span>&nbsp;<span class="op" id="6192374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192378"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192379">.</span><span class="ident" id="6192380">Mode</span>&nbsp;<span class="op" id="6192385">|=</span>&nbsp;<span class="ident" id="6192388"><a href="/archive/tar/common.go.html#6190194">c_ISGID</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192400">if</span>&nbsp;<span class="ident" id="6192403"><a href="/archive/tar/common.go.html#6191506">fm</a></span><span class="op" id="6192405">&amp;</span><span class="ident" id="6192406"><a href="/archive/tar/common.go.html#6186217">os</a></span><span class="op" id="6192408">.</span><span class="ident" id="6192409">ModeSticky</span>&nbsp;<span class="op" id="6192420">!=</span>&nbsp;<span class="num" id="6192423">0</span>&nbsp;<span class="op" id="6192425">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192429"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192430">.</span><span class="ident" id="6192431">Mode</span>&nbsp;<span class="op" id="6192436">|=</span>&nbsp;<span class="ident" id="6192439"><a href="/archive/tar/common.go.html#6190225">c_ISVTX</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192451">if</span>&nbsp;<span class="ident" id="6192454"><a href="/archive/tar/common.go.html#6190070">sysStat</a></span>&nbsp;<span class="op" id="6192462">!=</span>&nbsp;<span class="ident" id="6192465">nil</span>&nbsp;<span class="op" id="6192469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192473">return</span>&nbsp;<span class="ident" id="6192480"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192481">,</span>&nbsp;<span class="ident" id="6192483"><a href="/archive/tar/common.go.html#6190070">sysStat</a></span><span class="op" id="6192490">(</span><span class="ident" id="6192491"><a href="/archive/tar/common.go.html#6191389">fi</a></span><span class="op" id="6192493">,</span>&nbsp;<span class="ident" id="6192495"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192499">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192502">return</span>&nbsp;<span class="ident" id="6192509"><a href="/archive/tar/common.go.html#6191523">h</a></span><span class="op" id="6192510">,</span>&nbsp;<span class="ident" id="6192512">nil</span><br>
<span class="lineno"></span><span class="op" id="6192516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6192519">var</span>&nbsp;<span class="ident" id="6192523">zeroBlock</span>&nbsp;<span class="op" id="6192533">=</span>&nbsp;<span class="builtinfunc" id="6192535">make</span><span class="op" id="6192539">(</span><span class="op" id="6192540">[</span><span class="op" id="6192541">]</span><span class="builtintype" id="6192542">byte</span><span class="op" id="6192546">,</span>&nbsp;<span class="ident" id="6192548"><a href="/archive/tar/common.go.html#6186250">blockSize</a></span><span class="op" id="6192557">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="6192560">//&nbsp;POSIX&nbsp;specifies&nbsp;a&nbsp;sum&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;byte&nbsp;values,&nbsp;but&nbsp;the&nbsp;Sun&nbsp;tar&nbsp;uses&nbsp;signed&nbsp;byte&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="6192655">//&nbsp;We&nbsp;compute&nbsp;and&nbsp;return&nbsp;both.</span><br>
<span class="lineno"></span><span class="keyword" id="6192686">func</span>&nbsp;<span class="ident" id="6192691">checksum</span><span class="op" id="6192699">(</span><span class="ident" id="6192700">header</span>&nbsp;<span class="op" id="6192707">[</span><span class="op" id="6192708">]</span><span class="builtintype" id="6192709">byte</span><span class="op" id="6192713">)</span>&nbsp;<span class="op" id="6192715">(</span><span class="ident" id="6192716">unsigned</span>&nbsp;<span class="ident" id="6192725">int64</span><span class="op" id="6192730">,</span>&nbsp;<span class="ident" id="6192732">signed</span>&nbsp;<span class="ident" id="6192739">int64</span><span class="op" id="6192744">)</span>&nbsp;<span class="op" id="6192746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192749">for</span>&nbsp;<span class="ident" id="6192753">i</span>&nbsp;<span class="op" id="6192755">:=</span>&nbsp;<span class="num" id="6192758">0</span><span class="op" id="6192759">;</span>&nbsp;<span class="ident" id="6192761"><a href="/archive/tar/common.go.html#6192753">i</a></span>&nbsp;<span class="op" id="6192763">&lt;</span>&nbsp;<span class="builtinfunc" id="6192765">len</span><span class="op" id="6192768">(</span><span class="ident" id="6192769"><a href="/archive/tar/common.go.html#6192700">header</a></span><span class="op" id="6192775">)</span><span class="op" id="6192776">;</span>&nbsp;<span class="ident" id="6192778"><a href="/archive/tar/common.go.html#6192753">i</a></span><span class="op" id="6192779">++</span>&nbsp;<span class="op" id="6192782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192786">if</span>&nbsp;<span class="ident" id="6192789"><a href="/archive/tar/common.go.html#6192753">i</a></span>&nbsp;<span class="op" id="6192791">==</span>&nbsp;<span class="num" id="6192794">148</span>&nbsp;<span class="op" id="6192798">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6192803">//&nbsp;The&nbsp;chksum&nbsp;field&nbsp;(header[148:156])&nbsp;is&nbsp;special:&nbsp;it&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;space&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192893"><a href="/archive/tar/common.go.html#6192716">unsigned</a></span>&nbsp;<span class="op" id="6192902">+=</span>&nbsp;<span class="string" id="6192905">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="6192909">*</span>&nbsp;<span class="num" id="6192911">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192916"><a href="/archive/tar/common.go.html#6192732">signed</a></span>&nbsp;<span class="op" id="6192923">+=</span>&nbsp;<span class="string" id="6192926">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="6192930">*</span>&nbsp;<span class="num" id="6192932">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192937"><a href="/archive/tar/common.go.html#6192753">i</a></span>&nbsp;<span class="op" id="6192939">+=</span>&nbsp;<span class="num" id="6192942">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192947">continue</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192958">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192962"><a href="/archive/tar/common.go.html#6192716">unsigned</a></span>&nbsp;<span class="op" id="6192971">+=</span>&nbsp;<span class="ident" id="6192974">int64</span><span class="op" id="6192979">(</span><span class="ident" id="6192980"><a href="/archive/tar/common.go.html#6192700">header</a></span><span class="op" id="6192986">[</span><span class="ident" id="6192987"><a href="/archive/tar/common.go.html#6192753">i</a></span><span class="op" id="6192988">]</span><span class="op" id="6192989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192993"><a href="/archive/tar/common.go.html#6192732">signed</a></span>&nbsp;<span class="op" id="6193000">+=</span>&nbsp;<span class="ident" id="6193003">int64</span><span class="op" id="6193008">(</span><span class="builtintype" id="6193009">int8</span><span class="op" id="6193013">(</span><span class="ident" id="6193014"><a href="/archive/tar/common.go.html#6192700">header</a></span><span class="op" id="6193020">[</span><span class="ident" id="6193021"><a href="/archive/tar/common.go.html#6192753">i</a></span><span class="op" id="6193022">]</span><span class="op" id="6193023">)</span><span class="op" id="6193024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6193027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193030">return</span><br>
<span class="lineno">275</span><span class="op" id="6193037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6193040">type</span>&nbsp;<span class="ident" id="6193045">slicer</span>&nbsp;<span class="op" id="6193052">[</span><span class="op" id="6193053">]</span><span class="builtintype" id="6193054">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6193060">func</span>&nbsp;<span class="op" id="6193065">(</span><span class="ident" id="6193066">sp</span>&nbsp;<span class="op" id="6193069">*</span><span class="ident" id="6193070"><a href="/archive/tar/common.go.html#6193045">slicer</a></span><span class="op" id="6193076">)</span>&nbsp;<span class="ident" id="6193078">next</span><span class="op" id="6193082">(</span><span class="ident" id="6193083">n</span>&nbsp;<span class="builtintype" id="6193085">int</span><span class="op" id="6193088">)</span>&nbsp;<span class="op" id="6193090">(</span><span class="ident" id="6193091">b</span>&nbsp;<span class="op" id="6193093">[</span><span class="op" id="6193094">]</span><span class="builtintype" id="6193095">byte</span><span class="op" id="6193099">)</span>&nbsp;<span class="op" id="6193101">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6193104">s</span>&nbsp;<span class="op" id="6193106">:=</span>&nbsp;<span class="op" id="6193109">*</span><span class="ident" id="6193110"><a href="/archive/tar/common.go.html#6193066">sp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6193114"><a href="/archive/tar/common.go.html#6193091">b</a></span><span class="op" id="6193115">,</span>&nbsp;<span class="op" id="6193117">*</span><span class="ident" id="6193118"><a href="/archive/tar/common.go.html#6193066">sp</a></span>&nbsp;<span class="op" id="6193121">=</span>&nbsp;<span class="ident" id="6193123"><a href="/archive/tar/common.go.html#6193104">s</a></span><span class="op" id="6193124">[</span><span class="num" id="6193125">0</span><span class="op" id="6193126">:</span><span class="ident" id="6193127"><a href="/archive/tar/common.go.html#6193083">n</a></span><span class="op" id="6193128">]</span><span class="op" id="6193129">,</span>&nbsp;<span class="ident" id="6193131"><a href="/archive/tar/common.go.html#6193104">s</a></span><span class="op" id="6193132">[</span><span class="ident" id="6193133"><a href="/archive/tar/common.go.html#6193083">n</a></span><span class="op" id="6193134">:</span><span class="op" id="6193135">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193138">return</span><br>
<span class="lineno"></span><span class="op" id="6193145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="6193148">func</span>&nbsp;<span class="ident" id="6193153">isASCII</span><span class="op" id="6193160">(</span><span class="ident" id="6193161">s</span>&nbsp;<span class="builtintype" id="6193163">string</span><span class="op" id="6193169">)</span>&nbsp;<span class="builtintype" id="6193171">bool</span>&nbsp;<span class="op" id="6193176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193179">for</span>&nbsp;<span class="ident" id="6193183">_</span><span class="op" id="6193184">,</span>&nbsp;<span class="ident" id="6193186">c</span>&nbsp;<span class="op" id="6193188">:=</span>&nbsp;<span class="keyword" id="6193191">range</span>&nbsp;<span class="ident" id="6193197"><a href="/archive/tar/common.go.html#6193161">s</a></span>&nbsp;<span class="op" id="6193199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193203">if</span>&nbsp;<span class="ident" id="6193206"><a href="/archive/tar/common.go.html#6193186">c</a></span>&nbsp;<span class="op" id="6193208">&gt;=</span>&nbsp;<span class="num" id="6193211">0x80</span>&nbsp;<span class="op" id="6193216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193221">return</span>&nbsp;<span class="builtintype" id="6193228">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6193236">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6193239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193242">return</span>&nbsp;<span class="builtintype" id="6193249">true</span><br>
<span class="lineno"></span><span class="op" id="6193254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6193257">func</span>&nbsp;<span class="ident" id="6193262">toASCII</span><span class="op" id="6193269">(</span><span class="ident" id="6193270">s</span>&nbsp;<span class="builtintype" id="6193272">string</span><span class="op" id="6193278">)</span>&nbsp;<span class="builtintype" id="6193280">string</span>&nbsp;<span class="op" id="6193287">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193290">if</span>&nbsp;<span class="ident" id="6193293"><a href="/archive/tar/common.go.html#6193153">isASCII</a></span><span class="op" id="6193300">(</span><span class="ident" id="6193301"><a href="/archive/tar/common.go.html#6193270">s</a></span><span class="op" id="6193302">)</span>&nbsp;<span class="op" id="6193304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193308">return</span>&nbsp;<span class="ident" id="6193315"><a href="/archive/tar/common.go.html#6193270">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6193318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193321">var</span>&nbsp;<span class="ident" id="6193325">buf</span>&nbsp;<span class="ident" id="6193329"><a href="/archive/tar/common.go.html#6186191">bytes</a></span><span class="op" id="6193334">.</span><span class="ident" id="6193335">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193343">for</span>&nbsp;<span class="ident" id="6193347">_</span><span class="op" id="6193348">,</span>&nbsp;<span class="ident" id="6193350">c</span>&nbsp;<span class="op" id="6193352">:=</span>&nbsp;<span class="keyword" id="6193355">range</span>&nbsp;<span class="ident" id="6193361"><a href="/archive/tar/common.go.html#6193270">s</a></span>&nbsp;<span class="op" id="6193363">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193367">if</span>&nbsp;<span class="ident" id="6193370"><a href="/archive/tar/common.go.html#6193350">c</a></span>&nbsp;<span class="op" id="6193372">&lt;</span>&nbsp;<span class="num" id="6193374">0x80</span>&nbsp;<span class="op" id="6193379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6193384"><a href="/archive/tar/common.go.html#6193325">buf</a></span><span class="op" id="6193387">.</span><span class="ident" id="6193388">WriteByte</span><span class="op" id="6193397">(</span><span class="builtintype" id="6193398">byte</span><span class="op" id="6193402">(</span><span class="ident" id="6193403"><a href="/archive/tar/common.go.html#6193350">c</a></span><span class="op" id="6193404">)</span><span class="op" id="6193405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6193409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6193412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193415">return</span>&nbsp;<span class="ident" id="6193422"><a href="/archive/tar/common.go.html#6193325">buf</a></span><span class="op" id="6193425">.</span><span class="ident" id="6193426">String</span><span class="op" id="6193432">(</span><span class="op" id="6193433">)</span><br>
<span class="lineno">305</span><span class="op" id="6193435">}</span>
</div>
</body>
</html>
