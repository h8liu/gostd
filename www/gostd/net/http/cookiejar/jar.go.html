<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http/cookiejar</h2>
<ul>
<li><a href="/gostd/net/http/cookiejar/jar.go.html" class="current">jar.go</a></li>
<li><a href="/gostd/net/http/cookiejar/jar_test.go.html">jar_test.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode.go.html">punycode.go</a></li>
<li><a href="/gostd/net/http/cookiejar/punycode_test.go.html">punycode_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6047140">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6047195">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6047249">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6047300">//&nbsp;Package&nbsp;cookiejar&nbsp;implements&nbsp;an&nbsp;in-memory&nbsp;RFC&nbsp;6265-compliant&nbsp;http.CookieJar.</span><br>
<span class="lineno"></span><span class="keyword" id="6047380">package</span>&nbsp;<span class="ident" id="6047388">cookiejar</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6047399">import</span>&nbsp;<span class="op" id="6047406">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6047409">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6047419">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6047426">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6047433">&#34;net/http&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6047445">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6047456">&#34;sort&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6047464">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6047475">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6047483">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6047490">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6047493">//&nbsp;PublicSuffixList&nbsp;provides&nbsp;the&nbsp;public&nbsp;suffix&nbsp;of&nbsp;a&nbsp;domain.&nbsp;For&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="6047566">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;public&nbsp;suffix&nbsp;of&nbsp;&#34;example.com&#34;&nbsp;is&nbsp;&#34;com&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6047621">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;public&nbsp;suffix&nbsp;of&nbsp;&#34;foo1.foo2.foo3.co.uk&#34;&nbsp;is&nbsp;&#34;co.uk&#34;,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6047691">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;public&nbsp;suffix&nbsp;of&nbsp;&#34;bar.pvt.k12.ma.us&#34;&nbsp;is&nbsp;&#34;pvt.k12.ma.us&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6047762">//</span><br>
<span class="lineno">25</span><span class="comment" id="6047765">//&nbsp;Implementations&nbsp;of&nbsp;PublicSuffixList&nbsp;must&nbsp;be&nbsp;safe&nbsp;for&nbsp;concurrent&nbsp;use&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="6047839">//&nbsp;multiple&nbsp;goroutines.</span><br>
<span class="lineno"></span><span class="comment" id="6047863">//</span><br>
<span class="lineno"></span><span class="comment" id="6047866">//&nbsp;An&nbsp;implementation&nbsp;that&nbsp;always&nbsp;returns&nbsp;&#34;&#34;&nbsp;is&nbsp;valid&nbsp;and&nbsp;may&nbsp;be&nbsp;useful&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="6047941">//&nbsp;testing&nbsp;but&nbsp;it&nbsp;is&nbsp;not&nbsp;secure:&nbsp;it&nbsp;means&nbsp;that&nbsp;the&nbsp;HTTP&nbsp;server&nbsp;for&nbsp;foo.com&nbsp;can</span><br>
<span class="lineno">30</span><span class="comment" id="6048020">//&nbsp;set&nbsp;a&nbsp;cookie&nbsp;for&nbsp;bar.com.</span><br>
<span class="lineno"></span><span class="comment" id="6048049">//</span><br>
<span class="lineno"></span><span class="comment" id="6048052">//&nbsp;A&nbsp;public&nbsp;suffix&nbsp;list&nbsp;implementation&nbsp;is&nbsp;in&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="6048109">//&nbsp;golang.org/x/net/publicsuffix.</span><br>
<span class="lineno"></span><span class="keyword" id="6048143">type</span>&nbsp;<span class="ident" id="6048148">PublicSuffixList</span>&nbsp;<span class="keyword" id="6048165">interface</span>&nbsp;<span class="op" id="6048175">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048178">//&nbsp;PublicSuffix&nbsp;returns&nbsp;the&nbsp;public&nbsp;suffix&nbsp;of&nbsp;domain.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048232">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048236">//&nbsp;TODO:&nbsp;specify&nbsp;which&nbsp;of&nbsp;the&nbsp;caller&nbsp;and&nbsp;callee&nbsp;is&nbsp;responsible&nbsp;for&nbsp;IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048307">//&nbsp;addresses,&nbsp;for&nbsp;leading&nbsp;and&nbsp;trailing&nbsp;dots,&nbsp;for&nbsp;case&nbsp;sensitivity,&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048379">//&nbsp;for&nbsp;IDN/Punycode.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6048401">PublicSuffix</span><span class="op" id="6048413">(</span><span class="ident" id="6048414">domain</span>&nbsp;<span class="builtintype" id="6048421">string</span><span class="op" id="6048427">)</span>&nbsp;<span class="builtintype" id="6048429">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048438">//&nbsp;String&nbsp;returns&nbsp;a&nbsp;description&nbsp;of&nbsp;the&nbsp;source&nbsp;of&nbsp;this&nbsp;public&nbsp;suffix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048507">//&nbsp;list.&nbsp;The&nbsp;description&nbsp;will&nbsp;typically&nbsp;contain&nbsp;something&nbsp;like&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048578">//&nbsp;stamp&nbsp;or&nbsp;version&nbsp;number.</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6048607">String</span><span class="op" id="6048613">(</span><span class="op" id="6048614">)</span>&nbsp;<span class="builtintype" id="6048616">string</span><br>
<span class="lineno"></span><span class="op" id="6048623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6048626">//&nbsp;Options&nbsp;are&nbsp;the&nbsp;options&nbsp;for&nbsp;creating&nbsp;a&nbsp;new&nbsp;Jar.</span><br>
<span class="lineno"></span><span class="keyword" id="6048677">type</span>&nbsp;<span class="ident" id="6048682">Options</span>&nbsp;<span class="keyword" id="6048690">struct</span>&nbsp;<span class="op" id="6048697">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048700">//&nbsp;PublicSuffixList&nbsp;is&nbsp;the&nbsp;public&nbsp;suffix&nbsp;list&nbsp;that&nbsp;determines&nbsp;whether</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048771">//&nbsp;an&nbsp;HTTP&nbsp;server&nbsp;can&nbsp;set&nbsp;a&nbsp;cookie&nbsp;for&nbsp;a&nbsp;domain.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048821">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048825">//&nbsp;A&nbsp;nil&nbsp;value&nbsp;is&nbsp;valid&nbsp;and&nbsp;may&nbsp;be&nbsp;useful&nbsp;for&nbsp;testing&nbsp;but&nbsp;it&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048894">//&nbsp;secure:&nbsp;it&nbsp;means&nbsp;that&nbsp;the&nbsp;HTTP&nbsp;server&nbsp;for&nbsp;foo.co.uk&nbsp;can&nbsp;set&nbsp;a&nbsp;cookie</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6048967">//&nbsp;for&nbsp;bar.co.uk.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6048986">PublicSuffixList</span>&nbsp;<span class="ident" id="6049003"><a href="/gostd/net/http/cookiejar/jar.go.html#6048148">PublicSuffixList</a></span><br>
<span class="lineno"></span><span class="op" id="6049020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6049023">//&nbsp;Jar&nbsp;implements&nbsp;the&nbsp;http.CookieJar&nbsp;interface&nbsp;from&nbsp;the&nbsp;net/http&nbsp;package.</span><br>
<span class="lineno">60</span><span class="keyword" id="6049097">type</span>&nbsp;<span class="ident" id="6049102">Jar</span>&nbsp;<span class="keyword" id="6049106">struct</span>&nbsp;<span class="op" id="6049113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049116">psList</span>&nbsp;<span class="ident" id="6049123"><a href="/gostd/net/http/cookiejar/jar.go.html#6048148">PublicSuffixList</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6049142">//&nbsp;mu&nbsp;locks&nbsp;the&nbsp;remaining&nbsp;fields.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049177">mu</span>&nbsp;<span class="ident" id="6049180"><a href="/gostd/net/http/cookiejar/jar.go.html#6047475">sync</a></span><span class="op" id="6049184">.</span><span class="ident" id="6049185"><a href="/gostd/sync/mutex.go.html#1443974">Mutex</a></span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6049193">//&nbsp;entries&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;entries,&nbsp;keyed&nbsp;by&nbsp;their&nbsp;eTLD+1&nbsp;and&nbsp;subkeyed&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6049264">//&nbsp;their&nbsp;name/domain/path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049292">entries</span>&nbsp;<span class="keyword" id="6049300">map</span><span class="op" id="6049303">[</span><span class="builtintype" id="6049304">string</span><span class="op" id="6049310">]</span><span class="keyword" id="6049311">map</span><span class="op" id="6049314">[</span><span class="builtintype" id="6049315">string</span><span class="op" id="6049321">]</span><span class="ident" id="6049322"><a href="/gostd/net/http/cookiejar/jar.go.html#6049874">entry</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6049330">//&nbsp;nextSeqNum&nbsp;is&nbsp;the&nbsp;next&nbsp;sequence&nbsp;number&nbsp;assigned&nbsp;to&nbsp;a&nbsp;new&nbsp;cookie</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6049398">//&nbsp;created&nbsp;SetCookies.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049422">nextSeqNum</span>&nbsp;<span class="builtintype" id="6049433">uint64</span><br>
<span class="lineno"></span><span class="op" id="6049440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="6049443">//&nbsp;New&nbsp;returns&nbsp;a&nbsp;new&nbsp;cookie&nbsp;jar.&nbsp;A&nbsp;nil&nbsp;*Options&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;a&nbsp;zero</span><br>
<span class="lineno"></span><span class="comment" id="6049515">//&nbsp;Options.</span><br>
<span class="lineno"></span><span class="keyword" id="6049527">func</span>&nbsp;<span class="ident" id="6049532">New</span><span class="op" id="6049535">(</span><span class="ident" id="6049536">o</span>&nbsp;<span class="op" id="6049538">*</span><span class="ident" id="6049539"><a href="/gostd/net/http/cookiejar/jar.go.html#6048682">Options</a></span><span class="op" id="6049546">)</span>&nbsp;<span class="op" id="6049548">(</span><span class="op" id="6049549">*</span><span class="ident" id="6049550"><a href="/gostd/net/http/cookiejar/jar.go.html#6049102">Jar</a></span><span class="op" id="6049553">,</span>&nbsp;<span class="builtintype" id="6049555">error</span><span class="op" id="6049560">)</span>&nbsp;<span class="op" id="6049562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049565">jar</span>&nbsp;<span class="op" id="6049569">:=</span>&nbsp;<span class="op" id="6049572">&amp;</span><span class="ident" id="6049573"><a href="/gostd/net/http/cookiejar/jar.go.html#6049102">Jar</a></span><span class="op" id="6049576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049580"><a href="/gostd/net/http/cookiejar/jar.go.html#6049292">entries</a></span><span class="op" id="6049587">:</span>&nbsp;<span class="builtinfunc" id="6049589">make</span><span class="op" id="6049593">(</span><span class="keyword" id="6049594">map</span><span class="op" id="6049597">[</span><span class="builtintype" id="6049598">string</span><span class="op" id="6049604">]</span><span class="keyword" id="6049605">map</span><span class="op" id="6049608">[</span><span class="builtintype" id="6049609">string</span><span class="op" id="6049615">]</span><span class="ident" id="6049616"><a href="/gostd/net/http/cookiejar/jar.go.html#6049874">entry</a></span><span class="op" id="6049621">)</span><span class="op" id="6049622">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6049625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6049628">if</span>&nbsp;<span class="ident" id="6049631"><a href="/gostd/net/http/cookiejar/jar.go.html#6049536">o</a></span>&nbsp;<span class="op" id="6049633">!=</span>&nbsp;<span class="builtintype" id="6049636">nil</span>&nbsp;<span class="op" id="6049640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049644"><a href="/gostd/net/http/cookiejar/jar.go.html#6049565">jar</a></span><span class="op" id="6049647">.</span><span class="ident" id="6049648"><a href="/gostd/net/http/cookiejar/jar.go.html#6049116">psList</a></span>&nbsp;<span class="op" id="6049655">=</span>&nbsp;<span class="ident" id="6049657"><a href="/gostd/net/http/cookiejar/jar.go.html#6049536">o</a></span><span class="op" id="6049658">.</span><span class="ident" id="6049659"><a href="/gostd/net/http/cookiejar/jar.go.html#6048986">PublicSuffixList</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6049677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6049680">return</span>&nbsp;<span class="ident" id="6049687"><a href="/gostd/net/http/cookiejar/jar.go.html#6049565">jar</a></span><span class="op" id="6049690">,</span>&nbsp;<span class="builtintype" id="6049692">nil</span><br>
<span class="lineno">85</span><span class="op" id="6049696">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6049699">//&nbsp;entry&nbsp;is&nbsp;the&nbsp;internal&nbsp;representation&nbsp;of&nbsp;a&nbsp;cookie.</span><br>
<span class="lineno"></span><span class="comment" id="6049752">//</span><br>
<span class="lineno"></span><span class="comment" id="6049755">//&nbsp;This&nbsp;struct&nbsp;type&nbsp;is&nbsp;not&nbsp;used&nbsp;outside&nbsp;of&nbsp;this&nbsp;package&nbsp;per&nbsp;se,&nbsp;but&nbsp;the&nbsp;exported</span><br>
<span class="lineno">90</span><span class="comment" id="6049836">//&nbsp;fields&nbsp;are&nbsp;those&nbsp;of&nbsp;RFC&nbsp;6265.</span><br>
<span class="lineno"></span><span class="keyword" id="6049869">type</span>&nbsp;<span class="ident" id="6049874">entry</span>&nbsp;<span class="keyword" id="6049880">struct</span>&nbsp;<span class="op" id="6049887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049890">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6049901">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049909">Value</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6049920">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049928">Domain</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6049939">string</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049947">Path</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6049958">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049966">Secure</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6049977">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6049983">HttpOnly</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6049994">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6050000">Persistent</span>&nbsp;<span class="builtintype" id="6050011">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6050017">HostOnly</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6050028">bool</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6050034">Expires</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6050045"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6050049">.</span><span class="ident" id="6050050"><a href="/gostd/time/time.go.html#2722087">Time</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6050056">Creation</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6050067"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6050071">.</span><span class="ident" id="6050072"><a href="/gostd/time/time.go.html#2722087">Time</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6050078">LastAccess</span>&nbsp;<span class="ident" id="6050089"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6050093">.</span><span class="ident" id="6050094"><a href="/gostd/time/time.go.html#2722087">Time</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6050101">//&nbsp;seqNum&nbsp;is&nbsp;a&nbsp;sequence&nbsp;number&nbsp;so&nbsp;that&nbsp;Cookies&nbsp;returns&nbsp;cookies&nbsp;in&nbsp;a</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6050170">//&nbsp;deterministic&nbsp;order,&nbsp;even&nbsp;for&nbsp;cookies&nbsp;that&nbsp;have&nbsp;equal&nbsp;Path&nbsp;length&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6050244">//&nbsp;equal&nbsp;Creation&nbsp;time.&nbsp;This&nbsp;simplifies&nbsp;testing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6050294">seqNum</span>&nbsp;<span class="builtintype" id="6050301">uint64</span><br>
<span class="lineno"></span><span class="op" id="6050308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="6050311">//&nbsp;Id&nbsp;returns&nbsp;the&nbsp;domain;path;name&nbsp;triple&nbsp;of&nbsp;e&nbsp;as&nbsp;an&nbsp;id.</span><br>
<span class="lineno"></span><span class="keyword" id="6050368">func</span>&nbsp;<span class="op" id="6050373">(</span><span class="ident" id="6050374">e</span>&nbsp;<span class="op" id="6050376">*</span><span class="ident" id="6050377"><a href="/gostd/net/http/cookiejar/jar.go.html#6049874">entry</a></span><span class="op" id="6050382">)</span>&nbsp;<span class="ident" id="6050384">id</span><span class="op" id="6050386">(</span><span class="op" id="6050387">)</span>&nbsp;<span class="builtintype" id="6050389">string</span>&nbsp;<span class="op" id="6050396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6050399">return</span>&nbsp;<span class="ident" id="6050406"><a href="/gostd/net/http/cookiejar/jar.go.html#6047419">fmt</a></span><span class="op" id="6050409">.</span><span class="ident" id="6050410"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="6050417">(</span><span class="string" id="6050418">&#34;%s;%s;%s&#34;</span><span class="op" id="6050428">,</span>&nbsp;<span class="ident" id="6050430"><a href="/gostd/net/http/cookiejar/jar.go.html#6050374">e</a></span><span class="op" id="6050431">.</span><span class="ident" id="6050432"><a href="/gostd/net/http/cookiejar/jar.go.html#6049928">Domain</a></span><span class="op" id="6050438">,</span>&nbsp;<span class="ident" id="6050440"><a href="/gostd/net/http/cookiejar/jar.go.html#6050374">e</a></span><span class="op" id="6050441">.</span><span class="ident" id="6050442"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span><span class="op" id="6050446">,</span>&nbsp;<span class="ident" id="6050448"><a href="/gostd/net/http/cookiejar/jar.go.html#6050374">e</a></span><span class="op" id="6050449">.</span><span class="ident" id="6050450"><a href="/gostd/net/http/cookiejar/jar.go.html#6049890">Name</a></span><span class="op" id="6050454">)</span><br>
<span class="lineno"></span><span class="op" id="6050456">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="6050459">//&nbsp;shouldSend&nbsp;determines&nbsp;whether&nbsp;e&#39;s&nbsp;cookie&nbsp;qualifies&nbsp;to&nbsp;be&nbsp;included&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6050533">//&nbsp;request&nbsp;to&nbsp;host/path.&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6050608">//&nbsp;cookie&nbsp;is&nbsp;expired.</span><br>
<span class="lineno"></span><span class="keyword" id="6050630">func</span>&nbsp;<span class="op" id="6050635">(</span><span class="ident" id="6050636">e</span>&nbsp;<span class="op" id="6050638">*</span><span class="ident" id="6050639"><a href="/gostd/net/http/cookiejar/jar.go.html#6049874">entry</a></span><span class="op" id="6050644">)</span>&nbsp;<span class="ident" id="6050646">shouldSend</span><span class="op" id="6050656">(</span><span class="ident" id="6050657">https</span>&nbsp;<span class="builtintype" id="6050663">bool</span><span class="op" id="6050667">,</span>&nbsp;<span class="ident" id="6050669">host</span><span class="op" id="6050673">,</span>&nbsp;<span class="ident" id="6050675">path</span>&nbsp;<span class="builtintype" id="6050680">string</span><span class="op" id="6050686">)</span>&nbsp;<span class="builtintype" id="6050688">bool</span>&nbsp;<span class="op" id="6050693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6050696">return</span>&nbsp;<span class="ident" id="6050703"><a href="/gostd/net/http/cookiejar/jar.go.html#6050636">e</a></span><span class="op" id="6050704">.</span><span class="ident" id="6050705"><a href="/gostd/net/http/cookiejar/jar.go.html#6050855">domainMatch</a></span><span class="op" id="6050716">(</span><span class="ident" id="6050717"><a href="/gostd/net/http/cookiejar/jar.go.html#6050669">host</a></span><span class="op" id="6050721">)</span>&nbsp;<span class="op" id="6050723">&amp;&amp;</span>&nbsp;<span class="ident" id="6050726"><a href="/gostd/net/http/cookiejar/jar.go.html#6050636">e</a></span><span class="op" id="6050727">.</span><span class="ident" id="6050728"><a href="/gostd/net/http/cookiejar/jar.go.html#6051072">pathMatch</a></span><span class="op" id="6050737">(</span><span class="ident" id="6050738"><a href="/gostd/net/http/cookiejar/jar.go.html#6050675">path</a></span><span class="op" id="6050742">)</span>&nbsp;<span class="op" id="6050744">&amp;&amp;</span>&nbsp;<span class="op" id="6050747">(</span><span class="ident" id="6050748"><a href="/gostd/net/http/cookiejar/jar.go.html#6050657">https</a></span>&nbsp;<span class="op" id="6050754">||</span>&nbsp;<span class="op" id="6050757">!</span><span class="ident" id="6050758"><a href="/gostd/net/http/cookiejar/jar.go.html#6050636">e</a></span><span class="op" id="6050759">.</span><span class="ident" id="6050760"><a href="/gostd/net/http/cookiejar/jar.go.html#6049966">Secure</a></span><span class="op" id="6050766">)</span><br>
<span class="lineno">120</span><span class="op" id="6050768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6050771">//&nbsp;domainMatch&nbsp;implements&nbsp;&#34;domain-match&#34;&nbsp;of&nbsp;RFC&nbsp;6265&nbsp;section&nbsp;5.1.3.</span><br>
<span class="lineno"></span><span class="keyword" id="6050839">func</span>&nbsp;<span class="op" id="6050844">(</span><span class="ident" id="6050845">e</span>&nbsp;<span class="op" id="6050847">*</span><span class="ident" id="6050848"><a href="/gostd/net/http/cookiejar/jar.go.html#6049874">entry</a></span><span class="op" id="6050853">)</span>&nbsp;<span class="ident" id="6050855">domainMatch</span><span class="op" id="6050866">(</span><span class="ident" id="6050867">host</span>&nbsp;<span class="builtintype" id="6050872">string</span><span class="op" id="6050878">)</span>&nbsp;<span class="builtintype" id="6050880">bool</span>&nbsp;<span class="op" id="6050885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6050888">if</span>&nbsp;<span class="ident" id="6050891"><a href="/gostd/net/http/cookiejar/jar.go.html#6050845">e</a></span><span class="op" id="6050892">.</span><span class="ident" id="6050893"><a href="/gostd/net/http/cookiejar/jar.go.html#6049928">Domain</a></span>&nbsp;<span class="op" id="6050900">==</span>&nbsp;<span class="ident" id="6050903"><a href="/gostd/net/http/cookiejar/jar.go.html#6050867">host</a></span>&nbsp;<span class="op" id="6050908">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6050912">return</span>&nbsp;<span class="builtintype" id="6050919">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6050925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6050928">return</span>&nbsp;<span class="op" id="6050935">!</span><span class="ident" id="6050936"><a href="/gostd/net/http/cookiejar/jar.go.html#6050845">e</a></span><span class="op" id="6050937">.</span><span class="ident" id="6050938"><a href="/gostd/net/http/cookiejar/jar.go.html#6050017">HostOnly</a></span>&nbsp;<span class="op" id="6050947">&amp;&amp;</span>&nbsp;<span class="ident" id="6050950"><a href="/gostd/net/http/cookiejar/jar.go.html#6051475">hasDotSuffix</a></span><span class="op" id="6050962">(</span><span class="ident" id="6050963"><a href="/gostd/net/http/cookiejar/jar.go.html#6050867">host</a></span><span class="op" id="6050967">,</span>&nbsp;<span class="ident" id="6050969"><a href="/gostd/net/http/cookiejar/jar.go.html#6050845">e</a></span><span class="op" id="6050970">.</span><span class="ident" id="6050971"><a href="/gostd/net/http/cookiejar/jar.go.html#6049928">Domain</a></span><span class="op" id="6050977">)</span><br>
<span class="lineno"></span><span class="op" id="6050979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="6050982">//&nbsp;pathMatch&nbsp;implements&nbsp;&#34;path-match&#34;&nbsp;according&nbsp;to&nbsp;RFC&nbsp;6265&nbsp;section&nbsp;5.1.4.</span><br>
<span class="lineno"></span><span class="keyword" id="6051056">func</span>&nbsp;<span class="op" id="6051061">(</span><span class="ident" id="6051062">e</span>&nbsp;<span class="op" id="6051064">*</span><span class="ident" id="6051065"><a href="/gostd/net/http/cookiejar/jar.go.html#6049874">entry</a></span><span class="op" id="6051070">)</span>&nbsp;<span class="ident" id="6051072">pathMatch</span><span class="op" id="6051081">(</span><span class="ident" id="6051082">requestPath</span>&nbsp;<span class="builtintype" id="6051094">string</span><span class="op" id="6051100">)</span>&nbsp;<span class="builtintype" id="6051102">bool</span>&nbsp;<span class="op" id="6051107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051110">if</span>&nbsp;<span class="ident" id="6051113"><a href="/gostd/net/http/cookiejar/jar.go.html#6051082">requestPath</a></span>&nbsp;<span class="op" id="6051125">==</span>&nbsp;<span class="ident" id="6051128"><a href="/gostd/net/http/cookiejar/jar.go.html#6051062">e</a></span><span class="op" id="6051129">.</span><span class="ident" id="6051130"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span>&nbsp;<span class="op" id="6051135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051139">return</span>&nbsp;<span class="builtintype" id="6051146">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6051152">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051155">if</span>&nbsp;<span class="ident" id="6051158"><a href="/gostd/net/http/cookiejar/jar.go.html#6047464">strings</a></span><span class="op" id="6051165">.</span><span class="ident" id="6051166"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="6051175">(</span><span class="ident" id="6051176"><a href="/gostd/net/http/cookiejar/jar.go.html#6051082">requestPath</a></span><span class="op" id="6051187">,</span>&nbsp;<span class="ident" id="6051189"><a href="/gostd/net/http/cookiejar/jar.go.html#6051062">e</a></span><span class="op" id="6051190">.</span><span class="ident" id="6051191"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span><span class="op" id="6051195">)</span>&nbsp;<span class="op" id="6051197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051201">if</span>&nbsp;<span class="ident" id="6051204"><a href="/gostd/net/http/cookiejar/jar.go.html#6051062">e</a></span><span class="op" id="6051205">.</span><span class="ident" id="6051206"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span><span class="op" id="6051210">[</span><span class="builtinfunc" id="6051211">len</span><span class="op" id="6051214">(</span><span class="ident" id="6051215"><a href="/gostd/net/http/cookiejar/jar.go.html#6051062">e</a></span><span class="op" id="6051216">.</span><span class="ident" id="6051217"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span><span class="op" id="6051221">)</span><span class="op" id="6051222">-</span><span class="num" id="6051223">1</span><span class="op" id="6051224">]</span>&nbsp;<span class="op" id="6051226">==</span>&nbsp;<span class="string" id="6051229">&#39;/&#39;</span>&nbsp;<span class="op" id="6051233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051238">return</span>&nbsp;<span class="builtintype" id="6051245">true</span>&nbsp;<span class="comment" id="6051250">//&nbsp;The&nbsp;&#34;/any/&#34;&nbsp;matches&nbsp;&#34;/any/path&#34;&nbsp;case.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6051293">}</span>&nbsp;<span class="keyword" id="6051295">else</span>&nbsp;<span class="keyword" id="6051300">if</span>&nbsp;<span class="ident" id="6051303"><a href="/gostd/net/http/cookiejar/jar.go.html#6051082">requestPath</a></span><span class="op" id="6051314">[</span><span class="builtinfunc" id="6051315">len</span><span class="op" id="6051318">(</span><span class="ident" id="6051319"><a href="/gostd/net/http/cookiejar/jar.go.html#6051062">e</a></span><span class="op" id="6051320">.</span><span class="ident" id="6051321"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span><span class="op" id="6051325">)</span><span class="op" id="6051326">]</span>&nbsp;<span class="op" id="6051328">==</span>&nbsp;<span class="string" id="6051331">&#39;/&#39;</span>&nbsp;<span class="op" id="6051335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051340">return</span>&nbsp;<span class="builtintype" id="6051347">true</span>&nbsp;<span class="comment" id="6051352">//&nbsp;The&nbsp;&#34;/any&#34;&nbsp;matches&nbsp;&#34;/any/path&#34;&nbsp;case.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6051394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6051397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051400">return</span>&nbsp;<span class="builtintype" id="6051407">false</span><br>
<span class="lineno"></span><span class="op" id="6051413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="6051416">//&nbsp;hasDotSuffix&nbsp;reports&nbsp;whether&nbsp;s&nbsp;ends&nbsp;in&nbsp;&#34;.&#34;+suffix.</span><br>
<span class="lineno"></span><span class="keyword" id="6051470">func</span>&nbsp;<span class="ident" id="6051475">hasDotSuffix</span><span class="op" id="6051487">(</span><span class="ident" id="6051488">s</span><span class="op" id="6051489">,</span>&nbsp;<span class="ident" id="6051491">suffix</span>&nbsp;<span class="builtintype" id="6051498">string</span><span class="op" id="6051504">)</span>&nbsp;<span class="builtintype" id="6051506">bool</span>&nbsp;<span class="op" id="6051511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051514">return</span>&nbsp;<span class="builtinfunc" id="6051521">len</span><span class="op" id="6051524">(</span><span class="ident" id="6051525"><a href="/gostd/net/http/cookiejar/jar.go.html#6051488">s</a></span><span class="op" id="6051526">)</span>&nbsp;<span class="op" id="6051528">&gt;</span>&nbsp;<span class="builtinfunc" id="6051530">len</span><span class="op" id="6051533">(</span><span class="ident" id="6051534"><a href="/gostd/net/http/cookiejar/jar.go.html#6051491">suffix</a></span><span class="op" id="6051540">)</span>&nbsp;<span class="op" id="6051542">&amp;&amp;</span>&nbsp;<span class="ident" id="6051545"><a href="/gostd/net/http/cookiejar/jar.go.html#6051488">s</a></span><span class="op" id="6051546">[</span><span class="builtinfunc" id="6051547">len</span><span class="op" id="6051550">(</span><span class="ident" id="6051551"><a href="/gostd/net/http/cookiejar/jar.go.html#6051488">s</a></span><span class="op" id="6051552">)</span><span class="op" id="6051553">-</span><span class="builtinfunc" id="6051554">len</span><span class="op" id="6051557">(</span><span class="ident" id="6051558"><a href="/gostd/net/http/cookiejar/jar.go.html#6051491">suffix</a></span><span class="op" id="6051564">)</span><span class="op" id="6051565">-</span><span class="num" id="6051566">1</span><span class="op" id="6051567">]</span>&nbsp;<span class="op" id="6051569">==</span>&nbsp;<span class="string" id="6051572">&#39;.&#39;</span>&nbsp;<span class="op" id="6051576">&amp;&amp;</span>&nbsp;<span class="ident" id="6051579"><a href="/gostd/net/http/cookiejar/jar.go.html#6051488">s</a></span><span class="op" id="6051580">[</span><span class="builtinfunc" id="6051581">len</span><span class="op" id="6051584">(</span><span class="ident" id="6051585"><a href="/gostd/net/http/cookiejar/jar.go.html#6051488">s</a></span><span class="op" id="6051586">)</span><span class="op" id="6051587">-</span><span class="builtinfunc" id="6051588">len</span><span class="op" id="6051591">(</span><span class="ident" id="6051592"><a href="/gostd/net/http/cookiejar/jar.go.html#6051491">suffix</a></span><span class="op" id="6051598">)</span><span class="op" id="6051599">:</span><span class="op" id="6051600">]</span>&nbsp;<span class="op" id="6051602">==</span>&nbsp;<span class="ident" id="6051605"><a href="/gostd/net/http/cookiejar/jar.go.html#6051491">suffix</a></span><br>
<span class="lineno"></span><span class="op" id="6051612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="6051615">//&nbsp;byPathLength&nbsp;is&nbsp;a&nbsp;[]entry&nbsp;sort.Interface&nbsp;that&nbsp;sorts&nbsp;according&nbsp;to&nbsp;RFC&nbsp;6265</span><br>
<span class="lineno"></span><span class="comment" id="6051692">//&nbsp;section&nbsp;5.4&nbsp;point&nbsp;2:&nbsp;by&nbsp;longest&nbsp;path&nbsp;and&nbsp;then&nbsp;by&nbsp;earliest&nbsp;creation&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="6051768">type</span>&nbsp;<span class="ident" id="6051773">byPathLength</span>&nbsp;<span class="op" id="6051786">[</span><span class="op" id="6051787">]</span><span class="ident" id="6051788"><a href="/gostd/net/http/cookiejar/jar.go.html#6049874">entry</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6051795">func</span>&nbsp;<span class="op" id="6051800">(</span><span class="ident" id="6051801">s</span>&nbsp;<span class="ident" id="6051803"><a href="/gostd/net/http/cookiejar/jar.go.html#6051773">byPathLength</a></span><span class="op" id="6051815">)</span>&nbsp;<span class="ident" id="6051817">Len</span><span class="op" id="6051820">(</span><span class="op" id="6051821">)</span>&nbsp;<span class="builtintype" id="6051823">int</span>&nbsp;<span class="op" id="6051827">{</span>&nbsp;<span class="keyword" id="6051829">return</span>&nbsp;<span class="builtinfunc" id="6051836">len</span><span class="op" id="6051839">(</span><span class="ident" id="6051840"><a href="/gostd/net/http/cookiejar/jar.go.html#6051801">s</a></span><span class="op" id="6051841">)</span>&nbsp;<span class="op" id="6051843">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="6051846">func</span>&nbsp;<span class="op" id="6051851">(</span><span class="ident" id="6051852">s</span>&nbsp;<span class="ident" id="6051854"><a href="/gostd/net/http/cookiejar/jar.go.html#6051773">byPathLength</a></span><span class="op" id="6051866">)</span>&nbsp;<span class="ident" id="6051868">Less</span><span class="op" id="6051872">(</span><span class="ident" id="6051873">i</span><span class="op" id="6051874">,</span>&nbsp;<span class="ident" id="6051876">j</span>&nbsp;<span class="builtintype" id="6051878">int</span><span class="op" id="6051881">)</span>&nbsp;<span class="builtintype" id="6051883">bool</span>&nbsp;<span class="op" id="6051888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051891">if</span>&nbsp;<span class="builtinfunc" id="6051894">len</span><span class="op" id="6051897">(</span><span class="ident" id="6051898"><a href="/gostd/net/http/cookiejar/jar.go.html#6051852">s</a></span><span class="op" id="6051899">[</span><span class="ident" id="6051900"><a href="/gostd/net/http/cookiejar/jar.go.html#6051873">i</a></span><span class="op" id="6051901">]</span><span class="op" id="6051902">.</span><span class="ident" id="6051903"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span><span class="op" id="6051907">)</span>&nbsp;<span class="op" id="6051909">!=</span>&nbsp;<span class="builtinfunc" id="6051912">len</span><span class="op" id="6051915">(</span><span class="ident" id="6051916"><a href="/gostd/net/http/cookiejar/jar.go.html#6051852">s</a></span><span class="op" id="6051917">[</span><span class="ident" id="6051918"><a href="/gostd/net/http/cookiejar/jar.go.html#6051876">j</a></span><span class="op" id="6051919">]</span><span class="op" id="6051920">.</span><span class="ident" id="6051921"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span><span class="op" id="6051925">)</span>&nbsp;<span class="op" id="6051927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051931">return</span>&nbsp;<span class="builtinfunc" id="6051938">len</span><span class="op" id="6051941">(</span><span class="ident" id="6051942"><a href="/gostd/net/http/cookiejar/jar.go.html#6051852">s</a></span><span class="op" id="6051943">[</span><span class="ident" id="6051944"><a href="/gostd/net/http/cookiejar/jar.go.html#6051873">i</a></span><span class="op" id="6051945">]</span><span class="op" id="6051946">.</span><span class="ident" id="6051947"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span><span class="op" id="6051951">)</span>&nbsp;<span class="op" id="6051953">&gt;</span>&nbsp;<span class="builtinfunc" id="6051955">len</span><span class="op" id="6051958">(</span><span class="ident" id="6051959"><a href="/gostd/net/http/cookiejar/jar.go.html#6051852">s</a></span><span class="op" id="6051960">[</span><span class="ident" id="6051961"><a href="/gostd/net/http/cookiejar/jar.go.html#6051876">j</a></span><span class="op" id="6051962">]</span><span class="op" id="6051963">.</span><span class="ident" id="6051964"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span><span class="op" id="6051968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6051971">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6051974">if</span>&nbsp;<span class="op" id="6051977">!</span><span class="ident" id="6051978"><a href="/gostd/net/http/cookiejar/jar.go.html#6051852">s</a></span><span class="op" id="6051979">[</span><span class="ident" id="6051980"><a href="/gostd/net/http/cookiejar/jar.go.html#6051873">i</a></span><span class="op" id="6051981">]</span><span class="op" id="6051982">.</span><span class="ident" id="6051983"><a href="/gostd/net/http/cookiejar/jar.go.html#6050056">Creation</a></span><span class="op" id="6051991">.</span><span class="ident" id="6051992"><a href="/gostd/time/time.go.html#2723199">Equal</a></span><span class="op" id="6051997">(</span><span class="ident" id="6051998"><a href="/gostd/net/http/cookiejar/jar.go.html#6051852">s</a></span><span class="op" id="6051999">[</span><span class="ident" id="6052000"><a href="/gostd/net/http/cookiejar/jar.go.html#6051876">j</a></span><span class="op" id="6052001">]</span><span class="op" id="6052002">.</span><span class="ident" id="6052003"><a href="/gostd/net/http/cookiejar/jar.go.html#6050056">Creation</a></span><span class="op" id="6052011">)</span>&nbsp;<span class="op" id="6052013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052017">return</span>&nbsp;<span class="ident" id="6052024"><a href="/gostd/net/http/cookiejar/jar.go.html#6051852">s</a></span><span class="op" id="6052025">[</span><span class="ident" id="6052026"><a href="/gostd/net/http/cookiejar/jar.go.html#6051873">i</a></span><span class="op" id="6052027">]</span><span class="op" id="6052028">.</span><span class="ident" id="6052029"><a href="/gostd/net/http/cookiejar/jar.go.html#6050056">Creation</a></span><span class="op" id="6052037">.</span><span class="ident" id="6052038"><a href="/gostd/time/time.go.html#2722823">Before</a></span><span class="op" id="6052044">(</span><span class="ident" id="6052045"><a href="/gostd/net/http/cookiejar/jar.go.html#6051852">s</a></span><span class="op" id="6052046">[</span><span class="ident" id="6052047"><a href="/gostd/net/http/cookiejar/jar.go.html#6051876">j</a></span><span class="op" id="6052048">]</span><span class="op" id="6052049">.</span><span class="ident" id="6052050"><a href="/gostd/net/http/cookiejar/jar.go.html#6050056">Creation</a></span><span class="op" id="6052058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6052061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052064">return</span>&nbsp;<span class="ident" id="6052071"><a href="/gostd/net/http/cookiejar/jar.go.html#6051852">s</a></span><span class="op" id="6052072">[</span><span class="ident" id="6052073"><a href="/gostd/net/http/cookiejar/jar.go.html#6051873">i</a></span><span class="op" id="6052074">]</span><span class="op" id="6052075">.</span><span class="ident" id="6052076"><a href="/gostd/net/http/cookiejar/jar.go.html#6050294">seqNum</a></span>&nbsp;<span class="op" id="6052083">&lt;</span>&nbsp;<span class="ident" id="6052085"><a href="/gostd/net/http/cookiejar/jar.go.html#6051852">s</a></span><span class="op" id="6052086">[</span><span class="ident" id="6052087"><a href="/gostd/net/http/cookiejar/jar.go.html#6051876">j</a></span><span class="op" id="6052088">]</span><span class="op" id="6052089">.</span><span class="ident" id="6052090"><a href="/gostd/net/http/cookiejar/jar.go.html#6050294">seqNum</a></span><br>
<span class="lineno"></span><span class="op" id="6052097">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="6052100">func</span>&nbsp;<span class="op" id="6052105">(</span><span class="ident" id="6052106">s</span>&nbsp;<span class="ident" id="6052108"><a href="/gostd/net/http/cookiejar/jar.go.html#6051773">byPathLength</a></span><span class="op" id="6052120">)</span>&nbsp;<span class="ident" id="6052122">Swap</span><span class="op" id="6052126">(</span><span class="ident" id="6052127">i</span><span class="op" id="6052128">,</span>&nbsp;<span class="ident" id="6052130">j</span>&nbsp;<span class="builtintype" id="6052132">int</span><span class="op" id="6052135">)</span>&nbsp;<span class="op" id="6052137">{</span>&nbsp;<span class="ident" id="6052139"><a href="/gostd/net/http/cookiejar/jar.go.html#6052106">s</a></span><span class="op" id="6052140">[</span><span class="ident" id="6052141"><a href="/gostd/net/http/cookiejar/jar.go.html#6052127">i</a></span><span class="op" id="6052142">]</span><span class="op" id="6052143">,</span>&nbsp;<span class="ident" id="6052145"><a href="/gostd/net/http/cookiejar/jar.go.html#6052106">s</a></span><span class="op" id="6052146">[</span><span class="ident" id="6052147"><a href="/gostd/net/http/cookiejar/jar.go.html#6052130">j</a></span><span class="op" id="6052148">]</span>&nbsp;<span class="op" id="6052150">=</span>&nbsp;<span class="ident" id="6052152"><a href="/gostd/net/http/cookiejar/jar.go.html#6052106">s</a></span><span class="op" id="6052153">[</span><span class="ident" id="6052154"><a href="/gostd/net/http/cookiejar/jar.go.html#6052130">j</a></span><span class="op" id="6052155">]</span><span class="op" id="6052156">,</span>&nbsp;<span class="ident" id="6052158"><a href="/gostd/net/http/cookiejar/jar.go.html#6052106">s</a></span><span class="op" id="6052159">[</span><span class="ident" id="6052160"><a href="/gostd/net/http/cookiejar/jar.go.html#6052127">i</a></span><span class="op" id="6052161">]</span>&nbsp;<span class="op" id="6052163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6052166">//&nbsp;Cookies&nbsp;implements&nbsp;the&nbsp;Cookies&nbsp;method&nbsp;of&nbsp;the&nbsp;http.CookieJar&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="6052240">//</span><br>
<span class="lineno">170</span><span class="comment" id="6052243">//&nbsp;It&nbsp;returns&nbsp;an&nbsp;empty&nbsp;slice&nbsp;if&nbsp;the&nbsp;URL&#39;s&nbsp;scheme&nbsp;is&nbsp;not&nbsp;HTTP&nbsp;or&nbsp;HTTPS.</span><br>
<span class="lineno"></span><span class="keyword" id="6052314">func</span>&nbsp;<span class="op" id="6052319">(</span><span class="ident" id="6052320">j</span>&nbsp;<span class="op" id="6052322">*</span><span class="ident" id="6052323"><a href="/gostd/net/http/cookiejar/jar.go.html#6049102">Jar</a></span><span class="op" id="6052326">)</span>&nbsp;<span class="ident" id="6052328">Cookies</span><span class="op" id="6052335">(</span><span class="ident" id="6052336">u</span>&nbsp;<span class="op" id="6052338">*</span><span class="ident" id="6052339"><a href="/gostd/net/http/cookiejar/jar.go.html#6047445">url</a></span><span class="op" id="6052342">.</span><span class="ident" id="6052343"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="6052346">)</span>&nbsp;<span class="op" id="6052348">(</span><span class="ident" id="6052349">cookies</span>&nbsp;<span class="op" id="6052357">[</span><span class="op" id="6052358">]</span><span class="op" id="6052359">*</span><span class="ident" id="6052360"><a href="/gostd/net/http/cookiejar/jar.go.html#6047433">http</a></span><span class="op" id="6052364">.</span><span class="ident" id="6052365"><a href="/gostd/net/http/cookie.go.html#4095997">Cookie</a></span><span class="op" id="6052371">)</span>&nbsp;<span class="op" id="6052373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052376">return</span>&nbsp;<span class="ident" id="6052383"><a href="/gostd/net/http/cookiejar/jar.go.html#6052320">j</a></span><span class="op" id="6052384">.</span><span class="ident" id="6052385"><a href="/gostd/net/http/cookiejar/jar.go.html#6052495">cookies</a></span><span class="op" id="6052392">(</span><span class="ident" id="6052393"><a href="/gostd/net/http/cookiejar/jar.go.html#6052336">u</a></span><span class="op" id="6052394">,</span>&nbsp;<span class="ident" id="6052396"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6052400">.</span><span class="ident" id="6052401"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6052404">(</span><span class="op" id="6052405">)</span><span class="op" id="6052406">)</span><br>
<span class="lineno"></span><span class="op" id="6052408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="comment" id="6052411">//&nbsp;cookies&nbsp;is&nbsp;like&nbsp;Cookies&nbsp;but&nbsp;takes&nbsp;the&nbsp;current&nbsp;time&nbsp;as&nbsp;a&nbsp;parameter.</span><br>
<span class="lineno"></span><span class="keyword" id="6052481">func</span>&nbsp;<span class="op" id="6052486">(</span><span class="ident" id="6052487">j</span>&nbsp;<span class="op" id="6052489">*</span><span class="ident" id="6052490"><a href="/gostd/net/http/cookiejar/jar.go.html#6049102">Jar</a></span><span class="op" id="6052493">)</span>&nbsp;<span class="ident" id="6052495">cookies</span><span class="op" id="6052502">(</span><span class="ident" id="6052503">u</span>&nbsp;<span class="op" id="6052505">*</span><span class="ident" id="6052506"><a href="/gostd/net/http/cookiejar/jar.go.html#6047445">url</a></span><span class="op" id="6052509">.</span><span class="ident" id="6052510"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="6052513">,</span>&nbsp;<span class="ident" id="6052515">now</span>&nbsp;<span class="ident" id="6052519"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6052523">.</span><span class="ident" id="6052524"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="6052528">)</span>&nbsp;<span class="op" id="6052530">(</span><span class="ident" id="6052531">cookies</span>&nbsp;<span class="op" id="6052539">[</span><span class="op" id="6052540">]</span><span class="op" id="6052541">*</span><span class="ident" id="6052542"><a href="/gostd/net/http/cookiejar/jar.go.html#6047433">http</a></span><span class="op" id="6052546">.</span><span class="ident" id="6052547"><a href="/gostd/net/http/cookie.go.html#4095997">Cookie</a></span><span class="op" id="6052553">)</span>&nbsp;<span class="op" id="6052555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052558">if</span>&nbsp;<span class="ident" id="6052561"><a href="/gostd/net/http/cookiejar/jar.go.html#6052503">u</a></span><span class="op" id="6052562">.</span><span class="ident" id="6052563"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="6052570">!=</span>&nbsp;<span class="string" id="6052573">&#34;http&#34;</span>&nbsp;<span class="op" id="6052580">&amp;&amp;</span>&nbsp;<span class="ident" id="6052583"><a href="/gostd/net/http/cookiejar/jar.go.html#6052503">u</a></span><span class="op" id="6052584">.</span><span class="ident" id="6052585"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="6052592">!=</span>&nbsp;<span class="string" id="6052595">&#34;https&#34;</span>&nbsp;<span class="op" id="6052603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052607">return</span>&nbsp;<span class="ident" id="6052614"><a href="/gostd/net/http/cookiejar/jar.go.html#6052531">cookies</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6052623">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6052626">host</span><span class="op" id="6052630">,</span>&nbsp;<span class="ident" id="6052632">err</span>&nbsp;<span class="op" id="6052636">:=</span>&nbsp;<span class="ident" id="6052639"><a href="/gostd/net/http/cookiejar/jar.go.html#6054992">canonicalHost</a></span><span class="op" id="6052652">(</span><span class="ident" id="6052653"><a href="/gostd/net/http/cookiejar/jar.go.html#6052503">u</a></span><span class="op" id="6052654">.</span><span class="ident" id="6052655"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="6052659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052662">if</span>&nbsp;<span class="ident" id="6052665"><a href="/gostd/net/http/cookiejar/jar.go.html#6052632">err</a></span>&nbsp;<span class="op" id="6052669">!=</span>&nbsp;<span class="builtintype" id="6052672">nil</span>&nbsp;<span class="op" id="6052676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052680">return</span>&nbsp;<span class="ident" id="6052687"><a href="/gostd/net/http/cookiejar/jar.go.html#6052531">cookies</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6052696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6052699">key</span>&nbsp;<span class="op" id="6052703">:=</span>&nbsp;<span class="ident" id="6052706"><a href="/gostd/net/http/cookiejar/jar.go.html#6055695">jarKey</a></span><span class="op" id="6052712">(</span><span class="ident" id="6052713"><a href="/gostd/net/http/cookiejar/jar.go.html#6052626">host</a></span><span class="op" id="6052717">,</span>&nbsp;<span class="ident" id="6052719"><a href="/gostd/net/http/cookiejar/jar.go.html#6052487">j</a></span><span class="op" id="6052720">.</span><span class="ident" id="6052721"><a href="/gostd/net/http/cookiejar/jar.go.html#6049116">psList</a></span><span class="op" id="6052727">)</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6052731"><a href="/gostd/net/http/cookiejar/jar.go.html#6052487">j</a></span><span class="op" id="6052732">.</span><span class="ident" id="6052733"><a href="/gostd/net/http/cookiejar/jar.go.html#6049177">mu</a></span><span class="op" id="6052735">.</span><span class="ident" id="6052736"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="6052740">(</span><span class="op" id="6052741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052744">defer</span>&nbsp;<span class="ident" id="6052750"><a href="/gostd/net/http/cookiejar/jar.go.html#6052487">j</a></span><span class="op" id="6052751">.</span><span class="ident" id="6052752"><a href="/gostd/net/http/cookiejar/jar.go.html#6049177">mu</a></span><span class="op" id="6052754">.</span><span class="ident" id="6052755"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="6052761">(</span><span class="op" id="6052762">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6052766">submap</span>&nbsp;<span class="op" id="6052773">:=</span>&nbsp;<span class="ident" id="6052776"><a href="/gostd/net/http/cookiejar/jar.go.html#6052487">j</a></span><span class="op" id="6052777">.</span><span class="ident" id="6052778"><a href="/gostd/net/http/cookiejar/jar.go.html#6049292">entries</a></span><span class="op" id="6052785">[</span><span class="ident" id="6052786"><a href="/gostd/net/http/cookiejar/jar.go.html#6052699">key</a></span><span class="op" id="6052789">]</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052792">if</span>&nbsp;<span class="ident" id="6052795"><a href="/gostd/net/http/cookiejar/jar.go.html#6052766">submap</a></span>&nbsp;<span class="op" id="6052802">==</span>&nbsp;<span class="builtintype" id="6052805">nil</span>&nbsp;<span class="op" id="6052809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052813">return</span>&nbsp;<span class="ident" id="6052820"><a href="/gostd/net/http/cookiejar/jar.go.html#6052531">cookies</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6052829">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6052833">https</span>&nbsp;<span class="op" id="6052839">:=</span>&nbsp;<span class="ident" id="6052842"><a href="/gostd/net/http/cookiejar/jar.go.html#6052503">u</a></span><span class="op" id="6052843">.</span><span class="ident" id="6052844"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="6052851">==</span>&nbsp;<span class="string" id="6052854">&#34;https&#34;</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6052863">path</span>&nbsp;<span class="op" id="6052868">:=</span>&nbsp;<span class="ident" id="6052871"><a href="/gostd/net/http/cookiejar/jar.go.html#6052503">u</a></span><span class="op" id="6052872">.</span><span class="ident" id="6052873"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052879">if</span>&nbsp;<span class="ident" id="6052882"><a href="/gostd/net/http/cookiejar/jar.go.html#6052863">path</a></span>&nbsp;<span class="op" id="6052887">==</span>&nbsp;<span class="string" id="6052890">&#34;&#34;</span>&nbsp;<span class="op" id="6052893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6052897"><a href="/gostd/net/http/cookiejar/jar.go.html#6052863">path</a></span>&nbsp;<span class="op" id="6052902">=</span>&nbsp;<span class="string" id="6052904">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6052909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6052913">modified</span>&nbsp;<span class="op" id="6052922">:=</span>&nbsp;<span class="builtintype" id="6052925">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052932">var</span>&nbsp;<span class="ident" id="6052936">selected</span>&nbsp;<span class="op" id="6052945">[</span><span class="op" id="6052946">]</span><span class="ident" id="6052947"><a href="/gostd/net/http/cookiejar/jar.go.html#6049874">entry</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052954">for</span>&nbsp;<span class="ident" id="6052958">id</span><span class="op" id="6052960">,</span>&nbsp;<span class="ident" id="6052962">e</span>&nbsp;<span class="op" id="6052964">:=</span>&nbsp;<span class="keyword" id="6052967">range</span>&nbsp;<span class="ident" id="6052973"><a href="/gostd/net/http/cookiejar/jar.go.html#6052766">submap</a></span>&nbsp;<span class="op" id="6052980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6052984">if</span>&nbsp;<span class="ident" id="6052987"><a href="/gostd/net/http/cookiejar/jar.go.html#6052962">e</a></span><span class="op" id="6052988">.</span><span class="ident" id="6052989"><a href="/gostd/net/http/cookiejar/jar.go.html#6050000">Persistent</a></span>&nbsp;<span class="op" id="6053000">&amp;&amp;</span>&nbsp;<span class="op" id="6053003">!</span><span class="ident" id="6053004"><a href="/gostd/net/http/cookiejar/jar.go.html#6052962">e</a></span><span class="op" id="6053005">.</span><span class="ident" id="6053006"><a href="/gostd/net/http/cookiejar/jar.go.html#6050034">Expires</a></span><span class="op" id="6053013">.</span><span class="ident" id="6053014"><a href="/gostd/time/time.go.html#2722668">After</a></span><span class="op" id="6053019">(</span><span class="ident" id="6053020"><a href="/gostd/net/http/cookiejar/jar.go.html#6052515">now</a></span><span class="op" id="6053023">)</span>&nbsp;<span class="op" id="6053025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6053030">delete</span><span class="op" id="6053036">(</span><span class="ident" id="6053037"><a href="/gostd/net/http/cookiejar/jar.go.html#6052766">submap</a></span><span class="op" id="6053043">,</span>&nbsp;<span class="ident" id="6053045"><a href="/gostd/net/http/cookiejar/jar.go.html#6052958">id</a></span><span class="op" id="6053047">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6053052"><a href="/gostd/net/http/cookiejar/jar.go.html#6052913">modified</a></span>&nbsp;<span class="op" id="6053061">=</span>&nbsp;<span class="builtintype" id="6053063">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053071">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6053082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053086">if</span>&nbsp;<span class="op" id="6053089">!</span><span class="ident" id="6053090"><a href="/gostd/net/http/cookiejar/jar.go.html#6052962">e</a></span><span class="op" id="6053091">.</span><span class="ident" id="6053092"><a href="/gostd/net/http/cookiejar/jar.go.html#6050646">shouldSend</a></span><span class="op" id="6053102">(</span><span class="ident" id="6053103"><a href="/gostd/net/http/cookiejar/jar.go.html#6052833">https</a></span><span class="op" id="6053108">,</span>&nbsp;<span class="ident" id="6053110"><a href="/gostd/net/http/cookiejar/jar.go.html#6052626">host</a></span><span class="op" id="6053114">,</span>&nbsp;<span class="ident" id="6053116"><a href="/gostd/net/http/cookiejar/jar.go.html#6052863">path</a></span><span class="op" id="6053120">)</span>&nbsp;<span class="op" id="6053122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053127">continue</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6053138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6053142"><a href="/gostd/net/http/cookiejar/jar.go.html#6052962">e</a></span><span class="op" id="6053143">.</span><span class="ident" id="6053144"><a href="/gostd/net/http/cookiejar/jar.go.html#6050078">LastAccess</a></span>&nbsp;<span class="op" id="6053155">=</span>&nbsp;<span class="ident" id="6053157"><a href="/gostd/net/http/cookiejar/jar.go.html#6052515">now</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6053163"><a href="/gostd/net/http/cookiejar/jar.go.html#6052766">submap</a></span><span class="op" id="6053169">[</span><span class="ident" id="6053170"><a href="/gostd/net/http/cookiejar/jar.go.html#6052958">id</a></span><span class="op" id="6053172">]</span>&nbsp;<span class="op" id="6053174">=</span>&nbsp;<span class="ident" id="6053176"><a href="/gostd/net/http/cookiejar/jar.go.html#6052962">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6053180"><a href="/gostd/net/http/cookiejar/jar.go.html#6052936">selected</a></span>&nbsp;<span class="op" id="6053189">=</span>&nbsp;<span class="builtinfunc" id="6053191">append</span><span class="op" id="6053197">(</span><span class="ident" id="6053198"><a href="/gostd/net/http/cookiejar/jar.go.html#6052936">selected</a></span><span class="op" id="6053206">,</span>&nbsp;<span class="ident" id="6053208"><a href="/gostd/net/http/cookiejar/jar.go.html#6052962">e</a></span><span class="op" id="6053209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6053213"><a href="/gostd/net/http/cookiejar/jar.go.html#6052913">modified</a></span>&nbsp;<span class="op" id="6053222">=</span>&nbsp;<span class="builtintype" id="6053224">true</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6053230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053233">if</span>&nbsp;<span class="ident" id="6053236"><a href="/gostd/net/http/cookiejar/jar.go.html#6052913">modified</a></span>&nbsp;<span class="op" id="6053245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053249">if</span>&nbsp;<span class="builtinfunc" id="6053252">len</span><span class="op" id="6053255">(</span><span class="ident" id="6053256"><a href="/gostd/net/http/cookiejar/jar.go.html#6052766">submap</a></span><span class="op" id="6053262">)</span>&nbsp;<span class="op" id="6053264">==</span>&nbsp;<span class="num" id="6053267">0</span>&nbsp;<span class="op" id="6053269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6053274">delete</span><span class="op" id="6053280">(</span><span class="ident" id="6053281"><a href="/gostd/net/http/cookiejar/jar.go.html#6052487">j</a></span><span class="op" id="6053282">.</span><span class="ident" id="6053283"><a href="/gostd/net/http/cookiejar/jar.go.html#6049292">entries</a></span><span class="op" id="6053290">,</span>&nbsp;<span class="ident" id="6053292"><a href="/gostd/net/http/cookiejar/jar.go.html#6052699">key</a></span><span class="op" id="6053295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6053299">}</span>&nbsp;<span class="keyword" id="6053301">else</span>&nbsp;<span class="op" id="6053306">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6053311"><a href="/gostd/net/http/cookiejar/jar.go.html#6052487">j</a></span><span class="op" id="6053312">.</span><span class="ident" id="6053313"><a href="/gostd/net/http/cookiejar/jar.go.html#6049292">entries</a></span><span class="op" id="6053320">[</span><span class="ident" id="6053321"><a href="/gostd/net/http/cookiejar/jar.go.html#6052699">key</a></span><span class="op" id="6053324">]</span>&nbsp;<span class="op" id="6053326">=</span>&nbsp;<span class="ident" id="6053328"><a href="/gostd/net/http/cookiejar/jar.go.html#6052766">submap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6053337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6053340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6053344"><a href="/gostd/net/http/cookiejar/jar.go.html#6047456">sort</a></span><span class="op" id="6053348">.</span><span class="ident" id="6053349"><a href="/gostd/sort/sort.go.html#2015380">Sort</a></span><span class="op" id="6053353">(</span><span class="ident" id="6053354"><a href="/gostd/net/http/cookiejar/jar.go.html#6051773">byPathLength</a></span><span class="op" id="6053366">(</span><span class="ident" id="6053367"><a href="/gostd/net/http/cookiejar/jar.go.html#6052936">selected</a></span><span class="op" id="6053375">)</span><span class="op" id="6053376">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053379">for</span>&nbsp;<span class="ident" id="6053383">_</span><span class="op" id="6053384">,</span>&nbsp;<span class="ident" id="6053386">e</span>&nbsp;<span class="op" id="6053388">:=</span>&nbsp;<span class="keyword" id="6053391">range</span>&nbsp;<span class="ident" id="6053397"><a href="/gostd/net/http/cookiejar/jar.go.html#6052936">selected</a></span>&nbsp;<span class="op" id="6053406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6053410"><a href="/gostd/net/http/cookiejar/jar.go.html#6052531">cookies</a></span>&nbsp;<span class="op" id="6053418">=</span>&nbsp;<span class="builtinfunc" id="6053420">append</span><span class="op" id="6053426">(</span><span class="ident" id="6053427"><a href="/gostd/net/http/cookiejar/jar.go.html#6052531">cookies</a></span><span class="op" id="6053434">,</span>&nbsp;<span class="op" id="6053436">&amp;</span><span class="ident" id="6053437"><a href="/gostd/net/http/cookiejar/jar.go.html#6047433">http</a></span><span class="op" id="6053441">.</span><span class="ident" id="6053442"><a href="/gostd/net/http/cookie.go.html#4095997">Cookie</a></span><span class="op" id="6053448">{</span><span class="ident" id="6053449"><a href="/gostd/net/http/cookie.go.html#4096014">Name</a></span><span class="op" id="6053453">:</span>&nbsp;<span class="ident" id="6053455"><a href="/gostd/net/http/cookiejar/jar.go.html#6053386">e</a></span><span class="op" id="6053456">.</span><span class="ident" id="6053457"><a href="/gostd/net/http/cookiejar/jar.go.html#6049890">Name</a></span><span class="op" id="6053461">,</span>&nbsp;<span class="ident" id="6053463"><a href="/gostd/net/http/cookie.go.html#4096033">Value</a></span><span class="op" id="6053468">:</span>&nbsp;<span class="ident" id="6053470"><a href="/gostd/net/http/cookiejar/jar.go.html#6053386">e</a></span><span class="op" id="6053471">.</span><span class="ident" id="6053472"><a href="/gostd/net/http/cookiejar/jar.go.html#6049909">Value</a></span><span class="op" id="6053477">}</span><span class="op" id="6053478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6053481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053485">return</span>&nbsp;<span class="ident" id="6053492"><a href="/gostd/net/http/cookiejar/jar.go.html#6052531">cookies</a></span><br>
<span class="lineno">230</span><span class="op" id="6053500">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6053503">//&nbsp;SetCookies&nbsp;implements&nbsp;the&nbsp;SetCookies&nbsp;method&nbsp;of&nbsp;the&nbsp;http.CookieJar&nbsp;interface.</span><br>
<span class="lineno"></span><span class="comment" id="6053583">//</span><br>
<span class="lineno"></span><span class="comment" id="6053586">//&nbsp;It&nbsp;does&nbsp;nothing&nbsp;if&nbsp;the&nbsp;URL&#39;s&nbsp;scheme&nbsp;is&nbsp;not&nbsp;HTTP&nbsp;or&nbsp;HTTPS.</span><br>
<span class="lineno">235</span><span class="keyword" id="6053647">func</span>&nbsp;<span class="op" id="6053652">(</span><span class="ident" id="6053653">j</span>&nbsp;<span class="op" id="6053655">*</span><span class="ident" id="6053656"><a href="/gostd/net/http/cookiejar/jar.go.html#6049102">Jar</a></span><span class="op" id="6053659">)</span>&nbsp;<span class="ident" id="6053661">SetCookies</span><span class="op" id="6053671">(</span><span class="ident" id="6053672">u</span>&nbsp;<span class="op" id="6053674">*</span><span class="ident" id="6053675"><a href="/gostd/net/http/cookiejar/jar.go.html#6047445">url</a></span><span class="op" id="6053678">.</span><span class="ident" id="6053679"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="6053682">,</span>&nbsp;<span class="ident" id="6053684">cookies</span>&nbsp;<span class="op" id="6053692">[</span><span class="op" id="6053693">]</span><span class="op" id="6053694">*</span><span class="ident" id="6053695"><a href="/gostd/net/http/cookiejar/jar.go.html#6047433">http</a></span><span class="op" id="6053699">.</span><span class="ident" id="6053700"><a href="/gostd/net/http/cookie.go.html#4095997">Cookie</a></span><span class="op" id="6053706">)</span>&nbsp;<span class="op" id="6053708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6053711"><a href="/gostd/net/http/cookiejar/jar.go.html#6053653">j</a></span><span class="op" id="6053712">.</span><span class="ident" id="6053713"><a href="/gostd/net/http/cookiejar/jar.go.html#6053839">setCookies</a></span><span class="op" id="6053723">(</span><span class="ident" id="6053724"><a href="/gostd/net/http/cookiejar/jar.go.html#6053672">u</a></span><span class="op" id="6053725">,</span>&nbsp;<span class="ident" id="6053727"><a href="/gostd/net/http/cookiejar/jar.go.html#6053684">cookies</a></span><span class="op" id="6053734">,</span>&nbsp;<span class="ident" id="6053736"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6053740">.</span><span class="ident" id="6053741"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6053744">(</span><span class="op" id="6053745">)</span><span class="op" id="6053746">)</span><br>
<span class="lineno"></span><span class="op" id="6053748">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6053751">//&nbsp;setCookies&nbsp;is&nbsp;like&nbsp;SetCookies&nbsp;but&nbsp;takes&nbsp;the&nbsp;current&nbsp;time&nbsp;as&nbsp;parameter.</span><br>
<span class="lineno">240</span><span class="keyword" id="6053825">func</span>&nbsp;<span class="op" id="6053830">(</span><span class="ident" id="6053831">j</span>&nbsp;<span class="op" id="6053833">*</span><span class="ident" id="6053834"><a href="/gostd/net/http/cookiejar/jar.go.html#6049102">Jar</a></span><span class="op" id="6053837">)</span>&nbsp;<span class="ident" id="6053839">setCookies</span><span class="op" id="6053849">(</span><span class="ident" id="6053850">u</span>&nbsp;<span class="op" id="6053852">*</span><span class="ident" id="6053853"><a href="/gostd/net/http/cookiejar/jar.go.html#6047445">url</a></span><span class="op" id="6053856">.</span><span class="ident" id="6053857"><a href="/gostd/net/url/url.go.html#3751194">URL</a></span><span class="op" id="6053860">,</span>&nbsp;<span class="ident" id="6053862">cookies</span>&nbsp;<span class="op" id="6053870">[</span><span class="op" id="6053871">]</span><span class="op" id="6053872">*</span><span class="ident" id="6053873"><a href="/gostd/net/http/cookiejar/jar.go.html#6047433">http</a></span><span class="op" id="6053877">.</span><span class="ident" id="6053878"><a href="/gostd/net/http/cookie.go.html#4095997">Cookie</a></span><span class="op" id="6053884">,</span>&nbsp;<span class="ident" id="6053886">now</span>&nbsp;<span class="ident" id="6053890"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6053894">.</span><span class="ident" id="6053895"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="6053899">)</span>&nbsp;<span class="op" id="6053901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053904">if</span>&nbsp;<span class="builtinfunc" id="6053907">len</span><span class="op" id="6053910">(</span><span class="ident" id="6053911"><a href="/gostd/net/http/cookiejar/jar.go.html#6053862">cookies</a></span><span class="op" id="6053918">)</span>&nbsp;<span class="op" id="6053920">==</span>&nbsp;<span class="num" id="6053923">0</span>&nbsp;<span class="op" id="6053925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053929">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6053937">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053940">if</span>&nbsp;<span class="ident" id="6053943"><a href="/gostd/net/http/cookiejar/jar.go.html#6053850">u</a></span><span class="op" id="6053944">.</span><span class="ident" id="6053945"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="6053952">!=</span>&nbsp;<span class="string" id="6053955">&#34;http&#34;</span>&nbsp;<span class="op" id="6053962">&amp;&amp;</span>&nbsp;<span class="ident" id="6053965"><a href="/gostd/net/http/cookiejar/jar.go.html#6053850">u</a></span><span class="op" id="6053966">.</span><span class="ident" id="6053967"><a href="/gostd/net/url/url.go.html#3751208">Scheme</a></span>&nbsp;<span class="op" id="6053974">!=</span>&nbsp;<span class="string" id="6053977">&#34;https&#34;</span>&nbsp;<span class="op" id="6053985">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6053989">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6053997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054000">host</span><span class="op" id="6054004">,</span>&nbsp;<span class="ident" id="6054006">err</span>&nbsp;<span class="op" id="6054010">:=</span>&nbsp;<span class="ident" id="6054013"><a href="/gostd/net/http/cookiejar/jar.go.html#6054992">canonicalHost</a></span><span class="op" id="6054026">(</span><span class="ident" id="6054027"><a href="/gostd/net/http/cookiejar/jar.go.html#6053850">u</a></span><span class="op" id="6054028">.</span><span class="ident" id="6054029"><a href="/gostd/net/url/url.go.html#3751325">Host</a></span><span class="op" id="6054033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054036">if</span>&nbsp;<span class="ident" id="6054039"><a href="/gostd/net/http/cookiejar/jar.go.html#6054006">err</a></span>&nbsp;<span class="op" id="6054043">!=</span>&nbsp;<span class="builtintype" id="6054046">nil</span>&nbsp;<span class="op" id="6054050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054054">return</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054065">key</span>&nbsp;<span class="op" id="6054069">:=</span>&nbsp;<span class="ident" id="6054072"><a href="/gostd/net/http/cookiejar/jar.go.html#6055695">jarKey</a></span><span class="op" id="6054078">(</span><span class="ident" id="6054079"><a href="/gostd/net/http/cookiejar/jar.go.html#6054000">host</a></span><span class="op" id="6054083">,</span>&nbsp;<span class="ident" id="6054085"><a href="/gostd/net/http/cookiejar/jar.go.html#6053831">j</a></span><span class="op" id="6054086">.</span><span class="ident" id="6054087"><a href="/gostd/net/http/cookiejar/jar.go.html#6049116">psList</a></span><span class="op" id="6054093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054096">defPath</span>&nbsp;<span class="op" id="6054104">:=</span>&nbsp;<span class="ident" id="6054107"><a href="/gostd/net/http/cookiejar/jar.go.html#6056447">defaultPath</a></span><span class="op" id="6054118">(</span><span class="ident" id="6054119"><a href="/gostd/net/http/cookiejar/jar.go.html#6053850">u</a></span><span class="op" id="6054120">.</span><span class="ident" id="6054121"><a href="/gostd/net/url/url.go.html#3751366">Path</a></span><span class="op" id="6054125">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054129"><a href="/gostd/net/http/cookiejar/jar.go.html#6053831">j</a></span><span class="op" id="6054130">.</span><span class="ident" id="6054131"><a href="/gostd/net/http/cookiejar/jar.go.html#6049177">mu</a></span><span class="op" id="6054133">.</span><span class="ident" id="6054134"><a href="/gostd/sync/mutex.go.html#1444351">Lock</a></span><span class="op" id="6054138">(</span><span class="op" id="6054139">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054142">defer</span>&nbsp;<span class="ident" id="6054148"><a href="/gostd/net/http/cookiejar/jar.go.html#6053831">j</a></span><span class="op" id="6054149">.</span><span class="ident" id="6054150"><a href="/gostd/net/http/cookiejar/jar.go.html#6049177">mu</a></span><span class="op" id="6054152">.</span><span class="ident" id="6054153"><a href="/gostd/sync/mutex.go.html#1445283">Unlock</a></span><span class="op" id="6054159">(</span><span class="op" id="6054160">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054164">submap</span>&nbsp;<span class="op" id="6054171">:=</span>&nbsp;<span class="ident" id="6054174"><a href="/gostd/net/http/cookiejar/jar.go.html#6053831">j</a></span><span class="op" id="6054175">.</span><span class="ident" id="6054176"><a href="/gostd/net/http/cookiejar/jar.go.html#6049292">entries</a></span><span class="op" id="6054183">[</span><span class="ident" id="6054184"><a href="/gostd/net/http/cookiejar/jar.go.html#6054065">key</a></span><span class="op" id="6054187">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054191">modified</span>&nbsp;<span class="op" id="6054200">:=</span>&nbsp;<span class="builtintype" id="6054203">false</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054210">for</span>&nbsp;<span class="ident" id="6054214">_</span><span class="op" id="6054215">,</span>&nbsp;<span class="ident" id="6054217">cookie</span>&nbsp;<span class="op" id="6054224">:=</span>&nbsp;<span class="keyword" id="6054227">range</span>&nbsp;<span class="ident" id="6054233"><a href="/gostd/net/http/cookiejar/jar.go.html#6053862">cookies</a></span>&nbsp;<span class="op" id="6054241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054245">e</span><span class="op" id="6054246">,</span>&nbsp;<span class="ident" id="6054248">remove</span><span class="op" id="6054254">,</span>&nbsp;<span class="ident" id="6054256">err</span>&nbsp;<span class="op" id="6054260">:=</span>&nbsp;<span class="ident" id="6054263"><a href="/gostd/net/http/cookiejar/jar.go.html#6053831">j</a></span><span class="op" id="6054264">.</span><span class="ident" id="6054265"><a href="/gostd/net/http/cookiejar/jar.go.html#6057305">newEntry</a></span><span class="op" id="6054273">(</span><span class="ident" id="6054274"><a href="/gostd/net/http/cookiejar/jar.go.html#6054217">cookie</a></span><span class="op" id="6054280">,</span>&nbsp;<span class="ident" id="6054282"><a href="/gostd/net/http/cookiejar/jar.go.html#6053886">now</a></span><span class="op" id="6054285">,</span>&nbsp;<span class="ident" id="6054287"><a href="/gostd/net/http/cookiejar/jar.go.html#6054096">defPath</a></span><span class="op" id="6054294">,</span>&nbsp;<span class="ident" id="6054296"><a href="/gostd/net/http/cookiejar/jar.go.html#6054000">host</a></span><span class="op" id="6054300">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054304">if</span>&nbsp;<span class="ident" id="6054307"><a href="/gostd/net/http/cookiejar/jar.go.html#6054256">err</a></span>&nbsp;<span class="op" id="6054311">!=</span>&nbsp;<span class="builtintype" id="6054314">nil</span>&nbsp;<span class="op" id="6054318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054323">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054334">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054338">id</span>&nbsp;<span class="op" id="6054341">:=</span>&nbsp;<span class="ident" id="6054344"><a href="/gostd/net/http/cookiejar/jar.go.html#6054245">e</a></span><span class="op" id="6054345">.</span><span class="ident" id="6054346"><a href="/gostd/net/http/cookiejar/jar.go.html#6050384">id</a></span><span class="op" id="6054348">(</span><span class="op" id="6054349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054353">if</span>&nbsp;<span class="ident" id="6054356"><a href="/gostd/net/http/cookiejar/jar.go.html#6054248">remove</a></span>&nbsp;<span class="op" id="6054363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054368">if</span>&nbsp;<span class="ident" id="6054371"><a href="/gostd/net/http/cookiejar/jar.go.html#6054164">submap</a></span>&nbsp;<span class="op" id="6054378">!=</span>&nbsp;<span class="builtintype" id="6054381">nil</span>&nbsp;<span class="op" id="6054385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054391">if</span>&nbsp;<span class="ident" id="6054394">_</span><span class="op" id="6054395">,</span>&nbsp;<span class="ident" id="6054397">ok</span>&nbsp;<span class="op" id="6054400">:=</span>&nbsp;<span class="ident" id="6054403"><a href="/gostd/net/http/cookiejar/jar.go.html#6054164">submap</a></span><span class="op" id="6054409">[</span><span class="ident" id="6054410"><a href="/gostd/net/http/cookiejar/jar.go.html#6054338">id</a></span><span class="op" id="6054412">]</span><span class="op" id="6054413">;</span>&nbsp;<span class="ident" id="6054415"><a href="/gostd/net/http/cookiejar/jar.go.html#6054397">ok</a></span>&nbsp;<span class="op" id="6054418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6054425">delete</span><span class="op" id="6054431">(</span><span class="ident" id="6054432"><a href="/gostd/net/http/cookiejar/jar.go.html#6054164">submap</a></span><span class="op" id="6054438">,</span>&nbsp;<span class="ident" id="6054440"><a href="/gostd/net/http/cookiejar/jar.go.html#6054338">id</a></span><span class="op" id="6054442">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054449"><a href="/gostd/net/http/cookiejar/jar.go.html#6054191">modified</a></span>&nbsp;<span class="op" id="6054458">=</span>&nbsp;<span class="builtintype" id="6054460">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054479">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054490">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054494">if</span>&nbsp;<span class="ident" id="6054497"><a href="/gostd/net/http/cookiejar/jar.go.html#6054164">submap</a></span>&nbsp;<span class="op" id="6054504">==</span>&nbsp;<span class="builtintype" id="6054507">nil</span>&nbsp;<span class="op" id="6054511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054516"><a href="/gostd/net/http/cookiejar/jar.go.html#6054164">submap</a></span>&nbsp;<span class="op" id="6054523">=</span>&nbsp;<span class="builtinfunc" id="6054525">make</span><span class="op" id="6054529">(</span><span class="keyword" id="6054530">map</span><span class="op" id="6054533">[</span><span class="builtintype" id="6054534">string</span><span class="op" id="6054540">]</span><span class="ident" id="6054541"><a href="/gostd/net/http/cookiejar/jar.go.html#6049874">entry</a></span><span class="op" id="6054546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054555">if</span>&nbsp;<span class="ident" id="6054558">old</span><span class="op" id="6054561">,</span>&nbsp;<span class="ident" id="6054563">ok</span>&nbsp;<span class="op" id="6054566">:=</span>&nbsp;<span class="ident" id="6054569"><a href="/gostd/net/http/cookiejar/jar.go.html#6054164">submap</a></span><span class="op" id="6054575">[</span><span class="ident" id="6054576"><a href="/gostd/net/http/cookiejar/jar.go.html#6054338">id</a></span><span class="op" id="6054578">]</span><span class="op" id="6054579">;</span>&nbsp;<span class="ident" id="6054581"><a href="/gostd/net/http/cookiejar/jar.go.html#6054563">ok</a></span>&nbsp;<span class="op" id="6054584">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054589"><a href="/gostd/net/http/cookiejar/jar.go.html#6054245">e</a></span><span class="op" id="6054590">.</span><span class="ident" id="6054591"><a href="/gostd/net/http/cookiejar/jar.go.html#6050056">Creation</a></span>&nbsp;<span class="op" id="6054600">=</span>&nbsp;<span class="ident" id="6054602"><a href="/gostd/net/http/cookiejar/jar.go.html#6054558">old</a></span><span class="op" id="6054605">.</span><span class="ident" id="6054606"><a href="/gostd/net/http/cookiejar/jar.go.html#6050056">Creation</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054618"><a href="/gostd/net/http/cookiejar/jar.go.html#6054245">e</a></span><span class="op" id="6054619">.</span><span class="ident" id="6054620"><a href="/gostd/net/http/cookiejar/jar.go.html#6050294">seqNum</a></span>&nbsp;<span class="op" id="6054627">=</span>&nbsp;<span class="ident" id="6054629"><a href="/gostd/net/http/cookiejar/jar.go.html#6054558">old</a></span><span class="op" id="6054632">.</span><span class="ident" id="6054633"><a href="/gostd/net/http/cookiejar/jar.go.html#6050294">seqNum</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054642">}</span>&nbsp;<span class="keyword" id="6054644">else</span>&nbsp;<span class="op" id="6054649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054654"><a href="/gostd/net/http/cookiejar/jar.go.html#6054245">e</a></span><span class="op" id="6054655">.</span><span class="ident" id="6054656"><a href="/gostd/net/http/cookiejar/jar.go.html#6050056">Creation</a></span>&nbsp;<span class="op" id="6054665">=</span>&nbsp;<span class="ident" id="6054667"><a href="/gostd/net/http/cookiejar/jar.go.html#6053886">now</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054674"><a href="/gostd/net/http/cookiejar/jar.go.html#6054245">e</a></span><span class="op" id="6054675">.</span><span class="ident" id="6054676"><a href="/gostd/net/http/cookiejar/jar.go.html#6050294">seqNum</a></span>&nbsp;<span class="op" id="6054683">=</span>&nbsp;<span class="ident" id="6054685"><a href="/gostd/net/http/cookiejar/jar.go.html#6053831">j</a></span><span class="op" id="6054686">.</span><span class="ident" id="6054687"><a href="/gostd/net/http/cookiejar/jar.go.html#6049422">nextSeqNum</a></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054701"><a href="/gostd/net/http/cookiejar/jar.go.html#6053831">j</a></span><span class="op" id="6054702">.</span><span class="ident" id="6054703"><a href="/gostd/net/http/cookiejar/jar.go.html#6049422">nextSeqNum</a></span><span class="op" id="6054713">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054722"><a href="/gostd/net/http/cookiejar/jar.go.html#6054245">e</a></span><span class="op" id="6054723">.</span><span class="ident" id="6054724"><a href="/gostd/net/http/cookiejar/jar.go.html#6050078">LastAccess</a></span>&nbsp;<span class="op" id="6054735">=</span>&nbsp;<span class="ident" id="6054737"><a href="/gostd/net/http/cookiejar/jar.go.html#6053886">now</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054743"><a href="/gostd/net/http/cookiejar/jar.go.html#6054164">submap</a></span><span class="op" id="6054749">[</span><span class="ident" id="6054750"><a href="/gostd/net/http/cookiejar/jar.go.html#6054338">id</a></span><span class="op" id="6054752">]</span>&nbsp;<span class="op" id="6054754">=</span>&nbsp;<span class="ident" id="6054756"><a href="/gostd/net/http/cookiejar/jar.go.html#6054245">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054760"><a href="/gostd/net/http/cookiejar/jar.go.html#6054191">modified</a></span>&nbsp;<span class="op" id="6054769">=</span>&nbsp;<span class="builtintype" id="6054771">true</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054781">if</span>&nbsp;<span class="ident" id="6054784"><a href="/gostd/net/http/cookiejar/jar.go.html#6054191">modified</a></span>&nbsp;<span class="op" id="6054793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6054797">if</span>&nbsp;<span class="builtinfunc" id="6054800">len</span><span class="op" id="6054803">(</span><span class="ident" id="6054804"><a href="/gostd/net/http/cookiejar/jar.go.html#6054164">submap</a></span><span class="op" id="6054810">)</span>&nbsp;<span class="op" id="6054812">==</span>&nbsp;<span class="num" id="6054815">0</span>&nbsp;<span class="op" id="6054817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6054822">delete</span><span class="op" id="6054828">(</span><span class="ident" id="6054829"><a href="/gostd/net/http/cookiejar/jar.go.html#6053831">j</a></span><span class="op" id="6054830">.</span><span class="ident" id="6054831"><a href="/gostd/net/http/cookiejar/jar.go.html#6049292">entries</a></span><span class="op" id="6054838">,</span>&nbsp;<span class="ident" id="6054840"><a href="/gostd/net/http/cookiejar/jar.go.html#6054065">key</a></span><span class="op" id="6054843">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054847">}</span>&nbsp;<span class="keyword" id="6054849">else</span>&nbsp;<span class="op" id="6054854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6054859"><a href="/gostd/net/http/cookiejar/jar.go.html#6053831">j</a></span><span class="op" id="6054860">.</span><span class="ident" id="6054861"><a href="/gostd/net/http/cookiejar/jar.go.html#6049292">entries</a></span><span class="op" id="6054868">[</span><span class="ident" id="6054869"><a href="/gostd/net/http/cookiejar/jar.go.html#6054065">key</a></span><span class="op" id="6054872">]</span>&nbsp;<span class="op" id="6054874">=</span>&nbsp;<span class="ident" id="6054876"><a href="/gostd/net/http/cookiejar/jar.go.html#6054164">submap</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6054888">}</span><br>
<span class="lineno"></span><span class="op" id="6054890">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="6054893">//&nbsp;canonicalHost&nbsp;strips&nbsp;port&nbsp;from&nbsp;host&nbsp;if&nbsp;present&nbsp;and&nbsp;returns&nbsp;the&nbsp;canonicalized</span><br>
<span class="lineno"></span><span class="comment" id="6054973">//&nbsp;host&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="6054987">func</span>&nbsp;<span class="ident" id="6054992">canonicalHost</span><span class="op" id="6055005">(</span><span class="ident" id="6055006">host</span>&nbsp;<span class="builtintype" id="6055011">string</span><span class="op" id="6055017">)</span>&nbsp;<span class="op" id="6055019">(</span><span class="builtintype" id="6055020">string</span><span class="op" id="6055026">,</span>&nbsp;<span class="builtintype" id="6055028">error</span><span class="op" id="6055033">)</span>&nbsp;<span class="op" id="6055035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055038">var</span>&nbsp;<span class="ident" id="6055042">err</span>&nbsp;<span class="builtintype" id="6055046">error</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6055053"><a href="/gostd/net/http/cookiejar/jar.go.html#6055006">host</a></span>&nbsp;<span class="op" id="6055058">=</span>&nbsp;<span class="ident" id="6055060"><a href="/gostd/net/http/cookiejar/jar.go.html#6047464">strings</a></span><span class="op" id="6055067">.</span><span class="ident" id="6055068"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="6055075">(</span><span class="ident" id="6055076"><a href="/gostd/net/http/cookiejar/jar.go.html#6055006">host</a></span><span class="op" id="6055080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055083">if</span>&nbsp;<span class="ident" id="6055086"><a href="/gostd/net/http/cookiejar/jar.go.html#6055453">hasPort</a></span><span class="op" id="6055093">(</span><span class="ident" id="6055094"><a href="/gostd/net/http/cookiejar/jar.go.html#6055006">host</a></span><span class="op" id="6055098">)</span>&nbsp;<span class="op" id="6055100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6055104"><a href="/gostd/net/http/cookiejar/jar.go.html#6055006">host</a></span><span class="op" id="6055108">,</span>&nbsp;<span class="ident" id="6055110">_</span><span class="op" id="6055111">,</span>&nbsp;<span class="ident" id="6055113"><a href="/gostd/net/http/cookiejar/jar.go.html#6055042">err</a></span>&nbsp;<span class="op" id="6055117">=</span>&nbsp;<span class="ident" id="6055119"><a href="/gostd/net/http/cookiejar/jar.go.html#6047426">net</a></span><span class="op" id="6055122">.</span><span class="ident" id="6055123"><a href="/gostd/net/ipsock.go.html#3313208">SplitHostPort</a></span><span class="op" id="6055136">(</span><span class="ident" id="6055137"><a href="/gostd/net/http/cookiejar/jar.go.html#6055006">host</a></span><span class="op" id="6055141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055145">if</span>&nbsp;<span class="ident" id="6055148"><a href="/gostd/net/http/cookiejar/jar.go.html#6055042">err</a></span>&nbsp;<span class="op" id="6055152">!=</span>&nbsp;<span class="builtintype" id="6055155">nil</span>&nbsp;<span class="op" id="6055159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055164">return</span>&nbsp;<span class="string" id="6055171">&#34;&#34;</span><span class="op" id="6055173">,</span>&nbsp;<span class="ident" id="6055175"><a href="/gostd/net/http/cookiejar/jar.go.html#6055042">err</a></span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6055181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6055184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055187">if</span>&nbsp;<span class="ident" id="6055190"><a href="/gostd/net/http/cookiejar/jar.go.html#6047464">strings</a></span><span class="op" id="6055197">.</span><span class="ident" id="6055198"><a href="/gostd/strings/strings.go.html#2975527">HasSuffix</a></span><span class="op" id="6055207">(</span><span class="ident" id="6055208"><a href="/gostd/net/http/cookiejar/jar.go.html#6055006">host</a></span><span class="op" id="6055212">,</span>&nbsp;<span class="string" id="6055214">&#34;.&#34;</span><span class="op" id="6055217">)</span>&nbsp;<span class="op" id="6055219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6055223">//&nbsp;Strip&nbsp;trailing&nbsp;dot&nbsp;from&nbsp;fully&nbsp;qualified&nbsp;domain&nbsp;names.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6055282"><a href="/gostd/net/http/cookiejar/jar.go.html#6055006">host</a></span>&nbsp;<span class="op" id="6055287">=</span>&nbsp;<span class="ident" id="6055289"><a href="/gostd/net/http/cookiejar/jar.go.html#6055006">host</a></span><span class="op" id="6055293">[</span><span class="op" id="6055294">:</span><span class="builtinfunc" id="6055295">len</span><span class="op" id="6055298">(</span><span class="ident" id="6055299"><a href="/gostd/net/http/cookiejar/jar.go.html#6055006">host</a></span><span class="op" id="6055303">)</span><span class="op" id="6055304">-</span><span class="num" id="6055305">1</span><span class="op" id="6055306">]</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6055309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055312">return</span>&nbsp;<span class="ident" id="6055319"><a href="/gostd/net/http/cookiejar/punycode.go.html#6063567">toASCII</a></span><span class="op" id="6055326">(</span><span class="ident" id="6055327"><a href="/gostd/net/http/cookiejar/jar.go.html#6055006">host</a></span><span class="op" id="6055331">)</span><br>
<span class="lineno"></span><span class="op" id="6055333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6055336">//&nbsp;hasPort&nbsp;reports&nbsp;whether&nbsp;host&nbsp;contains&nbsp;a&nbsp;port&nbsp;number.&nbsp;host&nbsp;may&nbsp;be&nbsp;a&nbsp;host</span><br>
<span class="lineno">320</span><span class="comment" id="6055411">//&nbsp;name,&nbsp;an&nbsp;IPv4&nbsp;or&nbsp;an&nbsp;IPv6&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="6055448">func</span>&nbsp;<span class="ident" id="6055453">hasPort</span><span class="op" id="6055460">(</span><span class="ident" id="6055461">host</span>&nbsp;<span class="builtintype" id="6055466">string</span><span class="op" id="6055472">)</span>&nbsp;<span class="builtintype" id="6055474">bool</span>&nbsp;<span class="op" id="6055479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6055482">colons</span>&nbsp;<span class="op" id="6055489">:=</span>&nbsp;<span class="ident" id="6055492"><a href="/gostd/net/http/cookiejar/jar.go.html#6047464">strings</a></span><span class="op" id="6055499">.</span><span class="ident" id="6055500"><a href="/gostd/strings/strings.go.html#2967531">Count</a></span><span class="op" id="6055505">(</span><span class="ident" id="6055506"><a href="/gostd/net/http/cookiejar/jar.go.html#6055461">host</a></span><span class="op" id="6055510">,</span>&nbsp;<span class="string" id="6055512">&#34;:&#34;</span><span class="op" id="6055515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055518">if</span>&nbsp;<span class="ident" id="6055521"><a href="/gostd/net/http/cookiejar/jar.go.html#6055482">colons</a></span>&nbsp;<span class="op" id="6055528">==</span>&nbsp;<span class="num" id="6055531">0</span>&nbsp;<span class="op" id="6055533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055537">return</span>&nbsp;<span class="builtintype" id="6055544">false</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6055551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055554">if</span>&nbsp;<span class="ident" id="6055557"><a href="/gostd/net/http/cookiejar/jar.go.html#6055482">colons</a></span>&nbsp;<span class="op" id="6055564">==</span>&nbsp;<span class="num" id="6055567">1</span>&nbsp;<span class="op" id="6055569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055573">return</span>&nbsp;<span class="builtintype" id="6055580">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6055586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055589">return</span>&nbsp;<span class="ident" id="6055596"><a href="/gostd/net/http/cookiejar/jar.go.html#6055461">host</a></span><span class="op" id="6055600">[</span><span class="num" id="6055601">0</span><span class="op" id="6055602">]</span>&nbsp;<span class="op" id="6055604">==</span>&nbsp;<span class="string" id="6055607">&#39;[&#39;</span>&nbsp;<span class="op" id="6055611">&amp;&amp;</span>&nbsp;<span class="ident" id="6055614"><a href="/gostd/net/http/cookiejar/jar.go.html#6047464">strings</a></span><span class="op" id="6055621">.</span><span class="ident" id="6055622"><a href="/gostd/strings/strings.go.html#2968416">Contains</a></span><span class="op" id="6055630">(</span><span class="ident" id="6055631"><a href="/gostd/net/http/cookiejar/jar.go.html#6055461">host</a></span><span class="op" id="6055635">,</span>&nbsp;<span class="string" id="6055637">&#34;]:&#34;</span><span class="op" id="6055641">)</span><br>
<span class="lineno">330</span><span class="op" id="6055643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6055646">//&nbsp;jarKey&nbsp;returns&nbsp;the&nbsp;key&nbsp;to&nbsp;use&nbsp;for&nbsp;a&nbsp;jar.</span><br>
<span class="lineno"></span><span class="keyword" id="6055690">func</span>&nbsp;<span class="ident" id="6055695">jarKey</span><span class="op" id="6055701">(</span><span class="ident" id="6055702">host</span>&nbsp;<span class="builtintype" id="6055707">string</span><span class="op" id="6055713">,</span>&nbsp;<span class="ident" id="6055715">psl</span>&nbsp;<span class="ident" id="6055719"><a href="/gostd/net/http/cookiejar/jar.go.html#6048148">PublicSuffixList</a></span><span class="op" id="6055735">)</span>&nbsp;<span class="builtintype" id="6055737">string</span>&nbsp;<span class="op" id="6055744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055747">if</span>&nbsp;<span class="ident" id="6055750"><a href="/gostd/net/http/cookiejar/jar.go.html#6056282">isIP</a></span><span class="op" id="6055754">(</span><span class="ident" id="6055755"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><span class="op" id="6055759">)</span>&nbsp;<span class="op" id="6055761">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055765">return</span>&nbsp;<span class="ident" id="6055772"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6055778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055782">var</span>&nbsp;<span class="ident" id="6055786">i</span>&nbsp;<span class="builtintype" id="6055788">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055793">if</span>&nbsp;<span class="ident" id="6055796"><a href="/gostd/net/http/cookiejar/jar.go.html#6055715">psl</a></span>&nbsp;<span class="op" id="6055800">==</span>&nbsp;<span class="builtintype" id="6055803">nil</span>&nbsp;<span class="op" id="6055807">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6055811"><a href="/gostd/net/http/cookiejar/jar.go.html#6055786">i</a></span>&nbsp;<span class="op" id="6055813">=</span>&nbsp;<span class="ident" id="6055815"><a href="/gostd/net/http/cookiejar/jar.go.html#6047464">strings</a></span><span class="op" id="6055822">.</span><span class="ident" id="6055823"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="6055832">(</span><span class="ident" id="6055833"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><span class="op" id="6055837">,</span>&nbsp;<span class="string" id="6055839">&#34;.&#34;</span><span class="op" id="6055842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055846">if</span>&nbsp;<span class="ident" id="6055849"><a href="/gostd/net/http/cookiejar/jar.go.html#6055786">i</a></span>&nbsp;<span class="op" id="6055851">==</span>&nbsp;<span class="op" id="6055854">-</span><span class="num" id="6055855">1</span>&nbsp;<span class="op" id="6055857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055862">return</span>&nbsp;<span class="ident" id="6055869"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6055876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6055879">}</span>&nbsp;<span class="keyword" id="6055881">else</span>&nbsp;<span class="op" id="6055886">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6055890">suffix</span>&nbsp;<span class="op" id="6055897">:=</span>&nbsp;<span class="ident" id="6055900"><a href="/gostd/net/http/cookiejar/jar.go.html#6055715">psl</a></span><span class="op" id="6055903">.</span><span class="ident" id="6055904"><a href="/gostd/net/http/cookiejar/jar.go.html#6048401">PublicSuffix</a></span><span class="op" id="6055916">(</span><span class="ident" id="6055917"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><span class="op" id="6055921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055925">if</span>&nbsp;<span class="ident" id="6055928"><a href="/gostd/net/http/cookiejar/jar.go.html#6055890">suffix</a></span>&nbsp;<span class="op" id="6055935">==</span>&nbsp;<span class="ident" id="6055938"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span>&nbsp;<span class="op" id="6055943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055948">return</span>&nbsp;<span class="ident" id="6055955"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6055962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6055966"><a href="/gostd/net/http/cookiejar/jar.go.html#6055786">i</a></span>&nbsp;<span class="op" id="6055968">=</span>&nbsp;<span class="builtinfunc" id="6055970">len</span><span class="op" id="6055973">(</span><span class="ident" id="6055974"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><span class="op" id="6055978">)</span>&nbsp;<span class="op" id="6055980">-</span>&nbsp;<span class="builtinfunc" id="6055982">len</span><span class="op" id="6055985">(</span><span class="ident" id="6055986"><a href="/gostd/net/http/cookiejar/jar.go.html#6055890">suffix</a></span><span class="op" id="6055992">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6055996">if</span>&nbsp;<span class="ident" id="6055999"><a href="/gostd/net/http/cookiejar/jar.go.html#6055786">i</a></span>&nbsp;<span class="op" id="6056001">&lt;=</span>&nbsp;<span class="num" id="6056004">0</span>&nbsp;<span class="op" id="6056006">||</span>&nbsp;<span class="ident" id="6056009"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><span class="op" id="6056013">[</span><span class="ident" id="6056014"><a href="/gostd/net/http/cookiejar/jar.go.html#6055786">i</a></span><span class="op" id="6056015">-</span><span class="num" id="6056016">1</span><span class="op" id="6056017">]</span>&nbsp;<span class="op" id="6056019">!=</span>&nbsp;<span class="string" id="6056022">&#39;.&#39;</span>&nbsp;<span class="op" id="6056026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6056031">//&nbsp;The&nbsp;provided&nbsp;public&nbsp;suffix&nbsp;list&nbsp;psl&nbsp;is&nbsp;broken.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6056084">//&nbsp;Storing&nbsp;cookies&nbsp;under&nbsp;host&nbsp;is&nbsp;a&nbsp;safe&nbsp;stopgap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6056136">return</span>&nbsp;<span class="ident" id="6056143"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6056150">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6056153">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6056156">prevDot</span>&nbsp;<span class="op" id="6056164">:=</span>&nbsp;<span class="ident" id="6056167"><a href="/gostd/net/http/cookiejar/jar.go.html#6047464">strings</a></span><span class="op" id="6056174">.</span><span class="ident" id="6056175"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="6056184">(</span><span class="ident" id="6056185"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><span class="op" id="6056189">[</span><span class="op" id="6056190">:</span><span class="ident" id="6056191"><a href="/gostd/net/http/cookiejar/jar.go.html#6055786">i</a></span><span class="op" id="6056192">-</span><span class="num" id="6056193">1</span><span class="op" id="6056194">]</span><span class="op" id="6056195">,</span>&nbsp;<span class="string" id="6056197">&#34;.&#34;</span><span class="op" id="6056200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6056203">return</span>&nbsp;<span class="ident" id="6056210"><a href="/gostd/net/http/cookiejar/jar.go.html#6055702">host</a></span><span class="op" id="6056214">[</span><span class="ident" id="6056215"><a href="/gostd/net/http/cookiejar/jar.go.html#6056156">prevDot</a></span><span class="op" id="6056222">+</span><span class="num" id="6056223">1</span><span class="op" id="6056224">:</span><span class="op" id="6056225">]</span><br>
<span class="lineno"></span><span class="op" id="6056227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="6056230">//&nbsp;isIP&nbsp;reports&nbsp;whether&nbsp;host&nbsp;is&nbsp;an&nbsp;IP&nbsp;address.</span><br>
<span class="lineno"></span><span class="keyword" id="6056277">func</span>&nbsp;<span class="ident" id="6056282">isIP</span><span class="op" id="6056286">(</span><span class="ident" id="6056287">host</span>&nbsp;<span class="builtintype" id="6056292">string</span><span class="op" id="6056298">)</span>&nbsp;<span class="builtintype" id="6056300">bool</span>&nbsp;<span class="op" id="6056305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6056308">return</span>&nbsp;<span class="ident" id="6056315"><a href="/gostd/net/http/cookiejar/jar.go.html#6047426">net</a></span><span class="op" id="6056318">.</span><span class="ident" id="6056319"><a href="/gostd/net/ip.go.html#3299857">ParseIP</a></span><span class="op" id="6056326">(</span><span class="ident" id="6056327"><a href="/gostd/net/http/cookiejar/jar.go.html#6056287">host</a></span><span class="op" id="6056331">)</span>&nbsp;<span class="op" id="6056333">!=</span>&nbsp;<span class="builtintype" id="6056336">nil</span><br>
<span class="lineno"></span><span class="op" id="6056340">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="comment" id="6056343">//&nbsp;defaultPath&nbsp;returns&nbsp;the&nbsp;directory&nbsp;part&nbsp;of&nbsp;an&nbsp;URL&#39;s&nbsp;path&nbsp;according&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6056415">//&nbsp;RFC&nbsp;6265&nbsp;section&nbsp;5.1.4.</span><br>
<span class="lineno"></span><span class="keyword" id="6056442">func</span>&nbsp;<span class="ident" id="6056447">defaultPath</span><span class="op" id="6056458">(</span><span class="ident" id="6056459">path</span>&nbsp;<span class="builtintype" id="6056464">string</span><span class="op" id="6056470">)</span>&nbsp;<span class="builtintype" id="6056472">string</span>&nbsp;<span class="op" id="6056479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6056482">if</span>&nbsp;<span class="builtinfunc" id="6056485">len</span><span class="op" id="6056488">(</span><span class="ident" id="6056489"><a href="/gostd/net/http/cookiejar/jar.go.html#6056459">path</a></span><span class="op" id="6056493">)</span>&nbsp;<span class="op" id="6056495">==</span>&nbsp;<span class="num" id="6056498">0</span>&nbsp;<span class="op" id="6056500">||</span>&nbsp;<span class="ident" id="6056503"><a href="/gostd/net/http/cookiejar/jar.go.html#6056459">path</a></span><span class="op" id="6056507">[</span><span class="num" id="6056508">0</span><span class="op" id="6056509">]</span>&nbsp;<span class="op" id="6056511">!=</span>&nbsp;<span class="string" id="6056514">&#39;/&#39;</span>&nbsp;<span class="op" id="6056518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6056522">return</span>&nbsp;<span class="string" id="6056529">&#34;/&#34;</span>&nbsp;<span class="comment" id="6056533">//&nbsp;Path&nbsp;is&nbsp;empty&nbsp;or&nbsp;malformed.</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6056565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6056569">i</span>&nbsp;<span class="op" id="6056571">:=</span>&nbsp;<span class="ident" id="6056574"><a href="/gostd/net/http/cookiejar/jar.go.html#6047464">strings</a></span><span class="op" id="6056581">.</span><span class="ident" id="6056582"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="6056591">(</span><span class="ident" id="6056592"><a href="/gostd/net/http/cookiejar/jar.go.html#6056459">path</a></span><span class="op" id="6056596">,</span>&nbsp;<span class="string" id="6056598">&#34;/&#34;</span><span class="op" id="6056601">)</span>&nbsp;<span class="comment" id="6056603">//&nbsp;Path&nbsp;starts&nbsp;with&nbsp;&#34;/&#34;,&nbsp;so&nbsp;i&nbsp;!=&nbsp;-1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6056641">if</span>&nbsp;<span class="ident" id="6056644"><a href="/gostd/net/http/cookiejar/jar.go.html#6056569">i</a></span>&nbsp;<span class="op" id="6056646">==</span>&nbsp;<span class="num" id="6056649">0</span>&nbsp;<span class="op" id="6056651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6056655">return</span>&nbsp;<span class="string" id="6056662">&#34;/&#34;</span>&nbsp;<span class="comment" id="6056666">//&nbsp;Path&nbsp;has&nbsp;the&nbsp;form&nbsp;&#34;/abc&#34;.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6056696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6056699">return</span>&nbsp;<span class="ident" id="6056706"><a href="/gostd/net/http/cookiejar/jar.go.html#6056459">path</a></span><span class="op" id="6056710">[</span><span class="op" id="6056711">:</span><span class="ident" id="6056712"><a href="/gostd/net/http/cookiejar/jar.go.html#6056569">i</a></span><span class="op" id="6056713">]</span>&nbsp;<span class="comment" id="6056715">//&nbsp;Path&nbsp;is&nbsp;either&nbsp;of&nbsp;form&nbsp;&#34;/abc/xyz&#34;&nbsp;or&nbsp;&#34;/abc/xyz/&#34;.</span><br>
<span class="lineno"></span><span class="op" id="6056768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6056771">//&nbsp;newEntry&nbsp;creates&nbsp;an&nbsp;entry&nbsp;from&nbsp;a&nbsp;http.Cookie&nbsp;c.&nbsp;now&nbsp;is&nbsp;the&nbsp;current&nbsp;time&nbsp;and</span><br>
<span class="lineno">380</span><span class="comment" id="6056850">//&nbsp;is&nbsp;compared&nbsp;to&nbsp;c.Expires&nbsp;to&nbsp;determine&nbsp;deletion&nbsp;of&nbsp;c.&nbsp;defPath&nbsp;and&nbsp;host&nbsp;are&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6056931">//&nbsp;default-path&nbsp;and&nbsp;the&nbsp;canonical&nbsp;host&nbsp;name&nbsp;of&nbsp;the&nbsp;URL&nbsp;c&nbsp;was&nbsp;received&nbsp;from.</span><br>
<span class="lineno"></span><span class="comment" id="6057007">//</span><br>
<span class="lineno"></span><span class="comment" id="6057010">//&nbsp;remove&nbsp;records&nbsp;whether&nbsp;the&nbsp;jar&nbsp;should&nbsp;delete&nbsp;this&nbsp;cookie,&nbsp;as&nbsp;it&nbsp;has&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="6057089">//&nbsp;expired&nbsp;with&nbsp;respect&nbsp;to&nbsp;now.&nbsp;In&nbsp;this&nbsp;case,&nbsp;e&nbsp;may&nbsp;be&nbsp;incomplete,&nbsp;but&nbsp;it&nbsp;will</span><br>
<span class="lineno">385</span><span class="comment" id="6057168">//&nbsp;be&nbsp;valid&nbsp;to&nbsp;call&nbsp;e.id&nbsp;(which&nbsp;depends&nbsp;on&nbsp;e&#39;s&nbsp;Name,&nbsp;Domain&nbsp;and&nbsp;Path).</span><br>
<span class="lineno"></span><span class="comment" id="6057239">//</span><br>
<span class="lineno"></span><span class="comment" id="6057242">//&nbsp;A&nbsp;malformed&nbsp;c.Domain&nbsp;will&nbsp;result&nbsp;in&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6057291">func</span>&nbsp;<span class="op" id="6057296">(</span><span class="ident" id="6057297">j</span>&nbsp;<span class="op" id="6057299">*</span><span class="ident" id="6057300"><a href="/gostd/net/http/cookiejar/jar.go.html#6049102">Jar</a></span><span class="op" id="6057303">)</span>&nbsp;<span class="ident" id="6057305">newEntry</span><span class="op" id="6057313">(</span><span class="ident" id="6057314">c</span>&nbsp;<span class="op" id="6057316">*</span><span class="ident" id="6057317"><a href="/gostd/net/http/cookiejar/jar.go.html#6047433">http</a></span><span class="op" id="6057321">.</span><span class="ident" id="6057322"><a href="/gostd/net/http/cookie.go.html#4095997">Cookie</a></span><span class="op" id="6057328">,</span>&nbsp;<span class="ident" id="6057330">now</span>&nbsp;<span class="ident" id="6057334"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6057338">.</span><span class="ident" id="6057339"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="6057343">,</span>&nbsp;<span class="ident" id="6057345">defPath</span><span class="op" id="6057352">,</span>&nbsp;<span class="ident" id="6057354">host</span>&nbsp;<span class="builtintype" id="6057359">string</span><span class="op" id="6057365">)</span>&nbsp;<span class="op" id="6057367">(</span><span class="ident" id="6057368">e</span>&nbsp;<span class="ident" id="6057370"><a href="/gostd/net/http/cookiejar/jar.go.html#6049874">entry</a></span><span class="op" id="6057375">,</span>&nbsp;<span class="ident" id="6057377">remove</span>&nbsp;<span class="builtintype" id="6057384">bool</span><span class="op" id="6057388">,</span>&nbsp;<span class="ident" id="6057390">err</span>&nbsp;<span class="builtintype" id="6057394">error</span><span class="op" id="6057399">)</span>&nbsp;<span class="op" id="6057401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057404"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057405">.</span><span class="ident" id="6057406"><a href="/gostd/net/http/cookiejar/jar.go.html#6049890">Name</a></span>&nbsp;<span class="op" id="6057411">=</span>&nbsp;<span class="ident" id="6057413"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057414">.</span><span class="ident" id="6057415"><a href="/gostd/net/http/cookie.go.html#4096014">Name</a></span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6057422">if</span>&nbsp;<span class="ident" id="6057425"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057426">.</span><span class="ident" id="6057427"><a href="/gostd/net/http/cookie.go.html#4096052">Path</a></span>&nbsp;<span class="op" id="6057432">==</span>&nbsp;<span class="string" id="6057435">&#34;&#34;</span>&nbsp;<span class="op" id="6057438">||</span>&nbsp;<span class="ident" id="6057441"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057442">.</span><span class="ident" id="6057443"><a href="/gostd/net/http/cookie.go.html#4096052">Path</a></span><span class="op" id="6057447">[</span><span class="num" id="6057448">0</span><span class="op" id="6057449">]</span>&nbsp;<span class="op" id="6057451">!=</span>&nbsp;<span class="string" id="6057454">&#39;/&#39;</span>&nbsp;<span class="op" id="6057458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057462"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057463">.</span><span class="ident" id="6057464"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span>&nbsp;<span class="op" id="6057469">=</span>&nbsp;<span class="ident" id="6057471"><a href="/gostd/net/http/cookiejar/jar.go.html#6057345">defPath</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6057480">}</span>&nbsp;<span class="keyword" id="6057482">else</span>&nbsp;<span class="op" id="6057487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057491"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057492">.</span><span class="ident" id="6057493"><a href="/gostd/net/http/cookiejar/jar.go.html#6049947">Path</a></span>&nbsp;<span class="op" id="6057498">=</span>&nbsp;<span class="ident" id="6057500"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057501">.</span><span class="ident" id="6057502"><a href="/gostd/net/http/cookie.go.html#4096052">Path</a></span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6057508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057512"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057513">.</span><span class="ident" id="6057514"><a href="/gostd/net/http/cookiejar/jar.go.html#6049928">Domain</a></span><span class="op" id="6057520">,</span>&nbsp;<span class="ident" id="6057522"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057523">.</span><span class="ident" id="6057524"><a href="/gostd/net/http/cookiejar/jar.go.html#6050017">HostOnly</a></span><span class="op" id="6057532">,</span>&nbsp;<span class="ident" id="6057534"><a href="/gostd/net/http/cookiejar/jar.go.html#6057390">err</a></span>&nbsp;<span class="op" id="6057538">=</span>&nbsp;<span class="ident" id="6057540"><a href="/gostd/net/http/cookiejar/jar.go.html#6057297">j</a></span><span class="op" id="6057541">.</span><span class="ident" id="6057542"><a href="/gostd/net/http/cookiejar/jar.go.html#6058710">domainAndType</a></span><span class="op" id="6057555">(</span><span class="ident" id="6057556"><a href="/gostd/net/http/cookiejar/jar.go.html#6057354">host</a></span><span class="op" id="6057560">,</span>&nbsp;<span class="ident" id="6057562"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057563">.</span><span class="ident" id="6057564"><a href="/gostd/net/http/cookie.go.html#4096071">Domain</a></span><span class="op" id="6057570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6057573">if</span>&nbsp;<span class="ident" id="6057576"><a href="/gostd/net/http/cookiejar/jar.go.html#6057390">err</a></span>&nbsp;<span class="op" id="6057580">!=</span>&nbsp;<span class="builtintype" id="6057583">nil</span>&nbsp;<span class="op" id="6057587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6057591">return</span>&nbsp;<span class="ident" id="6057598"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057599">,</span>&nbsp;<span class="builtintype" id="6057601">false</span><span class="op" id="6057606">,</span>&nbsp;<span class="ident" id="6057608"><a href="/gostd/net/http/cookiejar/jar.go.html#6057390">err</a></span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6057613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6057617">//&nbsp;MaxAge&nbsp;takes&nbsp;precedence&nbsp;over&nbsp;Expires.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6057659">if</span>&nbsp;<span class="ident" id="6057662"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057663">.</span><span class="ident" id="6057664"><a href="/gostd/net/http/cookie.go.html#4096315">MaxAge</a></span>&nbsp;<span class="op" id="6057671">&lt;</span>&nbsp;<span class="num" id="6057673">0</span>&nbsp;<span class="op" id="6057675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6057679">return</span>&nbsp;<span class="ident" id="6057686"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057687">,</span>&nbsp;<span class="builtintype" id="6057689">true</span><span class="op" id="6057693">,</span>&nbsp;<span class="builtintype" id="6057695">nil</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6057700">}</span>&nbsp;<span class="keyword" id="6057702">else</span>&nbsp;<span class="keyword" id="6057707">if</span>&nbsp;<span class="ident" id="6057710"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057711">.</span><span class="ident" id="6057712"><a href="/gostd/net/http/cookie.go.html#4096315">MaxAge</a></span>&nbsp;<span class="op" id="6057719">&gt;</span>&nbsp;<span class="num" id="6057721">0</span>&nbsp;<span class="op" id="6057723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057727"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057728">.</span><span class="ident" id="6057729"><a href="/gostd/net/http/cookiejar/jar.go.html#6050034">Expires</a></span>&nbsp;<span class="op" id="6057737">=</span>&nbsp;<span class="ident" id="6057739"><a href="/gostd/net/http/cookiejar/jar.go.html#6057330">now</a></span><span class="op" id="6057742">.</span><span class="ident" id="6057743"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6057746">(</span><span class="ident" id="6057747"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6057751">.</span><span class="ident" id="6057752"><a href="/gostd/time/time.go.html#2734212">Duration</a></span><span class="op" id="6057760">(</span><span class="ident" id="6057761"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057762">.</span><span class="ident" id="6057763"><a href="/gostd/net/http/cookie.go.html#4096315">MaxAge</a></span><span class="op" id="6057769">)</span>&nbsp;<span class="op" id="6057771">*</span>&nbsp;<span class="ident" id="6057773"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6057777">.</span><span class="ident" id="6057778"><a href="/gostd/time/time.go.html#2734862">Second</a></span><span class="op" id="6057784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057788"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057789">.</span><span class="ident" id="6057790"><a href="/gostd/net/http/cookiejar/jar.go.html#6050000">Persistent</a></span>&nbsp;<span class="op" id="6057801">=</span>&nbsp;<span class="builtintype" id="6057803">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6057809">}</span>&nbsp;<span class="keyword" id="6057811">else</span>&nbsp;<span class="op" id="6057816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6057820">if</span>&nbsp;<span class="ident" id="6057823"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057824">.</span><span class="ident" id="6057825"><a href="/gostd/net/http/cookie.go.html#4096090">Expires</a></span><span class="op" id="6057832">.</span><span class="ident" id="6057833"><a href="/gostd/time/time.go.html#2728744">IsZero</a></span><span class="op" id="6057839">(</span><span class="op" id="6057840">)</span>&nbsp;<span class="op" id="6057842">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057847"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057848">.</span><span class="ident" id="6057849"><a href="/gostd/net/http/cookiejar/jar.go.html#6050034">Expires</a></span>&nbsp;<span class="op" id="6057857">=</span>&nbsp;<span class="ident" id="6057859"><a href="/gostd/net/http/cookiejar/jar.go.html#6058562">endOfTime</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057872"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057873">.</span><span class="ident" id="6057874"><a href="/gostd/net/http/cookiejar/jar.go.html#6050000">Persistent</a></span>&nbsp;<span class="op" id="6057885">=</span>&nbsp;<span class="builtintype" id="6057887">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6057895">}</span>&nbsp;<span class="keyword" id="6057897">else</span>&nbsp;<span class="op" id="6057902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6057907">if</span>&nbsp;<span class="op" id="6057910">!</span><span class="ident" id="6057911"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057912">.</span><span class="ident" id="6057913"><a href="/gostd/net/http/cookie.go.html#4096090">Expires</a></span><span class="op" id="6057920">.</span><span class="ident" id="6057921"><a href="/gostd/time/time.go.html#2722668">After</a></span><span class="op" id="6057926">(</span><span class="ident" id="6057927"><a href="/gostd/net/http/cookiejar/jar.go.html#6057330">now</a></span><span class="op" id="6057930">)</span>&nbsp;<span class="op" id="6057932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6057938">return</span>&nbsp;<span class="ident" id="6057945"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057946">,</span>&nbsp;<span class="builtintype" id="6057948">true</span><span class="op" id="6057952">,</span>&nbsp;<span class="builtintype" id="6057954">nil</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6057961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057966"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057967">.</span><span class="ident" id="6057968"><a href="/gostd/net/http/cookiejar/jar.go.html#6050034">Expires</a></span>&nbsp;<span class="op" id="6057976">=</span>&nbsp;<span class="ident" id="6057978"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6057979">.</span><span class="ident" id="6057980"><a href="/gostd/net/http/cookie.go.html#4096090">Expires</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6057991"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6057992">.</span><span class="ident" id="6057993"><a href="/gostd/net/http/cookiejar/jar.go.html#6050000">Persistent</a></span>&nbsp;<span class="op" id="6058004">=</span>&nbsp;<span class="builtintype" id="6058006">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6058013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6058016">}</span><br>
<span class="lineno">420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6058020"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6058021">.</span><span class="ident" id="6058022"><a href="/gostd/net/http/cookiejar/jar.go.html#6049909">Value</a></span>&nbsp;<span class="op" id="6058028">=</span>&nbsp;<span class="ident" id="6058030"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6058031">.</span><span class="ident" id="6058032"><a href="/gostd/net/http/cookie.go.html#4096033">Value</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6058039"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6058040">.</span><span class="ident" id="6058041"><a href="/gostd/net/http/cookiejar/jar.go.html#6049966">Secure</a></span>&nbsp;<span class="op" id="6058048">=</span>&nbsp;<span class="ident" id="6058050"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6058051">.</span><span class="ident" id="6058052"><a href="/gostd/net/http/cookie.go.html#4096329">Secure</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6058060"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6058061">.</span><span class="ident" id="6058062"><a href="/gostd/net/http/cookiejar/jar.go.html#6049983">HttpOnly</a></span>&nbsp;<span class="op" id="6058071">=</span>&nbsp;<span class="ident" id="6058073"><a href="/gostd/net/http/cookiejar/jar.go.html#6057314">c</a></span><span class="op" id="6058074">.</span><span class="ident" id="6058075"><a href="/gostd/net/http/cookie.go.html#4096344">HttpOnly</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6058086">return</span>&nbsp;<span class="ident" id="6058093"><a href="/gostd/net/http/cookiejar/jar.go.html#6057368">e</a></span><span class="op" id="6058094">,</span>&nbsp;<span class="builtintype" id="6058096">false</span><span class="op" id="6058101">,</span>&nbsp;<span class="builtintype" id="6058103">nil</span><br>
<span class="lineno"></span><span class="op" id="6058107">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6058110">var</span>&nbsp;<span class="op" id="6058114">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6058117">errIllegalDomain</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6058136">=</span>&nbsp;<span class="ident" id="6058138"><a href="/gostd/net/http/cookiejar/jar.go.html#6047409">errors</a></span><span class="op" id="6058144">.</span><span class="ident" id="6058145"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="6058148">(</span><span class="string" id="6058149">&#34;cookiejar:&nbsp;illegal&nbsp;cookie&nbsp;domain&nbsp;attribute&#34;</span><span class="op" id="6058193">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6058196">errMalformedDomain</span>&nbsp;<span class="op" id="6058215">=</span>&nbsp;<span class="ident" id="6058217"><a href="/gostd/net/http/cookiejar/jar.go.html#6047409">errors</a></span><span class="op" id="6058223">.</span><span class="ident" id="6058224"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="6058227">(</span><span class="string" id="6058228">&#34;cookiejar:&nbsp;malformed&nbsp;cookie&nbsp;domain&nbsp;attribute&#34;</span><span class="op" id="6058274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6058277">errNoHostname</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6058296">=</span>&nbsp;<span class="ident" id="6058298"><a href="/gostd/net/http/cookiejar/jar.go.html#6047409">errors</a></span><span class="op" id="6058304">.</span><span class="ident" id="6058305"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="6058308">(</span><span class="string" id="6058309">&#34;cookiejar:&nbsp;no&nbsp;host&nbsp;name&nbsp;available&nbsp;(IP&nbsp;only)&#34;</span><span class="op" id="6058354">)</span><br>
<span class="lineno"></span><span class="op" id="6058356">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6058359">//&nbsp;endOfTime&nbsp;is&nbsp;the&nbsp;time&nbsp;when&nbsp;session&nbsp;(non-persistent)&nbsp;cookies&nbsp;expire.</span><br>
<span class="lineno">435</span><span class="comment" id="6058430">//&nbsp;This&nbsp;instant&nbsp;is&nbsp;representable&nbsp;in&nbsp;most&nbsp;date/time&nbsp;formats&nbsp;(not&nbsp;just</span><br>
<span class="lineno"></span><span class="comment" id="6058499">//&nbsp;Go&#39;s&nbsp;time.Time)&nbsp;and&nbsp;should&nbsp;be&nbsp;far&nbsp;enough&nbsp;in&nbsp;the&nbsp;future.</span><br>
<span class="lineno"></span><span class="keyword" id="6058558">var</span>&nbsp;<span class="ident" id="6058562">endOfTime</span>&nbsp;<span class="op" id="6058572">=</span>&nbsp;<span class="ident" id="6058574"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6058578">.</span><span class="ident" id="6058579"><a href="/gostd/time/time.go.html#2750075">Date</a></span><span class="op" id="6058583">(</span><span class="num" id="6058584">9999</span><span class="op" id="6058588">,</span>&nbsp;<span class="num" id="6058590">12</span><span class="op" id="6058592">,</span>&nbsp;<span class="num" id="6058594">31</span><span class="op" id="6058596">,</span>&nbsp;<span class="num" id="6058598">23</span><span class="op" id="6058600">,</span>&nbsp;<span class="num" id="6058602">59</span><span class="op" id="6058604">,</span>&nbsp;<span class="num" id="6058606">59</span><span class="op" id="6058608">,</span>&nbsp;<span class="num" id="6058610">0</span><span class="op" id="6058611">,</span>&nbsp;<span class="ident" id="6058613"><a href="/gostd/net/http/cookiejar/jar.go.html#6047483">time</a></span><span class="op" id="6058617">.</span><span class="ident" id="6058618"><a href="/gostd/time/zoneinfo.go.html#2756102">UTC</a></span><span class="op" id="6058621">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6058624">//&nbsp;domainAndType&nbsp;determines&nbsp;the&nbsp;cookie&#39;s&nbsp;domain&nbsp;and&nbsp;hostOnly&nbsp;attribute.</span><br>
<span class="lineno">440</span><span class="keyword" id="6058696">func</span>&nbsp;<span class="op" id="6058701">(</span><span class="ident" id="6058702">j</span>&nbsp;<span class="op" id="6058704">*</span><span class="ident" id="6058705"><a href="/gostd/net/http/cookiejar/jar.go.html#6049102">Jar</a></span><span class="op" id="6058708">)</span>&nbsp;<span class="ident" id="6058710">domainAndType</span><span class="op" id="6058723">(</span><span class="ident" id="6058724">host</span><span class="op" id="6058728">,</span>&nbsp;<span class="ident" id="6058730">domain</span>&nbsp;<span class="builtintype" id="6058737">string</span><span class="op" id="6058743">)</span>&nbsp;<span class="op" id="6058745">(</span><span class="builtintype" id="6058746">string</span><span class="op" id="6058752">,</span>&nbsp;<span class="builtintype" id="6058754">bool</span><span class="op" id="6058758">,</span>&nbsp;<span class="builtintype" id="6058760">error</span><span class="op" id="6058765">)</span>&nbsp;<span class="op" id="6058767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6058770">if</span>&nbsp;<span class="ident" id="6058773"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span>&nbsp;<span class="op" id="6058780">==</span>&nbsp;<span class="string" id="6058783">&#34;&#34;</span>&nbsp;<span class="op" id="6058786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6058790">//&nbsp;No&nbsp;domain&nbsp;attribute&nbsp;in&nbsp;the&nbsp;SetCookie&nbsp;header&nbsp;indicates&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6058851">//&nbsp;host&nbsp;cookie.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6058869">return</span>&nbsp;<span class="ident" id="6058876"><a href="/gostd/net/http/cookiejar/jar.go.html#6058724">host</a></span><span class="op" id="6058880">,</span>&nbsp;<span class="builtintype" id="6058882">true</span><span class="op" id="6058886">,</span>&nbsp;<span class="builtintype" id="6058888">nil</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6058893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6058897">if</span>&nbsp;<span class="ident" id="6058900"><a href="/gostd/net/http/cookiejar/jar.go.html#6056282">isIP</a></span><span class="op" id="6058904">(</span><span class="ident" id="6058905"><a href="/gostd/net/http/cookiejar/jar.go.html#6058724">host</a></span><span class="op" id="6058909">)</span>&nbsp;<span class="op" id="6058911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6058915">//&nbsp;According&nbsp;to&nbsp;RFC&nbsp;6265&nbsp;domain-matching&nbsp;includes&nbsp;not&nbsp;being</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6058977">//&nbsp;an&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6058997">//&nbsp;TODO:&nbsp;This&nbsp;might&nbsp;be&nbsp;relaxed&nbsp;as&nbsp;in&nbsp;common&nbsp;browsers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6059053">return</span>&nbsp;<span class="string" id="6059060">&#34;&#34;</span><span class="op" id="6059062">,</span>&nbsp;<span class="builtintype" id="6059064">false</span><span class="op" id="6059069">,</span>&nbsp;<span class="ident" id="6059071"><a href="/gostd/net/http/cookiejar/jar.go.html#6058277">errNoHostname</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6059086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059090">//&nbsp;From&nbsp;here&nbsp;on:&nbsp;If&nbsp;the&nbsp;cookie&nbsp;is&nbsp;valid,&nbsp;it&nbsp;is&nbsp;a&nbsp;domain&nbsp;cookie&nbsp;(with</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059160">//&nbsp;the&nbsp;one&nbsp;exception&nbsp;of&nbsp;a&nbsp;public&nbsp;suffix&nbsp;below).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059209">//&nbsp;See&nbsp;RFC&nbsp;6265&nbsp;section&nbsp;5.2.3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6059241">if</span>&nbsp;<span class="ident" id="6059244"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6059250">[</span><span class="num" id="6059251">0</span><span class="op" id="6059252">]</span>&nbsp;<span class="op" id="6059254">==</span>&nbsp;<span class="string" id="6059257">&#39;.&#39;</span>&nbsp;<span class="op" id="6059261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6059265"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span>&nbsp;<span class="op" id="6059272">=</span>&nbsp;<span class="ident" id="6059274"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6059280">[</span><span class="num" id="6059281">1</span><span class="op" id="6059282">:</span><span class="op" id="6059283">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6059286">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6059290">if</span>&nbsp;<span class="builtinfunc" id="6059293">len</span><span class="op" id="6059296">(</span><span class="ident" id="6059297"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6059303">)</span>&nbsp;<span class="op" id="6059305">==</span>&nbsp;<span class="num" id="6059308">0</span>&nbsp;<span class="op" id="6059310">||</span>&nbsp;<span class="ident" id="6059313"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6059319">[</span><span class="num" id="6059320">0</span><span class="op" id="6059321">]</span>&nbsp;<span class="op" id="6059323">==</span>&nbsp;<span class="string" id="6059326">&#39;.&#39;</span>&nbsp;<span class="op" id="6059330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059334">//&nbsp;Received&nbsp;either&nbsp;&#34;Domain=.&#34;&nbsp;or&nbsp;&#34;Domain=..some.thing&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059392">//&nbsp;both&nbsp;are&nbsp;illegal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6059415">return</span>&nbsp;<span class="string" id="6059422">&#34;&#34;</span><span class="op" id="6059424">,</span>&nbsp;<span class="builtintype" id="6059426">false</span><span class="op" id="6059431">,</span>&nbsp;<span class="ident" id="6059433"><a href="/gostd/net/http/cookiejar/jar.go.html#6058196">errMalformedDomain</a></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6059453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6059456"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span>&nbsp;<span class="op" id="6059463">=</span>&nbsp;<span class="ident" id="6059465"><a href="/gostd/net/http/cookiejar/jar.go.html#6047464">strings</a></span><span class="op" id="6059472">.</span><span class="ident" id="6059473"><a href="/gostd/strings/strings.go.html#2977307">ToLower</a></span><span class="op" id="6059480">(</span><span class="ident" id="6059481"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6059487">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6059491">if</span>&nbsp;<span class="ident" id="6059494"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6059500">[</span><span class="builtinfunc" id="6059501">len</span><span class="op" id="6059504">(</span><span class="ident" id="6059505"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6059511">)</span><span class="op" id="6059512">-</span><span class="num" id="6059513">1</span><span class="op" id="6059514">]</span>&nbsp;<span class="op" id="6059516">==</span>&nbsp;<span class="string" id="6059519">&#39;.&#39;</span>&nbsp;<span class="op" id="6059523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059527">//&nbsp;We&nbsp;received&nbsp;stuff&nbsp;like&nbsp;&#34;Domain=www.example.com.&#34;.</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059582">//&nbsp;Browsers&nbsp;do&nbsp;handle&nbsp;such&nbsp;stuff&nbsp;(actually&nbsp;differently)&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059644">//&nbsp;RFC&nbsp;6265&nbsp;seems&nbsp;to&nbsp;be&nbsp;clear&nbsp;here&nbsp;(e.g.&nbsp;section&nbsp;4.1.2.3)&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059707">//&nbsp;requiring&nbsp;a&nbsp;reject.&nbsp;&nbsp;4.1.2.3&nbsp;is&nbsp;not&nbsp;normative,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059763">//&nbsp;&#34;Domain&nbsp;Matching&#34;&nbsp;(5.1.3)&nbsp;and&nbsp;&#34;Canonicalized&nbsp;Host&nbsp;Names&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059825">//&nbsp;(5.1.2)&nbsp;are.</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6059843">return</span>&nbsp;<span class="string" id="6059850">&#34;&#34;</span><span class="op" id="6059852">,</span>&nbsp;<span class="builtintype" id="6059854">false</span><span class="op" id="6059859">,</span>&nbsp;<span class="ident" id="6059861"><a href="/gostd/net/http/cookiejar/jar.go.html#6058196">errMalformedDomain</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6059881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6059885">//&nbsp;See&nbsp;RFC&nbsp;6265&nbsp;section&nbsp;5.3&nbsp;#5.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6059918">if</span>&nbsp;<span class="ident" id="6059921"><a href="/gostd/net/http/cookiejar/jar.go.html#6058702">j</a></span><span class="op" id="6059922">.</span><span class="ident" id="6059923"><a href="/gostd/net/http/cookiejar/jar.go.html#6049116">psList</a></span>&nbsp;<span class="op" id="6059930">!=</span>&nbsp;<span class="builtintype" id="6059933">nil</span>&nbsp;<span class="op" id="6059937">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6059941">if</span>&nbsp;<span class="ident" id="6059944">ps</span>&nbsp;<span class="op" id="6059947">:=</span>&nbsp;<span class="ident" id="6059950"><a href="/gostd/net/http/cookiejar/jar.go.html#6058702">j</a></span><span class="op" id="6059951">.</span><span class="ident" id="6059952"><a href="/gostd/net/http/cookiejar/jar.go.html#6049116">psList</a></span><span class="op" id="6059958">.</span><span class="ident" id="6059959"><a href="/gostd/net/http/cookiejar/jar.go.html#6048401">PublicSuffix</a></span><span class="op" id="6059971">(</span><span class="ident" id="6059972"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6059978">)</span><span class="op" id="6059979">;</span>&nbsp;<span class="ident" id="6059981"><a href="/gostd/net/http/cookiejar/jar.go.html#6059944">ps</a></span>&nbsp;<span class="op" id="6059984">!=</span>&nbsp;<span class="string" id="6059987">&#34;&#34;</span>&nbsp;<span class="op" id="6059990">&amp;&amp;</span>&nbsp;<span class="op" id="6059993">!</span><span class="ident" id="6059994"><a href="/gostd/net/http/cookiejar/jar.go.html#6051475">hasDotSuffix</a></span><span class="op" id="6060006">(</span><span class="ident" id="6060007"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6060013">,</span>&nbsp;<span class="ident" id="6060015"><a href="/gostd/net/http/cookiejar/jar.go.html#6059944">ps</a></span><span class="op" id="6060017">)</span>&nbsp;<span class="op" id="6060019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6060024">if</span>&nbsp;<span class="ident" id="6060027"><a href="/gostd/net/http/cookiejar/jar.go.html#6058724">host</a></span>&nbsp;<span class="op" id="6060032">==</span>&nbsp;<span class="ident" id="6060035"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span>&nbsp;<span class="op" id="6060042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6060048">//&nbsp;This&nbsp;is&nbsp;the&nbsp;one&nbsp;exception&nbsp;in&nbsp;which&nbsp;a&nbsp;cookie</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6060099">//&nbsp;with&nbsp;a&nbsp;domain&nbsp;attribute&nbsp;is&nbsp;a&nbsp;host&nbsp;cookie.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6060148">return</span>&nbsp;<span class="ident" id="6060155"><a href="/gostd/net/http/cookiejar/jar.go.html#6058724">host</a></span><span class="op" id="6060159">,</span>&nbsp;<span class="builtintype" id="6060161">true</span><span class="op" id="6060165">,</span>&nbsp;<span class="builtintype" id="6060167">nil</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6060174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6060179">return</span>&nbsp;<span class="string" id="6060186">&#34;&#34;</span><span class="op" id="6060188">,</span>&nbsp;<span class="builtintype" id="6060190">false</span><span class="op" id="6060195">,</span>&nbsp;<span class="ident" id="6060197"><a href="/gostd/net/http/cookiejar/jar.go.html#6058117">errIllegalDomain</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6060216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6060219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6060223">//&nbsp;The&nbsp;domain&nbsp;must&nbsp;domain-match&nbsp;host:&nbsp;www.mycompany.com&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6060287">//&nbsp;set&nbsp;cookies&nbsp;for&nbsp;.ourcompetitors.com.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6060328">if</span>&nbsp;<span class="ident" id="6060331"><a href="/gostd/net/http/cookiejar/jar.go.html#6058724">host</a></span>&nbsp;<span class="op" id="6060336">!=</span>&nbsp;<span class="ident" id="6060339"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span>&nbsp;<span class="op" id="6060346">&amp;&amp;</span>&nbsp;<span class="op" id="6060349">!</span><span class="ident" id="6060350"><a href="/gostd/net/http/cookiejar/jar.go.html#6051475">hasDotSuffix</a></span><span class="op" id="6060362">(</span><span class="ident" id="6060363"><a href="/gostd/net/http/cookiejar/jar.go.html#6058724">host</a></span><span class="op" id="6060367">,</span>&nbsp;<span class="ident" id="6060369"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6060375">)</span>&nbsp;<span class="op" id="6060377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6060381">return</span>&nbsp;<span class="string" id="6060388">&#34;&#34;</span><span class="op" id="6060390">,</span>&nbsp;<span class="builtintype" id="6060392">false</span><span class="op" id="6060397">,</span>&nbsp;<span class="ident" id="6060399"><a href="/gostd/net/http/cookiejar/jar.go.html#6058117">errIllegalDomain</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6060417">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6060421">return</span>&nbsp;<span class="ident" id="6060428"><a href="/gostd/net/http/cookiejar/jar.go.html#6058730">domain</a></span><span class="op" id="6060434">,</span>&nbsp;<span class="builtintype" id="6060436">false</span><span class="op" id="6060441">,</span>&nbsp;<span class="builtintype" id="6060443">nil</span><br>
<span class="lineno"></span><span class="op" id="6060447">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
