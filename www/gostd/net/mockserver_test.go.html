<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html" class="current">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6717894">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6717949">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6718003">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6718054">package</span>&nbsp;<span class="ident" id="6718062">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6718067">import</span>&nbsp;<span class="string" id="6718074">&#34;sync&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6718082">type</span>&nbsp;<span class="ident" id="6718087">streamListener</span>&nbsp;<span class="keyword" id="6718102">struct</span>&nbsp;<span class="op" id="6718109">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718112">net</span><span class="op" id="6718115">,</span>&nbsp;<span class="ident" id="6718117">addr</span>&nbsp;<span class="builtintype" id="6718122">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718130">ln</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718140"><a href="/gostd/net/net.go.html#3340703">Listener</a></span><br>
<span class="lineno"></span><span class="op" id="6718149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6718152">type</span>&nbsp;<span class="ident" id="6718157">dualStackServer</span>&nbsp;<span class="keyword" id="6718173">struct</span>&nbsp;<span class="op" id="6718180">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718183">lnmu</span>&nbsp;<span class="ident" id="6718188"><a href="/gostd/net/mockserver_test.go.html#6718074">sync</a></span><span class="op" id="6718192">.</span><span class="ident" id="6718193"><a href="/gostd/sync/rwmutex.go.html#1456076">RWMutex</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718202">lns</span>&nbsp;&nbsp;<span class="op" id="6718207">[</span><span class="op" id="6718208">]</span><span class="ident" id="6718209"><a href="/gostd/net/mockserver_test.go.html#6718087">streamListener</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718225">port</span>&nbsp;<span class="builtintype" id="6718230">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718239">cmu</span>&nbsp;<span class="ident" id="6718243"><a href="/gostd/net/mockserver_test.go.html#6718074">sync</a></span><span class="op" id="6718247">.</span><span class="ident" id="6718248"><a href="/gostd/sync/rwmutex.go.html#1456076">RWMutex</a></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718257">cs</span>&nbsp;&nbsp;<span class="op" id="6718261">[</span><span class="op" id="6718262">]</span><span class="ident" id="6718263"><a href="/gostd/net/net.go.html#3334417">Conn</a></span>&nbsp;<span class="comment" id="6718268">//&nbsp;established&nbsp;connections&nbsp;at&nbsp;the&nbsp;passive&nbsp;open&nbsp;side</span><br>
<span class="lineno"></span><span class="op" id="6718320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6718323">func</span>&nbsp;<span class="op" id="6718328">(</span><span class="ident" id="6718329">dss</span>&nbsp;<span class="op" id="6718333">*</span><span class="ident" id="6718334"><a href="/gostd/net/mockserver_test.go.html#6718157">dualStackServer</a></span><span class="op" id="6718349">)</span>&nbsp;<span class="ident" id="6718351">buildup</span><span class="op" id="6718358">(</span><span class="ident" id="6718359">server</span>&nbsp;<span class="keyword" id="6718366">func</span><span class="op" id="6718370">(</span><span class="op" id="6718371">*</span><span class="ident" id="6718372"><a href="/gostd/net/mockserver_test.go.html#6718157">dualStackServer</a></span><span class="op" id="6718387">,</span>&nbsp;<span class="ident" id="6718389"><a href="/gostd/net/net.go.html#3340703">Listener</a></span><span class="op" id="6718397">)</span><span class="op" id="6718398">)</span>&nbsp;<span class="builtintype" id="6718400">error</span>&nbsp;<span class="op" id="6718406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718409">for</span>&nbsp;<span class="ident" id="6718413">i</span>&nbsp;<span class="op" id="6718415">:=</span>&nbsp;<span class="keyword" id="6718418">range</span>&nbsp;<span class="ident" id="6718424"><a href="/gostd/net/mockserver_test.go.html#6718329">dss</a></span><span class="op" id="6718427">.</span><span class="ident" id="6718428"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span>&nbsp;<span class="op" id="6718432">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718436">go</span>&nbsp;<span class="ident" id="6718439"><a href="/gostd/net/mockserver_test.go.html#6718359">server</a></span><span class="op" id="6718445">(</span><span class="ident" id="6718446"><a href="/gostd/net/mockserver_test.go.html#6718329">dss</a></span><span class="op" id="6718449">,</span>&nbsp;<span class="ident" id="6718451"><a href="/gostd/net/mockserver_test.go.html#6718329">dss</a></span><span class="op" id="6718454">.</span><span class="ident" id="6718455"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6718458">[</span><span class="ident" id="6718459"><a href="/gostd/net/mockserver_test.go.html#6718413">i</a></span><span class="op" id="6718460">]</span><span class="op" id="6718461">.</span><span class="ident" id="6718462"><a href="/gostd/net/mockserver_test.go.html#6718130">ln</a></span><span class="op" id="6718464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6718467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718470">return</span>&nbsp;<span class="builtintype" id="6718477">nil</span><br>
<span class="lineno"></span><span class="op" id="6718481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="6718484">func</span>&nbsp;<span class="op" id="6718489">(</span><span class="ident" id="6718490">dss</span>&nbsp;<span class="op" id="6718494">*</span><span class="ident" id="6718495"><a href="/gostd/net/mockserver_test.go.html#6718157">dualStackServer</a></span><span class="op" id="6718510">)</span>&nbsp;<span class="ident" id="6718512">putConn</span><span class="op" id="6718519">(</span><span class="ident" id="6718520">c</span>&nbsp;<span class="ident" id="6718522"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="6718526">)</span>&nbsp;<span class="builtintype" id="6718528">error</span>&nbsp;<span class="op" id="6718534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718537"><a href="/gostd/net/mockserver_test.go.html#6718490">dss</a></span><span class="op" id="6718540">.</span><span class="ident" id="6718541"><a href="/gostd/net/mockserver_test.go.html#6718239">cmu</a></span><span class="op" id="6718544">.</span><span class="ident" id="6718545"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="6718549">(</span><span class="op" id="6718550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718553"><a href="/gostd/net/mockserver_test.go.html#6718490">dss</a></span><span class="op" id="6718556">.</span><span class="ident" id="6718557"><a href="/gostd/net/mockserver_test.go.html#6718257">cs</a></span>&nbsp;<span class="op" id="6718560">=</span>&nbsp;<span class="builtinfunc" id="6718562">append</span><span class="op" id="6718568">(</span><span class="ident" id="6718569"><a href="/gostd/net/mockserver_test.go.html#6718490">dss</a></span><span class="op" id="6718572">.</span><span class="ident" id="6718573"><a href="/gostd/net/mockserver_test.go.html#6718257">cs</a></span><span class="op" id="6718575">,</span>&nbsp;<span class="ident" id="6718577"><a href="/gostd/net/mockserver_test.go.html#6718520">c</a></span><span class="op" id="6718578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718581"><a href="/gostd/net/mockserver_test.go.html#6718490">dss</a></span><span class="op" id="6718584">.</span><span class="ident" id="6718585"><a href="/gostd/net/mockserver_test.go.html#6718239">cmu</a></span><span class="op" id="6718588">.</span><span class="ident" id="6718589"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="6718595">(</span><span class="op" id="6718596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718599">return</span>&nbsp;<span class="builtintype" id="6718606">nil</span><br>
<span class="lineno">35</span><span class="op" id="6718610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6718613">func</span>&nbsp;<span class="op" id="6718618">(</span><span class="ident" id="6718619">dss</span>&nbsp;<span class="op" id="6718623">*</span><span class="ident" id="6718624"><a href="/gostd/net/mockserver_test.go.html#6718157">dualStackServer</a></span><span class="op" id="6718639">)</span>&nbsp;<span class="ident" id="6718641">teardownNetwork</span><span class="op" id="6718656">(</span><span class="ident" id="6718657">net</span>&nbsp;<span class="builtintype" id="6718661">string</span><span class="op" id="6718667">)</span>&nbsp;<span class="builtintype" id="6718669">error</span>&nbsp;<span class="op" id="6718675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718678"><a href="/gostd/net/mockserver_test.go.html#6718619">dss</a></span><span class="op" id="6718681">.</span><span class="ident" id="6718682"><a href="/gostd/net/mockserver_test.go.html#6718183">lnmu</a></span><span class="op" id="6718686">.</span><span class="ident" id="6718687"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="6718691">(</span><span class="op" id="6718692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718695">for</span>&nbsp;<span class="ident" id="6718699">i</span>&nbsp;<span class="op" id="6718701">:=</span>&nbsp;<span class="keyword" id="6718704">range</span>&nbsp;<span class="ident" id="6718710"><a href="/gostd/net/mockserver_test.go.html#6718619">dss</a></span><span class="op" id="6718713">.</span><span class="ident" id="6718714"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span>&nbsp;<span class="op" id="6718718">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718722">if</span>&nbsp;<span class="ident" id="6718725"><a href="/gostd/net/mockserver_test.go.html#6718657">net</a></span>&nbsp;<span class="op" id="6718729">==</span>&nbsp;<span class="ident" id="6718732"><a href="/gostd/net/mockserver_test.go.html#6718619">dss</a></span><span class="op" id="6718735">.</span><span class="ident" id="6718736"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6718739">[</span><span class="ident" id="6718740"><a href="/gostd/net/mockserver_test.go.html#6718699">i</a></span><span class="op" id="6718741">]</span><span class="op" id="6718742">.</span><span class="ident" id="6718743"><a href="/gostd/net/mockserver_test.go.html#6718112">net</a></span>&nbsp;<span class="op" id="6718747">&amp;&amp;</span>&nbsp;<span class="ident" id="6718750"><a href="/gostd/net/mockserver_test.go.html#6718619">dss</a></span><span class="op" id="6718753">.</span><span class="ident" id="6718754"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6718757">[</span><span class="ident" id="6718758"><a href="/gostd/net/mockserver_test.go.html#6718699">i</a></span><span class="op" id="6718759">]</span><span class="op" id="6718760">.</span><span class="ident" id="6718761"><a href="/gostd/net/mockserver_test.go.html#6718130">ln</a></span>&nbsp;<span class="op" id="6718764">!=</span>&nbsp;<span class="builtintype" id="6718767">nil</span>&nbsp;<span class="op" id="6718771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718776"><a href="/gostd/net/mockserver_test.go.html#6718619">dss</a></span><span class="op" id="6718779">.</span><span class="ident" id="6718780"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6718783">[</span><span class="ident" id="6718784"><a href="/gostd/net/mockserver_test.go.html#6718699">i</a></span><span class="op" id="6718785">]</span><span class="op" id="6718786">.</span><span class="ident" id="6718787"><a href="/gostd/net/mockserver_test.go.html#6718130">ln</a></span><span class="op" id="6718789">.</span><span class="ident" id="6718790"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6718795">(</span><span class="op" id="6718796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718801"><a href="/gostd/net/mockserver_test.go.html#6718619">dss</a></span><span class="op" id="6718804">.</span><span class="ident" id="6718805"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6718808">[</span><span class="ident" id="6718809"><a href="/gostd/net/mockserver_test.go.html#6718699">i</a></span><span class="op" id="6718810">]</span><span class="op" id="6718811">.</span><span class="ident" id="6718812"><a href="/gostd/net/mockserver_test.go.html#6718130">ln</a></span>&nbsp;<span class="op" id="6718815">=</span>&nbsp;<span class="builtintype" id="6718817">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6718823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6718826">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718829"><a href="/gostd/net/mockserver_test.go.html#6718619">dss</a></span><span class="op" id="6718832">.</span><span class="ident" id="6718833"><a href="/gostd/net/mockserver_test.go.html#6718183">lnmu</a></span><span class="op" id="6718837">.</span><span class="ident" id="6718838"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="6718844">(</span><span class="op" id="6718845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718848">return</span>&nbsp;<span class="builtintype" id="6718855">nil</span><br>
<span class="lineno"></span><span class="op" id="6718859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6718862">func</span>&nbsp;<span class="op" id="6718867">(</span><span class="ident" id="6718868">dss</span>&nbsp;<span class="op" id="6718872">*</span><span class="ident" id="6718873"><a href="/gostd/net/mockserver_test.go.html#6718157">dualStackServer</a></span><span class="op" id="6718888">)</span>&nbsp;<span class="ident" id="6718890">teardown</span><span class="op" id="6718898">(</span><span class="op" id="6718899">)</span>&nbsp;<span class="builtintype" id="6718901">error</span>&nbsp;<span class="op" id="6718907">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718910"><a href="/gostd/net/mockserver_test.go.html#6718868">dss</a></span><span class="op" id="6718913">.</span><span class="ident" id="6718914"><a href="/gostd/net/mockserver_test.go.html#6718183">lnmu</a></span><span class="op" id="6718918">.</span><span class="ident" id="6718919"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="6718923">(</span><span class="op" id="6718924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718927">for</span>&nbsp;<span class="ident" id="6718931">i</span>&nbsp;<span class="op" id="6718933">:=</span>&nbsp;<span class="keyword" id="6718936">range</span>&nbsp;<span class="ident" id="6718942"><a href="/gostd/net/mockserver_test.go.html#6718868">dss</a></span><span class="op" id="6718945">.</span><span class="ident" id="6718946"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span>&nbsp;<span class="op" id="6718950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6718954">if</span>&nbsp;<span class="ident" id="6718957"><a href="/gostd/net/mockserver_test.go.html#6718868">dss</a></span><span class="op" id="6718960">.</span><span class="ident" id="6718961"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6718964">[</span><span class="ident" id="6718965"><a href="/gostd/net/mockserver_test.go.html#6718931">i</a></span><span class="op" id="6718966">]</span><span class="op" id="6718967">.</span><span class="ident" id="6718968"><a href="/gostd/net/mockserver_test.go.html#6718130">ln</a></span>&nbsp;<span class="op" id="6718971">!=</span>&nbsp;<span class="builtintype" id="6718974">nil</span>&nbsp;<span class="op" id="6718978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6718983"><a href="/gostd/net/mockserver_test.go.html#6718868">dss</a></span><span class="op" id="6718986">.</span><span class="ident" id="6718987"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6718990">[</span><span class="ident" id="6718991"><a href="/gostd/net/mockserver_test.go.html#6718931">i</a></span><span class="op" id="6718992">]</span><span class="op" id="6718993">.</span><span class="ident" id="6718994"><a href="/gostd/net/mockserver_test.go.html#6718130">ln</a></span><span class="op" id="6718996">.</span><span class="ident" id="6718997"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6719002">(</span><span class="op" id="6719003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719007">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719013"><a href="/gostd/net/mockserver_test.go.html#6718868">dss</a></span><span class="op" id="6719016">.</span><span class="ident" id="6719017"><a href="/gostd/net/mockserver_test.go.html#6718183">lnmu</a></span><span class="op" id="6719021">.</span><span class="ident" id="6719022"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="6719028">(</span><span class="op" id="6719029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719032"><a href="/gostd/net/mockserver_test.go.html#6718868">dss</a></span><span class="op" id="6719035">.</span><span class="ident" id="6719036"><a href="/gostd/net/mockserver_test.go.html#6718239">cmu</a></span><span class="op" id="6719039">.</span><span class="ident" id="6719040"><a href="/gostd/sync/rwmutex.go.html#1457713">Lock</a></span><span class="op" id="6719044">(</span><span class="op" id="6719045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6719048">for</span>&nbsp;<span class="ident" id="6719052">_</span><span class="op" id="6719053">,</span>&nbsp;<span class="ident" id="6719055">c</span>&nbsp;<span class="op" id="6719057">:=</span>&nbsp;<span class="keyword" id="6719060">range</span>&nbsp;<span class="ident" id="6719066"><a href="/gostd/net/mockserver_test.go.html#6718868">dss</a></span><span class="op" id="6719069">.</span><span class="ident" id="6719070"><a href="/gostd/net/mockserver_test.go.html#6718257">cs</a></span>&nbsp;<span class="op" id="6719073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719077"><a href="/gostd/net/mockserver_test.go.html#6719055">c</a></span><span class="op" id="6719078">.</span><span class="ident" id="6719079"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6719084">(</span><span class="op" id="6719085">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719091"><a href="/gostd/net/mockserver_test.go.html#6718868">dss</a></span><span class="op" id="6719094">.</span><span class="ident" id="6719095"><a href="/gostd/net/mockserver_test.go.html#6718239">cmu</a></span><span class="op" id="6719098">.</span><span class="ident" id="6719099"><a href="/gostd/sync/rwmutex.go.html#1458554">Unlock</a></span><span class="op" id="6719105">(</span><span class="op" id="6719106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6719109">return</span>&nbsp;<span class="builtintype" id="6719116">nil</span><br>
<span class="lineno"></span><span class="op" id="6719120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="6719123">func</span>&nbsp;<span class="ident" id="6719128">newDualStackServer</span><span class="op" id="6719146">(</span><span class="ident" id="6719147">lns</span>&nbsp;<span class="op" id="6719151">[</span><span class="op" id="6719152">]</span><span class="ident" id="6719153"><a href="/gostd/net/mockserver_test.go.html#6718087">streamListener</a></span><span class="op" id="6719167">)</span>&nbsp;<span class="op" id="6719169">(</span><span class="op" id="6719170">*</span><span class="ident" id="6719171"><a href="/gostd/net/mockserver_test.go.html#6718157">dualStackServer</a></span><span class="op" id="6719186">,</span>&nbsp;<span class="builtintype" id="6719188">error</span><span class="op" id="6719193">)</span>&nbsp;<span class="op" id="6719195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719198">dss</span>&nbsp;<span class="op" id="6719202">:=</span>&nbsp;<span class="op" id="6719205">&amp;</span><span class="ident" id="6719206"><a href="/gostd/net/mockserver_test.go.html#6718157">dualStackServer</a></span><span class="op" id="6719221">{</span><span class="ident" id="6719222"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6719225">:</span>&nbsp;<span class="ident" id="6719227"><a href="/gostd/net/mockserver_test.go.html#6719147">lns</a></span><span class="op" id="6719230">,</span>&nbsp;<span class="ident" id="6719232"><a href="/gostd/net/mockserver_test.go.html#6718225">port</a></span><span class="op" id="6719236">:</span>&nbsp;<span class="string" id="6719238">&#34;0&#34;</span><span class="op" id="6719241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6719244">for</span>&nbsp;<span class="ident" id="6719248">i</span>&nbsp;<span class="op" id="6719250">:=</span>&nbsp;<span class="keyword" id="6719253">range</span>&nbsp;<span class="ident" id="6719259"><a href="/gostd/net/mockserver_test.go.html#6719198">dss</a></span><span class="op" id="6719262">.</span><span class="ident" id="6719263"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span>&nbsp;<span class="op" id="6719267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719271">ln</span><span class="op" id="6719273">,</span>&nbsp;<span class="ident" id="6719275">err</span>&nbsp;<span class="op" id="6719279">:=</span>&nbsp;<span class="ident" id="6719282"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6719288">(</span><span class="ident" id="6719289"><a href="/gostd/net/mockserver_test.go.html#6719198">dss</a></span><span class="op" id="6719292">.</span><span class="ident" id="6719293"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6719296">[</span><span class="ident" id="6719297"><a href="/gostd/net/mockserver_test.go.html#6719248">i</a></span><span class="op" id="6719298">]</span><span class="op" id="6719299">.</span><span class="ident" id="6719300"><a href="/gostd/net/mockserver_test.go.html#6718112">net</a></span><span class="op" id="6719303">,</span>&nbsp;<span class="ident" id="6719305"><a href="/gostd/net/mockserver_test.go.html#6719198">dss</a></span><span class="op" id="6719308">.</span><span class="ident" id="6719309"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6719312">[</span><span class="ident" id="6719313"><a href="/gostd/net/mockserver_test.go.html#6719248">i</a></span><span class="op" id="6719314">]</span><span class="op" id="6719315">.</span><span class="ident" id="6719316"><a href="/gostd/net/mockserver_test.go.html#6718117">addr</a></span><span class="op" id="6719320">+</span><span class="string" id="6719321">&#34;:&#34;</span><span class="op" id="6719324">+</span><span class="ident" id="6719325"><a href="/gostd/net/mockserver_test.go.html#6719198">dss</a></span><span class="op" id="6719328">.</span><span class="ident" id="6719329"><a href="/gostd/net/mockserver_test.go.html#6718225">port</a></span><span class="op" id="6719333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6719337">if</span>&nbsp;<span class="ident" id="6719340"><a href="/gostd/net/mockserver_test.go.html#6719275">err</a></span>&nbsp;<span class="op" id="6719344">!=</span>&nbsp;<span class="builtintype" id="6719347">nil</span>&nbsp;<span class="op" id="6719351">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719356"><a href="/gostd/net/mockserver_test.go.html#6719198">dss</a></span><span class="op" id="6719359">.</span><span class="ident" id="6719360"><a href="/gostd/net/mockserver_test.go.html#6718890">teardown</a></span><span class="op" id="6719368">(</span><span class="op" id="6719369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6719374">return</span>&nbsp;<span class="builtintype" id="6719381">nil</span><span class="op" id="6719384">,</span>&nbsp;<span class="ident" id="6719386"><a href="/gostd/net/mockserver_test.go.html#6719275">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719396"><a href="/gostd/net/mockserver_test.go.html#6719198">dss</a></span><span class="op" id="6719399">.</span><span class="ident" id="6719400"><a href="/gostd/net/mockserver_test.go.html#6718202">lns</a></span><span class="op" id="6719403">[</span><span class="ident" id="6719404"><a href="/gostd/net/mockserver_test.go.html#6719248">i</a></span><span class="op" id="6719405">]</span><span class="op" id="6719406">.</span><span class="ident" id="6719407"><a href="/gostd/net/mockserver_test.go.html#6718130">ln</a></span>&nbsp;<span class="op" id="6719410">=</span>&nbsp;<span class="ident" id="6719412"><a href="/gostd/net/mockserver_test.go.html#6719271">ln</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6719417">if</span>&nbsp;<span class="ident" id="6719420"><a href="/gostd/net/mockserver_test.go.html#6719198">dss</a></span><span class="op" id="6719423">.</span><span class="ident" id="6719424"><a href="/gostd/net/mockserver_test.go.html#6718225">port</a></span>&nbsp;<span class="op" id="6719429">==</span>&nbsp;<span class="string" id="6719432">&#34;0&#34;</span>&nbsp;<span class="op" id="6719436">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6719441">if</span>&nbsp;<span class="ident" id="6719444">_</span><span class="op" id="6719445">,</span>&nbsp;<span class="ident" id="6719447"><a href="/gostd/net/mockserver_test.go.html#6719198">dss</a></span><span class="op" id="6719450">.</span><span class="ident" id="6719451"><a href="/gostd/net/mockserver_test.go.html#6718225">port</a></span><span class="op" id="6719455">,</span>&nbsp;<span class="ident" id="6719457"><a href="/gostd/net/mockserver_test.go.html#6719275">err</a></span>&nbsp;<span class="op" id="6719461">=</span>&nbsp;<span class="ident" id="6719463"><a href="/gostd/net/ipsock.go.html#3313208">SplitHostPort</a></span><span class="op" id="6719476">(</span><span class="ident" id="6719477"><a href="/gostd/net/mockserver_test.go.html#6719271">ln</a></span><span class="op" id="6719479">.</span><span class="ident" id="6719480"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6719484">(</span><span class="op" id="6719485">)</span><span class="op" id="6719486">.</span><span class="ident" id="6719487"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6719493">(</span><span class="op" id="6719494">)</span><span class="op" id="6719495">)</span><span class="op" id="6719496">;</span>&nbsp;<span class="ident" id="6719498"><a href="/gostd/net/mockserver_test.go.html#6719275">err</a></span>&nbsp;<span class="op" id="6719502">!=</span>&nbsp;<span class="builtintype" id="6719505">nil</span>&nbsp;<span class="op" id="6719509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6719515"><a href="/gostd/net/mockserver_test.go.html#6719198">dss</a></span><span class="op" id="6719518">.</span><span class="ident" id="6719519"><a href="/gostd/net/mockserver_test.go.html#6718890">teardown</a></span><span class="op" id="6719527">(</span><span class="op" id="6719528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6719534">return</span>&nbsp;<span class="builtintype" id="6719541">nil</span><span class="op" id="6719544">,</span>&nbsp;<span class="ident" id="6719546"><a href="/gostd/net/mockserver_test.go.html#6719275">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719557">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6719560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6719563">return</span>&nbsp;<span class="ident" id="6719570"><a href="/gostd/net/mockserver_test.go.html#6719198">dss</a></span><span class="op" id="6719573">,</span>&nbsp;<span class="builtintype" id="6719575">nil</span><br>
<span class="lineno"></span><span class="op" id="6719579">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
