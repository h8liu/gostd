<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html" class="current">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6618013">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6618069">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6618123">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6618174">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;API&nbsp;tests&nbsp;across&nbsp;platforms&nbsp;and&nbsp;will&nbsp;never&nbsp;have&nbsp;a&nbsp;build</span><br>
<span class="lineno"></span><span class="comment" id="6618253">//&nbsp;tag.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6618262">package</span>&nbsp;<span class="ident" id="6618270">net</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="6618275">import</span>&nbsp;<span class="op" id="6618282">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6618285">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6618291">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6618302">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6618313">&#34;time&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6618320">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6618323">var</span>&nbsp;<span class="ident" id="6618327">connTests</span>&nbsp;<span class="op" id="6618337">=</span>&nbsp;<span class="op" id="6618339">[</span><span class="op" id="6618340">]</span><span class="keyword" id="6618341">struct</span>&nbsp;<span class="op" id="6618348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618351">net</span>&nbsp;&nbsp;<span class="builtintype" id="6618356">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6618364">addr</span>&nbsp;<span class="builtintype" id="6618369">string</span><br>
<span class="lineno">20</span><span class="op" id="6618376">}</span><span class="op" id="6618377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6618380">{</span><span class="string" id="6618381">&#34;tcp&#34;</span><span class="op" id="6618386">,</span>&nbsp;<span class="string" id="6618388">&#34;127.0.0.1:0&#34;</span><span class="op" id="6618401">}</span><span class="op" id="6618402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6618405">{</span><span class="string" id="6618406">&#34;unix&#34;</span><span class="op" id="6618412">,</span>&nbsp;<span class="ident" id="6618414"><a href="/gostd/net/protoconn_test.go.html#6739766">testUnixAddr</a></span><span class="op" id="6618426">(</span><span class="op" id="6618427">)</span><span class="op" id="6618428">}</span><span class="op" id="6618429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6618432">{</span><span class="string" id="6618433">&#34;unixpacket&#34;</span><span class="op" id="6618445">,</span>&nbsp;<span class="ident" id="6618447"><a href="/gostd/net/protoconn_test.go.html#6739766">testUnixAddr</a></span><span class="op" id="6618459">(</span><span class="op" id="6618460">)</span><span class="op" id="6618461">}</span><span class="op" id="6618462">,</span><br>
<span class="lineno"></span><span class="op" id="6618464">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="6618467">//&nbsp;someTimeout&nbsp;is&nbsp;used&nbsp;just&nbsp;to&nbsp;test&nbsp;that&nbsp;net.Conn&nbsp;implementations</span><br>
<span class="lineno"></span><span class="comment" id="6618533">//&nbsp;don&#39;t&nbsp;explode&nbsp;when&nbsp;their&nbsp;SetFooDeadline&nbsp;methods&nbsp;are&nbsp;called.</span><br>
<span class="lineno"></span><span class="comment" id="6618596">//&nbsp;It&nbsp;isn&#39;t&nbsp;actually&nbsp;used&nbsp;for&nbsp;testing&nbsp;timeouts.</span><br>
<span class="lineno"></span><span class="keyword" id="6618644">const</span>&nbsp;<span class="ident" id="6618650">someTimeout</span>&nbsp;<span class="op" id="6618662">=</span>&nbsp;<span class="num" id="6618664">10</span>&nbsp;<span class="op" id="6618667">*</span>&nbsp;<span class="ident" id="6618669"><a href="/gostd/net/conn_test.go.html#6618313">time</a></span><span class="op" id="6618673">.</span><span class="ident" id="6618674"><a href="/gostd/time/time.go.html#2734862">Second</a></span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="6618682">func</span>&nbsp;<span class="ident" id="6618687">TestConnAndListener</span><span class="op" id="6618706">(</span><span class="ident" id="6618707">t</span>&nbsp;<span class="op" id="6618709">*</span><span class="ident" id="6618710"><a href="/gostd/net/conn_test.go.html#6618302">testing</a></span><span class="op" id="6618717">.</span><span class="ident" id="6618718"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6618719">)</span>&nbsp;<span class="op" id="6618721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618724">for</span>&nbsp;<span class="ident" id="6618728">_</span><span class="op" id="6618729">,</span>&nbsp;<span class="ident" id="6618731">tt</span>&nbsp;<span class="op" id="6618734">:=</span>&nbsp;<span class="keyword" id="6618737">range</span>&nbsp;<span class="ident" id="6618743"><a href="/gostd/net/conn_test.go.html#6618327">connTests</a></span>&nbsp;<span class="op" id="6618753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618757">switch</span>&nbsp;<span class="ident" id="6618764"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6618766">.</span><span class="ident" id="6618767"><a href="/gostd/net/conn_test.go.html#6618351">net</a></span>&nbsp;<span class="op" id="6618771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618775">case</span>&nbsp;<span class="string" id="6618780">&#34;unix&#34;</span><span class="op" id="6618786">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618791">switch</span>&nbsp;<span class="ident" id="6618798"><a href="/gostd/net/conn_test.go.html#6618291">runtime</a></span><span class="op" id="6618805">.</span><span class="ident" id="6618806"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6618811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618816">case</span>&nbsp;<span class="string" id="6618821">&#34;nacl&#34;</span><span class="op" id="6618827">,</span>&nbsp;<span class="string" id="6618829">&#34;plan9&#34;</span><span class="op" id="6618836">,</span>&nbsp;<span class="string" id="6618838">&#34;windows&#34;</span><span class="op" id="6618847">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618853">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6618865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618869">case</span>&nbsp;<span class="string" id="6618874">&#34;unixpacket&#34;</span><span class="op" id="6618886">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618891">switch</span>&nbsp;<span class="ident" id="6618898"><a href="/gostd/net/conn_test.go.html#6618291">runtime</a></span><span class="op" id="6618905">.</span><span class="ident" id="6618906"><a href="/gostd/runtime/extern.go.html#1533673">GOOS</a></span>&nbsp;<span class="op" id="6618911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618916">case</span>&nbsp;<span class="string" id="6618921">&#34;android&#34;</span><span class="op" id="6618930">,</span>&nbsp;<span class="string" id="6618932">&#34;darwin&#34;</span><span class="op" id="6618940">,</span>&nbsp;<span class="string" id="6618942">&#34;nacl&#34;</span><span class="op" id="6618948">,</span>&nbsp;<span class="string" id="6618950">&#34;openbsd&#34;</span><span class="op" id="6618959">,</span>&nbsp;<span class="string" id="6618961">&#34;plan9&#34;</span><span class="op" id="6618968">,</span>&nbsp;<span class="string" id="6618970">&#34;windows&#34;</span><span class="op" id="6618979">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618985">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6618997">case</span>&nbsp;<span class="string" id="6619002">&#34;freebsd&#34;</span><span class="op" id="6619011">:</span>&nbsp;<span class="comment" id="6619013">//&nbsp;FreeBSD&nbsp;8&nbsp;doesn&#39;t&nbsp;support&nbsp;unixpacket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619057">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6619069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6619073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619078">ln</span><span class="op" id="6619080">,</span>&nbsp;<span class="ident" id="6619082">err</span>&nbsp;<span class="op" id="6619086">:=</span>&nbsp;<span class="ident" id="6619089"><a href="/gostd/net/dial.go.html#3207117">Listen</a></span><span class="op" id="6619095">(</span><span class="ident" id="6619096"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619098">.</span><span class="ident" id="6619099"><a href="/gostd/net/conn_test.go.html#6618351">net</a></span><span class="op" id="6619102">,</span>&nbsp;<span class="ident" id="6619104"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619106">.</span><span class="ident" id="6619107"><a href="/gostd/net/conn_test.go.html#6618364">addr</a></span><span class="op" id="6619111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619115">if</span>&nbsp;<span class="ident" id="6619118"><a href="/gostd/net/conn_test.go.html#6619082">err</a></span>&nbsp;<span class="op" id="6619122">!=</span>&nbsp;<span class="builtintype" id="6619125">nil</span>&nbsp;<span class="op" id="6619129">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619134"><a href="/gostd/net/conn_test.go.html#6618707">t</a></span><span class="op" id="6619135">.</span><span class="ident" id="6619136"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6619142">(</span><span class="string" id="6619143">&#34;Listen&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6619162">,</span>&nbsp;<span class="ident" id="6619164"><a href="/gostd/net/conn_test.go.html#6619082">err</a></span><span class="op" id="6619167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6619171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619175">defer</span>&nbsp;<span class="keyword" id="6619181">func</span><span class="op" id="6619185">(</span><span class="ident" id="6619186">ln</span>&nbsp;<span class="ident" id="6619189"><a href="/gostd/net/net.go.html#3340703">Listener</a></span><span class="op" id="6619197">,</span>&nbsp;<span class="ident" id="6619199">net</span><span class="op" id="6619202">,</span>&nbsp;<span class="ident" id="6619204">addr</span>&nbsp;<span class="builtintype" id="6619209">string</span><span class="op" id="6619215">)</span>&nbsp;<span class="op" id="6619217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619222"><a href="/gostd/net/conn_test.go.html#6619186">ln</a></span><span class="op" id="6619224">.</span><span class="ident" id="6619225"><a href="/gostd/net/net.go.html#3340928">Close</a></span><span class="op" id="6619230">(</span><span class="op" id="6619231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619236">switch</span>&nbsp;<span class="ident" id="6619243"><a href="/gostd/net/conn_test.go.html#6619199">net</a></span>&nbsp;<span class="op" id="6619247">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619252">case</span>&nbsp;<span class="string" id="6619257">&#34;unix&#34;</span><span class="op" id="6619263">,</span>&nbsp;<span class="string" id="6619265">&#34;unixpacket&#34;</span><span class="op" id="6619277">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619283"><a href="/gostd/net/conn_test.go.html#6618285">os</a></span><span class="op" id="6619285">.</span><span class="ident" id="6619286"><a href="/gostd/os/file_unix.go.html#2459394">Remove</a></span><span class="op" id="6619292">(</span><span class="ident" id="6619293"><a href="/gostd/net/conn_test.go.html#6619204">addr</a></span><span class="op" id="6619297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6619302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6619306">}</span><span class="op" id="6619307">(</span><span class="ident" id="6619308"><a href="/gostd/net/conn_test.go.html#6619078">ln</a></span><span class="op" id="6619310">,</span>&nbsp;<span class="ident" id="6619312"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619314">.</span><span class="ident" id="6619315"><a href="/gostd/net/conn_test.go.html#6618351">net</a></span><span class="op" id="6619318">,</span>&nbsp;<span class="ident" id="6619320"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619322">.</span><span class="ident" id="6619323"><a href="/gostd/net/conn_test.go.html#6618364">addr</a></span><span class="op" id="6619327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619331">if</span>&nbsp;<span class="ident" id="6619334"><a href="/gostd/net/conn_test.go.html#6619078">ln</a></span><span class="op" id="6619336">.</span><span class="ident" id="6619337"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6619341">(</span><span class="op" id="6619342">)</span><span class="op" id="6619343">.</span><span class="ident" id="6619344"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6619351">(</span><span class="op" id="6619352">)</span>&nbsp;<span class="op" id="6619354">!=</span>&nbsp;<span class="ident" id="6619357"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619359">.</span><span class="ident" id="6619360"><a href="/gostd/net/conn_test.go.html#6618351">net</a></span>&nbsp;<span class="op" id="6619364">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619369"><a href="/gostd/net/conn_test.go.html#6618707">t</a></span><span class="op" id="6619370">.</span><span class="ident" id="6619371"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6619377">(</span><span class="string" id="6619378">&#34;got&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="6619399">,</span>&nbsp;<span class="ident" id="6619401"><a href="/gostd/net/conn_test.go.html#6619078">ln</a></span><span class="op" id="6619403">.</span><span class="ident" id="6619404"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6619408">(</span><span class="op" id="6619409">)</span><span class="op" id="6619410">.</span><span class="ident" id="6619411"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6619418">(</span><span class="op" id="6619419">)</span><span class="op" id="6619420">,</span>&nbsp;<span class="ident" id="6619422"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619424">.</span><span class="ident" id="6619425"><a href="/gostd/net/conn_test.go.html#6618351">net</a></span><span class="op" id="6619428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6619432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619437">done</span>&nbsp;<span class="op" id="6619442">:=</span>&nbsp;<span class="builtinfunc" id="6619445">make</span><span class="op" id="6619449">(</span><span class="keyword" id="6619450">chan</span>&nbsp;<span class="builtintype" id="6619455">int</span><span class="op" id="6619458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619462">go</span>&nbsp;<span class="ident" id="6619465"><a href="/gostd/net/conn_test.go.html#6620185">transponder</a></span><span class="op" id="6619476">(</span><span class="ident" id="6619477"><a href="/gostd/net/conn_test.go.html#6618707">t</a></span><span class="op" id="6619478">,</span>&nbsp;<span class="ident" id="6619480"><a href="/gostd/net/conn_test.go.html#6619078">ln</a></span><span class="op" id="6619482">,</span>&nbsp;<span class="ident" id="6619484"><a href="/gostd/net/conn_test.go.html#6619437">done</a></span><span class="op" id="6619488">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619493">c</span><span class="op" id="6619494">,</span>&nbsp;<span class="ident" id="6619496"><a href="/gostd/net/conn_test.go.html#6619082">err</a></span>&nbsp;<span class="op" id="6619500">:=</span>&nbsp;<span class="ident" id="6619503"><a href="/gostd/net/dial.go.html#3203459">Dial</a></span><span class="op" id="6619507">(</span><span class="ident" id="6619508"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619510">.</span><span class="ident" id="6619511"><a href="/gostd/net/conn_test.go.html#6618351">net</a></span><span class="op" id="6619514">,</span>&nbsp;<span class="ident" id="6619516"><a href="/gostd/net/conn_test.go.html#6619078">ln</a></span><span class="op" id="6619518">.</span><span class="ident" id="6619519"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6619523">(</span><span class="op" id="6619524">)</span><span class="op" id="6619525">.</span><span class="ident" id="6619526"><a href="/gostd/net/net.go.html#3334238">String</a></span><span class="op" id="6619532">(</span><span class="op" id="6619533">)</span><span class="op" id="6619534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619538">if</span>&nbsp;<span class="ident" id="6619541"><a href="/gostd/net/conn_test.go.html#6619082">err</a></span>&nbsp;<span class="op" id="6619545">!=</span>&nbsp;<span class="builtintype" id="6619548">nil</span>&nbsp;<span class="op" id="6619552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619557"><a href="/gostd/net/conn_test.go.html#6618707">t</a></span><span class="op" id="6619558">.</span><span class="ident" id="6619559"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6619565">(</span><span class="string" id="6619566">&#34;Dial&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6619583">,</span>&nbsp;<span class="ident" id="6619585"><a href="/gostd/net/conn_test.go.html#6619082">err</a></span><span class="op" id="6619588">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6619592">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619596">defer</span>&nbsp;<span class="ident" id="6619602"><a href="/gostd/net/conn_test.go.html#6619493">c</a></span><span class="op" id="6619603">.</span><span class="ident" id="6619604"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6619609">(</span><span class="op" id="6619610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619614">if</span>&nbsp;<span class="ident" id="6619617"><a href="/gostd/net/conn_test.go.html#6619493">c</a></span><span class="op" id="6619618">.</span><span class="ident" id="6619619"><a href="/gostd/net/net.go.html#3335052">LocalAddr</a></span><span class="op" id="6619628">(</span><span class="op" id="6619629">)</span><span class="op" id="6619630">.</span><span class="ident" id="6619631"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6619638">(</span><span class="op" id="6619639">)</span>&nbsp;<span class="op" id="6619641">!=</span>&nbsp;<span class="ident" id="6619644"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619646">.</span><span class="ident" id="6619647"><a href="/gostd/net/conn_test.go.html#6618351">net</a></span>&nbsp;<span class="op" id="6619651">||</span>&nbsp;<span class="ident" id="6619654"><a href="/gostd/net/conn_test.go.html#6619493">c</a></span><span class="op" id="6619655">.</span><span class="ident" id="6619656"><a href="/gostd/net/net.go.html#3335052">LocalAddr</a></span><span class="op" id="6619665">(</span><span class="op" id="6619666">)</span><span class="op" id="6619667">.</span><span class="ident" id="6619668"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6619675">(</span><span class="op" id="6619676">)</span>&nbsp;<span class="op" id="6619678">!=</span>&nbsp;<span class="ident" id="6619681"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619683">.</span><span class="ident" id="6619684"><a href="/gostd/net/conn_test.go.html#6618351">net</a></span>&nbsp;<span class="op" id="6619688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619693"><a href="/gostd/net/conn_test.go.html#6618707">t</a></span><span class="op" id="6619694">.</span><span class="ident" id="6619695"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6619701">(</span><span class="string" id="6619702">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6619731">,</span>&nbsp;<span class="ident" id="6619733"><a href="/gostd/net/conn_test.go.html#6619493">c</a></span><span class="op" id="6619734">.</span><span class="ident" id="6619735"><a href="/gostd/net/net.go.html#3335052">LocalAddr</a></span><span class="op" id="6619744">(</span><span class="op" id="6619745">)</span><span class="op" id="6619746">.</span><span class="ident" id="6619747"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6619754">(</span><span class="op" id="6619755">)</span><span class="op" id="6619756">,</span>&nbsp;<span class="ident" id="6619758"><a href="/gostd/net/conn_test.go.html#6619493">c</a></span><span class="op" id="6619759">.</span><span class="ident" id="6619760"><a href="/gostd/net/net.go.html#3335122">RemoteAddr</a></span><span class="op" id="6619770">(</span><span class="op" id="6619771">)</span><span class="op" id="6619772">.</span><span class="ident" id="6619773"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6619780">(</span><span class="op" id="6619781">)</span><span class="op" id="6619782">,</span>&nbsp;<span class="ident" id="6619784"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619786">.</span><span class="ident" id="6619787"><a href="/gostd/net/conn_test.go.html#6618351">net</a></span><span class="op" id="6619790">,</span>&nbsp;<span class="ident" id="6619792"><a href="/gostd/net/conn_test.go.html#6618731">tt</a></span><span class="op" id="6619794">.</span><span class="ident" id="6619795"><a href="/gostd/net/conn_test.go.html#6618351">net</a></span><span class="op" id="6619798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6619802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619806"><a href="/gostd/net/conn_test.go.html#6619493">c</a></span><span class="op" id="6619807">.</span><span class="ident" id="6619808"><a href="/gostd/net/net.go.html#3335726">SetDeadline</a></span><span class="op" id="6619819">(</span><span class="ident" id="6619820"><a href="/gostd/net/conn_test.go.html#6618313">time</a></span><span class="op" id="6619824">.</span><span class="ident" id="6619825"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6619828">(</span><span class="op" id="6619829">)</span><span class="op" id="6619830">.</span><span class="ident" id="6619831"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6619834">(</span><span class="ident" id="6619835"><a href="/gostd/net/conn_test.go.html#6618650">someTimeout</a></span><span class="op" id="6619846">)</span><span class="op" id="6619847">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619851"><a href="/gostd/net/conn_test.go.html#6619493">c</a></span><span class="op" id="6619852">.</span><span class="ident" id="6619853"><a href="/gostd/net/net.go.html#3335873">SetReadDeadline</a></span><span class="op" id="6619868">(</span><span class="ident" id="6619869"><a href="/gostd/net/conn_test.go.html#6618313">time</a></span><span class="op" id="6619873">.</span><span class="ident" id="6619874"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6619877">(</span><span class="op" id="6619878">)</span><span class="op" id="6619879">.</span><span class="ident" id="6619880"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6619883">(</span><span class="ident" id="6619884"><a href="/gostd/net/conn_test.go.html#6618650">someTimeout</a></span><span class="op" id="6619895">)</span><span class="op" id="6619896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6619900"><a href="/gostd/net/conn_test.go.html#6619493">c</a></span><span class="op" id="6619901">.</span><span class="ident" id="6619902"><a href="/gostd/net/net.go.html#3336140">SetWriteDeadline</a></span><span class="op" id="6619918">(</span><span class="ident" id="6619919"><a href="/gostd/net/conn_test.go.html#6618313">time</a></span><span class="op" id="6619923">.</span><span class="ident" id="6619924"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6619927">(</span><span class="op" id="6619928">)</span><span class="op" id="6619929">.</span><span class="ident" id="6619930"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6619933">(</span><span class="ident" id="6619934"><a href="/gostd/net/conn_test.go.html#6618650">someTimeout</a></span><span class="op" id="6619945">)</span><span class="op" id="6619946">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6619951">if</span>&nbsp;<span class="ident" id="6619954">_</span><span class="op" id="6619955">,</span>&nbsp;<span class="ident" id="6619957">err</span>&nbsp;<span class="op" id="6619961">:=</span>&nbsp;<span class="ident" id="6619964"><a href="/gostd/net/conn_test.go.html#6619493">c</a></span><span class="op" id="6619965">.</span><span class="ident" id="6619966"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6619971">(</span><span class="op" id="6619972">[</span><span class="op" id="6619973">]</span><span class="builtintype" id="6619974">byte</span><span class="op" id="6619978">(</span><span class="string" id="6619979">&#34;CONN&nbsp;TEST&#34;</span><span class="op" id="6619990">)</span><span class="op" id="6619991">)</span><span class="op" id="6619992">;</span>&nbsp;<span class="ident" id="6619994"><a href="/gostd/net/conn_test.go.html#6619957">err</a></span>&nbsp;<span class="op" id="6619998">!=</span>&nbsp;<span class="builtintype" id="6620001">nil</span>&nbsp;<span class="op" id="6620005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620010"><a href="/gostd/net/conn_test.go.html#6618707">t</a></span><span class="op" id="6620011">.</span><span class="ident" id="6620012"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6620018">(</span><span class="string" id="6620019">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6620042">,</span>&nbsp;<span class="ident" id="6620044"><a href="/gostd/net/conn_test.go.html#6619957">err</a></span><span class="op" id="6620047">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6620051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620055">rb</span>&nbsp;<span class="op" id="6620058">:=</span>&nbsp;<span class="builtinfunc" id="6620061">make</span><span class="op" id="6620065">(</span><span class="op" id="6620066">[</span><span class="op" id="6620067">]</span><span class="builtintype" id="6620068">byte</span><span class="op" id="6620072">,</span>&nbsp;<span class="num" id="6620074">128</span><span class="op" id="6620077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620081">if</span>&nbsp;<span class="ident" id="6620084">_</span><span class="op" id="6620085">,</span>&nbsp;<span class="ident" id="6620087">err</span>&nbsp;<span class="op" id="6620091">:=</span>&nbsp;<span class="ident" id="6620094"><a href="/gostd/net/conn_test.go.html#6619493">c</a></span><span class="op" id="6620095">.</span><span class="ident" id="6620096"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6620100">(</span><span class="ident" id="6620101"><a href="/gostd/net/conn_test.go.html#6620055">rb</a></span><span class="op" id="6620103">)</span><span class="op" id="6620104">;</span>&nbsp;<span class="ident" id="6620106"><a href="/gostd/net/conn_test.go.html#6620087">err</a></span>&nbsp;<span class="op" id="6620110">!=</span>&nbsp;<span class="builtintype" id="6620113">nil</span>&nbsp;<span class="op" id="6620117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620122"><a href="/gostd/net/conn_test.go.html#6618707">t</a></span><span class="op" id="6620123">.</span><span class="ident" id="6620124"><a href="/gostd/testing/testing.go.html#5480410">Fatalf</a></span><span class="op" id="6620130">(</span><span class="string" id="6620131">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6620153">,</span>&nbsp;<span class="ident" id="6620155"><a href="/gostd/net/conn_test.go.html#6620087">err</a></span><span class="op" id="6620158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6620162">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6620167">&lt;-</span><span class="ident" id="6620169"><a href="/gostd/net/conn_test.go.html#6619437">done</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6620175">}</span><br>
<span class="lineno"></span><span class="op" id="6620177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="6620180">func</span>&nbsp;<span class="ident" id="6620185">transponder</span><span class="op" id="6620196">(</span><span class="ident" id="6620197">t</span>&nbsp;<span class="op" id="6620199">*</span><span class="ident" id="6620200"><a href="/gostd/net/conn_test.go.html#6618302">testing</a></span><span class="op" id="6620207">.</span><span class="ident" id="6620208"><a href="/gostd/testing/testing.go.html#5477412">T</a></span><span class="op" id="6620209">,</span>&nbsp;<span class="ident" id="6620211">ln</span>&nbsp;<span class="ident" id="6620214"><a href="/gostd/net/net.go.html#3340703">Listener</a></span><span class="op" id="6620222">,</span>&nbsp;<span class="ident" id="6620224">done</span>&nbsp;<span class="keyword" id="6620229">chan</span><span class="op" id="6620233">&lt;-</span>&nbsp;<span class="builtintype" id="6620236">int</span><span class="op" id="6620239">)</span>&nbsp;<span class="op" id="6620241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620244">defer</span>&nbsp;<span class="keyword" id="6620250">func</span><span class="op" id="6620254">(</span><span class="op" id="6620255">)</span>&nbsp;<span class="op" id="6620257">{</span>&nbsp;<span class="ident" id="6620259"><a href="/gostd/net/conn_test.go.html#6620224">done</a></span>&nbsp;<span class="op" id="6620264">&lt;-</span>&nbsp;<span class="num" id="6620267">1</span>&nbsp;<span class="op" id="6620269">}</span><span class="op" id="6620270">(</span><span class="op" id="6620271">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620275">switch</span>&nbsp;<span class="ident" id="6620282">ln</span>&nbsp;<span class="op" id="6620285">:=</span>&nbsp;<span class="ident" id="6620288"><a href="/gostd/net/conn_test.go.html#6620211">ln</a></span><span class="op" id="6620290">.</span><span class="op" id="6620291">(</span><span class="keyword" id="6620292">type</span><span class="op" id="6620296">)</span>&nbsp;<span class="op" id="6620298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620301">case</span>&nbsp;<span class="op" id="6620306">*</span><span class="ident" id="6620307"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="6620318">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620322"><a href="/gostd/net/conn_test.go.html#6620282">ln</a></span><span class="op" id="6620324">.</span><span class="ident" id="6620325"><a href="/gostd/net/tcpsock_posix.go.html#3382941">SetDeadline</a></span><span class="op" id="6620336">(</span><span class="ident" id="6620337"><a href="/gostd/net/conn_test.go.html#6618313">time</a></span><span class="op" id="6620341">.</span><span class="ident" id="6620342"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6620345">(</span><span class="op" id="6620346">)</span><span class="op" id="6620347">.</span><span class="ident" id="6620348"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6620351">(</span><span class="ident" id="6620352"><a href="/gostd/net/conn_test.go.html#6618650">someTimeout</a></span><span class="op" id="6620363">)</span><span class="op" id="6620364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620367">case</span>&nbsp;<span class="op" id="6620372">*</span><span class="ident" id="6620373"><a href="/gostd/net/unixsock_posix.go.html#3403212">UnixListener</a></span><span class="op" id="6620385">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620389"><a href="/gostd/net/conn_test.go.html#6620282">ln</a></span><span class="op" id="6620391">.</span><span class="ident" id="6620392"><a href="/gostd/net/unixsock_posix.go.html#3405415">SetDeadline</a></span><span class="op" id="6620403">(</span><span class="ident" id="6620404"><a href="/gostd/net/conn_test.go.html#6618313">time</a></span><span class="op" id="6620408">.</span><span class="ident" id="6620409"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6620412">(</span><span class="op" id="6620413">)</span><span class="op" id="6620414">.</span><span class="ident" id="6620415"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6620418">(</span><span class="ident" id="6620419"><a href="/gostd/net/conn_test.go.html#6618650">someTimeout</a></span><span class="op" id="6620430">)</span><span class="op" id="6620431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6620434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620437">c</span><span class="op" id="6620438">,</span>&nbsp;<span class="ident" id="6620440">err</span>&nbsp;<span class="op" id="6620444">:=</span>&nbsp;<span class="ident" id="6620447"><a href="/gostd/net/conn_test.go.html#6620211">ln</a></span><span class="op" id="6620449">.</span><span class="ident" id="6620450"><a href="/gostd/net/net.go.html#3340795">Accept</a></span><span class="op" id="6620456">(</span><span class="op" id="6620457">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620460">if</span>&nbsp;<span class="ident" id="6620463"><a href="/gostd/net/conn_test.go.html#6620440">err</a></span>&nbsp;<span class="op" id="6620467">!=</span>&nbsp;<span class="builtintype" id="6620470">nil</span>&nbsp;<span class="op" id="6620474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620478"><a href="/gostd/net/conn_test.go.html#6620197">t</a></span><span class="op" id="6620479">.</span><span class="ident" id="6620480"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6620486">(</span><span class="string" id="6620487">&#34;Listener.Accept&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6620515">,</span>&nbsp;<span class="ident" id="6620517"><a href="/gostd/net/conn_test.go.html#6620440">err</a></span><span class="op" id="6620520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620524">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6620532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620535">defer</span>&nbsp;<span class="ident" id="6620541"><a href="/gostd/net/conn_test.go.html#6620437">c</a></span><span class="op" id="6620542">.</span><span class="ident" id="6620543"><a href="/gostd/net/net.go.html#3334987">Close</a></span><span class="op" id="6620548">(</span><span class="op" id="6620549">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620552">network</span>&nbsp;<span class="op" id="6620560">:=</span>&nbsp;<span class="ident" id="6620563"><a href="/gostd/net/conn_test.go.html#6620211">ln</a></span><span class="op" id="6620565">.</span><span class="ident" id="6620566"><a href="/gostd/net/net.go.html#3340993">Addr</a></span><span class="op" id="6620570">(</span><span class="op" id="6620571">)</span><span class="op" id="6620572">.</span><span class="ident" id="6620573"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6620580">(</span><span class="op" id="6620581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620584">if</span>&nbsp;<span class="ident" id="6620587"><a href="/gostd/net/conn_test.go.html#6620437">c</a></span><span class="op" id="6620588">.</span><span class="ident" id="6620589"><a href="/gostd/net/net.go.html#3335052">LocalAddr</a></span><span class="op" id="6620598">(</span><span class="op" id="6620599">)</span><span class="op" id="6620600">.</span><span class="ident" id="6620601"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6620608">(</span><span class="op" id="6620609">)</span>&nbsp;<span class="op" id="6620611">!=</span>&nbsp;<span class="ident" id="6620614"><a href="/gostd/net/conn_test.go.html#6620552">network</a></span>&nbsp;<span class="op" id="6620622">||</span>&nbsp;<span class="ident" id="6620625"><a href="/gostd/net/conn_test.go.html#6620437">c</a></span><span class="op" id="6620626">.</span><span class="ident" id="6620627"><a href="/gostd/net/net.go.html#3335052">LocalAddr</a></span><span class="op" id="6620636">(</span><span class="op" id="6620637">)</span><span class="op" id="6620638">.</span><span class="ident" id="6620639"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6620646">(</span><span class="op" id="6620647">)</span>&nbsp;<span class="op" id="6620649">!=</span>&nbsp;<span class="ident" id="6620652"><a href="/gostd/net/conn_test.go.html#6620552">network</a></span>&nbsp;<span class="op" id="6620660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620664"><a href="/gostd/net/conn_test.go.html#6620197">t</a></span><span class="op" id="6620665">.</span><span class="ident" id="6620666"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6620672">(</span><span class="string" id="6620673">&#34;got&nbsp;%v-&gt;%v;&nbsp;expected&nbsp;%v-&gt;%v&#34;</span><span class="op" id="6620702">,</span>&nbsp;<span class="ident" id="6620704"><a href="/gostd/net/conn_test.go.html#6620437">c</a></span><span class="op" id="6620705">.</span><span class="ident" id="6620706"><a href="/gostd/net/net.go.html#3335052">LocalAddr</a></span><span class="op" id="6620715">(</span><span class="op" id="6620716">)</span><span class="op" id="6620717">.</span><span class="ident" id="6620718"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6620725">(</span><span class="op" id="6620726">)</span><span class="op" id="6620727">,</span>&nbsp;<span class="ident" id="6620729"><a href="/gostd/net/conn_test.go.html#6620437">c</a></span><span class="op" id="6620730">.</span><span class="ident" id="6620731"><a href="/gostd/net/net.go.html#3335122">RemoteAddr</a></span><span class="op" id="6620741">(</span><span class="op" id="6620742">)</span><span class="op" id="6620743">.</span><span class="ident" id="6620744"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="6620751">(</span><span class="op" id="6620752">)</span><span class="op" id="6620753">,</span>&nbsp;<span class="ident" id="6620755"><a href="/gostd/net/conn_test.go.html#6620552">network</a></span><span class="op" id="6620762">,</span>&nbsp;<span class="ident" id="6620764"><a href="/gostd/net/conn_test.go.html#6620552">network</a></span><span class="op" id="6620771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620775">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6620783">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620786"><a href="/gostd/net/conn_test.go.html#6620437">c</a></span><span class="op" id="6620787">.</span><span class="ident" id="6620788"><a href="/gostd/net/net.go.html#3335726">SetDeadline</a></span><span class="op" id="6620799">(</span><span class="ident" id="6620800"><a href="/gostd/net/conn_test.go.html#6618313">time</a></span><span class="op" id="6620804">.</span><span class="ident" id="6620805"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6620808">(</span><span class="op" id="6620809">)</span><span class="op" id="6620810">.</span><span class="ident" id="6620811"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6620814">(</span><span class="ident" id="6620815"><a href="/gostd/net/conn_test.go.html#6618650">someTimeout</a></span><span class="op" id="6620826">)</span><span class="op" id="6620827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620830"><a href="/gostd/net/conn_test.go.html#6620437">c</a></span><span class="op" id="6620831">.</span><span class="ident" id="6620832"><a href="/gostd/net/net.go.html#3335873">SetReadDeadline</a></span><span class="op" id="6620847">(</span><span class="ident" id="6620848"><a href="/gostd/net/conn_test.go.html#6618313">time</a></span><span class="op" id="6620852">.</span><span class="ident" id="6620853"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6620856">(</span><span class="op" id="6620857">)</span><span class="op" id="6620858">.</span><span class="ident" id="6620859"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6620862">(</span><span class="ident" id="6620863"><a href="/gostd/net/conn_test.go.html#6618650">someTimeout</a></span><span class="op" id="6620874">)</span><span class="op" id="6620875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620878"><a href="/gostd/net/conn_test.go.html#6620437">c</a></span><span class="op" id="6620879">.</span><span class="ident" id="6620880"><a href="/gostd/net/net.go.html#3336140">SetWriteDeadline</a></span><span class="op" id="6620896">(</span><span class="ident" id="6620897"><a href="/gostd/net/conn_test.go.html#6618313">time</a></span><span class="op" id="6620901">.</span><span class="ident" id="6620902"><a href="/gostd/time/time.go.html#2743088">Now</a></span><span class="op" id="6620905">(</span><span class="op" id="6620906">)</span><span class="op" id="6620907">.</span><span class="ident" id="6620908"><a href="/gostd/time/time.go.html#2738615">Add</a></span><span class="op" id="6620911">(</span><span class="ident" id="6620912"><a href="/gostd/net/conn_test.go.html#6618650">someTimeout</a></span><span class="op" id="6620923">)</span><span class="op" id="6620924">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620928">b</span>&nbsp;<span class="op" id="6620930">:=</span>&nbsp;<span class="builtinfunc" id="6620933">make</span><span class="op" id="6620937">(</span><span class="op" id="6620938">[</span><span class="op" id="6620939">]</span><span class="builtintype" id="6620940">byte</span><span class="op" id="6620944">,</span>&nbsp;<span class="num" id="6620946">128</span><span class="op" id="6620949">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620952">n</span><span class="op" id="6620953">,</span>&nbsp;<span class="ident" id="6620955"><a href="/gostd/net/conn_test.go.html#6620440">err</a></span>&nbsp;<span class="op" id="6620959">:=</span>&nbsp;<span class="ident" id="6620962"><a href="/gostd/net/conn_test.go.html#6620437">c</a></span><span class="op" id="6620963">.</span><span class="ident" id="6620964"><a href="/gostd/net/net.go.html#3334618">Read</a></span><span class="op" id="6620968">(</span><span class="ident" id="6620969"><a href="/gostd/net/conn_test.go.html#6620928">b</a></span><span class="op" id="6620970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6620973">if</span>&nbsp;<span class="ident" id="6620976"><a href="/gostd/net/conn_test.go.html#6620440">err</a></span>&nbsp;<span class="op" id="6620980">!=</span>&nbsp;<span class="builtintype" id="6620983">nil</span>&nbsp;<span class="op" id="6620987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6620991"><a href="/gostd/net/conn_test.go.html#6620197">t</a></span><span class="op" id="6620992">.</span><span class="ident" id="6620993"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6620999">(</span><span class="string" id="6621000">&#34;Conn.Read&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6621022">,</span>&nbsp;<span class="ident" id="6621024"><a href="/gostd/net/conn_test.go.html#6620440">err</a></span><span class="op" id="6621027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6621031">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6621039">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6621042">if</span>&nbsp;<span class="ident" id="6621045">_</span><span class="op" id="6621046">,</span>&nbsp;<span class="ident" id="6621048">err</span>&nbsp;<span class="op" id="6621052">:=</span>&nbsp;<span class="ident" id="6621055"><a href="/gostd/net/conn_test.go.html#6620437">c</a></span><span class="op" id="6621056">.</span><span class="ident" id="6621057"><a href="/gostd/net/net.go.html#3334839">Write</a></span><span class="op" id="6621062">(</span><span class="ident" id="6621063"><a href="/gostd/net/conn_test.go.html#6620928">b</a></span><span class="op" id="6621064">[</span><span class="op" id="6621065">:</span><span class="ident" id="6621066"><a href="/gostd/net/conn_test.go.html#6620952">n</a></span><span class="op" id="6621067">]</span><span class="op" id="6621068">)</span><span class="op" id="6621069">;</span>&nbsp;<span class="ident" id="6621071"><a href="/gostd/net/conn_test.go.html#6621048">err</a></span>&nbsp;<span class="op" id="6621075">!=</span>&nbsp;<span class="builtintype" id="6621078">nil</span>&nbsp;<span class="op" id="6621082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6621086"><a href="/gostd/net/conn_test.go.html#6620197">t</a></span><span class="op" id="6621087">.</span><span class="ident" id="6621088"><a href="/gostd/testing/testing.go.html#5480102">Errorf</a></span><span class="op" id="6621094">(</span><span class="string" id="6621095">&#34;Conn.Write&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6621118">,</span>&nbsp;<span class="ident" id="6621120"><a href="/gostd/net/conn_test.go.html#6621048">err</a></span><span class="op" id="6621123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6621127">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6621135">}</span><br>
<span class="lineno"></span><span class="op" id="6621137">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
