<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html" class="current">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3309766">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3309821">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3309875">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3309926">package</span>&nbsp;<span class="ident" id="3309934">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3309939">import</span>&nbsp;<span class="op" id="3309946">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3309949">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3309961">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3309969">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="3309979">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3309982">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="3310059">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="3310144">func</span>&nbsp;<span class="ident" id="3310149">SortImports</span><span class="op" id="3310160">(</span><span class="ident" id="3310161">fset</span>&nbsp;<span class="op" id="3310166">*</span><span class="ident" id="3310167">token</span><span class="op" id="3310172">.</span><span class="ident" id="3310173">FileSet</span><span class="op" id="3310180">,</span>&nbsp;<span class="ident" id="3310182">f</span>&nbsp;<span class="op" id="3310184">*</span><span class="ident" id="3310185">File</span><span class="op" id="3310189">)</span>&nbsp;<span class="op" id="3310191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310194">for</span>&nbsp;<span class="ident" id="3310198">_</span><span class="op" id="3310199">,</span>&nbsp;<span class="ident" id="3310201">d</span>&nbsp;<span class="op" id="3310203">:=</span>&nbsp;<span class="keyword" id="3310206">range</span>&nbsp;<span class="ident" id="3310212">f</span><span class="op" id="3310213">.</span><span class="ident" id="3310214">Decls</span>&nbsp;<span class="op" id="3310220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3310224">d</span><span class="op" id="3310225">,</span>&nbsp;<span class="ident" id="3310227">ok</span>&nbsp;<span class="op" id="3310230">:=</span>&nbsp;<span class="ident" id="3310233">d</span><span class="op" id="3310234">.</span><span class="op" id="3310235">(</span><span class="op" id="3310236">*</span><span class="ident" id="3310237">GenDecl</span><span class="op" id="3310244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310248">if</span>&nbsp;<span class="op" id="3310251">!</span><span class="ident" id="3310252">ok</span>&nbsp;<span class="op" id="3310255">||</span>&nbsp;<span class="ident" id="3310258">d</span><span class="op" id="3310259">.</span><span class="ident" id="3310260">Tok</span>&nbsp;<span class="op" id="3310264">!=</span>&nbsp;<span class="ident" id="3310267">token</span><span class="op" id="3310272">.</span><span class="ident" id="3310273">IMPORT</span>&nbsp;<span class="op" id="3310280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310285">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310333">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310365">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3310373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310378">if</span>&nbsp;<span class="op" id="3310381">!</span><span class="ident" id="3310382">d</span><span class="op" id="3310383">.</span><span class="ident" id="3310384">Lparen</span><span class="op" id="3310390">.</span><span class="ident" id="3310391">IsValid</span><span class="op" id="3310398">(</span><span class="op" id="3310399">)</span>&nbsp;<span class="op" id="3310401">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310406">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310444">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3310455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310460">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3310518">i</span>&nbsp;<span class="op" id="3310520">:=</span>&nbsp;<span class="num" id="3310523">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3310527">specs</span>&nbsp;<span class="op" id="3310533">:=</span>&nbsp;<span class="ident" id="3310536">d</span><span class="op" id="3310537">.</span><span class="ident" id="3310538">Specs</span><span class="op" id="3310543">[</span><span class="op" id="3310544">:</span><span class="num" id="3310545">0</span><span class="op" id="3310546">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310550">for</span>&nbsp;<span class="ident" id="3310554">j</span><span class="op" id="3310555">,</span>&nbsp;<span class="ident" id="3310557">s</span>&nbsp;<span class="op" id="3310559">:=</span>&nbsp;<span class="keyword" id="3310562">range</span>&nbsp;<span class="ident" id="3310568">d</span><span class="op" id="3310569">.</span><span class="ident" id="3310570">Specs</span>&nbsp;<span class="op" id="3310576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310581">if</span>&nbsp;<span class="ident" id="3310584">j</span>&nbsp;<span class="op" id="3310586">&gt;</span>&nbsp;<span class="ident" id="3310588">i</span>&nbsp;<span class="op" id="3310590">&amp;&amp;</span>&nbsp;<span class="ident" id="3310593">fset</span><span class="op" id="3310597">.</span><span class="ident" id="3310598">Position</span><span class="op" id="3310606">(</span><span class="ident" id="3310607">s</span><span class="op" id="3310608">.</span><span class="ident" id="3310609">Pos</span><span class="op" id="3310612">(</span><span class="op" id="3310613">)</span><span class="op" id="3310614">)</span><span class="op" id="3310615">.</span><span class="ident" id="3310616">Line</span>&nbsp;<span class="op" id="3310621">&gt;</span>&nbsp;<span class="num" id="3310623">1</span><span class="op" id="3310624">+</span><span class="ident" id="3310625">fset</span><span class="op" id="3310629">.</span><span class="ident" id="3310630">Position</span><span class="op" id="3310638">(</span><span class="ident" id="3310639">d</span><span class="op" id="3310640">.</span><span class="ident" id="3310641">Specs</span><span class="op" id="3310646">[</span><span class="ident" id="3310647">j</span><span class="op" id="3310648">-</span><span class="num" id="3310649">1</span><span class="op" id="3310650">]</span><span class="op" id="3310651">.</span><span class="ident" id="3310652">End</span><span class="op" id="3310655">(</span><span class="op" id="3310656">)</span><span class="op" id="3310657">)</span><span class="op" id="3310658">.</span><span class="ident" id="3310659">Line</span>&nbsp;<span class="op" id="3310664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310670">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3310712">specs</span>&nbsp;<span class="op" id="3310718">=</span>&nbsp;<span class="builtinfunc" id="3310720">append</span><span class="op" id="3310726">(</span><span class="ident" id="3310727">specs</span><span class="op" id="3310732">,</span>&nbsp;<span class="ident" id="3310734">sortSpecs</span><span class="op" id="3310743">(</span><span class="ident" id="3310744">fset</span><span class="op" id="3310748">,</span>&nbsp;<span class="ident" id="3310750">f</span><span class="op" id="3310751">,</span>&nbsp;<span class="ident" id="3310753">d</span><span class="op" id="3310754">.</span><span class="ident" id="3310755">Specs</span><span class="op" id="3310760">[</span><span class="ident" id="3310761">i</span><span class="op" id="3310762">:</span><span class="ident" id="3310763">j</span><span class="op" id="3310764">]</span><span class="op" id="3310765">)</span><span class="op" id="3310766">...</span><span class="op" id="3310769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3310775">i</span>&nbsp;<span class="op" id="3310777">=</span>&nbsp;<span class="ident" id="3310779">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3310784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3310788">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3310792">specs</span>&nbsp;<span class="op" id="3310798">=</span>&nbsp;<span class="builtinfunc" id="3310800">append</span><span class="op" id="3310806">(</span><span class="ident" id="3310807">specs</span><span class="op" id="3310812">,</span>&nbsp;<span class="ident" id="3310814">sortSpecs</span><span class="op" id="3310823">(</span><span class="ident" id="3310824">fset</span><span class="op" id="3310828">,</span>&nbsp;<span class="ident" id="3310830">f</span><span class="op" id="3310831">,</span>&nbsp;<span class="ident" id="3310833">d</span><span class="op" id="3310834">.</span><span class="ident" id="3310835">Specs</span><span class="op" id="3310840">[</span><span class="ident" id="3310841">i</span><span class="op" id="3310842">:</span><span class="op" id="3310843">]</span><span class="op" id="3310844">)</span><span class="op" id="3310845">...</span><span class="op" id="3310848">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3310852">d</span><span class="op" id="3310853">.</span><span class="ident" id="3310854">Specs</span>&nbsp;<span class="op" id="3310860">=</span>&nbsp;<span class="ident" id="3310862">specs</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310871">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310942">if</span>&nbsp;<span class="builtinfunc" id="3310945">len</span><span class="op" id="3310948">(</span><span class="ident" id="3310949">d</span><span class="op" id="3310950">.</span><span class="ident" id="3310951">Specs</span><span class="op" id="3310956">)</span>&nbsp;<span class="op" id="3310958">&gt;</span>&nbsp;<span class="num" id="3310960">0</span>&nbsp;<span class="op" id="3310962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3310967">lastSpec</span>&nbsp;<span class="op" id="3310976">:=</span>&nbsp;<span class="ident" id="3310979">d</span><span class="op" id="3310980">.</span><span class="ident" id="3310981">Specs</span><span class="op" id="3310986">[</span><span class="builtinfunc" id="3310987">len</span><span class="op" id="3310990">(</span><span class="ident" id="3310991">d</span><span class="op" id="3310992">.</span><span class="ident" id="3310993">Specs</span><span class="op" id="3310998">)</span><span class="op" id="3310999">-</span><span class="num" id="3311000">1</span><span class="op" id="3311001">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311006">lastLine</span>&nbsp;<span class="op" id="3311015">:=</span>&nbsp;<span class="ident" id="3311018">fset</span><span class="op" id="3311022">.</span><span class="ident" id="3311023">Position</span><span class="op" id="3311031">(</span><span class="ident" id="3311032">lastSpec</span><span class="op" id="3311040">.</span><span class="ident" id="3311041">Pos</span><span class="op" id="3311044">(</span><span class="op" id="3311045">)</span><span class="op" id="3311046">)</span><span class="op" id="3311047">.</span><span class="ident" id="3311048">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311056">if</span>&nbsp;<span class="ident" id="3311059">rParenLine</span>&nbsp;<span class="op" id="3311070">:=</span>&nbsp;<span class="ident" id="3311073">fset</span><span class="op" id="3311077">.</span><span class="ident" id="3311078">Position</span><span class="op" id="3311086">(</span><span class="ident" id="3311087">d</span><span class="op" id="3311088">.</span><span class="ident" id="3311089">Rparen</span><span class="op" id="3311095">)</span><span class="op" id="3311096">.</span><span class="ident" id="3311097">Line</span><span class="op" id="3311101">;</span>&nbsp;<span class="ident" id="3311103">rParenLine</span>&nbsp;<span class="op" id="3311114">&gt;</span>&nbsp;<span class="ident" id="3311116">lastLine</span><span class="op" id="3311124">+</span><span class="num" id="3311125">1</span>&nbsp;<span class="op" id="3311127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311133">fset</span><span class="op" id="3311137">.</span><span class="ident" id="3311138">File</span><span class="op" id="3311142">(</span><span class="ident" id="3311143">d</span><span class="op" id="3311144">.</span><span class="ident" id="3311145">Rparen</span><span class="op" id="3311151">)</span><span class="op" id="3311152">.</span><span class="ident" id="3311153">MergeLine</span><span class="op" id="3311162">(</span><span class="ident" id="3311163">rParenLine</span>&nbsp;<span class="op" id="3311174">-</span>&nbsp;<span class="num" id="3311176">1</span><span class="op" id="3311177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311186">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311189">}</span><br>
<span class="lineno"></span><span class="op" id="3311191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3311194">func</span>&nbsp;<span class="ident" id="3311199">importPath</span><span class="op" id="3311209">(</span><span class="ident" id="3311210">s</span>&nbsp;<span class="ident" id="3311212">Spec</span><span class="op" id="3311216">)</span>&nbsp;<span class="builtintype" id="3311218">string</span>&nbsp;<span class="op" id="3311225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311228">t</span><span class="op" id="3311229">,</span>&nbsp;<span class="ident" id="3311231">err</span>&nbsp;<span class="op" id="3311235">:=</span>&nbsp;<span class="ident" id="3311238">strconv</span><span class="op" id="3311245">.</span><span class="ident" id="3311246">Unquote</span><span class="op" id="3311253">(</span><span class="ident" id="3311254">s</span><span class="op" id="3311255">.</span><span class="op" id="3311256">(</span><span class="op" id="3311257">*</span><span class="ident" id="3311258">ImportSpec</span><span class="op" id="3311268">)</span><span class="op" id="3311269">.</span><span class="ident" id="3311270">Path</span><span class="op" id="3311274">.</span><span class="ident" id="3311275">Value</span><span class="op" id="3311280">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311283">if</span>&nbsp;<span class="ident" id="3311286">err</span>&nbsp;<span class="op" id="3311290">==</span>&nbsp;<span class="ident" id="3311293">nil</span>&nbsp;<span class="op" id="3311297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311301">return</span>&nbsp;<span class="ident" id="3311308">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311314">return</span>&nbsp;<span class="string" id="3311321">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3311324">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="3311327">func</span>&nbsp;<span class="ident" id="3311332">importName</span><span class="op" id="3311342">(</span><span class="ident" id="3311343">s</span>&nbsp;<span class="ident" id="3311345">Spec</span><span class="op" id="3311349">)</span>&nbsp;<span class="builtintype" id="3311351">string</span>&nbsp;<span class="op" id="3311358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311361">n</span>&nbsp;<span class="op" id="3311363">:=</span>&nbsp;<span class="ident" id="3311366">s</span><span class="op" id="3311367">.</span><span class="op" id="3311368">(</span><span class="op" id="3311369">*</span><span class="ident" id="3311370">ImportSpec</span><span class="op" id="3311380">)</span><span class="op" id="3311381">.</span><span class="ident" id="3311382">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311388">if</span>&nbsp;<span class="ident" id="3311391">n</span>&nbsp;<span class="op" id="3311393">==</span>&nbsp;<span class="ident" id="3311396">nil</span>&nbsp;<span class="op" id="3311400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311404">return</span>&nbsp;<span class="string" id="3311411">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311418">return</span>&nbsp;<span class="ident" id="3311425">n</span><span class="op" id="3311426">.</span><span class="ident" id="3311427">Name</span><br>
<span class="lineno"></span><span class="op" id="3311432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3311435">func</span>&nbsp;<span class="ident" id="3311440">importComment</span><span class="op" id="3311453">(</span><span class="ident" id="3311454">s</span>&nbsp;<span class="ident" id="3311456">Spec</span><span class="op" id="3311460">)</span>&nbsp;<span class="builtintype" id="3311462">string</span>&nbsp;<span class="op" id="3311469">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311472">c</span>&nbsp;<span class="op" id="3311474">:=</span>&nbsp;<span class="ident" id="3311477">s</span><span class="op" id="3311478">.</span><span class="op" id="3311479">(</span><span class="op" id="3311480">*</span><span class="ident" id="3311481">ImportSpec</span><span class="op" id="3311491">)</span><span class="op" id="3311492">.</span><span class="ident" id="3311493">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311502">if</span>&nbsp;<span class="ident" id="3311505">c</span>&nbsp;<span class="op" id="3311507">==</span>&nbsp;<span class="ident" id="3311510">nil</span>&nbsp;<span class="op" id="3311514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311518">return</span>&nbsp;<span class="string" id="3311525">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311532">return</span>&nbsp;<span class="ident" id="3311539">c</span><span class="op" id="3311540">.</span><span class="ident" id="3311541">Text</span><span class="op" id="3311545">(</span><span class="op" id="3311546">)</span><br>
<span class="lineno">75</span><span class="op" id="3311548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3311551">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="3311621">func</span>&nbsp;<span class="ident" id="3311626">collapse</span><span class="op" id="3311634">(</span><span class="ident" id="3311635">prev</span><span class="op" id="3311639">,</span>&nbsp;<span class="ident" id="3311641">next</span>&nbsp;<span class="ident" id="3311646">Spec</span><span class="op" id="3311650">)</span>&nbsp;<span class="builtintype" id="3311652">bool</span>&nbsp;<span class="op" id="3311657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311660">if</span>&nbsp;<span class="ident" id="3311663">importPath</span><span class="op" id="3311673">(</span><span class="ident" id="3311674">next</span><span class="op" id="3311678">)</span>&nbsp;<span class="op" id="3311680">!=</span>&nbsp;<span class="ident" id="3311683">importPath</span><span class="op" id="3311693">(</span><span class="ident" id="3311694">prev</span><span class="op" id="3311698">)</span>&nbsp;<span class="op" id="3311700">||</span>&nbsp;<span class="ident" id="3311703">importName</span><span class="op" id="3311713">(</span><span class="ident" id="3311714">next</span><span class="op" id="3311718">)</span>&nbsp;<span class="op" id="3311720">!=</span>&nbsp;<span class="ident" id="3311723">importName</span><span class="op" id="3311733">(</span><span class="ident" id="3311734">prev</span><span class="op" id="3311738">)</span>&nbsp;<span class="op" id="3311740">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311744">return</span>&nbsp;<span class="builtintype" id="3311751">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311761">return</span>&nbsp;<span class="ident" id="3311768">prev</span><span class="op" id="3311772">.</span><span class="op" id="3311773">(</span><span class="op" id="3311774">*</span><span class="ident" id="3311775">ImportSpec</span><span class="op" id="3311785">)</span><span class="op" id="3311786">.</span><span class="ident" id="3311787">Comment</span>&nbsp;<span class="op" id="3311795">==</span>&nbsp;<span class="ident" id="3311798">nil</span><br>
<span class="lineno"></span><span class="op" id="3311802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="3311805">type</span>&nbsp;<span class="ident" id="3311810">posSpan</span>&nbsp;<span class="keyword" id="3311818">struct</span>&nbsp;<span class="op" id="3311825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311828">Start</span>&nbsp;<span class="ident" id="3311834">token</span><span class="op" id="3311839">.</span><span class="ident" id="3311840">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311845">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3311851">token</span><span class="op" id="3311856">.</span><span class="ident" id="3311857">Pos</span><br>
<span class="lineno"></span><span class="op" id="3311861">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="3311864">func</span>&nbsp;<span class="ident" id="3311869">sortSpecs</span><span class="op" id="3311878">(</span><span class="ident" id="3311879">fset</span>&nbsp;<span class="op" id="3311884">*</span><span class="ident" id="3311885">token</span><span class="op" id="3311890">.</span><span class="ident" id="3311891">FileSet</span><span class="op" id="3311898">,</span>&nbsp;<span class="ident" id="3311900">f</span>&nbsp;<span class="op" id="3311902">*</span><span class="ident" id="3311903">File</span><span class="op" id="3311907">,</span>&nbsp;<span class="ident" id="3311909">specs</span>&nbsp;<span class="op" id="3311915">[</span><span class="op" id="3311916">]</span><span class="ident" id="3311917">Spec</span><span class="op" id="3311921">)</span>&nbsp;<span class="op" id="3311923">[</span><span class="op" id="3311924">]</span><span class="ident" id="3311925">Spec</span>&nbsp;<span class="op" id="3311930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3311933">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3311996">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312041">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312092">if</span>&nbsp;<span class="builtinfunc" id="3312095">len</span><span class="op" id="3312098">(</span><span class="ident" id="3312099">specs</span><span class="op" id="3312104">)</span>&nbsp;<span class="op" id="3312106">&lt;=</span>&nbsp;<span class="num" id="3312109">1</span>&nbsp;<span class="op" id="3312111">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312115">return</span>&nbsp;<span class="ident" id="3312122">specs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312133">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312165">pos</span>&nbsp;<span class="op" id="3312169">:=</span>&nbsp;<span class="builtinfunc" id="3312172">make</span><span class="op" id="3312176">(</span><span class="op" id="3312177">[</span><span class="op" id="3312178">]</span><span class="ident" id="3312179">posSpan</span><span class="op" id="3312186">,</span>&nbsp;<span class="builtinfunc" id="3312188">len</span><span class="op" id="3312191">(</span><span class="ident" id="3312192">specs</span><span class="op" id="3312197">)</span><span class="op" id="3312198">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312201">for</span>&nbsp;<span class="ident" id="3312205">i</span><span class="op" id="3312206">,</span>&nbsp;<span class="ident" id="3312208">s</span>&nbsp;<span class="op" id="3312210">:=</span>&nbsp;<span class="keyword" id="3312213">range</span>&nbsp;<span class="ident" id="3312219">specs</span>&nbsp;<span class="op" id="3312225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312229">pos</span><span class="op" id="3312232">[</span><span class="ident" id="3312233">i</span><span class="op" id="3312234">]</span>&nbsp;<span class="op" id="3312236">=</span>&nbsp;<span class="ident" id="3312238">posSpan</span><span class="op" id="3312245">{</span><span class="ident" id="3312246">s</span><span class="op" id="3312247">.</span><span class="ident" id="3312248">Pos</span><span class="op" id="3312251">(</span><span class="op" id="3312252">)</span><span class="op" id="3312253">,</span>&nbsp;<span class="ident" id="3312255">s</span><span class="op" id="3312256">.</span><span class="ident" id="3312257">End</span><span class="op" id="3312260">(</span><span class="op" id="3312261">)</span><span class="op" id="3312262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312269">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312306">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312366">lastLine</span>&nbsp;<span class="op" id="3312375">:=</span>&nbsp;<span class="ident" id="3312378">fset</span><span class="op" id="3312382">.</span><span class="ident" id="3312383">Position</span><span class="op" id="3312391">(</span><span class="ident" id="3312392">pos</span><span class="op" id="3312395">[</span><span class="builtinfunc" id="3312396">len</span><span class="op" id="3312399">(</span><span class="ident" id="3312400">pos</span><span class="op" id="3312403">)</span><span class="op" id="3312404">-</span><span class="num" id="3312405">1</span><span class="op" id="3312406">]</span><span class="op" id="3312407">.</span><span class="ident" id="3312408">End</span><span class="op" id="3312411">)</span><span class="op" id="3312412">.</span><span class="ident" id="3312413">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312419">cstart</span>&nbsp;<span class="op" id="3312426">:=</span>&nbsp;<span class="builtinfunc" id="3312429">len</span><span class="op" id="3312432">(</span><span class="ident" id="3312433">f</span><span class="op" id="3312434">.</span><span class="ident" id="3312435">Comments</span><span class="op" id="3312443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312446">cend</span>&nbsp;<span class="op" id="3312451">:=</span>&nbsp;<span class="builtinfunc" id="3312454">len</span><span class="op" id="3312457">(</span><span class="ident" id="3312458">f</span><span class="op" id="3312459">.</span><span class="ident" id="3312460">Comments</span><span class="op" id="3312468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312471">for</span>&nbsp;<span class="ident" id="3312475">i</span><span class="op" id="3312476">,</span>&nbsp;<span class="ident" id="3312478">g</span>&nbsp;<span class="op" id="3312480">:=</span>&nbsp;<span class="keyword" id="3312483">range</span>&nbsp;<span class="ident" id="3312489">f</span><span class="op" id="3312490">.</span><span class="ident" id="3312491">Comments</span>&nbsp;<span class="op" id="3312500">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312504">if</span>&nbsp;<span class="ident" id="3312507">g</span><span class="op" id="3312508">.</span><span class="ident" id="3312509">Pos</span><span class="op" id="3312512">(</span><span class="op" id="3312513">)</span>&nbsp;<span class="op" id="3312515">&lt;</span>&nbsp;<span class="ident" id="3312517">pos</span><span class="op" id="3312520">[</span><span class="num" id="3312521">0</span><span class="op" id="3312522">]</span><span class="op" id="3312523">.</span><span class="ident" id="3312524">Start</span>&nbsp;<span class="op" id="3312530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312535">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312550">if</span>&nbsp;<span class="ident" id="3312553">i</span>&nbsp;<span class="op" id="3312555">&lt;</span>&nbsp;<span class="ident" id="3312557">cstart</span>&nbsp;<span class="op" id="3312564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312569">cstart</span>&nbsp;<span class="op" id="3312576">=</span>&nbsp;<span class="ident" id="3312578">i</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312586">if</span>&nbsp;<span class="ident" id="3312589">fset</span><span class="op" id="3312593">.</span><span class="ident" id="3312594">Position</span><span class="op" id="3312602">(</span><span class="ident" id="3312603">g</span><span class="op" id="3312604">.</span><span class="ident" id="3312605">End</span><span class="op" id="3312608">(</span><span class="op" id="3312609">)</span><span class="op" id="3312610">)</span><span class="op" id="3312611">.</span><span class="ident" id="3312612">Line</span>&nbsp;<span class="op" id="3312617">&gt;</span>&nbsp;<span class="ident" id="3312619">lastLine</span>&nbsp;<span class="op" id="3312628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312633">cend</span>&nbsp;<span class="op" id="3312638">=</span>&nbsp;<span class="ident" id="3312640">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312645">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312653">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312656">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312659">comments</span>&nbsp;<span class="op" id="3312668">:=</span>&nbsp;<span class="ident" id="3312671">f</span><span class="op" id="3312672">.</span><span class="ident" id="3312673">Comments</span><span class="op" id="3312681">[</span><span class="ident" id="3312682">cstart</span><span class="op" id="3312688">:</span><span class="ident" id="3312689">cend</span><span class="op" id="3312693">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3312697">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312754">importComment</span>&nbsp;<span class="op" id="3312768">:=</span>&nbsp;<span class="keyword" id="3312771">map</span><span class="op" id="3312774">[</span><span class="op" id="3312775">*</span><span class="ident" id="3312776">ImportSpec</span><span class="op" id="3312786">]</span><span class="op" id="3312787">[</span><span class="op" id="3312788">]</span><span class="op" id="3312789">*</span><span class="ident" id="3312790">CommentGroup</span><span class="op" id="3312802">{</span><span class="op" id="3312803">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312806">specIndex</span>&nbsp;<span class="op" id="3312816">:=</span>&nbsp;<span class="num" id="3312819">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312822">for</span>&nbsp;<span class="ident" id="3312826">_</span><span class="op" id="3312827">,</span>&nbsp;<span class="ident" id="3312829">g</span>&nbsp;<span class="op" id="3312831">:=</span>&nbsp;<span class="keyword" id="3312834">range</span>&nbsp;<span class="ident" id="3312840">comments</span>&nbsp;<span class="op" id="3312849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312853">for</span>&nbsp;<span class="ident" id="3312857">specIndex</span><span class="op" id="3312866">+</span><span class="num" id="3312867">1</span>&nbsp;<span class="op" id="3312869">&lt;</span>&nbsp;<span class="builtinfunc" id="3312871">len</span><span class="op" id="3312874">(</span><span class="ident" id="3312875">specs</span><span class="op" id="3312880">)</span>&nbsp;<span class="op" id="3312882">&amp;&amp;</span>&nbsp;<span class="ident" id="3312885">pos</span><span class="op" id="3312888">[</span><span class="ident" id="3312889">specIndex</span><span class="op" id="3312898">+</span><span class="num" id="3312899">1</span><span class="op" id="3312900">]</span><span class="op" id="3312901">.</span><span class="ident" id="3312902">Start</span>&nbsp;<span class="op" id="3312908">&lt;=</span>&nbsp;<span class="ident" id="3312911">g</span><span class="op" id="3312912">.</span><span class="ident" id="3312913">Pos</span><span class="op" id="3312916">(</span><span class="op" id="3312917">)</span>&nbsp;<span class="op" id="3312919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312924">specIndex</span><span class="op" id="3312933">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312938">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312942">s</span>&nbsp;<span class="op" id="3312944">:=</span>&nbsp;<span class="ident" id="3312947">specs</span><span class="op" id="3312952">[</span><span class="ident" id="3312953">specIndex</span><span class="op" id="3312962">]</span><span class="op" id="3312963">.</span><span class="op" id="3312964">(</span><span class="op" id="3312965">*</span><span class="ident" id="3312966">ImportSpec</span><span class="op" id="3312976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3312980">importComment</span><span class="op" id="3312993">[</span><span class="ident" id="3312994">s</span><span class="op" id="3312995">]</span>&nbsp;<span class="op" id="3312997">=</span>&nbsp;<span class="builtinfunc" id="3312999">append</span><span class="op" id="3313005">(</span><span class="ident" id="3313006">importComment</span><span class="op" id="3313019">[</span><span class="ident" id="3313020">s</span><span class="op" id="3313021">]</span><span class="op" id="3313022">,</span>&nbsp;<span class="ident" id="3313024">g</span><span class="op" id="3313025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313032">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313074">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313130">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313196">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313251">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313290">sort</span><span class="op" id="3313294">.</span><span class="ident" id="3313295">Sort</span><span class="op" id="3313299">(</span><span class="ident" id="3313300">byImportSpec</span><span class="op" id="3313312">(</span><span class="ident" id="3313313">specs</span><span class="op" id="3313318">)</span><span class="op" id="3313319">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313323">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313378">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313409">deduped</span>&nbsp;<span class="op" id="3313417">:=</span>&nbsp;<span class="ident" id="3313420">specs</span><span class="op" id="3313425">[</span><span class="op" id="3313426">:</span><span class="num" id="3313427">0</span><span class="op" id="3313428">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313431">for</span>&nbsp;<span class="ident" id="3313435">i</span><span class="op" id="3313436">,</span>&nbsp;<span class="ident" id="3313438">s</span>&nbsp;<span class="op" id="3313440">:=</span>&nbsp;<span class="keyword" id="3313443">range</span>&nbsp;<span class="ident" id="3313449">specs</span>&nbsp;<span class="op" id="3313455">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313459">if</span>&nbsp;<span class="ident" id="3313462">i</span>&nbsp;<span class="op" id="3313464">==</span>&nbsp;<span class="builtinfunc" id="3313467">len</span><span class="op" id="3313470">(</span><span class="ident" id="3313471">specs</span><span class="op" id="3313476">)</span><span class="op" id="3313477">-</span><span class="num" id="3313478">1</span>&nbsp;<span class="op" id="3313480">||</span>&nbsp;<span class="op" id="3313483">!</span><span class="ident" id="3313484">collapse</span><span class="op" id="3313492">(</span><span class="ident" id="3313493">s</span><span class="op" id="3313494">,</span>&nbsp;<span class="ident" id="3313496">specs</span><span class="op" id="3313501">[</span><span class="ident" id="3313502">i</span><span class="op" id="3313503">+</span><span class="num" id="3313504">1</span><span class="op" id="3313505">]</span><span class="op" id="3313506">)</span>&nbsp;<span class="op" id="3313508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313513">deduped</span>&nbsp;<span class="op" id="3313521">=</span>&nbsp;<span class="builtinfunc" id="3313523">append</span><span class="op" id="3313529">(</span><span class="ident" id="3313530">deduped</span><span class="op" id="3313537">,</span>&nbsp;<span class="ident" id="3313539">s</span><span class="op" id="3313540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313544">}</span>&nbsp;<span class="keyword" id="3313546">else</span>&nbsp;<span class="op" id="3313551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313556">p</span>&nbsp;<span class="op" id="3313558">:=</span>&nbsp;<span class="ident" id="3313561">s</span><span class="op" id="3313562">.</span><span class="ident" id="3313563">Pos</span><span class="op" id="3313566">(</span><span class="op" id="3313567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313572">fset</span><span class="op" id="3313576">.</span><span class="ident" id="3313577">File</span><span class="op" id="3313581">(</span><span class="ident" id="3313582">p</span><span class="op" id="3313583">)</span><span class="op" id="3313584">.</span><span class="ident" id="3313585">MergeLine</span><span class="op" id="3313594">(</span><span class="ident" id="3313595">fset</span><span class="op" id="3313599">.</span><span class="ident" id="3313600">Position</span><span class="op" id="3313608">(</span><span class="ident" id="3313609">p</span><span class="op" id="3313610">)</span><span class="op" id="3313611">.</span><span class="ident" id="3313612">Line</span><span class="op" id="3313616">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313626">specs</span>&nbsp;<span class="op" id="3313632">=</span>&nbsp;<span class="ident" id="3313634">deduped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313644">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313673">for</span>&nbsp;<span class="ident" id="3313677">i</span><span class="op" id="3313678">,</span>&nbsp;<span class="ident" id="3313680">s</span>&nbsp;<span class="op" id="3313682">:=</span>&nbsp;<span class="keyword" id="3313685">range</span>&nbsp;<span class="ident" id="3313691">specs</span>&nbsp;<span class="op" id="3313697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313701">s</span>&nbsp;<span class="op" id="3313703">:=</span>&nbsp;<span class="ident" id="3313706">s</span><span class="op" id="3313707">.</span><span class="op" id="3313708">(</span><span class="op" id="3313709">*</span><span class="ident" id="3313710">ImportSpec</span><span class="op" id="3313720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313724">if</span>&nbsp;<span class="ident" id="3313727">s</span><span class="op" id="3313728">.</span><span class="ident" id="3313729">Name</span>&nbsp;<span class="op" id="3313734">!=</span>&nbsp;<span class="ident" id="3313737">nil</span>&nbsp;<span class="op" id="3313741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313746">s</span><span class="op" id="3313747">.</span><span class="ident" id="3313748">Name</span><span class="op" id="3313752">.</span><span class="ident" id="3313753">NamePos</span>&nbsp;<span class="op" id="3313761">=</span>&nbsp;<span class="ident" id="3313763">pos</span><span class="op" id="3313766">[</span><span class="ident" id="3313767">i</span><span class="op" id="3313768">]</span><span class="op" id="3313769">.</span><span class="ident" id="3313770">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313778">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313782">s</span><span class="op" id="3313783">.</span><span class="ident" id="3313784">Path</span><span class="op" id="3313788">.</span><span class="ident" id="3313789">ValuePos</span>&nbsp;<span class="op" id="3313798">=</span>&nbsp;<span class="ident" id="3313800">pos</span><span class="op" id="3313803">[</span><span class="ident" id="3313804">i</span><span class="op" id="3313805">]</span><span class="op" id="3313806">.</span><span class="ident" id="3313807">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313815">s</span><span class="op" id="3313816">.</span><span class="ident" id="3313817">EndPos</span>&nbsp;<span class="op" id="3313824">=</span>&nbsp;<span class="ident" id="3313826">pos</span><span class="op" id="3313829">[</span><span class="ident" id="3313830">i</span><span class="op" id="3313831">]</span><span class="op" id="3313832">.</span><span class="ident" id="3313833">End</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313839">for</span>&nbsp;<span class="ident" id="3313843">_</span><span class="op" id="3313844">,</span>&nbsp;<span class="ident" id="3313846">g</span>&nbsp;<span class="op" id="3313848">:=</span>&nbsp;<span class="keyword" id="3313851">range</span>&nbsp;<span class="ident" id="3313857">importComment</span><span class="op" id="3313870">[</span><span class="ident" id="3313871">s</span><span class="op" id="3313872">]</span>&nbsp;<span class="op" id="3313874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313879">for</span>&nbsp;<span class="ident" id="3313883">_</span><span class="op" id="3313884">,</span>&nbsp;<span class="ident" id="3313886">c</span>&nbsp;<span class="op" id="3313888">:=</span>&nbsp;<span class="keyword" id="3313891">range</span>&nbsp;<span class="ident" id="3313897">g</span><span class="op" id="3313898">.</span><span class="ident" id="3313899">List</span>&nbsp;<span class="op" id="3313904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313910">c</span><span class="op" id="3313911">.</span><span class="ident" id="3313912">Slash</span>&nbsp;<span class="op" id="3313918">=</span>&nbsp;<span class="ident" id="3313920">pos</span><span class="op" id="3313923">[</span><span class="ident" id="3313924">i</span><span class="op" id="3313925">]</span><span class="op" id="3313926">.</span><span class="ident" id="3313927">End</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313945">sort</span><span class="op" id="3313949">.</span><span class="ident" id="3313950">Sort</span><span class="op" id="3313954">(</span><span class="ident" id="3313955">byCommentPos</span><span class="op" id="3313967">(</span><span class="ident" id="3313968">comments</span><span class="op" id="3313976">)</span><span class="op" id="3313977">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313981">return</span>&nbsp;<span class="ident" id="3313988">specs</span><br>
<span class="lineno"></span><span class="op" id="3313994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3313997">type</span>&nbsp;<span class="ident" id="3314002">byImportSpec</span>&nbsp;<span class="op" id="3314015">[</span><span class="op" id="3314016">]</span><span class="ident" id="3314017">Spec</span>&nbsp;<span class="comment" id="3314022">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="3314047">func</span>&nbsp;<span class="op" id="3314052">(</span><span class="ident" id="3314053">x</span>&nbsp;<span class="ident" id="3314055">byImportSpec</span><span class="op" id="3314067">)</span>&nbsp;<span class="ident" id="3314069">Len</span><span class="op" id="3314072">(</span><span class="op" id="3314073">)</span>&nbsp;<span class="builtintype" id="3314075">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314084">{</span>&nbsp;<span class="keyword" id="3314086">return</span>&nbsp;<span class="builtinfunc" id="3314093">len</span><span class="op" id="3314096">(</span><span class="ident" id="3314097">x</span><span class="op" id="3314098">)</span>&nbsp;<span class="op" id="3314100">}</span><br>
<span class="lineno"></span><span class="keyword" id="3314102">func</span>&nbsp;<span class="op" id="3314107">(</span><span class="ident" id="3314108">x</span>&nbsp;<span class="ident" id="3314110">byImportSpec</span><span class="op" id="3314122">)</span>&nbsp;<span class="ident" id="3314124">Swap</span><span class="op" id="3314128">(</span><span class="ident" id="3314129">i</span><span class="op" id="3314130">,</span>&nbsp;<span class="ident" id="3314132">j</span>&nbsp;<span class="builtintype" id="3314134">int</span><span class="op" id="3314137">)</span>&nbsp;<span class="op" id="3314139">{</span>&nbsp;<span class="ident" id="3314141">x</span><span class="op" id="3314142">[</span><span class="ident" id="3314143">i</span><span class="op" id="3314144">]</span><span class="op" id="3314145">,</span>&nbsp;<span class="ident" id="3314147">x</span><span class="op" id="3314148">[</span><span class="ident" id="3314149">j</span><span class="op" id="3314150">]</span>&nbsp;<span class="op" id="3314152">=</span>&nbsp;<span class="ident" id="3314154">x</span><span class="op" id="3314155">[</span><span class="ident" id="3314156">j</span><span class="op" id="3314157">]</span><span class="op" id="3314158">,</span>&nbsp;<span class="ident" id="3314160">x</span><span class="op" id="3314161">[</span><span class="ident" id="3314162">i</span><span class="op" id="3314163">]</span>&nbsp;<span class="op" id="3314165">}</span><br>
<span class="lineno"></span><span class="keyword" id="3314167">func</span>&nbsp;<span class="op" id="3314172">(</span><span class="ident" id="3314173">x</span>&nbsp;<span class="ident" id="3314175">byImportSpec</span><span class="op" id="3314187">)</span>&nbsp;<span class="ident" id="3314189">Less</span><span class="op" id="3314193">(</span><span class="ident" id="3314194">i</span><span class="op" id="3314195">,</span>&nbsp;<span class="ident" id="3314197">j</span>&nbsp;<span class="builtintype" id="3314199">int</span><span class="op" id="3314202">)</span>&nbsp;<span class="builtintype" id="3314204">bool</span>&nbsp;<span class="op" id="3314209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314212">ipath</span>&nbsp;<span class="op" id="3314218">:=</span>&nbsp;<span class="ident" id="3314221">importPath</span><span class="op" id="3314231">(</span><span class="ident" id="3314232">x</span><span class="op" id="3314233">[</span><span class="ident" id="3314234">i</span><span class="op" id="3314235">]</span><span class="op" id="3314236">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314239">jpath</span>&nbsp;<span class="op" id="3314245">:=</span>&nbsp;<span class="ident" id="3314248">importPath</span><span class="op" id="3314258">(</span><span class="ident" id="3314259">x</span><span class="op" id="3314260">[</span><span class="ident" id="3314261">j</span><span class="op" id="3314262">]</span><span class="op" id="3314263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314266">if</span>&nbsp;<span class="ident" id="3314269">ipath</span>&nbsp;<span class="op" id="3314275">!=</span>&nbsp;<span class="ident" id="3314278">jpath</span>&nbsp;<span class="op" id="3314284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314288">return</span>&nbsp;<span class="ident" id="3314295">ipath</span>&nbsp;<span class="op" id="3314301">&lt;</span>&nbsp;<span class="ident" id="3314303">jpath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314313">iname</span>&nbsp;<span class="op" id="3314319">:=</span>&nbsp;<span class="ident" id="3314322">importName</span><span class="op" id="3314332">(</span><span class="ident" id="3314333">x</span><span class="op" id="3314334">[</span><span class="ident" id="3314335">i</span><span class="op" id="3314336">]</span><span class="op" id="3314337">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314340">jname</span>&nbsp;<span class="op" id="3314346">:=</span>&nbsp;<span class="ident" id="3314349">importName</span><span class="op" id="3314359">(</span><span class="ident" id="3314360">x</span><span class="op" id="3314361">[</span><span class="ident" id="3314362">j</span><span class="op" id="3314363">]</span><span class="op" id="3314364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314367">if</span>&nbsp;<span class="ident" id="3314370">iname</span>&nbsp;<span class="op" id="3314376">!=</span>&nbsp;<span class="ident" id="3314379">jname</span>&nbsp;<span class="op" id="3314385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314389">return</span>&nbsp;<span class="ident" id="3314396">iname</span>&nbsp;<span class="op" id="3314402">&lt;</span>&nbsp;<span class="ident" id="3314404">jname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314414">return</span>&nbsp;<span class="ident" id="3314421">importComment</span><span class="op" id="3314434">(</span><span class="ident" id="3314435">x</span><span class="op" id="3314436">[</span><span class="ident" id="3314437">i</span><span class="op" id="3314438">]</span><span class="op" id="3314439">)</span>&nbsp;<span class="op" id="3314441">&lt;</span>&nbsp;<span class="ident" id="3314443">importComment</span><span class="op" id="3314456">(</span><span class="ident" id="3314457">x</span><span class="op" id="3314458">[</span><span class="ident" id="3314459">j</span><span class="op" id="3314460">]</span><span class="op" id="3314461">)</span><br>
<span class="lineno">190</span><span class="op" id="3314463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3314466">type</span>&nbsp;<span class="ident" id="3314471">byCommentPos</span>&nbsp;<span class="op" id="3314484">[</span><span class="op" id="3314485">]</span><span class="op" id="3314486">*</span><span class="ident" id="3314487">CommentGroup</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3314501">func</span>&nbsp;<span class="op" id="3314506">(</span><span class="ident" id="3314507">x</span>&nbsp;<span class="ident" id="3314509">byCommentPos</span><span class="op" id="3314521">)</span>&nbsp;<span class="ident" id="3314523">Len</span><span class="op" id="3314526">(</span><span class="op" id="3314527">)</span>&nbsp;<span class="builtintype" id="3314529">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314543">{</span>&nbsp;<span class="keyword" id="3314545">return</span>&nbsp;<span class="builtinfunc" id="3314552">len</span><span class="op" id="3314555">(</span><span class="ident" id="3314556">x</span><span class="op" id="3314557">)</span>&nbsp;<span class="op" id="3314559">}</span><br>
<span class="lineno">195</span><span class="keyword" id="3314561">func</span>&nbsp;<span class="op" id="3314566">(</span><span class="ident" id="3314567">x</span>&nbsp;<span class="ident" id="3314569">byCommentPos</span><span class="op" id="3314581">)</span>&nbsp;<span class="ident" id="3314583">Swap</span><span class="op" id="3314587">(</span><span class="ident" id="3314588">i</span><span class="op" id="3314589">,</span>&nbsp;<span class="ident" id="3314591">j</span>&nbsp;<span class="builtintype" id="3314593">int</span><span class="op" id="3314596">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314603">{</span>&nbsp;<span class="ident" id="3314605">x</span><span class="op" id="3314606">[</span><span class="ident" id="3314607">i</span><span class="op" id="3314608">]</span><span class="op" id="3314609">,</span>&nbsp;<span class="ident" id="3314611">x</span><span class="op" id="3314612">[</span><span class="ident" id="3314613">j</span><span class="op" id="3314614">]</span>&nbsp;<span class="op" id="3314616">=</span>&nbsp;<span class="ident" id="3314618">x</span><span class="op" id="3314619">[</span><span class="ident" id="3314620">j</span><span class="op" id="3314621">]</span><span class="op" id="3314622">,</span>&nbsp;<span class="ident" id="3314624">x</span><span class="op" id="3314625">[</span><span class="ident" id="3314626">i</span><span class="op" id="3314627">]</span>&nbsp;<span class="op" id="3314629">}</span><br>
<span class="lineno"></span><span class="keyword" id="3314631">func</span>&nbsp;<span class="op" id="3314636">(</span><span class="ident" id="3314637">x</span>&nbsp;<span class="ident" id="3314639">byCommentPos</span><span class="op" id="3314651">)</span>&nbsp;<span class="ident" id="3314653">Less</span><span class="op" id="3314657">(</span><span class="ident" id="3314658">i</span><span class="op" id="3314659">,</span>&nbsp;<span class="ident" id="3314661">j</span>&nbsp;<span class="builtintype" id="3314663">int</span><span class="op" id="3314666">)</span>&nbsp;<span class="builtintype" id="3314668">bool</span>&nbsp;<span class="op" id="3314673">{</span>&nbsp;<span class="keyword" id="3314675">return</span>&nbsp;<span class="ident" id="3314682">x</span><span class="op" id="3314683">[</span><span class="ident" id="3314684">i</span><span class="op" id="3314685">]</span><span class="op" id="3314686">.</span><span class="ident" id="3314687">Pos</span><span class="op" id="3314690">(</span><span class="op" id="3314691">)</span>&nbsp;<span class="op" id="3314693">&lt;</span>&nbsp;<span class="ident" id="3314695">x</span><span class="op" id="3314696">[</span><span class="ident" id="3314697">j</span><span class="op" id="3314698">]</span><span class="op" id="3314699">.</span><span class="ident" id="3314700">Pos</span><span class="op" id="3314703">(</span><span class="op" id="3314704">)</span>&nbsp;<span class="op" id="3314706">}</span>
</div>
</body>
</html>
