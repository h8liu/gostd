<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1581161">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1581216">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1581270">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1581321">package</span>&nbsp;<span class="ident" id="1581329">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1581338">//&nbsp;An&nbsp;extFloat&nbsp;represents&nbsp;an&nbsp;extended&nbsp;floating-point&nbsp;number,&nbsp;with&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="1581409">//&nbsp;precision&nbsp;than&nbsp;a&nbsp;float64.&nbsp;It&nbsp;does&nbsp;not&nbsp;try&nbsp;to&nbsp;save&nbsp;bits:&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1581472">//&nbsp;number&nbsp;represented&nbsp;by&nbsp;the&nbsp;structure&nbsp;is&nbsp;mant*(2^exp),&nbsp;with&nbsp;a&nbsp;negative</span><br>
<span class="lineno">10</span><span class="comment" id="1581544">//&nbsp;sign&nbsp;if&nbsp;neg&nbsp;is&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="1581568">type</span>&nbsp;<span class="ident" id="1581573">extFloat</span>&nbsp;<span class="keyword" id="1581582">struct</span>&nbsp;<span class="op" id="1581589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1581592">mant</span>&nbsp;<span class="ident" id="1581597">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1581605">exp</span>&nbsp;&nbsp;<span class="builtintype" id="1581610">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1581615">neg</span>&nbsp;&nbsp;<span class="builtintype" id="1581620">bool</span><br>
<span class="lineno">15</span><span class="op" id="1581625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1581628">//&nbsp;Powers&nbsp;of&nbsp;ten&nbsp;taken&nbsp;from&nbsp;double-conversion&nbsp;library.</span><br>
<span class="lineno"></span><span class="comment" id="1581683">//&nbsp;http://code.google.com/p/double-conversion/</span><br>
<span class="lineno"></span><span class="keyword" id="1581730">const</span>&nbsp;<span class="op" id="1581736">(</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1581739">firstPowerOfTen</span>&nbsp;<span class="op" id="1581755">=</span>&nbsp;<span class="op" id="1581757">-</span><span class="num" id="1581758">348</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1581763">stepPowerOfTen</span>&nbsp;&nbsp;<span class="op" id="1581779">=</span>&nbsp;<span class="num" id="1581781">8</span><br>
<span class="lineno"></span><span class="op" id="1581783">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1581786">var</span>&nbsp;<span class="ident" id="1581790">smallPowersOfTen</span>&nbsp;<span class="op" id="1581807">=</span>&nbsp;<span class="op" id="1581809">[</span><span class="op" id="1581810">...</span><span class="op" id="1581813">]</span><span class="ident" id="1581814"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1581822">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1581825">{</span><span class="num" id="1581826">1</span>&nbsp;<span class="op" id="1581828">&lt;&lt;</span>&nbsp;<span class="num" id="1581831">63</span><span class="op" id="1581833">,</span>&nbsp;<span class="op" id="1581835">-</span><span class="num" id="1581836">63</span><span class="op" id="1581838">,</span>&nbsp;<span class="ident" id="1581840">false</span><span class="op" id="1581845">}</span><span class="op" id="1581846">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1581855">//&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1581861">{</span><span class="num" id="1581862">0xa</span>&nbsp;<span class="op" id="1581866">&lt;&lt;</span>&nbsp;<span class="num" id="1581869">60</span><span class="op" id="1581871">,</span>&nbsp;<span class="op" id="1581873">-</span><span class="num" id="1581874">60</span><span class="op" id="1581876">,</span>&nbsp;<span class="ident" id="1581878">false</span><span class="op" id="1581883">}</span><span class="op" id="1581884">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1581891">//&nbsp;1e1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1581899">{</span><span class="num" id="1581900">0x64</span>&nbsp;<span class="op" id="1581905">&lt;&lt;</span>&nbsp;<span class="num" id="1581908">57</span><span class="op" id="1581910">,</span>&nbsp;<span class="op" id="1581912">-</span><span class="num" id="1581913">57</span><span class="op" id="1581915">,</span>&nbsp;<span class="ident" id="1581917">false</span><span class="op" id="1581922">}</span><span class="op" id="1581923">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1581929">//&nbsp;1e2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1581937">{</span><span class="num" id="1581938">0x3e8</span>&nbsp;<span class="op" id="1581944">&lt;&lt;</span>&nbsp;<span class="num" id="1581947">54</span><span class="op" id="1581949">,</span>&nbsp;<span class="op" id="1581951">-</span><span class="num" id="1581952">54</span><span class="op" id="1581954">,</span>&nbsp;<span class="ident" id="1581956">false</span><span class="op" id="1581961">}</span><span class="op" id="1581962">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1581967">//&nbsp;1e3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1581975">{</span><span class="num" id="1581976">0x2710</span>&nbsp;<span class="op" id="1581983">&lt;&lt;</span>&nbsp;<span class="num" id="1581986">50</span><span class="op" id="1581988">,</span>&nbsp;<span class="op" id="1581990">-</span><span class="num" id="1581991">50</span><span class="op" id="1581993">,</span>&nbsp;<span class="ident" id="1581995">false</span><span class="op" id="1582000">}</span><span class="op" id="1582001">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1582005">//&nbsp;1e4</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582013">{</span><span class="num" id="1582014">0x186a0</span>&nbsp;<span class="op" id="1582022">&lt;&lt;</span>&nbsp;<span class="num" id="1582025">47</span><span class="op" id="1582027">,</span>&nbsp;<span class="op" id="1582029">-</span><span class="num" id="1582030">47</span><span class="op" id="1582032">,</span>&nbsp;<span class="ident" id="1582034">false</span><span class="op" id="1582039">}</span><span class="op" id="1582040">,</span>&nbsp;&nbsp;<span class="comment" id="1582043">//&nbsp;1e5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582051">{</span><span class="num" id="1582052">0xf4240</span>&nbsp;<span class="op" id="1582060">&lt;&lt;</span>&nbsp;<span class="num" id="1582063">44</span><span class="op" id="1582065">,</span>&nbsp;<span class="op" id="1582067">-</span><span class="num" id="1582068">44</span><span class="op" id="1582070">,</span>&nbsp;<span class="ident" id="1582072">false</span><span class="op" id="1582077">}</span><span class="op" id="1582078">,</span>&nbsp;&nbsp;<span class="comment" id="1582081">//&nbsp;1e6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582089">{</span><span class="num" id="1582090">0x989680</span>&nbsp;<span class="op" id="1582099">&lt;&lt;</span>&nbsp;<span class="num" id="1582102">40</span><span class="op" id="1582104">,</span>&nbsp;<span class="op" id="1582106">-</span><span class="num" id="1582107">40</span><span class="op" id="1582109">,</span>&nbsp;<span class="ident" id="1582111">false</span><span class="op" id="1582116">}</span><span class="op" id="1582117">,</span>&nbsp;<span class="comment" id="1582119">//&nbsp;1e7</span><br>
<span class="lineno"></span><span class="op" id="1582126">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="1582129">var</span>&nbsp;<span class="ident" id="1582133">powersOfTen</span>&nbsp;<span class="op" id="1582145">=</span>&nbsp;<span class="op" id="1582147">[</span><span class="op" id="1582148">...</span><span class="op" id="1582151">]</span><span class="ident" id="1582152"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1582160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582163">{</span><span class="num" id="1582164">0xfa8fd5a0081c0288</span><span class="op" id="1582182">,</span>&nbsp;<span class="op" id="1582184">-</span><span class="num" id="1582185">1220</span><span class="op" id="1582189">,</span>&nbsp;<span class="ident" id="1582191">false</span><span class="op" id="1582196">}</span><span class="op" id="1582197">,</span>&nbsp;<span class="comment" id="1582199">//&nbsp;10^-348</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582211">{</span><span class="num" id="1582212">0xbaaee17fa23ebf76</span><span class="op" id="1582230">,</span>&nbsp;<span class="op" id="1582232">-</span><span class="num" id="1582233">1193</span><span class="op" id="1582237">,</span>&nbsp;<span class="ident" id="1582239">false</span><span class="op" id="1582244">}</span><span class="op" id="1582245">,</span>&nbsp;<span class="comment" id="1582247">//&nbsp;10^-340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582259">{</span><span class="num" id="1582260">0x8b16fb203055ac76</span><span class="op" id="1582278">,</span>&nbsp;<span class="op" id="1582280">-</span><span class="num" id="1582281">1166</span><span class="op" id="1582285">,</span>&nbsp;<span class="ident" id="1582287">false</span><span class="op" id="1582292">}</span><span class="op" id="1582293">,</span>&nbsp;<span class="comment" id="1582295">//&nbsp;10^-332</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582307">{</span><span class="num" id="1582308">0xcf42894a5dce35ea</span><span class="op" id="1582326">,</span>&nbsp;<span class="op" id="1582328">-</span><span class="num" id="1582329">1140</span><span class="op" id="1582333">,</span>&nbsp;<span class="ident" id="1582335">false</span><span class="op" id="1582340">}</span><span class="op" id="1582341">,</span>&nbsp;<span class="comment" id="1582343">//&nbsp;10^-324</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582355">{</span><span class="num" id="1582356">0x9a6bb0aa55653b2d</span><span class="op" id="1582374">,</span>&nbsp;<span class="op" id="1582376">-</span><span class="num" id="1582377">1113</span><span class="op" id="1582381">,</span>&nbsp;<span class="ident" id="1582383">false</span><span class="op" id="1582388">}</span><span class="op" id="1582389">,</span>&nbsp;<span class="comment" id="1582391">//&nbsp;10^-316</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582403">{</span><span class="num" id="1582404">0xe61acf033d1a45df</span><span class="op" id="1582422">,</span>&nbsp;<span class="op" id="1582424">-</span><span class="num" id="1582425">1087</span><span class="op" id="1582429">,</span>&nbsp;<span class="ident" id="1582431">false</span><span class="op" id="1582436">}</span><span class="op" id="1582437">,</span>&nbsp;<span class="comment" id="1582439">//&nbsp;10^-308</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582451">{</span><span class="num" id="1582452">0xab70fe17c79ac6ca</span><span class="op" id="1582470">,</span>&nbsp;<span class="op" id="1582472">-</span><span class="num" id="1582473">1060</span><span class="op" id="1582477">,</span>&nbsp;<span class="ident" id="1582479">false</span><span class="op" id="1582484">}</span><span class="op" id="1582485">,</span>&nbsp;<span class="comment" id="1582487">//&nbsp;10^-300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582499">{</span><span class="num" id="1582500">0xff77b1fcbebcdc4f</span><span class="op" id="1582518">,</span>&nbsp;<span class="op" id="1582520">-</span><span class="num" id="1582521">1034</span><span class="op" id="1582525">,</span>&nbsp;<span class="ident" id="1582527">false</span><span class="op" id="1582532">}</span><span class="op" id="1582533">,</span>&nbsp;<span class="comment" id="1582535">//&nbsp;10^-292</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582547">{</span><span class="num" id="1582548">0xbe5691ef416bd60c</span><span class="op" id="1582566">,</span>&nbsp;<span class="op" id="1582568">-</span><span class="num" id="1582569">1007</span><span class="op" id="1582573">,</span>&nbsp;<span class="ident" id="1582575">false</span><span class="op" id="1582580">}</span><span class="op" id="1582581">,</span>&nbsp;<span class="comment" id="1582583">//&nbsp;10^-284</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582595">{</span><span class="num" id="1582596">0x8dd01fad907ffc3c</span><span class="op" id="1582614">,</span>&nbsp;<span class="op" id="1582616">-</span><span class="num" id="1582617">980</span><span class="op" id="1582620">,</span>&nbsp;<span class="ident" id="1582622">false</span><span class="op" id="1582627">}</span><span class="op" id="1582628">,</span>&nbsp;&nbsp;<span class="comment" id="1582631">//&nbsp;10^-276</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582643">{</span><span class="num" id="1582644">0xd3515c2831559a83</span><span class="op" id="1582662">,</span>&nbsp;<span class="op" id="1582664">-</span><span class="num" id="1582665">954</span><span class="op" id="1582668">,</span>&nbsp;<span class="ident" id="1582670">false</span><span class="op" id="1582675">}</span><span class="op" id="1582676">,</span>&nbsp;&nbsp;<span class="comment" id="1582679">//&nbsp;10^-268</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582691">{</span><span class="num" id="1582692">0x9d71ac8fada6c9b5</span><span class="op" id="1582710">,</span>&nbsp;<span class="op" id="1582712">-</span><span class="num" id="1582713">927</span><span class="op" id="1582716">,</span>&nbsp;<span class="ident" id="1582718">false</span><span class="op" id="1582723">}</span><span class="op" id="1582724">,</span>&nbsp;&nbsp;<span class="comment" id="1582727">//&nbsp;10^-260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582739">{</span><span class="num" id="1582740">0xea9c227723ee8bcb</span><span class="op" id="1582758">,</span>&nbsp;<span class="op" id="1582760">-</span><span class="num" id="1582761">901</span><span class="op" id="1582764">,</span>&nbsp;<span class="ident" id="1582766">false</span><span class="op" id="1582771">}</span><span class="op" id="1582772">,</span>&nbsp;&nbsp;<span class="comment" id="1582775">//&nbsp;10^-252</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582787">{</span><span class="num" id="1582788">0xaecc49914078536d</span><span class="op" id="1582806">,</span>&nbsp;<span class="op" id="1582808">-</span><span class="num" id="1582809">874</span><span class="op" id="1582812">,</span>&nbsp;<span class="ident" id="1582814">false</span><span class="op" id="1582819">}</span><span class="op" id="1582820">,</span>&nbsp;&nbsp;<span class="comment" id="1582823">//&nbsp;10^-244</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582835">{</span><span class="num" id="1582836">0x823c12795db6ce57</span><span class="op" id="1582854">,</span>&nbsp;<span class="op" id="1582856">-</span><span class="num" id="1582857">847</span><span class="op" id="1582860">,</span>&nbsp;<span class="ident" id="1582862">false</span><span class="op" id="1582867">}</span><span class="op" id="1582868">,</span>&nbsp;&nbsp;<span class="comment" id="1582871">//&nbsp;10^-236</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582883">{</span><span class="num" id="1582884">0xc21094364dfb5637</span><span class="op" id="1582902">,</span>&nbsp;<span class="op" id="1582904">-</span><span class="num" id="1582905">821</span><span class="op" id="1582908">,</span>&nbsp;<span class="ident" id="1582910">false</span><span class="op" id="1582915">}</span><span class="op" id="1582916">,</span>&nbsp;&nbsp;<span class="comment" id="1582919">//&nbsp;10^-228</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582931">{</span><span class="num" id="1582932">0x9096ea6f3848984f</span><span class="op" id="1582950">,</span>&nbsp;<span class="op" id="1582952">-</span><span class="num" id="1582953">794</span><span class="op" id="1582956">,</span>&nbsp;<span class="ident" id="1582958">false</span><span class="op" id="1582963">}</span><span class="op" id="1582964">,</span>&nbsp;&nbsp;<span class="comment" id="1582967">//&nbsp;10^-220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1582979">{</span><span class="num" id="1582980">0xd77485cb25823ac7</span><span class="op" id="1582998">,</span>&nbsp;<span class="op" id="1583000">-</span><span class="num" id="1583001">768</span><span class="op" id="1583004">,</span>&nbsp;<span class="ident" id="1583006">false</span><span class="op" id="1583011">}</span><span class="op" id="1583012">,</span>&nbsp;&nbsp;<span class="comment" id="1583015">//&nbsp;10^-212</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583027">{</span><span class="num" id="1583028">0xa086cfcd97bf97f4</span><span class="op" id="1583046">,</span>&nbsp;<span class="op" id="1583048">-</span><span class="num" id="1583049">741</span><span class="op" id="1583052">,</span>&nbsp;<span class="ident" id="1583054">false</span><span class="op" id="1583059">}</span><span class="op" id="1583060">,</span>&nbsp;&nbsp;<span class="comment" id="1583063">//&nbsp;10^-204</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583075">{</span><span class="num" id="1583076">0xef340a98172aace5</span><span class="op" id="1583094">,</span>&nbsp;<span class="op" id="1583096">-</span><span class="num" id="1583097">715</span><span class="op" id="1583100">,</span>&nbsp;<span class="ident" id="1583102">false</span><span class="op" id="1583107">}</span><span class="op" id="1583108">,</span>&nbsp;&nbsp;<span class="comment" id="1583111">//&nbsp;10^-196</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583123">{</span><span class="num" id="1583124">0xb23867fb2a35b28e</span><span class="op" id="1583142">,</span>&nbsp;<span class="op" id="1583144">-</span><span class="num" id="1583145">688</span><span class="op" id="1583148">,</span>&nbsp;<span class="ident" id="1583150">false</span><span class="op" id="1583155">}</span><span class="op" id="1583156">,</span>&nbsp;&nbsp;<span class="comment" id="1583159">//&nbsp;10^-188</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583171">{</span><span class="num" id="1583172">0x84c8d4dfd2c63f3b</span><span class="op" id="1583190">,</span>&nbsp;<span class="op" id="1583192">-</span><span class="num" id="1583193">661</span><span class="op" id="1583196">,</span>&nbsp;<span class="ident" id="1583198">false</span><span class="op" id="1583203">}</span><span class="op" id="1583204">,</span>&nbsp;&nbsp;<span class="comment" id="1583207">//&nbsp;10^-180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583219">{</span><span class="num" id="1583220">0xc5dd44271ad3cdba</span><span class="op" id="1583238">,</span>&nbsp;<span class="op" id="1583240">-</span><span class="num" id="1583241">635</span><span class="op" id="1583244">,</span>&nbsp;<span class="ident" id="1583246">false</span><span class="op" id="1583251">}</span><span class="op" id="1583252">,</span>&nbsp;&nbsp;<span class="comment" id="1583255">//&nbsp;10^-172</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583267">{</span><span class="num" id="1583268">0x936b9fcebb25c996</span><span class="op" id="1583286">,</span>&nbsp;<span class="op" id="1583288">-</span><span class="num" id="1583289">608</span><span class="op" id="1583292">,</span>&nbsp;<span class="ident" id="1583294">false</span><span class="op" id="1583299">}</span><span class="op" id="1583300">,</span>&nbsp;&nbsp;<span class="comment" id="1583303">//&nbsp;10^-164</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583315">{</span><span class="num" id="1583316">0xdbac6c247d62a584</span><span class="op" id="1583334">,</span>&nbsp;<span class="op" id="1583336">-</span><span class="num" id="1583337">582</span><span class="op" id="1583340">,</span>&nbsp;<span class="ident" id="1583342">false</span><span class="op" id="1583347">}</span><span class="op" id="1583348">,</span>&nbsp;&nbsp;<span class="comment" id="1583351">//&nbsp;10^-156</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583363">{</span><span class="num" id="1583364">0xa3ab66580d5fdaf6</span><span class="op" id="1583382">,</span>&nbsp;<span class="op" id="1583384">-</span><span class="num" id="1583385">555</span><span class="op" id="1583388">,</span>&nbsp;<span class="ident" id="1583390">false</span><span class="op" id="1583395">}</span><span class="op" id="1583396">,</span>&nbsp;&nbsp;<span class="comment" id="1583399">//&nbsp;10^-148</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583411">{</span><span class="num" id="1583412">0xf3e2f893dec3f126</span><span class="op" id="1583430">,</span>&nbsp;<span class="op" id="1583432">-</span><span class="num" id="1583433">529</span><span class="op" id="1583436">,</span>&nbsp;<span class="ident" id="1583438">false</span><span class="op" id="1583443">}</span><span class="op" id="1583444">,</span>&nbsp;&nbsp;<span class="comment" id="1583447">//&nbsp;10^-140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583459">{</span><span class="num" id="1583460">0xb5b5ada8aaff80b8</span><span class="op" id="1583478">,</span>&nbsp;<span class="op" id="1583480">-</span><span class="num" id="1583481">502</span><span class="op" id="1583484">,</span>&nbsp;<span class="ident" id="1583486">false</span><span class="op" id="1583491">}</span><span class="op" id="1583492">,</span>&nbsp;&nbsp;<span class="comment" id="1583495">//&nbsp;10^-132</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583507">{</span><span class="num" id="1583508">0x87625f056c7c4a8b</span><span class="op" id="1583526">,</span>&nbsp;<span class="op" id="1583528">-</span><span class="num" id="1583529">475</span><span class="op" id="1583532">,</span>&nbsp;<span class="ident" id="1583534">false</span><span class="op" id="1583539">}</span><span class="op" id="1583540">,</span>&nbsp;&nbsp;<span class="comment" id="1583543">//&nbsp;10^-124</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583555">{</span><span class="num" id="1583556">0xc9bcff6034c13053</span><span class="op" id="1583574">,</span>&nbsp;<span class="op" id="1583576">-</span><span class="num" id="1583577">449</span><span class="op" id="1583580">,</span>&nbsp;<span class="ident" id="1583582">false</span><span class="op" id="1583587">}</span><span class="op" id="1583588">,</span>&nbsp;&nbsp;<span class="comment" id="1583591">//&nbsp;10^-116</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583603">{</span><span class="num" id="1583604">0x964e858c91ba2655</span><span class="op" id="1583622">,</span>&nbsp;<span class="op" id="1583624">-</span><span class="num" id="1583625">422</span><span class="op" id="1583628">,</span>&nbsp;<span class="ident" id="1583630">false</span><span class="op" id="1583635">}</span><span class="op" id="1583636">,</span>&nbsp;&nbsp;<span class="comment" id="1583639">//&nbsp;10^-108</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583651">{</span><span class="num" id="1583652">0xdff9772470297ebd</span><span class="op" id="1583670">,</span>&nbsp;<span class="op" id="1583672">-</span><span class="num" id="1583673">396</span><span class="op" id="1583676">,</span>&nbsp;<span class="ident" id="1583678">false</span><span class="op" id="1583683">}</span><span class="op" id="1583684">,</span>&nbsp;&nbsp;<span class="comment" id="1583687">//&nbsp;10^-100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583699">{</span><span class="num" id="1583700">0xa6dfbd9fb8e5b88f</span><span class="op" id="1583718">,</span>&nbsp;<span class="op" id="1583720">-</span><span class="num" id="1583721">369</span><span class="op" id="1583724">,</span>&nbsp;<span class="ident" id="1583726">false</span><span class="op" id="1583731">}</span><span class="op" id="1583732">,</span>&nbsp;&nbsp;<span class="comment" id="1583735">//&nbsp;10^-92</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583746">{</span><span class="num" id="1583747">0xf8a95fcf88747d94</span><span class="op" id="1583765">,</span>&nbsp;<span class="op" id="1583767">-</span><span class="num" id="1583768">343</span><span class="op" id="1583771">,</span>&nbsp;<span class="ident" id="1583773">false</span><span class="op" id="1583778">}</span><span class="op" id="1583779">,</span>&nbsp;&nbsp;<span class="comment" id="1583782">//&nbsp;10^-84</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583793">{</span><span class="num" id="1583794">0xb94470938fa89bcf</span><span class="op" id="1583812">,</span>&nbsp;<span class="op" id="1583814">-</span><span class="num" id="1583815">316</span><span class="op" id="1583818">,</span>&nbsp;<span class="ident" id="1583820">false</span><span class="op" id="1583825">}</span><span class="op" id="1583826">,</span>&nbsp;&nbsp;<span class="comment" id="1583829">//&nbsp;10^-76</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583840">{</span><span class="num" id="1583841">0x8a08f0f8bf0f156b</span><span class="op" id="1583859">,</span>&nbsp;<span class="op" id="1583861">-</span><span class="num" id="1583862">289</span><span class="op" id="1583865">,</span>&nbsp;<span class="ident" id="1583867">false</span><span class="op" id="1583872">}</span><span class="op" id="1583873">,</span>&nbsp;&nbsp;<span class="comment" id="1583876">//&nbsp;10^-68</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583887">{</span><span class="num" id="1583888">0xcdb02555653131b6</span><span class="op" id="1583906">,</span>&nbsp;<span class="op" id="1583908">-</span><span class="num" id="1583909">263</span><span class="op" id="1583912">,</span>&nbsp;<span class="ident" id="1583914">false</span><span class="op" id="1583919">}</span><span class="op" id="1583920">,</span>&nbsp;&nbsp;<span class="comment" id="1583923">//&nbsp;10^-60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583934">{</span><span class="num" id="1583935">0x993fe2c6d07b7fac</span><span class="op" id="1583953">,</span>&nbsp;<span class="op" id="1583955">-</span><span class="num" id="1583956">236</span><span class="op" id="1583959">,</span>&nbsp;<span class="ident" id="1583961">false</span><span class="op" id="1583966">}</span><span class="op" id="1583967">,</span>&nbsp;&nbsp;<span class="comment" id="1583970">//&nbsp;10^-52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1583981">{</span><span class="num" id="1583982">0xe45c10c42a2b3b06</span><span class="op" id="1584000">,</span>&nbsp;<span class="op" id="1584002">-</span><span class="num" id="1584003">210</span><span class="op" id="1584006">,</span>&nbsp;<span class="ident" id="1584008">false</span><span class="op" id="1584013">}</span><span class="op" id="1584014">,</span>&nbsp;&nbsp;<span class="comment" id="1584017">//&nbsp;10^-44</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584028">{</span><span class="num" id="1584029">0xaa242499697392d3</span><span class="op" id="1584047">,</span>&nbsp;<span class="op" id="1584049">-</span><span class="num" id="1584050">183</span><span class="op" id="1584053">,</span>&nbsp;<span class="ident" id="1584055">false</span><span class="op" id="1584060">}</span><span class="op" id="1584061">,</span>&nbsp;&nbsp;<span class="comment" id="1584064">//&nbsp;10^-36</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584075">{</span><span class="num" id="1584076">0xfd87b5f28300ca0e</span><span class="op" id="1584094">,</span>&nbsp;<span class="op" id="1584096">-</span><span class="num" id="1584097">157</span><span class="op" id="1584100">,</span>&nbsp;<span class="ident" id="1584102">false</span><span class="op" id="1584107">}</span><span class="op" id="1584108">,</span>&nbsp;&nbsp;<span class="comment" id="1584111">//&nbsp;10^-28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584122">{</span><span class="num" id="1584123">0xbce5086492111aeb</span><span class="op" id="1584141">,</span>&nbsp;<span class="op" id="1584143">-</span><span class="num" id="1584144">130</span><span class="op" id="1584147">,</span>&nbsp;<span class="ident" id="1584149">false</span><span class="op" id="1584154">}</span><span class="op" id="1584155">,</span>&nbsp;&nbsp;<span class="comment" id="1584158">//&nbsp;10^-20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584169">{</span><span class="num" id="1584170">0x8cbccc096f5088cc</span><span class="op" id="1584188">,</span>&nbsp;<span class="op" id="1584190">-</span><span class="num" id="1584191">103</span><span class="op" id="1584194">,</span>&nbsp;<span class="ident" id="1584196">false</span><span class="op" id="1584201">}</span><span class="op" id="1584202">,</span>&nbsp;&nbsp;<span class="comment" id="1584205">//&nbsp;10^-12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584216">{</span><span class="num" id="1584217">0xd1b71758e219652c</span><span class="op" id="1584235">,</span>&nbsp;<span class="op" id="1584237">-</span><span class="num" id="1584238">77</span><span class="op" id="1584240">,</span>&nbsp;<span class="ident" id="1584242">false</span><span class="op" id="1584247">}</span><span class="op" id="1584248">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584252">//&nbsp;10^-4</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584262">{</span><span class="num" id="1584263">0x9c40000000000000</span><span class="op" id="1584281">,</span>&nbsp;<span class="op" id="1584283">-</span><span class="num" id="1584284">50</span><span class="op" id="1584286">,</span>&nbsp;<span class="ident" id="1584288">false</span><span class="op" id="1584293">}</span><span class="op" id="1584294">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584298">//&nbsp;10^4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584307">{</span><span class="num" id="1584308">0xe8d4a51000000000</span><span class="op" id="1584326">,</span>&nbsp;<span class="op" id="1584328">-</span><span class="num" id="1584329">24</span><span class="op" id="1584331">,</span>&nbsp;<span class="ident" id="1584333">false</span><span class="op" id="1584338">}</span><span class="op" id="1584339">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584343">//&nbsp;10^12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584353">{</span><span class="num" id="1584354">0xad78ebc5ac620000</span><span class="op" id="1584372">,</span>&nbsp;<span class="num" id="1584374">3</span><span class="op" id="1584375">,</span>&nbsp;<span class="ident" id="1584377">false</span><span class="op" id="1584382">}</span><span class="op" id="1584383">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1584389">//&nbsp;10^20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584399">{</span><span class="num" id="1584400">0x813f3978f8940984</span><span class="op" id="1584418">,</span>&nbsp;<span class="num" id="1584420">30</span><span class="op" id="1584422">,</span>&nbsp;<span class="ident" id="1584424">false</span><span class="op" id="1584429">}</span><span class="op" id="1584430">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1584435">//&nbsp;10^28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584445">{</span><span class="num" id="1584446">0xc097ce7bc90715b3</span><span class="op" id="1584464">,</span>&nbsp;<span class="num" id="1584466">56</span><span class="op" id="1584468">,</span>&nbsp;<span class="ident" id="1584470">false</span><span class="op" id="1584475">}</span><span class="op" id="1584476">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1584481">//&nbsp;10^36</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584491">{</span><span class="num" id="1584492">0x8f7e32ce7bea5c70</span><span class="op" id="1584510">,</span>&nbsp;<span class="num" id="1584512">83</span><span class="op" id="1584514">,</span>&nbsp;<span class="ident" id="1584516">false</span><span class="op" id="1584521">}</span><span class="op" id="1584522">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1584527">//&nbsp;10^44</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584537">{</span><span class="num" id="1584538">0xd5d238a4abe98068</span><span class="op" id="1584556">,</span>&nbsp;<span class="num" id="1584558">109</span><span class="op" id="1584561">,</span>&nbsp;<span class="ident" id="1584563">false</span><span class="op" id="1584568">}</span><span class="op" id="1584569">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584573">//&nbsp;10^52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584583">{</span><span class="num" id="1584584">0x9f4f2726179a2245</span><span class="op" id="1584602">,</span>&nbsp;<span class="num" id="1584604">136</span><span class="op" id="1584607">,</span>&nbsp;<span class="ident" id="1584609">false</span><span class="op" id="1584614">}</span><span class="op" id="1584615">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584619">//&nbsp;10^60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584629">{</span><span class="num" id="1584630">0xed63a231d4c4fb27</span><span class="op" id="1584648">,</span>&nbsp;<span class="num" id="1584650">162</span><span class="op" id="1584653">,</span>&nbsp;<span class="ident" id="1584655">false</span><span class="op" id="1584660">}</span><span class="op" id="1584661">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584665">//&nbsp;10^68</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584675">{</span><span class="num" id="1584676">0xb0de65388cc8ada8</span><span class="op" id="1584694">,</span>&nbsp;<span class="num" id="1584696">189</span><span class="op" id="1584699">,</span>&nbsp;<span class="ident" id="1584701">false</span><span class="op" id="1584706">}</span><span class="op" id="1584707">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584711">//&nbsp;10^76</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584721">{</span><span class="num" id="1584722">0x83c7088e1aab65db</span><span class="op" id="1584740">,</span>&nbsp;<span class="num" id="1584742">216</span><span class="op" id="1584745">,</span>&nbsp;<span class="ident" id="1584747">false</span><span class="op" id="1584752">}</span><span class="op" id="1584753">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584757">//&nbsp;10^84</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584767">{</span><span class="num" id="1584768">0xc45d1df942711d9a</span><span class="op" id="1584786">,</span>&nbsp;<span class="num" id="1584788">242</span><span class="op" id="1584791">,</span>&nbsp;<span class="ident" id="1584793">false</span><span class="op" id="1584798">}</span><span class="op" id="1584799">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584803">//&nbsp;10^92</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584813">{</span><span class="num" id="1584814">0x924d692ca61be758</span><span class="op" id="1584832">,</span>&nbsp;<span class="num" id="1584834">269</span><span class="op" id="1584837">,</span>&nbsp;<span class="ident" id="1584839">false</span><span class="op" id="1584844">}</span><span class="op" id="1584845">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584849">//&nbsp;10^100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584860">{</span><span class="num" id="1584861">0xda01ee641a708dea</span><span class="op" id="1584879">,</span>&nbsp;<span class="num" id="1584881">295</span><span class="op" id="1584884">,</span>&nbsp;<span class="ident" id="1584886">false</span><span class="op" id="1584891">}</span><span class="op" id="1584892">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584896">//&nbsp;10^108</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584907">{</span><span class="num" id="1584908">0xa26da3999aef774a</span><span class="op" id="1584926">,</span>&nbsp;<span class="num" id="1584928">322</span><span class="op" id="1584931">,</span>&nbsp;<span class="ident" id="1584933">false</span><span class="op" id="1584938">}</span><span class="op" id="1584939">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584943">//&nbsp;10^116</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1584954">{</span><span class="num" id="1584955">0xf209787bb47d6b85</span><span class="op" id="1584973">,</span>&nbsp;<span class="num" id="1584975">348</span><span class="op" id="1584978">,</span>&nbsp;<span class="ident" id="1584980">false</span><span class="op" id="1584985">}</span><span class="op" id="1584986">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1584990">//&nbsp;10^124</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585001">{</span><span class="num" id="1585002">0xb454e4a179dd1877</span><span class="op" id="1585020">,</span>&nbsp;<span class="num" id="1585022">375</span><span class="op" id="1585025">,</span>&nbsp;<span class="ident" id="1585027">false</span><span class="op" id="1585032">}</span><span class="op" id="1585033">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585037">//&nbsp;10^132</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585048">{</span><span class="num" id="1585049">0x865b86925b9bc5c2</span><span class="op" id="1585067">,</span>&nbsp;<span class="num" id="1585069">402</span><span class="op" id="1585072">,</span>&nbsp;<span class="ident" id="1585074">false</span><span class="op" id="1585079">}</span><span class="op" id="1585080">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585084">//&nbsp;10^140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585095">{</span><span class="num" id="1585096">0xc83553c5c8965d3d</span><span class="op" id="1585114">,</span>&nbsp;<span class="num" id="1585116">428</span><span class="op" id="1585119">,</span>&nbsp;<span class="ident" id="1585121">false</span><span class="op" id="1585126">}</span><span class="op" id="1585127">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585131">//&nbsp;10^148</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585142">{</span><span class="num" id="1585143">0x952ab45cfa97a0b3</span><span class="op" id="1585161">,</span>&nbsp;<span class="num" id="1585163">455</span><span class="op" id="1585166">,</span>&nbsp;<span class="ident" id="1585168">false</span><span class="op" id="1585173">}</span><span class="op" id="1585174">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585178">//&nbsp;10^156</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585189">{</span><span class="num" id="1585190">0xde469fbd99a05fe3</span><span class="op" id="1585208">,</span>&nbsp;<span class="num" id="1585210">481</span><span class="op" id="1585213">,</span>&nbsp;<span class="ident" id="1585215">false</span><span class="op" id="1585220">}</span><span class="op" id="1585221">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585225">//&nbsp;10^164</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585236">{</span><span class="num" id="1585237">0xa59bc234db398c25</span><span class="op" id="1585255">,</span>&nbsp;<span class="num" id="1585257">508</span><span class="op" id="1585260">,</span>&nbsp;<span class="ident" id="1585262">false</span><span class="op" id="1585267">}</span><span class="op" id="1585268">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585272">//&nbsp;10^172</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585283">{</span><span class="num" id="1585284">0xf6c69a72a3989f5c</span><span class="op" id="1585302">,</span>&nbsp;<span class="num" id="1585304">534</span><span class="op" id="1585307">,</span>&nbsp;<span class="ident" id="1585309">false</span><span class="op" id="1585314">}</span><span class="op" id="1585315">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585319">//&nbsp;10^180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585330">{</span><span class="num" id="1585331">0xb7dcbf5354e9bece</span><span class="op" id="1585349">,</span>&nbsp;<span class="num" id="1585351">561</span><span class="op" id="1585354">,</span>&nbsp;<span class="ident" id="1585356">false</span><span class="op" id="1585361">}</span><span class="op" id="1585362">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585366">//&nbsp;10^188</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585377">{</span><span class="num" id="1585378">0x88fcf317f22241e2</span><span class="op" id="1585396">,</span>&nbsp;<span class="num" id="1585398">588</span><span class="op" id="1585401">,</span>&nbsp;<span class="ident" id="1585403">false</span><span class="op" id="1585408">}</span><span class="op" id="1585409">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585413">//&nbsp;10^196</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585424">{</span><span class="num" id="1585425">0xcc20ce9bd35c78a5</span><span class="op" id="1585443">,</span>&nbsp;<span class="num" id="1585445">614</span><span class="op" id="1585448">,</span>&nbsp;<span class="ident" id="1585450">false</span><span class="op" id="1585455">}</span><span class="op" id="1585456">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585460">//&nbsp;10^204</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585471">{</span><span class="num" id="1585472">0x98165af37b2153df</span><span class="op" id="1585490">,</span>&nbsp;<span class="num" id="1585492">641</span><span class="op" id="1585495">,</span>&nbsp;<span class="ident" id="1585497">false</span><span class="op" id="1585502">}</span><span class="op" id="1585503">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585507">//&nbsp;10^212</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585518">{</span><span class="num" id="1585519">0xe2a0b5dc971f303a</span><span class="op" id="1585537">,</span>&nbsp;<span class="num" id="1585539">667</span><span class="op" id="1585542">,</span>&nbsp;<span class="ident" id="1585544">false</span><span class="op" id="1585549">}</span><span class="op" id="1585550">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585554">//&nbsp;10^220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585565">{</span><span class="num" id="1585566">0xa8d9d1535ce3b396</span><span class="op" id="1585584">,</span>&nbsp;<span class="num" id="1585586">694</span><span class="op" id="1585589">,</span>&nbsp;<span class="ident" id="1585591">false</span><span class="op" id="1585596">}</span><span class="op" id="1585597">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585601">//&nbsp;10^228</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585612">{</span><span class="num" id="1585613">0xfb9b7cd9a4a7443c</span><span class="op" id="1585631">,</span>&nbsp;<span class="num" id="1585633">720</span><span class="op" id="1585636">,</span>&nbsp;<span class="ident" id="1585638">false</span><span class="op" id="1585643">}</span><span class="op" id="1585644">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585648">//&nbsp;10^236</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585659">{</span><span class="num" id="1585660">0xbb764c4ca7a44410</span><span class="op" id="1585678">,</span>&nbsp;<span class="num" id="1585680">747</span><span class="op" id="1585683">,</span>&nbsp;<span class="ident" id="1585685">false</span><span class="op" id="1585690">}</span><span class="op" id="1585691">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585695">//&nbsp;10^244</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585706">{</span><span class="num" id="1585707">0x8bab8eefb6409c1a</span><span class="op" id="1585725">,</span>&nbsp;<span class="num" id="1585727">774</span><span class="op" id="1585730">,</span>&nbsp;<span class="ident" id="1585732">false</span><span class="op" id="1585737">}</span><span class="op" id="1585738">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585742">//&nbsp;10^252</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585753">{</span><span class="num" id="1585754">0xd01fef10a657842c</span><span class="op" id="1585772">,</span>&nbsp;<span class="num" id="1585774">800</span><span class="op" id="1585777">,</span>&nbsp;<span class="ident" id="1585779">false</span><span class="op" id="1585784">}</span><span class="op" id="1585785">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585789">//&nbsp;10^260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585800">{</span><span class="num" id="1585801">0x9b10a4e5e9913129</span><span class="op" id="1585819">,</span>&nbsp;<span class="num" id="1585821">827</span><span class="op" id="1585824">,</span>&nbsp;<span class="ident" id="1585826">false</span><span class="op" id="1585831">}</span><span class="op" id="1585832">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585836">//&nbsp;10^268</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585847">{</span><span class="num" id="1585848">0xe7109bfba19c0c9d</span><span class="op" id="1585866">,</span>&nbsp;<span class="num" id="1585868">853</span><span class="op" id="1585871">,</span>&nbsp;<span class="ident" id="1585873">false</span><span class="op" id="1585878">}</span><span class="op" id="1585879">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585883">//&nbsp;10^276</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585894">{</span><span class="num" id="1585895">0xac2820d9623bf429</span><span class="op" id="1585913">,</span>&nbsp;<span class="num" id="1585915">880</span><span class="op" id="1585918">,</span>&nbsp;<span class="ident" id="1585920">false</span><span class="op" id="1585925">}</span><span class="op" id="1585926">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585930">//&nbsp;10^284</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585941">{</span><span class="num" id="1585942">0x80444b5e7aa7cf85</span><span class="op" id="1585960">,</span>&nbsp;<span class="num" id="1585962">907</span><span class="op" id="1585965">,</span>&nbsp;<span class="ident" id="1585967">false</span><span class="op" id="1585972">}</span><span class="op" id="1585973">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1585977">//&nbsp;10^292</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1585988">{</span><span class="num" id="1585989">0xbf21e44003acdd2d</span><span class="op" id="1586007">,</span>&nbsp;<span class="num" id="1586009">933</span><span class="op" id="1586012">,</span>&nbsp;<span class="ident" id="1586014">false</span><span class="op" id="1586019">}</span><span class="op" id="1586020">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1586024">//&nbsp;10^300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1586035">{</span><span class="num" id="1586036">0x8e679c2f5e44ff8f</span><span class="op" id="1586054">,</span>&nbsp;<span class="num" id="1586056">960</span><span class="op" id="1586059">,</span>&nbsp;<span class="ident" id="1586061">false</span><span class="op" id="1586066">}</span><span class="op" id="1586067">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1586071">//&nbsp;10^308</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1586082">{</span><span class="num" id="1586083">0xd433179d9c8cb841</span><span class="op" id="1586101">,</span>&nbsp;<span class="num" id="1586103">986</span><span class="op" id="1586106">,</span>&nbsp;<span class="ident" id="1586108">false</span><span class="op" id="1586113">}</span><span class="op" id="1586114">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="1586118">//&nbsp;10^316</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1586129">{</span><span class="num" id="1586130">0x9e19db92b4e31ba9</span><span class="op" id="1586148">,</span>&nbsp;<span class="num" id="1586150">1013</span><span class="op" id="1586154">,</span>&nbsp;<span class="ident" id="1586156">false</span><span class="op" id="1586161">}</span><span class="op" id="1586162">,</span>&nbsp;&nbsp;<span class="comment" id="1586165">//&nbsp;10^324</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1586176">{</span><span class="num" id="1586177">0xeb96bf6ebadf77d9</span><span class="op" id="1586195">,</span>&nbsp;<span class="num" id="1586197">1039</span><span class="op" id="1586201">,</span>&nbsp;<span class="ident" id="1586203">false</span><span class="op" id="1586208">}</span><span class="op" id="1586209">,</span>&nbsp;&nbsp;<span class="comment" id="1586212">//&nbsp;10^332</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1586223">{</span><span class="num" id="1586224">0xaf87023b9bf0ee6b</span><span class="op" id="1586242">,</span>&nbsp;<span class="num" id="1586244">1066</span><span class="op" id="1586248">,</span>&nbsp;<span class="ident" id="1586250">false</span><span class="op" id="1586255">}</span><span class="op" id="1586256">,</span>&nbsp;&nbsp;<span class="comment" id="1586259">//&nbsp;10^340</span><br>
<span class="lineno"></span><span class="op" id="1586269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="comment" id="1586272">//&nbsp;floatBits&nbsp;returns&nbsp;the&nbsp;bits&nbsp;of&nbsp;the&nbsp;float64&nbsp;that&nbsp;best&nbsp;approximates</span><br>
<span class="lineno"></span><span class="comment" id="1586340">//&nbsp;the&nbsp;extFloat&nbsp;passed&nbsp;as&nbsp;receiver.&nbsp;Overflow&nbsp;is&nbsp;set&nbsp;to&nbsp;true&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="1586403">//&nbsp;the&nbsp;resulting&nbsp;float64&nbsp;is&nbsp;±Inf.</span><br>
<span class="lineno"></span><span class="keyword" id="1586438">func</span>&nbsp;<span class="op" id="1586443">(</span><span class="ident" id="1586444">f</span>&nbsp;<span class="op" id="1586446">*</span><span class="ident" id="1586447"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1586455">)</span>&nbsp;<span class="ident" id="1586457">floatBits</span><span class="op" id="1586466">(</span><span class="ident" id="1586467">flt</span>&nbsp;<span class="op" id="1586471">*</span><span class="ident" id="1586472"><a href="/strconv/ftoa.go.html#1601816">floatInfo</a></span><span class="op" id="1586481">)</span>&nbsp;<span class="op" id="1586483">(</span><span class="ident" id="1586484">bits</span>&nbsp;<span class="ident" id="1586489">uint64</span><span class="op" id="1586495">,</span>&nbsp;<span class="ident" id="1586497">overflow</span>&nbsp;<span class="builtintype" id="1586506">bool</span><span class="op" id="1586510">)</span>&nbsp;<span class="op" id="1586512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1586515"><a href="/strconv/extfloat.go.html#1586444">f</a></span><span class="op" id="1586516">.</span><span class="ident" id="1586517">Normalize</span><span class="op" id="1586526">(</span><span class="op" id="1586527">)</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1586531">exp</span>&nbsp;<span class="op" id="1586535">:=</span>&nbsp;<span class="ident" id="1586538"><a href="/strconv/extfloat.go.html#1586444">f</a></span><span class="op" id="1586539">.</span><span class="ident" id="1586540">exp</span>&nbsp;<span class="op" id="1586544">+</span>&nbsp;<span class="num" id="1586546">63</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1586551">//&nbsp;Exponent&nbsp;too&nbsp;small.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1586575">if</span>&nbsp;<span class="ident" id="1586578"><a href="/strconv/extfloat.go.html#1586531">exp</a></span>&nbsp;<span class="op" id="1586582">&lt;</span>&nbsp;<span class="ident" id="1586584"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1586587">.</span><span class="ident" id="1586588">bias</span><span class="op" id="1586592">+</span><span class="num" id="1586593">1</span>&nbsp;<span class="op" id="1586595">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1586599">n</span>&nbsp;<span class="op" id="1586601">:=</span>&nbsp;<span class="ident" id="1586604"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1586607">.</span><span class="ident" id="1586608">bias</span>&nbsp;<span class="op" id="1586613">+</span>&nbsp;<span class="num" id="1586615">1</span>&nbsp;<span class="op" id="1586617">-</span>&nbsp;<span class="ident" id="1586619"><a href="/strconv/extfloat.go.html#1586531">exp</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1586625"><a href="/strconv/extfloat.go.html#1586444">f</a></span><span class="op" id="1586626">.</span><span class="ident" id="1586627">mant</span>&nbsp;<span class="op" id="1586632">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="1586636">uint</span><span class="op" id="1586640">(</span><span class="ident" id="1586641"><a href="/strconv/extfloat.go.html#1586599">n</a></span><span class="op" id="1586642">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1586646"><a href="/strconv/extfloat.go.html#1586531">exp</a></span>&nbsp;<span class="op" id="1586650">+=</span>&nbsp;<span class="ident" id="1586653"><a href="/strconv/extfloat.go.html#1586599">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1586656">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1586660">//&nbsp;Extract&nbsp;1+flt.mantbits&nbsp;bits&nbsp;from&nbsp;the&nbsp;64-bit&nbsp;mantissa.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1586718">mant</span>&nbsp;<span class="op" id="1586723">:=</span>&nbsp;<span class="ident" id="1586726"><a href="/strconv/extfloat.go.html#1586444">f</a></span><span class="op" id="1586727">.</span><span class="ident" id="1586728">mant</span>&nbsp;<span class="op" id="1586733">&gt;&gt;</span>&nbsp;<span class="op" id="1586736">(</span><span class="num" id="1586737">63</span>&nbsp;<span class="op" id="1586740">-</span>&nbsp;<span class="ident" id="1586742"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1586745">.</span><span class="ident" id="1586746">mantbits</span><span class="op" id="1586754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1586757">if</span>&nbsp;<span class="ident" id="1586760"><a href="/strconv/extfloat.go.html#1586444">f</a></span><span class="op" id="1586761">.</span><span class="ident" id="1586762">mant</span><span class="op" id="1586766">&amp;</span><span class="op" id="1586767">(</span><span class="num" id="1586768">1</span><span class="op" id="1586769">&lt;&lt;</span><span class="op" id="1586771">(</span><span class="num" id="1586772">62</span><span class="op" id="1586774">-</span><span class="ident" id="1586775"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1586778">.</span><span class="ident" id="1586779">mantbits</span><span class="op" id="1586787">)</span><span class="op" id="1586788">)</span>&nbsp;<span class="op" id="1586790">!=</span>&nbsp;<span class="num" id="1586793">0</span>&nbsp;<span class="op" id="1586795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1586799">//&nbsp;Round&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1586814"><a href="/strconv/extfloat.go.html#1586718">mant</a></span>&nbsp;<span class="op" id="1586819">+=</span>&nbsp;<span class="num" id="1586822">1</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1586825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1586829">//&nbsp;Rounding&nbsp;might&nbsp;have&nbsp;added&nbsp;a&nbsp;bit;&nbsp;shift&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1586878">if</span>&nbsp;<span class="ident" id="1586881"><a href="/strconv/extfloat.go.html#1586718">mant</a></span>&nbsp;<span class="op" id="1586886">==</span>&nbsp;<span class="num" id="1586889">2</span><span class="op" id="1586890">&lt;&lt;</span><span class="ident" id="1586892"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1586895">.</span><span class="ident" id="1586896">mantbits</span>&nbsp;<span class="op" id="1586905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1586909"><a href="/strconv/extfloat.go.html#1586718">mant</a></span>&nbsp;<span class="op" id="1586914">&gt;&gt;=</span>&nbsp;<span class="num" id="1586918">1</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1586922"><a href="/strconv/extfloat.go.html#1586531">exp</a></span><span class="op" id="1586925">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1586929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1586933">//&nbsp;Infinities.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1586949">if</span>&nbsp;<span class="ident" id="1586952"><a href="/strconv/extfloat.go.html#1586531">exp</a></span><span class="op" id="1586955">-</span><span class="ident" id="1586956"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1586959">.</span><span class="ident" id="1586960">bias</span>&nbsp;<span class="op" id="1586965">&gt;=</span>&nbsp;<span class="num" id="1586968">1</span><span class="op" id="1586969">&lt;&lt;</span><span class="ident" id="1586971"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1586974">.</span><span class="ident" id="1586975">expbits</span><span class="op" id="1586982">-</span><span class="num" id="1586983">1</span>&nbsp;<span class="op" id="1586985">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1586989">//&nbsp;±Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587000"><a href="/strconv/extfloat.go.html#1586718">mant</a></span>&nbsp;<span class="op" id="1587005">=</span>&nbsp;<span class="num" id="1587007">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587011"><a href="/strconv/extfloat.go.html#1586531">exp</a></span>&nbsp;<span class="op" id="1587015">=</span>&nbsp;<span class="num" id="1587017">1</span><span class="op" id="1587018">&lt;&lt;</span><span class="ident" id="1587020"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1587023">.</span><span class="ident" id="1587024">expbits</span>&nbsp;<span class="op" id="1587032">-</span>&nbsp;<span class="num" id="1587034">1</span>&nbsp;<span class="op" id="1587036">+</span>&nbsp;<span class="ident" id="1587038"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1587041">.</span><span class="ident" id="1587042">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587049"><a href="/strconv/extfloat.go.html#1586497">overflow</a></span>&nbsp;<span class="op" id="1587058">=</span>&nbsp;<span class="ident" id="1587060">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1587066">}</span>&nbsp;<span class="keyword" id="1587068">else</span>&nbsp;<span class="keyword" id="1587073">if</span>&nbsp;<span class="ident" id="1587076"><a href="/strconv/extfloat.go.html#1586718">mant</a></span><span class="op" id="1587080">&amp;</span><span class="op" id="1587081">(</span><span class="num" id="1587082">1</span><span class="op" id="1587083">&lt;&lt;</span><span class="ident" id="1587085"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1587088">.</span><span class="ident" id="1587089">mantbits</span><span class="op" id="1587097">)</span>&nbsp;<span class="op" id="1587099">==</span>&nbsp;<span class="num" id="1587102">0</span>&nbsp;<span class="op" id="1587104">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1587108">//&nbsp;Denormalized?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587127"><a href="/strconv/extfloat.go.html#1586531">exp</a></span>&nbsp;<span class="op" id="1587131">=</span>&nbsp;<span class="ident" id="1587133"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1587136">.</span><span class="ident" id="1587137">bias</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1587143">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1587146">//&nbsp;Assemble&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587165"><a href="/strconv/extfloat.go.html#1586484">bits</a></span>&nbsp;<span class="op" id="1587170">=</span>&nbsp;<span class="ident" id="1587172"><a href="/strconv/extfloat.go.html#1586718">mant</a></span>&nbsp;<span class="op" id="1587177">&amp;</span>&nbsp;<span class="op" id="1587179">(</span><span class="ident" id="1587180">uint64</span><span class="op" id="1587186">(</span><span class="num" id="1587187">1</span><span class="op" id="1587188">)</span><span class="op" id="1587189">&lt;&lt;</span><span class="ident" id="1587191"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1587194">.</span><span class="ident" id="1587195">mantbits</span>&nbsp;<span class="op" id="1587204">-</span>&nbsp;<span class="num" id="1587206">1</span><span class="op" id="1587207">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587210"><a href="/strconv/extfloat.go.html#1586484">bits</a></span>&nbsp;<span class="op" id="1587215">|=</span>&nbsp;<span class="ident" id="1587218">uint64</span><span class="op" id="1587224">(</span><span class="op" id="1587225">(</span><span class="ident" id="1587226"><a href="/strconv/extfloat.go.html#1586531">exp</a></span><span class="op" id="1587229">-</span><span class="ident" id="1587230"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1587233">.</span><span class="ident" id="1587234">bias</span><span class="op" id="1587238">)</span><span class="op" id="1587239">&amp;</span><span class="op" id="1587240">(</span><span class="num" id="1587241">1</span><span class="op" id="1587242">&lt;&lt;</span><span class="ident" id="1587244"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1587247">.</span><span class="ident" id="1587248">expbits</span><span class="op" id="1587255">-</span><span class="num" id="1587256">1</span><span class="op" id="1587257">)</span><span class="op" id="1587258">)</span>&nbsp;<span class="op" id="1587260">&lt;&lt;</span>&nbsp;<span class="ident" id="1587263"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1587266">.</span><span class="ident" id="1587267">mantbits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1587277">if</span>&nbsp;<span class="ident" id="1587280"><a href="/strconv/extfloat.go.html#1586444">f</a></span><span class="op" id="1587281">.</span><span class="ident" id="1587282">neg</span>&nbsp;<span class="op" id="1587286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587290"><a href="/strconv/extfloat.go.html#1586484">bits</a></span>&nbsp;<span class="op" id="1587295">|=</span>&nbsp;<span class="num" id="1587298">1</span>&nbsp;<span class="op" id="1587300">&lt;&lt;</span>&nbsp;<span class="op" id="1587303">(</span><span class="ident" id="1587304"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1587307">.</span><span class="ident" id="1587308">mantbits</span>&nbsp;<span class="op" id="1587317">+</span>&nbsp;<span class="ident" id="1587319"><a href="/strconv/extfloat.go.html#1586467">flt</a></span><span class="op" id="1587322">.</span><span class="ident" id="1587323">expbits</span><span class="op" id="1587330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1587333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1587336">return</span><br>
<span class="lineno">170</span><span class="op" id="1587343">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1587346">//&nbsp;AssignComputeBounds&nbsp;sets&nbsp;f&nbsp;to&nbsp;the&nbsp;floating&nbsp;point&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="1587404">//&nbsp;defined&nbsp;by&nbsp;mant,&nbsp;exp&nbsp;and&nbsp;precision&nbsp;given&nbsp;by&nbsp;flt.&nbsp;It&nbsp;returns</span><br>
<span class="lineno"></span><span class="comment" id="1587467">//&nbsp;lower,&nbsp;upper&nbsp;such&nbsp;that&nbsp;any&nbsp;number&nbsp;in&nbsp;the&nbsp;closed&nbsp;interval</span><br>
<span class="lineno">175</span><span class="comment" id="1587527">//&nbsp;[lower,&nbsp;upper]&nbsp;is&nbsp;converted&nbsp;back&nbsp;to&nbsp;the&nbsp;same&nbsp;floating&nbsp;point&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="1587598">func</span>&nbsp;<span class="op" id="1587603">(</span><span class="ident" id="1587604">f</span>&nbsp;<span class="op" id="1587606">*</span><span class="ident" id="1587607"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1587615">)</span>&nbsp;<span class="ident" id="1587617">AssignComputeBounds</span><span class="op" id="1587636">(</span><span class="ident" id="1587637">mant</span>&nbsp;<span class="ident" id="1587642">uint64</span><span class="op" id="1587648">,</span>&nbsp;<span class="ident" id="1587650">exp</span>&nbsp;<span class="builtintype" id="1587654">int</span><span class="op" id="1587657">,</span>&nbsp;<span class="ident" id="1587659">neg</span>&nbsp;<span class="builtintype" id="1587663">bool</span><span class="op" id="1587667">,</span>&nbsp;<span class="ident" id="1587669">flt</span>&nbsp;<span class="op" id="1587673">*</span><span class="ident" id="1587674"><a href="/strconv/ftoa.go.html#1601816">floatInfo</a></span><span class="op" id="1587683">)</span>&nbsp;<span class="op" id="1587685">(</span><span class="ident" id="1587686">lower</span><span class="op" id="1587691">,</span>&nbsp;<span class="ident" id="1587693">upper</span>&nbsp;<span class="ident" id="1587699"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1587707">)</span>&nbsp;<span class="op" id="1587709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587712"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587713">.</span><span class="ident" id="1587714">mant</span>&nbsp;<span class="op" id="1587719">=</span>&nbsp;<span class="ident" id="1587721"><a href="/strconv/extfloat.go.html#1587637">mant</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587727"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587728">.</span><span class="ident" id="1587729">exp</span>&nbsp;<span class="op" id="1587733">=</span>&nbsp;<span class="ident" id="1587735"><a href="/strconv/extfloat.go.html#1587650">exp</a></span>&nbsp;<span class="op" id="1587739">-</span>&nbsp;<span class="builtintype" id="1587741">int</span><span class="op" id="1587744">(</span><span class="ident" id="1587745"><a href="/strconv/extfloat.go.html#1587669">flt</a></span><span class="op" id="1587748">.</span><span class="ident" id="1587749">mantbits</span><span class="op" id="1587757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587760"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587761">.</span><span class="ident" id="1587762">neg</span>&nbsp;<span class="op" id="1587766">=</span>&nbsp;<span class="ident" id="1587768"><a href="/strconv/extfloat.go.html#1587659">neg</a></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1587773">if</span>&nbsp;<span class="ident" id="1587776"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587777">.</span><span class="ident" id="1587778">exp</span>&nbsp;<span class="op" id="1587782">&lt;=</span>&nbsp;<span class="num" id="1587785">0</span>&nbsp;<span class="op" id="1587787">&amp;&amp;</span>&nbsp;<span class="ident" id="1587790"><a href="/strconv/extfloat.go.html#1587637">mant</a></span>&nbsp;<span class="op" id="1587795">==</span>&nbsp;<span class="op" id="1587798">(</span><span class="ident" id="1587799"><a href="/strconv/extfloat.go.html#1587637">mant</a></span><span class="op" id="1587803">&gt;&gt;</span><span class="builtintype" id="1587805">uint</span><span class="op" id="1587809">(</span><span class="op" id="1587810">-</span><span class="ident" id="1587811"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587812">.</span><span class="ident" id="1587813">exp</span><span class="op" id="1587816">)</span><span class="op" id="1587817">)</span><span class="op" id="1587818">&lt;&lt;</span><span class="builtintype" id="1587820">uint</span><span class="op" id="1587824">(</span><span class="op" id="1587825">-</span><span class="ident" id="1587826"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587827">.</span><span class="ident" id="1587828">exp</span><span class="op" id="1587831">)</span>&nbsp;<span class="op" id="1587833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1587837">//&nbsp;An&nbsp;exact&nbsp;integer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587859"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587860">.</span><span class="ident" id="1587861">mant</span>&nbsp;<span class="op" id="1587866">&gt;&gt;=</span>&nbsp;<span class="builtintype" id="1587870">uint</span><span class="op" id="1587874">(</span><span class="op" id="1587875">-</span><span class="ident" id="1587876"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587877">.</span><span class="ident" id="1587878">exp</span><span class="op" id="1587881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587885"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587886">.</span><span class="ident" id="1587887">exp</span>&nbsp;<span class="op" id="1587891">=</span>&nbsp;<span class="num" id="1587893">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1587897">return</span>&nbsp;<span class="op" id="1587904">*</span><span class="ident" id="1587905"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587906">,</span>&nbsp;<span class="op" id="1587908">*</span><span class="ident" id="1587909"><a href="/strconv/extfloat.go.html#1587604">f</a></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1587912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587915">expBiased</span>&nbsp;<span class="op" id="1587925">:=</span>&nbsp;<span class="ident" id="1587928"><a href="/strconv/extfloat.go.html#1587650">exp</a></span>&nbsp;<span class="op" id="1587932">-</span>&nbsp;<span class="ident" id="1587934"><a href="/strconv/extfloat.go.html#1587669">flt</a></span><span class="op" id="1587937">.</span><span class="ident" id="1587938">bias</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1587945"><a href="/strconv/extfloat.go.html#1587693">upper</a></span>&nbsp;<span class="op" id="1587951">=</span>&nbsp;<span class="ident" id="1587953"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1587961">{</span><span class="ident" id="1587962">mant</span><span class="op" id="1587966">:</span>&nbsp;<span class="num" id="1587968">2</span><span class="op" id="1587969">*</span><span class="ident" id="1587970"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587971">.</span><span class="ident" id="1587972">mant</span>&nbsp;<span class="op" id="1587977">+</span>&nbsp;<span class="num" id="1587979">1</span><span class="op" id="1587980">,</span>&nbsp;<span class="ident" id="1587982">exp</span><span class="op" id="1587985">:</span>&nbsp;<span class="ident" id="1587987"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1587988">.</span><span class="ident" id="1587989">exp</span>&nbsp;<span class="op" id="1587993">-</span>&nbsp;<span class="num" id="1587995">1</span><span class="op" id="1587996">,</span>&nbsp;<span class="ident" id="1587998">neg</span><span class="op" id="1588001">:</span>&nbsp;<span class="ident" id="1588003"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1588004">.</span><span class="ident" id="1588005">neg</span><span class="op" id="1588008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588011">if</span>&nbsp;<span class="ident" id="1588014"><a href="/strconv/extfloat.go.html#1587637">mant</a></span>&nbsp;<span class="op" id="1588019">!=</span>&nbsp;<span class="num" id="1588022">1</span><span class="op" id="1588023">&lt;&lt;</span><span class="ident" id="1588025"><a href="/strconv/extfloat.go.html#1587669">flt</a></span><span class="op" id="1588028">.</span><span class="ident" id="1588029">mantbits</span>&nbsp;<span class="op" id="1588038">||</span>&nbsp;<span class="ident" id="1588041"><a href="/strconv/extfloat.go.html#1587915">expBiased</a></span>&nbsp;<span class="op" id="1588051">==</span>&nbsp;<span class="num" id="1588054">1</span>&nbsp;<span class="op" id="1588056">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588060"><a href="/strconv/extfloat.go.html#1587686">lower</a></span>&nbsp;<span class="op" id="1588066">=</span>&nbsp;<span class="ident" id="1588068"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1588076">{</span><span class="ident" id="1588077">mant</span><span class="op" id="1588081">:</span>&nbsp;<span class="num" id="1588083">2</span><span class="op" id="1588084">*</span><span class="ident" id="1588085"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1588086">.</span><span class="ident" id="1588087">mant</span>&nbsp;<span class="op" id="1588092">-</span>&nbsp;<span class="num" id="1588094">1</span><span class="op" id="1588095">,</span>&nbsp;<span class="ident" id="1588097">exp</span><span class="op" id="1588100">:</span>&nbsp;<span class="ident" id="1588102"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1588103">.</span><span class="ident" id="1588104">exp</span>&nbsp;<span class="op" id="1588108">-</span>&nbsp;<span class="num" id="1588110">1</span><span class="op" id="1588111">,</span>&nbsp;<span class="ident" id="1588113">neg</span><span class="op" id="1588116">:</span>&nbsp;<span class="ident" id="1588118"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1588119">.</span><span class="ident" id="1588120">neg</span><span class="op" id="1588123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1588126">}</span>&nbsp;<span class="keyword" id="1588128">else</span>&nbsp;<span class="op" id="1588133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588137"><a href="/strconv/extfloat.go.html#1587686">lower</a></span>&nbsp;<span class="op" id="1588143">=</span>&nbsp;<span class="ident" id="1588145"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1588153">{</span><span class="ident" id="1588154">mant</span><span class="op" id="1588158">:</span>&nbsp;<span class="num" id="1588160">4</span><span class="op" id="1588161">*</span><span class="ident" id="1588162"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1588163">.</span><span class="ident" id="1588164">mant</span>&nbsp;<span class="op" id="1588169">-</span>&nbsp;<span class="num" id="1588171">1</span><span class="op" id="1588172">,</span>&nbsp;<span class="ident" id="1588174">exp</span><span class="op" id="1588177">:</span>&nbsp;<span class="ident" id="1588179"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1588180">.</span><span class="ident" id="1588181">exp</span>&nbsp;<span class="op" id="1588185">-</span>&nbsp;<span class="num" id="1588187">2</span><span class="op" id="1588188">,</span>&nbsp;<span class="ident" id="1588190">neg</span><span class="op" id="1588193">:</span>&nbsp;<span class="ident" id="1588195"><a href="/strconv/extfloat.go.html#1587604">f</a></span><span class="op" id="1588196">.</span><span class="ident" id="1588197">neg</span><span class="op" id="1588200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1588203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588206">return</span><br>
<span class="lineno">195</span><span class="op" id="1588213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1588216">//&nbsp;Normalize&nbsp;normalizes&nbsp;f&nbsp;so&nbsp;that&nbsp;the&nbsp;highest&nbsp;bit&nbsp;of&nbsp;the&nbsp;mantissa&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="1588285">//&nbsp;set,&nbsp;and&nbsp;returns&nbsp;the&nbsp;number&nbsp;by&nbsp;which&nbsp;the&nbsp;mantissa&nbsp;was&nbsp;left-shifted.</span><br>
<span class="lineno"></span><span class="keyword" id="1588356">func</span>&nbsp;<span class="op" id="1588361">(</span><span class="ident" id="1588362">f</span>&nbsp;<span class="op" id="1588364">*</span><span class="ident" id="1588365"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1588373">)</span>&nbsp;<span class="ident" id="1588375">Normalize</span><span class="op" id="1588384">(</span><span class="op" id="1588385">)</span>&nbsp;<span class="op" id="1588387">(</span><span class="ident" id="1588388">shift</span>&nbsp;<span class="builtintype" id="1588394">uint</span><span class="op" id="1588398">)</span>&nbsp;<span class="op" id="1588400">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588403">mant</span><span class="op" id="1588407">,</span>&nbsp;<span class="ident" id="1588409">exp</span>&nbsp;<span class="op" id="1588413">:=</span>&nbsp;<span class="ident" id="1588416"><a href="/strconv/extfloat.go.html#1588362">f</a></span><span class="op" id="1588417">.</span><span class="ident" id="1588418">mant</span><span class="op" id="1588422">,</span>&nbsp;<span class="ident" id="1588424"><a href="/strconv/extfloat.go.html#1588362">f</a></span><span class="op" id="1588425">.</span><span class="ident" id="1588426">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588431">if</span>&nbsp;<span class="ident" id="1588434"><a href="/strconv/extfloat.go.html#1588403">mant</a></span>&nbsp;<span class="op" id="1588439">==</span>&nbsp;<span class="num" id="1588442">0</span>&nbsp;<span class="op" id="1588444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588448">return</span>&nbsp;<span class="num" id="1588455">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1588458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588461">if</span>&nbsp;<span class="ident" id="1588464"><a href="/strconv/extfloat.go.html#1588403">mant</a></span><span class="op" id="1588468">&gt;&gt;</span><span class="op" id="1588470">(</span><span class="num" id="1588471">64</span><span class="op" id="1588473">-</span><span class="num" id="1588474">32</span><span class="op" id="1588476">)</span>&nbsp;<span class="op" id="1588478">==</span>&nbsp;<span class="num" id="1588481">0</span>&nbsp;<span class="op" id="1588483">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588487"><a href="/strconv/extfloat.go.html#1588403">mant</a></span>&nbsp;<span class="op" id="1588492">&lt;&lt;=</span>&nbsp;<span class="num" id="1588496">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588501"><a href="/strconv/extfloat.go.html#1588409">exp</a></span>&nbsp;<span class="op" id="1588505">-=</span>&nbsp;<span class="num" id="1588508">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1588512">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588515">if</span>&nbsp;<span class="ident" id="1588518"><a href="/strconv/extfloat.go.html#1588403">mant</a></span><span class="op" id="1588522">&gt;&gt;</span><span class="op" id="1588524">(</span><span class="num" id="1588525">64</span><span class="op" id="1588527">-</span><span class="num" id="1588528">16</span><span class="op" id="1588530">)</span>&nbsp;<span class="op" id="1588532">==</span>&nbsp;<span class="num" id="1588535">0</span>&nbsp;<span class="op" id="1588537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588541"><a href="/strconv/extfloat.go.html#1588403">mant</a></span>&nbsp;<span class="op" id="1588546">&lt;&lt;=</span>&nbsp;<span class="num" id="1588550">16</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588555"><a href="/strconv/extfloat.go.html#1588409">exp</a></span>&nbsp;<span class="op" id="1588559">-=</span>&nbsp;<span class="num" id="1588562">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1588566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588569">if</span>&nbsp;<span class="ident" id="1588572"><a href="/strconv/extfloat.go.html#1588403">mant</a></span><span class="op" id="1588576">&gt;&gt;</span><span class="op" id="1588578">(</span><span class="num" id="1588579">64</span><span class="op" id="1588581">-</span><span class="num" id="1588582">8</span><span class="op" id="1588583">)</span>&nbsp;<span class="op" id="1588585">==</span>&nbsp;<span class="num" id="1588588">0</span>&nbsp;<span class="op" id="1588590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588594"><a href="/strconv/extfloat.go.html#1588403">mant</a></span>&nbsp;<span class="op" id="1588599">&lt;&lt;=</span>&nbsp;<span class="num" id="1588603">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588607"><a href="/strconv/extfloat.go.html#1588409">exp</a></span>&nbsp;<span class="op" id="1588611">-=</span>&nbsp;<span class="num" id="1588614">8</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1588617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588620">if</span>&nbsp;<span class="ident" id="1588623"><a href="/strconv/extfloat.go.html#1588403">mant</a></span><span class="op" id="1588627">&gt;&gt;</span><span class="op" id="1588629">(</span><span class="num" id="1588630">64</span><span class="op" id="1588632">-</span><span class="num" id="1588633">4</span><span class="op" id="1588634">)</span>&nbsp;<span class="op" id="1588636">==</span>&nbsp;<span class="num" id="1588639">0</span>&nbsp;<span class="op" id="1588641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588645"><a href="/strconv/extfloat.go.html#1588403">mant</a></span>&nbsp;<span class="op" id="1588650">&lt;&lt;=</span>&nbsp;<span class="num" id="1588654">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588658"><a href="/strconv/extfloat.go.html#1588409">exp</a></span>&nbsp;<span class="op" id="1588662">-=</span>&nbsp;<span class="num" id="1588665">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1588668">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588671">if</span>&nbsp;<span class="ident" id="1588674"><a href="/strconv/extfloat.go.html#1588403">mant</a></span><span class="op" id="1588678">&gt;&gt;</span><span class="op" id="1588680">(</span><span class="num" id="1588681">64</span><span class="op" id="1588683">-</span><span class="num" id="1588684">2</span><span class="op" id="1588685">)</span>&nbsp;<span class="op" id="1588687">==</span>&nbsp;<span class="num" id="1588690">0</span>&nbsp;<span class="op" id="1588692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588696"><a href="/strconv/extfloat.go.html#1588403">mant</a></span>&nbsp;<span class="op" id="1588701">&lt;&lt;=</span>&nbsp;<span class="num" id="1588705">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588709"><a href="/strconv/extfloat.go.html#1588409">exp</a></span>&nbsp;<span class="op" id="1588713">-=</span>&nbsp;<span class="num" id="1588716">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1588719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588722">if</span>&nbsp;<span class="ident" id="1588725"><a href="/strconv/extfloat.go.html#1588403">mant</a></span><span class="op" id="1588729">&gt;&gt;</span><span class="op" id="1588731">(</span><span class="num" id="1588732">64</span><span class="op" id="1588734">-</span><span class="num" id="1588735">1</span><span class="op" id="1588736">)</span>&nbsp;<span class="op" id="1588738">==</span>&nbsp;<span class="num" id="1588741">0</span>&nbsp;<span class="op" id="1588743">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588747"><a href="/strconv/extfloat.go.html#1588403">mant</a></span>&nbsp;<span class="op" id="1588752">&lt;&lt;=</span>&nbsp;<span class="num" id="1588756">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588760"><a href="/strconv/extfloat.go.html#1588409">exp</a></span>&nbsp;<span class="op" id="1588764">-=</span>&nbsp;<span class="num" id="1588767">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1588770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588773"><a href="/strconv/extfloat.go.html#1588388">shift</a></span>&nbsp;<span class="op" id="1588779">=</span>&nbsp;<span class="builtintype" id="1588781">uint</span><span class="op" id="1588785">(</span><span class="ident" id="1588786"><a href="/strconv/extfloat.go.html#1588362">f</a></span><span class="op" id="1588787">.</span><span class="ident" id="1588788">exp</span>&nbsp;<span class="op" id="1588792">-</span>&nbsp;<span class="ident" id="1588794"><a href="/strconv/extfloat.go.html#1588409">exp</a></span><span class="op" id="1588797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588800"><a href="/strconv/extfloat.go.html#1588362">f</a></span><span class="op" id="1588801">.</span><span class="ident" id="1588802">mant</span><span class="op" id="1588806">,</span>&nbsp;<span class="ident" id="1588808"><a href="/strconv/extfloat.go.html#1588362">f</a></span><span class="op" id="1588809">.</span><span class="ident" id="1588810">exp</span>&nbsp;<span class="op" id="1588814">=</span>&nbsp;<span class="ident" id="1588816"><a href="/strconv/extfloat.go.html#1588403">mant</a></span><span class="op" id="1588820">,</span>&nbsp;<span class="ident" id="1588822"><a href="/strconv/extfloat.go.html#1588409">exp</a></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1588827">return</span><br>
<span class="lineno"></span><span class="op" id="1588834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1588837">//&nbsp;Multiply&nbsp;sets&nbsp;f&nbsp;to&nbsp;the&nbsp;product&nbsp;f*g:&nbsp;the&nbsp;result&nbsp;is&nbsp;correctly&nbsp;rounded,</span><br>
<span class="lineno"></span><span class="comment" id="1588909">//&nbsp;but&nbsp;not&nbsp;normalized.</span><br>
<span class="lineno">235</span><span class="keyword" id="1588932">func</span>&nbsp;<span class="op" id="1588937">(</span><span class="ident" id="1588938">f</span>&nbsp;<span class="op" id="1588940">*</span><span class="ident" id="1588941"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1588949">)</span>&nbsp;<span class="ident" id="1588951">Multiply</span><span class="op" id="1588959">(</span><span class="ident" id="1588960">g</span>&nbsp;<span class="ident" id="1588962"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1588970">)</span>&nbsp;<span class="op" id="1588972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1588975">fhi</span><span class="op" id="1588978">,</span>&nbsp;<span class="ident" id="1588980">flo</span>&nbsp;<span class="op" id="1588984">:=</span>&nbsp;<span class="ident" id="1588987"><a href="/strconv/extfloat.go.html#1588938">f</a></span><span class="op" id="1588988">.</span><span class="ident" id="1588989">mant</span><span class="op" id="1588993">&gt;&gt;</span><span class="num" id="1588995">32</span><span class="op" id="1588997">,</span>&nbsp;<span class="ident" id="1588999">uint64</span><span class="op" id="1589005">(</span><span class="builtintype" id="1589006">uint32</span><span class="op" id="1589012">(</span><span class="ident" id="1589013"><a href="/strconv/extfloat.go.html#1588938">f</a></span><span class="op" id="1589014">.</span><span class="ident" id="1589015">mant</span><span class="op" id="1589019">)</span><span class="op" id="1589020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1589023">ghi</span><span class="op" id="1589026">,</span>&nbsp;<span class="ident" id="1589028">glo</span>&nbsp;<span class="op" id="1589032">:=</span>&nbsp;<span class="ident" id="1589035"><a href="/strconv/extfloat.go.html#1588960">g</a></span><span class="op" id="1589036">.</span><span class="ident" id="1589037">mant</span><span class="op" id="1589041">&gt;&gt;</span><span class="num" id="1589043">32</span><span class="op" id="1589045">,</span>&nbsp;<span class="ident" id="1589047">uint64</span><span class="op" id="1589053">(</span><span class="builtintype" id="1589054">uint32</span><span class="op" id="1589060">(</span><span class="ident" id="1589061"><a href="/strconv/extfloat.go.html#1588960">g</a></span><span class="op" id="1589062">.</span><span class="ident" id="1589063">mant</span><span class="op" id="1589067">)</span><span class="op" id="1589068">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1589072">//&nbsp;Cross&nbsp;products.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1589092">cross1</span>&nbsp;<span class="op" id="1589099">:=</span>&nbsp;<span class="ident" id="1589102"><a href="/strconv/extfloat.go.html#1588975">fhi</a></span>&nbsp;<span class="op" id="1589106">*</span>&nbsp;<span class="ident" id="1589108"><a href="/strconv/extfloat.go.html#1589028">glo</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1589113">cross2</span>&nbsp;<span class="op" id="1589120">:=</span>&nbsp;<span class="ident" id="1589123"><a href="/strconv/extfloat.go.html#1588980">flo</a></span>&nbsp;<span class="op" id="1589127">*</span>&nbsp;<span class="ident" id="1589129"><a href="/strconv/extfloat.go.html#1589023">ghi</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1589135">//&nbsp;f.mant*g.mant&nbsp;is&nbsp;fhi*ghi&nbsp;&lt;&lt;&nbsp;64&nbsp;+&nbsp;(cross1+cross2)&nbsp;&lt;&lt;&nbsp;32&nbsp;+&nbsp;flo*glo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1589204"><a href="/strconv/extfloat.go.html#1588938">f</a></span><span class="op" id="1589205">.</span><span class="ident" id="1589206">mant</span>&nbsp;<span class="op" id="1589211">=</span>&nbsp;<span class="ident" id="1589213"><a href="/strconv/extfloat.go.html#1588975">fhi</a></span><span class="op" id="1589216">*</span><span class="ident" id="1589217"><a href="/strconv/extfloat.go.html#1589023">ghi</a></span>&nbsp;<span class="op" id="1589221">+</span>&nbsp;<span class="op" id="1589223">(</span><span class="ident" id="1589224"><a href="/strconv/extfloat.go.html#1589092">cross1</a></span>&nbsp;<span class="op" id="1589231">&gt;&gt;</span>&nbsp;<span class="num" id="1589234">32</span><span class="op" id="1589236">)</span>&nbsp;<span class="op" id="1589238">+</span>&nbsp;<span class="op" id="1589240">(</span><span class="ident" id="1589241"><a href="/strconv/extfloat.go.html#1589113">cross2</a></span>&nbsp;<span class="op" id="1589248">&gt;&gt;</span>&nbsp;<span class="num" id="1589251">32</span><span class="op" id="1589253">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1589256">rem</span>&nbsp;<span class="op" id="1589260">:=</span>&nbsp;<span class="ident" id="1589263">uint64</span><span class="op" id="1589269">(</span><span class="builtintype" id="1589270">uint32</span><span class="op" id="1589276">(</span><span class="ident" id="1589277"><a href="/strconv/extfloat.go.html#1589092">cross1</a></span><span class="op" id="1589283">)</span><span class="op" id="1589284">)</span>&nbsp;<span class="op" id="1589286">+</span>&nbsp;<span class="ident" id="1589288">uint64</span><span class="op" id="1589294">(</span><span class="builtintype" id="1589295">uint32</span><span class="op" id="1589301">(</span><span class="ident" id="1589302"><a href="/strconv/extfloat.go.html#1589113">cross2</a></span><span class="op" id="1589308">)</span><span class="op" id="1589309">)</span>&nbsp;<span class="op" id="1589311">+</span>&nbsp;<span class="op" id="1589313">(</span><span class="op" id="1589314">(</span><span class="ident" id="1589315"><a href="/strconv/extfloat.go.html#1588980">flo</a></span>&nbsp;<span class="op" id="1589319">*</span>&nbsp;<span class="ident" id="1589321"><a href="/strconv/extfloat.go.html#1589028">glo</a></span><span class="op" id="1589324">)</span>&nbsp;<span class="op" id="1589326">&gt;&gt;</span>&nbsp;<span class="num" id="1589329">32</span><span class="op" id="1589331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1589334">//&nbsp;Round&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1589348"><a href="/strconv/extfloat.go.html#1589256">rem</a></span>&nbsp;<span class="op" id="1589352">+=</span>&nbsp;<span class="op" id="1589355">(</span><span class="num" id="1589356">1</span>&nbsp;<span class="op" id="1589358">&lt;&lt;</span>&nbsp;<span class="num" id="1589361">31</span><span class="op" id="1589363">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1589367"><a href="/strconv/extfloat.go.html#1588938">f</a></span><span class="op" id="1589368">.</span><span class="ident" id="1589369">mant</span>&nbsp;<span class="op" id="1589374">+=</span>&nbsp;<span class="op" id="1589377">(</span><span class="ident" id="1589378"><a href="/strconv/extfloat.go.html#1589256">rem</a></span>&nbsp;<span class="op" id="1589382">&gt;&gt;</span>&nbsp;<span class="num" id="1589385">32</span><span class="op" id="1589387">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1589390"><a href="/strconv/extfloat.go.html#1588938">f</a></span><span class="op" id="1589391">.</span><span class="ident" id="1589392">exp</span>&nbsp;<span class="op" id="1589396">=</span>&nbsp;<span class="ident" id="1589398"><a href="/strconv/extfloat.go.html#1588938">f</a></span><span class="op" id="1589399">.</span><span class="ident" id="1589400">exp</span>&nbsp;<span class="op" id="1589404">+</span>&nbsp;<span class="ident" id="1589406"><a href="/strconv/extfloat.go.html#1588960">g</a></span><span class="op" id="1589407">.</span><span class="ident" id="1589408">exp</span>&nbsp;<span class="op" id="1589412">+</span>&nbsp;<span class="num" id="1589414">64</span><br>
<span class="lineno"></span><span class="op" id="1589417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1589420">var</span>&nbsp;<span class="ident" id="1589424">uint64pow10</span>&nbsp;<span class="op" id="1589436">=</span>&nbsp;<span class="op" id="1589438">[</span><span class="op" id="1589439">...</span><span class="op" id="1589442">]</span><span class="ident" id="1589443">uint64</span><span class="op" id="1589449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1589452">1</span><span class="op" id="1589453">,</span>&nbsp;<span class="num" id="1589455">1e1</span><span class="op" id="1589458">,</span>&nbsp;<span class="num" id="1589460">1e2</span><span class="op" id="1589463">,</span>&nbsp;<span class="num" id="1589465">1e3</span><span class="op" id="1589468">,</span>&nbsp;<span class="num" id="1589470">1e4</span><span class="op" id="1589473">,</span>&nbsp;<span class="num" id="1589475">1e5</span><span class="op" id="1589478">,</span>&nbsp;<span class="num" id="1589480">1e6</span><span class="op" id="1589483">,</span>&nbsp;<span class="num" id="1589485">1e7</span><span class="op" id="1589488">,</span>&nbsp;<span class="num" id="1589490">1e8</span><span class="op" id="1589493">,</span>&nbsp;<span class="num" id="1589495">1e9</span><span class="op" id="1589498">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1589501">1e10</span><span class="op" id="1589505">,</span>&nbsp;<span class="num" id="1589507">1e11</span><span class="op" id="1589511">,</span>&nbsp;<span class="num" id="1589513">1e12</span><span class="op" id="1589517">,</span>&nbsp;<span class="num" id="1589519">1e13</span><span class="op" id="1589523">,</span>&nbsp;<span class="num" id="1589525">1e14</span><span class="op" id="1589529">,</span>&nbsp;<span class="num" id="1589531">1e15</span><span class="op" id="1589535">,</span>&nbsp;<span class="num" id="1589537">1e16</span><span class="op" id="1589541">,</span>&nbsp;<span class="num" id="1589543">1e17</span><span class="op" id="1589547">,</span>&nbsp;<span class="num" id="1589549">1e18</span><span class="op" id="1589553">,</span>&nbsp;<span class="num" id="1589555">1e19</span><span class="op" id="1589559">,</span><br>
<span class="lineno"></span><span class="op" id="1589561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1589564">//&nbsp;AssignDecimal&nbsp;sets&nbsp;f&nbsp;to&nbsp;an&nbsp;approximate&nbsp;value&nbsp;mantissa*10^exp.&nbsp;It</span><br>
<span class="lineno"></span><span class="comment" id="1589632">//&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;value&nbsp;represented&nbsp;by&nbsp;f&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;the</span><br>
<span class="lineno">260</span><span class="comment" id="1589702">//&nbsp;best&nbsp;approximation&nbsp;of&nbsp;d&nbsp;after&nbsp;being&nbsp;rounded&nbsp;to&nbsp;a&nbsp;float64&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="1589765">//&nbsp;float32&nbsp;depending&nbsp;on&nbsp;flt.</span><br>
<span class="lineno"></span><span class="keyword" id="1589794">func</span>&nbsp;<span class="op" id="1589799">(</span><span class="ident" id="1589800">f</span>&nbsp;<span class="op" id="1589802">*</span><span class="ident" id="1589803"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1589811">)</span>&nbsp;<span class="ident" id="1589813">AssignDecimal</span><span class="op" id="1589826">(</span><span class="ident" id="1589827">mantissa</span>&nbsp;<span class="ident" id="1589836">uint64</span><span class="op" id="1589842">,</span>&nbsp;<span class="ident" id="1589844">exp10</span>&nbsp;<span class="builtintype" id="1589850">int</span><span class="op" id="1589853">,</span>&nbsp;<span class="ident" id="1589855">neg</span>&nbsp;<span class="builtintype" id="1589859">bool</span><span class="op" id="1589863">,</span>&nbsp;<span class="ident" id="1589865">trunc</span>&nbsp;<span class="builtintype" id="1589871">bool</span><span class="op" id="1589875">,</span>&nbsp;<span class="ident" id="1589877">flt</span>&nbsp;<span class="op" id="1589881">*</span><span class="ident" id="1589882"><a href="/strconv/ftoa.go.html#1601816">floatInfo</a></span><span class="op" id="1589891">)</span>&nbsp;<span class="op" id="1589893">(</span><span class="ident" id="1589894">ok</span>&nbsp;<span class="builtintype" id="1589897">bool</span><span class="op" id="1589901">)</span>&nbsp;<span class="op" id="1589903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1589906">const</span>&nbsp;<span class="ident" id="1589912">uint64digits</span>&nbsp;<span class="op" id="1589925">=</span>&nbsp;<span class="num" id="1589927">19</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1589931">const</span>&nbsp;<span class="ident" id="1589937">errorscale</span>&nbsp;<span class="op" id="1589948">=</span>&nbsp;<span class="num" id="1589950">8</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1589953">errors</span>&nbsp;<span class="op" id="1589960">:=</span>&nbsp;<span class="num" id="1589963">0</span>&nbsp;<span class="comment" id="1589965">//&nbsp;An&nbsp;upper&nbsp;bound&nbsp;for&nbsp;error,&nbsp;computed&nbsp;in&nbsp;errorscale*ulp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1590023">if</span>&nbsp;<span class="ident" id="1590026"><a href="/strconv/extfloat.go.html#1589865">trunc</a></span>&nbsp;<span class="op" id="1590032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1590036">//&nbsp;the&nbsp;decimal&nbsp;number&nbsp;was&nbsp;truncated.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590075"><a href="/strconv/extfloat.go.html#1589953">errors</a></span>&nbsp;<span class="op" id="1590082">+=</span>&nbsp;<span class="ident" id="1590085"><a href="/strconv/extfloat.go.html#1589937">errorscale</a></span>&nbsp;<span class="op" id="1590096">/</span>&nbsp;<span class="num" id="1590098">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1590101">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590105"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1590106">.</span><span class="ident" id="1590107">mant</span>&nbsp;<span class="op" id="1590112">=</span>&nbsp;<span class="ident" id="1590114"><a href="/strconv/extfloat.go.html#1589827">mantissa</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590124"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1590125">.</span><span class="ident" id="1590126">exp</span>&nbsp;<span class="op" id="1590130">=</span>&nbsp;<span class="num" id="1590132">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590135"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1590136">.</span><span class="ident" id="1590137">neg</span>&nbsp;<span class="op" id="1590141">=</span>&nbsp;<span class="ident" id="1590143"><a href="/strconv/extfloat.go.html#1589855">neg</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1590149">//&nbsp;Multiply&nbsp;by&nbsp;powers&nbsp;of&nbsp;ten.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590180">i</span>&nbsp;<span class="op" id="1590182">:=</span>&nbsp;<span class="op" id="1590185">(</span><span class="ident" id="1590186"><a href="/strconv/extfloat.go.html#1589844">exp10</a></span>&nbsp;<span class="op" id="1590192">-</span>&nbsp;<span class="ident" id="1590194"><a href="/strconv/extfloat.go.html#1581739">firstPowerOfTen</a></span><span class="op" id="1590209">)</span>&nbsp;<span class="op" id="1590211">/</span>&nbsp;<span class="ident" id="1590213"><a href="/strconv/extfloat.go.html#1581763">stepPowerOfTen</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1590229">if</span>&nbsp;<span class="ident" id="1590232"><a href="/strconv/extfloat.go.html#1589844">exp10</a></span>&nbsp;<span class="op" id="1590238">&lt;</span>&nbsp;<span class="ident" id="1590240"><a href="/strconv/extfloat.go.html#1581739">firstPowerOfTen</a></span>&nbsp;<span class="op" id="1590256">||</span>&nbsp;<span class="ident" id="1590259"><a href="/strconv/extfloat.go.html#1590180">i</a></span>&nbsp;<span class="op" id="1590261">&gt;=</span>&nbsp;<span class="builtinfunc" id="1590264">len</span><span class="op" id="1590267">(</span><span class="ident" id="1590268"><a href="/strconv/extfloat.go.html#1582133">powersOfTen</a></span><span class="op" id="1590279">)</span>&nbsp;<span class="op" id="1590281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1590285">return</span>&nbsp;<span class="ident" id="1590292">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1590299">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590302">adjExp</span>&nbsp;<span class="op" id="1590309">:=</span>&nbsp;<span class="op" id="1590312">(</span><span class="ident" id="1590313"><a href="/strconv/extfloat.go.html#1589844">exp10</a></span>&nbsp;<span class="op" id="1590319">-</span>&nbsp;<span class="ident" id="1590321"><a href="/strconv/extfloat.go.html#1581739">firstPowerOfTen</a></span><span class="op" id="1590336">)</span>&nbsp;<span class="op" id="1590338">%</span>&nbsp;<span class="ident" id="1590340"><a href="/strconv/extfloat.go.html#1581763">stepPowerOfTen</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1590357">//&nbsp;We&nbsp;multiply&nbsp;by&nbsp;exp%step</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1590385">if</span>&nbsp;<span class="ident" id="1590388"><a href="/strconv/extfloat.go.html#1590302">adjExp</a></span>&nbsp;<span class="op" id="1590395">&lt;</span>&nbsp;<span class="ident" id="1590397"><a href="/strconv/extfloat.go.html#1589912">uint64digits</a></span>&nbsp;<span class="op" id="1590410">&amp;&amp;</span>&nbsp;<span class="ident" id="1590413"><a href="/strconv/extfloat.go.html#1589827">mantissa</a></span>&nbsp;<span class="op" id="1590422">&lt;</span>&nbsp;<span class="ident" id="1590424"><a href="/strconv/extfloat.go.html#1589424">uint64pow10</a></span><span class="op" id="1590435">[</span><span class="ident" id="1590436"><a href="/strconv/extfloat.go.html#1589912">uint64digits</a></span><span class="op" id="1590448">-</span><span class="ident" id="1590449"><a href="/strconv/extfloat.go.html#1590302">adjExp</a></span><span class="op" id="1590455">]</span>&nbsp;<span class="op" id="1590457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1590461">//&nbsp;We&nbsp;can&nbsp;multiply&nbsp;the&nbsp;mantissa&nbsp;exactly.</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590504"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1590505">.</span><span class="ident" id="1590506">mant</span>&nbsp;<span class="op" id="1590511">*=</span>&nbsp;<span class="ident" id="1590514"><a href="/strconv/extfloat.go.html#1589424">uint64pow10</a></span><span class="op" id="1590525">[</span><span class="ident" id="1590526"><a href="/strconv/extfloat.go.html#1590302">adjExp</a></span><span class="op" id="1590532">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590536"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1590537">.</span><span class="ident" id="1590538">Normalize</span><span class="op" id="1590547">(</span><span class="op" id="1590548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1590551">}</span>&nbsp;<span class="keyword" id="1590553">else</span>&nbsp;<span class="op" id="1590558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590562"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1590563">.</span><span class="ident" id="1590564">Normalize</span><span class="op" id="1590573">(</span><span class="op" id="1590574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590578"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1590579">.</span><span class="ident" id="1590580">Multiply</span><span class="op" id="1590588">(</span><span class="ident" id="1590589"><a href="/strconv/extfloat.go.html#1581790">smallPowersOfTen</a></span><span class="op" id="1590605">[</span><span class="ident" id="1590606"><a href="/strconv/extfloat.go.html#1590302">adjExp</a></span><span class="op" id="1590612">]</span><span class="op" id="1590613">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590617"><a href="/strconv/extfloat.go.html#1589953">errors</a></span>&nbsp;<span class="op" id="1590624">+=</span>&nbsp;<span class="ident" id="1590627"><a href="/strconv/extfloat.go.html#1589937">errorscale</a></span>&nbsp;<span class="op" id="1590638">/</span>&nbsp;<span class="num" id="1590640">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1590643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1590647">//&nbsp;We&nbsp;multiply&nbsp;by&nbsp;10&nbsp;to&nbsp;the&nbsp;exp&nbsp;-&nbsp;exp%step.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590692"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1590693">.</span><span class="ident" id="1590694">Multiply</span><span class="op" id="1590702">(</span><span class="ident" id="1590703"><a href="/strconv/extfloat.go.html#1582133">powersOfTen</a></span><span class="op" id="1590714">[</span><span class="ident" id="1590715"><a href="/strconv/extfloat.go.html#1590180">i</a></span><span class="op" id="1590716">]</span><span class="op" id="1590717">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1590720">if</span>&nbsp;<span class="ident" id="1590723"><a href="/strconv/extfloat.go.html#1589953">errors</a></span>&nbsp;<span class="op" id="1590730">&gt;</span>&nbsp;<span class="num" id="1590732">0</span>&nbsp;<span class="op" id="1590734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590738"><a href="/strconv/extfloat.go.html#1589953">errors</a></span>&nbsp;<span class="op" id="1590745">+=</span>&nbsp;<span class="num" id="1590748">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1590751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590754"><a href="/strconv/extfloat.go.html#1589953">errors</a></span>&nbsp;<span class="op" id="1590761">+=</span>&nbsp;<span class="ident" id="1590764"><a href="/strconv/extfloat.go.html#1589937">errorscale</a></span>&nbsp;<span class="op" id="1590775">/</span>&nbsp;<span class="num" id="1590777">2</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1590781">//&nbsp;Normalize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590795">shift</span>&nbsp;<span class="op" id="1590801">:=</span>&nbsp;<span class="ident" id="1590804"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1590805">.</span><span class="ident" id="1590806">Normalize</span><span class="op" id="1590815">(</span><span class="op" id="1590816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1590819"><a href="/strconv/extfloat.go.html#1589953">errors</a></span>&nbsp;<span class="op" id="1590826">&lt;&lt;=</span>&nbsp;<span class="ident" id="1590830"><a href="/strconv/extfloat.go.html#1590795">shift</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1590838">//&nbsp;Now&nbsp;f&nbsp;is&nbsp;a&nbsp;good&nbsp;approximation&nbsp;of&nbsp;the&nbsp;decimal.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1590888">//&nbsp;Check&nbsp;whether&nbsp;the&nbsp;error&nbsp;is&nbsp;too&nbsp;large:&nbsp;that&nbsp;is,&nbsp;if&nbsp;the&nbsp;mantissa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1590955">//&nbsp;is&nbsp;perturbated&nbsp;by&nbsp;the&nbsp;error,&nbsp;the&nbsp;resulting&nbsp;float64&nbsp;will&nbsp;change.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1591023">//&nbsp;The&nbsp;64&nbsp;bits&nbsp;mantissa&nbsp;is&nbsp;1&nbsp;+&nbsp;52&nbsp;bits&nbsp;for&nbsp;float64&nbsp;+&nbsp;11&nbsp;extra&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1591092">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1591096">//&nbsp;In&nbsp;many&nbsp;cases&nbsp;the&nbsp;approximation&nbsp;will&nbsp;be&nbsp;good&nbsp;enough.</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1591153">denormalExp</span>&nbsp;<span class="op" id="1591165">:=</span>&nbsp;<span class="ident" id="1591168"><a href="/strconv/extfloat.go.html#1589877">flt</a></span><span class="op" id="1591171">.</span><span class="ident" id="1591172">bias</span>&nbsp;<span class="op" id="1591177">-</span>&nbsp;<span class="num" id="1591179">63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1591183">var</span>&nbsp;<span class="ident" id="1591187">extrabits</span>&nbsp;<span class="builtintype" id="1591197">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1591203">if</span>&nbsp;<span class="ident" id="1591206"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1591207">.</span><span class="ident" id="1591208">exp</span>&nbsp;<span class="op" id="1591212">&lt;=</span>&nbsp;<span class="ident" id="1591215"><a href="/strconv/extfloat.go.html#1591153">denormalExp</a></span>&nbsp;<span class="op" id="1591227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1591231">//&nbsp;f.mant&nbsp;*&nbsp;2^f.exp&nbsp;is&nbsp;smaller&nbsp;than&nbsp;2^(flt.bias+1).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1591285"><a href="/strconv/extfloat.go.html#1591187">extrabits</a></span>&nbsp;<span class="op" id="1591295">=</span>&nbsp;<span class="builtintype" id="1591297">uint</span><span class="op" id="1591301">(</span><span class="num" id="1591302">63</span>&nbsp;<span class="op" id="1591305">-</span>&nbsp;<span class="ident" id="1591307"><a href="/strconv/extfloat.go.html#1589877">flt</a></span><span class="op" id="1591310">.</span><span class="ident" id="1591311">mantbits</span>&nbsp;<span class="op" id="1591320">+</span>&nbsp;<span class="num" id="1591322">1</span>&nbsp;<span class="op" id="1591324">+</span>&nbsp;<span class="builtintype" id="1591326">uint</span><span class="op" id="1591330">(</span><span class="ident" id="1591331"><a href="/strconv/extfloat.go.html#1591153">denormalExp</a></span><span class="op" id="1591342">-</span><span class="ident" id="1591343"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1591344">.</span><span class="ident" id="1591345">exp</span><span class="op" id="1591348">)</span><span class="op" id="1591349">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1591352">}</span>&nbsp;<span class="keyword" id="1591354">else</span>&nbsp;<span class="op" id="1591359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1591363"><a href="/strconv/extfloat.go.html#1591187">extrabits</a></span>&nbsp;<span class="op" id="1591373">=</span>&nbsp;<span class="builtintype" id="1591375">uint</span><span class="op" id="1591379">(</span><span class="num" id="1591380">63</span>&nbsp;<span class="op" id="1591383">-</span>&nbsp;<span class="ident" id="1591385"><a href="/strconv/extfloat.go.html#1589877">flt</a></span><span class="op" id="1591388">.</span><span class="ident" id="1591389">mantbits</span><span class="op" id="1591397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1591400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1591404">halfway</span>&nbsp;<span class="op" id="1591412">:=</span>&nbsp;<span class="ident" id="1591415">uint64</span><span class="op" id="1591421">(</span><span class="num" id="1591422">1</span><span class="op" id="1591423">)</span>&nbsp;<span class="op" id="1591425">&lt;&lt;</span>&nbsp;<span class="op" id="1591428">(</span><span class="ident" id="1591429"><a href="/strconv/extfloat.go.html#1591187">extrabits</a></span>&nbsp;<span class="op" id="1591439">-</span>&nbsp;<span class="num" id="1591441">1</span><span class="op" id="1591442">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1591445">mant_extra</span>&nbsp;<span class="op" id="1591456">:=</span>&nbsp;<span class="ident" id="1591459"><a href="/strconv/extfloat.go.html#1589800">f</a></span><span class="op" id="1591460">.</span><span class="ident" id="1591461">mant</span>&nbsp;<span class="op" id="1591466">&amp;</span>&nbsp;<span class="op" id="1591468">(</span><span class="num" id="1591469">1</span><span class="op" id="1591470">&lt;&lt;</span><span class="ident" id="1591472"><a href="/strconv/extfloat.go.html#1591187">extrabits</a></span>&nbsp;<span class="op" id="1591482">-</span>&nbsp;<span class="num" id="1591484">1</span><span class="op" id="1591485">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1591489">//&nbsp;Do&nbsp;a&nbsp;signed&nbsp;comparison&nbsp;here!&nbsp;If&nbsp;the&nbsp;error&nbsp;estimate&nbsp;could&nbsp;make</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1591555">//&nbsp;the&nbsp;mantissa&nbsp;round&nbsp;differently&nbsp;for&nbsp;the&nbsp;conversion&nbsp;to&nbsp;double,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1591620">//&nbsp;then&nbsp;we&nbsp;can&#39;t&nbsp;give&nbsp;a&nbsp;definite&nbsp;answer.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1591662">if</span>&nbsp;<span class="ident" id="1591665">int64</span><span class="op" id="1591670">(</span><span class="ident" id="1591671"><a href="/strconv/extfloat.go.html#1591404">halfway</a></span><span class="op" id="1591678">)</span><span class="op" id="1591679">-</span><span class="ident" id="1591680">int64</span><span class="op" id="1591685">(</span><span class="ident" id="1591686"><a href="/strconv/extfloat.go.html#1589953">errors</a></span><span class="op" id="1591692">)</span>&nbsp;<span class="op" id="1591694">&lt;</span>&nbsp;<span class="ident" id="1591696">int64</span><span class="op" id="1591701">(</span><span class="ident" id="1591702"><a href="/strconv/extfloat.go.html#1591445">mant_extra</a></span><span class="op" id="1591712">)</span>&nbsp;<span class="op" id="1591714">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1591719">int64</span><span class="op" id="1591724">(</span><span class="ident" id="1591725"><a href="/strconv/extfloat.go.html#1591445">mant_extra</a></span><span class="op" id="1591735">)</span>&nbsp;<span class="op" id="1591737">&lt;</span>&nbsp;<span class="ident" id="1591739">int64</span><span class="op" id="1591744">(</span><span class="ident" id="1591745"><a href="/strconv/extfloat.go.html#1591404">halfway</a></span><span class="op" id="1591752">)</span><span class="op" id="1591753">+</span><span class="ident" id="1591754">int64</span><span class="op" id="1591759">(</span><span class="ident" id="1591760"><a href="/strconv/extfloat.go.html#1589953">errors</a></span><span class="op" id="1591766">)</span>&nbsp;<span class="op" id="1591768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1591772">return</span>&nbsp;<span class="ident" id="1591779">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1591786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1591789">return</span>&nbsp;<span class="ident" id="1591796">true</span><br>
<span class="lineno">330</span><span class="op" id="1591801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1591804">//&nbsp;Frexp10&nbsp;is&nbsp;an&nbsp;analogue&nbsp;of&nbsp;math.Frexp&nbsp;for&nbsp;decimal&nbsp;powers.&nbsp;It&nbsp;scales</span><br>
<span class="lineno"></span><span class="comment" id="1591874">//&nbsp;f&nbsp;by&nbsp;an&nbsp;approximate&nbsp;power&nbsp;of&nbsp;ten&nbsp;10^-exp,&nbsp;and&nbsp;returns&nbsp;exp10,&nbsp;so</span><br>
<span class="lineno"></span><span class="comment" id="1591941">//&nbsp;that&nbsp;f*10^exp10&nbsp;has&nbsp;the&nbsp;same&nbsp;value&nbsp;as&nbsp;the&nbsp;old&nbsp;f,&nbsp;up&nbsp;to&nbsp;an&nbsp;ulp,</span><br>
<span class="lineno">335</span><span class="comment" id="1592007">//&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;index&nbsp;of&nbsp;10^-exp&nbsp;in&nbsp;the&nbsp;powersOfTen&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="1592068">func</span>&nbsp;<span class="op" id="1592073">(</span><span class="ident" id="1592074">f</span>&nbsp;<span class="op" id="1592076">*</span><span class="ident" id="1592077"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1592085">)</span>&nbsp;<span class="ident" id="1592087">frexp10</span><span class="op" id="1592094">(</span><span class="op" id="1592095">)</span>&nbsp;<span class="op" id="1592097">(</span><span class="ident" id="1592098">exp10</span><span class="op" id="1592103">,</span>&nbsp;<span class="ident" id="1592105">index</span>&nbsp;<span class="builtintype" id="1592111">int</span><span class="op" id="1592114">)</span>&nbsp;<span class="op" id="1592116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1592119">//&nbsp;The&nbsp;constants&nbsp;expMin&nbsp;and&nbsp;expMax&nbsp;constrain&nbsp;the&nbsp;final&nbsp;value&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1592188">//&nbsp;binary&nbsp;exponent&nbsp;of&nbsp;f.&nbsp;We&nbsp;want&nbsp;a&nbsp;small&nbsp;integral&nbsp;part&nbsp;in&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1592258">//&nbsp;because&nbsp;finding&nbsp;digits&nbsp;of&nbsp;an&nbsp;integer&nbsp;requires&nbsp;divisions,&nbsp;whereas</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1592327">//&nbsp;digits&nbsp;of&nbsp;the&nbsp;fractional&nbsp;part&nbsp;can&nbsp;be&nbsp;found&nbsp;by&nbsp;repeatedly&nbsp;multiplying</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1592400">//&nbsp;by&nbsp;10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1592411">const</span>&nbsp;<span class="ident" id="1592417">expMin</span>&nbsp;<span class="op" id="1592424">=</span>&nbsp;<span class="op" id="1592426">-</span><span class="num" id="1592427">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1592431">const</span>&nbsp;<span class="ident" id="1592437">expMax</span>&nbsp;<span class="op" id="1592444">=</span>&nbsp;<span class="op" id="1592446">-</span><span class="num" id="1592447">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1592451">//&nbsp;Find&nbsp;power&nbsp;of&nbsp;ten&nbsp;such&nbsp;that&nbsp;x&nbsp;*&nbsp;10^n&nbsp;has&nbsp;a&nbsp;binary&nbsp;exponent</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1592514">//&nbsp;between&nbsp;expMin&nbsp;and&nbsp;expMax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1592545">approxExp10</span>&nbsp;<span class="op" id="1592557">:=</span>&nbsp;<span class="op" id="1592560">(</span><span class="op" id="1592561">(</span><span class="ident" id="1592562"><a href="/strconv/extfloat.go.html#1592417">expMin</a></span><span class="op" id="1592568">+</span><span class="ident" id="1592569"><a href="/strconv/extfloat.go.html#1592437">expMax</a></span><span class="op" id="1592575">)</span><span class="op" id="1592576">/</span><span class="num" id="1592577">2</span>&nbsp;<span class="op" id="1592579">-</span>&nbsp;<span class="ident" id="1592581"><a href="/strconv/extfloat.go.html#1592074">f</a></span><span class="op" id="1592582">.</span><span class="ident" id="1592583">exp</span><span class="op" id="1592586">)</span>&nbsp;<span class="op" id="1592588">*</span>&nbsp;<span class="num" id="1592590">28</span>&nbsp;<span class="op" id="1592593">/</span>&nbsp;<span class="num" id="1592595">93</span>&nbsp;<span class="comment" id="1592598">//&nbsp;log(10)/log(2)&nbsp;is&nbsp;close&nbsp;to&nbsp;93/28.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1592636">i</span>&nbsp;<span class="op" id="1592638">:=</span>&nbsp;<span class="op" id="1592641">(</span><span class="ident" id="1592642"><a href="/strconv/extfloat.go.html#1592545">approxExp10</a></span>&nbsp;<span class="op" id="1592654">-</span>&nbsp;<span class="ident" id="1592656"><a href="/strconv/extfloat.go.html#1581739">firstPowerOfTen</a></span><span class="op" id="1592671">)</span>&nbsp;<span class="op" id="1592673">/</span>&nbsp;<span class="ident" id="1592675"><a href="/strconv/extfloat.go.html#1581763">stepPowerOfTen</a></span><br>
<span class="lineno"></span><span class="ident" id="1592690">Loop</span><span class="op" id="1592694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1592697">for</span>&nbsp;<span class="op" id="1592701">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1592705">exp</span>&nbsp;<span class="op" id="1592709">:=</span>&nbsp;<span class="ident" id="1592712"><a href="/strconv/extfloat.go.html#1592074">f</a></span><span class="op" id="1592713">.</span><span class="ident" id="1592714">exp</span>&nbsp;<span class="op" id="1592718">+</span>&nbsp;<span class="ident" id="1592720"><a href="/strconv/extfloat.go.html#1582133">powersOfTen</a></span><span class="op" id="1592731">[</span><span class="ident" id="1592732"><a href="/strconv/extfloat.go.html#1592636">i</a></span><span class="op" id="1592733">]</span><span class="op" id="1592734">.</span><span class="ident" id="1592735">exp</span>&nbsp;<span class="op" id="1592739">+</span>&nbsp;<span class="num" id="1592741">64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1592746">switch</span>&nbsp;<span class="op" id="1592753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1592757">case</span>&nbsp;<span class="ident" id="1592762"><a href="/strconv/extfloat.go.html#1592705">exp</a></span>&nbsp;<span class="op" id="1592766">&lt;</span>&nbsp;<span class="ident" id="1592768"><a href="/strconv/extfloat.go.html#1592417">expMin</a></span><span class="op" id="1592774">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1592779"><a href="/strconv/extfloat.go.html#1592636">i</a></span><span class="op" id="1592780">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1592785">case</span>&nbsp;<span class="ident" id="1592790"><a href="/strconv/extfloat.go.html#1592705">exp</a></span>&nbsp;<span class="op" id="1592794">&gt;</span>&nbsp;<span class="ident" id="1592796"><a href="/strconv/extfloat.go.html#1592437">expMax</a></span><span class="op" id="1592802">:</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1592807"><a href="/strconv/extfloat.go.html#1592636">i</a></span><span class="op" id="1592808">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1592813">default</span><span class="op" id="1592820">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1592825">break</span>&nbsp;<span class="ident" id="1592831">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1592838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1592841">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1592844">//&nbsp;Apply&nbsp;the&nbsp;desired&nbsp;decimal&nbsp;shift&nbsp;on&nbsp;f.&nbsp;It&nbsp;will&nbsp;have&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1592908">//&nbsp;in&nbsp;the&nbsp;desired&nbsp;range.&nbsp;This&nbsp;is&nbsp;multiplication&nbsp;by&nbsp;10^-exp10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1592971"><a href="/strconv/extfloat.go.html#1592074">f</a></span><span class="op" id="1592972">.</span><span class="ident" id="1592973">Multiply</span><span class="op" id="1592981">(</span><span class="ident" id="1592982"><a href="/strconv/extfloat.go.html#1582133">powersOfTen</a></span><span class="op" id="1592993">[</span><span class="ident" id="1592994"><a href="/strconv/extfloat.go.html#1592636">i</a></span><span class="op" id="1592995">]</span><span class="op" id="1592996">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1593000">return</span>&nbsp;<span class="op" id="1593007">-</span><span class="op" id="1593008">(</span><span class="ident" id="1593009"><a href="/strconv/extfloat.go.html#1581739">firstPowerOfTen</a></span>&nbsp;<span class="op" id="1593025">+</span>&nbsp;<span class="ident" id="1593027"><a href="/strconv/extfloat.go.html#1592636">i</a></span><span class="op" id="1593028">*</span><span class="ident" id="1593029"><a href="/strconv/extfloat.go.html#1581763">stepPowerOfTen</a></span><span class="op" id="1593043">)</span><span class="op" id="1593044">,</span>&nbsp;<span class="ident" id="1593046"><a href="/strconv/extfloat.go.html#1592636">i</a></span><br>
<span class="lineno">365</span><span class="op" id="1593048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1593051">//&nbsp;frexp10Many&nbsp;applies&nbsp;a&nbsp;common&nbsp;shift&nbsp;by&nbsp;a&nbsp;power&nbsp;of&nbsp;ten&nbsp;to&nbsp;a,&nbsp;b,&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="1593119">func</span>&nbsp;<span class="ident" id="1593124">frexp10Many</span><span class="op" id="1593135">(</span><span class="ident" id="1593136">a</span><span class="op" id="1593137">,</span>&nbsp;<span class="ident" id="1593139">b</span><span class="op" id="1593140">,</span>&nbsp;<span class="ident" id="1593142">c</span>&nbsp;<span class="op" id="1593144">*</span><span class="ident" id="1593145"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1593153">)</span>&nbsp;<span class="op" id="1593155">(</span><span class="ident" id="1593156">exp10</span>&nbsp;<span class="builtintype" id="1593162">int</span><span class="op" id="1593165">)</span>&nbsp;<span class="op" id="1593167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593170"><a href="/strconv/extfloat.go.html#1593156">exp10</a></span><span class="op" id="1593175">,</span>&nbsp;<span class="ident" id="1593177">i</span>&nbsp;<span class="op" id="1593179">:=</span>&nbsp;<span class="ident" id="1593182"><a href="/strconv/extfloat.go.html#1593142">c</a></span><span class="op" id="1593183">.</span><span class="ident" id="1593184">frexp10</span><span class="op" id="1593191">(</span><span class="op" id="1593192">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593195"><a href="/strconv/extfloat.go.html#1593136">a</a></span><span class="op" id="1593196">.</span><span class="ident" id="1593197">Multiply</span><span class="op" id="1593205">(</span><span class="ident" id="1593206"><a href="/strconv/extfloat.go.html#1582133">powersOfTen</a></span><span class="op" id="1593217">[</span><span class="ident" id="1593218"><a href="/strconv/extfloat.go.html#1593177">i</a></span><span class="op" id="1593219">]</span><span class="op" id="1593220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593223"><a href="/strconv/extfloat.go.html#1593139">b</a></span><span class="op" id="1593224">.</span><span class="ident" id="1593225">Multiply</span><span class="op" id="1593233">(</span><span class="ident" id="1593234"><a href="/strconv/extfloat.go.html#1582133">powersOfTen</a></span><span class="op" id="1593245">[</span><span class="ident" id="1593246"><a href="/strconv/extfloat.go.html#1593177">i</a></span><span class="op" id="1593247">]</span><span class="op" id="1593248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1593251">return</span><br>
<span class="lineno"></span><span class="op" id="1593258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span><span class="comment" id="1593261">//&nbsp;FixedDecimal&nbsp;stores&nbsp;in&nbsp;d&nbsp;the&nbsp;first&nbsp;n&nbsp;significant&nbsp;digits</span><br>
<span class="lineno"></span><span class="comment" id="1593320">//&nbsp;of&nbsp;the&nbsp;decimal&nbsp;representation&nbsp;of&nbsp;f.&nbsp;It&nbsp;returns&nbsp;false</span><br>
<span class="lineno"></span><span class="comment" id="1593376">//&nbsp;if&nbsp;it&nbsp;cannot&nbsp;be&nbsp;sure&nbsp;of&nbsp;the&nbsp;answer.</span><br>
<span class="lineno"></span><span class="keyword" id="1593415">func</span>&nbsp;<span class="op" id="1593420">(</span><span class="ident" id="1593421">f</span>&nbsp;<span class="op" id="1593423">*</span><span class="ident" id="1593424"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1593432">)</span>&nbsp;<span class="ident" id="1593434">FixedDecimal</span><span class="op" id="1593446">(</span><span class="ident" id="1593447">d</span>&nbsp;<span class="op" id="1593449">*</span><span class="ident" id="1593450"><a href="/strconv/ftoa.go.html#1610549">decimalSlice</a></span><span class="op" id="1593462">,</span>&nbsp;<span class="ident" id="1593464">n</span>&nbsp;<span class="builtintype" id="1593466">int</span><span class="op" id="1593469">)</span>&nbsp;<span class="builtintype" id="1593471">bool</span>&nbsp;<span class="op" id="1593476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1593479">if</span>&nbsp;<span class="ident" id="1593482"><a href="/strconv/extfloat.go.html#1593421">f</a></span><span class="op" id="1593483">.</span><span class="ident" id="1593484">mant</span>&nbsp;<span class="op" id="1593489">==</span>&nbsp;<span class="num" id="1593492">0</span>&nbsp;<span class="op" id="1593494">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593498"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1593499">.</span><span class="ident" id="1593500">nd</span>&nbsp;<span class="op" id="1593503">=</span>&nbsp;<span class="num" id="1593505">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593509"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1593510">.</span><span class="ident" id="1593511">dp</span>&nbsp;<span class="op" id="1593514">=</span>&nbsp;<span class="num" id="1593516">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593520"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1593521">.</span><span class="ident" id="1593522">neg</span>&nbsp;<span class="op" id="1593526">=</span>&nbsp;<span class="ident" id="1593528"><a href="/strconv/extfloat.go.html#1593421">f</a></span><span class="op" id="1593529">.</span><span class="ident" id="1593530">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1593536">return</span>&nbsp;<span class="ident" id="1593543">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1593549">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1593552">if</span>&nbsp;<span class="ident" id="1593555"><a href="/strconv/extfloat.go.html#1593464">n</a></span>&nbsp;<span class="op" id="1593557">==</span>&nbsp;<span class="num" id="1593560">0</span>&nbsp;<span class="op" id="1593562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1593566">panic</span><span class="op" id="1593571">(</span><span class="string" id="1593572">&#34;strconv:&nbsp;internal&nbsp;error:&nbsp;extFloat.FixedDecimal&nbsp;called&nbsp;with&nbsp;n&nbsp;==&nbsp;0&#34;</span><span class="op" id="1593639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1593642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1593645">//&nbsp;Multiply&nbsp;by&nbsp;an&nbsp;appropriate&nbsp;power&nbsp;of&nbsp;ten&nbsp;to&nbsp;have&nbsp;a&nbsp;reasonable</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1593710">//&nbsp;number&nbsp;to&nbsp;process.</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593733"><a href="/strconv/extfloat.go.html#1593421">f</a></span><span class="op" id="1593734">.</span><span class="ident" id="1593735">Normalize</span><span class="op" id="1593744">(</span><span class="op" id="1593745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593748">exp10</span><span class="op" id="1593753">,</span>&nbsp;<span class="ident" id="1593755">_</span>&nbsp;<span class="op" id="1593757">:=</span>&nbsp;<span class="ident" id="1593760"><a href="/strconv/extfloat.go.html#1593421">f</a></span><span class="op" id="1593761">.</span><span class="ident" id="1593762">frexp10</span><span class="op" id="1593769">(</span><span class="op" id="1593770">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593774">shift</span>&nbsp;<span class="op" id="1593780">:=</span>&nbsp;<span class="builtintype" id="1593783">uint</span><span class="op" id="1593787">(</span><span class="op" id="1593788">-</span><span class="ident" id="1593789"><a href="/strconv/extfloat.go.html#1593421">f</a></span><span class="op" id="1593790">.</span><span class="ident" id="1593791">exp</span><span class="op" id="1593794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593797">integer</span>&nbsp;<span class="op" id="1593805">:=</span>&nbsp;<span class="builtintype" id="1593808">uint32</span><span class="op" id="1593814">(</span><span class="ident" id="1593815"><a href="/strconv/extfloat.go.html#1593421">f</a></span><span class="op" id="1593816">.</span><span class="ident" id="1593817">mant</span>&nbsp;<span class="op" id="1593822">&gt;&gt;</span>&nbsp;<span class="ident" id="1593825"><a href="/strconv/extfloat.go.html#1593774">shift</a></span><span class="op" id="1593830">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593833">fraction</span>&nbsp;<span class="op" id="1593842">:=</span>&nbsp;<span class="ident" id="1593845"><a href="/strconv/extfloat.go.html#1593421">f</a></span><span class="op" id="1593846">.</span><span class="ident" id="1593847">mant</span>&nbsp;<span class="op" id="1593852">-</span>&nbsp;<span class="op" id="1593854">(</span><span class="ident" id="1593855">uint64</span><span class="op" id="1593861">(</span><span class="ident" id="1593862"><a href="/strconv/extfloat.go.html#1593797">integer</a></span><span class="op" id="1593869">)</span>&nbsp;<span class="op" id="1593871">&lt;&lt;</span>&nbsp;<span class="ident" id="1593874"><a href="/strconv/extfloat.go.html#1593774">shift</a></span><span class="op" id="1593879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593882">ε</span>&nbsp;<span class="op" id="1593885">:=</span>&nbsp;<span class="ident" id="1593888">uint64</span><span class="op" id="1593894">(</span><span class="num" id="1593895">1</span><span class="op" id="1593896">)</span>&nbsp;<span class="comment" id="1593898">//&nbsp;ε&nbsp;is&nbsp;the&nbsp;uncertainty&nbsp;we&nbsp;have&nbsp;on&nbsp;the&nbsp;mantissa&nbsp;of&nbsp;f.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1593955">//&nbsp;Write&nbsp;exactly&nbsp;n&nbsp;digits&nbsp;to&nbsp;d.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1593988">needed</span>&nbsp;<span class="op" id="1593995">:=</span>&nbsp;<span class="ident" id="1593998"><a href="/strconv/extfloat.go.html#1593464">n</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1594007">//&nbsp;how&nbsp;many&nbsp;digits&nbsp;are&nbsp;left&nbsp;to&nbsp;write.</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594046">integerDigits</span>&nbsp;<span class="op" id="1594060">:=</span>&nbsp;<span class="num" id="1594063">0</span>&nbsp;<span class="comment" id="1594065">//&nbsp;the&nbsp;number&nbsp;of&nbsp;decimal&nbsp;digits&nbsp;of&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594110">pow10</span>&nbsp;<span class="op" id="1594116">:=</span>&nbsp;<span class="ident" id="1594119">uint64</span><span class="op" id="1594125">(</span><span class="num" id="1594126">1</span><span class="op" id="1594127">)</span>&nbsp;<span class="comment" id="1594129">//&nbsp;the&nbsp;power&nbsp;of&nbsp;ten&nbsp;by&nbsp;which&nbsp;f&nbsp;was&nbsp;scaled.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1594173">for</span>&nbsp;<span class="ident" id="1594177">i</span><span class="op" id="1594178">,</span>&nbsp;<span class="ident" id="1594180">pow</span>&nbsp;<span class="op" id="1594184">:=</span>&nbsp;<span class="num" id="1594187">0</span><span class="op" id="1594188">,</span>&nbsp;<span class="ident" id="1594190">uint64</span><span class="op" id="1594196">(</span><span class="num" id="1594197">1</span><span class="op" id="1594198">)</span><span class="op" id="1594199">;</span>&nbsp;<span class="ident" id="1594201"><a href="/strconv/extfloat.go.html#1594177">i</a></span>&nbsp;<span class="op" id="1594203">&lt;</span>&nbsp;<span class="num" id="1594205">20</span><span class="op" id="1594207">;</span>&nbsp;<span class="ident" id="1594209"><a href="/strconv/extfloat.go.html#1594177">i</a></span><span class="op" id="1594210">++</span>&nbsp;<span class="op" id="1594213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1594217">if</span>&nbsp;<span class="ident" id="1594220"><a href="/strconv/extfloat.go.html#1594180">pow</a></span>&nbsp;<span class="op" id="1594224">&gt;</span>&nbsp;<span class="ident" id="1594226">uint64</span><span class="op" id="1594232">(</span><span class="ident" id="1594233"><a href="/strconv/extfloat.go.html#1593797">integer</a></span><span class="op" id="1594240">)</span>&nbsp;<span class="op" id="1594242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594247"><a href="/strconv/extfloat.go.html#1594046">integerDigits</a></span>&nbsp;<span class="op" id="1594261">=</span>&nbsp;<span class="ident" id="1594263"><a href="/strconv/extfloat.go.html#1594177">i</a></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1594268">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1594276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594280"><a href="/strconv/extfloat.go.html#1594180">pow</a></span>&nbsp;<span class="op" id="1594284">*=</span>&nbsp;<span class="num" id="1594287">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1594291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594294">rest</span>&nbsp;<span class="op" id="1594299">:=</span>&nbsp;<span class="ident" id="1594302"><a href="/strconv/extfloat.go.html#1593797">integer</a></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1594311">if</span>&nbsp;<span class="ident" id="1594314"><a href="/strconv/extfloat.go.html#1594046">integerDigits</a></span>&nbsp;<span class="op" id="1594328">&gt;</span>&nbsp;<span class="ident" id="1594330"><a href="/strconv/extfloat.go.html#1593988">needed</a></span>&nbsp;<span class="op" id="1594337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1594341">//&nbsp;the&nbsp;integral&nbsp;part&nbsp;is&nbsp;already&nbsp;large,&nbsp;trim&nbsp;the&nbsp;last&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594404"><a href="/strconv/extfloat.go.html#1594110">pow10</a></span>&nbsp;<span class="op" id="1594410">=</span>&nbsp;<span class="ident" id="1594412"><a href="/strconv/extfloat.go.html#1589424">uint64pow10</a></span><span class="op" id="1594423">[</span><span class="ident" id="1594424"><a href="/strconv/extfloat.go.html#1594046">integerDigits</a></span><span class="op" id="1594437">-</span><span class="ident" id="1594438"><a href="/strconv/extfloat.go.html#1593988">needed</a></span><span class="op" id="1594444">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594448"><a href="/strconv/extfloat.go.html#1593797">integer</a></span>&nbsp;<span class="op" id="1594456">/=</span>&nbsp;<span class="builtintype" id="1594459">uint32</span><span class="op" id="1594465">(</span><span class="ident" id="1594466"><a href="/strconv/extfloat.go.html#1594110">pow10</a></span><span class="op" id="1594471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594475"><a href="/strconv/extfloat.go.html#1594294">rest</a></span>&nbsp;<span class="op" id="1594480">-=</span>&nbsp;<span class="ident" id="1594483"><a href="/strconv/extfloat.go.html#1593797">integer</a></span>&nbsp;<span class="op" id="1594491">*</span>&nbsp;<span class="builtintype" id="1594493">uint32</span><span class="op" id="1594499">(</span><span class="ident" id="1594500"><a href="/strconv/extfloat.go.html#1594110">pow10</a></span><span class="op" id="1594505">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1594508">}</span>&nbsp;<span class="keyword" id="1594510">else</span>&nbsp;<span class="op" id="1594515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594519"><a href="/strconv/extfloat.go.html#1594294">rest</a></span>&nbsp;<span class="op" id="1594524">=</span>&nbsp;<span class="num" id="1594526">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1594529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1594533">//&nbsp;Write&nbsp;the&nbsp;digits&nbsp;of&nbsp;integer:&nbsp;the&nbsp;digits&nbsp;of&nbsp;rest&nbsp;are&nbsp;omitted.</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1594598">var</span>&nbsp;<span class="ident" id="1594602">buf</span>&nbsp;<span class="op" id="1594606">[</span><span class="num" id="1594607">32</span><span class="op" id="1594609">]</span><span class="builtintype" id="1594610">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594616">pos</span>&nbsp;<span class="op" id="1594620">:=</span>&nbsp;<span class="builtinfunc" id="1594623">len</span><span class="op" id="1594626">(</span><span class="ident" id="1594627"><a href="/strconv/extfloat.go.html#1594602">buf</a></span><span class="op" id="1594630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1594633">for</span>&nbsp;<span class="ident" id="1594637">v</span>&nbsp;<span class="op" id="1594639">:=</span>&nbsp;<span class="ident" id="1594642"><a href="/strconv/extfloat.go.html#1593797">integer</a></span><span class="op" id="1594649">;</span>&nbsp;<span class="ident" id="1594651"><a href="/strconv/extfloat.go.html#1594637">v</a></span>&nbsp;<span class="op" id="1594653">&gt;</span>&nbsp;<span class="num" id="1594655">0</span><span class="op" id="1594656">;</span>&nbsp;<span class="op" id="1594658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594662">v1</span>&nbsp;<span class="op" id="1594665">:=</span>&nbsp;<span class="ident" id="1594668"><a href="/strconv/extfloat.go.html#1594637">v</a></span>&nbsp;<span class="op" id="1594670">/</span>&nbsp;<span class="num" id="1594672">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594677"><a href="/strconv/extfloat.go.html#1594637">v</a></span>&nbsp;<span class="op" id="1594679">-=</span>&nbsp;<span class="num" id="1594682">10</span>&nbsp;<span class="op" id="1594685">*</span>&nbsp;<span class="ident" id="1594687"><a href="/strconv/extfloat.go.html#1594662">v1</a></span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594692"><a href="/strconv/extfloat.go.html#1594616">pos</a></span><span class="op" id="1594695">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594700"><a href="/strconv/extfloat.go.html#1594602">buf</a></span><span class="op" id="1594703">[</span><span class="ident" id="1594704"><a href="/strconv/extfloat.go.html#1594616">pos</a></span><span class="op" id="1594707">]</span>&nbsp;<span class="op" id="1594709">=</span>&nbsp;<span class="builtintype" id="1594711">byte</span><span class="op" id="1594715">(</span><span class="ident" id="1594716"><a href="/strconv/extfloat.go.html#1594637">v</a></span>&nbsp;<span class="op" id="1594718">+</span>&nbsp;<span class="string" id="1594720">&#39;0&#39;</span><span class="op" id="1594723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594727"><a href="/strconv/extfloat.go.html#1594637">v</a></span>&nbsp;<span class="op" id="1594729">=</span>&nbsp;<span class="ident" id="1594731"><a href="/strconv/extfloat.go.html#1594662">v1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1594735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1594738">for</span>&nbsp;<span class="ident" id="1594742">i</span>&nbsp;<span class="op" id="1594744">:=</span>&nbsp;<span class="ident" id="1594747"><a href="/strconv/extfloat.go.html#1594616">pos</a></span><span class="op" id="1594750">;</span>&nbsp;<span class="ident" id="1594752"><a href="/strconv/extfloat.go.html#1594742">i</a></span>&nbsp;<span class="op" id="1594754">&lt;</span>&nbsp;<span class="builtinfunc" id="1594756">len</span><span class="op" id="1594759">(</span><span class="ident" id="1594760"><a href="/strconv/extfloat.go.html#1594602">buf</a></span><span class="op" id="1594763">)</span><span class="op" id="1594764">;</span>&nbsp;<span class="ident" id="1594766"><a href="/strconv/extfloat.go.html#1594742">i</a></span><span class="op" id="1594767">++</span>&nbsp;<span class="op" id="1594770">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594774"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1594775">.</span><span class="ident" id="1594776">d</span><span class="op" id="1594777">[</span><span class="ident" id="1594778"><a href="/strconv/extfloat.go.html#1594742">i</a></span><span class="op" id="1594779">-</span><span class="ident" id="1594780"><a href="/strconv/extfloat.go.html#1594616">pos</a></span><span class="op" id="1594783">]</span>&nbsp;<span class="op" id="1594785">=</span>&nbsp;<span class="ident" id="1594787"><a href="/strconv/extfloat.go.html#1594602">buf</a></span><span class="op" id="1594790">[</span><span class="ident" id="1594791"><a href="/strconv/extfloat.go.html#1594742">i</a></span><span class="op" id="1594792">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1594795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594798">nd</span>&nbsp;<span class="op" id="1594801">:=</span>&nbsp;<span class="builtinfunc" id="1594804">len</span><span class="op" id="1594807">(</span><span class="ident" id="1594808"><a href="/strconv/extfloat.go.html#1594602">buf</a></span><span class="op" id="1594811">)</span>&nbsp;<span class="op" id="1594813">-</span>&nbsp;<span class="ident" id="1594815"><a href="/strconv/extfloat.go.html#1594616">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594820"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1594821">.</span><span class="ident" id="1594822">nd</span>&nbsp;<span class="op" id="1594825">=</span>&nbsp;<span class="ident" id="1594827"><a href="/strconv/extfloat.go.html#1594798">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594831"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1594832">.</span><span class="ident" id="1594833">dp</span>&nbsp;<span class="op" id="1594836">=</span>&nbsp;<span class="ident" id="1594838"><a href="/strconv/extfloat.go.html#1594046">integerDigits</a></span>&nbsp;<span class="op" id="1594852">+</span>&nbsp;<span class="ident" id="1594854"><a href="/strconv/extfloat.go.html#1593748">exp10</a></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1594861"><a href="/strconv/extfloat.go.html#1593988">needed</a></span>&nbsp;<span class="op" id="1594868">-=</span>&nbsp;<span class="ident" id="1594871"><a href="/strconv/extfloat.go.html#1594798">nd</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1594876">if</span>&nbsp;<span class="ident" id="1594879"><a href="/strconv/extfloat.go.html#1593988">needed</a></span>&nbsp;<span class="op" id="1594886">&gt;</span>&nbsp;<span class="num" id="1594888">0</span>&nbsp;<span class="op" id="1594890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1594894">if</span>&nbsp;<span class="ident" id="1594897"><a href="/strconv/extfloat.go.html#1594294">rest</a></span>&nbsp;<span class="op" id="1594902">!=</span>&nbsp;<span class="num" id="1594905">0</span>&nbsp;<span class="op" id="1594907">||</span>&nbsp;<span class="ident" id="1594910"><a href="/strconv/extfloat.go.html#1594110">pow10</a></span>&nbsp;<span class="op" id="1594916">!=</span>&nbsp;<span class="num" id="1594919">1</span>&nbsp;<span class="op" id="1594921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1594926">panic</span><span class="op" id="1594931">(</span><span class="string" id="1594932">&#34;strconv:&nbsp;internal&nbsp;error,&nbsp;rest&nbsp;!=&nbsp;0&nbsp;but&nbsp;needed&nbsp;&gt;&nbsp;0&#34;</span><span class="op" id="1594983">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1594987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1594991">//&nbsp;Emit&nbsp;digits&nbsp;for&nbsp;the&nbsp;fractional&nbsp;part.&nbsp;Each&nbsp;time,&nbsp;10*fraction</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595056">//&nbsp;fits&nbsp;in&nbsp;a&nbsp;uint64&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1595096">for</span>&nbsp;<span class="ident" id="1595100"><a href="/strconv/extfloat.go.html#1593988">needed</a></span>&nbsp;<span class="op" id="1595107">&gt;</span>&nbsp;<span class="num" id="1595109">0</span>&nbsp;<span class="op" id="1595111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1595116"><a href="/strconv/extfloat.go.html#1593833">fraction</a></span>&nbsp;<span class="op" id="1595125">*=</span>&nbsp;<span class="num" id="1595128">10</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1595134"><a href="/strconv/extfloat.go.html#1593882">ε</a></span>&nbsp;<span class="op" id="1595137">*=</span>&nbsp;<span class="num" id="1595140">10</span>&nbsp;<span class="comment" id="1595143">//&nbsp;the&nbsp;uncertainty&nbsp;scales&nbsp;as&nbsp;we&nbsp;multiply&nbsp;by&nbsp;ten.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1595195">if</span>&nbsp;<span class="num" id="1595198">2</span><span class="op" id="1595199">*</span><span class="ident" id="1595200"><a href="/strconv/extfloat.go.html#1593882">ε</a></span>&nbsp;<span class="op" id="1595203">&gt;</span>&nbsp;<span class="num" id="1595205">1</span><span class="op" id="1595206">&lt;&lt;</span><span class="ident" id="1595208"><a href="/strconv/extfloat.go.html#1593774">shift</a></span>&nbsp;<span class="op" id="1595214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595220">//&nbsp;the&nbsp;error&nbsp;is&nbsp;so&nbsp;large&nbsp;it&nbsp;could&nbsp;modify&nbsp;which&nbsp;digit&nbsp;to&nbsp;write,&nbsp;abort.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1595294">return</span>&nbsp;<span class="ident" id="1595301">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1595310">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1595315">digit</span>&nbsp;<span class="op" id="1595321">:=</span>&nbsp;<span class="ident" id="1595324"><a href="/strconv/extfloat.go.html#1593833">fraction</a></span>&nbsp;<span class="op" id="1595333">&gt;&gt;</span>&nbsp;<span class="ident" id="1595336"><a href="/strconv/extfloat.go.html#1593774">shift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1595345"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1595346">.</span><span class="ident" id="1595347">d</span><span class="op" id="1595348">[</span><span class="ident" id="1595349"><a href="/strconv/extfloat.go.html#1594798">nd</a></span><span class="op" id="1595351">]</span>&nbsp;<span class="op" id="1595353">=</span>&nbsp;<span class="builtintype" id="1595355">byte</span><span class="op" id="1595359">(</span><span class="ident" id="1595360"><a href="/strconv/extfloat.go.html#1595315">digit</a></span>&nbsp;<span class="op" id="1595366">+</span>&nbsp;<span class="string" id="1595368">&#39;0&#39;</span><span class="op" id="1595371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1595376"><a href="/strconv/extfloat.go.html#1593833">fraction</a></span>&nbsp;<span class="op" id="1595385">-=</span>&nbsp;<span class="ident" id="1595388"><a href="/strconv/extfloat.go.html#1595315">digit</a></span>&nbsp;<span class="op" id="1595394">&lt;&lt;</span>&nbsp;<span class="ident" id="1595397"><a href="/strconv/extfloat.go.html#1593774">shift</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1595406"><a href="/strconv/extfloat.go.html#1594798">nd</a></span><span class="op" id="1595408">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1595414"><a href="/strconv/extfloat.go.html#1593988">needed</a></span><span class="op" id="1595420">--</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1595425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1595429"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1595430">.</span><span class="ident" id="1595431">nd</span>&nbsp;<span class="op" id="1595434">=</span>&nbsp;<span class="ident" id="1595436"><a href="/strconv/extfloat.go.html#1594798">nd</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1595440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595444">//&nbsp;We&nbsp;have&nbsp;written&nbsp;a&nbsp;truncation&nbsp;of&nbsp;f&nbsp;(a&nbsp;numerator&nbsp;/&nbsp;10^d.dp).&nbsp;The&nbsp;remaining&nbsp;part</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595526">//&nbsp;can&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;small&nbsp;number&nbsp;(&lt;&nbsp;1)&nbsp;to&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;last&nbsp;digit&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595610">//&nbsp;numerator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595625">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595629">//&nbsp;If&nbsp;rest&nbsp;&gt;&nbsp;0,&nbsp;the&nbsp;amount&nbsp;is:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595661">//&nbsp;&nbsp;&nbsp;&nbsp;(rest&lt;&lt;shift&nbsp;|&nbsp;fraction)&nbsp;/&nbsp;(pow10&nbsp;&lt;&lt;&nbsp;shift)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595712">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;being&nbsp;known&nbsp;with&nbsp;a&nbsp;±ε&nbsp;uncertainty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595765">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;fact&nbsp;that&nbsp;n&nbsp;&gt;&nbsp;0&nbsp;guarantees&nbsp;that&nbsp;pow10&nbsp;&lt;&lt;&nbsp;shift&nbsp;does&nbsp;not&nbsp;overflow&nbsp;a&nbsp;uint64.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595851">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595855">//&nbsp;If&nbsp;rest&nbsp;=&nbsp;0,&nbsp;pow10&nbsp;==&nbsp;1&nbsp;and&nbsp;the&nbsp;amount&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595901">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;/&nbsp;(1&nbsp;&lt;&lt;&nbsp;shift)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595932">//&nbsp;&nbsp;&nbsp;&nbsp;fraction&nbsp;being&nbsp;known&nbsp;with&nbsp;a&nbsp;±ε&nbsp;uncertainty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595985">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1595989">//&nbsp;We&nbsp;pass&nbsp;this&nbsp;information&nbsp;to&nbsp;the&nbsp;rounding&nbsp;routine&nbsp;for&nbsp;adjustment.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1596059">ok</span>&nbsp;<span class="op" id="1596062">:=</span>&nbsp;<span class="ident" id="1596065"><a href="/strconv/extfloat.go.html#1596773">adjustLastDigitFixed</a></span><span class="op" id="1596085">(</span><span class="ident" id="1596086"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1596087">,</span>&nbsp;<span class="ident" id="1596089">uint64</span><span class="op" id="1596095">(</span><span class="ident" id="1596096"><a href="/strconv/extfloat.go.html#1594294">rest</a></span><span class="op" id="1596100">)</span><span class="op" id="1596101">&lt;&lt;</span><span class="ident" id="1596103"><a href="/strconv/extfloat.go.html#1593774">shift</a></span><span class="op" id="1596108">|</span><span class="ident" id="1596109"><a href="/strconv/extfloat.go.html#1593833">fraction</a></span><span class="op" id="1596117">,</span>&nbsp;<span class="ident" id="1596119"><a href="/strconv/extfloat.go.html#1594110">pow10</a></span><span class="op" id="1596124">,</span>&nbsp;<span class="ident" id="1596126"><a href="/strconv/extfloat.go.html#1593774">shift</a></span><span class="op" id="1596131">,</span>&nbsp;<span class="ident" id="1596133"><a href="/strconv/extfloat.go.html#1593882">ε</a></span><span class="op" id="1596135">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1596138">if</span>&nbsp;<span class="op" id="1596141">!</span><span class="ident" id="1596142"><a href="/strconv/extfloat.go.html#1596059">ok</a></span>&nbsp;<span class="op" id="1596145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1596149">return</span>&nbsp;<span class="ident" id="1596156">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1596163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1596166">//&nbsp;Trim&nbsp;trailing&nbsp;zeros.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1596191">for</span>&nbsp;<span class="ident" id="1596195">i</span>&nbsp;<span class="op" id="1596197">:=</span>&nbsp;<span class="ident" id="1596200"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1596201">.</span><span class="ident" id="1596202">nd</span>&nbsp;<span class="op" id="1596205">-</span>&nbsp;<span class="num" id="1596207">1</span><span class="op" id="1596208">;</span>&nbsp;<span class="ident" id="1596210"><a href="/strconv/extfloat.go.html#1596195">i</a></span>&nbsp;<span class="op" id="1596212">&gt;=</span>&nbsp;<span class="num" id="1596215">0</span><span class="op" id="1596216">;</span>&nbsp;<span class="ident" id="1596218"><a href="/strconv/extfloat.go.html#1596195">i</a></span><span class="op" id="1596219">--</span>&nbsp;<span class="op" id="1596222">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1596226">if</span>&nbsp;<span class="ident" id="1596229"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1596230">.</span><span class="ident" id="1596231">d</span><span class="op" id="1596232">[</span><span class="ident" id="1596233"><a href="/strconv/extfloat.go.html#1596195">i</a></span><span class="op" id="1596234">]</span>&nbsp;<span class="op" id="1596236">!=</span>&nbsp;<span class="string" id="1596239">&#39;0&#39;</span>&nbsp;<span class="op" id="1596243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1596248"><a href="/strconv/extfloat.go.html#1593447">d</a></span><span class="op" id="1596249">.</span><span class="ident" id="1596250">nd</span>&nbsp;<span class="op" id="1596253">=</span>&nbsp;<span class="ident" id="1596255"><a href="/strconv/extfloat.go.html#1596195">i</a></span>&nbsp;<span class="op" id="1596257">+</span>&nbsp;<span class="num" id="1596259">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1596264">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1596272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1596275">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1596278">return</span>&nbsp;<span class="ident" id="1596285">true</span><br>
<span class="lineno"></span><span class="op" id="1596290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1596293">//&nbsp;adjustLastDigitFixed&nbsp;assumes&nbsp;d&nbsp;contains&nbsp;the&nbsp;representation&nbsp;of&nbsp;the&nbsp;integral&nbsp;part</span><br>
<span class="lineno"></span><span class="comment" id="1596376">//&nbsp;of&nbsp;some&nbsp;number,&nbsp;whose&nbsp;fractional&nbsp;part&nbsp;is&nbsp;num&nbsp;/&nbsp;(den&nbsp;&lt;&lt;&nbsp;shift).&nbsp;The&nbsp;numerator</span><br>
<span class="lineno">490</span><span class="comment" id="1596456">//&nbsp;num&nbsp;is&nbsp;only&nbsp;known&nbsp;up&nbsp;to&nbsp;an&nbsp;uncertainty&nbsp;of&nbsp;size&nbsp;ε,&nbsp;assumed&nbsp;to&nbsp;be&nbsp;less&nbsp;than</span><br>
<span class="lineno"></span><span class="comment" id="1596534">//&nbsp;(den&nbsp;&lt;&lt;&nbsp;shift)/2.</span><br>
<span class="lineno"></span><span class="comment" id="1596555">//</span><br>
<span class="lineno"></span><span class="comment" id="1596558">//&nbsp;It&nbsp;will&nbsp;increase&nbsp;the&nbsp;last&nbsp;digit&nbsp;by&nbsp;one&nbsp;to&nbsp;account&nbsp;for&nbsp;correct&nbsp;rounding,&nbsp;typically</span><br>
<span class="lineno"></span><span class="comment" id="1596643">//&nbsp;when&nbsp;the&nbsp;fractional&nbsp;part&nbsp;is&nbsp;greater&nbsp;than&nbsp;1/2,&nbsp;and&nbsp;will&nbsp;return&nbsp;false&nbsp;if&nbsp;ε&nbsp;is&nbsp;such</span><br>
<span class="lineno">495</span><span class="comment" id="1596728">//&nbsp;that&nbsp;no&nbsp;correct&nbsp;answer&nbsp;can&nbsp;be&nbsp;given.</span><br>
<span class="lineno"></span><span class="keyword" id="1596768">func</span>&nbsp;<span class="ident" id="1596773">adjustLastDigitFixed</span><span class="op" id="1596793">(</span><span class="ident" id="1596794">d</span>&nbsp;<span class="op" id="1596796">*</span><span class="ident" id="1596797"><a href="/strconv/ftoa.go.html#1610549">decimalSlice</a></span><span class="op" id="1596809">,</span>&nbsp;<span class="ident" id="1596811">num</span><span class="op" id="1596814">,</span>&nbsp;<span class="ident" id="1596816">den</span>&nbsp;<span class="ident" id="1596820">uint64</span><span class="op" id="1596826">,</span>&nbsp;<span class="ident" id="1596828">shift</span>&nbsp;<span class="builtintype" id="1596834">uint</span><span class="op" id="1596838">,</span>&nbsp;<span class="ident" id="1596840">ε</span>&nbsp;<span class="ident" id="1596843">uint64</span><span class="op" id="1596849">)</span>&nbsp;<span class="builtintype" id="1596851">bool</span>&nbsp;<span class="op" id="1596856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1596859">if</span>&nbsp;<span class="ident" id="1596862"><a href="/strconv/extfloat.go.html#1596811">num</a></span>&nbsp;<span class="op" id="1596866">&gt;</span>&nbsp;<span class="ident" id="1596868"><a href="/strconv/extfloat.go.html#1596816">den</a></span><span class="op" id="1596871">&lt;&lt;</span><span class="ident" id="1596873"><a href="/strconv/extfloat.go.html#1596828">shift</a></span>&nbsp;<span class="op" id="1596879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1596883">panic</span><span class="op" id="1596888">(</span><span class="string" id="1596889">&#34;strconv:&nbsp;num&nbsp;&gt;&nbsp;den&lt;&lt;shift&nbsp;in&nbsp;adjustLastDigitFixed&#34;</span><span class="op" id="1596940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1596943">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1596946">if</span>&nbsp;<span class="num" id="1596949">2</span><span class="op" id="1596950">*</span><span class="ident" id="1596951"><a href="/strconv/extfloat.go.html#1596840">ε</a></span>&nbsp;<span class="op" id="1596954">&gt;</span>&nbsp;<span class="ident" id="1596956"><a href="/strconv/extfloat.go.html#1596816">den</a></span><span class="op" id="1596959">&lt;&lt;</span><span class="ident" id="1596961"><a href="/strconv/extfloat.go.html#1596828">shift</a></span>&nbsp;<span class="op" id="1596967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1596971">panic</span><span class="op" id="1596976">(</span><span class="string" id="1596977">&#34;strconv:&nbsp;ε&nbsp;&gt;&nbsp;(den&lt;&lt;shift)/2&#34;</span><span class="op" id="1597007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1597010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597013">if</span>&nbsp;<span class="num" id="1597016">2</span><span class="op" id="1597017">*</span><span class="op" id="1597018">(</span><span class="ident" id="1597019"><a href="/strconv/extfloat.go.html#1596811">num</a></span><span class="op" id="1597022">+</span><span class="ident" id="1597023"><a href="/strconv/extfloat.go.html#1596840">ε</a></span><span class="op" id="1597025">)</span>&nbsp;<span class="op" id="1597027">&lt;</span>&nbsp;<span class="ident" id="1597029"><a href="/strconv/extfloat.go.html#1596816">den</a></span><span class="op" id="1597032">&lt;&lt;</span><span class="ident" id="1597034"><a href="/strconv/extfloat.go.html#1596828">shift</a></span>&nbsp;<span class="op" id="1597040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597044">return</span>&nbsp;<span class="ident" id="1597051">true</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1597057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597060">if</span>&nbsp;<span class="num" id="1597063">2</span><span class="op" id="1597064">*</span><span class="op" id="1597065">(</span><span class="ident" id="1597066"><a href="/strconv/extfloat.go.html#1596811">num</a></span><span class="op" id="1597069">-</span><span class="ident" id="1597070"><a href="/strconv/extfloat.go.html#1596840">ε</a></span><span class="op" id="1597072">)</span>&nbsp;<span class="op" id="1597074">&gt;</span>&nbsp;<span class="ident" id="1597076"><a href="/strconv/extfloat.go.html#1596816">den</a></span><span class="op" id="1597079">&lt;&lt;</span><span class="ident" id="1597081"><a href="/strconv/extfloat.go.html#1596828">shift</a></span>&nbsp;<span class="op" id="1597087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1597091">//&nbsp;increment&nbsp;d&nbsp;by&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597114">i</span>&nbsp;<span class="op" id="1597116">:=</span>&nbsp;<span class="ident" id="1597119"><a href="/strconv/extfloat.go.html#1596794">d</a></span><span class="op" id="1597120">.</span><span class="ident" id="1597121">nd</span>&nbsp;<span class="op" id="1597124">-</span>&nbsp;<span class="num" id="1597126">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597130">for</span>&nbsp;<span class="op" id="1597134">;</span>&nbsp;<span class="ident" id="1597136"><a href="/strconv/extfloat.go.html#1597114">i</a></span>&nbsp;<span class="op" id="1597138">&gt;=</span>&nbsp;<span class="num" id="1597141">0</span><span class="op" id="1597142">;</span>&nbsp;<span class="ident" id="1597144"><a href="/strconv/extfloat.go.html#1597114">i</a></span><span class="op" id="1597145">--</span>&nbsp;<span class="op" id="1597148">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597153">if</span>&nbsp;<span class="ident" id="1597156"><a href="/strconv/extfloat.go.html#1596794">d</a></span><span class="op" id="1597157">.</span><span class="ident" id="1597158">d</span><span class="op" id="1597159">[</span><span class="ident" id="1597160"><a href="/strconv/extfloat.go.html#1597114">i</a></span><span class="op" id="1597161">]</span>&nbsp;<span class="op" id="1597163">==</span>&nbsp;<span class="string" id="1597166">&#39;9&#39;</span>&nbsp;<span class="op" id="1597170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597176"><a href="/strconv/extfloat.go.html#1596794">d</a></span><span class="op" id="1597177">.</span><span class="ident" id="1597178">nd</span><span class="op" id="1597180">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1597186">}</span>&nbsp;<span class="keyword" id="1597188">else</span>&nbsp;<span class="op" id="1597193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597199">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1597208">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1597212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597216">if</span>&nbsp;<span class="ident" id="1597219"><a href="/strconv/extfloat.go.html#1597114">i</a></span>&nbsp;<span class="op" id="1597221">&lt;</span>&nbsp;<span class="num" id="1597223">0</span>&nbsp;<span class="op" id="1597225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597230"><a href="/strconv/extfloat.go.html#1596794">d</a></span><span class="op" id="1597231">.</span><span class="ident" id="1597232">d</span><span class="op" id="1597233">[</span><span class="num" id="1597234">0</span><span class="op" id="1597235">]</span>&nbsp;<span class="op" id="1597237">=</span>&nbsp;<span class="string" id="1597239">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597246"><a href="/strconv/extfloat.go.html#1596794">d</a></span><span class="op" id="1597247">.</span><span class="ident" id="1597248">nd</span>&nbsp;<span class="op" id="1597251">=</span>&nbsp;<span class="num" id="1597253">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597258"><a href="/strconv/extfloat.go.html#1596794">d</a></span><span class="op" id="1597259">.</span><span class="ident" id="1597260">dp</span><span class="op" id="1597262">++</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1597267">}</span>&nbsp;<span class="keyword" id="1597269">else</span>&nbsp;<span class="op" id="1597274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597279"><a href="/strconv/extfloat.go.html#1596794">d</a></span><span class="op" id="1597280">.</span><span class="ident" id="1597281">d</span><span class="op" id="1597282">[</span><span class="ident" id="1597283"><a href="/strconv/extfloat.go.html#1597114">i</a></span><span class="op" id="1597284">]</span><span class="op" id="1597285">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1597290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597294">return</span>&nbsp;<span class="ident" id="1597301">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1597307">}</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597310">return</span>&nbsp;<span class="ident" id="1597317">false</span><br>
<span class="lineno"></span><span class="op" id="1597323">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1597326">//&nbsp;ShortestDecimal&nbsp;stores&nbsp;in&nbsp;d&nbsp;the&nbsp;shortest&nbsp;decimal&nbsp;representation&nbsp;of&nbsp;f</span><br>
<span class="lineno"></span><span class="comment" id="1597398">//&nbsp;which&nbsp;belongs&nbsp;to&nbsp;the&nbsp;open&nbsp;interval&nbsp;(lower,&nbsp;upper),&nbsp;where&nbsp;f&nbsp;is&nbsp;supposed</span><br>
<span class="lineno">530</span><span class="comment" id="1597472">//&nbsp;to&nbsp;lie.&nbsp;It&nbsp;returns&nbsp;false&nbsp;whenever&nbsp;the&nbsp;result&nbsp;is&nbsp;unsure.&nbsp;The&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="1597550">//&nbsp;uses&nbsp;the&nbsp;Grisu3&nbsp;algorithm.</span><br>
<span class="lineno"></span><span class="keyword" id="1597580">func</span>&nbsp;<span class="op" id="1597585">(</span><span class="ident" id="1597586">f</span>&nbsp;<span class="op" id="1597588">*</span><span class="ident" id="1597589"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1597597">)</span>&nbsp;<span class="ident" id="1597599">ShortestDecimal</span><span class="op" id="1597614">(</span><span class="ident" id="1597615">d</span>&nbsp;<span class="op" id="1597617">*</span><span class="ident" id="1597618"><a href="/strconv/ftoa.go.html#1610549">decimalSlice</a></span><span class="op" id="1597630">,</span>&nbsp;<span class="ident" id="1597632">lower</span><span class="op" id="1597637">,</span>&nbsp;<span class="ident" id="1597639">upper</span>&nbsp;<span class="op" id="1597645">*</span><span class="ident" id="1597646"><a href="/strconv/extfloat.go.html#1581573">extFloat</a></span><span class="op" id="1597654">)</span>&nbsp;<span class="builtintype" id="1597656">bool</span>&nbsp;<span class="op" id="1597661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597664">if</span>&nbsp;<span class="ident" id="1597667"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1597668">.</span><span class="ident" id="1597669">mant</span>&nbsp;<span class="op" id="1597674">==</span>&nbsp;<span class="num" id="1597677">0</span>&nbsp;<span class="op" id="1597679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597683"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1597684">.</span><span class="ident" id="1597685">nd</span>&nbsp;<span class="op" id="1597688">=</span>&nbsp;<span class="num" id="1597690">0</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597694"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1597695">.</span><span class="ident" id="1597696">dp</span>&nbsp;<span class="op" id="1597699">=</span>&nbsp;<span class="num" id="1597701">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597705"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1597706">.</span><span class="ident" id="1597707">neg</span>&nbsp;<span class="op" id="1597711">=</span>&nbsp;<span class="ident" id="1597713"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1597714">.</span><span class="ident" id="1597715">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597721">return</span>&nbsp;<span class="ident" id="1597728">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1597734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597737">if</span>&nbsp;<span class="ident" id="1597740"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1597741">.</span><span class="ident" id="1597742">exp</span>&nbsp;<span class="op" id="1597746">==</span>&nbsp;<span class="num" id="1597749">0</span>&nbsp;<span class="op" id="1597751">&amp;&amp;</span>&nbsp;<span class="op" id="1597754">*</span><span class="ident" id="1597755"><a href="/strconv/extfloat.go.html#1597632">lower</a></span>&nbsp;<span class="op" id="1597761">==</span>&nbsp;<span class="op" id="1597764">*</span><span class="ident" id="1597765"><a href="/strconv/extfloat.go.html#1597586">f</a></span>&nbsp;<span class="op" id="1597767">&amp;&amp;</span>&nbsp;<span class="op" id="1597770">*</span><span class="ident" id="1597771"><a href="/strconv/extfloat.go.html#1597632">lower</a></span>&nbsp;<span class="op" id="1597777">==</span>&nbsp;<span class="op" id="1597780">*</span><span class="ident" id="1597781"><a href="/strconv/extfloat.go.html#1597639">upper</a></span>&nbsp;<span class="op" id="1597787">{</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1597791">//&nbsp;an&nbsp;exact&nbsp;integer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597814">var</span>&nbsp;<span class="ident" id="1597818">buf</span>&nbsp;<span class="op" id="1597822">[</span><span class="num" id="1597823">24</span><span class="op" id="1597825">]</span><span class="builtintype" id="1597826">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597833">n</span>&nbsp;<span class="op" id="1597835">:=</span>&nbsp;<span class="builtinfunc" id="1597838">len</span><span class="op" id="1597841">(</span><span class="ident" id="1597842"><a href="/strconv/extfloat.go.html#1597818">buf</a></span><span class="op" id="1597845">)</span>&nbsp;<span class="op" id="1597847">-</span>&nbsp;<span class="num" id="1597849">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597853">for</span>&nbsp;<span class="ident" id="1597857">v</span>&nbsp;<span class="op" id="1597859">:=</span>&nbsp;<span class="ident" id="1597862"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1597863">.</span><span class="ident" id="1597864">mant</span><span class="op" id="1597868">;</span>&nbsp;<span class="ident" id="1597870"><a href="/strconv/extfloat.go.html#1597857">v</a></span>&nbsp;<span class="op" id="1597872">&gt;</span>&nbsp;<span class="num" id="1597874">0</span><span class="op" id="1597875">;</span>&nbsp;<span class="op" id="1597877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597882">v1</span>&nbsp;<span class="op" id="1597885">:=</span>&nbsp;<span class="ident" id="1597888"><a href="/strconv/extfloat.go.html#1597857">v</a></span>&nbsp;<span class="op" id="1597890">/</span>&nbsp;<span class="num" id="1597892">10</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597898"><a href="/strconv/extfloat.go.html#1597857">v</a></span>&nbsp;<span class="op" id="1597900">-=</span>&nbsp;<span class="num" id="1597903">10</span>&nbsp;<span class="op" id="1597906">*</span>&nbsp;<span class="ident" id="1597908"><a href="/strconv/extfloat.go.html#1597882">v1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597914"><a href="/strconv/extfloat.go.html#1597818">buf</a></span><span class="op" id="1597917">[</span><span class="ident" id="1597918"><a href="/strconv/extfloat.go.html#1597833">n</a></span><span class="op" id="1597919">]</span>&nbsp;<span class="op" id="1597921">=</span>&nbsp;<span class="builtintype" id="1597923">byte</span><span class="op" id="1597927">(</span><span class="ident" id="1597928"><a href="/strconv/extfloat.go.html#1597857">v</a></span>&nbsp;<span class="op" id="1597930">+</span>&nbsp;<span class="string" id="1597932">&#39;0&#39;</span><span class="op" id="1597935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597940"><a href="/strconv/extfloat.go.html#1597833">n</a></span><span class="op" id="1597941">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597947"><a href="/strconv/extfloat.go.html#1597857">v</a></span>&nbsp;<span class="op" id="1597949">=</span>&nbsp;<span class="ident" id="1597951"><a href="/strconv/extfloat.go.html#1597882">v1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1597956">}</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1597960">nd</span>&nbsp;<span class="op" id="1597963">:=</span>&nbsp;<span class="builtinfunc" id="1597966">len</span><span class="op" id="1597969">(</span><span class="ident" id="1597970"><a href="/strconv/extfloat.go.html#1597818">buf</a></span><span class="op" id="1597973">)</span>&nbsp;<span class="op" id="1597975">-</span>&nbsp;<span class="ident" id="1597977"><a href="/strconv/extfloat.go.html#1597833">n</a></span>&nbsp;<span class="op" id="1597979">-</span>&nbsp;<span class="num" id="1597981">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1597985">for</span>&nbsp;<span class="ident" id="1597989">i</span>&nbsp;<span class="op" id="1597991">:=</span>&nbsp;<span class="num" id="1597994">0</span><span class="op" id="1597995">;</span>&nbsp;<span class="ident" id="1597997"><a href="/strconv/extfloat.go.html#1597989">i</a></span>&nbsp;<span class="op" id="1597999">&lt;</span>&nbsp;<span class="ident" id="1598001"><a href="/strconv/extfloat.go.html#1597960">nd</a></span><span class="op" id="1598003">;</span>&nbsp;<span class="ident" id="1598005"><a href="/strconv/extfloat.go.html#1597989">i</a></span><span class="op" id="1598006">++</span>&nbsp;<span class="op" id="1598009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598014"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1598015">.</span><span class="ident" id="1598016">d</span><span class="op" id="1598017">[</span><span class="ident" id="1598018"><a href="/strconv/extfloat.go.html#1597989">i</a></span><span class="op" id="1598019">]</span>&nbsp;<span class="op" id="1598021">=</span>&nbsp;<span class="ident" id="1598023"><a href="/strconv/extfloat.go.html#1597818">buf</a></span><span class="op" id="1598026">[</span><span class="ident" id="1598027"><a href="/strconv/extfloat.go.html#1597833">n</a></span><span class="op" id="1598028">+</span><span class="num" id="1598029">1</span><span class="op" id="1598030">+</span><span class="ident" id="1598031"><a href="/strconv/extfloat.go.html#1597989">i</a></span><span class="op" id="1598032">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1598036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598040"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1598041">.</span><span class="ident" id="1598042">nd</span><span class="op" id="1598044">,</span>&nbsp;<span class="ident" id="1598046"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1598047">.</span><span class="ident" id="1598048">dp</span>&nbsp;<span class="op" id="1598051">=</span>&nbsp;<span class="ident" id="1598053"><a href="/strconv/extfloat.go.html#1597960">nd</a></span><span class="op" id="1598055">,</span>&nbsp;<span class="ident" id="1598057"><a href="/strconv/extfloat.go.html#1597960">nd</a></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1598062">for</span>&nbsp;<span class="ident" id="1598066"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1598067">.</span><span class="ident" id="1598068">nd</span>&nbsp;<span class="op" id="1598071">&gt;</span>&nbsp;<span class="num" id="1598073">0</span>&nbsp;<span class="op" id="1598075">&amp;&amp;</span>&nbsp;<span class="ident" id="1598078"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1598079">.</span><span class="ident" id="1598080">d</span><span class="op" id="1598081">[</span><span class="ident" id="1598082"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1598083">.</span><span class="ident" id="1598084">nd</span><span class="op" id="1598086">-</span><span class="num" id="1598087">1</span><span class="op" id="1598088">]</span>&nbsp;<span class="op" id="1598090">==</span>&nbsp;<span class="string" id="1598093">&#39;0&#39;</span>&nbsp;<span class="op" id="1598097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598102"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1598103">.</span><span class="ident" id="1598104">nd</span><span class="op" id="1598106">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1598111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1598115">if</span>&nbsp;<span class="ident" id="1598118"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1598119">.</span><span class="ident" id="1598120">nd</span>&nbsp;<span class="op" id="1598123">==</span>&nbsp;<span class="num" id="1598126">0</span>&nbsp;<span class="op" id="1598128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598133"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1598134">.</span><span class="ident" id="1598135">dp</span>&nbsp;<span class="op" id="1598138">=</span>&nbsp;<span class="num" id="1598140">0</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1598144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598148"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1598149">.</span><span class="ident" id="1598150">neg</span>&nbsp;<span class="op" id="1598154">=</span>&nbsp;<span class="ident" id="1598156"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1598157">.</span><span class="ident" id="1598158">neg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1598164">return</span>&nbsp;<span class="ident" id="1598171">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1598177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598180"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598185">.</span><span class="ident" id="1598186">Normalize</span><span class="op" id="1598195">(</span><span class="op" id="1598196">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1598199">//&nbsp;Uniformize&nbsp;exponents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1598225">if</span>&nbsp;<span class="ident" id="1598228"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1598229">.</span><span class="ident" id="1598230">exp</span>&nbsp;<span class="op" id="1598234">&gt;</span>&nbsp;<span class="ident" id="1598236"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598241">.</span><span class="ident" id="1598242">exp</span>&nbsp;<span class="op" id="1598246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598250"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1598251">.</span><span class="ident" id="1598252">mant</span>&nbsp;<span class="op" id="1598257">&lt;&lt;=</span>&nbsp;<span class="builtintype" id="1598261">uint</span><span class="op" id="1598265">(</span><span class="ident" id="1598266"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1598267">.</span><span class="ident" id="1598268">exp</span>&nbsp;<span class="op" id="1598272">-</span>&nbsp;<span class="ident" id="1598274"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598279">.</span><span class="ident" id="1598280">exp</span><span class="op" id="1598283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598287"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1598288">.</span><span class="ident" id="1598289">exp</span>&nbsp;<span class="op" id="1598293">=</span>&nbsp;<span class="ident" id="1598295"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598300">.</span><span class="ident" id="1598301">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1598306">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1598309">if</span>&nbsp;<span class="ident" id="1598312"><a href="/strconv/extfloat.go.html#1597632">lower</a></span><span class="op" id="1598317">.</span><span class="ident" id="1598318">exp</span>&nbsp;<span class="op" id="1598322">&gt;</span>&nbsp;<span class="ident" id="1598324"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598329">.</span><span class="ident" id="1598330">exp</span>&nbsp;<span class="op" id="1598334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598338"><a href="/strconv/extfloat.go.html#1597632">lower</a></span><span class="op" id="1598343">.</span><span class="ident" id="1598344">mant</span>&nbsp;<span class="op" id="1598349">&lt;&lt;=</span>&nbsp;<span class="builtintype" id="1598353">uint</span><span class="op" id="1598357">(</span><span class="ident" id="1598358"><a href="/strconv/extfloat.go.html#1597632">lower</a></span><span class="op" id="1598363">.</span><span class="ident" id="1598364">exp</span>&nbsp;<span class="op" id="1598368">-</span>&nbsp;<span class="ident" id="1598370"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598375">.</span><span class="ident" id="1598376">exp</span><span class="op" id="1598379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598383"><a href="/strconv/extfloat.go.html#1597632">lower</a></span><span class="op" id="1598388">.</span><span class="ident" id="1598389">exp</span>&nbsp;<span class="op" id="1598393">=</span>&nbsp;<span class="ident" id="1598395"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598400">.</span><span class="ident" id="1598401">exp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1598406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598410">exp10</span>&nbsp;<span class="op" id="1598416">:=</span>&nbsp;<span class="ident" id="1598419"><a href="/strconv/extfloat.go.html#1593124">frexp10Many</a></span><span class="op" id="1598430">(</span><span class="ident" id="1598431"><a href="/strconv/extfloat.go.html#1597632">lower</a></span><span class="op" id="1598436">,</span>&nbsp;<span class="ident" id="1598438"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1598439">,</span>&nbsp;<span class="ident" id="1598441"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1598449">//&nbsp;Take&nbsp;a&nbsp;safety&nbsp;margin&nbsp;due&nbsp;to&nbsp;rounding&nbsp;in&nbsp;frexp10Many,&nbsp;but&nbsp;we&nbsp;lose&nbsp;precision.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598529"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598534">.</span><span class="ident" id="1598535">mant</span><span class="op" id="1598539">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598543"><a href="/strconv/extfloat.go.html#1597632">lower</a></span><span class="op" id="1598548">.</span><span class="ident" id="1598549">mant</span><span class="op" id="1598553">--</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1598558">//&nbsp;The&nbsp;shortest&nbsp;representation&nbsp;of&nbsp;f&nbsp;is&nbsp;either&nbsp;rounded&nbsp;up&nbsp;or&nbsp;down,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1598629">//&nbsp;in&nbsp;any&nbsp;case,&nbsp;it&nbsp;is&nbsp;a&nbsp;truncation&nbsp;of&nbsp;upper.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598675">shift</span>&nbsp;<span class="op" id="1598681">:=</span>&nbsp;<span class="builtintype" id="1598684">uint</span><span class="op" id="1598688">(</span><span class="op" id="1598689">-</span><span class="ident" id="1598690"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598695">.</span><span class="ident" id="1598696">exp</span><span class="op" id="1598699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598702">integer</span>&nbsp;<span class="op" id="1598710">:=</span>&nbsp;<span class="builtintype" id="1598713">uint32</span><span class="op" id="1598719">(</span><span class="ident" id="1598720"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598725">.</span><span class="ident" id="1598726">mant</span>&nbsp;<span class="op" id="1598731">&gt;&gt;</span>&nbsp;<span class="ident" id="1598734"><a href="/strconv/extfloat.go.html#1598675">shift</a></span><span class="op" id="1598739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598742">fraction</span>&nbsp;<span class="op" id="1598751">:=</span>&nbsp;<span class="ident" id="1598754"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598759">.</span><span class="ident" id="1598760">mant</span>&nbsp;<span class="op" id="1598765">-</span>&nbsp;<span class="op" id="1598767">(</span><span class="ident" id="1598768">uint64</span><span class="op" id="1598774">(</span><span class="ident" id="1598775"><a href="/strconv/extfloat.go.html#1598702">integer</a></span><span class="op" id="1598782">)</span>&nbsp;<span class="op" id="1598784">&lt;&lt;</span>&nbsp;<span class="ident" id="1598787"><a href="/strconv/extfloat.go.html#1598675">shift</a></span><span class="op" id="1598792">)</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1598796">//&nbsp;How&nbsp;far&nbsp;we&nbsp;can&nbsp;go&nbsp;down&nbsp;from&nbsp;upper&nbsp;until&nbsp;the&nbsp;result&nbsp;is&nbsp;wrong.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598861">allowance</span>&nbsp;<span class="op" id="1598871">:=</span>&nbsp;<span class="ident" id="1598874"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598879">.</span><span class="ident" id="1598880">mant</span>&nbsp;<span class="op" id="1598885">-</span>&nbsp;<span class="ident" id="1598887"><a href="/strconv/extfloat.go.html#1597632">lower</a></span><span class="op" id="1598892">.</span><span class="ident" id="1598893">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1598899">//&nbsp;How&nbsp;far&nbsp;we&nbsp;should&nbsp;go&nbsp;to&nbsp;get&nbsp;a&nbsp;very&nbsp;precise&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1598954">targetDiff</span>&nbsp;<span class="op" id="1598965">:=</span>&nbsp;<span class="ident" id="1598968"><a href="/strconv/extfloat.go.html#1597639">upper</a></span><span class="op" id="1598973">.</span><span class="ident" id="1598974">mant</span>&nbsp;<span class="op" id="1598979">-</span>&nbsp;<span class="ident" id="1598981"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1598982">.</span><span class="ident" id="1598983">mant</span><br>
<span class="lineno">590</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1598990">//&nbsp;Count&nbsp;integral&nbsp;digits:&nbsp;there&nbsp;are&nbsp;at&nbsp;most&nbsp;10.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599039">var</span>&nbsp;<span class="ident" id="1599043">integerDigits</span>&nbsp;<span class="builtintype" id="1599057">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599062">for</span>&nbsp;<span class="ident" id="1599066">i</span><span class="op" id="1599067">,</span>&nbsp;<span class="ident" id="1599069">pow</span>&nbsp;<span class="op" id="1599073">:=</span>&nbsp;<span class="num" id="1599076">0</span><span class="op" id="1599077">,</span>&nbsp;<span class="ident" id="1599079">uint64</span><span class="op" id="1599085">(</span><span class="num" id="1599086">1</span><span class="op" id="1599087">)</span><span class="op" id="1599088">;</span>&nbsp;<span class="ident" id="1599090"><a href="/strconv/extfloat.go.html#1599066">i</a></span>&nbsp;<span class="op" id="1599092">&lt;</span>&nbsp;<span class="num" id="1599094">20</span><span class="op" id="1599096">;</span>&nbsp;<span class="ident" id="1599098"><a href="/strconv/extfloat.go.html#1599066">i</a></span><span class="op" id="1599099">++</span>&nbsp;<span class="op" id="1599102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599106">if</span>&nbsp;<span class="ident" id="1599109"><a href="/strconv/extfloat.go.html#1599069">pow</a></span>&nbsp;<span class="op" id="1599113">&gt;</span>&nbsp;<span class="ident" id="1599115">uint64</span><span class="op" id="1599121">(</span><span class="ident" id="1599122"><a href="/strconv/extfloat.go.html#1598702">integer</a></span><span class="op" id="1599129">)</span>&nbsp;<span class="op" id="1599131">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599136"><a href="/strconv/extfloat.go.html#1599043">integerDigits</a></span>&nbsp;<span class="op" id="1599150">=</span>&nbsp;<span class="ident" id="1599152"><a href="/strconv/extfloat.go.html#1599066">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599157">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1599165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599169"><a href="/strconv/extfloat.go.html#1599069">pow</a></span>&nbsp;<span class="op" id="1599173">*=</span>&nbsp;<span class="num" id="1599176">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1599180">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599183">for</span>&nbsp;<span class="ident" id="1599187">i</span>&nbsp;<span class="op" id="1599189">:=</span>&nbsp;<span class="num" id="1599192">0</span><span class="op" id="1599193">;</span>&nbsp;<span class="ident" id="1599195"><a href="/strconv/extfloat.go.html#1599187">i</a></span>&nbsp;<span class="op" id="1599197">&lt;</span>&nbsp;<span class="ident" id="1599199"><a href="/strconv/extfloat.go.html#1599043">integerDigits</a></span><span class="op" id="1599212">;</span>&nbsp;<span class="ident" id="1599214"><a href="/strconv/extfloat.go.html#1599187">i</a></span><span class="op" id="1599215">++</span>&nbsp;<span class="op" id="1599218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599222">pow</span>&nbsp;<span class="op" id="1599226">:=</span>&nbsp;<span class="ident" id="1599229"><a href="/strconv/extfloat.go.html#1589424">uint64pow10</a></span><span class="op" id="1599240">[</span><span class="ident" id="1599241"><a href="/strconv/extfloat.go.html#1599043">integerDigits</a></span><span class="op" id="1599254">-</span><span class="ident" id="1599255"><a href="/strconv/extfloat.go.html#1599187">i</a></span><span class="op" id="1599256">-</span><span class="num" id="1599257">1</span><span class="op" id="1599258">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599262">digit</span>&nbsp;<span class="op" id="1599268">:=</span>&nbsp;<span class="ident" id="1599271"><a href="/strconv/extfloat.go.html#1598702">integer</a></span>&nbsp;<span class="op" id="1599279">/</span>&nbsp;<span class="builtintype" id="1599281">uint32</span><span class="op" id="1599287">(</span><span class="ident" id="1599288"><a href="/strconv/extfloat.go.html#1599222">pow</a></span><span class="op" id="1599291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599295"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1599296">.</span><span class="ident" id="1599297">d</span><span class="op" id="1599298">[</span><span class="ident" id="1599299"><a href="/strconv/extfloat.go.html#1599187">i</a></span><span class="op" id="1599300">]</span>&nbsp;<span class="op" id="1599302">=</span>&nbsp;<span class="builtintype" id="1599304">byte</span><span class="op" id="1599308">(</span><span class="ident" id="1599309"><a href="/strconv/extfloat.go.html#1599262">digit</a></span>&nbsp;<span class="op" id="1599315">+</span>&nbsp;<span class="string" id="1599317">&#39;0&#39;</span><span class="op" id="1599320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599324"><a href="/strconv/extfloat.go.html#1598702">integer</a></span>&nbsp;<span class="op" id="1599332">-=</span>&nbsp;<span class="ident" id="1599335"><a href="/strconv/extfloat.go.html#1599262">digit</a></span>&nbsp;<span class="op" id="1599341">*</span>&nbsp;<span class="builtintype" id="1599343">uint32</span><span class="op" id="1599349">(</span><span class="ident" id="1599350"><a href="/strconv/extfloat.go.html#1599222">pow</a></span><span class="op" id="1599353">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1599357">//&nbsp;evaluate&nbsp;whether&nbsp;we&nbsp;should&nbsp;stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599395">if</span>&nbsp;<span class="ident" id="1599398">currentDiff</span>&nbsp;<span class="op" id="1599410">:=</span>&nbsp;<span class="ident" id="1599413">uint64</span><span class="op" id="1599419">(</span><span class="ident" id="1599420"><a href="/strconv/extfloat.go.html#1598702">integer</a></span><span class="op" id="1599427">)</span><span class="op" id="1599428">&lt;&lt;</span><span class="ident" id="1599430"><a href="/strconv/extfloat.go.html#1598675">shift</a></span>&nbsp;<span class="op" id="1599436">+</span>&nbsp;<span class="ident" id="1599438"><a href="/strconv/extfloat.go.html#1598742">fraction</a></span><span class="op" id="1599446">;</span>&nbsp;<span class="ident" id="1599448"><a href="/strconv/extfloat.go.html#1599398">currentDiff</a></span>&nbsp;<span class="op" id="1599460">&lt;</span>&nbsp;<span class="ident" id="1599462"><a href="/strconv/extfloat.go.html#1598861">allowance</a></span>&nbsp;<span class="op" id="1599472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599477"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1599478">.</span><span class="ident" id="1599479">nd</span>&nbsp;<span class="op" id="1599482">=</span>&nbsp;<span class="ident" id="1599484"><a href="/strconv/extfloat.go.html#1599187">i</a></span>&nbsp;<span class="op" id="1599486">+</span>&nbsp;<span class="num" id="1599488">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599493"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1599494">.</span><span class="ident" id="1599495">dp</span>&nbsp;<span class="op" id="1599498">=</span>&nbsp;<span class="ident" id="1599500"><a href="/strconv/extfloat.go.html#1599043">integerDigits</a></span>&nbsp;<span class="op" id="1599514">+</span>&nbsp;<span class="ident" id="1599516"><a href="/strconv/extfloat.go.html#1598410">exp10</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599525"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1599526">.</span><span class="ident" id="1599527">neg</span>&nbsp;<span class="op" id="1599531">=</span>&nbsp;<span class="ident" id="1599533"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1599534">.</span><span class="ident" id="1599535">neg</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1599542">//&nbsp;Sometimes&nbsp;allowance&nbsp;is&nbsp;so&nbsp;large&nbsp;the&nbsp;last&nbsp;digit&nbsp;might&nbsp;need&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1599612">//&nbsp;decremented&nbsp;to&nbsp;get&nbsp;closer&nbsp;to&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599650">return</span>&nbsp;<span class="ident" id="1599657"><a href="/strconv/extfloat.go.html#1600770">adjustLastDigit</a></span><span class="op" id="1599672">(</span><span class="ident" id="1599673"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1599674">,</span>&nbsp;<span class="ident" id="1599676"><a href="/strconv/extfloat.go.html#1599398">currentDiff</a></span><span class="op" id="1599687">,</span>&nbsp;<span class="ident" id="1599689"><a href="/strconv/extfloat.go.html#1598954">targetDiff</a></span><span class="op" id="1599699">,</span>&nbsp;<span class="ident" id="1599701"><a href="/strconv/extfloat.go.html#1598861">allowance</a></span><span class="op" id="1599710">,</span>&nbsp;<span class="ident" id="1599712"><a href="/strconv/extfloat.go.html#1599222">pow</a></span><span class="op" id="1599715">&lt;&lt;</span><span class="ident" id="1599717"><a href="/strconv/extfloat.go.html#1598675">shift</a></span><span class="op" id="1599722">,</span>&nbsp;<span class="num" id="1599724">2</span><span class="op" id="1599725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1599729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1599732">}</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599735"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1599736">.</span><span class="ident" id="1599737">nd</span>&nbsp;<span class="op" id="1599740">=</span>&nbsp;<span class="ident" id="1599742"><a href="/strconv/extfloat.go.html#1599043">integerDigits</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599757"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1599758">.</span><span class="ident" id="1599759">dp</span>&nbsp;<span class="op" id="1599762">=</span>&nbsp;<span class="ident" id="1599764"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1599765">.</span><span class="ident" id="1599766">nd</span>&nbsp;<span class="op" id="1599769">+</span>&nbsp;<span class="ident" id="1599771"><a href="/strconv/extfloat.go.html#1598410">exp10</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599778"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1599779">.</span><span class="ident" id="1599780">neg</span>&nbsp;<span class="op" id="1599784">=</span>&nbsp;<span class="ident" id="1599786"><a href="/strconv/extfloat.go.html#1597586">f</a></span><span class="op" id="1599787">.</span><span class="ident" id="1599788">neg</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1599794">//&nbsp;Compute&nbsp;digits&nbsp;of&nbsp;the&nbsp;fractional&nbsp;part.&nbsp;At&nbsp;each&nbsp;step&nbsp;fraction&nbsp;does&nbsp;not</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1599868">//&nbsp;overflow.&nbsp;The&nbsp;choice&nbsp;of&nbsp;minExp&nbsp;implies&nbsp;that&nbsp;fraction&nbsp;is&nbsp;less&nbsp;than&nbsp;2^60.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599944">var</span>&nbsp;<span class="ident" id="1599948">digit</span>&nbsp;<span class="builtintype" id="1599954">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599959">multiplier</span>&nbsp;<span class="op" id="1599970">:=</span>&nbsp;<span class="ident" id="1599973">uint64</span><span class="op" id="1599979">(</span><span class="num" id="1599980">1</span><span class="op" id="1599981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1599984">for</span>&nbsp;<span class="op" id="1599988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1599992"><a href="/strconv/extfloat.go.html#1598742">fraction</a></span>&nbsp;<span class="op" id="1600001">*=</span>&nbsp;<span class="num" id="1600004">10</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1600009"><a href="/strconv/extfloat.go.html#1599959">multiplier</a></span>&nbsp;<span class="op" id="1600020">*=</span>&nbsp;<span class="num" id="1600023">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1600028"><a href="/strconv/extfloat.go.html#1599948">digit</a></span>&nbsp;<span class="op" id="1600034">=</span>&nbsp;<span class="builtintype" id="1600036">int</span><span class="op" id="1600039">(</span><span class="ident" id="1600040"><a href="/strconv/extfloat.go.html#1598742">fraction</a></span>&nbsp;<span class="op" id="1600049">&gt;&gt;</span>&nbsp;<span class="ident" id="1600052"><a href="/strconv/extfloat.go.html#1598675">shift</a></span><span class="op" id="1600057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1600061"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1600062">.</span><span class="ident" id="1600063">d</span><span class="op" id="1600064">[</span><span class="ident" id="1600065"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1600066">.</span><span class="ident" id="1600067">nd</span><span class="op" id="1600069">]</span>&nbsp;<span class="op" id="1600071">=</span>&nbsp;<span class="builtintype" id="1600073">byte</span><span class="op" id="1600077">(</span><span class="ident" id="1600078"><a href="/strconv/extfloat.go.html#1599948">digit</a></span>&nbsp;<span class="op" id="1600084">+</span>&nbsp;<span class="string" id="1600086">&#39;0&#39;</span><span class="op" id="1600089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1600093"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1600094">.</span><span class="ident" id="1600095">nd</span><span class="op" id="1600097">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1600102"><a href="/strconv/extfloat.go.html#1598742">fraction</a></span>&nbsp;<span class="op" id="1600111">-=</span>&nbsp;<span class="ident" id="1600114">uint64</span><span class="op" id="1600120">(</span><span class="ident" id="1600121"><a href="/strconv/extfloat.go.html#1599948">digit</a></span><span class="op" id="1600126">)</span>&nbsp;<span class="op" id="1600128">&lt;&lt;</span>&nbsp;<span class="ident" id="1600131"><a href="/strconv/extfloat.go.html#1598675">shift</a></span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1600139">if</span>&nbsp;<span class="ident" id="1600142"><a href="/strconv/extfloat.go.html#1598742">fraction</a></span>&nbsp;<span class="op" id="1600151">&lt;</span>&nbsp;<span class="ident" id="1600153"><a href="/strconv/extfloat.go.html#1598861">allowance</a></span><span class="op" id="1600162">*</span><span class="ident" id="1600163"><a href="/strconv/extfloat.go.html#1599959">multiplier</a></span>&nbsp;<span class="op" id="1600174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1600179">//&nbsp;We&nbsp;are&nbsp;in&nbsp;the&nbsp;admissible&nbsp;range.&nbsp;Note&nbsp;that&nbsp;if&nbsp;allowance&nbsp;is&nbsp;about&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1600252">//&nbsp;overflow,&nbsp;that&nbsp;is,&nbsp;allowance&nbsp;&gt;&nbsp;2^64/10,&nbsp;the&nbsp;condition&nbsp;is&nbsp;automatically</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1600329">//&nbsp;true&nbsp;due&nbsp;to&nbsp;the&nbsp;limited&nbsp;range&nbsp;of&nbsp;fraction.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1600378">return</span>&nbsp;<span class="ident" id="1600385"><a href="/strconv/extfloat.go.html#1600770">adjustLastDigit</a></span><span class="op" id="1600400">(</span><span class="ident" id="1600401"><a href="/strconv/extfloat.go.html#1597615">d</a></span><span class="op" id="1600402">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1600408"><a href="/strconv/extfloat.go.html#1598742">fraction</a></span><span class="op" id="1600416">,</span>&nbsp;<span class="ident" id="1600418"><a href="/strconv/extfloat.go.html#1598954">targetDiff</a></span><span class="op" id="1600428">*</span><span class="ident" id="1600429"><a href="/strconv/extfloat.go.html#1599959">multiplier</a></span><span class="op" id="1600439">,</span>&nbsp;<span class="ident" id="1600441"><a href="/strconv/extfloat.go.html#1598861">allowance</a></span><span class="op" id="1600450">*</span><span class="ident" id="1600451"><a href="/strconv/extfloat.go.html#1599959">multiplier</a></span><span class="op" id="1600461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="1600467">1</span><span class="op" id="1600468">&lt;&lt;</span><span class="ident" id="1600470"><a href="/strconv/extfloat.go.html#1598675">shift</a></span><span class="op" id="1600475">,</span>&nbsp;<span class="ident" id="1600477"><a href="/strconv/extfloat.go.html#1599959">multiplier</a></span><span class="op" id="1600487">*</span><span class="num" id="1600488">2</span><span class="op" id="1600489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1600493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1600496">}</span><br>
<span class="lineno"></span><span class="op" id="1600498">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="1600501">//&nbsp;adjustLastDigit&nbsp;modifies&nbsp;d&nbsp;=&nbsp;x-currentDiff*ε,&nbsp;to&nbsp;get&nbsp;closest&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="1600569">//&nbsp;d&nbsp;=&nbsp;x-targetDiff*ε,&nbsp;without&nbsp;becoming&nbsp;smaller&nbsp;than&nbsp;x-maxDiff*ε.</span><br>
<span class="lineno"></span><span class="comment" id="1600637">//&nbsp;It&nbsp;assumes&nbsp;that&nbsp;a&nbsp;decimal&nbsp;digit&nbsp;is&nbsp;worth&nbsp;ulpDecimal*ε,&nbsp;and&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="1600705">//&nbsp;all&nbsp;data&nbsp;is&nbsp;known&nbsp;with&nbsp;a&nbsp;error&nbsp;estimate&nbsp;of&nbsp;ulpBinary*ε.</span><br>
<span class="lineno">645</span><span class="keyword" id="1600765">func</span>&nbsp;<span class="ident" id="1600770">adjustLastDigit</span><span class="op" id="1600785">(</span><span class="ident" id="1600786">d</span>&nbsp;<span class="op" id="1600788">*</span><span class="ident" id="1600789"><a href="/strconv/ftoa.go.html#1610549">decimalSlice</a></span><span class="op" id="1600801">,</span>&nbsp;<span class="ident" id="1600803">currentDiff</span><span class="op" id="1600814">,</span>&nbsp;<span class="ident" id="1600816">targetDiff</span><span class="op" id="1600826">,</span>&nbsp;<span class="ident" id="1600828">maxDiff</span><span class="op" id="1600835">,</span>&nbsp;<span class="ident" id="1600837">ulpDecimal</span><span class="op" id="1600847">,</span>&nbsp;<span class="ident" id="1600849">ulpBinary</span>&nbsp;<span class="ident" id="1600859">uint64</span><span class="op" id="1600865">)</span>&nbsp;<span class="builtintype" id="1600867">bool</span>&nbsp;<span class="op" id="1600872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1600875">if</span>&nbsp;<span class="ident" id="1600878"><a href="/strconv/extfloat.go.html#1600837">ulpDecimal</a></span>&nbsp;<span class="op" id="1600889">&lt;</span>&nbsp;<span class="num" id="1600891">2</span><span class="op" id="1600892">*</span><span class="ident" id="1600893"><a href="/strconv/extfloat.go.html#1600849">ulpBinary</a></span>&nbsp;<span class="op" id="1600903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1600907">//&nbsp;Approximation&nbsp;is&nbsp;too&nbsp;wide.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1600939">return</span>&nbsp;<span class="ident" id="1600946">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1600953">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1600956">for</span>&nbsp;<span class="ident" id="1600960"><a href="/strconv/extfloat.go.html#1600803">currentDiff</a></span><span class="op" id="1600971">+</span><span class="ident" id="1600972"><a href="/strconv/extfloat.go.html#1600837">ulpDecimal</a></span><span class="op" id="1600982">/</span><span class="num" id="1600983">2</span><span class="op" id="1600984">+</span><span class="ident" id="1600985"><a href="/strconv/extfloat.go.html#1600849">ulpBinary</a></span>&nbsp;<span class="op" id="1600995">&lt;</span>&nbsp;<span class="ident" id="1600997"><a href="/strconv/extfloat.go.html#1600816">targetDiff</a></span>&nbsp;<span class="op" id="1601008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601012"><a href="/strconv/extfloat.go.html#1600786">d</a></span><span class="op" id="1601013">.</span><span class="ident" id="1601014">d</span><span class="op" id="1601015">[</span><span class="ident" id="1601016"><a href="/strconv/extfloat.go.html#1600786">d</a></span><span class="op" id="1601017">.</span><span class="ident" id="1601018">nd</span><span class="op" id="1601020">-</span><span class="num" id="1601021">1</span><span class="op" id="1601022">]</span><span class="op" id="1601023">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601028"><a href="/strconv/extfloat.go.html#1600803">currentDiff</a></span>&nbsp;<span class="op" id="1601040">+=</span>&nbsp;<span class="ident" id="1601043"><a href="/strconv/extfloat.go.html#1600837">ulpDecimal</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601058">if</span>&nbsp;<span class="ident" id="1601061"><a href="/strconv/extfloat.go.html#1600803">currentDiff</a></span><span class="op" id="1601072">+</span><span class="ident" id="1601073"><a href="/strconv/extfloat.go.html#1600837">ulpDecimal</a></span>&nbsp;<span class="op" id="1601084">&lt;=</span>&nbsp;<span class="ident" id="1601087"><a href="/strconv/extfloat.go.html#1600816">targetDiff</a></span><span class="op" id="1601097">+</span><span class="ident" id="1601098"><a href="/strconv/extfloat.go.html#1600837">ulpDecimal</a></span><span class="op" id="1601108">/</span><span class="num" id="1601109">2</span><span class="op" id="1601110">+</span><span class="ident" id="1601111"><a href="/strconv/extfloat.go.html#1600849">ulpBinary</a></span>&nbsp;<span class="op" id="1601121">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1601125">//&nbsp;we&nbsp;have&nbsp;two&nbsp;choices,&nbsp;and&nbsp;don&#39;t&nbsp;know&nbsp;what&nbsp;to&nbsp;do.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601178">return</span>&nbsp;<span class="ident" id="1601185">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601195">if</span>&nbsp;<span class="ident" id="1601198"><a href="/strconv/extfloat.go.html#1600803">currentDiff</a></span>&nbsp;<span class="op" id="1601210">&lt;</span>&nbsp;<span class="ident" id="1601212"><a href="/strconv/extfloat.go.html#1600849">ulpBinary</a></span>&nbsp;<span class="op" id="1601222">||</span>&nbsp;<span class="ident" id="1601225"><a href="/strconv/extfloat.go.html#1600803">currentDiff</a></span>&nbsp;<span class="op" id="1601237">&gt;</span>&nbsp;<span class="ident" id="1601239"><a href="/strconv/extfloat.go.html#1600828">maxDiff</a></span><span class="op" id="1601246">-</span><span class="ident" id="1601247"><a href="/strconv/extfloat.go.html#1600849">ulpBinary</a></span>&nbsp;<span class="op" id="1601257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1601261">//&nbsp;we&nbsp;went&nbsp;too&nbsp;far</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601282">return</span>&nbsp;<span class="ident" id="1601289">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601299">if</span>&nbsp;<span class="ident" id="1601302"><a href="/strconv/extfloat.go.html#1600786">d</a></span><span class="op" id="1601303">.</span><span class="ident" id="1601304">nd</span>&nbsp;<span class="op" id="1601307">==</span>&nbsp;<span class="num" id="1601310">1</span>&nbsp;<span class="op" id="1601312">&amp;&amp;</span>&nbsp;<span class="ident" id="1601315"><a href="/strconv/extfloat.go.html#1600786">d</a></span><span class="op" id="1601316">.</span><span class="ident" id="1601317">d</span><span class="op" id="1601318">[</span><span class="num" id="1601319">0</span><span class="op" id="1601320">]</span>&nbsp;<span class="op" id="1601322">==</span>&nbsp;<span class="string" id="1601325">&#39;0&#39;</span>&nbsp;<span class="op" id="1601329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1601333">//&nbsp;the&nbsp;number&nbsp;has&nbsp;actually&nbsp;reached&nbsp;zero.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601376"><a href="/strconv/extfloat.go.html#1600786">d</a></span><span class="op" id="1601377">.</span><span class="ident" id="1601378">nd</span>&nbsp;<span class="op" id="1601381">=</span>&nbsp;<span class="num" id="1601383">0</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1601387"><a href="/strconv/extfloat.go.html#1600786">d</a></span><span class="op" id="1601388">.</span><span class="ident" id="1601389">dp</span>&nbsp;<span class="op" id="1601392">=</span>&nbsp;<span class="num" id="1601394">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1601397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1601400">return</span>&nbsp;<span class="ident" id="1601407">true</span><br>
<span class="lineno"></span><span class="op" id="1601412">}</span>
</div>
</body>
</html>
