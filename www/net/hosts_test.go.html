<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6814341">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6814396">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6814450">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6814501">package</span>&nbsp;<span class="ident" id="6814509">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6814514">import</span>&nbsp;<span class="op" id="6814521">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814524">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6814532">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="6814542">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6814545">type</span>&nbsp;<span class="ident" id="6814550">hostTest</span>&nbsp;<span class="keyword" id="6814559">struct</span>&nbsp;<span class="op" id="6814566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814569">host</span>&nbsp;<span class="builtintype" id="6814574">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814582">ips</span>&nbsp;&nbsp;<span class="op" id="6814587">[</span><span class="op" id="6814588">]</span><span class="ident" id="6814589"><a href="/net/ip.go.html#2604330">IP</a></span><br>
<span class="lineno">15</span><span class="op" id="6814592">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6814595">var</span>&nbsp;<span class="ident" id="6814599">hosttests</span>&nbsp;<span class="op" id="6814609">=</span>&nbsp;<span class="op" id="6814611">[</span><span class="op" id="6814612">]</span><span class="ident" id="6814613"><a href="/net/hosts_test.go.html#6814550">hostTest</a></span><span class="op" id="6814621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814624">{</span><span class="string" id="6814625">&#34;odin&#34;</span><span class="op" id="6814631">,</span>&nbsp;<span class="op" id="6814633">[</span><span class="op" id="6814634">]</span><span class="ident" id="6814635"><a href="/net/ip.go.html#2604330">IP</a></span><span class="op" id="6814637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814641"><a href="/net/ip.go.html#2604600">IPv4</a></span><span class="op" id="6814645">(</span><span class="num" id="6814646">127</span><span class="op" id="6814649">,</span>&nbsp;<span class="num" id="6814651">0</span><span class="op" id="6814652">,</span>&nbsp;<span class="num" id="6814654">0</span><span class="op" id="6814655">,</span>&nbsp;<span class="num" id="6814657">2</span><span class="op" id="6814658">)</span><span class="op" id="6814659">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814663"><a href="/net/ip.go.html#2604600">IPv4</a></span><span class="op" id="6814667">(</span><span class="num" id="6814668">127</span><span class="op" id="6814671">,</span>&nbsp;<span class="num" id="6814673">0</span><span class="op" id="6814674">,</span>&nbsp;<span class="num" id="6814676">0</span><span class="op" id="6814677">,</span>&nbsp;<span class="num" id="6814679">3</span><span class="op" id="6814680">)</span><span class="op" id="6814681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814685"><a href="/net/ip.go.html#2617916">ParseIP</a></span><span class="op" id="6814692">(</span><span class="string" id="6814693">&#34;::2&#34;</span><span class="op" id="6814698">)</span><span class="op" id="6814699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814702">}</span><span class="op" id="6814703">}</span><span class="op" id="6814704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814707">{</span><span class="string" id="6814708">&#34;thor&#34;</span><span class="op" id="6814714">,</span>&nbsp;<span class="op" id="6814716">[</span><span class="op" id="6814717">]</span><span class="ident" id="6814718"><a href="/net/ip.go.html#2604330">IP</a></span><span class="op" id="6814720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814724"><a href="/net/ip.go.html#2604600">IPv4</a></span><span class="op" id="6814728">(</span><span class="num" id="6814729">127</span><span class="op" id="6814732">,</span>&nbsp;<span class="num" id="6814734">1</span><span class="op" id="6814735">,</span>&nbsp;<span class="num" id="6814737">1</span><span class="op" id="6814738">,</span>&nbsp;<span class="num" id="6814740">1</span><span class="op" id="6814741">)</span><span class="op" id="6814742">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814745">}</span><span class="op" id="6814746">}</span><span class="op" id="6814747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814750">{</span><span class="string" id="6814751">&#34;loki&#34;</span><span class="op" id="6814757">,</span>&nbsp;<span class="op" id="6814759">[</span><span class="op" id="6814760">]</span><span class="ident" id="6814761"><a href="/net/ip.go.html#2604330">IP</a></span><span class="op" id="6814763">{</span><span class="op" id="6814764">}</span><span class="op" id="6814765">}</span><span class="op" id="6814766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814769">{</span><span class="string" id="6814770">&#34;ullr&#34;</span><span class="op" id="6814776">,</span>&nbsp;<span class="op" id="6814778">[</span><span class="op" id="6814779">]</span><span class="ident" id="6814780"><a href="/net/ip.go.html#2604330">IP</a></span><span class="op" id="6814782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814786"><a href="/net/ip.go.html#2604600">IPv4</a></span><span class="op" id="6814790">(</span><span class="num" id="6814791">127</span><span class="op" id="6814794">,</span>&nbsp;<span class="num" id="6814796">1</span><span class="op" id="6814797">,</span>&nbsp;<span class="num" id="6814799">1</span><span class="op" id="6814800">,</span>&nbsp;<span class="num" id="6814802">2</span><span class="op" id="6814803">)</span><span class="op" id="6814804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814807">}</span><span class="op" id="6814808">}</span><span class="op" id="6814809">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814812">{</span><span class="string" id="6814813">&#34;ullrhost&#34;</span><span class="op" id="6814823">,</span>&nbsp;<span class="op" id="6814825">[</span><span class="op" id="6814826">]</span><span class="ident" id="6814827"><a href="/net/ip.go.html#2604330">IP</a></span><span class="op" id="6814829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814833"><a href="/net/ip.go.html#2604600">IPv4</a></span><span class="op" id="6814837">(</span><span class="num" id="6814838">127</span><span class="op" id="6814841">,</span>&nbsp;<span class="num" id="6814843">1</span><span class="op" id="6814844">,</span>&nbsp;<span class="num" id="6814846">1</span><span class="op" id="6814847">,</span>&nbsp;<span class="num" id="6814849">2</span><span class="op" id="6814850">)</span><span class="op" id="6814851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6814854">}</span><span class="op" id="6814855">}</span><span class="op" id="6814856">,</span><br>
<span class="lineno"></span><span class="op" id="6814858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="6814861">func</span>&nbsp;<span class="ident" id="6814866">TestLookupStaticHost</span><span class="op" id="6814886">(</span><span class="ident" id="6814887">t</span>&nbsp;<span class="op" id="6814889">*</span><span class="ident" id="6814890"><a href="/net/hosts_test.go.html#6814532">testing</a></span><span class="op" id="6814897">.</span><span class="ident" id="6814898">T</span><span class="op" id="6814899">)</span>&nbsp;<span class="op" id="6814901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814904">p</span>&nbsp;<span class="op" id="6814906">:=</span>&nbsp;<span class="ident" id="6814909"><a href="/net/hosts.go.html#2591289">hostsPath</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814920"><a href="/net/hosts.go.html#2591289">hostsPath</a></span>&nbsp;<span class="op" id="6814930">=</span>&nbsp;<span class="string" id="6814932">&#34;testdata/hosts&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6814950">for</span>&nbsp;<span class="ident" id="6814954">i</span>&nbsp;<span class="op" id="6814956">:=</span>&nbsp;<span class="num" id="6814959">0</span><span class="op" id="6814960">;</span>&nbsp;<span class="ident" id="6814962"><a href="/net/hosts_test.go.html#6814954">i</a></span>&nbsp;<span class="op" id="6814964">&lt;</span>&nbsp;<span class="builtinfunc" id="6814966">len</span><span class="op" id="6814969">(</span><span class="ident" id="6814970"><a href="/net/hosts_test.go.html#6814599">hosttests</a></span><span class="op" id="6814979">)</span><span class="op" id="6814980">;</span>&nbsp;<span class="ident" id="6814982"><a href="/net/hosts_test.go.html#6814954">i</a></span><span class="op" id="6814983">++</span>&nbsp;<span class="op" id="6814986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6814990">tt</span>&nbsp;<span class="op" id="6814993">:=</span>&nbsp;<span class="ident" id="6814996"><a href="/net/hosts_test.go.html#6814599">hosttests</a></span><span class="op" id="6815005">[</span><span class="ident" id="6815006"><a href="/net/hosts_test.go.html#6814954">i</a></span><span class="op" id="6815007">]</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815011">ips</span>&nbsp;<span class="op" id="6815015">:=</span>&nbsp;<span class="ident" id="6815018"><a href="/net/hosts.go.html#2592322">lookupStaticHost</a></span><span class="op" id="6815034">(</span><span class="ident" id="6815035"><a href="/net/hosts_test.go.html#6814990">tt</a></span><span class="op" id="6815037">.</span><span class="ident" id="6815038">host</span><span class="op" id="6815042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815046">if</span>&nbsp;<span class="builtinfunc" id="6815049">len</span><span class="op" id="6815052">(</span><span class="ident" id="6815053"><a href="/net/hosts_test.go.html#6815011">ips</a></span><span class="op" id="6815056">)</span>&nbsp;<span class="op" id="6815058">!=</span>&nbsp;<span class="builtinfunc" id="6815061">len</span><span class="op" id="6815064">(</span><span class="ident" id="6815065"><a href="/net/hosts_test.go.html#6814990">tt</a></span><span class="op" id="6815067">.</span><span class="ident" id="6815068">ips</span><span class="op" id="6815071">)</span>&nbsp;<span class="op" id="6815073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815078"><a href="/net/hosts_test.go.html#6814887">t</a></span><span class="op" id="6815079">.</span><span class="ident" id="6815080">Errorf</span><span class="op" id="6815086">(</span><span class="string" id="6815087">&#34;#&nbsp;of&nbsp;hosts&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6815113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6815119">len</span><span class="op" id="6815122">(</span><span class="ident" id="6815123"><a href="/net/hosts_test.go.html#6815011">ips</a></span><span class="op" id="6815126">)</span><span class="op" id="6815127">,</span>&nbsp;<span class="builtinfunc" id="6815129">len</span><span class="op" id="6815132">(</span><span class="ident" id="6815133"><a href="/net/hosts_test.go.html#6814990">tt</a></span><span class="op" id="6815135">.</span><span class="ident" id="6815136">ips</span><span class="op" id="6815139">)</span><span class="op" id="6815140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815145">continue</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815160">for</span>&nbsp;<span class="ident" id="6815164">k</span><span class="op" id="6815165">,</span>&nbsp;<span class="ident" id="6815167">v</span>&nbsp;<span class="op" id="6815169">:=</span>&nbsp;<span class="keyword" id="6815172">range</span>&nbsp;<span class="ident" id="6815178"><a href="/net/hosts_test.go.html#6815011">ips</a></span>&nbsp;<span class="op" id="6815182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815187">if</span>&nbsp;<span class="ident" id="6815190"><a href="/net/hosts_test.go.html#6814990">tt</a></span><span class="op" id="6815192">.</span><span class="ident" id="6815193">ips</span><span class="op" id="6815196">[</span><span class="ident" id="6815197"><a href="/net/hosts_test.go.html#6815164">k</a></span><span class="op" id="6815198">]</span><span class="op" id="6815199">.</span><span class="ident" id="6815200">String</span><span class="op" id="6815206">(</span><span class="op" id="6815207">)</span>&nbsp;<span class="op" id="6815209">!=</span>&nbsp;<span class="ident" id="6815212"><a href="/net/hosts_test.go.html#6815167">v</a></span>&nbsp;<span class="op" id="6815214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815220"><a href="/net/hosts_test.go.html#6814887">t</a></span><span class="op" id="6815221">.</span><span class="ident" id="6815222">Errorf</span><span class="op" id="6815228">(</span><span class="string" id="6815229">&#34;lookupStaticHost(%q)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6815265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815272"><a href="/net/hosts_test.go.html#6814990">tt</a></span><span class="op" id="6815274">.</span><span class="ident" id="6815275">host</span><span class="op" id="6815279">,</span>&nbsp;<span class="ident" id="6815281"><a href="/net/hosts_test.go.html#6815167">v</a></span><span class="op" id="6815282">,</span>&nbsp;<span class="ident" id="6815284"><a href="/net/hosts_test.go.html#6814990">tt</a></span><span class="op" id="6815286">.</span><span class="ident" id="6815287">ips</span><span class="op" id="6815290">[</span><span class="ident" id="6815291"><a href="/net/hosts_test.go.html#6815164">k</a></span><span class="op" id="6815292">]</span><span class="op" id="6815293">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815308"><a href="/net/hosts.go.html#2591289">hostsPath</a></span>&nbsp;<span class="op" id="6815318">=</span>&nbsp;<span class="ident" id="6815320"><a href="/net/hosts_test.go.html#6814904">p</a></span><br>
<span class="lineno"></span><span class="op" id="6815322">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="6815325">//&nbsp;https://code.google.com/p/go/issues/detail?id=6646</span><br>
<span class="lineno"></span><span class="keyword" id="6815379">func</span>&nbsp;<span class="ident" id="6815384">TestSingleLineHostsFile</span><span class="op" id="6815407">(</span><span class="ident" id="6815408">t</span>&nbsp;<span class="op" id="6815410">*</span><span class="ident" id="6815411"><a href="/net/hosts_test.go.html#6814532">testing</a></span><span class="op" id="6815418">.</span><span class="ident" id="6815419">T</span><span class="op" id="6815420">)</span>&nbsp;<span class="op" id="6815422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815425">p</span>&nbsp;<span class="op" id="6815427">:=</span>&nbsp;<span class="ident" id="6815430"><a href="/net/hosts.go.html#2591289">hostsPath</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815441"><a href="/net/hosts.go.html#2591289">hostsPath</a></span>&nbsp;<span class="op" id="6815451">=</span>&nbsp;<span class="string" id="6815453">&#34;testdata/hosts_singleline&#34;</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815483">ips</span>&nbsp;<span class="op" id="6815487">:=</span>&nbsp;<span class="ident" id="6815490"><a href="/net/hosts.go.html#2592322">lookupStaticHost</a></span><span class="op" id="6815506">(</span><span class="string" id="6815507">&#34;odin&#34;</span><span class="op" id="6815513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815516">if</span>&nbsp;<span class="builtinfunc" id="6815519">len</span><span class="op" id="6815522">(</span><span class="ident" id="6815523"><a href="/net/hosts_test.go.html#6815483">ips</a></span><span class="op" id="6815526">)</span>&nbsp;<span class="op" id="6815528">!=</span>&nbsp;<span class="num" id="6815531">1</span>&nbsp;<span class="op" id="6815533">||</span>&nbsp;<span class="ident" id="6815536"><a href="/net/hosts_test.go.html#6815483">ips</a></span><span class="op" id="6815539">[</span><span class="num" id="6815540">0</span><span class="op" id="6815541">]</span>&nbsp;<span class="op" id="6815543">!=</span>&nbsp;<span class="string" id="6815546">&#34;127.0.0.2&#34;</span>&nbsp;<span class="op" id="6815558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815562"><a href="/net/hosts_test.go.html#6815408">t</a></span><span class="op" id="6815563">.</span><span class="ident" id="6815564">Errorf</span><span class="op" id="6815570">(</span><span class="string" id="6815571">&#34;lookupStaticHost&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6815603">,</span>&nbsp;<span class="ident" id="6815605"><a href="/net/hosts_test.go.html#6815483">ips</a></span><span class="op" id="6815608">,</span>&nbsp;<span class="op" id="6815610">[</span><span class="op" id="6815611">]</span><span class="builtintype" id="6815612">string</span><span class="op" id="6815618">{</span><span class="string" id="6815619">&#34;127.0.0.2&#34;</span><span class="op" id="6815630">}</span><span class="op" id="6815631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6815634">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815638"><a href="/net/hosts.go.html#2591289">hostsPath</a></span>&nbsp;<span class="op" id="6815648">=</span>&nbsp;<span class="ident" id="6815650"><a href="/net/hosts_test.go.html#6815425">p</a></span><br>
<span class="lineno"></span><span class="op" id="6815652">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6815655">func</span>&nbsp;<span class="ident" id="6815660">TestLookupHost</span><span class="op" id="6815674">(</span><span class="ident" id="6815675">t</span>&nbsp;<span class="op" id="6815677">*</span><span class="ident" id="6815678"><a href="/net/hosts_test.go.html#6814532">testing</a></span><span class="op" id="6815685">.</span><span class="ident" id="6815686">T</span><span class="op" id="6815687">)</span>&nbsp;<span class="op" id="6815689">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6815692">//&nbsp;Can&#39;t&nbsp;depend&nbsp;on&nbsp;this&nbsp;to&nbsp;return&nbsp;anything&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6815751">//&nbsp;but&nbsp;if&nbsp;it&nbsp;does&nbsp;return&nbsp;something,&nbsp;make&nbsp;sure&nbsp;it&nbsp;doesn&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6815809">//&nbsp;duplicate&nbsp;addresses&nbsp;(a&nbsp;common&nbsp;bug&nbsp;due&nbsp;to&nbsp;the&nbsp;way</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6815862">//&nbsp;getaddrinfo&nbsp;works).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815886">addrs</span><span class="op" id="6815891">,</span>&nbsp;<span class="ident" id="6815893">_</span>&nbsp;<span class="op" id="6815895">:=</span>&nbsp;<span class="ident" id="6815898"><a href="/net/lookup.go.html#2641898">LookupHost</a></span><span class="op" id="6815908">(</span><span class="string" id="6815909">&#34;localhost&#34;</span><span class="op" id="6815920">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6815923"><a href="/net/hosts_test.go.html#6814524">sort</a></span><span class="op" id="6815927">.</span><span class="ident" id="6815928">Strings</span><span class="op" id="6815935">(</span><span class="ident" id="6815936"><a href="/net/hosts_test.go.html#6815886">addrs</a></span><span class="op" id="6815941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815944">for</span>&nbsp;<span class="ident" id="6815948">i</span>&nbsp;<span class="op" id="6815950">:=</span>&nbsp;<span class="num" id="6815953">0</span><span class="op" id="6815954">;</span>&nbsp;<span class="ident" id="6815956"><a href="/net/hosts_test.go.html#6815948">i</a></span><span class="op" id="6815957">+</span><span class="num" id="6815958">1</span>&nbsp;<span class="op" id="6815960">&lt;</span>&nbsp;<span class="builtinfunc" id="6815962">len</span><span class="op" id="6815965">(</span><span class="ident" id="6815966"><a href="/net/hosts_test.go.html#6815886">addrs</a></span><span class="op" id="6815971">)</span><span class="op" id="6815972">;</span>&nbsp;<span class="ident" id="6815974"><a href="/net/hosts_test.go.html#6815948">i</a></span><span class="op" id="6815975">++</span>&nbsp;<span class="op" id="6815978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6815982">if</span>&nbsp;<span class="ident" id="6815985"><a href="/net/hosts_test.go.html#6815886">addrs</a></span><span class="op" id="6815990">[</span><span class="ident" id="6815991"><a href="/net/hosts_test.go.html#6815948">i</a></span><span class="op" id="6815992">]</span>&nbsp;<span class="op" id="6815994">==</span>&nbsp;<span class="ident" id="6815997"><a href="/net/hosts_test.go.html#6815886">addrs</a></span><span class="op" id="6816002">[</span><span class="ident" id="6816003"><a href="/net/hosts_test.go.html#6815948">i</a></span><span class="op" id="6816004">+</span><span class="num" id="6816005">1</span><span class="op" id="6816006">]</span>&nbsp;<span class="op" id="6816008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6816013"><a href="/net/hosts_test.go.html#6815675">t</a></span><span class="op" id="6816014">.</span><span class="ident" id="6816015">Fatalf</span><span class="op" id="6816021">(</span><span class="string" id="6816022">&#34;LookupHost(\&#34;localhost\&#34;)&nbsp;=&nbsp;%v,&nbsp;has&nbsp;duplicate&nbsp;addresses&#34;</span><span class="op" id="6816079">,</span>&nbsp;<span class="ident" id="6816081"><a href="/net/hosts_test.go.html#6815886">addrs</a></span><span class="op" id="6816086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816090">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6816093">}</span><br>
<span class="lineno"></span><span class="op" id="6816095">}</span>
</div>
</body>
</html>
