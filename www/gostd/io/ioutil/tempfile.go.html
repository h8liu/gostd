<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>io/ioutil</h2>
<ul>
<li><a href="/gostd/io/ioutil/ioutil.go.html">ioutil.go</a></li>
<li><a href="/gostd/io/ioutil/ioutil_test.go.html">ioutil_test.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile.go.html" class="current">tempfile.go</a></li>
<li><a href="/gostd/io/ioutil/tempfile_test.go.html">tempfile_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2925631">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2925687">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2925741">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2925792">package</span>&nbsp;<span class="ident" id="2925800">ioutil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2925808">import</span>&nbsp;<span class="op" id="2925815">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2925818">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2925824">&#34;path/filepath&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2925841">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2925852">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2925860">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="2925867">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2925870">//&nbsp;Random&nbsp;number&nbsp;state.</span><br>
<span class="lineno"></span><span class="comment" id="2925894">//&nbsp;We&nbsp;generate&nbsp;random&nbsp;temporary&nbsp;file&nbsp;names&nbsp;so&nbsp;that&nbsp;there&#39;s&nbsp;a&nbsp;good</span><br>
<span class="lineno"></span><span class="comment" id="2925960">//&nbsp;chance&nbsp;the&nbsp;file&nbsp;doesn&#39;t&nbsp;exist&nbsp;yet&nbsp;-&nbsp;keeps&nbsp;the&nbsp;number&nbsp;of&nbsp;tries&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2926028">//&nbsp;TempFile&nbsp;to&nbsp;a&nbsp;minimum.</span><br>
<span class="lineno"></span><span class="keyword" id="2926054">var</span>&nbsp;<span class="ident" id="2926058">rand</span>&nbsp;<span class="builtintype" id="2926063">uint32</span><br>
<span class="lineno">20</span><span class="keyword" id="2926070">var</span>&nbsp;<span class="ident" id="2926074">randmu</span>&nbsp;<span class="ident" id="2926081">sync</span><span class="op" id="2926085">.</span><span class="ident" id="2926086">Mutex</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2926093">func</span>&nbsp;<span class="ident" id="2926098">reseed</span><span class="op" id="2926104">(</span><span class="op" id="2926105">)</span>&nbsp;<span class="builtintype" id="2926107">uint32</span>&nbsp;<span class="op" id="2926114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926117">return</span>&nbsp;<span class="builtintype" id="2926124">uint32</span><span class="op" id="2926130">(</span><span class="ident" id="2926131">time</span><span class="op" id="2926135">.</span><span class="ident" id="2926136">Now</span><span class="op" id="2926139">(</span><span class="op" id="2926140">)</span><span class="op" id="2926141">.</span><span class="ident" id="2926142">UnixNano</span><span class="op" id="2926150">(</span><span class="op" id="2926151">)</span>&nbsp;<span class="op" id="2926153">+</span>&nbsp;<span class="ident" id="2926155">int64</span><span class="op" id="2926160">(</span><span class="ident" id="2926161">os</span><span class="op" id="2926163">.</span><span class="ident" id="2926164">Getpid</span><span class="op" id="2926170">(</span><span class="op" id="2926171">)</span><span class="op" id="2926172">)</span><span class="op" id="2926173">)</span><br>
<span class="lineno"></span><span class="op" id="2926175">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="2926178">func</span>&nbsp;<span class="ident" id="2926183">nextSuffix</span><span class="op" id="2926193">(</span><span class="op" id="2926194">)</span>&nbsp;<span class="builtintype" id="2926196">string</span>&nbsp;<span class="op" id="2926203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2926206">randmu</span><span class="op" id="2926212">.</span><span class="ident" id="2926213">Lock</span><span class="op" id="2926217">(</span><span class="op" id="2926218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2926221">r</span>&nbsp;<span class="op" id="2926223">:=</span>&nbsp;<span class="ident" id="2926226">rand</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926232">if</span>&nbsp;<span class="ident" id="2926235">r</span>&nbsp;<span class="op" id="2926237">==</span>&nbsp;<span class="num" id="2926240">0</span>&nbsp;<span class="op" id="2926242">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2926246">r</span>&nbsp;<span class="op" id="2926248">=</span>&nbsp;<span class="ident" id="2926250">reseed</span><span class="op" id="2926256">(</span><span class="op" id="2926257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2926260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2926263">r</span>&nbsp;<span class="op" id="2926265">=</span>&nbsp;<span class="ident" id="2926267">r</span><span class="op" id="2926268">*</span><span class="num" id="2926269">1664525</span>&nbsp;<span class="op" id="2926277">+</span>&nbsp;<span class="num" id="2926279">1013904223</span>&nbsp;<span class="comment" id="2926290">//&nbsp;constants&nbsp;from&nbsp;Numerical&nbsp;Recipes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2926327">rand</span>&nbsp;<span class="op" id="2926332">=</span>&nbsp;<span class="ident" id="2926334">r</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2926337">randmu</span><span class="op" id="2926343">.</span><span class="ident" id="2926344">Unlock</span><span class="op" id="2926350">(</span><span class="op" id="2926351">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926354">return</span>&nbsp;<span class="ident" id="2926361">strconv</span><span class="op" id="2926368">.</span><span class="ident" id="2926369">Itoa</span><span class="op" id="2926373">(</span><span class="builtintype" id="2926374">int</span><span class="op" id="2926377">(</span><span class="num" id="2926378">1e9</span>&nbsp;<span class="op" id="2926382">+</span>&nbsp;<span class="ident" id="2926384">r</span><span class="op" id="2926385">%</span><span class="num" id="2926386">1e9</span><span class="op" id="2926389">)</span><span class="op" id="2926390">)</span><span class="op" id="2926391">[</span><span class="num" id="2926392">1</span><span class="op" id="2926393">:</span><span class="op" id="2926394">]</span><br>
<span class="lineno"></span><span class="op" id="2926396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2926399">//&nbsp;TempFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;file&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="2926461">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix,&nbsp;opens&nbsp;the&nbsp;file&nbsp;for&nbsp;reading</span><br>
<span class="lineno">40</span><span class="comment" id="2926526">//&nbsp;and&nbsp;writing,&nbsp;and&nbsp;returns&nbsp;the&nbsp;resulting&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="comment" id="2926578">//&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempFile&nbsp;uses&nbsp;the&nbsp;default&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="2926645">//&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="2926686">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempFile&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="2926739">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;file.&nbsp;&nbsp;The&nbsp;caller&nbsp;can&nbsp;use&nbsp;f.Name()</span><br>
<span class="lineno">45</span><span class="comment" id="2926802">//&nbsp;to&nbsp;find&nbsp;the&nbsp;pathname&nbsp;of&nbsp;the&nbsp;file.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="2926874">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;file&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="2926919">func</span>&nbsp;<span class="ident" id="2926924">TempFile</span><span class="op" id="2926932">(</span><span class="ident" id="2926933">dir</span><span class="op" id="2926936">,</span>&nbsp;<span class="ident" id="2926938">prefix</span>&nbsp;<span class="builtintype" id="2926945">string</span><span class="op" id="2926951">)</span>&nbsp;<span class="op" id="2926953">(</span><span class="ident" id="2926954">f</span>&nbsp;<span class="op" id="2926956">*</span><span class="ident" id="2926957">os</span><span class="op" id="2926959">.</span><span class="ident" id="2926960">File</span><span class="op" id="2926964">,</span>&nbsp;<span class="ident" id="2926966">err</span>&nbsp;<span class="builtintype" id="2926970">error</span><span class="op" id="2926975">)</span>&nbsp;<span class="op" id="2926977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2926980">if</span>&nbsp;<span class="ident" id="2926983">dir</span>&nbsp;<span class="op" id="2926987">==</span>&nbsp;<span class="string" id="2926990">&#34;&#34;</span>&nbsp;<span class="op" id="2926993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2926997">dir</span>&nbsp;<span class="op" id="2927001">=</span>&nbsp;<span class="ident" id="2927003">os</span><span class="op" id="2927005">.</span><span class="ident" id="2927006">TempDir</span><span class="op" id="2927013">(</span><span class="op" id="2927014">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2927017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2927021">nconflict</span>&nbsp;<span class="op" id="2927031">:=</span>&nbsp;<span class="num" id="2927034">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927037">for</span>&nbsp;<span class="ident" id="2927041">i</span>&nbsp;<span class="op" id="2927043">:=</span>&nbsp;<span class="num" id="2927046">0</span><span class="op" id="2927047">;</span>&nbsp;<span class="ident" id="2927049">i</span>&nbsp;<span class="op" id="2927051">&lt;</span>&nbsp;<span class="num" id="2927053">10000</span><span class="op" id="2927058">;</span>&nbsp;<span class="ident" id="2927060">i</span><span class="op" id="2927061">++</span>&nbsp;<span class="op" id="2927064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2927068">name</span>&nbsp;<span class="op" id="2927073">:=</span>&nbsp;<span class="ident" id="2927076">filepath</span><span class="op" id="2927084">.</span><span class="ident" id="2927085">Join</span><span class="op" id="2927089">(</span><span class="ident" id="2927090">dir</span><span class="op" id="2927093">,</span>&nbsp;<span class="ident" id="2927095">prefix</span><span class="op" id="2927101">+</span><span class="ident" id="2927102">nextSuffix</span><span class="op" id="2927112">(</span><span class="op" id="2927113">)</span><span class="op" id="2927114">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2927118">f</span><span class="op" id="2927119">,</span>&nbsp;<span class="ident" id="2927121">err</span>&nbsp;<span class="op" id="2927125">=</span>&nbsp;<span class="ident" id="2927127">os</span><span class="op" id="2927129">.</span><span class="ident" id="2927130">OpenFile</span><span class="op" id="2927138">(</span><span class="ident" id="2927139">name</span><span class="op" id="2927143">,</span>&nbsp;<span class="ident" id="2927145">os</span><span class="op" id="2927147">.</span><span class="ident" id="2927148">O_RDWR</span><span class="op" id="2927154">|</span><span class="ident" id="2927155">os</span><span class="op" id="2927157">.</span><span class="ident" id="2927158">O_CREATE</span><span class="op" id="2927166">|</span><span class="ident" id="2927167">os</span><span class="op" id="2927169">.</span><span class="ident" id="2927170">O_EXCL</span><span class="op" id="2927176">,</span>&nbsp;<span class="num" id="2927178">0600</span><span class="op" id="2927182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927186">if</span>&nbsp;<span class="ident" id="2927189">os</span><span class="op" id="2927191">.</span><span class="ident" id="2927192">IsExist</span><span class="op" id="2927199">(</span><span class="ident" id="2927200">err</span><span class="op" id="2927203">)</span>&nbsp;<span class="op" id="2927205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927210">if</span>&nbsp;<span class="ident" id="2927213">nconflict</span><span class="op" id="2927222">++</span><span class="op" id="2927224">;</span>&nbsp;<span class="ident" id="2927226">nconflict</span>&nbsp;<span class="op" id="2927236">&gt;</span>&nbsp;<span class="num" id="2927238">10</span>&nbsp;<span class="op" id="2927241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2927247">rand</span>&nbsp;<span class="op" id="2927252">=</span>&nbsp;<span class="ident" id="2927254">reseed</span><span class="op" id="2927260">(</span><span class="op" id="2927261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2927266">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927271">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2927282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927286">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2927293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927296">return</span><br>
<span class="lineno">65</span><span class="op" id="2927303">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2927306">//&nbsp;TempDir&nbsp;creates&nbsp;a&nbsp;new&nbsp;temporary&nbsp;directory&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="2927372">//&nbsp;with&nbsp;a&nbsp;name&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;and&nbsp;returns&nbsp;the&nbsp;path&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2927437">//&nbsp;new&nbsp;directory.&nbsp;&nbsp;If&nbsp;dir&nbsp;is&nbsp;the&nbsp;empty&nbsp;string,&nbsp;TempDir&nbsp;uses&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="2927501">//&nbsp;default&nbsp;directory&nbsp;for&nbsp;temporary&nbsp;files&nbsp;(see&nbsp;os.TempDir).</span><br>
<span class="lineno"></span><span class="comment" id="2927560">//&nbsp;Multiple&nbsp;programs&nbsp;calling&nbsp;TempDir&nbsp;simultaneously</span><br>
<span class="lineno"></span><span class="comment" id="2927612">//&nbsp;will&nbsp;not&nbsp;choose&nbsp;the&nbsp;same&nbsp;directory.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility</span><br>
<span class="lineno"></span><span class="comment" id="2927686">//&nbsp;to&nbsp;remove&nbsp;the&nbsp;directory&nbsp;when&nbsp;no&nbsp;longer&nbsp;needed.</span><br>
<span class="lineno"></span><span class="keyword" id="2927736">func</span>&nbsp;<span class="ident" id="2927741">TempDir</span><span class="op" id="2927748">(</span><span class="ident" id="2927749">dir</span><span class="op" id="2927752">,</span>&nbsp;<span class="ident" id="2927754">prefix</span>&nbsp;<span class="builtintype" id="2927761">string</span><span class="op" id="2927767">)</span>&nbsp;<span class="op" id="2927769">(</span><span class="ident" id="2927770">name</span>&nbsp;<span class="builtintype" id="2927775">string</span><span class="op" id="2927781">,</span>&nbsp;<span class="ident" id="2927783">err</span>&nbsp;<span class="builtintype" id="2927787">error</span><span class="op" id="2927792">)</span>&nbsp;<span class="op" id="2927794">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927797">if</span>&nbsp;<span class="ident" id="2927800">dir</span>&nbsp;<span class="op" id="2927804">==</span>&nbsp;<span class="string" id="2927807">&#34;&#34;</span>&nbsp;<span class="op" id="2927810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2927814">dir</span>&nbsp;<span class="op" id="2927818">=</span>&nbsp;<span class="ident" id="2927820">os</span><span class="op" id="2927822">.</span><span class="ident" id="2927823">TempDir</span><span class="op" id="2927830">(</span><span class="op" id="2927831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2927834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2927838">nconflict</span>&nbsp;<span class="op" id="2927848">:=</span>&nbsp;<span class="num" id="2927851">0</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927854">for</span>&nbsp;<span class="ident" id="2927858">i</span>&nbsp;<span class="op" id="2927860">:=</span>&nbsp;<span class="num" id="2927863">0</span><span class="op" id="2927864">;</span>&nbsp;<span class="ident" id="2927866">i</span>&nbsp;<span class="op" id="2927868">&lt;</span>&nbsp;<span class="num" id="2927870">10000</span><span class="op" id="2927875">;</span>&nbsp;<span class="ident" id="2927877">i</span><span class="op" id="2927878">++</span>&nbsp;<span class="op" id="2927881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2927885">try</span>&nbsp;<span class="op" id="2927889">:=</span>&nbsp;<span class="ident" id="2927892">filepath</span><span class="op" id="2927900">.</span><span class="ident" id="2927901">Join</span><span class="op" id="2927905">(</span><span class="ident" id="2927906">dir</span><span class="op" id="2927909">,</span>&nbsp;<span class="ident" id="2927911">prefix</span><span class="op" id="2927917">+</span><span class="ident" id="2927918">nextSuffix</span><span class="op" id="2927928">(</span><span class="op" id="2927929">)</span><span class="op" id="2927930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2927934">err</span>&nbsp;<span class="op" id="2927938">=</span>&nbsp;<span class="ident" id="2927940">os</span><span class="op" id="2927942">.</span><span class="ident" id="2927943">Mkdir</span><span class="op" id="2927948">(</span><span class="ident" id="2927949">try</span><span class="op" id="2927952">,</span>&nbsp;<span class="num" id="2927954">0700</span><span class="op" id="2927958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927962">if</span>&nbsp;<span class="ident" id="2927965">os</span><span class="op" id="2927967">.</span><span class="ident" id="2927968">IsExist</span><span class="op" id="2927975">(</span><span class="ident" id="2927976">err</span><span class="op" id="2927979">)</span>&nbsp;<span class="op" id="2927981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2927986">if</span>&nbsp;<span class="ident" id="2927989">nconflict</span><span class="op" id="2927998">++</span><span class="op" id="2928000">;</span>&nbsp;<span class="ident" id="2928002">nconflict</span>&nbsp;<span class="op" id="2928012">&gt;</span>&nbsp;<span class="num" id="2928014">10</span>&nbsp;<span class="op" id="2928017">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2928023">rand</span>&nbsp;<span class="op" id="2928028">=</span>&nbsp;<span class="ident" id="2928030">reseed</span><span class="op" id="2928036">(</span><span class="op" id="2928037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2928042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2928047">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2928058">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2928062">if</span>&nbsp;<span class="ident" id="2928065">err</span>&nbsp;<span class="op" id="2928069">==</span>&nbsp;<span class="ident" id="2928072">nil</span>&nbsp;<span class="op" id="2928076">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2928081">name</span>&nbsp;<span class="op" id="2928086">=</span>&nbsp;<span class="ident" id="2928088">try</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2928094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2928098">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2928105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2928108">return</span><br>
<span class="lineno">95</span><span class="op" id="2928115">}</span>
</div>
</body>
</html>
