<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html" class="current">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6890871">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6890927">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6890981">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6891032">//&nbsp;Large&nbsp;data&nbsp;benchmark.</span><br>
<span class="lineno"></span><span class="comment" id="6891057">//&nbsp;The&nbsp;JSON&nbsp;data&nbsp;is&nbsp;a&nbsp;summary&nbsp;of&nbsp;agl&#39;s&nbsp;changes&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6891111">//&nbsp;go,&nbsp;webkit,&nbsp;and&nbsp;chromium&nbsp;open&nbsp;source&nbsp;projects.</span><br>
<span class="lineno"></span><span class="comment" id="6891161">//&nbsp;We&nbsp;benchmark&nbsp;converting&nbsp;between&nbsp;the&nbsp;JSON&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="6891210">//&nbsp;and&nbsp;in-memory&nbsp;data&nbsp;structures.</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6891245">package</span>&nbsp;<span class="ident" id="6891253">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6891259">import</span>&nbsp;<span class="op" id="6891266">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891269">&#34;bytes&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891278">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891295">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891308">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891314">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6891324">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="6891327">type</span>&nbsp;<span class="ident" id="6891332">codeResponse</span>&nbsp;<span class="keyword" id="6891345">struct</span>&nbsp;<span class="op" id="6891352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891355">Tree</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891364">*</span><span class="ident" id="6891365">codeNode</span>&nbsp;<span class="string" id="6891374">`json:&#34;tree&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891389">Username</span>&nbsp;<span class="builtintype" id="6891398">string</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891408">`json:&#34;username&#34;`</span><br>
<span class="lineno"></span><span class="op" id="6891426">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6891429">type</span>&nbsp;<span class="ident" id="6891434">codeNode</span>&nbsp;<span class="keyword" id="6891443">struct</span>&nbsp;<span class="op" id="6891450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891453">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6891462">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891474">`json:&#34;name&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891489">Kids</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891498">[</span><span class="op" id="6891499">]</span><span class="op" id="6891500">*</span><span class="ident" id="6891501">codeNode</span>&nbsp;<span class="string" id="6891510">`json:&#34;kids&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891525">CLWeight</span>&nbsp;<span class="builtintype" id="6891534">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891546">`json:&#34;cl_weight&#34;`</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891566">Touches</span>&nbsp;&nbsp;<span class="builtintype" id="6891575">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891587">`json:&#34;touches&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891605">MinT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891614">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891626">`json:&#34;min_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891642">MaxT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891651">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891663">`json:&#34;max_t&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891679">MeanT</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891688">int64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6891700">`json:&#34;mean_t&#34;`</span><br>
<span class="lineno"></span><span class="op" id="6891716">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="6891719">var</span>&nbsp;<span class="ident" id="6891723">codeJSON</span>&nbsp;<span class="op" id="6891732">[</span><span class="op" id="6891733">]</span><span class="builtintype" id="6891734">byte</span><br>
<span class="lineno"></span><span class="keyword" id="6891739">var</span>&nbsp;<span class="ident" id="6891743">codeStruct</span>&nbsp;<span class="ident" id="6891754">codeResponse</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6891768">func</span>&nbsp;<span class="ident" id="6891773">codeInit</span><span class="op" id="6891781">(</span><span class="op" id="6891782">)</span>&nbsp;<span class="op" id="6891784">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891787">f</span><span class="op" id="6891788">,</span>&nbsp;<span class="ident" id="6891790">err</span>&nbsp;<span class="op" id="6891794">:=</span>&nbsp;<span class="ident" id="6891797">os</span><span class="op" id="6891799">.</span><span class="ident" id="6891800">Open</span><span class="op" id="6891804">(</span><span class="string" id="6891805">&#34;testdata/code.json.gz&#34;</span><span class="op" id="6891828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891831">if</span>&nbsp;<span class="ident" id="6891834">err</span>&nbsp;<span class="op" id="6891838">!=</span>&nbsp;<span class="builtintype" id="6891841">nil</span>&nbsp;<span class="op" id="6891845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6891849">panic</span><span class="op" id="6891854">(</span><span class="ident" id="6891855">err</span><span class="op" id="6891858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891864">defer</span>&nbsp;<span class="ident" id="6891870">f</span><span class="op" id="6891871">.</span><span class="ident" id="6891872">Close</span><span class="op" id="6891877">(</span><span class="op" id="6891878">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891881">gz</span><span class="op" id="6891883">,</span>&nbsp;<span class="ident" id="6891885">err</span>&nbsp;<span class="op" id="6891889">:=</span>&nbsp;<span class="ident" id="6891892">gzip</span><span class="op" id="6891896">.</span><span class="ident" id="6891897">NewReader</span><span class="op" id="6891906">(</span><span class="ident" id="6891907">f</span><span class="op" id="6891908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891911">if</span>&nbsp;<span class="ident" id="6891914">err</span>&nbsp;<span class="op" id="6891918">!=</span>&nbsp;<span class="builtintype" id="6891921">nil</span>&nbsp;<span class="op" id="6891925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6891929">panic</span><span class="op" id="6891934">(</span><span class="ident" id="6891935">err</span><span class="op" id="6891938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6891941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6891944">data</span><span class="op" id="6891948">,</span>&nbsp;<span class="ident" id="6891950">err</span>&nbsp;<span class="op" id="6891954">:=</span>&nbsp;<span class="ident" id="6891957">ioutil</span><span class="op" id="6891963">.</span><span class="ident" id="6891964">ReadAll</span><span class="op" id="6891971">(</span><span class="ident" id="6891972">gz</span><span class="op" id="6891974">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6891977">if</span>&nbsp;<span class="ident" id="6891980">err</span>&nbsp;<span class="op" id="6891984">!=</span>&nbsp;<span class="builtintype" id="6891987">nil</span>&nbsp;<span class="op" id="6891991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6891995">panic</span><span class="op" id="6892000">(</span><span class="ident" id="6892001">err</span><span class="op" id="6892004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892007">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892011">codeJSON</span>&nbsp;<span class="op" id="6892020">=</span>&nbsp;<span class="ident" id="6892022">data</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892029">if</span>&nbsp;<span class="ident" id="6892032">err</span>&nbsp;<span class="op" id="6892036">:=</span>&nbsp;<span class="ident" id="6892039">Unmarshal</span><span class="op" id="6892048">(</span><span class="ident" id="6892049">codeJSON</span><span class="op" id="6892057">,</span>&nbsp;<span class="op" id="6892059">&amp;</span><span class="ident" id="6892060">codeStruct</span><span class="op" id="6892070">)</span><span class="op" id="6892071">;</span>&nbsp;<span class="ident" id="6892073">err</span>&nbsp;<span class="op" id="6892077">!=</span>&nbsp;<span class="builtintype" id="6892080">nil</span>&nbsp;<span class="op" id="6892084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6892088">panic</span><span class="op" id="6892093">(</span><span class="string" id="6892094">&#34;unmarshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="6892118">+</span>&nbsp;<span class="ident" id="6892120">err</span><span class="op" id="6892123">.</span><span class="ident" id="6892124">Error</span><span class="op" id="6892129">(</span><span class="op" id="6892130">)</span><span class="op" id="6892131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892138">if</span>&nbsp;<span class="ident" id="6892141">data</span><span class="op" id="6892145">,</span>&nbsp;<span class="ident" id="6892147">err</span>&nbsp;<span class="op" id="6892151">=</span>&nbsp;<span class="ident" id="6892153">Marshal</span><span class="op" id="6892160">(</span><span class="op" id="6892161">&amp;</span><span class="ident" id="6892162">codeStruct</span><span class="op" id="6892172">)</span><span class="op" id="6892173">;</span>&nbsp;<span class="ident" id="6892175">err</span>&nbsp;<span class="op" id="6892179">!=</span>&nbsp;<span class="builtintype" id="6892182">nil</span>&nbsp;<span class="op" id="6892186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6892190">panic</span><span class="op" id="6892195">(</span><span class="string" id="6892196">&#34;marshal&nbsp;code.json:&nbsp;&#34;</span>&nbsp;<span class="op" id="6892218">+</span>&nbsp;<span class="ident" id="6892220">err</span><span class="op" id="6892223">.</span><span class="ident" id="6892224">Error</span><span class="op" id="6892229">(</span><span class="op" id="6892230">)</span><span class="op" id="6892231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892238">if</span>&nbsp;<span class="op" id="6892241">!</span><span class="ident" id="6892242">bytes</span><span class="op" id="6892247">.</span><span class="ident" id="6892248">Equal</span><span class="op" id="6892253">(</span><span class="ident" id="6892254">data</span><span class="op" id="6892258">,</span>&nbsp;<span class="ident" id="6892260">codeJSON</span><span class="op" id="6892268">)</span>&nbsp;<span class="op" id="6892270">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6892274">println</span><span class="op" id="6892281">(</span><span class="string" id="6892282">&#34;different&nbsp;lengths&#34;</span><span class="op" id="6892301">,</span>&nbsp;<span class="builtinfunc" id="6892303">len</span><span class="op" id="6892306">(</span><span class="ident" id="6892307">data</span><span class="op" id="6892311">)</span><span class="op" id="6892312">,</span>&nbsp;<span class="builtinfunc" id="6892314">len</span><span class="op" id="6892317">(</span><span class="ident" id="6892318">codeJSON</span><span class="op" id="6892326">)</span><span class="op" id="6892327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892331">for</span>&nbsp;<span class="ident" id="6892335">i</span>&nbsp;<span class="op" id="6892337">:=</span>&nbsp;<span class="num" id="6892340">0</span><span class="op" id="6892341">;</span>&nbsp;<span class="ident" id="6892343">i</span>&nbsp;<span class="op" id="6892345">&lt;</span>&nbsp;<span class="builtinfunc" id="6892347">len</span><span class="op" id="6892350">(</span><span class="ident" id="6892351">data</span><span class="op" id="6892355">)</span>&nbsp;<span class="op" id="6892357">&amp;&amp;</span>&nbsp;<span class="ident" id="6892360">i</span>&nbsp;<span class="op" id="6892362">&lt;</span>&nbsp;<span class="builtinfunc" id="6892364">len</span><span class="op" id="6892367">(</span><span class="ident" id="6892368">codeJSON</span><span class="op" id="6892376">)</span><span class="op" id="6892377">;</span>&nbsp;<span class="ident" id="6892379">i</span><span class="op" id="6892380">++</span>&nbsp;<span class="op" id="6892383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892388">if</span>&nbsp;<span class="ident" id="6892391">data</span><span class="op" id="6892395">[</span><span class="ident" id="6892396">i</span><span class="op" id="6892397">]</span>&nbsp;<span class="op" id="6892399">!=</span>&nbsp;<span class="ident" id="6892402">codeJSON</span><span class="op" id="6892410">[</span><span class="ident" id="6892411">i</span><span class="op" id="6892412">]</span>&nbsp;<span class="op" id="6892414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6892420">println</span><span class="op" id="6892427">(</span><span class="string" id="6892428">&#34;re-marshal:&nbsp;changed&nbsp;at&nbsp;byte&#34;</span><span class="op" id="6892457">,</span>&nbsp;<span class="ident" id="6892459">i</span><span class="op" id="6892460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6892466">println</span><span class="op" id="6892473">(</span><span class="string" id="6892474">&#34;orig:&nbsp;&#34;</span><span class="op" id="6892482">,</span>&nbsp;<span class="builtintype" id="6892484">string</span><span class="op" id="6892490">(</span><span class="ident" id="6892491">codeJSON</span><span class="op" id="6892499">[</span><span class="ident" id="6892500">i</span><span class="op" id="6892501">-</span><span class="num" id="6892502">10</span><span class="op" id="6892504">:</span><span class="ident" id="6892505">i</span><span class="op" id="6892506">+</span><span class="num" id="6892507">10</span><span class="op" id="6892509">]</span><span class="op" id="6892510">)</span><span class="op" id="6892511">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6892517">println</span><span class="op" id="6892524">(</span><span class="string" id="6892525">&#34;new:&nbsp;&#34;</span><span class="op" id="6892532">,</span>&nbsp;<span class="builtintype" id="6892534">string</span><span class="op" id="6892540">(</span><span class="ident" id="6892541">data</span><span class="op" id="6892545">[</span><span class="ident" id="6892546">i</span><span class="op" id="6892547">-</span><span class="num" id="6892548">10</span><span class="op" id="6892550">:</span><span class="ident" id="6892551">i</span><span class="op" id="6892552">+</span><span class="num" id="6892553">10</span><span class="op" id="6892555">]</span><span class="op" id="6892556">)</span><span class="op" id="6892557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892563">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6892580">panic</span><span class="op" id="6892585">(</span><span class="string" id="6892586">&#34;re-marshal&nbsp;code.json:&nbsp;different&nbsp;result&#34;</span><span class="op" id="6892626">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892629">}</span><br>
<span class="lineno"></span><span class="op" id="6892631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6892634">func</span>&nbsp;<span class="ident" id="6892639">BenchmarkCodeEncoder</span><span class="op" id="6892659">(</span><span class="ident" id="6892660">b</span>&nbsp;<span class="op" id="6892662">*</span><span class="ident" id="6892663">testing</span><span class="op" id="6892670">.</span><span class="ident" id="6892671">B</span><span class="op" id="6892672">)</span>&nbsp;<span class="op" id="6892674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892677">if</span>&nbsp;<span class="ident" id="6892680">codeJSON</span>&nbsp;<span class="op" id="6892689">==</span>&nbsp;<span class="builtintype" id="6892692">nil</span>&nbsp;<span class="op" id="6892696">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892700">b</span><span class="op" id="6892701">.</span><span class="ident" id="6892702">StopTimer</span><span class="op" id="6892711">(</span><span class="op" id="6892712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892716">codeInit</span><span class="op" id="6892724">(</span><span class="op" id="6892725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892729">b</span><span class="op" id="6892730">.</span><span class="ident" id="6892731">StartTimer</span><span class="op" id="6892741">(</span><span class="op" id="6892742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892748">enc</span>&nbsp;<span class="op" id="6892752">:=</span>&nbsp;<span class="ident" id="6892755">NewEncoder</span><span class="op" id="6892765">(</span><span class="ident" id="6892766">ioutil</span><span class="op" id="6892772">.</span><span class="ident" id="6892773">Discard</span><span class="op" id="6892780">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892783">for</span>&nbsp;<span class="ident" id="6892787">i</span>&nbsp;<span class="op" id="6892789">:=</span>&nbsp;<span class="num" id="6892792">0</span><span class="op" id="6892793">;</span>&nbsp;<span class="ident" id="6892795">i</span>&nbsp;<span class="op" id="6892797">&lt;</span>&nbsp;<span class="ident" id="6892799">b</span><span class="op" id="6892800">.</span><span class="ident" id="6892801">N</span><span class="op" id="6892802">;</span>&nbsp;<span class="ident" id="6892804">i</span><span class="op" id="6892805">++</span>&nbsp;<span class="op" id="6892808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892812">if</span>&nbsp;<span class="ident" id="6892815">err</span>&nbsp;<span class="op" id="6892819">:=</span>&nbsp;<span class="ident" id="6892822">enc</span><span class="op" id="6892825">.</span><span class="ident" id="6892826">Encode</span><span class="op" id="6892832">(</span><span class="op" id="6892833">&amp;</span><span class="ident" id="6892834">codeStruct</span><span class="op" id="6892844">)</span><span class="op" id="6892845">;</span>&nbsp;<span class="ident" id="6892847">err</span>&nbsp;<span class="op" id="6892851">!=</span>&nbsp;<span class="builtintype" id="6892854">nil</span>&nbsp;<span class="op" id="6892858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892863">b</span><span class="op" id="6892864">.</span><span class="ident" id="6892865">Fatal</span><span class="op" id="6892870">(</span><span class="string" id="6892871">&#34;Encode:&#34;</span><span class="op" id="6892880">,</span>&nbsp;<span class="ident" id="6892882">err</span><span class="op" id="6892885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6892892">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892895">b</span><span class="op" id="6892896">.</span><span class="ident" id="6892897">SetBytes</span><span class="op" id="6892905">(</span><span class="ident" id="6892906">int64</span><span class="op" id="6892911">(</span><span class="builtinfunc" id="6892912">len</span><span class="op" id="6892915">(</span><span class="ident" id="6892916">codeJSON</span><span class="op" id="6892924">)</span><span class="op" id="6892925">)</span><span class="op" id="6892926">)</span><br>
<span class="lineno"></span><span class="op" id="6892928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6892931">func</span>&nbsp;<span class="ident" id="6892936">BenchmarkCodeMarshal</span><span class="op" id="6892956">(</span><span class="ident" id="6892957">b</span>&nbsp;<span class="op" id="6892959">*</span><span class="ident" id="6892960">testing</span><span class="op" id="6892967">.</span><span class="ident" id="6892968">B</span><span class="op" id="6892969">)</span>&nbsp;<span class="op" id="6892971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6892974">if</span>&nbsp;<span class="ident" id="6892977">codeJSON</span>&nbsp;<span class="op" id="6892986">==</span>&nbsp;<span class="builtintype" id="6892989">nil</span>&nbsp;<span class="op" id="6892993">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6892997">b</span><span class="op" id="6892998">.</span><span class="ident" id="6892999">StopTimer</span><span class="op" id="6893008">(</span><span class="op" id="6893009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893013">codeInit</span><span class="op" id="6893021">(</span><span class="op" id="6893022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893026">b</span><span class="op" id="6893027">.</span><span class="ident" id="6893028">StartTimer</span><span class="op" id="6893038">(</span><span class="op" id="6893039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893045">for</span>&nbsp;<span class="ident" id="6893049">i</span>&nbsp;<span class="op" id="6893051">:=</span>&nbsp;<span class="num" id="6893054">0</span><span class="op" id="6893055">;</span>&nbsp;<span class="ident" id="6893057">i</span>&nbsp;<span class="op" id="6893059">&lt;</span>&nbsp;<span class="ident" id="6893061">b</span><span class="op" id="6893062">.</span><span class="ident" id="6893063">N</span><span class="op" id="6893064">;</span>&nbsp;<span class="ident" id="6893066">i</span><span class="op" id="6893067">++</span>&nbsp;<span class="op" id="6893070">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893074">if</span>&nbsp;<span class="ident" id="6893077">_</span><span class="op" id="6893078">,</span>&nbsp;<span class="ident" id="6893080">err</span>&nbsp;<span class="op" id="6893084">:=</span>&nbsp;<span class="ident" id="6893087">Marshal</span><span class="op" id="6893094">(</span><span class="op" id="6893095">&amp;</span><span class="ident" id="6893096">codeStruct</span><span class="op" id="6893106">)</span><span class="op" id="6893107">;</span>&nbsp;<span class="ident" id="6893109">err</span>&nbsp;<span class="op" id="6893113">!=</span>&nbsp;<span class="builtintype" id="6893116">nil</span>&nbsp;<span class="op" id="6893120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893125">b</span><span class="op" id="6893126">.</span><span class="ident" id="6893127">Fatal</span><span class="op" id="6893132">(</span><span class="string" id="6893133">&#34;Marshal:&#34;</span><span class="op" id="6893143">,</span>&nbsp;<span class="ident" id="6893145">err</span><span class="op" id="6893148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893158">b</span><span class="op" id="6893159">.</span><span class="ident" id="6893160">SetBytes</span><span class="op" id="6893168">(</span><span class="ident" id="6893169">int64</span><span class="op" id="6893174">(</span><span class="builtinfunc" id="6893175">len</span><span class="op" id="6893178">(</span><span class="ident" id="6893179">codeJSON</span><span class="op" id="6893187">)</span><span class="op" id="6893188">)</span><span class="op" id="6893189">)</span><br>
<span class="lineno">105</span><span class="op" id="6893191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6893194">func</span>&nbsp;<span class="ident" id="6893199">BenchmarkCodeDecoder</span><span class="op" id="6893219">(</span><span class="ident" id="6893220">b</span>&nbsp;<span class="op" id="6893222">*</span><span class="ident" id="6893223">testing</span><span class="op" id="6893230">.</span><span class="ident" id="6893231">B</span><span class="op" id="6893232">)</span>&nbsp;<span class="op" id="6893234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893237">if</span>&nbsp;<span class="ident" id="6893240">codeJSON</span>&nbsp;<span class="op" id="6893249">==</span>&nbsp;<span class="builtintype" id="6893252">nil</span>&nbsp;<span class="op" id="6893256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893260">b</span><span class="op" id="6893261">.</span><span class="ident" id="6893262">StopTimer</span><span class="op" id="6893271">(</span><span class="op" id="6893272">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893276">codeInit</span><span class="op" id="6893284">(</span><span class="op" id="6893285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893289">b</span><span class="op" id="6893290">.</span><span class="ident" id="6893291">StartTimer</span><span class="op" id="6893301">(</span><span class="op" id="6893302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893308">var</span>&nbsp;<span class="ident" id="6893312">buf</span>&nbsp;<span class="ident" id="6893316">bytes</span><span class="op" id="6893321">.</span><span class="ident" id="6893322">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893330">dec</span>&nbsp;<span class="op" id="6893334">:=</span>&nbsp;<span class="ident" id="6893337">NewDecoder</span><span class="op" id="6893347">(</span><span class="op" id="6893348">&amp;</span><span class="ident" id="6893349">buf</span><span class="op" id="6893352">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893355">var</span>&nbsp;<span class="ident" id="6893359">r</span>&nbsp;<span class="ident" id="6893361">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893375">for</span>&nbsp;<span class="ident" id="6893379">i</span>&nbsp;<span class="op" id="6893381">:=</span>&nbsp;<span class="num" id="6893384">0</span><span class="op" id="6893385">;</span>&nbsp;<span class="ident" id="6893387">i</span>&nbsp;<span class="op" id="6893389">&lt;</span>&nbsp;<span class="ident" id="6893391">b</span><span class="op" id="6893392">.</span><span class="ident" id="6893393">N</span><span class="op" id="6893394">;</span>&nbsp;<span class="ident" id="6893396">i</span><span class="op" id="6893397">++</span>&nbsp;<span class="op" id="6893400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893404">buf</span><span class="op" id="6893407">.</span><span class="ident" id="6893408">Write</span><span class="op" id="6893413">(</span><span class="ident" id="6893414">codeJSON</span><span class="op" id="6893422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6893426">//&nbsp;hide&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893440">buf</span><span class="op" id="6893443">.</span><span class="ident" id="6893444">WriteByte</span><span class="op" id="6893453">(</span><span class="string" id="6893454">&#39;\n&#39;</span><span class="op" id="6893458">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893462">buf</span><span class="op" id="6893465">.</span><span class="ident" id="6893466">WriteByte</span><span class="op" id="6893475">(</span><span class="string" id="6893476">&#39;\n&#39;</span><span class="op" id="6893480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893484">buf</span><span class="op" id="6893487">.</span><span class="ident" id="6893488">WriteByte</span><span class="op" id="6893497">(</span><span class="string" id="6893498">&#39;\n&#39;</span><span class="op" id="6893502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893506">if</span>&nbsp;<span class="ident" id="6893509">err</span>&nbsp;<span class="op" id="6893513">:=</span>&nbsp;<span class="ident" id="6893516">dec</span><span class="op" id="6893519">.</span><span class="ident" id="6893520">Decode</span><span class="op" id="6893526">(</span><span class="op" id="6893527">&amp;</span><span class="ident" id="6893528">r</span><span class="op" id="6893529">)</span><span class="op" id="6893530">;</span>&nbsp;<span class="ident" id="6893532">err</span>&nbsp;<span class="op" id="6893536">!=</span>&nbsp;<span class="builtintype" id="6893539">nil</span>&nbsp;<span class="op" id="6893543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893548">b</span><span class="op" id="6893549">.</span><span class="ident" id="6893550">Fatal</span><span class="op" id="6893555">(</span><span class="string" id="6893556">&#34;Decode:&#34;</span><span class="op" id="6893565">,</span>&nbsp;<span class="ident" id="6893567">err</span><span class="op" id="6893570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893574">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893580">b</span><span class="op" id="6893581">.</span><span class="ident" id="6893582">SetBytes</span><span class="op" id="6893590">(</span><span class="ident" id="6893591">int64</span><span class="op" id="6893596">(</span><span class="builtinfunc" id="6893597">len</span><span class="op" id="6893600">(</span><span class="ident" id="6893601">codeJSON</span><span class="op" id="6893609">)</span><span class="op" id="6893610">)</span><span class="op" id="6893611">)</span><br>
<span class="lineno"></span><span class="op" id="6893613">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6893616">func</span>&nbsp;<span class="ident" id="6893621">BenchmarkCodeUnmarshal</span><span class="op" id="6893643">(</span><span class="ident" id="6893644">b</span>&nbsp;<span class="op" id="6893646">*</span><span class="ident" id="6893647">testing</span><span class="op" id="6893654">.</span><span class="ident" id="6893655">B</span><span class="op" id="6893656">)</span>&nbsp;<span class="op" id="6893658">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893661">if</span>&nbsp;<span class="ident" id="6893664">codeJSON</span>&nbsp;<span class="op" id="6893673">==</span>&nbsp;<span class="builtintype" id="6893676">nil</span>&nbsp;<span class="op" id="6893680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893684">b</span><span class="op" id="6893685">.</span><span class="ident" id="6893686">StopTimer</span><span class="op" id="6893695">(</span><span class="op" id="6893696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893700">codeInit</span><span class="op" id="6893708">(</span><span class="op" id="6893709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893713">b</span><span class="op" id="6893714">.</span><span class="ident" id="6893715">StartTimer</span><span class="op" id="6893725">(</span><span class="op" id="6893726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893729">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893732">for</span>&nbsp;<span class="ident" id="6893736">i</span>&nbsp;<span class="op" id="6893738">:=</span>&nbsp;<span class="num" id="6893741">0</span><span class="op" id="6893742">;</span>&nbsp;<span class="ident" id="6893744">i</span>&nbsp;<span class="op" id="6893746">&lt;</span>&nbsp;<span class="ident" id="6893748">b</span><span class="op" id="6893749">.</span><span class="ident" id="6893750">N</span><span class="op" id="6893751">;</span>&nbsp;<span class="ident" id="6893753">i</span><span class="op" id="6893754">++</span>&nbsp;<span class="op" id="6893757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893761">var</span>&nbsp;<span class="ident" id="6893765">r</span>&nbsp;<span class="ident" id="6893767">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893782">if</span>&nbsp;<span class="ident" id="6893785">err</span>&nbsp;<span class="op" id="6893789">:=</span>&nbsp;<span class="ident" id="6893792">Unmarshal</span><span class="op" id="6893801">(</span><span class="ident" id="6893802">codeJSON</span><span class="op" id="6893810">,</span>&nbsp;<span class="op" id="6893812">&amp;</span><span class="ident" id="6893813">r</span><span class="op" id="6893814">)</span><span class="op" id="6893815">;</span>&nbsp;<span class="ident" id="6893817">err</span>&nbsp;<span class="op" id="6893821">!=</span>&nbsp;<span class="builtintype" id="6893824">nil</span>&nbsp;<span class="op" id="6893828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893833">b</span><span class="op" id="6893834">.</span><span class="ident" id="6893835">Fatal</span><span class="op" id="6893840">(</span><span class="string" id="6893841">&#34;Unmmarshal:&#34;</span><span class="op" id="6893854">,</span>&nbsp;<span class="ident" id="6893856">err</span><span class="op" id="6893859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893863">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6893866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893869">b</span><span class="op" id="6893870">.</span><span class="ident" id="6893871">SetBytes</span><span class="op" id="6893879">(</span><span class="ident" id="6893880">int64</span><span class="op" id="6893885">(</span><span class="builtinfunc" id="6893886">len</span><span class="op" id="6893889">(</span><span class="ident" id="6893890">codeJSON</span><span class="op" id="6893898">)</span><span class="op" id="6893899">)</span><span class="op" id="6893900">)</span><br>
<span class="lineno"></span><span class="op" id="6893902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6893905">func</span>&nbsp;<span class="ident" id="6893910">BenchmarkCodeUnmarshalReuse</span><span class="op" id="6893937">(</span><span class="ident" id="6893938">b</span>&nbsp;<span class="op" id="6893940">*</span><span class="ident" id="6893941">testing</span><span class="op" id="6893948">.</span><span class="ident" id="6893949">B</span><span class="op" id="6893950">)</span>&nbsp;<span class="op" id="6893952">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6893955">if</span>&nbsp;<span class="ident" id="6893958">codeJSON</span>&nbsp;<span class="op" id="6893967">==</span>&nbsp;<span class="builtintype" id="6893970">nil</span>&nbsp;<span class="op" id="6893974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893978">b</span><span class="op" id="6893979">.</span><span class="ident" id="6893980">StopTimer</span><span class="op" id="6893989">(</span><span class="op" id="6893990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6893994">codeInit</span><span class="op" id="6894002">(</span><span class="op" id="6894003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894007">b</span><span class="op" id="6894008">.</span><span class="ident" id="6894009">StartTimer</span><span class="op" id="6894019">(</span><span class="op" id="6894020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894023">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894026">var</span>&nbsp;<span class="ident" id="6894030">r</span>&nbsp;<span class="ident" id="6894032">codeResponse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894046">for</span>&nbsp;<span class="ident" id="6894050">i</span>&nbsp;<span class="op" id="6894052">:=</span>&nbsp;<span class="num" id="6894055">0</span><span class="op" id="6894056">;</span>&nbsp;<span class="ident" id="6894058">i</span>&nbsp;<span class="op" id="6894060">&lt;</span>&nbsp;<span class="ident" id="6894062">b</span><span class="op" id="6894063">.</span><span class="ident" id="6894064">N</span><span class="op" id="6894065">;</span>&nbsp;<span class="ident" id="6894067">i</span><span class="op" id="6894068">++</span>&nbsp;<span class="op" id="6894071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894075">if</span>&nbsp;<span class="ident" id="6894078">err</span>&nbsp;<span class="op" id="6894082">:=</span>&nbsp;<span class="ident" id="6894085">Unmarshal</span><span class="op" id="6894094">(</span><span class="ident" id="6894095">codeJSON</span><span class="op" id="6894103">,</span>&nbsp;<span class="op" id="6894105">&amp;</span><span class="ident" id="6894106">r</span><span class="op" id="6894107">)</span><span class="op" id="6894108">;</span>&nbsp;<span class="ident" id="6894110">err</span>&nbsp;<span class="op" id="6894114">!=</span>&nbsp;<span class="builtintype" id="6894117">nil</span>&nbsp;<span class="op" id="6894121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894126">b</span><span class="op" id="6894127">.</span><span class="ident" id="6894128">Fatal</span><span class="op" id="6894133">(</span><span class="string" id="6894134">&#34;Unmmarshal:&#34;</span><span class="op" id="6894147">,</span>&nbsp;<span class="ident" id="6894149">err</span><span class="op" id="6894152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894156">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894159">}</span><br>
<span class="lineno"></span><span class="op" id="6894161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6894164">func</span>&nbsp;<span class="ident" id="6894169">BenchmarkUnmarshalString</span><span class="op" id="6894193">(</span><span class="ident" id="6894194">b</span>&nbsp;<span class="op" id="6894196">*</span><span class="ident" id="6894197">testing</span><span class="op" id="6894204">.</span><span class="ident" id="6894205">B</span><span class="op" id="6894206">)</span>&nbsp;<span class="op" id="6894208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894211">data</span>&nbsp;<span class="op" id="6894216">:=</span>&nbsp;<span class="op" id="6894219">[</span><span class="op" id="6894220">]</span><span class="builtintype" id="6894221">byte</span><span class="op" id="6894225">(</span><span class="string" id="6894226">`&#34;hello,&nbsp;world&#34;`</span><span class="op" id="6894242">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894245">var</span>&nbsp;<span class="ident" id="6894249">s</span>&nbsp;<span class="builtintype" id="6894251">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894260">for</span>&nbsp;<span class="ident" id="6894264">i</span>&nbsp;<span class="op" id="6894266">:=</span>&nbsp;<span class="num" id="6894269">0</span><span class="op" id="6894270">;</span>&nbsp;<span class="ident" id="6894272">i</span>&nbsp;<span class="op" id="6894274">&lt;</span>&nbsp;<span class="ident" id="6894276">b</span><span class="op" id="6894277">.</span><span class="ident" id="6894278">N</span><span class="op" id="6894279">;</span>&nbsp;<span class="ident" id="6894281">i</span><span class="op" id="6894282">++</span>&nbsp;<span class="op" id="6894285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894289">if</span>&nbsp;<span class="ident" id="6894292">err</span>&nbsp;<span class="op" id="6894296">:=</span>&nbsp;<span class="ident" id="6894299">Unmarshal</span><span class="op" id="6894308">(</span><span class="ident" id="6894309">data</span><span class="op" id="6894313">,</span>&nbsp;<span class="op" id="6894315">&amp;</span><span class="ident" id="6894316">s</span><span class="op" id="6894317">)</span><span class="op" id="6894318">;</span>&nbsp;<span class="ident" id="6894320">err</span>&nbsp;<span class="op" id="6894324">!=</span>&nbsp;<span class="builtintype" id="6894327">nil</span>&nbsp;<span class="op" id="6894331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894336">b</span><span class="op" id="6894337">.</span><span class="ident" id="6894338">Fatal</span><span class="op" id="6894343">(</span><span class="string" id="6894344">&#34;Unmarshal:&#34;</span><span class="op" id="6894356">,</span>&nbsp;<span class="ident" id="6894358">err</span><span class="op" id="6894361">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894368">}</span><br>
<span class="lineno"></span><span class="op" id="6894370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6894373">func</span>&nbsp;<span class="ident" id="6894378">BenchmarkUnmarshalFloat64</span><span class="op" id="6894403">(</span><span class="ident" id="6894404">b</span>&nbsp;<span class="op" id="6894406">*</span><span class="ident" id="6894407">testing</span><span class="op" id="6894414">.</span><span class="ident" id="6894415">B</span><span class="op" id="6894416">)</span>&nbsp;<span class="op" id="6894418">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894421">var</span>&nbsp;<span class="ident" id="6894425">f</span>&nbsp;<span class="builtintype" id="6894427">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894436">data</span>&nbsp;<span class="op" id="6894441">:=</span>&nbsp;<span class="op" id="6894444">[</span><span class="op" id="6894445">]</span><span class="builtintype" id="6894446">byte</span><span class="op" id="6894450">(</span><span class="string" id="6894451">`3.14`</span><span class="op" id="6894457">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894461">for</span>&nbsp;<span class="ident" id="6894465">i</span>&nbsp;<span class="op" id="6894467">:=</span>&nbsp;<span class="num" id="6894470">0</span><span class="op" id="6894471">;</span>&nbsp;<span class="ident" id="6894473">i</span>&nbsp;<span class="op" id="6894475">&lt;</span>&nbsp;<span class="ident" id="6894477">b</span><span class="op" id="6894478">.</span><span class="ident" id="6894479">N</span><span class="op" id="6894480">;</span>&nbsp;<span class="ident" id="6894482">i</span><span class="op" id="6894483">++</span>&nbsp;<span class="op" id="6894486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894490">if</span>&nbsp;<span class="ident" id="6894493">err</span>&nbsp;<span class="op" id="6894497">:=</span>&nbsp;<span class="ident" id="6894500">Unmarshal</span><span class="op" id="6894509">(</span><span class="ident" id="6894510">data</span><span class="op" id="6894514">,</span>&nbsp;<span class="op" id="6894516">&amp;</span><span class="ident" id="6894517">f</span><span class="op" id="6894518">)</span><span class="op" id="6894519">;</span>&nbsp;<span class="ident" id="6894521">err</span>&nbsp;<span class="op" id="6894525">!=</span>&nbsp;<span class="builtintype" id="6894528">nil</span>&nbsp;<span class="op" id="6894532">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894537">b</span><span class="op" id="6894538">.</span><span class="ident" id="6894539">Fatal</span><span class="op" id="6894544">(</span><span class="string" id="6894545">&#34;Unmarshal:&#34;</span><span class="op" id="6894557">,</span>&nbsp;<span class="ident" id="6894559">err</span><span class="op" id="6894562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894569">}</span><br>
<span class="lineno"></span><span class="op" id="6894571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="6894574">func</span>&nbsp;<span class="ident" id="6894579">BenchmarkUnmarshalInt64</span><span class="op" id="6894602">(</span><span class="ident" id="6894603">b</span>&nbsp;<span class="op" id="6894605">*</span><span class="ident" id="6894606">testing</span><span class="op" id="6894613">.</span><span class="ident" id="6894614">B</span><span class="op" id="6894615">)</span>&nbsp;<span class="op" id="6894617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894620">var</span>&nbsp;<span class="ident" id="6894624">x</span>&nbsp;<span class="ident" id="6894626">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894633">data</span>&nbsp;<span class="op" id="6894638">:=</span>&nbsp;<span class="op" id="6894641">[</span><span class="op" id="6894642">]</span><span class="builtintype" id="6894643">byte</span><span class="op" id="6894647">(</span><span class="string" id="6894648">`3`</span><span class="op" id="6894651">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894655">for</span>&nbsp;<span class="ident" id="6894659">i</span>&nbsp;<span class="op" id="6894661">:=</span>&nbsp;<span class="num" id="6894664">0</span><span class="op" id="6894665">;</span>&nbsp;<span class="ident" id="6894667">i</span>&nbsp;<span class="op" id="6894669">&lt;</span>&nbsp;<span class="ident" id="6894671">b</span><span class="op" id="6894672">.</span><span class="ident" id="6894673">N</span><span class="op" id="6894674">;</span>&nbsp;<span class="ident" id="6894676">i</span><span class="op" id="6894677">++</span>&nbsp;<span class="op" id="6894680">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6894684">if</span>&nbsp;<span class="ident" id="6894687">err</span>&nbsp;<span class="op" id="6894691">:=</span>&nbsp;<span class="ident" id="6894694">Unmarshal</span><span class="op" id="6894703">(</span><span class="ident" id="6894704">data</span><span class="op" id="6894708">,</span>&nbsp;<span class="op" id="6894710">&amp;</span><span class="ident" id="6894711">x</span><span class="op" id="6894712">)</span><span class="op" id="6894713">;</span>&nbsp;<span class="ident" id="6894715">err</span>&nbsp;<span class="op" id="6894719">!=</span>&nbsp;<span class="builtintype" id="6894722">nil</span>&nbsp;<span class="op" id="6894726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6894731">b</span><span class="op" id="6894732">.</span><span class="ident" id="6894733">Fatal</span><span class="op" id="6894738">(</span><span class="string" id="6894739">&#34;Unmarshal:&#34;</span><span class="op" id="6894751">,</span>&nbsp;<span class="ident" id="6894753">err</span><span class="op" id="6894756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6894763">}</span><br>
<span class="lineno"></span><span class="op" id="6894765">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
