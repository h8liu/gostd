<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/rand</h2>
<ul>
<li><a href="/gostd/math/rand/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/rand/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/rand/normal.go.html">normal.go</a></li>
<li><a href="/gostd/math/rand/rand.go.html">rand.go</a></li>
<li><a href="/gostd/math/rand/rand_test.go.html" class="current">rand_test.go</a></li>
<li><a href="/gostd/math/rand/regress_test.go.html">regress_test.go</a></li>
<li><a href="/gostd/math/rand/rng.go.html">rng.go</a></li>
<li><a href="/gostd/math/rand/zipf.go.html">zipf.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7200201">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7200256">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7200310">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7200361">package</span>&nbsp;<span class="ident" id="7200369">rand</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7200375">import</span>&nbsp;<span class="op" id="7200382">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7200385">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7200395">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7200402">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7200410">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7200420">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7200423">const</span>&nbsp;<span class="op" id="7200429">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200432">numTestSamples</span>&nbsp;<span class="op" id="7200447">=</span>&nbsp;<span class="num" id="7200449">10000</span><br>
<span class="lineno"></span><span class="op" id="7200455">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7200458">type</span>&nbsp;<span class="ident" id="7200463">statsResults</span>&nbsp;<span class="keyword" id="7200476">struct</span>&nbsp;<span class="op" id="7200483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200486">mean</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7200498">float64</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200507">stddev</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7200519">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200528">closeEnough</span>&nbsp;<span class="builtintype" id="7200540">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200549">maxError</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7200561">float64</span><br>
<span class="lineno"></span><span class="op" id="7200569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7200572">func</span>&nbsp;<span class="ident" id="7200577">max</span><span class="op" id="7200580">(</span><span class="ident" id="7200581">a</span><span class="op" id="7200582">,</span>&nbsp;<span class="ident" id="7200584">b</span>&nbsp;<span class="builtintype" id="7200586">float64</span><span class="op" id="7200593">)</span>&nbsp;<span class="builtintype" id="7200595">float64</span>&nbsp;<span class="op" id="7200603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200606">if</span>&nbsp;<span class="ident" id="7200609">a</span>&nbsp;<span class="op" id="7200611">&gt;</span>&nbsp;<span class="ident" id="7200613">b</span>&nbsp;<span class="op" id="7200615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200619">return</span>&nbsp;<span class="ident" id="7200626">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200632">return</span>&nbsp;<span class="ident" id="7200639">b</span><br>
<span class="lineno">30</span><span class="op" id="7200641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7200644">func</span>&nbsp;<span class="ident" id="7200649">nearEqual</span><span class="op" id="7200658">(</span><span class="ident" id="7200659">a</span><span class="op" id="7200660">,</span>&nbsp;<span class="ident" id="7200662">b</span><span class="op" id="7200663">,</span>&nbsp;<span class="ident" id="7200665">closeEnough</span><span class="op" id="7200676">,</span>&nbsp;<span class="ident" id="7200678">maxError</span>&nbsp;<span class="builtintype" id="7200687">float64</span><span class="op" id="7200694">)</span>&nbsp;<span class="builtintype" id="7200696">bool</span>&nbsp;<span class="op" id="7200701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7200704">absDiff</span>&nbsp;<span class="op" id="7200712">:=</span>&nbsp;<span class="ident" id="7200715">math</span><span class="op" id="7200719">.</span><span class="ident" id="7200720">Abs</span><span class="op" id="7200723">(</span><span class="ident" id="7200724">a</span>&nbsp;<span class="op" id="7200726">-</span>&nbsp;<span class="ident" id="7200728">b</span><span class="op" id="7200729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200732">if</span>&nbsp;<span class="ident" id="7200735">absDiff</span>&nbsp;<span class="op" id="7200743">&lt;</span>&nbsp;<span class="ident" id="7200745">closeEnough</span>&nbsp;<span class="op" id="7200757">{</span>&nbsp;<span class="comment" id="7200759">//&nbsp;Necessary&nbsp;when&nbsp;one&nbsp;value&nbsp;is&nbsp;zero&nbsp;and&nbsp;one&nbsp;value&nbsp;is&nbsp;close&nbsp;to&nbsp;zero.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200829">return</span>&nbsp;<span class="builtintype" id="7200836">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7200842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7200845">return</span>&nbsp;<span class="ident" id="7200852">absDiff</span><span class="op" id="7200859">/</span><span class="ident" id="7200860">max</span><span class="op" id="7200863">(</span><span class="ident" id="7200864">math</span><span class="op" id="7200868">.</span><span class="ident" id="7200869">Abs</span><span class="op" id="7200872">(</span><span class="ident" id="7200873">a</span><span class="op" id="7200874">)</span><span class="op" id="7200875">,</span>&nbsp;<span class="ident" id="7200877">math</span><span class="op" id="7200881">.</span><span class="ident" id="7200882">Abs</span><span class="op" id="7200885">(</span><span class="ident" id="7200886">b</span><span class="op" id="7200887">)</span><span class="op" id="7200888">)</span>&nbsp;<span class="op" id="7200890">&lt;</span>&nbsp;<span class="ident" id="7200892">maxError</span><br>
<span class="lineno"></span><span class="op" id="7200901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7200904">var</span>&nbsp;<span class="ident" id="7200908">testSeeds</span>&nbsp;<span class="op" id="7200918">=</span>&nbsp;<span class="op" id="7200920">[</span><span class="op" id="7200921">]</span><span class="ident" id="7200922">int64</span><span class="op" id="7200927">{</span><span class="num" id="7200928">1</span><span class="op" id="7200929">,</span>&nbsp;<span class="num" id="7200931">1754801282</span><span class="op" id="7200941">,</span>&nbsp;<span class="num" id="7200943">1698661970</span><span class="op" id="7200953">,</span>&nbsp;<span class="num" id="7200955">1550503961</span><span class="op" id="7200965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7200968">//&nbsp;checkSimilarDistribution&nbsp;returns&nbsp;success&nbsp;if&nbsp;the&nbsp;mean&nbsp;and&nbsp;stddev&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7201042">//&nbsp;two&nbsp;statsResults&nbsp;are&nbsp;similar.</span><br>
<span class="lineno"></span><span class="keyword" id="7201075">func</span>&nbsp;<span class="op" id="7201080">(</span><span class="ident" id="7201081">this</span>&nbsp;<span class="op" id="7201086">*</span><span class="ident" id="7201087">statsResults</span><span class="op" id="7201099">)</span>&nbsp;<span class="ident" id="7201101">checkSimilarDistribution</span><span class="op" id="7201125">(</span><span class="ident" id="7201126">expected</span>&nbsp;<span class="op" id="7201135">*</span><span class="ident" id="7201136">statsResults</span><span class="op" id="7201148">)</span>&nbsp;<span class="builtintype" id="7201150">error</span>&nbsp;<span class="op" id="7201156">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201159">if</span>&nbsp;<span class="op" id="7201162">!</span><span class="ident" id="7201163">nearEqual</span><span class="op" id="7201172">(</span><span class="ident" id="7201173">this</span><span class="op" id="7201177">.</span><span class="ident" id="7201178">mean</span><span class="op" id="7201182">,</span>&nbsp;<span class="ident" id="7201184">expected</span><span class="op" id="7201192">.</span><span class="ident" id="7201193">mean</span><span class="op" id="7201197">,</span>&nbsp;<span class="ident" id="7201199">expected</span><span class="op" id="7201207">.</span><span class="ident" id="7201208">closeEnough</span><span class="op" id="7201219">,</span>&nbsp;<span class="ident" id="7201221">expected</span><span class="op" id="7201229">.</span><span class="ident" id="7201230">maxError</span><span class="op" id="7201238">)</span>&nbsp;<span class="op" id="7201240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201244">s</span>&nbsp;<span class="op" id="7201246">:=</span>&nbsp;<span class="ident" id="7201249">fmt</span><span class="op" id="7201252">.</span><span class="ident" id="7201253">Sprintf</span><span class="op" id="7201260">(</span><span class="string" id="7201261">&#34;mean&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7201299">,</span>&nbsp;<span class="ident" id="7201301">this</span><span class="op" id="7201305">.</span><span class="ident" id="7201306">mean</span><span class="op" id="7201310">,</span>&nbsp;<span class="ident" id="7201312">expected</span><span class="op" id="7201320">.</span><span class="ident" id="7201321">mean</span><span class="op" id="7201325">,</span>&nbsp;<span class="ident" id="7201327">expected</span><span class="op" id="7201335">.</span><span class="ident" id="7201336">closeEnough</span><span class="op" id="7201347">,</span>&nbsp;<span class="ident" id="7201349">expected</span><span class="op" id="7201357">.</span><span class="ident" id="7201358">maxError</span><span class="op" id="7201366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201370">fmt</span><span class="op" id="7201373">.</span><span class="ident" id="7201374">Println</span><span class="op" id="7201381">(</span><span class="ident" id="7201382">s</span><span class="op" id="7201383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201387">return</span>&nbsp;<span class="ident" id="7201394">errors</span><span class="op" id="7201400">.</span><span class="ident" id="7201401">New</span><span class="op" id="7201404">(</span><span class="ident" id="7201405">s</span><span class="op" id="7201406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7201409">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201412">if</span>&nbsp;<span class="op" id="7201415">!</span><span class="ident" id="7201416">nearEqual</span><span class="op" id="7201425">(</span><span class="ident" id="7201426">this</span><span class="op" id="7201430">.</span><span class="ident" id="7201431">stddev</span><span class="op" id="7201437">,</span>&nbsp;<span class="ident" id="7201439">expected</span><span class="op" id="7201447">.</span><span class="ident" id="7201448">stddev</span><span class="op" id="7201454">,</span>&nbsp;<span class="num" id="7201456">0</span><span class="op" id="7201457">,</span>&nbsp;<span class="ident" id="7201459">expected</span><span class="op" id="7201467">.</span><span class="ident" id="7201468">maxError</span><span class="op" id="7201476">)</span>&nbsp;<span class="op" id="7201478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201482">s</span>&nbsp;<span class="op" id="7201484">:=</span>&nbsp;<span class="ident" id="7201487">fmt</span><span class="op" id="7201490">.</span><span class="ident" id="7201491">Sprintf</span><span class="op" id="7201498">(</span><span class="string" id="7201499">&#34;stddev&nbsp;%v&nbsp;!=&nbsp;%v&nbsp;(allowed&nbsp;error&nbsp;%v,&nbsp;%v)&#34;</span><span class="op" id="7201539">,</span>&nbsp;<span class="ident" id="7201541">this</span><span class="op" id="7201545">.</span><span class="ident" id="7201546">stddev</span><span class="op" id="7201552">,</span>&nbsp;<span class="ident" id="7201554">expected</span><span class="op" id="7201562">.</span><span class="ident" id="7201563">stddev</span><span class="op" id="7201569">,</span>&nbsp;<span class="ident" id="7201571">expected</span><span class="op" id="7201579">.</span><span class="ident" id="7201580">closeEnough</span><span class="op" id="7201591">,</span>&nbsp;<span class="ident" id="7201593">expected</span><span class="op" id="7201601">.</span><span class="ident" id="7201602">maxError</span><span class="op" id="7201610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201614">fmt</span><span class="op" id="7201617">.</span><span class="ident" id="7201618">Println</span><span class="op" id="7201625">(</span><span class="ident" id="7201626">s</span><span class="op" id="7201627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201631">return</span>&nbsp;<span class="ident" id="7201638">errors</span><span class="op" id="7201644">.</span><span class="ident" id="7201645">New</span><span class="op" id="7201648">(</span><span class="ident" id="7201649">s</span><span class="op" id="7201650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7201653">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201656">return</span>&nbsp;<span class="ident" id="7201663">nil</span><br>
<span class="lineno"></span><span class="op" id="7201667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7201670">func</span>&nbsp;<span class="ident" id="7201675">getStatsResults</span><span class="op" id="7201690">(</span><span class="ident" id="7201691">samples</span>&nbsp;<span class="op" id="7201699">[</span><span class="op" id="7201700">]</span><span class="builtintype" id="7201701">float64</span><span class="op" id="7201708">)</span>&nbsp;<span class="op" id="7201710">*</span><span class="ident" id="7201711">statsResults</span>&nbsp;<span class="op" id="7201724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201727">res</span>&nbsp;<span class="op" id="7201731">:=</span>&nbsp;<span class="builtinfunc" id="7201734">new</span><span class="op" id="7201737">(</span><span class="ident" id="7201738">statsResults</span><span class="op" id="7201750">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201753">var</span>&nbsp;<span class="ident" id="7201757">sum</span><span class="op" id="7201760">,</span>&nbsp;<span class="ident" id="7201762">squaresum</span>&nbsp;<span class="builtintype" id="7201772">float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201781">for</span>&nbsp;<span class="ident" id="7201785">_</span><span class="op" id="7201786">,</span>&nbsp;<span class="ident" id="7201788">s</span>&nbsp;<span class="op" id="7201790">:=</span>&nbsp;<span class="keyword" id="7201793">range</span>&nbsp;<span class="ident" id="7201799">samples</span>&nbsp;<span class="op" id="7201807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201811">sum</span>&nbsp;<span class="op" id="7201815">+=</span>&nbsp;<span class="ident" id="7201818">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201822">squaresum</span>&nbsp;<span class="op" id="7201832">+=</span>&nbsp;<span class="ident" id="7201835">s</span>&nbsp;<span class="op" id="7201837">*</span>&nbsp;<span class="ident" id="7201839">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7201842">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201845">res</span><span class="op" id="7201848">.</span><span class="ident" id="7201849">mean</span>&nbsp;<span class="op" id="7201854">=</span>&nbsp;<span class="ident" id="7201856">sum</span>&nbsp;<span class="op" id="7201860">/</span>&nbsp;<span class="builtintype" id="7201862">float64</span><span class="op" id="7201869">(</span><span class="builtinfunc" id="7201870">len</span><span class="op" id="7201873">(</span><span class="ident" id="7201874">samples</span><span class="op" id="7201881">)</span><span class="op" id="7201882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7201885">res</span><span class="op" id="7201888">.</span><span class="ident" id="7201889">stddev</span>&nbsp;<span class="op" id="7201896">=</span>&nbsp;<span class="ident" id="7201898">math</span><span class="op" id="7201902">.</span><span class="ident" id="7201903">Sqrt</span><span class="op" id="7201907">(</span><span class="ident" id="7201908">squaresum</span><span class="op" id="7201917">/</span><span class="builtintype" id="7201918">float64</span><span class="op" id="7201925">(</span><span class="builtinfunc" id="7201926">len</span><span class="op" id="7201929">(</span><span class="ident" id="7201930">samples</span><span class="op" id="7201937">)</span><span class="op" id="7201938">)</span>&nbsp;<span class="op" id="7201940">-</span>&nbsp;<span class="ident" id="7201942">res</span><span class="op" id="7201945">.</span><span class="ident" id="7201946">mean</span><span class="op" id="7201950">*</span><span class="ident" id="7201951">res</span><span class="op" id="7201954">.</span><span class="ident" id="7201955">mean</span><span class="op" id="7201959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7201962">return</span>&nbsp;<span class="ident" id="7201969">res</span><br>
<span class="lineno"></span><span class="op" id="7201973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="7201976">func</span>&nbsp;<span class="ident" id="7201981">checkSampleDistribution</span><span class="op" id="7202004">(</span><span class="ident" id="7202005">t</span>&nbsp;<span class="op" id="7202007">*</span><span class="ident" id="7202008">testing</span><span class="op" id="7202015">.</span><span class="ident" id="7202016">T</span><span class="op" id="7202017">,</span>&nbsp;<span class="ident" id="7202019">samples</span>&nbsp;<span class="op" id="7202027">[</span><span class="op" id="7202028">]</span><span class="builtintype" id="7202029">float64</span><span class="op" id="7202036">,</span>&nbsp;<span class="ident" id="7202038">expected</span>&nbsp;<span class="op" id="7202047">*</span><span class="ident" id="7202048">statsResults</span><span class="op" id="7202060">)</span>&nbsp;<span class="op" id="7202062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202065">actual</span>&nbsp;<span class="op" id="7202072">:=</span>&nbsp;<span class="ident" id="7202075">getStatsResults</span><span class="op" id="7202090">(</span><span class="ident" id="7202091">samples</span><span class="op" id="7202098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202101">err</span>&nbsp;<span class="op" id="7202105">:=</span>&nbsp;<span class="ident" id="7202108">actual</span><span class="op" id="7202114">.</span><span class="ident" id="7202115">checkSimilarDistribution</span><span class="op" id="7202139">(</span><span class="ident" id="7202140">expected</span><span class="op" id="7202148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202151">if</span>&nbsp;<span class="ident" id="7202154">err</span>&nbsp;<span class="op" id="7202158">!=</span>&nbsp;<span class="ident" id="7202161">nil</span>&nbsp;<span class="op" id="7202165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202169">t</span><span class="op" id="7202170">.</span><span class="ident" id="7202171">Errorf</span><span class="op" id="7202177">(</span><span class="ident" id="7202178">err</span><span class="op" id="7202181">.</span><span class="ident" id="7202182">Error</span><span class="op" id="7202187">(</span><span class="op" id="7202188">)</span><span class="op" id="7202189">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202192">}</span><br>
<span class="lineno"></span><span class="op" id="7202194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7202197">func</span>&nbsp;<span class="ident" id="7202202">checkSampleSliceDistributions</span><span class="op" id="7202231">(</span><span class="ident" id="7202232">t</span>&nbsp;<span class="op" id="7202234">*</span><span class="ident" id="7202235">testing</span><span class="op" id="7202242">.</span><span class="ident" id="7202243">T</span><span class="op" id="7202244">,</span>&nbsp;<span class="ident" id="7202246">samples</span>&nbsp;<span class="op" id="7202254">[</span><span class="op" id="7202255">]</span><span class="builtintype" id="7202256">float64</span><span class="op" id="7202263">,</span>&nbsp;<span class="ident" id="7202265">nslices</span>&nbsp;<span class="builtintype" id="7202273">int</span><span class="op" id="7202276">,</span>&nbsp;<span class="ident" id="7202278">expected</span>&nbsp;<span class="op" id="7202287">*</span><span class="ident" id="7202288">statsResults</span><span class="op" id="7202300">)</span>&nbsp;<span class="op" id="7202302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202305">chunk</span>&nbsp;<span class="op" id="7202311">:=</span>&nbsp;<span class="builtinfunc" id="7202314">len</span><span class="op" id="7202317">(</span><span class="ident" id="7202318">samples</span><span class="op" id="7202325">)</span>&nbsp;<span class="op" id="7202327">/</span>&nbsp;<span class="ident" id="7202329">nslices</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202338">for</span>&nbsp;<span class="ident" id="7202342">i</span>&nbsp;<span class="op" id="7202344">:=</span>&nbsp;<span class="num" id="7202347">0</span><span class="op" id="7202348">;</span>&nbsp;<span class="ident" id="7202350">i</span>&nbsp;<span class="op" id="7202352">&lt;</span>&nbsp;<span class="ident" id="7202354">nslices</span><span class="op" id="7202361">;</span>&nbsp;<span class="ident" id="7202363">i</span><span class="op" id="7202364">++</span>&nbsp;<span class="op" id="7202367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202371">low</span>&nbsp;<span class="op" id="7202375">:=</span>&nbsp;<span class="ident" id="7202378">i</span>&nbsp;<span class="op" id="7202380">*</span>&nbsp;<span class="ident" id="7202382">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202390">var</span>&nbsp;<span class="ident" id="7202394">high</span>&nbsp;<span class="builtintype" id="7202399">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202405">if</span>&nbsp;<span class="ident" id="7202408">i</span>&nbsp;<span class="op" id="7202410">==</span>&nbsp;<span class="ident" id="7202413">nslices</span><span class="op" id="7202420">-</span><span class="num" id="7202421">1</span>&nbsp;<span class="op" id="7202423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202428">high</span>&nbsp;<span class="op" id="7202433">=</span>&nbsp;<span class="builtinfunc" id="7202435">len</span><span class="op" id="7202438">(</span><span class="ident" id="7202439">samples</span><span class="op" id="7202446">)</span>&nbsp;<span class="op" id="7202448">-</span>&nbsp;<span class="num" id="7202450">1</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202454">}</span>&nbsp;<span class="keyword" id="7202456">else</span>&nbsp;<span class="op" id="7202461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202466">high</span>&nbsp;<span class="op" id="7202471">=</span>&nbsp;<span class="op" id="7202473">(</span><span class="ident" id="7202474">i</span>&nbsp;<span class="op" id="7202476">+</span>&nbsp;<span class="num" id="7202478">1</span><span class="op" id="7202479">)</span>&nbsp;<span class="op" id="7202481">*</span>&nbsp;<span class="ident" id="7202483">chunk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202495">checkSampleDistribution</span><span class="op" id="7202518">(</span><span class="ident" id="7202519">t</span><span class="op" id="7202520">,</span>&nbsp;<span class="ident" id="7202522">samples</span><span class="op" id="7202529">[</span><span class="ident" id="7202530">low</span><span class="op" id="7202533">:</span><span class="ident" id="7202534">high</span><span class="op" id="7202538">]</span><span class="op" id="7202539">,</span>&nbsp;<span class="ident" id="7202541">expected</span><span class="op" id="7202549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202552">}</span><br>
<span class="lineno">90</span><span class="op" id="7202554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7202557">//</span><br>
<span class="lineno"></span><span class="comment" id="7202560">//&nbsp;Normal&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7202589">//</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7202593">func</span>&nbsp;<span class="ident" id="7202598">generateNormalSamples</span><span class="op" id="7202619">(</span><span class="ident" id="7202620">nsamples</span>&nbsp;<span class="builtintype" id="7202629">int</span><span class="op" id="7202632">,</span>&nbsp;<span class="ident" id="7202634">mean</span><span class="op" id="7202638">,</span>&nbsp;<span class="ident" id="7202640">stddev</span>&nbsp;<span class="builtintype" id="7202647">float64</span><span class="op" id="7202654">,</span>&nbsp;<span class="ident" id="7202656">seed</span>&nbsp;<span class="ident" id="7202661">int64</span><span class="op" id="7202666">)</span>&nbsp;<span class="op" id="7202668">[</span><span class="op" id="7202669">]</span><span class="builtintype" id="7202670">float64</span>&nbsp;<span class="op" id="7202678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202681">r</span>&nbsp;<span class="op" id="7202683">:=</span>&nbsp;<span class="ident" id="7202686">New</span><span class="op" id="7202689">(</span><span class="ident" id="7202690">NewSource</span><span class="op" id="7202699">(</span><span class="ident" id="7202700">seed</span><span class="op" id="7202704">)</span><span class="op" id="7202705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202708">samples</span>&nbsp;<span class="op" id="7202716">:=</span>&nbsp;<span class="builtinfunc" id="7202719">make</span><span class="op" id="7202723">(</span><span class="op" id="7202724">[</span><span class="op" id="7202725">]</span><span class="builtintype" id="7202726">float64</span><span class="op" id="7202733">,</span>&nbsp;<span class="ident" id="7202735">nsamples</span><span class="op" id="7202743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202746">for</span>&nbsp;<span class="ident" id="7202750">i</span>&nbsp;<span class="op" id="7202752">:=</span>&nbsp;<span class="keyword" id="7202755">range</span>&nbsp;<span class="ident" id="7202761">samples</span>&nbsp;<span class="op" id="7202769">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7202773">samples</span><span class="op" id="7202780">[</span><span class="ident" id="7202781">i</span><span class="op" id="7202782">]</span>&nbsp;<span class="op" id="7202784">=</span>&nbsp;<span class="ident" id="7202786">r</span><span class="op" id="7202787">.</span><span class="ident" id="7202788">NormFloat64</span><span class="op" id="7202799">(</span><span class="op" id="7202800">)</span><span class="op" id="7202801">*</span><span class="ident" id="7202802">stddev</span>&nbsp;<span class="op" id="7202809">+</span>&nbsp;<span class="ident" id="7202811">mean</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7202817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7202820">return</span>&nbsp;<span class="ident" id="7202827">samples</span><br>
<span class="lineno"></span><span class="op" id="7202835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7202838">func</span>&nbsp;<span class="ident" id="7202843">testNormalDistribution</span><span class="op" id="7202865">(</span><span class="ident" id="7202866">t</span>&nbsp;<span class="op" id="7202868">*</span><span class="ident" id="7202869">testing</span><span class="op" id="7202876">.</span><span class="ident" id="7202877">T</span><span class="op" id="7202878">,</span>&nbsp;<span class="ident" id="7202880">nsamples</span>&nbsp;<span class="builtintype" id="7202889">int</span><span class="op" id="7202892">,</span>&nbsp;<span class="ident" id="7202894">mean</span><span class="op" id="7202898">,</span>&nbsp;<span class="ident" id="7202900">stddev</span>&nbsp;<span class="builtintype" id="7202907">float64</span><span class="op" id="7202914">,</span>&nbsp;<span class="ident" id="7202916">seed</span>&nbsp;<span class="ident" id="7202921">int64</span><span class="op" id="7202926">)</span>&nbsp;<span class="op" id="7202928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7202931">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;mean=%v&nbsp;stddev=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;mean,&nbsp;stddev,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203028">samples</span>&nbsp;<span class="op" id="7203036">:=</span>&nbsp;<span class="ident" id="7203039">generateNormalSamples</span><span class="op" id="7203060">(</span><span class="ident" id="7203061">nsamples</span><span class="op" id="7203069">,</span>&nbsp;<span class="ident" id="7203071">mean</span><span class="op" id="7203075">,</span>&nbsp;<span class="ident" id="7203077">stddev</span><span class="op" id="7203083">,</span>&nbsp;<span class="ident" id="7203085">seed</span><span class="op" id="7203089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203092">errorScale</span>&nbsp;<span class="op" id="7203103">:=</span>&nbsp;<span class="ident" id="7203106">max</span><span class="op" id="7203109">(</span><span class="num" id="7203110">1.0</span><span class="op" id="7203113">,</span>&nbsp;<span class="ident" id="7203115">stddev</span><span class="op" id="7203121">)</span>&nbsp;<span class="comment" id="7203123">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;stddev</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203152">expected</span>&nbsp;<span class="op" id="7203161">:=</span>&nbsp;<span class="op" id="7203164">&amp;</span><span class="ident" id="7203165">statsResults</span><span class="op" id="7203177">{</span><span class="ident" id="7203178">mean</span><span class="op" id="7203182">,</span>&nbsp;<span class="ident" id="7203184">stddev</span><span class="op" id="7203190">,</span>&nbsp;<span class="num" id="7203192">0.10</span>&nbsp;<span class="op" id="7203197">*</span>&nbsp;<span class="ident" id="7203199">errorScale</span><span class="op" id="7203209">,</span>&nbsp;<span class="num" id="7203211">0.08</span>&nbsp;<span class="op" id="7203216">*</span>&nbsp;<span class="ident" id="7203218">errorScale</span><span class="op" id="7203228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7203232">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203301">checkSampleDistribution</span><span class="op" id="7203324">(</span><span class="ident" id="7203325">t</span><span class="op" id="7203326">,</span>&nbsp;<span class="ident" id="7203328">samples</span><span class="op" id="7203335">,</span>&nbsp;<span class="ident" id="7203337">expected</span><span class="op" id="7203345">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7203349">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203424">checkSampleSliceDistributions</span><span class="op" id="7203453">(</span><span class="ident" id="7203454">t</span><span class="op" id="7203455">,</span>&nbsp;<span class="ident" id="7203457">samples</span><span class="op" id="7203464">,</span>&nbsp;<span class="num" id="7203466">2</span><span class="op" id="7203467">,</span>&nbsp;<span class="ident" id="7203469">expected</span><span class="op" id="7203477">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7203481">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203555">checkSampleSliceDistributions</span><span class="op" id="7203584">(</span><span class="ident" id="7203585">t</span><span class="op" id="7203586">,</span>&nbsp;<span class="ident" id="7203588">samples</span><span class="op" id="7203595">,</span>&nbsp;<span class="num" id="7203597">7</span><span class="op" id="7203598">,</span>&nbsp;<span class="ident" id="7203600">expected</span><span class="op" id="7203608">)</span><br>
<span class="lineno">120</span><span class="op" id="7203610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7203613">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7203630">func</span>&nbsp;<span class="ident" id="7203635">TestStandardNormalValues</span><span class="op" id="7203659">(</span><span class="ident" id="7203660">t</span>&nbsp;<span class="op" id="7203662">*</span><span class="ident" id="7203663">testing</span><span class="op" id="7203670">.</span><span class="ident" id="7203671">T</span><span class="op" id="7203672">)</span>&nbsp;<span class="op" id="7203674">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7203677">for</span>&nbsp;<span class="ident" id="7203681">_</span><span class="op" id="7203682">,</span>&nbsp;<span class="ident" id="7203684">seed</span>&nbsp;<span class="op" id="7203689">:=</span>&nbsp;<span class="keyword" id="7203692">range</span>&nbsp;<span class="ident" id="7203698">testSeeds</span>&nbsp;<span class="op" id="7203708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203712">testNormalDistribution</span><span class="op" id="7203734">(</span><span class="ident" id="7203735">t</span><span class="op" id="7203736">,</span>&nbsp;<span class="ident" id="7203738">numTestSamples</span><span class="op" id="7203752">,</span>&nbsp;<span class="num" id="7203754">0</span><span class="op" id="7203755">,</span>&nbsp;<span class="num" id="7203757">1</span><span class="op" id="7203758">,</span>&nbsp;<span class="ident" id="7203760">seed</span><span class="op" id="7203764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203767">}</span><br>
<span class="lineno"></span><span class="op" id="7203769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="7203772">func</span>&nbsp;<span class="ident" id="7203777">TestNonStandardNormalValues</span><span class="op" id="7203804">(</span><span class="ident" id="7203805">t</span>&nbsp;<span class="op" id="7203807">*</span><span class="ident" id="7203808">testing</span><span class="op" id="7203815">.</span><span class="ident" id="7203816">T</span><span class="op" id="7203817">)</span>&nbsp;<span class="op" id="7203819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203822">sdmax</span>&nbsp;<span class="op" id="7203828">:=</span>&nbsp;<span class="num" id="7203831">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203839">mmax</span>&nbsp;<span class="op" id="7203844">:=</span>&nbsp;<span class="num" id="7203847">1000.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7203855">if</span>&nbsp;<span class="ident" id="7203858">testing</span><span class="op" id="7203865">.</span><span class="ident" id="7203866">Short</span><span class="op" id="7203871">(</span><span class="op" id="7203872">)</span>&nbsp;<span class="op" id="7203874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203878">sdmax</span>&nbsp;<span class="op" id="7203884">=</span>&nbsp;<span class="num" id="7203886">5</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7203890">mmax</span>&nbsp;<span class="op" id="7203895">=</span>&nbsp;<span class="num" id="7203897">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7203900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7203903">for</span>&nbsp;<span class="ident" id="7203907">sd</span>&nbsp;<span class="op" id="7203910">:=</span>&nbsp;<span class="num" id="7203913">0.5</span><span class="op" id="7203916">;</span>&nbsp;<span class="ident" id="7203918">sd</span>&nbsp;<span class="op" id="7203921">&lt;</span>&nbsp;<span class="ident" id="7203923">sdmax</span><span class="op" id="7203928">;</span>&nbsp;<span class="ident" id="7203930">sd</span>&nbsp;<span class="op" id="7203933">*=</span>&nbsp;<span class="num" id="7203936">2</span>&nbsp;<span class="op" id="7203938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7203942">for</span>&nbsp;<span class="ident" id="7203946">m</span>&nbsp;<span class="op" id="7203948">:=</span>&nbsp;<span class="num" id="7203951">0.5</span><span class="op" id="7203954">;</span>&nbsp;<span class="ident" id="7203956">m</span>&nbsp;<span class="op" id="7203958">&lt;</span>&nbsp;<span class="ident" id="7203960">mmax</span><span class="op" id="7203964">;</span>&nbsp;<span class="ident" id="7203966">m</span>&nbsp;<span class="op" id="7203968">*=</span>&nbsp;<span class="num" id="7203971">2</span>&nbsp;<span class="op" id="7203973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7203978">for</span>&nbsp;<span class="ident" id="7203982">_</span><span class="op" id="7203983">,</span>&nbsp;<span class="ident" id="7203985">seed</span>&nbsp;<span class="op" id="7203990">:=</span>&nbsp;<span class="keyword" id="7203993">range</span>&nbsp;<span class="ident" id="7203999">testSeeds</span>&nbsp;<span class="op" id="7204009">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204015">testNormalDistribution</span><span class="op" id="7204037">(</span><span class="ident" id="7204038">t</span><span class="op" id="7204039">,</span>&nbsp;<span class="ident" id="7204041">numTestSamples</span><span class="op" id="7204055">,</span>&nbsp;<span class="ident" id="7204057">m</span><span class="op" id="7204058">,</span>&nbsp;<span class="ident" id="7204060">sd</span><span class="op" id="7204062">,</span>&nbsp;<span class="ident" id="7204064">seed</span><span class="op" id="7204068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7204074">if</span>&nbsp;<span class="ident" id="7204077">testing</span><span class="op" id="7204084">.</span><span class="ident" id="7204085">Short</span><span class="op" id="7204090">(</span><span class="op" id="7204091">)</span>&nbsp;<span class="op" id="7204093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7204100">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204115">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204122">}</span><br>
<span class="lineno"></span><span class="op" id="7204124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7204127">//</span><br>
<span class="lineno">150</span><span class="comment" id="7204130">//&nbsp;Exponential&nbsp;distribution&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7204164">//</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7204168">func</span>&nbsp;<span class="ident" id="7204173">generateExponentialSamples</span><span class="op" id="7204199">(</span><span class="ident" id="7204200">nsamples</span>&nbsp;<span class="builtintype" id="7204209">int</span><span class="op" id="7204212">,</span>&nbsp;<span class="ident" id="7204214">rate</span>&nbsp;<span class="builtintype" id="7204219">float64</span><span class="op" id="7204226">,</span>&nbsp;<span class="ident" id="7204228">seed</span>&nbsp;<span class="ident" id="7204233">int64</span><span class="op" id="7204238">)</span>&nbsp;<span class="op" id="7204240">[</span><span class="op" id="7204241">]</span><span class="builtintype" id="7204242">float64</span>&nbsp;<span class="op" id="7204250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204253">r</span>&nbsp;<span class="op" id="7204255">:=</span>&nbsp;<span class="ident" id="7204258">New</span><span class="op" id="7204261">(</span><span class="ident" id="7204262">NewSource</span><span class="op" id="7204271">(</span><span class="ident" id="7204272">seed</span><span class="op" id="7204276">)</span><span class="op" id="7204277">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204280">samples</span>&nbsp;<span class="op" id="7204288">:=</span>&nbsp;<span class="builtinfunc" id="7204291">make</span><span class="op" id="7204295">(</span><span class="op" id="7204296">[</span><span class="op" id="7204297">]</span><span class="builtintype" id="7204298">float64</span><span class="op" id="7204305">,</span>&nbsp;<span class="ident" id="7204307">nsamples</span><span class="op" id="7204315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7204318">for</span>&nbsp;<span class="ident" id="7204322">i</span>&nbsp;<span class="op" id="7204324">:=</span>&nbsp;<span class="keyword" id="7204327">range</span>&nbsp;<span class="ident" id="7204333">samples</span>&nbsp;<span class="op" id="7204341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204345">samples</span><span class="op" id="7204352">[</span><span class="ident" id="7204353">i</span><span class="op" id="7204354">]</span>&nbsp;<span class="op" id="7204356">=</span>&nbsp;<span class="ident" id="7204358">r</span><span class="op" id="7204359">.</span><span class="ident" id="7204360">ExpFloat64</span><span class="op" id="7204370">(</span><span class="op" id="7204371">)</span>&nbsp;<span class="op" id="7204373">/</span>&nbsp;<span class="ident" id="7204375">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7204381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7204384">return</span>&nbsp;<span class="ident" id="7204391">samples</span><br>
<span class="lineno">160</span><span class="op" id="7204399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7204402">func</span>&nbsp;<span class="ident" id="7204407">testExponentialDistribution</span><span class="op" id="7204434">(</span><span class="ident" id="7204435">t</span>&nbsp;<span class="op" id="7204437">*</span><span class="ident" id="7204438">testing</span><span class="op" id="7204445">.</span><span class="ident" id="7204446">T</span><span class="op" id="7204447">,</span>&nbsp;<span class="ident" id="7204449">nsamples</span>&nbsp;<span class="builtintype" id="7204458">int</span><span class="op" id="7204461">,</span>&nbsp;<span class="ident" id="7204463">rate</span>&nbsp;<span class="builtintype" id="7204468">float64</span><span class="op" id="7204475">,</span>&nbsp;<span class="ident" id="7204477">seed</span>&nbsp;<span class="ident" id="7204482">int64</span><span class="op" id="7204487">)</span>&nbsp;<span class="op" id="7204489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7204492">//fmt.Printf(&#34;testing&nbsp;nsamples=%v&nbsp;rate=%v&nbsp;seed=%v\n&#34;,&nbsp;nsamples,&nbsp;rate,&nbsp;seed);</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204571">mean</span>&nbsp;<span class="op" id="7204576">:=</span>&nbsp;<span class="num" id="7204579">1</span>&nbsp;<span class="op" id="7204581">/</span>&nbsp;<span class="ident" id="7204583">rate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204589">stddev</span>&nbsp;<span class="op" id="7204596">:=</span>&nbsp;<span class="ident" id="7204599">mean</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204606">samples</span>&nbsp;<span class="op" id="7204614">:=</span>&nbsp;<span class="ident" id="7204617">generateExponentialSamples</span><span class="op" id="7204643">(</span><span class="ident" id="7204644">nsamples</span><span class="op" id="7204652">,</span>&nbsp;<span class="ident" id="7204654">rate</span><span class="op" id="7204658">,</span>&nbsp;<span class="ident" id="7204660">seed</span><span class="op" id="7204664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204667">errorScale</span>&nbsp;<span class="op" id="7204678">:=</span>&nbsp;<span class="ident" id="7204681">max</span><span class="op" id="7204684">(</span><span class="num" id="7204685">1.0</span><span class="op" id="7204688">,</span>&nbsp;<span class="num" id="7204690">1</span><span class="op" id="7204691">/</span><span class="ident" id="7204692">rate</span><span class="op" id="7204696">)</span>&nbsp;<span class="comment" id="7204698">//&nbsp;Error&nbsp;scales&nbsp;with&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;rate</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204744">expected</span>&nbsp;<span class="op" id="7204753">:=</span>&nbsp;<span class="op" id="7204756">&amp;</span><span class="ident" id="7204757">statsResults</span><span class="op" id="7204769">{</span><span class="ident" id="7204770">mean</span><span class="op" id="7204774">,</span>&nbsp;<span class="ident" id="7204776">stddev</span><span class="op" id="7204782">,</span>&nbsp;<span class="num" id="7204784">0.10</span>&nbsp;<span class="op" id="7204789">*</span>&nbsp;<span class="ident" id="7204791">errorScale</span><span class="op" id="7204801">,</span>&nbsp;<span class="num" id="7204803">0.20</span>&nbsp;<span class="op" id="7204808">*</span>&nbsp;<span class="ident" id="7204810">errorScale</span><span class="op" id="7204820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7204824">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;the&nbsp;entire&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7204893">checkSampleDistribution</span><span class="op" id="7204916">(</span><span class="ident" id="7204917">t</span><span class="op" id="7204918">,</span>&nbsp;<span class="ident" id="7204920">samples</span><span class="op" id="7204927">,</span>&nbsp;<span class="ident" id="7204929">expected</span><span class="op" id="7204937">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7204941">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;half&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205016">checkSampleSliceDistributions</span><span class="op" id="7205045">(</span><span class="ident" id="7205046">t</span><span class="op" id="7205047">,</span>&nbsp;<span class="ident" id="7205049">samples</span><span class="op" id="7205056">,</span>&nbsp;<span class="num" id="7205058">2</span><span class="op" id="7205059">,</span>&nbsp;<span class="ident" id="7205061">expected</span><span class="op" id="7205069">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7205073">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;each&nbsp;7th&nbsp;of&nbsp;the&nbsp;set&nbsp;matches&nbsp;the&nbsp;expected&nbsp;distribution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205147">checkSampleSliceDistributions</span><span class="op" id="7205176">(</span><span class="ident" id="7205177">t</span><span class="op" id="7205178">,</span>&nbsp;<span class="ident" id="7205180">samples</span><span class="op" id="7205187">,</span>&nbsp;<span class="num" id="7205189">7</span><span class="op" id="7205190">,</span>&nbsp;<span class="ident" id="7205192">expected</span><span class="op" id="7205200">)</span><br>
<span class="lineno">180</span><span class="op" id="7205202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7205205">//&nbsp;Actual&nbsp;tests</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7205222">func</span>&nbsp;<span class="ident" id="7205227">TestStandardExponentialValues</span><span class="op" id="7205256">(</span><span class="ident" id="7205257">t</span>&nbsp;<span class="op" id="7205259">*</span><span class="ident" id="7205260">testing</span><span class="op" id="7205267">.</span><span class="ident" id="7205268">T</span><span class="op" id="7205269">)</span>&nbsp;<span class="op" id="7205271">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205274">for</span>&nbsp;<span class="ident" id="7205278">_</span><span class="op" id="7205279">,</span>&nbsp;<span class="ident" id="7205281">seed</span>&nbsp;<span class="op" id="7205286">:=</span>&nbsp;<span class="keyword" id="7205289">range</span>&nbsp;<span class="ident" id="7205295">testSeeds</span>&nbsp;<span class="op" id="7205305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205309">testExponentialDistribution</span><span class="op" id="7205336">(</span><span class="ident" id="7205337">t</span><span class="op" id="7205338">,</span>&nbsp;<span class="ident" id="7205340">numTestSamples</span><span class="op" id="7205354">,</span>&nbsp;<span class="num" id="7205356">1</span><span class="op" id="7205357">,</span>&nbsp;<span class="ident" id="7205359">seed</span><span class="op" id="7205363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205366">}</span><br>
<span class="lineno"></span><span class="op" id="7205368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">190</span><span class="keyword" id="7205371">func</span>&nbsp;<span class="ident" id="7205376">TestNonStandardExponentialValues</span><span class="op" id="7205408">(</span><span class="ident" id="7205409">t</span>&nbsp;<span class="op" id="7205411">*</span><span class="ident" id="7205412">testing</span><span class="op" id="7205419">.</span><span class="ident" id="7205420">T</span><span class="op" id="7205421">)</span>&nbsp;<span class="op" id="7205423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205426">for</span>&nbsp;<span class="ident" id="7205430">rate</span>&nbsp;<span class="op" id="7205435">:=</span>&nbsp;<span class="num" id="7205438">0.05</span><span class="op" id="7205442">;</span>&nbsp;<span class="ident" id="7205444">rate</span>&nbsp;<span class="op" id="7205449">&lt;</span>&nbsp;<span class="num" id="7205451">10</span><span class="op" id="7205453">;</span>&nbsp;<span class="ident" id="7205455">rate</span>&nbsp;<span class="op" id="7205460">*=</span>&nbsp;<span class="num" id="7205463">2</span>&nbsp;<span class="op" id="7205465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205469">for</span>&nbsp;<span class="ident" id="7205473">_</span><span class="op" id="7205474">,</span>&nbsp;<span class="ident" id="7205476">seed</span>&nbsp;<span class="op" id="7205481">:=</span>&nbsp;<span class="keyword" id="7205484">range</span>&nbsp;<span class="ident" id="7205490">testSeeds</span>&nbsp;<span class="op" id="7205500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205505">testExponentialDistribution</span><span class="op" id="7205532">(</span><span class="ident" id="7205533">t</span><span class="op" id="7205534">,</span>&nbsp;<span class="ident" id="7205536">numTestSamples</span><span class="op" id="7205550">,</span>&nbsp;<span class="ident" id="7205552">rate</span><span class="op" id="7205556">,</span>&nbsp;<span class="ident" id="7205558">seed</span><span class="op" id="7205562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205567">if</span>&nbsp;<span class="ident" id="7205570">testing</span><span class="op" id="7205577">.</span><span class="ident" id="7205578">Short</span><span class="op" id="7205583">(</span><span class="op" id="7205584">)</span>&nbsp;<span class="op" id="7205586">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205592">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205608">}</span><br>
<span class="lineno"></span><span class="op" id="7205610">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="comment" id="7205613">//</span><br>
<span class="lineno"></span><span class="comment" id="7205616">//&nbsp;Table&nbsp;generation&nbsp;tests</span><br>
<span class="lineno"></span><span class="comment" id="7205642">//</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="keyword" id="7205646">func</span>&nbsp;<span class="ident" id="7205651">initNorm</span><span class="op" id="7205659">(</span><span class="op" id="7205660">)</span>&nbsp;<span class="op" id="7205662">(</span><span class="ident" id="7205663">testKn</span>&nbsp;<span class="op" id="7205670">[</span><span class="op" id="7205671">]</span><span class="builtintype" id="7205672">uint32</span><span class="op" id="7205678">,</span>&nbsp;<span class="ident" id="7205680">testWn</span><span class="op" id="7205686">,</span>&nbsp;<span class="ident" id="7205688">testFn</span>&nbsp;<span class="op" id="7205695">[</span><span class="op" id="7205696">]</span><span class="builtintype" id="7205697">float32</span><span class="op" id="7205704">)</span>&nbsp;<span class="op" id="7205706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205709">const</span>&nbsp;<span class="ident" id="7205715">m1</span>&nbsp;<span class="op" id="7205718">=</span>&nbsp;<span class="num" id="7205720">1</span>&nbsp;<span class="op" id="7205722">&lt;&lt;</span>&nbsp;<span class="num" id="7205725">31</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7205729">var</span>&nbsp;<span class="op" id="7205733">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205737">dn</span>&nbsp;<span class="builtintype" id="7205740">float64</span>&nbsp;<span class="op" id="7205748">=</span>&nbsp;<span class="ident" id="7205750">rn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205755">tn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7205766">=</span>&nbsp;<span class="ident" id="7205768">dn</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205773">vn</span>&nbsp;<span class="builtintype" id="7205776">float64</span>&nbsp;<span class="op" id="7205784">=</span>&nbsp;<span class="num" id="7205786">9.91256303526217e-3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7205807">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205811">testKn</span>&nbsp;<span class="op" id="7205818">=</span>&nbsp;<span class="builtinfunc" id="7205820">make</span><span class="op" id="7205824">(</span><span class="op" id="7205825">[</span><span class="op" id="7205826">]</span><span class="builtintype" id="7205827">uint32</span><span class="op" id="7205833">,</span>&nbsp;<span class="num" id="7205835">128</span><span class="op" id="7205838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205841">testWn</span>&nbsp;<span class="op" id="7205848">=</span>&nbsp;<span class="builtinfunc" id="7205850">make</span><span class="op" id="7205854">(</span><span class="op" id="7205855">[</span><span class="op" id="7205856">]</span><span class="builtintype" id="7205857">float32</span><span class="op" id="7205864">,</span>&nbsp;<span class="num" id="7205866">128</span><span class="op" id="7205869">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205872">testFn</span>&nbsp;<span class="op" id="7205879">=</span>&nbsp;<span class="builtinfunc" id="7205881">make</span><span class="op" id="7205885">(</span><span class="op" id="7205886">[</span><span class="op" id="7205887">]</span><span class="builtintype" id="7205888">float32</span><span class="op" id="7205895">,</span>&nbsp;<span class="num" id="7205897">128</span><span class="op" id="7205900">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205904">q</span>&nbsp;<span class="op" id="7205906">:=</span>&nbsp;<span class="ident" id="7205909">vn</span>&nbsp;<span class="op" id="7205912">/</span>&nbsp;<span class="ident" id="7205914">math</span><span class="op" id="7205918">.</span><span class="ident" id="7205919">Exp</span><span class="op" id="7205922">(</span><span class="op" id="7205923">-</span><span class="num" id="7205924">0.5</span><span class="op" id="7205927">*</span><span class="ident" id="7205928">dn</span><span class="op" id="7205930">*</span><span class="ident" id="7205931">dn</span><span class="op" id="7205933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205936">testKn</span><span class="op" id="7205942">[</span><span class="num" id="7205943">0</span><span class="op" id="7205944">]</span>&nbsp;<span class="op" id="7205946">=</span>&nbsp;<span class="builtintype" id="7205948">uint32</span><span class="op" id="7205954">(</span><span class="op" id="7205955">(</span><span class="ident" id="7205956">dn</span>&nbsp;<span class="op" id="7205959">/</span>&nbsp;<span class="ident" id="7205961">q</span><span class="op" id="7205962">)</span>&nbsp;<span class="op" id="7205964">*</span>&nbsp;<span class="ident" id="7205966">m1</span><span class="op" id="7205968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205971">testKn</span><span class="op" id="7205977">[</span><span class="num" id="7205978">1</span><span class="op" id="7205979">]</span>&nbsp;<span class="op" id="7205981">=</span>&nbsp;<span class="num" id="7205983">0</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7205986">testWn</span><span class="op" id="7205992">[</span><span class="num" id="7205993">0</span><span class="op" id="7205994">]</span>&nbsp;<span class="op" id="7205996">=</span>&nbsp;<span class="builtintype" id="7205998">float32</span><span class="op" id="7206005">(</span><span class="ident" id="7206006">q</span>&nbsp;<span class="op" id="7206008">/</span>&nbsp;<span class="ident" id="7206010">m1</span><span class="op" id="7206012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206015">testWn</span><span class="op" id="7206021">[</span><span class="num" id="7206022">127</span><span class="op" id="7206025">]</span>&nbsp;<span class="op" id="7206027">=</span>&nbsp;<span class="builtintype" id="7206029">float32</span><span class="op" id="7206036">(</span><span class="ident" id="7206037">dn</span>&nbsp;<span class="op" id="7206040">/</span>&nbsp;<span class="ident" id="7206042">m1</span><span class="op" id="7206044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206047">testFn</span><span class="op" id="7206053">[</span><span class="num" id="7206054">0</span><span class="op" id="7206055">]</span>&nbsp;<span class="op" id="7206057">=</span>&nbsp;<span class="num" id="7206059">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206064">testFn</span><span class="op" id="7206070">[</span><span class="num" id="7206071">127</span><span class="op" id="7206074">]</span>&nbsp;<span class="op" id="7206076">=</span>&nbsp;<span class="builtintype" id="7206078">float32</span><span class="op" id="7206085">(</span><span class="ident" id="7206086">math</span><span class="op" id="7206090">.</span><span class="ident" id="7206091">Exp</span><span class="op" id="7206094">(</span><span class="op" id="7206095">-</span><span class="num" id="7206096">0.5</span>&nbsp;<span class="op" id="7206100">*</span>&nbsp;<span class="ident" id="7206102">dn</span>&nbsp;<span class="op" id="7206105">*</span>&nbsp;<span class="ident" id="7206107">dn</span><span class="op" id="7206109">)</span><span class="op" id="7206110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7206113">for</span>&nbsp;<span class="ident" id="7206117">i</span>&nbsp;<span class="op" id="7206119">:=</span>&nbsp;<span class="num" id="7206122">126</span><span class="op" id="7206125">;</span>&nbsp;<span class="ident" id="7206127">i</span>&nbsp;<span class="op" id="7206129">&gt;=</span>&nbsp;<span class="num" id="7206132">1</span><span class="op" id="7206133">;</span>&nbsp;<span class="ident" id="7206135">i</span><span class="op" id="7206136">--</span>&nbsp;<span class="op" id="7206139">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206143">dn</span>&nbsp;<span class="op" id="7206146">=</span>&nbsp;<span class="ident" id="7206148">math</span><span class="op" id="7206152">.</span><span class="ident" id="7206153">Sqrt</span><span class="op" id="7206157">(</span><span class="op" id="7206158">-</span><span class="num" id="7206159">2.0</span>&nbsp;<span class="op" id="7206163">*</span>&nbsp;<span class="ident" id="7206165">math</span><span class="op" id="7206169">.</span><span class="ident" id="7206170">Log</span><span class="op" id="7206173">(</span><span class="ident" id="7206174">vn</span><span class="op" id="7206176">/</span><span class="ident" id="7206177">dn</span><span class="op" id="7206179">+</span><span class="ident" id="7206180">math</span><span class="op" id="7206184">.</span><span class="ident" id="7206185">Exp</span><span class="op" id="7206188">(</span><span class="op" id="7206189">-</span><span class="num" id="7206190">0.5</span><span class="op" id="7206193">*</span><span class="ident" id="7206194">dn</span><span class="op" id="7206196">*</span><span class="ident" id="7206197">dn</span><span class="op" id="7206199">)</span><span class="op" id="7206200">)</span><span class="op" id="7206201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206205">testKn</span><span class="op" id="7206211">[</span><span class="ident" id="7206212">i</span><span class="op" id="7206213">+</span><span class="num" id="7206214">1</span><span class="op" id="7206215">]</span>&nbsp;<span class="op" id="7206217">=</span>&nbsp;<span class="builtintype" id="7206219">uint32</span><span class="op" id="7206225">(</span><span class="op" id="7206226">(</span><span class="ident" id="7206227">dn</span>&nbsp;<span class="op" id="7206230">/</span>&nbsp;<span class="ident" id="7206232">tn</span><span class="op" id="7206234">)</span>&nbsp;<span class="op" id="7206236">*</span>&nbsp;<span class="ident" id="7206238">m1</span><span class="op" id="7206240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206244">tn</span>&nbsp;<span class="op" id="7206247">=</span>&nbsp;<span class="ident" id="7206249">dn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206254">testFn</span><span class="op" id="7206260">[</span><span class="ident" id="7206261">i</span><span class="op" id="7206262">]</span>&nbsp;<span class="op" id="7206264">=</span>&nbsp;<span class="builtintype" id="7206266">float32</span><span class="op" id="7206273">(</span><span class="ident" id="7206274">math</span><span class="op" id="7206278">.</span><span class="ident" id="7206279">Exp</span><span class="op" id="7206282">(</span><span class="op" id="7206283">-</span><span class="num" id="7206284">0.5</span>&nbsp;<span class="op" id="7206288">*</span>&nbsp;<span class="ident" id="7206290">dn</span>&nbsp;<span class="op" id="7206293">*</span>&nbsp;<span class="ident" id="7206295">dn</span><span class="op" id="7206297">)</span><span class="op" id="7206298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206302">testWn</span><span class="op" id="7206308">[</span><span class="ident" id="7206309">i</span><span class="op" id="7206310">]</span>&nbsp;<span class="op" id="7206312">=</span>&nbsp;<span class="builtintype" id="7206314">float32</span><span class="op" id="7206321">(</span><span class="ident" id="7206322">dn</span>&nbsp;<span class="op" id="7206325">/</span>&nbsp;<span class="ident" id="7206327">m1</span><span class="op" id="7206329">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7206332">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7206335">return</span><br>
<span class="lineno"></span><span class="op" id="7206342">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7206345">func</span>&nbsp;<span class="ident" id="7206350">initExp</span><span class="op" id="7206357">(</span><span class="op" id="7206358">)</span>&nbsp;<span class="op" id="7206360">(</span><span class="ident" id="7206361">testKe</span>&nbsp;<span class="op" id="7206368">[</span><span class="op" id="7206369">]</span><span class="builtintype" id="7206370">uint32</span><span class="op" id="7206376">,</span>&nbsp;<span class="ident" id="7206378">testWe</span><span class="op" id="7206384">,</span>&nbsp;<span class="ident" id="7206386">testFe</span>&nbsp;<span class="op" id="7206393">[</span><span class="op" id="7206394">]</span><span class="builtintype" id="7206395">float32</span><span class="op" id="7206402">)</span>&nbsp;<span class="op" id="7206404">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7206407">const</span>&nbsp;<span class="ident" id="7206413">m2</span>&nbsp;<span class="op" id="7206416">=</span>&nbsp;<span class="num" id="7206418">1</span>&nbsp;<span class="op" id="7206420">&lt;&lt;</span>&nbsp;<span class="num" id="7206423">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7206427">var</span>&nbsp;<span class="op" id="7206431">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206435">de</span>&nbsp;<span class="builtintype" id="7206438">float64</span>&nbsp;<span class="op" id="7206446">=</span>&nbsp;<span class="ident" id="7206448">re</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206453">te</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7206464">=</span>&nbsp;<span class="ident" id="7206466">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206471">ve</span>&nbsp;<span class="builtintype" id="7206474">float64</span>&nbsp;<span class="op" id="7206482">=</span>&nbsp;<span class="num" id="7206484">3.9496598225815571993e-3</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7206510">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206514">testKe</span>&nbsp;<span class="op" id="7206521">=</span>&nbsp;<span class="builtinfunc" id="7206523">make</span><span class="op" id="7206527">(</span><span class="op" id="7206528">[</span><span class="op" id="7206529">]</span><span class="builtintype" id="7206530">uint32</span><span class="op" id="7206536">,</span>&nbsp;<span class="num" id="7206538">256</span><span class="op" id="7206541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206544">testWe</span>&nbsp;<span class="op" id="7206551">=</span>&nbsp;<span class="builtinfunc" id="7206553">make</span><span class="op" id="7206557">(</span><span class="op" id="7206558">[</span><span class="op" id="7206559">]</span><span class="builtintype" id="7206560">float32</span><span class="op" id="7206567">,</span>&nbsp;<span class="num" id="7206569">256</span><span class="op" id="7206572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206575">testFe</span>&nbsp;<span class="op" id="7206582">=</span>&nbsp;<span class="builtinfunc" id="7206584">make</span><span class="op" id="7206588">(</span><span class="op" id="7206589">[</span><span class="op" id="7206590">]</span><span class="builtintype" id="7206591">float32</span><span class="op" id="7206598">,</span>&nbsp;<span class="num" id="7206600">256</span><span class="op" id="7206603">)</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206607">q</span>&nbsp;<span class="op" id="7206609">:=</span>&nbsp;<span class="ident" id="7206612">ve</span>&nbsp;<span class="op" id="7206615">/</span>&nbsp;<span class="ident" id="7206617">math</span><span class="op" id="7206621">.</span><span class="ident" id="7206622">Exp</span><span class="op" id="7206625">(</span><span class="op" id="7206626">-</span><span class="ident" id="7206627">de</span><span class="op" id="7206629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206632">testKe</span><span class="op" id="7206638">[</span><span class="num" id="7206639">0</span><span class="op" id="7206640">]</span>&nbsp;<span class="op" id="7206642">=</span>&nbsp;<span class="builtintype" id="7206644">uint32</span><span class="op" id="7206650">(</span><span class="op" id="7206651">(</span><span class="ident" id="7206652">de</span>&nbsp;<span class="op" id="7206655">/</span>&nbsp;<span class="ident" id="7206657">q</span><span class="op" id="7206658">)</span>&nbsp;<span class="op" id="7206660">*</span>&nbsp;<span class="ident" id="7206662">m2</span><span class="op" id="7206664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206667">testKe</span><span class="op" id="7206673">[</span><span class="num" id="7206674">1</span><span class="op" id="7206675">]</span>&nbsp;<span class="op" id="7206677">=</span>&nbsp;<span class="num" id="7206679">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206682">testWe</span><span class="op" id="7206688">[</span><span class="num" id="7206689">0</span><span class="op" id="7206690">]</span>&nbsp;<span class="op" id="7206692">=</span>&nbsp;<span class="builtintype" id="7206694">float32</span><span class="op" id="7206701">(</span><span class="ident" id="7206702">q</span>&nbsp;<span class="op" id="7206704">/</span>&nbsp;<span class="ident" id="7206706">m2</span><span class="op" id="7206708">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206711">testWe</span><span class="op" id="7206717">[</span><span class="num" id="7206718">255</span><span class="op" id="7206721">]</span>&nbsp;<span class="op" id="7206723">=</span>&nbsp;<span class="builtintype" id="7206725">float32</span><span class="op" id="7206732">(</span><span class="ident" id="7206733">de</span>&nbsp;<span class="op" id="7206736">/</span>&nbsp;<span class="ident" id="7206738">m2</span><span class="op" id="7206740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206743">testFe</span><span class="op" id="7206749">[</span><span class="num" id="7206750">0</span><span class="op" id="7206751">]</span>&nbsp;<span class="op" id="7206753">=</span>&nbsp;<span class="num" id="7206755">1.0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206760">testFe</span><span class="op" id="7206766">[</span><span class="num" id="7206767">255</span><span class="op" id="7206770">]</span>&nbsp;<span class="op" id="7206772">=</span>&nbsp;<span class="builtintype" id="7206774">float32</span><span class="op" id="7206781">(</span><span class="ident" id="7206782">math</span><span class="op" id="7206786">.</span><span class="ident" id="7206787">Exp</span><span class="op" id="7206790">(</span><span class="op" id="7206791">-</span><span class="ident" id="7206792">de</span><span class="op" id="7206794">)</span><span class="op" id="7206795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7206798">for</span>&nbsp;<span class="ident" id="7206802">i</span>&nbsp;<span class="op" id="7206804">:=</span>&nbsp;<span class="num" id="7206807">254</span><span class="op" id="7206810">;</span>&nbsp;<span class="ident" id="7206812">i</span>&nbsp;<span class="op" id="7206814">&gt;=</span>&nbsp;<span class="num" id="7206817">1</span><span class="op" id="7206818">;</span>&nbsp;<span class="ident" id="7206820">i</span><span class="op" id="7206821">--</span>&nbsp;<span class="op" id="7206824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206828">de</span>&nbsp;<span class="op" id="7206831">=</span>&nbsp;<span class="op" id="7206833">-</span><span class="ident" id="7206834">math</span><span class="op" id="7206838">.</span><span class="ident" id="7206839">Log</span><span class="op" id="7206842">(</span><span class="ident" id="7206843">ve</span><span class="op" id="7206845">/</span><span class="ident" id="7206846">de</span>&nbsp;<span class="op" id="7206849">+</span>&nbsp;<span class="ident" id="7206851">math</span><span class="op" id="7206855">.</span><span class="ident" id="7206856">Exp</span><span class="op" id="7206859">(</span><span class="op" id="7206860">-</span><span class="ident" id="7206861">de</span><span class="op" id="7206863">)</span><span class="op" id="7206864">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206868">testKe</span><span class="op" id="7206874">[</span><span class="ident" id="7206875">i</span><span class="op" id="7206876">+</span><span class="num" id="7206877">1</span><span class="op" id="7206878">]</span>&nbsp;<span class="op" id="7206880">=</span>&nbsp;<span class="builtintype" id="7206882">uint32</span><span class="op" id="7206888">(</span><span class="op" id="7206889">(</span><span class="ident" id="7206890">de</span>&nbsp;<span class="op" id="7206893">/</span>&nbsp;<span class="ident" id="7206895">te</span><span class="op" id="7206897">)</span>&nbsp;<span class="op" id="7206899">*</span>&nbsp;<span class="ident" id="7206901">m2</span><span class="op" id="7206903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206907">te</span>&nbsp;<span class="op" id="7206910">=</span>&nbsp;<span class="ident" id="7206912">de</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206917">testFe</span><span class="op" id="7206923">[</span><span class="ident" id="7206924">i</span><span class="op" id="7206925">]</span>&nbsp;<span class="op" id="7206927">=</span>&nbsp;<span class="builtintype" id="7206929">float32</span><span class="op" id="7206936">(</span><span class="ident" id="7206937">math</span><span class="op" id="7206941">.</span><span class="ident" id="7206942">Exp</span><span class="op" id="7206945">(</span><span class="op" id="7206946">-</span><span class="ident" id="7206947">de</span><span class="op" id="7206949">)</span><span class="op" id="7206950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7206954">testWe</span><span class="op" id="7206960">[</span><span class="ident" id="7206961">i</span><span class="op" id="7206962">]</span>&nbsp;<span class="op" id="7206964">=</span>&nbsp;<span class="builtintype" id="7206966">float32</span><span class="op" id="7206973">(</span><span class="ident" id="7206974">de</span>&nbsp;<span class="op" id="7206977">/</span>&nbsp;<span class="ident" id="7206979">m2</span><span class="op" id="7206981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7206984">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7206987">return</span><br>
<span class="lineno"></span><span class="op" id="7206994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7206997">//&nbsp;compareUint32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7207065">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno">265</span><span class="comment" id="7207129">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7207147">func</span>&nbsp;<span class="ident" id="7207152">compareUint32Slices</span><span class="op" id="7207171">(</span><span class="ident" id="7207172">s1</span><span class="op" id="7207174">,</span>&nbsp;<span class="ident" id="7207176">s2</span>&nbsp;<span class="op" id="7207179">[</span><span class="op" id="7207180">]</span><span class="builtintype" id="7207181">uint32</span><span class="op" id="7207187">)</span>&nbsp;<span class="builtintype" id="7207189">int</span>&nbsp;<span class="op" id="7207193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207196">if</span>&nbsp;<span class="builtinfunc" id="7207199">len</span><span class="op" id="7207202">(</span><span class="ident" id="7207203">s1</span><span class="op" id="7207205">)</span>&nbsp;<span class="op" id="7207207">!=</span>&nbsp;<span class="builtinfunc" id="7207210">len</span><span class="op" id="7207213">(</span><span class="ident" id="7207214">s2</span><span class="op" id="7207216">)</span>&nbsp;<span class="op" id="7207218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207222">if</span>&nbsp;<span class="builtinfunc" id="7207225">len</span><span class="op" id="7207228">(</span><span class="ident" id="7207229">s1</span><span class="op" id="7207231">)</span>&nbsp;<span class="op" id="7207233">&gt;</span>&nbsp;<span class="builtinfunc" id="7207235">len</span><span class="op" id="7207238">(</span><span class="ident" id="7207239">s2</span><span class="op" id="7207241">)</span>&nbsp;<span class="op" id="7207243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207248">return</span>&nbsp;<span class="builtinfunc" id="7207255">len</span><span class="op" id="7207258">(</span><span class="ident" id="7207259">s2</span><span class="op" id="7207261">)</span>&nbsp;<span class="op" id="7207263">+</span>&nbsp;<span class="num" id="7207265">1</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7207269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207273">return</span>&nbsp;<span class="builtinfunc" id="7207280">len</span><span class="op" id="7207283">(</span><span class="ident" id="7207284">s1</span><span class="op" id="7207286">)</span>&nbsp;<span class="op" id="7207288">+</span>&nbsp;<span class="num" id="7207290">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7207293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207296">for</span>&nbsp;<span class="ident" id="7207300">i</span>&nbsp;<span class="op" id="7207302">:=</span>&nbsp;<span class="keyword" id="7207305">range</span>&nbsp;<span class="ident" id="7207311">s1</span>&nbsp;<span class="op" id="7207314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207318">if</span>&nbsp;<span class="ident" id="7207321">s1</span><span class="op" id="7207323">[</span><span class="ident" id="7207324">i</span><span class="op" id="7207325">]</span>&nbsp;<span class="op" id="7207327">!=</span>&nbsp;<span class="ident" id="7207330">s2</span><span class="op" id="7207332">[</span><span class="ident" id="7207333">i</span><span class="op" id="7207334">]</span>&nbsp;<span class="op" id="7207336">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207341">return</span>&nbsp;<span class="ident" id="7207348">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7207352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7207355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207358">return</span>&nbsp;<span class="op" id="7207365">-</span><span class="num" id="7207366">1</span><br>
<span class="lineno"></span><span class="op" id="7207368">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="7207371">//&nbsp;compareFloat32Slices&nbsp;returns&nbsp;the&nbsp;first&nbsp;index&nbsp;where&nbsp;the&nbsp;two&nbsp;slices</span><br>
<span class="lineno"></span><span class="comment" id="7207440">//&nbsp;disagree,&nbsp;or&nbsp;&lt;0&nbsp;if&nbsp;the&nbsp;lengths&nbsp;are&nbsp;the&nbsp;same&nbsp;and&nbsp;all&nbsp;elements</span><br>
<span class="lineno"></span><span class="comment" id="7207504">//&nbsp;are&nbsp;identical.</span><br>
<span class="lineno"></span><span class="keyword" id="7207522">func</span>&nbsp;<span class="ident" id="7207527">compareFloat32Slices</span><span class="op" id="7207547">(</span><span class="ident" id="7207548">s1</span><span class="op" id="7207550">,</span>&nbsp;<span class="ident" id="7207552">s2</span>&nbsp;<span class="op" id="7207555">[</span><span class="op" id="7207556">]</span><span class="builtintype" id="7207557">float32</span><span class="op" id="7207564">)</span>&nbsp;<span class="builtintype" id="7207566">int</span>&nbsp;<span class="op" id="7207570">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207573">if</span>&nbsp;<span class="builtinfunc" id="7207576">len</span><span class="op" id="7207579">(</span><span class="ident" id="7207580">s1</span><span class="op" id="7207582">)</span>&nbsp;<span class="op" id="7207584">!=</span>&nbsp;<span class="builtinfunc" id="7207587">len</span><span class="op" id="7207590">(</span><span class="ident" id="7207591">s2</span><span class="op" id="7207593">)</span>&nbsp;<span class="op" id="7207595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207599">if</span>&nbsp;<span class="builtinfunc" id="7207602">len</span><span class="op" id="7207605">(</span><span class="ident" id="7207606">s1</span><span class="op" id="7207608">)</span>&nbsp;<span class="op" id="7207610">&gt;</span>&nbsp;<span class="builtinfunc" id="7207612">len</span><span class="op" id="7207615">(</span><span class="ident" id="7207616">s2</span><span class="op" id="7207618">)</span>&nbsp;<span class="op" id="7207620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207625">return</span>&nbsp;<span class="builtinfunc" id="7207632">len</span><span class="op" id="7207635">(</span><span class="ident" id="7207636">s2</span><span class="op" id="7207638">)</span>&nbsp;<span class="op" id="7207640">+</span>&nbsp;<span class="num" id="7207642">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7207646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207650">return</span>&nbsp;<span class="builtinfunc" id="7207657">len</span><span class="op" id="7207660">(</span><span class="ident" id="7207661">s1</span><span class="op" id="7207663">)</span>&nbsp;<span class="op" id="7207665">+</span>&nbsp;<span class="num" id="7207667">1</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7207670">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207673">for</span>&nbsp;<span class="ident" id="7207677">i</span>&nbsp;<span class="op" id="7207679">:=</span>&nbsp;<span class="keyword" id="7207682">range</span>&nbsp;<span class="ident" id="7207688">s1</span>&nbsp;<span class="op" id="7207691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207695">if</span>&nbsp;<span class="op" id="7207698">!</span><span class="ident" id="7207699">nearEqual</span><span class="op" id="7207708">(</span><span class="builtintype" id="7207709">float64</span><span class="op" id="7207716">(</span><span class="ident" id="7207717">s1</span><span class="op" id="7207719">[</span><span class="ident" id="7207720">i</span><span class="op" id="7207721">]</span><span class="op" id="7207722">)</span><span class="op" id="7207723">,</span>&nbsp;<span class="builtintype" id="7207725">float64</span><span class="op" id="7207732">(</span><span class="ident" id="7207733">s2</span><span class="op" id="7207735">[</span><span class="ident" id="7207736">i</span><span class="op" id="7207737">]</span><span class="op" id="7207738">)</span><span class="op" id="7207739">,</span>&nbsp;<span class="num" id="7207741">0</span><span class="op" id="7207742">,</span>&nbsp;<span class="num" id="7207744">1e-7</span><span class="op" id="7207748">)</span>&nbsp;<span class="op" id="7207750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207755">return</span>&nbsp;<span class="ident" id="7207762">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7207766">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7207769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207772">return</span>&nbsp;<span class="op" id="7207779">-</span><span class="num" id="7207780">1</span><br>
<span class="lineno"></span><span class="op" id="7207782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7207785">func</span>&nbsp;<span class="ident" id="7207790">TestNormTables</span><span class="op" id="7207804">(</span><span class="ident" id="7207805">t</span>&nbsp;<span class="op" id="7207807">*</span><span class="ident" id="7207808">testing</span><span class="op" id="7207815">.</span><span class="ident" id="7207816">T</span><span class="op" id="7207817">)</span>&nbsp;<span class="op" id="7207819">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7207822">testKn</span><span class="op" id="7207828">,</span>&nbsp;<span class="ident" id="7207830">testWn</span><span class="op" id="7207836">,</span>&nbsp;<span class="ident" id="7207838">testFn</span>&nbsp;<span class="op" id="7207845">:=</span>&nbsp;<span class="ident" id="7207848">initNorm</span><span class="op" id="7207856">(</span><span class="op" id="7207857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207860">if</span>&nbsp;<span class="ident" id="7207863">i</span>&nbsp;<span class="op" id="7207865">:=</span>&nbsp;<span class="ident" id="7207868">compareUint32Slices</span><span class="op" id="7207887">(</span><span class="ident" id="7207888">kn</span><span class="op" id="7207890">[</span><span class="num" id="7207891">0</span><span class="op" id="7207892">:</span><span class="op" id="7207893">]</span><span class="op" id="7207894">,</span>&nbsp;<span class="ident" id="7207896">testKn</span><span class="op" id="7207902">)</span><span class="op" id="7207903">;</span>&nbsp;<span class="ident" id="7207905">i</span>&nbsp;<span class="op" id="7207907">&gt;=</span>&nbsp;<span class="num" id="7207910">0</span>&nbsp;<span class="op" id="7207912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7207916">t</span><span class="op" id="7207917">.</span><span class="ident" id="7207918">Errorf</span><span class="op" id="7207924">(</span><span class="string" id="7207925">&#34;kn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7207961">,</span>&nbsp;<span class="ident" id="7207963">i</span><span class="op" id="7207964">,</span>&nbsp;<span class="ident" id="7207966">kn</span><span class="op" id="7207968">[</span><span class="ident" id="7207969">i</span><span class="op" id="7207970">]</span><span class="op" id="7207971">,</span>&nbsp;<span class="ident" id="7207973">testKn</span><span class="op" id="7207979">[</span><span class="ident" id="7207980">i</span><span class="op" id="7207981">]</span><span class="op" id="7207982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7207985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7207988">if</span>&nbsp;<span class="ident" id="7207991">i</span>&nbsp;<span class="op" id="7207993">:=</span>&nbsp;<span class="ident" id="7207996">compareFloat32Slices</span><span class="op" id="7208016">(</span><span class="ident" id="7208017">wn</span><span class="op" id="7208019">[</span><span class="num" id="7208020">0</span><span class="op" id="7208021">:</span><span class="op" id="7208022">]</span><span class="op" id="7208023">,</span>&nbsp;<span class="ident" id="7208025">testWn</span><span class="op" id="7208031">)</span><span class="op" id="7208032">;</span>&nbsp;<span class="ident" id="7208034">i</span>&nbsp;<span class="op" id="7208036">&gt;=</span>&nbsp;<span class="num" id="7208039">0</span>&nbsp;<span class="op" id="7208041">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7208045">t</span><span class="op" id="7208046">.</span><span class="ident" id="7208047">Errorf</span><span class="op" id="7208053">(</span><span class="string" id="7208054">&#34;wn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7208090">,</span>&nbsp;<span class="ident" id="7208092">i</span><span class="op" id="7208093">,</span>&nbsp;<span class="ident" id="7208095">wn</span><span class="op" id="7208097">[</span><span class="ident" id="7208098">i</span><span class="op" id="7208099">]</span><span class="op" id="7208100">,</span>&nbsp;<span class="ident" id="7208102">testWn</span><span class="op" id="7208108">[</span><span class="ident" id="7208109">i</span><span class="op" id="7208110">]</span><span class="op" id="7208111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7208114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7208117">if</span>&nbsp;<span class="ident" id="7208120">i</span>&nbsp;<span class="op" id="7208122">:=</span>&nbsp;<span class="ident" id="7208125">compareFloat32Slices</span><span class="op" id="7208145">(</span><span class="ident" id="7208146">fn</span><span class="op" id="7208148">[</span><span class="num" id="7208149">0</span><span class="op" id="7208150">:</span><span class="op" id="7208151">]</span><span class="op" id="7208152">,</span>&nbsp;<span class="ident" id="7208154">testFn</span><span class="op" id="7208160">)</span><span class="op" id="7208161">;</span>&nbsp;<span class="ident" id="7208163">i</span>&nbsp;<span class="op" id="7208165">&gt;=</span>&nbsp;<span class="num" id="7208168">0</span>&nbsp;<span class="op" id="7208170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7208174">t</span><span class="op" id="7208175">.</span><span class="ident" id="7208176">Errorf</span><span class="op" id="7208182">(</span><span class="string" id="7208183">&#34;fn&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7208219">,</span>&nbsp;<span class="ident" id="7208221">i</span><span class="op" id="7208222">,</span>&nbsp;<span class="ident" id="7208224">fn</span><span class="op" id="7208226">[</span><span class="ident" id="7208227">i</span><span class="op" id="7208228">]</span><span class="op" id="7208229">,</span>&nbsp;<span class="ident" id="7208231">testFn</span><span class="op" id="7208237">[</span><span class="ident" id="7208238">i</span><span class="op" id="7208239">]</span><span class="op" id="7208240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7208243">}</span><br>
<span class="lineno">310</span><span class="op" id="7208245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7208248">func</span>&nbsp;<span class="ident" id="7208253">TestExpTables</span><span class="op" id="7208266">(</span><span class="ident" id="7208267">t</span>&nbsp;<span class="op" id="7208269">*</span><span class="ident" id="7208270">testing</span><span class="op" id="7208277">.</span><span class="ident" id="7208278">T</span><span class="op" id="7208279">)</span>&nbsp;<span class="op" id="7208281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7208284">testKe</span><span class="op" id="7208290">,</span>&nbsp;<span class="ident" id="7208292">testWe</span><span class="op" id="7208298">,</span>&nbsp;<span class="ident" id="7208300">testFe</span>&nbsp;<span class="op" id="7208307">:=</span>&nbsp;<span class="ident" id="7208310">initExp</span><span class="op" id="7208317">(</span><span class="op" id="7208318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7208321">if</span>&nbsp;<span class="ident" id="7208324">i</span>&nbsp;<span class="op" id="7208326">:=</span>&nbsp;<span class="ident" id="7208329">compareUint32Slices</span><span class="op" id="7208348">(</span><span class="ident" id="7208349">ke</span><span class="op" id="7208351">[</span><span class="num" id="7208352">0</span><span class="op" id="7208353">:</span><span class="op" id="7208354">]</span><span class="op" id="7208355">,</span>&nbsp;<span class="ident" id="7208357">testKe</span><span class="op" id="7208363">)</span><span class="op" id="7208364">;</span>&nbsp;<span class="ident" id="7208366">i</span>&nbsp;<span class="op" id="7208368">&gt;=</span>&nbsp;<span class="num" id="7208371">0</span>&nbsp;<span class="op" id="7208373">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7208377">t</span><span class="op" id="7208378">.</span><span class="ident" id="7208379">Errorf</span><span class="op" id="7208385">(</span><span class="string" id="7208386">&#34;ke&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7208422">,</span>&nbsp;<span class="ident" id="7208424">i</span><span class="op" id="7208425">,</span>&nbsp;<span class="ident" id="7208427">ke</span><span class="op" id="7208429">[</span><span class="ident" id="7208430">i</span><span class="op" id="7208431">]</span><span class="op" id="7208432">,</span>&nbsp;<span class="ident" id="7208434">testKe</span><span class="op" id="7208440">[</span><span class="ident" id="7208441">i</span><span class="op" id="7208442">]</span><span class="op" id="7208443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7208446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7208449">if</span>&nbsp;<span class="ident" id="7208452">i</span>&nbsp;<span class="op" id="7208454">:=</span>&nbsp;<span class="ident" id="7208457">compareFloat32Slices</span><span class="op" id="7208477">(</span><span class="ident" id="7208478">we</span><span class="op" id="7208480">[</span><span class="num" id="7208481">0</span><span class="op" id="7208482">:</span><span class="op" id="7208483">]</span><span class="op" id="7208484">,</span>&nbsp;<span class="ident" id="7208486">testWe</span><span class="op" id="7208492">)</span><span class="op" id="7208493">;</span>&nbsp;<span class="ident" id="7208495">i</span>&nbsp;<span class="op" id="7208497">&gt;=</span>&nbsp;<span class="num" id="7208500">0</span>&nbsp;<span class="op" id="7208502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7208506">t</span><span class="op" id="7208507">.</span><span class="ident" id="7208508">Errorf</span><span class="op" id="7208514">(</span><span class="string" id="7208515">&#34;we&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7208551">,</span>&nbsp;<span class="ident" id="7208553">i</span><span class="op" id="7208554">,</span>&nbsp;<span class="ident" id="7208556">we</span><span class="op" id="7208558">[</span><span class="ident" id="7208559">i</span><span class="op" id="7208560">]</span><span class="op" id="7208561">,</span>&nbsp;<span class="ident" id="7208563">testWe</span><span class="op" id="7208569">[</span><span class="ident" id="7208570">i</span><span class="op" id="7208571">]</span><span class="op" id="7208572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7208575">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7208578">if</span>&nbsp;<span class="ident" id="7208581">i</span>&nbsp;<span class="op" id="7208583">:=</span>&nbsp;<span class="ident" id="7208586">compareFloat32Slices</span><span class="op" id="7208606">(</span><span class="ident" id="7208607">fe</span><span class="op" id="7208609">[</span><span class="num" id="7208610">0</span><span class="op" id="7208611">:</span><span class="op" id="7208612">]</span><span class="op" id="7208613">,</span>&nbsp;<span class="ident" id="7208615">testFe</span><span class="op" id="7208621">)</span><span class="op" id="7208622">;</span>&nbsp;<span class="ident" id="7208624">i</span>&nbsp;<span class="op" id="7208626">&gt;=</span>&nbsp;<span class="num" id="7208629">0</span>&nbsp;<span class="op" id="7208631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7208635">t</span><span class="op" id="7208636">.</span><span class="ident" id="7208637">Errorf</span><span class="op" id="7208643">(</span><span class="string" id="7208644">&#34;fe&nbsp;disagrees&nbsp;at&nbsp;index&nbsp;%v;&nbsp;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7208680">,</span>&nbsp;<span class="ident" id="7208682">i</span><span class="op" id="7208683">,</span>&nbsp;<span class="ident" id="7208685">fe</span><span class="op" id="7208687">[</span><span class="ident" id="7208688">i</span><span class="op" id="7208689">]</span><span class="op" id="7208690">,</span>&nbsp;<span class="ident" id="7208692">testFe</span><span class="op" id="7208698">[</span><span class="ident" id="7208699">i</span><span class="op" id="7208700">]</span><span class="op" id="7208701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7208704">}</span><br>
<span class="lineno"></span><span class="op" id="7208706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">325</span><span class="comment" id="7208709">//&nbsp;For&nbsp;issue&nbsp;6721,&nbsp;the&nbsp;problem&nbsp;came&nbsp;after&nbsp;7533753&nbsp;calls,&nbsp;so&nbsp;check&nbsp;10e6.</span><br>
<span class="lineno"></span><span class="keyword" id="7208781">func</span>&nbsp;<span class="ident" id="7208786">TestFloat32</span><span class="op" id="7208797">(</span><span class="ident" id="7208798">t</span>&nbsp;<span class="op" id="7208800">*</span><span class="ident" id="7208801">testing</span><span class="op" id="7208808">.</span><span class="ident" id="7208809">T</span><span class="op" id="7208810">)</span>&nbsp;<span class="op" id="7208812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7208815">r</span>&nbsp;<span class="op" id="7208817">:=</span>&nbsp;<span class="ident" id="7208820">New</span><span class="op" id="7208823">(</span><span class="ident" id="7208824">NewSource</span><span class="op" id="7208833">(</span><span class="num" id="7208834">1</span><span class="op" id="7208835">)</span><span class="op" id="7208836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7208839">for</span>&nbsp;<span class="ident" id="7208843">ct</span>&nbsp;<span class="op" id="7208846">:=</span>&nbsp;<span class="num" id="7208849">0</span><span class="op" id="7208850">;</span>&nbsp;<span class="ident" id="7208852">ct</span>&nbsp;<span class="op" id="7208855">&lt;</span>&nbsp;<span class="num" id="7208857">10e6</span><span class="op" id="7208861">;</span>&nbsp;<span class="ident" id="7208863">ct</span><span class="op" id="7208865">++</span>&nbsp;<span class="op" id="7208868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7208872">f</span>&nbsp;<span class="op" id="7208874">:=</span>&nbsp;<span class="ident" id="7208877">r</span><span class="op" id="7208878">.</span><span class="ident" id="7208879">Float32</span><span class="op" id="7208886">(</span><span class="op" id="7208887">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7208891">if</span>&nbsp;<span class="ident" id="7208894">f</span>&nbsp;<span class="op" id="7208896">&gt;=</span>&nbsp;<span class="num" id="7208899">1</span>&nbsp;<span class="op" id="7208901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7208906">t</span><span class="op" id="7208907">.</span><span class="ident" id="7208908">Fatal</span><span class="op" id="7208913">(</span><span class="string" id="7208914">&#34;Float32()&nbsp;should&nbsp;be&nbsp;in&nbsp;range&nbsp;[0,1).&nbsp;ct:&#34;</span><span class="op" id="7208955">,</span>&nbsp;<span class="ident" id="7208957">ct</span><span class="op" id="7208959">,</span>&nbsp;<span class="string" id="7208961">&#34;f:&#34;</span><span class="op" id="7208965">,</span>&nbsp;<span class="ident" id="7208967">f</span><span class="op" id="7208968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7208972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7208975">}</span><br>
<span class="lineno"></span><span class="op" id="7208977">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span><span class="comment" id="7208980">//&nbsp;Benchmarks</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7208995">func</span>&nbsp;<span class="ident" id="7209000">BenchmarkInt63Threadsafe</span><span class="op" id="7209024">(</span><span class="ident" id="7209025">b</span>&nbsp;<span class="op" id="7209027">*</span><span class="ident" id="7209028">testing</span><span class="op" id="7209035">.</span><span class="ident" id="7209036">B</span><span class="op" id="7209037">)</span>&nbsp;<span class="op" id="7209039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7209042">for</span>&nbsp;<span class="ident" id="7209046">n</span>&nbsp;<span class="op" id="7209048">:=</span>&nbsp;<span class="ident" id="7209051">b</span><span class="op" id="7209052">.</span><span class="ident" id="7209053">N</span><span class="op" id="7209054">;</span>&nbsp;<span class="ident" id="7209056">n</span>&nbsp;<span class="op" id="7209058">&gt;</span>&nbsp;<span class="num" id="7209060">0</span><span class="op" id="7209061">;</span>&nbsp;<span class="ident" id="7209063">n</span><span class="op" id="7209064">--</span>&nbsp;<span class="op" id="7209067">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209071">Int63</span><span class="op" id="7209076">(</span><span class="op" id="7209077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7209080">}</span><br>
<span class="lineno"></span><span class="op" id="7209082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7209085">func</span>&nbsp;<span class="ident" id="7209090">BenchmarkInt63Unthreadsafe</span><span class="op" id="7209116">(</span><span class="ident" id="7209117">b</span>&nbsp;<span class="op" id="7209119">*</span><span class="ident" id="7209120">testing</span><span class="op" id="7209127">.</span><span class="ident" id="7209128">B</span><span class="op" id="7209129">)</span>&nbsp;<span class="op" id="7209131">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209134">r</span>&nbsp;<span class="op" id="7209136">:=</span>&nbsp;<span class="ident" id="7209139">New</span><span class="op" id="7209142">(</span><span class="ident" id="7209143">NewSource</span><span class="op" id="7209152">(</span><span class="num" id="7209153">1</span><span class="op" id="7209154">)</span><span class="op" id="7209155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7209158">for</span>&nbsp;<span class="ident" id="7209162">n</span>&nbsp;<span class="op" id="7209164">:=</span>&nbsp;<span class="ident" id="7209167">b</span><span class="op" id="7209168">.</span><span class="ident" id="7209169">N</span><span class="op" id="7209170">;</span>&nbsp;<span class="ident" id="7209172">n</span>&nbsp;<span class="op" id="7209174">&gt;</span>&nbsp;<span class="num" id="7209176">0</span><span class="op" id="7209177">;</span>&nbsp;<span class="ident" id="7209179">n</span><span class="op" id="7209180">--</span>&nbsp;<span class="op" id="7209183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209187">r</span><span class="op" id="7209188">.</span><span class="ident" id="7209189">Int63</span><span class="op" id="7209194">(</span><span class="op" id="7209195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7209198">}</span><br>
<span class="lineno"></span><span class="op" id="7209200">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7209203">func</span>&nbsp;<span class="ident" id="7209208">BenchmarkIntn1000</span><span class="op" id="7209225">(</span><span class="ident" id="7209226">b</span>&nbsp;<span class="op" id="7209228">*</span><span class="ident" id="7209229">testing</span><span class="op" id="7209236">.</span><span class="ident" id="7209237">B</span><span class="op" id="7209238">)</span>&nbsp;<span class="op" id="7209240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209243">r</span>&nbsp;<span class="op" id="7209245">:=</span>&nbsp;<span class="ident" id="7209248">New</span><span class="op" id="7209251">(</span><span class="ident" id="7209252">NewSource</span><span class="op" id="7209261">(</span><span class="num" id="7209262">1</span><span class="op" id="7209263">)</span><span class="op" id="7209264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7209267">for</span>&nbsp;<span class="ident" id="7209271">n</span>&nbsp;<span class="op" id="7209273">:=</span>&nbsp;<span class="ident" id="7209276">b</span><span class="op" id="7209277">.</span><span class="ident" id="7209278">N</span><span class="op" id="7209279">;</span>&nbsp;<span class="ident" id="7209281">n</span>&nbsp;<span class="op" id="7209283">&gt;</span>&nbsp;<span class="num" id="7209285">0</span><span class="op" id="7209286">;</span>&nbsp;<span class="ident" id="7209288">n</span><span class="op" id="7209289">--</span>&nbsp;<span class="op" id="7209292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209296">r</span><span class="op" id="7209297">.</span><span class="ident" id="7209298">Intn</span><span class="op" id="7209302">(</span><span class="num" id="7209303">1000</span><span class="op" id="7209307">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7209310">}</span><br>
<span class="lineno"></span><span class="op" id="7209312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7209315">func</span>&nbsp;<span class="ident" id="7209320">BenchmarkInt63n1000</span><span class="op" id="7209339">(</span><span class="ident" id="7209340">b</span>&nbsp;<span class="op" id="7209342">*</span><span class="ident" id="7209343">testing</span><span class="op" id="7209350">.</span><span class="ident" id="7209351">B</span><span class="op" id="7209352">)</span>&nbsp;<span class="op" id="7209354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209357">r</span>&nbsp;<span class="op" id="7209359">:=</span>&nbsp;<span class="ident" id="7209362">New</span><span class="op" id="7209365">(</span><span class="ident" id="7209366">NewSource</span><span class="op" id="7209375">(</span><span class="num" id="7209376">1</span><span class="op" id="7209377">)</span><span class="op" id="7209378">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7209381">for</span>&nbsp;<span class="ident" id="7209385">n</span>&nbsp;<span class="op" id="7209387">:=</span>&nbsp;<span class="ident" id="7209390">b</span><span class="op" id="7209391">.</span><span class="ident" id="7209392">N</span><span class="op" id="7209393">;</span>&nbsp;<span class="ident" id="7209395">n</span>&nbsp;<span class="op" id="7209397">&gt;</span>&nbsp;<span class="num" id="7209399">0</span><span class="op" id="7209400">;</span>&nbsp;<span class="ident" id="7209402">n</span><span class="op" id="7209403">--</span>&nbsp;<span class="op" id="7209406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209410">r</span><span class="op" id="7209411">.</span><span class="ident" id="7209412">Int63n</span><span class="op" id="7209418">(</span><span class="num" id="7209419">1000</span><span class="op" id="7209423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7209426">}</span><br>
<span class="lineno"></span><span class="op" id="7209428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span><span class="keyword" id="7209431">func</span>&nbsp;<span class="ident" id="7209436">BenchmarkInt31n1000</span><span class="op" id="7209455">(</span><span class="ident" id="7209456">b</span>&nbsp;<span class="op" id="7209458">*</span><span class="ident" id="7209459">testing</span><span class="op" id="7209466">.</span><span class="ident" id="7209467">B</span><span class="op" id="7209468">)</span>&nbsp;<span class="op" id="7209470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209473">r</span>&nbsp;<span class="op" id="7209475">:=</span>&nbsp;<span class="ident" id="7209478">New</span><span class="op" id="7209481">(</span><span class="ident" id="7209482">NewSource</span><span class="op" id="7209491">(</span><span class="num" id="7209492">1</span><span class="op" id="7209493">)</span><span class="op" id="7209494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7209497">for</span>&nbsp;<span class="ident" id="7209501">n</span>&nbsp;<span class="op" id="7209503">:=</span>&nbsp;<span class="ident" id="7209506">b</span><span class="op" id="7209507">.</span><span class="ident" id="7209508">N</span><span class="op" id="7209509">;</span>&nbsp;<span class="ident" id="7209511">n</span>&nbsp;<span class="op" id="7209513">&gt;</span>&nbsp;<span class="num" id="7209515">0</span><span class="op" id="7209516">;</span>&nbsp;<span class="ident" id="7209518">n</span><span class="op" id="7209519">--</span>&nbsp;<span class="op" id="7209522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209526">r</span><span class="op" id="7209527">.</span><span class="ident" id="7209528">Int31n</span><span class="op" id="7209534">(</span><span class="num" id="7209535">1000</span><span class="op" id="7209539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7209542">}</span><br>
<span class="lineno">370</span><span class="op" id="7209544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7209547">func</span>&nbsp;<span class="ident" id="7209552">BenchmarkFloat32</span><span class="op" id="7209568">(</span><span class="ident" id="7209569">b</span>&nbsp;<span class="op" id="7209571">*</span><span class="ident" id="7209572">testing</span><span class="op" id="7209579">.</span><span class="ident" id="7209580">B</span><span class="op" id="7209581">)</span>&nbsp;<span class="op" id="7209583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209586">r</span>&nbsp;<span class="op" id="7209588">:=</span>&nbsp;<span class="ident" id="7209591">New</span><span class="op" id="7209594">(</span><span class="ident" id="7209595">NewSource</span><span class="op" id="7209604">(</span><span class="num" id="7209605">1</span><span class="op" id="7209606">)</span><span class="op" id="7209607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7209610">for</span>&nbsp;<span class="ident" id="7209614">n</span>&nbsp;<span class="op" id="7209616">:=</span>&nbsp;<span class="ident" id="7209619">b</span><span class="op" id="7209620">.</span><span class="ident" id="7209621">N</span><span class="op" id="7209622">;</span>&nbsp;<span class="ident" id="7209624">n</span>&nbsp;<span class="op" id="7209626">&gt;</span>&nbsp;<span class="num" id="7209628">0</span><span class="op" id="7209629">;</span>&nbsp;<span class="ident" id="7209631">n</span><span class="op" id="7209632">--</span>&nbsp;<span class="op" id="7209635">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209639">r</span><span class="op" id="7209640">.</span><span class="ident" id="7209641">Float32</span><span class="op" id="7209648">(</span><span class="op" id="7209649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7209652">}</span><br>
<span class="lineno"></span><span class="op" id="7209654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7209657">func</span>&nbsp;<span class="ident" id="7209662">BenchmarkFloat64</span><span class="op" id="7209678">(</span><span class="ident" id="7209679">b</span>&nbsp;<span class="op" id="7209681">*</span><span class="ident" id="7209682">testing</span><span class="op" id="7209689">.</span><span class="ident" id="7209690">B</span><span class="op" id="7209691">)</span>&nbsp;<span class="op" id="7209693">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209696">r</span>&nbsp;<span class="op" id="7209698">:=</span>&nbsp;<span class="ident" id="7209701">New</span><span class="op" id="7209704">(</span><span class="ident" id="7209705">NewSource</span><span class="op" id="7209714">(</span><span class="num" id="7209715">1</span><span class="op" id="7209716">)</span><span class="op" id="7209717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7209720">for</span>&nbsp;<span class="ident" id="7209724">n</span>&nbsp;<span class="op" id="7209726">:=</span>&nbsp;<span class="ident" id="7209729">b</span><span class="op" id="7209730">.</span><span class="ident" id="7209731">N</span><span class="op" id="7209732">;</span>&nbsp;<span class="ident" id="7209734">n</span>&nbsp;<span class="op" id="7209736">&gt;</span>&nbsp;<span class="num" id="7209738">0</span><span class="op" id="7209739">;</span>&nbsp;<span class="ident" id="7209741">n</span><span class="op" id="7209742">--</span>&nbsp;<span class="op" id="7209745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209749">r</span><span class="op" id="7209750">.</span><span class="ident" id="7209751">Float64</span><span class="op" id="7209758">(</span><span class="op" id="7209759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7209762">}</span><br>
<span class="lineno"></span><span class="op" id="7209764">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="7209767">func</span>&nbsp;<span class="ident" id="7209772">BenchmarkPerm3</span><span class="op" id="7209786">(</span><span class="ident" id="7209787">b</span>&nbsp;<span class="op" id="7209789">*</span><span class="ident" id="7209790">testing</span><span class="op" id="7209797">.</span><span class="ident" id="7209798">B</span><span class="op" id="7209799">)</span>&nbsp;<span class="op" id="7209801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209804">r</span>&nbsp;<span class="op" id="7209806">:=</span>&nbsp;<span class="ident" id="7209809">New</span><span class="op" id="7209812">(</span><span class="ident" id="7209813">NewSource</span><span class="op" id="7209822">(</span><span class="num" id="7209823">1</span><span class="op" id="7209824">)</span><span class="op" id="7209825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7209828">for</span>&nbsp;<span class="ident" id="7209832">n</span>&nbsp;<span class="op" id="7209834">:=</span>&nbsp;<span class="ident" id="7209837">b</span><span class="op" id="7209838">.</span><span class="ident" id="7209839">N</span><span class="op" id="7209840">;</span>&nbsp;<span class="ident" id="7209842">n</span>&nbsp;<span class="op" id="7209844">&gt;</span>&nbsp;<span class="num" id="7209846">0</span><span class="op" id="7209847">;</span>&nbsp;<span class="ident" id="7209849">n</span><span class="op" id="7209850">--</span>&nbsp;<span class="op" id="7209853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209857">r</span><span class="op" id="7209858">.</span><span class="ident" id="7209859">Perm</span><span class="op" id="7209863">(</span><span class="num" id="7209864">3</span><span class="op" id="7209865">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7209868">}</span><br>
<span class="lineno"></span><span class="op" id="7209870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7209873">func</span>&nbsp;<span class="ident" id="7209878">BenchmarkPerm30</span><span class="op" id="7209893">(</span><span class="ident" id="7209894">b</span>&nbsp;<span class="op" id="7209896">*</span><span class="ident" id="7209897">testing</span><span class="op" id="7209904">.</span><span class="ident" id="7209905">B</span><span class="op" id="7209906">)</span>&nbsp;<span class="op" id="7209908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209911">r</span>&nbsp;<span class="op" id="7209913">:=</span>&nbsp;<span class="ident" id="7209916">New</span><span class="op" id="7209919">(</span><span class="ident" id="7209920">NewSource</span><span class="op" id="7209929">(</span><span class="num" id="7209930">1</span><span class="op" id="7209931">)</span><span class="op" id="7209932">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7209935">for</span>&nbsp;<span class="ident" id="7209939">n</span>&nbsp;<span class="op" id="7209941">:=</span>&nbsp;<span class="ident" id="7209944">b</span><span class="op" id="7209945">.</span><span class="ident" id="7209946">N</span><span class="op" id="7209947">;</span>&nbsp;<span class="ident" id="7209949">n</span>&nbsp;<span class="op" id="7209951">&gt;</span>&nbsp;<span class="num" id="7209953">0</span><span class="op" id="7209954">;</span>&nbsp;<span class="ident" id="7209956">n</span><span class="op" id="7209957">--</span>&nbsp;<span class="op" id="7209960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7209964">r</span><span class="op" id="7209965">.</span><span class="ident" id="7209966">Perm</span><span class="op" id="7209970">(</span><span class="num" id="7209971">30</span><span class="op" id="7209973">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7209976">}</span><br>
<span class="lineno"></span><span class="op" id="7209978">}</span>
</div>
</body>
</html>
