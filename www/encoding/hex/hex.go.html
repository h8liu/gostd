<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4165197">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4165252">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4165306">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4165357">//&nbsp;Package&nbsp;hex&nbsp;implements&nbsp;hexadecimal&nbsp;encoding&nbsp;and&nbsp;decoding.</span><br>
<span class="lineno"></span><span class="keyword" id="4165418">package</span>&nbsp;<span class="ident" id="4165426">hex</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4165431">import</span>&nbsp;<span class="op" id="4165438">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4165441">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4165450">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4165460">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4165467">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4165472">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="4165475">const</span>&nbsp;<span class="ident" id="4165481">hextable</span>&nbsp;<span class="op" id="4165490">=</span>&nbsp;<span class="string" id="4165492">&#34;0123456789abcdef&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4165512">//&nbsp;EncodedLen&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;an&nbsp;encoding&nbsp;of&nbsp;n&nbsp;source&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="4165579">func</span>&nbsp;<span class="ident" id="4165584">EncodedLen</span><span class="op" id="4165594">(</span><span class="ident" id="4165595">n</span>&nbsp;<span class="builtintype" id="4165597">int</span><span class="op" id="4165600">)</span>&nbsp;<span class="builtintype" id="4165602">int</span>&nbsp;<span class="op" id="4165606">{</span>&nbsp;<span class="keyword" id="4165608">return</span>&nbsp;<span class="ident" id="4165615">n</span>&nbsp;<span class="op" id="4165617">*</span>&nbsp;<span class="num" id="4165619">2</span>&nbsp;<span class="op" id="4165621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="4165624">//&nbsp;Encode&nbsp;encodes&nbsp;src&nbsp;into&nbsp;EncodedLen(len(src))</span><br>
<span class="lineno"></span><span class="comment" id="4165672">//&nbsp;bytes&nbsp;of&nbsp;dst.&nbsp;&nbsp;As&nbsp;a&nbsp;convenience,&nbsp;it&nbsp;returns&nbsp;the&nbsp;number</span><br>
<span class="lineno"></span><span class="comment" id="4165730">//&nbsp;of&nbsp;bytes&nbsp;written&nbsp;to&nbsp;dst,&nbsp;but&nbsp;this&nbsp;value&nbsp;is&nbsp;always&nbsp;EncodedLen(len(src)).</span><br>
<span class="lineno"></span><span class="comment" id="4165805">//&nbsp;Encode&nbsp;implements&nbsp;hexadecimal&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="keyword" id="4165848">func</span>&nbsp;<span class="ident" id="4165853">Encode</span><span class="op" id="4165859">(</span><span class="ident" id="4165860">dst</span><span class="op" id="4165863">,</span>&nbsp;<span class="ident" id="4165865">src</span>&nbsp;<span class="op" id="4165869">[</span><span class="op" id="4165870">]</span><span class="builtintype" id="4165871">byte</span><span class="op" id="4165875">)</span>&nbsp;<span class="builtintype" id="4165877">int</span>&nbsp;<span class="op" id="4165881">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4165884">for</span>&nbsp;<span class="ident" id="4165888">i</span><span class="op" id="4165889">,</span>&nbsp;<span class="ident" id="4165891">v</span>&nbsp;<span class="op" id="4165893">:=</span>&nbsp;<span class="keyword" id="4165896">range</span>&nbsp;<span class="ident" id="4165902">src</span>&nbsp;<span class="op" id="4165906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4165910">dst</span><span class="op" id="4165913">[</span><span class="ident" id="4165914">i</span><span class="op" id="4165915">*</span><span class="num" id="4165916">2</span><span class="op" id="4165917">]</span>&nbsp;<span class="op" id="4165919">=</span>&nbsp;<span class="ident" id="4165921">hextable</span><span class="op" id="4165929">[</span><span class="ident" id="4165930">v</span><span class="op" id="4165931">&gt;&gt;</span><span class="num" id="4165933">4</span><span class="op" id="4165934">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4165938">dst</span><span class="op" id="4165941">[</span><span class="ident" id="4165942">i</span><span class="op" id="4165943">*</span><span class="num" id="4165944">2</span><span class="op" id="4165945">+</span><span class="num" id="4165946">1</span><span class="op" id="4165947">]</span>&nbsp;<span class="op" id="4165949">=</span>&nbsp;<span class="ident" id="4165951">hextable</span><span class="op" id="4165959">[</span><span class="ident" id="4165960">v</span><span class="op" id="4165961">&amp;</span><span class="num" id="4165962">0x0f</span><span class="op" id="4165966">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4165969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4165973">return</span>&nbsp;<span class="builtinfunc" id="4165980">len</span><span class="op" id="4165983">(</span><span class="ident" id="4165984">src</span><span class="op" id="4165987">)</span>&nbsp;<span class="op" id="4165989">*</span>&nbsp;<span class="num" id="4165991">2</span><br>
<span class="lineno"></span><span class="op" id="4165993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4165996">//&nbsp;ErrLength&nbsp;results&nbsp;from&nbsp;decoding&nbsp;an&nbsp;odd&nbsp;length&nbsp;slice.</span><br>
<span class="lineno"></span><span class="keyword" id="4166052">var</span>&nbsp;<span class="ident" id="4166056">ErrLength</span>&nbsp;<span class="op" id="4166066">=</span>&nbsp;<span class="ident" id="4166068">errors</span><span class="op" id="4166074">.</span><span class="ident" id="4166075">New</span><span class="op" id="4166078">(</span><span class="string" id="4166079">&#34;encoding/hex:&nbsp;odd&nbsp;length&nbsp;hex&nbsp;string&#34;</span><span class="op" id="4166116">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="4166119">//&nbsp;InvalidByteError&nbsp;values&nbsp;describe&nbsp;errors&nbsp;resulting&nbsp;from&nbsp;an&nbsp;invalid&nbsp;byte&nbsp;in&nbsp;a&nbsp;hex&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="4166210">type</span>&nbsp;<span class="ident" id="4166215">InvalidByteError</span>&nbsp;<span class="builtintype" id="4166232">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4166238">func</span>&nbsp;<span class="op" id="4166243">(</span><span class="ident" id="4166244">e</span>&nbsp;<span class="ident" id="4166246">InvalidByteError</span><span class="op" id="4166262">)</span>&nbsp;<span class="ident" id="4166264">Error</span><span class="op" id="4166269">(</span><span class="op" id="4166270">)</span>&nbsp;<span class="builtintype" id="4166272">string</span>&nbsp;<span class="op" id="4166279">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4166282">return</span>&nbsp;<span class="ident" id="4166289">fmt</span><span class="op" id="4166292">.</span><span class="ident" id="4166293">Sprintf</span><span class="op" id="4166300">(</span><span class="string" id="4166301">&#34;encoding/hex:&nbsp;invalid&nbsp;byte:&nbsp;%#U&#34;</span><span class="op" id="4166334">,</span>&nbsp;<span class="builtintype" id="4166336">rune</span><span class="op" id="4166340">(</span><span class="ident" id="4166341">e</span><span class="op" id="4166342">)</span><span class="op" id="4166343">)</span><br>
<span class="lineno"></span><span class="op" id="4166345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4166348">func</span>&nbsp;<span class="ident" id="4166353">DecodedLen</span><span class="op" id="4166363">(</span><span class="ident" id="4166364">x</span>&nbsp;<span class="builtintype" id="4166366">int</span><span class="op" id="4166369">)</span>&nbsp;<span class="builtintype" id="4166371">int</span>&nbsp;<span class="op" id="4166375">{</span>&nbsp;<span class="keyword" id="4166377">return</span>&nbsp;<span class="ident" id="4166384">x</span>&nbsp;<span class="op" id="4166386">/</span>&nbsp;<span class="num" id="4166388">2</span>&nbsp;<span class="op" id="4166390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="4166393">//&nbsp;Decode&nbsp;decodes&nbsp;src&nbsp;into&nbsp;DecodedLen(len(src))&nbsp;bytes,&nbsp;returning&nbsp;the&nbsp;actual</span><br>
<span class="lineno"></span><span class="comment" id="4166469">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;written&nbsp;to&nbsp;dst.</span><br>
<span class="lineno"></span><span class="comment" id="4166504">//</span><br>
<span class="lineno"></span><span class="comment" id="4166507">//&nbsp;If&nbsp;Decode&nbsp;encounters&nbsp;invalid&nbsp;input,&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;failure.</span><br>
<span class="lineno"></span><span class="keyword" id="4166590">func</span>&nbsp;<span class="ident" id="4166595">Decode</span><span class="op" id="4166601">(</span><span class="ident" id="4166602">dst</span><span class="op" id="4166605">,</span>&nbsp;<span class="ident" id="4166607">src</span>&nbsp;<span class="op" id="4166611">[</span><span class="op" id="4166612">]</span><span class="builtintype" id="4166613">byte</span><span class="op" id="4166617">)</span>&nbsp;<span class="op" id="4166619">(</span><span class="builtintype" id="4166620">int</span><span class="op" id="4166623">,</span>&nbsp;<span class="builtintype" id="4166625">error</span><span class="op" id="4166630">)</span>&nbsp;<span class="op" id="4166632">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4166635">if</span>&nbsp;<span class="builtinfunc" id="4166638">len</span><span class="op" id="4166641">(</span><span class="ident" id="4166642">src</span><span class="op" id="4166645">)</span><span class="op" id="4166646">%</span><span class="num" id="4166647">2</span>&nbsp;<span class="op" id="4166649">==</span>&nbsp;<span class="num" id="4166652">1</span>&nbsp;<span class="op" id="4166654">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4166658">return</span>&nbsp;<span class="num" id="4166665">0</span><span class="op" id="4166666">,</span>&nbsp;<span class="ident" id="4166668">ErrLength</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4166679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4166683">for</span>&nbsp;<span class="ident" id="4166687">i</span>&nbsp;<span class="op" id="4166689">:=</span>&nbsp;<span class="num" id="4166692">0</span><span class="op" id="4166693">;</span>&nbsp;<span class="ident" id="4166695">i</span>&nbsp;<span class="op" id="4166697">&lt;</span>&nbsp;<span class="builtinfunc" id="4166699">len</span><span class="op" id="4166702">(</span><span class="ident" id="4166703">src</span><span class="op" id="4166706">)</span><span class="op" id="4166707">/</span><span class="num" id="4166708">2</span><span class="op" id="4166709">;</span>&nbsp;<span class="ident" id="4166711">i</span><span class="op" id="4166712">++</span>&nbsp;<span class="op" id="4166715">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4166719">a</span><span class="op" id="4166720">,</span>&nbsp;<span class="ident" id="4166722">ok</span>&nbsp;<span class="op" id="4166725">:=</span>&nbsp;<span class="ident" id="4166728">fromHexChar</span><span class="op" id="4166739">(</span><span class="ident" id="4166740">src</span><span class="op" id="4166743">[</span><span class="ident" id="4166744">i</span><span class="op" id="4166745">*</span><span class="num" id="4166746">2</span><span class="op" id="4166747">]</span><span class="op" id="4166748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4166752">if</span>&nbsp;<span class="op" id="4166755">!</span><span class="ident" id="4166756">ok</span>&nbsp;<span class="op" id="4166759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4166764">return</span>&nbsp;<span class="num" id="4166771">0</span><span class="op" id="4166772">,</span>&nbsp;<span class="ident" id="4166774">InvalidByteError</span><span class="op" id="4166790">(</span><span class="ident" id="4166791">src</span><span class="op" id="4166794">[</span><span class="ident" id="4166795">i</span><span class="op" id="4166796">*</span><span class="num" id="4166797">2</span><span class="op" id="4166798">]</span><span class="op" id="4166799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4166803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4166807">b</span><span class="op" id="4166808">,</span>&nbsp;<span class="ident" id="4166810">ok</span>&nbsp;<span class="op" id="4166813">:=</span>&nbsp;<span class="ident" id="4166816">fromHexChar</span><span class="op" id="4166827">(</span><span class="ident" id="4166828">src</span><span class="op" id="4166831">[</span><span class="ident" id="4166832">i</span><span class="op" id="4166833">*</span><span class="num" id="4166834">2</span><span class="op" id="4166835">+</span><span class="num" id="4166836">1</span><span class="op" id="4166837">]</span><span class="op" id="4166838">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4166842">if</span>&nbsp;<span class="op" id="4166845">!</span><span class="ident" id="4166846">ok</span>&nbsp;<span class="op" id="4166849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4166854">return</span>&nbsp;<span class="num" id="4166861">0</span><span class="op" id="4166862">,</span>&nbsp;<span class="ident" id="4166864">InvalidByteError</span><span class="op" id="4166880">(</span><span class="ident" id="4166881">src</span><span class="op" id="4166884">[</span><span class="ident" id="4166885">i</span><span class="op" id="4166886">*</span><span class="num" id="4166887">2</span><span class="op" id="4166888">+</span><span class="num" id="4166889">1</span><span class="op" id="4166890">]</span><span class="op" id="4166891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4166895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4166899">dst</span><span class="op" id="4166902">[</span><span class="ident" id="4166903">i</span><span class="op" id="4166904">]</span>&nbsp;<span class="op" id="4166906">=</span>&nbsp;<span class="op" id="4166908">(</span><span class="ident" id="4166909">a</span>&nbsp;<span class="op" id="4166911">&lt;&lt;</span>&nbsp;<span class="num" id="4166914">4</span><span class="op" id="4166915">)</span>&nbsp;<span class="op" id="4166917">|</span>&nbsp;<span class="ident" id="4166919">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4166922">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4166926">return</span>&nbsp;<span class="builtinfunc" id="4166933">len</span><span class="op" id="4166936">(</span><span class="ident" id="4166937">src</span><span class="op" id="4166940">)</span>&nbsp;<span class="op" id="4166942">/</span>&nbsp;<span class="num" id="4166944">2</span><span class="op" id="4166945">,</span>&nbsp;<span class="ident" id="4166947">nil</span><br>
<span class="lineno"></span><span class="op" id="4166951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4166954">//&nbsp;fromHexChar&nbsp;converts&nbsp;a&nbsp;hex&nbsp;character&nbsp;into&nbsp;its&nbsp;value&nbsp;and&nbsp;a&nbsp;success&nbsp;flag.</span><br>
<span class="lineno">70</span><span class="keyword" id="4167029">func</span>&nbsp;<span class="ident" id="4167034">fromHexChar</span><span class="op" id="4167045">(</span><span class="ident" id="4167046">c</span>&nbsp;<span class="builtintype" id="4167048">byte</span><span class="op" id="4167052">)</span>&nbsp;<span class="op" id="4167054">(</span><span class="builtintype" id="4167055">byte</span><span class="op" id="4167059">,</span>&nbsp;<span class="builtintype" id="4167061">bool</span><span class="op" id="4167065">)</span>&nbsp;<span class="op" id="4167067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167070">switch</span>&nbsp;<span class="op" id="4167077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167080">case</span>&nbsp;<span class="string" id="4167085">&#39;0&#39;</span>&nbsp;<span class="op" id="4167089">&lt;=</span>&nbsp;<span class="ident" id="4167092">c</span>&nbsp;<span class="op" id="4167094">&amp;&amp;</span>&nbsp;<span class="ident" id="4167097">c</span>&nbsp;<span class="op" id="4167099">&lt;=</span>&nbsp;<span class="string" id="4167102">&#39;9&#39;</span><span class="op" id="4167105">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167109">return</span>&nbsp;<span class="ident" id="4167116">c</span>&nbsp;<span class="op" id="4167118">-</span>&nbsp;<span class="string" id="4167120">&#39;0&#39;</span><span class="op" id="4167123">,</span>&nbsp;<span class="ident" id="4167125">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167131">case</span>&nbsp;<span class="string" id="4167136">&#39;a&#39;</span>&nbsp;<span class="op" id="4167140">&lt;=</span>&nbsp;<span class="ident" id="4167143">c</span>&nbsp;<span class="op" id="4167145">&amp;&amp;</span>&nbsp;<span class="ident" id="4167148">c</span>&nbsp;<span class="op" id="4167150">&lt;=</span>&nbsp;<span class="string" id="4167153">&#39;f&#39;</span><span class="op" id="4167156">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167160">return</span>&nbsp;<span class="ident" id="4167167">c</span>&nbsp;<span class="op" id="4167169">-</span>&nbsp;<span class="string" id="4167171">&#39;a&#39;</span>&nbsp;<span class="op" id="4167175">+</span>&nbsp;<span class="num" id="4167177">10</span><span class="op" id="4167179">,</span>&nbsp;<span class="ident" id="4167181">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167187">case</span>&nbsp;<span class="string" id="4167192">&#39;A&#39;</span>&nbsp;<span class="op" id="4167196">&lt;=</span>&nbsp;<span class="ident" id="4167199">c</span>&nbsp;<span class="op" id="4167201">&amp;&amp;</span>&nbsp;<span class="ident" id="4167204">c</span>&nbsp;<span class="op" id="4167206">&lt;=</span>&nbsp;<span class="string" id="4167209">&#39;F&#39;</span><span class="op" id="4167212">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167216">return</span>&nbsp;<span class="ident" id="4167223">c</span>&nbsp;<span class="op" id="4167225">-</span>&nbsp;<span class="string" id="4167227">&#39;A&#39;</span>&nbsp;<span class="op" id="4167231">+</span>&nbsp;<span class="num" id="4167233">10</span><span class="op" id="4167235">,</span>&nbsp;<span class="ident" id="4167237">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4167243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167247">return</span>&nbsp;<span class="num" id="4167254">0</span><span class="op" id="4167255">,</span>&nbsp;<span class="ident" id="4167257">false</span><br>
<span class="lineno"></span><span class="op" id="4167263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4167266">//&nbsp;EncodeToString&nbsp;returns&nbsp;the&nbsp;hexadecimal&nbsp;encoding&nbsp;of&nbsp;src.</span><br>
<span class="lineno"></span><span class="keyword" id="4167325">func</span>&nbsp;<span class="ident" id="4167330">EncodeToString</span><span class="op" id="4167344">(</span><span class="ident" id="4167345">src</span>&nbsp;<span class="op" id="4167349">[</span><span class="op" id="4167350">]</span><span class="builtintype" id="4167351">byte</span><span class="op" id="4167355">)</span>&nbsp;<span class="builtintype" id="4167357">string</span>&nbsp;<span class="op" id="4167364">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4167367">dst</span>&nbsp;<span class="op" id="4167371">:=</span>&nbsp;<span class="builtinfunc" id="4167374">make</span><span class="op" id="4167378">(</span><span class="op" id="4167379">[</span><span class="op" id="4167380">]</span><span class="builtintype" id="4167381">byte</span><span class="op" id="4167385">,</span>&nbsp;<span class="ident" id="4167387">EncodedLen</span><span class="op" id="4167397">(</span><span class="builtinfunc" id="4167398">len</span><span class="op" id="4167401">(</span><span class="ident" id="4167402">src</span><span class="op" id="4167405">)</span><span class="op" id="4167406">)</span><span class="op" id="4167407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4167410">Encode</span><span class="op" id="4167416">(</span><span class="ident" id="4167417">dst</span><span class="op" id="4167420">,</span>&nbsp;<span class="ident" id="4167422">src</span><span class="op" id="4167425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167428">return</span>&nbsp;<span class="builtintype" id="4167435">string</span><span class="op" id="4167441">(</span><span class="ident" id="4167442">dst</span><span class="op" id="4167445">)</span><br>
<span class="lineno"></span><span class="op" id="4167447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="4167450">//&nbsp;DecodeString&nbsp;returns&nbsp;the&nbsp;bytes&nbsp;represented&nbsp;by&nbsp;the&nbsp;hexadecimal&nbsp;string&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="4167525">func</span>&nbsp;<span class="ident" id="4167530">DecodeString</span><span class="op" id="4167542">(</span><span class="ident" id="4167543">s</span>&nbsp;<span class="builtintype" id="4167545">string</span><span class="op" id="4167551">)</span>&nbsp;<span class="op" id="4167553">(</span><span class="op" id="4167554">[</span><span class="op" id="4167555">]</span><span class="builtintype" id="4167556">byte</span><span class="op" id="4167560">,</span>&nbsp;<span class="builtintype" id="4167562">error</span><span class="op" id="4167567">)</span>&nbsp;<span class="op" id="4167569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4167572">src</span>&nbsp;<span class="op" id="4167576">:=</span>&nbsp;<span class="op" id="4167579">[</span><span class="op" id="4167580">]</span><span class="builtintype" id="4167581">byte</span><span class="op" id="4167585">(</span><span class="ident" id="4167586">s</span><span class="op" id="4167587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4167590">dst</span>&nbsp;<span class="op" id="4167594">:=</span>&nbsp;<span class="builtinfunc" id="4167597">make</span><span class="op" id="4167601">(</span><span class="op" id="4167602">[</span><span class="op" id="4167603">]</span><span class="builtintype" id="4167604">byte</span><span class="op" id="4167608">,</span>&nbsp;<span class="ident" id="4167610">DecodedLen</span><span class="op" id="4167620">(</span><span class="builtinfunc" id="4167621">len</span><span class="op" id="4167624">(</span><span class="ident" id="4167625">src</span><span class="op" id="4167628">)</span><span class="op" id="4167629">)</span><span class="op" id="4167630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4167633">_</span><span class="op" id="4167634">,</span>&nbsp;<span class="ident" id="4167636">err</span>&nbsp;<span class="op" id="4167640">:=</span>&nbsp;<span class="ident" id="4167643">Decode</span><span class="op" id="4167649">(</span><span class="ident" id="4167650">dst</span><span class="op" id="4167653">,</span>&nbsp;<span class="ident" id="4167655">src</span><span class="op" id="4167658">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167661">if</span>&nbsp;<span class="ident" id="4167664">err</span>&nbsp;<span class="op" id="4167668">!=</span>&nbsp;<span class="ident" id="4167671">nil</span>&nbsp;<span class="op" id="4167675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167679">return</span>&nbsp;<span class="ident" id="4167686">nil</span><span class="op" id="4167689">,</span>&nbsp;<span class="ident" id="4167691">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4167696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167699">return</span>&nbsp;<span class="ident" id="4167706">dst</span><span class="op" id="4167709">,</span>&nbsp;<span class="ident" id="4167711">nil</span><br>
<span class="lineno"></span><span class="op" id="4167715">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="4167718">//&nbsp;Dump&nbsp;returns&nbsp;a&nbsp;string&nbsp;that&nbsp;contains&nbsp;a&nbsp;hex&nbsp;dump&nbsp;of&nbsp;the&nbsp;given&nbsp;data.&nbsp;The&nbsp;format</span><br>
<span class="lineno"></span><span class="comment" id="4167798">//&nbsp;of&nbsp;the&nbsp;hex&nbsp;dump&nbsp;matches&nbsp;the&nbsp;output&nbsp;of&nbsp;`hexdump&nbsp;-C`&nbsp;on&nbsp;the&nbsp;command&nbsp;line.</span><br>
<span class="lineno"></span><span class="keyword" id="4167873">func</span>&nbsp;<span class="ident" id="4167878">Dump</span><span class="op" id="4167882">(</span><span class="ident" id="4167883">data</span>&nbsp;<span class="op" id="4167888">[</span><span class="op" id="4167889">]</span><span class="builtintype" id="4167890">byte</span><span class="op" id="4167894">)</span>&nbsp;<span class="builtintype" id="4167896">string</span>&nbsp;<span class="op" id="4167903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167906">var</span>&nbsp;<span class="ident" id="4167910">buf</span>&nbsp;<span class="ident" id="4167914">bytes</span><span class="op" id="4167919">.</span><span class="ident" id="4167920">Buffer</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4167928">dumper</span>&nbsp;<span class="op" id="4167935">:=</span>&nbsp;<span class="ident" id="4167938">Dumper</span><span class="op" id="4167944">(</span><span class="op" id="4167945">&amp;</span><span class="ident" id="4167946">buf</span><span class="op" id="4167949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4167952">dumper</span><span class="op" id="4167958">.</span><span class="ident" id="4167959">Write</span><span class="op" id="4167964">(</span><span class="ident" id="4167965">data</span><span class="op" id="4167969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4167972">dumper</span><span class="op" id="4167978">.</span><span class="ident" id="4167979">Close</span><span class="op" id="4167984">(</span><span class="op" id="4167985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4167988">return</span>&nbsp;<span class="builtintype" id="4167995">string</span><span class="op" id="4168001">(</span><span class="ident" id="4168002">buf</span><span class="op" id="4168005">.</span><span class="ident" id="4168006">Bytes</span><span class="op" id="4168011">(</span><span class="op" id="4168012">)</span><span class="op" id="4168013">)</span><br>
<span class="lineno"></span><span class="op" id="4168015">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="4168018">//&nbsp;Dumper&nbsp;returns&nbsp;a&nbsp;WriteCloser&nbsp;that&nbsp;writes&nbsp;a&nbsp;hex&nbsp;dump&nbsp;of&nbsp;all&nbsp;written&nbsp;data&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="4168096">//&nbsp;w.&nbsp;The&nbsp;format&nbsp;of&nbsp;the&nbsp;dump&nbsp;matches&nbsp;the&nbsp;output&nbsp;of&nbsp;`hexdump&nbsp;-C`&nbsp;on&nbsp;the&nbsp;command</span><br>
<span class="lineno"></span><span class="comment" id="4168175">//&nbsp;line.</span><br>
<span class="lineno"></span><span class="keyword" id="4168184">func</span>&nbsp;<span class="ident" id="4168189">Dumper</span><span class="op" id="4168195">(</span><span class="ident" id="4168196">w</span>&nbsp;<span class="ident" id="4168198">io</span><span class="op" id="4168200">.</span><span class="ident" id="4168201">Writer</span><span class="op" id="4168207">)</span>&nbsp;<span class="ident" id="4168209">io</span><span class="op" id="4168211">.</span><span class="ident" id="4168212">WriteCloser</span>&nbsp;<span class="op" id="4168224">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4168227">return</span>&nbsp;<span class="op" id="4168234">&amp;</span><span class="ident" id="4168235">dumper</span><span class="op" id="4168241">{</span><span class="ident" id="4168242">w</span><span class="op" id="4168243">:</span>&nbsp;<span class="ident" id="4168245">w</span><span class="op" id="4168246">}</span><br>
<span class="lineno"></span><span class="op" id="4168248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4168251">type</span>&nbsp;<span class="ident" id="4168256">dumper</span>&nbsp;<span class="keyword" id="4168263">struct</span>&nbsp;<span class="op" id="4168270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4168273">w</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4168284">io</span><span class="op" id="4168286">.</span><span class="ident" id="4168287">Writer</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4168295">rightChars</span>&nbsp;<span class="op" id="4168306">[</span><span class="num" id="4168307">18</span><span class="op" id="4168309">]</span><span class="builtintype" id="4168310">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4168316">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4168327">[</span><span class="num" id="4168328">14</span><span class="op" id="4168330">]</span><span class="builtintype" id="4168331">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4168337">used</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4168348">int</span>&nbsp;&nbsp;<span class="comment" id="4168353">//&nbsp;number&nbsp;of&nbsp;bytes&nbsp;in&nbsp;the&nbsp;current&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4168393">n</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4168404">uint</span>&nbsp;<span class="comment" id="4168409">//&nbsp;number&nbsp;of&nbsp;bytes,&nbsp;total</span><br>
<span class="lineno"></span><span class="op" id="4168435">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="4168438">func</span>&nbsp;<span class="ident" id="4168443">toChar</span><span class="op" id="4168449">(</span><span class="ident" id="4168450">b</span>&nbsp;<span class="builtintype" id="4168452">byte</span><span class="op" id="4168456">)</span>&nbsp;<span class="builtintype" id="4168458">byte</span>&nbsp;<span class="op" id="4168463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4168466">if</span>&nbsp;<span class="ident" id="4168469">b</span>&nbsp;<span class="op" id="4168471">&lt;</span>&nbsp;<span class="num" id="4168473">32</span>&nbsp;<span class="op" id="4168476">||</span>&nbsp;<span class="ident" id="4168479">b</span>&nbsp;<span class="op" id="4168481">&gt;</span>&nbsp;<span class="num" id="4168483">126</span>&nbsp;<span class="op" id="4168487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4168491">return</span>&nbsp;<span class="string" id="4168498">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4168503">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4168506">return</span>&nbsp;<span class="ident" id="4168513">b</span><br>
<span class="lineno"></span><span class="op" id="4168515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4168518">func</span>&nbsp;<span class="op" id="4168523">(</span><span class="ident" id="4168524">h</span>&nbsp;<span class="op" id="4168526">*</span><span class="ident" id="4168527">dumper</span><span class="op" id="4168533">)</span>&nbsp;<span class="ident" id="4168535">Write</span><span class="op" id="4168540">(</span><span class="ident" id="4168541">data</span>&nbsp;<span class="op" id="4168546">[</span><span class="op" id="4168547">]</span><span class="builtintype" id="4168548">byte</span><span class="op" id="4168552">)</span>&nbsp;<span class="op" id="4168554">(</span><span class="ident" id="4168555">n</span>&nbsp;<span class="builtintype" id="4168557">int</span><span class="op" id="4168560">,</span>&nbsp;<span class="ident" id="4168562">err</span>&nbsp;<span class="builtintype" id="4168566">error</span><span class="op" id="4168571">)</span>&nbsp;<span class="op" id="4168573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4168576">//&nbsp;Output&nbsp;lines&nbsp;look&nbsp;like:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4168604">//&nbsp;00000010&nbsp;&nbsp;2e&nbsp;2f&nbsp;30&nbsp;31&nbsp;32&nbsp;33&nbsp;34&nbsp;35&nbsp;&nbsp;36&nbsp;37&nbsp;38&nbsp;39&nbsp;3a&nbsp;3b&nbsp;3c&nbsp;3d&nbsp;&nbsp;|./0123456789:;&lt;=|</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4168687">//&nbsp;^&nbsp;offset&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^&nbsp;extra&nbsp;space&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^&nbsp;ASCII&nbsp;of&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4168769">for</span>&nbsp;<span class="ident" id="4168773">i</span>&nbsp;<span class="op" id="4168775">:=</span>&nbsp;<span class="keyword" id="4168778">range</span>&nbsp;<span class="ident" id="4168784">data</span>&nbsp;<span class="op" id="4168789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4168793">if</span>&nbsp;<span class="ident" id="4168796">h</span><span class="op" id="4168797">.</span><span class="ident" id="4168798">used</span>&nbsp;<span class="op" id="4168803">==</span>&nbsp;<span class="num" id="4168806">0</span>&nbsp;<span class="op" id="4168808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4168813">//&nbsp;At&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;line&nbsp;we&nbsp;print&nbsp;the&nbsp;current</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4168867">//&nbsp;offset&nbsp;in&nbsp;hex.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4168888">h</span><span class="op" id="4168889">.</span><span class="ident" id="4168890">buf</span><span class="op" id="4168893">[</span><span class="num" id="4168894">0</span><span class="op" id="4168895">]</span>&nbsp;<span class="op" id="4168897">=</span>&nbsp;<span class="builtintype" id="4168899">byte</span><span class="op" id="4168903">(</span><span class="ident" id="4168904">h</span><span class="op" id="4168905">.</span><span class="ident" id="4168906">n</span>&nbsp;<span class="op" id="4168908">&gt;&gt;</span>&nbsp;<span class="num" id="4168911">24</span><span class="op" id="4168913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4168918">h</span><span class="op" id="4168919">.</span><span class="ident" id="4168920">buf</span><span class="op" id="4168923">[</span><span class="num" id="4168924">1</span><span class="op" id="4168925">]</span>&nbsp;<span class="op" id="4168927">=</span>&nbsp;<span class="builtintype" id="4168929">byte</span><span class="op" id="4168933">(</span><span class="ident" id="4168934">h</span><span class="op" id="4168935">.</span><span class="ident" id="4168936">n</span>&nbsp;<span class="op" id="4168938">&gt;&gt;</span>&nbsp;<span class="num" id="4168941">16</span><span class="op" id="4168943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4168948">h</span><span class="op" id="4168949">.</span><span class="ident" id="4168950">buf</span><span class="op" id="4168953">[</span><span class="num" id="4168954">2</span><span class="op" id="4168955">]</span>&nbsp;<span class="op" id="4168957">=</span>&nbsp;<span class="builtintype" id="4168959">byte</span><span class="op" id="4168963">(</span><span class="ident" id="4168964">h</span><span class="op" id="4168965">.</span><span class="ident" id="4168966">n</span>&nbsp;<span class="op" id="4168968">&gt;&gt;</span>&nbsp;<span class="num" id="4168971">8</span><span class="op" id="4168972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4168977">h</span><span class="op" id="4168978">.</span><span class="ident" id="4168979">buf</span><span class="op" id="4168982">[</span><span class="num" id="4168983">3</span><span class="op" id="4168984">]</span>&nbsp;<span class="op" id="4168986">=</span>&nbsp;<span class="builtintype" id="4168988">byte</span><span class="op" id="4168992">(</span><span class="ident" id="4168993">h</span><span class="op" id="4168994">.</span><span class="ident" id="4168995">n</span><span class="op" id="4168996">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169001">Encode</span><span class="op" id="4169007">(</span><span class="ident" id="4169008">h</span><span class="op" id="4169009">.</span><span class="ident" id="4169010">buf</span><span class="op" id="4169013">[</span><span class="num" id="4169014">4</span><span class="op" id="4169015">:</span><span class="op" id="4169016">]</span><span class="op" id="4169017">,</span>&nbsp;<span class="ident" id="4169019">h</span><span class="op" id="4169020">.</span><span class="ident" id="4169021">buf</span><span class="op" id="4169024">[</span><span class="op" id="4169025">:</span><span class="num" id="4169026">4</span><span class="op" id="4169027">]</span><span class="op" id="4169028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169033">h</span><span class="op" id="4169034">.</span><span class="ident" id="4169035">buf</span><span class="op" id="4169038">[</span><span class="num" id="4169039">12</span><span class="op" id="4169041">]</span>&nbsp;<span class="op" id="4169043">=</span>&nbsp;<span class="string" id="4169045">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169052">h</span><span class="op" id="4169053">.</span><span class="ident" id="4169054">buf</span><span class="op" id="4169057">[</span><span class="num" id="4169058">13</span><span class="op" id="4169060">]</span>&nbsp;<span class="op" id="4169062">=</span>&nbsp;<span class="string" id="4169064">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169071">_</span><span class="op" id="4169072">,</span>&nbsp;<span class="ident" id="4169074">err</span>&nbsp;<span class="op" id="4169078">=</span>&nbsp;<span class="ident" id="4169080">h</span><span class="op" id="4169081">.</span><span class="ident" id="4169082">w</span><span class="op" id="4169083">.</span><span class="ident" id="4169084">Write</span><span class="op" id="4169089">(</span><span class="ident" id="4169090">h</span><span class="op" id="4169091">.</span><span class="ident" id="4169092">buf</span><span class="op" id="4169095">[</span><span class="num" id="4169096">4</span><span class="op" id="4169097">:</span><span class="op" id="4169098">]</span><span class="op" id="4169099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169104">if</span>&nbsp;<span class="ident" id="4169107">err</span>&nbsp;<span class="op" id="4169111">!=</span>&nbsp;<span class="ident" id="4169114">nil</span>&nbsp;<span class="op" id="4169118">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169124">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4169134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4169138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169142">Encode</span><span class="op" id="4169148">(</span><span class="ident" id="4169149">h</span><span class="op" id="4169150">.</span><span class="ident" id="4169151">buf</span><span class="op" id="4169154">[</span><span class="op" id="4169155">:</span><span class="op" id="4169156">]</span><span class="op" id="4169157">,</span>&nbsp;<span class="ident" id="4169159">data</span><span class="op" id="4169163">[</span><span class="ident" id="4169164">i</span><span class="op" id="4169165">:</span><span class="ident" id="4169166">i</span><span class="op" id="4169167">+</span><span class="num" id="4169168">1</span><span class="op" id="4169169">]</span><span class="op" id="4169170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169174">h</span><span class="op" id="4169175">.</span><span class="ident" id="4169176">buf</span><span class="op" id="4169179">[</span><span class="num" id="4169180">2</span><span class="op" id="4169181">]</span>&nbsp;<span class="op" id="4169183">=</span>&nbsp;<span class="string" id="4169185">&#39;&nbsp;&#39;</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169191">l</span>&nbsp;<span class="op" id="4169193">:=</span>&nbsp;<span class="num" id="4169196">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169200">if</span>&nbsp;<span class="ident" id="4169203">h</span><span class="op" id="4169204">.</span><span class="ident" id="4169205">used</span>&nbsp;<span class="op" id="4169210">==</span>&nbsp;<span class="num" id="4169213">7</span>&nbsp;<span class="op" id="4169215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4169220">//&nbsp;There&#39;s&nbsp;an&nbsp;additional&nbsp;space&nbsp;after&nbsp;the&nbsp;8th&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169274">h</span><span class="op" id="4169275">.</span><span class="ident" id="4169276">buf</span><span class="op" id="4169279">[</span><span class="num" id="4169280">3</span><span class="op" id="4169281">]</span>&nbsp;<span class="op" id="4169283">=</span>&nbsp;<span class="string" id="4169285">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169292">l</span>&nbsp;<span class="op" id="4169294">=</span>&nbsp;<span class="num" id="4169296">4</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4169300">}</span>&nbsp;<span class="keyword" id="4169302">else</span>&nbsp;<span class="keyword" id="4169307">if</span>&nbsp;<span class="ident" id="4169310">h</span><span class="op" id="4169311">.</span><span class="ident" id="4169312">used</span>&nbsp;<span class="op" id="4169317">==</span>&nbsp;<span class="num" id="4169320">15</span>&nbsp;<span class="op" id="4169323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4169328">//&nbsp;At&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;line&nbsp;there&#39;s&nbsp;an&nbsp;extra&nbsp;space&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4169384">//&nbsp;the&nbsp;bar&nbsp;for&nbsp;the&nbsp;right&nbsp;column.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169420">h</span><span class="op" id="4169421">.</span><span class="ident" id="4169422">buf</span><span class="op" id="4169425">[</span><span class="num" id="4169426">3</span><span class="op" id="4169427">]</span>&nbsp;<span class="op" id="4169429">=</span>&nbsp;<span class="string" id="4169431">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169438">h</span><span class="op" id="4169439">.</span><span class="ident" id="4169440">buf</span><span class="op" id="4169443">[</span><span class="num" id="4169444">4</span><span class="op" id="4169445">]</span>&nbsp;<span class="op" id="4169447">=</span>&nbsp;<span class="string" id="4169449">&#39;|&#39;</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169456">l</span>&nbsp;<span class="op" id="4169458">=</span>&nbsp;<span class="num" id="4169460">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4169464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169468">_</span><span class="op" id="4169469">,</span>&nbsp;<span class="ident" id="4169471">err</span>&nbsp;<span class="op" id="4169475">=</span>&nbsp;<span class="ident" id="4169477">h</span><span class="op" id="4169478">.</span><span class="ident" id="4169479">w</span><span class="op" id="4169480">.</span><span class="ident" id="4169481">Write</span><span class="op" id="4169486">(</span><span class="ident" id="4169487">h</span><span class="op" id="4169488">.</span><span class="ident" id="4169489">buf</span><span class="op" id="4169492">[</span><span class="op" id="4169493">:</span><span class="ident" id="4169494">l</span><span class="op" id="4169495">]</span><span class="op" id="4169496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169500">if</span>&nbsp;<span class="ident" id="4169503">err</span>&nbsp;<span class="op" id="4169507">!=</span>&nbsp;<span class="ident" id="4169510">nil</span>&nbsp;<span class="op" id="4169514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169519">return</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4169528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169532">n</span><span class="op" id="4169533">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169538">h</span><span class="op" id="4169539">.</span><span class="ident" id="4169540">rightChars</span><span class="op" id="4169550">[</span><span class="ident" id="4169551">h</span><span class="op" id="4169552">.</span><span class="ident" id="4169553">used</span><span class="op" id="4169557">]</span>&nbsp;<span class="op" id="4169559">=</span>&nbsp;<span class="ident" id="4169561">toChar</span><span class="op" id="4169567">(</span><span class="ident" id="4169568">data</span><span class="op" id="4169572">[</span><span class="ident" id="4169573">i</span><span class="op" id="4169574">]</span><span class="op" id="4169575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169579">h</span><span class="op" id="4169580">.</span><span class="ident" id="4169581">used</span><span class="op" id="4169585">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169590">h</span><span class="op" id="4169591">.</span><span class="ident" id="4169592">n</span><span class="op" id="4169593">++</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169598">if</span>&nbsp;<span class="ident" id="4169601">h</span><span class="op" id="4169602">.</span><span class="ident" id="4169603">used</span>&nbsp;<span class="op" id="4169608">==</span>&nbsp;<span class="num" id="4169611">16</span>&nbsp;<span class="op" id="4169614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169619">h</span><span class="op" id="4169620">.</span><span class="ident" id="4169621">rightChars</span><span class="op" id="4169631">[</span><span class="num" id="4169632">16</span><span class="op" id="4169634">]</span>&nbsp;<span class="op" id="4169636">=</span>&nbsp;<span class="string" id="4169638">&#39;|&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169645">h</span><span class="op" id="4169646">.</span><span class="ident" id="4169647">rightChars</span><span class="op" id="4169657">[</span><span class="num" id="4169658">17</span><span class="op" id="4169660">]</span>&nbsp;<span class="op" id="4169662">=</span>&nbsp;<span class="string" id="4169664">&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169672">_</span><span class="op" id="4169673">,</span>&nbsp;<span class="ident" id="4169675">err</span>&nbsp;<span class="op" id="4169679">=</span>&nbsp;<span class="ident" id="4169681">h</span><span class="op" id="4169682">.</span><span class="ident" id="4169683">w</span><span class="op" id="4169684">.</span><span class="ident" id="4169685">Write</span><span class="op" id="4169690">(</span><span class="ident" id="4169691">h</span><span class="op" id="4169692">.</span><span class="ident" id="4169693">rightChars</span><span class="op" id="4169703">[</span><span class="op" id="4169704">:</span><span class="op" id="4169705">]</span><span class="op" id="4169706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169711">if</span>&nbsp;<span class="ident" id="4169714">err</span>&nbsp;<span class="op" id="4169718">!=</span>&nbsp;<span class="ident" id="4169721">nil</span>&nbsp;<span class="op" id="4169725">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169731">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4169741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169746">h</span><span class="op" id="4169747">.</span><span class="ident" id="4169748">used</span>&nbsp;<span class="op" id="4169753">=</span>&nbsp;<span class="num" id="4169755">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4169759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4169762">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169765">return</span><br>
<span class="lineno"></span><span class="op" id="4169772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4169775">func</span>&nbsp;<span class="op" id="4169780">(</span><span class="ident" id="4169781">h</span>&nbsp;<span class="op" id="4169783">*</span><span class="ident" id="4169784">dumper</span><span class="op" id="4169790">)</span>&nbsp;<span class="ident" id="4169792">Close</span><span class="op" id="4169797">(</span><span class="op" id="4169798">)</span>&nbsp;<span class="op" id="4169800">(</span><span class="ident" id="4169801">err</span>&nbsp;<span class="builtintype" id="4169805">error</span><span class="op" id="4169810">)</span>&nbsp;<span class="op" id="4169812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4169815">//&nbsp;See&nbsp;the&nbsp;comments&nbsp;in&nbsp;Write()&nbsp;for&nbsp;the&nbsp;details&nbsp;of&nbsp;this&nbsp;format.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169879">if</span>&nbsp;<span class="ident" id="4169882">h</span><span class="op" id="4169883">.</span><span class="ident" id="4169884">used</span>&nbsp;<span class="op" id="4169889">==</span>&nbsp;<span class="num" id="4169892">0</span>&nbsp;<span class="op" id="4169894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4169898">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4169906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169909">h</span><span class="op" id="4169910">.</span><span class="ident" id="4169911">buf</span><span class="op" id="4169914">[</span><span class="num" id="4169915">0</span><span class="op" id="4169916">]</span>&nbsp;<span class="op" id="4169918">=</span>&nbsp;<span class="string" id="4169920">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169925">h</span><span class="op" id="4169926">.</span><span class="ident" id="4169927">buf</span><span class="op" id="4169930">[</span><span class="num" id="4169931">1</span><span class="op" id="4169932">]</span>&nbsp;<span class="op" id="4169934">=</span>&nbsp;<span class="string" id="4169936">&#39;&nbsp;&#39;</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169941">h</span><span class="op" id="4169942">.</span><span class="ident" id="4169943">buf</span><span class="op" id="4169946">[</span><span class="num" id="4169947">2</span><span class="op" id="4169948">]</span>&nbsp;<span class="op" id="4169950">=</span>&nbsp;<span class="string" id="4169952">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169957">h</span><span class="op" id="4169958">.</span><span class="ident" id="4169959">buf</span><span class="op" id="4169962">[</span><span class="num" id="4169963">3</span><span class="op" id="4169964">]</span>&nbsp;<span class="op" id="4169966">=</span>&nbsp;<span class="string" id="4169968">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169973">h</span><span class="op" id="4169974">.</span><span class="ident" id="4169975">buf</span><span class="op" id="4169978">[</span><span class="num" id="4169979">4</span><span class="op" id="4169980">]</span>&nbsp;<span class="op" id="4169982">=</span>&nbsp;<span class="string" id="4169984">&#39;|&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4169989">nBytes</span>&nbsp;<span class="op" id="4169996">:=</span>&nbsp;<span class="ident" id="4169999">h</span><span class="op" id="4170000">.</span><span class="ident" id="4170001">used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4170007">for</span>&nbsp;<span class="ident" id="4170011">h</span><span class="op" id="4170012">.</span><span class="ident" id="4170013">used</span>&nbsp;<span class="op" id="4170018">&lt;</span>&nbsp;<span class="num" id="4170020">16</span>&nbsp;<span class="op" id="4170023">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4170027">l</span>&nbsp;<span class="op" id="4170029">:=</span>&nbsp;<span class="num" id="4170032">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4170036">if</span>&nbsp;<span class="ident" id="4170039">h</span><span class="op" id="4170040">.</span><span class="ident" id="4170041">used</span>&nbsp;<span class="op" id="4170046">==</span>&nbsp;<span class="num" id="4170049">7</span>&nbsp;<span class="op" id="4170051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4170056">l</span>&nbsp;<span class="op" id="4170058">=</span>&nbsp;<span class="num" id="4170060">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4170064">}</span>&nbsp;<span class="keyword" id="4170066">else</span>&nbsp;<span class="keyword" id="4170071">if</span>&nbsp;<span class="ident" id="4170074">h</span><span class="op" id="4170075">.</span><span class="ident" id="4170076">used</span>&nbsp;<span class="op" id="4170081">==</span>&nbsp;<span class="num" id="4170084">15</span>&nbsp;<span class="op" id="4170087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4170092">l</span>&nbsp;<span class="op" id="4170094">=</span>&nbsp;<span class="num" id="4170096">5</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4170100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4170104">_</span><span class="op" id="4170105">,</span>&nbsp;<span class="ident" id="4170107">err</span>&nbsp;<span class="op" id="4170111">=</span>&nbsp;<span class="ident" id="4170113">h</span><span class="op" id="4170114">.</span><span class="ident" id="4170115">w</span><span class="op" id="4170116">.</span><span class="ident" id="4170117">Write</span><span class="op" id="4170122">(</span><span class="ident" id="4170123">h</span><span class="op" id="4170124">.</span><span class="ident" id="4170125">buf</span><span class="op" id="4170128">[</span><span class="op" id="4170129">:</span><span class="ident" id="4170130">l</span><span class="op" id="4170131">]</span><span class="op" id="4170132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4170136">if</span>&nbsp;<span class="ident" id="4170139">err</span>&nbsp;<span class="op" id="4170143">!=</span>&nbsp;<span class="ident" id="4170146">nil</span>&nbsp;<span class="op" id="4170150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4170155">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4170164">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4170168">h</span><span class="op" id="4170169">.</span><span class="ident" id="4170170">used</span><span class="op" id="4170174">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4170178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4170181">h</span><span class="op" id="4170182">.</span><span class="ident" id="4170183">rightChars</span><span class="op" id="4170193">[</span><span class="ident" id="4170194">nBytes</span><span class="op" id="4170200">]</span>&nbsp;<span class="op" id="4170202">=</span>&nbsp;<span class="string" id="4170204">&#39;|&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4170209">h</span><span class="op" id="4170210">.</span><span class="ident" id="4170211">rightChars</span><span class="op" id="4170221">[</span><span class="ident" id="4170222">nBytes</span><span class="op" id="4170228">+</span><span class="num" id="4170229">1</span><span class="op" id="4170230">]</span>&nbsp;<span class="op" id="4170232">=</span>&nbsp;<span class="string" id="4170234">&#39;\n&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4170240">_</span><span class="op" id="4170241">,</span>&nbsp;<span class="ident" id="4170243">err</span>&nbsp;<span class="op" id="4170247">=</span>&nbsp;<span class="ident" id="4170249">h</span><span class="op" id="4170250">.</span><span class="ident" id="4170251">w</span><span class="op" id="4170252">.</span><span class="ident" id="4170253">Write</span><span class="op" id="4170258">(</span><span class="ident" id="4170259">h</span><span class="op" id="4170260">.</span><span class="ident" id="4170261">rightChars</span><span class="op" id="4170271">[</span><span class="op" id="4170272">:</span><span class="ident" id="4170273">nBytes</span><span class="op" id="4170279">+</span><span class="num" id="4170280">2</span><span class="op" id="4170281">]</span><span class="op" id="4170282">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4170285">return</span><br>
<span class="lineno"></span><span class="op" id="4170292">}</span>
</div>
</body>
</html>
