<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4819437">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4819492">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4819546">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4819597">package</span>&nbsp;<span class="ident" id="4819605">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4819611">import</span>&nbsp;<span class="op" id="4819618">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4819621">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="4819631">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="4819634">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="4819707">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="4819775">type</span>&nbsp;<span class="ident" id="4819780">tagOptions</span>&nbsp;<span class="builtintype" id="4819791">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="4819799">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4819862">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="4819890">func</span>&nbsp;<span class="ident" id="4819895">parseTag</span><span class="op" id="4819903">(</span><span class="ident" id="4819904">tag</span>&nbsp;<span class="builtintype" id="4819908">string</span><span class="op" id="4819914">)</span>&nbsp;<span class="op" id="4819916">(</span><span class="builtintype" id="4819917">string</span><span class="op" id="4819923">,</span>&nbsp;<span class="ident" id="4819925">tagOptions</span><span class="op" id="4819935">)</span>&nbsp;<span class="op" id="4819937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4819940">if</span>&nbsp;<span class="ident" id="4819943">idx</span>&nbsp;<span class="op" id="4819947">:=</span>&nbsp;<span class="ident" id="4819950">strings</span><span class="op" id="4819957">.</span><span class="ident" id="4819958">Index</span><span class="op" id="4819963">(</span><span class="ident" id="4819964">tag</span><span class="op" id="4819967">,</span>&nbsp;<span class="string" id="4819969">&#34;,&#34;</span><span class="op" id="4819972">)</span><span class="op" id="4819973">;</span>&nbsp;<span class="ident" id="4819975">idx</span>&nbsp;<span class="op" id="4819979">!=</span>&nbsp;<span class="op" id="4819982">-</span><span class="num" id="4819983">1</span>&nbsp;<span class="op" id="4819985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4819989">return</span>&nbsp;<span class="ident" id="4819996">tag</span><span class="op" id="4819999">[</span><span class="op" id="4820000">:</span><span class="ident" id="4820001">idx</span><span class="op" id="4820004">]</span><span class="op" id="4820005">,</span>&nbsp;<span class="ident" id="4820007">tagOptions</span><span class="op" id="4820017">(</span><span class="ident" id="4820018">tag</span><span class="op" id="4820021">[</span><span class="ident" id="4820022">idx</span><span class="op" id="4820025">+</span><span class="num" id="4820026">1</span><span class="op" id="4820027">:</span><span class="op" id="4820028">]</span><span class="op" id="4820029">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4820032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820035">return</span>&nbsp;<span class="ident" id="4820042">tag</span><span class="op" id="4820045">,</span>&nbsp;<span class="ident" id="4820047">tagOptions</span><span class="op" id="4820057">(</span><span class="string" id="4820058">&#34;&#34;</span><span class="op" id="4820060">)</span><br>
<span class="lineno"></span><span class="op" id="4820062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4820065">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="4820127">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4820196">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="4820226">func</span>&nbsp;<span class="op" id="4820231">(</span><span class="ident" id="4820232">o</span>&nbsp;<span class="ident" id="4820234">tagOptions</span><span class="op" id="4820244">)</span>&nbsp;<span class="ident" id="4820246">Contains</span><span class="op" id="4820254">(</span><span class="ident" id="4820255">optionName</span>&nbsp;<span class="builtintype" id="4820266">string</span><span class="op" id="4820272">)</span>&nbsp;<span class="builtintype" id="4820274">bool</span>&nbsp;<span class="op" id="4820279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820282">if</span>&nbsp;<span class="builtinfunc" id="4820285">len</span><span class="op" id="4820288">(</span><span class="ident" id="4820289">o</span><span class="op" id="4820290">)</span>&nbsp;<span class="op" id="4820292">==</span>&nbsp;<span class="num" id="4820295">0</span>&nbsp;<span class="op" id="4820297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820301">return</span>&nbsp;<span class="builtintype" id="4820308">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4820315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4820318">s</span>&nbsp;<span class="op" id="4820320">:=</span>&nbsp;<span class="builtintype" id="4820323">string</span><span class="op" id="4820329">(</span><span class="ident" id="4820330">o</span><span class="op" id="4820331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820334">for</span>&nbsp;<span class="ident" id="4820338">s</span>&nbsp;<span class="op" id="4820340">!=</span>&nbsp;<span class="string" id="4820343">&#34;&#34;</span>&nbsp;<span class="op" id="4820346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820350">var</span>&nbsp;<span class="ident" id="4820354">next</span>&nbsp;<span class="builtintype" id="4820359">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4820368">i</span>&nbsp;<span class="op" id="4820370">:=</span>&nbsp;<span class="ident" id="4820373">strings</span><span class="op" id="4820380">.</span><span class="ident" id="4820381">Index</span><span class="op" id="4820386">(</span><span class="ident" id="4820387">s</span><span class="op" id="4820388">,</span>&nbsp;<span class="string" id="4820390">&#34;,&#34;</span><span class="op" id="4820393">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820397">if</span>&nbsp;<span class="ident" id="4820400">i</span>&nbsp;<span class="op" id="4820402">&gt;=</span>&nbsp;<span class="num" id="4820405">0</span>&nbsp;<span class="op" id="4820407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4820412">s</span><span class="op" id="4820413">,</span>&nbsp;<span class="ident" id="4820415">next</span>&nbsp;<span class="op" id="4820420">=</span>&nbsp;<span class="ident" id="4820422">s</span><span class="op" id="4820423">[</span><span class="op" id="4820424">:</span><span class="ident" id="4820425">i</span><span class="op" id="4820426">]</span><span class="op" id="4820427">,</span>&nbsp;<span class="ident" id="4820429">s</span><span class="op" id="4820430">[</span><span class="ident" id="4820431">i</span><span class="op" id="4820432">+</span><span class="num" id="4820433">1</span><span class="op" id="4820434">:</span><span class="op" id="4820435">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4820439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820443">if</span>&nbsp;<span class="ident" id="4820446">s</span>&nbsp;<span class="op" id="4820448">==</span>&nbsp;<span class="ident" id="4820451">optionName</span>&nbsp;<span class="op" id="4820462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820467">return</span>&nbsp;<span class="builtintype" id="4820474">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4820481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4820485">s</span>&nbsp;<span class="op" id="4820487">=</span>&nbsp;<span class="ident" id="4820489">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4820495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4820498">return</span>&nbsp;<span class="builtintype" id="4820505">false</span><br>
<span class="lineno"></span><span class="op" id="4820511">}</span>
</div>
</body>
</html>
