<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5802421">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5802477">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5802531">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5802582">package</span>&nbsp;<span class="ident" id="5802590">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5802597">import</span>&nbsp;<span class="op" id="5802604">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802607">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802616">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802626">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802633">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802643">&#34;go/doc&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802653">&#34;go/parser&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802666">&#34;go/token&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802678">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802684">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802697">&#34;log&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802704">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5802710">pathpkg</span>&nbsp;<span class="string" id="5802718">&#34;path&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802726">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802743">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802754">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802762">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802773">&#34;strings&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802784">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5802795">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5802810">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5802813">//&nbsp;A&nbsp;Context&nbsp;specifies&nbsp;the&nbsp;supporting&nbsp;context&nbsp;for&nbsp;a&nbsp;build.</span><br>
<span class="lineno">30</span><span class="keyword" id="5802872">type</span>&nbsp;<span class="ident" id="5802877">Context</span>&nbsp;<span class="keyword" id="5802885">struct</span>&nbsp;<span class="op" id="5802892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5802895">GOARCH</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802907">string</span>&nbsp;<span class="comment" id="5802914">//&nbsp;target&nbsp;architecture</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5802938">GOOS</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802950">string</span>&nbsp;<span class="comment" id="5802957">//&nbsp;target&nbsp;operating&nbsp;system</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5802985">GOROOT</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5802997">string</span>&nbsp;<span class="comment" id="5803004">//&nbsp;Go&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803016">GOPATH</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5803028">string</span>&nbsp;<span class="comment" id="5803035">//&nbsp;Go&nbsp;path</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803047">CgoEnabled</span>&nbsp;&nbsp;<span class="builtintype" id="5803059">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5803066">//&nbsp;whether&nbsp;cgo&nbsp;can&nbsp;be&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803094">UseAllFiles</span>&nbsp;<span class="builtintype" id="5803106">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5803113">//&nbsp;use&nbsp;files&nbsp;regardless&nbsp;of&nbsp;+build&nbsp;lines,&nbsp;file&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803166">Compiler</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5803178">string</span>&nbsp;<span class="comment" id="5803185">//&nbsp;compiler&nbsp;to&nbsp;assume&nbsp;when&nbsp;computing&nbsp;target&nbsp;paths</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5803237">//&nbsp;The&nbsp;build&nbsp;and&nbsp;release&nbsp;tags&nbsp;specify&nbsp;build&nbsp;constraints</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5803294">//&nbsp;that&nbsp;should&nbsp;be&nbsp;considered&nbsp;satisfied&nbsp;when&nbsp;processing&nbsp;+build&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5803364">//&nbsp;Clients&nbsp;creating&nbsp;a&nbsp;new&nbsp;context&nbsp;may&nbsp;customize&nbsp;BuildTags,&nbsp;which</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5803430">//&nbsp;defaults&nbsp;to&nbsp;empty,&nbsp;but&nbsp;it&nbsp;is&nbsp;usually&nbsp;an&nbsp;error&nbsp;to&nbsp;customize&nbsp;ReleaseTags,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5803506">//&nbsp;which&nbsp;defaults&nbsp;to&nbsp;the&nbsp;list&nbsp;of&nbsp;Go&nbsp;releases&nbsp;the&nbsp;current&nbsp;release&nbsp;is&nbsp;compatible&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5803592">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;BuildTags&nbsp;and&nbsp;ReleaseTags,&nbsp;build&nbsp;constraints</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5803660">//&nbsp;consider&nbsp;the&nbsp;values&nbsp;of&nbsp;GOARCH&nbsp;and&nbsp;GOOS&nbsp;as&nbsp;satisfied&nbsp;tags.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803722">BuildTags</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5803734">[</span><span class="op" id="5803735">]</span><span class="builtintype" id="5803736">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5803744">ReleaseTags</span>&nbsp;<span class="op" id="5803756">[</span><span class="op" id="5803757">]</span><span class="builtintype" id="5803758">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5803767">//&nbsp;The&nbsp;install&nbsp;suffix&nbsp;specifies&nbsp;a&nbsp;suffix&nbsp;to&nbsp;use&nbsp;in&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;installation</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5803848">//&nbsp;directory.&nbsp;By&nbsp;default&nbsp;it&nbsp;is&nbsp;empty,&nbsp;but&nbsp;custom&nbsp;builds&nbsp;that&nbsp;need&nbsp;to&nbsp;keep</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5803923">//&nbsp;their&nbsp;outputs&nbsp;separate&nbsp;can&nbsp;set&nbsp;InstallSuffix&nbsp;to&nbsp;do&nbsp;so.&nbsp;For&nbsp;example,&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804000">//&nbsp;using&nbsp;the&nbsp;race&nbsp;detector,&nbsp;the&nbsp;go&nbsp;command&nbsp;uses&nbsp;InstallSuffix&nbsp;=&nbsp;&#34;race&#34;,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804076">//&nbsp;that&nbsp;on&nbsp;a&nbsp;Linux/386&nbsp;system,&nbsp;packages&nbsp;are&nbsp;written&nbsp;to&nbsp;a&nbsp;directory&nbsp;named</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804150">//&nbsp;&#34;linux_386_race&#34;&nbsp;instead&nbsp;of&nbsp;the&nbsp;usual&nbsp;&#34;linux_386&#34;.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804205">InstallSuffix</span>&nbsp;<span class="builtintype" id="5804219">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804228">//&nbsp;By&nbsp;default,&nbsp;Import&nbsp;uses&nbsp;the&nbsp;operating&nbsp;system&#39;s&nbsp;file&nbsp;system&nbsp;calls</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804297">//&nbsp;to&nbsp;read&nbsp;directories&nbsp;and&nbsp;files.&nbsp;&nbsp;To&nbsp;read&nbsp;from&nbsp;other&nbsp;sources,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804361">//&nbsp;callers&nbsp;can&nbsp;set&nbsp;the&nbsp;following&nbsp;functions.&nbsp;&nbsp;They&nbsp;all&nbsp;have&nbsp;default</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804429">//&nbsp;behaviors&nbsp;that&nbsp;use&nbsp;the&nbsp;local&nbsp;file&nbsp;system,&nbsp;so&nbsp;clients&nbsp;need&nbsp;only&nbsp;set</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804500">//&nbsp;the&nbsp;functions&nbsp;whose&nbsp;behaviors&nbsp;they&nbsp;wish&nbsp;to&nbsp;change.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804556">//&nbsp;JoinPath&nbsp;joins&nbsp;the&nbsp;sequence&nbsp;of&nbsp;path&nbsp;fragments&nbsp;into&nbsp;a&nbsp;single&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804626">//&nbsp;If&nbsp;JoinPath&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.Join.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804677">JoinPath</span>&nbsp;<span class="keyword" id="5804686">func</span><span class="op" id="5804690">(</span><span class="ident" id="5804691">elem</span>&nbsp;<span class="op" id="5804696">...</span><span class="builtintype" id="5804699">string</span><span class="op" id="5804705">)</span>&nbsp;<span class="builtintype" id="5804707">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804716">//&nbsp;SplitPathList&nbsp;splits&nbsp;the&nbsp;path&nbsp;list&nbsp;into&nbsp;a&nbsp;slice&nbsp;of&nbsp;individual&nbsp;paths.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804789">//&nbsp;If&nbsp;SplitPathList&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.SplitList.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5804850">SplitPathList</span>&nbsp;<span class="keyword" id="5804864">func</span><span class="op" id="5804868">(</span><span class="ident" id="5804869">list</span>&nbsp;<span class="builtintype" id="5804874">string</span><span class="op" id="5804880">)</span>&nbsp;<span class="op" id="5804882">[</span><span class="op" id="5804883">]</span><span class="builtintype" id="5804884">string</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804893">//&nbsp;IsAbsPath&nbsp;reports&nbsp;whether&nbsp;path&nbsp;is&nbsp;an&nbsp;absolute&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5804949">//&nbsp;If&nbsp;IsAbsPath&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;filepath.IsAbs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5805002">IsAbsPath</span>&nbsp;<span class="keyword" id="5805012">func</span><span class="op" id="5805016">(</span><span class="ident" id="5805017">path</span>&nbsp;<span class="builtintype" id="5805022">string</span><span class="op" id="5805028">)</span>&nbsp;<span class="builtintype" id="5805030">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805037">//&nbsp;IsDir&nbsp;reports&nbsp;whether&nbsp;the&nbsp;path&nbsp;names&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805091">//&nbsp;If&nbsp;IsDir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;calls&nbsp;os.Stat&nbsp;and&nbsp;uses&nbsp;the&nbsp;result&#39;s&nbsp;IsDir&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5805169">IsDir</span>&nbsp;<span class="keyword" id="5805175">func</span><span class="op" id="5805179">(</span><span class="ident" id="5805180">path</span>&nbsp;<span class="builtintype" id="5805185">string</span><span class="op" id="5805191">)</span>&nbsp;<span class="builtintype" id="5805193">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805200">//&nbsp;HasSubdir&nbsp;reports&nbsp;whether&nbsp;dir&nbsp;is&nbsp;a&nbsp;subdirectory&nbsp;of</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805255">//&nbsp;(perhaps&nbsp;multiple&nbsp;levels&nbsp;below)&nbsp;root.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805297">//&nbsp;If&nbsp;so,&nbsp;HasSubdir&nbsp;sets&nbsp;rel&nbsp;to&nbsp;a&nbsp;slash-separated&nbsp;path&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805358">//&nbsp;can&nbsp;be&nbsp;joined&nbsp;to&nbsp;root&nbsp;to&nbsp;produce&nbsp;a&nbsp;path&nbsp;equivalent&nbsp;to&nbsp;dir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805421">//&nbsp;If&nbsp;HasSubdir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;an&nbsp;implementation&nbsp;built&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805485">//&nbsp;filepath.EvalSymlinks.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5805512">HasSubdir</span>&nbsp;<span class="keyword" id="5805522">func</span><span class="op" id="5805526">(</span><span class="ident" id="5805527">root</span><span class="op" id="5805531">,</span>&nbsp;<span class="ident" id="5805533">dir</span>&nbsp;<span class="builtintype" id="5805537">string</span><span class="op" id="5805543">)</span>&nbsp;<span class="op" id="5805545">(</span><span class="ident" id="5805546">rel</span>&nbsp;<span class="builtintype" id="5805550">string</span><span class="op" id="5805556">,</span>&nbsp;<span class="ident" id="5805558">ok</span>&nbsp;<span class="builtintype" id="5805561">bool</span><span class="op" id="5805565">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805569">//&nbsp;ReadDir&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;os.FileInfo,&nbsp;sorted&nbsp;by&nbsp;Name,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805629">//&nbsp;describing&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805680">//&nbsp;If&nbsp;ReadDir&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;ioutil.ReadDir.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5805731">ReadDir</span>&nbsp;<span class="keyword" id="5805739">func</span><span class="op" id="5805743">(</span><span class="ident" id="5805744">dir</span>&nbsp;<span class="builtintype" id="5805748">string</span><span class="op" id="5805754">)</span>&nbsp;<span class="op" id="5805756">(</span><span class="ident" id="5805757">fi</span>&nbsp;<span class="op" id="5805760">[</span><span class="op" id="5805761">]</span><span class="ident" id="5805762"><a href="/go/build/build.go.html#5802704">os</a></span><span class="op" id="5805764">.</span><span class="ident" id="5805765">FileInfo</span><span class="op" id="5805773">,</span>&nbsp;<span class="ident" id="5805775">err</span>&nbsp;<span class="builtintype" id="5805779">error</span><span class="op" id="5805784">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805788">//&nbsp;OpenFile&nbsp;opens&nbsp;a&nbsp;file&nbsp;(not&nbsp;a&nbsp;directory)&nbsp;for&nbsp;reading.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5805845">//&nbsp;If&nbsp;OpenFile&nbsp;is&nbsp;nil,&nbsp;Import&nbsp;uses&nbsp;os.Open.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5805890">OpenFile</span>&nbsp;<span class="keyword" id="5805899">func</span><span class="op" id="5805903">(</span><span class="ident" id="5805904">path</span>&nbsp;<span class="builtintype" id="5805909">string</span><span class="op" id="5805915">)</span>&nbsp;<span class="op" id="5805917">(</span><span class="ident" id="5805918">r</span>&nbsp;<span class="ident" id="5805920"><a href="/go/build/build.go.html#5802678">io</a></span><span class="op" id="5805922">.</span><span class="ident" id="5805923">ReadCloser</span><span class="op" id="5805933">,</span>&nbsp;<span class="ident" id="5805935">err</span>&nbsp;<span class="builtintype" id="5805939">error</span><span class="op" id="5805944">)</span><br>
<span class="lineno">95</span><span class="op" id="5805946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5805949">//&nbsp;joinPath&nbsp;calls&nbsp;ctxt.JoinPath&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.Join.</span><br>
<span class="lineno"></span><span class="keyword" id="5806017">func</span>&nbsp;<span class="op" id="5806022">(</span><span class="ident" id="5806023">ctxt</span>&nbsp;<span class="op" id="5806028">*</span><span class="ident" id="5806029"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5806036">)</span>&nbsp;<span class="ident" id="5806038">joinPath</span><span class="op" id="5806046">(</span><span class="ident" id="5806047">elem</span>&nbsp;<span class="op" id="5806052">...</span><span class="builtintype" id="5806055">string</span><span class="op" id="5806061">)</span>&nbsp;<span class="builtintype" id="5806063">string</span>&nbsp;<span class="op" id="5806070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806073">if</span>&nbsp;<span class="ident" id="5806076">f</span>&nbsp;<span class="op" id="5806078">:=</span>&nbsp;<span class="ident" id="5806081"><a href="/go/build/build.go.html#5806023">ctxt</a></span><span class="op" id="5806085">.</span><span class="ident" id="5806086">JoinPath</span><span class="op" id="5806094">;</span>&nbsp;<span class="ident" id="5806096"><a href="/go/build/build.go.html#5806076">f</a></span>&nbsp;<span class="op" id="5806098">!=</span>&nbsp;<span class="ident" id="5806101">nil</span>&nbsp;<span class="op" id="5806105">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806109">return</span>&nbsp;<span class="ident" id="5806116"><a href="/go/build/build.go.html#5806076">f</a></span><span class="op" id="5806117">(</span><span class="ident" id="5806118"><a href="/go/build/build.go.html#5806047">elem</a></span><span class="op" id="5806122">...</span><span class="op" id="5806125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5806128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806131">return</span>&nbsp;<span class="ident" id="5806138"><a href="/go/build/build.go.html#5802726">filepath</a></span><span class="op" id="5806146">.</span><span class="ident" id="5806147">Join</span><span class="op" id="5806151">(</span><span class="ident" id="5806152"><a href="/go/build/build.go.html#5806047">elem</a></span><span class="op" id="5806156">...</span><span class="op" id="5806159">)</span><br>
<span class="lineno"></span><span class="op" id="5806161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5806164">//&nbsp;splitPathList&nbsp;calls&nbsp;ctxt.SplitPathList&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.SplitList.</span><br>
<span class="lineno"></span><span class="keyword" id="5806247">func</span>&nbsp;<span class="op" id="5806252">(</span><span class="ident" id="5806253">ctxt</span>&nbsp;<span class="op" id="5806258">*</span><span class="ident" id="5806259"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5806266">)</span>&nbsp;<span class="ident" id="5806268">splitPathList</span><span class="op" id="5806281">(</span><span class="ident" id="5806282">s</span>&nbsp;<span class="builtintype" id="5806284">string</span><span class="op" id="5806290">)</span>&nbsp;<span class="op" id="5806292">[</span><span class="op" id="5806293">]</span><span class="builtintype" id="5806294">string</span>&nbsp;<span class="op" id="5806301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806304">if</span>&nbsp;<span class="ident" id="5806307">f</span>&nbsp;<span class="op" id="5806309">:=</span>&nbsp;<span class="ident" id="5806312"><a href="/go/build/build.go.html#5806253">ctxt</a></span><span class="op" id="5806316">.</span><span class="ident" id="5806317">SplitPathList</span><span class="op" id="5806330">;</span>&nbsp;<span class="ident" id="5806332"><a href="/go/build/build.go.html#5806307">f</a></span>&nbsp;<span class="op" id="5806334">!=</span>&nbsp;<span class="ident" id="5806337">nil</span>&nbsp;<span class="op" id="5806341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806345">return</span>&nbsp;<span class="ident" id="5806352"><a href="/go/build/build.go.html#5806307">f</a></span><span class="op" id="5806353">(</span><span class="ident" id="5806354"><a href="/go/build/build.go.html#5806282">s</a></span><span class="op" id="5806355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5806358">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806361">return</span>&nbsp;<span class="ident" id="5806368"><a href="/go/build/build.go.html#5802726">filepath</a></span><span class="op" id="5806376">.</span><span class="ident" id="5806377">SplitList</span><span class="op" id="5806386">(</span><span class="ident" id="5806387"><a href="/go/build/build.go.html#5806282">s</a></span><span class="op" id="5806388">)</span><br>
<span class="lineno"></span><span class="op" id="5806390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5806393">//&nbsp;isAbsPath&nbsp;calls&nbsp;ctxt.IsAbsSPath&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;filepath.IsAbs.</span><br>
<span class="lineno"></span><span class="keyword" id="5806465">func</span>&nbsp;<span class="op" id="5806470">(</span><span class="ident" id="5806471">ctxt</span>&nbsp;<span class="op" id="5806476">*</span><span class="ident" id="5806477"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5806484">)</span>&nbsp;<span class="ident" id="5806486">isAbsPath</span><span class="op" id="5806495">(</span><span class="ident" id="5806496">path</span>&nbsp;<span class="builtintype" id="5806501">string</span><span class="op" id="5806507">)</span>&nbsp;<span class="builtintype" id="5806509">bool</span>&nbsp;<span class="op" id="5806514">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806517">if</span>&nbsp;<span class="ident" id="5806520">f</span>&nbsp;<span class="op" id="5806522">:=</span>&nbsp;<span class="ident" id="5806525"><a href="/go/build/build.go.html#5806471">ctxt</a></span><span class="op" id="5806529">.</span><span class="ident" id="5806530">IsAbsPath</span><span class="op" id="5806539">;</span>&nbsp;<span class="ident" id="5806541"><a href="/go/build/build.go.html#5806520">f</a></span>&nbsp;<span class="op" id="5806543">!=</span>&nbsp;<span class="ident" id="5806546">nil</span>&nbsp;<span class="op" id="5806550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806554">return</span>&nbsp;<span class="ident" id="5806561"><a href="/go/build/build.go.html#5806520">f</a></span><span class="op" id="5806562">(</span><span class="ident" id="5806563"><a href="/go/build/build.go.html#5806496">path</a></span><span class="op" id="5806567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5806570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806573">return</span>&nbsp;<span class="ident" id="5806580"><a href="/go/build/build.go.html#5802726">filepath</a></span><span class="op" id="5806588">.</span><span class="ident" id="5806589">IsAbs</span><span class="op" id="5806594">(</span><span class="ident" id="5806595"><a href="/go/build/build.go.html#5806496">path</a></span><span class="op" id="5806599">)</span><br>
<span class="lineno"></span><span class="op" id="5806601">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5806604">//&nbsp;isDir&nbsp;calls&nbsp;ctxt.IsDir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;uses&nbsp;os.Stat.</span><br>
<span class="lineno"></span><span class="keyword" id="5806665">func</span>&nbsp;<span class="op" id="5806670">(</span><span class="ident" id="5806671">ctxt</span>&nbsp;<span class="op" id="5806676">*</span><span class="ident" id="5806677"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5806684">)</span>&nbsp;<span class="ident" id="5806686">isDir</span><span class="op" id="5806691">(</span><span class="ident" id="5806692">path</span>&nbsp;<span class="builtintype" id="5806697">string</span><span class="op" id="5806703">)</span>&nbsp;<span class="builtintype" id="5806705">bool</span>&nbsp;<span class="op" id="5806710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806713">if</span>&nbsp;<span class="ident" id="5806716">f</span>&nbsp;<span class="op" id="5806718">:=</span>&nbsp;<span class="ident" id="5806721"><a href="/go/build/build.go.html#5806671">ctxt</a></span><span class="op" id="5806725">.</span><span class="ident" id="5806726">IsDir</span><span class="op" id="5806731">;</span>&nbsp;<span class="ident" id="5806733"><a href="/go/build/build.go.html#5806716">f</a></span>&nbsp;<span class="op" id="5806735">!=</span>&nbsp;<span class="ident" id="5806738">nil</span>&nbsp;<span class="op" id="5806742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806746">return</span>&nbsp;<span class="ident" id="5806753"><a href="/go/build/build.go.html#5806716">f</a></span><span class="op" id="5806754">(</span><span class="ident" id="5806755"><a href="/go/build/build.go.html#5806692">path</a></span><span class="op" id="5806759">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5806762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5806765">fi</span><span class="op" id="5806767">,</span>&nbsp;<span class="ident" id="5806769">err</span>&nbsp;<span class="op" id="5806773">:=</span>&nbsp;<span class="ident" id="5806776"><a href="/go/build/build.go.html#5802704">os</a></span><span class="op" id="5806778">.</span><span class="ident" id="5806779">Stat</span><span class="op" id="5806783">(</span><span class="ident" id="5806784"><a href="/go/build/build.go.html#5806692">path</a></span><span class="op" id="5806788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5806791">return</span>&nbsp;<span class="ident" id="5806798"><a href="/go/build/build.go.html#5806769">err</a></span>&nbsp;<span class="op" id="5806802">==</span>&nbsp;<span class="ident" id="5806805">nil</span>&nbsp;<span class="op" id="5806809">&amp;&amp;</span>&nbsp;<span class="ident" id="5806812"><a href="/go/build/build.go.html#5806765">fi</a></span><span class="op" id="5806814">.</span><span class="ident" id="5806815">IsDir</span><span class="op" id="5806820">(</span><span class="op" id="5806821">)</span><br>
<span class="lineno"></span><span class="op" id="5806823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="5806826">//&nbsp;hasSubdir&nbsp;calls&nbsp;ctxt.HasSubdir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;uses</span><br>
<span class="lineno"></span><span class="comment" id="5806886">//&nbsp;the&nbsp;local&nbsp;file&nbsp;system&nbsp;to&nbsp;answer&nbsp;the&nbsp;question.</span><br>
<span class="lineno"></span><span class="keyword" id="5806935">func</span>&nbsp;<span class="op" id="5806940">(</span><span class="ident" id="5806941">ctxt</span>&nbsp;<span class="op" id="5806946">*</span><span class="ident" id="5806947"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5806954">)</span>&nbsp;<span class="ident" id="5806956">hasSubdir</span><span class="op" id="5806965">(</span><span class="ident" id="5806966">root</span><span class="op" id="5806970">,</span>&nbsp;<span class="ident" id="5806972">dir</span>&nbsp;<span class="builtintype" id="5806976">string</span><span class="op" id="5806982">)</span>&nbsp;<span class="op" id="5806984">(</span><span class="ident" id="5806985">rel</span>&nbsp;<span class="builtintype" id="5806989">string</span><span class="op" id="5806995">,</span>&nbsp;<span class="ident" id="5806997">ok</span>&nbsp;<span class="builtintype" id="5807000">bool</span><span class="op" id="5807004">)</span>&nbsp;<span class="op" id="5807006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807009">if</span>&nbsp;<span class="ident" id="5807012">f</span>&nbsp;<span class="op" id="5807014">:=</span>&nbsp;<span class="ident" id="5807017"><a href="/go/build/build.go.html#5806941">ctxt</a></span><span class="op" id="5807021">.</span><span class="ident" id="5807022">HasSubdir</span><span class="op" id="5807031">;</span>&nbsp;<span class="ident" id="5807033"><a href="/go/build/build.go.html#5807012">f</a></span>&nbsp;<span class="op" id="5807035">!=</span>&nbsp;<span class="ident" id="5807038">nil</span>&nbsp;<span class="op" id="5807042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807046">return</span>&nbsp;<span class="ident" id="5807053"><a href="/go/build/build.go.html#5807012">f</a></span><span class="op" id="5807054">(</span><span class="ident" id="5807055"><a href="/go/build/build.go.html#5806966">root</a></span><span class="op" id="5807059">,</span>&nbsp;<span class="ident" id="5807061"><a href="/go/build/build.go.html#5806972">dir</a></span><span class="op" id="5807064">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5807071">//&nbsp;Try&nbsp;using&nbsp;paths&nbsp;we&nbsp;received.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807104">if</span>&nbsp;<span class="ident" id="5807107"><a href="/go/build/build.go.html#5806985">rel</a></span><span class="op" id="5807110">,</span>&nbsp;<span class="ident" id="5807112"><a href="/go/build/build.go.html#5806997">ok</a></span>&nbsp;<span class="op" id="5807115">=</span>&nbsp;<span class="ident" id="5807117"><a href="/go/build/build.go.html#5807505">hasSubdir</a></span><span class="op" id="5807126">(</span><span class="ident" id="5807127"><a href="/go/build/build.go.html#5806966">root</a></span><span class="op" id="5807131">,</span>&nbsp;<span class="ident" id="5807133"><a href="/go/build/build.go.html#5806972">dir</a></span><span class="op" id="5807136">)</span><span class="op" id="5807137">;</span>&nbsp;<span class="ident" id="5807139"><a href="/go/build/build.go.html#5806997">ok</a></span>&nbsp;<span class="op" id="5807142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807146">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5807158">//&nbsp;Try&nbsp;expanding&nbsp;symlinks&nbsp;and&nbsp;comparing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5807199">//&nbsp;expanded&nbsp;against&nbsp;unexpanded&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5807235">//&nbsp;expanded&nbsp;against&nbsp;expanded.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807266">rootSym</span><span class="op" id="5807273">,</span>&nbsp;<span class="ident" id="5807275">_</span>&nbsp;<span class="op" id="5807277">:=</span>&nbsp;<span class="ident" id="5807280"><a href="/go/build/build.go.html#5802726">filepath</a></span><span class="op" id="5807288">.</span><span class="ident" id="5807289">EvalSymlinks</span><span class="op" id="5807301">(</span><span class="ident" id="5807302"><a href="/go/build/build.go.html#5806966">root</a></span><span class="op" id="5807306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807309">dirSym</span><span class="op" id="5807315">,</span>&nbsp;<span class="ident" id="5807317">_</span>&nbsp;<span class="op" id="5807319">:=</span>&nbsp;<span class="ident" id="5807322"><a href="/go/build/build.go.html#5802726">filepath</a></span><span class="op" id="5807330">.</span><span class="ident" id="5807331">EvalSymlinks</span><span class="op" id="5807343">(</span><span class="ident" id="5807344"><a href="/go/build/build.go.html#5806972">dir</a></span><span class="op" id="5807347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807351">if</span>&nbsp;<span class="ident" id="5807354"><a href="/go/build/build.go.html#5806985">rel</a></span><span class="op" id="5807357">,</span>&nbsp;<span class="ident" id="5807359"><a href="/go/build/build.go.html#5806997">ok</a></span>&nbsp;<span class="op" id="5807362">=</span>&nbsp;<span class="ident" id="5807364"><a href="/go/build/build.go.html#5807505">hasSubdir</a></span><span class="op" id="5807373">(</span><span class="ident" id="5807374"><a href="/go/build/build.go.html#5807266">rootSym</a></span><span class="op" id="5807381">,</span>&nbsp;<span class="ident" id="5807383"><a href="/go/build/build.go.html#5806972">dir</a></span><span class="op" id="5807386">)</span><span class="op" id="5807387">;</span>&nbsp;<span class="ident" id="5807389"><a href="/go/build/build.go.html#5806997">ok</a></span>&nbsp;<span class="op" id="5807392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807396">return</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807407">if</span>&nbsp;<span class="ident" id="5807410"><a href="/go/build/build.go.html#5806985">rel</a></span><span class="op" id="5807413">,</span>&nbsp;<span class="ident" id="5807415"><a href="/go/build/build.go.html#5806997">ok</a></span>&nbsp;<span class="op" id="5807418">=</span>&nbsp;<span class="ident" id="5807420"><a href="/go/build/build.go.html#5807505">hasSubdir</a></span><span class="op" id="5807429">(</span><span class="ident" id="5807430"><a href="/go/build/build.go.html#5806966">root</a></span><span class="op" id="5807434">,</span>&nbsp;<span class="ident" id="5807436"><a href="/go/build/build.go.html#5807309">dirSym</a></span><span class="op" id="5807442">)</span><span class="op" id="5807443">;</span>&nbsp;<span class="ident" id="5807445"><a href="/go/build/build.go.html#5806997">ok</a></span>&nbsp;<span class="op" id="5807448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807452">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807463">return</span>&nbsp;<span class="ident" id="5807470"><a href="/go/build/build.go.html#5807505">hasSubdir</a></span><span class="op" id="5807479">(</span><span class="ident" id="5807480"><a href="/go/build/build.go.html#5807266">rootSym</a></span><span class="op" id="5807487">,</span>&nbsp;<span class="ident" id="5807489"><a href="/go/build/build.go.html#5807309">dirSym</a></span><span class="op" id="5807495">)</span><br>
<span class="lineno">155</span><span class="op" id="5807497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5807500">func</span>&nbsp;<span class="ident" id="5807505">hasSubdir</span><span class="op" id="5807514">(</span><span class="ident" id="5807515">root</span><span class="op" id="5807519">,</span>&nbsp;<span class="ident" id="5807521">dir</span>&nbsp;<span class="builtintype" id="5807525">string</span><span class="op" id="5807531">)</span>&nbsp;<span class="op" id="5807533">(</span><span class="ident" id="5807534">rel</span>&nbsp;<span class="builtintype" id="5807538">string</span><span class="op" id="5807544">,</span>&nbsp;<span class="ident" id="5807546">ok</span>&nbsp;<span class="builtintype" id="5807549">bool</span><span class="op" id="5807553">)</span>&nbsp;<span class="op" id="5807555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807558">const</span>&nbsp;<span class="ident" id="5807564">sep</span>&nbsp;<span class="op" id="5807568">=</span>&nbsp;<span class="builtintype" id="5807570">string</span><span class="op" id="5807576">(</span><span class="ident" id="5807577"><a href="/go/build/build.go.html#5802726">filepath</a></span><span class="op" id="5807585">.</span><span class="ident" id="5807586">Separator</span><span class="op" id="5807595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807598"><a href="/go/build/build.go.html#5807515">root</a></span>&nbsp;<span class="op" id="5807603">=</span>&nbsp;<span class="ident" id="5807605"><a href="/go/build/build.go.html#5802726">filepath</a></span><span class="op" id="5807613">.</span><span class="ident" id="5807614">Clean</span><span class="op" id="5807619">(</span><span class="ident" id="5807620"><a href="/go/build/build.go.html#5807515">root</a></span><span class="op" id="5807624">)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807627">if</span>&nbsp;<span class="op" id="5807630">!</span><span class="ident" id="5807631"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5807638">.</span><span class="ident" id="5807639">HasSuffix</span><span class="op" id="5807648">(</span><span class="ident" id="5807649"><a href="/go/build/build.go.html#5807515">root</a></span><span class="op" id="5807653">,</span>&nbsp;<span class="ident" id="5807655"><a href="/go/build/build.go.html#5807564">sep</a></span><span class="op" id="5807658">)</span>&nbsp;<span class="op" id="5807660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807664"><a href="/go/build/build.go.html#5807515">root</a></span>&nbsp;<span class="op" id="5807669">+=</span>&nbsp;<span class="ident" id="5807672"><a href="/go/build/build.go.html#5807564">sep</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5807680"><a href="/go/build/build.go.html#5807521">dir</a></span>&nbsp;<span class="op" id="5807684">=</span>&nbsp;<span class="ident" id="5807686"><a href="/go/build/build.go.html#5802726">filepath</a></span><span class="op" id="5807694">.</span><span class="ident" id="5807695">Clean</span><span class="op" id="5807700">(</span><span class="ident" id="5807701"><a href="/go/build/build.go.html#5807521">dir</a></span><span class="op" id="5807704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807707">if</span>&nbsp;<span class="op" id="5807710">!</span><span class="ident" id="5807711"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5807718">.</span><span class="ident" id="5807719">HasPrefix</span><span class="op" id="5807728">(</span><span class="ident" id="5807729"><a href="/go/build/build.go.html#5807521">dir</a></span><span class="op" id="5807732">,</span>&nbsp;<span class="ident" id="5807734"><a href="/go/build/build.go.html#5807515">root</a></span><span class="op" id="5807738">)</span>&nbsp;<span class="op" id="5807740">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807744">return</span>&nbsp;<span class="string" id="5807751">&#34;&#34;</span><span class="op" id="5807753">,</span>&nbsp;<span class="ident" id="5807755">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5807762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807765">return</span>&nbsp;<span class="ident" id="5807772"><a href="/go/build/build.go.html#5802726">filepath</a></span><span class="op" id="5807780">.</span><span class="ident" id="5807781">ToSlash</span><span class="op" id="5807788">(</span><span class="ident" id="5807789"><a href="/go/build/build.go.html#5807521">dir</a></span><span class="op" id="5807792">[</span><span class="builtinfunc" id="5807793">len</span><span class="op" id="5807796">(</span><span class="ident" id="5807797"><a href="/go/build/build.go.html#5807515">root</a></span><span class="op" id="5807801">)</span><span class="op" id="5807802">:</span><span class="op" id="5807803">]</span><span class="op" id="5807804">)</span><span class="op" id="5807805">,</span>&nbsp;<span class="ident" id="5807807">true</span><br>
<span class="lineno"></span><span class="op" id="5807812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="comment" id="5807815">//&nbsp;readDir&nbsp;calls&nbsp;ctxt.ReadDir&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;ioutil.ReadDir.</span><br>
<span class="lineno"></span><span class="keyword" id="5807882">func</span>&nbsp;<span class="op" id="5807887">(</span><span class="ident" id="5807888">ctxt</span>&nbsp;<span class="op" id="5807893">*</span><span class="ident" id="5807894"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5807901">)</span>&nbsp;<span class="ident" id="5807903">readDir</span><span class="op" id="5807910">(</span><span class="ident" id="5807911">path</span>&nbsp;<span class="builtintype" id="5807916">string</span><span class="op" id="5807922">)</span>&nbsp;<span class="op" id="5807924">(</span><span class="op" id="5807925">[</span><span class="op" id="5807926">]</span><span class="ident" id="5807927"><a href="/go/build/build.go.html#5802704">os</a></span><span class="op" id="5807929">.</span><span class="ident" id="5807930">FileInfo</span><span class="op" id="5807938">,</span>&nbsp;<span class="builtintype" id="5807940">error</span><span class="op" id="5807945">)</span>&nbsp;<span class="op" id="5807947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807950">if</span>&nbsp;<span class="ident" id="5807953">f</span>&nbsp;<span class="op" id="5807955">:=</span>&nbsp;<span class="ident" id="5807958"><a href="/go/build/build.go.html#5807888">ctxt</a></span><span class="op" id="5807962">.</span><span class="ident" id="5807963">ReadDir</span><span class="op" id="5807970">;</span>&nbsp;<span class="ident" id="5807972"><a href="/go/build/build.go.html#5807953">f</a></span>&nbsp;<span class="op" id="5807974">!=</span>&nbsp;<span class="ident" id="5807977">nil</span>&nbsp;<span class="op" id="5807981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5807985">return</span>&nbsp;<span class="ident" id="5807992"><a href="/go/build/build.go.html#5807953">f</a></span><span class="op" id="5807993">(</span><span class="ident" id="5807994"><a href="/go/build/build.go.html#5807911">path</a></span><span class="op" id="5807998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5808001">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808004">return</span>&nbsp;<span class="ident" id="5808011"><a href="/go/build/build.go.html#5802684">ioutil</a></span><span class="op" id="5808017">.</span><span class="ident" id="5808018">ReadDir</span><span class="op" id="5808025">(</span><span class="ident" id="5808026"><a href="/go/build/build.go.html#5807911">path</a></span><span class="op" id="5808030">)</span><br>
<span class="lineno"></span><span class="op" id="5808032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5808035">//&nbsp;openFile&nbsp;calls&nbsp;ctxt.OpenFile&nbsp;(if&nbsp;not&nbsp;nil)&nbsp;or&nbsp;else&nbsp;os.Open.</span><br>
<span class="lineno"></span><span class="keyword" id="5808097">func</span>&nbsp;<span class="op" id="5808102">(</span><span class="ident" id="5808103">ctxt</span>&nbsp;<span class="op" id="5808108">*</span><span class="ident" id="5808109"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5808116">)</span>&nbsp;<span class="ident" id="5808118">openFile</span><span class="op" id="5808126">(</span><span class="ident" id="5808127">path</span>&nbsp;<span class="builtintype" id="5808132">string</span><span class="op" id="5808138">)</span>&nbsp;<span class="op" id="5808140">(</span><span class="ident" id="5808141"><a href="/go/build/build.go.html#5802678">io</a></span><span class="op" id="5808143">.</span><span class="ident" id="5808144">ReadCloser</span><span class="op" id="5808154">,</span>&nbsp;<span class="builtintype" id="5808156">error</span><span class="op" id="5808161">)</span>&nbsp;<span class="op" id="5808163">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808166">if</span>&nbsp;<span class="ident" id="5808169">fn</span>&nbsp;<span class="op" id="5808172">:=</span>&nbsp;<span class="ident" id="5808175"><a href="/go/build/build.go.html#5808103">ctxt</a></span><span class="op" id="5808179">.</span><span class="ident" id="5808180">OpenFile</span><span class="op" id="5808188">;</span>&nbsp;<span class="ident" id="5808190"><a href="/go/build/build.go.html#5808169">fn</a></span>&nbsp;<span class="op" id="5808193">!=</span>&nbsp;<span class="ident" id="5808196">nil</span>&nbsp;<span class="op" id="5808200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808204">return</span>&nbsp;<span class="ident" id="5808211"><a href="/go/build/build.go.html#5808169">fn</a></span><span class="op" id="5808213">(</span><span class="ident" id="5808214"><a href="/go/build/build.go.html#5808127">path</a></span><span class="op" id="5808218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5808221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5808225">f</span><span class="op" id="5808226">,</span>&nbsp;<span class="ident" id="5808228">err</span>&nbsp;<span class="op" id="5808232">:=</span>&nbsp;<span class="ident" id="5808235"><a href="/go/build/build.go.html#5802704">os</a></span><span class="op" id="5808237">.</span><span class="ident" id="5808238">Open</span><span class="op" id="5808242">(</span><span class="ident" id="5808243"><a href="/go/build/build.go.html#5808127">path</a></span><span class="op" id="5808247">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808250">if</span>&nbsp;<span class="ident" id="5808253"><a href="/go/build/build.go.html#5808228">err</a></span>&nbsp;<span class="op" id="5808257">!=</span>&nbsp;<span class="ident" id="5808260">nil</span>&nbsp;<span class="op" id="5808264">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808268">return</span>&nbsp;<span class="ident" id="5808275">nil</span><span class="op" id="5808278">,</span>&nbsp;<span class="ident" id="5808280"><a href="/go/build/build.go.html#5808228">err</a></span>&nbsp;<span class="comment" id="5808284">//&nbsp;nil&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5808302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808305">return</span>&nbsp;<span class="ident" id="5808312"><a href="/go/build/build.go.html#5808225">f</a></span><span class="op" id="5808313">,</span>&nbsp;<span class="ident" id="5808315">nil</span><br>
<span class="lineno"></span><span class="op" id="5808319">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5808322">//&nbsp;isFile&nbsp;determines&nbsp;whether&nbsp;path&nbsp;is&nbsp;a&nbsp;file&nbsp;by&nbsp;trying&nbsp;to&nbsp;open&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="5808388">//&nbsp;It&nbsp;reuses&nbsp;openFile&nbsp;instead&nbsp;of&nbsp;adding&nbsp;another&nbsp;function&nbsp;to&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5808452">//&nbsp;list&nbsp;in&nbsp;Context.</span><br>
<span class="lineno"></span><span class="keyword" id="5808472">func</span>&nbsp;<span class="op" id="5808477">(</span><span class="ident" id="5808478">ctxt</span>&nbsp;<span class="op" id="5808483">*</span><span class="ident" id="5808484"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5808491">)</span>&nbsp;<span class="ident" id="5808493">isFile</span><span class="op" id="5808499">(</span><span class="ident" id="5808500">path</span>&nbsp;<span class="builtintype" id="5808505">string</span><span class="op" id="5808511">)</span>&nbsp;<span class="builtintype" id="5808513">bool</span>&nbsp;<span class="op" id="5808518">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5808521">f</span><span class="op" id="5808522">,</span>&nbsp;<span class="ident" id="5808524">err</span>&nbsp;<span class="op" id="5808528">:=</span>&nbsp;<span class="ident" id="5808531"><a href="/go/build/build.go.html#5808478">ctxt</a></span><span class="op" id="5808535">.</span><span class="ident" id="5808536">openFile</span><span class="op" id="5808544">(</span><span class="ident" id="5808545"><a href="/go/build/build.go.html#5808500">path</a></span><span class="op" id="5808549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808552">if</span>&nbsp;<span class="ident" id="5808555"><a href="/go/build/build.go.html#5808524">err</a></span>&nbsp;<span class="op" id="5808559">!=</span>&nbsp;<span class="ident" id="5808562">nil</span>&nbsp;<span class="op" id="5808566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808570">return</span>&nbsp;<span class="ident" id="5808577">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5808584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5808587"><a href="/go/build/build.go.html#5808521">f</a></span><span class="op" id="5808588">.</span><span class="ident" id="5808589">Close</span><span class="op" id="5808594">(</span><span class="op" id="5808595">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808598">return</span>&nbsp;<span class="ident" id="5808605">true</span><br>
<span class="lineno"></span><span class="op" id="5808610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5808613">//&nbsp;gopath&nbsp;returns&nbsp;the&nbsp;list&nbsp;of&nbsp;Go&nbsp;path&nbsp;directories.</span><br>
<span class="lineno"></span><span class="keyword" id="5808664">func</span>&nbsp;<span class="op" id="5808669">(</span><span class="ident" id="5808670">ctxt</span>&nbsp;<span class="op" id="5808675">*</span><span class="ident" id="5808676"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5808683">)</span>&nbsp;<span class="ident" id="5808685">gopath</span><span class="op" id="5808691">(</span><span class="op" id="5808692">)</span>&nbsp;<span class="op" id="5808694">[</span><span class="op" id="5808695">]</span><span class="builtintype" id="5808696">string</span>&nbsp;<span class="op" id="5808703">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808706">var</span>&nbsp;<span class="ident" id="5808710">all</span>&nbsp;<span class="op" id="5808714">[</span><span class="op" id="5808715">]</span><span class="builtintype" id="5808716">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808724">for</span>&nbsp;<span class="ident" id="5808728">_</span><span class="op" id="5808729">,</span>&nbsp;<span class="ident" id="5808731">p</span>&nbsp;<span class="op" id="5808733">:=</span>&nbsp;<span class="keyword" id="5808736">range</span>&nbsp;<span class="ident" id="5808742"><a href="/go/build/build.go.html#5808670">ctxt</a></span><span class="op" id="5808746">.</span><span class="ident" id="5808747">splitPathList</span><span class="op" id="5808760">(</span><span class="ident" id="5808761"><a href="/go/build/build.go.html#5808670">ctxt</a></span><span class="op" id="5808765">.</span><span class="ident" id="5808766">GOPATH</span><span class="op" id="5808772">)</span>&nbsp;<span class="op" id="5808774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808778">if</span>&nbsp;<span class="ident" id="5808781"><a href="/go/build/build.go.html#5808731">p</a></span>&nbsp;<span class="op" id="5808783">==</span>&nbsp;<span class="string" id="5808786">&#34;&#34;</span>&nbsp;<span class="op" id="5808789">||</span>&nbsp;<span class="ident" id="5808792"><a href="/go/build/build.go.html#5808731">p</a></span>&nbsp;<span class="op" id="5808794">==</span>&nbsp;<span class="ident" id="5808797"><a href="/go/build/build.go.html#5808670">ctxt</a></span><span class="op" id="5808801">.</span><span class="ident" id="5808802">GOROOT</span>&nbsp;<span class="op" id="5808809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5808814">//&nbsp;Empty&nbsp;paths&nbsp;are&nbsp;uninteresting.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5808851">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;the&nbsp;GOROOT,&nbsp;ignore&nbsp;it.</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5808895">//&nbsp;People&nbsp;sometimes&nbsp;set&nbsp;GOPATH=$GOROOT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5808938">//&nbsp;Do&nbsp;not&nbsp;get&nbsp;confused&nbsp;by&nbsp;this&nbsp;common&nbsp;mistake.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5808988">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5808999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5809003">if</span>&nbsp;<span class="ident" id="5809006"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5809013">.</span><span class="ident" id="5809014">HasPrefix</span><span class="op" id="5809023">(</span><span class="ident" id="5809024"><a href="/go/build/build.go.html#5808731">p</a></span><span class="op" id="5809025">,</span>&nbsp;<span class="string" id="5809027">&#34;~&#34;</span><span class="op" id="5809030">)</span>&nbsp;<span class="op" id="5809032">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809037">//&nbsp;Path&nbsp;segments&nbsp;starting&nbsp;with&nbsp;~&nbsp;on&nbsp;Unix&nbsp;are&nbsp;almost&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809099">//&nbsp;users&nbsp;who&nbsp;have&nbsp;incorrectly&nbsp;quoted&nbsp;~&nbsp;while&nbsp;setting&nbsp;GOPATH,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809163">//&nbsp;preventing&nbsp;it&nbsp;from&nbsp;expanding&nbsp;to&nbsp;$HOME.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809208">//&nbsp;The&nbsp;situation&nbsp;is&nbsp;made&nbsp;more&nbsp;confusing&nbsp;by&nbsp;the&nbsp;fact&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809268">//&nbsp;bash&nbsp;allows&nbsp;quoted&nbsp;~&nbsp;in&nbsp;$PATH&nbsp;(most&nbsp;shells&nbsp;do&nbsp;not).</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809326">//&nbsp;Do&nbsp;not&nbsp;get&nbsp;confused&nbsp;by&nbsp;this,&nbsp;and&nbsp;do&nbsp;not&nbsp;try&nbsp;to&nbsp;use&nbsp;the&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809393">//&nbsp;It&nbsp;does&nbsp;not&nbsp;exist,&nbsp;and&nbsp;printing&nbsp;errors&nbsp;about&nbsp;it&nbsp;confuses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809456">//&nbsp;those&nbsp;users&nbsp;even&nbsp;more,&nbsp;because&nbsp;they&nbsp;think&nbsp;&#34;sure&nbsp;~&nbsp;exists!&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809522">//&nbsp;The&nbsp;go&nbsp;command&nbsp;diagnoses&nbsp;this&nbsp;situation&nbsp;and&nbsp;prints&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809581">//&nbsp;useful&nbsp;error.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809601">//&nbsp;On&nbsp;Windows,&nbsp;~&nbsp;is&nbsp;used&nbsp;in&nbsp;short&nbsp;names,&nbsp;such&nbsp;as&nbsp;c:\progra~1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5809665">//&nbsp;for&nbsp;c:\program&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5809693">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5809704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5809708"><a href="/go/build/build.go.html#5808710">all</a></span>&nbsp;<span class="op" id="5809712">=</span>&nbsp;<span class="builtinfunc" id="5809714">append</span><span class="op" id="5809720">(</span><span class="ident" id="5809721"><a href="/go/build/build.go.html#5808710">all</a></span><span class="op" id="5809724">,</span>&nbsp;<span class="ident" id="5809726"><a href="/go/build/build.go.html#5808731">p</a></span><span class="op" id="5809727">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5809730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5809733">return</span>&nbsp;<span class="ident" id="5809740"><a href="/go/build/build.go.html#5808710">all</a></span><br>
<span class="lineno"></span><span class="op" id="5809744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5809747">//&nbsp;SrcDirs&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;package&nbsp;source&nbsp;root&nbsp;directories.</span><br>
<span class="lineno">235</span><span class="comment" id="5809809">//&nbsp;It&nbsp;draws&nbsp;from&nbsp;the&nbsp;current&nbsp;Go&nbsp;root&nbsp;and&nbsp;Go&nbsp;path&nbsp;but&nbsp;omits&nbsp;directories</span><br>
<span class="lineno"></span><span class="comment" id="5809880">//&nbsp;that&nbsp;do&nbsp;not&nbsp;exist.</span><br>
<span class="lineno"></span><span class="keyword" id="5809902">func</span>&nbsp;<span class="op" id="5809907">(</span><span class="ident" id="5809908">ctxt</span>&nbsp;<span class="op" id="5809913">*</span><span class="ident" id="5809914"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5809921">)</span>&nbsp;<span class="ident" id="5809923">SrcDirs</span><span class="op" id="5809930">(</span><span class="op" id="5809931">)</span>&nbsp;<span class="op" id="5809933">[</span><span class="op" id="5809934">]</span><span class="builtintype" id="5809935">string</span>&nbsp;<span class="op" id="5809942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5809945">var</span>&nbsp;<span class="ident" id="5809949">all</span>&nbsp;<span class="op" id="5809953">[</span><span class="op" id="5809954">]</span><span class="builtintype" id="5809955">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5809963">if</span>&nbsp;<span class="ident" id="5809966"><a href="/go/build/build.go.html#5809908">ctxt</a></span><span class="op" id="5809970">.</span><span class="ident" id="5809971">GOROOT</span>&nbsp;<span class="op" id="5809978">!=</span>&nbsp;<span class="string" id="5809981">&#34;&#34;</span>&nbsp;<span class="op" id="5809984">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5809988">dir</span>&nbsp;<span class="op" id="5809992">:=</span>&nbsp;<span class="ident" id="5809995"><a href="/go/build/build.go.html#5809908">ctxt</a></span><span class="op" id="5809999">.</span><span class="ident" id="5810000">joinPath</span><span class="op" id="5810008">(</span><span class="ident" id="5810009"><a href="/go/build/build.go.html#5809908">ctxt</a></span><span class="op" id="5810013">.</span><span class="ident" id="5810014">GOROOT</span><span class="op" id="5810020">,</span>&nbsp;<span class="string" id="5810022">&#34;src&#34;</span><span class="op" id="5810027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5810031">if</span>&nbsp;<span class="ident" id="5810034"><a href="/go/build/build.go.html#5809908">ctxt</a></span><span class="op" id="5810038">.</span><span class="ident" id="5810039">isDir</span><span class="op" id="5810044">(</span><span class="ident" id="5810045"><a href="/go/build/build.go.html#5809988">dir</a></span><span class="op" id="5810048">)</span>&nbsp;<span class="op" id="5810050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5810055"><a href="/go/build/build.go.html#5809949">all</a></span>&nbsp;<span class="op" id="5810059">=</span>&nbsp;<span class="builtinfunc" id="5810061">append</span><span class="op" id="5810067">(</span><span class="ident" id="5810068"><a href="/go/build/build.go.html#5809949">all</a></span><span class="op" id="5810071">,</span>&nbsp;<span class="ident" id="5810073"><a href="/go/build/build.go.html#5809988">dir</a></span><span class="op" id="5810076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5810080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5810083">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5810086">for</span>&nbsp;<span class="ident" id="5810090">_</span><span class="op" id="5810091">,</span>&nbsp;<span class="ident" id="5810093">p</span>&nbsp;<span class="op" id="5810095">:=</span>&nbsp;<span class="keyword" id="5810098">range</span>&nbsp;<span class="ident" id="5810104"><a href="/go/build/build.go.html#5809908">ctxt</a></span><span class="op" id="5810108">.</span><span class="ident" id="5810109">gopath</span><span class="op" id="5810115">(</span><span class="op" id="5810116">)</span>&nbsp;<span class="op" id="5810118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5810122">dir</span>&nbsp;<span class="op" id="5810126">:=</span>&nbsp;<span class="ident" id="5810129"><a href="/go/build/build.go.html#5809908">ctxt</a></span><span class="op" id="5810133">.</span><span class="ident" id="5810134">joinPath</span><span class="op" id="5810142">(</span><span class="ident" id="5810143"><a href="/go/build/build.go.html#5810093">p</a></span><span class="op" id="5810144">,</span>&nbsp;<span class="string" id="5810146">&#34;src&#34;</span><span class="op" id="5810151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5810155">if</span>&nbsp;<span class="ident" id="5810158"><a href="/go/build/build.go.html#5809908">ctxt</a></span><span class="op" id="5810162">.</span><span class="ident" id="5810163">isDir</span><span class="op" id="5810168">(</span><span class="ident" id="5810169"><a href="/go/build/build.go.html#5810122">dir</a></span><span class="op" id="5810172">)</span>&nbsp;<span class="op" id="5810174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5810179"><a href="/go/build/build.go.html#5809949">all</a></span>&nbsp;<span class="op" id="5810183">=</span>&nbsp;<span class="builtinfunc" id="5810185">append</span><span class="op" id="5810191">(</span><span class="ident" id="5810192"><a href="/go/build/build.go.html#5809949">all</a></span><span class="op" id="5810195">,</span>&nbsp;<span class="ident" id="5810197"><a href="/go/build/build.go.html#5810122">dir</a></span><span class="op" id="5810200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5810204">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5810207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5810210">return</span>&nbsp;<span class="ident" id="5810217"><a href="/go/build/build.go.html#5809949">all</a></span><br>
<span class="lineno"></span><span class="op" id="5810221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5810224">//&nbsp;Default&nbsp;is&nbsp;the&nbsp;default&nbsp;Context&nbsp;for&nbsp;builds.</span><br>
<span class="lineno">255</span><span class="comment" id="5810270">//&nbsp;It&nbsp;uses&nbsp;the&nbsp;GOARCH,&nbsp;GOOS,&nbsp;GOROOT,&nbsp;and&nbsp;GOPATH&nbsp;environment&nbsp;variables</span><br>
<span class="lineno"></span><span class="comment" id="5810340">//&nbsp;if&nbsp;set,&nbsp;or&nbsp;else&nbsp;the&nbsp;compiled&nbsp;code&#39;s&nbsp;GOARCH,&nbsp;GOOS,&nbsp;and&nbsp;GOROOT.</span><br>
<span class="lineno"></span><span class="keyword" id="5810405">var</span>&nbsp;<span class="ident" id="5810409">Default</span>&nbsp;<span class="ident" id="5810417"><a href="/go/build/build.go.html#5802877">Context</a></span>&nbsp;<span class="op" id="5810425">=</span>&nbsp;<span class="ident" id="5810427"><a href="/go/build/build.go.html#5811007">defaultContext</a></span><span class="op" id="5810441">(</span><span class="op" id="5810442">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5810445">var</span>&nbsp;<span class="ident" id="5810449">cgoEnabled</span>&nbsp;<span class="op" id="5810460">=</span>&nbsp;<span class="keyword" id="5810462">map</span><span class="op" id="5810465">[</span><span class="builtintype" id="5810466">string</span><span class="op" id="5810472">]</span><span class="builtintype" id="5810473">bool</span><span class="op" id="5810477">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810480">&#34;darwin/386&#34;</span><span class="op" id="5810492">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810499">true</span><span class="op" id="5810503">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810506">&#34;darwin/amd64&#34;</span><span class="op" id="5810520">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810525">true</span><span class="op" id="5810529">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810532">&#34;dragonfly/386&#34;</span><span class="op" id="5810547">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5810551">true</span><span class="op" id="5810555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810558">&#34;dragonfly/amd64&#34;</span><span class="op" id="5810575">:</span>&nbsp;<span class="ident" id="5810577">true</span><span class="op" id="5810581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810584">&#34;freebsd/386&#34;</span><span class="op" id="5810597">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810603">true</span><span class="op" id="5810607">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810610">&#34;freebsd/amd64&#34;</span><span class="op" id="5810625">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5810629">true</span><span class="op" id="5810633">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810636">&#34;freebsd/arm&#34;</span><span class="op" id="5810649">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810655">true</span><span class="op" id="5810659">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810662">&#34;linux/386&#34;</span><span class="op" id="5810673">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810681">true</span><span class="op" id="5810685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810688">&#34;linux/amd64&#34;</span><span class="op" id="5810701">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810707">true</span><span class="op" id="5810711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810714">&#34;linux/arm&#34;</span><span class="op" id="5810725">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810733">true</span><span class="op" id="5810737">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810740">&#34;android/386&#34;</span><span class="op" id="5810753">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810759">true</span><span class="op" id="5810763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810766">&#34;android/amd64&#34;</span><span class="op" id="5810781">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5810785">true</span><span class="op" id="5810789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810792">&#34;android/arm&#34;</span><span class="op" id="5810805">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810811">true</span><span class="op" id="5810815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810818">&#34;netbsd/386&#34;</span><span class="op" id="5810830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810837">true</span><span class="op" id="5810841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810844">&#34;netbsd/amd64&#34;</span><span class="op" id="5810858">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810863">true</span><span class="op" id="5810867">,</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810870">&#34;netbsd/arm&#34;</span><span class="op" id="5810882">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810889">true</span><span class="op" id="5810893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810896">&#34;openbsd/386&#34;</span><span class="op" id="5810909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810915">true</span><span class="op" id="5810919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810922">&#34;openbsd/amd64&#34;</span><span class="op" id="5810937">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5810941">true</span><span class="op" id="5810945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810948">&#34;windows/386&#34;</span><span class="op" id="5810961">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5810967">true</span><span class="op" id="5810971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5810974">&#34;windows/amd64&#34;</span><span class="op" id="5810989">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5810993">true</span><span class="op" id="5810997">,</span><br>
<span class="lineno">280</span><span class="op" id="5810999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5811002">func</span>&nbsp;<span class="ident" id="5811007">defaultContext</span><span class="op" id="5811021">(</span><span class="op" id="5811022">)</span>&nbsp;<span class="ident" id="5811024"><a href="/go/build/build.go.html#5802877">Context</a></span>&nbsp;<span class="op" id="5811032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811035">var</span>&nbsp;<span class="ident" id="5811039">c</span>&nbsp;<span class="ident" id="5811041"><a href="/go/build/build.go.html#5802877">Context</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811051"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5811052">.</span><span class="ident" id="5811053">GOARCH</span>&nbsp;<span class="op" id="5811060">=</span>&nbsp;<span class="ident" id="5811062"><a href="/go/build/build.go.html#5812133">envOr</a></span><span class="op" id="5811067">(</span><span class="string" id="5811068">&#34;GOARCH&#34;</span><span class="op" id="5811076">,</span>&nbsp;<span class="ident" id="5811078"><a href="/go/build/build.go.html#5802743">runtime</a></span><span class="op" id="5811085">.</span><span class="ident" id="5811086">GOARCH</span><span class="op" id="5811092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811095"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5811096">.</span><span class="ident" id="5811097">GOOS</span>&nbsp;<span class="op" id="5811102">=</span>&nbsp;<span class="ident" id="5811104"><a href="/go/build/build.go.html#5812133">envOr</a></span><span class="op" id="5811109">(</span><span class="string" id="5811110">&#34;GOOS&#34;</span><span class="op" id="5811116">,</span>&nbsp;<span class="ident" id="5811118"><a href="/go/build/build.go.html#5802743">runtime</a></span><span class="op" id="5811125">.</span><span class="ident" id="5811126">GOOS</span><span class="op" id="5811130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811133"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5811134">.</span><span class="ident" id="5811135">GOROOT</span>&nbsp;<span class="op" id="5811142">=</span>&nbsp;<span class="ident" id="5811144"><a href="/go/build/build.go.html#5802743">runtime</a></span><span class="op" id="5811151">.</span><span class="ident" id="5811152">GOROOT</span><span class="op" id="5811158">(</span><span class="op" id="5811159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811162"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5811163">.</span><span class="ident" id="5811164">GOPATH</span>&nbsp;<span class="op" id="5811171">=</span>&nbsp;<span class="ident" id="5811173"><a href="/go/build/build.go.html#5812133">envOr</a></span><span class="op" id="5811178">(</span><span class="string" id="5811179">&#34;GOPATH&#34;</span><span class="op" id="5811187">,</span>&nbsp;<span class="string" id="5811189">&#34;&#34;</span><span class="op" id="5811191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811194"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5811195">.</span><span class="ident" id="5811196">Compiler</span>&nbsp;<span class="op" id="5811205">=</span>&nbsp;<span class="ident" id="5811207"><a href="/go/build/build.go.html#5802743">runtime</a></span><span class="op" id="5811214">.</span><span class="ident" id="5811215">Compiler</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5811226">//&nbsp;Each&nbsp;major&nbsp;Go&nbsp;release&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.x&nbsp;series&nbsp;should&nbsp;add&nbsp;a&nbsp;tag&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5811296">//&nbsp;Old&nbsp;tags&nbsp;should&nbsp;not&nbsp;be&nbsp;removed.&nbsp;That&nbsp;is,&nbsp;the&nbsp;go1.x&nbsp;tag&nbsp;is&nbsp;present</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5811366">//&nbsp;in&nbsp;all&nbsp;releases&nbsp;&gt;=&nbsp;Go&nbsp;1.x.&nbsp;Code&nbsp;that&nbsp;requires&nbsp;Go&nbsp;1.x&nbsp;or&nbsp;later&nbsp;should</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5811439">//&nbsp;say&nbsp;&#34;+build&nbsp;go1.x&#34;,&nbsp;and&nbsp;code&nbsp;that&nbsp;should&nbsp;only&nbsp;be&nbsp;built&nbsp;before&nbsp;Go&nbsp;1.x</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5811512">//&nbsp;(perhaps&nbsp;it&nbsp;is&nbsp;the&nbsp;stub&nbsp;to&nbsp;use&nbsp;in&nbsp;that&nbsp;case)&nbsp;should&nbsp;say&nbsp;&#34;+build&nbsp;!go1.x&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5811589">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5811593">//&nbsp;When&nbsp;we&nbsp;reach&nbsp;Go&nbsp;1.5&nbsp;the&nbsp;line&nbsp;will&nbsp;read</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5811637">//&nbsp;&nbsp;&nbsp;&nbspc.ReleaseTags&nbsp;=&nbsp;[]string{&#34;go1.1&#34;,&nbsp;&#34;go1.2&#34;,&nbsp;&#34;go1.3&#34;,&nbsp;&#34;go1.4&#34;,&nbsp;&#34;go1.5&#34;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5811711">//&nbsp;and&nbsp;so&nbsp;on.</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811726"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5811727">.</span><span class="ident" id="5811728">ReleaseTags</span>&nbsp;<span class="op" id="5811740">=</span>&nbsp;<span class="op" id="5811742">[</span><span class="op" id="5811743">]</span><span class="builtintype" id="5811744">string</span><span class="op" id="5811750">{</span><span class="string" id="5811751">&#34;go1.1&#34;</span><span class="op" id="5811758">,</span>&nbsp;<span class="string" id="5811760">&#34;go1.2&#34;</span><span class="op" id="5811767">,</span>&nbsp;<span class="string" id="5811769">&#34;go1.3&#34;</span><span class="op" id="5811776">,</span>&nbsp;<span class="string" id="5811778">&#34;go1.4&#34;</span><span class="op" id="5811785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811789">switch</span>&nbsp;<span class="ident" id="5811796"><a href="/go/build/build.go.html#5802704">os</a></span><span class="op" id="5811798">.</span><span class="ident" id="5811799">Getenv</span><span class="op" id="5811805">(</span><span class="string" id="5811806">&#34;CGO_ENABLED&#34;</span><span class="op" id="5811819">)</span>&nbsp;<span class="op" id="5811821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811824">case</span>&nbsp;<span class="string" id="5811829">&#34;1&#34;</span><span class="op" id="5811832">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811836"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5811837">.</span><span class="ident" id="5811838">CgoEnabled</span>&nbsp;<span class="op" id="5811849">=</span>&nbsp;<span class="ident" id="5811851">true</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811857">case</span>&nbsp;<span class="string" id="5811862">&#34;0&#34;</span><span class="op" id="5811865">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5811869"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5811870">.</span><span class="ident" id="5811871">CgoEnabled</span>&nbsp;<span class="op" id="5811882">=</span>&nbsp;<span class="ident" id="5811884">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811891">default</span><span class="op" id="5811898">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5811902">//&nbsp;cgo&nbsp;must&nbsp;be&nbsp;explicitly&nbsp;enabled&nbsp;for&nbsp;cross&nbsp;compilation&nbsp;builds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5811967">if</span>&nbsp;<span class="ident" id="5811970"><a href="/go/build/build.go.html#5802743">runtime</a></span><span class="op" id="5811977">.</span><span class="ident" id="5811978">GOARCH</span>&nbsp;<span class="op" id="5811985">==</span>&nbsp;<span class="ident" id="5811988"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5811989">.</span><span class="ident" id="5811990">GOARCH</span>&nbsp;<span class="op" id="5811997">&amp;&amp;</span>&nbsp;<span class="ident" id="5812000"><a href="/go/build/build.go.html#5802743">runtime</a></span><span class="op" id="5812007">.</span><span class="ident" id="5812008">GOOS</span>&nbsp;<span class="op" id="5812013">==</span>&nbsp;<span class="ident" id="5812016"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5812017">.</span><span class="ident" id="5812018">GOOS</span>&nbsp;<span class="op" id="5812023">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812028"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5812029">.</span><span class="ident" id="5812030">CgoEnabled</span>&nbsp;<span class="op" id="5812041">=</span>&nbsp;<span class="ident" id="5812043"><a href="/go/build/build.go.html#5810449">cgoEnabled</a></span><span class="op" id="5812053">[</span><span class="ident" id="5812054"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5812055">.</span><span class="ident" id="5812056">GOOS</span><span class="op" id="5812060">+</span><span class="string" id="5812061">&#34;/&#34;</span><span class="op" id="5812064">+</span><span class="ident" id="5812065"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5812066">.</span><span class="ident" id="5812067">GOARCH</span><span class="op" id="5812073">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812078">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812090"><a href="/go/build/build.go.html#5811039">c</a></span><span class="op" id="5812091">.</span><span class="ident" id="5812092">CgoEnabled</span>&nbsp;<span class="op" id="5812103">=</span>&nbsp;<span class="ident" id="5812105">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812112">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812116">return</span>&nbsp;<span class="ident" id="5812123"><a href="/go/build/build.go.html#5811039">c</a></span><br>
<span class="lineno"></span><span class="op" id="5812125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5812128">func</span>&nbsp;<span class="ident" id="5812133">envOr</span><span class="op" id="5812138">(</span><span class="ident" id="5812139">name</span><span class="op" id="5812143">,</span>&nbsp;<span class="ident" id="5812145">def</span>&nbsp;<span class="builtintype" id="5812149">string</span><span class="op" id="5812155">)</span>&nbsp;<span class="builtintype" id="5812157">string</span>&nbsp;<span class="op" id="5812164">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812167">s</span>&nbsp;<span class="op" id="5812169">:=</span>&nbsp;<span class="ident" id="5812172"><a href="/go/build/build.go.html#5802704">os</a></span><span class="op" id="5812174">.</span><span class="ident" id="5812175">Getenv</span><span class="op" id="5812181">(</span><span class="ident" id="5812182"><a href="/go/build/build.go.html#5812139">name</a></span><span class="op" id="5812186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812189">if</span>&nbsp;<span class="ident" id="5812192"><a href="/go/build/build.go.html#5812167">s</a></span>&nbsp;<span class="op" id="5812194">==</span>&nbsp;<span class="string" id="5812197">&#34;&#34;</span>&nbsp;<span class="op" id="5812200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812204">return</span>&nbsp;<span class="ident" id="5812211"><a href="/go/build/build.go.html#5812145">def</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5812216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5812219">return</span>&nbsp;<span class="ident" id="5812226"><a href="/go/build/build.go.html#5812167">s</a></span><br>
<span class="lineno">325</span><span class="op" id="5812228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5812231">//&nbsp;An&nbsp;ImportMode&nbsp;controls&nbsp;the&nbsp;behavior&nbsp;of&nbsp;the&nbsp;Import&nbsp;method.</span><br>
<span class="lineno"></span><span class="keyword" id="5812292">type</span>&nbsp;<span class="ident" id="5812297">ImportMode</span>&nbsp;<span class="builtintype" id="5812308">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span><span class="keyword" id="5812314">const</span>&nbsp;<span class="op" id="5812320">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812323">//&nbsp;If&nbsp;FindOnly&nbsp;is&nbsp;set,&nbsp;Import&nbsp;stops&nbsp;after&nbsp;locating&nbsp;the&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812389">//&nbsp;that&nbsp;should&nbsp;contain&nbsp;the&nbsp;sources&nbsp;for&nbsp;a&nbsp;package.&nbsp;&nbsp;It&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812453">//&nbsp;read&nbsp;any&nbsp;files&nbsp;in&nbsp;the&nbsp;directory.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812490">FindOnly</span>&nbsp;<span class="ident" id="5812499"><a href="/go/build/build.go.html#5812297">ImportMode</a></span>&nbsp;<span class="op" id="5812510">=</span>&nbsp;<span class="num" id="5812512">1</span>&nbsp;<span class="op" id="5812514">&lt;&lt;</span>&nbsp;<span class="ident" id="5812517">iota</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812524">//&nbsp;If&nbsp;AllowBinary&nbsp;is&nbsp;set,&nbsp;Import&nbsp;can&nbsp;be&nbsp;satisfied&nbsp;by&nbsp;a&nbsp;compiled</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812589">//&nbsp;package&nbsp;object&nbsp;without&nbsp;corresponding&nbsp;sources.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812639">AllowBinary</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812653">//&nbsp;If&nbsp;ImportComment&nbsp;is&nbsp;set,&nbsp;parse&nbsp;import&nbsp;comments&nbsp;on&nbsp;package&nbsp;statements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812727">//&nbsp;Import&nbsp;returns&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;finds&nbsp;a&nbsp;comment&nbsp;it&nbsp;cannot&nbsp;understand</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812798">//&nbsp;or&nbsp;finds&nbsp;conflicting&nbsp;comments&nbsp;in&nbsp;multiple&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5812858">//&nbsp;See&nbsp;golang.org/s/go14customimport&nbsp;for&nbsp;more&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5812918">ImportComment</span><br>
<span class="lineno">345</span><span class="op" id="5812932">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5812935">//&nbsp;A&nbsp;Package&nbsp;describes&nbsp;the&nbsp;Go&nbsp;package&nbsp;found&nbsp;in&nbsp;a&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5812995">type</span>&nbsp;<span class="ident" id="5813000">Package</span>&nbsp;<span class="keyword" id="5813008">struct</span>&nbsp;<span class="op" id="5813015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813018">Dir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813032">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813041">//&nbsp;directory&nbsp;containing&nbsp;package&nbsp;sources</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813082">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813096">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813105">//&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813122">ImportComment</span>&nbsp;<span class="builtintype" id="5813136">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813145">//&nbsp;path&nbsp;in&nbsp;import&nbsp;comment&nbsp;on&nbsp;package&nbsp;statement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813193">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813207">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813216">//&nbsp;documentation&nbsp;synopsis</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813243">ImportPath</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813257">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813266">//&nbsp;import&nbsp;path&nbsp;of&nbsp;package&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813309">Root</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813323">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813332">//&nbsp;root&nbsp;of&nbsp;Go&nbsp;tree&nbsp;where&nbsp;this&nbsp;package&nbsp;lives</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813377">SrcRoot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813391">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813400">//&nbsp;package&nbsp;source&nbsp;root&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813450">PkgRoot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813464">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813473">//&nbsp;package&nbsp;install&nbsp;root&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813524">BinDir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813538">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813547">//&nbsp;command&nbsp;install&nbsp;directory&nbsp;(&#34;&#34;&nbsp;if&nbsp;unknown)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813593">Goroot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813607">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5813616">//&nbsp;package&nbsp;found&nbsp;in&nbsp;Go&nbsp;root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813645">PkgObj</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813659">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813668">//&nbsp;installed&nbsp;.a&nbsp;file</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813690">AllTags</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5813704">[</span><span class="op" id="5813705">]</span><span class="builtintype" id="5813706">string</span>&nbsp;<span class="comment" id="5813713">//&nbsp;tags&nbsp;that&nbsp;can&nbsp;influence&nbsp;file&nbsp;selection&nbsp;in&nbsp;this&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813774">ConflictDir</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5813788">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5813797">//&nbsp;this&nbsp;directory&nbsp;shadows&nbsp;Dir&nbsp;in&nbsp;$GOPATH</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5813840">//&nbsp;Source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813857">GoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5813872">[</span><span class="op" id="5813873">]</span><span class="builtintype" id="5813874">string</span>&nbsp;<span class="comment" id="5813881">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;(excluding&nbsp;CgoFiles,&nbsp;TestGoFiles,&nbsp;XTestGoFiles)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5813950">CgoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5813965">[</span><span class="op" id="5813966">]</span><span class="builtintype" id="5813967">string</span>&nbsp;<span class="comment" id="5813974">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;that&nbsp;import&nbsp;&#34;C&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814011">IgnoredGoFiles</span>&nbsp;<span class="op" id="5814026">[</span><span class="op" id="5814027">]</span><span class="builtintype" id="5814028">string</span>&nbsp;<span class="comment" id="5814035">//&nbsp;.go&nbsp;source&nbsp;files&nbsp;ignored&nbsp;for&nbsp;this&nbsp;build</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814079">CFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5814094">[</span><span class="op" id="5814095">]</span><span class="builtintype" id="5814096">string</span>&nbsp;<span class="comment" id="5814103">//&nbsp;.c&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814123">CXXFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5814138">[</span><span class="op" id="5814139">]</span><span class="builtintype" id="5814140">string</span>&nbsp;<span class="comment" id="5814147">//&nbsp;.cc,&nbsp;.cpp&nbsp;and&nbsp;.cxx&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814183">MFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5814198">[</span><span class="op" id="5814199">]</span><span class="builtintype" id="5814200">string</span>&nbsp;<span class="comment" id="5814207">//&nbsp;.m&nbsp;(Objective-C)&nbsp;source&nbsp;files</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814241">HFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5814256">[</span><span class="op" id="5814257">]</span><span class="builtintype" id="5814258">string</span>&nbsp;<span class="comment" id="5814265">//&nbsp;.h,&nbsp;.hh,&nbsp;.hpp&nbsp;and&nbsp;.hxx&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814305">SFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5814320">[</span><span class="op" id="5814321">]</span><span class="builtintype" id="5814322">string</span>&nbsp;<span class="comment" id="5814329">//&nbsp;.s&nbsp;source&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814349">SwigFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5814364">[</span><span class="op" id="5814365">]</span><span class="builtintype" id="5814366">string</span>&nbsp;<span class="comment" id="5814373">//&nbsp;.swig&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814389">SwigCXXFiles</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5814404">[</span><span class="op" id="5814405">]</span><span class="builtintype" id="5814406">string</span>&nbsp;<span class="comment" id="5814413">//&nbsp;.swigcxx&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814432">SysoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5814447">[</span><span class="op" id="5814448">]</span><span class="builtintype" id="5814449">string</span>&nbsp;<span class="comment" id="5814456">//&nbsp;.syso&nbsp;system&nbsp;object&nbsp;files&nbsp;to&nbsp;add&nbsp;to&nbsp;archive</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5814505">//&nbsp;Cgo&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814524">CgoCFLAGS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5814537">[</span><span class="op" id="5814538">]</span><span class="builtintype" id="5814539">string</span>&nbsp;<span class="comment" id="5814546">//&nbsp;Cgo&nbsp;CFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814572">CgoCPPFLAGS</span>&nbsp;&nbsp;<span class="op" id="5814585">[</span><span class="op" id="5814586">]</span><span class="builtintype" id="5814587">string</span>&nbsp;<span class="comment" id="5814594">//&nbsp;Cgo&nbsp;CPPFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814622">CgoCXXFLAGS</span>&nbsp;&nbsp;<span class="op" id="5814635">[</span><span class="op" id="5814636">]</span><span class="builtintype" id="5814637">string</span>&nbsp;<span class="comment" id="5814644">//&nbsp;Cgo&nbsp;CXXFLAGS&nbsp;directives</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814672">CgoLDFLAGS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5814685">[</span><span class="op" id="5814686">]</span><span class="builtintype" id="5814687">string</span>&nbsp;<span class="comment" id="5814694">//&nbsp;Cgo&nbsp;LDFLAGS&nbsp;directives</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814721">CgoPkgConfig</span>&nbsp;<span class="op" id="5814734">[</span><span class="op" id="5814735">]</span><span class="builtintype" id="5814736">string</span>&nbsp;<span class="comment" id="5814743">//&nbsp;Cgo&nbsp;pkg-config&nbsp;directives</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5814774">//&nbsp;Dependency&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814801">Imports</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5814811">[</span><span class="op" id="5814812">]</span><span class="builtintype" id="5814813">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5814839">//&nbsp;imports&nbsp;from&nbsp;GoFiles,&nbsp;CgoFiles</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814874">ImportPos</span>&nbsp;<span class="keyword" id="5814884">map</span><span class="op" id="5814887">[</span><span class="builtintype" id="5814888">string</span><span class="op" id="5814894">]</span><span class="op" id="5814895">[</span><span class="op" id="5814896">]</span><span class="ident" id="5814897"><a href="/go/build/build.go.html#5802666">token</a></span><span class="op" id="5814902">.</span><span class="ident" id="5814903">Position</span>&nbsp;<span class="comment" id="5814912">//&nbsp;line&nbsp;information&nbsp;for&nbsp;Imports</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5814946">//&nbsp;Test&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5814967">TestGoFiles</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5814982">[</span><span class="op" id="5814983">]</span><span class="builtintype" id="5814984">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5815010">//&nbsp;_test.go&nbsp;files&nbsp;in&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815040">TestImports</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5815055">[</span><span class="op" id="5815056">]</span><span class="builtintype" id="5815057">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5815083">//&nbsp;imports&nbsp;from&nbsp;TestGoFiles</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815112">TestImportPos</span>&nbsp;&nbsp;<span class="keyword" id="5815127">map</span><span class="op" id="5815130">[</span><span class="builtintype" id="5815131">string</span><span class="op" id="5815137">]</span><span class="op" id="5815138">[</span><span class="op" id="5815139">]</span><span class="ident" id="5815140"><a href="/go/build/build.go.html#5802666">token</a></span><span class="op" id="5815145">.</span><span class="ident" id="5815146">Position</span>&nbsp;<span class="comment" id="5815155">//&nbsp;line&nbsp;information&nbsp;for&nbsp;TestImports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815192">XTestGoFiles</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5815207">[</span><span class="op" id="5815208">]</span><span class="builtintype" id="5815209">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5815235">//&nbsp;_test.go&nbsp;files&nbsp;outside&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815270">XTestImports</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5815285">[</span><span class="op" id="5815286">]</span><span class="builtintype" id="5815287">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5815313">//&nbsp;imports&nbsp;from&nbsp;XTestGoFiles</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5815343">XTestImportPos</span>&nbsp;<span class="keyword" id="5815358">map</span><span class="op" id="5815361">[</span><span class="builtintype" id="5815362">string</span><span class="op" id="5815368">]</span><span class="op" id="5815369">[</span><span class="op" id="5815370">]</span><span class="ident" id="5815371"><a href="/go/build/build.go.html#5802666">token</a></span><span class="op" id="5815376">.</span><span class="ident" id="5815377">Position</span>&nbsp;<span class="comment" id="5815386">//&nbsp;line&nbsp;information&nbsp;for&nbsp;XTestImports</span><br>
<span class="lineno"></span><span class="op" id="5815423">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span><span class="comment" id="5815426">//&nbsp;IsCommand&nbsp;reports&nbsp;whether&nbsp;the&nbsp;package&nbsp;is&nbsp;considered&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5815483">//&nbsp;command&nbsp;to&nbsp;be&nbsp;installed&nbsp;(not&nbsp;just&nbsp;a&nbsp;library).</span><br>
<span class="lineno"></span><span class="comment" id="5815532">//&nbsp;Packages&nbsp;named&nbsp;&#34;main&#34;&nbsp;are&nbsp;treated&nbsp;as&nbsp;commands.</span><br>
<span class="lineno"></span><span class="keyword" id="5815582">func</span>&nbsp;<span class="op" id="5815587">(</span><span class="ident" id="5815588">p</span>&nbsp;<span class="op" id="5815590">*</span><span class="ident" id="5815591"><a href="/go/build/build.go.html#5813000">Package</a></span><span class="op" id="5815598">)</span>&nbsp;<span class="ident" id="5815600">IsCommand</span><span class="op" id="5815609">(</span><span class="op" id="5815610">)</span>&nbsp;<span class="builtintype" id="5815612">bool</span>&nbsp;<span class="op" id="5815617">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5815620">return</span>&nbsp;<span class="ident" id="5815627"><a href="/go/build/build.go.html#5815588">p</a></span><span class="op" id="5815628">.</span><span class="ident" id="5815629">Name</span>&nbsp;<span class="op" id="5815634">==</span>&nbsp;<span class="string" id="5815637">&#34;main&#34;</span><br>
<span class="lineno"></span><span class="op" id="5815644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5815647">//&nbsp;ImportDir&nbsp;is&nbsp;like&nbsp;Import&nbsp;but&nbsp;processes&nbsp;the&nbsp;Go&nbsp;package&nbsp;found&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5815713">//&nbsp;the&nbsp;named&nbsp;directory.</span><br>
<span class="lineno">405</span><span class="keyword" id="5815737">func</span>&nbsp;<span class="op" id="5815742">(</span><span class="ident" id="5815743">ctxt</span>&nbsp;<span class="op" id="5815748">*</span><span class="ident" id="5815749"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5815756">)</span>&nbsp;<span class="ident" id="5815758">ImportDir</span><span class="op" id="5815767">(</span><span class="ident" id="5815768">dir</span>&nbsp;<span class="builtintype" id="5815772">string</span><span class="op" id="5815778">,</span>&nbsp;<span class="ident" id="5815780">mode</span>&nbsp;<span class="ident" id="5815785"><a href="/go/build/build.go.html#5812297">ImportMode</a></span><span class="op" id="5815795">)</span>&nbsp;<span class="op" id="5815797">(</span><span class="op" id="5815798">*</span><span class="ident" id="5815799"><a href="/go/build/build.go.html#5813000">Package</a></span><span class="op" id="5815806">,</span>&nbsp;<span class="builtintype" id="5815808">error</span><span class="op" id="5815813">)</span>&nbsp;<span class="op" id="5815815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5815818">return</span>&nbsp;<span class="ident" id="5815825"><a href="/go/build/build.go.html#5815743">ctxt</a></span><span class="op" id="5815829">.</span><span class="ident" id="5815830">Import</span><span class="op" id="5815836">(</span><span class="string" id="5815837">&#34;.&#34;</span><span class="op" id="5815840">,</span>&nbsp;<span class="ident" id="5815842"><a href="/go/build/build.go.html#5815768">dir</a></span><span class="op" id="5815845">,</span>&nbsp;<span class="ident" id="5815847"><a href="/go/build/build.go.html#5815780">mode</a></span><span class="op" id="5815851">)</span><br>
<span class="lineno"></span><span class="op" id="5815853">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5815856">//&nbsp;NoGoError&nbsp;is&nbsp;the&nbsp;error&nbsp;used&nbsp;by&nbsp;Import&nbsp;to&nbsp;describe&nbsp;a&nbsp;directory</span><br>
<span class="lineno">410</span><span class="comment" id="5815921">//&nbsp;containing&nbsp;no&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files.&nbsp;(It&nbsp;may&nbsp;still&nbsp;contain</span><br>
<span class="lineno"></span><span class="comment" id="5815987">//&nbsp;test&nbsp;files,&nbsp;files&nbsp;hidden&nbsp;by&nbsp;build&nbsp;tags,&nbsp;and&nbsp;so&nbsp;on.)</span><br>
<span class="lineno"></span><span class="keyword" id="5816042">type</span>&nbsp;<span class="ident" id="5816047">NoGoError</span>&nbsp;<span class="keyword" id="5816057">struct</span>&nbsp;<span class="op" id="5816064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5816067">Dir</span>&nbsp;<span class="builtintype" id="5816071">string</span><br>
<span class="lineno"></span><span class="op" id="5816078">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="keyword" id="5816081">func</span>&nbsp;<span class="op" id="5816086">(</span><span class="ident" id="5816087">e</span>&nbsp;<span class="op" id="5816089">*</span><span class="ident" id="5816090"><a href="/go/build/build.go.html#5816047">NoGoError</a></span><span class="op" id="5816099">)</span>&nbsp;<span class="ident" id="5816101">Error</span><span class="op" id="5816106">(</span><span class="op" id="5816107">)</span>&nbsp;<span class="builtintype" id="5816109">string</span>&nbsp;<span class="op" id="5816116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816119">return</span>&nbsp;<span class="string" id="5816126">&#34;no&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="5816161">+</span>&nbsp;<span class="ident" id="5816163"><a href="/go/build/build.go.html#5816087">e</a></span><span class="op" id="5816164">.</span><span class="ident" id="5816165">Dir</span><br>
<span class="lineno"></span><span class="op" id="5816169">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span><span class="comment" id="5816172">//&nbsp;MultiplePackageError&nbsp;describes&nbsp;a&nbsp;directory&nbsp;containing</span><br>
<span class="lineno"></span><span class="comment" id="5816229">//&nbsp;multiple&nbsp;buildable&nbsp;Go&nbsp;source&nbsp;files&nbsp;for&nbsp;multiple&nbsp;packages.</span><br>
<span class="lineno"></span><span class="keyword" id="5816290">type</span>&nbsp;<span class="ident" id="5816295">MultiplePackageError</span>&nbsp;<span class="keyword" id="5816316">struct</span>&nbsp;<span class="op" id="5816323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5816326">Dir</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5816335">string</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5816344">//&nbsp;directory&nbsp;containing&nbsp;files</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5816375">Packages</span>&nbsp;<span class="op" id="5816384">[</span><span class="op" id="5816385">]</span><span class="builtintype" id="5816386">string</span>&nbsp;<span class="comment" id="5816393">//&nbsp;package&nbsp;names&nbsp;found</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5816417">Files</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5816426">[</span><span class="op" id="5816427">]</span><span class="builtintype" id="5816428">string</span>&nbsp;<span class="comment" id="5816435">//&nbsp;corresponding&nbsp;files:&nbsp;Files[i]&nbsp;declares&nbsp;package&nbsp;Packages[i]</span><br>
<span class="lineno"></span><span class="op" id="5816497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5816500">func</span>&nbsp;<span class="op" id="5816505">(</span><span class="ident" id="5816506">e</span>&nbsp;<span class="op" id="5816508">*</span><span class="ident" id="5816509"><a href="/go/build/build.go.html#5816295">MultiplePackageError</a></span><span class="op" id="5816529">)</span>&nbsp;<span class="ident" id="5816531">Error</span><span class="op" id="5816536">(</span><span class="op" id="5816537">)</span>&nbsp;<span class="builtintype" id="5816539">string</span>&nbsp;<span class="op" id="5816546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5816549">//&nbsp;Error&nbsp;string&nbsp;limited&nbsp;to&nbsp;two&nbsp;entries&nbsp;for&nbsp;compatibility.</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816608">return</span>&nbsp;<span class="ident" id="5816615"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5816618">.</span><span class="ident" id="5816619">Sprintf</span><span class="op" id="5816626">(</span><span class="string" id="5816627">&#34;found&nbsp;packages&nbsp;%s&nbsp;(%s)&nbsp;and&nbsp;%s&nbsp;(%s)&nbsp;in&nbsp;%s&#34;</span><span class="op" id="5816669">,</span>&nbsp;<span class="ident" id="5816671"><a href="/go/build/build.go.html#5816506">e</a></span><span class="op" id="5816672">.</span><span class="ident" id="5816673">Packages</span><span class="op" id="5816681">[</span><span class="num" id="5816682">0</span><span class="op" id="5816683">]</span><span class="op" id="5816684">,</span>&nbsp;<span class="ident" id="5816686"><a href="/go/build/build.go.html#5816506">e</a></span><span class="op" id="5816687">.</span><span class="ident" id="5816688">Files</span><span class="op" id="5816693">[</span><span class="num" id="5816694">0</span><span class="op" id="5816695">]</span><span class="op" id="5816696">,</span>&nbsp;<span class="ident" id="5816698"><a href="/go/build/build.go.html#5816506">e</a></span><span class="op" id="5816699">.</span><span class="ident" id="5816700">Packages</span><span class="op" id="5816708">[</span><span class="num" id="5816709">1</span><span class="op" id="5816710">]</span><span class="op" id="5816711">,</span>&nbsp;<span class="ident" id="5816713"><a href="/go/build/build.go.html#5816506">e</a></span><span class="op" id="5816714">.</span><span class="ident" id="5816715">Files</span><span class="op" id="5816720">[</span><span class="num" id="5816721">1</span><span class="op" id="5816722">]</span><span class="op" id="5816723">,</span>&nbsp;<span class="ident" id="5816725"><a href="/go/build/build.go.html#5816506">e</a></span><span class="op" id="5816726">.</span><span class="ident" id="5816727">Dir</span><span class="op" id="5816730">)</span><br>
<span class="lineno"></span><span class="op" id="5816732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5816735">func</span>&nbsp;<span class="ident" id="5816740">nameExt</span><span class="op" id="5816747">(</span><span class="ident" id="5816748">name</span>&nbsp;<span class="builtintype" id="5816753">string</span><span class="op" id="5816759">)</span>&nbsp;<span class="builtintype" id="5816761">string</span>&nbsp;<span class="op" id="5816768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5816771">i</span>&nbsp;<span class="op" id="5816773">:=</span>&nbsp;<span class="ident" id="5816776"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5816783">.</span><span class="ident" id="5816784">LastIndex</span><span class="op" id="5816793">(</span><span class="ident" id="5816794"><a href="/go/build/build.go.html#5816748">name</a></span><span class="op" id="5816798">,</span>&nbsp;<span class="string" id="5816800">&#34;.&#34;</span><span class="op" id="5816803">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816806">if</span>&nbsp;<span class="ident" id="5816809"><a href="/go/build/build.go.html#5816771">i</a></span>&nbsp;<span class="op" id="5816811">&lt;</span>&nbsp;<span class="num" id="5816813">0</span>&nbsp;<span class="op" id="5816815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816819">return</span>&nbsp;<span class="string" id="5816826">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5816830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5816833">return</span>&nbsp;<span class="ident" id="5816840"><a href="/go/build/build.go.html#5816748">name</a></span><span class="op" id="5816844">[</span><span class="ident" id="5816845"><a href="/go/build/build.go.html#5816771">i</a></span><span class="op" id="5816846">:</span><span class="op" id="5816847">]</span><br>
<span class="lineno"></span><span class="op" id="5816849">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="5816852">//&nbsp;Import&nbsp;returns&nbsp;details&nbsp;about&nbsp;the&nbsp;Go&nbsp;package&nbsp;named&nbsp;by&nbsp;the&nbsp;import&nbsp;path,</span><br>
<span class="lineno"></span><span class="comment" id="5816925">//&nbsp;interpreting&nbsp;local&nbsp;import&nbsp;paths&nbsp;relative&nbsp;to&nbsp;the&nbsp;srcDir&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="5816994">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;a&nbsp;local&nbsp;import&nbsp;path&nbsp;naming&nbsp;a&nbsp;package&nbsp;that&nbsp;can&nbsp;be&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="5817070">//&nbsp;using&nbsp;a&nbsp;standard&nbsp;import&nbsp;path,&nbsp;the&nbsp;returned&nbsp;package&nbsp;will&nbsp;set&nbsp;p.ImportPath</span><br>
<span class="lineno">445</span><span class="comment" id="5817146">//&nbsp;to&nbsp;that&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="5817163">//</span><br>
<span class="lineno"></span><span class="comment" id="5817166">//&nbsp;In&nbsp;the&nbsp;directory&nbsp;containing&nbsp;the&nbsp;package,&nbsp;.go,&nbsp;.c,&nbsp;.h,&nbsp;and&nbsp;.s&nbsp;files&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5817240">//&nbsp;considered&nbsp;part&nbsp;of&nbsp;the&nbsp;package&nbsp;except&nbsp;for:</span><br>
<span class="lineno"></span><span class="comment" id="5817286">//</span><br>
<span class="lineno">450</span><span class="comment" id="5817289">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;.go&nbsp;files&nbsp;in&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span><span class="comment" id="5817329">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;files&nbsp;starting&nbsp;with&nbsp;_&nbsp;or&nbsp;.&nbsp;(likely&nbsp;editor&nbsp;temporary&nbsp;files)</span><br>
<span class="lineno"></span><span class="comment" id="5817393">//&nbsp;&nbsp;&nbsp;&nbsp-&nbsp;files&nbsp;with&nbsp;build&nbsp;constraints&nbsp;not&nbsp;satisfied&nbsp;by&nbsp;the&nbsp;context</span><br>
<span class="lineno"></span><span class="comment" id="5817456">//</span><br>
<span class="lineno"></span><span class="comment" id="5817459">//&nbsp;If&nbsp;an&nbsp;error&nbsp;occurs,&nbsp;Import&nbsp;returns&nbsp;a&nbsp;non-nil&nbsp;error&nbsp;and&nbsp;a&nbsp;non-nil</span><br>
<span class="lineno">455</span><span class="comment" id="5817527">//&nbsp;*Package&nbsp;containing&nbsp;partial&nbsp;information.</span><br>
<span class="lineno"></span><span class="comment" id="5817571">//</span><br>
<span class="lineno"></span><span class="keyword" id="5817574">func</span>&nbsp;<span class="op" id="5817579">(</span><span class="ident" id="5817580">ctxt</span>&nbsp;<span class="op" id="5817585">*</span><span class="ident" id="5817586"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5817593">)</span>&nbsp;<span class="ident" id="5817595">Import</span><span class="op" id="5817601">(</span><span class="ident" id="5817602">path</span>&nbsp;<span class="builtintype" id="5817607">string</span><span class="op" id="5817613">,</span>&nbsp;<span class="ident" id="5817615">srcDir</span>&nbsp;<span class="builtintype" id="5817622">string</span><span class="op" id="5817628">,</span>&nbsp;<span class="ident" id="5817630">mode</span>&nbsp;<span class="ident" id="5817635"><a href="/go/build/build.go.html#5812297">ImportMode</a></span><span class="op" id="5817645">)</span>&nbsp;<span class="op" id="5817647">(</span><span class="op" id="5817648">*</span><span class="ident" id="5817649"><a href="/go/build/build.go.html#5813000">Package</a></span><span class="op" id="5817656">,</span>&nbsp;<span class="builtintype" id="5817658">error</span><span class="op" id="5817663">)</span>&nbsp;<span class="op" id="5817665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817668">p</span>&nbsp;<span class="op" id="5817670">:=</span>&nbsp;<span class="op" id="5817673">&amp;</span><span class="ident" id="5817674"><a href="/go/build/build.go.html#5813000">Package</a></span><span class="op" id="5817681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817685">ImportPath</span><span class="op" id="5817695">:</span>&nbsp;<span class="ident" id="5817697"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5817701">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5817704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817707">if</span>&nbsp;<span class="ident" id="5817710"><a href="/go/build/build.go.html#5817602">path</a></span>&nbsp;<span class="op" id="5817715">==</span>&nbsp;<span class="string" id="5817718">&#34;&#34;</span>&nbsp;<span class="op" id="5817721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817725">return</span>&nbsp;<span class="ident" id="5817732"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5817733">,</span>&nbsp;<span class="ident" id="5817735"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5817738">.</span><span class="ident" id="5817739">Errorf</span><span class="op" id="5817745">(</span><span class="string" id="5817746">&#34;import&nbsp;%q:&nbsp;invalid&nbsp;import&nbsp;path&#34;</span><span class="op" id="5817778">,</span>&nbsp;<span class="ident" id="5817780"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5817784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5817787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817791">var</span>&nbsp;<span class="ident" id="5817795">pkga</span>&nbsp;<span class="builtintype" id="5817800">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817808">var</span>&nbsp;<span class="ident" id="5817812">pkgerr</span>&nbsp;<span class="builtintype" id="5817819">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817826">switch</span>&nbsp;<span class="ident" id="5817833"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5817837">.</span><span class="ident" id="5817838">Compiler</span>&nbsp;<span class="op" id="5817847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817850">case</span>&nbsp;<span class="string" id="5817855">&#34;gccgo&#34;</span><span class="op" id="5817862">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817866">dir</span><span class="op" id="5817869">,</span>&nbsp;<span class="ident" id="5817871">elem</span>&nbsp;<span class="op" id="5817876">:=</span>&nbsp;<span class="ident" id="5817879"><a href="/go/build/build.go.html#5802710">pathpkg</a></span><span class="op" id="5817886">.</span><span class="ident" id="5817887">Split</span><span class="op" id="5817892">(</span><span class="ident" id="5817893"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5817894">.</span><span class="ident" id="5817895">ImportPath</span><span class="op" id="5817905">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5817909"><a href="/go/build/build.go.html#5817795">pkga</a></span>&nbsp;<span class="op" id="5817914">=</span>&nbsp;<span class="string" id="5817916">&#34;pkg/gccgo_&#34;</span>&nbsp;<span class="op" id="5817929">+</span>&nbsp;<span class="ident" id="5817931"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5817935">.</span><span class="ident" id="5817936">GOOS</span>&nbsp;<span class="op" id="5817941">+</span>&nbsp;<span class="string" id="5817943">&#34;_&#34;</span>&nbsp;<span class="op" id="5817947">+</span>&nbsp;<span class="ident" id="5817949"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5817953">.</span><span class="ident" id="5817954">GOARCH</span>&nbsp;<span class="op" id="5817961">+</span>&nbsp;<span class="string" id="5817963">&#34;/&#34;</span>&nbsp;<span class="op" id="5817967">+</span>&nbsp;<span class="ident" id="5817969"><a href="/go/build/build.go.html#5817866">dir</a></span>&nbsp;<span class="op" id="5817973">+</span>&nbsp;<span class="string" id="5817975">&#34;lib&#34;</span>&nbsp;<span class="op" id="5817981">+</span>&nbsp;<span class="ident" id="5817983"><a href="/go/build/build.go.html#5817871">elem</a></span>&nbsp;<span class="op" id="5817988">+</span>&nbsp;<span class="string" id="5817990">&#34;.a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5817996">case</span>&nbsp;<span class="string" id="5818001">&#34;gc&#34;</span><span class="op" id="5818005">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818009">suffix</span>&nbsp;<span class="op" id="5818016">:=</span>&nbsp;<span class="string" id="5818019">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818024">if</span>&nbsp;<span class="ident" id="5818027"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818031">.</span><span class="ident" id="5818032">InstallSuffix</span>&nbsp;<span class="op" id="5818046">!=</span>&nbsp;<span class="string" id="5818049">&#34;&#34;</span>&nbsp;<span class="op" id="5818052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818057"><a href="/go/build/build.go.html#5818009">suffix</a></span>&nbsp;<span class="op" id="5818064">=</span>&nbsp;<span class="string" id="5818066">&#34;_&#34;</span>&nbsp;<span class="op" id="5818070">+</span>&nbsp;<span class="ident" id="5818072"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818076">.</span><span class="ident" id="5818077">InstallSuffix</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818097"><a href="/go/build/build.go.html#5817795">pkga</a></span>&nbsp;<span class="op" id="5818102">=</span>&nbsp;<span class="string" id="5818104">&#34;pkg/&#34;</span>&nbsp;<span class="op" id="5818111">+</span>&nbsp;<span class="ident" id="5818113"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818117">.</span><span class="ident" id="5818118">GOOS</span>&nbsp;<span class="op" id="5818123">+</span>&nbsp;<span class="string" id="5818125">&#34;_&#34;</span>&nbsp;<span class="op" id="5818129">+</span>&nbsp;<span class="ident" id="5818131"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818135">.</span><span class="ident" id="5818136">GOARCH</span>&nbsp;<span class="op" id="5818143">+</span>&nbsp;<span class="ident" id="5818145"><a href="/go/build/build.go.html#5818009">suffix</a></span>&nbsp;<span class="op" id="5818152">+</span>&nbsp;<span class="string" id="5818154">&#34;/&#34;</span>&nbsp;<span class="op" id="5818158">+</span>&nbsp;<span class="ident" id="5818160"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5818161">.</span><span class="ident" id="5818162">ImportPath</span>&nbsp;<span class="op" id="5818173">+</span>&nbsp;<span class="string" id="5818175">&#34;.a&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818181">default</span><span class="op" id="5818188">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5818192">//&nbsp;Save&nbsp;error&nbsp;for&nbsp;end&nbsp;of&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818229"><a href="/go/build/build.go.html#5817812">pkgerr</a></span>&nbsp;<span class="op" id="5818236">=</span>&nbsp;<span class="ident" id="5818238"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5818241">.</span><span class="ident" id="5818242">Errorf</span><span class="op" id="5818248">(</span><span class="string" id="5818249">&#34;import&nbsp;%q:&nbsp;unknown&nbsp;compiler&nbsp;%q&#34;</span><span class="op" id="5818281">,</span>&nbsp;<span class="ident" id="5818283"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5818287">,</span>&nbsp;<span class="ident" id="5818289"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818293">.</span><span class="ident" id="5818294">Compiler</span><span class="op" id="5818302">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818309">binaryOnly</span>&nbsp;<span class="op" id="5818320">:=</span>&nbsp;<span class="ident" id="5818323">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818330">if</span>&nbsp;<span class="ident" id="5818333"><a href="/go/build/build.go.html#5841159">IsLocalImport</a></span><span class="op" id="5818346">(</span><span class="ident" id="5818347"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5818351">)</span>&nbsp;<span class="op" id="5818353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818357"><a href="/go/build/build.go.html#5817795">pkga</a></span>&nbsp;<span class="op" id="5818362">=</span>&nbsp;<span class="string" id="5818364">&#34;&#34;</span>&nbsp;<span class="comment" id="5818367">//&nbsp;local&nbsp;imports&nbsp;have&nbsp;no&nbsp;installed&nbsp;path</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818409">if</span>&nbsp;<span class="ident" id="5818412"><a href="/go/build/build.go.html#5817615">srcDir</a></span>&nbsp;<span class="op" id="5818419">==</span>&nbsp;<span class="string" id="5818422">&#34;&#34;</span>&nbsp;<span class="op" id="5818425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818430">return</span>&nbsp;<span class="ident" id="5818437"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5818438">,</span>&nbsp;<span class="ident" id="5818440"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5818443">.</span><span class="ident" id="5818444">Errorf</span><span class="op" id="5818450">(</span><span class="string" id="5818451">&#34;import&nbsp;%q:&nbsp;import&nbsp;relative&nbsp;to&nbsp;unknown&nbsp;directory&#34;</span><span class="op" id="5818500">,</span>&nbsp;<span class="ident" id="5818502"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5818506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818514">if</span>&nbsp;<span class="op" id="5818517">!</span><span class="ident" id="5818518"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818522">.</span><span class="ident" id="5818523">isAbsPath</span><span class="op" id="5818532">(</span><span class="ident" id="5818533"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5818537">)</span>&nbsp;<span class="op" id="5818539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818544"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5818545">.</span><span class="ident" id="5818546">Dir</span>&nbsp;<span class="op" id="5818550">=</span>&nbsp;<span class="ident" id="5818552"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818556">.</span><span class="ident" id="5818557">joinPath</span><span class="op" id="5818565">(</span><span class="ident" id="5818566"><a href="/go/build/build.go.html#5817615">srcDir</a></span><span class="op" id="5818572">,</span>&nbsp;<span class="ident" id="5818574"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5818578">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5818586">//&nbsp;Determine&nbsp;canonical&nbsp;import&nbsp;path,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818632">if</span>&nbsp;<span class="ident" id="5818635"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818639">.</span><span class="ident" id="5818640">GOROOT</span>&nbsp;<span class="op" id="5818647">!=</span>&nbsp;<span class="string" id="5818650">&#34;&#34;</span>&nbsp;<span class="op" id="5818653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818658">root</span>&nbsp;<span class="op" id="5818663">:=</span>&nbsp;<span class="ident" id="5818666"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818670">.</span><span class="ident" id="5818671">joinPath</span><span class="op" id="5818679">(</span><span class="ident" id="5818680"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818684">.</span><span class="ident" id="5818685">GOROOT</span><span class="op" id="5818691">,</span>&nbsp;<span class="string" id="5818693">&#34;src&#34;</span><span class="op" id="5818698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818703">if</span>&nbsp;<span class="ident" id="5818706">sub</span><span class="op" id="5818709">,</span>&nbsp;<span class="ident" id="5818711">ok</span>&nbsp;<span class="op" id="5818714">:=</span>&nbsp;<span class="ident" id="5818717"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818721">.</span><span class="ident" id="5818722">hasSubdir</span><span class="op" id="5818731">(</span><span class="ident" id="5818732"><a href="/go/build/build.go.html#5818658">root</a></span><span class="op" id="5818736">,</span>&nbsp;<span class="ident" id="5818738"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5818739">.</span><span class="ident" id="5818740">Dir</span><span class="op" id="5818743">)</span><span class="op" id="5818744">;</span>&nbsp;<span class="ident" id="5818746"><a href="/go/build/build.go.html#5818711">ok</a></span>&nbsp;<span class="op" id="5818749">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818755"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5818756">.</span><span class="ident" id="5818757">Goroot</span>&nbsp;<span class="op" id="5818764">=</span>&nbsp;<span class="ident" id="5818766">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818775"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5818776">.</span><span class="ident" id="5818777">ImportPath</span>&nbsp;<span class="op" id="5818788">=</span>&nbsp;<span class="ident" id="5818790"><a href="/go/build/build.go.html#5818706">sub</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818798"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5818799">.</span><span class="ident" id="5818800">Root</span>&nbsp;<span class="op" id="5818805">=</span>&nbsp;<span class="ident" id="5818807"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818811">.</span><span class="ident" id="5818812">GOROOT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818823">goto</span>&nbsp;<span class="ident" id="5818828">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818837">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5818841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818845">all</span>&nbsp;<span class="op" id="5818849">:=</span>&nbsp;<span class="ident" id="5818852"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818856">.</span><span class="ident" id="5818857">gopath</span><span class="op" id="5818863">(</span><span class="op" id="5818864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818868">for</span>&nbsp;<span class="ident" id="5818872">i</span><span class="op" id="5818873">,</span>&nbsp;<span class="ident" id="5818875">root</span>&nbsp;<span class="op" id="5818880">:=</span>&nbsp;<span class="keyword" id="5818883">range</span>&nbsp;<span class="ident" id="5818889"><a href="/go/build/build.go.html#5818845">all</a></span>&nbsp;<span class="op" id="5818893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5818898">rootsrc</span>&nbsp;<span class="op" id="5818906">:=</span>&nbsp;<span class="ident" id="5818909"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818913">.</span><span class="ident" id="5818914">joinPath</span><span class="op" id="5818922">(</span><span class="ident" id="5818923"><a href="/go/build/build.go.html#5818875">root</a></span><span class="op" id="5818927">,</span>&nbsp;<span class="string" id="5818929">&#34;src&#34;</span><span class="op" id="5818934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5818939">if</span>&nbsp;<span class="ident" id="5818942">sub</span><span class="op" id="5818945">,</span>&nbsp;<span class="ident" id="5818947">ok</span>&nbsp;<span class="op" id="5818950">:=</span>&nbsp;<span class="ident" id="5818953"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5818957">.</span><span class="ident" id="5818958">hasSubdir</span><span class="op" id="5818967">(</span><span class="ident" id="5818968"><a href="/go/build/build.go.html#5818898">rootsrc</a></span><span class="op" id="5818975">,</span>&nbsp;<span class="ident" id="5818977"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5818978">.</span><span class="ident" id="5818979">Dir</span><span class="op" id="5818982">)</span><span class="op" id="5818983">;</span>&nbsp;<span class="ident" id="5818985"><a href="/go/build/build.go.html#5818947">ok</a></span>&nbsp;<span class="op" id="5818988">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5818994">//&nbsp;We&nbsp;found&nbsp;a&nbsp;potential&nbsp;import&nbsp;path&nbsp;for&nbsp;dir,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5819043">//&nbsp;but&nbsp;check&nbsp;that&nbsp;using&nbsp;it&nbsp;wouldn&#39;t&nbsp;find&nbsp;something</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5819098">//&nbsp;else&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819117">if</span>&nbsp;<span class="ident" id="5819120"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5819124">.</span><span class="ident" id="5819125">GOROOT</span>&nbsp;<span class="op" id="5819132">!=</span>&nbsp;<span class="string" id="5819135">&#34;&#34;</span>&nbsp;<span class="op" id="5819138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819145">if</span>&nbsp;<span class="ident" id="5819148">dir</span>&nbsp;<span class="op" id="5819152">:=</span>&nbsp;<span class="ident" id="5819155"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5819159">.</span><span class="ident" id="5819160">joinPath</span><span class="op" id="5819168">(</span><span class="ident" id="5819169"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5819173">.</span><span class="ident" id="5819174">GOROOT</span><span class="op" id="5819180">,</span>&nbsp;<span class="string" id="5819182">&#34;src&#34;</span><span class="op" id="5819187">,</span>&nbsp;<span class="ident" id="5819189"><a href="/go/build/build.go.html#5818942">sub</a></span><span class="op" id="5819192">)</span><span class="op" id="5819193">;</span>&nbsp;<span class="ident" id="5819195"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5819199">.</span><span class="ident" id="5819200">isDir</span><span class="op" id="5819205">(</span><span class="ident" id="5819206"><a href="/go/build/build.go.html#5819148">dir</a></span><span class="op" id="5819209">)</span>&nbsp;<span class="op" id="5819211">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819219"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5819220">.</span><span class="ident" id="5819221">ConflictDir</span>&nbsp;<span class="op" id="5819233">=</span>&nbsp;<span class="ident" id="5819235"><a href="/go/build/build.go.html#5819148">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819245">goto</span>&nbsp;<span class="ident" id="5819250">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819273">for</span>&nbsp;<span class="ident" id="5819277">_</span><span class="op" id="5819278">,</span>&nbsp;<span class="ident" id="5819280">earlyRoot</span>&nbsp;<span class="op" id="5819290">:=</span>&nbsp;<span class="keyword" id="5819293">range</span>&nbsp;<span class="ident" id="5819299"><a href="/go/build/build.go.html#5818845">all</a></span><span class="op" id="5819302">[</span><span class="op" id="5819303">:</span><span class="ident" id="5819304"><a href="/go/build/build.go.html#5818872">i</a></span><span class="op" id="5819305">]</span>&nbsp;<span class="op" id="5819307">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819314">if</span>&nbsp;<span class="ident" id="5819317">dir</span>&nbsp;<span class="op" id="5819321">:=</span>&nbsp;<span class="ident" id="5819324"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5819328">.</span><span class="ident" id="5819329">joinPath</span><span class="op" id="5819337">(</span><span class="ident" id="5819338"><a href="/go/build/build.go.html#5819280">earlyRoot</a></span><span class="op" id="5819347">,</span>&nbsp;<span class="string" id="5819349">&#34;src&#34;</span><span class="op" id="5819354">,</span>&nbsp;<span class="ident" id="5819356"><a href="/go/build/build.go.html#5818942">sub</a></span><span class="op" id="5819359">)</span><span class="op" id="5819360">;</span>&nbsp;<span class="ident" id="5819362"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5819366">.</span><span class="ident" id="5819367">isDir</span><span class="op" id="5819372">(</span><span class="ident" id="5819373"><a href="/go/build/build.go.html#5819317">dir</a></span><span class="op" id="5819376">)</span>&nbsp;<span class="op" id="5819378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819386"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5819387">.</span><span class="ident" id="5819388">ConflictDir</span>&nbsp;<span class="op" id="5819400">=</span>&nbsp;<span class="ident" id="5819402"><a href="/go/build/build.go.html#5819317">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819412">goto</span>&nbsp;<span class="ident" id="5819417">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819434">}</span><br>
<span class="lineno">520</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5819441">//&nbsp;sub&nbsp;would&nbsp;not&nbsp;name&nbsp;some&nbsp;other&nbsp;directory&nbsp;instead&nbsp;of&nbsp;this&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5819509">//&nbsp;Record&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819527"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5819528">.</span><span class="ident" id="5819529">ImportPath</span>&nbsp;<span class="op" id="5819540">=</span>&nbsp;<span class="ident" id="5819542"><a href="/go/build/build.go.html#5818942">sub</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819550"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5819551">.</span><span class="ident" id="5819552">Root</span>&nbsp;<span class="op" id="5819557">=</span>&nbsp;<span class="ident" id="5819559"><a href="/go/build/build.go.html#5818875">root</a></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819568">goto</span>&nbsp;<span class="ident" id="5819573">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819582">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5819590">//&nbsp;It&#39;s&nbsp;okay&nbsp;that&nbsp;we&nbsp;didn&#39;t&nbsp;find&nbsp;a&nbsp;root&nbsp;containing&nbsp;dir.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5819648">//&nbsp;Keep&nbsp;going&nbsp;with&nbsp;the&nbsp;information&nbsp;we&nbsp;have.</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819693">}</span>&nbsp;<span class="keyword" id="5819695">else</span>&nbsp;<span class="op" id="5819700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819704">if</span>&nbsp;<span class="ident" id="5819707"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5819714">.</span><span class="ident" id="5819715">HasPrefix</span><span class="op" id="5819724">(</span><span class="ident" id="5819725"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5819729">,</span>&nbsp;<span class="string" id="5819731">&#34;/&#34;</span><span class="op" id="5819734">)</span>&nbsp;<span class="op" id="5819736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819741">return</span>&nbsp;<span class="ident" id="5819748"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5819749">,</span>&nbsp;<span class="ident" id="5819751"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5819754">.</span><span class="ident" id="5819755">Errorf</span><span class="op" id="5819761">(</span><span class="string" id="5819762">&#34;import&nbsp;%q:&nbsp;cannot&nbsp;import&nbsp;absolute&nbsp;path&#34;</span><span class="op" id="5819802">,</span>&nbsp;<span class="ident" id="5819804"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5819808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5819817">//&nbsp;tried&nbsp;records&nbsp;the&nbsp;location&nbsp;of&nbsp;unsuccessful&nbsp;package&nbsp;lookups</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819881">var</span>&nbsp;<span class="ident" id="5819885">tried</span>&nbsp;<span class="keyword" id="5819891">struct</span>&nbsp;<span class="op" id="5819898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819903">goroot</span>&nbsp;<span class="builtintype" id="5819910">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5819920">gopath</span>&nbsp;<span class="op" id="5819927">[</span><span class="op" id="5819928">]</span><span class="builtintype" id="5819929">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5819938">}</span><br>
<span class="lineno">540</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5819943">//&nbsp;Determine&nbsp;directory&nbsp;from&nbsp;import&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5819986">if</span>&nbsp;<span class="ident" id="5819989"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5819993">.</span><span class="ident" id="5819994">GOROOT</span>&nbsp;<span class="op" id="5820001">!=</span>&nbsp;<span class="string" id="5820004">&#34;&#34;</span>&nbsp;<span class="op" id="5820007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820012">dir</span>&nbsp;<span class="op" id="5820016">:=</span>&nbsp;<span class="ident" id="5820019"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820023">.</span><span class="ident" id="5820024">joinPath</span><span class="op" id="5820032">(</span><span class="ident" id="5820033"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820037">.</span><span class="ident" id="5820038">GOROOT</span><span class="op" id="5820044">,</span>&nbsp;<span class="string" id="5820046">&#34;src&#34;</span><span class="op" id="5820051">,</span>&nbsp;<span class="ident" id="5820053"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5820057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820062">isDir</span>&nbsp;<span class="op" id="5820068">:=</span>&nbsp;<span class="ident" id="5820071"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820075">.</span><span class="ident" id="5820076">isDir</span><span class="op" id="5820081">(</span><span class="ident" id="5820082"><a href="/go/build/build.go.html#5820012">dir</a></span><span class="op" id="5820085">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820090"><a href="/go/build/build.go.html#5818309">binaryOnly</a></span>&nbsp;<span class="op" id="5820101">=</span>&nbsp;<span class="op" id="5820103">!</span><span class="ident" id="5820104"><a href="/go/build/build.go.html#5820062">isDir</a></span>&nbsp;<span class="op" id="5820110">&amp;&amp;</span>&nbsp;<span class="ident" id="5820113"><a href="/go/build/build.go.html#5817630">mode</a></span><span class="op" id="5820117">&amp;</span><span class="ident" id="5820118"><a href="/go/build/build.go.html#5812639">AllowBinary</a></span>&nbsp;<span class="op" id="5820130">!=</span>&nbsp;<span class="num" id="5820133">0</span>&nbsp;<span class="op" id="5820135">&amp;&amp;</span>&nbsp;<span class="ident" id="5820138"><a href="/go/build/build.go.html#5817795">pkga</a></span>&nbsp;<span class="op" id="5820143">!=</span>&nbsp;<span class="string" id="5820146">&#34;&#34;</span>&nbsp;<span class="op" id="5820149">&amp;&amp;</span>&nbsp;<span class="ident" id="5820152"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820156">.</span><span class="ident" id="5820157">isFile</span><span class="op" id="5820163">(</span><span class="ident" id="5820164"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820168">.</span><span class="ident" id="5820169">joinPath</span><span class="op" id="5820177">(</span><span class="ident" id="5820178"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820182">.</span><span class="ident" id="5820183">GOROOT</span><span class="op" id="5820189">,</span>&nbsp;<span class="ident" id="5820191"><a href="/go/build/build.go.html#5817795">pkga</a></span><span class="op" id="5820195">)</span><span class="op" id="5820196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820201">if</span>&nbsp;<span class="ident" id="5820204"><a href="/go/build/build.go.html#5820062">isDir</a></span>&nbsp;<span class="op" id="5820210">||</span>&nbsp;<span class="ident" id="5820213"><a href="/go/build/build.go.html#5818309">binaryOnly</a></span>&nbsp;<span class="op" id="5820224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820230"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5820231">.</span><span class="ident" id="5820232">Dir</span>&nbsp;<span class="op" id="5820236">=</span>&nbsp;<span class="ident" id="5820238"><a href="/go/build/build.go.html#5820012">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820246"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5820247">.</span><span class="ident" id="5820248">Goroot</span>&nbsp;<span class="op" id="5820255">=</span>&nbsp;<span class="ident" id="5820257">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820266"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5820267">.</span><span class="ident" id="5820268">Root</span>&nbsp;<span class="op" id="5820273">=</span>&nbsp;<span class="ident" id="5820275"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820279">.</span><span class="ident" id="5820280">GOROOT</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820291">goto</span>&nbsp;<span class="ident" id="5820296">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820310"><a href="/go/build/build.go.html#5819885">tried</a></span><span class="op" id="5820315">.</span><span class="ident" id="5820316">goroot</span>&nbsp;<span class="op" id="5820323">=</span>&nbsp;<span class="ident" id="5820325"><a href="/go/build/build.go.html#5820012">dir</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820335">for</span>&nbsp;<span class="ident" id="5820339">_</span><span class="op" id="5820340">,</span>&nbsp;<span class="ident" id="5820342">root</span>&nbsp;<span class="op" id="5820347">:=</span>&nbsp;<span class="keyword" id="5820350">range</span>&nbsp;<span class="ident" id="5820356"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820360">.</span><span class="ident" id="5820361">gopath</span><span class="op" id="5820367">(</span><span class="op" id="5820368">)</span>&nbsp;<span class="op" id="5820370">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820375">dir</span>&nbsp;<span class="op" id="5820379">:=</span>&nbsp;<span class="ident" id="5820382"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820386">.</span><span class="ident" id="5820387">joinPath</span><span class="op" id="5820395">(</span><span class="ident" id="5820396"><a href="/go/build/build.go.html#5820342">root</a></span><span class="op" id="5820400">,</span>&nbsp;<span class="string" id="5820402">&#34;src&#34;</span><span class="op" id="5820407">,</span>&nbsp;<span class="ident" id="5820409"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5820413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820418">isDir</span>&nbsp;<span class="op" id="5820424">:=</span>&nbsp;<span class="ident" id="5820427"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820431">.</span><span class="ident" id="5820432">isDir</span><span class="op" id="5820437">(</span><span class="ident" id="5820438"><a href="/go/build/build.go.html#5820375">dir</a></span><span class="op" id="5820441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820446"><a href="/go/build/build.go.html#5818309">binaryOnly</a></span>&nbsp;<span class="op" id="5820457">=</span>&nbsp;<span class="op" id="5820459">!</span><span class="ident" id="5820460"><a href="/go/build/build.go.html#5820418">isDir</a></span>&nbsp;<span class="op" id="5820466">&amp;&amp;</span>&nbsp;<span class="ident" id="5820469"><a href="/go/build/build.go.html#5817630">mode</a></span><span class="op" id="5820473">&amp;</span><span class="ident" id="5820474"><a href="/go/build/build.go.html#5812639">AllowBinary</a></span>&nbsp;<span class="op" id="5820486">!=</span>&nbsp;<span class="num" id="5820489">0</span>&nbsp;<span class="op" id="5820491">&amp;&amp;</span>&nbsp;<span class="ident" id="5820494"><a href="/go/build/build.go.html#5817795">pkga</a></span>&nbsp;<span class="op" id="5820499">!=</span>&nbsp;<span class="string" id="5820502">&#34;&#34;</span>&nbsp;<span class="op" id="5820505">&amp;&amp;</span>&nbsp;<span class="ident" id="5820508"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820512">.</span><span class="ident" id="5820513">isFile</span><span class="op" id="5820519">(</span><span class="ident" id="5820520"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5820524">.</span><span class="ident" id="5820525">joinPath</span><span class="op" id="5820533">(</span><span class="ident" id="5820534"><a href="/go/build/build.go.html#5820342">root</a></span><span class="op" id="5820538">,</span>&nbsp;<span class="ident" id="5820540"><a href="/go/build/build.go.html#5817795">pkga</a></span><span class="op" id="5820544">)</span><span class="op" id="5820545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820550">if</span>&nbsp;<span class="ident" id="5820553"><a href="/go/build/build.go.html#5820418">isDir</a></span>&nbsp;<span class="op" id="5820559">||</span>&nbsp;<span class="ident" id="5820562"><a href="/go/build/build.go.html#5818309">binaryOnly</a></span>&nbsp;<span class="op" id="5820573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820579"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5820580">.</span><span class="ident" id="5820581">Dir</span>&nbsp;<span class="op" id="5820585">=</span>&nbsp;<span class="ident" id="5820587"><a href="/go/build/build.go.html#5820375">dir</a></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820595"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5820596">.</span><span class="ident" id="5820597">Root</span>&nbsp;<span class="op" id="5820602">=</span>&nbsp;<span class="ident" id="5820604"><a href="/go/build/build.go.html#5820342">root</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820613">goto</span>&nbsp;<span class="ident" id="5820618">Found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820632"><a href="/go/build/build.go.html#5819885">tried</a></span><span class="op" id="5820637">.</span><span class="ident" id="5820638">gopath</span>&nbsp;<span class="op" id="5820645">=</span>&nbsp;<span class="builtinfunc" id="5820647">append</span><span class="op" id="5820653">(</span><span class="ident" id="5820654"><a href="/go/build/build.go.html#5819885">tried</a></span><span class="op" id="5820659">.</span><span class="ident" id="5820660">gopath</span><span class="op" id="5820666">,</span>&nbsp;<span class="ident" id="5820668"><a href="/go/build/build.go.html#5820375">dir</a></span><span class="op" id="5820671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820675">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5820680">//&nbsp;package&nbsp;was&nbsp;not&nbsp;found</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820707">var</span>&nbsp;<span class="ident" id="5820711">paths</span>&nbsp;<span class="op" id="5820717">[</span><span class="op" id="5820718">]</span><span class="builtintype" id="5820719">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820728">if</span>&nbsp;<span class="ident" id="5820731"><a href="/go/build/build.go.html#5819885">tried</a></span><span class="op" id="5820736">.</span><span class="ident" id="5820737">goroot</span>&nbsp;<span class="op" id="5820744">!=</span>&nbsp;<span class="string" id="5820747">&#34;&#34;</span>&nbsp;<span class="op" id="5820750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820755"><a href="/go/build/build.go.html#5820711">paths</a></span>&nbsp;<span class="op" id="5820761">=</span>&nbsp;<span class="builtinfunc" id="5820763">append</span><span class="op" id="5820769">(</span><span class="ident" id="5820770"><a href="/go/build/build.go.html#5820711">paths</a></span><span class="op" id="5820775">,</span>&nbsp;<span class="ident" id="5820777"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5820780">.</span><span class="ident" id="5820781">Sprintf</span><span class="op" id="5820788">(</span><span class="string" id="5820789">&#34;\t%s&nbsp;(from&nbsp;$GOROOT)&#34;</span><span class="op" id="5820810">,</span>&nbsp;<span class="ident" id="5820812"><a href="/go/build/build.go.html#5819885">tried</a></span><span class="op" id="5820817">.</span><span class="ident" id="5820818">goroot</span><span class="op" id="5820824">)</span><span class="op" id="5820825">)</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820829">}</span>&nbsp;<span class="keyword" id="5820831">else</span>&nbsp;<span class="op" id="5820836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820841"><a href="/go/build/build.go.html#5820711">paths</a></span>&nbsp;<span class="op" id="5820847">=</span>&nbsp;<span class="builtinfunc" id="5820849">append</span><span class="op" id="5820855">(</span><span class="ident" id="5820856"><a href="/go/build/build.go.html#5820711">paths</a></span><span class="op" id="5820861">,</span>&nbsp;<span class="string" id="5820863">&#34;\t($GOROOT&nbsp;not&nbsp;set)&#34;</span><span class="op" id="5820884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5820888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820892">var</span>&nbsp;<span class="ident" id="5820896">i</span>&nbsp;<span class="builtintype" id="5820898">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820904">var</span>&nbsp;<span class="ident" id="5820908">format</span>&nbsp;<span class="op" id="5820915">=</span>&nbsp;<span class="string" id="5820917">&#34;\t%s&nbsp;(from&nbsp;$GOPATH)&#34;</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820941">for</span>&nbsp;<span class="op" id="5820945">;</span>&nbsp;<span class="ident" id="5820947"><a href="/go/build/build.go.html#5820896">i</a></span>&nbsp;<span class="op" id="5820949">&lt;</span>&nbsp;<span class="builtinfunc" id="5820951">len</span><span class="op" id="5820954">(</span><span class="ident" id="5820955"><a href="/go/build/build.go.html#5819885">tried</a></span><span class="op" id="5820960">.</span><span class="ident" id="5820961">gopath</span><span class="op" id="5820967">)</span><span class="op" id="5820968">;</span>&nbsp;<span class="ident" id="5820970"><a href="/go/build/build.go.html#5820896">i</a></span><span class="op" id="5820971">++</span>&nbsp;<span class="op" id="5820974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5820979">if</span>&nbsp;<span class="ident" id="5820982"><a href="/go/build/build.go.html#5820896">i</a></span>&nbsp;<span class="op" id="5820984">&gt;</span>&nbsp;<span class="num" id="5820986">0</span>&nbsp;<span class="op" id="5820988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5820994"><a href="/go/build/build.go.html#5820908">format</a></span>&nbsp;<span class="op" id="5821001">=</span>&nbsp;<span class="string" id="5821003">&#34;\t%s&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821018"><a href="/go/build/build.go.html#5820711">paths</a></span>&nbsp;<span class="op" id="5821024">=</span>&nbsp;<span class="builtinfunc" id="5821026">append</span><span class="op" id="5821032">(</span><span class="ident" id="5821033"><a href="/go/build/build.go.html#5820711">paths</a></span><span class="op" id="5821038">,</span>&nbsp;<span class="ident" id="5821040"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5821043">.</span><span class="ident" id="5821044">Sprintf</span><span class="op" id="5821051">(</span><span class="ident" id="5821052"><a href="/go/build/build.go.html#5820908">format</a></span><span class="op" id="5821058">,</span>&nbsp;<span class="ident" id="5821060"><a href="/go/build/build.go.html#5819885">tried</a></span><span class="op" id="5821065">.</span><span class="ident" id="5821066">gopath</span><span class="op" id="5821072">[</span><span class="ident" id="5821073"><a href="/go/build/build.go.html#5820896">i</a></span><span class="op" id="5821074">]</span><span class="op" id="5821075">)</span><span class="op" id="5821076">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821084">if</span>&nbsp;<span class="ident" id="5821087"><a href="/go/build/build.go.html#5820896">i</a></span>&nbsp;<span class="op" id="5821089">==</span>&nbsp;<span class="num" id="5821092">0</span>&nbsp;<span class="op" id="5821094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821099"><a href="/go/build/build.go.html#5820711">paths</a></span>&nbsp;<span class="op" id="5821105">=</span>&nbsp;<span class="builtinfunc" id="5821107">append</span><span class="op" id="5821113">(</span><span class="ident" id="5821114"><a href="/go/build/build.go.html#5820711">paths</a></span><span class="op" id="5821119">,</span>&nbsp;<span class="string" id="5821121">&#34;\t($GOPATH&nbsp;not&nbsp;set)&#34;</span><span class="op" id="5821142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821150">return</span>&nbsp;<span class="ident" id="5821157"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821158">,</span>&nbsp;<span class="ident" id="5821160"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5821163">.</span><span class="ident" id="5821164">Errorf</span><span class="op" id="5821170">(</span><span class="string" id="5821171">&#34;cannot&nbsp;find&nbsp;package&nbsp;%q&nbsp;in&nbsp;any&nbsp;of:\n%s&#34;</span><span class="op" id="5821210">,</span>&nbsp;<span class="ident" id="5821212"><a href="/go/build/build.go.html#5817602">path</a></span><span class="op" id="5821216">,</span>&nbsp;<span class="ident" id="5821218"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5821225">.</span><span class="ident" id="5821226">Join</span><span class="op" id="5821230">(</span><span class="ident" id="5821231"><a href="/go/build/build.go.html#5820711">paths</a></span><span class="op" id="5821236">,</span>&nbsp;<span class="string" id="5821238">&#34;\n&#34;</span><span class="op" id="5821242">)</span><span class="op" id="5821243">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="5821249">Found</span><span class="op" id="5821254">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821257">if</span>&nbsp;<span class="ident" id="5821260"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821261">.</span><span class="ident" id="5821262">Root</span>&nbsp;<span class="op" id="5821267">!=</span>&nbsp;<span class="string" id="5821270">&#34;&#34;</span>&nbsp;<span class="op" id="5821273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821277"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821278">.</span><span class="ident" id="5821279">SrcRoot</span>&nbsp;<span class="op" id="5821287">=</span>&nbsp;<span class="ident" id="5821289"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5821293">.</span><span class="ident" id="5821294">joinPath</span><span class="op" id="5821302">(</span><span class="ident" id="5821303"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821304">.</span><span class="ident" id="5821305">Root</span><span class="op" id="5821309">,</span>&nbsp;<span class="string" id="5821311">&#34;src&#34;</span><span class="op" id="5821316">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821320"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821321">.</span><span class="ident" id="5821322">PkgRoot</span>&nbsp;<span class="op" id="5821330">=</span>&nbsp;<span class="ident" id="5821332"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5821336">.</span><span class="ident" id="5821337">joinPath</span><span class="op" id="5821345">(</span><span class="ident" id="5821346"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821347">.</span><span class="ident" id="5821348">Root</span><span class="op" id="5821352">,</span>&nbsp;<span class="string" id="5821354">&#34;pkg&#34;</span><span class="op" id="5821359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821363"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821364">.</span><span class="ident" id="5821365">BinDir</span>&nbsp;<span class="op" id="5821372">=</span>&nbsp;<span class="ident" id="5821374"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5821378">.</span><span class="ident" id="5821379">joinPath</span><span class="op" id="5821387">(</span><span class="ident" id="5821388"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821389">.</span><span class="ident" id="5821390">Root</span><span class="op" id="5821394">,</span>&nbsp;<span class="string" id="5821396">&#34;bin&#34;</span><span class="op" id="5821401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821405">if</span>&nbsp;<span class="ident" id="5821408"><a href="/go/build/build.go.html#5817795">pkga</a></span>&nbsp;<span class="op" id="5821413">!=</span>&nbsp;<span class="string" id="5821416">&#34;&#34;</span>&nbsp;<span class="op" id="5821419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821424"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821425">.</span><span class="ident" id="5821426">PkgObj</span>&nbsp;<span class="op" id="5821433">=</span>&nbsp;<span class="ident" id="5821435"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5821439">.</span><span class="ident" id="5821440">joinPath</span><span class="op" id="5821448">(</span><span class="ident" id="5821449"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821450">.</span><span class="ident" id="5821451">Root</span><span class="op" id="5821455">,</span>&nbsp;<span class="ident" id="5821457"><a href="/go/build/build.go.html#5817795">pkga</a></span><span class="op" id="5821461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821465">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821472">if</span>&nbsp;<span class="ident" id="5821475"><a href="/go/build/build.go.html#5817630">mode</a></span><span class="op" id="5821479">&amp;</span><span class="ident" id="5821480"><a href="/go/build/build.go.html#5812490">FindOnly</a></span>&nbsp;<span class="op" id="5821489">!=</span>&nbsp;<span class="num" id="5821492">0</span>&nbsp;<span class="op" id="5821494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821498">return</span>&nbsp;<span class="ident" id="5821505"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821506">,</span>&nbsp;<span class="ident" id="5821508"><a href="/go/build/build.go.html#5817812">pkgerr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821516">}</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821519">if</span>&nbsp;<span class="ident" id="5821522"><a href="/go/build/build.go.html#5818309">binaryOnly</a></span>&nbsp;<span class="op" id="5821533">&amp;&amp;</span>&nbsp;<span class="op" id="5821536">(</span><span class="ident" id="5821537"><a href="/go/build/build.go.html#5817630">mode</a></span><span class="op" id="5821541">&amp;</span><span class="ident" id="5821542"><a href="/go/build/build.go.html#5812639">AllowBinary</a></span><span class="op" id="5821553">)</span>&nbsp;<span class="op" id="5821555">!=</span>&nbsp;<span class="num" id="5821558">0</span>&nbsp;<span class="op" id="5821560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821564">return</span>&nbsp;<span class="ident" id="5821571"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821572">,</span>&nbsp;<span class="ident" id="5821574"><a href="/go/build/build.go.html#5817812">pkgerr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821586">dirs</span><span class="op" id="5821590">,</span>&nbsp;<span class="ident" id="5821592">err</span>&nbsp;<span class="op" id="5821596">:=</span>&nbsp;<span class="ident" id="5821599"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5821603">.</span><span class="ident" id="5821604">readDir</span><span class="op" id="5821611">(</span><span class="ident" id="5821612"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821613">.</span><span class="ident" id="5821614">Dir</span><span class="op" id="5821617">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821620">if</span>&nbsp;<span class="ident" id="5821623"><a href="/go/build/build.go.html#5821592">err</a></span>&nbsp;<span class="op" id="5821627">!=</span>&nbsp;<span class="ident" id="5821630">nil</span>&nbsp;<span class="op" id="5821634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821638">return</span>&nbsp;<span class="ident" id="5821645"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5821646">,</span>&nbsp;<span class="ident" id="5821648"><a href="/go/build/build.go.html#5821592">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5821653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821657">var</span>&nbsp;<span class="ident" id="5821661">Sfiles</span>&nbsp;<span class="op" id="5821668">[</span><span class="op" id="5821669">]</span><span class="builtintype" id="5821670">string</span>&nbsp;<span class="comment" id="5821677">//&nbsp;files&nbsp;with&nbsp;&#34;.S&#34;&nbsp;(capital&nbsp;S)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821709">var</span>&nbsp;<span class="ident" id="5821713">firstFile</span><span class="op" id="5821722">,</span>&nbsp;<span class="ident" id="5821724">firstCommentFile</span>&nbsp;<span class="builtintype" id="5821741">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821749">imported</span>&nbsp;<span class="op" id="5821758">:=</span>&nbsp;<span class="builtinfunc" id="5821761">make</span><span class="op" id="5821765">(</span><span class="keyword" id="5821766">map</span><span class="op" id="5821769">[</span><span class="builtintype" id="5821770">string</span><span class="op" id="5821776">]</span><span class="op" id="5821777">[</span><span class="op" id="5821778">]</span><span class="ident" id="5821779"><a href="/go/build/build.go.html#5802666">token</a></span><span class="op" id="5821784">.</span><span class="ident" id="5821785">Position</span><span class="op" id="5821793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821796">testImported</span>&nbsp;<span class="op" id="5821809">:=</span>&nbsp;<span class="builtinfunc" id="5821812">make</span><span class="op" id="5821816">(</span><span class="keyword" id="5821817">map</span><span class="op" id="5821820">[</span><span class="builtintype" id="5821821">string</span><span class="op" id="5821827">]</span><span class="op" id="5821828">[</span><span class="op" id="5821829">]</span><span class="ident" id="5821830"><a href="/go/build/build.go.html#5802666">token</a></span><span class="op" id="5821835">.</span><span class="ident" id="5821836">Position</span><span class="op" id="5821844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821847">xTestImported</span>&nbsp;<span class="op" id="5821861">:=</span>&nbsp;<span class="builtinfunc" id="5821864">make</span><span class="op" id="5821868">(</span><span class="keyword" id="5821869">map</span><span class="op" id="5821872">[</span><span class="builtintype" id="5821873">string</span><span class="op" id="5821879">]</span><span class="op" id="5821880">[</span><span class="op" id="5821881">]</span><span class="ident" id="5821882"><a href="/go/build/build.go.html#5802666">token</a></span><span class="op" id="5821887">.</span><span class="ident" id="5821888">Position</span><span class="op" id="5821896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821899">allTags</span>&nbsp;<span class="op" id="5821907">:=</span>&nbsp;<span class="builtinfunc" id="5821910">make</span><span class="op" id="5821914">(</span><span class="keyword" id="5821915">map</span><span class="op" id="5821918">[</span><span class="builtintype" id="5821919">string</span><span class="op" id="5821925">]</span><span class="builtintype" id="5821926">bool</span><span class="op" id="5821930">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5821933">fset</span>&nbsp;<span class="op" id="5821938">:=</span>&nbsp;<span class="ident" id="5821941"><a href="/go/build/build.go.html#5802666">token</a></span><span class="op" id="5821946">.</span><span class="ident" id="5821947">NewFileSet</span><span class="op" id="5821957">(</span><span class="op" id="5821958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821961">for</span>&nbsp;<span class="ident" id="5821965">_</span><span class="op" id="5821966">,</span>&nbsp;<span class="ident" id="5821968">d</span>&nbsp;<span class="op" id="5821970">:=</span>&nbsp;<span class="keyword" id="5821973">range</span>&nbsp;<span class="ident" id="5821979"><a href="/go/build/build.go.html#5821586">dirs</a></span>&nbsp;<span class="op" id="5821984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5821988">if</span>&nbsp;<span class="ident" id="5821991"><a href="/go/build/build.go.html#5821968">d</a></span><span class="op" id="5821992">.</span><span class="ident" id="5821993">IsDir</span><span class="op" id="5821998">(</span><span class="op" id="5821999">)</span>&nbsp;<span class="op" id="5822001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822006">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822017">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822022">name</span>&nbsp;<span class="op" id="5822027">:=</span>&nbsp;<span class="ident" id="5822030"><a href="/go/build/build.go.html#5821968">d</a></span><span class="op" id="5822031">.</span><span class="ident" id="5822032">Name</span><span class="op" id="5822036">(</span><span class="op" id="5822037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822041">ext</span>&nbsp;<span class="op" id="5822045">:=</span>&nbsp;<span class="ident" id="5822048"><a href="/go/build/build.go.html#5816740">nameExt</a></span><span class="op" id="5822055">(</span><span class="ident" id="5822056"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822060">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822065">match</span><span class="op" id="5822070">,</span>&nbsp;<span class="ident" id="5822072">data</span><span class="op" id="5822076">,</span>&nbsp;<span class="ident" id="5822078">filename</span><span class="op" id="5822086">,</span>&nbsp;<span class="ident" id="5822088">err</span>&nbsp;<span class="op" id="5822092">:=</span>&nbsp;<span class="ident" id="5822095"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5822099">.</span><span class="ident" id="5822100">matchFile</span><span class="op" id="5822109">(</span><span class="ident" id="5822110"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822111">.</span><span class="ident" id="5822112">Dir</span><span class="op" id="5822115">,</span>&nbsp;<span class="ident" id="5822117"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822121">,</span>&nbsp;<span class="ident" id="5822123">true</span><span class="op" id="5822127">,</span>&nbsp;<span class="ident" id="5822129"><a href="/go/build/build.go.html#5821899">allTags</a></span><span class="op" id="5822136">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822140">if</span>&nbsp;<span class="ident" id="5822143"><a href="/go/build/build.go.html#5822088">err</a></span>&nbsp;<span class="op" id="5822147">!=</span>&nbsp;<span class="ident" id="5822150">nil</span>&nbsp;<span class="op" id="5822154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822159">return</span>&nbsp;<span class="ident" id="5822166"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822167">,</span>&nbsp;<span class="ident" id="5822169"><a href="/go/build/build.go.html#5822088">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822179">if</span>&nbsp;<span class="op" id="5822182">!</span><span class="ident" id="5822183"><a href="/go/build/build.go.html#5822065">match</a></span>&nbsp;<span class="op" id="5822189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822194">if</span>&nbsp;<span class="ident" id="5822197"><a href="/go/build/build.go.html#5822041">ext</a></span>&nbsp;<span class="op" id="5822201">==</span>&nbsp;<span class="string" id="5822204">&#34;.go&#34;</span>&nbsp;<span class="op" id="5822210">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822216"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822217">.</span><span class="ident" id="5822218">IgnoredGoFiles</span>&nbsp;<span class="op" id="5822233">=</span>&nbsp;<span class="builtinfunc" id="5822235">append</span><span class="op" id="5822241">(</span><span class="ident" id="5822242"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822243">.</span><span class="ident" id="5822244">IgnoredGoFiles</span><span class="op" id="5822258">,</span>&nbsp;<span class="ident" id="5822260"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822274">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5822285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5822290">//&nbsp;Going&nbsp;to&nbsp;save&nbsp;the&nbsp;file.&nbsp;&nbsp;For&nbsp;non-Go&nbsp;files,&nbsp;can&nbsp;stop&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822353">switch</span>&nbsp;<span class="ident" id="5822360"><a href="/go/build/build.go.html#5822041">ext</a></span>&nbsp;<span class="op" id="5822364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822368">case</span>&nbsp;<span class="string" id="5822373">&#34;.c&#34;</span><span class="op" id="5822377">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822382"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822383">.</span><span class="ident" id="5822384">CFiles</span>&nbsp;<span class="op" id="5822391">=</span>&nbsp;<span class="builtinfunc" id="5822393">append</span><span class="op" id="5822399">(</span><span class="ident" id="5822400"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822401">.</span><span class="ident" id="5822402">CFiles</span><span class="op" id="5822408">,</span>&nbsp;<span class="ident" id="5822410"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822419">continue</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822430">case</span>&nbsp;<span class="string" id="5822435">&#34;.cc&#34;</span><span class="op" id="5822440">,</span>&nbsp;<span class="string" id="5822442">&#34;.cpp&#34;</span><span class="op" id="5822448">,</span>&nbsp;<span class="string" id="5822450">&#34;.cxx&#34;</span><span class="op" id="5822456">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822461"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822462">.</span><span class="ident" id="5822463">CXXFiles</span>&nbsp;<span class="op" id="5822472">=</span>&nbsp;<span class="builtinfunc" id="5822474">append</span><span class="op" id="5822480">(</span><span class="ident" id="5822481"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822482">.</span><span class="ident" id="5822483">CXXFiles</span><span class="op" id="5822491">,</span>&nbsp;<span class="ident" id="5822493"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822502">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822513">case</span>&nbsp;<span class="string" id="5822518">&#34;.m&#34;</span><span class="op" id="5822522">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822527"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822528">.</span><span class="ident" id="5822529">MFiles</span>&nbsp;<span class="op" id="5822536">=</span>&nbsp;<span class="builtinfunc" id="5822538">append</span><span class="op" id="5822544">(</span><span class="ident" id="5822545"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822546">.</span><span class="ident" id="5822547">MFiles</span><span class="op" id="5822553">,</span>&nbsp;<span class="ident" id="5822555"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822559">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822564">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822575">case</span>&nbsp;<span class="string" id="5822580">&#34;.h&#34;</span><span class="op" id="5822584">,</span>&nbsp;<span class="string" id="5822586">&#34;.hh&#34;</span><span class="op" id="5822591">,</span>&nbsp;<span class="string" id="5822593">&#34;.hpp&#34;</span><span class="op" id="5822599">,</span>&nbsp;<span class="string" id="5822601">&#34;.hxx&#34;</span><span class="op" id="5822607">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822612"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822613">.</span><span class="ident" id="5822614">HFiles</span>&nbsp;<span class="op" id="5822621">=</span>&nbsp;<span class="builtinfunc" id="5822623">append</span><span class="op" id="5822629">(</span><span class="ident" id="5822630"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822631">.</span><span class="ident" id="5822632">HFiles</span><span class="op" id="5822638">,</span>&nbsp;<span class="ident" id="5822640"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822649">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822660">case</span>&nbsp;<span class="string" id="5822665">&#34;.s&#34;</span><span class="op" id="5822669">:</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822674"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822675">.</span><span class="ident" id="5822676">SFiles</span>&nbsp;<span class="op" id="5822683">=</span>&nbsp;<span class="builtinfunc" id="5822685">append</span><span class="op" id="5822691">(</span><span class="ident" id="5822692"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822693">.</span><span class="ident" id="5822694">SFiles</span><span class="op" id="5822700">,</span>&nbsp;<span class="ident" id="5822702"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822711">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822722">case</span>&nbsp;<span class="string" id="5822727">&#34;.S&#34;</span><span class="op" id="5822731">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822736"><a href="/go/build/build.go.html#5821661">Sfiles</a></span>&nbsp;<span class="op" id="5822743">=</span>&nbsp;<span class="builtinfunc" id="5822745">append</span><span class="op" id="5822751">(</span><span class="ident" id="5822752"><a href="/go/build/build.go.html#5821661">Sfiles</a></span><span class="op" id="5822758">,</span>&nbsp;<span class="ident" id="5822760"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822769">continue</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822780">case</span>&nbsp;<span class="string" id="5822785">&#34;.swig&#34;</span><span class="op" id="5822792">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822797"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822798">.</span><span class="ident" id="5822799">SwigFiles</span>&nbsp;<span class="op" id="5822809">=</span>&nbsp;<span class="builtinfunc" id="5822811">append</span><span class="op" id="5822817">(</span><span class="ident" id="5822818"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822819">.</span><span class="ident" id="5822820">SwigFiles</span><span class="op" id="5822829">,</span>&nbsp;<span class="ident" id="5822831"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822840">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822851">case</span>&nbsp;<span class="string" id="5822856">&#34;.swigcxx&#34;</span><span class="op" id="5822866">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5822871"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822872">.</span><span class="ident" id="5822873">SwigCXXFiles</span>&nbsp;<span class="op" id="5822886">=</span>&nbsp;<span class="builtinfunc" id="5822888">append</span><span class="op" id="5822894">(</span><span class="ident" id="5822895"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5822896">.</span><span class="ident" id="5822897">SwigCXXFiles</span><span class="op" id="5822909">,</span>&nbsp;<span class="ident" id="5822911"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5822915">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822920">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5822931">case</span>&nbsp;<span class="string" id="5822936">&#34;.syso&#34;</span><span class="op" id="5822943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5822948">//&nbsp;binary&nbsp;objects&nbsp;to&nbsp;add&nbsp;to&nbsp;package&nbsp;archive</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5822995">//&nbsp;Likely&nbsp;of&nbsp;the&nbsp;form&nbsp;foo_windows.syso,&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5823042">//&nbsp;the&nbsp;name&nbsp;was&nbsp;vetted&nbsp;above&nbsp;with&nbsp;goodOSArchFile.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823095"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823096">.</span><span class="ident" id="5823097">SysoFiles</span>&nbsp;<span class="op" id="5823107">=</span>&nbsp;<span class="builtinfunc" id="5823109">append</span><span class="op" id="5823115">(</span><span class="ident" id="5823116"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823117">.</span><span class="ident" id="5823118">SysoFiles</span><span class="op" id="5823127">,</span>&nbsp;<span class="ident" id="5823129"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5823133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823138">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823149">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823154">pf</span><span class="op" id="5823156">,</span>&nbsp;<span class="ident" id="5823158"><a href="/go/build/build.go.html#5822088">err</a></span>&nbsp;<span class="op" id="5823162">:=</span>&nbsp;<span class="ident" id="5823165"><a href="/go/build/build.go.html#5802653">parser</a></span><span class="op" id="5823171">.</span><span class="ident" id="5823172">ParseFile</span><span class="op" id="5823181">(</span><span class="ident" id="5823182"><a href="/go/build/build.go.html#5821933">fset</a></span><span class="op" id="5823186">,</span>&nbsp;<span class="ident" id="5823188"><a href="/go/build/build.go.html#5822078">filename</a></span><span class="op" id="5823196">,</span>&nbsp;<span class="ident" id="5823198"><a href="/go/build/build.go.html#5822072">data</a></span><span class="op" id="5823202">,</span>&nbsp;<span class="ident" id="5823204"><a href="/go/build/build.go.html#5802653">parser</a></span><span class="op" id="5823210">.</span><span class="ident" id="5823211">ImportsOnly</span><span class="op" id="5823222">|</span><span class="ident" id="5823223"><a href="/go/build/build.go.html#5802653">parser</a></span><span class="op" id="5823229">.</span><span class="ident" id="5823230">ParseComments</span><span class="op" id="5823243">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823247">if</span>&nbsp;<span class="ident" id="5823250"><a href="/go/build/build.go.html#5822088">err</a></span>&nbsp;<span class="op" id="5823254">!=</span>&nbsp;<span class="ident" id="5823257">nil</span>&nbsp;<span class="op" id="5823261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823266">return</span>&nbsp;<span class="ident" id="5823273"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823274">,</span>&nbsp;<span class="ident" id="5823276"><a href="/go/build/build.go.html#5822088">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823287">pkg</span>&nbsp;<span class="op" id="5823291">:=</span>&nbsp;<span class="ident" id="5823294"><a href="/go/build/build.go.html#5823154">pf</a></span><span class="op" id="5823296">.</span><span class="ident" id="5823297">Name</span><span class="op" id="5823301">.</span><span class="ident" id="5823302">Name</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823309">if</span>&nbsp;<span class="ident" id="5823312"><a href="/go/build/build.go.html#5823287">pkg</a></span>&nbsp;<span class="op" id="5823316">==</span>&nbsp;<span class="string" id="5823319">&#34;documentation&#34;</span>&nbsp;<span class="op" id="5823335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823340"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823341">.</span><span class="ident" id="5823342">IgnoredGoFiles</span>&nbsp;<span class="op" id="5823357">=</span>&nbsp;<span class="builtinfunc" id="5823359">append</span><span class="op" id="5823365">(</span><span class="ident" id="5823366"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823367">.</span><span class="ident" id="5823368">IgnoredGoFiles</span><span class="op" id="5823382">,</span>&nbsp;<span class="ident" id="5823384"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5823388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823393">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823409">isTest</span>&nbsp;<span class="op" id="5823416">:=</span>&nbsp;<span class="ident" id="5823419"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5823426">.</span><span class="ident" id="5823427">HasSuffix</span><span class="op" id="5823436">(</span><span class="ident" id="5823437"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5823441">,</span>&nbsp;<span class="string" id="5823443">&#34;_test.go&#34;</span><span class="op" id="5823453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823457">isXTest</span>&nbsp;<span class="op" id="5823465">:=</span>&nbsp;<span class="ident" id="5823468">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823476">if</span>&nbsp;<span class="ident" id="5823479"><a href="/go/build/build.go.html#5823409">isTest</a></span>&nbsp;<span class="op" id="5823486">&amp;&amp;</span>&nbsp;<span class="ident" id="5823489"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5823496">.</span><span class="ident" id="5823497">HasSuffix</span><span class="op" id="5823506">(</span><span class="ident" id="5823507"><a href="/go/build/build.go.html#5823287">pkg</a></span><span class="op" id="5823510">,</span>&nbsp;<span class="string" id="5823512">&#34;_test&#34;</span><span class="op" id="5823519">)</span>&nbsp;<span class="op" id="5823521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823526"><a href="/go/build/build.go.html#5823457">isXTest</a></span>&nbsp;<span class="op" id="5823534">=</span>&nbsp;<span class="ident" id="5823536">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823544"><a href="/go/build/build.go.html#5823287">pkg</a></span>&nbsp;<span class="op" id="5823548">=</span>&nbsp;<span class="ident" id="5823550"><a href="/go/build/build.go.html#5823287">pkg</a></span><span class="op" id="5823553">[</span><span class="op" id="5823554">:</span><span class="builtinfunc" id="5823555">len</span><span class="op" id="5823558">(</span><span class="ident" id="5823559"><a href="/go/build/build.go.html#5823287">pkg</a></span><span class="op" id="5823562">)</span><span class="op" id="5823563">-</span><span class="builtinfunc" id="5823564">len</span><span class="op" id="5823567">(</span><span class="string" id="5823568">&#34;_test&#34;</span><span class="op" id="5823575">)</span><span class="op" id="5823576">]</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823585">if</span>&nbsp;<span class="ident" id="5823588"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823589">.</span><span class="ident" id="5823590">Name</span>&nbsp;<span class="op" id="5823595">==</span>&nbsp;<span class="string" id="5823598">&#34;&#34;</span>&nbsp;<span class="op" id="5823601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823606"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823607">.</span><span class="ident" id="5823608">Name</span>&nbsp;<span class="op" id="5823613">=</span>&nbsp;<span class="ident" id="5823615"><a href="/go/build/build.go.html#5823287">pkg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823622"><a href="/go/build/build.go.html#5821713">firstFile</a></span>&nbsp;<span class="op" id="5823632">=</span>&nbsp;<span class="ident" id="5823634"><a href="/go/build/build.go.html#5822022">name</a></span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823641">}</span>&nbsp;<span class="keyword" id="5823643">else</span>&nbsp;<span class="keyword" id="5823648">if</span>&nbsp;<span class="ident" id="5823651"><a href="/go/build/build.go.html#5823287">pkg</a></span>&nbsp;<span class="op" id="5823655">!=</span>&nbsp;<span class="ident" id="5823658"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823659">.</span><span class="ident" id="5823660">Name</span>&nbsp;<span class="op" id="5823665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823670">return</span>&nbsp;<span class="ident" id="5823677"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823678">,</span>&nbsp;<span class="op" id="5823680">&amp;</span><span class="ident" id="5823681"><a href="/go/build/build.go.html#5816295">MultiplePackageError</a></span><span class="op" id="5823701">{</span><span class="ident" id="5823702"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823703">.</span><span class="ident" id="5823704">Dir</span><span class="op" id="5823707">,</span>&nbsp;<span class="op" id="5823709">[</span><span class="op" id="5823710">]</span><span class="builtintype" id="5823711">string</span><span class="op" id="5823717">{</span><span class="ident" id="5823718"><a href="/go/build/build.go.html#5821713">firstFile</a></span><span class="op" id="5823727">,</span>&nbsp;<span class="ident" id="5823729"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5823733">}</span><span class="op" id="5823734">,</span>&nbsp;<span class="op" id="5823736">[</span><span class="op" id="5823737">]</span><span class="builtintype" id="5823738">string</span><span class="op" id="5823744">{</span><span class="ident" id="5823745"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823746">.</span><span class="ident" id="5823747">Name</span><span class="op" id="5823751">,</span>&nbsp;<span class="ident" id="5823753"><a href="/go/build/build.go.html#5823287">pkg</a></span><span class="op" id="5823756">}</span><span class="op" id="5823757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823765">if</span>&nbsp;<span class="ident" id="5823768"><a href="/go/build/build.go.html#5823154">pf</a></span><span class="op" id="5823770">.</span><span class="ident" id="5823771">Doc</span>&nbsp;<span class="op" id="5823775">!=</span>&nbsp;<span class="ident" id="5823778">nil</span>&nbsp;<span class="op" id="5823782">&amp;&amp;</span>&nbsp;<span class="ident" id="5823785"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823786">.</span><span class="ident" id="5823787">Doc</span>&nbsp;<span class="op" id="5823791">==</span>&nbsp;<span class="string" id="5823794">&#34;&#34;</span>&nbsp;<span class="op" id="5823797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823802"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5823803">.</span><span class="ident" id="5823804">Doc</span>&nbsp;<span class="op" id="5823808">=</span>&nbsp;<span class="ident" id="5823810"><a href="/go/build/build.go.html#5802643">doc</a></span><span class="op" id="5823813">.</span><span class="ident" id="5823814">Synopsis</span><span class="op" id="5823822">(</span><span class="ident" id="5823823"><a href="/go/build/build.go.html#5823154">pf</a></span><span class="op" id="5823825">.</span><span class="ident" id="5823826">Doc</span><span class="op" id="5823829">.</span><span class="ident" id="5823830">Text</span><span class="op" id="5823834">(</span><span class="op" id="5823835">)</span><span class="op" id="5823836">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5823840">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823845">if</span>&nbsp;<span class="ident" id="5823848"><a href="/go/build/build.go.html#5817630">mode</a></span><span class="op" id="5823852">&amp;</span><span class="ident" id="5823853"><a href="/go/build/build.go.html#5812918">ImportComment</a></span>&nbsp;<span class="op" id="5823867">!=</span>&nbsp;<span class="num" id="5823870">0</span>&nbsp;<span class="op" id="5823872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823877">qcom</span><span class="op" id="5823881">,</span>&nbsp;<span class="ident" id="5823883">line</span>&nbsp;<span class="op" id="5823888">:=</span>&nbsp;<span class="ident" id="5823891"><a href="/go/build/build.go.html#5826456">findImportComment</a></span><span class="op" id="5823908">(</span><span class="ident" id="5823909"><a href="/go/build/build.go.html#5822072">data</a></span><span class="op" id="5823913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823918">if</span>&nbsp;<span class="ident" id="5823921"><a href="/go/build/build.go.html#5823883">line</a></span>&nbsp;<span class="op" id="5823926">!=</span>&nbsp;<span class="num" id="5823929">0</span>&nbsp;<span class="op" id="5823931">{</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5823937">com</span><span class="op" id="5823940">,</span>&nbsp;<span class="ident" id="5823942">err</span>&nbsp;<span class="op" id="5823946">:=</span>&nbsp;<span class="ident" id="5823949"><a href="/go/build/build.go.html#5802762">strconv</a></span><span class="op" id="5823956">.</span><span class="ident" id="5823957">Unquote</span><span class="op" id="5823964">(</span><span class="ident" id="5823965"><a href="/go/build/build.go.html#5823877">qcom</a></span><span class="op" id="5823969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823975">if</span>&nbsp;<span class="ident" id="5823978"><a href="/go/build/build.go.html#5823942">err</a></span>&nbsp;<span class="op" id="5823982">!=</span>&nbsp;<span class="ident" id="5823985">nil</span>&nbsp;<span class="op" id="5823989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5823996">return</span>&nbsp;<span class="ident" id="5824003"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5824004">,</span>&nbsp;<span class="ident" id="5824006"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5824009">.</span><span class="ident" id="5824010">Errorf</span><span class="op" id="5824016">(</span><span class="string" id="5824017">&#34;%s:%d:&nbsp;cannot&nbsp;parse&nbsp;import&nbsp;comment&#34;</span><span class="op" id="5824053">,</span>&nbsp;<span class="ident" id="5824055"><a href="/go/build/build.go.html#5822078">filename</a></span><span class="op" id="5824063">,</span>&nbsp;<span class="ident" id="5824065"><a href="/go/build/build.go.html#5823883">line</a></span><span class="op" id="5824069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824081">if</span>&nbsp;<span class="ident" id="5824084"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5824085">.</span><span class="ident" id="5824086">ImportComment</span>&nbsp;<span class="op" id="5824100">==</span>&nbsp;<span class="string" id="5824103">&#34;&#34;</span>&nbsp;<span class="op" id="5824106">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824113"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5824114">.</span><span class="ident" id="5824115">ImportComment</span>&nbsp;<span class="op" id="5824129">=</span>&nbsp;<span class="ident" id="5824131"><a href="/go/build/build.go.html#5823937">com</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824140"><a href="/go/build/build.go.html#5821724">firstCommentFile</a></span>&nbsp;<span class="op" id="5824157">=</span>&nbsp;<span class="ident" id="5824159"><a href="/go/build/build.go.html#5822022">name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824168">}</span>&nbsp;<span class="keyword" id="5824170">else</span>&nbsp;<span class="keyword" id="5824175">if</span>&nbsp;<span class="ident" id="5824178"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5824179">.</span><span class="ident" id="5824180">ImportComment</span>&nbsp;<span class="op" id="5824194">!=</span>&nbsp;<span class="ident" id="5824197"><a href="/go/build/build.go.html#5823937">com</a></span>&nbsp;<span class="op" id="5824201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824208">return</span>&nbsp;<span class="ident" id="5824215"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5824216">,</span>&nbsp;<span class="ident" id="5824218"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5824221">.</span><span class="ident" id="5824222">Errorf</span><span class="op" id="5824228">(</span><span class="string" id="5824229">&#34;found&nbsp;import&nbsp;comments&nbsp;%q&nbsp;(%s)&nbsp;and&nbsp;%q&nbsp;(%s)&nbsp;in&nbsp;%s&#34;</span><span class="op" id="5824278">,</span>&nbsp;<span class="ident" id="5824280"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5824281">.</span><span class="ident" id="5824282">ImportComment</span><span class="op" id="5824295">,</span>&nbsp;<span class="ident" id="5824297"><a href="/go/build/build.go.html#5821724">firstCommentFile</a></span><span class="op" id="5824313">,</span>&nbsp;<span class="ident" id="5824315"><a href="/go/build/build.go.html#5823937">com</a></span><span class="op" id="5824318">,</span>&nbsp;<span class="ident" id="5824320"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5824324">,</span>&nbsp;<span class="ident" id="5824326"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5824327">.</span><span class="ident" id="5824328">Dir</span><span class="op" id="5824331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824337">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824346">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5824351">//&nbsp;Record&nbsp;imports&nbsp;and&nbsp;information&nbsp;about&nbsp;cgo.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824398">isCgo</span>&nbsp;<span class="op" id="5824404">:=</span>&nbsp;<span class="ident" id="5824407">false</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824415">for</span>&nbsp;<span class="ident" id="5824419">_</span><span class="op" id="5824420">,</span>&nbsp;<span class="ident" id="5824422">decl</span>&nbsp;<span class="op" id="5824427">:=</span>&nbsp;<span class="keyword" id="5824430">range</span>&nbsp;<span class="ident" id="5824436"><a href="/go/build/build.go.html#5823154">pf</a></span><span class="op" id="5824438">.</span><span class="ident" id="5824439">Decls</span>&nbsp;<span class="op" id="5824445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824450">d</span><span class="op" id="5824451">,</span>&nbsp;<span class="ident" id="5824453">ok</span>&nbsp;<span class="op" id="5824456">:=</span>&nbsp;<span class="ident" id="5824459"><a href="/go/build/build.go.html#5824422">decl</a></span><span class="op" id="5824463">.</span><span class="op" id="5824464">(</span><span class="op" id="5824465">*</span><span class="ident" id="5824466"><a href="/go/build/build.go.html#5802633">ast</a></span><span class="op" id="5824469">.</span><span class="ident" id="5824470">GenDecl</span><span class="op" id="5824477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824482">if</span>&nbsp;<span class="op" id="5824485">!</span><span class="ident" id="5824486"><a href="/go/build/build.go.html#5824453">ok</a></span>&nbsp;<span class="op" id="5824489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824495">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824507">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824512">for</span>&nbsp;<span class="ident" id="5824516">_</span><span class="op" id="5824517">,</span>&nbsp;<span class="ident" id="5824519">dspec</span>&nbsp;<span class="op" id="5824525">:=</span>&nbsp;<span class="keyword" id="5824528">range</span>&nbsp;<span class="ident" id="5824534"><a href="/go/build/build.go.html#5824450">d</a></span><span class="op" id="5824535">.</span><span class="ident" id="5824536">Specs</span>&nbsp;<span class="op" id="5824542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824548">spec</span><span class="op" id="5824552">,</span>&nbsp;<span class="ident" id="5824554">ok</span>&nbsp;<span class="op" id="5824557">:=</span>&nbsp;<span class="ident" id="5824560"><a href="/go/build/build.go.html#5824519">dspec</a></span><span class="op" id="5824565">.</span><span class="op" id="5824566">(</span><span class="op" id="5824567">*</span><span class="ident" id="5824568"><a href="/go/build/build.go.html#5802633">ast</a></span><span class="op" id="5824571">.</span><span class="ident" id="5824572">ImportSpec</span><span class="op" id="5824582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824588">if</span>&nbsp;<span class="op" id="5824591">!</span><span class="ident" id="5824592"><a href="/go/build/build.go.html#5824554">ok</a></span>&nbsp;<span class="op" id="5824595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824602">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824615">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824621">quoted</span>&nbsp;<span class="op" id="5824628">:=</span>&nbsp;<span class="ident" id="5824631"><a href="/go/build/build.go.html#5824548">spec</a></span><span class="op" id="5824635">.</span><span class="ident" id="5824636">Path</span><span class="op" id="5824640">.</span><span class="ident" id="5824641">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824651">path</span><span class="op" id="5824655">,</span>&nbsp;<span class="ident" id="5824657">err</span>&nbsp;<span class="op" id="5824661">:=</span>&nbsp;<span class="ident" id="5824664"><a href="/go/build/build.go.html#5802762">strconv</a></span><span class="op" id="5824671">.</span><span class="ident" id="5824672">Unquote</span><span class="op" id="5824679">(</span><span class="ident" id="5824680"><a href="/go/build/build.go.html#5824621">quoted</a></span><span class="op" id="5824686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824692">if</span>&nbsp;<span class="ident" id="5824695"><a href="/go/build/build.go.html#5824657">err</a></span>&nbsp;<span class="op" id="5824699">!=</span>&nbsp;<span class="ident" id="5824702">nil</span>&nbsp;<span class="op" id="5824706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824713"><a href="/go/build/build.go.html#5802697">log</a></span><span class="op" id="5824716">.</span><span class="ident" id="5824717">Panicf</span><span class="op" id="5824723">(</span><span class="string" id="5824724">&#34;%s:&nbsp;parser&nbsp;returned&nbsp;invalid&nbsp;quoted&nbsp;string:&nbsp;&lt;%s&gt;&#34;</span><span class="op" id="5824773">,</span>&nbsp;<span class="ident" id="5824775"><a href="/go/build/build.go.html#5822078">filename</a></span><span class="op" id="5824783">,</span>&nbsp;<span class="ident" id="5824785"><a href="/go/build/build.go.html#5824621">quoted</a></span><span class="op" id="5824791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824797">}</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5824803">if</span>&nbsp;<span class="ident" id="5824806"><a href="/go/build/build.go.html#5823457">isXTest</a></span>&nbsp;<span class="op" id="5824814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824821"><a href="/go/build/build.go.html#5821847">xTestImported</a></span><span class="op" id="5824834">[</span><span class="ident" id="5824835"><a href="/go/build/build.go.html#5824651">path</a></span><span class="op" id="5824839">]</span>&nbsp;<span class="op" id="5824841">=</span>&nbsp;<span class="builtinfunc" id="5824843">append</span><span class="op" id="5824849">(</span><span class="ident" id="5824850"><a href="/go/build/build.go.html#5821847">xTestImported</a></span><span class="op" id="5824863">[</span><span class="ident" id="5824864"><a href="/go/build/build.go.html#5824651">path</a></span><span class="op" id="5824868">]</span><span class="op" id="5824869">,</span>&nbsp;<span class="ident" id="5824871"><a href="/go/build/build.go.html#5821933">fset</a></span><span class="op" id="5824875">.</span><span class="ident" id="5824876">Position</span><span class="op" id="5824884">(</span><span class="ident" id="5824885"><a href="/go/build/build.go.html#5824548">spec</a></span><span class="op" id="5824889">.</span><span class="ident" id="5824890">Pos</span><span class="op" id="5824893">(</span><span class="op" id="5824894">)</span><span class="op" id="5824895">)</span><span class="op" id="5824896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5824902">}</span>&nbsp;<span class="keyword" id="5824904">else</span>&nbsp;<span class="keyword" id="5824909">if</span>&nbsp;<span class="ident" id="5824912"><a href="/go/build/build.go.html#5823409">isTest</a></span>&nbsp;<span class="op" id="5824919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5824926"><a href="/go/build/build.go.html#5821796">testImported</a></span><span class="op" id="5824938">[</span><span class="ident" id="5824939"><a href="/go/build/build.go.html#5824651">path</a></span><span class="op" id="5824943">]</span>&nbsp;<span class="op" id="5824945">=</span>&nbsp;<span class="builtinfunc" id="5824947">append</span><span class="op" id="5824953">(</span><span class="ident" id="5824954"><a href="/go/build/build.go.html#5821796">testImported</a></span><span class="op" id="5824966">[</span><span class="ident" id="5824967"><a href="/go/build/build.go.html#5824651">path</a></span><span class="op" id="5824971">]</span><span class="op" id="5824972">,</span>&nbsp;<span class="ident" id="5824974"><a href="/go/build/build.go.html#5821933">fset</a></span><span class="op" id="5824978">.</span><span class="ident" id="5824979">Position</span><span class="op" id="5824987">(</span><span class="ident" id="5824988"><a href="/go/build/build.go.html#5824548">spec</a></span><span class="op" id="5824992">.</span><span class="ident" id="5824993">Pos</span><span class="op" id="5824996">(</span><span class="op" id="5824997">)</span><span class="op" id="5824998">)</span><span class="op" id="5824999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825005">}</span>&nbsp;<span class="keyword" id="5825007">else</span>&nbsp;<span class="op" id="5825012">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825019"><a href="/go/build/build.go.html#5821749">imported</a></span><span class="op" id="5825027">[</span><span class="ident" id="5825028"><a href="/go/build/build.go.html#5824651">path</a></span><span class="op" id="5825032">]</span>&nbsp;<span class="op" id="5825034">=</span>&nbsp;<span class="builtinfunc" id="5825036">append</span><span class="op" id="5825042">(</span><span class="ident" id="5825043"><a href="/go/build/build.go.html#5821749">imported</a></span><span class="op" id="5825051">[</span><span class="ident" id="5825052"><a href="/go/build/build.go.html#5824651">path</a></span><span class="op" id="5825056">]</span><span class="op" id="5825057">,</span>&nbsp;<span class="ident" id="5825059"><a href="/go/build/build.go.html#5821933">fset</a></span><span class="op" id="5825063">.</span><span class="ident" id="5825064">Position</span><span class="op" id="5825072">(</span><span class="ident" id="5825073"><a href="/go/build/build.go.html#5824548">spec</a></span><span class="op" id="5825077">.</span><span class="ident" id="5825078">Pos</span><span class="op" id="5825081">(</span><span class="op" id="5825082">)</span><span class="op" id="5825083">)</span><span class="op" id="5825084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825096">if</span>&nbsp;<span class="ident" id="5825099"><a href="/go/build/build.go.html#5824651">path</a></span>&nbsp;<span class="op" id="5825104">==</span>&nbsp;<span class="string" id="5825107">&#34;C&#34;</span>&nbsp;<span class="op" id="5825111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825118">if</span>&nbsp;<span class="ident" id="5825121"><a href="/go/build/build.go.html#5823409">isTest</a></span>&nbsp;<span class="op" id="5825128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825136">return</span>&nbsp;<span class="ident" id="5825143"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825144">,</span>&nbsp;<span class="ident" id="5825146"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5825149">.</span><span class="ident" id="5825150">Errorf</span><span class="op" id="5825156">(</span><span class="string" id="5825157">&#34;use&nbsp;of&nbsp;cgo&nbsp;in&nbsp;test&nbsp;%s&nbsp;not&nbsp;supported&#34;</span><span class="op" id="5825194">,</span>&nbsp;<span class="ident" id="5825196"><a href="/go/build/build.go.html#5822078">filename</a></span><span class="op" id="5825204">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825218">cg</span>&nbsp;<span class="op" id="5825221">:=</span>&nbsp;<span class="ident" id="5825224"><a href="/go/build/build.go.html#5824548">spec</a></span><span class="op" id="5825228">.</span><span class="ident" id="5825229">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825238">if</span>&nbsp;<span class="ident" id="5825241"><a href="/go/build/build.go.html#5825218">cg</a></span>&nbsp;<span class="op" id="5825244">==</span>&nbsp;<span class="ident" id="5825247">nil</span>&nbsp;<span class="op" id="5825251">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5825254">len</span><span class="op" id="5825257">(</span><span class="ident" id="5825258"><a href="/go/build/build.go.html#5824450">d</a></span><span class="op" id="5825259">.</span><span class="ident" id="5825260">Specs</span><span class="op" id="5825265">)</span>&nbsp;<span class="op" id="5825267">==</span>&nbsp;<span class="num" id="5825270">1</span>&nbsp;<span class="op" id="5825272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825280"><a href="/go/build/build.go.html#5825218">cg</a></span>&nbsp;<span class="op" id="5825283">=</span>&nbsp;<span class="ident" id="5825285"><a href="/go/build/build.go.html#5824450">d</a></span><span class="op" id="5825286">.</span><span class="ident" id="5825287">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825296">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825303">if</span>&nbsp;<span class="ident" id="5825306"><a href="/go/build/build.go.html#5825218">cg</a></span>&nbsp;<span class="op" id="5825309">!=</span>&nbsp;<span class="ident" id="5825312">nil</span>&nbsp;<span class="op" id="5825316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825324">if</span>&nbsp;<span class="ident" id="5825327">err</span>&nbsp;<span class="op" id="5825331">:=</span>&nbsp;<span class="ident" id="5825334"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5825338">.</span><span class="ident" id="5825339">saveCgo</span><span class="op" id="5825346">(</span><span class="ident" id="5825347"><a href="/go/build/build.go.html#5822078">filename</a></span><span class="op" id="5825355">,</span>&nbsp;<span class="ident" id="5825357"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825358">,</span>&nbsp;<span class="ident" id="5825360"><a href="/go/build/build.go.html#5825218">cg</a></span><span class="op" id="5825362">)</span><span class="op" id="5825363">;</span>&nbsp;<span class="ident" id="5825365"><a href="/go/build/build.go.html#5825327">err</a></span>&nbsp;<span class="op" id="5825369">!=</span>&nbsp;<span class="ident" id="5825372">nil</span>&nbsp;<span class="op" id="5825376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825385">return</span>&nbsp;<span class="ident" id="5825392"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825393">,</span>&nbsp;<span class="ident" id="5825395"><a href="/go/build/build.go.html#5825327">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825412">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825419"><a href="/go/build/build.go.html#5824398">isCgo</a></span>&nbsp;<span class="op" id="5825425">=</span>&nbsp;<span class="ident" id="5825427">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825449">if</span>&nbsp;<span class="ident" id="5825452"><a href="/go/build/build.go.html#5824398">isCgo</a></span>&nbsp;<span class="op" id="5825458">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825463"><a href="/go/build/build.go.html#5821899">allTags</a></span><span class="op" id="5825470">[</span><span class="string" id="5825471">&#34;cgo&#34;</span><span class="op" id="5825476">]</span>&nbsp;<span class="op" id="5825478">=</span>&nbsp;<span class="ident" id="5825480">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825488">if</span>&nbsp;<span class="ident" id="5825491"><a href="/go/build/build.go.html#5817580">ctxt</a></span><span class="op" id="5825495">.</span><span class="ident" id="5825496">CgoEnabled</span>&nbsp;<span class="op" id="5825507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825513"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825514">.</span><span class="ident" id="5825515">CgoFiles</span>&nbsp;<span class="op" id="5825524">=</span>&nbsp;<span class="builtinfunc" id="5825526">append</span><span class="op" id="5825532">(</span><span class="ident" id="5825533"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825534">.</span><span class="ident" id="5825535">CgoFiles</span><span class="op" id="5825543">,</span>&nbsp;<span class="ident" id="5825545"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5825549">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825554">}</span>&nbsp;<span class="keyword" id="5825556">else</span>&nbsp;<span class="op" id="5825561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825567"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825568">.</span><span class="ident" id="5825569">IgnoredGoFiles</span>&nbsp;<span class="op" id="5825584">=</span>&nbsp;<span class="builtinfunc" id="5825586">append</span><span class="op" id="5825592">(</span><span class="ident" id="5825593"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825594">.</span><span class="ident" id="5825595">IgnoredGoFiles</span><span class="op" id="5825609">,</span>&nbsp;<span class="ident" id="5825611"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5825615">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825624">}</span>&nbsp;<span class="keyword" id="5825626">else</span>&nbsp;<span class="keyword" id="5825631">if</span>&nbsp;<span class="ident" id="5825634"><a href="/go/build/build.go.html#5823457">isXTest</a></span>&nbsp;<span class="op" id="5825642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825647"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825648">.</span><span class="ident" id="5825649">XTestGoFiles</span>&nbsp;<span class="op" id="5825662">=</span>&nbsp;<span class="builtinfunc" id="5825664">append</span><span class="op" id="5825670">(</span><span class="ident" id="5825671"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825672">.</span><span class="ident" id="5825673">XTestGoFiles</span><span class="op" id="5825685">,</span>&nbsp;<span class="ident" id="5825687"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5825691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825695">}</span>&nbsp;<span class="keyword" id="5825697">else</span>&nbsp;<span class="keyword" id="5825702">if</span>&nbsp;<span class="ident" id="5825705"><a href="/go/build/build.go.html#5823409">isTest</a></span>&nbsp;<span class="op" id="5825712">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825717"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825718">.</span><span class="ident" id="5825719">TestGoFiles</span>&nbsp;<span class="op" id="5825731">=</span>&nbsp;<span class="builtinfunc" id="5825733">append</span><span class="op" id="5825739">(</span><span class="ident" id="5825740"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825741">.</span><span class="ident" id="5825742">TestGoFiles</span><span class="op" id="5825753">,</span>&nbsp;<span class="ident" id="5825755"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5825759">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825763">}</span>&nbsp;<span class="keyword" id="5825765">else</span>&nbsp;<span class="op" id="5825770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825775"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825776">.</span><span class="ident" id="5825777">GoFiles</span>&nbsp;<span class="op" id="5825785">=</span>&nbsp;<span class="builtinfunc" id="5825787">append</span><span class="op" id="5825793">(</span><span class="ident" id="5825794"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825795">.</span><span class="ident" id="5825796">GoFiles</span><span class="op" id="5825803">,</span>&nbsp;<span class="ident" id="5825805"><a href="/go/build/build.go.html#5822022">name</a></span><span class="op" id="5825809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825813">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825816">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825819">if</span>&nbsp;<span class="builtinfunc" id="5825822">len</span><span class="op" id="5825825">(</span><span class="ident" id="5825826"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825827">.</span><span class="ident" id="5825828">GoFiles</span><span class="op" id="5825835">)</span><span class="op" id="5825836">+</span><span class="builtinfunc" id="5825837">len</span><span class="op" id="5825840">(</span><span class="ident" id="5825841"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825842">.</span><span class="ident" id="5825843">CgoFiles</span><span class="op" id="5825851">)</span><span class="op" id="5825852">+</span><span class="builtinfunc" id="5825853">len</span><span class="op" id="5825856">(</span><span class="ident" id="5825857"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825858">.</span><span class="ident" id="5825859">TestGoFiles</span><span class="op" id="5825870">)</span><span class="op" id="5825871">+</span><span class="builtinfunc" id="5825872">len</span><span class="op" id="5825875">(</span><span class="ident" id="5825876"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825877">.</span><span class="ident" id="5825878">XTestGoFiles</span><span class="op" id="5825890">)</span>&nbsp;<span class="op" id="5825892">==</span>&nbsp;<span class="num" id="5825895">0</span>&nbsp;<span class="op" id="5825897">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825901">return</span>&nbsp;<span class="ident" id="5825908"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825909">,</span>&nbsp;<span class="op" id="5825911">&amp;</span><span class="ident" id="5825912"><a href="/go/build/build.go.html#5816047">NoGoError</a></span><span class="op" id="5825921">{</span><span class="ident" id="5825922"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825923">.</span><span class="ident" id="5825924">Dir</span><span class="op" id="5825927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5825934">for</span>&nbsp;<span class="ident" id="5825938">tag</span>&nbsp;<span class="op" id="5825942">:=</span>&nbsp;<span class="keyword" id="5825945">range</span>&nbsp;<span class="ident" id="5825951"><a href="/go/build/build.go.html#5821899">allTags</a></span>&nbsp;<span class="op" id="5825959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5825963"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825964">.</span><span class="ident" id="5825965">AllTags</span>&nbsp;<span class="op" id="5825973">=</span>&nbsp;<span class="builtinfunc" id="5825975">append</span><span class="op" id="5825981">(</span><span class="ident" id="5825982"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5825983">.</span><span class="ident" id="5825984">AllTags</span><span class="op" id="5825991">,</span>&nbsp;<span class="ident" id="5825993"><a href="/go/build/build.go.html#5825938">tag</a></span><span class="op" id="5825996">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5825999">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826002"><a href="/go/build/build.go.html#5802754">sort</a></span><span class="op" id="5826006">.</span><span class="ident" id="5826007">Strings</span><span class="op" id="5826014">(</span><span class="ident" id="5826015"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826016">.</span><span class="ident" id="5826017">AllTags</span><span class="op" id="5826024">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826028"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826029">.</span><span class="ident" id="5826030">Imports</span><span class="op" id="5826037">,</span>&nbsp;<span class="ident" id="5826039"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826040">.</span><span class="ident" id="5826041">ImportPos</span>&nbsp;<span class="op" id="5826051">=</span>&nbsp;<span class="ident" id="5826053"><a href="/go/build/build.go.html#5830892">cleanImports</a></span><span class="op" id="5826065">(</span><span class="ident" id="5826066"><a href="/go/build/build.go.html#5821749">imported</a></span><span class="op" id="5826074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826077"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826078">.</span><span class="ident" id="5826079">TestImports</span><span class="op" id="5826090">,</span>&nbsp;<span class="ident" id="5826092"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826093">.</span><span class="ident" id="5826094">TestImportPos</span>&nbsp;<span class="op" id="5826108">=</span>&nbsp;<span class="ident" id="5826110"><a href="/go/build/build.go.html#5830892">cleanImports</a></span><span class="op" id="5826122">(</span><span class="ident" id="5826123"><a href="/go/build/build.go.html#5821796">testImported</a></span><span class="op" id="5826135">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826138"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826139">.</span><span class="ident" id="5826140">XTestImports</span><span class="op" id="5826152">,</span>&nbsp;<span class="ident" id="5826154"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826155">.</span><span class="ident" id="5826156">XTestImportPos</span>&nbsp;<span class="op" id="5826171">=</span>&nbsp;<span class="ident" id="5826173"><a href="/go/build/build.go.html#5830892">cleanImports</a></span><span class="op" id="5826185">(</span><span class="ident" id="5826186"><a href="/go/build/build.go.html#5821847">xTestImported</a></span><span class="op" id="5826199">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826203">//&nbsp;add&nbsp;the&nbsp;.S&nbsp;files&nbsp;only&nbsp;if&nbsp;we&nbsp;are&nbsp;using&nbsp;cgo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826249">//&nbsp;(which&nbsp;means&nbsp;gcc&nbsp;will&nbsp;compile&nbsp;them).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826290">//&nbsp;The&nbsp;standard&nbsp;assemblers&nbsp;expect&nbsp;.s&nbsp;files.</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826335">if</span>&nbsp;<span class="builtinfunc" id="5826338">len</span><span class="op" id="5826341">(</span><span class="ident" id="5826342"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826343">.</span><span class="ident" id="5826344">CgoFiles</span><span class="op" id="5826352">)</span>&nbsp;<span class="op" id="5826354">&gt;</span>&nbsp;<span class="num" id="5826356">0</span>&nbsp;<span class="op" id="5826358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826362"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826363">.</span><span class="ident" id="5826364">SFiles</span>&nbsp;<span class="op" id="5826371">=</span>&nbsp;<span class="builtinfunc" id="5826373">append</span><span class="op" id="5826379">(</span><span class="ident" id="5826380"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826381">.</span><span class="ident" id="5826382">SFiles</span><span class="op" id="5826388">,</span>&nbsp;<span class="ident" id="5826390"><a href="/go/build/build.go.html#5821661">Sfiles</a></span><span class="op" id="5826396">...</span><span class="op" id="5826399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826403"><a href="/go/build/build.go.html#5802754">sort</a></span><span class="op" id="5826407">.</span><span class="ident" id="5826408">Strings</span><span class="op" id="5826415">(</span><span class="ident" id="5826416"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826417">.</span><span class="ident" id="5826418">SFiles</span><span class="op" id="5826424">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826431">return</span>&nbsp;<span class="ident" id="5826438"><a href="/go/build/build.go.html#5817668">p</a></span><span class="op" id="5826439">,</span>&nbsp;<span class="ident" id="5826441"><a href="/go/build/build.go.html#5817812">pkgerr</a></span><br>
<span class="lineno"></span><span class="op" id="5826448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5826451">func</span>&nbsp;<span class="ident" id="5826456">findImportComment</span><span class="op" id="5826473">(</span><span class="ident" id="5826474">data</span>&nbsp;<span class="op" id="5826479">[</span><span class="op" id="5826480">]</span><span class="builtintype" id="5826481">byte</span><span class="op" id="5826485">)</span>&nbsp;<span class="op" id="5826487">(</span><span class="ident" id="5826488">s</span>&nbsp;<span class="builtintype" id="5826490">string</span><span class="op" id="5826496">,</span>&nbsp;<span class="ident" id="5826498">line</span>&nbsp;<span class="builtintype" id="5826503">int</span><span class="op" id="5826506">)</span>&nbsp;<span class="op" id="5826508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826511">//&nbsp;expect&nbsp;keyword&nbsp;package</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826538">word</span><span class="op" id="5826542">,</span>&nbsp;<span class="ident" id="5826544"><a href="/go/build/build.go.html#5826474">data</a></span>&nbsp;<span class="op" id="5826549">:=</span>&nbsp;<span class="ident" id="5826552"><a href="/go/build/build.go.html#5828446">parseWord</a></span><span class="op" id="5826561">(</span><span class="ident" id="5826562"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5826566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826569">if</span>&nbsp;<span class="builtintype" id="5826572">string</span><span class="op" id="5826578">(</span><span class="ident" id="5826579"><a href="/go/build/build.go.html#5826538">word</a></span><span class="op" id="5826583">)</span>&nbsp;<span class="op" id="5826585">!=</span>&nbsp;<span class="string" id="5826588">&#34;package&#34;</span>&nbsp;<span class="op" id="5826598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826602">return</span>&nbsp;<span class="string" id="5826609">&#34;&#34;</span><span class="op" id="5826611">,</span>&nbsp;<span class="num" id="5826613">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826620">//&nbsp;expect&nbsp;package&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826644">_</span><span class="op" id="5826645">,</span>&nbsp;<span class="ident" id="5826647"><a href="/go/build/build.go.html#5826474">data</a></span>&nbsp;<span class="op" id="5826652">=</span>&nbsp;<span class="ident" id="5826654"><a href="/go/build/build.go.html#5828446">parseWord</a></span><span class="op" id="5826663">(</span><span class="ident" id="5826664"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5826668">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826672">//&nbsp;now&nbsp;ready&nbsp;for&nbsp;import&nbsp;comment,&nbsp;a&nbsp;//&nbsp;or&nbsp;/*&nbsp;*/&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5826728">//&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;on&nbsp;the&nbsp;current&nbsp;line.</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826774">for</span>&nbsp;<span class="builtinfunc" id="5826778">len</span><span class="op" id="5826781">(</span><span class="ident" id="5826782"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5826786">)</span>&nbsp;<span class="op" id="5826788">&gt;</span>&nbsp;<span class="num" id="5826790">0</span>&nbsp;<span class="op" id="5826792">&amp;&amp;</span>&nbsp;<span class="op" id="5826795">(</span><span class="ident" id="5826796"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5826800">[</span><span class="num" id="5826801">0</span><span class="op" id="5826802">]</span>&nbsp;<span class="op" id="5826804">==</span>&nbsp;<span class="string" id="5826807">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5826811">||</span>&nbsp;<span class="ident" id="5826814"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5826818">[</span><span class="num" id="5826819">0</span><span class="op" id="5826820">]</span>&nbsp;<span class="op" id="5826822">==</span>&nbsp;<span class="string" id="5826825">&#39;\t&#39;</span>&nbsp;<span class="op" id="5826830">||</span>&nbsp;<span class="ident" id="5826833"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5826837">[</span><span class="num" id="5826838">0</span><span class="op" id="5826839">]</span>&nbsp;<span class="op" id="5826841">==</span>&nbsp;<span class="string" id="5826844">&#39;\r&#39;</span><span class="op" id="5826848">)</span>&nbsp;<span class="op" id="5826850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826854"><a href="/go/build/build.go.html#5826474">data</a></span>&nbsp;<span class="op" id="5826859">=</span>&nbsp;<span class="ident" id="5826861"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5826865">[</span><span class="num" id="5826866">1</span><span class="op" id="5826867">:</span><span class="op" id="5826868">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5826871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826875">var</span>&nbsp;<span class="ident" id="5826879">comment</span>&nbsp;<span class="op" id="5826887">[</span><span class="op" id="5826888">]</span><span class="builtintype" id="5826889">byte</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826895">switch</span>&nbsp;<span class="op" id="5826902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826905">case</span>&nbsp;<span class="ident" id="5826910"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5826915">.</span><span class="ident" id="5826916">HasPrefix</span><span class="op" id="5826925">(</span><span class="ident" id="5826926"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5826930">,</span>&nbsp;<span class="ident" id="5826932"><a href="/go/build/build.go.html#5827546">slashSlash</a></span><span class="op" id="5826942">)</span><span class="op" id="5826943">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826947">i</span>&nbsp;<span class="op" id="5826949">:=</span>&nbsp;<span class="ident" id="5826952"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5826957">.</span><span class="ident" id="5826958">Index</span><span class="op" id="5826963">(</span><span class="ident" id="5826964"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5826968">,</span>&nbsp;<span class="ident" id="5826970"><a href="/go/build/build.go.html#5827627">newline</a></span><span class="op" id="5826977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5826981">if</span>&nbsp;<span class="ident" id="5826984"><a href="/go/build/build.go.html#5826947">i</a></span>&nbsp;<span class="op" id="5826986">&lt;</span>&nbsp;<span class="num" id="5826988">0</span>&nbsp;<span class="op" id="5826990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5826995"><a href="/go/build/build.go.html#5826947">i</a></span>&nbsp;<span class="op" id="5826997">=</span>&nbsp;<span class="builtinfunc" id="5826999">len</span><span class="op" id="5827002">(</span><span class="ident" id="5827003"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5827007">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5827011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827015"><a href="/go/build/build.go.html#5826879">comment</a></span>&nbsp;<span class="op" id="5827023">=</span>&nbsp;<span class="ident" id="5827025"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5827029">[</span><span class="num" id="5827030">2</span><span class="op" id="5827031">:</span><span class="ident" id="5827032"><a href="/go/build/build.go.html#5826947">i</a></span><span class="op" id="5827033">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827036">case</span>&nbsp;<span class="ident" id="5827041"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5827046">.</span><span class="ident" id="5827047">HasPrefix</span><span class="op" id="5827056">(</span><span class="ident" id="5827057"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5827061">,</span>&nbsp;<span class="ident" id="5827063"><a href="/go/build/build.go.html#5827573">slashStar</a></span><span class="op" id="5827072">)</span><span class="op" id="5827073">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827077"><a href="/go/build/build.go.html#5826474">data</a></span>&nbsp;<span class="op" id="5827082">=</span>&nbsp;<span class="ident" id="5827084"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5827088">[</span><span class="num" id="5827089">2</span><span class="op" id="5827090">:</span><span class="op" id="5827091">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827095">i</span>&nbsp;<span class="op" id="5827097">:=</span>&nbsp;<span class="ident" id="5827100"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5827105">.</span><span class="ident" id="5827106">Index</span><span class="op" id="5827111">(</span><span class="ident" id="5827112"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5827116">,</span>&nbsp;<span class="ident" id="5827118"><a href="/go/build/build.go.html#5827600">starSlash</a></span><span class="op" id="5827127">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827131">if</span>&nbsp;<span class="ident" id="5827134"><a href="/go/build/build.go.html#5827095">i</a></span>&nbsp;<span class="op" id="5827136">&lt;</span>&nbsp;<span class="num" id="5827138">0</span>&nbsp;<span class="op" id="5827140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5827145">//&nbsp;malformed&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827169">return</span>&nbsp;<span class="string" id="5827176">&#34;&#34;</span><span class="op" id="5827178">,</span>&nbsp;<span class="num" id="5827180">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5827184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827188"><a href="/go/build/build.go.html#5826879">comment</a></span>&nbsp;<span class="op" id="5827196">=</span>&nbsp;<span class="ident" id="5827198"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5827202">[</span><span class="op" id="5827203">:</span><span class="ident" id="5827204"><a href="/go/build/build.go.html#5827095">i</a></span><span class="op" id="5827205">]</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827209">if</span>&nbsp;<span class="ident" id="5827212"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5827217">.</span><span class="ident" id="5827218">Contains</span><span class="op" id="5827226">(</span><span class="ident" id="5827227"><a href="/go/build/build.go.html#5826879">comment</a></span><span class="op" id="5827234">,</span>&nbsp;<span class="ident" id="5827236"><a href="/go/build/build.go.html#5827627">newline</a></span><span class="op" id="5827243">)</span>&nbsp;<span class="op" id="5827245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827250">return</span>&nbsp;<span class="string" id="5827257">&#34;&#34;</span><span class="op" id="5827259">,</span>&nbsp;<span class="num" id="5827261">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5827265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5827268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827271"><a href="/go/build/build.go.html#5826879">comment</a></span>&nbsp;<span class="op" id="5827279">=</span>&nbsp;<span class="ident" id="5827281"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5827286">.</span><span class="ident" id="5827287">TrimSpace</span><span class="op" id="5827296">(</span><span class="ident" id="5827297"><a href="/go/build/build.go.html#5826879">comment</a></span><span class="op" id="5827304">)</span><br>
<span class="lineno">830</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5827308">//&nbsp;split&nbsp;comment&nbsp;into&nbsp;`import`,&nbsp;`&#34;pkg&#34;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827349"><a href="/go/build/build.go.html#5826538">word</a></span><span class="op" id="5827353">,</span>&nbsp;<span class="ident" id="5827355">arg</span>&nbsp;<span class="op" id="5827359">:=</span>&nbsp;<span class="ident" id="5827362"><a href="/go/build/build.go.html#5828446">parseWord</a></span><span class="op" id="5827371">(</span><span class="ident" id="5827372"><a href="/go/build/build.go.html#5826879">comment</a></span><span class="op" id="5827379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827382">if</span>&nbsp;<span class="builtintype" id="5827385">string</span><span class="op" id="5827391">(</span><span class="ident" id="5827392"><a href="/go/build/build.go.html#5826538">word</a></span><span class="op" id="5827396">)</span>&nbsp;<span class="op" id="5827398">!=</span>&nbsp;<span class="string" id="5827401">&#34;import&#34;</span>&nbsp;<span class="op" id="5827410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827414">return</span>&nbsp;<span class="string" id="5827421">&#34;&#34;</span><span class="op" id="5827423">,</span>&nbsp;<span class="num" id="5827425">0</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5827428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827432"><a href="/go/build/build.go.html#5826498">line</a></span>&nbsp;<span class="op" id="5827437">=</span>&nbsp;<span class="num" id="5827439">1</span>&nbsp;<span class="op" id="5827441">+</span>&nbsp;<span class="ident" id="5827443"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5827448">.</span><span class="ident" id="5827449">Count</span><span class="op" id="5827454">(</span><span class="ident" id="5827455"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5827459">[</span><span class="op" id="5827460">:</span><span class="builtinfunc" id="5827461">cap</span><span class="op" id="5827464">(</span><span class="ident" id="5827465"><a href="/go/build/build.go.html#5826474">data</a></span><span class="op" id="5827469">)</span><span class="op" id="5827470">-</span><span class="builtinfunc" id="5827471">cap</span><span class="op" id="5827474">(</span><span class="ident" id="5827475"><a href="/go/build/build.go.html#5827355">arg</a></span><span class="op" id="5827478">)</span><span class="op" id="5827479">]</span><span class="op" id="5827480">,</span>&nbsp;<span class="ident" id="5827482"><a href="/go/build/build.go.html#5827627">newline</a></span><span class="op" id="5827489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827492">return</span>&nbsp;<span class="ident" id="5827499"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5827506">.</span><span class="ident" id="5827507">TrimSpace</span><span class="op" id="5827516">(</span><span class="builtintype" id="5827517">string</span><span class="op" id="5827523">(</span><span class="ident" id="5827524"><a href="/go/build/build.go.html#5827355">arg</a></span><span class="op" id="5827527">)</span><span class="op" id="5827528">)</span><span class="op" id="5827529">,</span>&nbsp;<span class="ident" id="5827531"><a href="/go/build/build.go.html#5826498">line</a></span><br>
<span class="lineno"></span><span class="op" id="5827536">}</span><br>
<span class="lineno">840</span><br>
<span class="lineno"></span><span class="keyword" id="5827539">var</span>&nbsp;<span class="op" id="5827543">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827546">slashSlash</span>&nbsp;<span class="op" id="5827557">=</span>&nbsp;<span class="op" id="5827559">[</span><span class="op" id="5827560">]</span><span class="builtintype" id="5827561">byte</span><span class="op" id="5827565">(</span><span class="string" id="5827566">&#34;//&#34;</span><span class="op" id="5827570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827573">slashStar</span>&nbsp;&nbsp;<span class="op" id="5827584">=</span>&nbsp;<span class="op" id="5827586">[</span><span class="op" id="5827587">]</span><span class="builtintype" id="5827588">byte</span><span class="op" id="5827592">(</span><span class="string" id="5827593">&#34;/*&#34;</span><span class="op" id="5827597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827600">starSlash</span>&nbsp;&nbsp;<span class="op" id="5827611">=</span>&nbsp;<span class="op" id="5827613">[</span><span class="op" id="5827614">]</span><span class="builtintype" id="5827615">byte</span><span class="op" id="5827619">(</span><span class="string" id="5827620">&#34;*/&#34;</span><span class="op" id="5827624">)</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827627">newline</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5827638">=</span>&nbsp;<span class="op" id="5827640">[</span><span class="op" id="5827641">]</span><span class="builtintype" id="5827642">byte</span><span class="op" id="5827646">(</span><span class="string" id="5827647">&#34;\n&#34;</span><span class="op" id="5827651">)</span><br>
<span class="lineno"></span><span class="op" id="5827653">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5827656">//&nbsp;skipSpaceOrComment&nbsp;returns&nbsp;data&nbsp;with&nbsp;any&nbsp;leading&nbsp;spaces&nbsp;or&nbsp;comments&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="5827736">func</span>&nbsp;<span class="ident" id="5827741">skipSpaceOrComment</span><span class="op" id="5827759">(</span><span class="ident" id="5827760">data</span>&nbsp;<span class="op" id="5827765">[</span><span class="op" id="5827766">]</span><span class="builtintype" id="5827767">byte</span><span class="op" id="5827771">)</span>&nbsp;<span class="op" id="5827773">[</span><span class="op" id="5827774">]</span><span class="builtintype" id="5827775">byte</span>&nbsp;<span class="op" id="5827780">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827783">for</span>&nbsp;<span class="builtinfunc" id="5827787">len</span><span class="op" id="5827790">(</span><span class="ident" id="5827791"><a href="/go/build/build.go.html#5827760">data</a></span><span class="op" id="5827795">)</span>&nbsp;<span class="op" id="5827797">&gt;</span>&nbsp;<span class="num" id="5827799">0</span>&nbsp;<span class="op" id="5827801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827805">switch</span>&nbsp;<span class="ident" id="5827812"><a href="/go/build/build.go.html#5827760">data</a></span><span class="op" id="5827816">[</span><span class="num" id="5827817">0</span><span class="op" id="5827818">]</span>&nbsp;<span class="op" id="5827820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827824">case</span>&nbsp;<span class="string" id="5827829">&#39;&nbsp;&#39;</span><span class="op" id="5827832">,</span>&nbsp;<span class="string" id="5827834">&#39;\t&#39;</span><span class="op" id="5827838">,</span>&nbsp;<span class="string" id="5827840">&#39;\r&#39;</span><span class="op" id="5827844">,</span>&nbsp;<span class="string" id="5827846">&#39;\n&#39;</span><span class="op" id="5827850">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827855"><a href="/go/build/build.go.html#5827760">data</a></span>&nbsp;<span class="op" id="5827860">=</span>&nbsp;<span class="ident" id="5827862"><a href="/go/build/build.go.html#5827760">data</a></span><span class="op" id="5827866">[</span><span class="num" id="5827867">1</span><span class="op" id="5827868">:</span><span class="op" id="5827869">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827874">continue</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827885">case</span>&nbsp;<span class="string" id="5827890">&#39;/&#39;</span><span class="op" id="5827893">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827898">if</span>&nbsp;<span class="ident" id="5827901"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5827906">.</span><span class="ident" id="5827907">HasPrefix</span><span class="op" id="5827916">(</span><span class="ident" id="5827917"><a href="/go/build/build.go.html#5827760">data</a></span><span class="op" id="5827921">,</span>&nbsp;<span class="ident" id="5827923"><a href="/go/build/build.go.html#5827546">slashSlash</a></span><span class="op" id="5827933">)</span>&nbsp;<span class="op" id="5827935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5827941">i</span>&nbsp;<span class="op" id="5827943">:=</span>&nbsp;<span class="ident" id="5827946"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5827951">.</span><span class="ident" id="5827952">Index</span><span class="op" id="5827957">(</span><span class="ident" id="5827958"><a href="/go/build/build.go.html#5827760">data</a></span><span class="op" id="5827962">,</span>&nbsp;<span class="ident" id="5827964"><a href="/go/build/build.go.html#5827627">newline</a></span><span class="op" id="5827971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827977">if</span>&nbsp;<span class="ident" id="5827980"><a href="/go/build/build.go.html#5827941">i</a></span>&nbsp;<span class="op" id="5827982">&lt;</span>&nbsp;<span class="num" id="5827984">0</span>&nbsp;<span class="op" id="5827986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5827993">return</span>&nbsp;<span class="ident" id="5828000">nil</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5828008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5828014"><a href="/go/build/build.go.html#5827760">data</a></span>&nbsp;<span class="op" id="5828019">=</span>&nbsp;<span class="ident" id="5828021"><a href="/go/build/build.go.html#5827760">data</a></span><span class="op" id="5828025">[</span><span class="ident" id="5828026"><a href="/go/build/build.go.html#5827941">i</a></span><span class="op" id="5828027">+</span><span class="num" id="5828028">1</span><span class="op" id="5828029">:</span><span class="op" id="5828030">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828036">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5828048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828053">if</span>&nbsp;<span class="ident" id="5828056"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5828061">.</span><span class="ident" id="5828062">HasPrefix</span><span class="op" id="5828071">(</span><span class="ident" id="5828072"><a href="/go/build/build.go.html#5827760">data</a></span><span class="op" id="5828076">,</span>&nbsp;<span class="ident" id="5828078"><a href="/go/build/build.go.html#5827573">slashStar</a></span><span class="op" id="5828087">)</span>&nbsp;<span class="op" id="5828089">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5828095"><a href="/go/build/build.go.html#5827760">data</a></span>&nbsp;<span class="op" id="5828100">=</span>&nbsp;<span class="ident" id="5828102"><a href="/go/build/build.go.html#5827760">data</a></span><span class="op" id="5828106">[</span><span class="num" id="5828107">2</span><span class="op" id="5828108">:</span><span class="op" id="5828109">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5828115">i</span>&nbsp;<span class="op" id="5828117">:=</span>&nbsp;<span class="ident" id="5828120"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5828125">.</span><span class="ident" id="5828126">Index</span><span class="op" id="5828131">(</span><span class="ident" id="5828132"><a href="/go/build/build.go.html#5827760">data</a></span><span class="op" id="5828136">,</span>&nbsp;<span class="ident" id="5828138"><a href="/go/build/build.go.html#5827600">starSlash</a></span><span class="op" id="5828147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828153">if</span>&nbsp;<span class="ident" id="5828156"><a href="/go/build/build.go.html#5828115">i</a></span>&nbsp;<span class="op" id="5828158">&lt;</span>&nbsp;<span class="num" id="5828160">0</span>&nbsp;<span class="op" id="5828162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828169">return</span>&nbsp;<span class="ident" id="5828176">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5828184">}</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5828190"><a href="/go/build/build.go.html#5827760">data</a></span>&nbsp;<span class="op" id="5828195">=</span>&nbsp;<span class="ident" id="5828197"><a href="/go/build/build.go.html#5827760">data</a></span><span class="op" id="5828201">[</span><span class="ident" id="5828202"><a href="/go/build/build.go.html#5828115">i</a></span><span class="op" id="5828203">+</span><span class="num" id="5828204">2</span><span class="op" id="5828205">:</span><span class="op" id="5828206">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828212">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5828224">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5828228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828232">break</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5828239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828242">return</span>&nbsp;<span class="ident" id="5828249"><a href="/go/build/build.go.html#5827760">data</a></span><br>
<span class="lineno"></span><span class="op" id="5828254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5828257">//&nbsp;parseWord&nbsp;skips&nbsp;any&nbsp;leading&nbsp;spaces&nbsp;or&nbsp;comments&nbsp;in&nbsp;data</span><br>
<span class="lineno">880</span><span class="comment" id="5828315">//&nbsp;and&nbsp;then&nbsp;parses&nbsp;the&nbsp;beginning&nbsp;of&nbsp;data&nbsp;as&nbsp;an&nbsp;identifier&nbsp;or&nbsp;keyword,</span><br>
<span class="lineno"></span><span class="comment" id="5828385">//&nbsp;returning&nbsp;that&nbsp;word&nbsp;and&nbsp;what&nbsp;remains&nbsp;after&nbsp;the&nbsp;word.</span><br>
<span class="lineno"></span><span class="keyword" id="5828441">func</span>&nbsp;<span class="ident" id="5828446">parseWord</span><span class="op" id="5828455">(</span><span class="ident" id="5828456">data</span>&nbsp;<span class="op" id="5828461">[</span><span class="op" id="5828462">]</span><span class="builtintype" id="5828463">byte</span><span class="op" id="5828467">)</span>&nbsp;<span class="op" id="5828469">(</span><span class="ident" id="5828470">word</span><span class="op" id="5828474">,</span>&nbsp;<span class="ident" id="5828476">rest</span>&nbsp;<span class="op" id="5828481">[</span><span class="op" id="5828482">]</span><span class="builtintype" id="5828483">byte</span><span class="op" id="5828487">)</span>&nbsp;<span class="op" id="5828489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5828492"><a href="/go/build/build.go.html#5828456">data</a></span>&nbsp;<span class="op" id="5828497">=</span>&nbsp;<span class="ident" id="5828499"><a href="/go/build/build.go.html#5827741">skipSpaceOrComment</a></span><span class="op" id="5828517">(</span><span class="ident" id="5828518"><a href="/go/build/build.go.html#5828456">data</a></span><span class="op" id="5828522">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5828526">//&nbsp;Parse&nbsp;past&nbsp;leading&nbsp;word&nbsp;characters.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5828566"><a href="/go/build/build.go.html#5828476">rest</a></span>&nbsp;<span class="op" id="5828571">=</span>&nbsp;<span class="ident" id="5828573"><a href="/go/build/build.go.html#5828456">data</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828579">for</span>&nbsp;<span class="op" id="5828583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5828587">r</span><span class="op" id="5828588">,</span>&nbsp;<span class="ident" id="5828590">size</span>&nbsp;<span class="op" id="5828595">:=</span>&nbsp;<span class="ident" id="5828598"><a href="/go/build/build.go.html#5802795">utf8</a></span><span class="op" id="5828602">.</span><span class="ident" id="5828603">DecodeRune</span><span class="op" id="5828613">(</span><span class="ident" id="5828614"><a href="/go/build/build.go.html#5828476">rest</a></span><span class="op" id="5828618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828622">if</span>&nbsp;<span class="ident" id="5828625"><a href="/go/build/build.go.html#5802784">unicode</a></span><span class="op" id="5828632">.</span><span class="ident" id="5828633">IsLetter</span><span class="op" id="5828641">(</span><span class="ident" id="5828642"><a href="/go/build/build.go.html#5828587">r</a></span><span class="op" id="5828643">)</span>&nbsp;<span class="op" id="5828645">||</span>&nbsp;<span class="string" id="5828648">&#39;0&#39;</span>&nbsp;<span class="op" id="5828652">&lt;=</span>&nbsp;<span class="ident" id="5828655"><a href="/go/build/build.go.html#5828587">r</a></span>&nbsp;<span class="op" id="5828657">&amp;&amp;</span>&nbsp;<span class="ident" id="5828660"><a href="/go/build/build.go.html#5828587">r</a></span>&nbsp;<span class="op" id="5828662">&lt;=</span>&nbsp;<span class="string" id="5828665">&#39;9&#39;</span>&nbsp;<span class="op" id="5828669">||</span>&nbsp;<span class="ident" id="5828672"><a href="/go/build/build.go.html#5828587">r</a></span>&nbsp;<span class="op" id="5828674">==</span>&nbsp;<span class="string" id="5828677">&#39;_&#39;</span>&nbsp;<span class="op" id="5828681">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5828686"><a href="/go/build/build.go.html#5828476">rest</a></span>&nbsp;<span class="op" id="5828691">=</span>&nbsp;<span class="ident" id="5828693"><a href="/go/build/build.go.html#5828476">rest</a></span><span class="op" id="5828697">[</span><span class="ident" id="5828698"><a href="/go/build/build.go.html#5828590">size</a></span><span class="op" id="5828702">:</span><span class="op" id="5828703">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828708">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5828719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828723">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5828730">}</span><br>
<span class="lineno">895</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5828734"><a href="/go/build/build.go.html#5828470">word</a></span>&nbsp;<span class="op" id="5828739">=</span>&nbsp;<span class="ident" id="5828741"><a href="/go/build/build.go.html#5828456">data</a></span><span class="op" id="5828745">[</span><span class="op" id="5828746">:</span><span class="builtinfunc" id="5828747">len</span><span class="op" id="5828750">(</span><span class="ident" id="5828751"><a href="/go/build/build.go.html#5828456">data</a></span><span class="op" id="5828755">)</span><span class="op" id="5828756">-</span><span class="builtinfunc" id="5828757">len</span><span class="op" id="5828760">(</span><span class="ident" id="5828761"><a href="/go/build/build.go.html#5828476">rest</a></span><span class="op" id="5828765">)</span><span class="op" id="5828766">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828769">if</span>&nbsp;<span class="builtinfunc" id="5828772">len</span><span class="op" id="5828775">(</span><span class="ident" id="5828776"><a href="/go/build/build.go.html#5828470">word</a></span><span class="op" id="5828780">)</span>&nbsp;<span class="op" id="5828782">==</span>&nbsp;<span class="num" id="5828785">0</span>&nbsp;<span class="op" id="5828787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828791">return</span>&nbsp;<span class="ident" id="5828798">nil</span><span class="op" id="5828801">,</span>&nbsp;<span class="ident" id="5828803">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5828808">}</span><br>
<span class="lineno">900</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5828812">return</span>&nbsp;<span class="ident" id="5828819"><a href="/go/build/build.go.html#5828470">word</a></span><span class="op" id="5828823">,</span>&nbsp;<span class="ident" id="5828825"><a href="/go/build/build.go.html#5828476">rest</a></span><br>
<span class="lineno"></span><span class="op" id="5828830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5828833">//&nbsp;MatchFile&nbsp;reports&nbsp;whether&nbsp;the&nbsp;file&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;given&nbsp;directory</span><br>
<span class="lineno">905</span><span class="comment" id="5828914">//&nbsp;matches&nbsp;the&nbsp;context&nbsp;and&nbsp;would&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;Package&nbsp;created&nbsp;by&nbsp;ImportDir</span><br>
<span class="lineno"></span><span class="comment" id="5828993">//&nbsp;of&nbsp;that&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="5829015">//</span><br>
<span class="lineno"></span><span class="comment" id="5829018">//&nbsp;MatchFile&nbsp;considers&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file&nbsp;and&nbsp;may&nbsp;use&nbsp;ctxt.OpenFile&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5829091">//&nbsp;read&nbsp;some&nbsp;or&nbsp;all&nbsp;of&nbsp;the&nbsp;file&#39;s&nbsp;content.</span><br>
<span class="lineno">910</span><span class="keyword" id="5829134">func</span>&nbsp;<span class="op" id="5829139">(</span><span class="ident" id="5829140">ctxt</span>&nbsp;<span class="op" id="5829145">*</span><span class="ident" id="5829146"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5829153">)</span>&nbsp;<span class="ident" id="5829155">MatchFile</span><span class="op" id="5829164">(</span><span class="ident" id="5829165">dir</span><span class="op" id="5829168">,</span>&nbsp;<span class="ident" id="5829170">name</span>&nbsp;<span class="builtintype" id="5829175">string</span><span class="op" id="5829181">)</span>&nbsp;<span class="op" id="5829183">(</span><span class="ident" id="5829184">match</span>&nbsp;<span class="builtintype" id="5829190">bool</span><span class="op" id="5829194">,</span>&nbsp;<span class="ident" id="5829196">err</span>&nbsp;<span class="builtintype" id="5829200">error</span><span class="op" id="5829205">)</span>&nbsp;<span class="op" id="5829207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5829210"><a href="/go/build/build.go.html#5829184">match</a></span><span class="op" id="5829215">,</span>&nbsp;<span class="ident" id="5829217">_</span><span class="op" id="5829218">,</span>&nbsp;<span class="ident" id="5829220">_</span><span class="op" id="5829221">,</span>&nbsp;<span class="ident" id="5829223"><a href="/go/build/build.go.html#5829196">err</a></span>&nbsp;<span class="op" id="5829227">=</span>&nbsp;<span class="ident" id="5829229"><a href="/go/build/build.go.html#5829140">ctxt</a></span><span class="op" id="5829233">.</span><span class="ident" id="5829234">matchFile</span><span class="op" id="5829243">(</span><span class="ident" id="5829244"><a href="/go/build/build.go.html#5829165">dir</a></span><span class="op" id="5829247">,</span>&nbsp;<span class="ident" id="5829249"><a href="/go/build/build.go.html#5829170">name</a></span><span class="op" id="5829253">,</span>&nbsp;<span class="ident" id="5829255">false</span><span class="op" id="5829260">,</span>&nbsp;<span class="ident" id="5829262">nil</span><span class="op" id="5829265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5829268">return</span><br>
<span class="lineno"></span><span class="op" id="5829275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">915</span><span class="comment" id="5829278">//&nbsp;matchFile&nbsp;determines&nbsp;whether&nbsp;the&nbsp;file&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;in&nbsp;the&nbsp;given&nbsp;directory</span><br>
<span class="lineno"></span><span class="comment" id="5829362">//&nbsp;should&nbsp;be&nbsp;included&nbsp;in&nbsp;the&nbsp;package&nbsp;being&nbsp;constructed.</span><br>
<span class="lineno"></span><span class="comment" id="5829418">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;data&nbsp;read&nbsp;from&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5829461">//&nbsp;If&nbsp;returnImports&nbsp;is&nbsp;true&nbsp;and&nbsp;name&nbsp;denotes&nbsp;a&nbsp;Go&nbsp;program,&nbsp;matchFile&nbsp;reads</span><br>
<span class="lineno"></span><span class="comment" id="5829536">//&nbsp;until&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;imports&nbsp;(and&nbsp;returns&nbsp;that&nbsp;data)&nbsp;even&nbsp;though&nbsp;it&nbsp;only</span><br>
<span class="lineno">920</span><span class="comment" id="5829612">//&nbsp;considers&nbsp;text&nbsp;until&nbsp;the&nbsp;first&nbsp;non-comment.</span><br>
<span class="lineno"></span><span class="comment" id="5829659">//&nbsp;If&nbsp;allTags&nbsp;is&nbsp;non-nil,&nbsp;matchFile&nbsp;records&nbsp;any&nbsp;encountered&nbsp;build&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="5829729">//&nbsp;by&nbsp;setting&nbsp;allTags[tag]&nbsp;=&nbsp;true.</span><br>
<span class="lineno"></span><span class="keyword" id="5829764">func</span>&nbsp;<span class="op" id="5829769">(</span><span class="ident" id="5829770">ctxt</span>&nbsp;<span class="op" id="5829775">*</span><span class="ident" id="5829776"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5829783">)</span>&nbsp;<span class="ident" id="5829785">matchFile</span><span class="op" id="5829794">(</span><span class="ident" id="5829795">dir</span><span class="op" id="5829798">,</span>&nbsp;<span class="ident" id="5829800">name</span>&nbsp;<span class="builtintype" id="5829805">string</span><span class="op" id="5829811">,</span>&nbsp;<span class="ident" id="5829813">returnImports</span>&nbsp;<span class="builtintype" id="5829827">bool</span><span class="op" id="5829831">,</span>&nbsp;<span class="ident" id="5829833">allTags</span>&nbsp;<span class="keyword" id="5829841">map</span><span class="op" id="5829844">[</span><span class="builtintype" id="5829845">string</span><span class="op" id="5829851">]</span><span class="builtintype" id="5829852">bool</span><span class="op" id="5829856">)</span>&nbsp;<span class="op" id="5829858">(</span><span class="ident" id="5829859">match</span>&nbsp;<span class="builtintype" id="5829865">bool</span><span class="op" id="5829869">,</span>&nbsp;<span class="ident" id="5829871">data</span>&nbsp;<span class="op" id="5829876">[</span><span class="op" id="5829877">]</span><span class="builtintype" id="5829878">byte</span><span class="op" id="5829882">,</span>&nbsp;<span class="ident" id="5829884">filename</span>&nbsp;<span class="builtintype" id="5829893">string</span><span class="op" id="5829899">,</span>&nbsp;<span class="ident" id="5829901">err</span>&nbsp;<span class="builtintype" id="5829905">error</span><span class="op" id="5829910">)</span>&nbsp;<span class="op" id="5829912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5829915">if</span>&nbsp;<span class="ident" id="5829918"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5829925">.</span><span class="ident" id="5829926">HasPrefix</span><span class="op" id="5829935">(</span><span class="ident" id="5829936"><a href="/go/build/build.go.html#5829800">name</a></span><span class="op" id="5829940">,</span>&nbsp;<span class="string" id="5829942">&#34;_&#34;</span><span class="op" id="5829945">)</span>&nbsp;<span class="op" id="5829947">||</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5829952"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5829959">.</span><span class="ident" id="5829960">HasPrefix</span><span class="op" id="5829969">(</span><span class="ident" id="5829970"><a href="/go/build/build.go.html#5829800">name</a></span><span class="op" id="5829974">,</span>&nbsp;<span class="string" id="5829976">&#34;.&#34;</span><span class="op" id="5829979">)</span>&nbsp;<span class="op" id="5829981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5829985">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5829993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5829997">i</span>&nbsp;<span class="op" id="5829999">:=</span>&nbsp;<span class="ident" id="5830002"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5830009">.</span><span class="ident" id="5830010">LastIndex</span><span class="op" id="5830019">(</span><span class="ident" id="5830020"><a href="/go/build/build.go.html#5829800">name</a></span><span class="op" id="5830024">,</span>&nbsp;<span class="string" id="5830026">&#34;.&#34;</span><span class="op" id="5830029">)</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830032">if</span>&nbsp;<span class="ident" id="5830035"><a href="/go/build/build.go.html#5829997">i</a></span>&nbsp;<span class="op" id="5830037">&lt;</span>&nbsp;<span class="num" id="5830039">0</span>&nbsp;<span class="op" id="5830041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830045"><a href="/go/build/build.go.html#5829997">i</a></span>&nbsp;<span class="op" id="5830047">=</span>&nbsp;<span class="builtinfunc" id="5830049">len</span><span class="op" id="5830052">(</span><span class="ident" id="5830053"><a href="/go/build/build.go.html#5829800">name</a></span><span class="op" id="5830057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5830060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830063">ext</span>&nbsp;<span class="op" id="5830067">:=</span>&nbsp;<span class="ident" id="5830070"><a href="/go/build/build.go.html#5829800">name</a></span><span class="op" id="5830074">[</span><span class="ident" id="5830075"><a href="/go/build/build.go.html#5829997">i</a></span><span class="op" id="5830076">:</span><span class="op" id="5830077">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830081">if</span>&nbsp;<span class="op" id="5830084">!</span><span class="ident" id="5830085"><a href="/go/build/build.go.html#5829770">ctxt</a></span><span class="op" id="5830089">.</span><span class="ident" id="5830090">goodOSArchFile</span><span class="op" id="5830104">(</span><span class="ident" id="5830105"><a href="/go/build/build.go.html#5829800">name</a></span><span class="op" id="5830109">,</span>&nbsp;<span class="ident" id="5830111"><a href="/go/build/build.go.html#5829833">allTags</a></span><span class="op" id="5830118">)</span>&nbsp;<span class="op" id="5830120">&amp;&amp;</span>&nbsp;<span class="op" id="5830123">!</span><span class="ident" id="5830124"><a href="/go/build/build.go.html#5829770">ctxt</a></span><span class="op" id="5830128">.</span><span class="ident" id="5830129">UseAllFiles</span>&nbsp;<span class="op" id="5830141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830145">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5830153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830157">switch</span>&nbsp;<span class="ident" id="5830164"><a href="/go/build/build.go.html#5830063">ext</a></span>&nbsp;<span class="op" id="5830168">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830171">case</span>&nbsp;<span class="string" id="5830176">&#34;.go&#34;</span><span class="op" id="5830181">,</span>&nbsp;<span class="string" id="5830183">&#34;.c&#34;</span><span class="op" id="5830187">,</span>&nbsp;<span class="string" id="5830189">&#34;.cc&#34;</span><span class="op" id="5830194">,</span>&nbsp;<span class="string" id="5830196">&#34;.cxx&#34;</span><span class="op" id="5830202">,</span>&nbsp;<span class="string" id="5830204">&#34;.cpp&#34;</span><span class="op" id="5830210">,</span>&nbsp;<span class="string" id="5830212">&#34;.m&#34;</span><span class="op" id="5830216">,</span>&nbsp;<span class="string" id="5830218">&#34;.s&#34;</span><span class="op" id="5830222">,</span>&nbsp;<span class="string" id="5830224">&#34;.h&#34;</span><span class="op" id="5830228">,</span>&nbsp;<span class="string" id="5830230">&#34;.hh&#34;</span><span class="op" id="5830235">,</span>&nbsp;<span class="string" id="5830237">&#34;.hpp&#34;</span><span class="op" id="5830243">,</span>&nbsp;<span class="string" id="5830245">&#34;.hxx&#34;</span><span class="op" id="5830251">,</span>&nbsp;<span class="string" id="5830253">&#34;.S&#34;</span><span class="op" id="5830257">,</span>&nbsp;<span class="string" id="5830259">&#34;.swig&#34;</span><span class="op" id="5830266">,</span>&nbsp;<span class="string" id="5830268">&#34;.swigcxx&#34;</span><span class="op" id="5830278">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5830282">//&nbsp;tentatively&nbsp;okay&nbsp;-&nbsp;read&nbsp;to&nbsp;make&nbsp;sure</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830323">case</span>&nbsp;<span class="string" id="5830328">&#34;.syso&#34;</span><span class="op" id="5830335">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5830339">//&nbsp;binary,&nbsp;no&nbsp;reading</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830363"><a href="/go/build/build.go.html#5829859">match</a></span>&nbsp;<span class="op" id="5830369">=</span>&nbsp;<span class="ident" id="5830371">true</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830378">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830386">default</span><span class="op" id="5830393">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5830397">//&nbsp;skip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830407">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5830415">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830419"><a href="/go/build/build.go.html#5829884">filename</a></span>&nbsp;<span class="op" id="5830428">=</span>&nbsp;<span class="ident" id="5830430"><a href="/go/build/build.go.html#5829770">ctxt</a></span><span class="op" id="5830434">.</span><span class="ident" id="5830435">joinPath</span><span class="op" id="5830443">(</span><span class="ident" id="5830444"><a href="/go/build/build.go.html#5829795">dir</a></span><span class="op" id="5830447">,</span>&nbsp;<span class="ident" id="5830449"><a href="/go/build/build.go.html#5829800">name</a></span><span class="op" id="5830453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830456">f</span><span class="op" id="5830457">,</span>&nbsp;<span class="ident" id="5830459"><a href="/go/build/build.go.html#5829901">err</a></span>&nbsp;<span class="op" id="5830463">:=</span>&nbsp;<span class="ident" id="5830466"><a href="/go/build/build.go.html#5829770">ctxt</a></span><span class="op" id="5830470">.</span><span class="ident" id="5830471">openFile</span><span class="op" id="5830479">(</span><span class="ident" id="5830480"><a href="/go/build/build.go.html#5829884">filename</a></span><span class="op" id="5830488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830491">if</span>&nbsp;<span class="ident" id="5830494"><a href="/go/build/build.go.html#5829901">err</a></span>&nbsp;<span class="op" id="5830498">!=</span>&nbsp;<span class="ident" id="5830501">nil</span>&nbsp;<span class="op" id="5830505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830509">return</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5830517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830521">if</span>&nbsp;<span class="ident" id="5830524"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5830531">.</span><span class="ident" id="5830532">HasSuffix</span><span class="op" id="5830541">(</span><span class="ident" id="5830542"><a href="/go/build/build.go.html#5829884">filename</a></span><span class="op" id="5830550">,</span>&nbsp;<span class="string" id="5830552">&#34;.go&#34;</span><span class="op" id="5830557">)</span>&nbsp;<span class="op" id="5830559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830563"><a href="/go/build/build.go.html#5829871">data</a></span><span class="op" id="5830567">,</span>&nbsp;<span class="ident" id="5830569"><a href="/go/build/build.go.html#5829901">err</a></span>&nbsp;<span class="op" id="5830573">=</span>&nbsp;<span class="ident" id="5830575"><a href="/go/build/read.go.html#5851261">readImports</a></span><span class="op" id="5830586">(</span><span class="ident" id="5830587"><a href="/go/build/build.go.html#5830456">f</a></span><span class="op" id="5830588">,</span>&nbsp;<span class="ident" id="5830590">false</span><span class="op" id="5830595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5830598">}</span>&nbsp;<span class="keyword" id="5830600">else</span>&nbsp;<span class="op" id="5830605">{</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830609"><a href="/go/build/build.go.html#5829871">data</a></span><span class="op" id="5830613">,</span>&nbsp;<span class="ident" id="5830615"><a href="/go/build/build.go.html#5829901">err</a></span>&nbsp;<span class="op" id="5830619">=</span>&nbsp;<span class="ident" id="5830621"><a href="/go/build/read.go.html#5850848">readComments</a></span><span class="op" id="5830633">(</span><span class="ident" id="5830634"><a href="/go/build/build.go.html#5830456">f</a></span><span class="op" id="5830635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5830638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830641"><a href="/go/build/build.go.html#5830456">f</a></span><span class="op" id="5830642">.</span><span class="ident" id="5830643">Close</span><span class="op" id="5830648">(</span><span class="op" id="5830649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830652">if</span>&nbsp;<span class="ident" id="5830655"><a href="/go/build/build.go.html#5829901">err</a></span>&nbsp;<span class="op" id="5830659">!=</span>&nbsp;<span class="ident" id="5830662">nil</span>&nbsp;<span class="op" id="5830666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830670"><a href="/go/build/build.go.html#5829901">err</a></span>&nbsp;<span class="op" id="5830674">=</span>&nbsp;<span class="ident" id="5830676"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5830679">.</span><span class="ident" id="5830680">Errorf</span><span class="op" id="5830686">(</span><span class="string" id="5830687">&#34;read&nbsp;%s:&nbsp;%v&#34;</span><span class="op" id="5830700">,</span>&nbsp;<span class="ident" id="5830702"><a href="/go/build/build.go.html#5829884">filename</a></span><span class="op" id="5830710">,</span>&nbsp;<span class="ident" id="5830712"><a href="/go/build/build.go.html#5829901">err</a></span><span class="op" id="5830715">)</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830719">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5830727">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5830731">//&nbsp;Look&nbsp;for&nbsp;+build&nbsp;comments&nbsp;to&nbsp;accept&nbsp;or&nbsp;reject&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830790">if</span>&nbsp;<span class="op" id="5830793">!</span><span class="ident" id="5830794"><a href="/go/build/build.go.html#5829770">ctxt</a></span><span class="op" id="5830798">.</span><span class="ident" id="5830799">shouldBuild</span><span class="op" id="5830810">(</span><span class="ident" id="5830811"><a href="/go/build/build.go.html#5829871">data</a></span><span class="op" id="5830815">,</span>&nbsp;<span class="ident" id="5830817"><a href="/go/build/build.go.html#5829833">allTags</a></span><span class="op" id="5830824">)</span>&nbsp;<span class="op" id="5830826">&amp;&amp;</span>&nbsp;<span class="op" id="5830829">!</span><span class="ident" id="5830830"><a href="/go/build/build.go.html#5829770">ctxt</a></span><span class="op" id="5830834">.</span><span class="ident" id="5830835">UseAllFiles</span>&nbsp;<span class="op" id="5830847">{</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830851">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5830859">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830863"><a href="/go/build/build.go.html#5829859">match</a></span>&nbsp;<span class="op" id="5830869">=</span>&nbsp;<span class="ident" id="5830871">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5830877">return</span><br>
<span class="lineno">975</span><span class="op" id="5830884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5830887">func</span>&nbsp;<span class="ident" id="5830892">cleanImports</span><span class="op" id="5830904">(</span><span class="ident" id="5830905">m</span>&nbsp;<span class="keyword" id="5830907">map</span><span class="op" id="5830910">[</span><span class="builtintype" id="5830911">string</span><span class="op" id="5830917">]</span><span class="op" id="5830918">[</span><span class="op" id="5830919">]</span><span class="ident" id="5830920"><a href="/go/build/build.go.html#5802666">token</a></span><span class="op" id="5830925">.</span><span class="ident" id="5830926">Position</span><span class="op" id="5830934">)</span>&nbsp;<span class="op" id="5830936">(</span><span class="op" id="5830937">[</span><span class="op" id="5830938">]</span><span class="builtintype" id="5830939">string</span><span class="op" id="5830945">,</span>&nbsp;<span class="keyword" id="5830947">map</span><span class="op" id="5830950">[</span><span class="builtintype" id="5830951">string</span><span class="op" id="5830957">]</span><span class="op" id="5830958">[</span><span class="op" id="5830959">]</span><span class="ident" id="5830960"><a href="/go/build/build.go.html#5802666">token</a></span><span class="op" id="5830965">.</span><span class="ident" id="5830966">Position</span><span class="op" id="5830974">)</span>&nbsp;<span class="op" id="5830976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5830979">all</span>&nbsp;<span class="op" id="5830983">:=</span>&nbsp;<span class="builtinfunc" id="5830986">make</span><span class="op" id="5830990">(</span><span class="op" id="5830991">[</span><span class="op" id="5830992">]</span><span class="builtintype" id="5830993">string</span><span class="op" id="5830999">,</span>&nbsp;<span class="num" id="5831001">0</span><span class="op" id="5831002">,</span>&nbsp;<span class="builtinfunc" id="5831004">len</span><span class="op" id="5831007">(</span><span class="ident" id="5831008"><a href="/go/build/build.go.html#5830905">m</a></span><span class="op" id="5831009">)</span><span class="op" id="5831010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5831013">for</span>&nbsp;<span class="ident" id="5831017">path</span>&nbsp;<span class="op" id="5831022">:=</span>&nbsp;<span class="keyword" id="5831025">range</span>&nbsp;<span class="ident" id="5831031"><a href="/go/build/build.go.html#5830905">m</a></span>&nbsp;<span class="op" id="5831033">{</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5831037"><a href="/go/build/build.go.html#5830979">all</a></span>&nbsp;<span class="op" id="5831041">=</span>&nbsp;<span class="builtinfunc" id="5831043">append</span><span class="op" id="5831049">(</span><span class="ident" id="5831050"><a href="/go/build/build.go.html#5830979">all</a></span><span class="op" id="5831053">,</span>&nbsp;<span class="ident" id="5831055"><a href="/go/build/build.go.html#5831017">path</a></span><span class="op" id="5831059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5831062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5831065"><a href="/go/build/build.go.html#5802754">sort</a></span><span class="op" id="5831069">.</span><span class="ident" id="5831070">Strings</span><span class="op" id="5831077">(</span><span class="ident" id="5831078"><a href="/go/build/build.go.html#5830979">all</a></span><span class="op" id="5831081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5831084">return</span>&nbsp;<span class="ident" id="5831091"><a href="/go/build/build.go.html#5830979">all</a></span><span class="op" id="5831094">,</span>&nbsp;<span class="ident" id="5831096"><a href="/go/build/build.go.html#5830905">m</a></span><br>
<span class="lineno"></span><span class="op" id="5831098">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="comment" id="5831101">//&nbsp;Import&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;Default.Import.</span><br>
<span class="lineno"></span><span class="keyword" id="5831144">func</span>&nbsp;<span class="ident" id="5831149">Import</span><span class="op" id="5831155">(</span><span class="ident" id="5831156">path</span><span class="op" id="5831160">,</span>&nbsp;<span class="ident" id="5831162">srcDir</span>&nbsp;<span class="builtintype" id="5831169">string</span><span class="op" id="5831175">,</span>&nbsp;<span class="ident" id="5831177">mode</span>&nbsp;<span class="ident" id="5831182"><a href="/go/build/build.go.html#5812297">ImportMode</a></span><span class="op" id="5831192">)</span>&nbsp;<span class="op" id="5831194">(</span><span class="op" id="5831195">*</span><span class="ident" id="5831196"><a href="/go/build/build.go.html#5813000">Package</a></span><span class="op" id="5831203">,</span>&nbsp;<span class="builtintype" id="5831205">error</span><span class="op" id="5831210">)</span>&nbsp;<span class="op" id="5831212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5831215">return</span>&nbsp;<span class="ident" id="5831222"><a href="/go/build/build.go.html#5810409">Default</a></span><span class="op" id="5831229">.</span><span class="ident" id="5831230">Import</span><span class="op" id="5831236">(</span><span class="ident" id="5831237"><a href="/go/build/build.go.html#5831156">path</a></span><span class="op" id="5831241">,</span>&nbsp;<span class="ident" id="5831243"><a href="/go/build/build.go.html#5831162">srcDir</a></span><span class="op" id="5831249">,</span>&nbsp;<span class="ident" id="5831251"><a href="/go/build/build.go.html#5831177">mode</a></span><span class="op" id="5831255">)</span><br>
<span class="lineno"></span><span class="op" id="5831257">}</span><br>
<span class="lineno">990</span><br>
<span class="lineno"></span><span class="comment" id="5831260">//&nbsp;ImportDir&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;Default.ImportDir.</span><br>
<span class="lineno"></span><span class="keyword" id="5831309">func</span>&nbsp;<span class="ident" id="5831314">ImportDir</span><span class="op" id="5831323">(</span><span class="ident" id="5831324">dir</span>&nbsp;<span class="builtintype" id="5831328">string</span><span class="op" id="5831334">,</span>&nbsp;<span class="ident" id="5831336">mode</span>&nbsp;<span class="ident" id="5831341"><a href="/go/build/build.go.html#5812297">ImportMode</a></span><span class="op" id="5831351">)</span>&nbsp;<span class="op" id="5831353">(</span><span class="op" id="5831354">*</span><span class="ident" id="5831355"><a href="/go/build/build.go.html#5813000">Package</a></span><span class="op" id="5831362">,</span>&nbsp;<span class="builtintype" id="5831364">error</span><span class="op" id="5831369">)</span>&nbsp;<span class="op" id="5831371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5831374">return</span>&nbsp;<span class="ident" id="5831381"><a href="/go/build/build.go.html#5810409">Default</a></span><span class="op" id="5831388">.</span><span class="ident" id="5831389">ImportDir</span><span class="op" id="5831398">(</span><span class="ident" id="5831399"><a href="/go/build/build.go.html#5831324">dir</a></span><span class="op" id="5831402">,</span>&nbsp;<span class="ident" id="5831404"><a href="/go/build/build.go.html#5831336">mode</a></span><span class="op" id="5831408">)</span><br>
<span class="lineno"></span><span class="op" id="5831410">}</span><br>
<span class="lineno">995</span><br>
<span class="lineno"></span><span class="keyword" id="5831413">var</span>&nbsp;<span class="ident" id="5831417">slashslash</span>&nbsp;<span class="op" id="5831428">=</span>&nbsp;<span class="op" id="5831430">[</span><span class="op" id="5831431">]</span><span class="builtintype" id="5831432">byte</span><span class="op" id="5831436">(</span><span class="string" id="5831437">&#34;//&#34;</span><span class="op" id="5831441">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5831444">//&nbsp;shouldBuild&nbsp;reports&nbsp;whether&nbsp;it&nbsp;is&nbsp;okay&nbsp;to&nbsp;use&nbsp;this&nbsp;file,</span><br>
<span class="lineno"></span><span class="comment" id="5831504">//&nbsp;The&nbsp;rule&nbsp;is&nbsp;that&nbsp;in&nbsp;the&nbsp;file&#39;s&nbsp;leading&nbsp;run&nbsp;of&nbsp;//&nbsp;comments</span><br>
<span class="lineno">1000</span><span class="comment" id="5831565">//&nbsp;and&nbsp;blank&nbsp;lines,&nbsp;which&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span><span class="comment" id="5831624">//&nbsp;(to&nbsp;avoid&nbsp;including&nbsp;a&nbsp;Go&nbsp;package&nbsp;clause&nbsp;doc&nbsp;comment),</span><br>
<span class="lineno"></span><span class="comment" id="5831681">//&nbsp;lines&nbsp;beginning&nbsp;with&nbsp;&#39;//&nbsp;+build&#39;&nbsp;are&nbsp;taken&nbsp;as&nbsp;build&nbsp;directives.</span><br>
<span class="lineno"></span><span class="comment" id="5831748">//</span><br>
<span class="lineno"></span><span class="comment" id="5831751">//&nbsp;The&nbsp;file&nbsp;is&nbsp;accepted&nbsp;only&nbsp;if&nbsp;each&nbsp;such&nbsp;line&nbsp;lists&nbsp;something</span><br>
<span class="lineno">1005</span><span class="comment" id="5831814">//&nbsp;matching&nbsp;the&nbsp;file.&nbsp;&nbsp;For&nbsp;example:</span><br>
<span class="lineno"></span><span class="comment" id="5831850">//</span><br>
<span class="lineno"></span><span class="comment" id="5831853">//&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;+build&nbsp;windows&nbsp;linux</span><br>
<span class="lineno"></span><span class="comment" id="5831880">//</span><br>
<span class="lineno"></span><span class="comment" id="5831883">//&nbsp;marks&nbsp;the&nbsp;file&nbsp;as&nbsp;applicable&nbsp;only&nbsp;on&nbsp;Windows&nbsp;and&nbsp;Linux.</span><br>
<span class="lineno">1010</span><span class="comment" id="5831942">//</span><br>
<span class="lineno"></span><span class="keyword" id="5831945">func</span>&nbsp;<span class="op" id="5831950">(</span><span class="ident" id="5831951">ctxt</span>&nbsp;<span class="op" id="5831956">*</span><span class="ident" id="5831957"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5831964">)</span>&nbsp;<span class="ident" id="5831966">shouldBuild</span><span class="op" id="5831977">(</span><span class="ident" id="5831978">content</span>&nbsp;<span class="op" id="5831986">[</span><span class="op" id="5831987">]</span><span class="builtintype" id="5831988">byte</span><span class="op" id="5831992">,</span>&nbsp;<span class="ident" id="5831994">allTags</span>&nbsp;<span class="keyword" id="5832002">map</span><span class="op" id="5832005">[</span><span class="builtintype" id="5832006">string</span><span class="op" id="5832012">]</span><span class="builtintype" id="5832013">bool</span><span class="op" id="5832017">)</span>&nbsp;<span class="builtintype" id="5832019">bool</span>&nbsp;<span class="op" id="5832024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5832027">//&nbsp;Pass&nbsp;1.&nbsp;Identify&nbsp;leading&nbsp;run&nbsp;of&nbsp;//&nbsp;comments&nbsp;and&nbsp;blank&nbsp;lines,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5832092">//&nbsp;which&nbsp;must&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832136">end</span>&nbsp;<span class="op" id="5832140">:=</span>&nbsp;<span class="num" id="5832143">0</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832146">p</span>&nbsp;<span class="op" id="5832148">:=</span>&nbsp;<span class="ident" id="5832151"><a href="/go/build/build.go.html#5831978">content</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832160">for</span>&nbsp;<span class="builtinfunc" id="5832164">len</span><span class="op" id="5832167">(</span><span class="ident" id="5832168"><a href="/go/build/build.go.html#5832146">p</a></span><span class="op" id="5832169">)</span>&nbsp;<span class="op" id="5832171">&gt;</span>&nbsp;<span class="num" id="5832173">0</span>&nbsp;<span class="op" id="5832175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832179">line</span>&nbsp;<span class="op" id="5832184">:=</span>&nbsp;<span class="ident" id="5832187"><a href="/go/build/build.go.html#5832146">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832191">if</span>&nbsp;<span class="ident" id="5832194">i</span>&nbsp;<span class="op" id="5832196">:=</span>&nbsp;<span class="ident" id="5832199"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5832204">.</span><span class="ident" id="5832205">IndexByte</span><span class="op" id="5832214">(</span><span class="ident" id="5832215"><a href="/go/build/build.go.html#5832179">line</a></span><span class="op" id="5832219">,</span>&nbsp;<span class="string" id="5832221">&#39;\n&#39;</span><span class="op" id="5832225">)</span><span class="op" id="5832226">;</span>&nbsp;<span class="ident" id="5832228"><a href="/go/build/build.go.html#5832194">i</a></span>&nbsp;<span class="op" id="5832230">&gt;=</span>&nbsp;<span class="num" id="5832233">0</span>&nbsp;<span class="op" id="5832235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832240"><a href="/go/build/build.go.html#5832179">line</a></span><span class="op" id="5832244">,</span>&nbsp;<span class="ident" id="5832246"><a href="/go/build/build.go.html#5832146">p</a></span>&nbsp;<span class="op" id="5832248">=</span>&nbsp;<span class="ident" id="5832250"><a href="/go/build/build.go.html#5832179">line</a></span><span class="op" id="5832254">[</span><span class="op" id="5832255">:</span><span class="ident" id="5832256"><a href="/go/build/build.go.html#5832194">i</a></span><span class="op" id="5832257">]</span><span class="op" id="5832258">,</span>&nbsp;<span class="ident" id="5832260"><a href="/go/build/build.go.html#5832146">p</a></span><span class="op" id="5832261">[</span><span class="ident" id="5832262"><a href="/go/build/build.go.html#5832194">i</a></span><span class="op" id="5832263">+</span><span class="num" id="5832264">1</span><span class="op" id="5832265">:</span><span class="op" id="5832266">]</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5832270">}</span>&nbsp;<span class="keyword" id="5832272">else</span>&nbsp;<span class="op" id="5832277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832282"><a href="/go/build/build.go.html#5832146">p</a></span>&nbsp;<span class="op" id="5832284">=</span>&nbsp;<span class="ident" id="5832286"><a href="/go/build/build.go.html#5832146">p</a></span><span class="op" id="5832287">[</span><span class="builtinfunc" id="5832288">len</span><span class="op" id="5832291">(</span><span class="ident" id="5832292"><a href="/go/build/build.go.html#5832146">p</a></span><span class="op" id="5832293">)</span><span class="op" id="5832294">:</span><span class="op" id="5832295">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5832299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832303"><a href="/go/build/build.go.html#5832179">line</a></span>&nbsp;<span class="op" id="5832308">=</span>&nbsp;<span class="ident" id="5832310"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5832315">.</span><span class="ident" id="5832316">TrimSpace</span><span class="op" id="5832325">(</span><span class="ident" id="5832326"><a href="/go/build/build.go.html#5832179">line</a></span><span class="op" id="5832330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832334">if</span>&nbsp;<span class="builtinfunc" id="5832337">len</span><span class="op" id="5832340">(</span><span class="ident" id="5832341"><a href="/go/build/build.go.html#5832179">line</a></span><span class="op" id="5832345">)</span>&nbsp;<span class="op" id="5832347">==</span>&nbsp;<span class="num" id="5832350">0</span>&nbsp;<span class="op" id="5832352">{</span>&nbsp;<span class="comment" id="5832354">//&nbsp;Blank&nbsp;line</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832371"><a href="/go/build/build.go.html#5832136">end</a></span>&nbsp;<span class="op" id="5832375">=</span>&nbsp;<span class="builtinfunc" id="5832377">len</span><span class="op" id="5832380">(</span><span class="ident" id="5832381"><a href="/go/build/build.go.html#5831978">content</a></span><span class="op" id="5832388">)</span>&nbsp;<span class="op" id="5832390">-</span>&nbsp;<span class="builtinfunc" id="5832392">len</span><span class="op" id="5832395">(</span><span class="ident" id="5832396"><a href="/go/build/build.go.html#5832146">p</a></span><span class="op" id="5832397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832402">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5832413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832417">if</span>&nbsp;<span class="op" id="5832420">!</span><span class="ident" id="5832421"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5832426">.</span><span class="ident" id="5832427">HasPrefix</span><span class="op" id="5832436">(</span><span class="ident" id="5832437"><a href="/go/build/build.go.html#5832179">line</a></span><span class="op" id="5832441">,</span>&nbsp;<span class="ident" id="5832443"><a href="/go/build/build.go.html#5831417">slashslash</a></span><span class="op" id="5832453">)</span>&nbsp;<span class="op" id="5832455">{</span>&nbsp;<span class="comment" id="5832457">//&nbsp;Not&nbsp;comment&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832480">break</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5832488">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5832491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832494"><a href="/go/build/build.go.html#5831978">content</a></span>&nbsp;<span class="op" id="5832502">=</span>&nbsp;<span class="ident" id="5832504"><a href="/go/build/build.go.html#5831978">content</a></span><span class="op" id="5832511">[</span><span class="op" id="5832512">:</span><span class="ident" id="5832513"><a href="/go/build/build.go.html#5832136">end</a></span><span class="op" id="5832516">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5832520">//&nbsp;Pass&nbsp;2.&nbsp;&nbsp;Process&nbsp;each&nbsp;line&nbsp;in&nbsp;the&nbsp;run.</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832563"><a href="/go/build/build.go.html#5832146">p</a></span>&nbsp;<span class="op" id="5832565">=</span>&nbsp;<span class="ident" id="5832567"><a href="/go/build/build.go.html#5831978">content</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832576">allok</span>&nbsp;<span class="op" id="5832582">:=</span>&nbsp;<span class="ident" id="5832585">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832591">for</span>&nbsp;<span class="builtinfunc" id="5832595">len</span><span class="op" id="5832598">(</span><span class="ident" id="5832599"><a href="/go/build/build.go.html#5832146">p</a></span><span class="op" id="5832600">)</span>&nbsp;<span class="op" id="5832602">&gt;</span>&nbsp;<span class="num" id="5832604">0</span>&nbsp;<span class="op" id="5832606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832610">line</span>&nbsp;<span class="op" id="5832615">:=</span>&nbsp;<span class="ident" id="5832618"><a href="/go/build/build.go.html#5832146">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832622">if</span>&nbsp;<span class="ident" id="5832625">i</span>&nbsp;<span class="op" id="5832627">:=</span>&nbsp;<span class="ident" id="5832630"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5832635">.</span><span class="ident" id="5832636">IndexByte</span><span class="op" id="5832645">(</span><span class="ident" id="5832646"><a href="/go/build/build.go.html#5832610">line</a></span><span class="op" id="5832650">,</span>&nbsp;<span class="string" id="5832652">&#39;\n&#39;</span><span class="op" id="5832656">)</span><span class="op" id="5832657">;</span>&nbsp;<span class="ident" id="5832659"><a href="/go/build/build.go.html#5832625">i</a></span>&nbsp;<span class="op" id="5832661">&gt;=</span>&nbsp;<span class="num" id="5832664">0</span>&nbsp;<span class="op" id="5832666">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832671"><a href="/go/build/build.go.html#5832610">line</a></span><span class="op" id="5832675">,</span>&nbsp;<span class="ident" id="5832677"><a href="/go/build/build.go.html#5832146">p</a></span>&nbsp;<span class="op" id="5832679">=</span>&nbsp;<span class="ident" id="5832681"><a href="/go/build/build.go.html#5832610">line</a></span><span class="op" id="5832685">[</span><span class="op" id="5832686">:</span><span class="ident" id="5832687"><a href="/go/build/build.go.html#5832625">i</a></span><span class="op" id="5832688">]</span><span class="op" id="5832689">,</span>&nbsp;<span class="ident" id="5832691"><a href="/go/build/build.go.html#5832146">p</a></span><span class="op" id="5832692">[</span><span class="ident" id="5832693"><a href="/go/build/build.go.html#5832625">i</a></span><span class="op" id="5832694">+</span><span class="num" id="5832695">1</span><span class="op" id="5832696">:</span><span class="op" id="5832697">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5832701">}</span>&nbsp;<span class="keyword" id="5832703">else</span>&nbsp;<span class="op" id="5832708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832713"><a href="/go/build/build.go.html#5832146">p</a></span>&nbsp;<span class="op" id="5832715">=</span>&nbsp;<span class="ident" id="5832717"><a href="/go/build/build.go.html#5832146">p</a></span><span class="op" id="5832718">[</span><span class="builtinfunc" id="5832719">len</span><span class="op" id="5832722">(</span><span class="ident" id="5832723"><a href="/go/build/build.go.html#5832146">p</a></span><span class="op" id="5832724">)</span><span class="op" id="5832725">:</span><span class="op" id="5832726">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5832730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832734"><a href="/go/build/build.go.html#5832610">line</a></span>&nbsp;<span class="op" id="5832739">=</span>&nbsp;<span class="ident" id="5832741"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5832746">.</span><span class="ident" id="5832747">TrimSpace</span><span class="op" id="5832756">(</span><span class="ident" id="5832757"><a href="/go/build/build.go.html#5832610">line</a></span><span class="op" id="5832761">)</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832765">if</span>&nbsp;<span class="ident" id="5832768"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5832773">.</span><span class="ident" id="5832774">HasPrefix</span><span class="op" id="5832783">(</span><span class="ident" id="5832784"><a href="/go/build/build.go.html#5832610">line</a></span><span class="op" id="5832788">,</span>&nbsp;<span class="ident" id="5832790"><a href="/go/build/build.go.html#5831417">slashslash</a></span><span class="op" id="5832800">)</span>&nbsp;<span class="op" id="5832802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832807"><a href="/go/build/build.go.html#5832610">line</a></span>&nbsp;<span class="op" id="5832812">=</span>&nbsp;<span class="ident" id="5832814"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5832819">.</span><span class="ident" id="5832820">TrimSpace</span><span class="op" id="5832829">(</span><span class="ident" id="5832830"><a href="/go/build/build.go.html#5832610">line</a></span><span class="op" id="5832834">[</span><span class="builtinfunc" id="5832835">len</span><span class="op" id="5832838">(</span><span class="ident" id="5832839"><a href="/go/build/build.go.html#5831417">slashslash</a></span><span class="op" id="5832849">)</span><span class="op" id="5832850">:</span><span class="op" id="5832851">]</span><span class="op" id="5832852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832857">if</span>&nbsp;<span class="builtinfunc" id="5832860">len</span><span class="op" id="5832863">(</span><span class="ident" id="5832864"><a href="/go/build/build.go.html#5832610">line</a></span><span class="op" id="5832868">)</span>&nbsp;<span class="op" id="5832870">&gt;</span>&nbsp;<span class="num" id="5832872">0</span>&nbsp;<span class="op" id="5832874">&amp;&amp;</span>&nbsp;<span class="ident" id="5832877"><a href="/go/build/build.go.html#5832610">line</a></span><span class="op" id="5832881">[</span><span class="num" id="5832882">0</span><span class="op" id="5832883">]</span>&nbsp;<span class="op" id="5832885">==</span>&nbsp;<span class="string" id="5832888">&#39;+&#39;</span>&nbsp;<span class="op" id="5832892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5832898">//&nbsp;Looks&nbsp;like&nbsp;a&nbsp;comment&nbsp;+line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832933">f</span>&nbsp;<span class="op" id="5832935">:=</span>&nbsp;<span class="ident" id="5832938"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5832945">.</span><span class="ident" id="5832946">Fields</span><span class="op" id="5832952">(</span><span class="builtintype" id="5832953">string</span><span class="op" id="5832959">(</span><span class="ident" id="5832960"><a href="/go/build/build.go.html#5832610">line</a></span><span class="op" id="5832964">)</span><span class="op" id="5832965">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5832971">if</span>&nbsp;<span class="ident" id="5832974"><a href="/go/build/build.go.html#5832933">f</a></span><span class="op" id="5832975">[</span><span class="num" id="5832976">0</span><span class="op" id="5832977">]</span>&nbsp;<span class="op" id="5832979">==</span>&nbsp;<span class="string" id="5832982">&#34;+build&#34;</span>&nbsp;<span class="op" id="5832991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5832998">ok</span>&nbsp;<span class="op" id="5833001">:=</span>&nbsp;<span class="ident" id="5833004">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833015">for</span>&nbsp;<span class="ident" id="5833019">_</span><span class="op" id="5833020">,</span>&nbsp;<span class="ident" id="5833022">tok</span>&nbsp;<span class="op" id="5833026">:=</span>&nbsp;<span class="keyword" id="5833029">range</span>&nbsp;<span class="ident" id="5833035"><a href="/go/build/build.go.html#5832933">f</a></span><span class="op" id="5833036">[</span><span class="num" id="5833037">1</span><span class="op" id="5833038">:</span><span class="op" id="5833039">]</span>&nbsp;<span class="op" id="5833041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833049">if</span>&nbsp;<span class="ident" id="5833052"><a href="/go/build/build.go.html#5831951">ctxt</a></span><span class="op" id="5833056">.</span><span class="ident" id="5833057">match</span><span class="op" id="5833062">(</span><span class="ident" id="5833063"><a href="/go/build/build.go.html#5833022">tok</a></span><span class="op" id="5833066">,</span>&nbsp;<span class="ident" id="5833068"><a href="/go/build/build.go.html#5831994">allTags</a></span><span class="op" id="5833075">)</span>&nbsp;<span class="op" id="5833077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833086"><a href="/go/build/build.go.html#5832998">ok</a></span>&nbsp;<span class="op" id="5833089">=</span>&nbsp;<span class="ident" id="5833091">true</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833116">if</span>&nbsp;<span class="op" id="5833119">!</span><span class="ident" id="5833120"><a href="/go/build/build.go.html#5832998">ok</a></span>&nbsp;<span class="op" id="5833123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833131"><a href="/go/build/build.go.html#5832576">allok</a></span>&nbsp;<span class="op" id="5833137">=</span>&nbsp;<span class="ident" id="5833139">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833150">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833168">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833172">return</span>&nbsp;<span class="ident" id="5833179"><a href="/go/build/build.go.html#5832576">allok</a></span><br>
<span class="lineno"></span><span class="op" id="5833185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5833188">//&nbsp;saveCgo&nbsp;saves&nbsp;the&nbsp;information&nbsp;from&nbsp;the&nbsp;#cgo&nbsp;lines&nbsp;in&nbsp;the&nbsp;import&nbsp;&#34;C&#34;&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5833268">//&nbsp;These&nbsp;lines&nbsp;set&nbsp;CFLAGS,&nbsp;CPPFLAGS,&nbsp;CXXFLAGS&nbsp;and&nbsp;LDFLAGS&nbsp;and&nbsp;pkg-config&nbsp;directives</span><br>
<span class="lineno">1070</span><span class="comment" id="5833352">//&nbsp;that&nbsp;affect&nbsp;the&nbsp;way&nbsp;cgo&#39;s&nbsp;C&nbsp;code&nbsp;is&nbsp;built.</span><br>
<span class="lineno"></span><span class="comment" id="5833398">//</span><br>
<span class="lineno"></span><span class="comment" id="5833401">//&nbsp;TODO(rsc):&nbsp;This&nbsp;duplicates&nbsp;code&nbsp;in&nbsp;cgo.</span><br>
<span class="lineno"></span><span class="comment" id="5833444">//&nbsp;Once&nbsp;the&nbsp;dust&nbsp;settles,&nbsp;remove&nbsp;this&nbsp;code&nbsp;from&nbsp;cgo.</span><br>
<span class="lineno"></span><span class="keyword" id="5833497">func</span>&nbsp;<span class="op" id="5833502">(</span><span class="ident" id="5833503">ctxt</span>&nbsp;<span class="op" id="5833508">*</span><span class="ident" id="5833509"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5833516">)</span>&nbsp;<span class="ident" id="5833518">saveCgo</span><span class="op" id="5833525">(</span><span class="ident" id="5833526">filename</span>&nbsp;<span class="builtintype" id="5833535">string</span><span class="op" id="5833541">,</span>&nbsp;<span class="ident" id="5833543">di</span>&nbsp;<span class="op" id="5833546">*</span><span class="ident" id="5833547"><a href="/go/build/build.go.html#5813000">Package</a></span><span class="op" id="5833554">,</span>&nbsp;<span class="ident" id="5833556">cg</span>&nbsp;<span class="op" id="5833559">*</span><span class="ident" id="5833560"><a href="/go/build/build.go.html#5802633">ast</a></span><span class="op" id="5833563">.</span><span class="ident" id="5833564">CommentGroup</span><span class="op" id="5833576">)</span>&nbsp;<span class="builtintype" id="5833578">error</span>&nbsp;<span class="op" id="5833584">{</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833587">text</span>&nbsp;<span class="op" id="5833592">:=</span>&nbsp;<span class="ident" id="5833595"><a href="/go/build/build.go.html#5833556">cg</a></span><span class="op" id="5833597">.</span><span class="ident" id="5833598">Text</span><span class="op" id="5833602">(</span><span class="op" id="5833603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833606">for</span>&nbsp;<span class="ident" id="5833610">_</span><span class="op" id="5833611">,</span>&nbsp;<span class="ident" id="5833613">line</span>&nbsp;<span class="op" id="5833618">:=</span>&nbsp;<span class="keyword" id="5833621">range</span>&nbsp;<span class="ident" id="5833627"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5833634">.</span><span class="ident" id="5833635">Split</span><span class="op" id="5833640">(</span><span class="ident" id="5833641"><a href="/go/build/build.go.html#5833587">text</a></span><span class="op" id="5833645">,</span>&nbsp;<span class="string" id="5833647">&#34;\n&#34;</span><span class="op" id="5833651">)</span>&nbsp;<span class="op" id="5833653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833657">orig</span>&nbsp;<span class="op" id="5833662">:=</span>&nbsp;<span class="ident" id="5833665"><a href="/go/build/build.go.html#5833613">line</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5833673">//&nbsp;Line&nbsp;is</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5833686">//&nbsp;&nbsp;&nbsp;&nbsp#cgo&nbsp;[GOOS/GOARCH...]&nbsp;LDFLAGS:&nbsp;stuff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5833728">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833733"><a href="/go/build/build.go.html#5833613">line</a></span>&nbsp;<span class="op" id="5833738">=</span>&nbsp;<span class="ident" id="5833740"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5833747">.</span><span class="ident" id="5833748">TrimSpace</span><span class="op" id="5833757">(</span><span class="ident" id="5833758"><a href="/go/build/build.go.html#5833613">line</a></span><span class="op" id="5833762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833766">if</span>&nbsp;<span class="builtinfunc" id="5833769">len</span><span class="op" id="5833772">(</span><span class="ident" id="5833773"><a href="/go/build/build.go.html#5833613">line</a></span><span class="op" id="5833777">)</span>&nbsp;<span class="op" id="5833779">&lt;</span>&nbsp;<span class="num" id="5833781">5</span>&nbsp;<span class="op" id="5833783">||</span>&nbsp;<span class="ident" id="5833786"><a href="/go/build/build.go.html#5833613">line</a></span><span class="op" id="5833790">[</span><span class="op" id="5833791">:</span><span class="num" id="5833792">4</span><span class="op" id="5833793">]</span>&nbsp;<span class="op" id="5833795">!=</span>&nbsp;<span class="string" id="5833798">&#34;#cgo&#34;</span>&nbsp;<span class="op" id="5833805">||</span>&nbsp;<span class="op" id="5833808">(</span><span class="ident" id="5833809"><a href="/go/build/build.go.html#5833613">line</a></span><span class="op" id="5833813">[</span><span class="num" id="5833814">4</span><span class="op" id="5833815">]</span>&nbsp;<span class="op" id="5833817">!=</span>&nbsp;<span class="string" id="5833820">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5833824">&amp;&amp;</span>&nbsp;<span class="ident" id="5833827"><a href="/go/build/build.go.html#5833613">line</a></span><span class="op" id="5833831">[</span><span class="num" id="5833832">4</span><span class="op" id="5833833">]</span>&nbsp;<span class="op" id="5833835">!=</span>&nbsp;<span class="string" id="5833838">&#39;\t&#39;</span><span class="op" id="5833842">)</span>&nbsp;<span class="op" id="5833844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833849">continue</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5833860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5833865">//&nbsp;Split&nbsp;at&nbsp;colon.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833886"><a href="/go/build/build.go.html#5833613">line</a></span>&nbsp;<span class="op" id="5833891">=</span>&nbsp;<span class="ident" id="5833893"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5833900">.</span><span class="ident" id="5833901">TrimSpace</span><span class="op" id="5833910">(</span><span class="ident" id="5833911"><a href="/go/build/build.go.html#5833613">line</a></span><span class="op" id="5833915">[</span><span class="num" id="5833916">4</span><span class="op" id="5833917">:</span><span class="op" id="5833918">]</span><span class="op" id="5833919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833923">i</span>&nbsp;<span class="op" id="5833925">:=</span>&nbsp;<span class="ident" id="5833928"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5833935">.</span><span class="ident" id="5833936">Index</span><span class="op" id="5833941">(</span><span class="ident" id="5833942"><a href="/go/build/build.go.html#5833613">line</a></span><span class="op" id="5833946">,</span>&nbsp;<span class="string" id="5833948">&#34;:&#34;</span><span class="op" id="5833951">)</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833955">if</span>&nbsp;<span class="ident" id="5833958"><a href="/go/build/build.go.html#5833923">i</a></span>&nbsp;<span class="op" id="5833960">&lt;</span>&nbsp;<span class="num" id="5833962">0</span>&nbsp;<span class="op" id="5833964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833969">return</span>&nbsp;<span class="ident" id="5833976"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5833979">.</span><span class="ident" id="5833980">Errorf</span><span class="op" id="5833986">(</span><span class="string" id="5833987">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="5834014">,</span>&nbsp;<span class="ident" id="5834016"><a href="/go/build/build.go.html#5833526">filename</a></span><span class="op" id="5834024">,</span>&nbsp;<span class="ident" id="5834026"><a href="/go/build/build.go.html#5833657">orig</a></span><span class="op" id="5834030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834038">line</span><span class="op" id="5834042">,</span>&nbsp;<span class="ident" id="5834044">argstr</span>&nbsp;<span class="op" id="5834051">:=</span>&nbsp;<span class="ident" id="5834054"><a href="/go/build/build.go.html#5833613">line</a></span><span class="op" id="5834058">[</span><span class="op" id="5834059">:</span><span class="ident" id="5834060"><a href="/go/build/build.go.html#5833923">i</a></span><span class="op" id="5834061">]</span><span class="op" id="5834062">,</span>&nbsp;<span class="ident" id="5834064"><a href="/go/build/build.go.html#5833613">line</a></span><span class="op" id="5834068">[</span><span class="ident" id="5834069"><a href="/go/build/build.go.html#5833923">i</a></span><span class="op" id="5834070">+</span><span class="num" id="5834071">1</span><span class="op" id="5834072">:</span><span class="op" id="5834073">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5834078">//&nbsp;Parse&nbsp;GOOS/GOARCH&nbsp;stuff.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834108">f</span>&nbsp;<span class="op" id="5834110">:=</span>&nbsp;<span class="ident" id="5834113"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5834120">.</span><span class="ident" id="5834121">Fields</span><span class="op" id="5834127">(</span><span class="ident" id="5834128"><a href="/go/build/build.go.html#5834038">line</a></span><span class="op" id="5834132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834136">if</span>&nbsp;<span class="builtinfunc" id="5834139">len</span><span class="op" id="5834142">(</span><span class="ident" id="5834143"><a href="/go/build/build.go.html#5834108">f</a></span><span class="op" id="5834144">)</span>&nbsp;<span class="op" id="5834146">&lt;</span>&nbsp;<span class="num" id="5834148">1</span>&nbsp;<span class="op" id="5834150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834155">return</span>&nbsp;<span class="ident" id="5834162"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5834165">.</span><span class="ident" id="5834166">Errorf</span><span class="op" id="5834172">(</span><span class="string" id="5834173">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="5834200">,</span>&nbsp;<span class="ident" id="5834202"><a href="/go/build/build.go.html#5833526">filename</a></span><span class="op" id="5834210">,</span>&nbsp;<span class="ident" id="5834212"><a href="/go/build/build.go.html#5833657">orig</a></span><span class="op" id="5834216">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834220">}</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834225">cond</span><span class="op" id="5834229">,</span>&nbsp;<span class="ident" id="5834231">verb</span>&nbsp;<span class="op" id="5834236">:=</span>&nbsp;<span class="ident" id="5834239"><a href="/go/build/build.go.html#5834108">f</a></span><span class="op" id="5834240">[</span><span class="op" id="5834241">:</span><span class="builtinfunc" id="5834242">len</span><span class="op" id="5834245">(</span><span class="ident" id="5834246"><a href="/go/build/build.go.html#5834108">f</a></span><span class="op" id="5834247">)</span><span class="op" id="5834248">-</span><span class="num" id="5834249">1</span><span class="op" id="5834250">]</span><span class="op" id="5834251">,</span>&nbsp;<span class="ident" id="5834253"><a href="/go/build/build.go.html#5834108">f</a></span><span class="op" id="5834254">[</span><span class="builtinfunc" id="5834255">len</span><span class="op" id="5834258">(</span><span class="ident" id="5834259"><a href="/go/build/build.go.html#5834108">f</a></span><span class="op" id="5834260">)</span><span class="op" id="5834261">-</span><span class="num" id="5834262">1</span><span class="op" id="5834263">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834267">if</span>&nbsp;<span class="builtinfunc" id="5834270">len</span><span class="op" id="5834273">(</span><span class="ident" id="5834274"><a href="/go/build/build.go.html#5834225">cond</a></span><span class="op" id="5834278">)</span>&nbsp;<span class="op" id="5834280">&gt;</span>&nbsp;<span class="num" id="5834282">0</span>&nbsp;<span class="op" id="5834284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834289">ok</span>&nbsp;<span class="op" id="5834292">:=</span>&nbsp;<span class="ident" id="5834295">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834304">for</span>&nbsp;<span class="ident" id="5834308">_</span><span class="op" id="5834309">,</span>&nbsp;<span class="ident" id="5834311">c</span>&nbsp;<span class="op" id="5834313">:=</span>&nbsp;<span class="keyword" id="5834316">range</span>&nbsp;<span class="ident" id="5834322"><a href="/go/build/build.go.html#5834225">cond</a></span>&nbsp;<span class="op" id="5834327">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834333">if</span>&nbsp;<span class="ident" id="5834336"><a href="/go/build/build.go.html#5833503">ctxt</a></span><span class="op" id="5834340">.</span><span class="ident" id="5834341">match</span><span class="op" id="5834346">(</span><span class="ident" id="5834347"><a href="/go/build/build.go.html#5834311">c</a></span><span class="op" id="5834348">,</span>&nbsp;<span class="ident" id="5834350">nil</span><span class="op" id="5834353">)</span>&nbsp;<span class="op" id="5834355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834362"><a href="/go/build/build.go.html#5834289">ok</a></span>&nbsp;<span class="op" id="5834365">=</span>&nbsp;<span class="ident" id="5834367">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834377">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834392">}</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834397">if</span>&nbsp;<span class="op" id="5834400">!</span><span class="ident" id="5834401"><a href="/go/build/build.go.html#5834289">ok</a></span>&nbsp;<span class="op" id="5834404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834410">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834431">args</span><span class="op" id="5834435">,</span>&nbsp;<span class="ident" id="5834437">err</span>&nbsp;<span class="op" id="5834441">:=</span>&nbsp;<span class="ident" id="5834444"><a href="/go/build/build.go.html#5836394">splitQuoted</a></span><span class="op" id="5834455">(</span><span class="ident" id="5834456"><a href="/go/build/build.go.html#5834044">argstr</a></span><span class="op" id="5834462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834466">if</span>&nbsp;<span class="ident" id="5834469"><a href="/go/build/build.go.html#5834437">err</a></span>&nbsp;<span class="op" id="5834473">!=</span>&nbsp;<span class="ident" id="5834476">nil</span>&nbsp;<span class="op" id="5834480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834485">return</span>&nbsp;<span class="ident" id="5834492"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5834495">.</span><span class="ident" id="5834496">Errorf</span><span class="op" id="5834502">(</span><span class="string" id="5834503">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;line:&nbsp;%s&#34;</span><span class="op" id="5834530">,</span>&nbsp;<span class="ident" id="5834532"><a href="/go/build/build.go.html#5833526">filename</a></span><span class="op" id="5834540">,</span>&nbsp;<span class="ident" id="5834542"><a href="/go/build/build.go.html#5833657">orig</a></span><span class="op" id="5834546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834550">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834554">for</span>&nbsp;<span class="ident" id="5834558">_</span><span class="op" id="5834559">,</span>&nbsp;<span class="ident" id="5834561">arg</span>&nbsp;<span class="op" id="5834565">:=</span>&nbsp;<span class="keyword" id="5834568">range</span>&nbsp;<span class="ident" id="5834574"><a href="/go/build/build.go.html#5834431">args</a></span>&nbsp;<span class="op" id="5834579">{</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834584">if</span>&nbsp;<span class="op" id="5834587">!</span><span class="ident" id="5834588"><a href="/go/build/build.go.html#5835503">safeCgoName</a></span><span class="op" id="5834599">(</span><span class="ident" id="5834600"><a href="/go/build/build.go.html#5834561">arg</a></span><span class="op" id="5834603">)</span>&nbsp;<span class="op" id="5834605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834611">return</span>&nbsp;<span class="ident" id="5834618"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5834621">.</span><span class="ident" id="5834622">Errorf</span><span class="op" id="5834628">(</span><span class="string" id="5834629">&#34;%s:&nbsp;malformed&nbsp;#cgo&nbsp;argument:&nbsp;%s&#34;</span><span class="op" id="5834662">,</span>&nbsp;<span class="ident" id="5834664"><a href="/go/build/build.go.html#5833526">filename</a></span><span class="op" id="5834672">,</span>&nbsp;<span class="ident" id="5834674"><a href="/go/build/build.go.html#5834561">arg</a></span><span class="op" id="5834677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834691">switch</span>&nbsp;<span class="ident" id="5834698"><a href="/go/build/build.go.html#5834231">verb</a></span>&nbsp;<span class="op" id="5834703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834707">case</span>&nbsp;<span class="string" id="5834712">&#34;CFLAGS&#34;</span><span class="op" id="5834720">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834725"><a href="/go/build/build.go.html#5833543">di</a></span><span class="op" id="5834727">.</span><span class="ident" id="5834728">CgoCFLAGS</span>&nbsp;<span class="op" id="5834738">=</span>&nbsp;<span class="builtinfunc" id="5834740">append</span><span class="op" id="5834746">(</span><span class="ident" id="5834747"><a href="/go/build/build.go.html#5833543">di</a></span><span class="op" id="5834749">.</span><span class="ident" id="5834750">CgoCFLAGS</span><span class="op" id="5834759">,</span>&nbsp;<span class="ident" id="5834761"><a href="/go/build/build.go.html#5834431">args</a></span><span class="op" id="5834765">...</span><span class="op" id="5834768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834772">case</span>&nbsp;<span class="string" id="5834777">&#34;CPPFLAGS&#34;</span><span class="op" id="5834787">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834792"><a href="/go/build/build.go.html#5833543">di</a></span><span class="op" id="5834794">.</span><span class="ident" id="5834795">CgoCPPFLAGS</span>&nbsp;<span class="op" id="5834807">=</span>&nbsp;<span class="builtinfunc" id="5834809">append</span><span class="op" id="5834815">(</span><span class="ident" id="5834816"><a href="/go/build/build.go.html#5833543">di</a></span><span class="op" id="5834818">.</span><span class="ident" id="5834819">CgoCPPFLAGS</span><span class="op" id="5834830">,</span>&nbsp;<span class="ident" id="5834832"><a href="/go/build/build.go.html#5834431">args</a></span><span class="op" id="5834836">...</span><span class="op" id="5834839">)</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834843">case</span>&nbsp;<span class="string" id="5834848">&#34;CXXFLAGS&#34;</span><span class="op" id="5834858">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834863"><a href="/go/build/build.go.html#5833543">di</a></span><span class="op" id="5834865">.</span><span class="ident" id="5834866">CgoCXXFLAGS</span>&nbsp;<span class="op" id="5834878">=</span>&nbsp;<span class="builtinfunc" id="5834880">append</span><span class="op" id="5834886">(</span><span class="ident" id="5834887"><a href="/go/build/build.go.html#5833543">di</a></span><span class="op" id="5834889">.</span><span class="ident" id="5834890">CgoCXXFLAGS</span><span class="op" id="5834901">,</span>&nbsp;<span class="ident" id="5834903"><a href="/go/build/build.go.html#5834431">args</a></span><span class="op" id="5834907">...</span><span class="op" id="5834910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834914">case</span>&nbsp;<span class="string" id="5834919">&#34;LDFLAGS&#34;</span><span class="op" id="5834928">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834933"><a href="/go/build/build.go.html#5833543">di</a></span><span class="op" id="5834935">.</span><span class="ident" id="5834936">CgoLDFLAGS</span>&nbsp;<span class="op" id="5834947">=</span>&nbsp;<span class="builtinfunc" id="5834949">append</span><span class="op" id="5834955">(</span><span class="ident" id="5834956"><a href="/go/build/build.go.html#5833543">di</a></span><span class="op" id="5834958">.</span><span class="ident" id="5834959">CgoLDFLAGS</span><span class="op" id="5834969">,</span>&nbsp;<span class="ident" id="5834971"><a href="/go/build/build.go.html#5834431">args</a></span><span class="op" id="5834975">...</span><span class="op" id="5834978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834982">case</span>&nbsp;<span class="string" id="5834987">&#34;pkg-config&#34;</span><span class="op" id="5834999">:</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5835004"><a href="/go/build/build.go.html#5833543">di</a></span><span class="op" id="5835006">.</span><span class="ident" id="5835007">CgoPkgConfig</span>&nbsp;<span class="op" id="5835020">=</span>&nbsp;<span class="builtinfunc" id="5835022">append</span><span class="op" id="5835028">(</span><span class="ident" id="5835029"><a href="/go/build/build.go.html#5833543">di</a></span><span class="op" id="5835031">.</span><span class="ident" id="5835032">CgoPkgConfig</span><span class="op" id="5835044">,</span>&nbsp;<span class="ident" id="5835046"><a href="/go/build/build.go.html#5834431">args</a></span><span class="op" id="5835050">...</span><span class="op" id="5835053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835057">default</span><span class="op" id="5835064">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835069">return</span>&nbsp;<span class="ident" id="5835076"><a href="/go/build/build.go.html#5802626">fmt</a></span><span class="op" id="5835079">.</span><span class="ident" id="5835080">Errorf</span><span class="op" id="5835086">(</span><span class="string" id="5835087">&#34;%s:&nbsp;invalid&nbsp;#cgo&nbsp;verb:&nbsp;%s&#34;</span><span class="op" id="5835114">,</span>&nbsp;<span class="ident" id="5835116"><a href="/go/build/build.go.html#5833526">filename</a></span><span class="op" id="5835124">,</span>&nbsp;<span class="ident" id="5835126"><a href="/go/build/build.go.html#5833657">orig</a></span><span class="op" id="5835130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5835134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5835137">}</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835140">return</span>&nbsp;<span class="ident" id="5835147">nil</span><br>
<span class="lineno"></span><span class="op" id="5835151">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5835154">//&nbsp;NOTE:&nbsp;$&nbsp;is&nbsp;not&nbsp;safe&nbsp;for&nbsp;the&nbsp;shell,&nbsp;but&nbsp;it&nbsp;is&nbsp;allowed&nbsp;here&nbsp;because&nbsp;of&nbsp;linker&nbsp;options&nbsp;like&nbsp;-Wl,$ORIGIN.</span><br>
<span class="lineno"></span><span class="comment" id="5835259">//&nbsp;We&nbsp;never&nbsp;pass&nbsp;these&nbsp;arguments&nbsp;to&nbsp;a&nbsp;shell&nbsp;(just&nbsp;to&nbsp;programs&nbsp;we&nbsp;construct&nbsp;argv&nbsp;for),&nbsp;so&nbsp;this&nbsp;should&nbsp;be&nbsp;okay.</span><br>
<span class="lineno">1145</span><span class="comment" id="5835369">//&nbsp;See&nbsp;golang.org/issue/6038.</span><br>
<span class="lineno"></span><span class="keyword" id="5835399">var</span>&nbsp;<span class="ident" id="5835403">safeBytes</span>&nbsp;<span class="op" id="5835413">=</span>&nbsp;<span class="op" id="5835415">[</span><span class="op" id="5835416">]</span><span class="builtintype" id="5835417">byte</span><span class="op" id="5835421">(</span><span class="string" id="5835422">&#34;+-.,/0123456789=ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz:$&#34;</span><span class="op" id="5835495">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5835498">func</span>&nbsp;<span class="ident" id="5835503">safeCgoName</span><span class="op" id="5835514">(</span><span class="ident" id="5835515">s</span>&nbsp;<span class="builtintype" id="5835517">string</span><span class="op" id="5835523">)</span>&nbsp;<span class="builtintype" id="5835525">bool</span>&nbsp;<span class="op" id="5835530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835533">if</span>&nbsp;<span class="ident" id="5835536"><a href="/go/build/build.go.html#5835515">s</a></span>&nbsp;<span class="op" id="5835538">==</span>&nbsp;<span class="string" id="5835541">&#34;&#34;</span>&nbsp;<span class="op" id="5835544">{</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835548">return</span>&nbsp;<span class="ident" id="5835555">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5835562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835565">for</span>&nbsp;<span class="ident" id="5835569">i</span>&nbsp;<span class="op" id="5835571">:=</span>&nbsp;<span class="num" id="5835574">0</span><span class="op" id="5835575">;</span>&nbsp;<span class="ident" id="5835577"><a href="/go/build/build.go.html#5835569">i</a></span>&nbsp;<span class="op" id="5835579">&lt;</span>&nbsp;<span class="builtinfunc" id="5835581">len</span><span class="op" id="5835584">(</span><span class="ident" id="5835585"><a href="/go/build/build.go.html#5835515">s</a></span><span class="op" id="5835586">)</span><span class="op" id="5835587">;</span>&nbsp;<span class="ident" id="5835589"><a href="/go/build/build.go.html#5835569">i</a></span><span class="op" id="5835590">++</span>&nbsp;<span class="op" id="5835593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835597">if</span>&nbsp;<span class="ident" id="5835600">c</span>&nbsp;<span class="op" id="5835602">:=</span>&nbsp;<span class="ident" id="5835605"><a href="/go/build/build.go.html#5835515">s</a></span><span class="op" id="5835606">[</span><span class="ident" id="5835607"><a href="/go/build/build.go.html#5835569">i</a></span><span class="op" id="5835608">]</span><span class="op" id="5835609">;</span>&nbsp;<span class="ident" id="5835611"><a href="/go/build/build.go.html#5835600">c</a></span>&nbsp;<span class="op" id="5835613">&lt;</span>&nbsp;<span class="num" id="5835615">0x80</span>&nbsp;<span class="op" id="5835620">&amp;&amp;</span>&nbsp;<span class="ident" id="5835623"><a href="/go/build/build.go.html#5802607">bytes</a></span><span class="op" id="5835628">.</span><span class="ident" id="5835629">IndexByte</span><span class="op" id="5835638">(</span><span class="ident" id="5835639"><a href="/go/build/build.go.html#5835403">safeBytes</a></span><span class="op" id="5835648">,</span>&nbsp;<span class="ident" id="5835650"><a href="/go/build/build.go.html#5835600">c</a></span><span class="op" id="5835651">)</span>&nbsp;<span class="op" id="5835653">&lt;</span>&nbsp;<span class="num" id="5835655">0</span>&nbsp;<span class="op" id="5835657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835662">return</span>&nbsp;<span class="ident" id="5835669">false</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5835677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5835680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835683">return</span>&nbsp;<span class="ident" id="5835690">true</span><br>
<span class="lineno"></span><span class="op" id="5835695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1160</span><span class="comment" id="5835698">//&nbsp;splitQuoted&nbsp;splits&nbsp;the&nbsp;string&nbsp;s&nbsp;around&nbsp;each&nbsp;instance&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;consecutive</span><br>
<span class="lineno"></span><span class="comment" id="5835781">//&nbsp;white&nbsp;space&nbsp;characters&nbsp;while&nbsp;taking&nbsp;into&nbsp;account&nbsp;quotes&nbsp;and&nbsp;escaping,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5835858">//&nbsp;returns&nbsp;an&nbsp;array&nbsp;of&nbsp;substrings&nbsp;of&nbsp;s&nbsp;or&nbsp;an&nbsp;empty&nbsp;list&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space.</span><br>
<span class="lineno"></span><span class="comment" id="5835946">//&nbsp;Single&nbsp;quotes&nbsp;and&nbsp;double&nbsp;quotes&nbsp;are&nbsp;recognized&nbsp;to&nbsp;prevent&nbsp;splitting&nbsp;within&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5836028">//&nbsp;quoted&nbsp;region,&nbsp;and&nbsp;are&nbsp;removed&nbsp;from&nbsp;the&nbsp;resulting&nbsp;substrings.&nbsp;If&nbsp;a&nbsp;quote&nbsp;in&nbsp;s</span><br>
<span class="lineno">1165</span><span class="comment" id="5836109">//&nbsp;isn&#39;t&nbsp;closed&nbsp;err&nbsp;will&nbsp;be&nbsp;set&nbsp;and&nbsp;r&nbsp;will&nbsp;have&nbsp;the&nbsp;unclosed&nbsp;argument&nbsp;as&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5836186">//&nbsp;last&nbsp;element.&nbsp;&nbsp;The&nbsp;backslash&nbsp;is&nbsp;used&nbsp;for&nbsp;escaping.</span><br>
<span class="lineno"></span><span class="comment" id="5836240">//</span><br>
<span class="lineno"></span><span class="comment" id="5836243">//&nbsp;For&nbsp;example,&nbsp;the&nbsp;following&nbsp;string:</span><br>
<span class="lineno"></span><span class="comment" id="5836281">//</span><br>
<span class="lineno">1170</span><span class="comment" id="5836284">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;b:&#34;c&nbsp;d&#34;&nbsp;&#39;e&#39;&#39;f&#39;&nbsp;&nbsp;&#34;g\&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5836315">//</span><br>
<span class="lineno"></span><span class="comment" id="5836318">//&nbsp;Would&nbsp;be&nbsp;parsed&nbsp;as:</span><br>
<span class="lineno"></span><span class="comment" id="5836341">//</span><br>
<span class="lineno"></span><span class="comment" id="5836344">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]string{&#34;a&#34;,&nbsp;&#34;b:c&nbsp;d&#34;,&nbsp;&#34;ef&#34;,&nbsp;`g&#34;`}</span><br>
<span class="lineno">1175</span><span class="comment" id="5836386">//</span><br>
<span class="lineno"></span><span class="keyword" id="5836389">func</span>&nbsp;<span class="ident" id="5836394">splitQuoted</span><span class="op" id="5836405">(</span><span class="ident" id="5836406">s</span>&nbsp;<span class="builtintype" id="5836408">string</span><span class="op" id="5836414">)</span>&nbsp;<span class="op" id="5836416">(</span><span class="ident" id="5836417">r</span>&nbsp;<span class="op" id="5836419">[</span><span class="op" id="5836420">]</span><span class="builtintype" id="5836421">string</span><span class="op" id="5836427">,</span>&nbsp;<span class="ident" id="5836429">err</span>&nbsp;<span class="builtintype" id="5836433">error</span><span class="op" id="5836438">)</span>&nbsp;<span class="op" id="5836440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836443">var</span>&nbsp;<span class="ident" id="5836447">args</span>&nbsp;<span class="op" id="5836452">[</span><span class="op" id="5836453">]</span><span class="builtintype" id="5836454">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836462">arg</span>&nbsp;<span class="op" id="5836466">:=</span>&nbsp;<span class="builtinfunc" id="5836469">make</span><span class="op" id="5836473">(</span><span class="op" id="5836474">[</span><span class="op" id="5836475">]</span><span class="builtintype" id="5836476">rune</span><span class="op" id="5836480">,</span>&nbsp;<span class="builtinfunc" id="5836482">len</span><span class="op" id="5836485">(</span><span class="ident" id="5836486"><a href="/go/build/build.go.html#5836406">s</a></span><span class="op" id="5836487">)</span><span class="op" id="5836488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836491">escaped</span>&nbsp;<span class="op" id="5836499">:=</span>&nbsp;<span class="ident" id="5836502">false</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836509">quoted</span>&nbsp;<span class="op" id="5836516">:=</span>&nbsp;<span class="ident" id="5836519">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836526">quote</span>&nbsp;<span class="op" id="5836532">:=</span>&nbsp;<span class="string" id="5836535">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836543">i</span>&nbsp;<span class="op" id="5836545">:=</span>&nbsp;<span class="num" id="5836548">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836551">for</span>&nbsp;<span class="ident" id="5836555">_</span><span class="op" id="5836556">,</span>&nbsp;<span class="builtintype" id="5836558">rune</span>&nbsp;<span class="op" id="5836563">:=</span>&nbsp;<span class="keyword" id="5836566">range</span>&nbsp;<span class="ident" id="5836572"><a href="/go/build/build.go.html#5836406">s</a></span>&nbsp;<span class="op" id="5836574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836578">switch</span>&nbsp;<span class="op" id="5836585">{</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836589">case</span>&nbsp;<span class="ident" id="5836594"><a href="/go/build/build.go.html#5836491">escaped</a></span><span class="op" id="5836601">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836606"><a href="/go/build/build.go.html#5836491">escaped</a></span>&nbsp;<span class="op" id="5836614">=</span>&nbsp;<span class="ident" id="5836616">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836624">case</span>&nbsp;<span class="builtintype" id="5836629"><a href="/go/build/build.go.html#5836558">rune</a></span>&nbsp;<span class="op" id="5836634">==</span>&nbsp;<span class="string" id="5836637">&#39;\\&#39;</span><span class="op" id="5836641">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836646"><a href="/go/build/build.go.html#5836491">escaped</a></span>&nbsp;<span class="op" id="5836654">=</span>&nbsp;<span class="ident" id="5836656">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836664">continue</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836675">case</span>&nbsp;<span class="ident" id="5836680"><a href="/go/build/build.go.html#5836526">quote</a></span>&nbsp;<span class="op" id="5836686">!=</span>&nbsp;<span class="string" id="5836689">&#39;\x00&#39;</span><span class="op" id="5836695">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836700">if</span>&nbsp;<span class="builtintype" id="5836703"><a href="/go/build/build.go.html#5836558">rune</a></span>&nbsp;<span class="op" id="5836708">==</span>&nbsp;<span class="ident" id="5836711"><a href="/go/build/build.go.html#5836526">quote</a></span>&nbsp;<span class="op" id="5836717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836723"><a href="/go/build/build.go.html#5836526">quote</a></span>&nbsp;<span class="op" id="5836729">=</span>&nbsp;<span class="string" id="5836731">&#39;\x00&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836742">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5836754">}</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836758">case</span>&nbsp;<span class="builtintype" id="5836763"><a href="/go/build/build.go.html#5836558">rune</a></span>&nbsp;<span class="op" id="5836768">==</span>&nbsp;<span class="string" id="5836771">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5836775">||</span>&nbsp;<span class="builtintype" id="5836778"><a href="/go/build/build.go.html#5836558">rune</a></span>&nbsp;<span class="op" id="5836783">==</span>&nbsp;<span class="string" id="5836786">&#39;\&#39;&#39;</span><span class="op" id="5836790">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836795"><a href="/go/build/build.go.html#5836509">quoted</a></span>&nbsp;<span class="op" id="5836802">=</span>&nbsp;<span class="ident" id="5836804">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836812"><a href="/go/build/build.go.html#5836526">quote</a></span>&nbsp;<span class="op" id="5836818">=</span>&nbsp;<span class="builtintype" id="5836820"><a href="/go/build/build.go.html#5836558">rune</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836828">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836839">case</span>&nbsp;<span class="ident" id="5836844"><a href="/go/build/build.go.html#5802784">unicode</a></span><span class="op" id="5836851">.</span><span class="ident" id="5836852">IsSpace</span><span class="op" id="5836859">(</span><span class="builtintype" id="5836860"><a href="/go/build/build.go.html#5836558">rune</a></span><span class="op" id="5836864">)</span><span class="op" id="5836865">:</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836870">if</span>&nbsp;<span class="ident" id="5836873"><a href="/go/build/build.go.html#5836509">quoted</a></span>&nbsp;<span class="op" id="5836880">||</span>&nbsp;<span class="ident" id="5836883"><a href="/go/build/build.go.html#5836543">i</a></span>&nbsp;<span class="op" id="5836885">&gt;</span>&nbsp;<span class="num" id="5836887">0</span>&nbsp;<span class="op" id="5836889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836895"><a href="/go/build/build.go.html#5836509">quoted</a></span>&nbsp;<span class="op" id="5836902">=</span>&nbsp;<span class="ident" id="5836904">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836914"><a href="/go/build/build.go.html#5836447">args</a></span>&nbsp;<span class="op" id="5836919">=</span>&nbsp;<span class="builtinfunc" id="5836921">append</span><span class="op" id="5836927">(</span><span class="ident" id="5836928"><a href="/go/build/build.go.html#5836447">args</a></span><span class="op" id="5836932">,</span>&nbsp;<span class="builtintype" id="5836934">string</span><span class="op" id="5836940">(</span><span class="ident" id="5836941"><a href="/go/build/build.go.html#5836462">arg</a></span><span class="op" id="5836944">[</span><span class="op" id="5836945">:</span><span class="ident" id="5836946"><a href="/go/build/build.go.html#5836543">i</a></span><span class="op" id="5836947">]</span><span class="op" id="5836948">)</span><span class="op" id="5836949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836955"><a href="/go/build/build.go.html#5836543">i</a></span>&nbsp;<span class="op" id="5836957">=</span>&nbsp;<span class="num" id="5836959">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5836964">}</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836969">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5836980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836984"><a href="/go/build/build.go.html#5836462">arg</a></span><span class="op" id="5836987">[</span><span class="ident" id="5836988"><a href="/go/build/build.go.html#5836543">i</a></span><span class="op" id="5836989">]</span>&nbsp;<span class="op" id="5836991">=</span>&nbsp;<span class="builtintype" id="5836993"><a href="/go/build/build.go.html#5836558">rune</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5837000"><a href="/go/build/build.go.html#5836543">i</a></span><span class="op" id="5837001">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837005">}</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837008">if</span>&nbsp;<span class="ident" id="5837011"><a href="/go/build/build.go.html#5836509">quoted</a></span>&nbsp;<span class="op" id="5837018">||</span>&nbsp;<span class="ident" id="5837021"><a href="/go/build/build.go.html#5836543">i</a></span>&nbsp;<span class="op" id="5837023">&gt;</span>&nbsp;<span class="num" id="5837025">0</span>&nbsp;<span class="op" id="5837027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5837031"><a href="/go/build/build.go.html#5836447">args</a></span>&nbsp;<span class="op" id="5837036">=</span>&nbsp;<span class="builtinfunc" id="5837038">append</span><span class="op" id="5837044">(</span><span class="ident" id="5837045"><a href="/go/build/build.go.html#5836447">args</a></span><span class="op" id="5837049">,</span>&nbsp;<span class="builtintype" id="5837051">string</span><span class="op" id="5837057">(</span><span class="ident" id="5837058"><a href="/go/build/build.go.html#5836462">arg</a></span><span class="op" id="5837061">[</span><span class="op" id="5837062">:</span><span class="ident" id="5837063"><a href="/go/build/build.go.html#5836543">i</a></span><span class="op" id="5837064">]</span><span class="op" id="5837065">)</span><span class="op" id="5837066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837072">if</span>&nbsp;<span class="ident" id="5837075"><a href="/go/build/build.go.html#5836526">quote</a></span>&nbsp;<span class="op" id="5837081">!=</span>&nbsp;<span class="num" id="5837084">0</span>&nbsp;<span class="op" id="5837086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5837090"><a href="/go/build/build.go.html#5836429">err</a></span>&nbsp;<span class="op" id="5837094">=</span>&nbsp;<span class="ident" id="5837096"><a href="/go/build/build.go.html#5802616">errors</a></span><span class="op" id="5837102">.</span><span class="ident" id="5837103">New</span><span class="op" id="5837106">(</span><span class="string" id="5837107">&#34;unclosed&nbsp;quote&#34;</span><span class="op" id="5837123">)</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837126">}</span>&nbsp;<span class="keyword" id="5837128">else</span>&nbsp;<span class="keyword" id="5837133">if</span>&nbsp;<span class="ident" id="5837136"><a href="/go/build/build.go.html#5836491">escaped</a></span>&nbsp;<span class="op" id="5837144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5837148"><a href="/go/build/build.go.html#5836429">err</a></span>&nbsp;<span class="op" id="5837152">=</span>&nbsp;<span class="ident" id="5837154"><a href="/go/build/build.go.html#5802616">errors</a></span><span class="op" id="5837160">.</span><span class="ident" id="5837161">New</span><span class="op" id="5837164">(</span><span class="string" id="5837165">&#34;unfinished&nbsp;escaping&#34;</span><span class="op" id="5837186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837192">return</span>&nbsp;<span class="ident" id="5837199"><a href="/go/build/build.go.html#5836447">args</a></span><span class="op" id="5837203">,</span>&nbsp;<span class="ident" id="5837205"><a href="/go/build/build.go.html#5836429">err</a></span><br>
<span class="lineno"></span><span class="op" id="5837209">}</span><br>
<span class="lineno">1220</span><br>
<span class="lineno"></span><span class="comment" id="5837212">//&nbsp;match&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;name&nbsp;is&nbsp;one&nbsp;of:</span><br>
<span class="lineno"></span><span class="comment" id="5837257">//</span><br>
<span class="lineno"></span><span class="comment" id="5837260">//&nbsp;&nbsp;&nbsp;&nbsp$GOOS</span><br>
<span class="lineno"></span><span class="comment" id="5837269">//&nbsp;&nbsp;&nbsp;&nbsp$GOARCH</span><br>
<span class="lineno">1225</span><span class="comment" id="5837280">//&nbsp;&nbsp;&nbsp;&nbspcgo&nbsp;(if&nbsp;cgo&nbsp;is&nbsp;enabled)</span><br>
<span class="lineno"></span><span class="comment" id="5837307">//&nbsp;&nbsp;&nbsp;&nbsp!cgo&nbsp;(if&nbsp;cgo&nbsp;is&nbsp;disabled)</span><br>
<span class="lineno"></span><span class="comment" id="5837336">//&nbsp;&nbsp;&nbsp;&nbspctxt.Compiler</span><br>
<span class="lineno"></span><span class="comment" id="5837353">//&nbsp;&nbsp;&nbsp;&nbsp!ctxt.Compiler</span><br>
<span class="lineno"></span><span class="comment" id="5837371">//&nbsp;&nbsp;&nbsp;&nbsptag&nbsp;(if&nbsp;tag&nbsp;is&nbsp;listed&nbsp;in&nbsp;ctxt.BuildTags&nbsp;or&nbsp;ctxt.ReleaseTags)</span><br>
<span class="lineno">1230</span><span class="comment" id="5837435">//&nbsp;&nbsp;&nbsp;&nbsp!tag&nbsp;(if&nbsp;tag&nbsp;is&nbsp;not&nbsp;listed&nbsp;in&nbsp;ctxt.BuildTags&nbsp;or&nbsp;ctxt.ReleaseTags)</span><br>
<span class="lineno"></span><span class="comment" id="5837504">//&nbsp;&nbsp;&nbsp;&nbspa&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;any&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5837546">//</span><br>
<span class="lineno"></span><span class="keyword" id="5837549">func</span>&nbsp;<span class="op" id="5837554">(</span><span class="ident" id="5837555">ctxt</span>&nbsp;<span class="op" id="5837560">*</span><span class="ident" id="5837561"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5837568">)</span>&nbsp;<span class="ident" id="5837570">match</span><span class="op" id="5837575">(</span><span class="ident" id="5837576">name</span>&nbsp;<span class="builtintype" id="5837581">string</span><span class="op" id="5837587">,</span>&nbsp;<span class="ident" id="5837589">allTags</span>&nbsp;<span class="keyword" id="5837597">map</span><span class="op" id="5837600">[</span><span class="builtintype" id="5837601">string</span><span class="op" id="5837607">]</span><span class="builtintype" id="5837608">bool</span><span class="op" id="5837612">)</span>&nbsp;<span class="builtintype" id="5837614">bool</span>&nbsp;<span class="op" id="5837619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837622">if</span>&nbsp;<span class="ident" id="5837625"><a href="/go/build/build.go.html#5837576">name</a></span>&nbsp;<span class="op" id="5837630">==</span>&nbsp;<span class="string" id="5837633">&#34;&#34;</span>&nbsp;<span class="op" id="5837636">{</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837640">if</span>&nbsp;<span class="ident" id="5837643"><a href="/go/build/build.go.html#5837589">allTags</a></span>&nbsp;<span class="op" id="5837651">!=</span>&nbsp;<span class="ident" id="5837654">nil</span>&nbsp;<span class="op" id="5837658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5837663"><a href="/go/build/build.go.html#5837589">allTags</a></span><span class="op" id="5837670">[</span><span class="ident" id="5837671"><a href="/go/build/build.go.html#5837576">name</a></span><span class="op" id="5837675">]</span>&nbsp;<span class="op" id="5837677">=</span>&nbsp;<span class="ident" id="5837679">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837690">return</span>&nbsp;<span class="ident" id="5837697">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837704">}</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837707">if</span>&nbsp;<span class="ident" id="5837710">i</span>&nbsp;<span class="op" id="5837712">:=</span>&nbsp;<span class="ident" id="5837715"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5837722">.</span><span class="ident" id="5837723">Index</span><span class="op" id="5837728">(</span><span class="ident" id="5837729"><a href="/go/build/build.go.html#5837576">name</a></span><span class="op" id="5837733">,</span>&nbsp;<span class="string" id="5837735">&#34;,&#34;</span><span class="op" id="5837738">)</span><span class="op" id="5837739">;</span>&nbsp;<span class="ident" id="5837741"><a href="/go/build/build.go.html#5837710">i</a></span>&nbsp;<span class="op" id="5837743">&gt;=</span>&nbsp;<span class="num" id="5837746">0</span>&nbsp;<span class="op" id="5837748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5837752">//&nbsp;comma-separated&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5837778">ok1</span>&nbsp;<span class="op" id="5837782">:=</span>&nbsp;<span class="ident" id="5837785"><a href="/go/build/build.go.html#5837555">ctxt</a></span><span class="op" id="5837789">.</span><span class="ident" id="5837790">match</span><span class="op" id="5837795">(</span><span class="ident" id="5837796"><a href="/go/build/build.go.html#5837576">name</a></span><span class="op" id="5837800">[</span><span class="op" id="5837801">:</span><span class="ident" id="5837802"><a href="/go/build/build.go.html#5837710">i</a></span><span class="op" id="5837803">]</span><span class="op" id="5837804">,</span>&nbsp;<span class="ident" id="5837806"><a href="/go/build/build.go.html#5837589">allTags</a></span><span class="op" id="5837813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5837817">ok2</span>&nbsp;<span class="op" id="5837821">:=</span>&nbsp;<span class="ident" id="5837824"><a href="/go/build/build.go.html#5837555">ctxt</a></span><span class="op" id="5837828">.</span><span class="ident" id="5837829">match</span><span class="op" id="5837834">(</span><span class="ident" id="5837835"><a href="/go/build/build.go.html#5837576">name</a></span><span class="op" id="5837839">[</span><span class="ident" id="5837840"><a href="/go/build/build.go.html#5837710">i</a></span><span class="op" id="5837841">+</span><span class="num" id="5837842">1</span><span class="op" id="5837843">:</span><span class="op" id="5837844">]</span><span class="op" id="5837845">,</span>&nbsp;<span class="ident" id="5837847"><a href="/go/build/build.go.html#5837589">allTags</a></span><span class="op" id="5837854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837858">return</span>&nbsp;<span class="ident" id="5837865"><a href="/go/build/build.go.html#5837778">ok1</a></span>&nbsp;<span class="op" id="5837869">&amp;&amp;</span>&nbsp;<span class="ident" id="5837872"><a href="/go/build/build.go.html#5837817">ok2</a></span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837880">if</span>&nbsp;<span class="ident" id="5837883"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5837890">.</span><span class="ident" id="5837891">HasPrefix</span><span class="op" id="5837900">(</span><span class="ident" id="5837901"><a href="/go/build/build.go.html#5837576">name</a></span><span class="op" id="5837905">,</span>&nbsp;<span class="string" id="5837907">&#34;!!&#34;</span><span class="op" id="5837911">)</span>&nbsp;<span class="op" id="5837913">{</span>&nbsp;<span class="comment" id="5837915">//&nbsp;bad&nbsp;syntax,&nbsp;reject&nbsp;always</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837946">return</span>&nbsp;<span class="ident" id="5837953">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837963">if</span>&nbsp;<span class="ident" id="5837966"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5837973">.</span><span class="ident" id="5837974">HasPrefix</span><span class="op" id="5837983">(</span><span class="ident" id="5837984"><a href="/go/build/build.go.html#5837576">name</a></span><span class="op" id="5837988">,</span>&nbsp;<span class="string" id="5837990">&#34;!&#34;</span><span class="op" id="5837993">)</span>&nbsp;<span class="op" id="5837995">{</span>&nbsp;<span class="comment" id="5837997">//&nbsp;negation</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838011">return</span>&nbsp;<span class="builtinfunc" id="5838018">len</span><span class="op" id="5838021">(</span><span class="ident" id="5838022"><a href="/go/build/build.go.html#5837576">name</a></span><span class="op" id="5838026">)</span>&nbsp;<span class="op" id="5838028">&gt;</span>&nbsp;<span class="num" id="5838030">1</span>&nbsp;<span class="op" id="5838032">&amp;&amp;</span>&nbsp;<span class="op" id="5838035">!</span><span class="ident" id="5838036"><a href="/go/build/build.go.html#5837555">ctxt</a></span><span class="op" id="5838040">.</span><span class="ident" id="5838041">match</span><span class="op" id="5838046">(</span><span class="ident" id="5838047"><a href="/go/build/build.go.html#5837576">name</a></span><span class="op" id="5838051">[</span><span class="num" id="5838052">1</span><span class="op" id="5838053">:</span><span class="op" id="5838054">]</span><span class="op" id="5838055">,</span>&nbsp;<span class="ident" id="5838057"><a href="/go/build/build.go.html#5837589">allTags</a></span><span class="op" id="5838064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838071">if</span>&nbsp;<span class="ident" id="5838074"><a href="/go/build/build.go.html#5837589">allTags</a></span>&nbsp;<span class="op" id="5838082">!=</span>&nbsp;<span class="ident" id="5838085">nil</span>&nbsp;<span class="op" id="5838089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5838093"><a href="/go/build/build.go.html#5837589">allTags</a></span><span class="op" id="5838100">[</span><span class="ident" id="5838101"><a href="/go/build/build.go.html#5837576">name</a></span><span class="op" id="5838105">]</span>&nbsp;<span class="op" id="5838107">=</span>&nbsp;<span class="ident" id="5838109">true</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5838119">//&nbsp;Tags&nbsp;must&nbsp;be&nbsp;letters,&nbsp;digits,&nbsp;underscores&nbsp;or&nbsp;dots.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5838174">//&nbsp;Unlike&nbsp;in&nbsp;Go&nbsp;identifiers,&nbsp;all&nbsp;digits&nbsp;are&nbsp;fine&nbsp;(e.g.,&nbsp;&#34;386&#34;).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838239">for</span>&nbsp;<span class="ident" id="5838243">_</span><span class="op" id="5838244">,</span>&nbsp;<span class="ident" id="5838246">c</span>&nbsp;<span class="op" id="5838248">:=</span>&nbsp;<span class="keyword" id="5838251">range</span>&nbsp;<span class="ident" id="5838257"><a href="/go/build/build.go.html#5837576">name</a></span>&nbsp;<span class="op" id="5838262">{</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838266">if</span>&nbsp;<span class="op" id="5838269">!</span><span class="ident" id="5838270"><a href="/go/build/build.go.html#5802784">unicode</a></span><span class="op" id="5838277">.</span><span class="ident" id="5838278">IsLetter</span><span class="op" id="5838286">(</span><span class="ident" id="5838287"><a href="/go/build/build.go.html#5838246">c</a></span><span class="op" id="5838288">)</span>&nbsp;<span class="op" id="5838290">&amp;&amp;</span>&nbsp;<span class="op" id="5838293">!</span><span class="ident" id="5838294"><a href="/go/build/build.go.html#5802784">unicode</a></span><span class="op" id="5838301">.</span><span class="ident" id="5838302">IsDigit</span><span class="op" id="5838309">(</span><span class="ident" id="5838310"><a href="/go/build/build.go.html#5838246">c</a></span><span class="op" id="5838311">)</span>&nbsp;<span class="op" id="5838313">&amp;&amp;</span>&nbsp;<span class="ident" id="5838316"><a href="/go/build/build.go.html#5838246">c</a></span>&nbsp;<span class="op" id="5838318">!=</span>&nbsp;<span class="string" id="5838321">&#39;_&#39;</span>&nbsp;<span class="op" id="5838325">&amp;&amp;</span>&nbsp;<span class="ident" id="5838328"><a href="/go/build/build.go.html#5838246">c</a></span>&nbsp;<span class="op" id="5838330">!=</span>&nbsp;<span class="string" id="5838333">&#39;.&#39;</span>&nbsp;<span class="op" id="5838337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838342">return</span>&nbsp;<span class="ident" id="5838349">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5838364">//&nbsp;special&nbsp;tags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838381">if</span>&nbsp;<span class="ident" id="5838384"><a href="/go/build/build.go.html#5837555">ctxt</a></span><span class="op" id="5838388">.</span><span class="ident" id="5838389">CgoEnabled</span>&nbsp;<span class="op" id="5838400">&amp;&amp;</span>&nbsp;<span class="ident" id="5838403"><a href="/go/build/build.go.html#5837576">name</a></span>&nbsp;<span class="op" id="5838408">==</span>&nbsp;<span class="string" id="5838411">&#34;cgo&#34;</span>&nbsp;<span class="op" id="5838417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838421">return</span>&nbsp;<span class="ident" id="5838428">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838437">if</span>&nbsp;<span class="ident" id="5838440"><a href="/go/build/build.go.html#5837576">name</a></span>&nbsp;<span class="op" id="5838445">==</span>&nbsp;<span class="ident" id="5838448"><a href="/go/build/build.go.html#5837555">ctxt</a></span><span class="op" id="5838452">.</span><span class="ident" id="5838453">GOOS</span>&nbsp;<span class="op" id="5838458">||</span>&nbsp;<span class="ident" id="5838461"><a href="/go/build/build.go.html#5837576">name</a></span>&nbsp;<span class="op" id="5838466">==</span>&nbsp;<span class="ident" id="5838469"><a href="/go/build/build.go.html#5837555">ctxt</a></span><span class="op" id="5838473">.</span><span class="ident" id="5838474">GOARCH</span>&nbsp;<span class="op" id="5838481">||</span>&nbsp;<span class="ident" id="5838484"><a href="/go/build/build.go.html#5837576">name</a></span>&nbsp;<span class="op" id="5838489">==</span>&nbsp;<span class="ident" id="5838492"><a href="/go/build/build.go.html#5837555">ctxt</a></span><span class="op" id="5838496">.</span><span class="ident" id="5838497">Compiler</span>&nbsp;<span class="op" id="5838506">{</span><br>
<span class="lineno">1270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838510">return</span>&nbsp;<span class="ident" id="5838517">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838526">if</span>&nbsp;<span class="ident" id="5838529"><a href="/go/build/build.go.html#5837555">ctxt</a></span><span class="op" id="5838533">.</span><span class="ident" id="5838534">GOOS</span>&nbsp;<span class="op" id="5838539">==</span>&nbsp;<span class="string" id="5838542">&#34;android&#34;</span>&nbsp;<span class="op" id="5838552">&amp;&amp;</span>&nbsp;<span class="ident" id="5838555"><a href="/go/build/build.go.html#5837576">name</a></span>&nbsp;<span class="op" id="5838560">==</span>&nbsp;<span class="string" id="5838563">&#34;linux&#34;</span>&nbsp;<span class="op" id="5838571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838575">return</span>&nbsp;<span class="ident" id="5838582">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838588">}</span><br>
<span class="lineno">1275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5838592">//&nbsp;other&nbsp;tags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838607">for</span>&nbsp;<span class="ident" id="5838611">_</span><span class="op" id="5838612">,</span>&nbsp;<span class="ident" id="5838614">tag</span>&nbsp;<span class="op" id="5838618">:=</span>&nbsp;<span class="keyword" id="5838621">range</span>&nbsp;<span class="ident" id="5838627"><a href="/go/build/build.go.html#5837555">ctxt</a></span><span class="op" id="5838631">.</span><span class="ident" id="5838632">BuildTags</span>&nbsp;<span class="op" id="5838642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838646">if</span>&nbsp;<span class="ident" id="5838649"><a href="/go/build/build.go.html#5838614">tag</a></span>&nbsp;<span class="op" id="5838653">==</span>&nbsp;<span class="ident" id="5838656"><a href="/go/build/build.go.html#5837576">name</a></span>&nbsp;<span class="op" id="5838661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838666">return</span>&nbsp;<span class="ident" id="5838673">true</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838683">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838686">for</span>&nbsp;<span class="ident" id="5838690">_</span><span class="op" id="5838691">,</span>&nbsp;<span class="ident" id="5838693">tag</span>&nbsp;<span class="op" id="5838697">:=</span>&nbsp;<span class="keyword" id="5838700">range</span>&nbsp;<span class="ident" id="5838706"><a href="/go/build/build.go.html#5837555">ctxt</a></span><span class="op" id="5838710">.</span><span class="ident" id="5838711">ReleaseTags</span>&nbsp;<span class="op" id="5838723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838727">if</span>&nbsp;<span class="ident" id="5838730"><a href="/go/build/build.go.html#5838693">tag</a></span>&nbsp;<span class="op" id="5838734">==</span>&nbsp;<span class="ident" id="5838737"><a href="/go/build/build.go.html#5837576">name</a></span>&nbsp;<span class="op" id="5838742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838747">return</span>&nbsp;<span class="ident" id="5838754">true</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838764">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838768">return</span>&nbsp;<span class="ident" id="5838775">false</span><br>
<span class="lineno"></span><span class="op" id="5838781">}</span><br>
<span class="lineno">1290</span><br>
<span class="lineno"></span><span class="comment" id="5838784">//&nbsp;goodOSArchFile&nbsp;returns&nbsp;false&nbsp;if&nbsp;the&nbsp;name&nbsp;contains&nbsp;a&nbsp;$GOOS&nbsp;or&nbsp;$GOARCH</span><br>
<span class="lineno"></span><span class="comment" id="5838856">//&nbsp;suffix&nbsp;which&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;current&nbsp;system.</span><br>
<span class="lineno"></span><span class="comment" id="5838907">//&nbsp;The&nbsp;recognized&nbsp;name&nbsp;formats&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="5838943">//</span><br>
<span class="lineno">1295</span><span class="comment" id="5838946">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS).*</span><br>
<span class="lineno"></span><span class="comment" id="5838968">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOARCH).*</span><br>
<span class="lineno"></span><span class="comment" id="5838992">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_$(GOARCH).*</span><br>
<span class="lineno"></span><span class="comment" id="5839024">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_test.*</span><br>
<span class="lineno"></span><span class="comment" id="5839051">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOARCH)_test.*</span><br>
<span class="lineno">1300</span><span class="comment" id="5839080">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name_$(GOOS)_$(GOARCH)_test.*</span><br>
<span class="lineno"></span><span class="comment" id="5839117">//</span><br>
<span class="lineno"></span><span class="comment" id="5839120">//&nbsp;An&nbsp;exception:&nbsp;if&nbsp;GOOS=android,&nbsp;then&nbsp;files&nbsp;with&nbsp;GOOS=linux&nbsp;are&nbsp;also&nbsp;matched.</span><br>
<span class="lineno"></span><span class="keyword" id="5839199">func</span>&nbsp;<span class="op" id="5839204">(</span><span class="ident" id="5839205">ctxt</span>&nbsp;<span class="op" id="5839210">*</span><span class="ident" id="5839211"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="5839218">)</span>&nbsp;<span class="ident" id="5839220">goodOSArchFile</span><span class="op" id="5839234">(</span><span class="ident" id="5839235">name</span>&nbsp;<span class="builtintype" id="5839240">string</span><span class="op" id="5839246">,</span>&nbsp;<span class="ident" id="5839248">allTags</span>&nbsp;<span class="keyword" id="5839256">map</span><span class="op" id="5839259">[</span><span class="builtintype" id="5839260">string</span><span class="op" id="5839266">]</span><span class="builtintype" id="5839267">bool</span><span class="op" id="5839271">)</span>&nbsp;<span class="builtintype" id="5839273">bool</span>&nbsp;<span class="op" id="5839278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5839281">if</span>&nbsp;<span class="ident" id="5839284">dot</span>&nbsp;<span class="op" id="5839288">:=</span>&nbsp;<span class="ident" id="5839291"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5839298">.</span><span class="ident" id="5839299">Index</span><span class="op" id="5839304">(</span><span class="ident" id="5839305"><a href="/go/build/build.go.html#5839235">name</a></span><span class="op" id="5839309">,</span>&nbsp;<span class="string" id="5839311">&#34;.&#34;</span><span class="op" id="5839314">)</span><span class="op" id="5839315">;</span>&nbsp;<span class="ident" id="5839317"><a href="/go/build/build.go.html#5839284">dot</a></span>&nbsp;<span class="op" id="5839321">!=</span>&nbsp;<span class="op" id="5839324">-</span><span class="num" id="5839325">1</span>&nbsp;<span class="op" id="5839327">{</span><br>
<span class="lineno">1305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5839331"><a href="/go/build/build.go.html#5839235">name</a></span>&nbsp;<span class="op" id="5839336">=</span>&nbsp;<span class="ident" id="5839338"><a href="/go/build/build.go.html#5839235">name</a></span><span class="op" id="5839342">[</span><span class="op" id="5839343">:</span><span class="ident" id="5839344"><a href="/go/build/build.go.html#5839284">dot</a></span><span class="op" id="5839347">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5839350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5839354">//&nbsp;Before&nbsp;Go&nbsp;1.4,&nbsp;a&nbsp;file&nbsp;called&nbsp;&#34;linux.go&#34;&nbsp;would&nbsp;be&nbsp;equivalent&nbsp;to&nbsp;having&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5839430">//&nbsp;build&nbsp;tag&nbsp;&#34;linux&#34;&nbsp;in&nbsp;that&nbsp;file.&nbsp;For&nbsp;Go&nbsp;1.4&nbsp;and&nbsp;beyond,&nbsp;we&nbsp;require&nbsp;this</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5839505">//&nbsp;auto-tagging&nbsp;to&nbsp;apply&nbsp;only&nbsp;to&nbsp;files&nbsp;with&nbsp;a&nbsp;non-empty&nbsp;prefix,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5839573">//&nbsp;&#34;foo_linux.go&#34;&nbsp;is&nbsp;tagged&nbsp;but&nbsp;&#34;linux.go&#34;&nbsp;is&nbsp;not.&nbsp;This&nbsp;allows&nbsp;new&nbsp;operating</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5839651">//&nbsp;sytems,&nbsp;such&nbsp;as&nbsp;android,&nbsp;to&nbsp;arrive&nbsp;without&nbsp;breaking&nbsp;existing&nbsp;code&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5839726">//&nbsp;innocuous&nbsp;source&nbsp;code&nbsp;in&nbsp;&#34;android.go&#34;.&nbsp;The&nbsp;easiest&nbsp;fix:&nbsp;cut&nbsp;everything</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5839801">//&nbsp;in&nbsp;the&nbsp;name&nbsp;before&nbsp;the&nbsp;initial&nbsp;_.</span><br>
<span class="lineno">1315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5839839">i</span>&nbsp;<span class="op" id="5839841">:=</span>&nbsp;<span class="ident" id="5839844"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5839851">.</span><span class="ident" id="5839852">Index</span><span class="op" id="5839857">(</span><span class="ident" id="5839858"><a href="/go/build/build.go.html#5839235">name</a></span><span class="op" id="5839862">,</span>&nbsp;<span class="string" id="5839864">&#34;_&#34;</span><span class="op" id="5839867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5839870">if</span>&nbsp;<span class="ident" id="5839873"><a href="/go/build/build.go.html#5839839">i</a></span>&nbsp;<span class="op" id="5839875">&lt;</span>&nbsp;<span class="num" id="5839877">0</span>&nbsp;<span class="op" id="5839879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5839883">return</span>&nbsp;<span class="ident" id="5839890">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5839896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5839899"><a href="/go/build/build.go.html#5839235">name</a></span>&nbsp;<span class="op" id="5839904">=</span>&nbsp;<span class="ident" id="5839906"><a href="/go/build/build.go.html#5839235">name</a></span><span class="op" id="5839910">[</span><span class="ident" id="5839911"><a href="/go/build/build.go.html#5839839">i</a></span><span class="op" id="5839912">:</span><span class="op" id="5839913">]</span>&nbsp;<span class="comment" id="5839915">//&nbsp;ignore&nbsp;everything&nbsp;before&nbsp;first&nbsp;_</span><br>
<span class="lineno">1320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5839953">l</span>&nbsp;<span class="op" id="5839955">:=</span>&nbsp;<span class="ident" id="5839958"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5839965">.</span><span class="ident" id="5839966">Split</span><span class="op" id="5839971">(</span><span class="ident" id="5839972"><a href="/go/build/build.go.html#5839235">name</a></span><span class="op" id="5839976">,</span>&nbsp;<span class="string" id="5839978">&#34;_&#34;</span><span class="op" id="5839981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5839984">if</span>&nbsp;<span class="ident" id="5839987">n</span>&nbsp;<span class="op" id="5839989">:=</span>&nbsp;<span class="builtinfunc" id="5839992">len</span><span class="op" id="5839995">(</span><span class="ident" id="5839996"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5839997">)</span><span class="op" id="5839998">;</span>&nbsp;<span class="ident" id="5840000"><a href="/go/build/build.go.html#5839987">n</a></span>&nbsp;<span class="op" id="5840002">&gt;</span>&nbsp;<span class="num" id="5840004">0</span>&nbsp;<span class="op" id="5840006">&amp;&amp;</span>&nbsp;<span class="ident" id="5840009"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840010">[</span><span class="ident" id="5840011"><a href="/go/build/build.go.html#5839987">n</a></span><span class="op" id="5840012">-</span><span class="num" id="5840013">1</span><span class="op" id="5840014">]</span>&nbsp;<span class="op" id="5840016">==</span>&nbsp;<span class="string" id="5840019">&#34;test&#34;</span>&nbsp;<span class="op" id="5840026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840030"><a href="/go/build/build.go.html#5839953">l</a></span>&nbsp;<span class="op" id="5840032">=</span>&nbsp;<span class="ident" id="5840034"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840035">[</span><span class="op" id="5840036">:</span><span class="ident" id="5840037"><a href="/go/build/build.go.html#5839987">n</a></span><span class="op" id="5840038">-</span><span class="num" id="5840039">1</span><span class="op" id="5840040">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840043">}</span><br>
<span class="lineno">1325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840046">n</span>&nbsp;<span class="op" id="5840048">:=</span>&nbsp;<span class="builtinfunc" id="5840051">len</span><span class="op" id="5840054">(</span><span class="ident" id="5840055"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840059">if</span>&nbsp;<span class="ident" id="5840062"><a href="/go/build/build.go.html#5840046">n</a></span>&nbsp;<span class="op" id="5840064">&gt;=</span>&nbsp;<span class="num" id="5840067">2</span>&nbsp;<span class="op" id="5840069">&amp;&amp;</span>&nbsp;<span class="ident" id="5840072"><a href="/go/build/build.go.html#5840666">knownOS</a></span><span class="op" id="5840079">[</span><span class="ident" id="5840080"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840081">[</span><span class="ident" id="5840082"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840083">-</span><span class="num" id="5840084">2</span><span class="op" id="5840085">]</span><span class="op" id="5840086">]</span>&nbsp;<span class="op" id="5840088">&amp;&amp;</span>&nbsp;<span class="ident" id="5840091"><a href="/go/build/build.go.html#5840702">knownArch</a></span><span class="op" id="5840100">[</span><span class="ident" id="5840101"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840102">[</span><span class="ident" id="5840103"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840104">-</span><span class="num" id="5840105">1</span><span class="op" id="5840106">]</span><span class="op" id="5840107">]</span>&nbsp;<span class="op" id="5840109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840113">if</span>&nbsp;<span class="ident" id="5840116"><a href="/go/build/build.go.html#5839248">allTags</a></span>&nbsp;<span class="op" id="5840124">!=</span>&nbsp;<span class="ident" id="5840127">nil</span>&nbsp;<span class="op" id="5840131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840136"><a href="/go/build/build.go.html#5839248">allTags</a></span><span class="op" id="5840143">[</span><span class="ident" id="5840144"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840145">[</span><span class="ident" id="5840146"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840147">-</span><span class="num" id="5840148">2</span><span class="op" id="5840149">]</span><span class="op" id="5840150">]</span>&nbsp;<span class="op" id="5840152">=</span>&nbsp;<span class="ident" id="5840154">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840162"><a href="/go/build/build.go.html#5839248">allTags</a></span><span class="op" id="5840169">[</span><span class="ident" id="5840170"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840171">[</span><span class="ident" id="5840172"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840173">-</span><span class="num" id="5840174">1</span><span class="op" id="5840175">]</span><span class="op" id="5840176">]</span>&nbsp;<span class="op" id="5840178">=</span>&nbsp;<span class="ident" id="5840180">true</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840191">if</span>&nbsp;<span class="ident" id="5840194"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840195">[</span><span class="ident" id="5840196"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840197">-</span><span class="num" id="5840198">1</span><span class="op" id="5840199">]</span>&nbsp;<span class="op" id="5840201">!=</span>&nbsp;<span class="ident" id="5840204"><a href="/go/build/build.go.html#5839205">ctxt</a></span><span class="op" id="5840208">.</span><span class="ident" id="5840209">GOARCH</span>&nbsp;<span class="op" id="5840216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840221">return</span>&nbsp;<span class="ident" id="5840228">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840240">if</span>&nbsp;<span class="ident" id="5840243"><a href="/go/build/build.go.html#5839205">ctxt</a></span><span class="op" id="5840247">.</span><span class="ident" id="5840248">GOOS</span>&nbsp;<span class="op" id="5840253">==</span>&nbsp;<span class="string" id="5840256">&#34;android&#34;</span>&nbsp;<span class="op" id="5840266">&amp;&amp;</span>&nbsp;<span class="ident" id="5840269"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840270">[</span><span class="ident" id="5840271"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840272">-</span><span class="num" id="5840273">2</span><span class="op" id="5840274">]</span>&nbsp;<span class="op" id="5840276">==</span>&nbsp;<span class="string" id="5840279">&#34;linux&#34;</span>&nbsp;<span class="op" id="5840287">{</span><br>
<span class="lineno">1335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840292">return</span>&nbsp;<span class="ident" id="5840299">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840310">return</span>&nbsp;<span class="ident" id="5840317"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840318">[</span><span class="ident" id="5840319"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840320">-</span><span class="num" id="5840321">2</span><span class="op" id="5840322">]</span>&nbsp;<span class="op" id="5840324">==</span>&nbsp;<span class="ident" id="5840327"><a href="/go/build/build.go.html#5839205">ctxt</a></span><span class="op" id="5840331">.</span><span class="ident" id="5840332">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840341">if</span>&nbsp;<span class="ident" id="5840344"><a href="/go/build/build.go.html#5840046">n</a></span>&nbsp;<span class="op" id="5840346">&gt;=</span>&nbsp;<span class="num" id="5840349">1</span>&nbsp;<span class="op" id="5840351">&amp;&amp;</span>&nbsp;<span class="ident" id="5840354"><a href="/go/build/build.go.html#5840666">knownOS</a></span><span class="op" id="5840361">[</span><span class="ident" id="5840362"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840363">[</span><span class="ident" id="5840364"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840365">-</span><span class="num" id="5840366">1</span><span class="op" id="5840367">]</span><span class="op" id="5840368">]</span>&nbsp;<span class="op" id="5840370">{</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840374">if</span>&nbsp;<span class="ident" id="5840377"><a href="/go/build/build.go.html#5839248">allTags</a></span>&nbsp;<span class="op" id="5840385">!=</span>&nbsp;<span class="ident" id="5840388">nil</span>&nbsp;<span class="op" id="5840392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840397"><a href="/go/build/build.go.html#5839248">allTags</a></span><span class="op" id="5840404">[</span><span class="ident" id="5840405"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840406">[</span><span class="ident" id="5840407"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840408">-</span><span class="num" id="5840409">1</span><span class="op" id="5840410">]</span><span class="op" id="5840411">]</span>&nbsp;<span class="op" id="5840413">=</span>&nbsp;<span class="ident" id="5840415">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840426">if</span>&nbsp;<span class="ident" id="5840429"><a href="/go/build/build.go.html#5839205">ctxt</a></span><span class="op" id="5840433">.</span><span class="ident" id="5840434">GOOS</span>&nbsp;<span class="op" id="5840439">==</span>&nbsp;<span class="string" id="5840442">&#34;android&#34;</span>&nbsp;<span class="op" id="5840452">&amp;&amp;</span>&nbsp;<span class="ident" id="5840455"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840456">[</span><span class="ident" id="5840457"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840458">-</span><span class="num" id="5840459">1</span><span class="op" id="5840460">]</span>&nbsp;<span class="op" id="5840462">==</span>&nbsp;<span class="string" id="5840465">&#34;linux&#34;</span>&nbsp;<span class="op" id="5840473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840478">return</span>&nbsp;<span class="ident" id="5840485">true</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840496">return</span>&nbsp;<span class="ident" id="5840503"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840504">[</span><span class="ident" id="5840505"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840506">-</span><span class="num" id="5840507">1</span><span class="op" id="5840508">]</span>&nbsp;<span class="op" id="5840510">==</span>&nbsp;<span class="ident" id="5840513"><a href="/go/build/build.go.html#5839205">ctxt</a></span><span class="op" id="5840517">.</span><span class="ident" id="5840518">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840527">if</span>&nbsp;<span class="ident" id="5840530"><a href="/go/build/build.go.html#5840046">n</a></span>&nbsp;<span class="op" id="5840532">&gt;=</span>&nbsp;<span class="num" id="5840535">1</span>&nbsp;<span class="op" id="5840537">&amp;&amp;</span>&nbsp;<span class="ident" id="5840540"><a href="/go/build/build.go.html#5840702">knownArch</a></span><span class="op" id="5840549">[</span><span class="ident" id="5840550"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840551">[</span><span class="ident" id="5840552"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840553">-</span><span class="num" id="5840554">1</span><span class="op" id="5840555">]</span><span class="op" id="5840556">]</span>&nbsp;<span class="op" id="5840558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840562">if</span>&nbsp;<span class="ident" id="5840565"><a href="/go/build/build.go.html#5839248">allTags</a></span>&nbsp;<span class="op" id="5840573">!=</span>&nbsp;<span class="ident" id="5840576">nil</span>&nbsp;<span class="op" id="5840580">{</span><br>
<span class="lineno">1350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840585"><a href="/go/build/build.go.html#5839248">allTags</a></span><span class="op" id="5840592">[</span><span class="ident" id="5840593"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840594">[</span><span class="ident" id="5840595"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840596">-</span><span class="num" id="5840597">1</span><span class="op" id="5840598">]</span><span class="op" id="5840599">]</span>&nbsp;<span class="op" id="5840601">=</span>&nbsp;<span class="ident" id="5840603">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840614">return</span>&nbsp;<span class="ident" id="5840621"><a href="/go/build/build.go.html#5839953">l</a></span><span class="op" id="5840622">[</span><span class="ident" id="5840623"><a href="/go/build/build.go.html#5840046">n</a></span><span class="op" id="5840624">-</span><span class="num" id="5840625">1</span><span class="op" id="5840626">]</span>&nbsp;<span class="op" id="5840628">==</span>&nbsp;<span class="ident" id="5840631"><a href="/go/build/build.go.html#5839205">ctxt</a></span><span class="op" id="5840635">.</span><span class="ident" id="5840636">GOARCH</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840647">return</span>&nbsp;<span class="ident" id="5840654">true</span><br>
<span class="lineno">1355</span><span class="op" id="5840659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5840662">var</span>&nbsp;<span class="ident" id="5840666">knownOS</span>&nbsp;<span class="op" id="5840674">=</span>&nbsp;<span class="builtinfunc" id="5840676">make</span><span class="op" id="5840680">(</span><span class="keyword" id="5840681">map</span><span class="op" id="5840684">[</span><span class="builtintype" id="5840685">string</span><span class="op" id="5840691">]</span><span class="builtintype" id="5840692">bool</span><span class="op" id="5840696">)</span><br>
<span class="lineno"></span><span class="keyword" id="5840698">var</span>&nbsp;<span class="ident" id="5840702">knownArch</span>&nbsp;<span class="op" id="5840712">=</span>&nbsp;<span class="builtinfunc" id="5840714">make</span><span class="op" id="5840718">(</span><span class="keyword" id="5840719">map</span><span class="op" id="5840722">[</span><span class="builtintype" id="5840723">string</span><span class="op" id="5840729">]</span><span class="builtintype" id="5840730">bool</span><span class="op" id="5840734">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1360</span><span class="keyword" id="5840737">func</span>&nbsp;<span class="ident" id="5840742">init</span><span class="op" id="5840746">(</span><span class="op" id="5840747">)</span>&nbsp;<span class="op" id="5840749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840752">for</span>&nbsp;<span class="ident" id="5840756">_</span><span class="op" id="5840757">,</span>&nbsp;<span class="ident" id="5840759">v</span>&nbsp;<span class="op" id="5840761">:=</span>&nbsp;<span class="keyword" id="5840764">range</span>&nbsp;<span class="ident" id="5840770"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5840777">.</span><span class="ident" id="5840778">Fields</span><span class="op" id="5840784">(</span><span class="ident" id="5840785"><a href="/go/build/syslist.go.html#5852354">goosList</a></span><span class="op" id="5840793">)</span>&nbsp;<span class="op" id="5840795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840799"><a href="/go/build/build.go.html#5840666">knownOS</a></span><span class="op" id="5840806">[</span><span class="ident" id="5840807"><a href="/go/build/build.go.html#5840759">v</a></span><span class="op" id="5840808">]</span>&nbsp;<span class="op" id="5840810">=</span>&nbsp;<span class="ident" id="5840812">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5840821">for</span>&nbsp;<span class="ident" id="5840825">_</span><span class="op" id="5840826">,</span>&nbsp;<span class="ident" id="5840828">v</span>&nbsp;<span class="op" id="5840830">:=</span>&nbsp;<span class="keyword" id="5840833">range</span>&nbsp;<span class="ident" id="5840839"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5840846">.</span><span class="ident" id="5840847">Fields</span><span class="op" id="5840853">(</span><span class="ident" id="5840854"><a href="/go/build/syslist.go.html#5852455">goarchList</a></span><span class="op" id="5840864">)</span>&nbsp;<span class="op" id="5840866">{</span><br>
<span class="lineno">1365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5840870"><a href="/go/build/build.go.html#5840702">knownArch</a></span><span class="op" id="5840879">[</span><span class="ident" id="5840880"><a href="/go/build/build.go.html#5840828">v</a></span><span class="op" id="5840881">]</span>&nbsp;<span class="op" id="5840883">=</span>&nbsp;<span class="ident" id="5840885">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5840891">}</span><br>
<span class="lineno"></span><span class="op" id="5840893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5840896">//&nbsp;ToolDir&nbsp;is&nbsp;the&nbsp;directory&nbsp;containing&nbsp;build&nbsp;tools.</span><br>
<span class="lineno">1370</span><span class="keyword" id="5840948">var</span>&nbsp;<span class="ident" id="5840952">ToolDir</span>&nbsp;<span class="op" id="5840960">=</span>&nbsp;<span class="ident" id="5840962"><a href="/go/build/build.go.html#5802726">filepath</a></span><span class="op" id="5840970">.</span><span class="ident" id="5840971">Join</span><span class="op" id="5840975">(</span><span class="ident" id="5840976"><a href="/go/build/build.go.html#5802743">runtime</a></span><span class="op" id="5840983">.</span><span class="ident" id="5840984">GOROOT</span><span class="op" id="5840990">(</span><span class="op" id="5840991">)</span><span class="op" id="5840992">,</span>&nbsp;<span class="string" id="5840994">&#34;pkg/tool/&#34;</span><span class="op" id="5841005">+</span><span class="ident" id="5841006"><a href="/go/build/build.go.html#5802743">runtime</a></span><span class="op" id="5841013">.</span><span class="ident" id="5841014">GOOS</span><span class="op" id="5841018">+</span><span class="string" id="5841019">&#34;_&#34;</span><span class="op" id="5841022">+</span><span class="ident" id="5841023"><a href="/go/build/build.go.html#5802743">runtime</a></span><span class="op" id="5841030">.</span><span class="ident" id="5841031">GOARCH</span><span class="op" id="5841037">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5841040">//&nbsp;IsLocalImport&nbsp;reports&nbsp;whether&nbsp;the&nbsp;import&nbsp;path&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5841092">//&nbsp;a&nbsp;local&nbsp;import&nbsp;path,&nbsp;like&nbsp;&#34;.&#34;,&nbsp;&#34;..&#34;,&nbsp;&#34;./foo&#34;,&nbsp;or&nbsp;&#34;../foo&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5841154">func</span>&nbsp;<span class="ident" id="5841159">IsLocalImport</span><span class="op" id="5841172">(</span><span class="ident" id="5841173">path</span>&nbsp;<span class="builtintype" id="5841178">string</span><span class="op" id="5841184">)</span>&nbsp;<span class="builtintype" id="5841186">bool</span>&nbsp;<span class="op" id="5841191">{</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5841194">return</span>&nbsp;<span class="ident" id="5841201"><a href="/go/build/build.go.html#5841173">path</a></span>&nbsp;<span class="op" id="5841206">==</span>&nbsp;<span class="string" id="5841209">&#34;.&#34;</span>&nbsp;<span class="op" id="5841213">||</span>&nbsp;<span class="ident" id="5841216"><a href="/go/build/build.go.html#5841173">path</a></span>&nbsp;<span class="op" id="5841221">==</span>&nbsp;<span class="string" id="5841224">&#34;..&#34;</span>&nbsp;<span class="op" id="5841229">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5841234"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5841241">.</span><span class="ident" id="5841242">HasPrefix</span><span class="op" id="5841251">(</span><span class="ident" id="5841252"><a href="/go/build/build.go.html#5841173">path</a></span><span class="op" id="5841256">,</span>&nbsp;<span class="string" id="5841258">&#34;./&#34;</span><span class="op" id="5841262">)</span>&nbsp;<span class="op" id="5841264">||</span>&nbsp;<span class="ident" id="5841267"><a href="/go/build/build.go.html#5802773">strings</a></span><span class="op" id="5841274">.</span><span class="ident" id="5841275">HasPrefix</span><span class="op" id="5841284">(</span><span class="ident" id="5841285"><a href="/go/build/build.go.html#5841173">path</a></span><span class="op" id="5841289">,</span>&nbsp;<span class="string" id="5841291">&#34;../&#34;</span><span class="op" id="5841296">)</span><br>
<span class="lineno"></span><span class="op" id="5841298">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5841301">//&nbsp;ArchChar&nbsp;returns&nbsp;the&nbsp;architecture&nbsp;character&nbsp;for&nbsp;the&nbsp;given&nbsp;goarch.</span><br>
<span class="lineno">1380</span><span class="comment" id="5841370">//&nbsp;For&nbsp;example,&nbsp;ArchChar(&#34;amd64&#34;)&nbsp;returns&nbsp;&#34;6&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="5841417">func</span>&nbsp;<span class="ident" id="5841422">ArchChar</span><span class="op" id="5841430">(</span><span class="ident" id="5841431">goarch</span>&nbsp;<span class="builtintype" id="5841438">string</span><span class="op" id="5841444">)</span>&nbsp;<span class="op" id="5841446">(</span><span class="builtintype" id="5841447">string</span><span class="op" id="5841453">,</span>&nbsp;<span class="builtintype" id="5841455">error</span><span class="op" id="5841460">)</span>&nbsp;<span class="op" id="5841462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5841465">switch</span>&nbsp;<span class="ident" id="5841472"><a href="/go/build/build.go.html#5841431">goarch</a></span>&nbsp;<span class="op" id="5841479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5841482">case</span>&nbsp;<span class="string" id="5841487">&#34;386&#34;</span><span class="op" id="5841492">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5841496">return</span>&nbsp;<span class="string" id="5841503">&#34;8&#34;</span><span class="op" id="5841506">,</span>&nbsp;<span class="ident" id="5841508">nil</span><br>
<span class="lineno">1385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5841513">case</span>&nbsp;<span class="string" id="5841518">&#34;amd64&#34;</span><span class="op" id="5841525">,</span>&nbsp;<span class="string" id="5841527">&#34;amd64p32&#34;</span><span class="op" id="5841537">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5841541">return</span>&nbsp;<span class="string" id="5841548">&#34;6&#34;</span><span class="op" id="5841551">,</span>&nbsp;<span class="ident" id="5841553">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5841558">case</span>&nbsp;<span class="string" id="5841563">&#34;arm&#34;</span><span class="op" id="5841568">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5841572">return</span>&nbsp;<span class="string" id="5841579">&#34;5&#34;</span><span class="op" id="5841582">,</span>&nbsp;<span class="ident" id="5841584">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5841589">}</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5841592">return</span>&nbsp;<span class="string" id="5841599">&#34;&#34;</span><span class="op" id="5841601">,</span>&nbsp;<span class="ident" id="5841603"><a href="/go/build/build.go.html#5802616">errors</a></span><span class="op" id="5841609">.</span><span class="ident" id="5841610">New</span><span class="op" id="5841613">(</span><span class="string" id="5841614">&#34;unsupported&nbsp;GOARCH&nbsp;&#34;</span>&nbsp;<span class="op" id="5841636">+</span>&nbsp;<span class="ident" id="5841638"><a href="/go/build/build.go.html#5841431">goarch</a></span><span class="op" id="5841644">)</span><br>
<span class="lineno"></span><span class="op" id="5841646">}</span>
</div>
</body>
</html>
