<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html" class="current">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2328632">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2328687">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2328741">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2328792">//&nbsp;Multiprecision&nbsp;decimal&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="2328827">//&nbsp;For&nbsp;floating-point&nbsp;formatting&nbsp;only;&nbsp;not&nbsp;general&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="comment" id="2328887">//&nbsp;Only&nbsp;operations&nbsp;are&nbsp;assign&nbsp;and&nbsp;(binary)&nbsp;left/right&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2328948">//&nbsp;Can&nbsp;do&nbsp;binary&nbsp;floating&nbsp;point&nbsp;in&nbsp;multiprecision&nbsp;decimal&nbsp;precisely</span><br>
<span class="lineno"></span><span class="comment" id="2329016">//&nbsp;because&nbsp;2&nbsp;divides&nbsp;10;&nbsp;cannot&nbsp;do&nbsp;decimal&nbsp;floating&nbsp;point</span><br>
<span class="lineno">10</span><span class="comment" id="2329074">//&nbsp;in&nbsp;multiprecision&nbsp;binary&nbsp;precisely.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2329114">package</span>&nbsp;<span class="ident" id="2329122">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2329131">type</span>&nbsp;<span class="ident" id="2329136">decimal</span>&nbsp;<span class="keyword" id="2329144">struct</span>&nbsp;<span class="op" id="2329151">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329154">d</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2329160">[</span><span class="num" id="2329161">800</span><span class="op" id="2329164">]</span><span class="builtintype" id="2329165">byte</span>&nbsp;<span class="comment" id="2329170">//&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329181">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2329187">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2329197">//&nbsp;number&nbsp;of&nbsp;digits&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329223">dp</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2329229">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2329239">//&nbsp;decimal&nbsp;point</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329257">neg</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2329263">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329269">trunc</span>&nbsp;<span class="builtintype" id="2329275">bool</span>&nbsp;<span class="comment" id="2329280">//&nbsp;discarded&nbsp;nonzero&nbsp;digits&nbsp;beyond&nbsp;d[:nd]</span><br>
<span class="lineno">20</span><span class="op" id="2329322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2329325">func</span>&nbsp;<span class="op" id="2329330">(</span><span class="ident" id="2329331">a</span>&nbsp;<span class="op" id="2329333">*</span><span class="ident" id="2329334">decimal</span><span class="op" id="2329341">)</span>&nbsp;<span class="ident" id="2329343">String</span><span class="op" id="2329349">(</span><span class="op" id="2329350">)</span>&nbsp;<span class="builtintype" id="2329352">string</span>&nbsp;<span class="op" id="2329359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329362">n</span>&nbsp;<span class="op" id="2329364">:=</span>&nbsp;<span class="num" id="2329367">10</span>&nbsp;<span class="op" id="2329370">+</span>&nbsp;<span class="ident" id="2329372">a</span><span class="op" id="2329373">.</span><span class="ident" id="2329374">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329378">if</span>&nbsp;<span class="ident" id="2329381">a</span><span class="op" id="2329382">.</span><span class="ident" id="2329383">dp</span>&nbsp;<span class="op" id="2329386">&gt;</span>&nbsp;<span class="num" id="2329388">0</span>&nbsp;<span class="op" id="2329390">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329394">n</span>&nbsp;<span class="op" id="2329396">+=</span>&nbsp;<span class="ident" id="2329399">a</span><span class="op" id="2329400">.</span><span class="ident" id="2329401">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2329405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329408">if</span>&nbsp;<span class="ident" id="2329411">a</span><span class="op" id="2329412">.</span><span class="ident" id="2329413">dp</span>&nbsp;<span class="op" id="2329416">&lt;</span>&nbsp;<span class="num" id="2329418">0</span>&nbsp;<span class="op" id="2329420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329424">n</span>&nbsp;<span class="op" id="2329426">+=</span>&nbsp;<span class="op" id="2329429">-</span><span class="ident" id="2329430">a</span><span class="op" id="2329431">.</span><span class="ident" id="2329432">dp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2329436">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329440">buf</span>&nbsp;<span class="op" id="2329444">:=</span>&nbsp;<span class="builtinfunc" id="2329447">make</span><span class="op" id="2329451">(</span><span class="op" id="2329452">[</span><span class="op" id="2329453">]</span><span class="builtintype" id="2329454">byte</span><span class="op" id="2329458">,</span>&nbsp;<span class="ident" id="2329460">n</span><span class="op" id="2329461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329464">w</span>&nbsp;<span class="op" id="2329466">:=</span>&nbsp;<span class="num" id="2329469">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329472">switch</span>&nbsp;<span class="op" id="2329479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329482">case</span>&nbsp;<span class="ident" id="2329487">a</span><span class="op" id="2329488">.</span><span class="ident" id="2329489">nd</span>&nbsp;<span class="op" id="2329492">==</span>&nbsp;<span class="num" id="2329495">0</span><span class="op" id="2329496">:</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329500">return</span>&nbsp;<span class="string" id="2329507">&#34;0&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329513">case</span>&nbsp;<span class="ident" id="2329518">a</span><span class="op" id="2329519">.</span><span class="ident" id="2329520">dp</span>&nbsp;<span class="op" id="2329523">&lt;=</span>&nbsp;<span class="num" id="2329526">0</span><span class="op" id="2329527">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2329531">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;decimal&nbsp;point&nbsp;and&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329586">buf</span><span class="op" id="2329589">[</span><span class="ident" id="2329590">w</span><span class="op" id="2329591">]</span>&nbsp;<span class="op" id="2329593">=</span>&nbsp;<span class="string" id="2329595">&#39;0&#39;</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329601">w</span><span class="op" id="2329602">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329607">buf</span><span class="op" id="2329610">[</span><span class="ident" id="2329611">w</span><span class="op" id="2329612">]</span>&nbsp;<span class="op" id="2329614">=</span>&nbsp;<span class="string" id="2329616">&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329622">w</span><span class="op" id="2329623">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329628">w</span>&nbsp;<span class="op" id="2329630">+=</span>&nbsp;<span class="ident" id="2329633">digitZero</span><span class="op" id="2329642">(</span><span class="ident" id="2329643">buf</span><span class="op" id="2329646">[</span><span class="ident" id="2329647">w</span>&nbsp;<span class="op" id="2329649">:</span>&nbsp;<span class="ident" id="2329651">w</span><span class="op" id="2329652">+</span><span class="op" id="2329653">-</span><span class="ident" id="2329654">a</span><span class="op" id="2329655">.</span><span class="ident" id="2329656">dp</span><span class="op" id="2329658">]</span><span class="op" id="2329659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329663">w</span>&nbsp;<span class="op" id="2329665">+=</span>&nbsp;<span class="builtinfunc" id="2329668">copy</span><span class="op" id="2329672">(</span><span class="ident" id="2329673">buf</span><span class="op" id="2329676">[</span><span class="ident" id="2329677">w</span><span class="op" id="2329678">:</span><span class="op" id="2329679">]</span><span class="op" id="2329680">,</span>&nbsp;<span class="ident" id="2329682">a</span><span class="op" id="2329683">.</span><span class="ident" id="2329684">d</span><span class="op" id="2329685">[</span><span class="num" id="2329686">0</span><span class="op" id="2329687">:</span><span class="ident" id="2329688">a</span><span class="op" id="2329689">.</span><span class="ident" id="2329690">nd</span><span class="op" id="2329692">]</span><span class="op" id="2329693">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329697">case</span>&nbsp;<span class="ident" id="2329702">a</span><span class="op" id="2329703">.</span><span class="ident" id="2329704">dp</span>&nbsp;<span class="op" id="2329707">&lt;</span>&nbsp;<span class="ident" id="2329709">a</span><span class="op" id="2329710">.</span><span class="ident" id="2329711">nd</span><span class="op" id="2329713">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2329717">//&nbsp;decimal&nbsp;point&nbsp;in&nbsp;middle&nbsp;of&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329756">w</span>&nbsp;<span class="op" id="2329758">+=</span>&nbsp;<span class="builtinfunc" id="2329761">copy</span><span class="op" id="2329765">(</span><span class="ident" id="2329766">buf</span><span class="op" id="2329769">[</span><span class="ident" id="2329770">w</span><span class="op" id="2329771">:</span><span class="op" id="2329772">]</span><span class="op" id="2329773">,</span>&nbsp;<span class="ident" id="2329775">a</span><span class="op" id="2329776">.</span><span class="ident" id="2329777">d</span><span class="op" id="2329778">[</span><span class="num" id="2329779">0</span><span class="op" id="2329780">:</span><span class="ident" id="2329781">a</span><span class="op" id="2329782">.</span><span class="ident" id="2329783">dp</span><span class="op" id="2329785">]</span><span class="op" id="2329786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329790">buf</span><span class="op" id="2329793">[</span><span class="ident" id="2329794">w</span><span class="op" id="2329795">]</span>&nbsp;<span class="op" id="2329797">=</span>&nbsp;<span class="string" id="2329799">&#39;.&#39;</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329805">w</span><span class="op" id="2329806">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329811">w</span>&nbsp;<span class="op" id="2329813">+=</span>&nbsp;<span class="builtinfunc" id="2329816">copy</span><span class="op" id="2329820">(</span><span class="ident" id="2329821">buf</span><span class="op" id="2329824">[</span><span class="ident" id="2329825">w</span><span class="op" id="2329826">:</span><span class="op" id="2329827">]</span><span class="op" id="2329828">,</span>&nbsp;<span class="ident" id="2329830">a</span><span class="op" id="2329831">.</span><span class="ident" id="2329832">d</span><span class="op" id="2329833">[</span><span class="ident" id="2329834">a</span><span class="op" id="2329835">.</span><span class="ident" id="2329836">dp</span><span class="op" id="2329838">:</span><span class="ident" id="2329839">a</span><span class="op" id="2329840">.</span><span class="ident" id="2329841">nd</span><span class="op" id="2329843">]</span><span class="op" id="2329844">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329848">default</span><span class="op" id="2329855">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2329859">//&nbsp;zeros&nbsp;fill&nbsp;space&nbsp;between&nbsp;digits&nbsp;and&nbsp;decimal&nbsp;point</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329914">w</span>&nbsp;<span class="op" id="2329916">+=</span>&nbsp;<span class="builtinfunc" id="2329919">copy</span><span class="op" id="2329923">(</span><span class="ident" id="2329924">buf</span><span class="op" id="2329927">[</span><span class="ident" id="2329928">w</span><span class="op" id="2329929">:</span><span class="op" id="2329930">]</span><span class="op" id="2329931">,</span>&nbsp;<span class="ident" id="2329933">a</span><span class="op" id="2329934">.</span><span class="ident" id="2329935">d</span><span class="op" id="2329936">[</span><span class="num" id="2329937">0</span><span class="op" id="2329938">:</span><span class="ident" id="2329939">a</span><span class="op" id="2329940">.</span><span class="ident" id="2329941">nd</span><span class="op" id="2329943">]</span><span class="op" id="2329944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2329948">w</span>&nbsp;<span class="op" id="2329950">+=</span>&nbsp;<span class="ident" id="2329953">digitZero</span><span class="op" id="2329962">(</span><span class="ident" id="2329963">buf</span><span class="op" id="2329966">[</span><span class="ident" id="2329967">w</span>&nbsp;<span class="op" id="2329969">:</span>&nbsp;<span class="ident" id="2329971">w</span><span class="op" id="2329972">+</span><span class="ident" id="2329973">a</span><span class="op" id="2329974">.</span><span class="ident" id="2329975">dp</span><span class="op" id="2329977">-</span><span class="ident" id="2329978">a</span><span class="op" id="2329979">.</span><span class="ident" id="2329980">nd</span><span class="op" id="2329982">]</span><span class="op" id="2329983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2329986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2329989">return</span>&nbsp;<span class="builtintype" id="2329996">string</span><span class="op" id="2330002">(</span><span class="ident" id="2330003">buf</span><span class="op" id="2330006">[</span><span class="num" id="2330007">0</span><span class="op" id="2330008">:</span><span class="ident" id="2330009">w</span><span class="op" id="2330010">]</span><span class="op" id="2330011">)</span><br>
<span class="lineno"></span><span class="op" id="2330013">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="2330016">func</span>&nbsp;<span class="ident" id="2330021">digitZero</span><span class="op" id="2330030">(</span><span class="ident" id="2330031">dst</span>&nbsp;<span class="op" id="2330035">[</span><span class="op" id="2330036">]</span><span class="builtintype" id="2330037">byte</span><span class="op" id="2330041">)</span>&nbsp;<span class="builtintype" id="2330043">int</span>&nbsp;<span class="op" id="2330047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330050">for</span>&nbsp;<span class="ident" id="2330054">i</span>&nbsp;<span class="op" id="2330056">:=</span>&nbsp;<span class="keyword" id="2330059">range</span>&nbsp;<span class="ident" id="2330065">dst</span>&nbsp;<span class="op" id="2330069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330073">dst</span><span class="op" id="2330076">[</span><span class="ident" id="2330077">i</span><span class="op" id="2330078">]</span>&nbsp;<span class="op" id="2330080">=</span>&nbsp;<span class="string" id="2330082">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330087">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330090">return</span>&nbsp;<span class="builtinfunc" id="2330097">len</span><span class="op" id="2330100">(</span><span class="ident" id="2330101">dst</span><span class="op" id="2330104">)</span><br>
<span class="lineno"></span><span class="op" id="2330106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2330109">//&nbsp;trim&nbsp;trailing&nbsp;zeros&nbsp;from&nbsp;number.</span><br>
<span class="lineno"></span><span class="comment" id="2330145">//&nbsp;(They&nbsp;are&nbsp;meaningless;&nbsp;the&nbsp;decimal&nbsp;point&nbsp;is&nbsp;tracked</span><br>
<span class="lineno">70</span><span class="comment" id="2330200">//&nbsp;independent&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;digits.)</span><br>
<span class="lineno"></span><span class="keyword" id="2330241">func</span>&nbsp;<span class="ident" id="2330246">trim</span><span class="op" id="2330250">(</span><span class="ident" id="2330251">a</span>&nbsp;<span class="op" id="2330253">*</span><span class="ident" id="2330254">decimal</span><span class="op" id="2330261">)</span>&nbsp;<span class="op" id="2330263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330266">for</span>&nbsp;<span class="ident" id="2330270">a</span><span class="op" id="2330271">.</span><span class="ident" id="2330272">nd</span>&nbsp;<span class="op" id="2330275">&gt;</span>&nbsp;<span class="num" id="2330277">0</span>&nbsp;<span class="op" id="2330279">&amp;&amp;</span>&nbsp;<span class="ident" id="2330282">a</span><span class="op" id="2330283">.</span><span class="ident" id="2330284">d</span><span class="op" id="2330285">[</span><span class="ident" id="2330286">a</span><span class="op" id="2330287">.</span><span class="ident" id="2330288">nd</span><span class="op" id="2330290">-</span><span class="num" id="2330291">1</span><span class="op" id="2330292">]</span>&nbsp;<span class="op" id="2330294">==</span>&nbsp;<span class="string" id="2330297">&#39;0&#39;</span>&nbsp;<span class="op" id="2330301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330305">a</span><span class="op" id="2330306">.</span><span class="ident" id="2330307">nd</span><span class="op" id="2330309">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330313">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330316">if</span>&nbsp;<span class="ident" id="2330319">a</span><span class="op" id="2330320">.</span><span class="ident" id="2330321">nd</span>&nbsp;<span class="op" id="2330324">==</span>&nbsp;<span class="num" id="2330327">0</span>&nbsp;<span class="op" id="2330329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330333">a</span><span class="op" id="2330334">.</span><span class="ident" id="2330335">dp</span>&nbsp;<span class="op" id="2330338">=</span>&nbsp;<span class="num" id="2330340">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330343">}</span><br>
<span class="lineno"></span><span class="op" id="2330345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="2330348">//&nbsp;Assign&nbsp;v&nbsp;to&nbsp;a.</span><br>
<span class="lineno"></span><span class="keyword" id="2330366">func</span>&nbsp;<span class="op" id="2330371">(</span><span class="ident" id="2330372">a</span>&nbsp;<span class="op" id="2330374">*</span><span class="ident" id="2330375">decimal</span><span class="op" id="2330382">)</span>&nbsp;<span class="ident" id="2330384">Assign</span><span class="op" id="2330390">(</span><span class="ident" id="2330391">v</span>&nbsp;<span class="ident" id="2330393">uint64</span><span class="op" id="2330399">)</span>&nbsp;<span class="op" id="2330401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330404">var</span>&nbsp;<span class="ident" id="2330408">buf</span>&nbsp;<span class="op" id="2330412">[</span><span class="num" id="2330413">24</span><span class="op" id="2330415">]</span><span class="builtintype" id="2330416">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2330423">//&nbsp;Write&nbsp;reversed&nbsp;decimal&nbsp;in&nbsp;buf.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330458">n</span>&nbsp;<span class="op" id="2330460">:=</span>&nbsp;<span class="num" id="2330463">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330466">for</span>&nbsp;<span class="ident" id="2330470">v</span>&nbsp;<span class="op" id="2330472">&gt;</span>&nbsp;<span class="num" id="2330474">0</span>&nbsp;<span class="op" id="2330476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330480">v1</span>&nbsp;<span class="op" id="2330483">:=</span>&nbsp;<span class="ident" id="2330486">v</span>&nbsp;<span class="op" id="2330488">/</span>&nbsp;<span class="num" id="2330490">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330495">v</span>&nbsp;<span class="op" id="2330497">-=</span>&nbsp;<span class="num" id="2330500">10</span>&nbsp;<span class="op" id="2330503">*</span>&nbsp;<span class="ident" id="2330505">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330510">buf</span><span class="op" id="2330513">[</span><span class="ident" id="2330514">n</span><span class="op" id="2330515">]</span>&nbsp;<span class="op" id="2330517">=</span>&nbsp;<span class="builtintype" id="2330519">byte</span><span class="op" id="2330523">(</span><span class="ident" id="2330524">v</span>&nbsp;<span class="op" id="2330526">+</span>&nbsp;<span class="string" id="2330528">&#39;0&#39;</span><span class="op" id="2330531">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330535">n</span><span class="op" id="2330536">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330541">v</span>&nbsp;<span class="op" id="2330543">=</span>&nbsp;<span class="ident" id="2330545">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2330553">//&nbsp;Reverse&nbsp;again&nbsp;to&nbsp;produce&nbsp;forward&nbsp;decimal&nbsp;in&nbsp;a.d.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330606">a</span><span class="op" id="2330607">.</span><span class="ident" id="2330608">nd</span>&nbsp;<span class="op" id="2330611">=</span>&nbsp;<span class="num" id="2330613">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2330616">for</span>&nbsp;<span class="ident" id="2330620">n</span><span class="op" id="2330621">--</span><span class="op" id="2330623">;</span>&nbsp;<span class="ident" id="2330625">n</span>&nbsp;<span class="op" id="2330627">&gt;=</span>&nbsp;<span class="num" id="2330630">0</span><span class="op" id="2330631">;</span>&nbsp;<span class="ident" id="2330633">n</span><span class="op" id="2330634">--</span>&nbsp;<span class="op" id="2330637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330641">a</span><span class="op" id="2330642">.</span><span class="ident" id="2330643">d</span><span class="op" id="2330644">[</span><span class="ident" id="2330645">a</span><span class="op" id="2330646">.</span><span class="ident" id="2330647">nd</span><span class="op" id="2330649">]</span>&nbsp;<span class="op" id="2330651">=</span>&nbsp;<span class="ident" id="2330653">buf</span><span class="op" id="2330656">[</span><span class="ident" id="2330657">n</span><span class="op" id="2330658">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330662">a</span><span class="op" id="2330663">.</span><span class="ident" id="2330664">nd</span><span class="op" id="2330666">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2330670">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330673">a</span><span class="op" id="2330674">.</span><span class="ident" id="2330675">dp</span>&nbsp;<span class="op" id="2330678">=</span>&nbsp;<span class="ident" id="2330680">a</span><span class="op" id="2330681">.</span><span class="ident" id="2330682">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330686">trim</span><span class="op" id="2330690">(</span><span class="ident" id="2330691">a</span><span class="op" id="2330692">)</span><br>
<span class="lineno"></span><span class="op" id="2330694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2330697">//&nbsp;Maximum&nbsp;shift&nbsp;that&nbsp;we&nbsp;can&nbsp;do&nbsp;in&nbsp;one&nbsp;pass&nbsp;without&nbsp;overflow.</span><br>
<span class="lineno">105</span><span class="comment" id="2330759">//&nbsp;Signed&nbsp;int&nbsp;has&nbsp;31&nbsp;bits,&nbsp;and&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;accommodate&nbsp;9&lt;&lt;k.</span><br>
<span class="lineno"></span><span class="keyword" id="2330830">const</span>&nbsp;<span class="ident" id="2330836">maxShift</span>&nbsp;<span class="op" id="2330845">=</span>&nbsp;<span class="num" id="2330847">27</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2330851">//&nbsp;Binary&nbsp;shift&nbsp;right&nbsp;(*&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2330924">func</span>&nbsp;<span class="ident" id="2330929">rightShift</span><span class="op" id="2330939">(</span><span class="ident" id="2330940">a</span>&nbsp;<span class="op" id="2330942">*</span><span class="ident" id="2330943">decimal</span><span class="op" id="2330950">,</span>&nbsp;<span class="ident" id="2330952">k</span>&nbsp;<span class="builtintype" id="2330954">uint</span><span class="op" id="2330958">)</span>&nbsp;<span class="op" id="2330960">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330963">r</span>&nbsp;<span class="op" id="2330965">:=</span>&nbsp;<span class="num" id="2330968">0</span>&nbsp;<span class="comment" id="2330970">//&nbsp;read&nbsp;pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2330987">w</span>&nbsp;<span class="op" id="2330989">:=</span>&nbsp;<span class="num" id="2330992">0</span>&nbsp;<span class="comment" id="2330994">//&nbsp;write&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2331013">//&nbsp;Pick&nbsp;up&nbsp;enough&nbsp;leading&nbsp;digits&nbsp;to&nbsp;cover&nbsp;first&nbsp;shift.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331069">n</span>&nbsp;<span class="op" id="2331071">:=</span>&nbsp;<span class="num" id="2331074">0</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331077">for</span>&nbsp;<span class="op" id="2331081">;</span>&nbsp;<span class="ident" id="2331083">n</span><span class="op" id="2331084">&gt;&gt;</span><span class="ident" id="2331086">k</span>&nbsp;<span class="op" id="2331088">==</span>&nbsp;<span class="num" id="2331091">0</span><span class="op" id="2331092">;</span>&nbsp;<span class="ident" id="2331094">r</span><span class="op" id="2331095">++</span>&nbsp;<span class="op" id="2331098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331102">if</span>&nbsp;<span class="ident" id="2331105">r</span>&nbsp;<span class="op" id="2331107">&gt;=</span>&nbsp;<span class="ident" id="2331110">a</span><span class="op" id="2331111">.</span><span class="ident" id="2331112">nd</span>&nbsp;<span class="op" id="2331115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331120">if</span>&nbsp;<span class="ident" id="2331123">n</span>&nbsp;<span class="op" id="2331125">==</span>&nbsp;<span class="num" id="2331128">0</span>&nbsp;<span class="op" id="2331130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2331136">//&nbsp;a&nbsp;==&nbsp;0;&nbsp;shouldn&#39;t&nbsp;get&nbsp;here,&nbsp;but&nbsp;handle&nbsp;anyway.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331190">a</span><span class="op" id="2331191">.</span><span class="ident" id="2331192">nd</span>&nbsp;<span class="op" id="2331195">=</span>&nbsp;<span class="num" id="2331197">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331203">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331213">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331218">for</span>&nbsp;<span class="ident" id="2331222">n</span><span class="op" id="2331223">&gt;&gt;</span><span class="ident" id="2331225">k</span>&nbsp;<span class="op" id="2331227">==</span>&nbsp;<span class="num" id="2331230">0</span>&nbsp;<span class="op" id="2331232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331238">n</span>&nbsp;<span class="op" id="2331240">=</span>&nbsp;<span class="ident" id="2331242">n</span>&nbsp;<span class="op" id="2331244">*</span>&nbsp;<span class="num" id="2331246">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331253">r</span><span class="op" id="2331254">++</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331265">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331277">c</span>&nbsp;<span class="op" id="2331279">:=</span>&nbsp;<span class="builtintype" id="2331282">int</span><span class="op" id="2331285">(</span><span class="ident" id="2331286">a</span><span class="op" id="2331287">.</span><span class="ident" id="2331288">d</span><span class="op" id="2331289">[</span><span class="ident" id="2331290">r</span><span class="op" id="2331291">]</span><span class="op" id="2331292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331296">n</span>&nbsp;<span class="op" id="2331298">=</span>&nbsp;<span class="ident" id="2331300">n</span><span class="op" id="2331301">*</span><span class="num" id="2331302">10</span>&nbsp;<span class="op" id="2331305">+</span>&nbsp;<span class="ident" id="2331307">c</span>&nbsp;<span class="op" id="2331309">-</span>&nbsp;<span class="string" id="2331311">&#39;0&#39;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331319">a</span><span class="op" id="2331320">.</span><span class="ident" id="2331321">dp</span>&nbsp;<span class="op" id="2331324">-=</span>&nbsp;<span class="ident" id="2331327">r</span>&nbsp;<span class="op" id="2331329">-</span>&nbsp;<span class="num" id="2331331">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2331335">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331374">for</span>&nbsp;<span class="op" id="2331378">;</span>&nbsp;<span class="ident" id="2331380">r</span>&nbsp;<span class="op" id="2331382">&lt;</span>&nbsp;<span class="ident" id="2331384">a</span><span class="op" id="2331385">.</span><span class="ident" id="2331386">nd</span><span class="op" id="2331388">;</span>&nbsp;<span class="ident" id="2331390">r</span><span class="op" id="2331391">++</span>&nbsp;<span class="op" id="2331394">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331398">c</span>&nbsp;<span class="op" id="2331400">:=</span>&nbsp;<span class="builtintype" id="2331403">int</span><span class="op" id="2331406">(</span><span class="ident" id="2331407">a</span><span class="op" id="2331408">.</span><span class="ident" id="2331409">d</span><span class="op" id="2331410">[</span><span class="ident" id="2331411">r</span><span class="op" id="2331412">]</span><span class="op" id="2331413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331417">dig</span>&nbsp;<span class="op" id="2331421">:=</span>&nbsp;<span class="ident" id="2331424">n</span>&nbsp;<span class="op" id="2331426">&gt;&gt;</span>&nbsp;<span class="ident" id="2331429">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331433">n</span>&nbsp;<span class="op" id="2331435">-=</span>&nbsp;<span class="ident" id="2331438">dig</span>&nbsp;<span class="op" id="2331442">&lt;&lt;</span>&nbsp;<span class="ident" id="2331445">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331449">a</span><span class="op" id="2331450">.</span><span class="ident" id="2331451">d</span><span class="op" id="2331452">[</span><span class="ident" id="2331453">w</span><span class="op" id="2331454">]</span>&nbsp;<span class="op" id="2331456">=</span>&nbsp;<span class="builtintype" id="2331458">byte</span><span class="op" id="2331462">(</span><span class="ident" id="2331463">dig</span>&nbsp;<span class="op" id="2331467">+</span>&nbsp;<span class="string" id="2331469">&#39;0&#39;</span><span class="op" id="2331472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331476">w</span><span class="op" id="2331477">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331482">n</span>&nbsp;<span class="op" id="2331484">=</span>&nbsp;<span class="ident" id="2331486">n</span><span class="op" id="2331487">*</span><span class="num" id="2331488">10</span>&nbsp;<span class="op" id="2331491">+</span>&nbsp;<span class="ident" id="2331493">c</span>&nbsp;<span class="op" id="2331495">-</span>&nbsp;<span class="string" id="2331497">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2331506">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331533">for</span>&nbsp;<span class="ident" id="2331537">n</span>&nbsp;<span class="op" id="2331539">&gt;</span>&nbsp;<span class="num" id="2331541">0</span>&nbsp;<span class="op" id="2331543">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331547">dig</span>&nbsp;<span class="op" id="2331551">:=</span>&nbsp;<span class="ident" id="2331554">n</span>&nbsp;<span class="op" id="2331556">&gt;&gt;</span>&nbsp;<span class="ident" id="2331559">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331563">n</span>&nbsp;<span class="op" id="2331565">-=</span>&nbsp;<span class="ident" id="2331568">dig</span>&nbsp;<span class="op" id="2331572">&lt;&lt;</span>&nbsp;<span class="ident" id="2331575">k</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2331579">if</span>&nbsp;<span class="ident" id="2331582">w</span>&nbsp;<span class="op" id="2331584">&lt;</span>&nbsp;<span class="builtinfunc" id="2331586">len</span><span class="op" id="2331589">(</span><span class="ident" id="2331590">a</span><span class="op" id="2331591">.</span><span class="ident" id="2331592">d</span><span class="op" id="2331593">)</span>&nbsp;<span class="op" id="2331595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331600">a</span><span class="op" id="2331601">.</span><span class="ident" id="2331602">d</span><span class="op" id="2331603">[</span><span class="ident" id="2331604">w</span><span class="op" id="2331605">]</span>&nbsp;<span class="op" id="2331607">=</span>&nbsp;<span class="builtintype" id="2331609">byte</span><span class="op" id="2331613">(</span><span class="ident" id="2331614">dig</span>&nbsp;<span class="op" id="2331618">+</span>&nbsp;<span class="string" id="2331620">&#39;0&#39;</span><span class="op" id="2331623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331628">w</span><span class="op" id="2331629">++</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331634">}</span>&nbsp;<span class="keyword" id="2331636">else</span>&nbsp;<span class="keyword" id="2331641">if</span>&nbsp;<span class="ident" id="2331644">dig</span>&nbsp;<span class="op" id="2331648">&gt;</span>&nbsp;<span class="num" id="2331650">0</span>&nbsp;<span class="op" id="2331652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331657">a</span><span class="op" id="2331658">.</span><span class="ident" id="2331659">trunc</span>&nbsp;<span class="op" id="2331665">=</span>&nbsp;<span class="builtintype" id="2331667">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331678">n</span>&nbsp;<span class="op" id="2331680">=</span>&nbsp;<span class="ident" id="2331682">n</span>&nbsp;<span class="op" id="2331684">*</span>&nbsp;<span class="num" id="2331686">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2331690">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331694">a</span><span class="op" id="2331695">.</span><span class="ident" id="2331696">nd</span>&nbsp;<span class="op" id="2331699">=</span>&nbsp;<span class="ident" id="2331701">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2331704">trim</span><span class="op" id="2331708">(</span><span class="ident" id="2331709">a</span><span class="op" id="2331710">)</span><br>
<span class="lineno"></span><span class="op" id="2331712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="2331715">//&nbsp;Cheat&nbsp;sheet&nbsp;for&nbsp;left&nbsp;shift:&nbsp;table&nbsp;indexed&nbsp;by&nbsp;shift&nbsp;count&nbsp;giving</span><br>
<span class="lineno"></span><span class="comment" id="2331782">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits&nbsp;that&nbsp;will&nbsp;be&nbsp;introduced&nbsp;by&nbsp;that&nbsp;shift.</span><br>
<span class="lineno"></span><span class="comment" id="2331845">//</span><br>
<span class="lineno"></span><span class="comment" id="2331848">//&nbsp;For&nbsp;example,&nbsp;leftcheats[4]&nbsp;=&nbsp;{2,&nbsp;&#34;625&#34;}.&nbsp;&nbsp;That&nbsp;means&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="2331909">//&nbsp;if&nbsp;we&nbsp;are&nbsp;shifting&nbsp;by&nbsp;4&nbsp;(multiplying&nbsp;by&nbsp;16),&nbsp;it&nbsp;will&nbsp;add&nbsp;2&nbsp;digits</span><br>
<span class="lineno">165</span><span class="comment" id="2331978">//&nbsp;when&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;625&#34;&nbsp;through&nbsp;&#34;999&#34;,&nbsp;and&nbsp;one&nbsp;fewer&nbsp;digit</span><br>
<span class="lineno"></span><span class="comment" id="2332048">//&nbsp;if&nbsp;the&nbsp;string&nbsp;prefix&nbsp;is&nbsp;&#34;000&#34;&nbsp;through&nbsp;&#34;624&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="2332096">//</span><br>
<span class="lineno"></span><span class="comment" id="2332099">//&nbsp;Credit&nbsp;for&nbsp;this&nbsp;trick&nbsp;goes&nbsp;to&nbsp;Ken.</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="2332138">type</span>&nbsp;<span class="ident" id="2332143">leftCheat</span>&nbsp;<span class="keyword" id="2332153">struct</span>&nbsp;<span class="op" id="2332160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2332163">delta</span>&nbsp;&nbsp;<span class="builtintype" id="2332170">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332177">//&nbsp;number&nbsp;of&nbsp;new&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2332202">cutoff</span>&nbsp;<span class="builtintype" id="2332209">string</span>&nbsp;<span class="comment" id="2332216">//&nbsp;&nbsp;&nbsp;minus&nbsp;one&nbsp;digit&nbsp;if&nbsp;original&nbsp;&lt;&nbsp;a.</span><br>
<span class="lineno"></span><span class="op" id="2332254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="2332257">var</span>&nbsp;<span class="ident" id="2332261">leftcheats</span>&nbsp;<span class="op" id="2332272">=</span>&nbsp;<span class="op" id="2332274">[</span><span class="op" id="2332275">]</span><span class="ident" id="2332276">leftCheat</span><span class="op" id="2332285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332288">//&nbsp;Leading&nbsp;digits&nbsp;of&nbsp;1/2^i&nbsp;=&nbsp;5^i.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332323">//&nbsp;5^23&nbsp;is&nbsp;not&nbsp;an&nbsp;exact&nbsp;64-bit&nbsp;floating&nbsp;point&nbsp;number,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332378">//&nbsp;so&nbsp;have&nbsp;to&nbsp;use&nbsp;bc&nbsp;for&nbsp;the&nbsp;math.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332414">/*<br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seq&nbsp;27&nbsp;|&nbsp;sed&nbsp;&#39;s/^/5^/&#39;&nbsp;|&nbsp;bc&nbsp;|<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;awk&nbsp;&#39;BEGIN{&nbsp;print&nbsp;&#34;\tleftCheat{&nbsp;0,&nbsp;\&#34;\&#34;&nbsp;},&#34;&nbsp;}<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log2&nbsp;=&nbsp;log(2)/log(10)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&#34;\tleftCheat{&nbsp;%d,&nbsp;\&#34;%s\&#34;&nbsp;},\t//&nbsp;*&nbsp;%d\n&#34;,<br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int(log2*NR+1),&nbsp;$0,&nbsp;2**NR)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#39;<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332618">{</span><span class="num" id="2332619">0</span><span class="op" id="2332620">,</span>&nbsp;<span class="string" id="2332622">&#34;&#34;</span><span class="op" id="2332624">}</span><span class="op" id="2332625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332628">{</span><span class="num" id="2332629">1</span><span class="op" id="2332630">,</span>&nbsp;<span class="string" id="2332632">&#34;5&#34;</span><span class="op" id="2332635">}</span><span class="op" id="2332636">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332656">//&nbsp;*&nbsp;2</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332664">{</span><span class="num" id="2332665">1</span><span class="op" id="2332666">,</span>&nbsp;<span class="string" id="2332668">&#34;25&#34;</span><span class="op" id="2332672">}</span><span class="op" id="2332673">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332692">//&nbsp;*&nbsp;4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332700">{</span><span class="num" id="2332701">1</span><span class="op" id="2332702">,</span>&nbsp;<span class="string" id="2332704">&#34;125&#34;</span><span class="op" id="2332709">}</span><span class="op" id="2332710">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332728">//&nbsp;*&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332736">{</span><span class="num" id="2332737">2</span><span class="op" id="2332738">,</span>&nbsp;<span class="string" id="2332740">&#34;625&#34;</span><span class="op" id="2332745">}</span><span class="op" id="2332746">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332764">//&nbsp;*&nbsp;16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332773">{</span><span class="num" id="2332774">2</span><span class="op" id="2332775">,</span>&nbsp;<span class="string" id="2332777">&#34;3125&#34;</span><span class="op" id="2332783">}</span><span class="op" id="2332784">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332801">//&nbsp;*&nbsp;32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332810">{</span><span class="num" id="2332811">2</span><span class="op" id="2332812">,</span>&nbsp;<span class="string" id="2332814">&#34;15625&#34;</span><span class="op" id="2332821">}</span><span class="op" id="2332822">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332838">//&nbsp;*&nbsp;64</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332847">{</span><span class="num" id="2332848">3</span><span class="op" id="2332849">,</span>&nbsp;<span class="string" id="2332851">&#34;78125&#34;</span><span class="op" id="2332858">}</span><span class="op" id="2332859">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332875">//&nbsp;*&nbsp;128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332885">{</span><span class="num" id="2332886">3</span><span class="op" id="2332887">,</span>&nbsp;<span class="string" id="2332889">&#34;390625&#34;</span><span class="op" id="2332897">}</span><span class="op" id="2332898">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332913">//&nbsp;*&nbsp;256</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332923">{</span><span class="num" id="2332924">3</span><span class="op" id="2332925">,</span>&nbsp;<span class="string" id="2332927">&#34;1953125&#34;</span><span class="op" id="2332936">}</span><span class="op" id="2332937">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332951">//&nbsp;*&nbsp;512</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2332961">{</span><span class="num" id="2332962">4</span><span class="op" id="2332963">,</span>&nbsp;<span class="string" id="2332965">&#34;9765625&#34;</span><span class="op" id="2332974">}</span><span class="op" id="2332975">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2332989">//&nbsp;*&nbsp;1024</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333000">{</span><span class="num" id="2333001">4</span><span class="op" id="2333002">,</span>&nbsp;<span class="string" id="2333004">&#34;48828125&#34;</span><span class="op" id="2333014">}</span><span class="op" id="2333015">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333028">//&nbsp;*&nbsp;2048</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333039">{</span><span class="num" id="2333040">4</span><span class="op" id="2333041">,</span>&nbsp;<span class="string" id="2333043">&#34;244140625&#34;</span><span class="op" id="2333054">}</span><span class="op" id="2333055">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333067">//&nbsp;*&nbsp;4096</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333078">{</span><span class="num" id="2333079">4</span><span class="op" id="2333080">,</span>&nbsp;<span class="string" id="2333082">&#34;1220703125&#34;</span><span class="op" id="2333094">}</span><span class="op" id="2333095">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333106">//&nbsp;*&nbsp;8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333117">{</span><span class="num" id="2333118">5</span><span class="op" id="2333119">,</span>&nbsp;<span class="string" id="2333121">&#34;6103515625&#34;</span><span class="op" id="2333133">}</span><span class="op" id="2333134">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333145">//&nbsp;*&nbsp;16384</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333157">{</span><span class="num" id="2333158">5</span><span class="op" id="2333159">,</span>&nbsp;<span class="string" id="2333161">&#34;30517578125&#34;</span><span class="op" id="2333174">}</span><span class="op" id="2333175">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333185">//&nbsp;*&nbsp;32768</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333197">{</span><span class="num" id="2333198">5</span><span class="op" id="2333199">,</span>&nbsp;<span class="string" id="2333201">&#34;152587890625&#34;</span><span class="op" id="2333215">}</span><span class="op" id="2333216">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333225">//&nbsp;*&nbsp;65536</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333237">{</span><span class="num" id="2333238">6</span><span class="op" id="2333239">,</span>&nbsp;<span class="string" id="2333241">&#34;762939453125&#34;</span><span class="op" id="2333255">}</span><span class="op" id="2333256">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333265">//&nbsp;*&nbsp;131072</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333278">{</span><span class="num" id="2333279">6</span><span class="op" id="2333280">,</span>&nbsp;<span class="string" id="2333282">&#34;3814697265625&#34;</span><span class="op" id="2333297">}</span><span class="op" id="2333298">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333306">//&nbsp;*&nbsp;262144</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333319">{</span><span class="num" id="2333320">6</span><span class="op" id="2333321">,</span>&nbsp;<span class="string" id="2333323">&#34;19073486328125&#34;</span><span class="op" id="2333339">}</span><span class="op" id="2333340">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333347">//&nbsp;*&nbsp;524288</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333360">{</span><span class="num" id="2333361">7</span><span class="op" id="2333362">,</span>&nbsp;<span class="string" id="2333364">&#34;95367431640625&#34;</span><span class="op" id="2333380">}</span><span class="op" id="2333381">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333388">//&nbsp;*&nbsp;1048576</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333402">{</span><span class="num" id="2333403">7</span><span class="op" id="2333404">,</span>&nbsp;<span class="string" id="2333406">&#34;476837158203125&#34;</span><span class="op" id="2333423">}</span><span class="op" id="2333424">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333430">//&nbsp;*&nbsp;2097152</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333444">{</span><span class="num" id="2333445">7</span><span class="op" id="2333446">,</span>&nbsp;<span class="string" id="2333448">&#34;2384185791015625&#34;</span><span class="op" id="2333466">}</span><span class="op" id="2333467">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2333472">//&nbsp;*&nbsp;4194304</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333486">{</span><span class="num" id="2333487">7</span><span class="op" id="2333488">,</span>&nbsp;<span class="string" id="2333490">&#34;11920928955078125&#34;</span><span class="op" id="2333509">}</span><span class="op" id="2333510">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2333514">//&nbsp;*&nbsp;8388608</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333528">{</span><span class="num" id="2333529">8</span><span class="op" id="2333530">,</span>&nbsp;<span class="string" id="2333532">&#34;59604644775390625&#34;</span><span class="op" id="2333551">}</span><span class="op" id="2333552">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="2333556">//&nbsp;*&nbsp;16777216</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333571">{</span><span class="num" id="2333572">8</span><span class="op" id="2333573">,</span>&nbsp;<span class="string" id="2333575">&#34;298023223876953125&#34;</span><span class="op" id="2333595">}</span><span class="op" id="2333596">,</span>&nbsp;&nbsp;<span class="comment" id="2333599">//&nbsp;*&nbsp;33554432</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333614">{</span><span class="num" id="2333615">8</span><span class="op" id="2333616">,</span>&nbsp;<span class="string" id="2333618">&#34;1490116119384765625&#34;</span><span class="op" id="2333639">}</span><span class="op" id="2333640">,</span>&nbsp;<span class="comment" id="2333642">//&nbsp;*&nbsp;67108864</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333657">{</span><span class="num" id="2333658">9</span><span class="op" id="2333659">,</span>&nbsp;<span class="string" id="2333661">&#34;7450580596923828125&#34;</span><span class="op" id="2333682">}</span><span class="op" id="2333683">,</span>&nbsp;<span class="comment" id="2333685">//&nbsp;*&nbsp;134217728</span><br>
<span class="lineno"></span><span class="op" id="2333700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2333703">//&nbsp;Is&nbsp;the&nbsp;leading&nbsp;prefix&nbsp;of&nbsp;b&nbsp;lexicographically&nbsp;less&nbsp;than&nbsp;s?</span><br>
<span class="lineno"></span><span class="keyword" id="2333764">func</span>&nbsp;<span class="ident" id="2333769">prefixIsLessThan</span><span class="op" id="2333785">(</span><span class="ident" id="2333786">b</span>&nbsp;<span class="op" id="2333788">[</span><span class="op" id="2333789">]</span><span class="builtintype" id="2333790">byte</span><span class="op" id="2333794">,</span>&nbsp;<span class="ident" id="2333796">s</span>&nbsp;<span class="builtintype" id="2333798">string</span><span class="op" id="2333804">)</span>&nbsp;<span class="builtintype" id="2333806">bool</span>&nbsp;<span class="op" id="2333811">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2333814">for</span>&nbsp;<span class="ident" id="2333818">i</span>&nbsp;<span class="op" id="2333820">:=</span>&nbsp;<span class="num" id="2333823">0</span><span class="op" id="2333824">;</span>&nbsp;<span class="ident" id="2333826">i</span>&nbsp;<span class="op" id="2333828">&lt;</span>&nbsp;<span class="builtinfunc" id="2333830">len</span><span class="op" id="2333833">(</span><span class="ident" id="2333834">s</span><span class="op" id="2333835">)</span><span class="op" id="2333836">;</span>&nbsp;<span class="ident" id="2333838">i</span><span class="op" id="2333839">++</span>&nbsp;<span class="op" id="2333842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2333846">if</span>&nbsp;<span class="ident" id="2333849">i</span>&nbsp;<span class="op" id="2333851">&gt;=</span>&nbsp;<span class="builtinfunc" id="2333854">len</span><span class="op" id="2333857">(</span><span class="ident" id="2333858">b</span><span class="op" id="2333859">)</span>&nbsp;<span class="op" id="2333861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2333866">return</span>&nbsp;<span class="builtintype" id="2333873">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2333884">if</span>&nbsp;<span class="ident" id="2333887">b</span><span class="op" id="2333888">[</span><span class="ident" id="2333889">i</span><span class="op" id="2333890">]</span>&nbsp;<span class="op" id="2333892">!=</span>&nbsp;<span class="ident" id="2333895">s</span><span class="op" id="2333896">[</span><span class="ident" id="2333897">i</span><span class="op" id="2333898">]</span>&nbsp;<span class="op" id="2333900">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2333905">return</span>&nbsp;<span class="ident" id="2333912">b</span><span class="op" id="2333913">[</span><span class="ident" id="2333914">i</span><span class="op" id="2333915">]</span>&nbsp;<span class="op" id="2333917">&lt;</span>&nbsp;<span class="ident" id="2333919">s</span><span class="op" id="2333920">[</span><span class="ident" id="2333921">i</span><span class="op" id="2333922">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2333929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2333932">return</span>&nbsp;<span class="builtintype" id="2333939">false</span><br>
<span class="lineno"></span><span class="op" id="2333945">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="2333948">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(/&nbsp;2)&nbsp;by&nbsp;k&nbsp;bits.&nbsp;&nbsp;k&nbsp;&lt;=&nbsp;maxShift&nbsp;to&nbsp;avoid&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2334020">func</span>&nbsp;<span class="ident" id="2334025">leftShift</span><span class="op" id="2334034">(</span><span class="ident" id="2334035">a</span>&nbsp;<span class="op" id="2334037">*</span><span class="ident" id="2334038">decimal</span><span class="op" id="2334045">,</span>&nbsp;<span class="ident" id="2334047">k</span>&nbsp;<span class="builtintype" id="2334049">uint</span><span class="op" id="2334053">)</span>&nbsp;<span class="op" id="2334055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334058">delta</span>&nbsp;<span class="op" id="2334064">:=</span>&nbsp;<span class="ident" id="2334067">leftcheats</span><span class="op" id="2334077">[</span><span class="ident" id="2334078">k</span><span class="op" id="2334079">]</span><span class="op" id="2334080">.</span><span class="ident" id="2334081">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334088">if</span>&nbsp;<span class="ident" id="2334091">prefixIsLessThan</span><span class="op" id="2334107">(</span><span class="ident" id="2334108">a</span><span class="op" id="2334109">.</span><span class="ident" id="2334110">d</span><span class="op" id="2334111">[</span><span class="num" id="2334112">0</span><span class="op" id="2334113">:</span><span class="ident" id="2334114">a</span><span class="op" id="2334115">.</span><span class="ident" id="2334116">nd</span><span class="op" id="2334118">]</span><span class="op" id="2334119">,</span>&nbsp;<span class="ident" id="2334121">leftcheats</span><span class="op" id="2334131">[</span><span class="ident" id="2334132">k</span><span class="op" id="2334133">]</span><span class="op" id="2334134">.</span><span class="ident" id="2334135">cutoff</span><span class="op" id="2334141">)</span>&nbsp;<span class="op" id="2334143">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334147">delta</span><span class="op" id="2334152">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2334156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334160">r</span>&nbsp;<span class="op" id="2334162">:=</span>&nbsp;<span class="ident" id="2334165">a</span><span class="op" id="2334166">.</span><span class="ident" id="2334167">nd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2334178">//&nbsp;read&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334193">w</span>&nbsp;<span class="op" id="2334195">:=</span>&nbsp;<span class="ident" id="2334198">a</span><span class="op" id="2334199">.</span><span class="ident" id="2334200">nd</span>&nbsp;<span class="op" id="2334203">+</span>&nbsp;<span class="ident" id="2334205">delta</span>&nbsp;<span class="comment" id="2334211">//&nbsp;write&nbsp;index</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334227">n</span>&nbsp;<span class="op" id="2334229">:=</span>&nbsp;<span class="num" id="2334232">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2334236">//&nbsp;Pick&nbsp;up&nbsp;a&nbsp;digit,&nbsp;put&nbsp;down&nbsp;a&nbsp;digit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334275">for</span>&nbsp;<span class="ident" id="2334279">r</span><span class="op" id="2334280">--</span><span class="op" id="2334282">;</span>&nbsp;<span class="ident" id="2334284">r</span>&nbsp;<span class="op" id="2334286">&gt;=</span>&nbsp;<span class="num" id="2334289">0</span><span class="op" id="2334290">;</span>&nbsp;<span class="ident" id="2334292">r</span><span class="op" id="2334293">--</span>&nbsp;<span class="op" id="2334296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334300">n</span>&nbsp;<span class="op" id="2334302">+=</span>&nbsp;<span class="op" id="2334305">(</span><span class="builtintype" id="2334306">int</span><span class="op" id="2334309">(</span><span class="ident" id="2334310">a</span><span class="op" id="2334311">.</span><span class="ident" id="2334312">d</span><span class="op" id="2334313">[</span><span class="ident" id="2334314">r</span><span class="op" id="2334315">]</span><span class="op" id="2334316">)</span>&nbsp;<span class="op" id="2334318">-</span>&nbsp;<span class="string" id="2334320">&#39;0&#39;</span><span class="op" id="2334323">)</span>&nbsp;<span class="op" id="2334325">&lt;&lt;</span>&nbsp;<span class="ident" id="2334328">k</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334332">quo</span>&nbsp;<span class="op" id="2334336">:=</span>&nbsp;<span class="ident" id="2334339">n</span>&nbsp;<span class="op" id="2334341">/</span>&nbsp;<span class="num" id="2334343">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334348">rem</span>&nbsp;<span class="op" id="2334352">:=</span>&nbsp;<span class="ident" id="2334355">n</span>&nbsp;<span class="op" id="2334357">-</span>&nbsp;<span class="num" id="2334359">10</span><span class="op" id="2334361">*</span><span class="ident" id="2334362">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334368">w</span><span class="op" id="2334369">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334374">if</span>&nbsp;<span class="ident" id="2334377">w</span>&nbsp;<span class="op" id="2334379">&lt;</span>&nbsp;<span class="builtinfunc" id="2334381">len</span><span class="op" id="2334384">(</span><span class="ident" id="2334385">a</span><span class="op" id="2334386">.</span><span class="ident" id="2334387">d</span><span class="op" id="2334388">)</span>&nbsp;<span class="op" id="2334390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334395">a</span><span class="op" id="2334396">.</span><span class="ident" id="2334397">d</span><span class="op" id="2334398">[</span><span class="ident" id="2334399">w</span><span class="op" id="2334400">]</span>&nbsp;<span class="op" id="2334402">=</span>&nbsp;<span class="builtintype" id="2334404">byte</span><span class="op" id="2334408">(</span><span class="ident" id="2334409">rem</span>&nbsp;<span class="op" id="2334413">+</span>&nbsp;<span class="string" id="2334415">&#39;0&#39;</span><span class="op" id="2334418">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2334422">}</span>&nbsp;<span class="keyword" id="2334424">else</span>&nbsp;<span class="keyword" id="2334429">if</span>&nbsp;<span class="ident" id="2334432">rem</span>&nbsp;<span class="op" id="2334436">!=</span>&nbsp;<span class="num" id="2334439">0</span>&nbsp;<span class="op" id="2334441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334446">a</span><span class="op" id="2334447">.</span><span class="ident" id="2334448">trunc</span>&nbsp;<span class="op" id="2334454">=</span>&nbsp;<span class="builtintype" id="2334456">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2334463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334467">n</span>&nbsp;<span class="op" id="2334469">=</span>&nbsp;<span class="ident" id="2334471">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2334476">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2334480">//&nbsp;Put&nbsp;down&nbsp;extra&nbsp;digits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334507">for</span>&nbsp;<span class="ident" id="2334511">n</span>&nbsp;<span class="op" id="2334513">&gt;</span>&nbsp;<span class="num" id="2334515">0</span>&nbsp;<span class="op" id="2334517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334521">quo</span>&nbsp;<span class="op" id="2334525">:=</span>&nbsp;<span class="ident" id="2334528">n</span>&nbsp;<span class="op" id="2334530">/</span>&nbsp;<span class="num" id="2334532">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334537">rem</span>&nbsp;<span class="op" id="2334541">:=</span>&nbsp;<span class="ident" id="2334544">n</span>&nbsp;<span class="op" id="2334546">-</span>&nbsp;<span class="num" id="2334548">10</span><span class="op" id="2334550">*</span><span class="ident" id="2334551">quo</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334557">w</span><span class="op" id="2334558">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334563">if</span>&nbsp;<span class="ident" id="2334566">w</span>&nbsp;<span class="op" id="2334568">&lt;</span>&nbsp;<span class="builtinfunc" id="2334570">len</span><span class="op" id="2334573">(</span><span class="ident" id="2334574">a</span><span class="op" id="2334575">.</span><span class="ident" id="2334576">d</span><span class="op" id="2334577">)</span>&nbsp;<span class="op" id="2334579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334584">a</span><span class="op" id="2334585">.</span><span class="ident" id="2334586">d</span><span class="op" id="2334587">[</span><span class="ident" id="2334588">w</span><span class="op" id="2334589">]</span>&nbsp;<span class="op" id="2334591">=</span>&nbsp;<span class="builtintype" id="2334593">byte</span><span class="op" id="2334597">(</span><span class="ident" id="2334598">rem</span>&nbsp;<span class="op" id="2334602">+</span>&nbsp;<span class="string" id="2334604">&#39;0&#39;</span><span class="op" id="2334607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2334611">}</span>&nbsp;<span class="keyword" id="2334613">else</span>&nbsp;<span class="keyword" id="2334618">if</span>&nbsp;<span class="ident" id="2334621">rem</span>&nbsp;<span class="op" id="2334625">!=</span>&nbsp;<span class="num" id="2334628">0</span>&nbsp;<span class="op" id="2334630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334635">a</span><span class="op" id="2334636">.</span><span class="ident" id="2334637">trunc</span>&nbsp;<span class="op" id="2334643">=</span>&nbsp;<span class="builtintype" id="2334645">true</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2334652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334656">n</span>&nbsp;<span class="op" id="2334658">=</span>&nbsp;<span class="ident" id="2334660">quo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2334665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334669">a</span><span class="op" id="2334670">.</span><span class="ident" id="2334671">nd</span>&nbsp;<span class="op" id="2334674">+=</span>&nbsp;<span class="ident" id="2334677">delta</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334684">if</span>&nbsp;<span class="ident" id="2334687">a</span><span class="op" id="2334688">.</span><span class="ident" id="2334689">nd</span>&nbsp;<span class="op" id="2334692">&gt;=</span>&nbsp;<span class="builtinfunc" id="2334695">len</span><span class="op" id="2334698">(</span><span class="ident" id="2334699">a</span><span class="op" id="2334700">.</span><span class="ident" id="2334701">d</span><span class="op" id="2334702">)</span>&nbsp;<span class="op" id="2334704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334708">a</span><span class="op" id="2334709">.</span><span class="ident" id="2334710">nd</span>&nbsp;<span class="op" id="2334713">=</span>&nbsp;<span class="builtinfunc" id="2334715">len</span><span class="op" id="2334718">(</span><span class="ident" id="2334719">a</span><span class="op" id="2334720">.</span><span class="ident" id="2334721">d</span><span class="op" id="2334722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2334725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334728">a</span><span class="op" id="2334729">.</span><span class="ident" id="2334730">dp</span>&nbsp;<span class="op" id="2334733">+=</span>&nbsp;<span class="ident" id="2334736">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334743">trim</span><span class="op" id="2334747">(</span><span class="ident" id="2334748">a</span><span class="op" id="2334749">)</span><br>
<span class="lineno">275</span><span class="op" id="2334751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2334754">//&nbsp;Binary&nbsp;shift&nbsp;left&nbsp;(k&nbsp;&gt;&nbsp;0)&nbsp;or&nbsp;right&nbsp;(k&nbsp;&lt;&nbsp;0).</span><br>
<span class="lineno"></span><span class="keyword" id="2334801">func</span>&nbsp;<span class="op" id="2334806">(</span><span class="ident" id="2334807">a</span>&nbsp;<span class="op" id="2334809">*</span><span class="ident" id="2334810">decimal</span><span class="op" id="2334817">)</span>&nbsp;<span class="ident" id="2334819">Shift</span><span class="op" id="2334824">(</span><span class="ident" id="2334825">k</span>&nbsp;<span class="builtintype" id="2334827">int</span><span class="op" id="2334830">)</span>&nbsp;<span class="op" id="2334832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334835">switch</span>&nbsp;<span class="op" id="2334842">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334845">case</span>&nbsp;<span class="ident" id="2334850">a</span><span class="op" id="2334851">.</span><span class="ident" id="2334852">nd</span>&nbsp;<span class="op" id="2334855">==</span>&nbsp;<span class="num" id="2334858">0</span><span class="op" id="2334859">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2334863">//&nbsp;nothing&nbsp;to&nbsp;do:&nbsp;a&nbsp;==&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334889">case</span>&nbsp;<span class="ident" id="2334894">k</span>&nbsp;<span class="op" id="2334896">&gt;</span>&nbsp;<span class="num" id="2334898">0</span><span class="op" id="2334899">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334903">for</span>&nbsp;<span class="ident" id="2334907">k</span>&nbsp;<span class="op" id="2334909">&gt;</span>&nbsp;<span class="ident" id="2334911">maxShift</span>&nbsp;<span class="op" id="2334920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334925">leftShift</span><span class="op" id="2334934">(</span><span class="ident" id="2334935">a</span><span class="op" id="2334936">,</span>&nbsp;<span class="ident" id="2334938">maxShift</span><span class="op" id="2334946">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334951">k</span>&nbsp;<span class="op" id="2334953">-=</span>&nbsp;<span class="ident" id="2334956">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2334967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2334971">leftShift</span><span class="op" id="2334980">(</span><span class="ident" id="2334981">a</span><span class="op" id="2334982">,</span>&nbsp;<span class="builtintype" id="2334984">uint</span><span class="op" id="2334988">(</span><span class="ident" id="2334989">k</span><span class="op" id="2334990">)</span><span class="op" id="2334991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2334994">case</span>&nbsp;<span class="ident" id="2334999">k</span>&nbsp;<span class="op" id="2335001">&lt;</span>&nbsp;<span class="num" id="2335003">0</span><span class="op" id="2335004">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335008">for</span>&nbsp;<span class="ident" id="2335012">k</span>&nbsp;<span class="op" id="2335014">&lt;</span>&nbsp;<span class="op" id="2335016">-</span><span class="ident" id="2335017">maxShift</span>&nbsp;<span class="op" id="2335026">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335031">rightShift</span><span class="op" id="2335041">(</span><span class="ident" id="2335042">a</span><span class="op" id="2335043">,</span>&nbsp;<span class="ident" id="2335045">maxShift</span><span class="op" id="2335053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335058">k</span>&nbsp;<span class="op" id="2335060">+=</span>&nbsp;<span class="ident" id="2335063">maxShift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2335074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335078">rightShift</span><span class="op" id="2335088">(</span><span class="ident" id="2335089">a</span><span class="op" id="2335090">,</span>&nbsp;<span class="builtintype" id="2335092">uint</span><span class="op" id="2335096">(</span><span class="op" id="2335097">-</span><span class="ident" id="2335098">k</span><span class="op" id="2335099">)</span><span class="op" id="2335100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2335103">}</span><br>
<span class="lineno">295</span><span class="op" id="2335105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2335108">//&nbsp;If&nbsp;we&nbsp;chop&nbsp;a&nbsp;at&nbsp;nd&nbsp;digits,&nbsp;should&nbsp;we&nbsp;round&nbsp;up?</span><br>
<span class="lineno"></span><span class="keyword" id="2335158">func</span>&nbsp;<span class="ident" id="2335163">shouldRoundUp</span><span class="op" id="2335176">(</span><span class="ident" id="2335177">a</span>&nbsp;<span class="op" id="2335179">*</span><span class="ident" id="2335180">decimal</span><span class="op" id="2335187">,</span>&nbsp;<span class="ident" id="2335189">nd</span>&nbsp;<span class="builtintype" id="2335192">int</span><span class="op" id="2335195">)</span>&nbsp;<span class="builtintype" id="2335197">bool</span>&nbsp;<span class="op" id="2335202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335205">if</span>&nbsp;<span class="ident" id="2335208">nd</span>&nbsp;<span class="op" id="2335211">&lt;</span>&nbsp;<span class="num" id="2335213">0</span>&nbsp;<span class="op" id="2335215">||</span>&nbsp;<span class="ident" id="2335218">nd</span>&nbsp;<span class="op" id="2335221">&gt;=</span>&nbsp;<span class="ident" id="2335224">a</span><span class="op" id="2335225">.</span><span class="ident" id="2335226">nd</span>&nbsp;<span class="op" id="2335229">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335233">return</span>&nbsp;<span class="builtintype" id="2335240">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2335247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335250">if</span>&nbsp;<span class="ident" id="2335253">a</span><span class="op" id="2335254">.</span><span class="ident" id="2335255">d</span><span class="op" id="2335256">[</span><span class="ident" id="2335257">nd</span><span class="op" id="2335259">]</span>&nbsp;<span class="op" id="2335261">==</span>&nbsp;<span class="string" id="2335264">&#39;5&#39;</span>&nbsp;<span class="op" id="2335268">&amp;&amp;</span>&nbsp;<span class="ident" id="2335271">nd</span><span class="op" id="2335273">+</span><span class="num" id="2335274">1</span>&nbsp;<span class="op" id="2335276">==</span>&nbsp;<span class="ident" id="2335279">a</span><span class="op" id="2335280">.</span><span class="ident" id="2335281">nd</span>&nbsp;<span class="op" id="2335284">{</span>&nbsp;<span class="comment" id="2335286">//&nbsp;exactly&nbsp;halfway&nbsp;-&nbsp;round&nbsp;to&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2335323">//&nbsp;if&nbsp;we&nbsp;truncated,&nbsp;a&nbsp;little&nbsp;higher&nbsp;than&nbsp;what&#39;s&nbsp;recorded&nbsp;-&nbsp;always&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335400">if</span>&nbsp;<span class="ident" id="2335403">a</span><span class="op" id="2335404">.</span><span class="ident" id="2335405">trunc</span>&nbsp;<span class="op" id="2335411">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335416">return</span>&nbsp;<span class="builtintype" id="2335423">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2335430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335434">return</span>&nbsp;<span class="ident" id="2335441">nd</span>&nbsp;<span class="op" id="2335444">&gt;</span>&nbsp;<span class="num" id="2335446">0</span>&nbsp;<span class="op" id="2335448">&amp;&amp;</span>&nbsp;<span class="op" id="2335451">(</span><span class="ident" id="2335452">a</span><span class="op" id="2335453">.</span><span class="ident" id="2335454">d</span><span class="op" id="2335455">[</span><span class="ident" id="2335456">nd</span><span class="op" id="2335458">-</span><span class="num" id="2335459">1</span><span class="op" id="2335460">]</span><span class="op" id="2335461">-</span><span class="string" id="2335462">&#39;0&#39;</span><span class="op" id="2335465">)</span><span class="op" id="2335466">%</span><span class="num" id="2335467">2</span>&nbsp;<span class="op" id="2335469">!=</span>&nbsp;<span class="num" id="2335472">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2335475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2335478">//&nbsp;not&nbsp;halfway&nbsp;-&nbsp;digit&nbsp;tells&nbsp;all</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335512">return</span>&nbsp;<span class="ident" id="2335519">a</span><span class="op" id="2335520">.</span><span class="ident" id="2335521">d</span><span class="op" id="2335522">[</span><span class="ident" id="2335523">nd</span><span class="op" id="2335525">]</span>&nbsp;<span class="op" id="2335527">&gt;=</span>&nbsp;<span class="string" id="2335530">&#39;5&#39;</span><br>
<span class="lineno"></span><span class="op" id="2335534">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2335537">//&nbsp;Round&nbsp;a&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="comment" id="2335573">//&nbsp;If&nbsp;nd&nbsp;is&nbsp;zero,&nbsp;it&nbsp;means&nbsp;we&#39;re&nbsp;rounding</span><br>
<span class="lineno">315</span><span class="comment" id="2335615">//&nbsp;just&nbsp;to&nbsp;the&nbsp;left&nbsp;of&nbsp;the&nbsp;digits,&nbsp;as&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2335656">//&nbsp;0.09&nbsp;-&gt;&nbsp;0.1.</span><br>
<span class="lineno"></span><span class="keyword" id="2335672">func</span>&nbsp;<span class="op" id="2335677">(</span><span class="ident" id="2335678">a</span>&nbsp;<span class="op" id="2335680">*</span><span class="ident" id="2335681">decimal</span><span class="op" id="2335688">)</span>&nbsp;<span class="ident" id="2335690">Round</span><span class="op" id="2335695">(</span><span class="ident" id="2335696">nd</span>&nbsp;<span class="builtintype" id="2335699">int</span><span class="op" id="2335702">)</span>&nbsp;<span class="op" id="2335704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335707">if</span>&nbsp;<span class="ident" id="2335710">nd</span>&nbsp;<span class="op" id="2335713">&lt;</span>&nbsp;<span class="num" id="2335715">0</span>&nbsp;<span class="op" id="2335717">||</span>&nbsp;<span class="ident" id="2335720">nd</span>&nbsp;<span class="op" id="2335723">&gt;=</span>&nbsp;<span class="ident" id="2335726">a</span><span class="op" id="2335727">.</span><span class="ident" id="2335728">nd</span>&nbsp;<span class="op" id="2335731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335735">return</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2335743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335746">if</span>&nbsp;<span class="ident" id="2335749">shouldRoundUp</span><span class="op" id="2335762">(</span><span class="ident" id="2335763">a</span><span class="op" id="2335764">,</span>&nbsp;<span class="ident" id="2335766">nd</span><span class="op" id="2335768">)</span>&nbsp;<span class="op" id="2335770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335774">a</span><span class="op" id="2335775">.</span><span class="ident" id="2335776">RoundUp</span><span class="op" id="2335783">(</span><span class="ident" id="2335784">nd</span><span class="op" id="2335786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2335789">}</span>&nbsp;<span class="keyword" id="2335791">else</span>&nbsp;<span class="op" id="2335796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335800">a</span><span class="op" id="2335801">.</span><span class="ident" id="2335802">RoundDown</span><span class="op" id="2335811">(</span><span class="ident" id="2335812">nd</span><span class="op" id="2335814">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2335817">}</span><br>
<span class="lineno"></span><span class="op" id="2335819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2335822">//&nbsp;Round&nbsp;a&nbsp;down&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2335863">func</span>&nbsp;<span class="op" id="2335868">(</span><span class="ident" id="2335869">a</span>&nbsp;<span class="op" id="2335871">*</span><span class="ident" id="2335872">decimal</span><span class="op" id="2335879">)</span>&nbsp;<span class="ident" id="2335881">RoundDown</span><span class="op" id="2335890">(</span><span class="ident" id="2335891">nd</span>&nbsp;<span class="builtintype" id="2335894">int</span><span class="op" id="2335897">)</span>&nbsp;<span class="op" id="2335899">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335902">if</span>&nbsp;<span class="ident" id="2335905">nd</span>&nbsp;<span class="op" id="2335908">&lt;</span>&nbsp;<span class="num" id="2335910">0</span>&nbsp;<span class="op" id="2335912">||</span>&nbsp;<span class="ident" id="2335915">nd</span>&nbsp;<span class="op" id="2335918">&gt;=</span>&nbsp;<span class="ident" id="2335921">a</span><span class="op" id="2335922">.</span><span class="ident" id="2335923">nd</span>&nbsp;<span class="op" id="2335926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2335930">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2335938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335941">a</span><span class="op" id="2335942">.</span><span class="ident" id="2335943">nd</span>&nbsp;<span class="op" id="2335946">=</span>&nbsp;<span class="ident" id="2335948">nd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2335952">trim</span><span class="op" id="2335956">(</span><span class="ident" id="2335957">a</span><span class="op" id="2335958">)</span><br>
<span class="lineno">335</span><span class="op" id="2335960">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2335963">//&nbsp;Round&nbsp;a&nbsp;up&nbsp;to&nbsp;nd&nbsp;digits&nbsp;(or&nbsp;fewer).</span><br>
<span class="lineno"></span><span class="keyword" id="2336002">func</span>&nbsp;<span class="op" id="2336007">(</span><span class="ident" id="2336008">a</span>&nbsp;<span class="op" id="2336010">*</span><span class="ident" id="2336011">decimal</span><span class="op" id="2336018">)</span>&nbsp;<span class="ident" id="2336020">RoundUp</span><span class="op" id="2336027">(</span><span class="ident" id="2336028">nd</span>&nbsp;<span class="builtintype" id="2336031">int</span><span class="op" id="2336034">)</span>&nbsp;<span class="op" id="2336036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336039">if</span>&nbsp;<span class="ident" id="2336042">nd</span>&nbsp;<span class="op" id="2336045">&lt;</span>&nbsp;<span class="num" id="2336047">0</span>&nbsp;<span class="op" id="2336049">||</span>&nbsp;<span class="ident" id="2336052">nd</span>&nbsp;<span class="op" id="2336055">&gt;=</span>&nbsp;<span class="ident" id="2336058">a</span><span class="op" id="2336059">.</span><span class="ident" id="2336060">nd</span>&nbsp;<span class="op" id="2336063">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336067">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2336075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2336079">//&nbsp;round&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336092">for</span>&nbsp;<span class="ident" id="2336096">i</span>&nbsp;<span class="op" id="2336098">:=</span>&nbsp;<span class="ident" id="2336101">nd</span>&nbsp;<span class="op" id="2336104">-</span>&nbsp;<span class="num" id="2336106">1</span><span class="op" id="2336107">;</span>&nbsp;<span class="ident" id="2336109">i</span>&nbsp;<span class="op" id="2336111">&gt;=</span>&nbsp;<span class="num" id="2336114">0</span><span class="op" id="2336115">;</span>&nbsp;<span class="ident" id="2336117">i</span><span class="op" id="2336118">--</span>&nbsp;<span class="op" id="2336121">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336125">c</span>&nbsp;<span class="op" id="2336127">:=</span>&nbsp;<span class="ident" id="2336130">a</span><span class="op" id="2336131">.</span><span class="ident" id="2336132">d</span><span class="op" id="2336133">[</span><span class="ident" id="2336134">i</span><span class="op" id="2336135">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336139">if</span>&nbsp;<span class="ident" id="2336142">c</span>&nbsp;<span class="op" id="2336144">&lt;</span>&nbsp;<span class="string" id="2336146">&#39;9&#39;</span>&nbsp;<span class="op" id="2336150">{</span>&nbsp;<span class="comment" id="2336152">//&nbsp;can&nbsp;stop&nbsp;after&nbsp;this&nbsp;digit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336184">a</span><span class="op" id="2336185">.</span><span class="ident" id="2336186">d</span><span class="op" id="2336187">[</span><span class="ident" id="2336188">i</span><span class="op" id="2336189">]</span><span class="op" id="2336190">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336196">a</span><span class="op" id="2336197">.</span><span class="ident" id="2336198">nd</span>&nbsp;<span class="op" id="2336201">=</span>&nbsp;<span class="ident" id="2336203">i</span>&nbsp;<span class="op" id="2336205">+</span>&nbsp;<span class="num" id="2336207">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336212">return</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2336221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2336224">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2336228">//&nbsp;Number&nbsp;is&nbsp;all&nbsp;9s.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2336250">//&nbsp;Change&nbsp;to&nbsp;single&nbsp;1&nbsp;with&nbsp;adjusted&nbsp;decimal&nbsp;point.</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336302">a</span><span class="op" id="2336303">.</span><span class="ident" id="2336304">d</span><span class="op" id="2336305">[</span><span class="num" id="2336306">0</span><span class="op" id="2336307">]</span>&nbsp;<span class="op" id="2336309">=</span>&nbsp;<span class="string" id="2336311">&#39;1&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336316">a</span><span class="op" id="2336317">.</span><span class="ident" id="2336318">nd</span>&nbsp;<span class="op" id="2336321">=</span>&nbsp;<span class="num" id="2336323">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336326">a</span><span class="op" id="2336327">.</span><span class="ident" id="2336328">dp</span><span class="op" id="2336330">++</span><br>
<span class="lineno"></span><span class="op" id="2336333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="2336336">//&nbsp;Extract&nbsp;integer&nbsp;part,&nbsp;rounded&nbsp;appropriately.</span><br>
<span class="lineno"></span><span class="comment" id="2336384">//&nbsp;No&nbsp;guarantees&nbsp;about&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="keyword" id="2336417">func</span>&nbsp;<span class="op" id="2336422">(</span><span class="ident" id="2336423">a</span>&nbsp;<span class="op" id="2336425">*</span><span class="ident" id="2336426">decimal</span><span class="op" id="2336433">)</span>&nbsp;<span class="ident" id="2336435">RoundedInteger</span><span class="op" id="2336449">(</span><span class="op" id="2336450">)</span>&nbsp;<span class="ident" id="2336452">uint64</span>&nbsp;<span class="op" id="2336459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336462">if</span>&nbsp;<span class="ident" id="2336465">a</span><span class="op" id="2336466">.</span><span class="ident" id="2336467">dp</span>&nbsp;<span class="op" id="2336470">&gt;</span>&nbsp;<span class="num" id="2336472">20</span>&nbsp;<span class="op" id="2336475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336479">return</span>&nbsp;<span class="num" id="2336486">0xFFFFFFFFFFFFFFFF</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2336506">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336509">var</span>&nbsp;<span class="ident" id="2336513">i</span>&nbsp;<span class="builtintype" id="2336515">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336520">n</span>&nbsp;<span class="op" id="2336522">:=</span>&nbsp;<span class="ident" id="2336525">uint64</span><span class="op" id="2336531">(</span><span class="num" id="2336532">0</span><span class="op" id="2336533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336536">for</span>&nbsp;<span class="ident" id="2336540">i</span>&nbsp;<span class="op" id="2336542">=</span>&nbsp;<span class="num" id="2336544">0</span><span class="op" id="2336545">;</span>&nbsp;<span class="ident" id="2336547">i</span>&nbsp;<span class="op" id="2336549">&lt;</span>&nbsp;<span class="ident" id="2336551">a</span><span class="op" id="2336552">.</span><span class="ident" id="2336553">dp</span>&nbsp;<span class="op" id="2336556">&amp;&amp;</span>&nbsp;<span class="ident" id="2336559">i</span>&nbsp;<span class="op" id="2336561">&lt;</span>&nbsp;<span class="ident" id="2336563">a</span><span class="op" id="2336564">.</span><span class="ident" id="2336565">nd</span><span class="op" id="2336567">;</span>&nbsp;<span class="ident" id="2336569">i</span><span class="op" id="2336570">++</span>&nbsp;<span class="op" id="2336573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336577">n</span>&nbsp;<span class="op" id="2336579">=</span>&nbsp;<span class="ident" id="2336581">n</span><span class="op" id="2336582">*</span><span class="num" id="2336583">10</span>&nbsp;<span class="op" id="2336586">+</span>&nbsp;<span class="ident" id="2336588">uint64</span><span class="op" id="2336594">(</span><span class="ident" id="2336595">a</span><span class="op" id="2336596">.</span><span class="ident" id="2336597">d</span><span class="op" id="2336598">[</span><span class="ident" id="2336599">i</span><span class="op" id="2336600">]</span><span class="op" id="2336601">-</span><span class="string" id="2336602">&#39;0&#39;</span><span class="op" id="2336605">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2336608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336611">for</span>&nbsp;<span class="op" id="2336615">;</span>&nbsp;<span class="ident" id="2336617">i</span>&nbsp;<span class="op" id="2336619">&lt;</span>&nbsp;<span class="ident" id="2336621">a</span><span class="op" id="2336622">.</span><span class="ident" id="2336623">dp</span><span class="op" id="2336625">;</span>&nbsp;<span class="ident" id="2336627">i</span><span class="op" id="2336628">++</span>&nbsp;<span class="op" id="2336631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336635">n</span>&nbsp;<span class="op" id="2336637">*=</span>&nbsp;<span class="num" id="2336640">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2336644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336647">if</span>&nbsp;<span class="ident" id="2336650">shouldRoundUp</span><span class="op" id="2336663">(</span><span class="ident" id="2336664">a</span><span class="op" id="2336665">,</span>&nbsp;<span class="ident" id="2336667">a</span><span class="op" id="2336668">.</span><span class="ident" id="2336669">dp</span><span class="op" id="2336671">)</span>&nbsp;<span class="op" id="2336673">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2336677">n</span><span class="op" id="2336678">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2336682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2336685">return</span>&nbsp;<span class="ident" id="2336692">n</span><br>
<span class="lineno"></span><span class="op" id="2336694">}</span>
</div>
</body>
</html>
