<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="954975">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="955031">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="955085">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="955136">package</span>&nbsp;<span class="ident" id="955144">runtime_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="955158">import</span>&nbsp;<span class="op" id="955165">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="955168">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="955174">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="955187">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="955193">&#34;os/exec&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="955204">.</span>&nbsp;<span class="string" id="955206">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="955217">&#34;runtime/debug&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="955234">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="955245">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="955256">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="955267">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="955276">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="955279">var</span>&nbsp;<span class="ident" id="955283">errf</span>&nbsp;<span class="builtintype" id="955288">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="955295">func</span>&nbsp;<span class="ident" id="955300">errfn</span><span class="op" id="955305">(</span><span class="op" id="955306">)</span>&nbsp;<span class="builtintype" id="955308">error</span>&nbsp;<span class="op" id="955314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955317">return</span>&nbsp;<span class="ident" id="955324"><a href="/runtime/runtime_test.go.html#955283">errf</a></span><br>
<span class="lineno"></span><span class="op" id="955329">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="955332">func</span>&nbsp;<span class="ident" id="955337">errfn1</span><span class="op" id="955343">(</span><span class="op" id="955344">)</span>&nbsp;<span class="builtintype" id="955346">error</span>&nbsp;<span class="op" id="955352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955355">return</span>&nbsp;<span class="ident" id="955362"><a href="/runtime/runtime_test.go.html#955168">io</a></span><span class="op" id="955364">.</span><span class="ident" id="955365">EOF</span><br>
<span class="lineno"></span><span class="op" id="955369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="955372">func</span>&nbsp;<span class="ident" id="955377">BenchmarkIfaceCmp100</span><span class="op" id="955397">(</span><span class="ident" id="955398">b</span>&nbsp;<span class="op" id="955400">*</span><span class="ident" id="955401"><a href="/runtime/runtime_test.go.html#955256">testing</a></span><span class="op" id="955408">.</span><span class="ident" id="955409">B</span><span class="op" id="955410">)</span>&nbsp;<span class="op" id="955412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955415">for</span>&nbsp;<span class="ident" id="955419">i</span>&nbsp;<span class="op" id="955421">:=</span>&nbsp;<span class="num" id="955424">0</span><span class="op" id="955425">;</span>&nbsp;<span class="ident" id="955427"><a href="/runtime/runtime_test.go.html#955419">i</a></span>&nbsp;<span class="op" id="955429">&lt;</span>&nbsp;<span class="ident" id="955431"><a href="/runtime/runtime_test.go.html#955398">b</a></span><span class="op" id="955432">.</span><span class="ident" id="955433">N</span><span class="op" id="955434">;</span>&nbsp;<span class="ident" id="955436"><a href="/runtime/runtime_test.go.html#955419">i</a></span><span class="op" id="955437">++</span>&nbsp;<span class="op" id="955440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955444">for</span>&nbsp;<span class="ident" id="955448">j</span>&nbsp;<span class="op" id="955450">:=</span>&nbsp;<span class="num" id="955453">0</span><span class="op" id="955454">;</span>&nbsp;<span class="ident" id="955456"><a href="/runtime/runtime_test.go.html#955448">j</a></span>&nbsp;<span class="op" id="955458">&lt;</span>&nbsp;<span class="num" id="955460">100</span><span class="op" id="955463">;</span>&nbsp;<span class="ident" id="955465"><a href="/runtime/runtime_test.go.html#955448">j</a></span><span class="op" id="955466">++</span>&nbsp;<span class="op" id="955469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955474">if</span>&nbsp;<span class="ident" id="955477"><a href="/runtime/runtime_test.go.html#955300">errfn</a></span><span class="op" id="955482">(</span><span class="op" id="955483">)</span>&nbsp;<span class="op" id="955485">==</span>&nbsp;<span class="ident" id="955488"><a href="/runtime/runtime_test.go.html#955168">io</a></span><span class="op" id="955490">.</span><span class="ident" id="955491">EOF</span>&nbsp;<span class="op" id="955495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="955501"><a href="/runtime/runtime_test.go.html#955398">b</a></span><span class="op" id="955502">.</span><span class="ident" id="955503">Fatal</span><span class="op" id="955508">(</span><span class="string" id="955509">&#34;bad&nbsp;comparison&#34;</span><span class="op" id="955525">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="955530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="955534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="955537">}</span><br>
<span class="lineno"></span><span class="op" id="955539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="955542">func</span>&nbsp;<span class="ident" id="955547">BenchmarkIfaceCmpNil100</span><span class="op" id="955570">(</span><span class="ident" id="955571">b</span>&nbsp;<span class="op" id="955573">*</span><span class="ident" id="955574"><a href="/runtime/runtime_test.go.html#955256">testing</a></span><span class="op" id="955581">.</span><span class="ident" id="955582">B</span><span class="op" id="955583">)</span>&nbsp;<span class="op" id="955585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955588">for</span>&nbsp;<span class="ident" id="955592">i</span>&nbsp;<span class="op" id="955594">:=</span>&nbsp;<span class="num" id="955597">0</span><span class="op" id="955598">;</span>&nbsp;<span class="ident" id="955600"><a href="/runtime/runtime_test.go.html#955592">i</a></span>&nbsp;<span class="op" id="955602">&lt;</span>&nbsp;<span class="ident" id="955604"><a href="/runtime/runtime_test.go.html#955571">b</a></span><span class="op" id="955605">.</span><span class="ident" id="955606">N</span><span class="op" id="955607">;</span>&nbsp;<span class="ident" id="955609"><a href="/runtime/runtime_test.go.html#955592">i</a></span><span class="op" id="955610">++</span>&nbsp;<span class="op" id="955613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955617">for</span>&nbsp;<span class="ident" id="955621">j</span>&nbsp;<span class="op" id="955623">:=</span>&nbsp;<span class="num" id="955626">0</span><span class="op" id="955627">;</span>&nbsp;<span class="ident" id="955629"><a href="/runtime/runtime_test.go.html#955621">j</a></span>&nbsp;<span class="op" id="955631">&lt;</span>&nbsp;<span class="num" id="955633">100</span><span class="op" id="955636">;</span>&nbsp;<span class="ident" id="955638"><a href="/runtime/runtime_test.go.html#955621">j</a></span><span class="op" id="955639">++</span>&nbsp;<span class="op" id="955642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955647">if</span>&nbsp;<span class="ident" id="955650"><a href="/runtime/runtime_test.go.html#955337">errfn1</a></span><span class="op" id="955656">(</span><span class="op" id="955657">)</span>&nbsp;<span class="op" id="955659">==</span>&nbsp;<span class="ident" id="955662">nil</span>&nbsp;<span class="op" id="955666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="955672"><a href="/runtime/runtime_test.go.html#955571">b</a></span><span class="op" id="955673">.</span><span class="ident" id="955674">Fatal</span><span class="op" id="955679">(</span><span class="string" id="955680">&#34;bad&nbsp;comparison&#34;</span><span class="op" id="955696">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="955701">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="955705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="955708">}</span><br>
<span class="lineno"></span><span class="op" id="955710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="keyword" id="955713">func</span>&nbsp;<span class="ident" id="955718">BenchmarkDefer</span><span class="op" id="955732">(</span><span class="ident" id="955733">b</span>&nbsp;<span class="op" id="955735">*</span><span class="ident" id="955736"><a href="/runtime/runtime_test.go.html#955256">testing</a></span><span class="op" id="955743">.</span><span class="ident" id="955744">B</span><span class="op" id="955745">)</span>&nbsp;<span class="op" id="955747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955750">for</span>&nbsp;<span class="ident" id="955754">i</span>&nbsp;<span class="op" id="955756">:=</span>&nbsp;<span class="num" id="955759">0</span><span class="op" id="955760">;</span>&nbsp;<span class="ident" id="955762"><a href="/runtime/runtime_test.go.html#955754">i</a></span>&nbsp;<span class="op" id="955764">&lt;</span>&nbsp;<span class="ident" id="955766"><a href="/runtime/runtime_test.go.html#955733">b</a></span><span class="op" id="955767">.</span><span class="ident" id="955768">N</span><span class="op" id="955769">;</span>&nbsp;<span class="ident" id="955771"><a href="/runtime/runtime_test.go.html#955754">i</a></span><span class="op" id="955772">++</span>&nbsp;<span class="op" id="955775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="955779"><a href="/runtime/runtime_test.go.html#955799">defer1</a></span><span class="op" id="955785">(</span><span class="op" id="955786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="955789">}</span><br>
<span class="lineno"></span><span class="op" id="955791">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="955794">func</span>&nbsp;<span class="ident" id="955799">defer1</span><span class="op" id="955805">(</span><span class="op" id="955806">)</span>&nbsp;<span class="op" id="955808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955811">defer</span>&nbsp;<span class="keyword" id="955817">func</span><span class="op" id="955821">(</span><span class="ident" id="955822">x</span><span class="op" id="955823">,</span>&nbsp;<span class="ident" id="955825">y</span><span class="op" id="955826">,</span>&nbsp;<span class="ident" id="955828">z</span>&nbsp;<span class="builtintype" id="955830">int</span><span class="op" id="955833">)</span>&nbsp;<span class="op" id="955835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955839">if</span>&nbsp;<span class="builtinfunc" id="955842">recover</span><span class="op" id="955849">(</span><span class="op" id="955850">)</span>&nbsp;<span class="op" id="955852">!=</span>&nbsp;<span class="ident" id="955855">nil</span>&nbsp;<span class="op" id="955859">||</span>&nbsp;<span class="ident" id="955862"><a href="/runtime/runtime_test.go.html#955822">x</a></span>&nbsp;<span class="op" id="955864">!=</span>&nbsp;<span class="num" id="955867">1</span>&nbsp;<span class="op" id="955869">||</span>&nbsp;<span class="ident" id="955872"><a href="/runtime/runtime_test.go.html#955825">y</a></span>&nbsp;<span class="op" id="955874">!=</span>&nbsp;<span class="num" id="955877">2</span>&nbsp;<span class="op" id="955879">||</span>&nbsp;<span class="ident" id="955882"><a href="/runtime/runtime_test.go.html#955828">z</a></span>&nbsp;<span class="op" id="955884">!=</span>&nbsp;<span class="num" id="955887">3</span>&nbsp;<span class="op" id="955889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="955894">panic</span><span class="op" id="955899">(</span><span class="string" id="955900">&#34;bad&nbsp;recover&#34;</span><span class="op" id="955913">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="955917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="955920">}</span><span class="op" id="955921">(</span><span class="num" id="955922">1</span><span class="op" id="955923">,</span>&nbsp;<span class="num" id="955925">2</span><span class="op" id="955926">,</span>&nbsp;<span class="num" id="955928">3</span><span class="op" id="955929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955932">return</span><br>
<span class="lineno"></span><span class="op" id="955939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="955942">func</span>&nbsp;<span class="ident" id="955947">BenchmarkDefer10</span><span class="op" id="955963">(</span><span class="ident" id="955964">b</span>&nbsp;<span class="op" id="955966">*</span><span class="ident" id="955967"><a href="/runtime/runtime_test.go.html#955256">testing</a></span><span class="op" id="955974">.</span><span class="ident" id="955975">B</span><span class="op" id="955976">)</span>&nbsp;<span class="op" id="955978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="955981">for</span>&nbsp;<span class="ident" id="955985">i</span>&nbsp;<span class="op" id="955987">:=</span>&nbsp;<span class="num" id="955990">0</span><span class="op" id="955991">;</span>&nbsp;<span class="ident" id="955993"><a href="/runtime/runtime_test.go.html#955985">i</a></span>&nbsp;<span class="op" id="955995">&lt;</span>&nbsp;<span class="ident" id="955997"><a href="/runtime/runtime_test.go.html#955964">b</a></span><span class="op" id="955998">.</span><span class="ident" id="955999">N</span><span class="op" id="956000">/</span><span class="num" id="956001">10</span><span class="op" id="956003">;</span>&nbsp;<span class="ident" id="956005"><a href="/runtime/runtime_test.go.html#955985">i</a></span><span class="op" id="956006">++</span>&nbsp;<span class="op" id="956009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="956013"><a href="/runtime/runtime_test.go.html#956033">defer2</a></span><span class="op" id="956019">(</span><span class="op" id="956020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="956023">}</span><br>
<span class="lineno"></span><span class="op" id="956025">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="keyword" id="956028">func</span>&nbsp;<span class="ident" id="956033">defer2</span><span class="op" id="956039">(</span><span class="op" id="956040">)</span>&nbsp;<span class="op" id="956042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="956045">for</span>&nbsp;<span class="ident" id="956049">i</span>&nbsp;<span class="op" id="956051">:=</span>&nbsp;<span class="num" id="956054">0</span><span class="op" id="956055">;</span>&nbsp;<span class="ident" id="956057"><a href="/runtime/runtime_test.go.html#956049">i</a></span>&nbsp;<span class="op" id="956059">&lt;</span>&nbsp;<span class="num" id="956061">10</span><span class="op" id="956063">;</span>&nbsp;<span class="ident" id="956065"><a href="/runtime/runtime_test.go.html#956049">i</a></span><span class="op" id="956066">++</span>&nbsp;<span class="op" id="956069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="956073">defer</span>&nbsp;<span class="keyword" id="956079">func</span><span class="op" id="956083">(</span><span class="ident" id="956084">x</span><span class="op" id="956085">,</span>&nbsp;<span class="ident" id="956087">y</span><span class="op" id="956088">,</span>&nbsp;<span class="ident" id="956090">z</span>&nbsp;<span class="builtintype" id="956092">int</span><span class="op" id="956095">)</span>&nbsp;<span class="op" id="956097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="956102">if</span>&nbsp;<span class="builtinfunc" id="956105">recover</span><span class="op" id="956112">(</span><span class="op" id="956113">)</span>&nbsp;<span class="op" id="956115">!=</span>&nbsp;<span class="ident" id="956118">nil</span>&nbsp;<span class="op" id="956122">||</span>&nbsp;<span class="ident" id="956125"><a href="/runtime/runtime_test.go.html#956084">x</a></span>&nbsp;<span class="op" id="956127">!=</span>&nbsp;<span class="num" id="956130">1</span>&nbsp;<span class="op" id="956132">||</span>&nbsp;<span class="ident" id="956135"><a href="/runtime/runtime_test.go.html#956087">y</a></span>&nbsp;<span class="op" id="956137">!=</span>&nbsp;<span class="num" id="956140">2</span>&nbsp;<span class="op" id="956142">||</span>&nbsp;<span class="ident" id="956145"><a href="/runtime/runtime_test.go.html#956090">z</a></span>&nbsp;<span class="op" id="956147">!=</span>&nbsp;<span class="num" id="956150">3</span>&nbsp;<span class="op" id="956152">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="956158">panic</span><span class="op" id="956163">(</span><span class="string" id="956164">&#34;bad&nbsp;recover&#34;</span><span class="op" id="956177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="956182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="956186">}</span><span class="op" id="956187">(</span><span class="num" id="956188">1</span><span class="op" id="956189">,</span>&nbsp;<span class="num" id="956191">2</span><span class="op" id="956192">,</span>&nbsp;<span class="num" id="956194">3</span><span class="op" id="956195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="956198">}</span><br>
<span class="lineno"></span><span class="op" id="956200">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="keyword" id="956203">func</span>&nbsp;<span class="ident" id="956208">BenchmarkDeferMany</span><span class="op" id="956226">(</span><span class="ident" id="956227">b</span>&nbsp;<span class="op" id="956229">*</span><span class="ident" id="956230"><a href="/runtime/runtime_test.go.html#955256">testing</a></span><span class="op" id="956237">.</span><span class="ident" id="956238">B</span><span class="op" id="956239">)</span>&nbsp;<span class="op" id="956241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="956244">for</span>&nbsp;<span class="ident" id="956248">i</span>&nbsp;<span class="op" id="956250">:=</span>&nbsp;<span class="num" id="956253">0</span><span class="op" id="956254">;</span>&nbsp;<span class="ident" id="956256"><a href="/runtime/runtime_test.go.html#956248">i</a></span>&nbsp;<span class="op" id="956258">&lt;</span>&nbsp;<span class="ident" id="956260"><a href="/runtime/runtime_test.go.html#956227">b</a></span><span class="op" id="956261">.</span><span class="ident" id="956262">N</span><span class="op" id="956263">;</span>&nbsp;<span class="ident" id="956265"><a href="/runtime/runtime_test.go.html#956248">i</a></span><span class="op" id="956266">++</span>&nbsp;<span class="op" id="956269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="956273">defer</span>&nbsp;<span class="keyword" id="956279">func</span><span class="op" id="956283">(</span><span class="ident" id="956284">x</span><span class="op" id="956285">,</span>&nbsp;<span class="ident" id="956287">y</span><span class="op" id="956288">,</span>&nbsp;<span class="ident" id="956290">z</span>&nbsp;<span class="builtintype" id="956292">int</span><span class="op" id="956295">)</span>&nbsp;<span class="op" id="956297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="956302">if</span>&nbsp;<span class="builtinfunc" id="956305">recover</span><span class="op" id="956312">(</span><span class="op" id="956313">)</span>&nbsp;<span class="op" id="956315">!=</span>&nbsp;<span class="ident" id="956318">nil</span>&nbsp;<span class="op" id="956322">||</span>&nbsp;<span class="ident" id="956325"><a href="/runtime/runtime_test.go.html#956284">x</a></span>&nbsp;<span class="op" id="956327">!=</span>&nbsp;<span class="num" id="956330">1</span>&nbsp;<span class="op" id="956332">||</span>&nbsp;<span class="ident" id="956335"><a href="/runtime/runtime_test.go.html#956287">y</a></span>&nbsp;<span class="op" id="956337">!=</span>&nbsp;<span class="num" id="956340">2</span>&nbsp;<span class="op" id="956342">||</span>&nbsp;<span class="ident" id="956345"><a href="/runtime/runtime_test.go.html#956290">z</a></span>&nbsp;<span class="op" id="956347">!=</span>&nbsp;<span class="num" id="956350">3</span>&nbsp;<span class="op" id="956352">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="956358">panic</span><span class="op" id="956363">(</span><span class="string" id="956364">&#34;bad&nbsp;recover&#34;</span><span class="op" id="956377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="956382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="956386">}</span><span class="op" id="956387">(</span><span class="num" id="956388">1</span><span class="op" id="956389">,</span>&nbsp;<span class="num" id="956391">2</span><span class="op" id="956392">,</span>&nbsp;<span class="num" id="956394">3</span><span class="op" id="956395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="956398">}</span><br>
<span class="lineno"></span><span class="op" id="956400">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="956403">//&nbsp;The&nbsp;profiling&nbsp;signal&nbsp;handler&nbsp;needs&nbsp;to&nbsp;know&nbsp;whether&nbsp;it&nbsp;is&nbsp;executing&nbsp;runtime.gogo.</span><br>
<span class="lineno"></span><span class="comment" id="956487">//&nbsp;The&nbsp;constant&nbsp;RuntimeGogoBytes&nbsp;in&nbsp;arch_*.h&nbsp;gives&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;function;</span><br>
<span class="lineno"></span><span class="comment" id="956564">//&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;a&nbsp;way&nbsp;to&nbsp;obtain&nbsp;it&nbsp;from&nbsp;the&nbsp;linker&nbsp;(perhaps&nbsp;someday).</span><br>
<span class="lineno"></span><span class="comment" id="956635">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;constant&nbsp;matches&nbsp;the&nbsp;size&nbsp;determined&nbsp;by&nbsp;&#39;go&nbsp;tool&nbsp;nm&nbsp;-S&#39;.</span><br>
<span class="lineno">95</span><span class="comment" id="956709">//&nbsp;The&nbsp;value&nbsp;reported&nbsp;will&nbsp;include&nbsp;the&nbsp;padding&nbsp;between&nbsp;runtime.gogo&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="956785">//&nbsp;next&nbsp;function&nbsp;in&nbsp;memory.&nbsp;That&#39;s&nbsp;fine.</span><br>
<span class="lineno"></span><span class="keyword" id="956826">func</span>&nbsp;<span class="ident" id="956831">TestRuntimeGogoBytes</span><span class="op" id="956851">(</span><span class="ident" id="956852">t</span>&nbsp;<span class="op" id="956854">*</span><span class="ident" id="956855"><a href="/runtime/runtime_test.go.html#955256">testing</a></span><span class="op" id="956862">.</span><span class="ident" id="956863">T</span><span class="op" id="956864">)</span>&nbsp;<span class="op" id="956866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="956869">switch</span>&nbsp;<span class="ident" id="956876"><a href="/runtime/extern.go.html#1926775">GOOS</a></span>&nbsp;<span class="op" id="956881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="956884">case</span>&nbsp;<span class="string" id="956889">&#34;android&#34;</span><span class="op" id="956898">,</span>&nbsp;<span class="string" id="956900">&#34;nacl&#34;</span><span class="op" id="956906">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="956910"><a href="/runtime/runtime_test.go.html#956852">t</a></span><span class="op" id="956911">.</span><span class="ident" id="956912">Skipf</span><span class="op" id="956917">(</span><span class="string" id="956918">&#34;skipping&nbsp;on&nbsp;%s&#34;</span><span class="op" id="956934">,</span>&nbsp;<span class="ident" id="956936"><a href="/runtime/extern.go.html#1926775">GOOS</a></span><span class="op" id="956940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="956943">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="956947">dir</span><span class="op" id="956950">,</span>&nbsp;<span class="ident" id="956952">err</span>&nbsp;<span class="op" id="956956">:=</span>&nbsp;<span class="ident" id="956959"><a href="/runtime/runtime_test.go.html#955174">ioutil</a></span><span class="op" id="956965">.</span><span class="ident" id="956966">TempDir</span><span class="op" id="956973">(</span><span class="string" id="956974">&#34;&#34;</span><span class="op" id="956976">,</span>&nbsp;<span class="string" id="956978">&#34;go-build&#34;</span><span class="op" id="956988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="956991">if</span>&nbsp;<span class="ident" id="956994"><a href="/runtime/runtime_test.go.html#956952">err</a></span>&nbsp;<span class="op" id="956998">!=</span>&nbsp;<span class="ident" id="957001">nil</span>&nbsp;<span class="op" id="957005">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="957009"><a href="/runtime/runtime_test.go.html#956852">t</a></span><span class="op" id="957010">.</span><span class="ident" id="957011">Fatalf</span><span class="op" id="957017">(</span><span class="string" id="957018">&#34;failed&nbsp;to&nbsp;create&nbsp;temp&nbsp;directory:&nbsp;%v&#34;</span><span class="op" id="957055">,</span>&nbsp;<span class="ident" id="957057"><a href="/runtime/runtime_test.go.html#956952">err</a></span><span class="op" id="957060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="957063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="957066">defer</span>&nbsp;<span class="ident" id="957072"><a href="/runtime/runtime_test.go.html#955187">os</a></span><span class="op" id="957074">.</span><span class="ident" id="957075">RemoveAll</span><span class="op" id="957084">(</span><span class="ident" id="957085"><a href="/runtime/runtime_test.go.html#956947">dir</a></span><span class="op" id="957088">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="957092">out</span><span class="op" id="957095">,</span>&nbsp;<span class="ident" id="957097"><a href="/runtime/runtime_test.go.html#956952">err</a></span>&nbsp;<span class="op" id="957101">:=</span>&nbsp;<span class="ident" id="957104"><a href="/runtime/runtime_test.go.html#955193">exec</a></span><span class="op" id="957108">.</span><span class="ident" id="957109">Command</span><span class="op" id="957116">(</span><span class="string" id="957117">&#34;go&#34;</span><span class="op" id="957121">,</span>&nbsp;<span class="string" id="957123">&#34;build&#34;</span><span class="op" id="957130">,</span>&nbsp;<span class="string" id="957132">&#34;-o&#34;</span><span class="op" id="957136">,</span>&nbsp;<span class="ident" id="957138"><a href="/runtime/runtime_test.go.html#956947">dir</a></span><span class="op" id="957141">+</span><span class="string" id="957142">&#34;/hello&#34;</span><span class="op" id="957150">,</span>&nbsp;<span class="string" id="957152">&#34;../../test/helloworld.go&#34;</span><span class="op" id="957178">)</span><span class="op" id="957179">.</span><span class="ident" id="957180">CombinedOutput</span><span class="op" id="957194">(</span><span class="op" id="957195">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="957198">if</span>&nbsp;<span class="ident" id="957201"><a href="/runtime/runtime_test.go.html#956952">err</a></span>&nbsp;<span class="op" id="957205">!=</span>&nbsp;<span class="ident" id="957208">nil</span>&nbsp;<span class="op" id="957212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="957216"><a href="/runtime/runtime_test.go.html#956852">t</a></span><span class="op" id="957217">.</span><span class="ident" id="957218">Fatalf</span><span class="op" id="957224">(</span><span class="string" id="957225">&#34;building&nbsp;hello&nbsp;world:&nbsp;%v\n%s&#34;</span><span class="op" id="957255">,</span>&nbsp;<span class="ident" id="957257"><a href="/runtime/runtime_test.go.html#956952">err</a></span><span class="op" id="957260">,</span>&nbsp;<span class="ident" id="957262"><a href="/runtime/runtime_test.go.html#957092">out</a></span><span class="op" id="957265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="957268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="957272"><a href="/runtime/runtime_test.go.html#957092">out</a></span><span class="op" id="957275">,</span>&nbsp;<span class="ident" id="957277"><a href="/runtime/runtime_test.go.html#956952">err</a></span>&nbsp;<span class="op" id="957281">=</span>&nbsp;<span class="ident" id="957283"><a href="/runtime/runtime_test.go.html#955193">exec</a></span><span class="op" id="957287">.</span><span class="ident" id="957288">Command</span><span class="op" id="957295">(</span><span class="string" id="957296">&#34;go&#34;</span><span class="op" id="957300">,</span>&nbsp;<span class="string" id="957302">&#34;tool&#34;</span><span class="op" id="957308">,</span>&nbsp;<span class="string" id="957310">&#34;nm&#34;</span><span class="op" id="957314">,</span>&nbsp;<span class="string" id="957316">&#34;-size&#34;</span><span class="op" id="957323">,</span>&nbsp;<span class="ident" id="957325"><a href="/runtime/runtime_test.go.html#956947">dir</a></span><span class="op" id="957328">+</span><span class="string" id="957329">&#34;/hello&#34;</span><span class="op" id="957337">)</span><span class="op" id="957338">.</span><span class="ident" id="957339">CombinedOutput</span><span class="op" id="957353">(</span><span class="op" id="957354">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="957357">if</span>&nbsp;<span class="ident" id="957360"><a href="/runtime/runtime_test.go.html#956952">err</a></span>&nbsp;<span class="op" id="957364">!=</span>&nbsp;<span class="ident" id="957367">nil</span>&nbsp;<span class="op" id="957371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="957375"><a href="/runtime/runtime_test.go.html#956852">t</a></span><span class="op" id="957376">.</span><span class="ident" id="957377">Fatalf</span><span class="op" id="957383">(</span><span class="string" id="957384">&#34;go&nbsp;tool&nbsp;nm:&nbsp;%v\n%s&#34;</span><span class="op" id="957404">,</span>&nbsp;<span class="ident" id="957406"><a href="/runtime/runtime_test.go.html#956952">err</a></span><span class="op" id="957409">,</span>&nbsp;<span class="ident" id="957411"><a href="/runtime/runtime_test.go.html#957092">out</a></span><span class="op" id="957414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="957417">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="957421">for</span>&nbsp;<span class="ident" id="957425">_</span><span class="op" id="957426">,</span>&nbsp;<span class="ident" id="957428">line</span>&nbsp;<span class="op" id="957433">:=</span>&nbsp;<span class="keyword" id="957436">range</span>&nbsp;<span class="ident" id="957442"><a href="/runtime/runtime_test.go.html#955245">strings</a></span><span class="op" id="957449">.</span><span class="ident" id="957450">Split</span><span class="op" id="957455">(</span><span class="builtintype" id="957456">string</span><span class="op" id="957462">(</span><span class="ident" id="957463"><a href="/runtime/runtime_test.go.html#957092">out</a></span><span class="op" id="957466">)</span><span class="op" id="957467">,</span>&nbsp;<span class="string" id="957469">&#34;\n&#34;</span><span class="op" id="957473">)</span>&nbsp;<span class="op" id="957475">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="957479">f</span>&nbsp;<span class="op" id="957481">:=</span>&nbsp;<span class="ident" id="957484"><a href="/runtime/runtime_test.go.html#955245">strings</a></span><span class="op" id="957491">.</span><span class="ident" id="957492">Fields</span><span class="op" id="957498">(</span><span class="ident" id="957499"><a href="/runtime/runtime_test.go.html#957428">line</a></span><span class="op" id="957503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="957507">if</span>&nbsp;<span class="builtinfunc" id="957510">len</span><span class="op" id="957513">(</span><span class="ident" id="957514"><a href="/runtime/runtime_test.go.html#957479">f</a></span><span class="op" id="957515">)</span>&nbsp;<span class="op" id="957517">==</span>&nbsp;<span class="num" id="957520">4</span>&nbsp;<span class="op" id="957522">&amp;&amp;</span>&nbsp;<span class="ident" id="957525"><a href="/runtime/runtime_test.go.html#957479">f</a></span><span class="op" id="957526">[</span><span class="num" id="957527">3</span><span class="op" id="957528">]</span>&nbsp;<span class="op" id="957530">==</span>&nbsp;<span class="string" id="957533">&#34;runtime.gogo&#34;</span>&nbsp;<span class="op" id="957548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="957553">size</span><span class="op" id="957557">,</span>&nbsp;<span class="ident" id="957559">_</span>&nbsp;<span class="op" id="957561">:=</span>&nbsp;<span class="ident" id="957564"><a href="/runtime/runtime_test.go.html#955234">strconv</a></span><span class="op" id="957571">.</span><span class="ident" id="957572">Atoi</span><span class="op" id="957576">(</span><span class="ident" id="957577"><a href="/runtime/runtime_test.go.html#957479">f</a></span><span class="op" id="957578">[</span><span class="num" id="957579">1</span><span class="op" id="957580">]</span><span class="op" id="957581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="957586">if</span>&nbsp;<span class="ident" id="957589"><a href="/runtime/export_test.go.html#7719566">GogoBytes</a></span><span class="op" id="957598">(</span><span class="op" id="957599">)</span>&nbsp;<span class="op" id="957601">!=</span>&nbsp;<span class="builtintype" id="957604">int32</span><span class="op" id="957609">(</span><span class="ident" id="957610"><a href="/runtime/runtime_test.go.html#957553">size</a></span><span class="op" id="957614">)</span>&nbsp;<span class="op" id="957616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="957622"><a href="/runtime/runtime_test.go.html#956852">t</a></span><span class="op" id="957623">.</span><span class="ident" id="957624">Fatalf</span><span class="op" id="957630">(</span><span class="string" id="957631">&#34;RuntimeGogoBytes&nbsp;=&nbsp;%d,&nbsp;should&nbsp;be&nbsp;%d&#34;</span><span class="op" id="957668">,</span>&nbsp;<span class="ident" id="957670"><a href="/runtime/export_test.go.html#7719566">GogoBytes</a></span><span class="op" id="957679">(</span><span class="op" id="957680">)</span><span class="op" id="957681">,</span>&nbsp;<span class="ident" id="957683"><a href="/runtime/runtime_test.go.html#957553">size</a></span><span class="op" id="957687">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="957692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="957697">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="957706">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="957709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="957713"><a href="/runtime/runtime_test.go.html#956852">t</a></span><span class="op" id="957714">.</span><span class="ident" id="957715">Fatalf</span><span class="op" id="957721">(</span><span class="string" id="957722">&#34;go&nbsp;tool&nbsp;nm&nbsp;did&nbsp;not&nbsp;report&nbsp;size&nbsp;for&nbsp;runtime.gogo&#34;</span><span class="op" id="957771">)</span><br>
<span class="lineno"></span><span class="op" id="957773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="957776">//&nbsp;golang.org/issue/7063</span><br>
<span class="lineno"></span><span class="keyword" id="957801">func</span>&nbsp;<span class="ident" id="957806">TestStopCPUProfilingWithProfilerOff</span><span class="op" id="957841">(</span><span class="ident" id="957842">t</span>&nbsp;<span class="op" id="957844">*</span><span class="ident" id="957845"><a href="/runtime/runtime_test.go.html#955256">testing</a></span><span class="op" id="957852">.</span><span class="ident" id="957853">T</span><span class="op" id="957854">)</span>&nbsp;<span class="op" id="957856">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="957859"><a href="/runtime/cpuprof.go.html#1906145">SetCPUProfileRate</a></span><span class="op" id="957876">(</span><span class="num" id="957877">0</span><span class="op" id="957878">)</span><br>
<span class="lineno"></span><span class="op" id="957880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="957883">//&nbsp;Addresses&nbsp;to&nbsp;test&nbsp;for&nbsp;faulting&nbsp;behavior.</span><br>
<span class="lineno"></span><span class="comment" id="957927">//&nbsp;This&nbsp;is&nbsp;less&nbsp;a&nbsp;test&nbsp;of&nbsp;SetPanicOnFault&nbsp;and&nbsp;more&nbsp;a&nbsp;check&nbsp;that</span><br>
<span class="lineno">140</span><span class="comment" id="957991">//&nbsp;the&nbsp;operating&nbsp;system&nbsp;and&nbsp;the&nbsp;runtime&nbsp;can&nbsp;process&nbsp;these&nbsp;faults</span><br>
<span class="lineno"></span><span class="comment" id="958056">//&nbsp;correctly.&nbsp;That&nbsp;is,&nbsp;we&#39;re&nbsp;indirectly&nbsp;testing&nbsp;that&nbsp;without&nbsp;SetPanicOnFault</span><br>
<span class="lineno"></span><span class="comment" id="958133">//&nbsp;these&nbsp;would&nbsp;manage&nbsp;to&nbsp;turn&nbsp;into&nbsp;ordinary&nbsp;crashes.</span><br>
<span class="lineno"></span><span class="comment" id="958186">//&nbsp;Note&nbsp;that&nbsp;these&nbsp;are&nbsp;truncated&nbsp;on&nbsp;32-bit&nbsp;systems,&nbsp;so&nbsp;the&nbsp;bottom&nbsp;32&nbsp;bits</span><br>
<span class="lineno"></span><span class="comment" id="958260">//&nbsp;of&nbsp;the&nbsp;larger&nbsp;addresses&nbsp;must&nbsp;themselves&nbsp;be&nbsp;invalid&nbsp;addresses.</span><br>
<span class="lineno">145</span><span class="comment" id="958325">//&nbsp;We&nbsp;might&nbsp;get&nbsp;unlucky&nbsp;and&nbsp;the&nbsp;OS&nbsp;might&nbsp;have&nbsp;mapped&nbsp;one&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="958391">//&nbsp;addresses,&nbsp;but&nbsp;probably&nbsp;not:&nbsp;they&#39;re&nbsp;all&nbsp;in&nbsp;the&nbsp;first&nbsp;page,&nbsp;very&nbsp;high</span><br>
<span class="lineno"></span><span class="comment" id="958464">//&nbsp;adderesses&nbsp;that&nbsp;normally&nbsp;an&nbsp;OS&nbsp;would&nbsp;reserve&nbsp;for&nbsp;itself,&nbsp;or&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="958537">//&nbsp;addresses.&nbsp;Even&nbsp;so,&nbsp;we&nbsp;might&nbsp;have&nbsp;to&nbsp;remove&nbsp;one&nbsp;or&nbsp;two&nbsp;on&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="958608">//&nbsp;systems.&nbsp;We&nbsp;will&nbsp;see.</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="958634">var</span>&nbsp;<span class="ident" id="958638">faultAddrs</span>&nbsp;<span class="op" id="958649">=</span>&nbsp;<span class="op" id="958651">[</span><span class="op" id="958652">]</span><span class="ident" id="958653">uint64</span><span class="op" id="958659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="958662">//&nbsp;low&nbsp;addresses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958680">0</span><span class="op" id="958681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958684">1</span><span class="op" id="958685">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958688">0xfff</span><span class="op" id="958693">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="958696">//&nbsp;high&nbsp;(kernel)&nbsp;addresses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="958724">//&nbsp;or&nbsp;else&nbsp;malformed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958747">0xffffffffffffffff</span><span class="op" id="958765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958768">0xfffffffffffff001</span><span class="op" id="958786">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958789">0xffffffffffff0001</span><span class="op" id="958807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958810">0xfffffffffff00001</span><span class="op" id="958828">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958831">0xffffffffff000001</span><span class="op" id="958849">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958852">0xfffffffff0000001</span><span class="op" id="958870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958873">0xffffffff00000001</span><span class="op" id="958891">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958894">0xfffffff000000001</span><span class="op" id="958912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958915">0xffffff0000000001</span><span class="op" id="958933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958936">0xfffff00000000001</span><span class="op" id="958954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958957">0xffff000000000001</span><span class="op" id="958975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958978">0xfff0000000000001</span><span class="op" id="958996">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="958999">0xff00000000000001</span><span class="op" id="959017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="959020">0xf000000000000001</span><span class="op" id="959038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="959041">0x8000000000000001</span><span class="op" id="959059">,</span><br>
<span class="lineno"></span><span class="op" id="959061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="959064">func</span>&nbsp;<span class="ident" id="959069">TestSetPanicOnFault</span><span class="op" id="959088">(</span><span class="ident" id="959089">t</span>&nbsp;<span class="op" id="959091">*</span><span class="ident" id="959092"><a href="/runtime/runtime_test.go.html#955256">testing</a></span><span class="op" id="959099">.</span><span class="ident" id="959100">T</span><span class="op" id="959101">)</span>&nbsp;<span class="op" id="959103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="959106">//&nbsp;This&nbsp;currently&nbsp;results&nbsp;in&nbsp;a&nbsp;fault&nbsp;in&nbsp;the&nbsp;signal&nbsp;trampoline&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="959172">//&nbsp;dragonfly/386&nbsp;-&nbsp;see&nbsp;issue&nbsp;7421.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="959208">if</span>&nbsp;<span class="ident" id="959211"><a href="/runtime/extern.go.html#1926775">GOOS</a></span>&nbsp;<span class="op" id="959216">==</span>&nbsp;<span class="string" id="959219">&#34;dragonfly&#34;</span>&nbsp;<span class="op" id="959231">&amp;&amp;</span>&nbsp;<span class="ident" id="959234"><a href="/runtime/extern.go.html#1926883">GOARCH</a></span>&nbsp;<span class="op" id="959241">==</span>&nbsp;<span class="string" id="959244">&#34;386&#34;</span>&nbsp;<span class="op" id="959250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="959254"><a href="/runtime/runtime_test.go.html#959089">t</a></span><span class="op" id="959255">.</span><span class="ident" id="959256">Skip</span><span class="op" id="959260">(</span><span class="string" id="959261">&#34;skipping&nbsp;test&nbsp;on&nbsp;dragonfly/386&#34;</span><span class="op" id="959293">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="959296">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="959300">old</span>&nbsp;<span class="op" id="959304">:=</span>&nbsp;<span class="ident" id="959307"><a href="/runtime/runtime_test.go.html#955217">debug</a></span><span class="op" id="959312">.</span><span class="ident" id="959313">SetPanicOnFault</span><span class="op" id="959328">(</span><span class="builtintype" id="959329">true</span><span class="op" id="959333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="959336">defer</span>&nbsp;<span class="ident" id="959342"><a href="/runtime/runtime_test.go.html#955217">debug</a></span><span class="op" id="959347">.</span><span class="ident" id="959348">SetPanicOnFault</span><span class="op" id="959363">(</span><span class="ident" id="959364"><a href="/runtime/runtime_test.go.html#959300">old</a></span><span class="op" id="959367">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="959371">nfault</span>&nbsp;<span class="op" id="959378">:=</span>&nbsp;<span class="num" id="959381">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="959384">for</span>&nbsp;<span class="ident" id="959388">_</span><span class="op" id="959389">,</span>&nbsp;<span class="ident" id="959391">addr</span>&nbsp;<span class="op" id="959396">:=</span>&nbsp;<span class="keyword" id="959399">range</span>&nbsp;<span class="ident" id="959405"><a href="/runtime/runtime_test.go.html#958638">faultAddrs</a></span>&nbsp;<span class="op" id="959416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="959420"><a href="/runtime/runtime_test.go.html#959543">testSetPanicOnFault</a></span><span class="op" id="959439">(</span><span class="ident" id="959440"><a href="/runtime/runtime_test.go.html#959089">t</a></span><span class="op" id="959441">,</span>&nbsp;<span class="builtintype" id="959443">uintptr</span><span class="op" id="959450">(</span><span class="ident" id="959451"><a href="/runtime/runtime_test.go.html#959391">addr</a></span><span class="op" id="959455">)</span><span class="op" id="959456">,</span>&nbsp;<span class="op" id="959458">&amp;</span><span class="ident" id="959459"><a href="/runtime/runtime_test.go.html#959371">nfault</a></span><span class="op" id="959465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="959468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="959471">if</span>&nbsp;<span class="ident" id="959474"><a href="/runtime/runtime_test.go.html#959371">nfault</a></span>&nbsp;<span class="op" id="959481">==</span>&nbsp;<span class="num" id="959484">0</span>&nbsp;<span class="op" id="959486">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="959490"><a href="/runtime/runtime_test.go.html#959089">t</a></span><span class="op" id="959491">.</span><span class="ident" id="959492">Fatalf</span><span class="op" id="959498">(</span><span class="string" id="959499">&#34;none&nbsp;of&nbsp;the&nbsp;addresses&nbsp;faulted&#34;</span><span class="op" id="959530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="959533">}</span><br>
<span class="lineno"></span><span class="op" id="959535">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="959538">func</span>&nbsp;<span class="ident" id="959543">testSetPanicOnFault</span><span class="op" id="959562">(</span><span class="ident" id="959563">t</span>&nbsp;<span class="op" id="959565">*</span><span class="ident" id="959566"><a href="/runtime/runtime_test.go.html#955256">testing</a></span><span class="op" id="959573">.</span><span class="ident" id="959574">T</span><span class="op" id="959575">,</span>&nbsp;<span class="ident" id="959577">addr</span>&nbsp;<span class="builtintype" id="959582">uintptr</span><span class="op" id="959589">,</span>&nbsp;<span class="ident" id="959591">nfault</span>&nbsp;<span class="op" id="959598">*</span><span class="builtintype" id="959599">int</span><span class="op" id="959602">)</span>&nbsp;<span class="op" id="959604">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="959607">if</span>&nbsp;<span class="ident" id="959610"><a href="/runtime/extern.go.html#1926775">GOOS</a></span>&nbsp;<span class="op" id="959615">==</span>&nbsp;<span class="string" id="959618">&#34;nacl&#34;</span>&nbsp;<span class="op" id="959625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="959629"><a href="/runtime/runtime_test.go.html#959563">t</a></span><span class="op" id="959630">.</span><span class="ident" id="959631">Skip</span><span class="op" id="959635">(</span><span class="string" id="959636">&#34;nacl&nbsp;doesn&#39;t&nbsp;seem&nbsp;to&nbsp;fault&nbsp;on&nbsp;high&nbsp;addresses&#34;</span><span class="op" id="959682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="959685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="959689">defer</span>&nbsp;<span class="keyword" id="959695">func</span><span class="op" id="959699">(</span><span class="op" id="959700">)</span>&nbsp;<span class="op" id="959702">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="959706">if</span>&nbsp;<span class="ident" id="959709">err</span>&nbsp;<span class="op" id="959713">:=</span>&nbsp;<span class="builtinfunc" id="959716">recover</span><span class="op" id="959723">(</span><span class="op" id="959724">)</span><span class="op" id="959725">;</span>&nbsp;<span class="ident" id="959727"><a href="/runtime/runtime_test.go.html#959709">err</a></span>&nbsp;<span class="op" id="959731">!=</span>&nbsp;<span class="ident" id="959734">nil</span>&nbsp;<span class="op" id="959738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="959743">*</span><span class="ident" id="959744"><a href="/runtime/runtime_test.go.html#959591">nfault</a></span><span class="op" id="959750">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="959755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="959758">}</span><span class="op" id="959759">(</span><span class="op" id="959760">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="959764">//&nbsp;The&nbsp;read&nbsp;should&nbsp;fault,&nbsp;except&nbsp;that&nbsp;sometimes&nbsp;we&nbsp;hit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="959820">//&nbsp;addresses&nbsp;that&nbsp;have&nbsp;had&nbsp;C&nbsp;or&nbsp;kernel&nbsp;pages&nbsp;mapped&nbsp;there</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="959879">//&nbsp;readable&nbsp;by&nbsp;user&nbsp;code.&nbsp;So&nbsp;just&nbsp;log&nbsp;the&nbsp;content.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="959931">//&nbsp;If&nbsp;no&nbsp;addresses&nbsp;fault,&nbsp;we&#39;ll&nbsp;fail&nbsp;the&nbsp;test.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="959979">v</span>&nbsp;<span class="op" id="959981">:=</span>&nbsp;<span class="op" id="959984">*</span><span class="op" id="959985">(</span><span class="op" id="959986">*</span><span class="builtintype" id="959987">byte</span><span class="op" id="959991">)</span><span class="op" id="959992">(</span><span class="ident" id="959993"><a href="/runtime/runtime_test.go.html#955267">unsafe</a></span><span class="op" id="959999">.</span><span class="ident" id="960000">Pointer</span><span class="op" id="960007">(</span><span class="ident" id="960008"><a href="/runtime/runtime_test.go.html#959577">addr</a></span><span class="op" id="960012">)</span><span class="op" id="960013">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="960016"><a href="/runtime/runtime_test.go.html#959563">t</a></span><span class="op" id="960017">.</span><span class="ident" id="960018">Logf</span><span class="op" id="960022">(</span><span class="string" id="960023">&#34;addr&nbsp;%#x:&nbsp;%#x\n&#34;</span><span class="op" id="960040">,</span>&nbsp;<span class="ident" id="960042"><a href="/runtime/runtime_test.go.html#959577">addr</a></span><span class="op" id="960046">,</span>&nbsp;<span class="ident" id="960048"><a href="/runtime/runtime_test.go.html#959979">v</a></span><span class="op" id="960049">)</span><br>
<span class="lineno"></span><span class="op" id="960051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="960054">func</span>&nbsp;<span class="ident" id="960059">eqstring_generic</span><span class="op" id="960075">(</span><span class="ident" id="960076">s1</span><span class="op" id="960078">,</span>&nbsp;<span class="ident" id="960080">s2</span>&nbsp;<span class="builtintype" id="960083">string</span><span class="op" id="960089">)</span>&nbsp;<span class="builtintype" id="960091">bool</span>&nbsp;<span class="op" id="960096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="960099">if</span>&nbsp;<span class="builtinfunc" id="960102">len</span><span class="op" id="960105">(</span><span class="ident" id="960106"><a href="/runtime/runtime_test.go.html#960076">s1</a></span><span class="op" id="960108">)</span>&nbsp;<span class="op" id="960110">!=</span>&nbsp;<span class="builtinfunc" id="960113">len</span><span class="op" id="960116">(</span><span class="ident" id="960117"><a href="/runtime/runtime_test.go.html#960080">s2</a></span><span class="op" id="960119">)</span>&nbsp;<span class="op" id="960121">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="960125">return</span>&nbsp;<span class="builtintype" id="960132">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="960139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="960142">//&nbsp;optimization&nbsp;in&nbsp;assembly&nbsp;versions:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="960181">//&nbsp;if&nbsp;s1.str&nbsp;==&nbsp;s2.str&nbsp;{&nbsp;return&nbsp;true&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="960221">for</span>&nbsp;<span class="ident" id="960225">i</span>&nbsp;<span class="op" id="960227">:=</span>&nbsp;<span class="num" id="960230">0</span><span class="op" id="960231">;</span>&nbsp;<span class="ident" id="960233"><a href="/runtime/runtime_test.go.html#960225">i</a></span>&nbsp;<span class="op" id="960235">&lt;</span>&nbsp;<span class="builtinfunc" id="960237">len</span><span class="op" id="960240">(</span><span class="ident" id="960241"><a href="/runtime/runtime_test.go.html#960076">s1</a></span><span class="op" id="960243">)</span><span class="op" id="960244">;</span>&nbsp;<span class="ident" id="960246"><a href="/runtime/runtime_test.go.html#960225">i</a></span><span class="op" id="960247">++</span>&nbsp;<span class="op" id="960250">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="960254">if</span>&nbsp;<span class="ident" id="960257"><a href="/runtime/runtime_test.go.html#960076">s1</a></span><span class="op" id="960259">[</span><span class="ident" id="960260"><a href="/runtime/runtime_test.go.html#960225">i</a></span><span class="op" id="960261">]</span>&nbsp;<span class="op" id="960263">!=</span>&nbsp;<span class="ident" id="960266"><a href="/runtime/runtime_test.go.html#960080">s2</a></span><span class="op" id="960268">[</span><span class="ident" id="960269"><a href="/runtime/runtime_test.go.html#960225">i</a></span><span class="op" id="960270">]</span>&nbsp;<span class="op" id="960272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="960277">return</span>&nbsp;<span class="builtintype" id="960284">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="960292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="960295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="960298">return</span>&nbsp;<span class="builtintype" id="960305">true</span><br>
<span class="lineno">225</span><span class="op" id="960310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="960313">func</span>&nbsp;<span class="ident" id="960318">TestEqString</span><span class="op" id="960330">(</span><span class="ident" id="960331">t</span>&nbsp;<span class="op" id="960333">*</span><span class="ident" id="960334"><a href="/runtime/runtime_test.go.html#955256">testing</a></span><span class="op" id="960341">.</span><span class="ident" id="960342">T</span><span class="op" id="960343">)</span>&nbsp;<span class="op" id="960345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="960348">//&nbsp;This&nbsp;isn&#39;t&nbsp;really&nbsp;an&nbsp;exhaustive&nbsp;test&nbsp;of&nbsp;eqstring,&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="960407">//&nbsp;just&nbsp;a&nbsp;convenient&nbsp;way&nbsp;of&nbsp;documenting&nbsp;(via&nbsp;eqstring_generic)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="960471">//&nbsp;what&nbsp;eqstring&nbsp;does.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="960495">s</span>&nbsp;<span class="op" id="960497">:=</span>&nbsp;<span class="op" id="960500">[</span><span class="op" id="960501">]</span><span class="builtintype" id="960502">string</span><span class="op" id="960508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="960512">&#34;&#34;</span><span class="op" id="960514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="960518">&#34;a&#34;</span><span class="op" id="960521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="960525">&#34;c&#34;</span><span class="op" id="960528">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="960532">&#34;aaa&#34;</span><span class="op" id="960537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="960541">&#34;ccc&#34;</span><span class="op" id="960546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="960550">&#34;cccc&#34;</span><span class="op" id="960556">[</span><span class="op" id="960557">:</span><span class="num" id="960558">3</span><span class="op" id="960559">]</span><span class="op" id="960560">,</span>&nbsp;<span class="comment" id="960562">//&nbsp;same&nbsp;contents,&nbsp;different&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="960599">&#34;1234567890&#34;</span><span class="op" id="960611">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="960614">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="960617">for</span>&nbsp;<span class="ident" id="960621">_</span><span class="op" id="960622">,</span>&nbsp;<span class="ident" id="960624">s1</span>&nbsp;<span class="op" id="960627">:=</span>&nbsp;<span class="keyword" id="960630">range</span>&nbsp;<span class="ident" id="960636"><a href="/runtime/runtime_test.go.html#960495">s</a></span>&nbsp;<span class="op" id="960638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="960642">for</span>&nbsp;<span class="ident" id="960646">_</span><span class="op" id="960647">,</span>&nbsp;<span class="ident" id="960649">s2</span>&nbsp;<span class="op" id="960652">:=</span>&nbsp;<span class="keyword" id="960655">range</span>&nbsp;<span class="ident" id="960661"><a href="/runtime/runtime_test.go.html#960495">s</a></span>&nbsp;<span class="op" id="960663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="960668">x</span>&nbsp;<span class="op" id="960670">:=</span>&nbsp;<span class="ident" id="960673"><a href="/runtime/runtime_test.go.html#960624">s1</a></span>&nbsp;<span class="op" id="960676">==</span>&nbsp;<span class="ident" id="960679"><a href="/runtime/runtime_test.go.html#960649">s2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="960685">y</span>&nbsp;<span class="op" id="960687">:=</span>&nbsp;<span class="ident" id="960690"><a href="/runtime/runtime_test.go.html#960059">eqstring_generic</a></span><span class="op" id="960706">(</span><span class="ident" id="960707"><a href="/runtime/runtime_test.go.html#960624">s1</a></span><span class="op" id="960709">,</span>&nbsp;<span class="ident" id="960711"><a href="/runtime/runtime_test.go.html#960649">s2</a></span><span class="op" id="960713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="960718">if</span>&nbsp;<span class="ident" id="960721"><a href="/runtime/runtime_test.go.html#960668">x</a></span>&nbsp;<span class="op" id="960723">!=</span>&nbsp;<span class="ident" id="960726"><a href="/runtime/runtime_test.go.html#960685">y</a></span>&nbsp;<span class="op" id="960728">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="960734"><a href="/runtime/runtime_test.go.html#960331">t</a></span><span class="op" id="960735">.</span><span class="ident" id="960736">Errorf</span><span class="op" id="960742">(</span><span class="string" id="960743">`eqstring(&#34;%s&#34;,&#34;%s&#34;)&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t`</span><span class="op" id="960778">,</span>&nbsp;<span class="ident" id="960780"><a href="/runtime/runtime_test.go.html#960624">s1</a></span><span class="op" id="960782">,</span>&nbsp;<span class="ident" id="960784"><a href="/runtime/runtime_test.go.html#960649">s2</a></span><span class="op" id="960786">,</span>&nbsp;<span class="ident" id="960788"><a href="/runtime/runtime_test.go.html#960668">x</a></span><span class="op" id="960789">,</span>&nbsp;<span class="ident" id="960791"><a href="/runtime/runtime_test.go.html#960685">y</a></span><span class="op" id="960792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="960797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="960801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="960804">}</span><br>
<span class="lineno"></span><span class="op" id="960806">}</span>
</div>
</body>
</html>
