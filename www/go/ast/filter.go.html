<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5132180">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5132235">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5132289">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5132340">package</span>&nbsp;<span class="ident" id="5132348">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5132353">import</span>&nbsp;<span class="op" id="5132360">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5132363">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5132375">&#34;sort&#34;</span><br>
<span class="lineno">10</span><span class="op" id="5132382">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5132385">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5132465">//&nbsp;Export&nbsp;filtering</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5132486">//&nbsp;exportFilter&nbsp;is&nbsp;a&nbsp;special&nbsp;filter&nbsp;function&nbsp;to&nbsp;extract&nbsp;exported&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="5132558">func</span>&nbsp;<span class="ident" id="5132563">exportFilter</span><span class="op" id="5132575">(</span><span class="ident" id="5132576">name</span>&nbsp;<span class="builtintype" id="5132581">string</span><span class="op" id="5132587">)</span>&nbsp;<span class="builtintype" id="5132589">bool</span>&nbsp;<span class="op" id="5132594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5132597">return</span>&nbsp;<span class="ident" id="5132604"><a href="/go/ast/ast.go.html#5108295">IsExported</a></span><span class="op" id="5132614">(</span><span class="ident" id="5132615"><a href="/go/ast/filter.go.html#5132576">name</a></span><span class="op" id="5132619">)</span><br>
<span class="lineno"></span><span class="op" id="5132621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5132624">//&nbsp;FileExports&nbsp;trims&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;Go&nbsp;source&nbsp;file&nbsp;in&nbsp;place&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5132693">//&nbsp;only&nbsp;exported&nbsp;nodes&nbsp;remain:&nbsp;all&nbsp;top-level&nbsp;identifiers&nbsp;which&nbsp;are&nbsp;not&nbsp;exported</span><br>
<span class="lineno"></span><span class="comment" id="5132773">//&nbsp;and&nbsp;their&nbsp;associated&nbsp;information&nbsp;(such&nbsp;as&nbsp;type,&nbsp;initial&nbsp;value,&nbsp;or&nbsp;function</span><br>
<span class="lineno"></span><span class="comment" id="5132851">//&nbsp;body)&nbsp;are&nbsp;removed.&nbsp;Non-exported&nbsp;fields&nbsp;and&nbsp;methods&nbsp;of&nbsp;exported&nbsp;types&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5132927">//&nbsp;stripped.&nbsp;The&nbsp;File.Comments&nbsp;list&nbsp;is&nbsp;not&nbsp;changed.</span><br>
<span class="lineno">25</span><span class="comment" id="5132979">//</span><br>
<span class="lineno"></span><span class="comment" id="5132982">//&nbsp;FileExports&nbsp;returns&nbsp;true&nbsp;if&nbsp;there&nbsp;are&nbsp;exported&nbsp;declarations;</span><br>
<span class="lineno"></span><span class="comment" id="5133046">//&nbsp;it&nbsp;returns&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="5133077">//</span><br>
<span class="lineno"></span><span class="keyword" id="5133080">func</span>&nbsp;<span class="ident" id="5133085">FileExports</span><span class="op" id="5133096">(</span><span class="ident" id="5133097">src</span>&nbsp;<span class="op" id="5133101">*</span><span class="ident" id="5133102"><a href="/go/ast/ast.go.html#5122014">File</a></span><span class="op" id="5133106">)</span>&nbsp;<span class="builtintype" id="5133108">bool</span>&nbsp;<span class="op" id="5133113">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5133116">return</span>&nbsp;<span class="ident" id="5133123"><a href="/go/ast/filter.go.html#5137943">filterFile</a></span><span class="op" id="5133133">(</span><span class="ident" id="5133134"><a href="/go/ast/filter.go.html#5133097">src</a></span><span class="op" id="5133137">,</span>&nbsp;<span class="ident" id="5133139"><a href="/go/ast/filter.go.html#5132563">exportFilter</a></span><span class="op" id="5133151">,</span>&nbsp;<span class="builtintype" id="5133153">true</span><span class="op" id="5133157">)</span><br>
<span class="lineno"></span><span class="op" id="5133159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5133162">//&nbsp;PackageExports&nbsp;trims&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;Go&nbsp;package&nbsp;in&nbsp;place&nbsp;such&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="5133230">//&nbsp;only&nbsp;exported&nbsp;nodes&nbsp;remain.&nbsp;The&nbsp;pkg.Files&nbsp;list&nbsp;is&nbsp;not&nbsp;changed,&nbsp;so&nbsp;that</span><br>
<span class="lineno">35</span><span class="comment" id="5133304">//&nbsp;file&nbsp;names&nbsp;and&nbsp;top-level&nbsp;package&nbsp;comments&nbsp;don&#39;t&nbsp;get&nbsp;lost.</span><br>
<span class="lineno"></span><span class="comment" id="5133365">//</span><br>
<span class="lineno"></span><span class="comment" id="5133368">//&nbsp;PackageExports&nbsp;returns&nbsp;true&nbsp;if&nbsp;there&nbsp;are&nbsp;exported&nbsp;declarations;</span><br>
<span class="lineno"></span><span class="comment" id="5133435">//&nbsp;it&nbsp;returns&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="5133466">//</span><br>
<span class="lineno">40</span><span class="keyword" id="5133469">func</span>&nbsp;<span class="ident" id="5133474">PackageExports</span><span class="op" id="5133488">(</span><span class="ident" id="5133489">pkg</span>&nbsp;<span class="op" id="5133493">*</span><span class="ident" id="5133494"><a href="/go/ast/ast.go.html#5122783">Package</a></span><span class="op" id="5133501">)</span>&nbsp;<span class="builtintype" id="5133503">bool</span>&nbsp;<span class="op" id="5133508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5133511">return</span>&nbsp;<span class="ident" id="5133518"><a href="/go/ast/filter.go.html#5138796">filterPackage</a></span><span class="op" id="5133531">(</span><span class="ident" id="5133532"><a href="/go/ast/filter.go.html#5133489">pkg</a></span><span class="op" id="5133535">,</span>&nbsp;<span class="ident" id="5133537"><a href="/go/ast/filter.go.html#5132563">exportFilter</a></span><span class="op" id="5133549">,</span>&nbsp;<span class="builtintype" id="5133551">true</span><span class="op" id="5133555">)</span><br>
<span class="lineno"></span><span class="op" id="5133557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5133560">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">45</span><span class="comment" id="5133640">//&nbsp;General&nbsp;filtering</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5133662">type</span>&nbsp;<span class="ident" id="5133667">Filter</span>&nbsp;<span class="keyword" id="5133674">func</span><span class="op" id="5133678">(</span><span class="builtintype" id="5133679">string</span><span class="op" id="5133685">)</span>&nbsp;<span class="builtintype" id="5133687">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5133693">func</span>&nbsp;<span class="ident" id="5133698">filterIdentList</span><span class="op" id="5133713">(</span><span class="ident" id="5133714">list</span>&nbsp;<span class="op" id="5133719">[</span><span class="op" id="5133720">]</span><span class="op" id="5133721">*</span><span class="ident" id="5133722"><a href="/go/ast/ast.go.html#5098384">Ident</a></span><span class="op" id="5133727">,</span>&nbsp;<span class="ident" id="5133729">f</span>&nbsp;<span class="ident" id="5133731"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5133737">)</span>&nbsp;<span class="op" id="5133739">[</span><span class="op" id="5133740">]</span><span class="op" id="5133741">*</span><span class="ident" id="5133742"><a href="/go/ast/ast.go.html#5098384">Ident</a></span>&nbsp;<span class="op" id="5133748">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5133751">j</span>&nbsp;<span class="op" id="5133753">:=</span>&nbsp;<span class="num" id="5133756">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5133759">for</span>&nbsp;<span class="ident" id="5133763">_</span><span class="op" id="5133764">,</span>&nbsp;<span class="ident" id="5133766">x</span>&nbsp;<span class="op" id="5133768">:=</span>&nbsp;<span class="keyword" id="5133771">range</span>&nbsp;<span class="ident" id="5133777"><a href="/go/ast/filter.go.html#5133714">list</a></span>&nbsp;<span class="op" id="5133782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5133786">if</span>&nbsp;<span class="ident" id="5133789"><a href="/go/ast/filter.go.html#5133729">f</a></span><span class="op" id="5133790">(</span><span class="ident" id="5133791"><a href="/go/ast/filter.go.html#5133766">x</a></span><span class="op" id="5133792">.</span><span class="ident" id="5133793">Name</span><span class="op" id="5133797">)</span>&nbsp;<span class="op" id="5133799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5133804"><a href="/go/ast/filter.go.html#5133714">list</a></span><span class="op" id="5133808">[</span><span class="ident" id="5133809"><a href="/go/ast/filter.go.html#5133751">j</a></span><span class="op" id="5133810">]</span>&nbsp;<span class="op" id="5133812">=</span>&nbsp;<span class="ident" id="5133814"><a href="/go/ast/filter.go.html#5133766">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5133819"><a href="/go/ast/filter.go.html#5133751">j</a></span><span class="op" id="5133820">++</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5133825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5133828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5133831">return</span>&nbsp;<span class="ident" id="5133838"><a href="/go/ast/filter.go.html#5133714">list</a></span><span class="op" id="5133842">[</span><span class="num" id="5133843">0</span><span class="op" id="5133844">:</span><span class="ident" id="5133845"><a href="/go/ast/filter.go.html#5133751">j</a></span><span class="op" id="5133846">]</span><br>
<span class="lineno"></span><span class="op" id="5133848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="5133851">//&nbsp;fieldName&nbsp;assumes&nbsp;that&nbsp;x&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;an&nbsp;anonymous&nbsp;field&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5133917">//&nbsp;returns&nbsp;the&nbsp;corresponding&nbsp;field&nbsp;name.&nbsp;If&nbsp;x&nbsp;is&nbsp;not&nbsp;an&nbsp;acceptable</span><br>
<span class="lineno"></span><span class="comment" id="5133984">//&nbsp;anonymous&nbsp;field,&nbsp;the&nbsp;result&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="5134023">//</span><br>
<span class="lineno"></span><span class="keyword" id="5134026">func</span>&nbsp;<span class="ident" id="5134031">fieldName</span><span class="op" id="5134040">(</span><span class="ident" id="5134041">x</span>&nbsp;<span class="ident" id="5134043"><a href="/go/ast/ast.go.html#5093383">Expr</a></span><span class="op" id="5134047">)</span>&nbsp;<span class="op" id="5134049">*</span><span class="ident" id="5134050"><a href="/go/ast/ast.go.html#5098384">Ident</a></span>&nbsp;<span class="op" id="5134056">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134059">switch</span>&nbsp;<span class="ident" id="5134066">t</span>&nbsp;<span class="op" id="5134068">:=</span>&nbsp;<span class="ident" id="5134071"><a href="/go/ast/filter.go.html#5134041">x</a></span><span class="op" id="5134072">.</span><span class="op" id="5134073">(</span><span class="keyword" id="5134074">type</span><span class="op" id="5134078">)</span>&nbsp;<span class="op" id="5134080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134083">case</span>&nbsp;<span class="op" id="5134088">*</span><span class="ident" id="5134089"><a href="/go/ast/ast.go.html#5098384">Ident</a></span><span class="op" id="5134094">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134098">return</span>&nbsp;<span class="ident" id="5134105"><a href="/go/ast/filter.go.html#5134066">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134108">case</span>&nbsp;<span class="op" id="5134113">*</span><span class="ident" id="5134114"><a href="/go/ast/ast.go.html#5099786">SelectorExpr</a></span><span class="op" id="5134126">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134130">if</span>&nbsp;<span class="ident" id="5134133">_</span><span class="op" id="5134134">,</span>&nbsp;<span class="ident" id="5134136">ok</span>&nbsp;<span class="op" id="5134139">:=</span>&nbsp;<span class="ident" id="5134142"><a href="/go/ast/filter.go.html#5134066">t</a></span><span class="op" id="5134143">.</span><span class="ident" id="5134144">X</span><span class="op" id="5134145">.</span><span class="op" id="5134146">(</span><span class="op" id="5134147">*</span><span class="ident" id="5134148"><a href="/go/ast/ast.go.html#5098384">Ident</a></span><span class="op" id="5134153">)</span><span class="op" id="5134154">;</span>&nbsp;<span class="ident" id="5134156"><a href="/go/ast/filter.go.html#5134136">ok</a></span>&nbsp;<span class="op" id="5134159">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134164">return</span>&nbsp;<span class="ident" id="5134171"><a href="/go/ast/filter.go.html#5134066">t</a></span><span class="op" id="5134172">.</span><span class="ident" id="5134173">Sel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5134179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134182">case</span>&nbsp;<span class="op" id="5134187">*</span><span class="ident" id="5134188"><a href="/go/ast/ast.go.html#5101305">StarExpr</a></span><span class="op" id="5134196">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134200">return</span>&nbsp;<span class="ident" id="5134207"><a href="/go/ast/filter.go.html#5134031">fieldName</a></span><span class="op" id="5134216">(</span><span class="ident" id="5134217"><a href="/go/ast/filter.go.html#5134066">t</a></span><span class="op" id="5134218">.</span><span class="ident" id="5134219">X</span><span class="op" id="5134220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5134223">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134226">return</span>&nbsp;<span class="ident" id="5134233">nil</span><br>
<span class="lineno"></span><span class="op" id="5134237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5134240">func</span>&nbsp;<span class="ident" id="5134245">filterFieldList</span><span class="op" id="5134260">(</span><span class="ident" id="5134261">fields</span>&nbsp;<span class="op" id="5134268">*</span><span class="ident" id="5134269"><a href="/go/ast/ast.go.html#5097003">FieldList</a></span><span class="op" id="5134278">,</span>&nbsp;<span class="ident" id="5134280">filter</span>&nbsp;<span class="ident" id="5134287"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5134293">,</span>&nbsp;<span class="ident" id="5134295">export</span>&nbsp;<span class="builtintype" id="5134302">bool</span><span class="op" id="5134306">)</span>&nbsp;<span class="op" id="5134308">(</span><span class="ident" id="5134309">removedFields</span>&nbsp;<span class="builtintype" id="5134323">bool</span><span class="op" id="5134327">)</span>&nbsp;<span class="op" id="5134329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134332">if</span>&nbsp;<span class="ident" id="5134335"><a href="/go/ast/filter.go.html#5134261">fields</a></span>&nbsp;<span class="op" id="5134342">==</span>&nbsp;<span class="ident" id="5134345">nil</span>&nbsp;<span class="op" id="5134349">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134353">return</span>&nbsp;<span class="builtintype" id="5134360">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5134367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134370">list</span>&nbsp;<span class="op" id="5134375">:=</span>&nbsp;<span class="ident" id="5134378"><a href="/go/ast/filter.go.html#5134261">fields</a></span><span class="op" id="5134384">.</span><span class="ident" id="5134385">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134391">j</span>&nbsp;<span class="op" id="5134393">:=</span>&nbsp;<span class="num" id="5134396">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134399">for</span>&nbsp;<span class="ident" id="5134403">_</span><span class="op" id="5134404">,</span>&nbsp;<span class="ident" id="5134406">f</span>&nbsp;<span class="op" id="5134408">:=</span>&nbsp;<span class="keyword" id="5134411">range</span>&nbsp;<span class="ident" id="5134417"><a href="/go/ast/filter.go.html#5134370">list</a></span>&nbsp;<span class="op" id="5134422">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134426">keepField</span>&nbsp;<span class="op" id="5134436">:=</span>&nbsp;<span class="builtintype" id="5134439">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134447">if</span>&nbsp;<span class="builtinfunc" id="5134450">len</span><span class="op" id="5134453">(</span><span class="ident" id="5134454"><a href="/go/ast/filter.go.html#5134406">f</a></span><span class="op" id="5134455">.</span><span class="ident" id="5134456">Names</span><span class="op" id="5134461">)</span>&nbsp;<span class="op" id="5134463">==</span>&nbsp;<span class="num" id="5134466">0</span>&nbsp;<span class="op" id="5134468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5134473">//&nbsp;anonymous&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134495">name</span>&nbsp;<span class="op" id="5134500">:=</span>&nbsp;<span class="ident" id="5134503"><a href="/go/ast/filter.go.html#5134031">fieldName</a></span><span class="op" id="5134512">(</span><span class="ident" id="5134513"><a href="/go/ast/filter.go.html#5134406">f</a></span><span class="op" id="5134514">.</span><span class="ident" id="5134515">Type</span><span class="op" id="5134519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134524"><a href="/go/ast/filter.go.html#5134426">keepField</a></span>&nbsp;<span class="op" id="5134534">=</span>&nbsp;<span class="ident" id="5134536"><a href="/go/ast/filter.go.html#5134495">name</a></span>&nbsp;<span class="op" id="5134541">!=</span>&nbsp;<span class="ident" id="5134544">nil</span>&nbsp;<span class="op" id="5134548">&amp;&amp;</span>&nbsp;<span class="ident" id="5134551"><a href="/go/ast/filter.go.html#5134280">filter</a></span><span class="op" id="5134557">(</span><span class="ident" id="5134558"><a href="/go/ast/filter.go.html#5134495">name</a></span><span class="op" id="5134562">.</span><span class="ident" id="5134563">Name</span><span class="op" id="5134567">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5134571">}</span>&nbsp;<span class="keyword" id="5134573">else</span>&nbsp;<span class="op" id="5134578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134583">n</span>&nbsp;<span class="op" id="5134585">:=</span>&nbsp;<span class="builtinfunc" id="5134588">len</span><span class="op" id="5134591">(</span><span class="ident" id="5134592"><a href="/go/ast/filter.go.html#5134406">f</a></span><span class="op" id="5134593">.</span><span class="ident" id="5134594">Names</span><span class="op" id="5134599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134604"><a href="/go/ast/filter.go.html#5134406">f</a></span><span class="op" id="5134605">.</span><span class="ident" id="5134606">Names</span>&nbsp;<span class="op" id="5134612">=</span>&nbsp;<span class="ident" id="5134614"><a href="/go/ast/filter.go.html#5133698">filterIdentList</a></span><span class="op" id="5134629">(</span><span class="ident" id="5134630"><a href="/go/ast/filter.go.html#5134406">f</a></span><span class="op" id="5134631">.</span><span class="ident" id="5134632">Names</span><span class="op" id="5134637">,</span>&nbsp;<span class="ident" id="5134639"><a href="/go/ast/filter.go.html#5134280">filter</a></span><span class="op" id="5134645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134650">if</span>&nbsp;<span class="builtinfunc" id="5134653">len</span><span class="op" id="5134656">(</span><span class="ident" id="5134657"><a href="/go/ast/filter.go.html#5134406">f</a></span><span class="op" id="5134658">.</span><span class="ident" id="5134659">Names</span><span class="op" id="5134664">)</span>&nbsp;<span class="op" id="5134666">&lt;</span>&nbsp;<span class="ident" id="5134668"><a href="/go/ast/filter.go.html#5134583">n</a></span>&nbsp;<span class="op" id="5134670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134676"><a href="/go/ast/filter.go.html#5134309">removedFields</a></span>&nbsp;<span class="op" id="5134690">=</span>&nbsp;<span class="builtintype" id="5134692">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5134700">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134705"><a href="/go/ast/filter.go.html#5134426">keepField</a></span>&nbsp;<span class="op" id="5134715">=</span>&nbsp;<span class="builtinfunc" id="5134717">len</span><span class="op" id="5134720">(</span><span class="ident" id="5134721"><a href="/go/ast/filter.go.html#5134406">f</a></span><span class="op" id="5134722">.</span><span class="ident" id="5134723">Names</span><span class="op" id="5134728">)</span>&nbsp;<span class="op" id="5134730">&gt;</span>&nbsp;<span class="num" id="5134732">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5134736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134740">if</span>&nbsp;<span class="ident" id="5134743"><a href="/go/ast/filter.go.html#5134426">keepField</a></span>&nbsp;<span class="op" id="5134753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134758">if</span>&nbsp;<span class="ident" id="5134761"><a href="/go/ast/filter.go.html#5134295">export</a></span>&nbsp;<span class="op" id="5134768">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134774"><a href="/go/ast/filter.go.html#5135162">filterType</a></span><span class="op" id="5134784">(</span><span class="ident" id="5134785"><a href="/go/ast/filter.go.html#5134406">f</a></span><span class="op" id="5134786">.</span><span class="ident" id="5134787">Type</span><span class="op" id="5134791">,</span>&nbsp;<span class="ident" id="5134793"><a href="/go/ast/filter.go.html#5134280">filter</a></span><span class="op" id="5134799">,</span>&nbsp;<span class="ident" id="5134801"><a href="/go/ast/filter.go.html#5134295">export</a></span><span class="op" id="5134807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5134812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134817"><a href="/go/ast/filter.go.html#5134370">list</a></span><span class="op" id="5134821">[</span><span class="ident" id="5134822"><a href="/go/ast/filter.go.html#5134391">j</a></span><span class="op" id="5134823">]</span>&nbsp;<span class="op" id="5134825">=</span>&nbsp;<span class="ident" id="5134827"><a href="/go/ast/filter.go.html#5134406">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134832"><a href="/go/ast/filter.go.html#5134391">j</a></span><span class="op" id="5134833">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5134838">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5134841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134844">if</span>&nbsp;<span class="ident" id="5134847"><a href="/go/ast/filter.go.html#5134391">j</a></span>&nbsp;<span class="op" id="5134849">&lt;</span>&nbsp;<span class="builtinfunc" id="5134851">len</span><span class="op" id="5134854">(</span><span class="ident" id="5134855"><a href="/go/ast/filter.go.html#5134370">list</a></span><span class="op" id="5134859">)</span>&nbsp;<span class="op" id="5134861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134865"><a href="/go/ast/filter.go.html#5134309">removedFields</a></span>&nbsp;<span class="op" id="5134879">=</span>&nbsp;<span class="builtintype" id="5134881">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5134887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5134890"><a href="/go/ast/filter.go.html#5134261">fields</a></span><span class="op" id="5134896">.</span><span class="ident" id="5134897">List</span>&nbsp;<span class="op" id="5134902">=</span>&nbsp;<span class="ident" id="5134904"><a href="/go/ast/filter.go.html#5134370">list</a></span><span class="op" id="5134908">[</span><span class="num" id="5134909">0</span><span class="op" id="5134910">:</span><span class="ident" id="5134911"><a href="/go/ast/filter.go.html#5134391">j</a></span><span class="op" id="5134912">]</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5134915">return</span><br>
<span class="lineno"></span><span class="op" id="5134922">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5134925">func</span>&nbsp;<span class="ident" id="5134930">filterParamList</span><span class="op" id="5134945">(</span><span class="ident" id="5134946">fields</span>&nbsp;<span class="op" id="5134953">*</span><span class="ident" id="5134954"><a href="/go/ast/ast.go.html#5097003">FieldList</a></span><span class="op" id="5134963">,</span>&nbsp;<span class="ident" id="5134965">filter</span>&nbsp;<span class="ident" id="5134972"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5134978">,</span>&nbsp;<span class="ident" id="5134980">export</span>&nbsp;<span class="builtintype" id="5134987">bool</span><span class="op" id="5134991">)</span>&nbsp;<span class="builtintype" id="5134993">bool</span>&nbsp;<span class="op" id="5134998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135001">if</span>&nbsp;<span class="ident" id="5135004"><a href="/go/ast/filter.go.html#5134946">fields</a></span>&nbsp;<span class="op" id="5135011">==</span>&nbsp;<span class="ident" id="5135014">nil</span>&nbsp;<span class="op" id="5135018">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135022">return</span>&nbsp;<span class="builtintype" id="5135029">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5135036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135039">var</span>&nbsp;<span class="ident" id="5135043">b</span>&nbsp;<span class="builtintype" id="5135045">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135051">for</span>&nbsp;<span class="ident" id="5135055">_</span><span class="op" id="5135056">,</span>&nbsp;<span class="ident" id="5135058">f</span>&nbsp;<span class="op" id="5135060">:=</span>&nbsp;<span class="keyword" id="5135063">range</span>&nbsp;<span class="ident" id="5135069"><a href="/go/ast/filter.go.html#5134946">fields</a></span><span class="op" id="5135075">.</span><span class="ident" id="5135076">List</span>&nbsp;<span class="op" id="5135081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135085">if</span>&nbsp;<span class="ident" id="5135088"><a href="/go/ast/filter.go.html#5135162">filterType</a></span><span class="op" id="5135098">(</span><span class="ident" id="5135099"><a href="/go/ast/filter.go.html#5135058">f</a></span><span class="op" id="5135100">.</span><span class="ident" id="5135101">Type</span><span class="op" id="5135105">,</span>&nbsp;<span class="ident" id="5135107"><a href="/go/ast/filter.go.html#5134965">filter</a></span><span class="op" id="5135113">,</span>&nbsp;<span class="ident" id="5135115"><a href="/go/ast/filter.go.html#5134980">export</a></span><span class="op" id="5135121">)</span>&nbsp;<span class="op" id="5135123">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5135128"><a href="/go/ast/filter.go.html#5135043">b</a></span>&nbsp;<span class="op" id="5135130">=</span>&nbsp;<span class="builtintype" id="5135132">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5135139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5135142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135145">return</span>&nbsp;<span class="ident" id="5135152"><a href="/go/ast/filter.go.html#5135043">b</a></span><br>
<span class="lineno"></span><span class="op" id="5135154">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="5135157">func</span>&nbsp;<span class="ident" id="5135162">filterType</span><span class="op" id="5135172">(</span><span class="ident" id="5135173">typ</span>&nbsp;<span class="ident" id="5135177"><a href="/go/ast/ast.go.html#5093383">Expr</a></span><span class="op" id="5135181">,</span>&nbsp;<span class="ident" id="5135183">f</span>&nbsp;<span class="ident" id="5135185"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5135191">,</span>&nbsp;<span class="ident" id="5135193">export</span>&nbsp;<span class="builtintype" id="5135200">bool</span><span class="op" id="5135204">)</span>&nbsp;<span class="builtintype" id="5135206">bool</span>&nbsp;<span class="op" id="5135211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135214">switch</span>&nbsp;<span class="ident" id="5135221">t</span>&nbsp;<span class="op" id="5135223">:=</span>&nbsp;<span class="ident" id="5135226"><a href="/go/ast/filter.go.html#5135173">typ</a></span><span class="op" id="5135229">.</span><span class="op" id="5135230">(</span><span class="keyword" id="5135231">type</span><span class="op" id="5135235">)</span>&nbsp;<span class="op" id="5135237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135240">case</span>&nbsp;<span class="op" id="5135245">*</span><span class="ident" id="5135246"><a href="/go/ast/ast.go.html#5098384">Ident</a></span><span class="op" id="5135251">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135255">return</span>&nbsp;<span class="ident" id="5135262"><a href="/go/ast/filter.go.html#5135183">f</a></span><span class="op" id="5135263">(</span><span class="ident" id="5135264"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135265">.</span><span class="ident" id="5135266">Name</span><span class="op" id="5135270">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135273">case</span>&nbsp;<span class="op" id="5135278">*</span><span class="ident" id="5135279"><a href="/go/ast/ast.go.html#5099566">ParenExpr</a></span><span class="op" id="5135288">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135292">return</span>&nbsp;<span class="ident" id="5135299"><a href="/go/ast/filter.go.html#5135162">filterType</a></span><span class="op" id="5135309">(</span><span class="ident" id="5135310"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135311">.</span><span class="ident" id="5135312">X</span><span class="op" id="5135313">,</span>&nbsp;<span class="ident" id="5135315"><a href="/go/ast/filter.go.html#5135183">f</a></span><span class="op" id="5135316">,</span>&nbsp;<span class="ident" id="5135318"><a href="/go/ast/filter.go.html#5135193">export</a></span><span class="op" id="5135324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135327">case</span>&nbsp;<span class="op" id="5135332">*</span><span class="ident" id="5135333"><a href="/go/ast/ast.go.html#5102368">ArrayType</a></span><span class="op" id="5135342">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135346">return</span>&nbsp;<span class="ident" id="5135353"><a href="/go/ast/filter.go.html#5135162">filterType</a></span><span class="op" id="5135363">(</span><span class="ident" id="5135364"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135365">.</span><span class="ident" id="5135366">Elt</span><span class="op" id="5135369">,</span>&nbsp;<span class="ident" id="5135371"><a href="/go/ast/filter.go.html#5135183">f</a></span><span class="op" id="5135372">,</span>&nbsp;<span class="ident" id="5135374"><a href="/go/ast/filter.go.html#5135193">export</a></span><span class="op" id="5135380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135383">case</span>&nbsp;<span class="op" id="5135388">*</span><span class="ident" id="5135389"><a href="/go/ast/ast.go.html#5102593">StructType</a></span><span class="op" id="5135399">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135403">if</span>&nbsp;<span class="ident" id="5135406"><a href="/go/ast/filter.go.html#5134245">filterFieldList</a></span><span class="op" id="5135421">(</span><span class="ident" id="5135422"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135423">.</span><span class="ident" id="5135424">Fields</span><span class="op" id="5135430">,</span>&nbsp;<span class="ident" id="5135432"><a href="/go/ast/filter.go.html#5135183">f</a></span><span class="op" id="5135433">,</span>&nbsp;<span class="ident" id="5135435"><a href="/go/ast/filter.go.html#5135193">export</a></span><span class="op" id="5135441">)</span>&nbsp;<span class="op" id="5135443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5135448"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135449">.</span><span class="ident" id="5135450">Incomplete</span>&nbsp;<span class="op" id="5135461">=</span>&nbsp;<span class="builtintype" id="5135463">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5135470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135474">return</span>&nbsp;<span class="builtinfunc" id="5135481">len</span><span class="op" id="5135484">(</span><span class="ident" id="5135485"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135486">.</span><span class="ident" id="5135487">Fields</span><span class="op" id="5135493">.</span><span class="ident" id="5135494">List</span><span class="op" id="5135498">)</span>&nbsp;<span class="op" id="5135500">&gt;</span>&nbsp;<span class="num" id="5135502">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135505">case</span>&nbsp;<span class="op" id="5135510">*</span><span class="ident" id="5135511"><a href="/go/ast/ast.go.html#5102913">FuncType</a></span><span class="op" id="5135519">:</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5135523">b1</span>&nbsp;<span class="op" id="5135526">:=</span>&nbsp;<span class="ident" id="5135529"><a href="/go/ast/filter.go.html#5134930">filterParamList</a></span><span class="op" id="5135544">(</span><span class="ident" id="5135545"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135546">.</span><span class="ident" id="5135547">Params</span><span class="op" id="5135553">,</span>&nbsp;<span class="ident" id="5135555"><a href="/go/ast/filter.go.html#5135183">f</a></span><span class="op" id="5135556">,</span>&nbsp;<span class="ident" id="5135558"><a href="/go/ast/filter.go.html#5135193">export</a></span><span class="op" id="5135564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5135568">b2</span>&nbsp;<span class="op" id="5135571">:=</span>&nbsp;<span class="ident" id="5135574"><a href="/go/ast/filter.go.html#5134930">filterParamList</a></span><span class="op" id="5135589">(</span><span class="ident" id="5135590"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135591">.</span><span class="ident" id="5135592">Results</span><span class="op" id="5135599">,</span>&nbsp;<span class="ident" id="5135601"><a href="/go/ast/filter.go.html#5135183">f</a></span><span class="op" id="5135602">,</span>&nbsp;<span class="ident" id="5135604"><a href="/go/ast/filter.go.html#5135193">export</a></span><span class="op" id="5135610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135614">return</span>&nbsp;<span class="ident" id="5135621"><a href="/go/ast/filter.go.html#5135523">b1</a></span>&nbsp;<span class="op" id="5135624">||</span>&nbsp;<span class="ident" id="5135627"><a href="/go/ast/filter.go.html#5135568">b2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135631">case</span>&nbsp;<span class="op" id="5135636">*</span><span class="ident" id="5135637"><a href="/go/ast/ast.go.html#5103185">InterfaceType</a></span><span class="op" id="5135650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135654">if</span>&nbsp;<span class="ident" id="5135657"><a href="/go/ast/filter.go.html#5134245">filterFieldList</a></span><span class="op" id="5135672">(</span><span class="ident" id="5135673"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135674">.</span><span class="ident" id="5135675">Methods</span><span class="op" id="5135682">,</span>&nbsp;<span class="ident" id="5135684"><a href="/go/ast/filter.go.html#5135183">f</a></span><span class="op" id="5135685">,</span>&nbsp;<span class="ident" id="5135687"><a href="/go/ast/filter.go.html#5135193">export</a></span><span class="op" id="5135693">)</span>&nbsp;<span class="op" id="5135695">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5135700"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135701">.</span><span class="ident" id="5135702">Incomplete</span>&nbsp;<span class="op" id="5135713">=</span>&nbsp;<span class="builtintype" id="5135715">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5135722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135726">return</span>&nbsp;<span class="builtinfunc" id="5135733">len</span><span class="op" id="5135736">(</span><span class="ident" id="5135737"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135738">.</span><span class="ident" id="5135739">Methods</span><span class="op" id="5135746">.</span><span class="ident" id="5135747">List</span><span class="op" id="5135751">)</span>&nbsp;<span class="op" id="5135753">&gt;</span>&nbsp;<span class="num" id="5135755">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135758">case</span>&nbsp;<span class="op" id="5135763">*</span><span class="ident" id="5135764"><a href="/go/ast/ast.go.html#5103441">MapType</a></span><span class="op" id="5135771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5135775">b1</span>&nbsp;<span class="op" id="5135778">:=</span>&nbsp;<span class="ident" id="5135781"><a href="/go/ast/filter.go.html#5135162">filterType</a></span><span class="op" id="5135791">(</span><span class="ident" id="5135792"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135793">.</span><span class="ident" id="5135794">Key</span><span class="op" id="5135797">,</span>&nbsp;<span class="ident" id="5135799"><a href="/go/ast/filter.go.html#5135183">f</a></span><span class="op" id="5135800">,</span>&nbsp;<span class="ident" id="5135802"><a href="/go/ast/filter.go.html#5135193">export</a></span><span class="op" id="5135808">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5135812">b2</span>&nbsp;<span class="op" id="5135815">:=</span>&nbsp;<span class="ident" id="5135818"><a href="/go/ast/filter.go.html#5135162">filterType</a></span><span class="op" id="5135828">(</span><span class="ident" id="5135829"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135830">.</span><span class="ident" id="5135831">Value</span><span class="op" id="5135836">,</span>&nbsp;<span class="ident" id="5135838"><a href="/go/ast/filter.go.html#5135183">f</a></span><span class="op" id="5135839">,</span>&nbsp;<span class="ident" id="5135841"><a href="/go/ast/filter.go.html#5135193">export</a></span><span class="op" id="5135847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135851">return</span>&nbsp;<span class="ident" id="5135858"><a href="/go/ast/filter.go.html#5135775">b1</a></span>&nbsp;<span class="op" id="5135861">||</span>&nbsp;<span class="ident" id="5135864"><a href="/go/ast/filter.go.html#5135812">b2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135868">case</span>&nbsp;<span class="op" id="5135873">*</span><span class="ident" id="5135874"><a href="/go/ast/ast.go.html#5103583">ChanType</a></span><span class="op" id="5135882">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135886">return</span>&nbsp;<span class="ident" id="5135893"><a href="/go/ast/filter.go.html#5135162">filterType</a></span><span class="op" id="5135903">(</span><span class="ident" id="5135904"><a href="/go/ast/filter.go.html#5135221">t</a></span><span class="op" id="5135905">.</span><span class="ident" id="5135906">Value</span><span class="op" id="5135911">,</span>&nbsp;<span class="ident" id="5135913"><a href="/go/ast/filter.go.html#5135183">f</a></span><span class="op" id="5135914">,</span>&nbsp;<span class="ident" id="5135916"><a href="/go/ast/filter.go.html#5135193">export</a></span><span class="op" id="5135922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5135925">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5135928">return</span>&nbsp;<span class="builtintype" id="5135935">false</span><br>
<span class="lineno"></span><span class="op" id="5135941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5135944">func</span>&nbsp;<span class="ident" id="5135949">filterSpec</span><span class="op" id="5135959">(</span><span class="ident" id="5135960">spec</span>&nbsp;<span class="ident" id="5135965"><a href="/go/ast/ast.go.html#5117653">Spec</a></span><span class="op" id="5135969">,</span>&nbsp;<span class="ident" id="5135971">f</span>&nbsp;<span class="ident" id="5135973"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5135979">,</span>&nbsp;<span class="ident" id="5135981">export</span>&nbsp;<span class="builtintype" id="5135988">bool</span><span class="op" id="5135992">)</span>&nbsp;<span class="builtintype" id="5135994">bool</span>&nbsp;<span class="op" id="5135999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136002">switch</span>&nbsp;<span class="ident" id="5136009">s</span>&nbsp;<span class="op" id="5136011">:=</span>&nbsp;<span class="ident" id="5136014"><a href="/go/ast/filter.go.html#5135960">spec</a></span><span class="op" id="5136018">.</span><span class="op" id="5136019">(</span><span class="keyword" id="5136020">type</span><span class="op" id="5136024">)</span>&nbsp;<span class="op" id="5136026">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136029">case</span>&nbsp;<span class="op" id="5136034">*</span><span class="ident" id="5136035"><a href="/go/ast/ast.go.html#5118178">ValueSpec</a></span><span class="op" id="5136044">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5136048"><a href="/go/ast/filter.go.html#5136009">s</a></span><span class="op" id="5136049">.</span><span class="ident" id="5136050">Names</span>&nbsp;<span class="op" id="5136056">=</span>&nbsp;<span class="ident" id="5136058"><a href="/go/ast/filter.go.html#5133698">filterIdentList</a></span><span class="op" id="5136073">(</span><span class="ident" id="5136074"><a href="/go/ast/filter.go.html#5136009">s</a></span><span class="op" id="5136075">.</span><span class="ident" id="5136076">Names</span><span class="op" id="5136081">,</span>&nbsp;<span class="ident" id="5136083"><a href="/go/ast/filter.go.html#5135971">f</a></span><span class="op" id="5136084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136088">if</span>&nbsp;<span class="builtinfunc" id="5136091">len</span><span class="op" id="5136094">(</span><span class="ident" id="5136095"><a href="/go/ast/filter.go.html#5136009">s</a></span><span class="op" id="5136096">.</span><span class="ident" id="5136097">Names</span><span class="op" id="5136102">)</span>&nbsp;<span class="op" id="5136104">&gt;</span>&nbsp;<span class="num" id="5136106">0</span>&nbsp;<span class="op" id="5136108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136113">if</span>&nbsp;<span class="ident" id="5136116"><a href="/go/ast/filter.go.html#5135981">export</a></span>&nbsp;<span class="op" id="5136123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5136129"><a href="/go/ast/filter.go.html#5135162">filterType</a></span><span class="op" id="5136139">(</span><span class="ident" id="5136140"><a href="/go/ast/filter.go.html#5136009">s</a></span><span class="op" id="5136141">.</span><span class="ident" id="5136142">Type</span><span class="op" id="5136146">,</span>&nbsp;<span class="ident" id="5136148"><a href="/go/ast/filter.go.html#5135971">f</a></span><span class="op" id="5136149">,</span>&nbsp;<span class="ident" id="5136151"><a href="/go/ast/filter.go.html#5135981">export</a></span><span class="op" id="5136157">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5136162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136167">return</span>&nbsp;<span class="builtintype" id="5136174">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5136181">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136184">case</span>&nbsp;<span class="op" id="5136189">*</span><span class="ident" id="5136190"><a href="/go/ast/ast.go.html#5118536">TypeSpec</a></span><span class="op" id="5136198">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136202">if</span>&nbsp;<span class="ident" id="5136205"><a href="/go/ast/filter.go.html#5135971">f</a></span><span class="op" id="5136206">(</span><span class="ident" id="5136207"><a href="/go/ast/filter.go.html#5136009">s</a></span><span class="op" id="5136208">.</span><span class="ident" id="5136209">Name</span><span class="op" id="5136213">.</span><span class="ident" id="5136214">Name</span><span class="op" id="5136218">)</span>&nbsp;<span class="op" id="5136220">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136225">if</span>&nbsp;<span class="ident" id="5136228"><a href="/go/ast/filter.go.html#5135981">export</a></span>&nbsp;<span class="op" id="5136235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5136241"><a href="/go/ast/filter.go.html#5135162">filterType</a></span><span class="op" id="5136251">(</span><span class="ident" id="5136252"><a href="/go/ast/filter.go.html#5136009">s</a></span><span class="op" id="5136253">.</span><span class="ident" id="5136254">Type</span><span class="op" id="5136258">,</span>&nbsp;<span class="ident" id="5136260"><a href="/go/ast/filter.go.html#5135971">f</a></span><span class="op" id="5136261">,</span>&nbsp;<span class="ident" id="5136263"><a href="/go/ast/filter.go.html#5135981">export</a></span><span class="op" id="5136269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5136274">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136279">return</span>&nbsp;<span class="builtintype" id="5136286">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5136293">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136297">if</span>&nbsp;<span class="op" id="5136300">!</span><span class="ident" id="5136301"><a href="/go/ast/filter.go.html#5135981">export</a></span>&nbsp;<span class="op" id="5136308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5136313">//&nbsp;For&nbsp;general&nbsp;filtering&nbsp;(not&nbsp;just&nbsp;exports),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5136361">//&nbsp;filter&nbsp;type&nbsp;even&nbsp;if&nbsp;name&nbsp;is&nbsp;not&nbsp;filtered</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5136408">//&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5136419">//&nbsp;If&nbsp;the&nbsp;type&nbsp;contains&nbsp;filtered&nbsp;elements,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5136465">//&nbsp;keep&nbsp;the&nbsp;declaration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136493">return</span>&nbsp;<span class="ident" id="5136500"><a href="/go/ast/filter.go.html#5135162">filterType</a></span><span class="op" id="5136510">(</span><span class="ident" id="5136511"><a href="/go/ast/filter.go.html#5136009">s</a></span><span class="op" id="5136512">.</span><span class="ident" id="5136513">Type</span><span class="op" id="5136517">,</span>&nbsp;<span class="ident" id="5136519"><a href="/go/ast/filter.go.html#5135971">f</a></span><span class="op" id="5136520">,</span>&nbsp;<span class="ident" id="5136522"><a href="/go/ast/filter.go.html#5135981">export</a></span><span class="op" id="5136528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5136532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5136535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136538">return</span>&nbsp;<span class="builtintype" id="5136545">false</span><br>
<span class="lineno">185</span><span class="op" id="5136551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5136554">func</span>&nbsp;<span class="ident" id="5136559">filterSpecList</span><span class="op" id="5136573">(</span><span class="ident" id="5136574">list</span>&nbsp;<span class="op" id="5136579">[</span><span class="op" id="5136580">]</span><span class="ident" id="5136581"><a href="/go/ast/ast.go.html#5117653">Spec</a></span><span class="op" id="5136585">,</span>&nbsp;<span class="ident" id="5136587">f</span>&nbsp;<span class="ident" id="5136589"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5136595">,</span>&nbsp;<span class="ident" id="5136597">export</span>&nbsp;<span class="builtintype" id="5136604">bool</span><span class="op" id="5136608">)</span>&nbsp;<span class="op" id="5136610">[</span><span class="op" id="5136611">]</span><span class="ident" id="5136612"><a href="/go/ast/ast.go.html#5117653">Spec</a></span>&nbsp;<span class="op" id="5136617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5136620">j</span>&nbsp;<span class="op" id="5136622">:=</span>&nbsp;<span class="num" id="5136625">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136628">for</span>&nbsp;<span class="ident" id="5136632">_</span><span class="op" id="5136633">,</span>&nbsp;<span class="ident" id="5136635">s</span>&nbsp;<span class="op" id="5136637">:=</span>&nbsp;<span class="keyword" id="5136640">range</span>&nbsp;<span class="ident" id="5136646"><a href="/go/ast/filter.go.html#5136574">list</a></span>&nbsp;<span class="op" id="5136651">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136655">if</span>&nbsp;<span class="ident" id="5136658"><a href="/go/ast/filter.go.html#5135949">filterSpec</a></span><span class="op" id="5136668">(</span><span class="ident" id="5136669"><a href="/go/ast/filter.go.html#5136635">s</a></span><span class="op" id="5136670">,</span>&nbsp;<span class="ident" id="5136672"><a href="/go/ast/filter.go.html#5136587">f</a></span><span class="op" id="5136673">,</span>&nbsp;<span class="ident" id="5136675"><a href="/go/ast/filter.go.html#5136597">export</a></span><span class="op" id="5136681">)</span>&nbsp;<span class="op" id="5136683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5136688"><a href="/go/ast/filter.go.html#5136574">list</a></span><span class="op" id="5136692">[</span><span class="ident" id="5136693"><a href="/go/ast/filter.go.html#5136620">j</a></span><span class="op" id="5136694">]</span>&nbsp;<span class="op" id="5136696">=</span>&nbsp;<span class="ident" id="5136698"><a href="/go/ast/filter.go.html#5136635">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5136703"><a href="/go/ast/filter.go.html#5136620">j</a></span><span class="op" id="5136704">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5136709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5136712">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5136715">return</span>&nbsp;<span class="ident" id="5136722"><a href="/go/ast/filter.go.html#5136574">list</a></span><span class="op" id="5136726">[</span><span class="num" id="5136727">0</span><span class="op" id="5136728">:</span><span class="ident" id="5136729"><a href="/go/ast/filter.go.html#5136620">j</a></span><span class="op" id="5136730">]</span><br>
<span class="lineno"></span><span class="op" id="5136732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5136735">//&nbsp;FilterDecl&nbsp;trims&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;Go&nbsp;declaration&nbsp;in&nbsp;place&nbsp;by&nbsp;removing</span><br>
<span class="lineno"></span><span class="comment" id="5136805">//&nbsp;all&nbsp;names&nbsp;(including&nbsp;struct&nbsp;field&nbsp;and&nbsp;interface&nbsp;method&nbsp;names,&nbsp;but</span><br>
<span class="lineno">200</span><span class="comment" id="5136874">//&nbsp;not&nbsp;from&nbsp;parameter&nbsp;lists)&nbsp;that&nbsp;don&#39;t&nbsp;pass&nbsp;through&nbsp;the&nbsp;filter&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="5136941">//</span><br>
<span class="lineno"></span><span class="comment" id="5136944">//&nbsp;FilterDecl&nbsp;returns&nbsp;true&nbsp;if&nbsp;there&nbsp;are&nbsp;any&nbsp;declared&nbsp;names&nbsp;left&nbsp;after</span><br>
<span class="lineno"></span><span class="comment" id="5137014">//&nbsp;filtering;&nbsp;it&nbsp;returns&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="5137056">//</span><br>
<span class="lineno">205</span><span class="keyword" id="5137059">func</span>&nbsp;<span class="ident" id="5137064">FilterDecl</span><span class="op" id="5137074">(</span><span class="ident" id="5137075">decl</span>&nbsp;<span class="ident" id="5137080"><a href="/go/ast/ast.go.html#5093577">Decl</a></span><span class="op" id="5137084">,</span>&nbsp;<span class="ident" id="5137086">f</span>&nbsp;<span class="ident" id="5137088"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5137094">)</span>&nbsp;<span class="builtintype" id="5137096">bool</span>&nbsp;<span class="op" id="5137101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137104">return</span>&nbsp;<span class="ident" id="5137111"><a href="/go/ast/filter.go.html#5137146">filterDecl</a></span><span class="op" id="5137121">(</span><span class="ident" id="5137122"><a href="/go/ast/filter.go.html#5137075">decl</a></span><span class="op" id="5137126">,</span>&nbsp;<span class="ident" id="5137128"><a href="/go/ast/filter.go.html#5137086">f</a></span><span class="op" id="5137129">,</span>&nbsp;<span class="builtintype" id="5137131">false</span><span class="op" id="5137136">)</span><br>
<span class="lineno"></span><span class="op" id="5137138">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5137141">func</span>&nbsp;<span class="ident" id="5137146">filterDecl</span><span class="op" id="5137156">(</span><span class="ident" id="5137157">decl</span>&nbsp;<span class="ident" id="5137162"><a href="/go/ast/ast.go.html#5093577">Decl</a></span><span class="op" id="5137166">,</span>&nbsp;<span class="ident" id="5137168">f</span>&nbsp;<span class="ident" id="5137170"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5137176">,</span>&nbsp;<span class="ident" id="5137178">export</span>&nbsp;<span class="builtintype" id="5137185">bool</span><span class="op" id="5137189">)</span>&nbsp;<span class="builtintype" id="5137191">bool</span>&nbsp;<span class="op" id="5137196">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137199">switch</span>&nbsp;<span class="ident" id="5137206">d</span>&nbsp;<span class="op" id="5137208">:=</span>&nbsp;<span class="ident" id="5137211"><a href="/go/ast/filter.go.html#5137157">decl</a></span><span class="op" id="5137215">.</span><span class="op" id="5137216">(</span><span class="keyword" id="5137217">type</span><span class="op" id="5137221">)</span>&nbsp;<span class="op" id="5137223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137226">case</span>&nbsp;<span class="op" id="5137231">*</span><span class="ident" id="5137232"><a href="/go/ast/ast.go.html#5120307">GenDecl</a></span><span class="op" id="5137239">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5137243"><a href="/go/ast/filter.go.html#5137206">d</a></span><span class="op" id="5137244">.</span><span class="ident" id="5137245">Specs</span>&nbsp;<span class="op" id="5137251">=</span>&nbsp;<span class="ident" id="5137253"><a href="/go/ast/filter.go.html#5136559">filterSpecList</a></span><span class="op" id="5137267">(</span><span class="ident" id="5137268"><a href="/go/ast/filter.go.html#5137206">d</a></span><span class="op" id="5137269">.</span><span class="ident" id="5137270">Specs</span><span class="op" id="5137275">,</span>&nbsp;<span class="ident" id="5137277"><a href="/go/ast/filter.go.html#5137168">f</a></span><span class="op" id="5137278">,</span>&nbsp;<span class="ident" id="5137280"><a href="/go/ast/filter.go.html#5137178">export</a></span><span class="op" id="5137286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137290">return</span>&nbsp;<span class="builtinfunc" id="5137297">len</span><span class="op" id="5137300">(</span><span class="ident" id="5137301"><a href="/go/ast/filter.go.html#5137206">d</a></span><span class="op" id="5137302">.</span><span class="ident" id="5137303">Specs</span><span class="op" id="5137308">)</span>&nbsp;<span class="op" id="5137310">&gt;</span>&nbsp;<span class="num" id="5137312">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137315">case</span>&nbsp;<span class="op" id="5137320">*</span><span class="ident" id="5137321"><a href="/go/ast/ast.go.html#5120648">FuncDecl</a></span><span class="op" id="5137329">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137333">return</span>&nbsp;<span class="ident" id="5137340"><a href="/go/ast/filter.go.html#5137168">f</a></span><span class="op" id="5137341">(</span><span class="ident" id="5137342"><a href="/go/ast/filter.go.html#5137206">d</a></span><span class="op" id="5137343">.</span><span class="ident" id="5137344">Name</span><span class="op" id="5137348">.</span><span class="ident" id="5137349">Name</span><span class="op" id="5137353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5137356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137359">return</span>&nbsp;<span class="builtintype" id="5137366">false</span><br>
<span class="lineno"></span><span class="op" id="5137372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment" id="5137375">//&nbsp;FilterFile&nbsp;trims&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;Go&nbsp;file&nbsp;in&nbsp;place&nbsp;by&nbsp;removing&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="5137442">//&nbsp;names&nbsp;from&nbsp;top-level&nbsp;declarations&nbsp;(including&nbsp;struct&nbsp;field&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5137507">//&nbsp;interface&nbsp;method&nbsp;names,&nbsp;but&nbsp;not&nbsp;from&nbsp;parameter&nbsp;lists)&nbsp;that&nbsp;don&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="5137575">//&nbsp;pass&nbsp;through&nbsp;the&nbsp;filter&nbsp;f.&nbsp;If&nbsp;the&nbsp;declaration&nbsp;is&nbsp;empty&nbsp;afterwards,</span><br>
<span class="lineno"></span><span class="comment" id="5137645">//&nbsp;the&nbsp;declaration&nbsp;is&nbsp;removed&nbsp;from&nbsp;the&nbsp;AST.&nbsp;The&nbsp;File.Comments&nbsp;list</span><br>
<span class="lineno">225</span><span class="comment" id="5137712">//&nbsp;is&nbsp;not&nbsp;changed.</span><br>
<span class="lineno"></span><span class="comment" id="5137731">//</span><br>
<span class="lineno"></span><span class="comment" id="5137734">//&nbsp;FilterFile&nbsp;returns&nbsp;true&nbsp;if&nbsp;there&nbsp;are&nbsp;any&nbsp;top-level&nbsp;declarations</span><br>
<span class="lineno"></span><span class="comment" id="5137801">//&nbsp;left&nbsp;after&nbsp;filtering;&nbsp;it&nbsp;returns&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="5137854">//</span><br>
<span class="lineno">230</span><span class="keyword" id="5137857">func</span>&nbsp;<span class="ident" id="5137862">FilterFile</span><span class="op" id="5137872">(</span><span class="ident" id="5137873">src</span>&nbsp;<span class="op" id="5137877">*</span><span class="ident" id="5137878"><a href="/go/ast/ast.go.html#5122014">File</a></span><span class="op" id="5137882">,</span>&nbsp;<span class="ident" id="5137884">f</span>&nbsp;<span class="ident" id="5137886"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5137892">)</span>&nbsp;<span class="builtintype" id="5137894">bool</span>&nbsp;<span class="op" id="5137899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5137902">return</span>&nbsp;<span class="ident" id="5137909"><a href="/go/ast/filter.go.html#5137943">filterFile</a></span><span class="op" id="5137919">(</span><span class="ident" id="5137920"><a href="/go/ast/filter.go.html#5137873">src</a></span><span class="op" id="5137923">,</span>&nbsp;<span class="ident" id="5137925"><a href="/go/ast/filter.go.html#5137884">f</a></span><span class="op" id="5137926">,</span>&nbsp;<span class="builtintype" id="5137928">false</span><span class="op" id="5137933">)</span><br>
<span class="lineno"></span><span class="op" id="5137935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5137938">func</span>&nbsp;<span class="ident" id="5137943">filterFile</span><span class="op" id="5137953">(</span><span class="ident" id="5137954">src</span>&nbsp;<span class="op" id="5137958">*</span><span class="ident" id="5137959"><a href="/go/ast/ast.go.html#5122014">File</a></span><span class="op" id="5137963">,</span>&nbsp;<span class="ident" id="5137965">f</span>&nbsp;<span class="ident" id="5137967"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5137973">,</span>&nbsp;<span class="ident" id="5137975">export</span>&nbsp;<span class="builtintype" id="5137982">bool</span><span class="op" id="5137986">)</span>&nbsp;<span class="builtintype" id="5137988">bool</span>&nbsp;<span class="op" id="5137993">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5137996">j</span>&nbsp;<span class="op" id="5137998">:=</span>&nbsp;<span class="num" id="5138001">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138004">for</span>&nbsp;<span class="ident" id="5138008">_</span><span class="op" id="5138009">,</span>&nbsp;<span class="ident" id="5138011">d</span>&nbsp;<span class="op" id="5138013">:=</span>&nbsp;<span class="keyword" id="5138016">range</span>&nbsp;<span class="ident" id="5138022"><a href="/go/ast/filter.go.html#5137954">src</a></span><span class="op" id="5138025">.</span><span class="ident" id="5138026">Decls</span>&nbsp;<span class="op" id="5138032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138036">if</span>&nbsp;<span class="ident" id="5138039"><a href="/go/ast/filter.go.html#5137146">filterDecl</a></span><span class="op" id="5138049">(</span><span class="ident" id="5138050"><a href="/go/ast/filter.go.html#5138011">d</a></span><span class="op" id="5138051">,</span>&nbsp;<span class="ident" id="5138053"><a href="/go/ast/filter.go.html#5137965">f</a></span><span class="op" id="5138054">,</span>&nbsp;<span class="ident" id="5138056"><a href="/go/ast/filter.go.html#5137975">export</a></span><span class="op" id="5138062">)</span>&nbsp;<span class="op" id="5138064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138069"><a href="/go/ast/filter.go.html#5137954">src</a></span><span class="op" id="5138072">.</span><span class="ident" id="5138073">Decls</span><span class="op" id="5138078">[</span><span class="ident" id="5138079"><a href="/go/ast/filter.go.html#5137996">j</a></span><span class="op" id="5138080">]</span>&nbsp;<span class="op" id="5138082">=</span>&nbsp;<span class="ident" id="5138084"><a href="/go/ast/filter.go.html#5138011">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138089"><a href="/go/ast/filter.go.html#5137996">j</a></span><span class="op" id="5138090">++</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138101"><a href="/go/ast/filter.go.html#5137954">src</a></span><span class="op" id="5138104">.</span><span class="ident" id="5138105">Decls</span>&nbsp;<span class="op" id="5138111">=</span>&nbsp;<span class="ident" id="5138113"><a href="/go/ast/filter.go.html#5137954">src</a></span><span class="op" id="5138116">.</span><span class="ident" id="5138117">Decls</span><span class="op" id="5138122">[</span><span class="num" id="5138123">0</span><span class="op" id="5138124">:</span><span class="ident" id="5138125"><a href="/go/ast/filter.go.html#5137996">j</a></span><span class="op" id="5138126">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138129">return</span>&nbsp;<span class="ident" id="5138136"><a href="/go/ast/filter.go.html#5137996">j</a></span>&nbsp;<span class="op" id="5138138">&gt;</span>&nbsp;<span class="num" id="5138140">0</span><br>
<span class="lineno"></span><span class="op" id="5138142">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="5138145">//&nbsp;FilterPackage&nbsp;trims&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;Go&nbsp;package&nbsp;in&nbsp;place&nbsp;by&nbsp;removing</span><br>
<span class="lineno"></span><span class="comment" id="5138214">//&nbsp;all&nbsp;names&nbsp;from&nbsp;top-level&nbsp;declarations&nbsp;(including&nbsp;struct&nbsp;field&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5138283">//&nbsp;interface&nbsp;method&nbsp;names,&nbsp;but&nbsp;not&nbsp;from&nbsp;parameter&nbsp;lists)&nbsp;that&nbsp;don&#39;t</span><br>
<span class="lineno"></span><span class="comment" id="5138351">//&nbsp;pass&nbsp;through&nbsp;the&nbsp;filter&nbsp;f.&nbsp;If&nbsp;the&nbsp;declaration&nbsp;is&nbsp;empty&nbsp;afterwards,</span><br>
<span class="lineno">250</span><span class="comment" id="5138421">//&nbsp;the&nbsp;declaration&nbsp;is&nbsp;removed&nbsp;from&nbsp;the&nbsp;AST.&nbsp;The&nbsp;pkg.Files&nbsp;list&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="5138491">//&nbsp;changed,&nbsp;so&nbsp;that&nbsp;file&nbsp;names&nbsp;and&nbsp;top-level&nbsp;package&nbsp;comments&nbsp;don&#39;t&nbsp;get</span><br>
<span class="lineno"></span><span class="comment" id="5138563">//&nbsp;lost.</span><br>
<span class="lineno"></span><span class="comment" id="5138572">//</span><br>
<span class="lineno"></span><span class="comment" id="5138575">//&nbsp;FilterPackage&nbsp;returns&nbsp;true&nbsp;if&nbsp;there&nbsp;are&nbsp;any&nbsp;top-level&nbsp;declarations</span><br>
<span class="lineno">255</span><span class="comment" id="5138645">//&nbsp;left&nbsp;after&nbsp;filtering;&nbsp;it&nbsp;returns&nbsp;false&nbsp;otherwise.</span><br>
<span class="lineno"></span><span class="comment" id="5138698">//</span><br>
<span class="lineno"></span><span class="keyword" id="5138701">func</span>&nbsp;<span class="ident" id="5138706">FilterPackage</span><span class="op" id="5138719">(</span><span class="ident" id="5138720">pkg</span>&nbsp;<span class="op" id="5138724">*</span><span class="ident" id="5138725"><a href="/go/ast/ast.go.html#5122783">Package</a></span><span class="op" id="5138732">,</span>&nbsp;<span class="ident" id="5138734">f</span>&nbsp;<span class="ident" id="5138736"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5138742">)</span>&nbsp;<span class="builtintype" id="5138744">bool</span>&nbsp;<span class="op" id="5138749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138752">return</span>&nbsp;<span class="ident" id="5138759"><a href="/go/ast/filter.go.html#5138796">filterPackage</a></span><span class="op" id="5138772">(</span><span class="ident" id="5138773"><a href="/go/ast/filter.go.html#5138720">pkg</a></span><span class="op" id="5138776">,</span>&nbsp;<span class="ident" id="5138778"><a href="/go/ast/filter.go.html#5138734">f</a></span><span class="op" id="5138779">,</span>&nbsp;<span class="builtintype" id="5138781">false</span><span class="op" id="5138786">)</span><br>
<span class="lineno"></span><span class="op" id="5138788">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="5138791">func</span>&nbsp;<span class="ident" id="5138796">filterPackage</span><span class="op" id="5138809">(</span><span class="ident" id="5138810">pkg</span>&nbsp;<span class="op" id="5138814">*</span><span class="ident" id="5138815"><a href="/go/ast/ast.go.html#5122783">Package</a></span><span class="op" id="5138822">,</span>&nbsp;<span class="ident" id="5138824">f</span>&nbsp;<span class="ident" id="5138826"><a href="/go/ast/filter.go.html#5133667">Filter</a></span><span class="op" id="5138832">,</span>&nbsp;<span class="ident" id="5138834">export</span>&nbsp;<span class="builtintype" id="5138841">bool</span><span class="op" id="5138845">)</span>&nbsp;<span class="builtintype" id="5138847">bool</span>&nbsp;<span class="op" id="5138852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138855">hasDecls</span>&nbsp;<span class="op" id="5138864">:=</span>&nbsp;<span class="builtintype" id="5138867">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138874">for</span>&nbsp;<span class="ident" id="5138878">_</span><span class="op" id="5138879">,</span>&nbsp;<span class="ident" id="5138881">src</span>&nbsp;<span class="op" id="5138885">:=</span>&nbsp;<span class="keyword" id="5138888">range</span>&nbsp;<span class="ident" id="5138894"><a href="/go/ast/filter.go.html#5138810">pkg</a></span><span class="op" id="5138897">.</span><span class="ident" id="5138898">Files</span>&nbsp;<span class="op" id="5138904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138908">if</span>&nbsp;<span class="ident" id="5138911"><a href="/go/ast/filter.go.html#5137943">filterFile</a></span><span class="op" id="5138921">(</span><span class="ident" id="5138922"><a href="/go/ast/filter.go.html#5138881">src</a></span><span class="op" id="5138925">,</span>&nbsp;<span class="ident" id="5138927"><a href="/go/ast/filter.go.html#5138824">f</a></span><span class="op" id="5138928">,</span>&nbsp;<span class="ident" id="5138930"><a href="/go/ast/filter.go.html#5138834">export</a></span><span class="op" id="5138936">)</span>&nbsp;<span class="op" id="5138938">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5138943"><a href="/go/ast/filter.go.html#5138855">hasDecls</a></span>&nbsp;<span class="op" id="5138952">=</span>&nbsp;<span class="builtintype" id="5138954">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5138964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5138967">return</span>&nbsp;<span class="ident" id="5138974"><a href="/go/ast/filter.go.html#5138855">hasDecls</a></span><br>
<span class="lineno"></span><span class="op" id="5138983">}</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="5138986">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5139066">//&nbsp;Merging&nbsp;of&nbsp;package&nbsp;files</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5139095">//&nbsp;The&nbsp;MergeMode&nbsp;flags&nbsp;control&nbsp;the&nbsp;behavior&nbsp;of&nbsp;MergePackageFiles.</span><br>
<span class="lineno">275</span><span class="keyword" id="5139161">type</span>&nbsp;<span class="ident" id="5139166">MergeMode</span>&nbsp;<span class="builtintype" id="5139176">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5139182">const</span>&nbsp;<span class="op" id="5139188">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5139191">//&nbsp;If&nbsp;set,&nbsp;duplicate&nbsp;function&nbsp;declarations&nbsp;are&nbsp;excluded.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139249">FilterFuncDuplicates</span>&nbsp;<span class="ident" id="5139270"><a href="/go/ast/filter.go.html#5139166">MergeMode</a></span>&nbsp;<span class="op" id="5139280">=</span>&nbsp;<span class="num" id="5139282">1</span>&nbsp;<span class="op" id="5139284">&lt;&lt;</span>&nbsp;<span class="ident" id="5139287">iota</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5139293">//&nbsp;If&nbsp;set,&nbsp;comments&nbsp;that&nbsp;are&nbsp;not&nbsp;associated&nbsp;with&nbsp;a&nbsp;specific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5139354">//&nbsp;AST&nbsp;node&nbsp;(as&nbsp;Doc&nbsp;or&nbsp;Comment)&nbsp;are&nbsp;excluded.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139401">FilterUnassociatedComments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5139429">//&nbsp;If&nbsp;set,&nbsp;duplicate&nbsp;import&nbsp;declarations&nbsp;are&nbsp;excluded.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139485">FilterImportDuplicates</span><br>
<span class="lineno">285</span><span class="op" id="5139508">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5139511">//&nbsp;nameOf&nbsp;returns&nbsp;the&nbsp;function&nbsp;(foo)&nbsp;or&nbsp;method&nbsp;name&nbsp;(foo.bar)&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="5139577">//&nbsp;the&nbsp;given&nbsp;function&nbsp;declaration.&nbsp;If&nbsp;the&nbsp;AST&nbsp;is&nbsp;incorrect&nbsp;for&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5139644">//&nbsp;receiver,&nbsp;it&nbsp;assumes&nbsp;a&nbsp;function&nbsp;instead.</span><br>
<span class="lineno">290</span><span class="comment" id="5139688">//</span><br>
<span class="lineno"></span><span class="keyword" id="5139691">func</span>&nbsp;<span class="ident" id="5139696">nameOf</span><span class="op" id="5139702">(</span><span class="ident" id="5139703">f</span>&nbsp;<span class="op" id="5139705">*</span><span class="ident" id="5139706"><a href="/go/ast/ast.go.html#5120648">FuncDecl</a></span><span class="op" id="5139714">)</span>&nbsp;<span class="builtintype" id="5139716">string</span>&nbsp;<span class="op" id="5139723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5139726">if</span>&nbsp;<span class="ident" id="5139729">r</span>&nbsp;<span class="op" id="5139731">:=</span>&nbsp;<span class="ident" id="5139734"><a href="/go/ast/filter.go.html#5139703">f</a></span><span class="op" id="5139735">.</span><span class="ident" id="5139736">Recv</span><span class="op" id="5139740">;</span>&nbsp;<span class="ident" id="5139742"><a href="/go/ast/filter.go.html#5139729">r</a></span>&nbsp;<span class="op" id="5139744">!=</span>&nbsp;<span class="ident" id="5139747">nil</span>&nbsp;<span class="op" id="5139751">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5139754">len</span><span class="op" id="5139757">(</span><span class="ident" id="5139758"><a href="/go/ast/filter.go.html#5139729">r</a></span><span class="op" id="5139759">.</span><span class="ident" id="5139760">List</span><span class="op" id="5139764">)</span>&nbsp;<span class="op" id="5139766">==</span>&nbsp;<span class="num" id="5139769">1</span>&nbsp;<span class="op" id="5139771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5139775">//&nbsp;looks&nbsp;like&nbsp;a&nbsp;correct&nbsp;receiver&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139822">t</span>&nbsp;<span class="op" id="5139824">:=</span>&nbsp;<span class="ident" id="5139827"><a href="/go/ast/filter.go.html#5139729">r</a></span><span class="op" id="5139828">.</span><span class="ident" id="5139829">List</span><span class="op" id="5139833">[</span><span class="num" id="5139834">0</span><span class="op" id="5139835">]</span><span class="op" id="5139836">.</span><span class="ident" id="5139837">Type</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5139844">//&nbsp;dereference&nbsp;pointer&nbsp;receiver&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5139884">if</span>&nbsp;<span class="ident" id="5139887">p</span><span class="op" id="5139888">,</span>&nbsp;<span class="ident" id="5139890">_</span>&nbsp;<span class="op" id="5139892">:=</span>&nbsp;<span class="ident" id="5139895"><a href="/go/ast/filter.go.html#5139822">t</a></span><span class="op" id="5139896">.</span><span class="op" id="5139897">(</span><span class="op" id="5139898">*</span><span class="ident" id="5139899"><a href="/go/ast/ast.go.html#5101305">StarExpr</a></span><span class="op" id="5139907">)</span><span class="op" id="5139908">;</span>&nbsp;<span class="ident" id="5139910"><a href="/go/ast/filter.go.html#5139887">p</a></span>&nbsp;<span class="op" id="5139912">!=</span>&nbsp;<span class="ident" id="5139915">nil</span>&nbsp;<span class="op" id="5139919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5139924"><a href="/go/ast/filter.go.html#5139822">t</a></span>&nbsp;<span class="op" id="5139926">=</span>&nbsp;<span class="ident" id="5139928"><a href="/go/ast/filter.go.html#5139887">p</a></span><span class="op" id="5139929">.</span><span class="ident" id="5139930">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5139934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5139938">//&nbsp;the&nbsp;receiver&nbsp;type&nbsp;must&nbsp;be&nbsp;a&nbsp;type&nbsp;name</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5139981">if</span>&nbsp;<span class="ident" id="5139984">p</span><span class="op" id="5139985">,</span>&nbsp;<span class="ident" id="5139987">_</span>&nbsp;<span class="op" id="5139989">:=</span>&nbsp;<span class="ident" id="5139992"><a href="/go/ast/filter.go.html#5139822">t</a></span><span class="op" id="5139993">.</span><span class="op" id="5139994">(</span><span class="op" id="5139995">*</span><span class="ident" id="5139996"><a href="/go/ast/ast.go.html#5098384">Ident</a></span><span class="op" id="5140001">)</span><span class="op" id="5140002">;</span>&nbsp;<span class="ident" id="5140004"><a href="/go/ast/filter.go.html#5139984">p</a></span>&nbsp;<span class="op" id="5140006">!=</span>&nbsp;<span class="ident" id="5140009">nil</span>&nbsp;<span class="op" id="5140013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5140018">return</span>&nbsp;<span class="ident" id="5140025"><a href="/go/ast/filter.go.html#5139984">p</a></span><span class="op" id="5140026">.</span><span class="ident" id="5140027">Name</span>&nbsp;<span class="op" id="5140032">+</span>&nbsp;<span class="string" id="5140034">&#34;.&#34;</span>&nbsp;<span class="op" id="5140038">+</span>&nbsp;<span class="ident" id="5140040"><a href="/go/ast/filter.go.html#5139703">f</a></span><span class="op" id="5140041">.</span><span class="ident" id="5140042">Name</span><span class="op" id="5140046">.</span><span class="ident" id="5140047">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5140054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5140058">//&nbsp;otherwise&nbsp;assume&nbsp;a&nbsp;function&nbsp;instead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5140098">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5140101">return</span>&nbsp;<span class="ident" id="5140108"><a href="/go/ast/filter.go.html#5139703">f</a></span><span class="op" id="5140109">.</span><span class="ident" id="5140110">Name</span><span class="op" id="5140114">.</span><span class="ident" id="5140115">Name</span><br>
<span class="lineno"></span><span class="op" id="5140120">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5140123">//&nbsp;separator&nbsp;is&nbsp;an&nbsp;empty&nbsp;//-style&nbsp;comment&nbsp;that&nbsp;is&nbsp;interspersed&nbsp;between</span><br>
<span class="lineno"></span><span class="comment" id="5140194">//&nbsp;different&nbsp;comment&nbsp;groups&nbsp;when&nbsp;they&nbsp;are&nbsp;concatenated&nbsp;into&nbsp;a&nbsp;single&nbsp;group</span><br>
<span class="lineno">310</span><span class="comment" id="5140269">//</span><br>
<span class="lineno"></span><span class="keyword" id="5140272">var</span>&nbsp;<span class="ident" id="5140276">separator</span>&nbsp;<span class="op" id="5140286">=</span>&nbsp;<span class="op" id="5140288">&amp;</span><span class="ident" id="5140289"><a href="/go/ast/ast.go.html#5093781">Comment</a></span><span class="op" id="5140296">{</span><span class="ident" id="5140297"><a href="/go/ast/filter.go.html#5132363">token</a></span><span class="op" id="5140302">.</span><span class="ident" id="5140303">NoPos</span><span class="op" id="5140308">,</span>&nbsp;<span class="string" id="5140310">&#34;//&#34;</span><span class="op" id="5140314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5140317">//&nbsp;MergePackageFiles&nbsp;creates&nbsp;a&nbsp;file&nbsp;AST&nbsp;by&nbsp;merging&nbsp;the&nbsp;ASTs&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5140384">//&nbsp;files&nbsp;belonging&nbsp;to&nbsp;a&nbsp;package.&nbsp;The&nbsp;mode&nbsp;flags&nbsp;control&nbsp;merging&nbsp;behavior.</span><br>
<span class="lineno">315</span><span class="comment" id="5140458">//</span><br>
<span class="lineno"></span><span class="keyword" id="5140461">func</span>&nbsp;<span class="ident" id="5140466">MergePackageFiles</span><span class="op" id="5140483">(</span><span class="ident" id="5140484">pkg</span>&nbsp;<span class="op" id="5140488">*</span><span class="ident" id="5140489"><a href="/go/ast/ast.go.html#5122783">Package</a></span><span class="op" id="5140496">,</span>&nbsp;<span class="ident" id="5140498">mode</span>&nbsp;<span class="ident" id="5140503"><a href="/go/ast/filter.go.html#5139166">MergeMode</a></span><span class="op" id="5140512">)</span>&nbsp;<span class="op" id="5140514">*</span><span class="ident" id="5140515"><a href="/go/ast/ast.go.html#5122014">File</a></span>&nbsp;<span class="op" id="5140520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5140523">//&nbsp;Count&nbsp;the&nbsp;number&nbsp;of&nbsp;package&nbsp;docs,&nbsp;comments&nbsp;and&nbsp;declarations&nbsp;across</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5140594">//&nbsp;all&nbsp;package&nbsp;files.&nbsp;Also,&nbsp;compute&nbsp;sorted&nbsp;list&nbsp;of&nbsp;filenames,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5140665">//&nbsp;subsequent&nbsp;iterations&nbsp;can&nbsp;always&nbsp;iterate&nbsp;in&nbsp;the&nbsp;same&nbsp;order.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5140729">ndocs</span>&nbsp;<span class="op" id="5140735">:=</span>&nbsp;<span class="num" id="5140738">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5140741">ncomments</span>&nbsp;<span class="op" id="5140751">:=</span>&nbsp;<span class="num" id="5140754">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5140757">ndecls</span>&nbsp;<span class="op" id="5140764">:=</span>&nbsp;<span class="num" id="5140767">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5140770">filenames</span>&nbsp;<span class="op" id="5140780">:=</span>&nbsp;<span class="builtinfunc" id="5140783">make</span><span class="op" id="5140787">(</span><span class="op" id="5140788">[</span><span class="op" id="5140789">]</span><span class="builtintype" id="5140790">string</span><span class="op" id="5140796">,</span>&nbsp;<span class="builtinfunc" id="5140798">len</span><span class="op" id="5140801">(</span><span class="ident" id="5140802"><a href="/go/ast/filter.go.html#5140484">pkg</a></span><span class="op" id="5140805">.</span><span class="ident" id="5140806">Files</span><span class="op" id="5140811">)</span><span class="op" id="5140812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5140815">i</span>&nbsp;<span class="op" id="5140817">:=</span>&nbsp;<span class="num" id="5140820">0</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5140823">for</span>&nbsp;<span class="ident" id="5140827">filename</span><span class="op" id="5140835">,</span>&nbsp;<span class="ident" id="5140837">f</span>&nbsp;<span class="op" id="5140839">:=</span>&nbsp;<span class="keyword" id="5140842">range</span>&nbsp;<span class="ident" id="5140848"><a href="/go/ast/filter.go.html#5140484">pkg</a></span><span class="op" id="5140851">.</span><span class="ident" id="5140852">Files</span>&nbsp;<span class="op" id="5140858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5140862"><a href="/go/ast/filter.go.html#5140770">filenames</a></span><span class="op" id="5140871">[</span><span class="ident" id="5140872"><a href="/go/ast/filter.go.html#5140815">i</a></span><span class="op" id="5140873">]</span>&nbsp;<span class="op" id="5140875">=</span>&nbsp;<span class="ident" id="5140877"><a href="/go/ast/filter.go.html#5140827">filename</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5140888"><a href="/go/ast/filter.go.html#5140815">i</a></span><span class="op" id="5140889">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5140894">if</span>&nbsp;<span class="ident" id="5140897"><a href="/go/ast/filter.go.html#5140837">f</a></span><span class="op" id="5140898">.</span><span class="ident" id="5140899">Doc</span>&nbsp;<span class="op" id="5140903">!=</span>&nbsp;<span class="ident" id="5140906">nil</span>&nbsp;<span class="op" id="5140910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5140915"><a href="/go/ast/filter.go.html#5140729">ndocs</a></span>&nbsp;<span class="op" id="5140921">+=</span>&nbsp;<span class="builtinfunc" id="5140924">len</span><span class="op" id="5140927">(</span><span class="ident" id="5140928"><a href="/go/ast/filter.go.html#5140837">f</a></span><span class="op" id="5140929">.</span><span class="ident" id="5140930">Doc</span><span class="op" id="5140933">.</span><span class="ident" id="5140934">List</span><span class="op" id="5140938">)</span>&nbsp;<span class="op" id="5140940">+</span>&nbsp;<span class="num" id="5140942">1</span>&nbsp;<span class="comment" id="5140944">//&nbsp;+1&nbsp;for&nbsp;separator</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5140966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5140970"><a href="/go/ast/filter.go.html#5140741">ncomments</a></span>&nbsp;<span class="op" id="5140980">+=</span>&nbsp;<span class="builtinfunc" id="5140983">len</span><span class="op" id="5140986">(</span><span class="ident" id="5140987"><a href="/go/ast/filter.go.html#5140837">f</a></span><span class="op" id="5140988">.</span><span class="ident" id="5140989">Comments</span><span class="op" id="5140997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141001"><a href="/go/ast/filter.go.html#5140757">ndecls</a></span>&nbsp;<span class="op" id="5141008">+=</span>&nbsp;<span class="builtinfunc" id="5141011">len</span><span class="op" id="5141014">(</span><span class="ident" id="5141015"><a href="/go/ast/filter.go.html#5140837">f</a></span><span class="op" id="5141016">.</span><span class="ident" id="5141017">Decls</span><span class="op" id="5141022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5141025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141028"><a href="/go/ast/filter.go.html#5132375">sort</a></span><span class="op" id="5141032">.</span><span class="ident" id="5141033">Strings</span><span class="op" id="5141040">(</span><span class="ident" id="5141041"><a href="/go/ast/filter.go.html#5140770">filenames</a></span><span class="op" id="5141050">)</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5141054">//&nbsp;Collect&nbsp;package&nbsp;comments&nbsp;from&nbsp;all&nbsp;package&nbsp;files&nbsp;into&nbsp;a&nbsp;single</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5141120">//&nbsp;CommentGroup&nbsp;-&nbsp;the&nbsp;collected&nbsp;package&nbsp;documentation.&nbsp;In&nbsp;general</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5141187">//&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;file&nbsp;with&nbsp;a&nbsp;package&nbsp;comment;&nbsp;but&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5141254">//&nbsp;better&nbsp;to&nbsp;collect&nbsp;extra&nbsp;comments&nbsp;than&nbsp;drop&nbsp;them&nbsp;on&nbsp;the&nbsp;floor.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5141320">var</span>&nbsp;<span class="ident" id="5141324">doc</span>&nbsp;<span class="op" id="5141328">*</span><span class="ident" id="5141329"><a href="/go/ast/ast.go.html#5094179">CommentGroup</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5141343">var</span>&nbsp;<span class="ident" id="5141347">pos</span>&nbsp;<span class="ident" id="5141351"><a href="/go/ast/filter.go.html#5132363">token</a></span><span class="op" id="5141356">.</span><span class="ident" id="5141357">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5141362">if</span>&nbsp;<span class="ident" id="5141365"><a href="/go/ast/filter.go.html#5140729">ndocs</a></span>&nbsp;<span class="op" id="5141371">&gt;</span>&nbsp;<span class="num" id="5141373">0</span>&nbsp;<span class="op" id="5141375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141379">list</span>&nbsp;<span class="op" id="5141384">:=</span>&nbsp;<span class="builtinfunc" id="5141387">make</span><span class="op" id="5141391">(</span><span class="op" id="5141392">[</span><span class="op" id="5141393">]</span><span class="op" id="5141394">*</span><span class="ident" id="5141395"><a href="/go/ast/ast.go.html#5093781">Comment</a></span><span class="op" id="5141402">,</span>&nbsp;<span class="ident" id="5141404"><a href="/go/ast/filter.go.html#5140729">ndocs</a></span><span class="op" id="5141409">-</span><span class="num" id="5141410">1</span><span class="op" id="5141411">)</span>&nbsp;<span class="comment" id="5141413">//&nbsp;-1:&nbsp;no&nbsp;separator&nbsp;before&nbsp;first&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141454">i</span>&nbsp;<span class="op" id="5141456">:=</span>&nbsp;<span class="num" id="5141459">0</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5141463">for</span>&nbsp;<span class="ident" id="5141467">_</span><span class="op" id="5141468">,</span>&nbsp;<span class="ident" id="5141470">filename</span>&nbsp;<span class="op" id="5141479">:=</span>&nbsp;<span class="keyword" id="5141482">range</span>&nbsp;<span class="ident" id="5141488"><a href="/go/ast/filter.go.html#5140770">filenames</a></span>&nbsp;<span class="op" id="5141498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141503">f</span>&nbsp;<span class="op" id="5141505">:=</span>&nbsp;<span class="ident" id="5141508"><a href="/go/ast/filter.go.html#5140484">pkg</a></span><span class="op" id="5141511">.</span><span class="ident" id="5141512">Files</span><span class="op" id="5141517">[</span><span class="ident" id="5141518"><a href="/go/ast/filter.go.html#5141470">filename</a></span><span class="op" id="5141526">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5141531">if</span>&nbsp;<span class="ident" id="5141534"><a href="/go/ast/filter.go.html#5141503">f</a></span><span class="op" id="5141535">.</span><span class="ident" id="5141536">Doc</span>&nbsp;<span class="op" id="5141540">!=</span>&nbsp;<span class="ident" id="5141543">nil</span>&nbsp;<span class="op" id="5141547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5141553">if</span>&nbsp;<span class="ident" id="5141556"><a href="/go/ast/filter.go.html#5141454">i</a></span>&nbsp;<span class="op" id="5141558">&gt;</span>&nbsp;<span class="num" id="5141560">0</span>&nbsp;<span class="op" id="5141562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5141569">//&nbsp;not&nbsp;the&nbsp;first&nbsp;group&nbsp;-&nbsp;add&nbsp;separator</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141613"><a href="/go/ast/filter.go.html#5141379">list</a></span><span class="op" id="5141617">[</span><span class="ident" id="5141618"><a href="/go/ast/filter.go.html#5141454">i</a></span><span class="op" id="5141619">]</span>&nbsp;<span class="op" id="5141621">=</span>&nbsp;<span class="ident" id="5141623"><a href="/go/ast/filter.go.html#5140276">separator</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141638"><a href="/go/ast/filter.go.html#5141454">i</a></span><span class="op" id="5141639">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5141646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5141652">for</span>&nbsp;<span class="ident" id="5141656">_</span><span class="op" id="5141657">,</span>&nbsp;<span class="ident" id="5141659">c</span>&nbsp;<span class="op" id="5141661">:=</span>&nbsp;<span class="keyword" id="5141664">range</span>&nbsp;<span class="ident" id="5141670"><a href="/go/ast/filter.go.html#5141503">f</a></span><span class="op" id="5141671">.</span><span class="ident" id="5141672">Doc</span><span class="op" id="5141675">.</span><span class="ident" id="5141676">List</span>&nbsp;<span class="op" id="5141681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141688"><a href="/go/ast/filter.go.html#5141379">list</a></span><span class="op" id="5141692">[</span><span class="ident" id="5141693"><a href="/go/ast/filter.go.html#5141454">i</a></span><span class="op" id="5141694">]</span>&nbsp;<span class="op" id="5141696">=</span>&nbsp;<span class="ident" id="5141698"><a href="/go/ast/filter.go.html#5141659">c</a></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141705"><a href="/go/ast/filter.go.html#5141454">i</a></span><span class="op" id="5141706">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5141713">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5141719">if</span>&nbsp;<span class="ident" id="5141722"><a href="/go/ast/filter.go.html#5141503">f</a></span><span class="op" id="5141723">.</span><span class="ident" id="5141724">Package</span>&nbsp;<span class="op" id="5141732">&gt;</span>&nbsp;<span class="ident" id="5141734"><a href="/go/ast/filter.go.html#5141347">pos</a></span>&nbsp;<span class="op" id="5141738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5141745">//&nbsp;Keep&nbsp;the&nbsp;maximum&nbsp;package&nbsp;clause&nbsp;position&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5141797">//&nbsp;position&nbsp;for&nbsp;the&nbsp;package&nbsp;clause&nbsp;of&nbsp;the&nbsp;merged</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5141851">//&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141866"><a href="/go/ast/filter.go.html#5141347">pos</a></span>&nbsp;<span class="op" id="5141870">=</span>&nbsp;<span class="ident" id="5141872"><a href="/go/ast/filter.go.html#5141503">f</a></span><span class="op" id="5141873">.</span><span class="ident" id="5141874">Package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5141886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5141891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5141895">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5141899"><a href="/go/ast/filter.go.html#5141324">doc</a></span>&nbsp;<span class="op" id="5141903">=</span>&nbsp;<span class="op" id="5141905">&amp;</span><span class="ident" id="5141906"><a href="/go/ast/ast.go.html#5094179">CommentGroup</a></span><span class="op" id="5141918">{</span><span class="ident" id="5141919"><a href="/go/ast/filter.go.html#5141379">list</a></span><span class="op" id="5141923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5141926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5141930">//&nbsp;Collect&nbsp;declarations&nbsp;from&nbsp;all&nbsp;package&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5141979">var</span>&nbsp;<span class="ident" id="5141983">decls</span>&nbsp;<span class="op" id="5141989">[</span><span class="op" id="5141990">]</span><span class="ident" id="5141991"><a href="/go/ast/ast.go.html#5093577">Decl</a></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5141997">if</span>&nbsp;<span class="ident" id="5142000"><a href="/go/ast/filter.go.html#5140757">ndecls</a></span>&nbsp;<span class="op" id="5142007">&gt;</span>&nbsp;<span class="num" id="5142009">0</span>&nbsp;<span class="op" id="5142011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5142015"><a href="/go/ast/filter.go.html#5141983">decls</a></span>&nbsp;<span class="op" id="5142021">=</span>&nbsp;<span class="builtinfunc" id="5142023">make</span><span class="op" id="5142027">(</span><span class="op" id="5142028">[</span><span class="op" id="5142029">]</span><span class="ident" id="5142030"><a href="/go/ast/ast.go.html#5093577">Decl</a></span><span class="op" id="5142034">,</span>&nbsp;<span class="ident" id="5142036"><a href="/go/ast/filter.go.html#5140757">ndecls</a></span><span class="op" id="5142042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5142046">funcs</span>&nbsp;<span class="op" id="5142052">:=</span>&nbsp;<span class="builtinfunc" id="5142055">make</span><span class="op" id="5142059">(</span><span class="keyword" id="5142060">map</span><span class="op" id="5142063">[</span><span class="builtintype" id="5142064">string</span><span class="op" id="5142070">]</span><span class="builtintype" id="5142071">int</span><span class="op" id="5142074">)</span>&nbsp;<span class="comment" id="5142076">//&nbsp;map&nbsp;of&nbsp;func&nbsp;name&nbsp;-&gt;&nbsp;decls&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5142113">i</span>&nbsp;<span class="op" id="5142115">:=</span>&nbsp;<span class="num" id="5142118">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5142143">//&nbsp;current&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5142162">n</span>&nbsp;<span class="op" id="5142164">:=</span>&nbsp;<span class="num" id="5142167">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5142192">//&nbsp;number&nbsp;of&nbsp;filtered&nbsp;entries</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5142224">for</span>&nbsp;<span class="ident" id="5142228">_</span><span class="op" id="5142229">,</span>&nbsp;<span class="ident" id="5142231">filename</span>&nbsp;<span class="op" id="5142240">:=</span>&nbsp;<span class="keyword" id="5142243">range</span>&nbsp;<span class="ident" id="5142249"><a href="/go/ast/filter.go.html#5140770">filenames</a></span>&nbsp;<span class="op" id="5142259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5142264">f</span>&nbsp;<span class="op" id="5142266">:=</span>&nbsp;<span class="ident" id="5142269"><a href="/go/ast/filter.go.html#5140484">pkg</a></span><span class="op" id="5142272">.</span><span class="ident" id="5142273">Files</span><span class="op" id="5142278">[</span><span class="ident" id="5142279"><a href="/go/ast/filter.go.html#5142231">filename</a></span><span class="op" id="5142287">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5142292">for</span>&nbsp;<span class="ident" id="5142296">_</span><span class="op" id="5142297">,</span>&nbsp;<span class="ident" id="5142299">d</span>&nbsp;<span class="op" id="5142301">:=</span>&nbsp;<span class="keyword" id="5142304">range</span>&nbsp;<span class="ident" id="5142310"><a href="/go/ast/filter.go.html#5142264">f</a></span><span class="op" id="5142311">.</span><span class="ident" id="5142312">Decls</span>&nbsp;<span class="op" id="5142318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5142324">if</span>&nbsp;<span class="ident" id="5142327"><a href="/go/ast/filter.go.html#5140498">mode</a></span><span class="op" id="5142331">&amp;</span><span class="ident" id="5142332"><a href="/go/ast/filter.go.html#5139249">FilterFuncDuplicates</a></span>&nbsp;<span class="op" id="5142353">!=</span>&nbsp;<span class="num" id="5142356">0</span>&nbsp;<span class="op" id="5142358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142365">//&nbsp;A&nbsp;language&nbsp;entity&nbsp;may&nbsp;be&nbsp;declared&nbsp;multiple</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142416">//&nbsp;times&nbsp;in&nbsp;different&nbsp;package&nbsp;files;&nbsp;only&nbsp;at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142466">//&nbsp;build&nbsp;time&nbsp;declarations&nbsp;must&nbsp;be&nbsp;unique.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142514">//&nbsp;For&nbsp;now,&nbsp;exclude&nbsp;multiple&nbsp;declarations&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142564">//&nbsp;functions&nbsp;-&nbsp;keep&nbsp;the&nbsp;one&nbsp;with&nbsp;documentation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142617">//</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142625">//&nbsp;TODO(gri):&nbsp;Expand&nbsp;this&nbsp;filtering&nbsp;to&nbsp;other</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142675">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entities&nbsp;(const,&nbsp;type,&nbsp;vars)&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142726">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;multiple&nbsp;declarations&nbsp;are&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5142779">if</span>&nbsp;<span class="ident" id="5142782">f</span><span class="op" id="5142783">,</span>&nbsp;<span class="ident" id="5142785">isFun</span>&nbsp;<span class="op" id="5142791">:=</span>&nbsp;<span class="ident" id="5142794"><a href="/go/ast/filter.go.html#5142299">d</a></span><span class="op" id="5142795">.</span><span class="op" id="5142796">(</span><span class="op" id="5142797">*</span><span class="ident" id="5142798"><a href="/go/ast/ast.go.html#5120648">FuncDecl</a></span><span class="op" id="5142806">)</span><span class="op" id="5142807">;</span>&nbsp;<span class="ident" id="5142809"><a href="/go/ast/filter.go.html#5142785">isFun</a></span>&nbsp;<span class="op" id="5142815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5142823">name</span>&nbsp;<span class="op" id="5142828">:=</span>&nbsp;<span class="ident" id="5142831"><a href="/go/ast/filter.go.html#5139696">nameOf</a></span><span class="op" id="5142837">(</span><span class="ident" id="5142838"><a href="/go/ast/filter.go.html#5142782">f</a></span><span class="op" id="5142839">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5142847">if</span>&nbsp;<span class="ident" id="5142850">j</span><span class="op" id="5142851">,</span>&nbsp;<span class="ident" id="5142853">exists</span>&nbsp;<span class="op" id="5142860">:=</span>&nbsp;<span class="ident" id="5142863"><a href="/go/ast/filter.go.html#5142046">funcs</a></span><span class="op" id="5142868">[</span><span class="ident" id="5142869"><a href="/go/ast/filter.go.html#5142823">name</a></span><span class="op" id="5142873">]</span><span class="op" id="5142874">;</span>&nbsp;<span class="ident" id="5142876"><a href="/go/ast/filter.go.html#5142853">exists</a></span>&nbsp;<span class="op" id="5142883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142892">//&nbsp;function&nbsp;declared&nbsp;already</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5142928">if</span>&nbsp;<span class="ident" id="5142931"><a href="/go/ast/filter.go.html#5141983">decls</a></span><span class="op" id="5142936">[</span><span class="ident" id="5142937"><a href="/go/ast/filter.go.html#5142850">j</a></span><span class="op" id="5142938">]</span>&nbsp;<span class="op" id="5142940">!=</span>&nbsp;<span class="ident" id="5142943">nil</span>&nbsp;<span class="op" id="5142947">&amp;&amp;</span>&nbsp;<span class="ident" id="5142950"><a href="/go/ast/filter.go.html#5141983">decls</a></span><span class="op" id="5142955">[</span><span class="ident" id="5142956"><a href="/go/ast/filter.go.html#5142850">j</a></span><span class="op" id="5142957">]</span><span class="op" id="5142958">.</span><span class="op" id="5142959">(</span><span class="op" id="5142960">*</span><span class="ident" id="5142961"><a href="/go/ast/ast.go.html#5120648">FuncDecl</a></span><span class="op" id="5142969">)</span><span class="op" id="5142970">.</span><span class="ident" id="5142971">Doc</span>&nbsp;<span class="op" id="5142975">==</span>&nbsp;<span class="ident" id="5142978">nil</span>&nbsp;<span class="op" id="5142982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5142992">//&nbsp;existing&nbsp;declaration&nbsp;has&nbsp;no&nbsp;documentation;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5143046">//&nbsp;ignore&nbsp;the&nbsp;existing&nbsp;declaration</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143089"><a href="/go/ast/filter.go.html#5141983">decls</a></span><span class="op" id="5143094">[</span><span class="ident" id="5143095"><a href="/go/ast/filter.go.html#5142850">j</a></span><span class="op" id="5143096">]</span>&nbsp;<span class="op" id="5143098">=</span>&nbsp;<span class="ident" id="5143100">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143111">}</span>&nbsp;<span class="keyword" id="5143113">else</span>&nbsp;<span class="op" id="5143118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5143128">//&nbsp;ignore&nbsp;the&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143166"><a href="/go/ast/filter.go.html#5142299">d</a></span>&nbsp;<span class="op" id="5143168">=</span>&nbsp;<span class="ident" id="5143170">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143181">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143190"><a href="/go/ast/filter.go.html#5142162">n</a></span><span class="op" id="5143191">++</span>&nbsp;<span class="comment" id="5143194">//&nbsp;filtered&nbsp;an&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143221">}</span>&nbsp;<span class="keyword" id="5143223">else</span>&nbsp;<span class="op" id="5143228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143237"><a href="/go/ast/filter.go.html#5142046">funcs</a></span><span class="op" id="5143242">[</span><span class="ident" id="5143243"><a href="/go/ast/filter.go.html#5142823">name</a></span><span class="op" id="5143247">]</span>&nbsp;<span class="op" id="5143249">=</span>&nbsp;<span class="ident" id="5143251"><a href="/go/ast/filter.go.html#5142113">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143266">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143278"><a href="/go/ast/filter.go.html#5141983">decls</a></span><span class="op" id="5143283">[</span><span class="ident" id="5143284"><a href="/go/ast/filter.go.html#5142113">i</a></span><span class="op" id="5143285">]</span>&nbsp;<span class="op" id="5143287">=</span>&nbsp;<span class="ident" id="5143289"><a href="/go/ast/filter.go.html#5142299">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143295"><a href="/go/ast/filter.go.html#5142113">i</a></span><span class="op" id="5143296">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143306">}</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5143311">//&nbsp;Eliminate&nbsp;nil&nbsp;entries&nbsp;from&nbsp;the&nbsp;decls&nbsp;list&nbsp;if&nbsp;entries&nbsp;were</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5143374">//&nbsp;filtered.&nbsp;We&nbsp;do&nbsp;this&nbsp;using&nbsp;a&nbsp;2nd&nbsp;pass&nbsp;in&nbsp;order&nbsp;to&nbsp;not&nbsp;disturb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5143441">//&nbsp;the&nbsp;original&nbsp;declaration&nbsp;order&nbsp;in&nbsp;the&nbsp;source&nbsp;(otherwise,&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5143508">//&nbsp;would&nbsp;also&nbsp;invalidate&nbsp;the&nbsp;monotonically&nbsp;increasing&nbsp;position</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5143573">//&nbsp;info&nbsp;within&nbsp;a&nbsp;single&nbsp;file).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5143606">if</span>&nbsp;<span class="ident" id="5143609"><a href="/go/ast/filter.go.html#5142162">n</a></span>&nbsp;<span class="op" id="5143611">&gt;</span>&nbsp;<span class="num" id="5143613">0</span>&nbsp;<span class="op" id="5143615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143620"><a href="/go/ast/filter.go.html#5142113">i</a></span>&nbsp;<span class="op" id="5143622">=</span>&nbsp;<span class="num" id="5143624">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5143629">for</span>&nbsp;<span class="ident" id="5143633">_</span><span class="op" id="5143634">,</span>&nbsp;<span class="ident" id="5143636">d</span>&nbsp;<span class="op" id="5143638">:=</span>&nbsp;<span class="keyword" id="5143641">range</span>&nbsp;<span class="ident" id="5143647"><a href="/go/ast/filter.go.html#5141983">decls</a></span>&nbsp;<span class="op" id="5143653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5143659">if</span>&nbsp;<span class="ident" id="5143662"><a href="/go/ast/filter.go.html#5143636">d</a></span>&nbsp;<span class="op" id="5143664">!=</span>&nbsp;<span class="ident" id="5143667">nil</span>&nbsp;<span class="op" id="5143671">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143678"><a href="/go/ast/filter.go.html#5141983">decls</a></span><span class="op" id="5143683">[</span><span class="ident" id="5143684"><a href="/go/ast/filter.go.html#5142113">i</a></span><span class="op" id="5143685">]</span>&nbsp;<span class="op" id="5143687">=</span>&nbsp;<span class="ident" id="5143689"><a href="/go/ast/filter.go.html#5143636">d</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143696"><a href="/go/ast/filter.go.html#5142113">i</a></span><span class="op" id="5143697">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143714"><a href="/go/ast/filter.go.html#5141983">decls</a></span>&nbsp;<span class="op" id="5143720">=</span>&nbsp;<span class="ident" id="5143722"><a href="/go/ast/filter.go.html#5141983">decls</a></span><span class="op" id="5143727">[</span><span class="num" id="5143728">0</span><span class="op" id="5143729">:</span><span class="ident" id="5143730"><a href="/go/ast/filter.go.html#5142113">i</a></span><span class="op" id="5143731">]</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5143738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5143742">//&nbsp;Collect&nbsp;import&nbsp;specs&nbsp;from&nbsp;all&nbsp;package&nbsp;files.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5143791">var</span>&nbsp;<span class="ident" id="5143795">imports</span>&nbsp;<span class="op" id="5143803">[</span><span class="op" id="5143804">]</span><span class="op" id="5143805">*</span><span class="ident" id="5143806"><a href="/go/ast/ast.go.html#5117754">ImportSpec</a></span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5143818">if</span>&nbsp;<span class="ident" id="5143821"><a href="/go/ast/filter.go.html#5140498">mode</a></span><span class="op" id="5143825">&amp;</span><span class="ident" id="5143826"><a href="/go/ast/filter.go.html#5139485">FilterImportDuplicates</a></span>&nbsp;<span class="op" id="5143849">!=</span>&nbsp;<span class="num" id="5143852">0</span>&nbsp;<span class="op" id="5143854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143858">seen</span>&nbsp;<span class="op" id="5143863">:=</span>&nbsp;<span class="builtinfunc" id="5143866">make</span><span class="op" id="5143870">(</span><span class="keyword" id="5143871">map</span><span class="op" id="5143874">[</span><span class="builtintype" id="5143875">string</span><span class="op" id="5143881">]</span><span class="builtintype" id="5143882">bool</span><span class="op" id="5143886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5143890">for</span>&nbsp;<span class="ident" id="5143894">_</span><span class="op" id="5143895">,</span>&nbsp;<span class="ident" id="5143897">filename</span>&nbsp;<span class="op" id="5143906">:=</span>&nbsp;<span class="keyword" id="5143909">range</span>&nbsp;<span class="ident" id="5143915"><a href="/go/ast/filter.go.html#5140770">filenames</a></span>&nbsp;<span class="op" id="5143925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5143930">f</span>&nbsp;<span class="op" id="5143932">:=</span>&nbsp;<span class="ident" id="5143935"><a href="/go/ast/filter.go.html#5140484">pkg</a></span><span class="op" id="5143938">.</span><span class="ident" id="5143939">Files</span><span class="op" id="5143944">[</span><span class="ident" id="5143945"><a href="/go/ast/filter.go.html#5143897">filename</a></span><span class="op" id="5143953">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5143958">for</span>&nbsp;<span class="ident" id="5143962">_</span><span class="op" id="5143963">,</span>&nbsp;<span class="ident" id="5143965">imp</span>&nbsp;<span class="op" id="5143969">:=</span>&nbsp;<span class="keyword" id="5143972">range</span>&nbsp;<span class="ident" id="5143978"><a href="/go/ast/filter.go.html#5143930">f</a></span><span class="op" id="5143979">.</span><span class="ident" id="5143980">Imports</span>&nbsp;<span class="op" id="5143988">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5143994">if</span>&nbsp;<span class="ident" id="5143997">path</span>&nbsp;<span class="op" id="5144002">:=</span>&nbsp;<span class="ident" id="5144005"><a href="/go/ast/filter.go.html#5143965">imp</a></span><span class="op" id="5144008">.</span><span class="ident" id="5144009">Path</span><span class="op" id="5144013">.</span><span class="ident" id="5144014">Value</span><span class="op" id="5144019">;</span>&nbsp;<span class="op" id="5144021">!</span><span class="ident" id="5144022"><a href="/go/ast/filter.go.html#5143858">seen</a></span><span class="op" id="5144026">[</span><span class="ident" id="5144027"><a href="/go/ast/filter.go.html#5143997">path</a></span><span class="op" id="5144031">]</span>&nbsp;<span class="op" id="5144033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5144040">//&nbsp;TODO:&nbsp;consider&nbsp;handling&nbsp;cases&nbsp;where:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5144085">//&nbsp;-&nbsp;2&nbsp;imports&nbsp;exist&nbsp;with&nbsp;the&nbsp;same&nbsp;import&nbsp;path&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5144141">//&nbsp;&nbsp;&nbsp;have&nbsp;different&nbsp;local&nbsp;names&nbsp;(one&nbsp;should&nbsp;probably</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5144199">//&nbsp;&nbsp;&nbsp;keep&nbsp;both&nbsp;of&nbsp;them)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5144228">//&nbsp;-&nbsp;2&nbsp;imports&nbsp;exist&nbsp;but&nbsp;only&nbsp;one&nbsp;has&nbsp;a&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5144281">//&nbsp;-&nbsp;2&nbsp;imports&nbsp;exist&nbsp;and&nbsp;they&nbsp;both&nbsp;have&nbsp;(possibly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5144336">//&nbsp;&nbsp;&nbsp;different)&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5144366"><a href="/go/ast/filter.go.html#5143795">imports</a></span>&nbsp;<span class="op" id="5144374">=</span>&nbsp;<span class="builtinfunc" id="5144376">append</span><span class="op" id="5144382">(</span><span class="ident" id="5144383"><a href="/go/ast/filter.go.html#5143795">imports</a></span><span class="op" id="5144390">,</span>&nbsp;<span class="ident" id="5144392"><a href="/go/ast/filter.go.html#5143965">imp</a></span><span class="op" id="5144395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5144402"><a href="/go/ast/filter.go.html#5143858">seen</a></span><span class="op" id="5144406">[</span><span class="ident" id="5144407"><a href="/go/ast/filter.go.html#5143997">path</a></span><span class="op" id="5144411">]</span>&nbsp;<span class="op" id="5144413">=</span>&nbsp;<span class="builtintype" id="5144415">true</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5144424">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5144429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5144433">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5144436">}</span>&nbsp;<span class="keyword" id="5144438">else</span>&nbsp;<span class="op" id="5144443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5144447">for</span>&nbsp;<span class="ident" id="5144451">_</span><span class="op" id="5144452">,</span>&nbsp;<span class="ident" id="5144454">f</span>&nbsp;<span class="op" id="5144456">:=</span>&nbsp;<span class="keyword" id="5144459">range</span>&nbsp;<span class="ident" id="5144465"><a href="/go/ast/filter.go.html#5140484">pkg</a></span><span class="op" id="5144468">.</span><span class="ident" id="5144469">Files</span>&nbsp;<span class="op" id="5144475">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5144480"><a href="/go/ast/filter.go.html#5143795">imports</a></span>&nbsp;<span class="op" id="5144488">=</span>&nbsp;<span class="builtinfunc" id="5144490">append</span><span class="op" id="5144496">(</span><span class="ident" id="5144497"><a href="/go/ast/filter.go.html#5143795">imports</a></span><span class="op" id="5144504">,</span>&nbsp;<span class="ident" id="5144506"><a href="/go/ast/filter.go.html#5144454">f</a></span><span class="op" id="5144507">.</span><span class="ident" id="5144508">Imports</span><span class="op" id="5144515">...</span><span class="op" id="5144518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5144522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5144525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5144529">//&nbsp;Collect&nbsp;comments&nbsp;from&nbsp;all&nbsp;package&nbsp;files.</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5144574">var</span>&nbsp;<span class="ident" id="5144578">comments</span>&nbsp;<span class="op" id="5144587">[</span><span class="op" id="5144588">]</span><span class="op" id="5144589">*</span><span class="ident" id="5144590"><a href="/go/ast/ast.go.html#5094179">CommentGroup</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5144604">if</span>&nbsp;<span class="ident" id="5144607"><a href="/go/ast/filter.go.html#5140498">mode</a></span><span class="op" id="5144611">&amp;</span><span class="ident" id="5144612"><a href="/go/ast/filter.go.html#5139401">FilterUnassociatedComments</a></span>&nbsp;<span class="op" id="5144639">==</span>&nbsp;<span class="num" id="5144642">0</span>&nbsp;<span class="op" id="5144644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5144648"><a href="/go/ast/filter.go.html#5144578">comments</a></span>&nbsp;<span class="op" id="5144657">=</span>&nbsp;<span class="builtinfunc" id="5144659">make</span><span class="op" id="5144663">(</span><span class="op" id="5144664">[</span><span class="op" id="5144665">]</span><span class="op" id="5144666">*</span><span class="ident" id="5144667"><a href="/go/ast/ast.go.html#5094179">CommentGroup</a></span><span class="op" id="5144679">,</span>&nbsp;<span class="ident" id="5144681"><a href="/go/ast/filter.go.html#5140741">ncomments</a></span><span class="op" id="5144690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5144694">i</span>&nbsp;<span class="op" id="5144696">:=</span>&nbsp;<span class="num" id="5144699">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5144703">for</span>&nbsp;<span class="ident" id="5144707">_</span><span class="op" id="5144708">,</span>&nbsp;<span class="ident" id="5144710">f</span>&nbsp;<span class="op" id="5144712">:=</span>&nbsp;<span class="keyword" id="5144715">range</span>&nbsp;<span class="ident" id="5144721"><a href="/go/ast/filter.go.html#5140484">pkg</a></span><span class="op" id="5144724">.</span><span class="ident" id="5144725">Files</span>&nbsp;<span class="op" id="5144731">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5144736"><a href="/go/ast/filter.go.html#5144694">i</a></span>&nbsp;<span class="op" id="5144738">+=</span>&nbsp;<span class="builtinfunc" id="5144741">copy</span><span class="op" id="5144745">(</span><span class="ident" id="5144746"><a href="/go/ast/filter.go.html#5144578">comments</a></span><span class="op" id="5144754">[</span><span class="ident" id="5144755"><a href="/go/ast/filter.go.html#5144694">i</a></span><span class="op" id="5144756">:</span><span class="op" id="5144757">]</span><span class="op" id="5144758">,</span>&nbsp;<span class="ident" id="5144760"><a href="/go/ast/filter.go.html#5144710">f</a></span><span class="op" id="5144761">.</span><span class="ident" id="5144762">Comments</span><span class="op" id="5144770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5144774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5144777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5144781">//&nbsp;TODO(gri)&nbsp;need&nbsp;to&nbsp;compute&nbsp;unresolved&nbsp;identifiers!</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5144835">return</span>&nbsp;<span class="op" id="5144842">&amp;</span><span class="ident" id="5144843"><a href="/go/ast/ast.go.html#5122014">File</a></span><span class="op" id="5144847">{</span><span class="ident" id="5144848"><a href="/go/ast/filter.go.html#5141324">doc</a></span><span class="op" id="5144851">,</span>&nbsp;<span class="ident" id="5144853"><a href="/go/ast/filter.go.html#5141347">pos</a></span><span class="op" id="5144856">,</span>&nbsp;<span class="ident" id="5144858"><a href="/go/ast/ast.go.html#5108096">NewIdent</a></span><span class="op" id="5144866">(</span><span class="ident" id="5144867"><a href="/go/ast/filter.go.html#5140484">pkg</a></span><span class="op" id="5144870">.</span><span class="ident" id="5144871">Name</span><span class="op" id="5144875">)</span><span class="op" id="5144876">,</span>&nbsp;<span class="ident" id="5144878"><a href="/go/ast/filter.go.html#5141983">decls</a></span><span class="op" id="5144883">,</span>&nbsp;<span class="ident" id="5144885"><a href="/go/ast/filter.go.html#5140484">pkg</a></span><span class="op" id="5144888">.</span><span class="ident" id="5144889">Scope</span><span class="op" id="5144894">,</span>&nbsp;<span class="ident" id="5144896"><a href="/go/ast/filter.go.html#5143795">imports</a></span><span class="op" id="5144903">,</span>&nbsp;<span class="ident" id="5144905">nil</span><span class="op" id="5144908">,</span>&nbsp;<span class="ident" id="5144910"><a href="/go/ast/filter.go.html#5144578">comments</a></span><span class="op" id="5144918">}</span><br>
<span class="lineno"></span><span class="op" id="5144920">}</span>
</div>
</body>
</html>
