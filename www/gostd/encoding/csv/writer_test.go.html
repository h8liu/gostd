<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6769456">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6769511">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6769565">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6769616">package</span>&nbsp;<span class="ident" id="6769624">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6769629">import</span>&nbsp;<span class="op" id="6769636">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6769639">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6769648">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6769658">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6769668">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6769671">var</span>&nbsp;<span class="ident" id="6769675">writeTests</span>&nbsp;<span class="op" id="6769686">=</span>&nbsp;<span class="op" id="6769688">[</span><span class="op" id="6769689">]</span><span class="keyword" id="6769690">struct</span>&nbsp;<span class="op" id="6769697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769700">Input</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6769708">[</span><span class="op" id="6769709">]</span><span class="op" id="6769710">[</span><span class="op" id="6769711">]</span><span class="builtintype" id="6769712">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769720">Output</span>&nbsp;&nbsp;<span class="builtintype" id="6769728">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6769736">UseCRLF</span>&nbsp;<span class="builtintype" id="6769744">bool</span><br>
<span class="lineno"></span><span class="op" id="6769749">}</span><span class="op" id="6769750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769753">{</span><span class="ident" id="6769754">Input</span><span class="op" id="6769759">:</span>&nbsp;<span class="op" id="6769761">[</span><span class="op" id="6769762">]</span><span class="op" id="6769763">[</span><span class="op" id="6769764">]</span><span class="builtintype" id="6769765">string</span><span class="op" id="6769771">{</span><span class="op" id="6769772">{</span><span class="string" id="6769773">&#34;abc&#34;</span><span class="op" id="6769778">}</span><span class="op" id="6769779">}</span><span class="op" id="6769780">,</span>&nbsp;<span class="ident" id="6769782">Output</span><span class="op" id="6769788">:</span>&nbsp;<span class="string" id="6769790">&#34;abc\n&#34;</span><span class="op" id="6769797">}</span><span class="op" id="6769798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769801">{</span><span class="ident" id="6769802">Input</span><span class="op" id="6769807">:</span>&nbsp;<span class="op" id="6769809">[</span><span class="op" id="6769810">]</span><span class="op" id="6769811">[</span><span class="op" id="6769812">]</span><span class="builtintype" id="6769813">string</span><span class="op" id="6769819">{</span><span class="op" id="6769820">{</span><span class="string" id="6769821">&#34;abc&#34;</span><span class="op" id="6769826">}</span><span class="op" id="6769827">}</span><span class="op" id="6769828">,</span>&nbsp;<span class="ident" id="6769830">Output</span><span class="op" id="6769836">:</span>&nbsp;<span class="string" id="6769838">&#34;abc\r\n&#34;</span><span class="op" id="6769847">,</span>&nbsp;<span class="ident" id="6769849">UseCRLF</span><span class="op" id="6769856">:</span>&nbsp;<span class="builtintype" id="6769858">true</span><span class="op" id="6769862">}</span><span class="op" id="6769863">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769866">{</span><span class="ident" id="6769867">Input</span><span class="op" id="6769872">:</span>&nbsp;<span class="op" id="6769874">[</span><span class="op" id="6769875">]</span><span class="op" id="6769876">[</span><span class="op" id="6769877">]</span><span class="builtintype" id="6769878">string</span><span class="op" id="6769884">{</span><span class="op" id="6769885">{</span><span class="string" id="6769886">`&#34;abc&#34;`</span><span class="op" id="6769893">}</span><span class="op" id="6769894">}</span><span class="op" id="6769895">,</span>&nbsp;<span class="ident" id="6769897">Output</span><span class="op" id="6769903">:</span>&nbsp;<span class="string" id="6769905">`&#34;&#34;&#34;abc&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="6769917">+</span>&nbsp;<span class="string" id="6769919">&#34;\n&#34;</span><span class="op" id="6769923">}</span><span class="op" id="6769924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769927">{</span><span class="ident" id="6769928">Input</span><span class="op" id="6769933">:</span>&nbsp;<span class="op" id="6769935">[</span><span class="op" id="6769936">]</span><span class="op" id="6769937">[</span><span class="op" id="6769938">]</span><span class="builtintype" id="6769939">string</span><span class="op" id="6769945">{</span><span class="op" id="6769946">{</span><span class="string" id="6769947">`a&#34;b`</span><span class="op" id="6769952">}</span><span class="op" id="6769953">}</span><span class="op" id="6769954">,</span>&nbsp;<span class="ident" id="6769956">Output</span><span class="op" id="6769962">:</span>&nbsp;<span class="string" id="6769964">`&#34;a&#34;&#34;b&#34;`</span>&nbsp;<span class="op" id="6769973">+</span>&nbsp;<span class="string" id="6769975">&#34;\n&#34;</span><span class="op" id="6769979">}</span><span class="op" id="6769980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6769983">{</span><span class="ident" id="6769984">Input</span><span class="op" id="6769989">:</span>&nbsp;<span class="op" id="6769991">[</span><span class="op" id="6769992">]</span><span class="op" id="6769993">[</span><span class="op" id="6769994">]</span><span class="builtintype" id="6769995">string</span><span class="op" id="6770001">{</span><span class="op" id="6770002">{</span><span class="string" id="6770003">`&#34;a&#34;b&#34;`</span><span class="op" id="6770010">}</span><span class="op" id="6770011">}</span><span class="op" id="6770012">,</span>&nbsp;<span class="ident" id="6770014">Output</span><span class="op" id="6770020">:</span>&nbsp;<span class="string" id="6770022">`&#34;&#34;&#34;a&#34;&#34;b&#34;&#34;&#34;`</span>&nbsp;<span class="op" id="6770035">+</span>&nbsp;<span class="string" id="6770037">&#34;\n&#34;</span><span class="op" id="6770041">}</span><span class="op" id="6770042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770045">{</span><span class="ident" id="6770046">Input</span><span class="op" id="6770051">:</span>&nbsp;<span class="op" id="6770053">[</span><span class="op" id="6770054">]</span><span class="op" id="6770055">[</span><span class="op" id="6770056">]</span><span class="builtintype" id="6770057">string</span><span class="op" id="6770063">{</span><span class="op" id="6770064">{</span><span class="string" id="6770065">&#34;&nbsp;abc&#34;</span><span class="op" id="6770071">}</span><span class="op" id="6770072">}</span><span class="op" id="6770073">,</span>&nbsp;<span class="ident" id="6770075">Output</span><span class="op" id="6770081">:</span>&nbsp;<span class="string" id="6770083">`&#34;&nbsp;abc&#34;`</span>&nbsp;<span class="op" id="6770092">+</span>&nbsp;<span class="string" id="6770094">&#34;\n&#34;</span><span class="op" id="6770098">}</span><span class="op" id="6770099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770102">{</span><span class="ident" id="6770103">Input</span><span class="op" id="6770108">:</span>&nbsp;<span class="op" id="6770110">[</span><span class="op" id="6770111">]</span><span class="op" id="6770112">[</span><span class="op" id="6770113">]</span><span class="builtintype" id="6770114">string</span><span class="op" id="6770120">{</span><span class="op" id="6770121">{</span><span class="string" id="6770122">&#34;abc,def&#34;</span><span class="op" id="6770131">}</span><span class="op" id="6770132">}</span><span class="op" id="6770133">,</span>&nbsp;<span class="ident" id="6770135">Output</span><span class="op" id="6770141">:</span>&nbsp;<span class="string" id="6770143">`&#34;abc,def&#34;`</span>&nbsp;<span class="op" id="6770155">+</span>&nbsp;<span class="string" id="6770157">&#34;\n&#34;</span><span class="op" id="6770161">}</span><span class="op" id="6770162">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770165">{</span><span class="ident" id="6770166">Input</span><span class="op" id="6770171">:</span>&nbsp;<span class="op" id="6770173">[</span><span class="op" id="6770174">]</span><span class="op" id="6770175">[</span><span class="op" id="6770176">]</span><span class="builtintype" id="6770177">string</span><span class="op" id="6770183">{</span><span class="op" id="6770184">{</span><span class="string" id="6770185">&#34;abc&#34;</span><span class="op" id="6770190">,</span>&nbsp;<span class="string" id="6770192">&#34;def&#34;</span><span class="op" id="6770197">}</span><span class="op" id="6770198">}</span><span class="op" id="6770199">,</span>&nbsp;<span class="ident" id="6770201">Output</span><span class="op" id="6770207">:</span>&nbsp;<span class="string" id="6770209">&#34;abc,def\n&#34;</span><span class="op" id="6770220">}</span><span class="op" id="6770221">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770224">{</span><span class="ident" id="6770225">Input</span><span class="op" id="6770230">:</span>&nbsp;<span class="op" id="6770232">[</span><span class="op" id="6770233">]</span><span class="op" id="6770234">[</span><span class="op" id="6770235">]</span><span class="builtintype" id="6770236">string</span><span class="op" id="6770242">{</span><span class="op" id="6770243">{</span><span class="string" id="6770244">&#34;abc&#34;</span><span class="op" id="6770249">}</span><span class="op" id="6770250">,</span>&nbsp;<span class="op" id="6770252">{</span><span class="string" id="6770253">&#34;def&#34;</span><span class="op" id="6770258">}</span><span class="op" id="6770259">}</span><span class="op" id="6770260">,</span>&nbsp;<span class="ident" id="6770262">Output</span><span class="op" id="6770268">:</span>&nbsp;<span class="string" id="6770270">&#34;abc\ndef\n&#34;</span><span class="op" id="6770282">}</span><span class="op" id="6770283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770286">{</span><span class="ident" id="6770287">Input</span><span class="op" id="6770292">:</span>&nbsp;<span class="op" id="6770294">[</span><span class="op" id="6770295">]</span><span class="op" id="6770296">[</span><span class="op" id="6770297">]</span><span class="builtintype" id="6770298">string</span><span class="op" id="6770304">{</span><span class="op" id="6770305">{</span><span class="string" id="6770306">&#34;abc\ndef&#34;</span><span class="op" id="6770316">}</span><span class="op" id="6770317">}</span><span class="op" id="6770318">,</span>&nbsp;<span class="ident" id="6770320">Output</span><span class="op" id="6770326">:</span>&nbsp;<span class="string" id="6770328">&#34;\&#34;abc\ndef\&#34;\n&#34;</span><span class="op" id="6770344">}</span><span class="op" id="6770345">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770348">{</span><span class="ident" id="6770349">Input</span><span class="op" id="6770354">:</span>&nbsp;<span class="op" id="6770356">[</span><span class="op" id="6770357">]</span><span class="op" id="6770358">[</span><span class="op" id="6770359">]</span><span class="builtintype" id="6770360">string</span><span class="op" id="6770366">{</span><span class="op" id="6770367">{</span><span class="string" id="6770368">&#34;abc\ndef&#34;</span><span class="op" id="6770378">}</span><span class="op" id="6770379">}</span><span class="op" id="6770380">,</span>&nbsp;<span class="ident" id="6770382">Output</span><span class="op" id="6770388">:</span>&nbsp;<span class="string" id="6770390">&#34;\&#34;abc\r\ndef\&#34;\r\n&#34;</span><span class="op" id="6770410">,</span>&nbsp;<span class="ident" id="6770412">UseCRLF</span><span class="op" id="6770419">:</span>&nbsp;<span class="builtintype" id="6770421">true</span><span class="op" id="6770425">}</span><span class="op" id="6770426">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770429">{</span><span class="ident" id="6770430">Input</span><span class="op" id="6770435">:</span>&nbsp;<span class="op" id="6770437">[</span><span class="op" id="6770438">]</span><span class="op" id="6770439">[</span><span class="op" id="6770440">]</span><span class="builtintype" id="6770441">string</span><span class="op" id="6770447">{</span><span class="op" id="6770448">{</span><span class="string" id="6770449">&#34;abc\rdef&#34;</span><span class="op" id="6770459">}</span><span class="op" id="6770460">}</span><span class="op" id="6770461">,</span>&nbsp;<span class="ident" id="6770463">Output</span><span class="op" id="6770469">:</span>&nbsp;<span class="string" id="6770471">&#34;\&#34;abcdef\&#34;\r\n&#34;</span><span class="op" id="6770487">,</span>&nbsp;<span class="ident" id="6770489">UseCRLF</span><span class="op" id="6770496">:</span>&nbsp;<span class="builtintype" id="6770498">true</span><span class="op" id="6770502">}</span><span class="op" id="6770503">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770506">{</span><span class="ident" id="6770507">Input</span><span class="op" id="6770512">:</span>&nbsp;<span class="op" id="6770514">[</span><span class="op" id="6770515">]</span><span class="op" id="6770516">[</span><span class="op" id="6770517">]</span><span class="builtintype" id="6770518">string</span><span class="op" id="6770524">{</span><span class="op" id="6770525">{</span><span class="string" id="6770526">&#34;abc\rdef&#34;</span><span class="op" id="6770536">}</span><span class="op" id="6770537">}</span><span class="op" id="6770538">,</span>&nbsp;<span class="ident" id="6770540">Output</span><span class="op" id="6770546">:</span>&nbsp;<span class="string" id="6770548">&#34;\&#34;abc\rdef\&#34;\n&#34;</span><span class="op" id="6770564">,</span>&nbsp;<span class="ident" id="6770566">UseCRLF</span><span class="op" id="6770573">:</span>&nbsp;<span class="builtintype" id="6770575">false</span><span class="op" id="6770580">}</span><span class="op" id="6770581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770584">{</span><span class="ident" id="6770585">Input</span><span class="op" id="6770590">:</span>&nbsp;<span class="op" id="6770592">[</span><span class="op" id="6770593">]</span><span class="op" id="6770594">[</span><span class="op" id="6770595">]</span><span class="builtintype" id="6770596">string</span><span class="op" id="6770602">{</span><span class="op" id="6770603">{</span><span class="string" id="6770604">&#34;&#34;</span><span class="op" id="6770606">}</span><span class="op" id="6770607">}</span><span class="op" id="6770608">,</span>&nbsp;<span class="ident" id="6770610">Output</span><span class="op" id="6770616">:</span>&nbsp;<span class="string" id="6770618">&#34;\n&#34;</span><span class="op" id="6770622">}</span><span class="op" id="6770623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770626">{</span><span class="ident" id="6770627">Input</span><span class="op" id="6770632">:</span>&nbsp;<span class="op" id="6770634">[</span><span class="op" id="6770635">]</span><span class="op" id="6770636">[</span><span class="op" id="6770637">]</span><span class="builtintype" id="6770638">string</span><span class="op" id="6770644">{</span><span class="op" id="6770645">{</span><span class="string" id="6770646">&#34;&#34;</span><span class="op" id="6770648">,</span>&nbsp;<span class="string" id="6770650">&#34;&#34;</span><span class="op" id="6770652">}</span><span class="op" id="6770653">}</span><span class="op" id="6770654">,</span>&nbsp;<span class="ident" id="6770656">Output</span><span class="op" id="6770662">:</span>&nbsp;<span class="string" id="6770664">&#34;,\n&#34;</span><span class="op" id="6770669">}</span><span class="op" id="6770670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770673">{</span><span class="ident" id="6770674">Input</span><span class="op" id="6770679">:</span>&nbsp;<span class="op" id="6770681">[</span><span class="op" id="6770682">]</span><span class="op" id="6770683">[</span><span class="op" id="6770684">]</span><span class="builtintype" id="6770685">string</span><span class="op" id="6770691">{</span><span class="op" id="6770692">{</span><span class="string" id="6770693">&#34;&#34;</span><span class="op" id="6770695">,</span>&nbsp;<span class="string" id="6770697">&#34;&#34;</span><span class="op" id="6770699">,</span>&nbsp;<span class="string" id="6770701">&#34;&#34;</span><span class="op" id="6770703">}</span><span class="op" id="6770704">}</span><span class="op" id="6770705">,</span>&nbsp;<span class="ident" id="6770707">Output</span><span class="op" id="6770713">:</span>&nbsp;<span class="string" id="6770715">&#34;,,\n&#34;</span><span class="op" id="6770721">}</span><span class="op" id="6770722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770725">{</span><span class="ident" id="6770726">Input</span><span class="op" id="6770731">:</span>&nbsp;<span class="op" id="6770733">[</span><span class="op" id="6770734">]</span><span class="op" id="6770735">[</span><span class="op" id="6770736">]</span><span class="builtintype" id="6770737">string</span><span class="op" id="6770743">{</span><span class="op" id="6770744">{</span><span class="string" id="6770745">&#34;&#34;</span><span class="op" id="6770747">,</span>&nbsp;<span class="string" id="6770749">&#34;&#34;</span><span class="op" id="6770751">,</span>&nbsp;<span class="string" id="6770753">&#34;a&#34;</span><span class="op" id="6770756">}</span><span class="op" id="6770757">}</span><span class="op" id="6770758">,</span>&nbsp;<span class="ident" id="6770760">Output</span><span class="op" id="6770766">:</span>&nbsp;<span class="string" id="6770768">&#34;,,a\n&#34;</span><span class="op" id="6770775">}</span><span class="op" id="6770776">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770779">{</span><span class="ident" id="6770780">Input</span><span class="op" id="6770785">:</span>&nbsp;<span class="op" id="6770787">[</span><span class="op" id="6770788">]</span><span class="op" id="6770789">[</span><span class="op" id="6770790">]</span><span class="builtintype" id="6770791">string</span><span class="op" id="6770797">{</span><span class="op" id="6770798">{</span><span class="string" id="6770799">&#34;&#34;</span><span class="op" id="6770801">,</span>&nbsp;<span class="string" id="6770803">&#34;a&#34;</span><span class="op" id="6770806">,</span>&nbsp;<span class="string" id="6770808">&#34;&#34;</span><span class="op" id="6770810">}</span><span class="op" id="6770811">}</span><span class="op" id="6770812">,</span>&nbsp;<span class="ident" id="6770814">Output</span><span class="op" id="6770820">:</span>&nbsp;<span class="string" id="6770822">&#34;,a,\n&#34;</span><span class="op" id="6770829">}</span><span class="op" id="6770830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770833">{</span><span class="ident" id="6770834">Input</span><span class="op" id="6770839">:</span>&nbsp;<span class="op" id="6770841">[</span><span class="op" id="6770842">]</span><span class="op" id="6770843">[</span><span class="op" id="6770844">]</span><span class="builtintype" id="6770845">string</span><span class="op" id="6770851">{</span><span class="op" id="6770852">{</span><span class="string" id="6770853">&#34;&#34;</span><span class="op" id="6770855">,</span>&nbsp;<span class="string" id="6770857">&#34;a&#34;</span><span class="op" id="6770860">,</span>&nbsp;<span class="string" id="6770862">&#34;a&#34;</span><span class="op" id="6770865">}</span><span class="op" id="6770866">}</span><span class="op" id="6770867">,</span>&nbsp;<span class="ident" id="6770869">Output</span><span class="op" id="6770875">:</span>&nbsp;<span class="string" id="6770877">&#34;,a,a\n&#34;</span><span class="op" id="6770885">}</span><span class="op" id="6770886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770889">{</span><span class="ident" id="6770890">Input</span><span class="op" id="6770895">:</span>&nbsp;<span class="op" id="6770897">[</span><span class="op" id="6770898">]</span><span class="op" id="6770899">[</span><span class="op" id="6770900">]</span><span class="builtintype" id="6770901">string</span><span class="op" id="6770907">{</span><span class="op" id="6770908">{</span><span class="string" id="6770909">&#34;a&#34;</span><span class="op" id="6770912">,</span>&nbsp;<span class="string" id="6770914">&#34;&#34;</span><span class="op" id="6770916">,</span>&nbsp;<span class="string" id="6770918">&#34;&#34;</span><span class="op" id="6770920">}</span><span class="op" id="6770921">}</span><span class="op" id="6770922">,</span>&nbsp;<span class="ident" id="6770924">Output</span><span class="op" id="6770930">:</span>&nbsp;<span class="string" id="6770932">&#34;a,,\n&#34;</span><span class="op" id="6770939">}</span><span class="op" id="6770940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770943">{</span><span class="ident" id="6770944">Input</span><span class="op" id="6770949">:</span>&nbsp;<span class="op" id="6770951">[</span><span class="op" id="6770952">]</span><span class="op" id="6770953">[</span><span class="op" id="6770954">]</span><span class="builtintype" id="6770955">string</span><span class="op" id="6770961">{</span><span class="op" id="6770962">{</span><span class="string" id="6770963">&#34;a&#34;</span><span class="op" id="6770966">,</span>&nbsp;<span class="string" id="6770968">&#34;&#34;</span><span class="op" id="6770970">,</span>&nbsp;<span class="string" id="6770972">&#34;a&#34;</span><span class="op" id="6770975">}</span><span class="op" id="6770976">}</span><span class="op" id="6770977">,</span>&nbsp;<span class="ident" id="6770979">Output</span><span class="op" id="6770985">:</span>&nbsp;<span class="string" id="6770987">&#34;a,,a\n&#34;</span><span class="op" id="6770995">}</span><span class="op" id="6770996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6770999">{</span><span class="ident" id="6771000">Input</span><span class="op" id="6771005">:</span>&nbsp;<span class="op" id="6771007">[</span><span class="op" id="6771008">]</span><span class="op" id="6771009">[</span><span class="op" id="6771010">]</span><span class="builtintype" id="6771011">string</span><span class="op" id="6771017">{</span><span class="op" id="6771018">{</span><span class="string" id="6771019">&#34;a&#34;</span><span class="op" id="6771022">,</span>&nbsp;<span class="string" id="6771024">&#34;a&#34;</span><span class="op" id="6771027">,</span>&nbsp;<span class="string" id="6771029">&#34;&#34;</span><span class="op" id="6771031">}</span><span class="op" id="6771032">}</span><span class="op" id="6771033">,</span>&nbsp;<span class="ident" id="6771035">Output</span><span class="op" id="6771041">:</span>&nbsp;<span class="string" id="6771043">&#34;a,a,\n&#34;</span><span class="op" id="6771051">}</span><span class="op" id="6771052">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771055">{</span><span class="ident" id="6771056">Input</span><span class="op" id="6771061">:</span>&nbsp;<span class="op" id="6771063">[</span><span class="op" id="6771064">]</span><span class="op" id="6771065">[</span><span class="op" id="6771066">]</span><span class="builtintype" id="6771067">string</span><span class="op" id="6771073">{</span><span class="op" id="6771074">{</span><span class="string" id="6771075">&#34;a&#34;</span><span class="op" id="6771078">,</span>&nbsp;<span class="string" id="6771080">&#34;a&#34;</span><span class="op" id="6771083">,</span>&nbsp;<span class="string" id="6771085">&#34;a&#34;</span><span class="op" id="6771088">}</span><span class="op" id="6771089">}</span><span class="op" id="6771090">,</span>&nbsp;<span class="ident" id="6771092">Output</span><span class="op" id="6771098">:</span>&nbsp;<span class="string" id="6771100">&#34;a,a,a\n&#34;</span><span class="op" id="6771109">}</span><span class="op" id="6771110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771113">{</span><span class="ident" id="6771114">Input</span><span class="op" id="6771119">:</span>&nbsp;<span class="op" id="6771121">[</span><span class="op" id="6771122">]</span><span class="op" id="6771123">[</span><span class="op" id="6771124">]</span><span class="builtintype" id="6771125">string</span><span class="op" id="6771131">{</span><span class="op" id="6771132">{</span><span class="string" id="6771133">`\.`</span><span class="op" id="6771137">}</span><span class="op" id="6771138">}</span><span class="op" id="6771139">,</span>&nbsp;<span class="ident" id="6771141">Output</span><span class="op" id="6771147">:</span>&nbsp;<span class="string" id="6771149">&#34;\&#34;\\.\&#34;\n&#34;</span><span class="op" id="6771160">}</span><span class="op" id="6771161">,</span><br>
<span class="lineno"></span><span class="op" id="6771163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6771166">func</span>&nbsp;<span class="ident" id="6771171">TestWrite</span><span class="op" id="6771180">(</span><span class="ident" id="6771181">t</span>&nbsp;<span class="op" id="6771183">*</span><span class="ident" id="6771184">testing</span><span class="op" id="6771191">.</span><span class="ident" id="6771192">T</span><span class="op" id="6771193">)</span>&nbsp;<span class="op" id="6771195">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771198">for</span>&nbsp;<span class="ident" id="6771202">n</span><span class="op" id="6771203">,</span>&nbsp;<span class="ident" id="6771205">tt</span>&nbsp;<span class="op" id="6771208">:=</span>&nbsp;<span class="keyword" id="6771211">range</span>&nbsp;<span class="ident" id="6771217">writeTests</span>&nbsp;<span class="op" id="6771228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771232">b</span>&nbsp;<span class="op" id="6771234">:=</span>&nbsp;<span class="op" id="6771237">&amp;</span><span class="ident" id="6771238">bytes</span><span class="op" id="6771243">.</span><span class="ident" id="6771244">Buffer</span><span class="op" id="6771250">{</span><span class="op" id="6771251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771255">f</span>&nbsp;<span class="op" id="6771257">:=</span>&nbsp;<span class="ident" id="6771260">NewWriter</span><span class="op" id="6771269">(</span><span class="ident" id="6771270">b</span><span class="op" id="6771271">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771275">f</span><span class="op" id="6771276">.</span><span class="ident" id="6771277">UseCRLF</span>&nbsp;<span class="op" id="6771285">=</span>&nbsp;<span class="ident" id="6771287">tt</span><span class="op" id="6771289">.</span><span class="ident" id="6771290">UseCRLF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771300">err</span>&nbsp;<span class="op" id="6771304">:=</span>&nbsp;<span class="ident" id="6771307">f</span><span class="op" id="6771308">.</span><span class="ident" id="6771309">WriteAll</span><span class="op" id="6771317">(</span><span class="ident" id="6771318">tt</span><span class="op" id="6771320">.</span><span class="ident" id="6771321">Input</span><span class="op" id="6771326">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771330">if</span>&nbsp;<span class="ident" id="6771333">err</span>&nbsp;<span class="op" id="6771337">!=</span>&nbsp;<span class="ident" id="6771340">nil</span>&nbsp;<span class="op" id="6771344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771349">t</span><span class="op" id="6771350">.</span><span class="ident" id="6771351">Errorf</span><span class="op" id="6771357">(</span><span class="string" id="6771358">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="6771382">,</span>&nbsp;<span class="ident" id="6771384">err</span><span class="op" id="6771387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771395">out</span>&nbsp;<span class="op" id="6771399">:=</span>&nbsp;<span class="ident" id="6771402">b</span><span class="op" id="6771403">.</span><span class="ident" id="6771404">String</span><span class="op" id="6771410">(</span><span class="op" id="6771411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771415">if</span>&nbsp;<span class="ident" id="6771418">out</span>&nbsp;<span class="op" id="6771422">!=</span>&nbsp;<span class="ident" id="6771425">tt</span><span class="op" id="6771427">.</span><span class="ident" id="6771428">Output</span>&nbsp;<span class="op" id="6771435">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771440">t</span><span class="op" id="6771441">.</span><span class="ident" id="6771442">Errorf</span><span class="op" id="6771448">(</span><span class="string" id="6771449">&#34;#%d:&nbsp;out=%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6771470">,</span>&nbsp;<span class="ident" id="6771472">n</span><span class="op" id="6771473">,</span>&nbsp;<span class="ident" id="6771475">out</span><span class="op" id="6771478">,</span>&nbsp;<span class="ident" id="6771480">tt</span><span class="op" id="6771482">.</span><span class="ident" id="6771483">Output</span><span class="op" id="6771489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771493">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771496">}</span><br>
<span class="lineno"></span><span class="op" id="6771498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="6771501">type</span>&nbsp;<span class="ident" id="6771506">errorWriter</span>&nbsp;<span class="keyword" id="6771518">struct</span><span class="op" id="6771524">{</span><span class="op" id="6771525">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6771528">func</span>&nbsp;<span class="op" id="6771533">(</span><span class="ident" id="6771534">e</span>&nbsp;<span class="ident" id="6771536">errorWriter</span><span class="op" id="6771547">)</span>&nbsp;<span class="ident" id="6771549">Write</span><span class="op" id="6771554">(</span><span class="ident" id="6771555">b</span>&nbsp;<span class="op" id="6771557">[</span><span class="op" id="6771558">]</span><span class="builtintype" id="6771559">byte</span><span class="op" id="6771563">)</span>&nbsp;<span class="op" id="6771565">(</span><span class="builtintype" id="6771566">int</span><span class="op" id="6771569">,</span>&nbsp;<span class="builtintype" id="6771571">error</span><span class="op" id="6771576">)</span>&nbsp;<span class="op" id="6771578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771581">return</span>&nbsp;<span class="num" id="6771588">0</span><span class="op" id="6771589">,</span>&nbsp;<span class="ident" id="6771591">errors</span><span class="op" id="6771597">.</span><span class="ident" id="6771598">New</span><span class="op" id="6771601">(</span><span class="string" id="6771602">&#34;Test&#34;</span><span class="op" id="6771608">)</span><br>
<span class="lineno"></span><span class="op" id="6771610">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="6771613">func</span>&nbsp;<span class="ident" id="6771618">TestError</span><span class="op" id="6771627">(</span><span class="ident" id="6771628">t</span>&nbsp;<span class="op" id="6771630">*</span><span class="ident" id="6771631">testing</span><span class="op" id="6771638">.</span><span class="ident" id="6771639">T</span><span class="op" id="6771640">)</span>&nbsp;<span class="op" id="6771642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771645">b</span>&nbsp;<span class="op" id="6771647">:=</span>&nbsp;<span class="op" id="6771650">&amp;</span><span class="ident" id="6771651">bytes</span><span class="op" id="6771656">.</span><span class="ident" id="6771657">Buffer</span><span class="op" id="6771663">{</span><span class="op" id="6771664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771667">f</span>&nbsp;<span class="op" id="6771669">:=</span>&nbsp;<span class="ident" id="6771672">NewWriter</span><span class="op" id="6771681">(</span><span class="ident" id="6771682">b</span><span class="op" id="6771683">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771686">f</span><span class="op" id="6771687">.</span><span class="ident" id="6771688">Write</span><span class="op" id="6771693">(</span><span class="op" id="6771694">[</span><span class="op" id="6771695">]</span><span class="builtintype" id="6771696">string</span><span class="op" id="6771702">{</span><span class="string" id="6771703">&#34;abc&#34;</span><span class="op" id="6771708">}</span><span class="op" id="6771709">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771712">f</span><span class="op" id="6771713">.</span><span class="ident" id="6771714">Flush</span><span class="op" id="6771719">(</span><span class="op" id="6771720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771723">err</span>&nbsp;<span class="op" id="6771727">:=</span>&nbsp;<span class="ident" id="6771730">f</span><span class="op" id="6771731">.</span><span class="ident" id="6771732">Error</span><span class="op" id="6771737">(</span><span class="op" id="6771738">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771742">if</span>&nbsp;<span class="ident" id="6771745">err</span>&nbsp;<span class="op" id="6771749">!=</span>&nbsp;<span class="ident" id="6771752">nil</span>&nbsp;<span class="op" id="6771756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771760">t</span><span class="op" id="6771761">.</span><span class="ident" id="6771762">Errorf</span><span class="op" id="6771768">(</span><span class="string" id="6771769">&#34;Unexpected&nbsp;error:&nbsp;%s\n&#34;</span><span class="op" id="6771793">,</span>&nbsp;<span class="ident" id="6771795">err</span><span class="op" id="6771798">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771805">f</span>&nbsp;<span class="op" id="6771807">=</span>&nbsp;<span class="ident" id="6771809">NewWriter</span><span class="op" id="6771818">(</span><span class="ident" id="6771819">errorWriter</span><span class="op" id="6771830">{</span><span class="op" id="6771831">}</span><span class="op" id="6771832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771835">f</span><span class="op" id="6771836">.</span><span class="ident" id="6771837">Write</span><span class="op" id="6771842">(</span><span class="op" id="6771843">[</span><span class="op" id="6771844">]</span><span class="builtintype" id="6771845">string</span><span class="op" id="6771851">{</span><span class="string" id="6771852">&#34;abc&#34;</span><span class="op" id="6771857">}</span><span class="op" id="6771858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771861">f</span><span class="op" id="6771862">.</span><span class="ident" id="6771863">Flush</span><span class="op" id="6771868">(</span><span class="op" id="6771869">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771872">err</span>&nbsp;<span class="op" id="6771876">=</span>&nbsp;<span class="ident" id="6771878">f</span><span class="op" id="6771879">.</span><span class="ident" id="6771880">Error</span><span class="op" id="6771885">(</span><span class="op" id="6771886">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6771890">if</span>&nbsp;<span class="ident" id="6771893">err</span>&nbsp;<span class="op" id="6771897">==</span>&nbsp;<span class="ident" id="6771900">nil</span>&nbsp;<span class="op" id="6771904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6771908">t</span><span class="op" id="6771909">.</span><span class="ident" id="6771910">Error</span><span class="op" id="6771915">(</span><span class="string" id="6771916">&#34;Error&nbsp;should&nbsp;not&nbsp;be&nbsp;nil&#34;</span><span class="op" id="6771941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6771944">}</span><br>
<span class="lineno">85</span><span class="op" id="6771946">}</span>
</div>
</body>
</html>
