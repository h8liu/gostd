<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html" class="current">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7047220">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7047276">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7047330">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7047381">package</span>&nbsp;<span class="ident" id="7047389">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7047395">import</span>&nbsp;<span class="op" id="7047402">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047405">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047414">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047423">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047430">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047436">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047447">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047458">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047469">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7047479">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7047482">type</span>&nbsp;<span class="ident" id="7047487">reqTest</span>&nbsp;<span class="keyword" id="7047495">struct</span>&nbsp;<span class="op" id="7047502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047505">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7047513">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047521">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7047529">*</span><span class="ident" id="7047530">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047539">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7047547">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047555">Trailer</span>&nbsp;<span class="ident" id="7047563">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7047571">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7047579">string</span><br>
<span class="lineno"></span><span class="op" id="7047586">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7047589">var</span>&nbsp;<span class="ident" id="7047593">noError</span>&nbsp;<span class="op" id="7047601">=</span>&nbsp;<span class="string" id="7047603">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="7047606">var</span>&nbsp;<span class="ident" id="7047610">noBody</span>&nbsp;<span class="op" id="7047617">=</span>&nbsp;<span class="string" id="7047619">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="7047622">var</span>&nbsp;<span class="ident" id="7047626">noTrailer</span>&nbsp;<span class="ident" id="7047636">Header</span>&nbsp;<span class="op" id="7047643">=</span>&nbsp;<span class="ident" id="7047645">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7047650">var</span>&nbsp;<span class="ident" id="7047654">reqTests</span>&nbsp;<span class="op" id="7047663">=</span>&nbsp;<span class="op" id="7047665">[</span><span class="op" id="7047666">]</span><span class="ident" id="7047667">reqTest</span><span class="op" id="7047674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7047677">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7047741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047745">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7047791">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047796">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="7047827">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047832">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="7047855">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047860">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="7047938">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047943">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="7047981">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7047986">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="7048022">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048027">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="7048080">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048085">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="7048107">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048112">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="7048136">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048141">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7048180">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048185">&#34;abcdef\n???&#34;</span><span class="op" id="7048198">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7048203">&amp;</span><span class="ident" id="7048204">Request</span><span class="op" id="7048211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048216">Method</span><span class="op" id="7048222">:</span>&nbsp;<span class="string" id="7048224">&#34;GET&#34;</span><span class="op" id="7048229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048234">URL</span><span class="op" id="7048237">:</span>&nbsp;<span class="op" id="7048239">&amp;</span><span class="ident" id="7048240">url</span><span class="op" id="7048243">.</span><span class="ident" id="7048244">URL</span><span class="op" id="7048247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048253">Scheme</span><span class="op" id="7048259">:</span>&nbsp;<span class="string" id="7048261">&#34;http&#34;</span><span class="op" id="7048267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048273">Host</span><span class="op" id="7048277">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7048281">&#34;www.techcrunch.com&#34;</span><span class="op" id="7048301">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048307">Path</span><span class="op" id="7048311">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7048315">&#34;/&#34;</span><span class="op" id="7048318">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7048323">}</span><span class="op" id="7048324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048329">Proto</span><span class="op" id="7048334">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7048341">&#34;HTTP/1.1&#34;</span><span class="op" id="7048351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048356">ProtoMajor</span><span class="op" id="7048366">:</span>&nbsp;<span class="num" id="7048368">1</span><span class="op" id="7048369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048374">ProtoMinor</span><span class="op" id="7048384">:</span>&nbsp;<span class="num" id="7048386">1</span><span class="op" id="7048387">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048392">Header</span><span class="op" id="7048398">:</span>&nbsp;<span class="ident" id="7048400">Header</span><span class="op" id="7048406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048412">&#34;Accept&#34;</span><span class="op" id="7048420">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7048432">{</span><span class="string" id="7048433">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="7048498">}</span><span class="op" id="7048499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048505">&#34;Accept-Language&#34;</span><span class="op" id="7048522">:</span>&nbsp;&nbsp;<span class="op" id="7048525">{</span><span class="string" id="7048526">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="7048542">}</span><span class="op" id="7048543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048549">&#34;Accept-Encoding&#34;</span><span class="op" id="7048566">:</span>&nbsp;&nbsp;<span class="op" id="7048569">{</span><span class="string" id="7048570">&#34;gzip,deflate&#34;</span><span class="op" id="7048584">}</span><span class="op" id="7048585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048591">&#34;Accept-Charset&#34;</span><span class="op" id="7048607">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7048611">{</span><span class="string" id="7048612">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="7048644">}</span><span class="op" id="7048645">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048651">&#34;Keep-Alive&#34;</span><span class="op" id="7048663">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7048671">{</span><span class="string" id="7048672">&#34;300&#34;</span><span class="op" id="7048677">}</span><span class="op" id="7048678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048684">&#34;Proxy-Connection&#34;</span><span class="op" id="7048702">:</span>&nbsp;<span class="op" id="7048704">{</span><span class="string" id="7048705">&#34;keep-alive&#34;</span><span class="op" id="7048717">}</span><span class="op" id="7048718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048724">&#34;Content-Length&#34;</span><span class="op" id="7048740">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7048744">{</span><span class="string" id="7048745">&#34;7&#34;</span><span class="op" id="7048748">}</span><span class="op" id="7048749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048755">&#34;User-Agent&#34;</span><span class="op" id="7048767">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7048775">{</span><span class="string" id="7048776">&#34;Fake&#34;</span><span class="op" id="7048782">}</span><span class="op" id="7048783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7048788">}</span><span class="op" id="7048789">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048794">Close</span><span class="op" id="7048799">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7048809">false</span><span class="op" id="7048814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048819">ContentLength</span><span class="op" id="7048832">:</span>&nbsp;<span class="num" id="7048834">7</span><span class="op" id="7048835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048840">Host</span><span class="op" id="7048844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7048855">&#34;www.techcrunch.com&#34;</span><span class="op" id="7048875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048880">RequestURI</span><span class="op" id="7048890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7048895">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="7048923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7048927">}</span><span class="op" id="7048928">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7048933">&#34;abcdef\n&#34;</span><span class="op" id="7048943">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048948">noTrailer</span><span class="op" id="7048957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7048961">noError</span><span class="op" id="7048968">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7048971">}</span><span class="op" id="7048972">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7048976">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7049023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7049027">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7049048">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7049053">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="7049076">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7049081">&amp;</span><span class="ident" id="7049082">Request</span><span class="op" id="7049089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049094">Method</span><span class="op" id="7049100">:</span>&nbsp;<span class="string" id="7049102">&#34;GET&#34;</span><span class="op" id="7049107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049112">URL</span><span class="op" id="7049115">:</span>&nbsp;<span class="op" id="7049117">&amp;</span><span class="ident" id="7049118">url</span><span class="op" id="7049121">.</span><span class="ident" id="7049122">URL</span><span class="op" id="7049125">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049131">Path</span><span class="op" id="7049135">:</span>&nbsp;<span class="string" id="7049137">&#34;/&#34;</span><span class="op" id="7049140">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7049145">}</span><span class="op" id="7049146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049151">Proto</span><span class="op" id="7049156">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7049166">&#34;HTTP/1.1&#34;</span><span class="op" id="7049176">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049181">ProtoMajor</span><span class="op" id="7049191">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7049196">1</span><span class="op" id="7049197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049202">ProtoMinor</span><span class="op" id="7049212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7049217">1</span><span class="op" id="7049218">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049223">Header</span><span class="op" id="7049229">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7049238">Header</span><span class="op" id="7049244">{</span><span class="op" id="7049245">}</span><span class="op" id="7049246">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049251">Close</span><span class="op" id="7049256">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7049266">false</span><span class="op" id="7049271">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049276">ContentLength</span><span class="op" id="7049289">:</span>&nbsp;<span class="num" id="7049291">0</span><span class="op" id="7049292">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049297">Host</span><span class="op" id="7049301">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7049312">&#34;foo.com&#34;</span><span class="op" id="7049321">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049326">RequestURI</span><span class="op" id="7049336">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7049341">&#34;/&#34;</span><span class="op" id="7049344">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7049348">}</span><span class="op" id="7049349">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049354">noBody</span><span class="op" id="7049360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049364">noTrailer</span><span class="op" id="7049373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049377">noError</span><span class="op" id="7049384">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7049387">}</span><span class="op" id="7049388">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7049392">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7049447">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7049497">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7049501">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7049552">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7049557">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7049577">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7049582">&amp;</span><span class="ident" id="7049583">Request</span><span class="op" id="7049590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049595">Method</span><span class="op" id="7049601">:</span>&nbsp;<span class="string" id="7049603">&#34;GET&#34;</span><span class="op" id="7049608">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049613">URL</span><span class="op" id="7049616">:</span>&nbsp;<span class="op" id="7049618">&amp;</span><span class="ident" id="7049619">url</span><span class="op" id="7049622">.</span><span class="ident" id="7049623">URL</span><span class="op" id="7049626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049632">Path</span><span class="op" id="7049636">:</span>&nbsp;<span class="string" id="7049638">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="7049671">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7049676">}</span><span class="op" id="7049677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049682">Proto</span><span class="op" id="7049687">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7049697">&#34;HTTP/1.1&#34;</span><span class="op" id="7049707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049712">ProtoMajor</span><span class="op" id="7049722">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7049727">1</span><span class="op" id="7049728">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049733">ProtoMinor</span><span class="op" id="7049743">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7049748">1</span><span class="op" id="7049749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049754">Header</span><span class="op" id="7049760">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7049769">Header</span><span class="op" id="7049775">{</span><span class="op" id="7049776">}</span><span class="op" id="7049777">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049782">Close</span><span class="op" id="7049787">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7049797">false</span><span class="op" id="7049802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049807">ContentLength</span><span class="op" id="7049820">:</span>&nbsp;<span class="num" id="7049822">0</span><span class="op" id="7049823">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049828">Host</span><span class="op" id="7049832">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7049843">&#34;test&#34;</span><span class="op" id="7049849">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049854">RequestURI</span><span class="op" id="7049864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7049869">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="7049902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7049906">}</span><span class="op" id="7049907">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049912">noBody</span><span class="op" id="7049918">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049922">noTrailer</span><span class="op" id="7049931">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7049935">noError</span><span class="op" id="7049942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7049945">}</span><span class="op" id="7049946">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7049950">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050022">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050026">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7050068">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050073">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7050093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050097">nil</span><span class="op" id="7050100">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050104">noBody</span><span class="op" id="7050110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050114">noTrailer</span><span class="op" id="7050123">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050127">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="7050182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050185">}</span><span class="op" id="7050186">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7050190">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050213">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050217">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7050237">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050242">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="7050262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050266">nil</span><span class="op" id="7050269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050273">noBody</span><span class="op" id="7050279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050283">noTrailer</span><span class="op" id="7050292">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050296">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="7050315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050318">}</span><span class="op" id="7050319">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7050323">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050360">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050364">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="7050386">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050391">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="7050411">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050416">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="7050453">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050458">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="7050473">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050478">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="7050493">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050498">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="7050506">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050511">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="7050544">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050549">&#34;\r\n&#34;</span><span class="op" id="7050555">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050559">&amp;</span><span class="ident" id="7050560">Request</span><span class="op" id="7050567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050572">Method</span><span class="op" id="7050578">:</span>&nbsp;<span class="string" id="7050580">&#34;POST&#34;</span><span class="op" id="7050586">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050591">URL</span><span class="op" id="7050594">:</span>&nbsp;<span class="op" id="7050596">&amp;</span><span class="ident" id="7050597">url</span><span class="op" id="7050600">.</span><span class="ident" id="7050601">URL</span><span class="op" id="7050604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050610">Path</span><span class="op" id="7050614">:</span>&nbsp;<span class="string" id="7050616">&#34;/&#34;</span><span class="op" id="7050619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050624">}</span><span class="op" id="7050625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050630">TransferEncoding</span><span class="op" id="7050646">:</span>&nbsp;<span class="op" id="7050648">[</span><span class="op" id="7050649">]</span><span class="builtintype" id="7050650">string</span><span class="op" id="7050656">{</span><span class="string" id="7050657">&#34;chunked&#34;</span><span class="op" id="7050666">}</span><span class="op" id="7050667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050672">Proto</span><span class="op" id="7050677">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7050690">&#34;HTTP/1.1&#34;</span><span class="op" id="7050700">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050705">ProtoMajor</span><span class="op" id="7050715">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7050723">1</span><span class="op" id="7050724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050729">ProtoMinor</span><span class="op" id="7050739">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7050747">1</span><span class="op" id="7050748">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050753">Header</span><span class="op" id="7050759">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7050771">Header</span><span class="op" id="7050777">{</span><span class="op" id="7050778">}</span><span class="op" id="7050779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050784">ContentLength</span><span class="op" id="7050797">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7050802">-</span><span class="num" id="7050803">1</span><span class="op" id="7050804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050809">Host</span><span class="op" id="7050813">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7050827">&#34;foo.com&#34;</span><span class="op" id="7050836">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050841">RequestURI</span><span class="op" id="7050851">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7050859">&#34;/&#34;</span><span class="op" id="7050862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050866">}</span><span class="op" id="7050867">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050872">&#34;foobar&#34;</span><span class="op" id="7050880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050884">Header</span><span class="op" id="7050890">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050895">&#34;Trailer-Key&#34;</span><span class="op" id="7050908">:</span>&nbsp;<span class="op" id="7050910">{</span><span class="string" id="7050911">&#34;Trailer-Value&#34;</span><span class="op" id="7050926">}</span><span class="op" id="7050927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050931">}</span><span class="op" id="7050932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7050936">noError</span><span class="op" id="7050943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050946">}</span><span class="op" id="7050947">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7050951">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7050989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7050993">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7051038">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051043">&amp;</span><span class="ident" id="7051044">Request</span><span class="op" id="7051051">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051056">Method</span><span class="op" id="7051062">:</span>&nbsp;<span class="string" id="7051064">&#34;CONNECT&#34;</span><span class="op" id="7051073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051078">URL</span><span class="op" id="7051081">:</span>&nbsp;<span class="op" id="7051083">&amp;</span><span class="ident" id="7051084">url</span><span class="op" id="7051087">.</span><span class="ident" id="7051088">URL</span><span class="op" id="7051091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051097">Host</span><span class="op" id="7051101">:</span>&nbsp;<span class="string" id="7051103">&#34;www.google.com:443&#34;</span><span class="op" id="7051123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051128">}</span><span class="op" id="7051129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051134">Proto</span><span class="op" id="7051139">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7051149">&#34;HTTP/1.1&#34;</span><span class="op" id="7051159">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051164">ProtoMajor</span><span class="op" id="7051174">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7051179">1</span><span class="op" id="7051180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051185">ProtoMinor</span><span class="op" id="7051195">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7051200">1</span><span class="op" id="7051201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051206">Header</span><span class="op" id="7051212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051221">Header</span><span class="op" id="7051227">{</span><span class="op" id="7051228">}</span><span class="op" id="7051229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051234">Close</span><span class="op" id="7051239">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7051249">false</span><span class="op" id="7051254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051259">ContentLength</span><span class="op" id="7051272">:</span>&nbsp;<span class="num" id="7051274">0</span><span class="op" id="7051275">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051280">Host</span><span class="op" id="7051284">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7051295">&#34;www.google.com:443&#34;</span><span class="op" id="7051315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051320">RequestURI</span><span class="op" id="7051330">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7051335">&#34;www.google.com:443&#34;</span><span class="op" id="7051355">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051359">}</span><span class="op" id="7051360">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051365">noBody</span><span class="op" id="7051371">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051375">noTrailer</span><span class="op" id="7051384">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051388">noError</span><span class="op" id="7051395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051398">}</span><span class="op" id="7051399">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7051403">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7051444">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7051485">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051490">&amp;</span><span class="ident" id="7051491">Request</span><span class="op" id="7051498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051503">Method</span><span class="op" id="7051509">:</span>&nbsp;<span class="string" id="7051511">&#34;CONNECT&#34;</span><span class="op" id="7051520">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051525">URL</span><span class="op" id="7051528">:</span>&nbsp;<span class="op" id="7051530">&amp;</span><span class="ident" id="7051531">url</span><span class="op" id="7051534">.</span><span class="ident" id="7051535">URL</span><span class="op" id="7051538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051544">Host</span><span class="op" id="7051548">:</span>&nbsp;<span class="string" id="7051550">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7051566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051571">}</span><span class="op" id="7051572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051577">Proto</span><span class="op" id="7051582">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7051592">&#34;HTTP/1.1&#34;</span><span class="op" id="7051602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051607">ProtoMajor</span><span class="op" id="7051617">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7051622">1</span><span class="op" id="7051623">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051628">ProtoMinor</span><span class="op" id="7051638">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7051643">1</span><span class="op" id="7051644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051649">Header</span><span class="op" id="7051655">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7051664">Header</span><span class="op" id="7051670">{</span><span class="op" id="7051671">}</span><span class="op" id="7051672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051677">Close</span><span class="op" id="7051682">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7051692">false</span><span class="op" id="7051697">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051702">ContentLength</span><span class="op" id="7051715">:</span>&nbsp;<span class="num" id="7051717">0</span><span class="op" id="7051718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051723">Host</span><span class="op" id="7051727">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7051738">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7051754">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051759">RequestURI</span><span class="op" id="7051769">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7051774">&#34;127.0.0.1:6060&#34;</span><span class="op" id="7051790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051794">}</span><span class="op" id="7051795">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051800">noBody</span><span class="op" id="7051806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051810">noTrailer</span><span class="op" id="7051819">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051823">noError</span><span class="op" id="7051830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051833">}</span><span class="op" id="7051834">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7051838">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051867">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7051871">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="7051906">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051911">&amp;</span><span class="ident" id="7051912">Request</span><span class="op" id="7051919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051924">Method</span><span class="op" id="7051930">:</span>&nbsp;<span class="string" id="7051932">&#34;CONNECT&#34;</span><span class="op" id="7051941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051946">URL</span><span class="op" id="7051949">:</span>&nbsp;<span class="op" id="7051951">&amp;</span><span class="ident" id="7051952">url</span><span class="op" id="7051955">.</span><span class="ident" id="7051956">URL</span><span class="op" id="7051959">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051965">Path</span><span class="op" id="7051969">:</span>&nbsp;<span class="string" id="7051971">&#34;/_goRPC_&#34;</span><span class="op" id="7051981">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7051986">}</span><span class="op" id="7051987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7051992">Proto</span><span class="op" id="7051997">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7052007">&#34;HTTP/1.1&#34;</span><span class="op" id="7052017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052022">ProtoMajor</span><span class="op" id="7052032">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7052037">1</span><span class="op" id="7052038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052043">ProtoMinor</span><span class="op" id="7052053">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7052058">1</span><span class="op" id="7052059">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052064">Header</span><span class="op" id="7052070">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7052079">Header</span><span class="op" id="7052085">{</span><span class="op" id="7052086">}</span><span class="op" id="7052087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052092">Close</span><span class="op" id="7052097">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7052107">false</span><span class="op" id="7052112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052117">ContentLength</span><span class="op" id="7052130">:</span>&nbsp;<span class="num" id="7052132">0</span><span class="op" id="7052133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052138">Host</span><span class="op" id="7052142">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7052153">&#34;&#34;</span><span class="op" id="7052155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052160">RequestURI</span><span class="op" id="7052170">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7052175">&#34;/_goRPC_&#34;</span><span class="op" id="7052185">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052189">}</span><span class="op" id="7052190">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052195">noBody</span><span class="op" id="7052201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052205">noTrailer</span><span class="op" id="7052214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052218">noError</span><span class="op" id="7052225">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052228">}</span><span class="op" id="7052229">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7052233">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052284">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="7052326">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052330">&amp;</span><span class="ident" id="7052331">Request</span><span class="op" id="7052338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052343">Method</span><span class="op" id="7052349">:</span>&nbsp;<span class="string" id="7052351">&#34;NOTIFY&#34;</span><span class="op" id="7052359">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052364">URL</span><span class="op" id="7052367">:</span>&nbsp;<span class="op" id="7052369">&amp;</span><span class="ident" id="7052370">url</span><span class="op" id="7052373">.</span><span class="ident" id="7052374">URL</span><span class="op" id="7052377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052383">Path</span><span class="op" id="7052387">:</span>&nbsp;<span class="string" id="7052389">&#34;*&#34;</span><span class="op" id="7052392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052397">}</span><span class="op" id="7052398">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052403">Proto</span><span class="op" id="7052408">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7052415">&#34;HTTP/1.1&#34;</span><span class="op" id="7052425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052430">ProtoMajor</span><span class="op" id="7052440">:</span>&nbsp;<span class="num" id="7052442">1</span><span class="op" id="7052443">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052448">ProtoMinor</span><span class="op" id="7052458">:</span>&nbsp;<span class="num" id="7052460">1</span><span class="op" id="7052461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052466">Header</span><span class="op" id="7052472">:</span>&nbsp;<span class="ident" id="7052474">Header</span><span class="op" id="7052480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052486">&#34;Server&#34;</span><span class="op" id="7052494">:</span>&nbsp;<span class="op" id="7052496">[</span><span class="op" id="7052497">]</span><span class="builtintype" id="7052498">string</span><span class="op" id="7052504">{</span><span class="string" id="7052505">&#34;foo&#34;</span><span class="op" id="7052510">}</span><span class="op" id="7052511">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052516">}</span><span class="op" id="7052517">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052522">Close</span><span class="op" id="7052527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7052537">false</span><span class="op" id="7052542">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052547">ContentLength</span><span class="op" id="7052560">:</span>&nbsp;<span class="num" id="7052562">0</span><span class="op" id="7052563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052568">RequestURI</span><span class="op" id="7052578">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7052583">&#34;*&#34;</span><span class="op" id="7052586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052590">}</span><span class="op" id="7052591">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052596">noBody</span><span class="op" id="7052602">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052606">noTrailer</span><span class="op" id="7052615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052619">noError</span><span class="op" id="7052626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052629">}</span><span class="op" id="7052630">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7052634">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052692">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="7052735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052739">&amp;</span><span class="ident" id="7052740">Request</span><span class="op" id="7052747">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052752">Method</span><span class="op" id="7052758">:</span>&nbsp;<span class="string" id="7052760">&#34;OPTIONS&#34;</span><span class="op" id="7052769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052774">URL</span><span class="op" id="7052777">:</span>&nbsp;<span class="op" id="7052779">&amp;</span><span class="ident" id="7052780">url</span><span class="op" id="7052783">.</span><span class="ident" id="7052784">URL</span><span class="op" id="7052787">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052793">Path</span><span class="op" id="7052797">:</span>&nbsp;<span class="string" id="7052799">&#34;*&#34;</span><span class="op" id="7052802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052807">}</span><span class="op" id="7052808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052813">Proto</span><span class="op" id="7052818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7052825">&#34;HTTP/1.1&#34;</span><span class="op" id="7052835">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052840">ProtoMajor</span><span class="op" id="7052850">:</span>&nbsp;<span class="num" id="7052852">1</span><span class="op" id="7052853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052858">ProtoMinor</span><span class="op" id="7052868">:</span>&nbsp;<span class="num" id="7052870">1</span><span class="op" id="7052871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052876">Header</span><span class="op" id="7052882">:</span>&nbsp;<span class="ident" id="7052884">Header</span><span class="op" id="7052890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7052896">&#34;Server&#34;</span><span class="op" id="7052904">:</span>&nbsp;<span class="op" id="7052906">[</span><span class="op" id="7052907">]</span><span class="builtintype" id="7052908">string</span><span class="op" id="7052914">{</span><span class="string" id="7052915">&#34;foo&#34;</span><span class="op" id="7052920">}</span><span class="op" id="7052921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7052926">}</span><span class="op" id="7052927">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052932">Close</span><span class="op" id="7052937">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7052947">false</span><span class="op" id="7052952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052957">ContentLength</span><span class="op" id="7052970">:</span>&nbsp;<span class="num" id="7052972">0</span><span class="op" id="7052973">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7052978">RequestURI</span><span class="op" id="7052988">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7052993">&#34;*&#34;</span><span class="op" id="7052996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053000">}</span><span class="op" id="7053001">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053006">noBody</span><span class="op" id="7053012">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053016">noTrailer</span><span class="op" id="7053025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053029">noError</span><span class="op" id="7053036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053039">}</span><span class="op" id="7053040">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7053044">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7053093">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="7053161">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053165">&amp;</span><span class="ident" id="7053166">Request</span><span class="op" id="7053173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053178">Method</span><span class="op" id="7053184">:</span>&nbsp;<span class="string" id="7053186">&#34;GET&#34;</span><span class="op" id="7053191">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053196">URL</span><span class="op" id="7053199">:</span>&nbsp;<span class="op" id="7053201">&amp;</span><span class="ident" id="7053202">url</span><span class="op" id="7053205">.</span><span class="ident" id="7053206">URL</span><span class="op" id="7053209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053215">Path</span><span class="op" id="7053219">:</span>&nbsp;<span class="string" id="7053221">&#34;/&#34;</span><span class="op" id="7053224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053229">}</span><span class="op" id="7053230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053235">Header</span><span class="op" id="7053241">:</span>&nbsp;<span class="ident" id="7053243">Header</span><span class="op" id="7053249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7053255">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7053297">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7053337">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7053355">&#34;Connection&#34;</span><span class="op" id="7053367">:</span>&nbsp;<span class="op" id="7053369">[</span><span class="op" id="7053370">]</span><span class="builtintype" id="7053371">string</span><span class="op" id="7053377">{</span><span class="string" id="7053378">&#34;close&#34;</span><span class="op" id="7053385">}</span><span class="op" id="7053386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053391">}</span><span class="op" id="7053392">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053397">Host</span><span class="op" id="7053401">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7053409">&#34;issue8261.com&#34;</span><span class="op" id="7053424">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053429">Proto</span><span class="op" id="7053434">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7053441">&#34;HTTP/1.1&#34;</span><span class="op" id="7053451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053456">ProtoMajor</span><span class="op" id="7053466">:</span>&nbsp;<span class="num" id="7053468">1</span><span class="op" id="7053469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053474">ProtoMinor</span><span class="op" id="7053484">:</span>&nbsp;<span class="num" id="7053486">1</span><span class="op" id="7053487">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053492">Close</span><span class="op" id="7053497">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7053504">true</span><span class="op" id="7053508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053513">RequestURI</span><span class="op" id="7053523">:</span>&nbsp;<span class="string" id="7053525">&#34;/&#34;</span><span class="op" id="7053528">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053532">}</span><span class="op" id="7053533">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053538">noBody</span><span class="op" id="7053544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053548">noTrailer</span><span class="op" id="7053557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053561">noError</span><span class="op" id="7053568">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053571">}</span><span class="op" id="7053572">,</span><br>
<span class="lineno"></span><span class="op" id="7053574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7053577">func</span>&nbsp;<span class="ident" id="7053582">TestReadRequest</span><span class="op" id="7053597">(</span><span class="ident" id="7053598">t</span>&nbsp;<span class="op" id="7053600">*</span><span class="ident" id="7053601">testing</span><span class="op" id="7053608">.</span><span class="ident" id="7053609">T</span><span class="op" id="7053610">)</span>&nbsp;<span class="op" id="7053612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053615">for</span>&nbsp;<span class="ident" id="7053619">i</span>&nbsp;<span class="op" id="7053621">:=</span>&nbsp;<span class="keyword" id="7053624">range</span>&nbsp;<span class="ident" id="7053630">reqTests</span>&nbsp;<span class="op" id="7053639">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053643">tt</span>&nbsp;<span class="op" id="7053646">:=</span>&nbsp;<span class="op" id="7053649">&amp;</span><span class="ident" id="7053650">reqTests</span><span class="op" id="7053658">[</span><span class="ident" id="7053659">i</span><span class="op" id="7053660">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053664">req</span><span class="op" id="7053667">,</span>&nbsp;<span class="ident" id="7053669">err</span>&nbsp;<span class="op" id="7053673">:=</span>&nbsp;<span class="ident" id="7053676">ReadRequest</span><span class="op" id="7053687">(</span><span class="ident" id="7053688">bufio</span><span class="op" id="7053693">.</span><span class="ident" id="7053694">NewReader</span><span class="op" id="7053703">(</span><span class="ident" id="7053704">strings</span><span class="op" id="7053711">.</span><span class="ident" id="7053712">NewReader</span><span class="op" id="7053721">(</span><span class="ident" id="7053722">tt</span><span class="op" id="7053724">.</span><span class="ident" id="7053725">Raw</span><span class="op" id="7053728">)</span><span class="op" id="7053729">)</span><span class="op" id="7053730">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053734">if</span>&nbsp;<span class="ident" id="7053737">err</span>&nbsp;<span class="op" id="7053741">!=</span>&nbsp;<span class="ident" id="7053744">nil</span>&nbsp;<span class="op" id="7053748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053753">if</span>&nbsp;<span class="ident" id="7053756">err</span><span class="op" id="7053759">.</span><span class="ident" id="7053760">Error</span><span class="op" id="7053765">(</span><span class="op" id="7053766">)</span>&nbsp;<span class="op" id="7053768">!=</span>&nbsp;<span class="ident" id="7053771">tt</span><span class="op" id="7053773">.</span><span class="ident" id="7053774">Error</span>&nbsp;<span class="op" id="7053780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053786">t</span><span class="op" id="7053787">.</span><span class="ident" id="7053788">Errorf</span><span class="op" id="7053794">(</span><span class="string" id="7053795">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="7053825">,</span>&nbsp;<span class="ident" id="7053827">i</span><span class="op" id="7053828">,</span>&nbsp;<span class="ident" id="7053830">err</span><span class="op" id="7053833">.</span><span class="ident" id="7053834">Error</span><span class="op" id="7053839">(</span><span class="op" id="7053840">)</span><span class="op" id="7053841">,</span>&nbsp;<span class="ident" id="7053843">tt</span><span class="op" id="7053845">.</span><span class="ident" id="7053846">Error</span><span class="op" id="7053851">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053861">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7053872">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053876">rbody</span>&nbsp;<span class="op" id="7053882">:=</span>&nbsp;<span class="ident" id="7053885">req</span><span class="op" id="7053888">.</span><span class="ident" id="7053889">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053896">req</span><span class="op" id="7053899">.</span><span class="ident" id="7053900">Body</span>&nbsp;<span class="op" id="7053905">=</span>&nbsp;<span class="ident" id="7053907">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053913">testName</span>&nbsp;<span class="op" id="7053922">:=</span>&nbsp;<span class="ident" id="7053925">fmt</span><span class="op" id="7053928">.</span><span class="ident" id="7053929">Sprintf</span><span class="op" id="7053936">(</span><span class="string" id="7053937">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="7053951">,</span>&nbsp;<span class="ident" id="7053953">i</span><span class="op" id="7053954">,</span>&nbsp;<span class="ident" id="7053956">tt</span><span class="op" id="7053958">.</span><span class="ident" id="7053959">Raw</span><span class="op" id="7053962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7053966">diff</span><span class="op" id="7053970">(</span><span class="ident" id="7053971">t</span><span class="op" id="7053972">,</span>&nbsp;<span class="ident" id="7053974">testName</span><span class="op" id="7053982">,</span>&nbsp;<span class="ident" id="7053984">req</span><span class="op" id="7053987">,</span>&nbsp;<span class="ident" id="7053989">tt</span><span class="op" id="7053991">.</span><span class="ident" id="7053992">Req</span><span class="op" id="7053995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7053999">var</span>&nbsp;<span class="ident" id="7054003">bout</span>&nbsp;<span class="ident" id="7054008">bytes</span><span class="op" id="7054013">.</span><span class="ident" id="7054014">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054023">if</span>&nbsp;<span class="ident" id="7054026">rbody</span>&nbsp;<span class="op" id="7054032">!=</span>&nbsp;<span class="ident" id="7054035">nil</span>&nbsp;<span class="op" id="7054039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054044">_</span><span class="op" id="7054045">,</span>&nbsp;<span class="ident" id="7054047">err</span>&nbsp;<span class="op" id="7054051">:=</span>&nbsp;<span class="ident" id="7054054">io</span><span class="op" id="7054056">.</span><span class="ident" id="7054057">Copy</span><span class="op" id="7054061">(</span><span class="op" id="7054062">&amp;</span><span class="ident" id="7054063">bout</span><span class="op" id="7054067">,</span>&nbsp;<span class="ident" id="7054069">rbody</span><span class="op" id="7054074">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054079">if</span>&nbsp;<span class="ident" id="7054082">err</span>&nbsp;<span class="op" id="7054086">!=</span>&nbsp;<span class="ident" id="7054089">nil</span>&nbsp;<span class="op" id="7054093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054099">t</span><span class="op" id="7054100">.</span><span class="ident" id="7054101">Fatalf</span><span class="op" id="7054107">(</span><span class="string" id="7054108">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="7054130">,</span>&nbsp;<span class="ident" id="7054132">testName</span><span class="op" id="7054140">,</span>&nbsp;<span class="ident" id="7054142">err</span><span class="op" id="7054145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054155">rbody</span><span class="op" id="7054160">.</span><span class="ident" id="7054161">Close</span><span class="op" id="7054166">(</span><span class="op" id="7054167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054171">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054175">body</span>&nbsp;<span class="op" id="7054180">:=</span>&nbsp;<span class="ident" id="7054183">bout</span><span class="op" id="7054187">.</span><span class="ident" id="7054188">String</span><span class="op" id="7054194">(</span><span class="op" id="7054195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054199">if</span>&nbsp;<span class="ident" id="7054202">body</span>&nbsp;<span class="op" id="7054207">!=</span>&nbsp;<span class="ident" id="7054210">tt</span><span class="op" id="7054212">.</span><span class="ident" id="7054213">Body</span>&nbsp;<span class="op" id="7054218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054223">t</span><span class="op" id="7054224">.</span><span class="ident" id="7054225">Errorf</span><span class="op" id="7054231">(</span><span class="string" id="7054232">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7054255">,</span>&nbsp;<span class="ident" id="7054257">testName</span><span class="op" id="7054265">,</span>&nbsp;<span class="ident" id="7054267">body</span><span class="op" id="7054271">,</span>&nbsp;<span class="ident" id="7054273">tt</span><span class="op" id="7054275">.</span><span class="ident" id="7054276">Body</span><span class="op" id="7054280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7054288">if</span>&nbsp;<span class="op" id="7054291">!</span><span class="ident" id="7054292">reflect</span><span class="op" id="7054299">.</span><span class="ident" id="7054300">DeepEqual</span><span class="op" id="7054309">(</span><span class="ident" id="7054310">tt</span><span class="op" id="7054312">.</span><span class="ident" id="7054313">Trailer</span><span class="op" id="7054320">,</span>&nbsp;<span class="ident" id="7054322">req</span><span class="op" id="7054325">.</span><span class="ident" id="7054326">Trailer</span><span class="op" id="7054333">)</span>&nbsp;<span class="op" id="7054335">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7054340">t</span><span class="op" id="7054341">.</span><span class="ident" id="7054342">Errorf</span><span class="op" id="7054348">(</span><span class="string" id="7054349">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7054391">,</span>&nbsp;<span class="ident" id="7054393">testName</span><span class="op" id="7054401">,</span>&nbsp;<span class="ident" id="7054403">req</span><span class="op" id="7054406">.</span><span class="ident" id="7054407">Trailer</span><span class="op" id="7054414">,</span>&nbsp;<span class="ident" id="7054416">tt</span><span class="op" id="7054418">.</span><span class="ident" id="7054419">Trailer</span><span class="op" id="7054426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054430">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7054433">}</span><br>
<span class="lineno"></span><span class="op" id="7054435">}</span>
</div>
</body>
</html>
