<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5274665">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5274720">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5274774">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5274825">//&nbsp;+build&nbsp;!windows,!nacl,!plan9</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5274858">//&nbsp;Package&nbsp;syslog&nbsp;provides&nbsp;a&nbsp;simple&nbsp;interface&nbsp;to&nbsp;the&nbsp;system&nbsp;log</span><br>
<span class="lineno"></span><span class="comment" id="5274922">//&nbsp;service.&nbsp;It&nbsp;can&nbsp;send&nbsp;messages&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon&nbsp;using&nbsp;UNIX</span><br>
<span class="lineno"></span><span class="comment" id="5274987">//&nbsp;domain&nbsp;sockets,&nbsp;UDP&nbsp;or&nbsp;TCP.</span><br>
<span class="lineno">10</span><span class="comment" id="5275018">//</span><br>
<span class="lineno"></span><span class="comment" id="5275021">//&nbsp;Only&nbsp;one&nbsp;call&nbsp;to&nbsp;Dial&nbsp;is&nbsp;necessary.&nbsp;On&nbsp;write&nbsp;failures,</span><br>
<span class="lineno"></span><span class="comment" id="5275079">//&nbsp;the&nbsp;syslog&nbsp;client&nbsp;will&nbsp;attempt&nbsp;to&nbsp;reconnect&nbsp;to&nbsp;the&nbsp;server</span><br>
<span class="lineno"></span><span class="comment" id="5275140">//&nbsp;and&nbsp;write&nbsp;again.</span><br>
<span class="lineno"></span><span class="keyword" id="5275160">package</span>&nbsp;<span class="ident" id="5275168">syslog</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="5275176">import</span>&nbsp;<span class="op" id="5275183">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5275186">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5275196">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5275203">&#34;log&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5275210">&#34;net&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5275217">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5275223">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5275234">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5275242">&#34;time&#34;</span><br>
<span class="lineno">25</span><span class="op" id="5275249">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5275252">//&nbsp;The&nbsp;Priority&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;the&nbsp;syslog&nbsp;facility&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5275312">//&nbsp;severity.&nbsp;For&nbsp;example,&nbsp;LOG_ALERT&nbsp;|&nbsp;LOG_FTP&nbsp;sends&nbsp;an&nbsp;alert&nbsp;severity</span><br>
<span class="lineno"></span><span class="comment" id="5275382">//&nbsp;message&nbsp;from&nbsp;the&nbsp;FTP&nbsp;facility.&nbsp;The&nbsp;default&nbsp;severity&nbsp;is&nbsp;LOG_EMERG;</span><br>
<span class="lineno">30</span><span class="comment" id="5275451">//&nbsp;the&nbsp;default&nbsp;facility&nbsp;is&nbsp;LOG_KERN.</span><br>
<span class="lineno"></span><span class="keyword" id="5275488">type</span>&nbsp;<span class="ident" id="5275493">Priority</span>&nbsp;<span class="builtintype" id="5275502">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5275507">const</span>&nbsp;<span class="ident" id="5275513">severityMask</span>&nbsp;<span class="op" id="5275526">=</span>&nbsp;<span class="num" id="5275528">0x07</span><br>
<span class="lineno"></span><span class="keyword" id="5275533">const</span>&nbsp;<span class="ident" id="5275539">facilityMask</span>&nbsp;<span class="op" id="5275552">=</span>&nbsp;<span class="num" id="5275554">0xf8</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="5275560">const</span>&nbsp;<span class="op" id="5275566">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5275569">//&nbsp;Severity.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5275584">//&nbsp;From&nbsp;/usr/include/sys/syslog.h.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5275620">//&nbsp;These&nbsp;are&nbsp;the&nbsp;same&nbsp;on&nbsp;Linux,&nbsp;BSD,&nbsp;and&nbsp;OS&nbsp;X.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275668">LOG_EMERG</span>&nbsp;<span class="ident" id="5275678"><a href="/log/syslog/syslog.go.html#5275493">Priority</a></span>&nbsp;<span class="op" id="5275687">=</span>&nbsp;<span class="ident" id="5275689">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275695">LOG_ALERT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275706">LOG_CRIT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275716">LOG_ERR</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275725">LOG_WARNING</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275738">LOG_NOTICE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275750">LOG_INFO</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275760">LOG_DEBUG</span><br>
<span class="lineno"></span><span class="op" id="5275770">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="5275773">const</span>&nbsp;<span class="op" id="5275779">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5275782">//&nbsp;Facility.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5275797">//&nbsp;From&nbsp;/usr/include/sys/syslog.h.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5275833">//&nbsp;These&nbsp;are&nbsp;the&nbsp;same&nbsp;up&nbsp;to&nbsp;LOG_FTP&nbsp;on&nbsp;Linux,&nbsp;BSD,&nbsp;and&nbsp;OS&nbsp;X.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275895">LOG_KERN</span>&nbsp;<span class="ident" id="5275904"><a href="/log/syslog/syslog.go.html#5275493">Priority</a></span>&nbsp;<span class="op" id="5275913">=</span>&nbsp;<span class="ident" id="5275915">iota</span>&nbsp;<span class="op" id="5275920">&lt;&lt;</span>&nbsp;<span class="num" id="5275923">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275926">LOG_USER</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275936">LOG_MAIL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275946">LOG_DAEMON</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275958">LOG_AUTH</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275968">LOG_SYSLOG</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275980">LOG_LPR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275989">LOG_NEWS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5275999">LOG_UUCP</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276009">LOG_CRON</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276019">LOG_AUTHPRIV</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276033">LOG_FTP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276042">_</span>&nbsp;<span class="comment" id="5276044">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276055">_</span>&nbsp;<span class="comment" id="5276057">//&nbsp;unused</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276068">_</span>&nbsp;<span class="comment" id="5276070">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276081">_</span>&nbsp;<span class="comment" id="5276083">//&nbsp;unused</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276094">LOG_LOCAL0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276106">LOG_LOCAL1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276118">LOG_LOCAL2</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276130">LOG_LOCAL3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276142">LOG_LOCAL4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276154">LOG_LOCAL5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276166">LOG_LOCAL6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276178">LOG_LOCAL7</span><br>
<span class="lineno">80</span><span class="op" id="5276189">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5276192">//&nbsp;A&nbsp;Writer&nbsp;is&nbsp;a&nbsp;connection&nbsp;to&nbsp;a&nbsp;syslog&nbsp;server.</span><br>
<span class="lineno"></span><span class="keyword" id="5276240">type</span>&nbsp;<span class="ident" id="5276245">Writer</span>&nbsp;<span class="keyword" id="5276252">struct</span>&nbsp;<span class="op" id="5276259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276262">priority</span>&nbsp;<span class="ident" id="5276271"><a href="/log/syslog/syslog.go.html#5275493">Priority</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276281">tag</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5276290">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276298">hostname</span>&nbsp;<span class="builtintype" id="5276307">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276315">network</span>&nbsp;&nbsp;<span class="builtintype" id="5276324">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276332">raddr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5276341">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276350">mu</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5276355"><a href="/log/syslog/syslog.go.html#5275234">sync</a></span><span class="op" id="5276359">.</span><span class="ident" id="5276360">Mutex</span>&nbsp;<span class="comment" id="5276366">//&nbsp;guards&nbsp;conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276382">conn</span>&nbsp;<span class="ident" id="5276387"><a href="/log/syslog/syslog.go.html#5276773">serverConn</a></span><br>
<span class="lineno"></span><span class="op" id="5276398">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5276401">//&nbsp;This&nbsp;interface&nbsp;and&nbsp;the&nbsp;separate&nbsp;syslog_unix.go&nbsp;file&nbsp;exist&nbsp;for</span><br>
<span class="lineno">95</span><span class="comment" id="5276466">//&nbsp;Solaris&nbsp;support&nbsp;as&nbsp;implemented&nbsp;by&nbsp;gccgo.&nbsp;&nbsp;On&nbsp;Solaris&nbsp;you&nbsp;can&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="5276534">//&nbsp;simply&nbsp;open&nbsp;a&nbsp;TCP&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon.&nbsp;&nbsp;The&nbsp;gccgo</span><br>
<span class="lineno"></span><span class="comment" id="5276599">//&nbsp;sources&nbsp;have&nbsp;a&nbsp;syslog_solaris.go&nbsp;file&nbsp;that&nbsp;implements&nbsp;unixSyslog&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5276670">//&nbsp;return&nbsp;a&nbsp;type&nbsp;that&nbsp;satisfies&nbsp;this&nbsp;interface&nbsp;and&nbsp;simply&nbsp;calls&nbsp;the&nbsp;C</span><br>
<span class="lineno"></span><span class="comment" id="5276740">//&nbsp;library&nbsp;syslog&nbsp;function.</span><br>
<span class="lineno">100</span><span class="keyword" id="5276768">type</span>&nbsp;<span class="ident" id="5276773">serverConn</span>&nbsp;<span class="keyword" id="5276784">interface</span>&nbsp;<span class="op" id="5276794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276797">writeString</span><span class="op" id="5276808">(</span><span class="ident" id="5276809">p</span>&nbsp;<span class="ident" id="5276811"><a href="/log/syslog/syslog.go.html#5275493">Priority</a></span><span class="op" id="5276819">,</span>&nbsp;<span class="ident" id="5276821">hostname</span><span class="op" id="5276829">,</span>&nbsp;<span class="ident" id="5276831">tag</span><span class="op" id="5276834">,</span>&nbsp;<span class="ident" id="5276836">s</span><span class="op" id="5276837">,</span>&nbsp;<span class="ident" id="5276839">nl</span>&nbsp;<span class="builtintype" id="5276842">string</span><span class="op" id="5276848">)</span>&nbsp;<span class="builtintype" id="5276850">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5276857">close</span><span class="op" id="5276862">(</span><span class="op" id="5276863">)</span>&nbsp;<span class="builtintype" id="5276865">error</span><br>
<span class="lineno"></span><span class="op" id="5276871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5276874">type</span>&nbsp;<span class="ident" id="5276879">netConn</span>&nbsp;<span class="keyword" id="5276887">struct</span>&nbsp;<span class="op" id="5276894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276897">local</span>&nbsp;<span class="builtintype" id="5276903">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5276909">conn</span>&nbsp;&nbsp;<span class="ident" id="5276915"><a href="/log/syslog/syslog.go.html#5275210">net</a></span><span class="op" id="5276918">.</span><span class="ident" id="5276919">Conn</span><br>
<span class="lineno"></span><span class="op" id="5276924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="5276927">//&nbsp;New&nbsp;establishes&nbsp;a&nbsp;new&nbsp;connection&nbsp;to&nbsp;the&nbsp;system&nbsp;log&nbsp;daemon.&nbsp;&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="5276995">//&nbsp;write&nbsp;to&nbsp;the&nbsp;returned&nbsp;writer&nbsp;sends&nbsp;a&nbsp;log&nbsp;message&nbsp;with&nbsp;the&nbsp;given</span><br>
<span class="lineno"></span><span class="comment" id="5277062">//&nbsp;priority&nbsp;and&nbsp;prefix.</span><br>
<span class="lineno"></span><span class="keyword" id="5277086">func</span>&nbsp;<span class="ident" id="5277091">New</span><span class="op" id="5277094">(</span><span class="ident" id="5277095">priority</span>&nbsp;<span class="ident" id="5277104"><a href="/log/syslog/syslog.go.html#5275493">Priority</a></span><span class="op" id="5277112">,</span>&nbsp;<span class="ident" id="5277114">tag</span>&nbsp;<span class="builtintype" id="5277118">string</span><span class="op" id="5277124">)</span>&nbsp;<span class="op" id="5277126">(</span><span class="ident" id="5277127">w</span>&nbsp;<span class="op" id="5277129">*</span><span class="ident" id="5277130"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5277136">,</span>&nbsp;<span class="ident" id="5277138">err</span>&nbsp;<span class="builtintype" id="5277142">error</span><span class="op" id="5277147">)</span>&nbsp;<span class="op" id="5277149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277152">return</span>&nbsp;<span class="ident" id="5277159"><a href="/log/syslog/syslog.go.html#5277478">Dial</a></span><span class="op" id="5277163">(</span><span class="string" id="5277164">&#34;&#34;</span><span class="op" id="5277166">,</span>&nbsp;<span class="string" id="5277168">&#34;&#34;</span><span class="op" id="5277170">,</span>&nbsp;<span class="ident" id="5277172"><a href="/log/syslog/syslog.go.html#5277095">priority</a></span><span class="op" id="5277180">,</span>&nbsp;<span class="ident" id="5277182"><a href="/log/syslog/syslog.go.html#5277114">tag</a></span><span class="op" id="5277185">)</span><br>
<span class="lineno">115</span><span class="op" id="5277187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5277190">//&nbsp;Dial&nbsp;establishes&nbsp;a&nbsp;connection&nbsp;to&nbsp;a&nbsp;log&nbsp;daemon&nbsp;by&nbsp;connecting&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5277256">//&nbsp;address&nbsp;raddr&nbsp;on&nbsp;the&nbsp;specified&nbsp;network.&nbsp;&nbsp;Each&nbsp;write&nbsp;to&nbsp;the&nbsp;returned</span><br>
<span class="lineno"></span><span class="comment" id="5277327">//&nbsp;writer&nbsp;sends&nbsp;a&nbsp;log&nbsp;message&nbsp;with&nbsp;the&nbsp;given&nbsp;facility,&nbsp;severity&nbsp;and</span><br>
<span class="lineno">120</span><span class="comment" id="5277395">//&nbsp;tag.</span><br>
<span class="lineno"></span><span class="comment" id="5277403">//&nbsp;If&nbsp;network&nbsp;is&nbsp;empty,&nbsp;Dial&nbsp;will&nbsp;connect&nbsp;to&nbsp;the&nbsp;local&nbsp;syslog&nbsp;server.</span><br>
<span class="lineno"></span><span class="keyword" id="5277473">func</span>&nbsp;<span class="ident" id="5277478">Dial</span><span class="op" id="5277482">(</span><span class="ident" id="5277483">network</span><span class="op" id="5277490">,</span>&nbsp;<span class="ident" id="5277492">raddr</span>&nbsp;<span class="builtintype" id="5277498">string</span><span class="op" id="5277504">,</span>&nbsp;<span class="ident" id="5277506">priority</span>&nbsp;<span class="ident" id="5277515"><a href="/log/syslog/syslog.go.html#5275493">Priority</a></span><span class="op" id="5277523">,</span>&nbsp;<span class="ident" id="5277525">tag</span>&nbsp;<span class="builtintype" id="5277529">string</span><span class="op" id="5277535">)</span>&nbsp;<span class="op" id="5277537">(</span><span class="op" id="5277538">*</span><span class="ident" id="5277539"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5277545">,</span>&nbsp;<span class="builtintype" id="5277547">error</span><span class="op" id="5277552">)</span>&nbsp;<span class="op" id="5277554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277557">if</span>&nbsp;<span class="ident" id="5277560"><a href="/log/syslog/syslog.go.html#5277506">priority</a></span>&nbsp;<span class="op" id="5277569">&lt;</span>&nbsp;<span class="num" id="5277571">0</span>&nbsp;<span class="op" id="5277573">||</span>&nbsp;<span class="ident" id="5277576"><a href="/log/syslog/syslog.go.html#5277506">priority</a></span>&nbsp;<span class="op" id="5277585">&gt;</span>&nbsp;<span class="ident" id="5277587"><a href="/log/syslog/syslog.go.html#5276178">LOG_LOCAL7</a></span><span class="op" id="5277597">|</span><span class="ident" id="5277598"><a href="/log/syslog/syslog.go.html#5275760">LOG_DEBUG</a></span>&nbsp;<span class="op" id="5277608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277612">return</span>&nbsp;<span class="ident" id="5277619">nil</span><span class="op" id="5277622">,</span>&nbsp;<span class="ident" id="5277624"><a href="/log/syslog/syslog.go.html#5275186">errors</a></span><span class="op" id="5277630">.</span><span class="ident" id="5277631">New</span><span class="op" id="5277634">(</span><span class="string" id="5277635">&#34;log/syslog:&nbsp;invalid&nbsp;priority&#34;</span><span class="op" id="5277665">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5277668">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277672">if</span>&nbsp;<span class="ident" id="5277675"><a href="/log/syslog/syslog.go.html#5277525">tag</a></span>&nbsp;<span class="op" id="5277679">==</span>&nbsp;<span class="string" id="5277682">&#34;&#34;</span>&nbsp;<span class="op" id="5277685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277689"><a href="/log/syslog/syslog.go.html#5277525">tag</a></span>&nbsp;<span class="op" id="5277693">=</span>&nbsp;<span class="ident" id="5277695"><a href="/log/syslog/syslog.go.html#5275217">os</a></span><span class="op" id="5277697">.</span><span class="ident" id="5277698">Args</span><span class="op" id="5277702">[</span><span class="num" id="5277703">0</span><span class="op" id="5277704">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5277707">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277710">hostname</span><span class="op" id="5277718">,</span>&nbsp;<span class="ident" id="5277720">_</span>&nbsp;<span class="op" id="5277722">:=</span>&nbsp;<span class="ident" id="5277725"><a href="/log/syslog/syslog.go.html#5275217">os</a></span><span class="op" id="5277727">.</span><span class="ident" id="5277728">Hostname</span><span class="op" id="5277736">(</span><span class="op" id="5277737">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277741">w</span>&nbsp;<span class="op" id="5277743">:=</span>&nbsp;<span class="op" id="5277746">&amp;</span><span class="ident" id="5277747"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5277753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277757">priority</span><span class="op" id="5277765">:</span>&nbsp;<span class="ident" id="5277767"><a href="/log/syslog/syslog.go.html#5277506">priority</a></span><span class="op" id="5277775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277779">tag</span><span class="op" id="5277782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5277789"><a href="/log/syslog/syslog.go.html#5277525">tag</a></span><span class="op" id="5277792">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277796">hostname</span><span class="op" id="5277804">:</span>&nbsp;<span class="ident" id="5277806"><a href="/log/syslog/syslog.go.html#5277710">hostname</a></span><span class="op" id="5277814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277818">network</span><span class="op" id="5277825">:</span>&nbsp;&nbsp;<span class="ident" id="5277828"><a href="/log/syslog/syslog.go.html#5277483">network</a></span><span class="op" id="5277835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277839">raddr</span><span class="op" id="5277844">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5277849"><a href="/log/syslog/syslog.go.html#5277492">raddr</a></span><span class="op" id="5277854">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5277857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277861"><a href="/log/syslog/syslog.go.html#5277741">w</a></span><span class="op" id="5277862">.</span><span class="ident" id="5277863">mu</span><span class="op" id="5277865">.</span><span class="ident" id="5277866">Lock</span><span class="op" id="5277870">(</span><span class="op" id="5277871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277874">defer</span>&nbsp;<span class="ident" id="5277880"><a href="/log/syslog/syslog.go.html#5277741">w</a></span><span class="op" id="5277881">.</span><span class="ident" id="5277882">mu</span><span class="op" id="5277884">.</span><span class="ident" id="5277885">Unlock</span><span class="op" id="5277891">(</span><span class="op" id="5277892">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5277896">err</span>&nbsp;<span class="op" id="5277900">:=</span>&nbsp;<span class="ident" id="5277903"><a href="/log/syslog/syslog.go.html#5277741">w</a></span><span class="op" id="5277904">.</span><span class="ident" id="5277905">connect</span><span class="op" id="5277912">(</span><span class="op" id="5277913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277916">if</span>&nbsp;<span class="ident" id="5277919"><a href="/log/syslog/syslog.go.html#5277896">err</a></span>&nbsp;<span class="op" id="5277923">!=</span>&nbsp;<span class="ident" id="5277926">nil</span>&nbsp;<span class="op" id="5277930">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277934">return</span>&nbsp;<span class="ident" id="5277941">nil</span><span class="op" id="5277944">,</span>&nbsp;<span class="ident" id="5277946"><a href="/log/syslog/syslog.go.html#5277896">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5277951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5277954">return</span>&nbsp;<span class="ident" id="5277961"><a href="/log/syslog/syslog.go.html#5277741">w</a></span><span class="op" id="5277962">,</span>&nbsp;<span class="ident" id="5277964"><a href="/log/syslog/syslog.go.html#5277896">err</a></span><br>
<span class="lineno"></span><span class="op" id="5277968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="5277971">//&nbsp;connect&nbsp;makes&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;server.</span><br>
<span class="lineno"></span><span class="comment" id="5278023">//&nbsp;It&nbsp;must&nbsp;be&nbsp;called&nbsp;with&nbsp;w.mu&nbsp;held.</span><br>
<span class="lineno"></span><span class="keyword" id="5278060">func</span>&nbsp;<span class="op" id="5278065">(</span><span class="ident" id="5278066">w</span>&nbsp;<span class="op" id="5278068">*</span><span class="ident" id="5278069"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5278075">)</span>&nbsp;<span class="ident" id="5278077">connect</span><span class="op" id="5278084">(</span><span class="op" id="5278085">)</span>&nbsp;<span class="op" id="5278087">(</span><span class="ident" id="5278088">err</span>&nbsp;<span class="builtintype" id="5278092">error</span><span class="op" id="5278097">)</span>&nbsp;<span class="op" id="5278099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278102">if</span>&nbsp;<span class="ident" id="5278105"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278106">.</span><span class="ident" id="5278107">conn</span>&nbsp;<span class="op" id="5278112">!=</span>&nbsp;<span class="ident" id="5278115">nil</span>&nbsp;<span class="op" id="5278119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5278123">//&nbsp;ignore&nbsp;err&nbsp;from&nbsp;close,&nbsp;it&nbsp;makes&nbsp;sense&nbsp;to&nbsp;continue&nbsp;anyway</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278185"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278186">.</span><span class="ident" id="5278187">conn</span><span class="op" id="5278191">.</span><span class="builtinfunc" id="5278192">close</span><span class="op" id="5278197">(</span><span class="op" id="5278198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278202"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278203">.</span><span class="ident" id="5278204">conn</span>&nbsp;<span class="op" id="5278209">=</span>&nbsp;<span class="ident" id="5278211">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278216">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278220">if</span>&nbsp;<span class="ident" id="5278223"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278224">.</span><span class="ident" id="5278225">network</span>&nbsp;<span class="op" id="5278233">==</span>&nbsp;<span class="string" id="5278236">&#34;&#34;</span>&nbsp;<span class="op" id="5278239">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278243"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278244">.</span><span class="ident" id="5278245">conn</span><span class="op" id="5278249">,</span>&nbsp;<span class="ident" id="5278251"><a href="/log/syslog/syslog.go.html#5278088">err</a></span>&nbsp;<span class="op" id="5278255">=</span>&nbsp;<span class="ident" id="5278257"><a href="/log/syslog/syslog_unix.go.html#5282648">unixSyslog</a></span><span class="op" id="5278267">(</span><span class="op" id="5278268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278272">if</span>&nbsp;<span class="ident" id="5278275"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278276">.</span><span class="ident" id="5278277">hostname</span>&nbsp;<span class="op" id="5278286">==</span>&nbsp;<span class="string" id="5278289">&#34;&#34;</span>&nbsp;<span class="op" id="5278292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278297"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278298">.</span><span class="ident" id="5278299">hostname</span>&nbsp;<span class="op" id="5278308">=</span>&nbsp;<span class="string" id="5278310">&#34;localhost&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278327">}</span>&nbsp;<span class="keyword" id="5278329">else</span>&nbsp;<span class="op" id="5278334">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278338">var</span>&nbsp;<span class="ident" id="5278342">c</span>&nbsp;<span class="ident" id="5278344"><a href="/log/syslog/syslog.go.html#5275210">net</a></span><span class="op" id="5278347">.</span><span class="ident" id="5278348">Conn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278355"><a href="/log/syslog/syslog.go.html#5278342">c</a></span><span class="op" id="5278356">,</span>&nbsp;<span class="ident" id="5278358"><a href="/log/syslog/syslog.go.html#5278088">err</a></span>&nbsp;<span class="op" id="5278362">=</span>&nbsp;<span class="ident" id="5278364"><a href="/log/syslog/syslog.go.html#5275210">net</a></span><span class="op" id="5278367">.</span><span class="ident" id="5278368">Dial</span><span class="op" id="5278372">(</span><span class="ident" id="5278373"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278374">.</span><span class="ident" id="5278375">network</span><span class="op" id="5278382">,</span>&nbsp;<span class="ident" id="5278384"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278385">.</span><span class="ident" id="5278386">raddr</span><span class="op" id="5278391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278395">if</span>&nbsp;<span class="ident" id="5278398"><a href="/log/syslog/syslog.go.html#5278088">err</a></span>&nbsp;<span class="op" id="5278402">==</span>&nbsp;<span class="ident" id="5278405">nil</span>&nbsp;<span class="op" id="5278409">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278414"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278415">.</span><span class="ident" id="5278416">conn</span>&nbsp;<span class="op" id="5278421">=</span>&nbsp;<span class="op" id="5278423">&amp;</span><span class="ident" id="5278424"><a href="/log/syslog/syslog.go.html#5276879">netConn</a></span><span class="op" id="5278431">{</span><span class="ident" id="5278432">conn</span><span class="op" id="5278436">:</span>&nbsp;<span class="ident" id="5278438"><a href="/log/syslog/syslog.go.html#5278342">c</a></span><span class="op" id="5278439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278444">if</span>&nbsp;<span class="ident" id="5278447"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278448">.</span><span class="ident" id="5278449">hostname</span>&nbsp;<span class="op" id="5278458">==</span>&nbsp;<span class="string" id="5278461">&#34;&#34;</span>&nbsp;<span class="op" id="5278464">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278470"><a href="/log/syslog/syslog.go.html#5278066">w</a></span><span class="op" id="5278471">.</span><span class="ident" id="5278472">hostname</span>&nbsp;<span class="op" id="5278481">=</span>&nbsp;<span class="ident" id="5278483"><a href="/log/syslog/syslog.go.html#5278342">c</a></span><span class="op" id="5278484">.</span><span class="ident" id="5278485">LocalAddr</span><span class="op" id="5278494">(</span><span class="op" id="5278495">)</span><span class="op" id="5278496">.</span><span class="ident" id="5278497">String</span><span class="op" id="5278503">(</span><span class="op" id="5278504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278519">return</span><br>
<span class="lineno">175</span><span class="op" id="5278526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5278529">//&nbsp;Write&nbsp;sends&nbsp;a&nbsp;log&nbsp;message&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon.</span><br>
<span class="lineno"></span><span class="keyword" id="5278580">func</span>&nbsp;<span class="op" id="5278585">(</span><span class="ident" id="5278586">w</span>&nbsp;<span class="op" id="5278588">*</span><span class="ident" id="5278589"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5278595">)</span>&nbsp;<span class="ident" id="5278597">Write</span><span class="op" id="5278602">(</span><span class="ident" id="5278603">b</span>&nbsp;<span class="op" id="5278605">[</span><span class="op" id="5278606">]</span><span class="builtintype" id="5278607">byte</span><span class="op" id="5278611">)</span>&nbsp;<span class="op" id="5278613">(</span><span class="builtintype" id="5278614">int</span><span class="op" id="5278617">,</span>&nbsp;<span class="builtintype" id="5278619">error</span><span class="op" id="5278624">)</span>&nbsp;<span class="op" id="5278626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278629">return</span>&nbsp;<span class="ident" id="5278636"><a href="/log/syslog/syslog.go.html#5278586">w</a></span><span class="op" id="5278637">.</span><span class="ident" id="5278638">writeAndRetry</span><span class="op" id="5278651">(</span><span class="ident" id="5278652"><a href="/log/syslog/syslog.go.html#5278586">w</a></span><span class="op" id="5278653">.</span><span class="ident" id="5278654">priority</span><span class="op" id="5278662">,</span>&nbsp;<span class="builtintype" id="5278664">string</span><span class="op" id="5278670">(</span><span class="ident" id="5278671"><a href="/log/syslog/syslog.go.html#5278603">b</a></span><span class="op" id="5278672">)</span><span class="op" id="5278673">)</span><br>
<span class="lineno">180</span><span class="op" id="5278675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5278678">//&nbsp;Close&nbsp;closes&nbsp;a&nbsp;connection&nbsp;to&nbsp;the&nbsp;syslog&nbsp;daemon.</span><br>
<span class="lineno"></span><span class="keyword" id="5278729">func</span>&nbsp;<span class="op" id="5278734">(</span><span class="ident" id="5278735">w</span>&nbsp;<span class="op" id="5278737">*</span><span class="ident" id="5278738"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5278744">)</span>&nbsp;<span class="ident" id="5278746">Close</span><span class="op" id="5278751">(</span><span class="op" id="5278752">)</span>&nbsp;<span class="builtintype" id="5278754">error</span>&nbsp;<span class="op" id="5278760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278763"><a href="/log/syslog/syslog.go.html#5278735">w</a></span><span class="op" id="5278764">.</span><span class="ident" id="5278765">mu</span><span class="op" id="5278767">.</span><span class="ident" id="5278768">Lock</span><span class="op" id="5278772">(</span><span class="op" id="5278773">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278776">defer</span>&nbsp;<span class="ident" id="5278782"><a href="/log/syslog/syslog.go.html#5278735">w</a></span><span class="op" id="5278783">.</span><span class="ident" id="5278784">mu</span><span class="op" id="5278786">.</span><span class="ident" id="5278787">Unlock</span><span class="op" id="5278793">(</span><span class="op" id="5278794">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278798">if</span>&nbsp;<span class="ident" id="5278801"><a href="/log/syslog/syslog.go.html#5278735">w</a></span><span class="op" id="5278802">.</span><span class="ident" id="5278803">conn</span>&nbsp;<span class="op" id="5278808">!=</span>&nbsp;<span class="ident" id="5278811">nil</span>&nbsp;<span class="op" id="5278815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278819">err</span>&nbsp;<span class="op" id="5278823">:=</span>&nbsp;<span class="ident" id="5278826"><a href="/log/syslog/syslog.go.html#5278735">w</a></span><span class="op" id="5278827">.</span><span class="ident" id="5278828">conn</span><span class="op" id="5278832">.</span><span class="builtinfunc" id="5278833">close</span><span class="op" id="5278838">(</span><span class="op" id="5278839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5278843"><a href="/log/syslog/syslog.go.html#5278735">w</a></span><span class="op" id="5278844">.</span><span class="ident" id="5278845">conn</span>&nbsp;<span class="op" id="5278850">=</span>&nbsp;<span class="ident" id="5278852">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278858">return</span>&nbsp;<span class="ident" id="5278865"><a href="/log/syslog/syslog.go.html#5278819">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5278870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5278873">return</span>&nbsp;<span class="ident" id="5278880">nil</span><br>
<span class="lineno"></span><span class="op" id="5278884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="5278887">//&nbsp;Emerg&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_EMERG,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno"></span><span class="comment" id="5278958">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="5278976">func</span>&nbsp;<span class="op" id="5278981">(</span><span class="ident" id="5278982">w</span>&nbsp;<span class="op" id="5278984">*</span><span class="ident" id="5278985"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5278991">)</span>&nbsp;<span class="ident" id="5278993">Emerg</span><span class="op" id="5278998">(</span><span class="ident" id="5278999">m</span>&nbsp;<span class="builtintype" id="5279001">string</span><span class="op" id="5279007">)</span>&nbsp;<span class="op" id="5279009">(</span><span class="ident" id="5279010">err</span>&nbsp;<span class="builtintype" id="5279014">error</span><span class="op" id="5279019">)</span>&nbsp;<span class="op" id="5279021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279024">_</span><span class="op" id="5279025">,</span>&nbsp;<span class="ident" id="5279027"><a href="/log/syslog/syslog.go.html#5279010">err</a></span>&nbsp;<span class="op" id="5279031">=</span>&nbsp;<span class="ident" id="5279033"><a href="/log/syslog/syslog.go.html#5278982">w</a></span><span class="op" id="5279034">.</span><span class="ident" id="5279035">writeAndRetry</span><span class="op" id="5279048">(</span><span class="ident" id="5279049"><a href="/log/syslog/syslog.go.html#5275668">LOG_EMERG</a></span><span class="op" id="5279058">,</span>&nbsp;<span class="ident" id="5279060"><a href="/log/syslog/syslog.go.html#5278999">m</a></span><span class="op" id="5279061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279064">return</span>&nbsp;<span class="ident" id="5279071"><a href="/log/syslog/syslog.go.html#5279010">err</a></span><br>
<span class="lineno">200</span><span class="op" id="5279075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5279078">//&nbsp;Alert&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_ALERT,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno"></span><span class="comment" id="5279149">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="5279167">func</span>&nbsp;<span class="op" id="5279172">(</span><span class="ident" id="5279173">w</span>&nbsp;<span class="op" id="5279175">*</span><span class="ident" id="5279176"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5279182">)</span>&nbsp;<span class="ident" id="5279184">Alert</span><span class="op" id="5279189">(</span><span class="ident" id="5279190">m</span>&nbsp;<span class="builtintype" id="5279192">string</span><span class="op" id="5279198">)</span>&nbsp;<span class="op" id="5279200">(</span><span class="ident" id="5279201">err</span>&nbsp;<span class="builtintype" id="5279205">error</span><span class="op" id="5279210">)</span>&nbsp;<span class="op" id="5279212">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279215">_</span><span class="op" id="5279216">,</span>&nbsp;<span class="ident" id="5279218"><a href="/log/syslog/syslog.go.html#5279201">err</a></span>&nbsp;<span class="op" id="5279222">=</span>&nbsp;<span class="ident" id="5279224"><a href="/log/syslog/syslog.go.html#5279173">w</a></span><span class="op" id="5279225">.</span><span class="ident" id="5279226">writeAndRetry</span><span class="op" id="5279239">(</span><span class="ident" id="5279240"><a href="/log/syslog/syslog.go.html#5275695">LOG_ALERT</a></span><span class="op" id="5279249">,</span>&nbsp;<span class="ident" id="5279251"><a href="/log/syslog/syslog.go.html#5279190">m</a></span><span class="op" id="5279252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279255">return</span>&nbsp;<span class="ident" id="5279262"><a href="/log/syslog/syslog.go.html#5279201">err</a></span><br>
<span class="lineno"></span><span class="op" id="5279266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5279269">//&nbsp;Crit&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_CRIT,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno">210</span><span class="comment" id="5279338">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="5279356">func</span>&nbsp;<span class="op" id="5279361">(</span><span class="ident" id="5279362">w</span>&nbsp;<span class="op" id="5279364">*</span><span class="ident" id="5279365"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5279371">)</span>&nbsp;<span class="ident" id="5279373">Crit</span><span class="op" id="5279377">(</span><span class="ident" id="5279378">m</span>&nbsp;<span class="builtintype" id="5279380">string</span><span class="op" id="5279386">)</span>&nbsp;<span class="op" id="5279388">(</span><span class="ident" id="5279389">err</span>&nbsp;<span class="builtintype" id="5279393">error</span><span class="op" id="5279398">)</span>&nbsp;<span class="op" id="5279400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279403">_</span><span class="op" id="5279404">,</span>&nbsp;<span class="ident" id="5279406"><a href="/log/syslog/syslog.go.html#5279389">err</a></span>&nbsp;<span class="op" id="5279410">=</span>&nbsp;<span class="ident" id="5279412"><a href="/log/syslog/syslog.go.html#5279362">w</a></span><span class="op" id="5279413">.</span><span class="ident" id="5279414">writeAndRetry</span><span class="op" id="5279427">(</span><span class="ident" id="5279428"><a href="/log/syslog/syslog.go.html#5275706">LOG_CRIT</a></span><span class="op" id="5279436">,</span>&nbsp;<span class="ident" id="5279438"><a href="/log/syslog/syslog.go.html#5279378">m</a></span><span class="op" id="5279439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279442">return</span>&nbsp;<span class="ident" id="5279449"><a href="/log/syslog/syslog.go.html#5279389">err</a></span><br>
<span class="lineno"></span><span class="op" id="5279453">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="comment" id="5279456">//&nbsp;Err&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_ERR,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno"></span><span class="comment" id="5279523">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="5279541">func</span>&nbsp;<span class="op" id="5279546">(</span><span class="ident" id="5279547">w</span>&nbsp;<span class="op" id="5279549">*</span><span class="ident" id="5279550"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5279556">)</span>&nbsp;<span class="ident" id="5279558">Err</span><span class="op" id="5279561">(</span><span class="ident" id="5279562">m</span>&nbsp;<span class="builtintype" id="5279564">string</span><span class="op" id="5279570">)</span>&nbsp;<span class="op" id="5279572">(</span><span class="ident" id="5279573">err</span>&nbsp;<span class="builtintype" id="5279577">error</span><span class="op" id="5279582">)</span>&nbsp;<span class="op" id="5279584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279587">_</span><span class="op" id="5279588">,</span>&nbsp;<span class="ident" id="5279590"><a href="/log/syslog/syslog.go.html#5279573">err</a></span>&nbsp;<span class="op" id="5279594">=</span>&nbsp;<span class="ident" id="5279596"><a href="/log/syslog/syslog.go.html#5279547">w</a></span><span class="op" id="5279597">.</span><span class="ident" id="5279598">writeAndRetry</span><span class="op" id="5279611">(</span><span class="ident" id="5279612"><a href="/log/syslog/syslog.go.html#5275716">LOG_ERR</a></span><span class="op" id="5279619">,</span>&nbsp;<span class="ident" id="5279621"><a href="/log/syslog/syslog.go.html#5279562">m</a></span><span class="op" id="5279622">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279625">return</span>&nbsp;<span class="ident" id="5279632"><a href="/log/syslog/syslog.go.html#5279573">err</a></span><br>
<span class="lineno"></span><span class="op" id="5279636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5279639">//&nbsp;Warning&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_WARNING,&nbsp;ignoring&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5279705">//&nbsp;severity&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno">225</span><span class="keyword" id="5279732">func</span>&nbsp;<span class="op" id="5279737">(</span><span class="ident" id="5279738">w</span>&nbsp;<span class="op" id="5279740">*</span><span class="ident" id="5279741"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5279747">)</span>&nbsp;<span class="ident" id="5279749">Warning</span><span class="op" id="5279756">(</span><span class="ident" id="5279757">m</span>&nbsp;<span class="builtintype" id="5279759">string</span><span class="op" id="5279765">)</span>&nbsp;<span class="op" id="5279767">(</span><span class="ident" id="5279768">err</span>&nbsp;<span class="builtintype" id="5279772">error</span><span class="op" id="5279777">)</span>&nbsp;<span class="op" id="5279779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279782">_</span><span class="op" id="5279783">,</span>&nbsp;<span class="ident" id="5279785"><a href="/log/syslog/syslog.go.html#5279768">err</a></span>&nbsp;<span class="op" id="5279789">=</span>&nbsp;<span class="ident" id="5279791"><a href="/log/syslog/syslog.go.html#5279738">w</a></span><span class="op" id="5279792">.</span><span class="ident" id="5279793">writeAndRetry</span><span class="op" id="5279806">(</span><span class="ident" id="5279807"><a href="/log/syslog/syslog.go.html#5275725">LOG_WARNING</a></span><span class="op" id="5279818">,</span>&nbsp;<span class="ident" id="5279820"><a href="/log/syslog/syslog.go.html#5279757">m</a></span><span class="op" id="5279821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5279824">return</span>&nbsp;<span class="ident" id="5279831"><a href="/log/syslog/syslog.go.html#5279768">err</a></span><br>
<span class="lineno"></span><span class="op" id="5279835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="5279838">//&nbsp;Notice&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_NOTICE,&nbsp;ignoring&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5279902">//&nbsp;severity&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="5279929">func</span>&nbsp;<span class="op" id="5279934">(</span><span class="ident" id="5279935">w</span>&nbsp;<span class="op" id="5279937">*</span><span class="ident" id="5279938"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5279944">)</span>&nbsp;<span class="ident" id="5279946">Notice</span><span class="op" id="5279952">(</span><span class="ident" id="5279953">m</span>&nbsp;<span class="builtintype" id="5279955">string</span><span class="op" id="5279961">)</span>&nbsp;<span class="op" id="5279963">(</span><span class="ident" id="5279964">err</span>&nbsp;<span class="builtintype" id="5279968">error</span><span class="op" id="5279973">)</span>&nbsp;<span class="op" id="5279975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5279978">_</span><span class="op" id="5279979">,</span>&nbsp;<span class="ident" id="5279981"><a href="/log/syslog/syslog.go.html#5279964">err</a></span>&nbsp;<span class="op" id="5279985">=</span>&nbsp;<span class="ident" id="5279987"><a href="/log/syslog/syslog.go.html#5279935">w</a></span><span class="op" id="5279988">.</span><span class="ident" id="5279989">writeAndRetry</span><span class="op" id="5280002">(</span><span class="ident" id="5280003"><a href="/log/syslog/syslog.go.html#5275738">LOG_NOTICE</a></span><span class="op" id="5280013">,</span>&nbsp;<span class="ident" id="5280015"><a href="/log/syslog/syslog.go.html#5279953">m</a></span><span class="op" id="5280016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280019">return</span>&nbsp;<span class="ident" id="5280026"><a href="/log/syslog/syslog.go.html#5279964">err</a></span><br>
<span class="lineno">235</span><span class="op" id="5280030">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5280033">//&nbsp;Info&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_INFO,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno"></span><span class="comment" id="5280102">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="5280120">func</span>&nbsp;<span class="op" id="5280125">(</span><span class="ident" id="5280126">w</span>&nbsp;<span class="op" id="5280128">*</span><span class="ident" id="5280129"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5280135">)</span>&nbsp;<span class="ident" id="5280137">Info</span><span class="op" id="5280141">(</span><span class="ident" id="5280142">m</span>&nbsp;<span class="builtintype" id="5280144">string</span><span class="op" id="5280150">)</span>&nbsp;<span class="op" id="5280152">(</span><span class="ident" id="5280153">err</span>&nbsp;<span class="builtintype" id="5280157">error</span><span class="op" id="5280162">)</span>&nbsp;<span class="op" id="5280164">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280167">_</span><span class="op" id="5280168">,</span>&nbsp;<span class="ident" id="5280170"><a href="/log/syslog/syslog.go.html#5280153">err</a></span>&nbsp;<span class="op" id="5280174">=</span>&nbsp;<span class="ident" id="5280176"><a href="/log/syslog/syslog.go.html#5280126">w</a></span><span class="op" id="5280177">.</span><span class="ident" id="5280178">writeAndRetry</span><span class="op" id="5280191">(</span><span class="ident" id="5280192"><a href="/log/syslog/syslog.go.html#5275750">LOG_INFO</a></span><span class="op" id="5280200">,</span>&nbsp;<span class="ident" id="5280202"><a href="/log/syslog/syslog.go.html#5280142">m</a></span><span class="op" id="5280203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280206">return</span>&nbsp;<span class="ident" id="5280213"><a href="/log/syslog/syslog.go.html#5280153">err</a></span><br>
<span class="lineno"></span><span class="op" id="5280217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5280220">//&nbsp;Debug&nbsp;logs&nbsp;a&nbsp;message&nbsp;with&nbsp;severity&nbsp;LOG_DEBUG,&nbsp;ignoring&nbsp;the&nbsp;severity</span><br>
<span class="lineno">245</span><span class="comment" id="5280291">//&nbsp;passed&nbsp;to&nbsp;New.</span><br>
<span class="lineno"></span><span class="keyword" id="5280309">func</span>&nbsp;<span class="op" id="5280314">(</span><span class="ident" id="5280315">w</span>&nbsp;<span class="op" id="5280317">*</span><span class="ident" id="5280318"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5280324">)</span>&nbsp;<span class="ident" id="5280326">Debug</span><span class="op" id="5280331">(</span><span class="ident" id="5280332">m</span>&nbsp;<span class="builtintype" id="5280334">string</span><span class="op" id="5280340">)</span>&nbsp;<span class="op" id="5280342">(</span><span class="ident" id="5280343">err</span>&nbsp;<span class="builtintype" id="5280347">error</span><span class="op" id="5280352">)</span>&nbsp;<span class="op" id="5280354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280357">_</span><span class="op" id="5280358">,</span>&nbsp;<span class="ident" id="5280360"><a href="/log/syslog/syslog.go.html#5280343">err</a></span>&nbsp;<span class="op" id="5280364">=</span>&nbsp;<span class="ident" id="5280366"><a href="/log/syslog/syslog.go.html#5280315">w</a></span><span class="op" id="5280367">.</span><span class="ident" id="5280368">writeAndRetry</span><span class="op" id="5280381">(</span><span class="ident" id="5280382"><a href="/log/syslog/syslog.go.html#5275760">LOG_DEBUG</a></span><span class="op" id="5280391">,</span>&nbsp;<span class="ident" id="5280393"><a href="/log/syslog/syslog.go.html#5280332">m</a></span><span class="op" id="5280394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280397">return</span>&nbsp;<span class="ident" id="5280404"><a href="/log/syslog/syslog.go.html#5280343">err</a></span><br>
<span class="lineno"></span><span class="op" id="5280408">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="keyword" id="5280411">func</span>&nbsp;<span class="op" id="5280416">(</span><span class="ident" id="5280417">w</span>&nbsp;<span class="op" id="5280419">*</span><span class="ident" id="5280420"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5280426">)</span>&nbsp;<span class="ident" id="5280428">writeAndRetry</span><span class="op" id="5280441">(</span><span class="ident" id="5280442">p</span>&nbsp;<span class="ident" id="5280444"><a href="/log/syslog/syslog.go.html#5275493">Priority</a></span><span class="op" id="5280452">,</span>&nbsp;<span class="ident" id="5280454">s</span>&nbsp;<span class="builtintype" id="5280456">string</span><span class="op" id="5280462">)</span>&nbsp;<span class="op" id="5280464">(</span><span class="builtintype" id="5280465">int</span><span class="op" id="5280468">,</span>&nbsp;<span class="builtintype" id="5280470">error</span><span class="op" id="5280475">)</span>&nbsp;<span class="op" id="5280477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280480">pr</span>&nbsp;<span class="op" id="5280483">:=</span>&nbsp;<span class="op" id="5280486">(</span><span class="ident" id="5280487"><a href="/log/syslog/syslog.go.html#5280417">w</a></span><span class="op" id="5280488">.</span><span class="ident" id="5280489">priority</span>&nbsp;<span class="op" id="5280498">&amp;</span>&nbsp;<span class="ident" id="5280500"><a href="/log/syslog/syslog.go.html#5275539">facilityMask</a></span><span class="op" id="5280512">)</span>&nbsp;<span class="op" id="5280514">|</span>&nbsp;<span class="op" id="5280516">(</span><span class="ident" id="5280517"><a href="/log/syslog/syslog.go.html#5280442">p</a></span>&nbsp;<span class="op" id="5280519">&amp;</span>&nbsp;<span class="ident" id="5280521"><a href="/log/syslog/syslog.go.html#5275513">severityMask</a></span><span class="op" id="5280533">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280537"><a href="/log/syslog/syslog.go.html#5280417">w</a></span><span class="op" id="5280538">.</span><span class="ident" id="5280539">mu</span><span class="op" id="5280541">.</span><span class="ident" id="5280542">Lock</span><span class="op" id="5280546">(</span><span class="op" id="5280547">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280550">defer</span>&nbsp;<span class="ident" id="5280556"><a href="/log/syslog/syslog.go.html#5280417">w</a></span><span class="op" id="5280557">.</span><span class="ident" id="5280558">mu</span><span class="op" id="5280560">.</span><span class="ident" id="5280561">Unlock</span><span class="op" id="5280567">(</span><span class="op" id="5280568">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280572">if</span>&nbsp;<span class="ident" id="5280575"><a href="/log/syslog/syslog.go.html#5280417">w</a></span><span class="op" id="5280576">.</span><span class="ident" id="5280577">conn</span>&nbsp;<span class="op" id="5280582">!=</span>&nbsp;<span class="ident" id="5280585">nil</span>&nbsp;<span class="op" id="5280589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280593">if</span>&nbsp;<span class="ident" id="5280596">n</span><span class="op" id="5280597">,</span>&nbsp;<span class="ident" id="5280599">err</span>&nbsp;<span class="op" id="5280603">:=</span>&nbsp;<span class="ident" id="5280606"><a href="/log/syslog/syslog.go.html#5280417">w</a></span><span class="op" id="5280607">.</span><span class="ident" id="5280608">write</span><span class="op" id="5280613">(</span><span class="ident" id="5280614"><a href="/log/syslog/syslog.go.html#5280480">pr</a></span><span class="op" id="5280616">,</span>&nbsp;<span class="ident" id="5280618"><a href="/log/syslog/syslog.go.html#5280454">s</a></span><span class="op" id="5280619">)</span><span class="op" id="5280620">;</span>&nbsp;<span class="ident" id="5280622"><a href="/log/syslog/syslog.go.html#5280599">err</a></span>&nbsp;<span class="op" id="5280626">==</span>&nbsp;<span class="ident" id="5280629">nil</span>&nbsp;<span class="op" id="5280633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280638">return</span>&nbsp;<span class="ident" id="5280645"><a href="/log/syslog/syslog.go.html#5280596">n</a></span><span class="op" id="5280646">,</span>&nbsp;<span class="ident" id="5280648"><a href="/log/syslog/syslog.go.html#5280599">err</a></span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5280654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5280657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280660">if</span>&nbsp;<span class="ident" id="5280663">err</span>&nbsp;<span class="op" id="5280667">:=</span>&nbsp;<span class="ident" id="5280670"><a href="/log/syslog/syslog.go.html#5280417">w</a></span><span class="op" id="5280671">.</span><span class="ident" id="5280672">connect</span><span class="op" id="5280679">(</span><span class="op" id="5280680">)</span><span class="op" id="5280681">;</span>&nbsp;<span class="ident" id="5280683"><a href="/log/syslog/syslog.go.html#5280663">err</a></span>&nbsp;<span class="op" id="5280687">!=</span>&nbsp;<span class="ident" id="5280690">nil</span>&nbsp;<span class="op" id="5280694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280698">return</span>&nbsp;<span class="num" id="5280705">0</span><span class="op" id="5280706">,</span>&nbsp;<span class="ident" id="5280708"><a href="/log/syslog/syslog.go.html#5280663">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5280713">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280716">return</span>&nbsp;<span class="ident" id="5280723"><a href="/log/syslog/syslog.go.html#5280417">w</a></span><span class="op" id="5280724">.</span><span class="ident" id="5280725">write</span><span class="op" id="5280730">(</span><span class="ident" id="5280731"><a href="/log/syslog/syslog.go.html#5280480">pr</a></span><span class="op" id="5280733">,</span>&nbsp;<span class="ident" id="5280735"><a href="/log/syslog/syslog.go.html#5280454">s</a></span><span class="op" id="5280736">)</span><br>
<span class="lineno"></span><span class="op" id="5280738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5280741">//&nbsp;write&nbsp;generates&nbsp;and&nbsp;writes&nbsp;a&nbsp;syslog&nbsp;formatted&nbsp;string.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="5280802">//&nbsp;format&nbsp;is&nbsp;as&nbsp;follows:&nbsp;&lt;PRI&gt;TIMESTAMP&nbsp;HOSTNAME&nbsp;TAG[PID]:&nbsp;MSG</span><br>
<span class="lineno">270</span><span class="keyword" id="5280865">func</span>&nbsp;<span class="op" id="5280870">(</span><span class="ident" id="5280871">w</span>&nbsp;<span class="op" id="5280873">*</span><span class="ident" id="5280874"><a href="/log/syslog/syslog.go.html#5276245">Writer</a></span><span class="op" id="5280880">)</span>&nbsp;<span class="ident" id="5280882">write</span><span class="op" id="5280887">(</span><span class="ident" id="5280888">p</span>&nbsp;<span class="ident" id="5280890"><a href="/log/syslog/syslog.go.html#5275493">Priority</a></span><span class="op" id="5280898">,</span>&nbsp;<span class="ident" id="5280900">msg</span>&nbsp;<span class="builtintype" id="5280904">string</span><span class="op" id="5280910">)</span>&nbsp;<span class="op" id="5280912">(</span><span class="builtintype" id="5280913">int</span><span class="op" id="5280916">,</span>&nbsp;<span class="builtintype" id="5280918">error</span><span class="op" id="5280923">)</span>&nbsp;<span class="op" id="5280925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5280928">//&nbsp;ensure&nbsp;it&nbsp;ends&nbsp;in&nbsp;a&nbsp;\n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5280955">nl</span>&nbsp;<span class="op" id="5280958">:=</span>&nbsp;<span class="string" id="5280961">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5280965">if</span>&nbsp;<span class="op" id="5280968">!</span><span class="ident" id="5280969"><a href="/log/syslog/syslog.go.html#5275223">strings</a></span><span class="op" id="5280976">.</span><span class="ident" id="5280977">HasSuffix</span><span class="op" id="5280986">(</span><span class="ident" id="5280987"><a href="/log/syslog/syslog.go.html#5280900">msg</a></span><span class="op" id="5280990">,</span>&nbsp;<span class="string" id="5280992">&#34;\n&#34;</span><span class="op" id="5280996">)</span>&nbsp;<span class="op" id="5280998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281002"><a href="/log/syslog/syslog.go.html#5280955">nl</a></span>&nbsp;<span class="op" id="5281005">=</span>&nbsp;<span class="string" id="5281007">&#34;\n&#34;</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5281013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281017">err</span>&nbsp;<span class="op" id="5281021">:=</span>&nbsp;<span class="ident" id="5281024"><a href="/log/syslog/syslog.go.html#5280871">w</a></span><span class="op" id="5281025">.</span><span class="ident" id="5281026">conn</span><span class="op" id="5281030">.</span><span class="ident" id="5281031">writeString</span><span class="op" id="5281042">(</span><span class="ident" id="5281043"><a href="/log/syslog/syslog.go.html#5280888">p</a></span><span class="op" id="5281044">,</span>&nbsp;<span class="ident" id="5281046"><a href="/log/syslog/syslog.go.html#5280871">w</a></span><span class="op" id="5281047">.</span><span class="ident" id="5281048">hostname</span><span class="op" id="5281056">,</span>&nbsp;<span class="ident" id="5281058"><a href="/log/syslog/syslog.go.html#5280871">w</a></span><span class="op" id="5281059">.</span><span class="ident" id="5281060">tag</span><span class="op" id="5281063">,</span>&nbsp;<span class="ident" id="5281065"><a href="/log/syslog/syslog.go.html#5280900">msg</a></span><span class="op" id="5281068">,</span>&nbsp;<span class="ident" id="5281070"><a href="/log/syslog/syslog.go.html#5280955">nl</a></span><span class="op" id="5281072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281075">if</span>&nbsp;<span class="ident" id="5281078"><a href="/log/syslog/syslog.go.html#5281017">err</a></span>&nbsp;<span class="op" id="5281082">!=</span>&nbsp;<span class="ident" id="5281085">nil</span>&nbsp;<span class="op" id="5281089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281093">return</span>&nbsp;<span class="num" id="5281100">0</span><span class="op" id="5281101">,</span>&nbsp;<span class="ident" id="5281103"><a href="/log/syslog/syslog.go.html#5281017">err</a></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5281108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281111">//&nbsp;Note:&nbsp;return&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;input,&nbsp;not&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281171">//&nbsp;bytes&nbsp;printed&nbsp;by&nbsp;Fprintf,&nbsp;because&nbsp;this&nbsp;must&nbsp;behave&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281231">//&nbsp;an&nbsp;io.Writer.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281249">return</span>&nbsp;<span class="builtinfunc" id="5281256">len</span><span class="op" id="5281259">(</span><span class="ident" id="5281260"><a href="/log/syslog/syslog.go.html#5280900">msg</a></span><span class="op" id="5281263">)</span><span class="op" id="5281264">,</span>&nbsp;<span class="ident" id="5281266">nil</span><br>
<span class="lineno">285</span><span class="op" id="5281270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5281273">func</span>&nbsp;<span class="op" id="5281278">(</span><span class="ident" id="5281279">n</span>&nbsp;<span class="op" id="5281281">*</span><span class="ident" id="5281282"><a href="/log/syslog/syslog.go.html#5276879">netConn</a></span><span class="op" id="5281289">)</span>&nbsp;<span class="ident" id="5281291">writeString</span><span class="op" id="5281302">(</span><span class="ident" id="5281303">p</span>&nbsp;<span class="ident" id="5281305"><a href="/log/syslog/syslog.go.html#5275493">Priority</a></span><span class="op" id="5281313">,</span>&nbsp;<span class="ident" id="5281315">hostname</span><span class="op" id="5281323">,</span>&nbsp;<span class="ident" id="5281325">tag</span><span class="op" id="5281328">,</span>&nbsp;<span class="ident" id="5281330">msg</span><span class="op" id="5281333">,</span>&nbsp;<span class="ident" id="5281335">nl</span>&nbsp;<span class="builtintype" id="5281338">string</span><span class="op" id="5281344">)</span>&nbsp;<span class="builtintype" id="5281346">error</span>&nbsp;<span class="op" id="5281352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281355">if</span>&nbsp;<span class="ident" id="5281358"><a href="/log/syslog/syslog.go.html#5281279">n</a></span><span class="op" id="5281359">.</span><span class="ident" id="5281360">local</span>&nbsp;<span class="op" id="5281366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281370">//&nbsp;Compared&nbsp;to&nbsp;the&nbsp;network&nbsp;form&nbsp;below,&nbsp;the&nbsp;changes&nbsp;are:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281428">//&nbsp;&nbsp;&nbsp;&nbsp1.&nbsp;Use&nbsp;time.Stamp&nbsp;instead&nbsp;of&nbsp;time.RFC3339.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5281476">//&nbsp;&nbsp;&nbsp;&nbsp2.&nbsp;Drop&nbsp;the&nbsp;hostname&nbsp;field&nbsp;from&nbsp;the&nbsp;Fprintf.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281526">timestamp</span>&nbsp;<span class="op" id="5281536">:=</span>&nbsp;<span class="ident" id="5281539"><a href="/log/syslog/syslog.go.html#5275242">time</a></span><span class="op" id="5281543">.</span><span class="ident" id="5281544">Now</span><span class="op" id="5281547">(</span><span class="op" id="5281548">)</span><span class="op" id="5281549">.</span><span class="ident" id="5281550">Format</span><span class="op" id="5281556">(</span><span class="ident" id="5281557"><a href="/log/syslog/syslog.go.html#5275242">time</a></span><span class="op" id="5281561">.</span><span class="ident" id="5281562">Stamp</span><span class="op" id="5281567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281571">_</span><span class="op" id="5281572">,</span>&nbsp;<span class="ident" id="5281574">err</span>&nbsp;<span class="op" id="5281578">:=</span>&nbsp;<span class="ident" id="5281581"><a href="/log/syslog/syslog.go.html#5275196">fmt</a></span><span class="op" id="5281584">.</span><span class="ident" id="5281585">Fprintf</span><span class="op" id="5281592">(</span><span class="ident" id="5281593"><a href="/log/syslog/syslog.go.html#5281279">n</a></span><span class="op" id="5281594">.</span><span class="ident" id="5281595">conn</span><span class="op" id="5281599">,</span>&nbsp;<span class="string" id="5281601">&#34;&lt;%d&gt;%s&nbsp;%s[%d]:&nbsp;%s%s&#34;</span><span class="op" id="5281622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281627"><a href="/log/syslog/syslog.go.html#5281303">p</a></span><span class="op" id="5281628">,</span>&nbsp;<span class="ident" id="5281630"><a href="/log/syslog/syslog.go.html#5281526">timestamp</a></span><span class="op" id="5281639">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281644"><a href="/log/syslog/syslog.go.html#5281325">tag</a></span><span class="op" id="5281647">,</span>&nbsp;<span class="ident" id="5281649"><a href="/log/syslog/syslog.go.html#5275217">os</a></span><span class="op" id="5281651">.</span><span class="ident" id="5281652">Getpid</span><span class="op" id="5281658">(</span><span class="op" id="5281659">)</span><span class="op" id="5281660">,</span>&nbsp;<span class="ident" id="5281662"><a href="/log/syslog/syslog.go.html#5281330">msg</a></span><span class="op" id="5281665">,</span>&nbsp;<span class="ident" id="5281667"><a href="/log/syslog/syslog.go.html#5281335">nl</a></span><span class="op" id="5281669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281673">return</span>&nbsp;<span class="ident" id="5281680"><a href="/log/syslog/syslog.go.html#5281574">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5281685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281688">timestamp</span>&nbsp;<span class="op" id="5281698">:=</span>&nbsp;<span class="ident" id="5281701"><a href="/log/syslog/syslog.go.html#5275242">time</a></span><span class="op" id="5281705">.</span><span class="ident" id="5281706">Now</span><span class="op" id="5281709">(</span><span class="op" id="5281710">)</span><span class="op" id="5281711">.</span><span class="ident" id="5281712">Format</span><span class="op" id="5281718">(</span><span class="ident" id="5281719"><a href="/log/syslog/syslog.go.html#5275242">time</a></span><span class="op" id="5281723">.</span><span class="ident" id="5281724">RFC3339</span><span class="op" id="5281731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281734">_</span><span class="op" id="5281735">,</span>&nbsp;<span class="ident" id="5281737">err</span>&nbsp;<span class="op" id="5281741">:=</span>&nbsp;<span class="ident" id="5281744"><a href="/log/syslog/syslog.go.html#5275196">fmt</a></span><span class="op" id="5281747">.</span><span class="ident" id="5281748">Fprintf</span><span class="op" id="5281755">(</span><span class="ident" id="5281756"><a href="/log/syslog/syslog.go.html#5281279">n</a></span><span class="op" id="5281757">.</span><span class="ident" id="5281758">conn</span><span class="op" id="5281762">,</span>&nbsp;<span class="string" id="5281764">&#34;&lt;%d&gt;%s&nbsp;%s&nbsp;%s[%d]:&nbsp;%s%s&#34;</span><span class="op" id="5281788">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281792"><a href="/log/syslog/syslog.go.html#5281303">p</a></span><span class="op" id="5281793">,</span>&nbsp;<span class="ident" id="5281795"><a href="/log/syslog/syslog.go.html#5281688">timestamp</a></span><span class="op" id="5281804">,</span>&nbsp;<span class="ident" id="5281806"><a href="/log/syslog/syslog.go.html#5281315">hostname</a></span><span class="op" id="5281814">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5281818"><a href="/log/syslog/syslog.go.html#5281325">tag</a></span><span class="op" id="5281821">,</span>&nbsp;<span class="ident" id="5281823"><a href="/log/syslog/syslog.go.html#5275217">os</a></span><span class="op" id="5281825">.</span><span class="ident" id="5281826">Getpid</span><span class="op" id="5281832">(</span><span class="op" id="5281833">)</span><span class="op" id="5281834">,</span>&nbsp;<span class="ident" id="5281836"><a href="/log/syslog/syslog.go.html#5281330">msg</a></span><span class="op" id="5281839">,</span>&nbsp;<span class="ident" id="5281841"><a href="/log/syslog/syslog.go.html#5281335">nl</a></span><span class="op" id="5281843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281846">return</span>&nbsp;<span class="ident" id="5281853"><a href="/log/syslog/syslog.go.html#5281737">err</a></span><br>
<span class="lineno"></span><span class="op" id="5281857">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span><span class="keyword" id="5281860">func</span>&nbsp;<span class="op" id="5281865">(</span><span class="ident" id="5281866">n</span>&nbsp;<span class="op" id="5281868">*</span><span class="ident" id="5281869"><a href="/log/syslog/syslog.go.html#5276879">netConn</a></span><span class="op" id="5281876">)</span>&nbsp;<span class="builtinfunc" id="5281878">close</span><span class="op" id="5281883">(</span><span class="op" id="5281884">)</span>&nbsp;<span class="builtintype" id="5281886">error</span>&nbsp;<span class="op" id="5281892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5281895">return</span>&nbsp;<span class="ident" id="5281902"><a href="/log/syslog/syslog.go.html#5281866">n</a></span><span class="op" id="5281903">.</span><span class="ident" id="5281904">conn</span><span class="op" id="5281908">.</span><span class="ident" id="5281909">Close</span><span class="op" id="5281914">(</span><span class="op" id="5281915">)</span><br>
<span class="lineno"></span><span class="op" id="5281917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5281920">//&nbsp;NewLogger&nbsp;creates&nbsp;a&nbsp;log.Logger&nbsp;whose&nbsp;output&nbsp;is&nbsp;written&nbsp;to</span><br>
<span class="lineno">310</span><span class="comment" id="5281981">//&nbsp;the&nbsp;system&nbsp;log&nbsp;service&nbsp;with&nbsp;the&nbsp;specified&nbsp;priority.&nbsp;The&nbsp;logFlag</span><br>
<span class="lineno"></span><span class="comment" id="5282048">//&nbsp;argument&nbsp;is&nbsp;the&nbsp;flag&nbsp;set&nbsp;passed&nbsp;through&nbsp;to&nbsp;log.New&nbsp;to&nbsp;create</span><br>
<span class="lineno"></span><span class="comment" id="5282112">//&nbsp;the&nbsp;Logger.</span><br>
<span class="lineno"></span><span class="keyword" id="5282127">func</span>&nbsp;<span class="ident" id="5282132">NewLogger</span><span class="op" id="5282141">(</span><span class="ident" id="5282142">p</span>&nbsp;<span class="ident" id="5282144"><a href="/log/syslog/syslog.go.html#5275493">Priority</a></span><span class="op" id="5282152">,</span>&nbsp;<span class="ident" id="5282154">logFlag</span>&nbsp;<span class="builtintype" id="5282162">int</span><span class="op" id="5282165">)</span>&nbsp;<span class="op" id="5282167">(</span><span class="op" id="5282168">*</span><span class="ident" id="5282169"><a href="/log/syslog/syslog.go.html#5275203">log</a></span><span class="op" id="5282172">.</span><span class="ident" id="5282173">Logger</span><span class="op" id="5282179">,</span>&nbsp;<span class="builtintype" id="5282181">error</span><span class="op" id="5282186">)</span>&nbsp;<span class="op" id="5282188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5282191">s</span><span class="op" id="5282192">,</span>&nbsp;<span class="ident" id="5282194">err</span>&nbsp;<span class="op" id="5282198">:=</span>&nbsp;<span class="ident" id="5282201"><a href="/log/syslog/syslog.go.html#5277091">New</a></span><span class="op" id="5282204">(</span><span class="ident" id="5282205"><a href="/log/syslog/syslog.go.html#5282142">p</a></span><span class="op" id="5282206">,</span>&nbsp;<span class="string" id="5282208">&#34;&#34;</span><span class="op" id="5282210">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5282213">if</span>&nbsp;<span class="ident" id="5282216"><a href="/log/syslog/syslog.go.html#5282194">err</a></span>&nbsp;<span class="op" id="5282220">!=</span>&nbsp;<span class="ident" id="5282223">nil</span>&nbsp;<span class="op" id="5282227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5282231">return</span>&nbsp;<span class="ident" id="5282238">nil</span><span class="op" id="5282241">,</span>&nbsp;<span class="ident" id="5282243"><a href="/log/syslog/syslog.go.html#5282194">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5282248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5282251">return</span>&nbsp;<span class="ident" id="5282258"><a href="/log/syslog/syslog.go.html#5275203">log</a></span><span class="op" id="5282261">.</span><span class="ident" id="5282262">New</span><span class="op" id="5282265">(</span><span class="ident" id="5282266"><a href="/log/syslog/syslog.go.html#5282191">s</a></span><span class="op" id="5282267">,</span>&nbsp;<span class="string" id="5282269">&#34;&#34;</span><span class="op" id="5282271">,</span>&nbsp;<span class="ident" id="5282273"><a href="/log/syslog/syslog.go.html#5282154">logFlag</a></span><span class="op" id="5282280">)</span><span class="op" id="5282281">,</span>&nbsp;<span class="ident" id="5282283">nil</span><br>
<span class="lineno"></span><span class="op" id="5282287">}</span>
</div>
</body>
</html>
