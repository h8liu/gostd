<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html" class="current">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3269415">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3269470">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3269524">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3269575">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3269640">package</span>&nbsp;<span class="ident" id="3269648">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3269653">import</span>&nbsp;<span class="op" id="3269660">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3269663">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3269669">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="3269679">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3269682">func</span>&nbsp;<span class="ident" id="3269687">newFileFD</span><span class="op" id="3269696">(</span><span class="ident" id="3269697">f</span>&nbsp;<span class="op" id="3269699">*</span><span class="ident" id="3269700"><a href="/gostd/net/file_unix.go.html#3269663">os</a></span><span class="op" id="3269702">.</span><span class="ident" id="3269703"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="3269707">)</span>&nbsp;<span class="op" id="3269709">(</span><span class="op" id="3269710">*</span><span class="ident" id="3269711"><a href="/gostd/net/fd_unix.go.html#3257361">netFD</a></span><span class="op" id="3269716">,</span>&nbsp;<span class="builtintype" id="3269718">error</span><span class="op" id="3269723">)</span>&nbsp;<span class="op" id="3269725">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3269728">fd</span><span class="op" id="3269730">,</span>&nbsp;<span class="ident" id="3269732">err</span>&nbsp;<span class="op" id="3269736">:=</span>&nbsp;<span class="ident" id="3269739"><a href="/gostd/net/fd_unix.go.html#3267326">dupCloseOnExec</a></span><span class="op" id="3269753">(</span><span class="builtintype" id="3269754">int</span><span class="op" id="3269757">(</span><span class="ident" id="3269758"><a href="/gostd/net/file_unix.go.html#3269697">f</a></span><span class="op" id="3269759">.</span><span class="ident" id="3269760"><a href="/gostd/os/file_unix.go.html#2452859">Fd</a></span><span class="op" id="3269762">(</span><span class="op" id="3269763">)</span><span class="op" id="3269764">)</span><span class="op" id="3269765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269768">if</span>&nbsp;<span class="ident" id="3269771"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span>&nbsp;<span class="op" id="3269775">!=</span>&nbsp;<span class="builtintype" id="3269778">nil</span>&nbsp;<span class="op" id="3269782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269786">return</span>&nbsp;<span class="builtintype" id="3269793">nil</span><span class="op" id="3269796">,</span>&nbsp;<span class="ident" id="3269798"><a href="/gostd/net/file_unix.go.html#3269663">os</a></span><span class="op" id="3269800">.</span><span class="ident" id="3269801"><a href="/gostd/os/error.go.html#2431472">NewSyscallError</a></span><span class="op" id="3269816">(</span><span class="string" id="3269817">&#34;dup&#34;</span><span class="op" id="3269822">,</span>&nbsp;<span class="ident" id="3269824"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span><span class="op" id="3269827">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3269830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269834">if</span>&nbsp;<span class="ident" id="3269837"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span>&nbsp;<span class="op" id="3269841">=</span>&nbsp;<span class="ident" id="3269843"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3269850">.</span><span class="ident" id="3269851"><a href="/gostd/syscall/exec_unix.go.html#2492730">SetNonblock</a></span><span class="op" id="3269862">(</span><span class="ident" id="3269863"><a href="/gostd/net/file_unix.go.html#3269728">fd</a></span><span class="op" id="3269865">,</span>&nbsp;<span class="builtintype" id="3269867">true</span><span class="op" id="3269871">)</span><span class="op" id="3269872">;</span>&nbsp;<span class="ident" id="3269874"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span>&nbsp;<span class="op" id="3269878">!=</span>&nbsp;<span class="builtintype" id="3269881">nil</span>&nbsp;<span class="op" id="3269885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3269889"><a href="/gostd/net/fd_unix.go.html#3269191">closesocket</a></span><span class="op" id="3269900">(</span><span class="ident" id="3269901"><a href="/gostd/net/file_unix.go.html#3269728">fd</a></span><span class="op" id="3269903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3269907">return</span>&nbsp;<span class="builtintype" id="3269914">nil</span><span class="op" id="3269917">,</span>&nbsp;<span class="ident" id="3269919"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3269924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3269928">sotype</span><span class="op" id="3269934">,</span>&nbsp;<span class="ident" id="3269936"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span>&nbsp;<span class="op" id="3269940">:=</span>&nbsp;<span class="ident" id="3269943"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3269950">.</span><span class="ident" id="3269951"><a href="/gostd/syscall/syscall_unix.go.html#2547935">GetsockoptInt</a></span><span class="op" id="3269964">(</span><span class="ident" id="3269965"><a href="/gostd/net/file_unix.go.html#3269728">fd</a></span><span class="op" id="3269967">,</span>&nbsp;<span class="ident" id="3269969"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3269976">.</span><span class="ident" id="3269977"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2592443">SOL_SOCKET</a></span><span class="op" id="3269987">,</span>&nbsp;<span class="ident" id="3269989"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3269996">.</span><span class="ident" id="3269997"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2594151">SO_TYPE</a></span><span class="op" id="3270004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270007">if</span>&nbsp;<span class="ident" id="3270010"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span>&nbsp;<span class="op" id="3270014">!=</span>&nbsp;<span class="builtintype" id="3270017">nil</span>&nbsp;<span class="op" id="3270021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270025"><a href="/gostd/net/fd_unix.go.html#3269191">closesocket</a></span><span class="op" id="3270036">(</span><span class="ident" id="3270037"><a href="/gostd/net/file_unix.go.html#3269728">fd</a></span><span class="op" id="3270039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270043">return</span>&nbsp;<span class="builtintype" id="3270050">nil</span><span class="op" id="3270053">,</span>&nbsp;<span class="ident" id="3270055"><a href="/gostd/net/file_unix.go.html#3269663">os</a></span><span class="op" id="3270057">.</span><span class="ident" id="3270058"><a href="/gostd/os/error.go.html#2431472">NewSyscallError</a></span><span class="op" id="3270073">(</span><span class="string" id="3270074">&#34;getsockopt&#34;</span><span class="op" id="3270086">,</span>&nbsp;<span class="ident" id="3270088"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span><span class="op" id="3270091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270094">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270098">family</span>&nbsp;<span class="op" id="3270105">:=</span>&nbsp;<span class="ident" id="3270108"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270115">.</span><span class="ident" id="3270116"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2552218">AF_UNSPEC</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270127">toAddr</span>&nbsp;<span class="op" id="3270134">:=</span>&nbsp;<span class="ident" id="3270137"><a href="/gostd/net/tcpsock_posix.go.html#3375274">sockaddrToTCP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270152">lsa</span><span class="op" id="3270155">,</span>&nbsp;<span class="ident" id="3270157">_</span>&nbsp;<span class="op" id="3270159">:=</span>&nbsp;<span class="ident" id="3270162"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270169">.</span><span class="ident" id="3270170"><a href="/gostd/syscall/syscall_linux.go.html#2522263">Getsockname</a></span><span class="op" id="3270181">(</span><span class="ident" id="3270182"><a href="/gostd/net/file_unix.go.html#3269728">fd</a></span><span class="op" id="3270184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270187">switch</span>&nbsp;<span class="ident" id="3270194"><a href="/gostd/net/file_unix.go.html#3270152">lsa</a></span><span class="op" id="3270197">.</span><span class="op" id="3270198">(</span><span class="keyword" id="3270199">type</span><span class="op" id="3270203">)</span>&nbsp;<span class="op" id="3270205">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270208">default</span><span class="op" id="3270215">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270219"><a href="/gostd/net/fd_unix.go.html#3269191">closesocket</a></span><span class="op" id="3270230">(</span><span class="ident" id="3270231"><a href="/gostd/net/file_unix.go.html#3269728">fd</a></span><span class="op" id="3270233">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270237">return</span>&nbsp;<span class="builtintype" id="3270244">nil</span><span class="op" id="3270247">,</span>&nbsp;<span class="ident" id="3270249"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270256">.</span><span class="ident" id="3270257"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270265">case</span>&nbsp;<span class="op" id="3270270">*</span><span class="ident" id="3270271"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270278">.</span><span class="ident" id="3270279"><a href="/gostd/syscall/syscall_unix.go.html#2547205">SockaddrInet4</a></span><span class="op" id="3270292">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270296"><a href="/gostd/net/file_unix.go.html#3270098">family</a></span>&nbsp;<span class="op" id="3270303">=</span>&nbsp;<span class="ident" id="3270305"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270312">.</span><span class="ident" id="3270313"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551244">AF_INET</a></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270323">if</span>&nbsp;<span class="ident" id="3270326"><a href="/gostd/net/file_unix.go.html#3269928">sotype</a></span>&nbsp;<span class="op" id="3270333">==</span>&nbsp;<span class="ident" id="3270336"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270343">.</span><span class="ident" id="3270344"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591788">SOCK_DGRAM</a></span>&nbsp;<span class="op" id="3270355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270360"><a href="/gostd/net/file_unix.go.html#3270127">toAddr</a></span>&nbsp;<span class="op" id="3270367">=</span>&nbsp;<span class="ident" id="3270369"><a href="/gostd/net/udpsock_posix.go.html#3387332">sockaddrToUDP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270385">}</span>&nbsp;<span class="keyword" id="3270387">else</span>&nbsp;<span class="keyword" id="3270392">if</span>&nbsp;<span class="ident" id="3270395"><a href="/gostd/net/file_unix.go.html#3269928">sotype</a></span>&nbsp;<span class="op" id="3270402">==</span>&nbsp;<span class="ident" id="3270405"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270412">.</span><span class="ident" id="3270413"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591910">SOCK_RAW</a></span>&nbsp;<span class="op" id="3270422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270427"><a href="/gostd/net/file_unix.go.html#3270127">toAddr</a></span>&nbsp;<span class="op" id="3270434">=</span>&nbsp;<span class="ident" id="3270436"><a href="/gostd/net/iprawsock_posix.go.html#3302998">sockaddrToIP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270451">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270454">case</span>&nbsp;<span class="op" id="3270459">*</span><span class="ident" id="3270460"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270467">.</span><span class="ident" id="3270468"><a href="/gostd/syscall/syscall_unix.go.html#2547283">SockaddrInet6</a></span><span class="op" id="3270481">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270485"><a href="/gostd/net/file_unix.go.html#3270098">family</a></span>&nbsp;<span class="op" id="3270492">=</span>&nbsp;<span class="ident" id="3270494"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270501">.</span><span class="ident" id="3270502"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2551284">AF_INET6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270513">if</span>&nbsp;<span class="ident" id="3270516"><a href="/gostd/net/file_unix.go.html#3269928">sotype</a></span>&nbsp;<span class="op" id="3270523">==</span>&nbsp;<span class="ident" id="3270526"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270533">.</span><span class="ident" id="3270534"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591788">SOCK_DGRAM</a></span>&nbsp;<span class="op" id="3270545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270550"><a href="/gostd/net/file_unix.go.html#3270127">toAddr</a></span>&nbsp;<span class="op" id="3270557">=</span>&nbsp;<span class="ident" id="3270559"><a href="/gostd/net/udpsock_posix.go.html#3387332">sockaddrToUDP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270575">}</span>&nbsp;<span class="keyword" id="3270577">else</span>&nbsp;<span class="keyword" id="3270582">if</span>&nbsp;<span class="ident" id="3270585"><a href="/gostd/net/file_unix.go.html#3269928">sotype</a></span>&nbsp;<span class="op" id="3270592">==</span>&nbsp;<span class="ident" id="3270595"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270602">.</span><span class="ident" id="3270603"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591910">SOCK_RAW</a></span>&nbsp;<span class="op" id="3270612">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270617"><a href="/gostd/net/file_unix.go.html#3270127">toAddr</a></span>&nbsp;<span class="op" id="3270624">=</span>&nbsp;<span class="ident" id="3270626"><a href="/gostd/net/iprawsock_posix.go.html#3302998">sockaddrToIP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270644">case</span>&nbsp;<span class="op" id="3270649">*</span><span class="ident" id="3270650"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270657">.</span><span class="ident" id="3270658"><a href="/gostd/syscall/syscall_unix.go.html#2547383">SockaddrUnix</a></span><span class="op" id="3270670">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270674"><a href="/gostd/net/file_unix.go.html#3270098">family</a></span>&nbsp;<span class="op" id="3270681">=</span>&nbsp;<span class="ident" id="3270683"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270690">.</span><span class="ident" id="3270691"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2552178">AF_UNIX</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270701"><a href="/gostd/net/file_unix.go.html#3270127">toAddr</a></span>&nbsp;<span class="op" id="3270708">=</span>&nbsp;<span class="ident" id="3270710"><a href="/gostd/net/unixsock_posix.go.html#3397332">sockaddrToUnix</a></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3270727">if</span>&nbsp;<span class="ident" id="3270730"><a href="/gostd/net/file_unix.go.html#3269928">sotype</a></span>&nbsp;<span class="op" id="3270737">==</span>&nbsp;<span class="ident" id="3270740"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270747">.</span><span class="ident" id="3270748"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591788">SOCK_DGRAM</a></span>&nbsp;<span class="op" id="3270759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270764"><a href="/gostd/net/file_unix.go.html#3270127">toAddr</a></span>&nbsp;<span class="op" id="3270771">=</span>&nbsp;<span class="ident" id="3270773"><a href="/gostd/net/unixsock_posix.go.html#3397490">sockaddrToUnixgram</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270794">}</span>&nbsp;<span class="keyword" id="3270796">else</span>&nbsp;<span class="keyword" id="3270801">if</span>&nbsp;<span class="ident" id="3270804"><a href="/gostd/net/file_unix.go.html#3269928">sotype</a></span>&nbsp;<span class="op" id="3270811">==</span>&nbsp;<span class="ident" id="3270814"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270821">.</span><span class="ident" id="3270822"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2591990">SOCK_SEQPACKET</a></span>&nbsp;<span class="op" id="3270837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270842"><a href="/gostd/net/file_unix.go.html#3270127">toAddr</a></span>&nbsp;<span class="op" id="3270849">=</span>&nbsp;<span class="ident" id="3270851"><a href="/gostd/net/unixsock_posix.go.html#3397656">sockaddrToUnixpacket</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270874">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3270877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270880">laddr</span>&nbsp;<span class="op" id="3270886">:=</span>&nbsp;<span class="ident" id="3270889"><a href="/gostd/net/file_unix.go.html#3270127">toAddr</a></span><span class="op" id="3270895">(</span><span class="ident" id="3270896"><a href="/gostd/net/file_unix.go.html#3270152">lsa</a></span><span class="op" id="3270899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270902">rsa</span><span class="op" id="3270905">,</span>&nbsp;<span class="ident" id="3270907">_</span>&nbsp;<span class="op" id="3270909">:=</span>&nbsp;<span class="ident" id="3270912"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3270919">.</span><span class="ident" id="3270920"><a href="/gostd/syscall/syscall_unix.go.html#2547726">Getpeername</a></span><span class="op" id="3270931">(</span><span class="ident" id="3270932"><a href="/gostd/net/file_unix.go.html#3269728">fd</a></span><span class="op" id="3270934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270937">raddr</span>&nbsp;<span class="op" id="3270943">:=</span>&nbsp;<span class="ident" id="3270946"><a href="/gostd/net/file_unix.go.html#3270127">toAddr</a></span><span class="op" id="3270952">(</span><span class="ident" id="3270953"><a href="/gostd/net/file_unix.go.html#3270902">rsa</a></span><span class="op" id="3270956">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3270960">netfd</span><span class="op" id="3270965">,</span>&nbsp;<span class="ident" id="3270967"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span>&nbsp;<span class="op" id="3270971">:=</span>&nbsp;<span class="ident" id="3270974"><a href="/gostd/net/fd_unix.go.html#3257812">newFD</a></span><span class="op" id="3270979">(</span><span class="ident" id="3270980"><a href="/gostd/net/file_unix.go.html#3269728">fd</a></span><span class="op" id="3270982">,</span>&nbsp;<span class="ident" id="3270984"><a href="/gostd/net/file_unix.go.html#3270098">family</a></span><span class="op" id="3270990">,</span>&nbsp;<span class="ident" id="3270992"><a href="/gostd/net/file_unix.go.html#3269928">sotype</a></span><span class="op" id="3270998">,</span>&nbsp;<span class="ident" id="3271000"><a href="/gostd/net/file_unix.go.html#3270880">laddr</a></span><span class="op" id="3271005">.</span><span class="ident" id="3271006"><a href="/gostd/net/net.go.html#3334197">Network</a></span><span class="op" id="3271013">(</span><span class="op" id="3271014">)</span><span class="op" id="3271015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271018">if</span>&nbsp;<span class="ident" id="3271021"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span>&nbsp;<span class="op" id="3271025">!=</span>&nbsp;<span class="builtintype" id="3271028">nil</span>&nbsp;<span class="op" id="3271032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3271036"><a href="/gostd/net/fd_unix.go.html#3269191">closesocket</a></span><span class="op" id="3271047">(</span><span class="ident" id="3271048"><a href="/gostd/net/file_unix.go.html#3269728">fd</a></span><span class="op" id="3271050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271054">return</span>&nbsp;<span class="builtintype" id="3271061">nil</span><span class="op" id="3271064">,</span>&nbsp;<span class="ident" id="3271066"><a href="/gostd/net/file_unix.go.html#3269732">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3271071">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271074">if</span>&nbsp;<span class="ident" id="3271077">err</span>&nbsp;<span class="op" id="3271081">:=</span>&nbsp;<span class="ident" id="3271084"><a href="/gostd/net/file_unix.go.html#3270960">netfd</a></span><span class="op" id="3271089">.</span><span class="ident" id="3271090"><a href="/gostd/net/fd_unix.go.html#3257971">init</a></span><span class="op" id="3271094">(</span><span class="op" id="3271095">)</span><span class="op" id="3271096">;</span>&nbsp;<span class="ident" id="3271098"><a href="/gostd/net/file_unix.go.html#3271077">err</a></span>&nbsp;<span class="op" id="3271102">!=</span>&nbsp;<span class="builtintype" id="3271105">nil</span>&nbsp;<span class="op" id="3271109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3271113"><a href="/gostd/net/file_unix.go.html#3270960">netfd</a></span><span class="op" id="3271118">.</span><span class="ident" id="3271119"><a href="/gostd/net/fd_unix.go.html#3261468">Close</a></span><span class="op" id="3271124">(</span><span class="op" id="3271125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271129">return</span>&nbsp;<span class="builtintype" id="3271136">nil</span><span class="op" id="3271139">,</span>&nbsp;<span class="ident" id="3271141"><a href="/gostd/net/file_unix.go.html#3271077">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3271146">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3271149"><a href="/gostd/net/file_unix.go.html#3270960">netfd</a></span><span class="op" id="3271154">.</span><span class="ident" id="3271155"><a href="/gostd/net/fd_unix.go.html#3258074">setAddr</a></span><span class="op" id="3271162">(</span><span class="ident" id="3271163"><a href="/gostd/net/file_unix.go.html#3270880">laddr</a></span><span class="op" id="3271168">,</span>&nbsp;<span class="ident" id="3271170"><a href="/gostd/net/file_unix.go.html#3270937">raddr</a></span><span class="op" id="3271175">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271178">return</span>&nbsp;<span class="ident" id="3271185"><a href="/gostd/net/file_unix.go.html#3270960">netfd</a></span><span class="op" id="3271190">,</span>&nbsp;<span class="builtintype" id="3271192">nil</span><br>
<span class="lineno"></span><span class="op" id="3271196">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3271199">//&nbsp;FileConn&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;network&nbsp;connection&nbsp;corresponding&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3271269">//&nbsp;the&nbsp;open&nbsp;file&nbsp;f.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when</span><br>
<span class="lineno">80</span><span class="comment" id="3271340">//&nbsp;finished.&nbsp;&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3271406">//&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="3271419">func</span>&nbsp;<span class="ident" id="3271424">FileConn</span><span class="op" id="3271432">(</span><span class="ident" id="3271433">f</span>&nbsp;<span class="op" id="3271435">*</span><span class="ident" id="3271436"><a href="/gostd/net/file_unix.go.html#3269663">os</a></span><span class="op" id="3271438">.</span><span class="ident" id="3271439"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="3271443">)</span>&nbsp;<span class="op" id="3271445">(</span><span class="ident" id="3271446">c</span>&nbsp;<span class="ident" id="3271448"><a href="/gostd/net/net.go.html#3334417">Conn</a></span><span class="op" id="3271452">,</span>&nbsp;<span class="ident" id="3271454">err</span>&nbsp;<span class="builtintype" id="3271458">error</span><span class="op" id="3271463">)</span>&nbsp;<span class="op" id="3271465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3271468">fd</span><span class="op" id="3271470">,</span>&nbsp;<span class="ident" id="3271472"><a href="/gostd/net/file_unix.go.html#3271454">err</a></span>&nbsp;<span class="op" id="3271476">:=</span>&nbsp;<span class="ident" id="3271479"><a href="/gostd/net/file_unix.go.html#3269687">newFileFD</a></span><span class="op" id="3271488">(</span><span class="ident" id="3271489"><a href="/gostd/net/file_unix.go.html#3271433">f</a></span><span class="op" id="3271490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271493">if</span>&nbsp;<span class="ident" id="3271496"><a href="/gostd/net/file_unix.go.html#3271454">err</a></span>&nbsp;<span class="op" id="3271500">!=</span>&nbsp;<span class="builtintype" id="3271503">nil</span>&nbsp;<span class="op" id="3271507">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271511">return</span>&nbsp;<span class="builtintype" id="3271518">nil</span><span class="op" id="3271521">,</span>&nbsp;<span class="ident" id="3271523"><a href="/gostd/net/file_unix.go.html#3271454">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3271528">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271531">switch</span>&nbsp;<span class="ident" id="3271538"><a href="/gostd/net/file_unix.go.html#3271468">fd</a></span><span class="op" id="3271540">.</span><span class="ident" id="3271541"><a href="/gostd/net/fd_unix.go.html#3257582">laddr</a></span><span class="op" id="3271546">.</span><span class="op" id="3271547">(</span><span class="keyword" id="3271548">type</span><span class="op" id="3271552">)</span>&nbsp;<span class="op" id="3271554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271557">case</span>&nbsp;<span class="op" id="3271562">*</span><span class="ident" id="3271563"><a href="/gostd/net/tcpsock.go.html#3373469">TCPAddr</a></span><span class="op" id="3271570">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271574">return</span>&nbsp;<span class="ident" id="3271581"><a href="/gostd/net/tcpsock_posix.go.html#3376132">newTCPConn</a></span><span class="op" id="3271591">(</span><span class="ident" id="3271592"><a href="/gostd/net/file_unix.go.html#3271468">fd</a></span><span class="op" id="3271594">)</span><span class="op" id="3271595">,</span>&nbsp;<span class="builtintype" id="3271597">nil</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271602">case</span>&nbsp;<span class="op" id="3271607">*</span><span class="ident" id="3271608"><a href="/gostd/net/udpsock.go.html#3385842">UDPAddr</a></span><span class="op" id="3271615">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271619">return</span>&nbsp;<span class="ident" id="3271626"><a href="/gostd/net/udpsock_posix.go.html#3388207">newUDPConn</a></span><span class="op" id="3271636">(</span><span class="ident" id="3271637"><a href="/gostd/net/file_unix.go.html#3271468">fd</a></span><span class="op" id="3271639">)</span><span class="op" id="3271640">,</span>&nbsp;<span class="builtintype" id="3271642">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271647">case</span>&nbsp;<span class="op" id="3271652">*</span><span class="ident" id="3271653"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="3271659">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271663">return</span>&nbsp;<span class="ident" id="3271670"><a href="/gostd/net/iprawsock_posix.go.html#3303829">newIPConn</a></span><span class="op" id="3271679">(</span><span class="ident" id="3271680"><a href="/gostd/net/file_unix.go.html#3271468">fd</a></span><span class="op" id="3271682">)</span><span class="op" id="3271683">,</span>&nbsp;<span class="builtintype" id="3271685">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271690">case</span>&nbsp;<span class="op" id="3271695">*</span><span class="ident" id="3271696"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3271704">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271708">return</span>&nbsp;<span class="ident" id="3271715"><a href="/gostd/net/unixsock_posix.go.html#3398503">newUnixConn</a></span><span class="op" id="3271726">(</span><span class="ident" id="3271727"><a href="/gostd/net/file_unix.go.html#3271468">fd</a></span><span class="op" id="3271729">)</span><span class="op" id="3271730">,</span>&nbsp;<span class="builtintype" id="3271732">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3271737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3271740"><a href="/gostd/net/file_unix.go.html#3271468">fd</a></span><span class="op" id="3271742">.</span><span class="ident" id="3271743"><a href="/gostd/net/fd_unix.go.html#3261468">Close</a></span><span class="op" id="3271748">(</span><span class="op" id="3271749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3271752">return</span>&nbsp;<span class="builtintype" id="3271759">nil</span><span class="op" id="3271762">,</span>&nbsp;<span class="ident" id="3271764"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3271771">.</span><span class="ident" id="3271772"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span><span class="op" id="3271779">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="3271782">//&nbsp;FileListener&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;network&nbsp;listener&nbsp;corresponding</span><br>
<span class="lineno"></span><span class="comment" id="3271851">//&nbsp;to&nbsp;the&nbsp;open&nbsp;file&nbsp;f.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;l</span><br>
<span class="lineno"></span><span class="comment" id="3271920">//&nbsp;when&nbsp;finished.&nbsp;&nbsp;Closing&nbsp;l&nbsp;does&nbsp;not&nbsp;affect&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="3271991">//&nbsp;affect&nbsp;l.</span><br>
<span class="lineno">105</span><span class="keyword" id="3272004">func</span>&nbsp;<span class="ident" id="3272009">FileListener</span><span class="op" id="3272021">(</span><span class="ident" id="3272022">f</span>&nbsp;<span class="op" id="3272024">*</span><span class="ident" id="3272025"><a href="/gostd/net/file_unix.go.html#3269663">os</a></span><span class="op" id="3272027">.</span><span class="ident" id="3272028"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="3272032">)</span>&nbsp;<span class="op" id="3272034">(</span><span class="ident" id="3272035">l</span>&nbsp;<span class="ident" id="3272037"><a href="/gostd/net/net.go.html#3340703">Listener</a></span><span class="op" id="3272045">,</span>&nbsp;<span class="ident" id="3272047">err</span>&nbsp;<span class="builtintype" id="3272051">error</span><span class="op" id="3272056">)</span>&nbsp;<span class="op" id="3272058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272061">fd</span><span class="op" id="3272063">,</span>&nbsp;<span class="ident" id="3272065"><a href="/gostd/net/file_unix.go.html#3272047">err</a></span>&nbsp;<span class="op" id="3272069">:=</span>&nbsp;<span class="ident" id="3272072"><a href="/gostd/net/file_unix.go.html#3269687">newFileFD</a></span><span class="op" id="3272081">(</span><span class="ident" id="3272082"><a href="/gostd/net/file_unix.go.html#3272022">f</a></span><span class="op" id="3272083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272086">if</span>&nbsp;<span class="ident" id="3272089"><a href="/gostd/net/file_unix.go.html#3272047">err</a></span>&nbsp;<span class="op" id="3272093">!=</span>&nbsp;<span class="builtintype" id="3272096">nil</span>&nbsp;<span class="op" id="3272100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272104">return</span>&nbsp;<span class="builtintype" id="3272111">nil</span><span class="op" id="3272114">,</span>&nbsp;<span class="ident" id="3272116"><a href="/gostd/net/file_unix.go.html#3272047">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3272121">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272124">switch</span>&nbsp;<span class="ident" id="3272131">laddr</span>&nbsp;<span class="op" id="3272137">:=</span>&nbsp;<span class="ident" id="3272140"><a href="/gostd/net/file_unix.go.html#3272061">fd</a></span><span class="op" id="3272142">.</span><span class="ident" id="3272143"><a href="/gostd/net/fd_unix.go.html#3257582">laddr</a></span><span class="op" id="3272148">.</span><span class="op" id="3272149">(</span><span class="keyword" id="3272150">type</span><span class="op" id="3272154">)</span>&nbsp;<span class="op" id="3272156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272159">case</span>&nbsp;<span class="op" id="3272164">*</span><span class="ident" id="3272165"><a href="/gostd/net/tcpsock.go.html#3373469">TCPAddr</a></span><span class="op" id="3272172">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272176">return</span>&nbsp;<span class="op" id="3272183">&amp;</span><span class="ident" id="3272184"><a href="/gostd/net/tcpsock_posix.go.html#3381906">TCPListener</a></span><span class="op" id="3272195">{</span><span class="ident" id="3272196"><a href="/gostd/net/file_unix.go.html#3272061">fd</a></span><span class="op" id="3272198">}</span><span class="op" id="3272199">,</span>&nbsp;<span class="builtintype" id="3272201">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272206">case</span>&nbsp;<span class="op" id="3272211">*</span><span class="ident" id="3272212"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3272220">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272224">return</span>&nbsp;<span class="op" id="3272231">&amp;</span><span class="ident" id="3272232"><a href="/gostd/net/unixsock_posix.go.html#3403212">UnixListener</a></span><span class="op" id="3272244">{</span><span class="ident" id="3272245"><a href="/gostd/net/file_unix.go.html#3272061">fd</a></span><span class="op" id="3272247">,</span>&nbsp;<span class="ident" id="3272249"><a href="/gostd/net/file_unix.go.html#3272131">laddr</a></span><span class="op" id="3272254">.</span><span class="ident" id="3272255"><a href="/gostd/net/unixsock.go.html#3395520">Name</a></span><span class="op" id="3272259">}</span><span class="op" id="3272260">,</span>&nbsp;<span class="builtintype" id="3272262">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3272267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272270"><a href="/gostd/net/file_unix.go.html#3272061">fd</a></span><span class="op" id="3272272">.</span><span class="ident" id="3272273"><a href="/gostd/net/fd_unix.go.html#3261468">Close</a></span><span class="op" id="3272278">(</span><span class="op" id="3272279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272282">return</span>&nbsp;<span class="builtintype" id="3272289">nil</span><span class="op" id="3272292">,</span>&nbsp;<span class="ident" id="3272294"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3272301">.</span><span class="ident" id="3272302"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span><span class="op" id="3272309">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="3272312">//&nbsp;FilePacketConn&nbsp;returns&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;packet&nbsp;network&nbsp;connection</span><br>
<span class="lineno"></span><span class="comment" id="3272378">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;open&nbsp;file&nbsp;f.&nbsp;&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3272435">//&nbsp;responsibility&nbsp;to&nbsp;close&nbsp;f&nbsp;when&nbsp;finished.&nbsp;&nbsp;Closing&nbsp;c&nbsp;does&nbsp;not&nbsp;affect</span><br>
<span class="lineno"></span><span class="comment" id="3272506">//&nbsp;f,&nbsp;and&nbsp;closing&nbsp;f&nbsp;does&nbsp;not&nbsp;affect&nbsp;c.</span><br>
<span class="lineno"></span><span class="keyword" id="3272545">func</span>&nbsp;<span class="ident" id="3272550">FilePacketConn</span><span class="op" id="3272564">(</span><span class="ident" id="3272565">f</span>&nbsp;<span class="op" id="3272567">*</span><span class="ident" id="3272568"><a href="/gostd/net/file_unix.go.html#3269663">os</a></span><span class="op" id="3272570">.</span><span class="ident" id="3272571"><a href="/gostd/os/file_unix.go.html#2452288">File</a></span><span class="op" id="3272575">)</span>&nbsp;<span class="op" id="3272577">(</span><span class="ident" id="3272578">c</span>&nbsp;<span class="ident" id="3272580"><a href="/gostd/net/net.go.html#3338833">PacketConn</a></span><span class="op" id="3272590">,</span>&nbsp;<span class="ident" id="3272592">err</span>&nbsp;<span class="builtintype" id="3272596">error</span><span class="op" id="3272601">)</span>&nbsp;<span class="op" id="3272603">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272606">fd</span><span class="op" id="3272608">,</span>&nbsp;<span class="ident" id="3272610"><a href="/gostd/net/file_unix.go.html#3272592">err</a></span>&nbsp;<span class="op" id="3272614">:=</span>&nbsp;<span class="ident" id="3272617"><a href="/gostd/net/file_unix.go.html#3269687">newFileFD</a></span><span class="op" id="3272626">(</span><span class="ident" id="3272627"><a href="/gostd/net/file_unix.go.html#3272565">f</a></span><span class="op" id="3272628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272631">if</span>&nbsp;<span class="ident" id="3272634"><a href="/gostd/net/file_unix.go.html#3272592">err</a></span>&nbsp;<span class="op" id="3272638">!=</span>&nbsp;<span class="builtintype" id="3272641">nil</span>&nbsp;<span class="op" id="3272645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272649">return</span>&nbsp;<span class="builtintype" id="3272656">nil</span><span class="op" id="3272659">,</span>&nbsp;<span class="ident" id="3272661"><a href="/gostd/net/file_unix.go.html#3272592">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3272666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272669">switch</span>&nbsp;<span class="ident" id="3272676"><a href="/gostd/net/file_unix.go.html#3272606">fd</a></span><span class="op" id="3272678">.</span><span class="ident" id="3272679"><a href="/gostd/net/fd_unix.go.html#3257582">laddr</a></span><span class="op" id="3272684">.</span><span class="op" id="3272685">(</span><span class="keyword" id="3272686">type</span><span class="op" id="3272690">)</span>&nbsp;<span class="op" id="3272692">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272695">case</span>&nbsp;<span class="op" id="3272700">*</span><span class="ident" id="3272701"><a href="/gostd/net/udpsock.go.html#3385842">UDPAddr</a></span><span class="op" id="3272708">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272712">return</span>&nbsp;<span class="ident" id="3272719"><a href="/gostd/net/udpsock_posix.go.html#3388207">newUDPConn</a></span><span class="op" id="3272729">(</span><span class="ident" id="3272730"><a href="/gostd/net/file_unix.go.html#3272606">fd</a></span><span class="op" id="3272732">)</span><span class="op" id="3272733">,</span>&nbsp;<span class="builtintype" id="3272735">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272740">case</span>&nbsp;<span class="op" id="3272745">*</span><span class="ident" id="3272746"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="3272752">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272756">return</span>&nbsp;<span class="ident" id="3272763"><a href="/gostd/net/iprawsock_posix.go.html#3303829">newIPConn</a></span><span class="op" id="3272772">(</span><span class="ident" id="3272773"><a href="/gostd/net/file_unix.go.html#3272606">fd</a></span><span class="op" id="3272775">)</span><span class="op" id="3272776">,</span>&nbsp;<span class="builtintype" id="3272778">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272783">case</span>&nbsp;<span class="op" id="3272788">*</span><span class="ident" id="3272789"><a href="/gostd/net/unixsock.go.html#3395501">UnixAddr</a></span><span class="op" id="3272797">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272801">return</span>&nbsp;<span class="ident" id="3272808"><a href="/gostd/net/unixsock_posix.go.html#3398503">newUnixConn</a></span><span class="op" id="3272819">(</span><span class="ident" id="3272820"><a href="/gostd/net/file_unix.go.html#3272606">fd</a></span><span class="op" id="3272822">)</span><span class="op" id="3272823">,</span>&nbsp;<span class="builtintype" id="3272825">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3272830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3272833"><a href="/gostd/net/file_unix.go.html#3272606">fd</a></span><span class="op" id="3272835">.</span><span class="ident" id="3272836"><a href="/gostd/net/fd_unix.go.html#3261468">Close</a></span><span class="op" id="3272841">(</span><span class="op" id="3272842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3272845">return</span>&nbsp;<span class="builtintype" id="3272852">nil</span><span class="op" id="3272855">,</span>&nbsp;<span class="ident" id="3272857"><a href="/gostd/net/file_unix.go.html#3269669">syscall</a></span><span class="op" id="3272864">.</span><span class="ident" id="3272865"><a href="/gostd/syscall/zerrors_linux_amd64.go.html#2601331">EINVAL</a></span><br>
<span class="lineno"></span><span class="op" id="3272872">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
