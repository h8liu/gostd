<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html" class="current">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1629403">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1629459">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1629513">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1629564">//&nbsp;Software&nbsp;IEEE754&nbsp;64-bit&nbsp;floating&nbsp;point.</span><br>
<span class="lineno"></span><span class="comment" id="1629607">//&nbsp;Only&nbsp;referred&nbsp;to&nbsp;(and&nbsp;thus&nbsp;linked&nbsp;in)&nbsp;by&nbsp;arm&nbsp;port</span><br>
<span class="lineno"></span><span class="comment" id="1629660">//&nbsp;and&nbsp;by&nbsp;tests&nbsp;in&nbsp;this&nbsp;directory.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1629696">package</span>&nbsp;<span class="ident" id="1629704">runtime</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1629713">const</span>&nbsp;<span class="op" id="1629719">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1629722">mantbits64</span>&nbsp;<span class="builtintype" id="1629733">uint</span>&nbsp;<span class="op" id="1629738">=</span>&nbsp;<span class="num" id="1629740">52</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1629744">expbits64</span>&nbsp;&nbsp;<span class="builtintype" id="1629755">uint</span>&nbsp;<span class="op" id="1629760">=</span>&nbsp;<span class="num" id="1629762">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1629766">bias64</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1629782">=</span>&nbsp;<span class="op" id="1629784">-</span><span class="num" id="1629785">1</span><span class="op" id="1629786">&lt;&lt;</span><span class="op" id="1629788">(</span><span class="ident" id="1629789">expbits64</span><span class="op" id="1629798">-</span><span class="num" id="1629799">1</span><span class="op" id="1629800">)</span>&nbsp;<span class="op" id="1629802">+</span>&nbsp;<span class="num" id="1629804">1</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1629808">nan64</span>&nbsp;<span class="builtintype" id="1629814">uint64</span>&nbsp;<span class="op" id="1629821">=</span>&nbsp;<span class="op" id="1629823">(</span><span class="num" id="1629824">1</span><span class="op" id="1629825">&lt;&lt;</span><span class="ident" id="1629827">expbits64</span><span class="op" id="1629836">-</span><span class="num" id="1629837">1</span><span class="op" id="1629838">)</span><span class="op" id="1629839">&lt;&lt;</span><span class="ident" id="1629841">mantbits64</span>&nbsp;<span class="op" id="1629852">+</span>&nbsp;<span class="num" id="1629854">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1629857">inf64</span>&nbsp;<span class="builtintype" id="1629863">uint64</span>&nbsp;<span class="op" id="1629870">=</span>&nbsp;<span class="op" id="1629872">(</span><span class="num" id="1629873">1</span><span class="op" id="1629874">&lt;&lt;</span><span class="ident" id="1629876">expbits64</span>&nbsp;<span class="op" id="1629886">-</span>&nbsp;<span class="num" id="1629888">1</span><span class="op" id="1629889">)</span>&nbsp;<span class="op" id="1629891">&lt;&lt;</span>&nbsp;<span class="ident" id="1629894">mantbits64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1629906">neg64</span>&nbsp;<span class="builtintype" id="1629912">uint64</span>&nbsp;<span class="op" id="1629919">=</span>&nbsp;<span class="num" id="1629921">1</span>&nbsp;<span class="op" id="1629923">&lt;&lt;</span>&nbsp;<span class="op" id="1629926">(</span><span class="ident" id="1629927">expbits64</span>&nbsp;<span class="op" id="1629937">+</span>&nbsp;<span class="ident" id="1629939">mantbits64</span><span class="op" id="1629949">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1629953">mantbits32</span>&nbsp;<span class="builtintype" id="1629964">uint</span>&nbsp;<span class="op" id="1629969">=</span>&nbsp;<span class="num" id="1629971">23</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1629975">expbits32</span>&nbsp;&nbsp;<span class="builtintype" id="1629986">uint</span>&nbsp;<span class="op" id="1629991">=</span>&nbsp;<span class="num" id="1629993">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1629996">bias32</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1630012">=</span>&nbsp;<span class="op" id="1630014">-</span><span class="num" id="1630015">1</span><span class="op" id="1630016">&lt;&lt;</span><span class="op" id="1630018">(</span><span class="ident" id="1630019">expbits32</span><span class="op" id="1630028">-</span><span class="num" id="1630029">1</span><span class="op" id="1630030">)</span>&nbsp;<span class="op" id="1630032">+</span>&nbsp;<span class="num" id="1630034">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630038">nan32</span>&nbsp;<span class="builtintype" id="1630044">uint32</span>&nbsp;<span class="op" id="1630051">=</span>&nbsp;<span class="op" id="1630053">(</span><span class="num" id="1630054">1</span><span class="op" id="1630055">&lt;&lt;</span><span class="ident" id="1630057">expbits32</span><span class="op" id="1630066">-</span><span class="num" id="1630067">1</span><span class="op" id="1630068">)</span><span class="op" id="1630069">&lt;&lt;</span><span class="ident" id="1630071">mantbits32</span>&nbsp;<span class="op" id="1630082">+</span>&nbsp;<span class="num" id="1630084">1</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630087">inf32</span>&nbsp;<span class="builtintype" id="1630093">uint32</span>&nbsp;<span class="op" id="1630100">=</span>&nbsp;<span class="op" id="1630102">(</span><span class="num" id="1630103">1</span><span class="op" id="1630104">&lt;&lt;</span><span class="ident" id="1630106">expbits32</span>&nbsp;<span class="op" id="1630116">-</span>&nbsp;<span class="num" id="1630118">1</span><span class="op" id="1630119">)</span>&nbsp;<span class="op" id="1630121">&lt;&lt;</span>&nbsp;<span class="ident" id="1630124">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630136">neg32</span>&nbsp;<span class="builtintype" id="1630142">uint32</span>&nbsp;<span class="op" id="1630149">=</span>&nbsp;<span class="num" id="1630151">1</span>&nbsp;<span class="op" id="1630153">&lt;&lt;</span>&nbsp;<span class="op" id="1630156">(</span><span class="ident" id="1630157">expbits32</span>&nbsp;<span class="op" id="1630167">+</span>&nbsp;<span class="ident" id="1630169">mantbits32</span><span class="op" id="1630179">)</span><br>
<span class="lineno"></span><span class="op" id="1630181">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1630184">func</span>&nbsp;<span class="ident" id="1630189">funpack64</span><span class="op" id="1630198">(</span><span class="ident" id="1630199">f</span>&nbsp;<span class="builtintype" id="1630201">uint64</span><span class="op" id="1630207">)</span>&nbsp;<span class="op" id="1630209">(</span><span class="ident" id="1630210">sign</span><span class="op" id="1630214">,</span>&nbsp;<span class="ident" id="1630216">mant</span>&nbsp;<span class="builtintype" id="1630221">uint64</span><span class="op" id="1630227">,</span>&nbsp;<span class="ident" id="1630229">exp</span>&nbsp;<span class="builtintype" id="1630233">int</span><span class="op" id="1630236">,</span>&nbsp;<span class="ident" id="1630238">inf</span><span class="op" id="1630241">,</span>&nbsp;<span class="ident" id="1630243">nan</span>&nbsp;<span class="builtintype" id="1630247">bool</span><span class="op" id="1630251">)</span>&nbsp;<span class="op" id="1630253">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630256">sign</span>&nbsp;<span class="op" id="1630261">=</span>&nbsp;<span class="ident" id="1630263">f</span>&nbsp;<span class="op" id="1630265">&amp;</span>&nbsp;<span class="op" id="1630267">(</span><span class="num" id="1630268">1</span>&nbsp;<span class="op" id="1630270">&lt;&lt;</span>&nbsp;<span class="op" id="1630273">(</span><span class="ident" id="1630274">mantbits64</span>&nbsp;<span class="op" id="1630285">+</span>&nbsp;<span class="ident" id="1630287">expbits64</span><span class="op" id="1630296">)</span><span class="op" id="1630297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630300">mant</span>&nbsp;<span class="op" id="1630305">=</span>&nbsp;<span class="ident" id="1630307">f</span>&nbsp;<span class="op" id="1630309">&amp;</span>&nbsp;<span class="op" id="1630311">(</span><span class="num" id="1630312">1</span><span class="op" id="1630313">&lt;&lt;</span><span class="ident" id="1630315">mantbits64</span>&nbsp;<span class="op" id="1630326">-</span>&nbsp;<span class="num" id="1630328">1</span><span class="op" id="1630329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630332">exp</span>&nbsp;<span class="op" id="1630336">=</span>&nbsp;<span class="builtintype" id="1630338">int</span><span class="op" id="1630341">(</span><span class="ident" id="1630342">f</span><span class="op" id="1630343">&gt;&gt;</span><span class="ident" id="1630345">mantbits64</span><span class="op" id="1630355">)</span>&nbsp;<span class="op" id="1630357">&amp;</span>&nbsp;<span class="op" id="1630359">(</span><span class="num" id="1630360">1</span><span class="op" id="1630361">&lt;&lt;</span><span class="ident" id="1630363">expbits64</span>&nbsp;<span class="op" id="1630373">-</span>&nbsp;<span class="num" id="1630375">1</span><span class="op" id="1630376">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630380">switch</span>&nbsp;<span class="ident" id="1630387">exp</span>&nbsp;<span class="op" id="1630391">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630394">case</span>&nbsp;<span class="num" id="1630399">1</span><span class="op" id="1630400">&lt;&lt;</span><span class="ident" id="1630402">expbits64</span>&nbsp;<span class="op" id="1630412">-</span>&nbsp;<span class="num" id="1630414">1</span><span class="op" id="1630415">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630419">if</span>&nbsp;<span class="ident" id="1630422">mant</span>&nbsp;<span class="op" id="1630427">!=</span>&nbsp;<span class="num" id="1630430">0</span>&nbsp;<span class="op" id="1630432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630437">nan</span>&nbsp;<span class="op" id="1630441">=</span>&nbsp;<span class="builtintype" id="1630443">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630451">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1630460">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630464">inf</span>&nbsp;<span class="op" id="1630468">=</span>&nbsp;<span class="builtintype" id="1630470">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630477">return</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630486">case</span>&nbsp;<span class="num" id="1630491">0</span><span class="op" id="1630492">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1630496">//&nbsp;denormalized</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630514">if</span>&nbsp;<span class="ident" id="1630517">mant</span>&nbsp;<span class="op" id="1630522">!=</span>&nbsp;<span class="num" id="1630525">0</span>&nbsp;<span class="op" id="1630527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630532">exp</span>&nbsp;<span class="op" id="1630536">+=</span>&nbsp;<span class="ident" id="1630539">bias64</span>&nbsp;<span class="op" id="1630546">+</span>&nbsp;<span class="num" id="1630548">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630553">for</span>&nbsp;<span class="ident" id="1630557">mant</span>&nbsp;<span class="op" id="1630562">&lt;</span>&nbsp;<span class="num" id="1630564">1</span><span class="op" id="1630565">&lt;&lt;</span><span class="ident" id="1630567">mantbits64</span>&nbsp;<span class="op" id="1630578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630584">mant</span>&nbsp;<span class="op" id="1630589">&lt;&lt;=</span>&nbsp;<span class="num" id="1630593">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630599">exp</span><span class="op" id="1630602">--</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1630608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1630612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630616">default</span><span class="op" id="1630623">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1630627">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630653">mant</span>&nbsp;<span class="op" id="1630658">|=</span>&nbsp;<span class="num" id="1630661">1</span>&nbsp;<span class="op" id="1630663">&lt;&lt;</span>&nbsp;<span class="ident" id="1630666">mantbits64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630679">exp</span>&nbsp;<span class="op" id="1630683">+=</span>&nbsp;<span class="ident" id="1630686">bias64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1630694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630697">return</span><br>
<span class="lineno"></span><span class="op" id="1630704">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="1630707">func</span>&nbsp;<span class="ident" id="1630712">funpack32</span><span class="op" id="1630721">(</span><span class="ident" id="1630722">f</span>&nbsp;<span class="builtintype" id="1630724">uint32</span><span class="op" id="1630730">)</span>&nbsp;<span class="op" id="1630732">(</span><span class="ident" id="1630733">sign</span><span class="op" id="1630737">,</span>&nbsp;<span class="ident" id="1630739">mant</span>&nbsp;<span class="builtintype" id="1630744">uint32</span><span class="op" id="1630750">,</span>&nbsp;<span class="ident" id="1630752">exp</span>&nbsp;<span class="builtintype" id="1630756">int</span><span class="op" id="1630759">,</span>&nbsp;<span class="ident" id="1630761">inf</span><span class="op" id="1630764">,</span>&nbsp;<span class="ident" id="1630766">nan</span>&nbsp;<span class="builtintype" id="1630770">bool</span><span class="op" id="1630774">)</span>&nbsp;<span class="op" id="1630776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630779">sign</span>&nbsp;<span class="op" id="1630784">=</span>&nbsp;<span class="ident" id="1630786">f</span>&nbsp;<span class="op" id="1630788">&amp;</span>&nbsp;<span class="op" id="1630790">(</span><span class="num" id="1630791">1</span>&nbsp;<span class="op" id="1630793">&lt;&lt;</span>&nbsp;<span class="op" id="1630796">(</span><span class="ident" id="1630797">mantbits32</span>&nbsp;<span class="op" id="1630808">+</span>&nbsp;<span class="ident" id="1630810">expbits32</span><span class="op" id="1630819">)</span><span class="op" id="1630820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630823">mant</span>&nbsp;<span class="op" id="1630828">=</span>&nbsp;<span class="ident" id="1630830">f</span>&nbsp;<span class="op" id="1630832">&amp;</span>&nbsp;<span class="op" id="1630834">(</span><span class="num" id="1630835">1</span><span class="op" id="1630836">&lt;&lt;</span><span class="ident" id="1630838">mantbits32</span>&nbsp;<span class="op" id="1630849">-</span>&nbsp;<span class="num" id="1630851">1</span><span class="op" id="1630852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630855">exp</span>&nbsp;<span class="op" id="1630859">=</span>&nbsp;<span class="builtintype" id="1630861">int</span><span class="op" id="1630864">(</span><span class="ident" id="1630865">f</span><span class="op" id="1630866">&gt;&gt;</span><span class="ident" id="1630868">mantbits32</span><span class="op" id="1630878">)</span>&nbsp;<span class="op" id="1630880">&amp;</span>&nbsp;<span class="op" id="1630882">(</span><span class="num" id="1630883">1</span><span class="op" id="1630884">&lt;&lt;</span><span class="ident" id="1630886">expbits32</span>&nbsp;<span class="op" id="1630896">-</span>&nbsp;<span class="num" id="1630898">1</span><span class="op" id="1630899">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630903">switch</span>&nbsp;<span class="ident" id="1630910">exp</span>&nbsp;<span class="op" id="1630914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630917">case</span>&nbsp;<span class="num" id="1630922">1</span><span class="op" id="1630923">&lt;&lt;</span><span class="ident" id="1630925">expbits32</span>&nbsp;<span class="op" id="1630935">-</span>&nbsp;<span class="num" id="1630937">1</span><span class="op" id="1630938">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630942">if</span>&nbsp;<span class="ident" id="1630945">mant</span>&nbsp;<span class="op" id="1630950">!=</span>&nbsp;<span class="num" id="1630953">0</span>&nbsp;<span class="op" id="1630955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630960">nan</span>&nbsp;<span class="op" id="1630964">=</span>&nbsp;<span class="builtintype" id="1630966">true</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1630974">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1630983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1630987">inf</span>&nbsp;<span class="op" id="1630991">=</span>&nbsp;<span class="builtintype" id="1630993">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631000">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631009">case</span>&nbsp;<span class="num" id="1631014">0</span><span class="op" id="1631015">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1631019">//&nbsp;denormalized</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631037">if</span>&nbsp;<span class="ident" id="1631040">mant</span>&nbsp;<span class="op" id="1631045">!=</span>&nbsp;<span class="num" id="1631048">0</span>&nbsp;<span class="op" id="1631050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631055">exp</span>&nbsp;<span class="op" id="1631059">+=</span>&nbsp;<span class="ident" id="1631062">bias32</span>&nbsp;<span class="op" id="1631069">+</span>&nbsp;<span class="num" id="1631071">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631076">for</span>&nbsp;<span class="ident" id="1631080">mant</span>&nbsp;<span class="op" id="1631085">&lt;</span>&nbsp;<span class="num" id="1631087">1</span><span class="op" id="1631088">&lt;&lt;</span><span class="ident" id="1631090">mantbits32</span>&nbsp;<span class="op" id="1631101">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631107">mant</span>&nbsp;<span class="op" id="1631112">&lt;&lt;=</span>&nbsp;<span class="num" id="1631116">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631122">exp</span><span class="op" id="1631125">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631139">default</span><span class="op" id="1631146">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1631150">//&nbsp;add&nbsp;implicit&nbsp;top&nbsp;bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631176">mant</span>&nbsp;<span class="op" id="1631181">|=</span>&nbsp;<span class="num" id="1631184">1</span>&nbsp;<span class="op" id="1631186">&lt;&lt;</span>&nbsp;<span class="ident" id="1631189">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631202">exp</span>&nbsp;<span class="op" id="1631206">+=</span>&nbsp;<span class="ident" id="1631209">bias32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631217">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631220">return</span><br>
<span class="lineno"></span><span class="op" id="1631227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1631230">func</span>&nbsp;<span class="ident" id="1631235">fpack64</span><span class="op" id="1631242">(</span><span class="ident" id="1631243">sign</span><span class="op" id="1631247">,</span>&nbsp;<span class="ident" id="1631249">mant</span>&nbsp;<span class="builtintype" id="1631254">uint64</span><span class="op" id="1631260">,</span>&nbsp;<span class="ident" id="1631262">exp</span>&nbsp;<span class="builtintype" id="1631266">int</span><span class="op" id="1631269">,</span>&nbsp;<span class="ident" id="1631271">trunc</span>&nbsp;<span class="builtintype" id="1631277">uint64</span><span class="op" id="1631283">)</span>&nbsp;<span class="builtintype" id="1631285">uint64</span>&nbsp;<span class="op" id="1631292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631295">mant0</span><span class="op" id="1631300">,</span>&nbsp;<span class="ident" id="1631302">exp0</span><span class="op" id="1631306">,</span>&nbsp;<span class="ident" id="1631308">trunc0</span>&nbsp;<span class="op" id="1631315">:=</span>&nbsp;<span class="ident" id="1631318">mant</span><span class="op" id="1631322">,</span>&nbsp;<span class="ident" id="1631324">exp</span><span class="op" id="1631327">,</span>&nbsp;<span class="ident" id="1631329">trunc</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631336">if</span>&nbsp;<span class="ident" id="1631339">mant</span>&nbsp;<span class="op" id="1631344">==</span>&nbsp;<span class="num" id="1631347">0</span>&nbsp;<span class="op" id="1631349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631353">return</span>&nbsp;<span class="ident" id="1631360">sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631369">for</span>&nbsp;<span class="ident" id="1631373">mant</span>&nbsp;<span class="op" id="1631378">&lt;</span>&nbsp;<span class="num" id="1631380">1</span><span class="op" id="1631381">&lt;&lt;</span><span class="ident" id="1631383">mantbits64</span>&nbsp;<span class="op" id="1631394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631398">mant</span>&nbsp;<span class="op" id="1631403">&lt;&lt;=</span>&nbsp;<span class="num" id="1631407">1</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631411">exp</span><span class="op" id="1631414">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631421">for</span>&nbsp;<span class="ident" id="1631425">mant</span>&nbsp;<span class="op" id="1631430">&gt;=</span>&nbsp;<span class="num" id="1631433">4</span><span class="op" id="1631434">&lt;&lt;</span><span class="ident" id="1631436">mantbits64</span>&nbsp;<span class="op" id="1631447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631451">trunc</span>&nbsp;<span class="op" id="1631457">|=</span>&nbsp;<span class="ident" id="1631460">mant</span>&nbsp;<span class="op" id="1631465">&amp;</span>&nbsp;<span class="num" id="1631467">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631471">mant</span>&nbsp;<span class="op" id="1631476">&gt;&gt;=</span>&nbsp;<span class="num" id="1631480">1</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631484">exp</span><span class="op" id="1631487">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631494">if</span>&nbsp;<span class="ident" id="1631497">mant</span>&nbsp;<span class="op" id="1631502">&gt;=</span>&nbsp;<span class="num" id="1631505">2</span><span class="op" id="1631506">&lt;&lt;</span><span class="ident" id="1631508">mantbits64</span>&nbsp;<span class="op" id="1631519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631523">if</span>&nbsp;<span class="ident" id="1631526">mant</span><span class="op" id="1631530">&amp;</span><span class="num" id="1631531">1</span>&nbsp;<span class="op" id="1631533">!=</span>&nbsp;<span class="num" id="1631536">0</span>&nbsp;<span class="op" id="1631538">&amp;&amp;</span>&nbsp;<span class="op" id="1631541">(</span><span class="ident" id="1631542">trunc</span>&nbsp;<span class="op" id="1631548">!=</span>&nbsp;<span class="num" id="1631551">0</span>&nbsp;<span class="op" id="1631553">||</span>&nbsp;<span class="ident" id="1631556">mant</span><span class="op" id="1631560">&amp;</span><span class="num" id="1631561">2</span>&nbsp;<span class="op" id="1631563">!=</span>&nbsp;<span class="num" id="1631566">0</span><span class="op" id="1631567">)</span>&nbsp;<span class="op" id="1631569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631574">mant</span><span class="op" id="1631578">++</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631584">if</span>&nbsp;<span class="ident" id="1631587">mant</span>&nbsp;<span class="op" id="1631592">&gt;=</span>&nbsp;<span class="num" id="1631595">4</span><span class="op" id="1631596">&lt;&lt;</span><span class="ident" id="1631598">mantbits64</span>&nbsp;<span class="op" id="1631609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631615">mant</span>&nbsp;<span class="op" id="1631620">&gt;&gt;=</span>&nbsp;<span class="num" id="1631624">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631630">exp</span><span class="op" id="1631633">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631643">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631647">mant</span>&nbsp;<span class="op" id="1631652">&gt;&gt;=</span>&nbsp;<span class="num" id="1631656">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631660">exp</span><span class="op" id="1631663">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631670">if</span>&nbsp;<span class="ident" id="1631673">exp</span>&nbsp;<span class="op" id="1631677">&gt;=</span>&nbsp;<span class="num" id="1631680">1</span><span class="op" id="1631681">&lt;&lt;</span><span class="ident" id="1631683">expbits64</span><span class="op" id="1631692">-</span><span class="num" id="1631693">1</span><span class="op" id="1631694">+</span><span class="ident" id="1631695">bias64</span>&nbsp;<span class="op" id="1631702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631706">return</span>&nbsp;<span class="ident" id="1631713">sign</span>&nbsp;<span class="op" id="1631718">^</span>&nbsp;<span class="ident" id="1631720">inf64</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631730">if</span>&nbsp;<span class="ident" id="1631733">exp</span>&nbsp;<span class="op" id="1631737">&lt;</span>&nbsp;<span class="ident" id="1631739">bias64</span><span class="op" id="1631745">+</span><span class="num" id="1631746">1</span>&nbsp;<span class="op" id="1631748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631752">if</span>&nbsp;<span class="ident" id="1631755">exp</span>&nbsp;<span class="op" id="1631759">&lt;</span>&nbsp;<span class="ident" id="1631761">bias64</span><span class="op" id="1631767">-</span><span class="builtintype" id="1631768">int</span><span class="op" id="1631771">(</span><span class="ident" id="1631772">mantbits64</span><span class="op" id="1631782">)</span>&nbsp;<span class="op" id="1631784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631789">return</span>&nbsp;<span class="ident" id="1631796">sign</span>&nbsp;<span class="op" id="1631801">|</span>&nbsp;<span class="num" id="1631803">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631807">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1631811">//&nbsp;repeat&nbsp;expecting&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631842">mant</span><span class="op" id="1631846">,</span>&nbsp;<span class="ident" id="1631848">exp</span><span class="op" id="1631851">,</span>&nbsp;<span class="ident" id="1631853">trunc</span>&nbsp;<span class="op" id="1631859">=</span>&nbsp;<span class="ident" id="1631861">mant0</span><span class="op" id="1631866">,</span>&nbsp;<span class="ident" id="1631868">exp0</span><span class="op" id="1631872">,</span>&nbsp;<span class="ident" id="1631874">trunc0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631883">for</span>&nbsp;<span class="ident" id="1631887">exp</span>&nbsp;<span class="op" id="1631891">&lt;</span>&nbsp;<span class="ident" id="1631893">bias64</span>&nbsp;<span class="op" id="1631900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631905">trunc</span>&nbsp;<span class="op" id="1631911">|=</span>&nbsp;<span class="ident" id="1631914">mant</span>&nbsp;<span class="op" id="1631919">&amp;</span>&nbsp;<span class="num" id="1631921">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631926">mant</span>&nbsp;<span class="op" id="1631931">&gt;&gt;=</span>&nbsp;<span class="num" id="1631935">1</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1631940">exp</span><span class="op" id="1631943">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1631948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1631952">if</span>&nbsp;<span class="ident" id="1631955">mant</span><span class="op" id="1631959">&amp;</span><span class="num" id="1631960">1</span>&nbsp;<span class="op" id="1631962">!=</span>&nbsp;<span class="num" id="1631965">0</span>&nbsp;<span class="op" id="1631967">&amp;&amp;</span>&nbsp;<span class="op" id="1631970">(</span><span class="ident" id="1631971">trunc</span>&nbsp;<span class="op" id="1631977">!=</span>&nbsp;<span class="num" id="1631980">0</span>&nbsp;<span class="op" id="1631982">||</span>&nbsp;<span class="ident" id="1631985">mant</span><span class="op" id="1631989">&amp;</span><span class="num" id="1631990">2</span>&nbsp;<span class="op" id="1631992">!=</span>&nbsp;<span class="num" id="1631995">0</span><span class="op" id="1631996">)</span>&nbsp;<span class="op" id="1631998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632003">mant</span><span class="op" id="1632007">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632012">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632016">mant</span>&nbsp;<span class="op" id="1632021">&gt;&gt;=</span>&nbsp;<span class="num" id="1632025">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632029">exp</span><span class="op" id="1632032">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632037">if</span>&nbsp;<span class="ident" id="1632040">mant</span>&nbsp;<span class="op" id="1632045">&lt;</span>&nbsp;<span class="num" id="1632047">1</span><span class="op" id="1632048">&lt;&lt;</span><span class="ident" id="1632050">mantbits64</span>&nbsp;<span class="op" id="1632061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632066">return</span>&nbsp;<span class="ident" id="1632073">sign</span>&nbsp;<span class="op" id="1632078">|</span>&nbsp;<span class="ident" id="1632080">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632087">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632093">return</span>&nbsp;<span class="ident" id="1632100">sign</span>&nbsp;<span class="op" id="1632105">|</span>&nbsp;<span class="builtintype" id="1632107">uint64</span><span class="op" id="1632113">(</span><span class="ident" id="1632114">exp</span><span class="op" id="1632117">-</span><span class="ident" id="1632118">bias64</span><span class="op" id="1632124">)</span><span class="op" id="1632125">&lt;&lt;</span><span class="ident" id="1632127">mantbits64</span>&nbsp;<span class="op" id="1632138">|</span>&nbsp;<span class="ident" id="1632140">mant</span><span class="op" id="1632144">&amp;</span><span class="op" id="1632145">(</span><span class="num" id="1632146">1</span><span class="op" id="1632147">&lt;&lt;</span><span class="ident" id="1632149">mantbits64</span><span class="op" id="1632159">-</span><span class="num" id="1632160">1</span><span class="op" id="1632161">)</span><br>
<span class="lineno"></span><span class="op" id="1632163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1632166">func</span>&nbsp;<span class="ident" id="1632171">fpack32</span><span class="op" id="1632178">(</span><span class="ident" id="1632179">sign</span><span class="op" id="1632183">,</span>&nbsp;<span class="ident" id="1632185">mant</span>&nbsp;<span class="builtintype" id="1632190">uint32</span><span class="op" id="1632196">,</span>&nbsp;<span class="ident" id="1632198">exp</span>&nbsp;<span class="builtintype" id="1632202">int</span><span class="op" id="1632205">,</span>&nbsp;<span class="ident" id="1632207">trunc</span>&nbsp;<span class="builtintype" id="1632213">uint32</span><span class="op" id="1632219">)</span>&nbsp;<span class="builtintype" id="1632221">uint32</span>&nbsp;<span class="op" id="1632228">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632231">mant0</span><span class="op" id="1632236">,</span>&nbsp;<span class="ident" id="1632238">exp0</span><span class="op" id="1632242">,</span>&nbsp;<span class="ident" id="1632244">trunc0</span>&nbsp;<span class="op" id="1632251">:=</span>&nbsp;<span class="ident" id="1632254">mant</span><span class="op" id="1632258">,</span>&nbsp;<span class="ident" id="1632260">exp</span><span class="op" id="1632263">,</span>&nbsp;<span class="ident" id="1632265">trunc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632272">if</span>&nbsp;<span class="ident" id="1632275">mant</span>&nbsp;<span class="op" id="1632280">==</span>&nbsp;<span class="num" id="1632283">0</span>&nbsp;<span class="op" id="1632285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632289">return</span>&nbsp;<span class="ident" id="1632296">sign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632305">for</span>&nbsp;<span class="ident" id="1632309">mant</span>&nbsp;<span class="op" id="1632314">&lt;</span>&nbsp;<span class="num" id="1632316">1</span><span class="op" id="1632317">&lt;&lt;</span><span class="ident" id="1632319">mantbits32</span>&nbsp;<span class="op" id="1632330">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632334">mant</span>&nbsp;<span class="op" id="1632339">&lt;&lt;=</span>&nbsp;<span class="num" id="1632343">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632347">exp</span><span class="op" id="1632350">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632357">for</span>&nbsp;<span class="ident" id="1632361">mant</span>&nbsp;<span class="op" id="1632366">&gt;=</span>&nbsp;<span class="num" id="1632369">4</span><span class="op" id="1632370">&lt;&lt;</span><span class="ident" id="1632372">mantbits32</span>&nbsp;<span class="op" id="1632383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632387">trunc</span>&nbsp;<span class="op" id="1632393">|=</span>&nbsp;<span class="ident" id="1632396">mant</span>&nbsp;<span class="op" id="1632401">&amp;</span>&nbsp;<span class="num" id="1632403">1</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632407">mant</span>&nbsp;<span class="op" id="1632412">&gt;&gt;=</span>&nbsp;<span class="num" id="1632416">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632420">exp</span><span class="op" id="1632423">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632427">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632430">if</span>&nbsp;<span class="ident" id="1632433">mant</span>&nbsp;<span class="op" id="1632438">&gt;=</span>&nbsp;<span class="num" id="1632441">2</span><span class="op" id="1632442">&lt;&lt;</span><span class="ident" id="1632444">mantbits32</span>&nbsp;<span class="op" id="1632455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632459">if</span>&nbsp;<span class="ident" id="1632462">mant</span><span class="op" id="1632466">&amp;</span><span class="num" id="1632467">1</span>&nbsp;<span class="op" id="1632469">!=</span>&nbsp;<span class="num" id="1632472">0</span>&nbsp;<span class="op" id="1632474">&amp;&amp;</span>&nbsp;<span class="op" id="1632477">(</span><span class="ident" id="1632478">trunc</span>&nbsp;<span class="op" id="1632484">!=</span>&nbsp;<span class="num" id="1632487">0</span>&nbsp;<span class="op" id="1632489">||</span>&nbsp;<span class="ident" id="1632492">mant</span><span class="op" id="1632496">&amp;</span><span class="num" id="1632497">2</span>&nbsp;<span class="op" id="1632499">!=</span>&nbsp;<span class="num" id="1632502">0</span><span class="op" id="1632503">)</span>&nbsp;<span class="op" id="1632505">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632510">mant</span><span class="op" id="1632514">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632520">if</span>&nbsp;<span class="ident" id="1632523">mant</span>&nbsp;<span class="op" id="1632528">&gt;=</span>&nbsp;<span class="num" id="1632531">4</span><span class="op" id="1632532">&lt;&lt;</span><span class="ident" id="1632534">mantbits32</span>&nbsp;<span class="op" id="1632545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632551">mant</span>&nbsp;<span class="op" id="1632556">&gt;&gt;=</span>&nbsp;<span class="num" id="1632560">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632566">exp</span><span class="op" id="1632569">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632575">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632583">mant</span>&nbsp;<span class="op" id="1632588">&gt;&gt;=</span>&nbsp;<span class="num" id="1632592">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632596">exp</span><span class="op" id="1632599">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632606">if</span>&nbsp;<span class="ident" id="1632609">exp</span>&nbsp;<span class="op" id="1632613">&gt;=</span>&nbsp;<span class="num" id="1632616">1</span><span class="op" id="1632617">&lt;&lt;</span><span class="ident" id="1632619">expbits32</span><span class="op" id="1632628">-</span><span class="num" id="1632629">1</span><span class="op" id="1632630">+</span><span class="ident" id="1632631">bias32</span>&nbsp;<span class="op" id="1632638">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632642">return</span>&nbsp;<span class="ident" id="1632649">sign</span>&nbsp;<span class="op" id="1632654">^</span>&nbsp;<span class="ident" id="1632656">inf32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632666">if</span>&nbsp;<span class="ident" id="1632669">exp</span>&nbsp;<span class="op" id="1632673">&lt;</span>&nbsp;<span class="ident" id="1632675">bias32</span><span class="op" id="1632681">+</span><span class="num" id="1632682">1</span>&nbsp;<span class="op" id="1632684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632688">if</span>&nbsp;<span class="ident" id="1632691">exp</span>&nbsp;<span class="op" id="1632695">&lt;</span>&nbsp;<span class="ident" id="1632697">bias32</span><span class="op" id="1632703">-</span><span class="builtintype" id="1632704">int</span><span class="op" id="1632707">(</span><span class="ident" id="1632708">mantbits32</span><span class="op" id="1632718">)</span>&nbsp;<span class="op" id="1632720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632725">return</span>&nbsp;<span class="ident" id="1632732">sign</span>&nbsp;<span class="op" id="1632737">|</span>&nbsp;<span class="num" id="1632739">0</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1632747">//&nbsp;repeat&nbsp;expecting&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632778">mant</span><span class="op" id="1632782">,</span>&nbsp;<span class="ident" id="1632784">exp</span><span class="op" id="1632787">,</span>&nbsp;<span class="ident" id="1632789">trunc</span>&nbsp;<span class="op" id="1632795">=</span>&nbsp;<span class="ident" id="1632797">mant0</span><span class="op" id="1632802">,</span>&nbsp;<span class="ident" id="1632804">exp0</span><span class="op" id="1632808">,</span>&nbsp;<span class="ident" id="1632810">trunc0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632819">for</span>&nbsp;<span class="ident" id="1632823">exp</span>&nbsp;<span class="op" id="1632827">&lt;</span>&nbsp;<span class="ident" id="1632829">bias32</span>&nbsp;<span class="op" id="1632836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632841">trunc</span>&nbsp;<span class="op" id="1632847">|=</span>&nbsp;<span class="ident" id="1632850">mant</span>&nbsp;<span class="op" id="1632855">&amp;</span>&nbsp;<span class="num" id="1632857">1</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632862">mant</span>&nbsp;<span class="op" id="1632867">&gt;&gt;=</span>&nbsp;<span class="num" id="1632871">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632876">exp</span><span class="op" id="1632879">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632888">if</span>&nbsp;<span class="ident" id="1632891">mant</span><span class="op" id="1632895">&amp;</span><span class="num" id="1632896">1</span>&nbsp;<span class="op" id="1632898">!=</span>&nbsp;<span class="num" id="1632901">0</span>&nbsp;<span class="op" id="1632903">&amp;&amp;</span>&nbsp;<span class="op" id="1632906">(</span><span class="ident" id="1632907">trunc</span>&nbsp;<span class="op" id="1632913">!=</span>&nbsp;<span class="num" id="1632916">0</span>&nbsp;<span class="op" id="1632918">||</span>&nbsp;<span class="ident" id="1632921">mant</span><span class="op" id="1632925">&amp;</span><span class="num" id="1632926">2</span>&nbsp;<span class="op" id="1632928">!=</span>&nbsp;<span class="num" id="1632931">0</span><span class="op" id="1632932">)</span>&nbsp;<span class="op" id="1632934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632939">mant</span><span class="op" id="1632943">++</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1632948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632952">mant</span>&nbsp;<span class="op" id="1632957">&gt;&gt;=</span>&nbsp;<span class="num" id="1632961">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1632965">exp</span><span class="op" id="1632968">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1632973">if</span>&nbsp;<span class="ident" id="1632976">mant</span>&nbsp;<span class="op" id="1632981">&lt;</span>&nbsp;<span class="num" id="1632983">1</span><span class="op" id="1632984">&lt;&lt;</span><span class="ident" id="1632986">mantbits32</span>&nbsp;<span class="op" id="1632997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633002">return</span>&nbsp;<span class="ident" id="1633009">sign</span>&nbsp;<span class="op" id="1633014">|</span>&nbsp;<span class="ident" id="1633016">mant</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1633023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1633026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633029">return</span>&nbsp;<span class="ident" id="1633036">sign</span>&nbsp;<span class="op" id="1633041">|</span>&nbsp;<span class="builtintype" id="1633043">uint32</span><span class="op" id="1633049">(</span><span class="ident" id="1633050">exp</span><span class="op" id="1633053">-</span><span class="ident" id="1633054">bias32</span><span class="op" id="1633060">)</span><span class="op" id="1633061">&lt;&lt;</span><span class="ident" id="1633063">mantbits32</span>&nbsp;<span class="op" id="1633074">|</span>&nbsp;<span class="ident" id="1633076">mant</span><span class="op" id="1633080">&amp;</span><span class="op" id="1633081">(</span><span class="num" id="1633082">1</span><span class="op" id="1633083">&lt;&lt;</span><span class="ident" id="1633085">mantbits32</span><span class="op" id="1633095">-</span><span class="num" id="1633096">1</span><span class="op" id="1633097">)</span><br>
<span class="lineno"></span><span class="op" id="1633099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="1633102">func</span>&nbsp;<span class="ident" id="1633107">fadd64</span><span class="op" id="1633113">(</span><span class="ident" id="1633114">f</span><span class="op" id="1633115">,</span>&nbsp;<span class="ident" id="1633117">g</span>&nbsp;<span class="builtintype" id="1633119">uint64</span><span class="op" id="1633125">)</span>&nbsp;<span class="builtintype" id="1633127">uint64</span>&nbsp;<span class="op" id="1633134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633137">fs</span><span class="op" id="1633139">,</span>&nbsp;<span class="ident" id="1633141">fm</span><span class="op" id="1633143">,</span>&nbsp;<span class="ident" id="1633145">fe</span><span class="op" id="1633147">,</span>&nbsp;<span class="ident" id="1633149">fi</span><span class="op" id="1633151">,</span>&nbsp;<span class="ident" id="1633153">fn</span>&nbsp;<span class="op" id="1633156">:=</span>&nbsp;<span class="ident" id="1633159">funpack64</span><span class="op" id="1633168">(</span><span class="ident" id="1633169">f</span><span class="op" id="1633170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633173">gs</span><span class="op" id="1633175">,</span>&nbsp;<span class="ident" id="1633177">gm</span><span class="op" id="1633179">,</span>&nbsp;<span class="ident" id="1633181">ge</span><span class="op" id="1633183">,</span>&nbsp;<span class="ident" id="1633185">gi</span><span class="op" id="1633187">,</span>&nbsp;<span class="ident" id="1633189">gn</span>&nbsp;<span class="op" id="1633192">:=</span>&nbsp;<span class="ident" id="1633195">funpack64</span><span class="op" id="1633204">(</span><span class="ident" id="1633205">g</span><span class="op" id="1633206">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1633210">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633229">switch</span>&nbsp;<span class="op" id="1633236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633239">case</span>&nbsp;<span class="ident" id="1633244">fn</span>&nbsp;<span class="op" id="1633247">||</span>&nbsp;<span class="ident" id="1633250">gn</span><span class="op" id="1633252">:</span>&nbsp;<span class="comment" id="1633254">//&nbsp;NaN&nbsp;+&nbsp;x&nbsp;or&nbsp;x&nbsp;+&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633284">return</span>&nbsp;<span class="ident" id="1633291">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633299">case</span>&nbsp;<span class="ident" id="1633304">fi</span>&nbsp;<span class="op" id="1633307">&amp;&amp;</span>&nbsp;<span class="ident" id="1633310">gi</span>&nbsp;<span class="op" id="1633313">&amp;&amp;</span>&nbsp;<span class="ident" id="1633316">fs</span>&nbsp;<span class="op" id="1633319">!=</span>&nbsp;<span class="ident" id="1633322">gs</span><span class="op" id="1633324">:</span>&nbsp;<span class="comment" id="1633326">//&nbsp;+Inf&nbsp;+&nbsp;-Inf&nbsp;or&nbsp;-Inf&nbsp;+&nbsp;+Inf&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633364">return</span>&nbsp;<span class="ident" id="1633371">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633379">case</span>&nbsp;<span class="ident" id="1633384">fi</span><span class="op" id="1633386">:</span>&nbsp;<span class="comment" id="1633388">//&nbsp;±Inf&nbsp;+&nbsp;g&nbsp;=&nbsp;±Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633411">return</span>&nbsp;<span class="ident" id="1633418">f</span><br>
<span class="lineno"></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633422">case</span>&nbsp;<span class="ident" id="1633427">gi</span><span class="op" id="1633429">:</span>&nbsp;<span class="comment" id="1633431">//&nbsp;f&nbsp;+&nbsp;±Inf&nbsp;=&nbsp;±Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633454">return</span>&nbsp;<span class="ident" id="1633461">g</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633465">case</span>&nbsp;<span class="ident" id="1633470">fm</span>&nbsp;<span class="op" id="1633473">==</span>&nbsp;<span class="num" id="1633476">0</span>&nbsp;<span class="op" id="1633478">&amp;&amp;</span>&nbsp;<span class="ident" id="1633481">gm</span>&nbsp;<span class="op" id="1633484">==</span>&nbsp;<span class="num" id="1633487">0</span>&nbsp;<span class="op" id="1633489">&amp;&amp;</span>&nbsp;<span class="ident" id="1633492">fs</span>&nbsp;<span class="op" id="1633495">!=</span>&nbsp;<span class="num" id="1633498">0</span>&nbsp;<span class="op" id="1633500">&amp;&amp;</span>&nbsp;<span class="ident" id="1633503">gs</span>&nbsp;<span class="op" id="1633506">!=</span>&nbsp;<span class="num" id="1633509">0</span><span class="op" id="1633510">:</span>&nbsp;<span class="comment" id="1633512">//&nbsp;-0&nbsp;+&nbsp;-0&nbsp;=&nbsp;-0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633530">return</span>&nbsp;<span class="ident" id="1633537">f</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633541">case</span>&nbsp;<span class="ident" id="1633546">fm</span>&nbsp;<span class="op" id="1633549">==</span>&nbsp;<span class="num" id="1633552">0</span><span class="op" id="1633553">:</span>&nbsp;<span class="comment" id="1633555">//&nbsp;0&nbsp;+&nbsp;g&nbsp;=&nbsp;g&nbsp;but&nbsp;0&nbsp;+&nbsp;-0&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633586">if</span>&nbsp;<span class="ident" id="1633589">gm</span>&nbsp;<span class="op" id="1633592">==</span>&nbsp;<span class="num" id="1633595">0</span>&nbsp;<span class="op" id="1633597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633602">g</span>&nbsp;<span class="op" id="1633604">^=</span>&nbsp;<span class="ident" id="1633607">gs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1633612">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633616">return</span>&nbsp;<span class="ident" id="1633623">g</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633627">case</span>&nbsp;<span class="ident" id="1633632">gm</span>&nbsp;<span class="op" id="1633635">==</span>&nbsp;<span class="num" id="1633638">0</span><span class="op" id="1633639">:</span>&nbsp;<span class="comment" id="1633641">//&nbsp;f&nbsp;+&nbsp;0&nbsp;=&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633656">return</span>&nbsp;<span class="ident" id="1633663">f</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1633667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633671">if</span>&nbsp;<span class="ident" id="1633674">fe</span>&nbsp;<span class="op" id="1633677">&lt;</span>&nbsp;<span class="ident" id="1633679">ge</span>&nbsp;<span class="op" id="1633682">||</span>&nbsp;<span class="ident" id="1633685">fe</span>&nbsp;<span class="op" id="1633688">==</span>&nbsp;<span class="ident" id="1633691">ge</span>&nbsp;<span class="op" id="1633694">&amp;&amp;</span>&nbsp;<span class="ident" id="1633697">fm</span>&nbsp;<span class="op" id="1633700">&lt;</span>&nbsp;<span class="ident" id="1633702">gm</span>&nbsp;<span class="op" id="1633705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633709">f</span><span class="op" id="1633710">,</span>&nbsp;<span class="ident" id="1633712">g</span><span class="op" id="1633713">,</span>&nbsp;<span class="ident" id="1633715">fs</span><span class="op" id="1633717">,</span>&nbsp;<span class="ident" id="1633719">fm</span><span class="op" id="1633721">,</span>&nbsp;<span class="ident" id="1633723">fe</span><span class="op" id="1633725">,</span>&nbsp;<span class="ident" id="1633727">gs</span><span class="op" id="1633729">,</span>&nbsp;<span class="ident" id="1633731">gm</span><span class="op" id="1633733">,</span>&nbsp;<span class="ident" id="1633735">ge</span>&nbsp;<span class="op" id="1633738">=</span>&nbsp;<span class="ident" id="1633740">g</span><span class="op" id="1633741">,</span>&nbsp;<span class="ident" id="1633743">f</span><span class="op" id="1633744">,</span>&nbsp;<span class="ident" id="1633746">gs</span><span class="op" id="1633748">,</span>&nbsp;<span class="ident" id="1633750">gm</span><span class="op" id="1633752">,</span>&nbsp;<span class="ident" id="1633754">ge</span><span class="op" id="1633756">,</span>&nbsp;<span class="ident" id="1633758">fs</span><span class="op" id="1633760">,</span>&nbsp;<span class="ident" id="1633762">fm</span><span class="op" id="1633764">,</span>&nbsp;<span class="ident" id="1633766">fe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1633770">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633774">shift</span>&nbsp;<span class="op" id="1633780">:=</span>&nbsp;<span class="builtintype" id="1633783">uint</span><span class="op" id="1633787">(</span><span class="ident" id="1633788">fe</span>&nbsp;<span class="op" id="1633791">-</span>&nbsp;<span class="ident" id="1633793">ge</span><span class="op" id="1633795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633798">fm</span>&nbsp;<span class="op" id="1633801">&lt;&lt;=</span>&nbsp;<span class="num" id="1633805">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633808">gm</span>&nbsp;<span class="op" id="1633811">&lt;&lt;=</span>&nbsp;<span class="num" id="1633815">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633818">trunc</span>&nbsp;<span class="op" id="1633824">:=</span>&nbsp;<span class="ident" id="1633827">gm</span>&nbsp;<span class="op" id="1633830">&amp;</span>&nbsp;<span class="op" id="1633832">(</span><span class="num" id="1633833">1</span><span class="op" id="1633834">&lt;&lt;</span><span class="ident" id="1633836">shift</span>&nbsp;<span class="op" id="1633842">-</span>&nbsp;<span class="num" id="1633844">1</span><span class="op" id="1633845">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633848">gm</span>&nbsp;<span class="op" id="1633851">&gt;&gt;=</span>&nbsp;<span class="ident" id="1633855">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633862">if</span>&nbsp;<span class="ident" id="1633865">fs</span>&nbsp;<span class="op" id="1633868">==</span>&nbsp;<span class="ident" id="1633871">gs</span>&nbsp;<span class="op" id="1633874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633878">fm</span>&nbsp;<span class="op" id="1633881">+=</span>&nbsp;<span class="ident" id="1633884">gm</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1633888">}</span>&nbsp;<span class="keyword" id="1633890">else</span>&nbsp;<span class="op" id="1633895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633899">fm</span>&nbsp;<span class="op" id="1633902">-=</span>&nbsp;<span class="ident" id="1633905">gm</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633910">if</span>&nbsp;<span class="ident" id="1633913">trunc</span>&nbsp;<span class="op" id="1633919">!=</span>&nbsp;<span class="num" id="1633922">0</span>&nbsp;<span class="op" id="1633924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633929">fm</span><span class="op" id="1633931">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1633936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1633939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633942">if</span>&nbsp;<span class="ident" id="1633945">fm</span>&nbsp;<span class="op" id="1633948">==</span>&nbsp;<span class="num" id="1633951">0</span>&nbsp;<span class="op" id="1633953">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1633957">fs</span>&nbsp;<span class="op" id="1633960">=</span>&nbsp;<span class="num" id="1633962">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1633965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1633968">return</span>&nbsp;<span class="ident" id="1633975">fpack64</span><span class="op" id="1633982">(</span><span class="ident" id="1633983">fs</span><span class="op" id="1633985">,</span>&nbsp;<span class="ident" id="1633987">fm</span><span class="op" id="1633989">,</span>&nbsp;<span class="ident" id="1633991">fe</span><span class="op" id="1633993">-</span><span class="num" id="1633994">2</span><span class="op" id="1633995">,</span>&nbsp;<span class="ident" id="1633997">trunc</span><span class="op" id="1634002">)</span><br>
<span class="lineno"></span><span class="op" id="1634004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="1634007">func</span>&nbsp;<span class="ident" id="1634012">fsub64</span><span class="op" id="1634018">(</span><span class="ident" id="1634019">f</span><span class="op" id="1634020">,</span>&nbsp;<span class="ident" id="1634022">g</span>&nbsp;<span class="builtintype" id="1634024">uint64</span><span class="op" id="1634030">)</span>&nbsp;<span class="builtintype" id="1634032">uint64</span>&nbsp;<span class="op" id="1634039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634042">return</span>&nbsp;<span class="ident" id="1634049">fadd64</span><span class="op" id="1634055">(</span><span class="ident" id="1634056">f</span><span class="op" id="1634057">,</span>&nbsp;<span class="ident" id="1634059">fneg64</span><span class="op" id="1634065">(</span><span class="ident" id="1634066">g</span><span class="op" id="1634067">)</span><span class="op" id="1634068">)</span><br>
<span class="lineno"></span><span class="op" id="1634070">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1634073">func</span>&nbsp;<span class="ident" id="1634078">fneg64</span><span class="op" id="1634084">(</span><span class="ident" id="1634085">f</span>&nbsp;<span class="builtintype" id="1634087">uint64</span><span class="op" id="1634093">)</span>&nbsp;<span class="builtintype" id="1634095">uint64</span>&nbsp;<span class="op" id="1634102">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634105">return</span>&nbsp;<span class="ident" id="1634112">f</span>&nbsp;<span class="op" id="1634114">^</span>&nbsp;<span class="op" id="1634116">(</span><span class="num" id="1634117">1</span>&nbsp;<span class="op" id="1634119">&lt;&lt;</span>&nbsp;<span class="op" id="1634122">(</span><span class="ident" id="1634123">mantbits64</span>&nbsp;<span class="op" id="1634134">+</span>&nbsp;<span class="ident" id="1634136">expbits64</span><span class="op" id="1634145">)</span><span class="op" id="1634146">)</span><br>
<span class="lineno"></span><span class="op" id="1634148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1634151">func</span>&nbsp;<span class="ident" id="1634156">fmul64</span><span class="op" id="1634162">(</span><span class="ident" id="1634163">f</span><span class="op" id="1634164">,</span>&nbsp;<span class="ident" id="1634166">g</span>&nbsp;<span class="builtintype" id="1634168">uint64</span><span class="op" id="1634174">)</span>&nbsp;<span class="builtintype" id="1634176">uint64</span>&nbsp;<span class="op" id="1634183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1634186">fs</span><span class="op" id="1634188">,</span>&nbsp;<span class="ident" id="1634190">fm</span><span class="op" id="1634192">,</span>&nbsp;<span class="ident" id="1634194">fe</span><span class="op" id="1634196">,</span>&nbsp;<span class="ident" id="1634198">fi</span><span class="op" id="1634200">,</span>&nbsp;<span class="ident" id="1634202">fn</span>&nbsp;<span class="op" id="1634205">:=</span>&nbsp;<span class="ident" id="1634208">funpack64</span><span class="op" id="1634217">(</span><span class="ident" id="1634218">f</span><span class="op" id="1634219">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1634222">gs</span><span class="op" id="1634224">,</span>&nbsp;<span class="ident" id="1634226">gm</span><span class="op" id="1634228">,</span>&nbsp;<span class="ident" id="1634230">ge</span><span class="op" id="1634232">,</span>&nbsp;<span class="ident" id="1634234">gi</span><span class="op" id="1634236">,</span>&nbsp;<span class="ident" id="1634238">gn</span>&nbsp;<span class="op" id="1634241">:=</span>&nbsp;<span class="ident" id="1634244">funpack64</span><span class="op" id="1634253">(</span><span class="ident" id="1634254">g</span><span class="op" id="1634255">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1634259">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634278">switch</span>&nbsp;<span class="op" id="1634285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634288">case</span>&nbsp;<span class="ident" id="1634293">fn</span>&nbsp;<span class="op" id="1634296">||</span>&nbsp;<span class="ident" id="1634299">gn</span><span class="op" id="1634301">:</span>&nbsp;<span class="comment" id="1634303">//&nbsp;NaN&nbsp;*&nbsp;g&nbsp;or&nbsp;f&nbsp;*&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634333">return</span>&nbsp;<span class="ident" id="1634340">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634348">case</span>&nbsp;<span class="ident" id="1634353">fi</span>&nbsp;<span class="op" id="1634356">&amp;&amp;</span>&nbsp;<span class="ident" id="1634359">gi</span><span class="op" id="1634361">:</span>&nbsp;<span class="comment" id="1634363">//&nbsp;Inf&nbsp;*&nbsp;Inf&nbsp;=&nbsp;Inf&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634405">return</span>&nbsp;<span class="ident" id="1634412">f</span>&nbsp;<span class="op" id="1634414">^</span>&nbsp;<span class="ident" id="1634416">gs</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634421">case</span>&nbsp;<span class="ident" id="1634426">fi</span>&nbsp;<span class="op" id="1634429">&amp;&amp;</span>&nbsp;<span class="ident" id="1634432">gm</span>&nbsp;<span class="op" id="1634435">==</span>&nbsp;<span class="num" id="1634438">0</span><span class="op" id="1634439">,</span>&nbsp;<span class="ident" id="1634441">fm</span>&nbsp;<span class="op" id="1634444">==</span>&nbsp;<span class="num" id="1634447">0</span>&nbsp;<span class="op" id="1634449">&amp;&amp;</span>&nbsp;<span class="ident" id="1634452">gi</span><span class="op" id="1634454">:</span>&nbsp;<span class="comment" id="1634456">//&nbsp;0&nbsp;*&nbsp;Inf&nbsp;=&nbsp;Inf&nbsp;*&nbsp;0&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634485">return</span>&nbsp;<span class="ident" id="1634492">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634500">case</span>&nbsp;<span class="ident" id="1634505">fm</span>&nbsp;<span class="op" id="1634508">==</span>&nbsp;<span class="num" id="1634511">0</span><span class="op" id="1634512">:</span>&nbsp;<span class="comment" id="1634514">//&nbsp;0&nbsp;*&nbsp;x&nbsp;=&nbsp;0&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634550">return</span>&nbsp;<span class="ident" id="1634557">f</span>&nbsp;<span class="op" id="1634559">^</span>&nbsp;<span class="ident" id="1634561">gs</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634566">case</span>&nbsp;<span class="ident" id="1634571">gm</span>&nbsp;<span class="op" id="1634574">==</span>&nbsp;<span class="num" id="1634577">0</span><span class="op" id="1634578">:</span>&nbsp;<span class="comment" id="1634580">//&nbsp;x&nbsp;*&nbsp;0&nbsp;=&nbsp;0&nbsp;(with&nbsp;sign&nbsp;adjusted)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634616">return</span>&nbsp;<span class="ident" id="1634623">g</span>&nbsp;<span class="op" id="1634625">^</span>&nbsp;<span class="ident" id="1634627">fs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1634631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1634635">//&nbsp;53-bit&nbsp;*&nbsp;53-bit&nbsp;=&nbsp;107-&nbsp;or&nbsp;108-bit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1634673">lo</span><span class="op" id="1634675">,</span>&nbsp;<span class="ident" id="1634677">hi</span>&nbsp;<span class="op" id="1634680">:=</span>&nbsp;<span class="ident" id="1634683">mullu</span><span class="op" id="1634688">(</span><span class="ident" id="1634689">fm</span><span class="op" id="1634691">,</span>&nbsp;<span class="ident" id="1634693">gm</span><span class="op" id="1634695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1634698">shift</span>&nbsp;<span class="op" id="1634704">:=</span>&nbsp;<span class="ident" id="1634707">mantbits64</span>&nbsp;<span class="op" id="1634718">-</span>&nbsp;<span class="num" id="1634720">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1634723">trunc</span>&nbsp;<span class="op" id="1634729">:=</span>&nbsp;<span class="ident" id="1634732">lo</span>&nbsp;<span class="op" id="1634735">&amp;</span>&nbsp;<span class="op" id="1634737">(</span><span class="num" id="1634738">1</span><span class="op" id="1634739">&lt;&lt;</span><span class="ident" id="1634741">shift</span>&nbsp;<span class="op" id="1634747">-</span>&nbsp;<span class="num" id="1634749">1</span><span class="op" id="1634750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1634753">mant</span>&nbsp;<span class="op" id="1634758">:=</span>&nbsp;<span class="ident" id="1634761">hi</span><span class="op" id="1634763">&lt;&lt;</span><span class="op" id="1634765">(</span><span class="num" id="1634766">64</span><span class="op" id="1634768">-</span><span class="ident" id="1634769">shift</span><span class="op" id="1634774">)</span>&nbsp;<span class="op" id="1634776">|</span>&nbsp;<span class="ident" id="1634778">lo</span><span class="op" id="1634780">&gt;&gt;</span><span class="ident" id="1634782">shift</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634789">return</span>&nbsp;<span class="ident" id="1634796">fpack64</span><span class="op" id="1634803">(</span><span class="ident" id="1634804">fs</span><span class="op" id="1634806">^</span><span class="ident" id="1634807">gs</span><span class="op" id="1634809">,</span>&nbsp;<span class="ident" id="1634811">mant</span><span class="op" id="1634815">,</span>&nbsp;<span class="ident" id="1634817">fe</span><span class="op" id="1634819">+</span><span class="ident" id="1634820">ge</span><span class="op" id="1634822">-</span><span class="num" id="1634823">1</span><span class="op" id="1634824">,</span>&nbsp;<span class="ident" id="1634826">trunc</span><span class="op" id="1634831">)</span><br>
<span class="lineno"></span><span class="op" id="1634833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1634836">func</span>&nbsp;<span class="ident" id="1634841">fdiv64</span><span class="op" id="1634847">(</span><span class="ident" id="1634848">f</span><span class="op" id="1634849">,</span>&nbsp;<span class="ident" id="1634851">g</span>&nbsp;<span class="builtintype" id="1634853">uint64</span><span class="op" id="1634859">)</span>&nbsp;<span class="builtintype" id="1634861">uint64</span>&nbsp;<span class="op" id="1634868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1634871">fs</span><span class="op" id="1634873">,</span>&nbsp;<span class="ident" id="1634875">fm</span><span class="op" id="1634877">,</span>&nbsp;<span class="ident" id="1634879">fe</span><span class="op" id="1634881">,</span>&nbsp;<span class="ident" id="1634883">fi</span><span class="op" id="1634885">,</span>&nbsp;<span class="ident" id="1634887">fn</span>&nbsp;<span class="op" id="1634890">:=</span>&nbsp;<span class="ident" id="1634893">funpack64</span><span class="op" id="1634902">(</span><span class="ident" id="1634903">f</span><span class="op" id="1634904">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1634907">gs</span><span class="op" id="1634909">,</span>&nbsp;<span class="ident" id="1634911">gm</span><span class="op" id="1634913">,</span>&nbsp;<span class="ident" id="1634915">ge</span><span class="op" id="1634917">,</span>&nbsp;<span class="ident" id="1634919">gi</span><span class="op" id="1634921">,</span>&nbsp;<span class="ident" id="1634923">gn</span>&nbsp;<span class="op" id="1634926">:=</span>&nbsp;<span class="ident" id="1634929">funpack64</span><span class="op" id="1634938">(</span><span class="ident" id="1634939">g</span><span class="op" id="1634940">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1634944">//&nbsp;Special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634963">switch</span>&nbsp;<span class="op" id="1634970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1634973">case</span>&nbsp;<span class="ident" id="1634978">fn</span>&nbsp;<span class="op" id="1634981">||</span>&nbsp;<span class="ident" id="1634984">gn</span><span class="op" id="1634986">:</span>&nbsp;<span class="comment" id="1634988">//&nbsp;NaN&nbsp;/&nbsp;g&nbsp;=&nbsp;f&nbsp;/&nbsp;NaN&nbsp;=&nbsp;NaN</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635017">return</span>&nbsp;<span class="ident" id="1635024">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635032">case</span>&nbsp;<span class="ident" id="1635037">fi</span>&nbsp;<span class="op" id="1635040">&amp;&amp;</span>&nbsp;<span class="ident" id="1635043">gi</span><span class="op" id="1635045">:</span>&nbsp;<span class="comment" id="1635047">//&nbsp;±Inf&nbsp;/&nbsp;±Inf&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635072">return</span>&nbsp;<span class="ident" id="1635079">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635087">case</span>&nbsp;<span class="op" id="1635092">!</span><span class="ident" id="1635093">fi</span>&nbsp;<span class="op" id="1635096">&amp;&amp;</span>&nbsp;<span class="op" id="1635099">!</span><span class="ident" id="1635100">gi</span>&nbsp;<span class="op" id="1635103">&amp;&amp;</span>&nbsp;<span class="ident" id="1635106">fm</span>&nbsp;<span class="op" id="1635109">==</span>&nbsp;<span class="num" id="1635112">0</span>&nbsp;<span class="op" id="1635114">&amp;&amp;</span>&nbsp;<span class="ident" id="1635117">gm</span>&nbsp;<span class="op" id="1635120">==</span>&nbsp;<span class="num" id="1635123">0</span><span class="op" id="1635124">:</span>&nbsp;<span class="comment" id="1635126">//&nbsp;0&nbsp;/&nbsp;0&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635143">return</span>&nbsp;<span class="ident" id="1635150">nan64</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635158">case</span>&nbsp;<span class="ident" id="1635163">fi</span><span class="op" id="1635165">,</span>&nbsp;<span class="op" id="1635167">!</span><span class="ident" id="1635168">gi</span>&nbsp;<span class="op" id="1635171">&amp;&amp;</span>&nbsp;<span class="ident" id="1635174">gm</span>&nbsp;<span class="op" id="1635177">==</span>&nbsp;<span class="num" id="1635180">0</span><span class="op" id="1635181">:</span>&nbsp;<span class="comment" id="1635183">//&nbsp;Inf&nbsp;/&nbsp;g&nbsp;=&nbsp;f&nbsp;/&nbsp;0&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635210">return</span>&nbsp;<span class="ident" id="1635217">fs</span>&nbsp;<span class="op" id="1635220">^</span>&nbsp;<span class="ident" id="1635222">gs</span>&nbsp;<span class="op" id="1635225">^</span>&nbsp;<span class="ident" id="1635227">inf64</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635235">case</span>&nbsp;<span class="ident" id="1635240">gi</span><span class="op" id="1635242">,</span>&nbsp;<span class="ident" id="1635244">fm</span>&nbsp;<span class="op" id="1635247">==</span>&nbsp;<span class="num" id="1635250">0</span><span class="op" id="1635251">:</span>&nbsp;<span class="comment" id="1635253">//&nbsp;f&nbsp;/&nbsp;Inf&nbsp;=&nbsp;0&nbsp;/&nbsp;g&nbsp;=&nbsp;Inf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635280">return</span>&nbsp;<span class="ident" id="1635287">fs</span>&nbsp;<span class="op" id="1635290">^</span>&nbsp;<span class="ident" id="1635292">gs</span>&nbsp;<span class="op" id="1635295">^</span>&nbsp;<span class="num" id="1635297">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1635300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1635303">_</span><span class="op" id="1635304">,</span>&nbsp;<span class="ident" id="1635306">_</span><span class="op" id="1635307">,</span>&nbsp;<span class="ident" id="1635309">_</span><span class="op" id="1635310">,</span>&nbsp;<span class="ident" id="1635312">_</span>&nbsp;<span class="op" id="1635314">=</span>&nbsp;<span class="ident" id="1635316">fi</span><span class="op" id="1635318">,</span>&nbsp;<span class="ident" id="1635320">fn</span><span class="op" id="1635322">,</span>&nbsp;<span class="ident" id="1635324">gi</span><span class="op" id="1635326">,</span>&nbsp;<span class="ident" id="1635328">gn</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1635333">//&nbsp;53-bit&lt;&lt;54&nbsp;/&nbsp;53-bit&nbsp;=&nbsp;53-&nbsp;or&nbsp;54-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1635374">shift</span>&nbsp;<span class="op" id="1635380">:=</span>&nbsp;<span class="ident" id="1635383">mantbits64</span>&nbsp;<span class="op" id="1635394">+</span>&nbsp;<span class="num" id="1635396">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1635399">q</span><span class="op" id="1635400">,</span>&nbsp;<span class="ident" id="1635402">r</span>&nbsp;<span class="op" id="1635404">:=</span>&nbsp;<span class="ident" id="1635407">divlu</span><span class="op" id="1635412">(</span><span class="ident" id="1635413">fm</span><span class="op" id="1635415">&gt;&gt;</span><span class="op" id="1635417">(</span><span class="num" id="1635418">64</span><span class="op" id="1635420">-</span><span class="ident" id="1635421">shift</span><span class="op" id="1635426">)</span><span class="op" id="1635427">,</span>&nbsp;<span class="ident" id="1635429">fm</span><span class="op" id="1635431">&lt;&lt;</span><span class="ident" id="1635433">shift</span><span class="op" id="1635438">,</span>&nbsp;<span class="ident" id="1635440">gm</span><span class="op" id="1635442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635445">return</span>&nbsp;<span class="ident" id="1635452">fpack64</span><span class="op" id="1635459">(</span><span class="ident" id="1635460">fs</span><span class="op" id="1635462">^</span><span class="ident" id="1635463">gs</span><span class="op" id="1635465">,</span>&nbsp;<span class="ident" id="1635467">q</span><span class="op" id="1635468">,</span>&nbsp;<span class="ident" id="1635470">fe</span><span class="op" id="1635472">-</span><span class="ident" id="1635473">ge</span><span class="op" id="1635475">-</span><span class="num" id="1635476">2</span><span class="op" id="1635477">,</span>&nbsp;<span class="ident" id="1635479">r</span><span class="op" id="1635480">)</span><br>
<span class="lineno">315</span><span class="op" id="1635482">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1635485">func</span>&nbsp;<span class="ident" id="1635490">f64to32</span><span class="op" id="1635497">(</span><span class="ident" id="1635498">f</span>&nbsp;<span class="builtintype" id="1635500">uint64</span><span class="op" id="1635506">)</span>&nbsp;<span class="builtintype" id="1635508">uint32</span>&nbsp;<span class="op" id="1635515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1635518">fs</span><span class="op" id="1635520">,</span>&nbsp;<span class="ident" id="1635522">fm</span><span class="op" id="1635524">,</span>&nbsp;<span class="ident" id="1635526">fe</span><span class="op" id="1635528">,</span>&nbsp;<span class="ident" id="1635530">fi</span><span class="op" id="1635532">,</span>&nbsp;<span class="ident" id="1635534">fn</span>&nbsp;<span class="op" id="1635537">:=</span>&nbsp;<span class="ident" id="1635540">funpack64</span><span class="op" id="1635549">(</span><span class="ident" id="1635550">f</span><span class="op" id="1635551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635554">if</span>&nbsp;<span class="ident" id="1635557">fn</span>&nbsp;<span class="op" id="1635560">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635564">return</span>&nbsp;<span class="ident" id="1635571">nan32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1635578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1635581">fs32</span>&nbsp;<span class="op" id="1635586">:=</span>&nbsp;<span class="builtintype" id="1635589">uint32</span><span class="op" id="1635595">(</span><span class="ident" id="1635596">fs</span>&nbsp;<span class="op" id="1635599">&gt;&gt;</span>&nbsp;<span class="num" id="1635602">32</span><span class="op" id="1635604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635607">if</span>&nbsp;<span class="ident" id="1635610">fi</span>&nbsp;<span class="op" id="1635613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635617">return</span>&nbsp;<span class="ident" id="1635624">fs32</span>&nbsp;<span class="op" id="1635629">^</span>&nbsp;<span class="ident" id="1635631">inf32</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1635638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635641">const</span>&nbsp;<span class="ident" id="1635647">d</span>&nbsp;<span class="op" id="1635649">=</span>&nbsp;<span class="ident" id="1635651">mantbits64</span>&nbsp;<span class="op" id="1635662">-</span>&nbsp;<span class="ident" id="1635664">mantbits32</span>&nbsp;<span class="op" id="1635675">-</span>&nbsp;<span class="num" id="1635677">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635680">return</span>&nbsp;<span class="ident" id="1635687">fpack32</span><span class="op" id="1635694">(</span><span class="ident" id="1635695">fs32</span><span class="op" id="1635699">,</span>&nbsp;<span class="builtintype" id="1635701">uint32</span><span class="op" id="1635707">(</span><span class="ident" id="1635708">fm</span><span class="op" id="1635710">&gt;&gt;</span><span class="ident" id="1635712">d</span><span class="op" id="1635713">)</span><span class="op" id="1635714">,</span>&nbsp;<span class="ident" id="1635716">fe</span><span class="op" id="1635718">-</span><span class="num" id="1635719">1</span><span class="op" id="1635720">,</span>&nbsp;<span class="builtintype" id="1635722">uint32</span><span class="op" id="1635728">(</span><span class="ident" id="1635729">fm</span><span class="op" id="1635731">&amp;</span><span class="op" id="1635732">(</span><span class="num" id="1635733">1</span><span class="op" id="1635734">&lt;&lt;</span><span class="ident" id="1635736">d</span><span class="op" id="1635737">-</span><span class="num" id="1635738">1</span><span class="op" id="1635739">)</span><span class="op" id="1635740">)</span><span class="op" id="1635741">)</span><br>
<span class="lineno"></span><span class="op" id="1635743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span><span class="keyword" id="1635746">func</span>&nbsp;<span class="ident" id="1635751">f32to64</span><span class="op" id="1635758">(</span><span class="ident" id="1635759">f</span>&nbsp;<span class="builtintype" id="1635761">uint32</span><span class="op" id="1635767">)</span>&nbsp;<span class="builtintype" id="1635769">uint64</span>&nbsp;<span class="op" id="1635776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635779">const</span>&nbsp;<span class="ident" id="1635785">d</span>&nbsp;<span class="op" id="1635787">=</span>&nbsp;<span class="ident" id="1635789">mantbits64</span>&nbsp;<span class="op" id="1635800">-</span>&nbsp;<span class="ident" id="1635802">mantbits32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1635814">fs</span><span class="op" id="1635816">,</span>&nbsp;<span class="ident" id="1635818">fm</span><span class="op" id="1635820">,</span>&nbsp;<span class="ident" id="1635822">fe</span><span class="op" id="1635824">,</span>&nbsp;<span class="ident" id="1635826">fi</span><span class="op" id="1635828">,</span>&nbsp;<span class="ident" id="1635830">fn</span>&nbsp;<span class="op" id="1635833">:=</span>&nbsp;<span class="ident" id="1635836">funpack32</span><span class="op" id="1635845">(</span><span class="ident" id="1635846">f</span><span class="op" id="1635847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635850">if</span>&nbsp;<span class="ident" id="1635853">fn</span>&nbsp;<span class="op" id="1635856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635860">return</span>&nbsp;<span class="ident" id="1635867">nan64</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1635874">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1635877">fs64</span>&nbsp;<span class="op" id="1635882">:=</span>&nbsp;<span class="builtintype" id="1635885">uint64</span><span class="op" id="1635891">(</span><span class="ident" id="1635892">fs</span><span class="op" id="1635894">)</span>&nbsp;<span class="op" id="1635896">&lt;&lt;</span>&nbsp;<span class="num" id="1635899">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635903">if</span>&nbsp;<span class="ident" id="1635906">fi</span>&nbsp;<span class="op" id="1635909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635913">return</span>&nbsp;<span class="ident" id="1635920">fs64</span>&nbsp;<span class="op" id="1635925">^</span>&nbsp;<span class="ident" id="1635927">inf64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1635934">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1635937">return</span>&nbsp;<span class="ident" id="1635944">fpack64</span><span class="op" id="1635951">(</span><span class="ident" id="1635952">fs64</span><span class="op" id="1635956">,</span>&nbsp;<span class="builtintype" id="1635958">uint64</span><span class="op" id="1635964">(</span><span class="ident" id="1635965">fm</span><span class="op" id="1635967">)</span><span class="op" id="1635968">&lt;&lt;</span><span class="ident" id="1635970">d</span><span class="op" id="1635971">,</span>&nbsp;<span class="ident" id="1635973">fe</span><span class="op" id="1635975">,</span>&nbsp;<span class="num" id="1635977">0</span><span class="op" id="1635978">)</span><br>
<span class="lineno"></span><span class="op" id="1635980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1635983">func</span>&nbsp;<span class="ident" id="1635988">fcmp64</span><span class="op" id="1635994">(</span><span class="ident" id="1635995">f</span><span class="op" id="1635996">,</span>&nbsp;<span class="ident" id="1635998">g</span>&nbsp;<span class="builtintype" id="1636000">uint64</span><span class="op" id="1636006">)</span>&nbsp;<span class="op" id="1636008">(</span><span class="ident" id="1636009">cmp</span>&nbsp;<span class="builtintype" id="1636013">int</span><span class="op" id="1636016">,</span>&nbsp;<span class="ident" id="1636018">isnan</span>&nbsp;<span class="builtintype" id="1636024">bool</span><span class="op" id="1636028">)</span>&nbsp;<span class="op" id="1636030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1636033">fs</span><span class="op" id="1636035">,</span>&nbsp;<span class="ident" id="1636037">fm</span><span class="op" id="1636039">,</span>&nbsp;<span class="ident" id="1636041">_</span><span class="op" id="1636042">,</span>&nbsp;<span class="ident" id="1636044">fi</span><span class="op" id="1636046">,</span>&nbsp;<span class="ident" id="1636048">fn</span>&nbsp;<span class="op" id="1636051">:=</span>&nbsp;<span class="ident" id="1636054">funpack64</span><span class="op" id="1636063">(</span><span class="ident" id="1636064">f</span><span class="op" id="1636065">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1636068">gs</span><span class="op" id="1636070">,</span>&nbsp;<span class="ident" id="1636072">gm</span><span class="op" id="1636074">,</span>&nbsp;<span class="ident" id="1636076">_</span><span class="op" id="1636077">,</span>&nbsp;<span class="ident" id="1636079">gi</span><span class="op" id="1636081">,</span>&nbsp;<span class="ident" id="1636083">gn</span>&nbsp;<span class="op" id="1636086">:=</span>&nbsp;<span class="ident" id="1636089">funpack64</span><span class="op" id="1636098">(</span><span class="ident" id="1636099">g</span><span class="op" id="1636100">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636104">switch</span>&nbsp;<span class="op" id="1636111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636114">case</span>&nbsp;<span class="ident" id="1636119">fn</span><span class="op" id="1636121">,</span>&nbsp;<span class="ident" id="1636123">gn</span><span class="op" id="1636125">:</span>&nbsp;<span class="comment" id="1636127">//&nbsp;flag&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636141">return</span>&nbsp;<span class="num" id="1636148">0</span><span class="op" id="1636149">,</span>&nbsp;<span class="builtintype" id="1636151">true</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636158">case</span>&nbsp;<span class="op" id="1636163">!</span><span class="ident" id="1636164">fi</span>&nbsp;<span class="op" id="1636167">&amp;&amp;</span>&nbsp;<span class="op" id="1636170">!</span><span class="ident" id="1636171">gi</span>&nbsp;<span class="op" id="1636174">&amp;&amp;</span>&nbsp;<span class="ident" id="1636177">fm</span>&nbsp;<span class="op" id="1636180">==</span>&nbsp;<span class="num" id="1636183">0</span>&nbsp;<span class="op" id="1636185">&amp;&amp;</span>&nbsp;<span class="ident" id="1636188">gm</span>&nbsp;<span class="op" id="1636191">==</span>&nbsp;<span class="num" id="1636194">0</span><span class="op" id="1636195">:</span>&nbsp;<span class="comment" id="1636197">//&nbsp;±0&nbsp;==&nbsp;±0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636213">return</span>&nbsp;<span class="num" id="1636220">0</span><span class="op" id="1636221">,</span>&nbsp;<span class="builtintype" id="1636223">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636231">case</span>&nbsp;<span class="ident" id="1636236">fs</span>&nbsp;<span class="op" id="1636239">&gt;</span>&nbsp;<span class="ident" id="1636241">gs</span><span class="op" id="1636243">:</span>&nbsp;<span class="comment" id="1636245">//&nbsp;f&nbsp;&lt;&nbsp;0,&nbsp;g&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636263">return</span>&nbsp;<span class="op" id="1636270">-</span><span class="num" id="1636271">1</span><span class="op" id="1636272">,</span>&nbsp;<span class="builtintype" id="1636274">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636282">case</span>&nbsp;<span class="ident" id="1636287">fs</span>&nbsp;<span class="op" id="1636290">&lt;</span>&nbsp;<span class="ident" id="1636292">gs</span><span class="op" id="1636294">:</span>&nbsp;<span class="comment" id="1636296">//&nbsp;f&nbsp;&gt;&nbsp;0,&nbsp;g&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636314">return</span>&nbsp;<span class="op" id="1636321">+</span><span class="num" id="1636322">1</span><span class="op" id="1636323">,</span>&nbsp;<span class="builtintype" id="1636325">false</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1636333">//&nbsp;Same&nbsp;sign,&nbsp;not&nbsp;NaN.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1636357">//&nbsp;Can&nbsp;compare&nbsp;encodings&nbsp;directly&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1636397">//&nbsp;Reverse&nbsp;for&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636419">case</span>&nbsp;<span class="ident" id="1636424">fs</span>&nbsp;<span class="op" id="1636427">==</span>&nbsp;<span class="num" id="1636430">0</span>&nbsp;<span class="op" id="1636432">&amp;&amp;</span>&nbsp;<span class="ident" id="1636435">f</span>&nbsp;<span class="op" id="1636437">&lt;</span>&nbsp;<span class="ident" id="1636439">g</span><span class="op" id="1636440">,</span>&nbsp;<span class="ident" id="1636442">fs</span>&nbsp;<span class="op" id="1636445">!=</span>&nbsp;<span class="num" id="1636448">0</span>&nbsp;<span class="op" id="1636450">&amp;&amp;</span>&nbsp;<span class="ident" id="1636453">f</span>&nbsp;<span class="op" id="1636455">&gt;</span>&nbsp;<span class="ident" id="1636457">g</span><span class="op" id="1636458">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636462">return</span>&nbsp;<span class="op" id="1636469">-</span><span class="num" id="1636470">1</span><span class="op" id="1636471">,</span>&nbsp;<span class="builtintype" id="1636473">false</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636481">case</span>&nbsp;<span class="ident" id="1636486">fs</span>&nbsp;<span class="op" id="1636489">==</span>&nbsp;<span class="num" id="1636492">0</span>&nbsp;<span class="op" id="1636494">&amp;&amp;</span>&nbsp;<span class="ident" id="1636497">f</span>&nbsp;<span class="op" id="1636499">&gt;</span>&nbsp;<span class="ident" id="1636501">g</span><span class="op" id="1636502">,</span>&nbsp;<span class="ident" id="1636504">fs</span>&nbsp;<span class="op" id="1636507">!=</span>&nbsp;<span class="num" id="1636510">0</span>&nbsp;<span class="op" id="1636512">&amp;&amp;</span>&nbsp;<span class="ident" id="1636515">f</span>&nbsp;<span class="op" id="1636517">&lt;</span>&nbsp;<span class="ident" id="1636519">g</span><span class="op" id="1636520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636524">return</span>&nbsp;<span class="op" id="1636531">+</span><span class="num" id="1636532">1</span><span class="op" id="1636533">,</span>&nbsp;<span class="builtintype" id="1636535">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1636542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1636546">//&nbsp;f&nbsp;==&nbsp;g</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636557">return</span>&nbsp;<span class="num" id="1636564">0</span><span class="op" id="1636565">,</span>&nbsp;<span class="builtintype" id="1636567">false</span><br>
<span class="lineno"></span><span class="op" id="1636573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1636576">func</span>&nbsp;<span class="ident" id="1636581">f64toint</span><span class="op" id="1636589">(</span><span class="ident" id="1636590">f</span>&nbsp;<span class="builtintype" id="1636592">uint64</span><span class="op" id="1636598">)</span>&nbsp;<span class="op" id="1636600">(</span><span class="ident" id="1636601">val</span>&nbsp;<span class="builtintype" id="1636605">int64</span><span class="op" id="1636610">,</span>&nbsp;<span class="ident" id="1636612">ok</span>&nbsp;<span class="builtintype" id="1636615">bool</span><span class="op" id="1636619">)</span>&nbsp;<span class="op" id="1636621">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1636624">fs</span><span class="op" id="1636626">,</span>&nbsp;<span class="ident" id="1636628">fm</span><span class="op" id="1636630">,</span>&nbsp;<span class="ident" id="1636632">fe</span><span class="op" id="1636634">,</span>&nbsp;<span class="ident" id="1636636">fi</span><span class="op" id="1636638">,</span>&nbsp;<span class="ident" id="1636640">fn</span>&nbsp;<span class="op" id="1636643">:=</span>&nbsp;<span class="ident" id="1636646">funpack64</span><span class="op" id="1636655">(</span><span class="ident" id="1636656">f</span><span class="op" id="1636657">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636661">switch</span>&nbsp;<span class="op" id="1636668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636671">case</span>&nbsp;<span class="ident" id="1636676">fi</span><span class="op" id="1636678">,</span>&nbsp;<span class="ident" id="1636680">fn</span><span class="op" id="1636682">:</span>&nbsp;<span class="comment" id="1636684">//&nbsp;NaN</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636693">return</span>&nbsp;<span class="num" id="1636700">0</span><span class="op" id="1636701">,</span>&nbsp;<span class="builtintype" id="1636703">false</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636711">case</span>&nbsp;<span class="ident" id="1636716">fe</span>&nbsp;<span class="op" id="1636719">&lt;</span>&nbsp;<span class="op" id="1636721">-</span><span class="num" id="1636722">1</span><span class="op" id="1636723">:</span>&nbsp;<span class="comment" id="1636725">//&nbsp;f&nbsp;&lt;&nbsp;0.5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636738">return</span>&nbsp;<span class="num" id="1636745">0</span><span class="op" id="1636746">,</span>&nbsp;<span class="builtintype" id="1636748">false</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636756">case</span>&nbsp;<span class="ident" id="1636761">fe</span>&nbsp;<span class="op" id="1636764">&gt;</span>&nbsp;<span class="num" id="1636766">63</span><span class="op" id="1636768">:</span>&nbsp;<span class="comment" id="1636770">//&nbsp;f&nbsp;&gt;=&nbsp;2^63</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636785">if</span>&nbsp;<span class="ident" id="1636788">fs</span>&nbsp;<span class="op" id="1636791">!=</span>&nbsp;<span class="num" id="1636794">0</span>&nbsp;<span class="op" id="1636796">&amp;&amp;</span>&nbsp;<span class="ident" id="1636799">fm</span>&nbsp;<span class="op" id="1636802">==</span>&nbsp;<span class="num" id="1636805">0</span>&nbsp;<span class="op" id="1636807">{</span>&nbsp;<span class="comment" id="1636809">//&nbsp;f&nbsp;==&nbsp;-2^63</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636826">return</span>&nbsp;<span class="op" id="1636833">-</span><span class="num" id="1636834">1</span>&nbsp;<span class="op" id="1636836">&lt;&lt;</span>&nbsp;<span class="num" id="1636839">63</span><span class="op" id="1636841">,</span>&nbsp;<span class="builtintype" id="1636843">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1636850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636854">if</span>&nbsp;<span class="ident" id="1636857">fs</span>&nbsp;<span class="op" id="1636860">!=</span>&nbsp;<span class="num" id="1636863">0</span>&nbsp;<span class="op" id="1636865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636870">return</span>&nbsp;<span class="num" id="1636877">0</span><span class="op" id="1636878">,</span>&nbsp;<span class="builtintype" id="1636880">false</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1636888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636892">return</span>&nbsp;<span class="num" id="1636899">0</span><span class="op" id="1636900">,</span>&nbsp;<span class="builtintype" id="1636902">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1636909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636913">for</span>&nbsp;<span class="ident" id="1636917">fe</span>&nbsp;<span class="op" id="1636920">&gt;</span>&nbsp;<span class="builtintype" id="1636922">int</span><span class="op" id="1636925">(</span><span class="ident" id="1636926">mantbits64</span><span class="op" id="1636936">)</span>&nbsp;<span class="op" id="1636938">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1636942">fe</span><span class="op" id="1636944">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1636949">fm</span>&nbsp;<span class="op" id="1636952">&lt;&lt;=</span>&nbsp;<span class="num" id="1636956">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1636959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1636962">for</span>&nbsp;<span class="ident" id="1636966">fe</span>&nbsp;<span class="op" id="1636969">&lt;</span>&nbsp;<span class="builtintype" id="1636971">int</span><span class="op" id="1636974">(</span><span class="ident" id="1636975">mantbits64</span><span class="op" id="1636985">)</span>&nbsp;<span class="op" id="1636987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1636991">fe</span><span class="op" id="1636993">++</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1636998">fm</span>&nbsp;<span class="op" id="1637001">&gt;&gt;=</span>&nbsp;<span class="num" id="1637005">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1637008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637011">val</span>&nbsp;<span class="op" id="1637015">=</span>&nbsp;<span class="builtintype" id="1637017">int64</span><span class="op" id="1637022">(</span><span class="ident" id="1637023">fm</span><span class="op" id="1637025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1637028">if</span>&nbsp;<span class="ident" id="1637031">fs</span>&nbsp;<span class="op" id="1637034">!=</span>&nbsp;<span class="num" id="1637037">0</span>&nbsp;<span class="op" id="1637039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637043">val</span>&nbsp;<span class="op" id="1637047">=</span>&nbsp;<span class="op" id="1637049">-</span><span class="ident" id="1637050">val</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1637055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1637058">return</span>&nbsp;<span class="ident" id="1637065">val</span><span class="op" id="1637068">,</span>&nbsp;<span class="builtintype" id="1637070">true</span><br>
<span class="lineno"></span><span class="op" id="1637075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1637078">func</span>&nbsp;<span class="ident" id="1637083">fintto64</span><span class="op" id="1637091">(</span><span class="ident" id="1637092">val</span>&nbsp;<span class="builtintype" id="1637096">int64</span><span class="op" id="1637101">)</span>&nbsp;<span class="op" id="1637103">(</span><span class="ident" id="1637104">f</span>&nbsp;<span class="builtintype" id="1637106">uint64</span><span class="op" id="1637112">)</span>&nbsp;<span class="op" id="1637114">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637117">fs</span>&nbsp;<span class="op" id="1637120">:=</span>&nbsp;<span class="builtintype" id="1637123">uint64</span><span class="op" id="1637129">(</span><span class="ident" id="1637130">val</span><span class="op" id="1637133">)</span>&nbsp;<span class="op" id="1637135">&amp;</span>&nbsp;<span class="op" id="1637137">(</span><span class="num" id="1637138">1</span>&nbsp;<span class="op" id="1637140">&lt;&lt;</span>&nbsp;<span class="num" id="1637143">63</span><span class="op" id="1637145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637148">mant</span>&nbsp;<span class="op" id="1637153">:=</span>&nbsp;<span class="builtintype" id="1637156">uint64</span><span class="op" id="1637162">(</span><span class="ident" id="1637163">val</span><span class="op" id="1637166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1637169">if</span>&nbsp;<span class="ident" id="1637172">fs</span>&nbsp;<span class="op" id="1637175">!=</span>&nbsp;<span class="num" id="1637178">0</span>&nbsp;<span class="op" id="1637180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637184">mant</span>&nbsp;<span class="op" id="1637189">=</span>&nbsp;<span class="op" id="1637191">-</span><span class="ident" id="1637192">mant</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1637198">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1637201">return</span>&nbsp;<span class="ident" id="1637208">fpack64</span><span class="op" id="1637215">(</span><span class="ident" id="1637216">fs</span><span class="op" id="1637218">,</span>&nbsp;<span class="ident" id="1637220">mant</span><span class="op" id="1637224">,</span>&nbsp;<span class="builtintype" id="1637226">int</span><span class="op" id="1637229">(</span><span class="ident" id="1637230">mantbits64</span><span class="op" id="1637240">)</span><span class="op" id="1637241">,</span>&nbsp;<span class="num" id="1637243">0</span><span class="op" id="1637244">)</span><br>
<span class="lineno"></span><span class="op" id="1637246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1637249">//&nbsp;64x64&nbsp;-&gt;&nbsp;128&nbsp;multiply.</span><br>
<span class="lineno"></span><span class="comment" id="1637275">//&nbsp;adapted&nbsp;from&nbsp;hacker&#39;s&nbsp;delight.</span><br>
<span class="lineno">420</span><span class="keyword" id="1637309">func</span>&nbsp;<span class="ident" id="1637314">mullu</span><span class="op" id="1637319">(</span><span class="ident" id="1637320">u</span><span class="op" id="1637321">,</span>&nbsp;<span class="ident" id="1637323">v</span>&nbsp;<span class="builtintype" id="1637325">uint64</span><span class="op" id="1637331">)</span>&nbsp;<span class="op" id="1637333">(</span><span class="ident" id="1637334">lo</span><span class="op" id="1637336">,</span>&nbsp;<span class="ident" id="1637338">hi</span>&nbsp;<span class="builtintype" id="1637341">uint64</span><span class="op" id="1637347">)</span>&nbsp;<span class="op" id="1637349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1637352">const</span>&nbsp;<span class="op" id="1637358">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637362">s</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1637367">=</span>&nbsp;<span class="num" id="1637369">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637374">mask</span>&nbsp;<span class="op" id="1637379">=</span>&nbsp;<span class="num" id="1637381">1</span><span class="op" id="1637382">&lt;&lt;</span><span class="ident" id="1637384">s</span>&nbsp;<span class="op" id="1637386">-</span>&nbsp;<span class="num" id="1637388">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1637391">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637394">u0</span>&nbsp;<span class="op" id="1637397">:=</span>&nbsp;<span class="ident" id="1637400">u</span>&nbsp;<span class="op" id="1637402">&amp;</span>&nbsp;<span class="ident" id="1637404">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637410">u1</span>&nbsp;<span class="op" id="1637413">:=</span>&nbsp;<span class="ident" id="1637416">u</span>&nbsp;<span class="op" id="1637418">&gt;&gt;</span>&nbsp;<span class="ident" id="1637421">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637424">v0</span>&nbsp;<span class="op" id="1637427">:=</span>&nbsp;<span class="ident" id="1637430">v</span>&nbsp;<span class="op" id="1637432">&amp;</span>&nbsp;<span class="ident" id="1637434">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637440">v1</span>&nbsp;<span class="op" id="1637443">:=</span>&nbsp;<span class="ident" id="1637446">v</span>&nbsp;<span class="op" id="1637448">&gt;&gt;</span>&nbsp;<span class="ident" id="1637451">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637454">w0</span>&nbsp;<span class="op" id="1637457">:=</span>&nbsp;<span class="ident" id="1637460">u0</span>&nbsp;<span class="op" id="1637463">*</span>&nbsp;<span class="ident" id="1637465">v0</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637469">t</span>&nbsp;<span class="op" id="1637471">:=</span>&nbsp;<span class="ident" id="1637474">u1</span><span class="op" id="1637476">*</span><span class="ident" id="1637477">v0</span>&nbsp;<span class="op" id="1637480">+</span>&nbsp;<span class="ident" id="1637482">w0</span><span class="op" id="1637484">&gt;&gt;</span><span class="ident" id="1637486">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637489">w1</span>&nbsp;<span class="op" id="1637492">:=</span>&nbsp;<span class="ident" id="1637495">t</span>&nbsp;<span class="op" id="1637497">&amp;</span>&nbsp;<span class="ident" id="1637499">mask</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637505">w2</span>&nbsp;<span class="op" id="1637508">:=</span>&nbsp;<span class="ident" id="1637511">t</span>&nbsp;<span class="op" id="1637513">&gt;&gt;</span>&nbsp;<span class="ident" id="1637516">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637519">w1</span>&nbsp;<span class="op" id="1637522">+=</span>&nbsp;<span class="ident" id="1637525">u0</span>&nbsp;<span class="op" id="1637528">*</span>&nbsp;<span class="ident" id="1637530">v1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1637534">return</span>&nbsp;<span class="ident" id="1637541">u</span>&nbsp;<span class="op" id="1637543">*</span>&nbsp;<span class="ident" id="1637545">v</span><span class="op" id="1637546">,</span>&nbsp;<span class="ident" id="1637548">u1</span><span class="op" id="1637550">*</span><span class="ident" id="1637551">v1</span>&nbsp;<span class="op" id="1637554">+</span>&nbsp;<span class="ident" id="1637556">w2</span>&nbsp;<span class="op" id="1637559">+</span>&nbsp;<span class="ident" id="1637561">w1</span><span class="op" id="1637563">&gt;&gt;</span><span class="ident" id="1637565">s</span><br>
<span class="lineno">435</span><span class="op" id="1637567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1637570">//&nbsp;128/64&nbsp;-&gt;&nbsp;64&nbsp;quotient,&nbsp;64&nbsp;remainder.</span><br>
<span class="lineno"></span><span class="comment" id="1637610">//&nbsp;adapted&nbsp;from&nbsp;hacker&#39;s&nbsp;delight</span><br>
<span class="lineno"></span><span class="keyword" id="1637643">func</span>&nbsp;<span class="ident" id="1637648">divlu</span><span class="op" id="1637653">(</span><span class="ident" id="1637654">u1</span><span class="op" id="1637656">,</span>&nbsp;<span class="ident" id="1637658">u0</span><span class="op" id="1637660">,</span>&nbsp;<span class="ident" id="1637662">v</span>&nbsp;<span class="builtintype" id="1637664">uint64</span><span class="op" id="1637670">)</span>&nbsp;<span class="op" id="1637672">(</span><span class="ident" id="1637673">q</span><span class="op" id="1637674">,</span>&nbsp;<span class="ident" id="1637676">r</span>&nbsp;<span class="builtintype" id="1637678">uint64</span><span class="op" id="1637684">)</span>&nbsp;<span class="op" id="1637686">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1637689">const</span>&nbsp;<span class="ident" id="1637695">b</span>&nbsp;<span class="op" id="1637697">=</span>&nbsp;<span class="num" id="1637699">1</span>&nbsp;<span class="op" id="1637701">&lt;&lt;</span>&nbsp;<span class="num" id="1637704">32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1637709">if</span>&nbsp;<span class="ident" id="1637712">u1</span>&nbsp;<span class="op" id="1637715">&gt;=</span>&nbsp;<span class="ident" id="1637718">v</span>&nbsp;<span class="op" id="1637720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1637724">return</span>&nbsp;<span class="num" id="1637731">1</span><span class="op" id="1637732">&lt;&lt;</span><span class="num" id="1637734">64</span>&nbsp;<span class="op" id="1637737">-</span>&nbsp;<span class="num" id="1637739">1</span><span class="op" id="1637740">,</span>&nbsp;<span class="num" id="1637742">1</span><span class="op" id="1637743">&lt;&lt;</span><span class="num" id="1637745">64</span>&nbsp;<span class="op" id="1637748">-</span>&nbsp;<span class="num" id="1637750">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1637753">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1637757">//&nbsp;s&nbsp;=&nbsp;nlz(v);&nbsp;v&nbsp;&lt;&lt;=&nbsp;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637781">s</span>&nbsp;<span class="op" id="1637783">:=</span>&nbsp;<span class="builtintype" id="1637786">uint</span><span class="op" id="1637790">(</span><span class="num" id="1637791">0</span><span class="op" id="1637792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1637795">for</span>&nbsp;<span class="ident" id="1637799">v</span><span class="op" id="1637800">&amp;</span><span class="op" id="1637801">(</span><span class="num" id="1637802">1</span><span class="op" id="1637803">&lt;&lt;</span><span class="num" id="1637805">63</span><span class="op" id="1637807">)</span>&nbsp;<span class="op" id="1637809">==</span>&nbsp;<span class="num" id="1637812">0</span>&nbsp;<span class="op" id="1637814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637818">s</span><span class="op" id="1637819">++</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637824">v</span>&nbsp;<span class="op" id="1637826">&lt;&lt;=</span>&nbsp;<span class="num" id="1637830">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1637833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637837">vn1</span>&nbsp;<span class="op" id="1637841">:=</span>&nbsp;<span class="ident" id="1637844">v</span>&nbsp;<span class="op" id="1637846">&gt;&gt;</span>&nbsp;<span class="num" id="1637849">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637853">vn0</span>&nbsp;<span class="op" id="1637857">:=</span>&nbsp;<span class="ident" id="1637860">v</span>&nbsp;<span class="op" id="1637862">&amp;</span>&nbsp;<span class="op" id="1637864">(</span><span class="num" id="1637865">1</span><span class="op" id="1637866">&lt;&lt;</span><span class="num" id="1637868">32</span>&nbsp;<span class="op" id="1637871">-</span>&nbsp;<span class="num" id="1637873">1</span><span class="op" id="1637874">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637877">un32</span>&nbsp;<span class="op" id="1637882">:=</span>&nbsp;<span class="ident" id="1637885">u1</span><span class="op" id="1637887">&lt;&lt;</span><span class="ident" id="1637889">s</span>&nbsp;<span class="op" id="1637891">|</span>&nbsp;<span class="ident" id="1637893">u0</span><span class="op" id="1637895">&gt;&gt;</span><span class="op" id="1637897">(</span><span class="num" id="1637898">64</span><span class="op" id="1637900">-</span><span class="ident" id="1637901">s</span><span class="op" id="1637902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637905">un10</span>&nbsp;<span class="op" id="1637910">:=</span>&nbsp;<span class="ident" id="1637913">u0</span>&nbsp;<span class="op" id="1637916">&lt;&lt;</span>&nbsp;<span class="ident" id="1637919">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637922">un1</span>&nbsp;<span class="op" id="1637926">:=</span>&nbsp;<span class="ident" id="1637929">un10</span>&nbsp;<span class="op" id="1637934">&gt;&gt;</span>&nbsp;<span class="num" id="1637937">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637941">un0</span>&nbsp;<span class="op" id="1637945">:=</span>&nbsp;<span class="ident" id="1637948">un10</span>&nbsp;<span class="op" id="1637953">&amp;</span>&nbsp;<span class="op" id="1637955">(</span><span class="num" id="1637956">1</span><span class="op" id="1637957">&lt;&lt;</span><span class="num" id="1637959">32</span>&nbsp;<span class="op" id="1637962">-</span>&nbsp;<span class="num" id="1637964">1</span><span class="op" id="1637965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637968">q1</span>&nbsp;<span class="op" id="1637971">:=</span>&nbsp;<span class="ident" id="1637974">un32</span>&nbsp;<span class="op" id="1637979">/</span>&nbsp;<span class="ident" id="1637981">vn1</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1637986">rhat</span>&nbsp;<span class="op" id="1637991">:=</span>&nbsp;<span class="ident" id="1637994">un32</span>&nbsp;<span class="op" id="1637999">-</span>&nbsp;<span class="ident" id="1638001">q1</span><span class="op" id="1638003">*</span><span class="ident" id="1638004">vn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1638009">again1</span><span class="op" id="1638015">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1638018">if</span>&nbsp;<span class="ident" id="1638021">q1</span>&nbsp;<span class="op" id="1638024">&gt;=</span>&nbsp;<span class="ident" id="1638027">b</span>&nbsp;<span class="op" id="1638029">||</span>&nbsp;<span class="ident" id="1638032">q1</span><span class="op" id="1638034">*</span><span class="ident" id="1638035">vn0</span>&nbsp;<span class="op" id="1638039">&gt;</span>&nbsp;<span class="ident" id="1638041">b</span><span class="op" id="1638042">*</span><span class="ident" id="1638043">rhat</span><span class="op" id="1638047">+</span><span class="ident" id="1638048">un1</span>&nbsp;<span class="op" id="1638052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1638056">q1</span><span class="op" id="1638058">--</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1638063">rhat</span>&nbsp;<span class="op" id="1638068">+=</span>&nbsp;<span class="ident" id="1638071">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1638077">if</span>&nbsp;<span class="ident" id="1638080">rhat</span>&nbsp;<span class="op" id="1638085">&lt;</span>&nbsp;<span class="ident" id="1638087">b</span>&nbsp;<span class="op" id="1638089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1638094">goto</span>&nbsp;<span class="ident" id="1638099">again1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638111">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1638115">un21</span>&nbsp;<span class="op" id="1638120">:=</span>&nbsp;<span class="ident" id="1638123">un32</span><span class="op" id="1638127">*</span><span class="ident" id="1638128">b</span>&nbsp;<span class="op" id="1638130">+</span>&nbsp;<span class="ident" id="1638132">un1</span>&nbsp;<span class="op" id="1638136">-</span>&nbsp;<span class="ident" id="1638138">q1</span><span class="op" id="1638140">*</span><span class="ident" id="1638141">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1638144">q0</span>&nbsp;<span class="op" id="1638147">:=</span>&nbsp;<span class="ident" id="1638150">un21</span>&nbsp;<span class="op" id="1638155">/</span>&nbsp;<span class="ident" id="1638157">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1638162">rhat</span>&nbsp;<span class="op" id="1638167">=</span>&nbsp;<span class="ident" id="1638169">un21</span>&nbsp;<span class="op" id="1638174">-</span>&nbsp;<span class="ident" id="1638176">q0</span><span class="op" id="1638178">*</span><span class="ident" id="1638179">vn1</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span><span class="ident" id="1638184">again2</span><span class="op" id="1638190">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1638193">if</span>&nbsp;<span class="ident" id="1638196">q0</span>&nbsp;<span class="op" id="1638199">&gt;=</span>&nbsp;<span class="ident" id="1638202">b</span>&nbsp;<span class="op" id="1638204">||</span>&nbsp;<span class="ident" id="1638207">q0</span><span class="op" id="1638209">*</span><span class="ident" id="1638210">vn0</span>&nbsp;<span class="op" id="1638214">&gt;</span>&nbsp;<span class="ident" id="1638216">b</span><span class="op" id="1638217">*</span><span class="ident" id="1638218">rhat</span><span class="op" id="1638222">+</span><span class="ident" id="1638223">un0</span>&nbsp;<span class="op" id="1638227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1638231">q0</span><span class="op" id="1638233">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1638238">rhat</span>&nbsp;<span class="op" id="1638243">+=</span>&nbsp;<span class="ident" id="1638246">vn1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1638252">if</span>&nbsp;<span class="ident" id="1638255">rhat</span>&nbsp;<span class="op" id="1638260">&lt;</span>&nbsp;<span class="ident" id="1638262">b</span>&nbsp;<span class="op" id="1638264">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1638269">goto</span>&nbsp;<span class="ident" id="1638274">again2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1638290">return</span>&nbsp;<span class="ident" id="1638297">q1</span><span class="op" id="1638299">*</span><span class="ident" id="1638300">b</span>&nbsp;<span class="op" id="1638302">+</span>&nbsp;<span class="ident" id="1638304">q0</span><span class="op" id="1638306">,</span>&nbsp;<span class="op" id="1638308">(</span><span class="ident" id="1638309">un21</span><span class="op" id="1638313">*</span><span class="ident" id="1638314">b</span>&nbsp;<span class="op" id="1638316">+</span>&nbsp;<span class="ident" id="1638318">un0</span>&nbsp;<span class="op" id="1638322">-</span>&nbsp;<span class="ident" id="1638324">q0</span><span class="op" id="1638326">*</span><span class="ident" id="1638327">v</span><span class="op" id="1638328">)</span>&nbsp;<span class="op" id="1638330">&gt;&gt;</span>&nbsp;<span class="ident" id="1638333">s</span><br>
<span class="lineno">485</span><span class="op" id="1638335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1638338">//&nbsp;callable&nbsp;from&nbsp;C</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1638358">func</span>&nbsp;<span class="ident" id="1638363">fadd64c</span><span class="op" id="1638370">(</span><span class="ident" id="1638371">f</span><span class="op" id="1638372">,</span>&nbsp;<span class="ident" id="1638374">g</span>&nbsp;<span class="builtintype" id="1638376">uint64</span><span class="op" id="1638382">,</span>&nbsp;<span class="ident" id="1638384">ret</span>&nbsp;<span class="op" id="1638388">*</span><span class="builtintype" id="1638389">uint64</span><span class="op" id="1638395">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638408">{</span>&nbsp;<span class="op" id="1638410">*</span><span class="ident" id="1638411">ret</span>&nbsp;<span class="op" id="1638415">=</span>&nbsp;<span class="ident" id="1638417">fadd64</span><span class="op" id="1638423">(</span><span class="ident" id="1638424">f</span><span class="op" id="1638425">,</span>&nbsp;<span class="ident" id="1638427">g</span><span class="op" id="1638428">)</span>&nbsp;<span class="op" id="1638430">}</span><br>
<span class="lineno">490</span><span class="keyword" id="1638432">func</span>&nbsp;<span class="ident" id="1638437">fsub64c</span><span class="op" id="1638444">(</span><span class="ident" id="1638445">f</span><span class="op" id="1638446">,</span>&nbsp;<span class="ident" id="1638448">g</span>&nbsp;<span class="builtintype" id="1638450">uint64</span><span class="op" id="1638456">,</span>&nbsp;<span class="ident" id="1638458">ret</span>&nbsp;<span class="op" id="1638462">*</span><span class="builtintype" id="1638463">uint64</span><span class="op" id="1638469">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638482">{</span>&nbsp;<span class="op" id="1638484">*</span><span class="ident" id="1638485">ret</span>&nbsp;<span class="op" id="1638489">=</span>&nbsp;<span class="ident" id="1638491">fsub64</span><span class="op" id="1638497">(</span><span class="ident" id="1638498">f</span><span class="op" id="1638499">,</span>&nbsp;<span class="ident" id="1638501">g</span><span class="op" id="1638502">)</span>&nbsp;<span class="op" id="1638504">}</span><br>
<span class="lineno"></span><span class="keyword" id="1638506">func</span>&nbsp;<span class="ident" id="1638511">fmul64c</span><span class="op" id="1638518">(</span><span class="ident" id="1638519">f</span><span class="op" id="1638520">,</span>&nbsp;<span class="ident" id="1638522">g</span>&nbsp;<span class="builtintype" id="1638524">uint64</span><span class="op" id="1638530">,</span>&nbsp;<span class="ident" id="1638532">ret</span>&nbsp;<span class="op" id="1638536">*</span><span class="builtintype" id="1638537">uint64</span><span class="op" id="1638543">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638556">{</span>&nbsp;<span class="op" id="1638558">*</span><span class="ident" id="1638559">ret</span>&nbsp;<span class="op" id="1638563">=</span>&nbsp;<span class="ident" id="1638565">fmul64</span><span class="op" id="1638571">(</span><span class="ident" id="1638572">f</span><span class="op" id="1638573">,</span>&nbsp;<span class="ident" id="1638575">g</span><span class="op" id="1638576">)</span>&nbsp;<span class="op" id="1638578">}</span><br>
<span class="lineno"></span><span class="keyword" id="1638580">func</span>&nbsp;<span class="ident" id="1638585">fdiv64c</span><span class="op" id="1638592">(</span><span class="ident" id="1638593">f</span><span class="op" id="1638594">,</span>&nbsp;<span class="ident" id="1638596">g</span>&nbsp;<span class="builtintype" id="1638598">uint64</span><span class="op" id="1638604">,</span>&nbsp;<span class="ident" id="1638606">ret</span>&nbsp;<span class="op" id="1638610">*</span><span class="builtintype" id="1638611">uint64</span><span class="op" id="1638617">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638630">{</span>&nbsp;<span class="op" id="1638632">*</span><span class="ident" id="1638633">ret</span>&nbsp;<span class="op" id="1638637">=</span>&nbsp;<span class="ident" id="1638639">fdiv64</span><span class="op" id="1638645">(</span><span class="ident" id="1638646">f</span><span class="op" id="1638647">,</span>&nbsp;<span class="ident" id="1638649">g</span><span class="op" id="1638650">)</span>&nbsp;<span class="op" id="1638652">}</span><br>
<span class="lineno"></span><span class="keyword" id="1638654">func</span>&nbsp;<span class="ident" id="1638659">fneg64c</span><span class="op" id="1638666">(</span><span class="ident" id="1638667">f</span>&nbsp;<span class="builtintype" id="1638669">uint64</span><span class="op" id="1638675">,</span>&nbsp;<span class="ident" id="1638677">ret</span>&nbsp;<span class="op" id="1638681">*</span><span class="builtintype" id="1638682">uint64</span><span class="op" id="1638688">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638704">{</span>&nbsp;<span class="op" id="1638706">*</span><span class="ident" id="1638707">ret</span>&nbsp;<span class="op" id="1638711">=</span>&nbsp;<span class="ident" id="1638713">fneg64</span><span class="op" id="1638719">(</span><span class="ident" id="1638720">f</span><span class="op" id="1638721">)</span>&nbsp;<span class="op" id="1638723">}</span><br>
<span class="lineno"></span><span class="keyword" id="1638725">func</span>&nbsp;<span class="ident" id="1638730">f32to64c</span><span class="op" id="1638738">(</span><span class="ident" id="1638739">f</span>&nbsp;<span class="builtintype" id="1638741">uint32</span><span class="op" id="1638747">,</span>&nbsp;<span class="ident" id="1638749">ret</span>&nbsp;<span class="op" id="1638753">*</span><span class="builtintype" id="1638754">uint64</span><span class="op" id="1638760">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638775">{</span>&nbsp;<span class="op" id="1638777">*</span><span class="ident" id="1638778">ret</span>&nbsp;<span class="op" id="1638782">=</span>&nbsp;<span class="ident" id="1638784">f32to64</span><span class="op" id="1638791">(</span><span class="ident" id="1638792">f</span><span class="op" id="1638793">)</span>&nbsp;<span class="op" id="1638795">}</span><br>
<span class="lineno">495</span><span class="keyword" id="1638797">func</span>&nbsp;<span class="ident" id="1638802">f64to32c</span><span class="op" id="1638810">(</span><span class="ident" id="1638811">f</span>&nbsp;<span class="builtintype" id="1638813">uint64</span><span class="op" id="1638819">,</span>&nbsp;<span class="ident" id="1638821">ret</span>&nbsp;<span class="op" id="1638825">*</span><span class="builtintype" id="1638826">uint32</span><span class="op" id="1638832">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1638847">{</span>&nbsp;<span class="op" id="1638849">*</span><span class="ident" id="1638850">ret</span>&nbsp;<span class="op" id="1638854">=</span>&nbsp;<span class="ident" id="1638856">f64to32</span><span class="op" id="1638863">(</span><span class="ident" id="1638864">f</span><span class="op" id="1638865">)</span>&nbsp;<span class="op" id="1638867">}</span><br>
<span class="lineno"></span><span class="keyword" id="1638869">func</span>&nbsp;<span class="ident" id="1638874">fcmp64c</span><span class="op" id="1638881">(</span><span class="ident" id="1638882">f</span><span class="op" id="1638883">,</span>&nbsp;<span class="ident" id="1638885">g</span>&nbsp;<span class="builtintype" id="1638887">uint64</span><span class="op" id="1638893">,</span>&nbsp;<span class="ident" id="1638895">ret</span>&nbsp;<span class="op" id="1638899">*</span><span class="builtintype" id="1638900">int</span><span class="op" id="1638903">,</span>&nbsp;<span class="ident" id="1638905">retnan</span>&nbsp;<span class="op" id="1638912">*</span><span class="builtintype" id="1638913">bool</span><span class="op" id="1638917">)</span>&nbsp;<span class="op" id="1638919">{</span>&nbsp;<span class="op" id="1638921">*</span><span class="ident" id="1638922">ret</span><span class="op" id="1638925">,</span>&nbsp;<span class="op" id="1638927">*</span><span class="ident" id="1638928">retnan</span>&nbsp;<span class="op" id="1638935">=</span>&nbsp;<span class="ident" id="1638937">fcmp64</span><span class="op" id="1638943">(</span><span class="ident" id="1638944">f</span><span class="op" id="1638945">,</span>&nbsp;<span class="ident" id="1638947">g</span><span class="op" id="1638948">)</span>&nbsp;<span class="op" id="1638950">}</span><br>
<span class="lineno"></span><span class="keyword" id="1638952">func</span>&nbsp;<span class="ident" id="1638957">fintto64c</span><span class="op" id="1638966">(</span><span class="ident" id="1638967">val</span>&nbsp;<span class="builtintype" id="1638971">int64</span><span class="op" id="1638976">,</span>&nbsp;<span class="ident" id="1638978">ret</span>&nbsp;<span class="op" id="1638982">*</span><span class="builtintype" id="1638983">uint64</span><span class="op" id="1638989">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1639002">{</span>&nbsp;<span class="op" id="1639004">*</span><span class="ident" id="1639005">ret</span>&nbsp;<span class="op" id="1639009">=</span>&nbsp;<span class="ident" id="1639011">fintto64</span><span class="op" id="1639019">(</span><span class="ident" id="1639020">val</span><span class="op" id="1639023">)</span>&nbsp;<span class="op" id="1639025">}</span><br>
<span class="lineno"></span><span class="keyword" id="1639027">func</span>&nbsp;<span class="ident" id="1639032">f64tointc</span><span class="op" id="1639041">(</span><span class="ident" id="1639042">f</span>&nbsp;<span class="builtintype" id="1639044">uint64</span><span class="op" id="1639050">,</span>&nbsp;<span class="ident" id="1639052">ret</span>&nbsp;<span class="op" id="1639056">*</span><span class="builtintype" id="1639057">int64</span><span class="op" id="1639062">,</span>&nbsp;<span class="ident" id="1639064">retok</span>&nbsp;<span class="op" id="1639070">*</span><span class="builtintype" id="1639071">bool</span><span class="op" id="1639075">)</span>&nbsp;<span class="op" id="1639077">{</span>&nbsp;<span class="op" id="1639079">*</span><span class="ident" id="1639080">ret</span><span class="op" id="1639083">,</span>&nbsp;<span class="op" id="1639085">*</span><span class="ident" id="1639086">retok</span>&nbsp;<span class="op" id="1639092">=</span>&nbsp;<span class="ident" id="1639094">f64toint</span><span class="op" id="1639102">(</span><span class="ident" id="1639103">f</span><span class="op" id="1639104">)</span>&nbsp;<span class="op" id="1639106">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
