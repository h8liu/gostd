<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html" class="current">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3309262">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3309318">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3309372">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3309423">//&nbsp;Internet&nbsp;protocol&nbsp;family&nbsp;sockets</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3309460">package</span>&nbsp;<span class="ident" id="3309468">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3309473">import</span>&nbsp;<span class="op" id="3309480">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3309483">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3309493">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3309500">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3309503">var</span>&nbsp;<span class="op" id="3309507">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3309510">//&nbsp;supportsIPv4&nbsp;reports&nbsp;whether&nbsp;the&nbsp;platform&nbsp;supports&nbsp;IPv4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3309570">//&nbsp;networking&nbsp;functionality.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3309600">supportsIPv4</span>&nbsp;<span class="builtintype" id="3309613">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3309620">//&nbsp;supportsIPv6&nbsp;reports&nbsp;whether&nbsp;the&nbsp;platform&nbsp;supports&nbsp;IPv6</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3309680">//&nbsp;networking&nbsp;functionality.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3309710">supportsIPv6</span>&nbsp;<span class="builtintype" id="3309723">bool</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3309730">//&nbsp;supportsIPv4map&nbsp;reports&nbsp;whether&nbsp;the&nbsp;platform&nbsp;supports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3309788">//&nbsp;mapping&nbsp;an&nbsp;IPv4&nbsp;address&nbsp;inside&nbsp;an&nbsp;IPv6&nbsp;address&nbsp;at&nbsp;transport</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3309852">//&nbsp;layer&nbsp;protocols.&nbsp;&nbsp;See&nbsp;RFC&nbsp;4291,&nbsp;RFC&nbsp;4038&nbsp;and&nbsp;RFC&nbsp;3493.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3309911">supportsIPv4map</span>&nbsp;<span class="builtintype" id="3309927">bool</span><br>
<span class="lineno"></span><span class="op" id="3309932">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3309935">func</span>&nbsp;<span class="ident" id="3309940">init</span><span class="op" id="3309944">(</span><span class="op" id="3309945">)</span>&nbsp;<span class="op" id="3309947">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3309950"><a href="/gostd/net/fd_unix.go.html#3257655">sysInit</a></span><span class="op" id="3309957">(</span><span class="op" id="3309958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3309961"><a href="/gostd/net/ipsock.go.html#3309600">supportsIPv4</a></span>&nbsp;<span class="op" id="3309974">=</span>&nbsp;<span class="ident" id="3309976"><a href="/gostd/net/ipsock_posix.go.html#3317827">probeIPv4Stack</a></span><span class="op" id="3309990">(</span><span class="op" id="3309991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3309994"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span><span class="op" id="3310006">,</span>&nbsp;<span class="ident" id="3310008"><a href="/gostd/net/ipsock.go.html#3309911">supportsIPv4map</a></span>&nbsp;<span class="op" id="3310024">=</span>&nbsp;<span class="ident" id="3310026"><a href="/gostd/net/ipsock_posix.go.html#3318817">probeIPv6Stack</a></span><span class="op" id="3310040">(</span><span class="op" id="3310041">)</span><br>
<span class="lineno"></span><span class="op" id="3310043">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3310046">//&nbsp;A&nbsp;netaddr&nbsp;represents&nbsp;a&nbsp;network&nbsp;endpoint&nbsp;address&nbsp;or&nbsp;a&nbsp;list&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3310110">//&nbsp;network&nbsp;endpoint&nbsp;addresses.</span><br>
<span class="lineno"></span><span class="keyword" id="3310141">type</span>&nbsp;<span class="ident" id="3310146">netaddr</span>&nbsp;<span class="keyword" id="3310154">interface</span>&nbsp;<span class="op" id="3310164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310167">//&nbsp;toAddr&nbsp;returns&nbsp;the&nbsp;address&nbsp;represented&nbsp;in&nbsp;Addr&nbsp;interface.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310229">//&nbsp;It&nbsp;returns&nbsp;a&nbsp;nil&nbsp;interface&nbsp;when&nbsp;the&nbsp;address&nbsp;is&nbsp;nil.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3310285">toAddr</span><span class="op" id="3310291">(</span><span class="op" id="3310292">)</span>&nbsp;<span class="ident" id="3310294"><a href="/gostd/net/net.go.html#3334179">Addr</a></span><br>
<span class="lineno"></span><span class="op" id="3310299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3310302">//&nbsp;An&nbsp;addrList&nbsp;represents&nbsp;a&nbsp;list&nbsp;of&nbsp;network&nbsp;endpoint&nbsp;addresses.</span><br>
<span class="lineno"></span><span class="keyword" id="3310366">type</span>&nbsp;<span class="ident" id="3310371">addrList</span>&nbsp;<span class="op" id="3310380">[</span><span class="op" id="3310381">]</span><span class="ident" id="3310382"><a href="/gostd/net/ipsock.go.html#3310146">netaddr</a></span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="3310391">func</span>&nbsp;<span class="op" id="3310396">(</span><span class="ident" id="3310397">al</span>&nbsp;<span class="ident" id="3310400"><a href="/gostd/net/ipsock.go.html#3310371">addrList</a></span><span class="op" id="3310408">)</span>&nbsp;<span class="ident" id="3310410">toAddr</span><span class="op" id="3310416">(</span><span class="op" id="3310417">)</span>&nbsp;<span class="ident" id="3310419"><a href="/gostd/net/net.go.html#3334179">Addr</a></span>&nbsp;<span class="op" id="3310424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310427">switch</span>&nbsp;<span class="builtinfunc" id="3310434">len</span><span class="op" id="3310437">(</span><span class="ident" id="3310438"><a href="/gostd/net/ipsock.go.html#3310397">al</a></span><span class="op" id="3310440">)</span>&nbsp;<span class="op" id="3310442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310445">case</span>&nbsp;<span class="num" id="3310450">0</span><span class="op" id="3310451">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310455">return</span>&nbsp;<span class="builtintype" id="3310462">nil</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310467">case</span>&nbsp;<span class="num" id="3310472">1</span><span class="op" id="3310473">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310477">return</span>&nbsp;<span class="ident" id="3310484"><a href="/gostd/net/ipsock.go.html#3310397">al</a></span><span class="op" id="3310486">[</span><span class="num" id="3310487">0</span><span class="op" id="3310488">]</span><span class="op" id="3310489">.</span><span class="ident" id="3310490"><a href="/gostd/net/ipsock.go.html#3310285">toAddr</a></span><span class="op" id="3310496">(</span><span class="op" id="3310497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310500">default</span><span class="op" id="3310507">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310511">//&nbsp;For&nbsp;now,&nbsp;we&#39;ll&nbsp;roughly&nbsp;pick&nbsp;first&nbsp;one&nbsp;without</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310562">//&nbsp;considering&nbsp;dealing&nbsp;with&nbsp;any&nbsp;preferences&nbsp;such&nbsp;as</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310616">//&nbsp;DNS&nbsp;TTL,&nbsp;transport&nbsp;path&nbsp;quality,&nbsp;network&nbsp;routing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3310670">//&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3310688">return</span>&nbsp;<span class="ident" id="3310695"><a href="/gostd/net/ipsock.go.html#3310397">al</a></span><span class="op" id="3310697">[</span><span class="num" id="3310698">0</span><span class="op" id="3310699">]</span><span class="op" id="3310700">.</span><span class="ident" id="3310701"><a href="/gostd/net/ipsock.go.html#3310285">toAddr</a></span><span class="op" id="3310707">(</span><span class="op" id="3310708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3310711">}</span><br>
<span class="lineno"></span><span class="op" id="3310713">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="3310716">var</span>&nbsp;<span class="ident" id="3310720">errNoSuitableAddress</span>&nbsp;<span class="op" id="3310741">=</span>&nbsp;<span class="ident" id="3310743"><a href="/gostd/net/ipsock.go.html#3309483">errors</a></span><span class="op" id="3310749">.</span><span class="ident" id="3310750"><a href="/gostd/errors/errors.go.html#1418493">New</a></span><span class="op" id="3310753">(</span><span class="string" id="3310754">&#34;no&nbsp;suitable&nbsp;address&nbsp;found&#34;</span><span class="op" id="3310781">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3310784">//&nbsp;firstFavoriteAddr&nbsp;returns&nbsp;an&nbsp;address&nbsp;or&nbsp;a&nbsp;list&nbsp;of&nbsp;addresses&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3310852">//&nbsp;implement&nbsp;the&nbsp;netaddr&nbsp;interface.&nbsp;Known&nbsp;filters&nbsp;are&nbsp;nil,&nbsp;ipv4only</span><br>
<span class="lineno">65</span><span class="comment" id="3310920">//&nbsp;and&nbsp;ipv6only.&nbsp;It&nbsp;returns&nbsp;any&nbsp;address&nbsp;when&nbsp;filter&nbsp;is&nbsp;nil.&nbsp;The&nbsp;result</span><br>
<span class="lineno"></span><span class="comment" id="3310991">//&nbsp;contains&nbsp;at&nbsp;least&nbsp;one&nbsp;address&nbsp;when&nbsp;error&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3311043">func</span>&nbsp;<span class="ident" id="3311048">firstFavoriteAddr</span><span class="op" id="3311065">(</span><span class="ident" id="3311066">filter</span>&nbsp;<span class="keyword" id="3311073">func</span><span class="op" id="3311077">(</span><span class="ident" id="3311078"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3311080">)</span>&nbsp;<span class="ident" id="3311082"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3311084">,</span>&nbsp;<span class="ident" id="3311086">ips</span>&nbsp;<span class="op" id="3311090">[</span><span class="op" id="3311091">]</span><span class="ident" id="3311092"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3311094">,</span>&nbsp;<span class="ident" id="3311096">inetaddr</span>&nbsp;<span class="keyword" id="3311105">func</span><span class="op" id="3311109">(</span><span class="ident" id="3311110"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3311112">)</span>&nbsp;<span class="ident" id="3311114"><a href="/gostd/net/ipsock.go.html#3310146">netaddr</a></span><span class="op" id="3311121">)</span>&nbsp;<span class="op" id="3311123">(</span><span class="ident" id="3311124"><a href="/gostd/net/ipsock.go.html#3310146">netaddr</a></span><span class="op" id="3311131">,</span>&nbsp;<span class="builtintype" id="3311133">error</span><span class="op" id="3311138">)</span>&nbsp;<span class="op" id="3311140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311143">if</span>&nbsp;<span class="ident" id="3311146"><a href="/gostd/net/ipsock.go.html#3311066">filter</a></span>&nbsp;<span class="op" id="3311153">!=</span>&nbsp;<span class="builtintype" id="3311156">nil</span>&nbsp;<span class="op" id="3311160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311164">return</span>&nbsp;<span class="ident" id="3311171"><a href="/gostd/net/ipsock.go.html#3312094">firstSupportedAddr</a></span><span class="op" id="3311189">(</span><span class="ident" id="3311190"><a href="/gostd/net/ipsock.go.html#3311066">filter</a></span><span class="op" id="3311196">,</span>&nbsp;<span class="ident" id="3311198"><a href="/gostd/net/ipsock.go.html#3311086">ips</a></span><span class="op" id="3311201">,</span>&nbsp;<span class="ident" id="3311203"><a href="/gostd/net/ipsock.go.html#3311096">inetaddr</a></span><span class="op" id="3311211">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311217">var</span>&nbsp;<span class="op" id="3311221">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311225">ipv4</span><span class="op" id="3311229">,</span>&nbsp;<span class="ident" id="3311231">ipv6</span><span class="op" id="3311235">,</span>&nbsp;<span class="ident" id="3311237">swap</span>&nbsp;<span class="builtintype" id="3311242">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311249">list</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311266"><a href="/gostd/net/ipsock.go.html#3310371">addrList</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311276">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311279">for</span>&nbsp;<span class="ident" id="3311283">_</span><span class="op" id="3311284">,</span>&nbsp;<span class="ident" id="3311286">ip</span>&nbsp;<span class="op" id="3311289">:=</span>&nbsp;<span class="keyword" id="3311292">range</span>&nbsp;<span class="ident" id="3311298"><a href="/gostd/net/ipsock.go.html#3311086">ips</a></span>&nbsp;<span class="op" id="3311302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3311306">//&nbsp;We&#39;ll&nbsp;take&nbsp;any&nbsp;IP&nbsp;address,&nbsp;but&nbsp;since&nbsp;the&nbsp;dialing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3311360">//&nbsp;code&nbsp;does&nbsp;not&nbsp;yet&nbsp;try&nbsp;multiple&nbsp;addresses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3311406">//&nbsp;effectively,&nbsp;prefer&nbsp;to&nbsp;use&nbsp;an&nbsp;IPv4&nbsp;address&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3311457">//&nbsp;possible.&nbsp;This&nbsp;is&nbsp;especially&nbsp;relevant&nbsp;if&nbsp;localhost</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3311513">//&nbsp;resolves&nbsp;to&nbsp;[ipv6-localhost,&nbsp;ipv4-localhost].&nbsp;Too</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3311568">//&nbsp;much&nbsp;code&nbsp;assumes&nbsp;localhost&nbsp;==&nbsp;ipv4-localhost.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311620">if</span>&nbsp;<span class="ident" id="3311623">ip4</span>&nbsp;<span class="op" id="3311627">:=</span>&nbsp;<span class="ident" id="3311630"><a href="/gostd/net/ipsock.go.html#3312498">ipv4only</a></span><span class="op" id="3311638">(</span><span class="ident" id="3311639"><a href="/gostd/net/ipsock.go.html#3311286">ip</a></span><span class="op" id="3311641">)</span><span class="op" id="3311642">;</span>&nbsp;<span class="ident" id="3311644"><a href="/gostd/net/ipsock.go.html#3311623">ip4</a></span>&nbsp;<span class="op" id="3311648">!=</span>&nbsp;<span class="builtintype" id="3311651">nil</span>&nbsp;<span class="op" id="3311655">&amp;&amp;</span>&nbsp;<span class="op" id="3311658">!</span><span class="ident" id="3311659"><a href="/gostd/net/ipsock.go.html#3311225">ipv4</a></span>&nbsp;<span class="op" id="3311664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311669"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span>&nbsp;<span class="op" id="3311674">=</span>&nbsp;<span class="builtinfunc" id="3311676">append</span><span class="op" id="3311682">(</span><span class="ident" id="3311683"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span><span class="op" id="3311687">,</span>&nbsp;<span class="ident" id="3311689"><a href="/gostd/net/ipsock.go.html#3311096">inetaddr</a></span><span class="op" id="3311697">(</span><span class="ident" id="3311698"><a href="/gostd/net/ipsock.go.html#3311623">ip4</a></span><span class="op" id="3311701">)</span><span class="op" id="3311702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311707"><a href="/gostd/net/ipsock.go.html#3311225">ipv4</a></span>&nbsp;<span class="op" id="3311712">=</span>&nbsp;<span class="builtintype" id="3311714">true</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311722">if</span>&nbsp;<span class="ident" id="3311725"><a href="/gostd/net/ipsock.go.html#3311231">ipv6</a></span>&nbsp;<span class="op" id="3311730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311736"><a href="/gostd/net/ipsock.go.html#3311237">swap</a></span>&nbsp;<span class="op" id="3311741">=</span>&nbsp;<span class="builtintype" id="3311743">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311755">}</span>&nbsp;<span class="keyword" id="3311757">else</span>&nbsp;<span class="keyword" id="3311762">if</span>&nbsp;<span class="ident" id="3311765">ip6</span>&nbsp;<span class="op" id="3311769">:=</span>&nbsp;<span class="ident" id="3311772"><a href="/gostd/net/ipsock.go.html#3312793">ipv6only</a></span><span class="op" id="3311780">(</span><span class="ident" id="3311781"><a href="/gostd/net/ipsock.go.html#3311286">ip</a></span><span class="op" id="3311783">)</span><span class="op" id="3311784">;</span>&nbsp;<span class="ident" id="3311786"><a href="/gostd/net/ipsock.go.html#3311765">ip6</a></span>&nbsp;<span class="op" id="3311790">!=</span>&nbsp;<span class="builtintype" id="3311793">nil</span>&nbsp;<span class="op" id="3311797">&amp;&amp;</span>&nbsp;<span class="op" id="3311800">!</span><span class="ident" id="3311801"><a href="/gostd/net/ipsock.go.html#3311231">ipv6</a></span>&nbsp;<span class="op" id="3311806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311811"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span>&nbsp;<span class="op" id="3311816">=</span>&nbsp;<span class="builtinfunc" id="3311818">append</span><span class="op" id="3311824">(</span><span class="ident" id="3311825"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span><span class="op" id="3311829">,</span>&nbsp;<span class="ident" id="3311831"><a href="/gostd/net/ipsock.go.html#3311096">inetaddr</a></span><span class="op" id="3311839">(</span><span class="ident" id="3311840"><a href="/gostd/net/ipsock.go.html#3311765">ip6</a></span><span class="op" id="3311843">)</span><span class="op" id="3311844">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311849"><a href="/gostd/net/ipsock.go.html#3311231">ipv6</a></span>&nbsp;<span class="op" id="3311854">=</span>&nbsp;<span class="builtintype" id="3311856">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311867">if</span>&nbsp;<span class="ident" id="3311870"><a href="/gostd/net/ipsock.go.html#3311225">ipv4</a></span>&nbsp;<span class="op" id="3311875">&amp;&amp;</span>&nbsp;<span class="ident" id="3311878"><a href="/gostd/net/ipsock.go.html#3311231">ipv6</a></span>&nbsp;<span class="op" id="3311883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311888">if</span>&nbsp;<span class="ident" id="3311891"><a href="/gostd/net/ipsock.go.html#3311237">swap</a></span>&nbsp;<span class="op" id="3311896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3311902"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span><span class="op" id="3311906">[</span><span class="num" id="3311907">0</span><span class="op" id="3311908">]</span><span class="op" id="3311909">,</span>&nbsp;<span class="ident" id="3311911"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span><span class="op" id="3311915">[</span><span class="num" id="3311916">1</span><span class="op" id="3311917">]</span>&nbsp;<span class="op" id="3311919">=</span>&nbsp;<span class="ident" id="3311921"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span><span class="op" id="3311925">[</span><span class="num" id="3311926">1</span><span class="op" id="3311927">]</span><span class="op" id="3311928">,</span>&nbsp;<span class="ident" id="3311930"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span><span class="op" id="3311934">[</span><span class="num" id="3311935">0</span><span class="op" id="3311936">]</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311946">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3311957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311960">switch</span>&nbsp;<span class="builtinfunc" id="3311967">len</span><span class="op" id="3311970">(</span><span class="ident" id="3311971"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span><span class="op" id="3311975">)</span>&nbsp;<span class="op" id="3311977">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311980">case</span>&nbsp;<span class="num" id="3311985">0</span><span class="op" id="3311986">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3311990">return</span>&nbsp;<span class="builtintype" id="3311997">nil</span><span class="op" id="3312000">,</span>&nbsp;<span class="ident" id="3312002"><a href="/gostd/net/ipsock.go.html#3310720">errNoSuitableAddress</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312024">case</span>&nbsp;<span class="num" id="3312029">1</span><span class="op" id="3312030">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312034">return</span>&nbsp;<span class="ident" id="3312041"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span><span class="op" id="3312045">[</span><span class="num" id="3312046">0</span><span class="op" id="3312047">]</span><span class="op" id="3312048">,</span>&nbsp;<span class="builtintype" id="3312050">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312055">default</span><span class="op" id="3312062">:</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312066">return</span>&nbsp;<span class="ident" id="3312073"><a href="/gostd/net/ipsock.go.html#3311249">list</a></span><span class="op" id="3312077">,</span>&nbsp;<span class="builtintype" id="3312079">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312084">}</span><br>
<span class="lineno"></span><span class="op" id="3312086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3312089">func</span>&nbsp;<span class="ident" id="3312094">firstSupportedAddr</span><span class="op" id="3312112">(</span><span class="ident" id="3312113">filter</span>&nbsp;<span class="keyword" id="3312120">func</span><span class="op" id="3312124">(</span><span class="ident" id="3312125"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3312127">)</span>&nbsp;<span class="ident" id="3312129"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3312131">,</span>&nbsp;<span class="ident" id="3312133">ips</span>&nbsp;<span class="op" id="3312137">[</span><span class="op" id="3312138">]</span><span class="ident" id="3312139"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3312141">,</span>&nbsp;<span class="ident" id="3312143">inetaddr</span>&nbsp;<span class="keyword" id="3312152">func</span><span class="op" id="3312156">(</span><span class="ident" id="3312157"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3312159">)</span>&nbsp;<span class="ident" id="3312161"><a href="/gostd/net/ipsock.go.html#3310146">netaddr</a></span><span class="op" id="3312168">)</span>&nbsp;<span class="op" id="3312170">(</span><span class="ident" id="3312171"><a href="/gostd/net/ipsock.go.html#3310146">netaddr</a></span><span class="op" id="3312178">,</span>&nbsp;<span class="builtintype" id="3312180">error</span><span class="op" id="3312185">)</span>&nbsp;<span class="op" id="3312187">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312190">for</span>&nbsp;<span class="ident" id="3312194">_</span><span class="op" id="3312195">,</span>&nbsp;<span class="ident" id="3312197">ip</span>&nbsp;<span class="op" id="3312200">:=</span>&nbsp;<span class="keyword" id="3312203">range</span>&nbsp;<span class="ident" id="3312209"><a href="/gostd/net/ipsock.go.html#3312133">ips</a></span>&nbsp;<span class="op" id="3312213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312217">if</span>&nbsp;<span class="ident" id="3312220">ip</span>&nbsp;<span class="op" id="3312223">:=</span>&nbsp;<span class="ident" id="3312226"><a href="/gostd/net/ipsock.go.html#3312113">filter</a></span><span class="op" id="3312232">(</span><span class="ident" id="3312233"><a href="/gostd/net/ipsock.go.html#3312197">ip</a></span><span class="op" id="3312235">)</span><span class="op" id="3312236">;</span>&nbsp;<span class="ident" id="3312238"><a href="/gostd/net/ipsock.go.html#3312220">ip</a></span>&nbsp;<span class="op" id="3312241">!=</span>&nbsp;<span class="builtintype" id="3312244">nil</span>&nbsp;<span class="op" id="3312248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312253">return</span>&nbsp;<span class="ident" id="3312260"><a href="/gostd/net/ipsock.go.html#3312143">inetaddr</a></span><span class="op" id="3312268">(</span><span class="ident" id="3312269"><a href="/gostd/net/ipsock.go.html#3312220">ip</a></span><span class="op" id="3312271">)</span><span class="op" id="3312272">,</span>&nbsp;<span class="builtintype" id="3312274">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312283">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312286">return</span>&nbsp;<span class="builtintype" id="3312293">nil</span><span class="op" id="3312296">,</span>&nbsp;<span class="ident" id="3312298"><a href="/gostd/net/ipsock.go.html#3310720">errNoSuitableAddress</a></span><br>
<span class="lineno"></span><span class="op" id="3312319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3312322">//&nbsp;ipv4only&nbsp;returns&nbsp;IPv4&nbsp;addresses&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;with&nbsp;the&nbsp;kernel&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3312391">//&nbsp;IPv4&nbsp;addressing&nbsp;modes.&nbsp;If&nbsp;ip&nbsp;is&nbsp;an&nbsp;IPv4&nbsp;address,&nbsp;ipv4only&nbsp;returns&nbsp;ip.</span><br>
<span class="lineno">120</span><span class="comment" id="3312464">//&nbsp;Otherwise&nbsp;it&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3312493">func</span>&nbsp;<span class="ident" id="3312498">ipv4only</span><span class="op" id="3312506">(</span><span class="ident" id="3312507">ip</span>&nbsp;<span class="ident" id="3312510"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3312512">)</span>&nbsp;<span class="ident" id="3312514"><a href="/gostd/net/ip.go.html#3286271">IP</a></span>&nbsp;<span class="op" id="3312517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312520">if</span>&nbsp;<span class="ident" id="3312523"><a href="/gostd/net/ipsock.go.html#3309600">supportsIPv4</a></span>&nbsp;<span class="op" id="3312536">&amp;&amp;</span>&nbsp;<span class="ident" id="3312539"><a href="/gostd/net/ipsock.go.html#3312507">ip</a></span><span class="op" id="3312541">.</span><span class="ident" id="3312542"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="3312545">(</span><span class="op" id="3312546">)</span>&nbsp;<span class="op" id="3312548">!=</span>&nbsp;<span class="builtintype" id="3312551">nil</span>&nbsp;<span class="op" id="3312555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312559">return</span>&nbsp;<span class="ident" id="3312566"><a href="/gostd/net/ipsock.go.html#3312507">ip</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312570">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312573">return</span>&nbsp;<span class="builtintype" id="3312580">nil</span><br>
<span class="lineno"></span><span class="op" id="3312584">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3312587">//&nbsp;ipv6only&nbsp;returns&nbsp;IPv6&nbsp;addresses&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;with&nbsp;the&nbsp;kernel&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="3312656">//&nbsp;IPv6&nbsp;addressing&nbsp;modes.&nbsp;&nbsp;It&nbsp;returns&nbsp;IPv4-mapped&nbsp;IPv6&nbsp;addresses&nbsp;as</span><br>
<span class="lineno">130</span><span class="comment" id="3312724">//&nbsp;nils&nbsp;and&nbsp;returns&nbsp;other&nbsp;IPv6&nbsp;address&nbsp;types&nbsp;as&nbsp;IPv6&nbsp;addresses.</span><br>
<span class="lineno"></span><span class="keyword" id="3312788">func</span>&nbsp;<span class="ident" id="3312793">ipv6only</span><span class="op" id="3312801">(</span><span class="ident" id="3312802">ip</span>&nbsp;<span class="ident" id="3312805"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3312807">)</span>&nbsp;<span class="ident" id="3312809"><a href="/gostd/net/ip.go.html#3286271">IP</a></span>&nbsp;<span class="op" id="3312812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312815">if</span>&nbsp;<span class="ident" id="3312818"><a href="/gostd/net/ipsock.go.html#3309710">supportsIPv6</a></span>&nbsp;<span class="op" id="3312831">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3312834">len</span><span class="op" id="3312837">(</span><span class="ident" id="3312838"><a href="/gostd/net/ipsock.go.html#3312802">ip</a></span><span class="op" id="3312840">)</span>&nbsp;<span class="op" id="3312842">==</span>&nbsp;<span class="ident" id="3312845"><a href="/gostd/net/ip.go.html#3285864">IPv6len</a></span>&nbsp;<span class="op" id="3312853">&amp;&amp;</span>&nbsp;<span class="ident" id="3312856"><a href="/gostd/net/ipsock.go.html#3312802">ip</a></span><span class="op" id="3312858">.</span><span class="ident" id="3312859"><a href="/gostd/net/ip.go.html#3290039">To4</a></span><span class="op" id="3312862">(</span><span class="op" id="3312863">)</span>&nbsp;<span class="op" id="3312865">==</span>&nbsp;<span class="builtintype" id="3312868">nil</span>&nbsp;<span class="op" id="3312872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312876">return</span>&nbsp;<span class="ident" id="3312883"><a href="/gostd/net/ipsock.go.html#3312802">ip</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3312887">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3312890">return</span>&nbsp;<span class="builtintype" id="3312897">nil</span><br>
<span class="lineno"></span><span class="op" id="3312901">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3312904">//&nbsp;SplitHostPort&nbsp;splits&nbsp;a&nbsp;network&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host:port&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="3312971">//&nbsp;&#34;[host]:port&#34;&nbsp;or&nbsp;&#34;[ipv6-host%zone]:port&#34;&nbsp;into&nbsp;host&nbsp;or</span><br>
<span class="lineno">140</span><span class="comment" id="3313028">//&nbsp;ipv6-host%zone&nbsp;and&nbsp;port.&nbsp;&nbsp;A&nbsp;literal&nbsp;address&nbsp;or&nbsp;host&nbsp;name&nbsp;for&nbsp;IPv6</span><br>
<span class="lineno"></span><span class="comment" id="3313097">//&nbsp;must&nbsp;be&nbsp;enclosed&nbsp;in&nbsp;square&nbsp;brackets,&nbsp;as&nbsp;in&nbsp;&#34;[::1]:80&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="3313155">//&nbsp;&#34;[ipv6-host]:http&#34;&nbsp;or&nbsp;&#34;[ipv6-host%zone]:80&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3313203">func</span>&nbsp;<span class="ident" id="3313208">SplitHostPort</span><span class="op" id="3313221">(</span><span class="ident" id="3313222">hostport</span>&nbsp;<span class="builtintype" id="3313231">string</span><span class="op" id="3313237">)</span>&nbsp;<span class="op" id="3313239">(</span><span class="ident" id="3313240">host</span><span class="op" id="3313244">,</span>&nbsp;<span class="ident" id="3313246">port</span>&nbsp;<span class="builtintype" id="3313251">string</span><span class="op" id="3313257">,</span>&nbsp;<span class="ident" id="3313259">err</span>&nbsp;<span class="builtintype" id="3313263">error</span><span class="op" id="3313268">)</span>&nbsp;<span class="op" id="3313270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313273">j</span><span class="op" id="3313274">,</span>&nbsp;<span class="ident" id="3313276">k</span>&nbsp;<span class="op" id="3313278">:=</span>&nbsp;<span class="num" id="3313281">0</span><span class="op" id="3313282">,</span>&nbsp;<span class="num" id="3313284">0</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313288">//&nbsp;The&nbsp;port&nbsp;starts&nbsp;after&nbsp;the&nbsp;last&nbsp;colon.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313330">i</span>&nbsp;<span class="op" id="3313332">:=</span>&nbsp;<span class="ident" id="3313335"><a href="/gostd/net/parse.go.html#3349140">last</a></span><span class="op" id="3313339">(</span><span class="ident" id="3313340"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3313348">,</span>&nbsp;<span class="string" id="3313350">&#39;:&#39;</span><span class="op" id="3313353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313356">if</span>&nbsp;<span class="ident" id="3313359"><a href="/gostd/net/ipsock.go.html#3313330">i</a></span>&nbsp;<span class="op" id="3313361">&lt;</span>&nbsp;<span class="num" id="3313363">0</span>&nbsp;<span class="op" id="3313365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313369">goto</span>&nbsp;<span class="ident" id="3313374"><a href="/gostd/net/ipsock.go.html#3314438">missingPort</a></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313391">if</span>&nbsp;<span class="ident" id="3313394"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3313402">[</span><span class="num" id="3313403">0</span><span class="op" id="3313404">]</span>&nbsp;<span class="op" id="3313406">==</span>&nbsp;<span class="string" id="3313409">&#39;[&#39;</span>&nbsp;<span class="op" id="3313413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313417">//&nbsp;Expect&nbsp;the&nbsp;first&nbsp;&#39;]&#39;&nbsp;just&nbsp;before&nbsp;the&nbsp;last&nbsp;&#39;:&#39;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313469">end</span>&nbsp;<span class="op" id="3313473">:=</span>&nbsp;<span class="ident" id="3313476"><a href="/gostd/net/parse.go.html#3346051">byteIndex</a></span><span class="op" id="3313485">(</span><span class="ident" id="3313486"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3313494">,</span>&nbsp;<span class="string" id="3313496">&#39;]&#39;</span><span class="op" id="3313499">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313503">if</span>&nbsp;<span class="ident" id="3313506"><a href="/gostd/net/ipsock.go.html#3313469">end</a></span>&nbsp;<span class="op" id="3313510">&lt;</span>&nbsp;<span class="num" id="3313512">0</span>&nbsp;<span class="op" id="3313514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313519"><a href="/gostd/net/ipsock.go.html#3313259">err</a></span>&nbsp;<span class="op" id="3313523">=</span>&nbsp;<span class="op" id="3313525">&amp;</span><span class="ident" id="3313526"><a href="/gostd/net/net.go.html#3342647">AddrError</a></span><span class="op" id="3313535">{</span><span class="string" id="3313536">&#34;missing&nbsp;&#39;]&#39;&nbsp;in&nbsp;address&#34;</span><span class="op" id="3313560">,</span>&nbsp;<span class="ident" id="3313562"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3313570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313575">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313588">switch</span>&nbsp;<span class="ident" id="3313595"><a href="/gostd/net/ipsock.go.html#3313469">end</a></span>&nbsp;<span class="op" id="3313599">+</span>&nbsp;<span class="num" id="3313601">1</span>&nbsp;<span class="op" id="3313603">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313607">case</span>&nbsp;<span class="builtinfunc" id="3313612">len</span><span class="op" id="3313615">(</span><span class="ident" id="3313616"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3313624">)</span><span class="op" id="3313625">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313630">//&nbsp;There&nbsp;can&#39;t&nbsp;be&nbsp;a&nbsp;&#39;:&#39;&nbsp;behind&nbsp;the&nbsp;&#39;]&#39;&nbsp;now.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313677">goto</span>&nbsp;<span class="ident" id="3313682"><a href="/gostd/net/ipsock.go.html#3314438">missingPort</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313696">case</span>&nbsp;<span class="ident" id="3313701"><a href="/gostd/net/ipsock.go.html#3313330">i</a></span><span class="op" id="3313702">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313707">//&nbsp;The&nbsp;expected&nbsp;result.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313733">default</span><span class="op" id="3313740">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313745">//&nbsp;Either&nbsp;&#39;]&#39;&nbsp;isn&#39;t&nbsp;followed&nbsp;by&nbsp;a&nbsp;colon,&nbsp;or&nbsp;it&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3313798">//&nbsp;followed&nbsp;by&nbsp;a&nbsp;colon&nbsp;that&nbsp;is&nbsp;not&nbsp;the&nbsp;last&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313850">if</span>&nbsp;<span class="ident" id="3313853"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3313861">[</span><span class="ident" id="3313862"><a href="/gostd/net/ipsock.go.html#3313469">end</a></span><span class="op" id="3313865">+</span><span class="num" id="3313866">1</span><span class="op" id="3313867">]</span>&nbsp;<span class="op" id="3313869">==</span>&nbsp;<span class="string" id="3313872">&#39;:&#39;</span>&nbsp;<span class="op" id="3313876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313882">goto</span>&nbsp;<span class="ident" id="3313887"><a href="/gostd/net/ipsock.go.html#3314515">tooManyColons</a></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3313909">goto</span>&nbsp;<span class="ident" id="3313914"><a href="/gostd/net/ipsock.go.html#3314438">missingPort</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3313928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313932"><a href="/gostd/net/ipsock.go.html#3313240">host</a></span>&nbsp;<span class="op" id="3313937">=</span>&nbsp;<span class="ident" id="3313939"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3313947">[</span><span class="num" id="3313948">1</span><span class="op" id="3313949">:</span><span class="ident" id="3313950"><a href="/gostd/net/ipsock.go.html#3313469">end</a></span><span class="op" id="3313953">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3313957"><a href="/gostd/net/ipsock.go.html#3313273">j</a></span><span class="op" id="3313958">,</span>&nbsp;<span class="ident" id="3313960"><a href="/gostd/net/ipsock.go.html#3313276">k</a></span>&nbsp;<span class="op" id="3313962">=</span>&nbsp;<span class="num" id="3313964">1</span><span class="op" id="3313965">,</span>&nbsp;<span class="ident" id="3313967"><a href="/gostd/net/ipsock.go.html#3313469">end</a></span><span class="op" id="3313970">+</span><span class="num" id="3313971">1</span>&nbsp;<span class="comment" id="3313973">//&nbsp;there&nbsp;can&#39;t&nbsp;be&nbsp;a&nbsp;&#39;[&#39;&nbsp;resp.&nbsp;&#39;]&#39;&nbsp;before&nbsp;these&nbsp;positions</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314031">}</span>&nbsp;<span class="keyword" id="3314033">else</span>&nbsp;<span class="op" id="3314038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314042"><a href="/gostd/net/ipsock.go.html#3313240">host</a></span>&nbsp;<span class="op" id="3314047">=</span>&nbsp;<span class="ident" id="3314049"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3314057">[</span><span class="op" id="3314058">:</span><span class="ident" id="3314059"><a href="/gostd/net/ipsock.go.html#3313330">i</a></span><span class="op" id="3314060">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314064">if</span>&nbsp;<span class="ident" id="3314067"><a href="/gostd/net/parse.go.html#3346051">byteIndex</a></span><span class="op" id="3314076">(</span><span class="ident" id="3314077"><a href="/gostd/net/ipsock.go.html#3313240">host</a></span><span class="op" id="3314081">,</span>&nbsp;<span class="string" id="3314083">&#39;:&#39;</span><span class="op" id="3314086">)</span>&nbsp;<span class="op" id="3314088">&gt;=</span>&nbsp;<span class="num" id="3314091">0</span>&nbsp;<span class="op" id="3314093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314098">goto</span>&nbsp;<span class="ident" id="3314103"><a href="/gostd/net/ipsock.go.html#3314515">tooManyColons</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314119">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314123">if</span>&nbsp;<span class="ident" id="3314126"><a href="/gostd/net/parse.go.html#3346051">byteIndex</a></span><span class="op" id="3314135">(</span><span class="ident" id="3314136"><a href="/gostd/net/ipsock.go.html#3313240">host</a></span><span class="op" id="3314140">,</span>&nbsp;<span class="string" id="3314142">&#39;%&#39;</span><span class="op" id="3314145">)</span>&nbsp;<span class="op" id="3314147">&gt;=</span>&nbsp;<span class="num" id="3314150">0</span>&nbsp;<span class="op" id="3314152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314157">goto</span>&nbsp;<span class="ident" id="3314162"><a href="/gostd/net/ipsock.go.html#3314597">missingBrackets</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314186">if</span>&nbsp;<span class="ident" id="3314189"><a href="/gostd/net/parse.go.html#3346051">byteIndex</a></span><span class="op" id="3314198">(</span><span class="ident" id="3314199"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3314207">[</span><span class="ident" id="3314208"><a href="/gostd/net/ipsock.go.html#3313273">j</a></span><span class="op" id="3314209">:</span><span class="op" id="3314210">]</span><span class="op" id="3314211">,</span>&nbsp;<span class="string" id="3314213">&#39;[&#39;</span><span class="op" id="3314216">)</span>&nbsp;<span class="op" id="3314218">&gt;=</span>&nbsp;<span class="num" id="3314221">0</span>&nbsp;<span class="op" id="3314223">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314227"><a href="/gostd/net/ipsock.go.html#3313259">err</a></span>&nbsp;<span class="op" id="3314231">=</span>&nbsp;<span class="op" id="3314233">&amp;</span><span class="ident" id="3314234"><a href="/gostd/net/net.go.html#3342647">AddrError</a></span><span class="op" id="3314243">{</span><span class="string" id="3314244">&#34;unexpected&nbsp;&#39;[&#39;&nbsp;in&nbsp;address&#34;</span><span class="op" id="3314271">,</span>&nbsp;<span class="ident" id="3314273"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3314281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314285">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314296">if</span>&nbsp;<span class="ident" id="3314299"><a href="/gostd/net/parse.go.html#3346051">byteIndex</a></span><span class="op" id="3314308">(</span><span class="ident" id="3314309"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3314317">[</span><span class="ident" id="3314318"><a href="/gostd/net/ipsock.go.html#3313276">k</a></span><span class="op" id="3314319">:</span><span class="op" id="3314320">]</span><span class="op" id="3314321">,</span>&nbsp;<span class="string" id="3314323">&#39;]&#39;</span><span class="op" id="3314326">)</span>&nbsp;<span class="op" id="3314328">&gt;=</span>&nbsp;<span class="num" id="3314331">0</span>&nbsp;<span class="op" id="3314333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314337"><a href="/gostd/net/ipsock.go.html#3313259">err</a></span>&nbsp;<span class="op" id="3314341">=</span>&nbsp;<span class="op" id="3314343">&amp;</span><span class="ident" id="3314344"><a href="/gostd/net/net.go.html#3342647">AddrError</a></span><span class="op" id="3314353">{</span><span class="string" id="3314354">&#34;unexpected&nbsp;&#39;]&#39;&nbsp;in&nbsp;address&#34;</span><span class="op" id="3314381">,</span>&nbsp;<span class="ident" id="3314383"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3314391">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314395">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314407"><a href="/gostd/net/ipsock.go.html#3313246">port</a></span>&nbsp;<span class="op" id="3314412">=</span>&nbsp;<span class="ident" id="3314414"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3314422">[</span><span class="ident" id="3314423"><a href="/gostd/net/ipsock.go.html#3313330">i</a></span><span class="op" id="3314424">+</span><span class="num" id="3314425">1</span><span class="op" id="3314426">:</span><span class="op" id="3314427">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314430">return</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="ident" id="3314438">missingPort</span><span class="op" id="3314449">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314452"><a href="/gostd/net/ipsock.go.html#3313259">err</a></span>&nbsp;<span class="op" id="3314456">=</span>&nbsp;<span class="op" id="3314458">&amp;</span><span class="ident" id="3314459"><a href="/gostd/net/net.go.html#3342647">AddrError</a></span><span class="op" id="3314468">{</span><span class="string" id="3314469">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="3314494">,</span>&nbsp;<span class="ident" id="3314496"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3314504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314507">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="ident" id="3314515">tooManyColons</span><span class="op" id="3314528">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314531"><a href="/gostd/net/ipsock.go.html#3313259">err</a></span>&nbsp;<span class="op" id="3314535">=</span>&nbsp;<span class="op" id="3314537">&amp;</span><span class="ident" id="3314538"><a href="/gostd/net/net.go.html#3342647">AddrError</a></span><span class="op" id="3314547">{</span><span class="string" id="3314548">&#34;too&nbsp;many&nbsp;colons&nbsp;in&nbsp;address&#34;</span><span class="op" id="3314576">,</span>&nbsp;<span class="ident" id="3314578"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3314586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314589">return</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="3314597">missingBrackets</span><span class="op" id="3314612">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314615"><a href="/gostd/net/ipsock.go.html#3313259">err</a></span>&nbsp;<span class="op" id="3314619">=</span>&nbsp;<span class="op" id="3314621">&amp;</span><span class="ident" id="3314622"><a href="/gostd/net/net.go.html#3342647">AddrError</a></span><span class="op" id="3314631">{</span><span class="string" id="3314632">&#34;missing&nbsp;brackets&nbsp;in&nbsp;address&#34;</span><span class="op" id="3314661">,</span>&nbsp;<span class="ident" id="3314663"><a href="/gostd/net/ipsock.go.html#3313222">hostport</a></span><span class="op" id="3314671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314674">return</span><br>
<span class="lineno"></span><span class="op" id="3314681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3314684">func</span>&nbsp;<span class="ident" id="3314689">splitHostZone</span><span class="op" id="3314702">(</span><span class="ident" id="3314703">s</span>&nbsp;<span class="builtintype" id="3314705">string</span><span class="op" id="3314711">)</span>&nbsp;<span class="op" id="3314713">(</span><span class="ident" id="3314714">host</span><span class="op" id="3314718">,</span>&nbsp;<span class="ident" id="3314720">zone</span>&nbsp;<span class="builtintype" id="3314725">string</span><span class="op" id="3314731">)</span>&nbsp;<span class="op" id="3314733">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3314736">//&nbsp;The&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone&nbsp;identifier&nbsp;starts&nbsp;after&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3314800">//&nbsp;last&nbsp;percent&nbsp;sign.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314823">if</span>&nbsp;<span class="ident" id="3314826">i</span>&nbsp;<span class="op" id="3314828">:=</span>&nbsp;<span class="ident" id="3314831"><a href="/gostd/net/parse.go.html#3349140">last</a></span><span class="op" id="3314835">(</span><span class="ident" id="3314836"><a href="/gostd/net/ipsock.go.html#3314703">s</a></span><span class="op" id="3314837">,</span>&nbsp;<span class="string" id="3314839">&#39;%&#39;</span><span class="op" id="3314842">)</span><span class="op" id="3314843">;</span>&nbsp;<span class="ident" id="3314845"><a href="/gostd/net/ipsock.go.html#3314826">i</a></span>&nbsp;<span class="op" id="3314847">&gt;</span>&nbsp;<span class="num" id="3314849">0</span>&nbsp;<span class="op" id="3314851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314855"><a href="/gostd/net/ipsock.go.html#3314714">host</a></span><span class="op" id="3314859">,</span>&nbsp;<span class="ident" id="3314861"><a href="/gostd/net/ipsock.go.html#3314720">zone</a></span>&nbsp;<span class="op" id="3314866">=</span>&nbsp;<span class="ident" id="3314868"><a href="/gostd/net/ipsock.go.html#3314703">s</a></span><span class="op" id="3314869">[</span><span class="op" id="3314870">:</span><span class="ident" id="3314871"><a href="/gostd/net/ipsock.go.html#3314826">i</a></span><span class="op" id="3314872">]</span><span class="op" id="3314873">,</span>&nbsp;<span class="ident" id="3314875"><a href="/gostd/net/ipsock.go.html#3314703">s</a></span><span class="op" id="3314876">[</span><span class="ident" id="3314877"><a href="/gostd/net/ipsock.go.html#3314826">i</a></span><span class="op" id="3314878">+</span><span class="num" id="3314879">1</span><span class="op" id="3314880">:</span><span class="op" id="3314881">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314884">}</span>&nbsp;<span class="keyword" id="3314886">else</span>&nbsp;<span class="op" id="3314891">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3314895"><a href="/gostd/net/ipsock.go.html#3314714">host</a></span>&nbsp;<span class="op" id="3314900">=</span>&nbsp;<span class="ident" id="3314902"><a href="/gostd/net/ipsock.go.html#3314703">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3314905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3314908">return</span><br>
<span class="lineno"></span><span class="op" id="3314915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment" id="3314918">//&nbsp;JoinHostPort&nbsp;combines&nbsp;host&nbsp;and&nbsp;port&nbsp;into&nbsp;a&nbsp;network&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3314987">//&nbsp;form&nbsp;&#34;host:port&#34;&nbsp;or,&nbsp;if&nbsp;host&nbsp;contains&nbsp;a&nbsp;colon&nbsp;or&nbsp;a&nbsp;percent&nbsp;sign,</span><br>
<span class="lineno"></span><span class="comment" id="3315055">//&nbsp;&#34;[host]:port&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3315073">func</span>&nbsp;<span class="ident" id="3315078">JoinHostPort</span><span class="op" id="3315090">(</span><span class="ident" id="3315091">host</span><span class="op" id="3315095">,</span>&nbsp;<span class="ident" id="3315097">port</span>&nbsp;<span class="builtintype" id="3315102">string</span><span class="op" id="3315108">)</span>&nbsp;<span class="builtintype" id="3315110">string</span>&nbsp;<span class="op" id="3315117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3315120">//&nbsp;If&nbsp;host&nbsp;has&nbsp;colons&nbsp;or&nbsp;a&nbsp;percent&nbsp;sign,&nbsp;have&nbsp;to&nbsp;bracket&nbsp;it.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315182">if</span>&nbsp;<span class="ident" id="3315185"><a href="/gostd/net/parse.go.html#3346051">byteIndex</a></span><span class="op" id="3315194">(</span><span class="ident" id="3315195"><a href="/gostd/net/ipsock.go.html#3315091">host</a></span><span class="op" id="3315199">,</span>&nbsp;<span class="string" id="3315201">&#39;:&#39;</span><span class="op" id="3315204">)</span>&nbsp;<span class="op" id="3315206">&gt;=</span>&nbsp;<span class="num" id="3315209">0</span>&nbsp;<span class="op" id="3315211">||</span>&nbsp;<span class="ident" id="3315214"><a href="/gostd/net/parse.go.html#3346051">byteIndex</a></span><span class="op" id="3315223">(</span><span class="ident" id="3315224"><a href="/gostd/net/ipsock.go.html#3315091">host</a></span><span class="op" id="3315228">,</span>&nbsp;<span class="string" id="3315230">&#39;%&#39;</span><span class="op" id="3315233">)</span>&nbsp;<span class="op" id="3315235">&gt;=</span>&nbsp;<span class="num" id="3315238">0</span>&nbsp;<span class="op" id="3315240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315244">return</span>&nbsp;<span class="string" id="3315251">&#34;[&#34;</span>&nbsp;<span class="op" id="3315255">+</span>&nbsp;<span class="ident" id="3315257"><a href="/gostd/net/ipsock.go.html#3315091">host</a></span>&nbsp;<span class="op" id="3315262">+</span>&nbsp;<span class="string" id="3315264">&#34;]:&#34;</span>&nbsp;<span class="op" id="3315269">+</span>&nbsp;<span class="ident" id="3315271"><a href="/gostd/net/ipsock.go.html#3315097">port</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315277">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315280">return</span>&nbsp;<span class="ident" id="3315287"><a href="/gostd/net/ipsock.go.html#3315091">host</a></span>&nbsp;<span class="op" id="3315292">+</span>&nbsp;<span class="string" id="3315294">&#34;:&#34;</span>&nbsp;<span class="op" id="3315298">+</span>&nbsp;<span class="ident" id="3315300"><a href="/gostd/net/ipsock.go.html#3315097">port</a></span><br>
<span class="lineno"></span><span class="op" id="3315305">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="3315308">//&nbsp;resolveInternetAddr&nbsp;resolves&nbsp;addr&nbsp;that&nbsp;is&nbsp;either&nbsp;a&nbsp;literal&nbsp;IP</span><br>
<span class="lineno"></span><span class="comment" id="3315373">//&nbsp;address&nbsp;or&nbsp;a&nbsp;DNS&nbsp;name&nbsp;and&nbsp;returns&nbsp;an&nbsp;internet&nbsp;protocol&nbsp;family</span><br>
<span class="lineno"></span><span class="comment" id="3315438">//&nbsp;address.&nbsp;It&nbsp;returns&nbsp;a&nbsp;list&nbsp;that&nbsp;contains&nbsp;a&nbsp;pair&nbsp;of&nbsp;different</span><br>
<span class="lineno"></span><span class="comment" id="3315502">//&nbsp;address&nbsp;family&nbsp;addresses&nbsp;when&nbsp;addr&nbsp;is&nbsp;a&nbsp;DNS&nbsp;name&nbsp;and&nbsp;the&nbsp;name&nbsp;has</span><br>
<span class="lineno">235</span><span class="comment" id="3315571">//&nbsp;multiple&nbsp;address&nbsp;family&nbsp;records.&nbsp;The&nbsp;result&nbsp;contains&nbsp;at&nbsp;least&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="3315640">//&nbsp;address&nbsp;when&nbsp;error&nbsp;is&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3315670">func</span>&nbsp;<span class="ident" id="3315675">resolveInternetAddr</span><span class="op" id="3315694">(</span><span class="ident" id="3315695">net</span><span class="op" id="3315698">,</span>&nbsp;<span class="ident" id="3315700">addr</span>&nbsp;<span class="builtintype" id="3315705">string</span><span class="op" id="3315711">,</span>&nbsp;<span class="ident" id="3315713">deadline</span>&nbsp;<span class="ident" id="3315722"><a href="/gostd/net/ipsock.go.html#3309493">time</a></span><span class="op" id="3315726">.</span><span class="ident" id="3315727"><a href="/gostd/time/time.go.html#2722087">Time</a></span><span class="op" id="3315731">)</span>&nbsp;<span class="op" id="3315733">(</span><span class="ident" id="3315734"><a href="/gostd/net/ipsock.go.html#3310146">netaddr</a></span><span class="op" id="3315741">,</span>&nbsp;<span class="builtintype" id="3315743">error</span><span class="op" id="3315748">)</span>&nbsp;<span class="op" id="3315750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315753">var</span>&nbsp;<span class="op" id="3315757">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315761">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3315778">error</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315786">host</span><span class="op" id="3315790">,</span>&nbsp;<span class="ident" id="3315792">port</span><span class="op" id="3315796">,</span>&nbsp;<span class="ident" id="3315798">zone</span>&nbsp;<span class="builtintype" id="3315803">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3315812">portnum</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3315829">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3315834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315837">switch</span>&nbsp;<span class="ident" id="3315844"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span>&nbsp;<span class="op" id="3315848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315851">case</span>&nbsp;<span class="string" id="3315856">&#34;tcp&#34;</span><span class="op" id="3315861">,</span>&nbsp;<span class="string" id="3315863">&#34;tcp4&#34;</span><span class="op" id="3315869">,</span>&nbsp;<span class="string" id="3315871">&#34;tcp6&#34;</span><span class="op" id="3315877">,</span>&nbsp;<span class="string" id="3315879">&#34;udp&#34;</span><span class="op" id="3315884">,</span>&nbsp;<span class="string" id="3315886">&#34;udp4&#34;</span><span class="op" id="3315892">,</span>&nbsp;<span class="string" id="3315894">&#34;udp6&#34;</span><span class="op" id="3315900">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315904">if</span>&nbsp;<span class="ident" id="3315907"><a href="/gostd/net/ipsock.go.html#3315700">addr</a></span>&nbsp;<span class="op" id="3315912">!=</span>&nbsp;<span class="string" id="3315915">&#34;&#34;</span>&nbsp;<span class="op" id="3315918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315923">if</span>&nbsp;<span class="ident" id="3315926"><a href="/gostd/net/ipsock.go.html#3315786">host</a></span><span class="op" id="3315930">,</span>&nbsp;<span class="ident" id="3315932"><a href="/gostd/net/ipsock.go.html#3315792">port</a></span><span class="op" id="3315936">,</span>&nbsp;<span class="ident" id="3315938"><a href="/gostd/net/ipsock.go.html#3315761">err</a></span>&nbsp;<span class="op" id="3315942">=</span>&nbsp;<span class="ident" id="3315944"><a href="/gostd/net/ipsock.go.html#3313208">SplitHostPort</a></span><span class="op" id="3315957">(</span><span class="ident" id="3315958"><a href="/gostd/net/ipsock.go.html#3315700">addr</a></span><span class="op" id="3315962">)</span><span class="op" id="3315963">;</span>&nbsp;<span class="ident" id="3315965"><a href="/gostd/net/ipsock.go.html#3315761">err</a></span>&nbsp;<span class="op" id="3315969">!=</span>&nbsp;<span class="builtintype" id="3315972">nil</span>&nbsp;<span class="op" id="3315976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3315982">return</span>&nbsp;<span class="builtintype" id="3315989">nil</span><span class="op" id="3315992">,</span>&nbsp;<span class="ident" id="3315994"><a href="/gostd/net/ipsock.go.html#3315761">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316006">if</span>&nbsp;<span class="ident" id="3316009"><a href="/gostd/net/ipsock.go.html#3315812">portnum</a></span><span class="op" id="3316016">,</span>&nbsp;<span class="ident" id="3316018"><a href="/gostd/net/ipsock.go.html#3315761">err</a></span>&nbsp;<span class="op" id="3316022">=</span>&nbsp;<span class="ident" id="3316024"><a href="/gostd/net/port.go.html#3350892">parsePort</a></span><span class="op" id="3316033">(</span><span class="ident" id="3316034"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span><span class="op" id="3316037">,</span>&nbsp;<span class="ident" id="3316039"><a href="/gostd/net/ipsock.go.html#3315792">port</a></span><span class="op" id="3316043">)</span><span class="op" id="3316044">;</span>&nbsp;<span class="ident" id="3316046"><a href="/gostd/net/ipsock.go.html#3315761">err</a></span>&nbsp;<span class="op" id="3316050">!=</span>&nbsp;<span class="builtintype" id="3316053">nil</span>&nbsp;<span class="op" id="3316057">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316063">return</span>&nbsp;<span class="builtintype" id="3316070">nil</span><span class="op" id="3316073">,</span>&nbsp;<span class="ident" id="3316075"><a href="/gostd/net/ipsock.go.html#3315761">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316089">case</span>&nbsp;<span class="string" id="3316094">&#34;ip&#34;</span><span class="op" id="3316098">,</span>&nbsp;<span class="string" id="3316100">&#34;ip4&#34;</span><span class="op" id="3316105">,</span>&nbsp;<span class="string" id="3316107">&#34;ip6&#34;</span><span class="op" id="3316112">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316116">if</span>&nbsp;<span class="ident" id="3316119"><a href="/gostd/net/ipsock.go.html#3315700">addr</a></span>&nbsp;<span class="op" id="3316124">!=</span>&nbsp;<span class="string" id="3316127">&#34;&#34;</span>&nbsp;<span class="op" id="3316130">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316135"><a href="/gostd/net/ipsock.go.html#3315786">host</a></span>&nbsp;<span class="op" id="3316140">=</span>&nbsp;<span class="ident" id="3316142"><a href="/gostd/net/ipsock.go.html#3315700">addr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316152">default</span><span class="op" id="3316159">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316163">return</span>&nbsp;<span class="builtintype" id="3316170">nil</span><span class="op" id="3316173">,</span>&nbsp;<span class="ident" id="3316175"><a href="/gostd/net/net.go.html#3342949">UnknownNetworkError</a></span><span class="op" id="3316194">(</span><span class="ident" id="3316195"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span><span class="op" id="3316198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316201">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316204">inetaddr</span>&nbsp;<span class="op" id="3316213">:=</span>&nbsp;<span class="keyword" id="3316216">func</span><span class="op" id="3316220">(</span><span class="ident" id="3316221">ip</span>&nbsp;<span class="ident" id="3316224"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3316226">)</span>&nbsp;<span class="ident" id="3316228"><a href="/gostd/net/ipsock.go.html#3310146">netaddr</a></span>&nbsp;<span class="op" id="3316236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316240">switch</span>&nbsp;<span class="ident" id="3316247"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span>&nbsp;<span class="op" id="3316251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316255">case</span>&nbsp;<span class="string" id="3316260">&#34;tcp&#34;</span><span class="op" id="3316265">,</span>&nbsp;<span class="string" id="3316267">&#34;tcp4&#34;</span><span class="op" id="3316273">,</span>&nbsp;<span class="string" id="3316275">&#34;tcp6&#34;</span><span class="op" id="3316281">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316286">return</span>&nbsp;<span class="op" id="3316293">&amp;</span><span class="ident" id="3316294"><a href="/gostd/net/tcpsock.go.html#3373469">TCPAddr</a></span><span class="op" id="3316301">{</span><span class="ident" id="3316302"><a href="/gostd/net/tcpsock.go.html#3373487">IP</a></span><span class="op" id="3316304">:</span>&nbsp;<span class="ident" id="3316306"><a href="/gostd/net/ipsock.go.html#3316221">ip</a></span><span class="op" id="3316308">,</span>&nbsp;<span class="ident" id="3316310"><a href="/gostd/net/tcpsock.go.html#3373496">Port</a></span><span class="op" id="3316314">:</span>&nbsp;<span class="ident" id="3316316"><a href="/gostd/net/ipsock.go.html#3315812">portnum</a></span><span class="op" id="3316323">,</span>&nbsp;<span class="ident" id="3316325"><a href="/gostd/net/tcpsock.go.html#3373506">Zone</a></span><span class="op" id="3316329">:</span>&nbsp;<span class="ident" id="3316331"><a href="/gostd/net/ipsock.go.html#3315798">zone</a></span><span class="op" id="3316335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316339">case</span>&nbsp;<span class="string" id="3316344">&#34;udp&#34;</span><span class="op" id="3316349">,</span>&nbsp;<span class="string" id="3316351">&#34;udp4&#34;</span><span class="op" id="3316357">,</span>&nbsp;<span class="string" id="3316359">&#34;udp6&#34;</span><span class="op" id="3316365">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316370">return</span>&nbsp;<span class="op" id="3316377">&amp;</span><span class="ident" id="3316378"><a href="/gostd/net/udpsock.go.html#3385842">UDPAddr</a></span><span class="op" id="3316385">{</span><span class="ident" id="3316386"><a href="/gostd/net/udpsock.go.html#3385860">IP</a></span><span class="op" id="3316388">:</span>&nbsp;<span class="ident" id="3316390"><a href="/gostd/net/ipsock.go.html#3316221">ip</a></span><span class="op" id="3316392">,</span>&nbsp;<span class="ident" id="3316394"><a href="/gostd/net/udpsock.go.html#3385869">Port</a></span><span class="op" id="3316398">:</span>&nbsp;<span class="ident" id="3316400"><a href="/gostd/net/ipsock.go.html#3315812">portnum</a></span><span class="op" id="3316407">,</span>&nbsp;<span class="ident" id="3316409"><a href="/gostd/net/udpsock.go.html#3385879">Zone</a></span><span class="op" id="3316413">:</span>&nbsp;<span class="ident" id="3316415"><a href="/gostd/net/ipsock.go.html#3315798">zone</a></span><span class="op" id="3316419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316423">case</span>&nbsp;<span class="string" id="3316428">&#34;ip&#34;</span><span class="op" id="3316432">,</span>&nbsp;<span class="string" id="3316434">&#34;ip4&#34;</span><span class="op" id="3316439">,</span>&nbsp;<span class="string" id="3316441">&#34;ip6&#34;</span><span class="op" id="3316446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316451">return</span>&nbsp;<span class="op" id="3316458">&amp;</span><span class="ident" id="3316459"><a href="/gostd/net/iprawsock.go.html#3301118">IPAddr</a></span><span class="op" id="3316465">{</span><span class="ident" id="3316466"><a href="/gostd/net/iprawsock.go.html#3301135">IP</a></span><span class="op" id="3316468">:</span>&nbsp;<span class="ident" id="3316470"><a href="/gostd/net/ipsock.go.html#3316221">ip</a></span><span class="op" id="3316472">,</span>&nbsp;<span class="ident" id="3316474"><a href="/gostd/net/iprawsock.go.html#3301144">Zone</a></span><span class="op" id="3316478">:</span>&nbsp;<span class="ident" id="3316480"><a href="/gostd/net/ipsock.go.html#3315798">zone</a></span><span class="op" id="3316484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316488">default</span><span class="op" id="3316495">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3316500">panic</span><span class="op" id="3316505">(</span><span class="string" id="3316506">&#34;unexpected&nbsp;network:&nbsp;&#34;</span>&nbsp;<span class="op" id="3316529">+</span>&nbsp;<span class="ident" id="3316531"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span><span class="op" id="3316534">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316544">if</span>&nbsp;<span class="ident" id="3316547"><a href="/gostd/net/ipsock.go.html#3315786">host</a></span>&nbsp;<span class="op" id="3316552">==</span>&nbsp;<span class="string" id="3316555">&#34;&#34;</span>&nbsp;<span class="op" id="3316558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316562">return</span>&nbsp;<span class="ident" id="3316569"><a href="/gostd/net/ipsock.go.html#3316204">inetaddr</a></span><span class="op" id="3316577">(</span><span class="builtintype" id="3316578">nil</span><span class="op" id="3316581">)</span><span class="op" id="3316582">,</span>&nbsp;<span class="builtintype" id="3316584">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316589">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3316592">//&nbsp;Try&nbsp;as&nbsp;a&nbsp;literal&nbsp;IP&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316625">var</span>&nbsp;<span class="ident" id="3316629">ip</span>&nbsp;<span class="ident" id="3316632"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316636">if</span>&nbsp;<span class="ident" id="3316639"><a href="/gostd/net/ipsock.go.html#3316629">ip</a></span>&nbsp;<span class="op" id="3316642">=</span>&nbsp;<span class="ident" id="3316644"><a href="/gostd/net/ip.go.html#3296807">parseIPv4</a></span><span class="op" id="3316653">(</span><span class="ident" id="3316654"><a href="/gostd/net/ipsock.go.html#3315786">host</a></span><span class="op" id="3316658">)</span><span class="op" id="3316659">;</span>&nbsp;<span class="ident" id="3316661"><a href="/gostd/net/ipsock.go.html#3316629">ip</a></span>&nbsp;<span class="op" id="3316664">!=</span>&nbsp;<span class="builtintype" id="3316667">nil</span>&nbsp;<span class="op" id="3316671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316675">return</span>&nbsp;<span class="ident" id="3316682"><a href="/gostd/net/ipsock.go.html#3316204">inetaddr</a></span><span class="op" id="3316690">(</span><span class="ident" id="3316691"><a href="/gostd/net/ipsock.go.html#3316629">ip</a></span><span class="op" id="3316693">)</span><span class="op" id="3316694">,</span>&nbsp;<span class="builtintype" id="3316696">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316701">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316704">if</span>&nbsp;<span class="ident" id="3316707"><a href="/gostd/net/ipsock.go.html#3316629">ip</a></span><span class="op" id="3316709">,</span>&nbsp;<span class="ident" id="3316711"><a href="/gostd/net/ipsock.go.html#3315798">zone</a></span>&nbsp;<span class="op" id="3316716">=</span>&nbsp;<span class="ident" id="3316718"><a href="/gostd/net/ip.go.html#3297433">parseIPv6</a></span><span class="op" id="3316727">(</span><span class="ident" id="3316728"><a href="/gostd/net/ipsock.go.html#3315786">host</a></span><span class="op" id="3316732">,</span>&nbsp;<span class="builtintype" id="3316734">true</span><span class="op" id="3316738">)</span><span class="op" id="3316739">;</span>&nbsp;<span class="ident" id="3316741"><a href="/gostd/net/ipsock.go.html#3316629">ip</a></span>&nbsp;<span class="op" id="3316744">!=</span>&nbsp;<span class="builtintype" id="3316747">nil</span>&nbsp;<span class="op" id="3316751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316755">return</span>&nbsp;<span class="ident" id="3316762"><a href="/gostd/net/ipsock.go.html#3316204">inetaddr</a></span><span class="op" id="3316770">(</span><span class="ident" id="3316771"><a href="/gostd/net/ipsock.go.html#3316629">ip</a></span><span class="op" id="3316773">)</span><span class="op" id="3316774">,</span>&nbsp;<span class="builtintype" id="3316776">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3316784">//&nbsp;Try&nbsp;as&nbsp;a&nbsp;DNS&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316807"><a href="/gostd/net/ipsock.go.html#3315786">host</a></span><span class="op" id="3316811">,</span>&nbsp;<span class="ident" id="3316813"><a href="/gostd/net/ipsock.go.html#3315798">zone</a></span>&nbsp;<span class="op" id="3316818">=</span>&nbsp;<span class="ident" id="3316820"><a href="/gostd/net/ipsock.go.html#3314689">splitHostZone</a></span><span class="op" id="3316833">(</span><span class="ident" id="3316834"><a href="/gostd/net/ipsock.go.html#3315786">host</a></span><span class="op" id="3316838">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316841">ips</span><span class="op" id="3316844">,</span>&nbsp;<span class="ident" id="3316846"><a href="/gostd/net/ipsock.go.html#3315761">err</a></span>&nbsp;<span class="op" id="3316850">:=</span>&nbsp;<span class="ident" id="3316853"><a href="/gostd/net/lookup.go.html#3324945">lookupIPDeadline</a></span><span class="op" id="3316869">(</span><span class="ident" id="3316870"><a href="/gostd/net/ipsock.go.html#3315786">host</a></span><span class="op" id="3316874">,</span>&nbsp;<span class="ident" id="3316876"><a href="/gostd/net/ipsock.go.html#3315713">deadline</a></span><span class="op" id="3316884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316887">if</span>&nbsp;<span class="ident" id="3316890"><a href="/gostd/net/ipsock.go.html#3315761">err</a></span>&nbsp;<span class="op" id="3316894">!=</span>&nbsp;<span class="builtintype" id="3316897">nil</span>&nbsp;<span class="op" id="3316901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316905">return</span>&nbsp;<span class="builtintype" id="3316912">nil</span><span class="op" id="3316915">,</span>&nbsp;<span class="ident" id="3316917"><a href="/gostd/net/ipsock.go.html#3315761">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3316922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316925">var</span>&nbsp;<span class="ident" id="3316929">filter</span>&nbsp;<span class="keyword" id="3316936">func</span><span class="op" id="3316940">(</span><span class="ident" id="3316941"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><span class="op" id="3316943">)</span>&nbsp;<span class="ident" id="3316945"><a href="/gostd/net/ip.go.html#3286271">IP</a></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3316949">if</span>&nbsp;<span class="ident" id="3316952"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span>&nbsp;<span class="op" id="3316956">!=</span>&nbsp;<span class="string" id="3316959">&#34;&#34;</span>&nbsp;<span class="op" id="3316962">&amp;&amp;</span>&nbsp;<span class="ident" id="3316965"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span><span class="op" id="3316968">[</span><span class="builtinfunc" id="3316969">len</span><span class="op" id="3316972">(</span><span class="ident" id="3316973"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span><span class="op" id="3316976">)</span><span class="op" id="3316977">-</span><span class="num" id="3316978">1</span><span class="op" id="3316979">]</span>&nbsp;<span class="op" id="3316981">==</span>&nbsp;<span class="string" id="3316984">&#39;4&#39;</span>&nbsp;<span class="op" id="3316988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3316992"><a href="/gostd/net/ipsock.go.html#3316929">filter</a></span>&nbsp;<span class="op" id="3316999">=</span>&nbsp;<span class="ident" id="3317001"><a href="/gostd/net/ipsock.go.html#3312498">ipv4only</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317014">if</span>&nbsp;<span class="ident" id="3317017"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span>&nbsp;<span class="op" id="3317021">!=</span>&nbsp;<span class="string" id="3317024">&#34;&#34;</span>&nbsp;<span class="op" id="3317027">&amp;&amp;</span>&nbsp;<span class="ident" id="3317030"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span><span class="op" id="3317033">[</span><span class="builtinfunc" id="3317034">len</span><span class="op" id="3317037">(</span><span class="ident" id="3317038"><a href="/gostd/net/ipsock.go.html#3315695">net</a></span><span class="op" id="3317041">)</span><span class="op" id="3317042">-</span><span class="num" id="3317043">1</span><span class="op" id="3317044">]</span>&nbsp;<span class="op" id="3317046">==</span>&nbsp;<span class="string" id="3317049">&#39;6&#39;</span>&nbsp;<span class="op" id="3317053">||</span>&nbsp;<span class="ident" id="3317056"><a href="/gostd/net/ipsock.go.html#3315798">zone</a></span>&nbsp;<span class="op" id="3317061">!=</span>&nbsp;<span class="string" id="3317064">&#34;&#34;</span>&nbsp;<span class="op" id="3317067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317071"><a href="/gostd/net/ipsock.go.html#3316929">filter</a></span>&nbsp;<span class="op" id="3317078">=</span>&nbsp;<span class="ident" id="3317080"><a href="/gostd/net/ipsock.go.html#3312793">ipv6only</a></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317093">return</span>&nbsp;<span class="ident" id="3317100"><a href="/gostd/net/ipsock.go.html#3311048">firstFavoriteAddr</a></span><span class="op" id="3317117">(</span><span class="ident" id="3317118"><a href="/gostd/net/ipsock.go.html#3316929">filter</a></span><span class="op" id="3317124">,</span>&nbsp;<span class="ident" id="3317126"><a href="/gostd/net/ipsock.go.html#3316841">ips</a></span><span class="op" id="3317129">,</span>&nbsp;<span class="ident" id="3317131"><a href="/gostd/net/ipsock.go.html#3316204">inetaddr</a></span><span class="op" id="3317139">)</span><br>
<span class="lineno"></span><span class="op" id="3317141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3317144">func</span>&nbsp;<span class="ident" id="3317149">zoneToString</span><span class="op" id="3317161">(</span><span class="ident" id="3317162">zone</span>&nbsp;<span class="builtintype" id="3317167">int</span><span class="op" id="3317170">)</span>&nbsp;<span class="builtintype" id="3317172">string</span>&nbsp;<span class="op" id="3317179">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317182">if</span>&nbsp;<span class="ident" id="3317185"><a href="/gostd/net/ipsock.go.html#3317162">zone</a></span>&nbsp;<span class="op" id="3317190">==</span>&nbsp;<span class="num" id="3317193">0</span>&nbsp;<span class="op" id="3317195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317199">return</span>&nbsp;<span class="string" id="3317206">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317213">if</span>&nbsp;<span class="ident" id="3317216">ifi</span><span class="op" id="3317219">,</span>&nbsp;<span class="ident" id="3317221">err</span>&nbsp;<span class="op" id="3317225">:=</span>&nbsp;<span class="ident" id="3317228"><a href="/gostd/net/interface.go.html#3277331">InterfaceByIndex</a></span><span class="op" id="3317244">(</span><span class="ident" id="3317245"><a href="/gostd/net/ipsock.go.html#3317162">zone</a></span><span class="op" id="3317249">)</span><span class="op" id="3317250">;</span>&nbsp;<span class="ident" id="3317252"><a href="/gostd/net/ipsock.go.html#3317221">err</a></span>&nbsp;<span class="op" id="3317256">==</span>&nbsp;<span class="builtintype" id="3317259">nil</span>&nbsp;<span class="op" id="3317263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317267">return</span>&nbsp;<span class="ident" id="3317274"><a href="/gostd/net/ipsock.go.html#3317216">ifi</a></span><span class="op" id="3317277">.</span><span class="ident" id="3317278"><a href="/gostd/net/interface.go.html#3275627">Name</a></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317284">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317287">return</span>&nbsp;<span class="ident" id="3317294"><a href="/gostd/net/parse.go.html#3348449">itod</a></span><span class="op" id="3317298">(</span><span class="builtintype" id="3317299">uint</span><span class="op" id="3317303">(</span><span class="ident" id="3317304"><a href="/gostd/net/ipsock.go.html#3317162">zone</a></span><span class="op" id="3317308">)</span><span class="op" id="3317309">)</span><br>
<span class="lineno"></span><span class="op" id="3317311">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3317314">func</span>&nbsp;<span class="ident" id="3317319">zoneToInt</span><span class="op" id="3317328">(</span><span class="ident" id="3317329">zone</span>&nbsp;<span class="builtintype" id="3317334">string</span><span class="op" id="3317340">)</span>&nbsp;<span class="builtintype" id="3317342">int</span>&nbsp;<span class="op" id="3317346">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317349">if</span>&nbsp;<span class="ident" id="3317352"><a href="/gostd/net/ipsock.go.html#3317329">zone</a></span>&nbsp;<span class="op" id="3317357">==</span>&nbsp;<span class="string" id="3317360">&#34;&#34;</span>&nbsp;<span class="op" id="3317363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317367">return</span>&nbsp;<span class="num" id="3317374">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317380">if</span>&nbsp;<span class="ident" id="3317383">ifi</span><span class="op" id="3317386">,</span>&nbsp;<span class="ident" id="3317388">err</span>&nbsp;<span class="op" id="3317392">:=</span>&nbsp;<span class="ident" id="3317395"><a href="/gostd/net/interface.go.html#3277805">InterfaceByName</a></span><span class="op" id="3317410">(</span><span class="ident" id="3317411"><a href="/gostd/net/ipsock.go.html#3317329">zone</a></span><span class="op" id="3317415">)</span><span class="op" id="3317416">;</span>&nbsp;<span class="ident" id="3317418"><a href="/gostd/net/ipsock.go.html#3317388">err</a></span>&nbsp;<span class="op" id="3317422">==</span>&nbsp;<span class="builtintype" id="3317425">nil</span>&nbsp;<span class="op" id="3317429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317433">return</span>&nbsp;<span class="ident" id="3317440"><a href="/gostd/net/ipsock.go.html#3317383">ifi</a></span><span class="op" id="3317443">.</span><span class="ident" id="3317444"><a href="/gostd/net/interface.go.html#3275485">Index</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3317451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3317454">n</span><span class="op" id="3317455">,</span>&nbsp;<span class="ident" id="3317457">_</span><span class="op" id="3317458">,</span>&nbsp;<span class="ident" id="3317460">_</span>&nbsp;<span class="op" id="3317462">:=</span>&nbsp;<span class="ident" id="3317465"><a href="/gostd/net/parse.go.html#3346952">dtoi</a></span><span class="op" id="3317469">(</span><span class="ident" id="3317470"><a href="/gostd/net/ipsock.go.html#3317329">zone</a></span><span class="op" id="3317474">,</span>&nbsp;<span class="num" id="3317476">0</span><span class="op" id="3317477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3317480">return</span>&nbsp;<span class="ident" id="3317487"><a href="/gostd/net/ipsock.go.html#3317454">n</a></span><br>
<span class="lineno"></span><span class="op" id="3317489">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
