<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8245003">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8245058">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8245112">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8245163">package</span>&nbsp;<span class="ident" id="8245171">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8245176">import</span>&nbsp;<span class="op" id="8245183">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8245186">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8245197">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8245208">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8245218">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8245221">var</span>&nbsp;<span class="ident" id="8245225">parseIPTests</span>&nbsp;<span class="op" id="8245238">=</span>&nbsp;<span class="op" id="8245240">[</span><span class="op" id="8245241">]</span><span class="keyword" id="8245242">struct</span>&nbsp;<span class="op" id="8245249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8245252">in</span>&nbsp;&nbsp;<span class="builtintype" id="8245256">string</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8245264">out</span>&nbsp;<span class="ident" id="8245268">IP</span><br>
<span class="lineno"></span><span class="op" id="8245271">}</span><span class="op" id="8245272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245275">{</span><span class="string" id="8245276">&#34;127.0.1.2&#34;</span><span class="op" id="8245287">,</span>&nbsp;<span class="ident" id="8245289">IPv4</span><span class="op" id="8245293">(</span><span class="num" id="8245294">127</span><span class="op" id="8245297">,</span>&nbsp;<span class="num" id="8245299">0</span><span class="op" id="8245300">,</span>&nbsp;<span class="num" id="8245302">1</span><span class="op" id="8245303">,</span>&nbsp;<span class="num" id="8245305">2</span><span class="op" id="8245306">)</span><span class="op" id="8245307">}</span><span class="op" id="8245308">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245311">{</span><span class="string" id="8245312">&#34;127.0.0.1&#34;</span><span class="op" id="8245323">,</span>&nbsp;<span class="ident" id="8245325">IPv4</span><span class="op" id="8245329">(</span><span class="num" id="8245330">127</span><span class="op" id="8245333">,</span>&nbsp;<span class="num" id="8245335">0</span><span class="op" id="8245336">,</span>&nbsp;<span class="num" id="8245338">0</span><span class="op" id="8245339">,</span>&nbsp;<span class="num" id="8245341">1</span><span class="op" id="8245342">)</span><span class="op" id="8245343">}</span><span class="op" id="8245344">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245347">{</span><span class="string" id="8245348">&#34;127.0.0.256&#34;</span><span class="op" id="8245361">,</span>&nbsp;<span class="ident" id="8245363">nil</span><span class="op" id="8245366">}</span><span class="op" id="8245367">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245370">{</span><span class="string" id="8245371">&#34;abc&#34;</span><span class="op" id="8245376">,</span>&nbsp;<span class="ident" id="8245378">nil</span><span class="op" id="8245381">}</span><span class="op" id="8245382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245385">{</span><span class="string" id="8245386">&#34;123:&#34;</span><span class="op" id="8245392">,</span>&nbsp;<span class="ident" id="8245394">nil</span><span class="op" id="8245397">}</span><span class="op" id="8245398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245401">{</span><span class="string" id="8245402">&#34;::ffff:127.0.0.1&#34;</span><span class="op" id="8245420">,</span>&nbsp;<span class="ident" id="8245422">IPv4</span><span class="op" id="8245426">(</span><span class="num" id="8245427">127</span><span class="op" id="8245430">,</span>&nbsp;<span class="num" id="8245432">0</span><span class="op" id="8245433">,</span>&nbsp;<span class="num" id="8245435">0</span><span class="op" id="8245436">,</span>&nbsp;<span class="num" id="8245438">1</span><span class="op" id="8245439">)</span><span class="op" id="8245440">}</span><span class="op" id="8245441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245444">{</span><span class="string" id="8245445">&#34;2001:4860:0:2001::68&#34;</span><span class="op" id="8245467">,</span>&nbsp;<span class="ident" id="8245469">IP</span><span class="op" id="8245471">{</span><span class="num" id="8245472">0x20</span><span class="op" id="8245476">,</span>&nbsp;<span class="num" id="8245478">0x01</span><span class="op" id="8245482">,</span>&nbsp;<span class="num" id="8245484">0x48</span><span class="op" id="8245488">,</span>&nbsp;<span class="num" id="8245490">0x60</span><span class="op" id="8245494">,</span>&nbsp;<span class="num" id="8245496">0</span><span class="op" id="8245497">,</span>&nbsp;<span class="num" id="8245499">0</span><span class="op" id="8245500">,</span>&nbsp;<span class="num" id="8245502">0x20</span><span class="op" id="8245506">,</span>&nbsp;<span class="num" id="8245508">0x01</span><span class="op" id="8245512">,</span>&nbsp;<span class="num" id="8245514">0</span><span class="op" id="8245515">,</span>&nbsp;<span class="num" id="8245517">0</span><span class="op" id="8245518">,</span>&nbsp;<span class="num" id="8245520">0</span><span class="op" id="8245521">,</span>&nbsp;<span class="num" id="8245523">0</span><span class="op" id="8245524">,</span>&nbsp;<span class="num" id="8245526">0</span><span class="op" id="8245527">,</span>&nbsp;<span class="num" id="8245529">0</span><span class="op" id="8245530">,</span>&nbsp;<span class="num" id="8245532">0x00</span><span class="op" id="8245536">,</span>&nbsp;<span class="num" id="8245538">0x68</span><span class="op" id="8245542">}</span><span class="op" id="8245543">}</span><span class="op" id="8245544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245547">{</span><span class="string" id="8245548">&#34;::ffff:4a7d:1363&#34;</span><span class="op" id="8245566">,</span>&nbsp;<span class="ident" id="8245568">IPv4</span><span class="op" id="8245572">(</span><span class="num" id="8245573">74</span><span class="op" id="8245575">,</span>&nbsp;<span class="num" id="8245577">125</span><span class="op" id="8245580">,</span>&nbsp;<span class="num" id="8245582">19</span><span class="op" id="8245584">,</span>&nbsp;<span class="num" id="8245586">99</span><span class="op" id="8245588">)</span><span class="op" id="8245589">}</span><span class="op" id="8245590">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245593">{</span><span class="string" id="8245594">&#34;fe80::1%lo0&#34;</span><span class="op" id="8245607">,</span>&nbsp;<span class="ident" id="8245609">nil</span><span class="op" id="8245612">}</span><span class="op" id="8245613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245616">{</span><span class="string" id="8245617">&#34;fe80::1%911&#34;</span><span class="op" id="8245630">,</span>&nbsp;<span class="ident" id="8245632">nil</span><span class="op" id="8245635">}</span><span class="op" id="8245636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245639">{</span><span class="string" id="8245640">&#34;&#34;</span><span class="op" id="8245642">,</span>&nbsp;<span class="ident" id="8245644">nil</span><span class="op" id="8245647">}</span><span class="op" id="8245648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245651">{</span><span class="string" id="8245652">&#34;a1:a2:a3:a4::b1:b2:b3:b4&#34;</span><span class="op" id="8245678">,</span>&nbsp;<span class="ident" id="8245680">nil</span><span class="op" id="8245683">}</span><span class="op" id="8245684">,</span>&nbsp;<span class="comment" id="8245686">//&nbsp;Issue&nbsp;6628</span><br>
<span class="lineno"></span><span class="op" id="8245700">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="8245703">func</span>&nbsp;<span class="ident" id="8245708">TestParseIP</span><span class="op" id="8245719">(</span><span class="ident" id="8245720">t</span>&nbsp;<span class="op" id="8245722">*</span><span class="ident" id="8245723">testing</span><span class="op" id="8245730">.</span><span class="ident" id="8245731">T</span><span class="op" id="8245732">)</span>&nbsp;<span class="op" id="8245734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245737">for</span>&nbsp;<span class="ident" id="8245741">_</span><span class="op" id="8245742">,</span>&nbsp;<span class="ident" id="8245744">tt</span>&nbsp;<span class="op" id="8245747">:=</span>&nbsp;<span class="keyword" id="8245750">range</span>&nbsp;<span class="ident" id="8245756">parseIPTests</span>&nbsp;<span class="op" id="8245769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245773">if</span>&nbsp;<span class="ident" id="8245776">out</span>&nbsp;<span class="op" id="8245780">:=</span>&nbsp;<span class="ident" id="8245783">ParseIP</span><span class="op" id="8245790">(</span><span class="ident" id="8245791">tt</span><span class="op" id="8245793">.</span><span class="ident" id="8245794">in</span><span class="op" id="8245796">)</span><span class="op" id="8245797">;</span>&nbsp;<span class="op" id="8245799">!</span><span class="ident" id="8245800">reflect</span><span class="op" id="8245807">.</span><span class="ident" id="8245808">DeepEqual</span><span class="op" id="8245817">(</span><span class="ident" id="8245818">out</span><span class="op" id="8245821">,</span>&nbsp;<span class="ident" id="8245823">tt</span><span class="op" id="8245825">.</span><span class="ident" id="8245826">out</span><span class="op" id="8245829">)</span>&nbsp;<span class="op" id="8245831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8245836">t</span><span class="op" id="8245837">.</span><span class="ident" id="8245838">Errorf</span><span class="op" id="8245844">(</span><span class="string" id="8245845">&#34;ParseIP(%q)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8245872">,</span>&nbsp;<span class="ident" id="8245874">tt</span><span class="op" id="8245876">.</span><span class="ident" id="8245877">in</span><span class="op" id="8245879">,</span>&nbsp;<span class="ident" id="8245881">out</span><span class="op" id="8245884">,</span>&nbsp;<span class="ident" id="8245886">tt</span><span class="op" id="8245888">.</span><span class="ident" id="8245889">out</span><span class="op" id="8245892">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245900">if</span>&nbsp;<span class="ident" id="8245903">tt</span><span class="op" id="8245905">.</span><span class="ident" id="8245906">in</span>&nbsp;<span class="op" id="8245909">==</span>&nbsp;<span class="string" id="8245912">&#34;&#34;</span>&nbsp;<span class="op" id="8245915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8245920">//&nbsp;Tested&nbsp;in&nbsp;TestMarshalEmptyIP&nbsp;below.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245962">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8245973">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245977">var</span>&nbsp;<span class="ident" id="8245981">out</span>&nbsp;<span class="ident" id="8245985">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8245990">if</span>&nbsp;<span class="ident" id="8245993">err</span>&nbsp;<span class="op" id="8245997">:=</span>&nbsp;<span class="ident" id="8246000">out</span><span class="op" id="8246003">.</span><span class="ident" id="8246004">UnmarshalText</span><span class="op" id="8246017">(</span><span class="op" id="8246018">[</span><span class="op" id="8246019">]</span><span class="builtintype" id="8246020">byte</span><span class="op" id="8246024">(</span><span class="ident" id="8246025">tt</span><span class="op" id="8246027">.</span><span class="ident" id="8246028">in</span><span class="op" id="8246030">)</span><span class="op" id="8246031">)</span><span class="op" id="8246032">;</span>&nbsp;<span class="op" id="8246034">!</span><span class="ident" id="8246035">reflect</span><span class="op" id="8246042">.</span><span class="ident" id="8246043">DeepEqual</span><span class="op" id="8246052">(</span><span class="ident" id="8246053">out</span><span class="op" id="8246056">,</span>&nbsp;<span class="ident" id="8246058">tt</span><span class="op" id="8246060">.</span><span class="ident" id="8246061">out</span><span class="op" id="8246064">)</span>&nbsp;<span class="op" id="8246066">||</span>&nbsp;<span class="op" id="8246069">(</span><span class="ident" id="8246070">tt</span><span class="op" id="8246072">.</span><span class="ident" id="8246073">out</span>&nbsp;<span class="op" id="8246077">==</span>&nbsp;<span class="ident" id="8246080">nil</span><span class="op" id="8246083">)</span>&nbsp;<span class="op" id="8246085">!=</span>&nbsp;<span class="op" id="8246088">(</span><span class="ident" id="8246089">err</span>&nbsp;<span class="op" id="8246093">!=</span>&nbsp;<span class="ident" id="8246096">nil</span><span class="op" id="8246099">)</span>&nbsp;<span class="op" id="8246101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246106">t</span><span class="op" id="8246107">.</span><span class="ident" id="8246108">Errorf</span><span class="op" id="8246114">(</span><span class="string" id="8246115">&#34;IP.UnmarshalText(%q)&nbsp;=&nbsp;%v,&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8246155">,</span>&nbsp;<span class="ident" id="8246157">tt</span><span class="op" id="8246159">.</span><span class="ident" id="8246160">in</span><span class="op" id="8246162">,</span>&nbsp;<span class="ident" id="8246164">out</span><span class="op" id="8246167">,</span>&nbsp;<span class="ident" id="8246169">err</span><span class="op" id="8246172">,</span>&nbsp;<span class="ident" id="8246174">tt</span><span class="op" id="8246176">.</span><span class="ident" id="8246177">out</span><span class="op" id="8246180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246187">}</span><br>
<span class="lineno">45</span><span class="op" id="8246189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8246192">func</span>&nbsp;<span class="ident" id="8246197">BenchmarkParseIP</span><span class="op" id="8246213">(</span><span class="ident" id="8246214">b</span>&nbsp;<span class="op" id="8246216">*</span><span class="ident" id="8246217">testing</span><span class="op" id="8246224">.</span><span class="ident" id="8246225">B</span><span class="op" id="8246226">)</span>&nbsp;<span class="op" id="8246228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246231">for</span>&nbsp;<span class="ident" id="8246235">i</span>&nbsp;<span class="op" id="8246237">:=</span>&nbsp;<span class="num" id="8246240">0</span><span class="op" id="8246241">;</span>&nbsp;<span class="ident" id="8246243">i</span>&nbsp;<span class="op" id="8246245">&lt;</span>&nbsp;<span class="ident" id="8246247">b</span><span class="op" id="8246248">.</span><span class="ident" id="8246249">N</span><span class="op" id="8246250">;</span>&nbsp;<span class="ident" id="8246252">i</span><span class="op" id="8246253">++</span>&nbsp;<span class="op" id="8246256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246260">for</span>&nbsp;<span class="ident" id="8246264">_</span><span class="op" id="8246265">,</span>&nbsp;<span class="ident" id="8246267">tt</span>&nbsp;<span class="op" id="8246270">:=</span>&nbsp;<span class="keyword" id="8246273">range</span>&nbsp;<span class="ident" id="8246279">parseIPTests</span>&nbsp;<span class="op" id="8246292">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246297">ParseIP</span><span class="op" id="8246304">(</span><span class="ident" id="8246305">tt</span><span class="op" id="8246307">.</span><span class="ident" id="8246308">in</span><span class="op" id="8246310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246314">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246317">}</span><br>
<span class="lineno"></span><span class="op" id="8246319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="8246322">//&nbsp;Issue&nbsp;6339</span><br>
<span class="lineno"></span><span class="keyword" id="8246336">func</span>&nbsp;<span class="ident" id="8246341">TestMarshalEmptyIP</span><span class="op" id="8246359">(</span><span class="ident" id="8246360">t</span>&nbsp;<span class="op" id="8246362">*</span><span class="ident" id="8246363">testing</span><span class="op" id="8246370">.</span><span class="ident" id="8246371">T</span><span class="op" id="8246372">)</span>&nbsp;<span class="op" id="8246374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246377">for</span>&nbsp;<span class="ident" id="8246381">_</span><span class="op" id="8246382">,</span>&nbsp;<span class="ident" id="8246384">in</span>&nbsp;<span class="op" id="8246387">:=</span>&nbsp;<span class="keyword" id="8246390">range</span>&nbsp;<span class="op" id="8246396">[</span><span class="op" id="8246397">]</span><span class="op" id="8246398">[</span><span class="op" id="8246399">]</span><span class="builtintype" id="8246400">byte</span><span class="op" id="8246404">{</span><span class="ident" id="8246405">nil</span><span class="op" id="8246408">,</span>&nbsp;<span class="op" id="8246410">[</span><span class="op" id="8246411">]</span><span class="builtintype" id="8246412">byte</span><span class="op" id="8246416">(</span><span class="string" id="8246417">&#34;&#34;</span><span class="op" id="8246419">)</span><span class="op" id="8246420">}</span>&nbsp;<span class="op" id="8246422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246426">var</span>&nbsp;<span class="ident" id="8246430">out</span>&nbsp;<span class="op" id="8246434">=</span>&nbsp;<span class="ident" id="8246436">IP</span><span class="op" id="8246438">{</span><span class="num" id="8246439">1</span><span class="op" id="8246440">,</span>&nbsp;<span class="num" id="8246442">2</span><span class="op" id="8246443">,</span>&nbsp;<span class="num" id="8246445">3</span><span class="op" id="8246446">,</span>&nbsp;<span class="num" id="8246448">4</span><span class="op" id="8246449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246453">if</span>&nbsp;<span class="ident" id="8246456">err</span>&nbsp;<span class="op" id="8246460">:=</span>&nbsp;<span class="ident" id="8246463">out</span><span class="op" id="8246466">.</span><span class="ident" id="8246467">UnmarshalText</span><span class="op" id="8246480">(</span><span class="ident" id="8246481">in</span><span class="op" id="8246483">)</span><span class="op" id="8246484">;</span>&nbsp;<span class="ident" id="8246486">err</span>&nbsp;<span class="op" id="8246490">!=</span>&nbsp;<span class="ident" id="8246493">nil</span>&nbsp;<span class="op" id="8246497">||</span>&nbsp;<span class="ident" id="8246500">out</span>&nbsp;<span class="op" id="8246504">!=</span>&nbsp;<span class="ident" id="8246507">nil</span>&nbsp;<span class="op" id="8246511">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246516">t</span><span class="op" id="8246517">.</span><span class="ident" id="8246518">Errorf</span><span class="op" id="8246524">(</span><span class="string" id="8246525">&#34;UnmarshalText(%v)&nbsp;=&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;nil,&nbsp;nil&#34;</span><span class="op" id="8246568">,</span>&nbsp;<span class="ident" id="8246570">in</span><span class="op" id="8246572">,</span>&nbsp;<span class="ident" id="8246574">out</span><span class="op" id="8246577">,</span>&nbsp;<span class="ident" id="8246579">err</span><span class="op" id="8246582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246592">var</span>&nbsp;<span class="ident" id="8246596">ip</span>&nbsp;<span class="ident" id="8246599">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246603">got</span><span class="op" id="8246606">,</span>&nbsp;<span class="ident" id="8246608">err</span>&nbsp;<span class="op" id="8246612">:=</span>&nbsp;<span class="ident" id="8246615">ip</span><span class="op" id="8246617">.</span><span class="ident" id="8246618">MarshalText</span><span class="op" id="8246629">(</span><span class="op" id="8246630">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246633">if</span>&nbsp;<span class="ident" id="8246636">err</span>&nbsp;<span class="op" id="8246640">!=</span>&nbsp;<span class="ident" id="8246643">nil</span>&nbsp;<span class="op" id="8246647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246651">t</span><span class="op" id="8246652">.</span><span class="ident" id="8246653">Fatal</span><span class="op" id="8246658">(</span><span class="ident" id="8246659">err</span><span class="op" id="8246662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8246668">if</span>&nbsp;<span class="op" id="8246671">!</span><span class="ident" id="8246672">reflect</span><span class="op" id="8246679">.</span><span class="ident" id="8246680">DeepEqual</span><span class="op" id="8246689">(</span><span class="ident" id="8246690">got</span><span class="op" id="8246693">,</span>&nbsp;<span class="op" id="8246695">[</span><span class="op" id="8246696">]</span><span class="builtintype" id="8246697">byte</span><span class="op" id="8246701">(</span><span class="string" id="8246702">&#34;&#34;</span><span class="op" id="8246704">)</span><span class="op" id="8246705">)</span>&nbsp;<span class="op" id="8246707">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246711">t</span><span class="op" id="8246712">.</span><span class="ident" id="8246713">Errorf</span><span class="op" id="8246719">(</span><span class="string" id="8246720">`got&nbsp;%#v,&nbsp;want&nbsp;[]byte(&#34;&#34;)`</span><span class="op" id="8246746">,</span>&nbsp;<span class="ident" id="8246748">got</span><span class="op" id="8246751">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246754">}</span><br>
<span class="lineno"></span><span class="op" id="8246756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8246759">var</span>&nbsp;<span class="ident" id="8246763">ipStringTests</span>&nbsp;<span class="op" id="8246777">=</span>&nbsp;<span class="op" id="8246779">[</span><span class="op" id="8246780">]</span><span class="keyword" id="8246781">struct</span>&nbsp;<span class="op" id="8246788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246791">in</span>&nbsp;&nbsp;<span class="ident" id="8246795">IP</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8246799">out</span>&nbsp;<span class="builtintype" id="8246803">string</span>&nbsp;<span class="comment" id="8246810">//&nbsp;see&nbsp;RFC&nbsp;5952</span><br>
<span class="lineno"></span><span class="op" id="8246826">}</span><span class="op" id="8246827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246830">{</span><span class="ident" id="8246831">IP</span><span class="op" id="8246833">{</span><span class="num" id="8246834">0x20</span><span class="op" id="8246838">,</span>&nbsp;<span class="num" id="8246840">0x1</span><span class="op" id="8246843">,</span>&nbsp;<span class="num" id="8246845">0xd</span><span class="op" id="8246848">,</span>&nbsp;<span class="num" id="8246850">0xb8</span><span class="op" id="8246854">,</span>&nbsp;<span class="num" id="8246856">0</span><span class="op" id="8246857">,</span>&nbsp;<span class="num" id="8246859">0</span><span class="op" id="8246860">,</span>&nbsp;<span class="num" id="8246862">0</span><span class="op" id="8246863">,</span>&nbsp;<span class="num" id="8246865">0</span><span class="op" id="8246866">,</span>&nbsp;<span class="num" id="8246868">0</span><span class="op" id="8246869">,</span>&nbsp;<span class="num" id="8246871">0</span><span class="op" id="8246872">,</span>&nbsp;<span class="num" id="8246874">0x1</span><span class="op" id="8246877">,</span>&nbsp;<span class="num" id="8246879">0x23</span><span class="op" id="8246883">,</span>&nbsp;<span class="num" id="8246885">0</span><span class="op" id="8246886">,</span>&nbsp;<span class="num" id="8246888">0x12</span><span class="op" id="8246892">,</span>&nbsp;<span class="num" id="8246894">0</span><span class="op" id="8246895">,</span>&nbsp;<span class="num" id="8246897">0x1</span><span class="op" id="8246900">}</span><span class="op" id="8246901">,</span>&nbsp;<span class="string" id="8246903">&#34;2001:db8::123:12:1&#34;</span><span class="op" id="8246923">}</span><span class="op" id="8246924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8246927">{</span><span class="ident" id="8246928">IP</span><span class="op" id="8246930">{</span><span class="num" id="8246931">0x20</span><span class="op" id="8246935">,</span>&nbsp;<span class="num" id="8246937">0x1</span><span class="op" id="8246940">,</span>&nbsp;<span class="num" id="8246942">0xd</span><span class="op" id="8246945">,</span>&nbsp;<span class="num" id="8246947">0xb8</span><span class="op" id="8246951">,</span>&nbsp;<span class="num" id="8246953">0</span><span class="op" id="8246954">,</span>&nbsp;<span class="num" id="8246956">0</span><span class="op" id="8246957">,</span>&nbsp;<span class="num" id="8246959">0</span><span class="op" id="8246960">,</span>&nbsp;<span class="num" id="8246962">0</span><span class="op" id="8246963">,</span>&nbsp;<span class="num" id="8246965">0</span><span class="op" id="8246966">,</span>&nbsp;<span class="num" id="8246968">0</span><span class="op" id="8246969">,</span>&nbsp;<span class="num" id="8246971">0</span><span class="op" id="8246972">,</span>&nbsp;<span class="num" id="8246974">0</span><span class="op" id="8246975">,</span>&nbsp;<span class="num" id="8246977">0</span><span class="op" id="8246978">,</span>&nbsp;<span class="num" id="8246980">0</span><span class="op" id="8246981">,</span>&nbsp;<span class="num" id="8246983">0</span><span class="op" id="8246984">,</span>&nbsp;<span class="num" id="8246986">0x1</span><span class="op" id="8246989">}</span><span class="op" id="8246990">,</span>&nbsp;<span class="string" id="8246992">&#34;2001:db8::1&#34;</span><span class="op" id="8247005">}</span><span class="op" id="8247006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247009">{</span><span class="ident" id="8247010">IP</span><span class="op" id="8247012">{</span><span class="num" id="8247013">0x20</span><span class="op" id="8247017">,</span>&nbsp;<span class="num" id="8247019">0x1</span><span class="op" id="8247022">,</span>&nbsp;<span class="num" id="8247024">0xd</span><span class="op" id="8247027">,</span>&nbsp;<span class="num" id="8247029">0xb8</span><span class="op" id="8247033">,</span>&nbsp;<span class="num" id="8247035">0</span><span class="op" id="8247036">,</span>&nbsp;<span class="num" id="8247038">0</span><span class="op" id="8247039">,</span>&nbsp;<span class="num" id="8247041">0</span><span class="op" id="8247042">,</span>&nbsp;<span class="num" id="8247044">0x1</span><span class="op" id="8247047">,</span>&nbsp;<span class="num" id="8247049">0</span><span class="op" id="8247050">,</span>&nbsp;<span class="num" id="8247052">0</span><span class="op" id="8247053">,</span>&nbsp;<span class="num" id="8247055">0</span><span class="op" id="8247056">,</span>&nbsp;<span class="num" id="8247058">0x1</span><span class="op" id="8247061">,</span>&nbsp;<span class="num" id="8247063">0</span><span class="op" id="8247064">,</span>&nbsp;<span class="num" id="8247066">0</span><span class="op" id="8247067">,</span>&nbsp;<span class="num" id="8247069">0</span><span class="op" id="8247070">,</span>&nbsp;<span class="num" id="8247072">0x1</span><span class="op" id="8247075">}</span><span class="op" id="8247076">,</span>&nbsp;<span class="string" id="8247078">&#34;2001:db8:0:1:0:1:0:1&#34;</span><span class="op" id="8247100">}</span><span class="op" id="8247101">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247104">{</span><span class="ident" id="8247105">IP</span><span class="op" id="8247107">{</span><span class="num" id="8247108">0x20</span><span class="op" id="8247112">,</span>&nbsp;<span class="num" id="8247114">0x1</span><span class="op" id="8247117">,</span>&nbsp;<span class="num" id="8247119">0xd</span><span class="op" id="8247122">,</span>&nbsp;<span class="num" id="8247124">0xb8</span><span class="op" id="8247128">,</span>&nbsp;<span class="num" id="8247130">0</span><span class="op" id="8247131">,</span>&nbsp;<span class="num" id="8247133">0x1</span><span class="op" id="8247136">,</span>&nbsp;<span class="num" id="8247138">0</span><span class="op" id="8247139">,</span>&nbsp;<span class="num" id="8247141">0</span><span class="op" id="8247142">,</span>&nbsp;<span class="num" id="8247144">0</span><span class="op" id="8247145">,</span>&nbsp;<span class="num" id="8247147">0x1</span><span class="op" id="8247150">,</span>&nbsp;<span class="num" id="8247152">0</span><span class="op" id="8247153">,</span>&nbsp;<span class="num" id="8247155">0</span><span class="op" id="8247156">,</span>&nbsp;<span class="num" id="8247158">0</span><span class="op" id="8247159">,</span>&nbsp;<span class="num" id="8247161">0x1</span><span class="op" id="8247164">,</span>&nbsp;<span class="num" id="8247166">0</span><span class="op" id="8247167">,</span>&nbsp;<span class="num" id="8247169">0</span><span class="op" id="8247170">}</span><span class="op" id="8247171">,</span>&nbsp;<span class="string" id="8247173">&#34;2001:db8:1:0:1:0:1:0&#34;</span><span class="op" id="8247195">}</span><span class="op" id="8247196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247199">{</span><span class="ident" id="8247200">IP</span><span class="op" id="8247202">{</span><span class="num" id="8247203">0x20</span><span class="op" id="8247207">,</span>&nbsp;<span class="num" id="8247209">0x1</span><span class="op" id="8247212">,</span>&nbsp;<span class="num" id="8247214">0</span><span class="op" id="8247215">,</span>&nbsp;<span class="num" id="8247217">0</span><span class="op" id="8247218">,</span>&nbsp;<span class="num" id="8247220">0</span><span class="op" id="8247221">,</span>&nbsp;<span class="num" id="8247223">0</span><span class="op" id="8247224">,</span>&nbsp;<span class="num" id="8247226">0</span><span class="op" id="8247227">,</span>&nbsp;<span class="num" id="8247229">0</span><span class="op" id="8247230">,</span>&nbsp;<span class="num" id="8247232">0</span><span class="op" id="8247233">,</span>&nbsp;<span class="num" id="8247235">0x1</span><span class="op" id="8247238">,</span>&nbsp;<span class="num" id="8247240">0</span><span class="op" id="8247241">,</span>&nbsp;<span class="num" id="8247243">0</span><span class="op" id="8247244">,</span>&nbsp;<span class="num" id="8247246">0</span><span class="op" id="8247247">,</span>&nbsp;<span class="num" id="8247249">0</span><span class="op" id="8247250">,</span>&nbsp;<span class="num" id="8247252">0</span><span class="op" id="8247253">,</span>&nbsp;<span class="num" id="8247255">0x1</span><span class="op" id="8247258">}</span><span class="op" id="8247259">,</span>&nbsp;<span class="string" id="8247261">&#34;2001::1:0:0:1&#34;</span><span class="op" id="8247276">}</span><span class="op" id="8247277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247280">{</span><span class="ident" id="8247281">IP</span><span class="op" id="8247283">{</span><span class="num" id="8247284">0x20</span><span class="op" id="8247288">,</span>&nbsp;<span class="num" id="8247290">0x1</span><span class="op" id="8247293">,</span>&nbsp;<span class="num" id="8247295">0xd</span><span class="op" id="8247298">,</span>&nbsp;<span class="num" id="8247300">0xb8</span><span class="op" id="8247304">,</span>&nbsp;<span class="num" id="8247306">0</span><span class="op" id="8247307">,</span>&nbsp;<span class="num" id="8247309">0</span><span class="op" id="8247310">,</span>&nbsp;<span class="num" id="8247312">0</span><span class="op" id="8247313">,</span>&nbsp;<span class="num" id="8247315">0</span><span class="op" id="8247316">,</span>&nbsp;<span class="num" id="8247318">0</span><span class="op" id="8247319">,</span>&nbsp;<span class="num" id="8247321">0x1</span><span class="op" id="8247324">,</span>&nbsp;<span class="num" id="8247326">0</span><span class="op" id="8247327">,</span>&nbsp;<span class="num" id="8247329">0</span><span class="op" id="8247330">,</span>&nbsp;<span class="num" id="8247332">0</span><span class="op" id="8247333">,</span>&nbsp;<span class="num" id="8247335">0</span><span class="op" id="8247336">,</span>&nbsp;<span class="num" id="8247338">0</span><span class="op" id="8247339">,</span>&nbsp;<span class="num" id="8247341">0</span><span class="op" id="8247342">}</span><span class="op" id="8247343">,</span>&nbsp;<span class="string" id="8247345">&#34;2001:db8:0:0:1::&#34;</span><span class="op" id="8247363">}</span><span class="op" id="8247364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247367">{</span><span class="ident" id="8247368">IP</span><span class="op" id="8247370">{</span><span class="num" id="8247371">0x20</span><span class="op" id="8247375">,</span>&nbsp;<span class="num" id="8247377">0x1</span><span class="op" id="8247380">,</span>&nbsp;<span class="num" id="8247382">0xd</span><span class="op" id="8247385">,</span>&nbsp;<span class="num" id="8247387">0xb8</span><span class="op" id="8247391">,</span>&nbsp;<span class="num" id="8247393">0</span><span class="op" id="8247394">,</span>&nbsp;<span class="num" id="8247396">0</span><span class="op" id="8247397">,</span>&nbsp;<span class="num" id="8247399">0</span><span class="op" id="8247400">,</span>&nbsp;<span class="num" id="8247402">0</span><span class="op" id="8247403">,</span>&nbsp;<span class="num" id="8247405">0</span><span class="op" id="8247406">,</span>&nbsp;<span class="num" id="8247408">0x1</span><span class="op" id="8247411">,</span>&nbsp;<span class="num" id="8247413">0</span><span class="op" id="8247414">,</span>&nbsp;<span class="num" id="8247416">0</span><span class="op" id="8247417">,</span>&nbsp;<span class="num" id="8247419">0</span><span class="op" id="8247420">,</span>&nbsp;<span class="num" id="8247422">0</span><span class="op" id="8247423">,</span>&nbsp;<span class="num" id="8247425">0</span><span class="op" id="8247426">,</span>&nbsp;<span class="num" id="8247428">0x1</span><span class="op" id="8247431">}</span><span class="op" id="8247432">,</span>&nbsp;<span class="string" id="8247434">&#34;2001:db8::1:0:0:1&#34;</span><span class="op" id="8247453">}</span><span class="op" id="8247454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247457">{</span><span class="ident" id="8247458">IP</span><span class="op" id="8247460">{</span><span class="num" id="8247461">0x20</span><span class="op" id="8247465">,</span>&nbsp;<span class="num" id="8247467">0x1</span><span class="op" id="8247470">,</span>&nbsp;<span class="num" id="8247472">0xD</span><span class="op" id="8247475">,</span>&nbsp;<span class="num" id="8247477">0xB8</span><span class="op" id="8247481">,</span>&nbsp;<span class="num" id="8247483">0</span><span class="op" id="8247484">,</span>&nbsp;<span class="num" id="8247486">0</span><span class="op" id="8247487">,</span>&nbsp;<span class="num" id="8247489">0</span><span class="op" id="8247490">,</span>&nbsp;<span class="num" id="8247492">0</span><span class="op" id="8247493">,</span>&nbsp;<span class="num" id="8247495">0</span><span class="op" id="8247496">,</span>&nbsp;<span class="num" id="8247498">0xA</span><span class="op" id="8247501">,</span>&nbsp;<span class="num" id="8247503">0</span><span class="op" id="8247504">,</span>&nbsp;<span class="num" id="8247506">0xB</span><span class="op" id="8247509">,</span>&nbsp;<span class="num" id="8247511">0</span><span class="op" id="8247512">,</span>&nbsp;<span class="num" id="8247514">0xC</span><span class="op" id="8247517">,</span>&nbsp;<span class="num" id="8247519">0</span><span class="op" id="8247520">,</span>&nbsp;<span class="num" id="8247522">0xD</span><span class="op" id="8247525">}</span><span class="op" id="8247526">,</span>&nbsp;<span class="string" id="8247528">&#34;2001:db8::a:b:c:d&#34;</span><span class="op" id="8247547">}</span><span class="op" id="8247548">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247551">{</span><span class="ident" id="8247552">IPv4</span><span class="op" id="8247556">(</span><span class="num" id="8247557">192</span><span class="op" id="8247560">,</span>&nbsp;<span class="num" id="8247562">168</span><span class="op" id="8247565">,</span>&nbsp;<span class="num" id="8247567">0</span><span class="op" id="8247568">,</span>&nbsp;<span class="num" id="8247570">1</span><span class="op" id="8247571">)</span><span class="op" id="8247572">,</span>&nbsp;<span class="string" id="8247574">&#34;192.168.0.1&#34;</span><span class="op" id="8247587">}</span><span class="op" id="8247588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247591">{</span><span class="ident" id="8247592">nil</span><span class="op" id="8247595">,</span>&nbsp;<span class="string" id="8247597">&#34;&#34;</span><span class="op" id="8247599">}</span><span class="op" id="8247600">,</span><br>
<span class="lineno"></span><span class="op" id="8247602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8247605">func</span>&nbsp;<span class="ident" id="8247610">TestIPString</span><span class="op" id="8247622">(</span><span class="ident" id="8247623">t</span>&nbsp;<span class="op" id="8247625">*</span><span class="ident" id="8247626">testing</span><span class="op" id="8247633">.</span><span class="ident" id="8247634">T</span><span class="op" id="8247635">)</span>&nbsp;<span class="op" id="8247637">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8247640">for</span>&nbsp;<span class="ident" id="8247644">_</span><span class="op" id="8247645">,</span>&nbsp;<span class="ident" id="8247647">tt</span>&nbsp;<span class="op" id="8247650">:=</span>&nbsp;<span class="keyword" id="8247653">range</span>&nbsp;<span class="ident" id="8247659">ipStringTests</span>&nbsp;<span class="op" id="8247673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8247677">if</span>&nbsp;<span class="ident" id="8247680">tt</span><span class="op" id="8247682">.</span><span class="ident" id="8247683">in</span>&nbsp;<span class="op" id="8247686">!=</span>&nbsp;<span class="ident" id="8247689">nil</span>&nbsp;<span class="op" id="8247693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8247698">if</span>&nbsp;<span class="ident" id="8247701">out</span>&nbsp;<span class="op" id="8247705">:=</span>&nbsp;<span class="ident" id="8247708">tt</span><span class="op" id="8247710">.</span><span class="ident" id="8247711">in</span><span class="op" id="8247713">.</span><span class="ident" id="8247714">String</span><span class="op" id="8247720">(</span><span class="op" id="8247721">)</span><span class="op" id="8247722">;</span>&nbsp;<span class="ident" id="8247724">out</span>&nbsp;<span class="op" id="8247728">!=</span>&nbsp;<span class="ident" id="8247731">tt</span><span class="op" id="8247733">.</span><span class="ident" id="8247734">out</span>&nbsp;<span class="op" id="8247738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247744">t</span><span class="op" id="8247745">.</span><span class="ident" id="8247746">Errorf</span><span class="op" id="8247752">(</span><span class="string" id="8247753">&#34;IP.String(%v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8247782">,</span>&nbsp;<span class="ident" id="8247784">tt</span><span class="op" id="8247786">.</span><span class="ident" id="8247787">in</span><span class="op" id="8247789">,</span>&nbsp;<span class="ident" id="8247791">out</span><span class="op" id="8247794">,</span>&nbsp;<span class="ident" id="8247796">tt</span><span class="op" id="8247798">.</span><span class="ident" id="8247799">out</span><span class="op" id="8247802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247807">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8247815">if</span>&nbsp;<span class="ident" id="8247818">out</span><span class="op" id="8247821">,</span>&nbsp;<span class="ident" id="8247823">err</span>&nbsp;<span class="op" id="8247827">:=</span>&nbsp;<span class="ident" id="8247830">tt</span><span class="op" id="8247832">.</span><span class="ident" id="8247833">in</span><span class="op" id="8247835">.</span><span class="ident" id="8247836">MarshalText</span><span class="op" id="8247847">(</span><span class="op" id="8247848">)</span><span class="op" id="8247849">;</span>&nbsp;<span class="builtintype" id="8247851">string</span><span class="op" id="8247857">(</span><span class="ident" id="8247858">out</span><span class="op" id="8247861">)</span>&nbsp;<span class="op" id="8247863">!=</span>&nbsp;<span class="ident" id="8247866">tt</span><span class="op" id="8247868">.</span><span class="ident" id="8247869">out</span>&nbsp;<span class="op" id="8247873">||</span>&nbsp;<span class="ident" id="8247876">err</span>&nbsp;<span class="op" id="8247880">!=</span>&nbsp;<span class="ident" id="8247883">nil</span>&nbsp;<span class="op" id="8247887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8247892">t</span><span class="op" id="8247893">.</span><span class="ident" id="8247894">Errorf</span><span class="op" id="8247900">(</span><span class="string" id="8247901">&#34;IP.MarshalText(%v)&nbsp;=&nbsp;%q,&nbsp;%v,&nbsp;want&nbsp;%q,&nbsp;nil&#34;</span><span class="op" id="8247944">,</span>&nbsp;<span class="ident" id="8247946">tt</span><span class="op" id="8247948">.</span><span class="ident" id="8247949">in</span><span class="op" id="8247951">,</span>&nbsp;<span class="ident" id="8247953">out</span><span class="op" id="8247956">,</span>&nbsp;<span class="ident" id="8247958">err</span><span class="op" id="8247961">,</span>&nbsp;<span class="ident" id="8247963">tt</span><span class="op" id="8247965">.</span><span class="ident" id="8247966">out</span><span class="op" id="8247969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8247976">}</span><br>
<span class="lineno">100</span><span class="op" id="8247978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8247981">func</span>&nbsp;<span class="ident" id="8247986">BenchmarkIPString</span><span class="op" id="8248003">(</span><span class="ident" id="8248004">b</span>&nbsp;<span class="op" id="8248006">*</span><span class="ident" id="8248007">testing</span><span class="op" id="8248014">.</span><span class="ident" id="8248015">B</span><span class="op" id="8248016">)</span>&nbsp;<span class="op" id="8248018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8248021">for</span>&nbsp;<span class="ident" id="8248025">i</span>&nbsp;<span class="op" id="8248027">:=</span>&nbsp;<span class="num" id="8248030">0</span><span class="op" id="8248031">;</span>&nbsp;<span class="ident" id="8248033">i</span>&nbsp;<span class="op" id="8248035">&lt;</span>&nbsp;<span class="ident" id="8248037">b</span><span class="op" id="8248038">.</span><span class="ident" id="8248039">N</span><span class="op" id="8248040">;</span>&nbsp;<span class="ident" id="8248042">i</span><span class="op" id="8248043">++</span>&nbsp;<span class="op" id="8248046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8248050">for</span>&nbsp;<span class="ident" id="8248054">_</span><span class="op" id="8248055">,</span>&nbsp;<span class="ident" id="8248057">tt</span>&nbsp;<span class="op" id="8248060">:=</span>&nbsp;<span class="keyword" id="8248063">range</span>&nbsp;<span class="ident" id="8248069">ipStringTests</span>&nbsp;<span class="op" id="8248083">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8248088">if</span>&nbsp;<span class="ident" id="8248091">tt</span><span class="op" id="8248093">.</span><span class="ident" id="8248094">in</span>&nbsp;<span class="op" id="8248097">!=</span>&nbsp;<span class="ident" id="8248100">nil</span>&nbsp;<span class="op" id="8248104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248110">tt</span><span class="op" id="8248112">.</span><span class="ident" id="8248113">in</span><span class="op" id="8248115">.</span><span class="ident" id="8248116">String</span><span class="op" id="8248122">(</span><span class="op" id="8248123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248135">}</span><br>
<span class="lineno">110</span><span class="op" id="8248137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8248140">var</span>&nbsp;<span class="ident" id="8248144">ipMaskTests</span>&nbsp;<span class="op" id="8248156">=</span>&nbsp;<span class="op" id="8248158">[</span><span class="op" id="8248159">]</span><span class="keyword" id="8248160">struct</span>&nbsp;<span class="op" id="8248167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248170">in</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="8248175">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248179">mask</span>&nbsp;<span class="ident" id="8248184">IPMask</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248192">out</span>&nbsp;&nbsp;<span class="ident" id="8248197">IP</span><br>
<span class="lineno"></span><span class="op" id="8248200">}</span><span class="op" id="8248201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248204">{</span><span class="ident" id="8248205">IPv4</span><span class="op" id="8248209">(</span><span class="num" id="8248210">192</span><span class="op" id="8248213">,</span>&nbsp;<span class="num" id="8248215">168</span><span class="op" id="8248218">,</span>&nbsp;<span class="num" id="8248220">1</span><span class="op" id="8248221">,</span>&nbsp;<span class="num" id="8248223">127</span><span class="op" id="8248226">)</span><span class="op" id="8248227">,</span>&nbsp;<span class="ident" id="8248229">IPv4Mask</span><span class="op" id="8248237">(</span><span class="num" id="8248238">255</span><span class="op" id="8248241">,</span>&nbsp;<span class="num" id="8248243">255</span><span class="op" id="8248246">,</span>&nbsp;<span class="num" id="8248248">255</span><span class="op" id="8248251">,</span>&nbsp;<span class="num" id="8248253">128</span><span class="op" id="8248256">)</span><span class="op" id="8248257">,</span>&nbsp;<span class="ident" id="8248259">IPv4</span><span class="op" id="8248263">(</span><span class="num" id="8248264">192</span><span class="op" id="8248267">,</span>&nbsp;<span class="num" id="8248269">168</span><span class="op" id="8248272">,</span>&nbsp;<span class="num" id="8248274">1</span><span class="op" id="8248275">,</span>&nbsp;<span class="num" id="8248277">0</span><span class="op" id="8248278">)</span><span class="op" id="8248279">}</span><span class="op" id="8248280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248283">{</span><span class="ident" id="8248284">IPv4</span><span class="op" id="8248288">(</span><span class="num" id="8248289">192</span><span class="op" id="8248292">,</span>&nbsp;<span class="num" id="8248294">168</span><span class="op" id="8248297">,</span>&nbsp;<span class="num" id="8248299">1</span><span class="op" id="8248300">,</span>&nbsp;<span class="num" id="8248302">127</span><span class="op" id="8248305">)</span><span class="op" id="8248306">,</span>&nbsp;<span class="ident" id="8248308">IPMask</span><span class="op" id="8248314">(</span><span class="ident" id="8248315">ParseIP</span><span class="op" id="8248322">(</span><span class="string" id="8248323">&#34;255.255.255.192&#34;</span><span class="op" id="8248340">)</span><span class="op" id="8248341">)</span><span class="op" id="8248342">,</span>&nbsp;<span class="ident" id="8248344">IPv4</span><span class="op" id="8248348">(</span><span class="num" id="8248349">192</span><span class="op" id="8248352">,</span>&nbsp;<span class="num" id="8248354">168</span><span class="op" id="8248357">,</span>&nbsp;<span class="num" id="8248359">1</span><span class="op" id="8248360">,</span>&nbsp;<span class="num" id="8248362">64</span><span class="op" id="8248364">)</span><span class="op" id="8248365">}</span><span class="op" id="8248366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248369">{</span><span class="ident" id="8248370">IPv4</span><span class="op" id="8248374">(</span><span class="num" id="8248375">192</span><span class="op" id="8248378">,</span>&nbsp;<span class="num" id="8248380">168</span><span class="op" id="8248383">,</span>&nbsp;<span class="num" id="8248385">1</span><span class="op" id="8248386">,</span>&nbsp;<span class="num" id="8248388">127</span><span class="op" id="8248391">)</span><span class="op" id="8248392">,</span>&nbsp;<span class="ident" id="8248394">IPMask</span><span class="op" id="8248400">(</span><span class="ident" id="8248401">ParseIP</span><span class="op" id="8248408">(</span><span class="string" id="8248409">&#34;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffe0&#34;</span><span class="op" id="8248450">)</span><span class="op" id="8248451">)</span><span class="op" id="8248452">,</span>&nbsp;<span class="ident" id="8248454">IPv4</span><span class="op" id="8248458">(</span><span class="num" id="8248459">192</span><span class="op" id="8248462">,</span>&nbsp;<span class="num" id="8248464">168</span><span class="op" id="8248467">,</span>&nbsp;<span class="num" id="8248469">1</span><span class="op" id="8248470">,</span>&nbsp;<span class="num" id="8248472">96</span><span class="op" id="8248474">)</span><span class="op" id="8248475">}</span><span class="op" id="8248476">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248479">{</span><span class="ident" id="8248480">IPv4</span><span class="op" id="8248484">(</span><span class="num" id="8248485">192</span><span class="op" id="8248488">,</span>&nbsp;<span class="num" id="8248490">168</span><span class="op" id="8248493">,</span>&nbsp;<span class="num" id="8248495">1</span><span class="op" id="8248496">,</span>&nbsp;<span class="num" id="8248498">127</span><span class="op" id="8248501">)</span><span class="op" id="8248502">,</span>&nbsp;<span class="ident" id="8248504">IPv4Mask</span><span class="op" id="8248512">(</span><span class="num" id="8248513">255</span><span class="op" id="8248516">,</span>&nbsp;<span class="num" id="8248518">0</span><span class="op" id="8248519">,</span>&nbsp;<span class="num" id="8248521">255</span><span class="op" id="8248524">,</span>&nbsp;<span class="num" id="8248526">0</span><span class="op" id="8248527">)</span><span class="op" id="8248528">,</span>&nbsp;<span class="ident" id="8248530">IPv4</span><span class="op" id="8248534">(</span><span class="num" id="8248535">192</span><span class="op" id="8248538">,</span>&nbsp;<span class="num" id="8248540">0</span><span class="op" id="8248541">,</span>&nbsp;<span class="num" id="8248543">1</span><span class="op" id="8248544">,</span>&nbsp;<span class="num" id="8248546">0</span><span class="op" id="8248547">)</span><span class="op" id="8248548">}</span><span class="op" id="8248549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248552">{</span><span class="ident" id="8248553">ParseIP</span><span class="op" id="8248560">(</span><span class="string" id="8248561">&#34;2001:db8::1&#34;</span><span class="op" id="8248574">)</span><span class="op" id="8248575">,</span>&nbsp;<span class="ident" id="8248577">IPMask</span><span class="op" id="8248583">(</span><span class="ident" id="8248584">ParseIP</span><span class="op" id="8248591">(</span><span class="string" id="8248592">&#34;ffff:ff80::&#34;</span><span class="op" id="8248605">)</span><span class="op" id="8248606">)</span><span class="op" id="8248607">,</span>&nbsp;<span class="ident" id="8248609">ParseIP</span><span class="op" id="8248616">(</span><span class="string" id="8248617">&#34;2001:d80::&#34;</span><span class="op" id="8248629">)</span><span class="op" id="8248630">}</span><span class="op" id="8248631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248634">{</span><span class="ident" id="8248635">ParseIP</span><span class="op" id="8248642">(</span><span class="string" id="8248643">&#34;2001:db8::1&#34;</span><span class="op" id="8248656">)</span><span class="op" id="8248657">,</span>&nbsp;<span class="ident" id="8248659">IPMask</span><span class="op" id="8248665">(</span><span class="ident" id="8248666">ParseIP</span><span class="op" id="8248673">(</span><span class="string" id="8248674">&#34;f0f0:0f0f::&#34;</span><span class="op" id="8248687">)</span><span class="op" id="8248688">)</span><span class="op" id="8248689">,</span>&nbsp;<span class="ident" id="8248691">ParseIP</span><span class="op" id="8248698">(</span><span class="string" id="8248699">&#34;2000:d08::&#34;</span><span class="op" id="8248711">)</span><span class="op" id="8248712">}</span><span class="op" id="8248713">,</span><br>
<span class="lineno"></span><span class="op" id="8248715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="8248718">func</span>&nbsp;<span class="ident" id="8248723">TestIPMask</span><span class="op" id="8248733">(</span><span class="ident" id="8248734">t</span>&nbsp;<span class="op" id="8248736">*</span><span class="ident" id="8248737">testing</span><span class="op" id="8248744">.</span><span class="ident" id="8248745">T</span><span class="op" id="8248746">)</span>&nbsp;<span class="op" id="8248748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8248751">for</span>&nbsp;<span class="ident" id="8248755">_</span><span class="op" id="8248756">,</span>&nbsp;<span class="ident" id="8248758">tt</span>&nbsp;<span class="op" id="8248761">:=</span>&nbsp;<span class="keyword" id="8248764">range</span>&nbsp;<span class="ident" id="8248770">ipMaskTests</span>&nbsp;<span class="op" id="8248782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8248786">if</span>&nbsp;<span class="ident" id="8248789">out</span>&nbsp;<span class="op" id="8248793">:=</span>&nbsp;<span class="ident" id="8248796">tt</span><span class="op" id="8248798">.</span><span class="ident" id="8248799">in</span><span class="op" id="8248801">.</span><span class="ident" id="8248802">Mask</span><span class="op" id="8248806">(</span><span class="ident" id="8248807">tt</span><span class="op" id="8248809">.</span><span class="ident" id="8248810">mask</span><span class="op" id="8248814">)</span><span class="op" id="8248815">;</span>&nbsp;<span class="ident" id="8248817">out</span>&nbsp;<span class="op" id="8248821">==</span>&nbsp;<span class="ident" id="8248824">nil</span>&nbsp;<span class="op" id="8248828">||</span>&nbsp;<span class="op" id="8248831">!</span><span class="ident" id="8248832">tt</span><span class="op" id="8248834">.</span><span class="ident" id="8248835">out</span><span class="op" id="8248838">.</span><span class="ident" id="8248839">Equal</span><span class="op" id="8248844">(</span><span class="ident" id="8248845">out</span><span class="op" id="8248848">)</span>&nbsp;<span class="op" id="8248850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248855">t</span><span class="op" id="8248856">.</span><span class="ident" id="8248857">Errorf</span><span class="op" id="8248863">(</span><span class="string" id="8248864">&#34;IP(%v).Mask(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8248895">,</span>&nbsp;<span class="ident" id="8248897">tt</span><span class="op" id="8248899">.</span><span class="ident" id="8248900">in</span><span class="op" id="8248902">,</span>&nbsp;<span class="ident" id="8248904">tt</span><span class="op" id="8248906">.</span><span class="ident" id="8248907">mask</span><span class="op" id="8248911">,</span>&nbsp;<span class="ident" id="8248913">out</span><span class="op" id="8248916">,</span>&nbsp;<span class="ident" id="8248918">tt</span><span class="op" id="8248920">.</span><span class="ident" id="8248921">out</span><span class="op" id="8248924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248928">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248931">}</span><br>
<span class="lineno"></span><span class="op" id="8248933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8248936">var</span>&nbsp;<span class="ident" id="8248940">ipMaskStringTests</span>&nbsp;<span class="op" id="8248958">=</span>&nbsp;<span class="op" id="8248960">[</span><span class="op" id="8248961">]</span><span class="keyword" id="8248962">struct</span>&nbsp;<span class="op" id="8248969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248972">in</span>&nbsp;&nbsp;<span class="ident" id="8248976">IPMask</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8248984">out</span>&nbsp;<span class="builtintype" id="8248988">string</span><br>
<span class="lineno"></span><span class="op" id="8248995">}</span><span class="op" id="8248996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8248999">{</span><span class="ident" id="8249000">IPv4Mask</span><span class="op" id="8249008">(</span><span class="num" id="8249009">255</span><span class="op" id="8249012">,</span>&nbsp;<span class="num" id="8249014">255</span><span class="op" id="8249017">,</span>&nbsp;<span class="num" id="8249019">255</span><span class="op" id="8249022">,</span>&nbsp;<span class="num" id="8249024">240</span><span class="op" id="8249027">)</span><span class="op" id="8249028">,</span>&nbsp;<span class="string" id="8249030">&#34;fffffff0&#34;</span><span class="op" id="8249040">}</span><span class="op" id="8249041">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249044">{</span><span class="ident" id="8249045">IPv4Mask</span><span class="op" id="8249053">(</span><span class="num" id="8249054">255</span><span class="op" id="8249057">,</span>&nbsp;<span class="num" id="8249059">0</span><span class="op" id="8249060">,</span>&nbsp;<span class="num" id="8249062">128</span><span class="op" id="8249065">,</span>&nbsp;<span class="num" id="8249067">0</span><span class="op" id="8249068">)</span><span class="op" id="8249069">,</span>&nbsp;<span class="string" id="8249071">&#34;ff008000&#34;</span><span class="op" id="8249081">}</span><span class="op" id="8249082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249085">{</span><span class="ident" id="8249086">IPMask</span><span class="op" id="8249092">(</span><span class="ident" id="8249093">ParseIP</span><span class="op" id="8249100">(</span><span class="string" id="8249101">&#34;ffff:ff80::&#34;</span><span class="op" id="8249114">)</span><span class="op" id="8249115">)</span><span class="op" id="8249116">,</span>&nbsp;<span class="string" id="8249118">&#34;ffffff80000000000000000000000000&#34;</span><span class="op" id="8249152">}</span><span class="op" id="8249153">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249156">{</span><span class="ident" id="8249157">IPMask</span><span class="op" id="8249163">(</span><span class="ident" id="8249164">ParseIP</span><span class="op" id="8249171">(</span><span class="string" id="8249172">&#34;ef00:ff80::cafe:0&#34;</span><span class="op" id="8249191">)</span><span class="op" id="8249192">)</span><span class="op" id="8249193">,</span>&nbsp;<span class="string" id="8249195">&#34;ef00ff800000000000000000cafe0000&#34;</span><span class="op" id="8249229">}</span><span class="op" id="8249230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249233">{</span><span class="ident" id="8249234">nil</span><span class="op" id="8249237">,</span>&nbsp;<span class="string" id="8249239">&#34;&lt;nil&gt;&#34;</span><span class="op" id="8249246">}</span><span class="op" id="8249247">,</span><br>
<span class="lineno"></span><span class="op" id="8249249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8249252">func</span>&nbsp;<span class="ident" id="8249257">TestIPMaskString</span><span class="op" id="8249273">(</span><span class="ident" id="8249274">t</span>&nbsp;<span class="op" id="8249276">*</span><span class="ident" id="8249277">testing</span><span class="op" id="8249284">.</span><span class="ident" id="8249285">T</span><span class="op" id="8249286">)</span>&nbsp;<span class="op" id="8249288">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8249291">for</span>&nbsp;<span class="ident" id="8249295">_</span><span class="op" id="8249296">,</span>&nbsp;<span class="ident" id="8249298">tt</span>&nbsp;<span class="op" id="8249301">:=</span>&nbsp;<span class="keyword" id="8249304">range</span>&nbsp;<span class="ident" id="8249310">ipMaskStringTests</span>&nbsp;<span class="op" id="8249328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8249332">if</span>&nbsp;<span class="ident" id="8249335">out</span>&nbsp;<span class="op" id="8249339">:=</span>&nbsp;<span class="ident" id="8249342">tt</span><span class="op" id="8249344">.</span><span class="ident" id="8249345">in</span><span class="op" id="8249347">.</span><span class="ident" id="8249348">String</span><span class="op" id="8249354">(</span><span class="op" id="8249355">)</span><span class="op" id="8249356">;</span>&nbsp;<span class="ident" id="8249358">out</span>&nbsp;<span class="op" id="8249362">!=</span>&nbsp;<span class="ident" id="8249365">tt</span><span class="op" id="8249367">.</span><span class="ident" id="8249368">out</span>&nbsp;<span class="op" id="8249372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8249377">t</span><span class="op" id="8249378">.</span><span class="ident" id="8249379">Errorf</span><span class="op" id="8249385">(</span><span class="string" id="8249386">&#34;IPMask.String(%v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8249419">,</span>&nbsp;<span class="ident" id="8249421">tt</span><span class="op" id="8249423">.</span><span class="ident" id="8249424">in</span><span class="op" id="8249426">,</span>&nbsp;<span class="ident" id="8249428">out</span><span class="op" id="8249431">,</span>&nbsp;<span class="ident" id="8249433">tt</span><span class="op" id="8249435">.</span><span class="ident" id="8249436">out</span><span class="op" id="8249439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249443">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249446">}</span><br>
<span class="lineno">150</span><span class="op" id="8249448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8249451">func</span>&nbsp;<span class="ident" id="8249456">BenchmarkIPMaskString</span><span class="op" id="8249477">(</span><span class="ident" id="8249478">b</span>&nbsp;<span class="op" id="8249480">*</span><span class="ident" id="8249481">testing</span><span class="op" id="8249488">.</span><span class="ident" id="8249489">B</span><span class="op" id="8249490">)</span>&nbsp;<span class="op" id="8249492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8249495">for</span>&nbsp;<span class="ident" id="8249499">i</span>&nbsp;<span class="op" id="8249501">:=</span>&nbsp;<span class="num" id="8249504">0</span><span class="op" id="8249505">;</span>&nbsp;<span class="ident" id="8249507">i</span>&nbsp;<span class="op" id="8249509">&lt;</span>&nbsp;<span class="ident" id="8249511">b</span><span class="op" id="8249512">.</span><span class="ident" id="8249513">N</span><span class="op" id="8249514">;</span>&nbsp;<span class="ident" id="8249516">i</span><span class="op" id="8249517">++</span>&nbsp;<span class="op" id="8249520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8249524">for</span>&nbsp;<span class="ident" id="8249528">_</span><span class="op" id="8249529">,</span>&nbsp;<span class="ident" id="8249531">tt</span>&nbsp;<span class="op" id="8249534">:=</span>&nbsp;<span class="keyword" id="8249537">range</span>&nbsp;<span class="ident" id="8249543">ipMaskStringTests</span>&nbsp;<span class="op" id="8249561">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8249566">tt</span><span class="op" id="8249568">.</span><span class="ident" id="8249569">in</span><span class="op" id="8249571">.</span><span class="ident" id="8249572">String</span><span class="op" id="8249578">(</span><span class="op" id="8249579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249586">}</span><br>
<span class="lineno"></span><span class="op" id="8249588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8249591">var</span>&nbsp;<span class="ident" id="8249595">parseCIDRTests</span>&nbsp;<span class="op" id="8249610">=</span>&nbsp;<span class="op" id="8249612">[</span><span class="op" id="8249613">]</span><span class="keyword" id="8249614">struct</span>&nbsp;<span class="op" id="8249621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8249624">in</span>&nbsp;&nbsp;<span class="builtintype" id="8249628">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8249636">ip</span>&nbsp;&nbsp;<span class="ident" id="8249640">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8249644">net</span>&nbsp;<span class="op" id="8249648">*</span><span class="ident" id="8249649">IPNet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8249656">err</span>&nbsp;<span class="builtintype" id="8249660">error</span><br>
<span class="lineno">165</span><span class="op" id="8249666">}</span><span class="op" id="8249667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249670">{</span><span class="string" id="8249671">&#34;135.104.0.0/32&#34;</span><span class="op" id="8249687">,</span>&nbsp;<span class="ident" id="8249689">IPv4</span><span class="op" id="8249693">(</span><span class="num" id="8249694">135</span><span class="op" id="8249697">,</span>&nbsp;<span class="num" id="8249699">104</span><span class="op" id="8249702">,</span>&nbsp;<span class="num" id="8249704">0</span><span class="op" id="8249705">,</span>&nbsp;<span class="num" id="8249707">0</span><span class="op" id="8249708">)</span><span class="op" id="8249709">,</span>&nbsp;<span class="op" id="8249711">&amp;</span><span class="ident" id="8249712">IPNet</span><span class="op" id="8249717">{</span><span class="ident" id="8249718">IP</span><span class="op" id="8249720">:</span>&nbsp;<span class="ident" id="8249722">IPv4</span><span class="op" id="8249726">(</span><span class="num" id="8249727">135</span><span class="op" id="8249730">,</span>&nbsp;<span class="num" id="8249732">104</span><span class="op" id="8249735">,</span>&nbsp;<span class="num" id="8249737">0</span><span class="op" id="8249738">,</span>&nbsp;<span class="num" id="8249740">0</span><span class="op" id="8249741">)</span><span class="op" id="8249742">,</span>&nbsp;<span class="ident" id="8249744">Mask</span><span class="op" id="8249748">:</span>&nbsp;<span class="ident" id="8249750">IPv4Mask</span><span class="op" id="8249758">(</span><span class="num" id="8249759">255</span><span class="op" id="8249762">,</span>&nbsp;<span class="num" id="8249764">255</span><span class="op" id="8249767">,</span>&nbsp;<span class="num" id="8249769">255</span><span class="op" id="8249772">,</span>&nbsp;<span class="num" id="8249774">255</span><span class="op" id="8249777">)</span><span class="op" id="8249778">}</span><span class="op" id="8249779">,</span>&nbsp;<span class="ident" id="8249781">nil</span><span class="op" id="8249784">}</span><span class="op" id="8249785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249788">{</span><span class="string" id="8249789">&#34;0.0.0.0/24&#34;</span><span class="op" id="8249801">,</span>&nbsp;<span class="ident" id="8249803">IPv4</span><span class="op" id="8249807">(</span><span class="num" id="8249808">0</span><span class="op" id="8249809">,</span>&nbsp;<span class="num" id="8249811">0</span><span class="op" id="8249812">,</span>&nbsp;<span class="num" id="8249814">0</span><span class="op" id="8249815">,</span>&nbsp;<span class="num" id="8249817">0</span><span class="op" id="8249818">)</span><span class="op" id="8249819">,</span>&nbsp;<span class="op" id="8249821">&amp;</span><span class="ident" id="8249822">IPNet</span><span class="op" id="8249827">{</span><span class="ident" id="8249828">IP</span><span class="op" id="8249830">:</span>&nbsp;<span class="ident" id="8249832">IPv4</span><span class="op" id="8249836">(</span><span class="num" id="8249837">0</span><span class="op" id="8249838">,</span>&nbsp;<span class="num" id="8249840">0</span><span class="op" id="8249841">,</span>&nbsp;<span class="num" id="8249843">0</span><span class="op" id="8249844">,</span>&nbsp;<span class="num" id="8249846">0</span><span class="op" id="8249847">)</span><span class="op" id="8249848">,</span>&nbsp;<span class="ident" id="8249850">Mask</span><span class="op" id="8249854">:</span>&nbsp;<span class="ident" id="8249856">IPv4Mask</span><span class="op" id="8249864">(</span><span class="num" id="8249865">255</span><span class="op" id="8249868">,</span>&nbsp;<span class="num" id="8249870">255</span><span class="op" id="8249873">,</span>&nbsp;<span class="num" id="8249875">255</span><span class="op" id="8249878">,</span>&nbsp;<span class="num" id="8249880">0</span><span class="op" id="8249881">)</span><span class="op" id="8249882">}</span><span class="op" id="8249883">,</span>&nbsp;<span class="ident" id="8249885">nil</span><span class="op" id="8249888">}</span><span class="op" id="8249889">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8249892">{</span><span class="string" id="8249893">&#34;135.104.0.0/24&#34;</span><span class="op" id="8249909">,</span>&nbsp;<span class="ident" id="8249911">IPv4</span><span class="op" id="8249915">(</span><span class="num" id="8249916">135</span><span class="op" id="8249919">,</span>&nbsp;<span class="num" id="8249921">104</span><span class="op" id="8249924">,</span>&nbsp;<span class="num" id="8249926">0</span><span class="op" id="8249927">,</span>&nbsp;<span class="num" id="8249929">0</span><span class="op" id="8249930">)</span><span class="op" id="8249931">,</span>&nbsp;<span class="op" id="8249933">&amp;</span><span class="ident" id="8249934">IPNet</span><span class="op" id="8249939">{</span><span class="ident" id="8249940">IP</span><span class="op" id="8249942">:</span>&nbsp;<span class="ident" id="8249944">IPv4</span><span class="op" id="8249948">(</span><span class="num" id="8249949">135</span><span class="op" id="8249952">,</span>&nbsp;<span class="num" id="8249954">104</span><span class="op" id="8249957">,</span>&nbsp;<span class="num" id="8249959">0</span><span class="op" id="8249960">,</span>&nbsp;<span class="num" id="8249962">0</span><span class="op" id="8249963">)</span><span class="op" id="8249964">,</span>&nbsp;<span class="ident" id="8249966">Mask</span><span class="op" id="8249970">:</span>&nbsp;<span class="ident" id="8249972">IPv4Mask</span><span class="op" id="8249980">(</span><span class="num" id="8249981">255</span><span class="op" id="8249984">,</span>&nbsp;<span class="num" id="8249986">255</span><span class="op" id="8249989">,</span>&nbsp;<span class="num" id="8249991">255</span><span class="op" id="8249994">,</span>&nbsp;<span class="num" id="8249996">0</span><span class="op" id="8249997">)</span><span class="op" id="8249998">}</span><span class="op" id="8249999">,</span>&nbsp;<span class="ident" id="8250001">nil</span><span class="op" id="8250004">}</span><span class="op" id="8250005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8250008">{</span><span class="string" id="8250009">&#34;135.104.0.1/32&#34;</span><span class="op" id="8250025">,</span>&nbsp;<span class="ident" id="8250027">IPv4</span><span class="op" id="8250031">(</span><span class="num" id="8250032">135</span><span class="op" id="8250035">,</span>&nbsp;<span class="num" id="8250037">104</span><span class="op" id="8250040">,</span>&nbsp;<span class="num" id="8250042">0</span><span class="op" id="8250043">,</span>&nbsp;<span class="num" id="8250045">1</span><span class="op" id="8250046">)</span><span class="op" id="8250047">,</span>&nbsp;<span class="op" id="8250049">&amp;</span><span class="ident" id="8250050">IPNet</span><span class="op" id="8250055">{</span><span class="ident" id="8250056">IP</span><span class="op" id="8250058">:</span>&nbsp;<span class="ident" id="8250060">IPv4</span><span class="op" id="8250064">(</span><span class="num" id="8250065">135</span><span class="op" id="8250068">,</span>&nbsp;<span class="num" id="8250070">104</span><span class="op" id="8250073">,</span>&nbsp;<span class="num" id="8250075">0</span><span class="op" id="8250076">,</span>&nbsp;<span class="num" id="8250078">1</span><span class="op" id="8250079">)</span><span class="op" id="8250080">,</span>&nbsp;<span class="ident" id="8250082">Mask</span><span class="op" id="8250086">:</span>&nbsp;<span class="ident" id="8250088">IPv4Mask</span><span class="op" id="8250096">(</span><span class="num" id="8250097">255</span><span class="op" id="8250100">,</span>&nbsp;<span class="num" id="8250102">255</span><span class="op" id="8250105">,</span>&nbsp;<span class="num" id="8250107">255</span><span class="op" id="8250110">,</span>&nbsp;<span class="num" id="8250112">255</span><span class="op" id="8250115">)</span><span class="op" id="8250116">}</span><span class="op" id="8250117">,</span>&nbsp;<span class="ident" id="8250119">nil</span><span class="op" id="8250122">}</span><span class="op" id="8250123">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8250126">{</span><span class="string" id="8250127">&#34;135.104.0.1/24&#34;</span><span class="op" id="8250143">,</span>&nbsp;<span class="ident" id="8250145">IPv4</span><span class="op" id="8250149">(</span><span class="num" id="8250150">135</span><span class="op" id="8250153">,</span>&nbsp;<span class="num" id="8250155">104</span><span class="op" id="8250158">,</span>&nbsp;<span class="num" id="8250160">0</span><span class="op" id="8250161">,</span>&nbsp;<span class="num" id="8250163">1</span><span class="op" id="8250164">)</span><span class="op" id="8250165">,</span>&nbsp;<span class="op" id="8250167">&amp;</span><span class="ident" id="8250168">IPNet</span><span class="op" id="8250173">{</span><span class="ident" id="8250174">IP</span><span class="op" id="8250176">:</span>&nbsp;<span class="ident" id="8250178">IPv4</span><span class="op" id="8250182">(</span><span class="num" id="8250183">135</span><span class="op" id="8250186">,</span>&nbsp;<span class="num" id="8250188">104</span><span class="op" id="8250191">,</span>&nbsp;<span class="num" id="8250193">0</span><span class="op" id="8250194">,</span>&nbsp;<span class="num" id="8250196">0</span><span class="op" id="8250197">)</span><span class="op" id="8250198">,</span>&nbsp;<span class="ident" id="8250200">Mask</span><span class="op" id="8250204">:</span>&nbsp;<span class="ident" id="8250206">IPv4Mask</span><span class="op" id="8250214">(</span><span class="num" id="8250215">255</span><span class="op" id="8250218">,</span>&nbsp;<span class="num" id="8250220">255</span><span class="op" id="8250223">,</span>&nbsp;<span class="num" id="8250225">255</span><span class="op" id="8250228">,</span>&nbsp;<span class="num" id="8250230">0</span><span class="op" id="8250231">)</span><span class="op" id="8250232">}</span><span class="op" id="8250233">,</span>&nbsp;<span class="ident" id="8250235">nil</span><span class="op" id="8250238">}</span><span class="op" id="8250239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8250242">{</span><span class="string" id="8250243">&#34;::1/128&#34;</span><span class="op" id="8250252">,</span>&nbsp;<span class="ident" id="8250254">ParseIP</span><span class="op" id="8250261">(</span><span class="string" id="8250262">&#34;::1&#34;</span><span class="op" id="8250267">)</span><span class="op" id="8250268">,</span>&nbsp;<span class="op" id="8250270">&amp;</span><span class="ident" id="8250271">IPNet</span><span class="op" id="8250276">{</span><span class="ident" id="8250277">IP</span><span class="op" id="8250279">:</span>&nbsp;<span class="ident" id="8250281">ParseIP</span><span class="op" id="8250288">(</span><span class="string" id="8250289">&#34;::1&#34;</span><span class="op" id="8250294">)</span><span class="op" id="8250295">,</span>&nbsp;<span class="ident" id="8250297">Mask</span><span class="op" id="8250301">:</span>&nbsp;<span class="ident" id="8250303">IPMask</span><span class="op" id="8250309">(</span><span class="ident" id="8250310">ParseIP</span><span class="op" id="8250317">(</span><span class="string" id="8250318">&#34;ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff&#34;</span><span class="op" id="8250359">)</span><span class="op" id="8250360">)</span><span class="op" id="8250361">}</span><span class="op" id="8250362">,</span>&nbsp;<span class="ident" id="8250364">nil</span><span class="op" id="8250367">}</span><span class="op" id="8250368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8250371">{</span><span class="string" id="8250372">&#34;abcd:2345::/127&#34;</span><span class="op" id="8250389">,</span>&nbsp;<span class="ident" id="8250391">ParseIP</span><span class="op" id="8250398">(</span><span class="string" id="8250399">&#34;abcd:2345::&#34;</span><span class="op" id="8250412">)</span><span class="op" id="8250413">,</span>&nbsp;<span class="op" id="8250415">&amp;</span><span class="ident" id="8250416">IPNet</span><span class="op" id="8250421">{</span><span class="ident" id="8250422">IP</span><span class="op" id="8250424">:</span>&nbsp;<span class="ident" id="8250426">ParseIP</span><span class="op" id="8250433">(</span><span class="string" id="8250434">&#34;abcd:2345::&#34;</span><span class="op" id="8250447">)</span><span class="op" id="8250448">,</span>&nbsp;<span class="ident" id="8250450">Mask</span><span class="op" id="8250454">:</span>&nbsp;<span class="ident" id="8250456">IPMask</span><span class="op" id="8250462">(</span><span class="ident" id="8250463">ParseIP</span><span class="op" id="8250470">(</span><span class="string" id="8250471">&#34;ffff:ffff:ffff:ffff:ffff:ffff:ffff:fffe&#34;</span><span class="op" id="8250512">)</span><span class="op" id="8250513">)</span><span class="op" id="8250514">}</span><span class="op" id="8250515">,</span>&nbsp;<span class="ident" id="8250517">nil</span><span class="op" id="8250520">}</span><span class="op" id="8250521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8250524">{</span><span class="string" id="8250525">&#34;abcd:2345::/65&#34;</span><span class="op" id="8250541">,</span>&nbsp;<span class="ident" id="8250543">ParseIP</span><span class="op" id="8250550">(</span><span class="string" id="8250551">&#34;abcd:2345::&#34;</span><span class="op" id="8250564">)</span><span class="op" id="8250565">,</span>&nbsp;<span class="op" id="8250567">&amp;</span><span class="ident" id="8250568">IPNet</span><span class="op" id="8250573">{</span><span class="ident" id="8250574">IP</span><span class="op" id="8250576">:</span>&nbsp;<span class="ident" id="8250578">ParseIP</span><span class="op" id="8250585">(</span><span class="string" id="8250586">&#34;abcd:2345::&#34;</span><span class="op" id="8250599">)</span><span class="op" id="8250600">,</span>&nbsp;<span class="ident" id="8250602">Mask</span><span class="op" id="8250606">:</span>&nbsp;<span class="ident" id="8250608">IPMask</span><span class="op" id="8250614">(</span><span class="ident" id="8250615">ParseIP</span><span class="op" id="8250622">(</span><span class="string" id="8250623">&#34;ffff:ffff:ffff:ffff:8000::&#34;</span><span class="op" id="8250651">)</span><span class="op" id="8250652">)</span><span class="op" id="8250653">}</span><span class="op" id="8250654">,</span>&nbsp;<span class="ident" id="8250656">nil</span><span class="op" id="8250659">}</span><span class="op" id="8250660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8250663">{</span><span class="string" id="8250664">&#34;abcd:2345::/64&#34;</span><span class="op" id="8250680">,</span>&nbsp;<span class="ident" id="8250682">ParseIP</span><span class="op" id="8250689">(</span><span class="string" id="8250690">&#34;abcd:2345::&#34;</span><span class="op" id="8250703">)</span><span class="op" id="8250704">,</span>&nbsp;<span class="op" id="8250706">&amp;</span><span class="ident" id="8250707">IPNet</span><span class="op" id="8250712">{</span><span class="ident" id="8250713">IP</span><span class="op" id="8250715">:</span>&nbsp;<span class="ident" id="8250717">ParseIP</span><span class="op" id="8250724">(</span><span class="string" id="8250725">&#34;abcd:2345::&#34;</span><span class="op" id="8250738">)</span><span class="op" id="8250739">,</span>&nbsp;<span class="ident" id="8250741">Mask</span><span class="op" id="8250745">:</span>&nbsp;<span class="ident" id="8250747">IPMask</span><span class="op" id="8250753">(</span><span class="ident" id="8250754">ParseIP</span><span class="op" id="8250761">(</span><span class="string" id="8250762">&#34;ffff:ffff:ffff:ffff::&#34;</span><span class="op" id="8250785">)</span><span class="op" id="8250786">)</span><span class="op" id="8250787">}</span><span class="op" id="8250788">,</span>&nbsp;<span class="ident" id="8250790">nil</span><span class="op" id="8250793">}</span><span class="op" id="8250794">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8250797">{</span><span class="string" id="8250798">&#34;abcd:2345::/63&#34;</span><span class="op" id="8250814">,</span>&nbsp;<span class="ident" id="8250816">ParseIP</span><span class="op" id="8250823">(</span><span class="string" id="8250824">&#34;abcd:2345::&#34;</span><span class="op" id="8250837">)</span><span class="op" id="8250838">,</span>&nbsp;<span class="op" id="8250840">&amp;</span><span class="ident" id="8250841">IPNet</span><span class="op" id="8250846">{</span><span class="ident" id="8250847">IP</span><span class="op" id="8250849">:</span>&nbsp;<span class="ident" id="8250851">ParseIP</span><span class="op" id="8250858">(</span><span class="string" id="8250859">&#34;abcd:2345::&#34;</span><span class="op" id="8250872">)</span><span class="op" id="8250873">,</span>&nbsp;<span class="ident" id="8250875">Mask</span><span class="op" id="8250879">:</span>&nbsp;<span class="ident" id="8250881">IPMask</span><span class="op" id="8250887">(</span><span class="ident" id="8250888">ParseIP</span><span class="op" id="8250895">(</span><span class="string" id="8250896">&#34;ffff:ffff:ffff:fffe::&#34;</span><span class="op" id="8250919">)</span><span class="op" id="8250920">)</span><span class="op" id="8250921">}</span><span class="op" id="8250922">,</span>&nbsp;<span class="ident" id="8250924">nil</span><span class="op" id="8250927">}</span><span class="op" id="8250928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8250931">{</span><span class="string" id="8250932">&#34;abcd:2345::/33&#34;</span><span class="op" id="8250948">,</span>&nbsp;<span class="ident" id="8250950">ParseIP</span><span class="op" id="8250957">(</span><span class="string" id="8250958">&#34;abcd:2345::&#34;</span><span class="op" id="8250971">)</span><span class="op" id="8250972">,</span>&nbsp;<span class="op" id="8250974">&amp;</span><span class="ident" id="8250975">IPNet</span><span class="op" id="8250980">{</span><span class="ident" id="8250981">IP</span><span class="op" id="8250983">:</span>&nbsp;<span class="ident" id="8250985">ParseIP</span><span class="op" id="8250992">(</span><span class="string" id="8250993">&#34;abcd:2345::&#34;</span><span class="op" id="8251006">)</span><span class="op" id="8251007">,</span>&nbsp;<span class="ident" id="8251009">Mask</span><span class="op" id="8251013">:</span>&nbsp;<span class="ident" id="8251015">IPMask</span><span class="op" id="8251021">(</span><span class="ident" id="8251022">ParseIP</span><span class="op" id="8251029">(</span><span class="string" id="8251030">&#34;ffff:ffff:8000::&#34;</span><span class="op" id="8251048">)</span><span class="op" id="8251049">)</span><span class="op" id="8251050">}</span><span class="op" id="8251051">,</span>&nbsp;<span class="ident" id="8251053">nil</span><span class="op" id="8251056">}</span><span class="op" id="8251057">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8251060">{</span><span class="string" id="8251061">&#34;abcd:2345::/32&#34;</span><span class="op" id="8251077">,</span>&nbsp;<span class="ident" id="8251079">ParseIP</span><span class="op" id="8251086">(</span><span class="string" id="8251087">&#34;abcd:2345::&#34;</span><span class="op" id="8251100">)</span><span class="op" id="8251101">,</span>&nbsp;<span class="op" id="8251103">&amp;</span><span class="ident" id="8251104">IPNet</span><span class="op" id="8251109">{</span><span class="ident" id="8251110">IP</span><span class="op" id="8251112">:</span>&nbsp;<span class="ident" id="8251114">ParseIP</span><span class="op" id="8251121">(</span><span class="string" id="8251122">&#34;abcd:2345::&#34;</span><span class="op" id="8251135">)</span><span class="op" id="8251136">,</span>&nbsp;<span class="ident" id="8251138">Mask</span><span class="op" id="8251142">:</span>&nbsp;<span class="ident" id="8251144">IPMask</span><span class="op" id="8251150">(</span><span class="ident" id="8251151">ParseIP</span><span class="op" id="8251158">(</span><span class="string" id="8251159">&#34;ffff:ffff::&#34;</span><span class="op" id="8251172">)</span><span class="op" id="8251173">)</span><span class="op" id="8251174">}</span><span class="op" id="8251175">,</span>&nbsp;<span class="ident" id="8251177">nil</span><span class="op" id="8251180">}</span><span class="op" id="8251181">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8251184">{</span><span class="string" id="8251185">&#34;abcd:2344::/31&#34;</span><span class="op" id="8251201">,</span>&nbsp;<span class="ident" id="8251203">ParseIP</span><span class="op" id="8251210">(</span><span class="string" id="8251211">&#34;abcd:2344::&#34;</span><span class="op" id="8251224">)</span><span class="op" id="8251225">,</span>&nbsp;<span class="op" id="8251227">&amp;</span><span class="ident" id="8251228">IPNet</span><span class="op" id="8251233">{</span><span class="ident" id="8251234">IP</span><span class="op" id="8251236">:</span>&nbsp;<span class="ident" id="8251238">ParseIP</span><span class="op" id="8251245">(</span><span class="string" id="8251246">&#34;abcd:2344::&#34;</span><span class="op" id="8251259">)</span><span class="op" id="8251260">,</span>&nbsp;<span class="ident" id="8251262">Mask</span><span class="op" id="8251266">:</span>&nbsp;<span class="ident" id="8251268">IPMask</span><span class="op" id="8251274">(</span><span class="ident" id="8251275">ParseIP</span><span class="op" id="8251282">(</span><span class="string" id="8251283">&#34;ffff:fffe::&#34;</span><span class="op" id="8251296">)</span><span class="op" id="8251297">)</span><span class="op" id="8251298">}</span><span class="op" id="8251299">,</span>&nbsp;<span class="ident" id="8251301">nil</span><span class="op" id="8251304">}</span><span class="op" id="8251305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8251308">{</span><span class="string" id="8251309">&#34;abcd:2300::/24&#34;</span><span class="op" id="8251325">,</span>&nbsp;<span class="ident" id="8251327">ParseIP</span><span class="op" id="8251334">(</span><span class="string" id="8251335">&#34;abcd:2300::&#34;</span><span class="op" id="8251348">)</span><span class="op" id="8251349">,</span>&nbsp;<span class="op" id="8251351">&amp;</span><span class="ident" id="8251352">IPNet</span><span class="op" id="8251357">{</span><span class="ident" id="8251358">IP</span><span class="op" id="8251360">:</span>&nbsp;<span class="ident" id="8251362">ParseIP</span><span class="op" id="8251369">(</span><span class="string" id="8251370">&#34;abcd:2300::&#34;</span><span class="op" id="8251383">)</span><span class="op" id="8251384">,</span>&nbsp;<span class="ident" id="8251386">Mask</span><span class="op" id="8251390">:</span>&nbsp;<span class="ident" id="8251392">IPMask</span><span class="op" id="8251398">(</span><span class="ident" id="8251399">ParseIP</span><span class="op" id="8251406">(</span><span class="string" id="8251407">&#34;ffff:ff00::&#34;</span><span class="op" id="8251420">)</span><span class="op" id="8251421">)</span><span class="op" id="8251422">}</span><span class="op" id="8251423">,</span>&nbsp;<span class="ident" id="8251425">nil</span><span class="op" id="8251428">}</span><span class="op" id="8251429">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8251432">{</span><span class="string" id="8251433">&#34;abcd:2345::/24&#34;</span><span class="op" id="8251449">,</span>&nbsp;<span class="ident" id="8251451">ParseIP</span><span class="op" id="8251458">(</span><span class="string" id="8251459">&#34;abcd:2345::&#34;</span><span class="op" id="8251472">)</span><span class="op" id="8251473">,</span>&nbsp;<span class="op" id="8251475">&amp;</span><span class="ident" id="8251476">IPNet</span><span class="op" id="8251481">{</span><span class="ident" id="8251482">IP</span><span class="op" id="8251484">:</span>&nbsp;<span class="ident" id="8251486">ParseIP</span><span class="op" id="8251493">(</span><span class="string" id="8251494">&#34;abcd:2300::&#34;</span><span class="op" id="8251507">)</span><span class="op" id="8251508">,</span>&nbsp;<span class="ident" id="8251510">Mask</span><span class="op" id="8251514">:</span>&nbsp;<span class="ident" id="8251516">IPMask</span><span class="op" id="8251522">(</span><span class="ident" id="8251523">ParseIP</span><span class="op" id="8251530">(</span><span class="string" id="8251531">&#34;ffff:ff00::&#34;</span><span class="op" id="8251544">)</span><span class="op" id="8251545">)</span><span class="op" id="8251546">}</span><span class="op" id="8251547">,</span>&nbsp;<span class="ident" id="8251549">nil</span><span class="op" id="8251552">}</span><span class="op" id="8251553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8251556">{</span><span class="string" id="8251557">&#34;2001:DB8::/48&#34;</span><span class="op" id="8251572">,</span>&nbsp;<span class="ident" id="8251574">ParseIP</span><span class="op" id="8251581">(</span><span class="string" id="8251582">&#34;2001:DB8::&#34;</span><span class="op" id="8251594">)</span><span class="op" id="8251595">,</span>&nbsp;<span class="op" id="8251597">&amp;</span><span class="ident" id="8251598">IPNet</span><span class="op" id="8251603">{</span><span class="ident" id="8251604">IP</span><span class="op" id="8251606">:</span>&nbsp;<span class="ident" id="8251608">ParseIP</span><span class="op" id="8251615">(</span><span class="string" id="8251616">&#34;2001:DB8::&#34;</span><span class="op" id="8251628">)</span><span class="op" id="8251629">,</span>&nbsp;<span class="ident" id="8251631">Mask</span><span class="op" id="8251635">:</span>&nbsp;<span class="ident" id="8251637">IPMask</span><span class="op" id="8251643">(</span><span class="ident" id="8251644">ParseIP</span><span class="op" id="8251651">(</span><span class="string" id="8251652">&#34;ffff:ffff:ffff::&#34;</span><span class="op" id="8251670">)</span><span class="op" id="8251671">)</span><span class="op" id="8251672">}</span><span class="op" id="8251673">,</span>&nbsp;<span class="ident" id="8251675">nil</span><span class="op" id="8251678">}</span><span class="op" id="8251679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8251682">{</span><span class="string" id="8251683">&#34;2001:DB8::1/48&#34;</span><span class="op" id="8251699">,</span>&nbsp;<span class="ident" id="8251701">ParseIP</span><span class="op" id="8251708">(</span><span class="string" id="8251709">&#34;2001:DB8::1&#34;</span><span class="op" id="8251722">)</span><span class="op" id="8251723">,</span>&nbsp;<span class="op" id="8251725">&amp;</span><span class="ident" id="8251726">IPNet</span><span class="op" id="8251731">{</span><span class="ident" id="8251732">IP</span><span class="op" id="8251734">:</span>&nbsp;<span class="ident" id="8251736">ParseIP</span><span class="op" id="8251743">(</span><span class="string" id="8251744">&#34;2001:DB8::&#34;</span><span class="op" id="8251756">)</span><span class="op" id="8251757">,</span>&nbsp;<span class="ident" id="8251759">Mask</span><span class="op" id="8251763">:</span>&nbsp;<span class="ident" id="8251765">IPMask</span><span class="op" id="8251771">(</span><span class="ident" id="8251772">ParseIP</span><span class="op" id="8251779">(</span><span class="string" id="8251780">&#34;ffff:ffff:ffff::&#34;</span><span class="op" id="8251798">)</span><span class="op" id="8251799">)</span><span class="op" id="8251800">}</span><span class="op" id="8251801">,</span>&nbsp;<span class="ident" id="8251803">nil</span><span class="op" id="8251806">}</span><span class="op" id="8251807">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8251810">{</span><span class="string" id="8251811">&#34;192.168.1.1/255.255.255.0&#34;</span><span class="op" id="8251838">,</span>&nbsp;<span class="ident" id="8251840">nil</span><span class="op" id="8251843">,</span>&nbsp;<span class="ident" id="8251845">nil</span><span class="op" id="8251848">,</span>&nbsp;<span class="op" id="8251850">&amp;</span><span class="ident" id="8251851">ParseError</span><span class="op" id="8251861">{</span><span class="string" id="8251862">&#34;CIDR&nbsp;address&#34;</span><span class="op" id="8251876">,</span>&nbsp;<span class="string" id="8251878">&#34;192.168.1.1/255.255.255.0&#34;</span><span class="op" id="8251905">}</span><span class="op" id="8251906">}</span><span class="op" id="8251907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8251910">{</span><span class="string" id="8251911">&#34;192.168.1.1/35&#34;</span><span class="op" id="8251927">,</span>&nbsp;<span class="ident" id="8251929">nil</span><span class="op" id="8251932">,</span>&nbsp;<span class="ident" id="8251934">nil</span><span class="op" id="8251937">,</span>&nbsp;<span class="op" id="8251939">&amp;</span><span class="ident" id="8251940">ParseError</span><span class="op" id="8251950">{</span><span class="string" id="8251951">&#34;CIDR&nbsp;address&#34;</span><span class="op" id="8251965">,</span>&nbsp;<span class="string" id="8251967">&#34;192.168.1.1/35&#34;</span><span class="op" id="8251983">}</span><span class="op" id="8251984">}</span><span class="op" id="8251985">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8251988">{</span><span class="string" id="8251989">&#34;2001:db8::1/-1&#34;</span><span class="op" id="8252005">,</span>&nbsp;<span class="ident" id="8252007">nil</span><span class="op" id="8252010">,</span>&nbsp;<span class="ident" id="8252012">nil</span><span class="op" id="8252015">,</span>&nbsp;<span class="op" id="8252017">&amp;</span><span class="ident" id="8252018">ParseError</span><span class="op" id="8252028">{</span><span class="string" id="8252029">&#34;CIDR&nbsp;address&#34;</span><span class="op" id="8252043">,</span>&nbsp;<span class="string" id="8252045">&#34;2001:db8::1/-1&#34;</span><span class="op" id="8252061">}</span><span class="op" id="8252062">}</span><span class="op" id="8252063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8252066">{</span><span class="string" id="8252067">&#34;&#34;</span><span class="op" id="8252069">,</span>&nbsp;<span class="ident" id="8252071">nil</span><span class="op" id="8252074">,</span>&nbsp;<span class="ident" id="8252076">nil</span><span class="op" id="8252079">,</span>&nbsp;<span class="op" id="8252081">&amp;</span><span class="ident" id="8252082">ParseError</span><span class="op" id="8252092">{</span><span class="string" id="8252093">&#34;CIDR&nbsp;address&#34;</span><span class="op" id="8252107">,</span>&nbsp;<span class="string" id="8252109">&#34;&#34;</span><span class="op" id="8252111">}</span><span class="op" id="8252112">}</span><span class="op" id="8252113">,</span><br>
<span class="lineno"></span><span class="op" id="8252115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8252118">func</span>&nbsp;<span class="ident" id="8252123">TestParseCIDR</span><span class="op" id="8252136">(</span><span class="ident" id="8252137">t</span>&nbsp;<span class="op" id="8252139">*</span><span class="ident" id="8252140">testing</span><span class="op" id="8252147">.</span><span class="ident" id="8252148">T</span><span class="op" id="8252149">)</span>&nbsp;<span class="op" id="8252151">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8252154">for</span>&nbsp;<span class="ident" id="8252158">_</span><span class="op" id="8252159">,</span>&nbsp;<span class="ident" id="8252161">tt</span>&nbsp;<span class="op" id="8252164">:=</span>&nbsp;<span class="keyword" id="8252167">range</span>&nbsp;<span class="ident" id="8252173">parseCIDRTests</span>&nbsp;<span class="op" id="8252188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8252192">ip</span><span class="op" id="8252194">,</span>&nbsp;<span class="ident" id="8252196">net</span><span class="op" id="8252199">,</span>&nbsp;<span class="ident" id="8252201">err</span>&nbsp;<span class="op" id="8252205">:=</span>&nbsp;<span class="ident" id="8252208">ParseCIDR</span><span class="op" id="8252217">(</span><span class="ident" id="8252218">tt</span><span class="op" id="8252220">.</span><span class="ident" id="8252221">in</span><span class="op" id="8252223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8252227">if</span>&nbsp;<span class="op" id="8252230">!</span><span class="ident" id="8252231">reflect</span><span class="op" id="8252238">.</span><span class="ident" id="8252239">DeepEqual</span><span class="op" id="8252248">(</span><span class="ident" id="8252249">err</span><span class="op" id="8252252">,</span>&nbsp;<span class="ident" id="8252254">tt</span><span class="op" id="8252256">.</span><span class="ident" id="8252257">err</span><span class="op" id="8252260">)</span>&nbsp;<span class="op" id="8252262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8252267">t</span><span class="op" id="8252268">.</span><span class="ident" id="8252269">Errorf</span><span class="op" id="8252275">(</span><span class="string" id="8252276">&#34;ParseCIDR(%q)&nbsp;=&nbsp;%v,&nbsp;%v;&nbsp;want&nbsp;%v,&nbsp;%v&#34;</span><span class="op" id="8252313">,</span>&nbsp;<span class="ident" id="8252315">tt</span><span class="op" id="8252317">.</span><span class="ident" id="8252318">in</span><span class="op" id="8252320">,</span>&nbsp;<span class="ident" id="8252322">ip</span><span class="op" id="8252324">,</span>&nbsp;<span class="ident" id="8252326">net</span><span class="op" id="8252329">,</span>&nbsp;<span class="ident" id="8252331">tt</span><span class="op" id="8252333">.</span><span class="ident" id="8252334">ip</span><span class="op" id="8252336">,</span>&nbsp;<span class="ident" id="8252338">tt</span><span class="op" id="8252340">.</span><span class="ident" id="8252341">net</span><span class="op" id="8252344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8252348">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8252352">if</span>&nbsp;<span class="ident" id="8252355">err</span>&nbsp;<span class="op" id="8252359">==</span>&nbsp;<span class="ident" id="8252362">nil</span>&nbsp;<span class="op" id="8252366">&amp;&amp;</span>&nbsp;<span class="op" id="8252369">(</span><span class="op" id="8252370">!</span><span class="ident" id="8252371">tt</span><span class="op" id="8252373">.</span><span class="ident" id="8252374">ip</span><span class="op" id="8252376">.</span><span class="ident" id="8252377">Equal</span><span class="op" id="8252382">(</span><span class="ident" id="8252383">ip</span><span class="op" id="8252385">)</span>&nbsp;<span class="op" id="8252387">||</span>&nbsp;<span class="op" id="8252390">!</span><span class="ident" id="8252391">tt</span><span class="op" id="8252393">.</span><span class="ident" id="8252394">net</span><span class="op" id="8252397">.</span><span class="ident" id="8252398">IP</span><span class="op" id="8252400">.</span><span class="ident" id="8252401">Equal</span><span class="op" id="8252406">(</span><span class="ident" id="8252407">net</span><span class="op" id="8252410">.</span><span class="ident" id="8252411">IP</span><span class="op" id="8252413">)</span>&nbsp;<span class="op" id="8252415">||</span>&nbsp;<span class="op" id="8252418">!</span><span class="ident" id="8252419">reflect</span><span class="op" id="8252426">.</span><span class="ident" id="8252427">DeepEqual</span><span class="op" id="8252436">(</span><span class="ident" id="8252437">net</span><span class="op" id="8252440">.</span><span class="ident" id="8252441">Mask</span><span class="op" id="8252445">,</span>&nbsp;<span class="ident" id="8252447">tt</span><span class="op" id="8252449">.</span><span class="ident" id="8252450">net</span><span class="op" id="8252453">.</span><span class="ident" id="8252454">Mask</span><span class="op" id="8252458">)</span><span class="op" id="8252459">)</span>&nbsp;<span class="op" id="8252461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8252466">t</span><span class="op" id="8252467">.</span><span class="ident" id="8252468">Errorf</span><span class="op" id="8252474">(</span><span class="string" id="8252475">&#34;ParseCIDR(%q)&nbsp;=&nbsp;%v,&nbsp;{%v,&nbsp;%v};&nbsp;want&nbsp;%v,&nbsp;{%v,&nbsp;%v}&#34;</span><span class="op" id="8252524">,</span>&nbsp;<span class="ident" id="8252526">tt</span><span class="op" id="8252528">.</span><span class="ident" id="8252529">in</span><span class="op" id="8252531">,</span>&nbsp;<span class="ident" id="8252533">ip</span><span class="op" id="8252535">,</span>&nbsp;<span class="ident" id="8252537">net</span><span class="op" id="8252540">.</span><span class="ident" id="8252541">IP</span><span class="op" id="8252543">,</span>&nbsp;<span class="ident" id="8252545">net</span><span class="op" id="8252548">.</span><span class="ident" id="8252549">Mask</span><span class="op" id="8252553">,</span>&nbsp;<span class="ident" id="8252555">tt</span><span class="op" id="8252557">.</span><span class="ident" id="8252558">ip</span><span class="op" id="8252560">,</span>&nbsp;<span class="ident" id="8252562">tt</span><span class="op" id="8252564">.</span><span class="ident" id="8252565">net</span><span class="op" id="8252568">.</span><span class="ident" id="8252569">IP</span><span class="op" id="8252571">,</span>&nbsp;<span class="ident" id="8252573">tt</span><span class="op" id="8252575">.</span><span class="ident" id="8252576">net</span><span class="op" id="8252579">.</span><span class="ident" id="8252580">Mask</span><span class="op" id="8252584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8252588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8252591">}</span><br>
<span class="lineno"></span><span class="op" id="8252593">}</span><br>
<span class="lineno">200</span><br>
<span class="lineno"></span><span class="keyword" id="8252596">var</span>&nbsp;<span class="ident" id="8252600">ipNetContainsTests</span>&nbsp;<span class="op" id="8252619">=</span>&nbsp;<span class="op" id="8252621">[</span><span class="op" id="8252622">]</span><span class="keyword" id="8252623">struct</span>&nbsp;<span class="op" id="8252630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8252633">ip</span>&nbsp;&nbsp;<span class="ident" id="8252637">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8252641">net</span>&nbsp;<span class="op" id="8252645">*</span><span class="ident" id="8252646">IPNet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8252653">ok</span>&nbsp;&nbsp;<span class="builtintype" id="8252657">bool</span><br>
<span class="lineno">205</span><span class="op" id="8252662">}</span><span class="op" id="8252663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8252666">{</span><span class="ident" id="8252667">IPv4</span><span class="op" id="8252671">(</span><span class="num" id="8252672">172</span><span class="op" id="8252675">,</span>&nbsp;<span class="num" id="8252677">16</span><span class="op" id="8252679">,</span>&nbsp;<span class="num" id="8252681">1</span><span class="op" id="8252682">,</span>&nbsp;<span class="num" id="8252684">1</span><span class="op" id="8252685">)</span><span class="op" id="8252686">,</span>&nbsp;<span class="op" id="8252688">&amp;</span><span class="ident" id="8252689">IPNet</span><span class="op" id="8252694">{</span><span class="ident" id="8252695">IP</span><span class="op" id="8252697">:</span>&nbsp;<span class="ident" id="8252699">IPv4</span><span class="op" id="8252703">(</span><span class="num" id="8252704">172</span><span class="op" id="8252707">,</span>&nbsp;<span class="num" id="8252709">16</span><span class="op" id="8252711">,</span>&nbsp;<span class="num" id="8252713">0</span><span class="op" id="8252714">,</span>&nbsp;<span class="num" id="8252716">0</span><span class="op" id="8252717">)</span><span class="op" id="8252718">,</span>&nbsp;<span class="ident" id="8252720">Mask</span><span class="op" id="8252724">:</span>&nbsp;<span class="ident" id="8252726">CIDRMask</span><span class="op" id="8252734">(</span><span class="num" id="8252735">12</span><span class="op" id="8252737">,</span>&nbsp;<span class="num" id="8252739">32</span><span class="op" id="8252741">)</span><span class="op" id="8252742">}</span><span class="op" id="8252743">,</span>&nbsp;<span class="builtintype" id="8252745">true</span><span class="op" id="8252749">}</span><span class="op" id="8252750">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8252753">{</span><span class="ident" id="8252754">IPv4</span><span class="op" id="8252758">(</span><span class="num" id="8252759">172</span><span class="op" id="8252762">,</span>&nbsp;<span class="num" id="8252764">24</span><span class="op" id="8252766">,</span>&nbsp;<span class="num" id="8252768">0</span><span class="op" id="8252769">,</span>&nbsp;<span class="num" id="8252771">1</span><span class="op" id="8252772">)</span><span class="op" id="8252773">,</span>&nbsp;<span class="op" id="8252775">&amp;</span><span class="ident" id="8252776">IPNet</span><span class="op" id="8252781">{</span><span class="ident" id="8252782">IP</span><span class="op" id="8252784">:</span>&nbsp;<span class="ident" id="8252786">IPv4</span><span class="op" id="8252790">(</span><span class="num" id="8252791">172</span><span class="op" id="8252794">,</span>&nbsp;<span class="num" id="8252796">16</span><span class="op" id="8252798">,</span>&nbsp;<span class="num" id="8252800">0</span><span class="op" id="8252801">,</span>&nbsp;<span class="num" id="8252803">0</span><span class="op" id="8252804">)</span><span class="op" id="8252805">,</span>&nbsp;<span class="ident" id="8252807">Mask</span><span class="op" id="8252811">:</span>&nbsp;<span class="ident" id="8252813">CIDRMask</span><span class="op" id="8252821">(</span><span class="num" id="8252822">13</span><span class="op" id="8252824">,</span>&nbsp;<span class="num" id="8252826">32</span><span class="op" id="8252828">)</span><span class="op" id="8252829">}</span><span class="op" id="8252830">,</span>&nbsp;<span class="builtintype" id="8252832">false</span><span class="op" id="8252837">}</span><span class="op" id="8252838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8252841">{</span><span class="ident" id="8252842">IPv4</span><span class="op" id="8252846">(</span><span class="num" id="8252847">192</span><span class="op" id="8252850">,</span>&nbsp;<span class="num" id="8252852">168</span><span class="op" id="8252855">,</span>&nbsp;<span class="num" id="8252857">0</span><span class="op" id="8252858">,</span>&nbsp;<span class="num" id="8252860">3</span><span class="op" id="8252861">)</span><span class="op" id="8252862">,</span>&nbsp;<span class="op" id="8252864">&amp;</span><span class="ident" id="8252865">IPNet</span><span class="op" id="8252870">{</span><span class="ident" id="8252871">IP</span><span class="op" id="8252873">:</span>&nbsp;<span class="ident" id="8252875">IPv4</span><span class="op" id="8252879">(</span><span class="num" id="8252880">192</span><span class="op" id="8252883">,</span>&nbsp;<span class="num" id="8252885">168</span><span class="op" id="8252888">,</span>&nbsp;<span class="num" id="8252890">0</span><span class="op" id="8252891">,</span>&nbsp;<span class="num" id="8252893">0</span><span class="op" id="8252894">)</span><span class="op" id="8252895">,</span>&nbsp;<span class="ident" id="8252897">Mask</span><span class="op" id="8252901">:</span>&nbsp;<span class="ident" id="8252903">IPv4Mask</span><span class="op" id="8252911">(</span><span class="num" id="8252912">0</span><span class="op" id="8252913">,</span>&nbsp;<span class="num" id="8252915">0</span><span class="op" id="8252916">,</span>&nbsp;<span class="num" id="8252918">255</span><span class="op" id="8252921">,</span>&nbsp;<span class="num" id="8252923">252</span><span class="op" id="8252926">)</span><span class="op" id="8252927">}</span><span class="op" id="8252928">,</span>&nbsp;<span class="builtintype" id="8252930">true</span><span class="op" id="8252934">}</span><span class="op" id="8252935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8252938">{</span><span class="ident" id="8252939">IPv4</span><span class="op" id="8252943">(</span><span class="num" id="8252944">192</span><span class="op" id="8252947">,</span>&nbsp;<span class="num" id="8252949">168</span><span class="op" id="8252952">,</span>&nbsp;<span class="num" id="8252954">0</span><span class="op" id="8252955">,</span>&nbsp;<span class="num" id="8252957">4</span><span class="op" id="8252958">)</span><span class="op" id="8252959">,</span>&nbsp;<span class="op" id="8252961">&amp;</span><span class="ident" id="8252962">IPNet</span><span class="op" id="8252967">{</span><span class="ident" id="8252968">IP</span><span class="op" id="8252970">:</span>&nbsp;<span class="ident" id="8252972">IPv4</span><span class="op" id="8252976">(</span><span class="num" id="8252977">192</span><span class="op" id="8252980">,</span>&nbsp;<span class="num" id="8252982">168</span><span class="op" id="8252985">,</span>&nbsp;<span class="num" id="8252987">0</span><span class="op" id="8252988">,</span>&nbsp;<span class="num" id="8252990">0</span><span class="op" id="8252991">)</span><span class="op" id="8252992">,</span>&nbsp;<span class="ident" id="8252994">Mask</span><span class="op" id="8252998">:</span>&nbsp;<span class="ident" id="8253000">IPv4Mask</span><span class="op" id="8253008">(</span><span class="num" id="8253009">0</span><span class="op" id="8253010">,</span>&nbsp;<span class="num" id="8253012">255</span><span class="op" id="8253015">,</span>&nbsp;<span class="num" id="8253017">0</span><span class="op" id="8253018">,</span>&nbsp;<span class="num" id="8253020">252</span><span class="op" id="8253023">)</span><span class="op" id="8253024">}</span><span class="op" id="8253025">,</span>&nbsp;<span class="builtintype" id="8253027">false</span><span class="op" id="8253032">}</span><span class="op" id="8253033">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8253036">{</span><span class="ident" id="8253037">ParseIP</span><span class="op" id="8253044">(</span><span class="string" id="8253045">&#34;2001:db8:1:2::1&#34;</span><span class="op" id="8253062">)</span><span class="op" id="8253063">,</span>&nbsp;<span class="op" id="8253065">&amp;</span><span class="ident" id="8253066">IPNet</span><span class="op" id="8253071">{</span><span class="ident" id="8253072">IP</span><span class="op" id="8253074">:</span>&nbsp;<span class="ident" id="8253076">ParseIP</span><span class="op" id="8253083">(</span><span class="string" id="8253084">&#34;2001:db8:1::&#34;</span><span class="op" id="8253098">)</span><span class="op" id="8253099">,</span>&nbsp;<span class="ident" id="8253101">Mask</span><span class="op" id="8253105">:</span>&nbsp;<span class="ident" id="8253107">CIDRMask</span><span class="op" id="8253115">(</span><span class="num" id="8253116">47</span><span class="op" id="8253118">,</span>&nbsp;<span class="num" id="8253120">128</span><span class="op" id="8253123">)</span><span class="op" id="8253124">}</span><span class="op" id="8253125">,</span>&nbsp;<span class="builtintype" id="8253127">true</span><span class="op" id="8253131">}</span><span class="op" id="8253132">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8253135">{</span><span class="ident" id="8253136">ParseIP</span><span class="op" id="8253143">(</span><span class="string" id="8253144">&#34;2001:db8:1:2::1&#34;</span><span class="op" id="8253161">)</span><span class="op" id="8253162">,</span>&nbsp;<span class="op" id="8253164">&amp;</span><span class="ident" id="8253165">IPNet</span><span class="op" id="8253170">{</span><span class="ident" id="8253171">IP</span><span class="op" id="8253173">:</span>&nbsp;<span class="ident" id="8253175">ParseIP</span><span class="op" id="8253182">(</span><span class="string" id="8253183">&#34;2001:db8:2::&#34;</span><span class="op" id="8253197">)</span><span class="op" id="8253198">,</span>&nbsp;<span class="ident" id="8253200">Mask</span><span class="op" id="8253204">:</span>&nbsp;<span class="ident" id="8253206">CIDRMask</span><span class="op" id="8253214">(</span><span class="num" id="8253215">47</span><span class="op" id="8253217">,</span>&nbsp;<span class="num" id="8253219">128</span><span class="op" id="8253222">)</span><span class="op" id="8253223">}</span><span class="op" id="8253224">,</span>&nbsp;<span class="builtintype" id="8253226">false</span><span class="op" id="8253231">}</span><span class="op" id="8253232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8253235">{</span><span class="ident" id="8253236">ParseIP</span><span class="op" id="8253243">(</span><span class="string" id="8253244">&#34;2001:db8:1:2::1&#34;</span><span class="op" id="8253261">)</span><span class="op" id="8253262">,</span>&nbsp;<span class="op" id="8253264">&amp;</span><span class="ident" id="8253265">IPNet</span><span class="op" id="8253270">{</span><span class="ident" id="8253271">IP</span><span class="op" id="8253273">:</span>&nbsp;<span class="ident" id="8253275">ParseIP</span><span class="op" id="8253282">(</span><span class="string" id="8253283">&#34;2001:db8:1::&#34;</span><span class="op" id="8253297">)</span><span class="op" id="8253298">,</span>&nbsp;<span class="ident" id="8253300">Mask</span><span class="op" id="8253304">:</span>&nbsp;<span class="ident" id="8253306">IPMask</span><span class="op" id="8253312">(</span><span class="ident" id="8253313">ParseIP</span><span class="op" id="8253320">(</span><span class="string" id="8253321">&#34;ffff:0:ffff::&#34;</span><span class="op" id="8253336">)</span><span class="op" id="8253337">)</span><span class="op" id="8253338">}</span><span class="op" id="8253339">,</span>&nbsp;<span class="builtintype" id="8253341">true</span><span class="op" id="8253345">}</span><span class="op" id="8253346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8253349">{</span><span class="ident" id="8253350">ParseIP</span><span class="op" id="8253357">(</span><span class="string" id="8253358">&#34;2001:db8:1:2::1&#34;</span><span class="op" id="8253375">)</span><span class="op" id="8253376">,</span>&nbsp;<span class="op" id="8253378">&amp;</span><span class="ident" id="8253379">IPNet</span><span class="op" id="8253384">{</span><span class="ident" id="8253385">IP</span><span class="op" id="8253387">:</span>&nbsp;<span class="ident" id="8253389">ParseIP</span><span class="op" id="8253396">(</span><span class="string" id="8253397">&#34;2001:db8:1::&#34;</span><span class="op" id="8253411">)</span><span class="op" id="8253412">,</span>&nbsp;<span class="ident" id="8253414">Mask</span><span class="op" id="8253418">:</span>&nbsp;<span class="ident" id="8253420">IPMask</span><span class="op" id="8253426">(</span><span class="ident" id="8253427">ParseIP</span><span class="op" id="8253434">(</span><span class="string" id="8253435">&#34;0:0:0:ffff::&#34;</span><span class="op" id="8253449">)</span><span class="op" id="8253450">)</span><span class="op" id="8253451">}</span><span class="op" id="8253452">,</span>&nbsp;<span class="builtintype" id="8253454">false</span><span class="op" id="8253459">}</span><span class="op" id="8253460">,</span><br>
<span class="lineno"></span><span class="op" id="8253462">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="8253465">func</span>&nbsp;<span class="ident" id="8253470">TestIPNetContains</span><span class="op" id="8253487">(</span><span class="ident" id="8253488">t</span>&nbsp;<span class="op" id="8253490">*</span><span class="ident" id="8253491">testing</span><span class="op" id="8253498">.</span><span class="ident" id="8253499">T</span><span class="op" id="8253500">)</span>&nbsp;<span class="op" id="8253502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8253505">for</span>&nbsp;<span class="ident" id="8253509">_</span><span class="op" id="8253510">,</span>&nbsp;<span class="ident" id="8253512">tt</span>&nbsp;<span class="op" id="8253515">:=</span>&nbsp;<span class="keyword" id="8253518">range</span>&nbsp;<span class="ident" id="8253524">ipNetContainsTests</span>&nbsp;<span class="op" id="8253543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8253547">if</span>&nbsp;<span class="ident" id="8253550">ok</span>&nbsp;<span class="op" id="8253553">:=</span>&nbsp;<span class="ident" id="8253556">tt</span><span class="op" id="8253558">.</span><span class="ident" id="8253559">net</span><span class="op" id="8253562">.</span><span class="ident" id="8253563">Contains</span><span class="op" id="8253571">(</span><span class="ident" id="8253572">tt</span><span class="op" id="8253574">.</span><span class="ident" id="8253575">ip</span><span class="op" id="8253577">)</span><span class="op" id="8253578">;</span>&nbsp;<span class="ident" id="8253580">ok</span>&nbsp;<span class="op" id="8253583">!=</span>&nbsp;<span class="ident" id="8253586">tt</span><span class="op" id="8253588">.</span><span class="ident" id="8253589">ok</span>&nbsp;<span class="op" id="8253592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8253597">t</span><span class="op" id="8253598">.</span><span class="ident" id="8253599">Errorf</span><span class="op" id="8253605">(</span><span class="string" id="8253606">&#34;IPNet(%v).Contains(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8253644">,</span>&nbsp;<span class="ident" id="8253646">tt</span><span class="op" id="8253648">.</span><span class="ident" id="8253649">net</span><span class="op" id="8253652">,</span>&nbsp;<span class="ident" id="8253654">tt</span><span class="op" id="8253656">.</span><span class="ident" id="8253657">ip</span><span class="op" id="8253659">,</span>&nbsp;<span class="ident" id="8253661">ok</span><span class="op" id="8253663">,</span>&nbsp;<span class="ident" id="8253665">tt</span><span class="op" id="8253667">.</span><span class="ident" id="8253668">ok</span><span class="op" id="8253670">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8253674">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8253677">}</span><br>
<span class="lineno"></span><span class="op" id="8253679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8253682">var</span>&nbsp;<span class="ident" id="8253686">ipNetStringTests</span>&nbsp;<span class="op" id="8253703">=</span>&nbsp;<span class="op" id="8253705">[</span><span class="op" id="8253706">]</span><span class="keyword" id="8253707">struct</span>&nbsp;<span class="op" id="8253714">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8253717">in</span>&nbsp;&nbsp;<span class="op" id="8253721">*</span><span class="ident" id="8253722">IPNet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8253729">out</span>&nbsp;<span class="builtintype" id="8253733">string</span><br>
<span class="lineno"></span><span class="op" id="8253740">}</span><span class="op" id="8253741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8253744">{</span><span class="op" id="8253745">&amp;</span><span class="ident" id="8253746">IPNet</span><span class="op" id="8253751">{</span><span class="ident" id="8253752">IP</span><span class="op" id="8253754">:</span>&nbsp;<span class="ident" id="8253756">IPv4</span><span class="op" id="8253760">(</span><span class="num" id="8253761">192</span><span class="op" id="8253764">,</span>&nbsp;<span class="num" id="8253766">168</span><span class="op" id="8253769">,</span>&nbsp;<span class="num" id="8253771">1</span><span class="op" id="8253772">,</span>&nbsp;<span class="num" id="8253774">0</span><span class="op" id="8253775">)</span><span class="op" id="8253776">,</span>&nbsp;<span class="ident" id="8253778">Mask</span><span class="op" id="8253782">:</span>&nbsp;<span class="ident" id="8253784">CIDRMask</span><span class="op" id="8253792">(</span><span class="num" id="8253793">26</span><span class="op" id="8253795">,</span>&nbsp;<span class="num" id="8253797">32</span><span class="op" id="8253799">)</span><span class="op" id="8253800">}</span><span class="op" id="8253801">,</span>&nbsp;<span class="string" id="8253803">&#34;192.168.1.0/26&#34;</span><span class="op" id="8253819">}</span><span class="op" id="8253820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8253823">{</span><span class="op" id="8253824">&amp;</span><span class="ident" id="8253825">IPNet</span><span class="op" id="8253830">{</span><span class="ident" id="8253831">IP</span><span class="op" id="8253833">:</span>&nbsp;<span class="ident" id="8253835">IPv4</span><span class="op" id="8253839">(</span><span class="num" id="8253840">192</span><span class="op" id="8253843">,</span>&nbsp;<span class="num" id="8253845">168</span><span class="op" id="8253848">,</span>&nbsp;<span class="num" id="8253850">1</span><span class="op" id="8253851">,</span>&nbsp;<span class="num" id="8253853">0</span><span class="op" id="8253854">)</span><span class="op" id="8253855">,</span>&nbsp;<span class="ident" id="8253857">Mask</span><span class="op" id="8253861">:</span>&nbsp;<span class="ident" id="8253863">IPv4Mask</span><span class="op" id="8253871">(</span><span class="num" id="8253872">255</span><span class="op" id="8253875">,</span>&nbsp;<span class="num" id="8253877">0</span><span class="op" id="8253878">,</span>&nbsp;<span class="num" id="8253880">255</span><span class="op" id="8253883">,</span>&nbsp;<span class="num" id="8253885">0</span><span class="op" id="8253886">)</span><span class="op" id="8253887">}</span><span class="op" id="8253888">,</span>&nbsp;<span class="string" id="8253890">&#34;192.168.1.0/ff00ff00&#34;</span><span class="op" id="8253912">}</span><span class="op" id="8253913">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8253916">{</span><span class="op" id="8253917">&amp;</span><span class="ident" id="8253918">IPNet</span><span class="op" id="8253923">{</span><span class="ident" id="8253924">IP</span><span class="op" id="8253926">:</span>&nbsp;<span class="ident" id="8253928">ParseIP</span><span class="op" id="8253935">(</span><span class="string" id="8253936">&#34;2001:db8::&#34;</span><span class="op" id="8253948">)</span><span class="op" id="8253949">,</span>&nbsp;<span class="ident" id="8253951">Mask</span><span class="op" id="8253955">:</span>&nbsp;<span class="ident" id="8253957">CIDRMask</span><span class="op" id="8253965">(</span><span class="num" id="8253966">55</span><span class="op" id="8253968">,</span>&nbsp;<span class="num" id="8253970">128</span><span class="op" id="8253973">)</span><span class="op" id="8253974">}</span><span class="op" id="8253975">,</span>&nbsp;<span class="string" id="8253977">&#34;2001:db8::/55&#34;</span><span class="op" id="8253992">}</span><span class="op" id="8253993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8253996">{</span><span class="op" id="8253997">&amp;</span><span class="ident" id="8253998">IPNet</span><span class="op" id="8254003">{</span><span class="ident" id="8254004">IP</span><span class="op" id="8254006">:</span>&nbsp;<span class="ident" id="8254008">ParseIP</span><span class="op" id="8254015">(</span><span class="string" id="8254016">&#34;2001:db8::&#34;</span><span class="op" id="8254028">)</span><span class="op" id="8254029">,</span>&nbsp;<span class="ident" id="8254031">Mask</span><span class="op" id="8254035">:</span>&nbsp;<span class="ident" id="8254037">IPMask</span><span class="op" id="8254043">(</span><span class="ident" id="8254044">ParseIP</span><span class="op" id="8254051">(</span><span class="string" id="8254052">&#34;8000:f123:0:cafe::&#34;</span><span class="op" id="8254072">)</span><span class="op" id="8254073">)</span><span class="op" id="8254074">}</span><span class="op" id="8254075">,</span>&nbsp;<span class="string" id="8254077">&#34;2001:db8::/8000f1230000cafe0000000000000000&#34;</span><span class="op" id="8254122">}</span><span class="op" id="8254123">,</span><br>
<span class="lineno"></span><span class="op" id="8254125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8254128">func</span>&nbsp;<span class="ident" id="8254133">TestIPNetString</span><span class="op" id="8254148">(</span><span class="ident" id="8254149">t</span>&nbsp;<span class="op" id="8254151">*</span><span class="ident" id="8254152">testing</span><span class="op" id="8254159">.</span><span class="ident" id="8254160">T</span><span class="op" id="8254161">)</span>&nbsp;<span class="op" id="8254163">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8254166">for</span>&nbsp;<span class="ident" id="8254170">_</span><span class="op" id="8254171">,</span>&nbsp;<span class="ident" id="8254173">tt</span>&nbsp;<span class="op" id="8254176">:=</span>&nbsp;<span class="keyword" id="8254179">range</span>&nbsp;<span class="ident" id="8254185">ipNetStringTests</span>&nbsp;<span class="op" id="8254202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8254206">if</span>&nbsp;<span class="ident" id="8254209">out</span>&nbsp;<span class="op" id="8254213">:=</span>&nbsp;<span class="ident" id="8254216">tt</span><span class="op" id="8254218">.</span><span class="ident" id="8254219">in</span><span class="op" id="8254221">.</span><span class="ident" id="8254222">String</span><span class="op" id="8254228">(</span><span class="op" id="8254229">)</span><span class="op" id="8254230">;</span>&nbsp;<span class="ident" id="8254232">out</span>&nbsp;<span class="op" id="8254236">!=</span>&nbsp;<span class="ident" id="8254239">tt</span><span class="op" id="8254241">.</span><span class="ident" id="8254242">out</span>&nbsp;<span class="op" id="8254246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8254251">t</span><span class="op" id="8254252">.</span><span class="ident" id="8254253">Errorf</span><span class="op" id="8254259">(</span><span class="string" id="8254260">&#34;IPNet.String(%v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8254292">,</span>&nbsp;<span class="ident" id="8254294">tt</span><span class="op" id="8254296">.</span><span class="ident" id="8254297">in</span><span class="op" id="8254299">,</span>&nbsp;<span class="ident" id="8254301">out</span><span class="op" id="8254304">,</span>&nbsp;<span class="ident" id="8254306">tt</span><span class="op" id="8254308">.</span><span class="ident" id="8254309">out</span><span class="op" id="8254312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254319">}</span><br>
<span class="lineno">240</span><span class="op" id="8254321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8254324">var</span>&nbsp;<span class="ident" id="8254328">cidrMaskTests</span>&nbsp;<span class="op" id="8254342">=</span>&nbsp;<span class="op" id="8254344">[</span><span class="op" id="8254345">]</span><span class="keyword" id="8254346">struct</span>&nbsp;<span class="op" id="8254353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8254356">ones</span>&nbsp;<span class="builtintype" id="8254361">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8254366">bits</span>&nbsp;<span class="builtintype" id="8254371">int</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8254376">out</span>&nbsp;&nbsp;<span class="ident" id="8254381">IPMask</span><br>
<span class="lineno"></span><span class="op" id="8254388">}</span><span class="op" id="8254389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254392">{</span><span class="num" id="8254393">0</span><span class="op" id="8254394">,</span>&nbsp;<span class="num" id="8254396">32</span><span class="op" id="8254398">,</span>&nbsp;<span class="ident" id="8254400">IPv4Mask</span><span class="op" id="8254408">(</span><span class="num" id="8254409">0</span><span class="op" id="8254410">,</span>&nbsp;<span class="num" id="8254412">0</span><span class="op" id="8254413">,</span>&nbsp;<span class="num" id="8254415">0</span><span class="op" id="8254416">,</span>&nbsp;<span class="num" id="8254418">0</span><span class="op" id="8254419">)</span><span class="op" id="8254420">}</span><span class="op" id="8254421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254424">{</span><span class="num" id="8254425">12</span><span class="op" id="8254427">,</span>&nbsp;<span class="num" id="8254429">32</span><span class="op" id="8254431">,</span>&nbsp;<span class="ident" id="8254433">IPv4Mask</span><span class="op" id="8254441">(</span><span class="num" id="8254442">255</span><span class="op" id="8254445">,</span>&nbsp;<span class="num" id="8254447">240</span><span class="op" id="8254450">,</span>&nbsp;<span class="num" id="8254452">0</span><span class="op" id="8254453">,</span>&nbsp;<span class="num" id="8254455">0</span><span class="op" id="8254456">)</span><span class="op" id="8254457">}</span><span class="op" id="8254458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254461">{</span><span class="num" id="8254462">24</span><span class="op" id="8254464">,</span>&nbsp;<span class="num" id="8254466">32</span><span class="op" id="8254468">,</span>&nbsp;<span class="ident" id="8254470">IPv4Mask</span><span class="op" id="8254478">(</span><span class="num" id="8254479">255</span><span class="op" id="8254482">,</span>&nbsp;<span class="num" id="8254484">255</span><span class="op" id="8254487">,</span>&nbsp;<span class="num" id="8254489">255</span><span class="op" id="8254492">,</span>&nbsp;<span class="num" id="8254494">0</span><span class="op" id="8254495">)</span><span class="op" id="8254496">}</span><span class="op" id="8254497">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254500">{</span><span class="num" id="8254501">32</span><span class="op" id="8254503">,</span>&nbsp;<span class="num" id="8254505">32</span><span class="op" id="8254507">,</span>&nbsp;<span class="ident" id="8254509">IPv4Mask</span><span class="op" id="8254517">(</span><span class="num" id="8254518">255</span><span class="op" id="8254521">,</span>&nbsp;<span class="num" id="8254523">255</span><span class="op" id="8254526">,</span>&nbsp;<span class="num" id="8254528">255</span><span class="op" id="8254531">,</span>&nbsp;<span class="num" id="8254533">255</span><span class="op" id="8254536">)</span><span class="op" id="8254537">}</span><span class="op" id="8254538">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254541">{</span><span class="num" id="8254542">0</span><span class="op" id="8254543">,</span>&nbsp;<span class="num" id="8254545">128</span><span class="op" id="8254548">,</span>&nbsp;<span class="ident" id="8254550">IPMask</span><span class="op" id="8254556">{</span><span class="num" id="8254557">0</span><span class="op" id="8254558">,</span>&nbsp;<span class="num" id="8254560">0</span><span class="op" id="8254561">,</span>&nbsp;<span class="num" id="8254563">0</span><span class="op" id="8254564">,</span>&nbsp;<span class="num" id="8254566">0</span><span class="op" id="8254567">,</span>&nbsp;<span class="num" id="8254569">0</span><span class="op" id="8254570">,</span>&nbsp;<span class="num" id="8254572">0</span><span class="op" id="8254573">,</span>&nbsp;<span class="num" id="8254575">0</span><span class="op" id="8254576">,</span>&nbsp;<span class="num" id="8254578">0</span><span class="op" id="8254579">,</span>&nbsp;<span class="num" id="8254581">0</span><span class="op" id="8254582">,</span>&nbsp;<span class="num" id="8254584">0</span><span class="op" id="8254585">,</span>&nbsp;<span class="num" id="8254587">0</span><span class="op" id="8254588">,</span>&nbsp;<span class="num" id="8254590">0</span><span class="op" id="8254591">,</span>&nbsp;<span class="num" id="8254593">0</span><span class="op" id="8254594">,</span>&nbsp;<span class="num" id="8254596">0</span><span class="op" id="8254597">,</span>&nbsp;<span class="num" id="8254599">0</span><span class="op" id="8254600">,</span>&nbsp;<span class="num" id="8254602">0</span><span class="op" id="8254603">}</span><span class="op" id="8254604">}</span><span class="op" id="8254605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254608">{</span><span class="num" id="8254609">4</span><span class="op" id="8254610">,</span>&nbsp;<span class="num" id="8254612">128</span><span class="op" id="8254615">,</span>&nbsp;<span class="ident" id="8254617">IPMask</span><span class="op" id="8254623">{</span><span class="num" id="8254624">0xf0</span><span class="op" id="8254628">,</span>&nbsp;<span class="num" id="8254630">0</span><span class="op" id="8254631">,</span>&nbsp;<span class="num" id="8254633">0</span><span class="op" id="8254634">,</span>&nbsp;<span class="num" id="8254636">0</span><span class="op" id="8254637">,</span>&nbsp;<span class="num" id="8254639">0</span><span class="op" id="8254640">,</span>&nbsp;<span class="num" id="8254642">0</span><span class="op" id="8254643">,</span>&nbsp;<span class="num" id="8254645">0</span><span class="op" id="8254646">,</span>&nbsp;<span class="num" id="8254648">0</span><span class="op" id="8254649">,</span>&nbsp;<span class="num" id="8254651">0</span><span class="op" id="8254652">,</span>&nbsp;<span class="num" id="8254654">0</span><span class="op" id="8254655">,</span>&nbsp;<span class="num" id="8254657">0</span><span class="op" id="8254658">,</span>&nbsp;<span class="num" id="8254660">0</span><span class="op" id="8254661">,</span>&nbsp;<span class="num" id="8254663">0</span><span class="op" id="8254664">,</span>&nbsp;<span class="num" id="8254666">0</span><span class="op" id="8254667">,</span>&nbsp;<span class="num" id="8254669">0</span><span class="op" id="8254670">,</span>&nbsp;<span class="num" id="8254672">0</span><span class="op" id="8254673">}</span><span class="op" id="8254674">}</span><span class="op" id="8254675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254678">{</span><span class="num" id="8254679">48</span><span class="op" id="8254681">,</span>&nbsp;<span class="num" id="8254683">128</span><span class="op" id="8254686">,</span>&nbsp;<span class="ident" id="8254688">IPMask</span><span class="op" id="8254694">{</span><span class="num" id="8254695">0xff</span><span class="op" id="8254699">,</span>&nbsp;<span class="num" id="8254701">0xff</span><span class="op" id="8254705">,</span>&nbsp;<span class="num" id="8254707">0xff</span><span class="op" id="8254711">,</span>&nbsp;<span class="num" id="8254713">0xff</span><span class="op" id="8254717">,</span>&nbsp;<span class="num" id="8254719">0xff</span><span class="op" id="8254723">,</span>&nbsp;<span class="num" id="8254725">0xff</span><span class="op" id="8254729">,</span>&nbsp;<span class="num" id="8254731">0</span><span class="op" id="8254732">,</span>&nbsp;<span class="num" id="8254734">0</span><span class="op" id="8254735">,</span>&nbsp;<span class="num" id="8254737">0</span><span class="op" id="8254738">,</span>&nbsp;<span class="num" id="8254740">0</span><span class="op" id="8254741">,</span>&nbsp;<span class="num" id="8254743">0</span><span class="op" id="8254744">,</span>&nbsp;<span class="num" id="8254746">0</span><span class="op" id="8254747">,</span>&nbsp;<span class="num" id="8254749">0</span><span class="op" id="8254750">,</span>&nbsp;<span class="num" id="8254752">0</span><span class="op" id="8254753">,</span>&nbsp;<span class="num" id="8254755">0</span><span class="op" id="8254756">,</span>&nbsp;<span class="num" id="8254758">0</span><span class="op" id="8254759">}</span><span class="op" id="8254760">}</span><span class="op" id="8254761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254764">{</span><span class="num" id="8254765">128</span><span class="op" id="8254768">,</span>&nbsp;<span class="num" id="8254770">128</span><span class="op" id="8254773">,</span>&nbsp;<span class="ident" id="8254775">IPMask</span><span class="op" id="8254781">{</span><span class="num" id="8254782">0xff</span><span class="op" id="8254786">,</span>&nbsp;<span class="num" id="8254788">0xff</span><span class="op" id="8254792">,</span>&nbsp;<span class="num" id="8254794">0xff</span><span class="op" id="8254798">,</span>&nbsp;<span class="num" id="8254800">0xff</span><span class="op" id="8254804">,</span>&nbsp;<span class="num" id="8254806">0xff</span><span class="op" id="8254810">,</span>&nbsp;<span class="num" id="8254812">0xff</span><span class="op" id="8254816">,</span>&nbsp;<span class="num" id="8254818">0xff</span><span class="op" id="8254822">,</span>&nbsp;<span class="num" id="8254824">0xff</span><span class="op" id="8254828">,</span>&nbsp;<span class="num" id="8254830">0xff</span><span class="op" id="8254834">,</span>&nbsp;<span class="num" id="8254836">0xff</span><span class="op" id="8254840">,</span>&nbsp;<span class="num" id="8254842">0xff</span><span class="op" id="8254846">,</span>&nbsp;<span class="num" id="8254848">0xff</span><span class="op" id="8254852">,</span>&nbsp;<span class="num" id="8254854">0xff</span><span class="op" id="8254858">,</span>&nbsp;<span class="num" id="8254860">0xff</span><span class="op" id="8254864">,</span>&nbsp;<span class="num" id="8254866">0xff</span><span class="op" id="8254870">,</span>&nbsp;<span class="num" id="8254872">0xff</span><span class="op" id="8254876">}</span><span class="op" id="8254877">}</span><span class="op" id="8254878">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254881">{</span><span class="num" id="8254882">33</span><span class="op" id="8254884">,</span>&nbsp;<span class="num" id="8254886">32</span><span class="op" id="8254888">,</span>&nbsp;<span class="ident" id="8254890">nil</span><span class="op" id="8254893">}</span><span class="op" id="8254894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254897">{</span><span class="num" id="8254898">32</span><span class="op" id="8254900">,</span>&nbsp;<span class="num" id="8254902">33</span><span class="op" id="8254904">,</span>&nbsp;<span class="ident" id="8254906">nil</span><span class="op" id="8254909">}</span><span class="op" id="8254910">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254913">{</span><span class="op" id="8254914">-</span><span class="num" id="8254915">1</span><span class="op" id="8254916">,</span>&nbsp;<span class="num" id="8254918">128</span><span class="op" id="8254921">,</span>&nbsp;<span class="ident" id="8254923">nil</span><span class="op" id="8254926">}</span><span class="op" id="8254927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8254930">{</span><span class="num" id="8254931">128</span><span class="op" id="8254934">,</span>&nbsp;<span class="op" id="8254936">-</span><span class="num" id="8254937">1</span><span class="op" id="8254938">,</span>&nbsp;<span class="ident" id="8254940">nil</span><span class="op" id="8254943">}</span><span class="op" id="8254944">,</span><br>
<span class="lineno"></span><span class="op" id="8254946">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="8254949">func</span>&nbsp;<span class="ident" id="8254954">TestCIDRMask</span><span class="op" id="8254966">(</span><span class="ident" id="8254967">t</span>&nbsp;<span class="op" id="8254969">*</span><span class="ident" id="8254970">testing</span><span class="op" id="8254977">.</span><span class="ident" id="8254978">T</span><span class="op" id="8254979">)</span>&nbsp;<span class="op" id="8254981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8254984">for</span>&nbsp;<span class="ident" id="8254988">_</span><span class="op" id="8254989">,</span>&nbsp;<span class="ident" id="8254991">tt</span>&nbsp;<span class="op" id="8254994">:=</span>&nbsp;<span class="keyword" id="8254997">range</span>&nbsp;<span class="ident" id="8255003">cidrMaskTests</span>&nbsp;<span class="op" id="8255017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8255021">if</span>&nbsp;<span class="ident" id="8255024">out</span>&nbsp;<span class="op" id="8255028">:=</span>&nbsp;<span class="ident" id="8255031">CIDRMask</span><span class="op" id="8255039">(</span><span class="ident" id="8255040">tt</span><span class="op" id="8255042">.</span><span class="ident" id="8255043">ones</span><span class="op" id="8255047">,</span>&nbsp;<span class="ident" id="8255049">tt</span><span class="op" id="8255051">.</span><span class="ident" id="8255052">bits</span><span class="op" id="8255056">)</span><span class="op" id="8255057">;</span>&nbsp;<span class="op" id="8255059">!</span><span class="ident" id="8255060">reflect</span><span class="op" id="8255067">.</span><span class="ident" id="8255068">DeepEqual</span><span class="op" id="8255077">(</span><span class="ident" id="8255078">out</span><span class="op" id="8255081">,</span>&nbsp;<span class="ident" id="8255083">tt</span><span class="op" id="8255085">.</span><span class="ident" id="8255086">out</span><span class="op" id="8255089">)</span>&nbsp;<span class="op" id="8255091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255096">t</span><span class="op" id="8255097">.</span><span class="ident" id="8255098">Errorf</span><span class="op" id="8255104">(</span><span class="string" id="8255105">&#34;CIDRMask(%v,&nbsp;%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8255137">,</span>&nbsp;<span class="ident" id="8255139">tt</span><span class="op" id="8255141">.</span><span class="ident" id="8255142">ones</span><span class="op" id="8255146">,</span>&nbsp;<span class="ident" id="8255148">tt</span><span class="op" id="8255150">.</span><span class="ident" id="8255151">bits</span><span class="op" id="8255155">,</span>&nbsp;<span class="ident" id="8255157">out</span><span class="op" id="8255160">,</span>&nbsp;<span class="ident" id="8255162">tt</span><span class="op" id="8255164">.</span><span class="ident" id="8255165">out</span><span class="op" id="8255168">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255175">}</span><br>
<span class="lineno"></span><span class="op" id="8255177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8255180">var</span>&nbsp;<span class="op" id="8255184">(</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255187">v4addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8255202">=</span>&nbsp;<span class="ident" id="8255204">IP</span><span class="op" id="8255206">{</span><span class="num" id="8255207">192</span><span class="op" id="8255210">,</span>&nbsp;<span class="num" id="8255212">168</span><span class="op" id="8255215">,</span>&nbsp;<span class="num" id="8255217">0</span><span class="op" id="8255218">,</span>&nbsp;<span class="num" id="8255220">1</span><span class="op" id="8255221">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255224">v4mappedv6addr</span>&nbsp;<span class="op" id="8255239">=</span>&nbsp;<span class="ident" id="8255241">IP</span><span class="op" id="8255243">{</span><span class="num" id="8255244">0</span><span class="op" id="8255245">,</span>&nbsp;<span class="num" id="8255247">0</span><span class="op" id="8255248">,</span>&nbsp;<span class="num" id="8255250">0</span><span class="op" id="8255251">,</span>&nbsp;<span class="num" id="8255253">0</span><span class="op" id="8255254">,</span>&nbsp;<span class="num" id="8255256">0</span><span class="op" id="8255257">,</span>&nbsp;<span class="num" id="8255259">0</span><span class="op" id="8255260">,</span>&nbsp;<span class="num" id="8255262">0</span><span class="op" id="8255263">,</span>&nbsp;<span class="num" id="8255265">0</span><span class="op" id="8255266">,</span>&nbsp;<span class="num" id="8255268">0</span><span class="op" id="8255269">,</span>&nbsp;<span class="num" id="8255271">0</span><span class="op" id="8255272">,</span>&nbsp;<span class="num" id="8255274">0xff</span><span class="op" id="8255278">,</span>&nbsp;<span class="num" id="8255280">0xff</span><span class="op" id="8255284">,</span>&nbsp;<span class="num" id="8255286">192</span><span class="op" id="8255289">,</span>&nbsp;<span class="num" id="8255291">168</span><span class="op" id="8255294">,</span>&nbsp;<span class="num" id="8255296">0</span><span class="op" id="8255297">,</span>&nbsp;<span class="num" id="8255299">1</span><span class="op" id="8255300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255303">v6addr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8255318">=</span>&nbsp;<span class="ident" id="8255320">IP</span><span class="op" id="8255322">{</span><span class="num" id="8255323">0x20</span><span class="op" id="8255327">,</span>&nbsp;<span class="num" id="8255329">0x1</span><span class="op" id="8255332">,</span>&nbsp;<span class="num" id="8255334">0xd</span><span class="op" id="8255337">,</span>&nbsp;<span class="num" id="8255339">0xb8</span><span class="op" id="8255343">,</span>&nbsp;<span class="num" id="8255345">0</span><span class="op" id="8255346">,</span>&nbsp;<span class="num" id="8255348">0</span><span class="op" id="8255349">,</span>&nbsp;<span class="num" id="8255351">0</span><span class="op" id="8255352">,</span>&nbsp;<span class="num" id="8255354">0</span><span class="op" id="8255355">,</span>&nbsp;<span class="num" id="8255357">0</span><span class="op" id="8255358">,</span>&nbsp;<span class="num" id="8255360">0</span><span class="op" id="8255361">,</span>&nbsp;<span class="num" id="8255363">0x1</span><span class="op" id="8255366">,</span>&nbsp;<span class="num" id="8255368">0x23</span><span class="op" id="8255372">,</span>&nbsp;<span class="num" id="8255374">0</span><span class="op" id="8255375">,</span>&nbsp;<span class="num" id="8255377">0x12</span><span class="op" id="8255381">,</span>&nbsp;<span class="num" id="8255383">0</span><span class="op" id="8255384">,</span>&nbsp;<span class="num" id="8255386">0x1</span><span class="op" id="8255389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255392">v4mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8255407">=</span>&nbsp;<span class="ident" id="8255409">IPMask</span><span class="op" id="8255415">{</span><span class="num" id="8255416">255</span><span class="op" id="8255419">,</span>&nbsp;<span class="num" id="8255421">255</span><span class="op" id="8255424">,</span>&nbsp;<span class="num" id="8255426">255</span><span class="op" id="8255429">,</span>&nbsp;<span class="num" id="8255431">0</span><span class="op" id="8255432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255435">v4mappedv6mask</span>&nbsp;<span class="op" id="8255450">=</span>&nbsp;<span class="ident" id="8255452">IPMask</span><span class="op" id="8255458">{</span><span class="num" id="8255459">0xff</span><span class="op" id="8255463">,</span>&nbsp;<span class="num" id="8255465">0xff</span><span class="op" id="8255469">,</span>&nbsp;<span class="num" id="8255471">0xff</span><span class="op" id="8255475">,</span>&nbsp;<span class="num" id="8255477">0xff</span><span class="op" id="8255481">,</span>&nbsp;<span class="num" id="8255483">0xff</span><span class="op" id="8255487">,</span>&nbsp;<span class="num" id="8255489">0xff</span><span class="op" id="8255493">,</span>&nbsp;<span class="num" id="8255495">0xff</span><span class="op" id="8255499">,</span>&nbsp;<span class="num" id="8255501">0xff</span><span class="op" id="8255505">,</span>&nbsp;<span class="num" id="8255507">0xff</span><span class="op" id="8255511">,</span>&nbsp;<span class="num" id="8255513">0xff</span><span class="op" id="8255517">,</span>&nbsp;<span class="num" id="8255519">0xff</span><span class="op" id="8255523">,</span>&nbsp;<span class="num" id="8255525">0xff</span><span class="op" id="8255529">,</span>&nbsp;<span class="num" id="8255531">255</span><span class="op" id="8255534">,</span>&nbsp;<span class="num" id="8255536">255</span><span class="op" id="8255539">,</span>&nbsp;<span class="num" id="8255541">255</span><span class="op" id="8255544">,</span>&nbsp;<span class="num" id="8255546">0</span><span class="op" id="8255547">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255550">v6mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8255565">=</span>&nbsp;<span class="ident" id="8255567">IPMask</span><span class="op" id="8255573">{</span><span class="num" id="8255574">0xff</span><span class="op" id="8255578">,</span>&nbsp;<span class="num" id="8255580">0xff</span><span class="op" id="8255584">,</span>&nbsp;<span class="num" id="8255586">0xff</span><span class="op" id="8255590">,</span>&nbsp;<span class="num" id="8255592">0xff</span><span class="op" id="8255596">,</span>&nbsp;<span class="num" id="8255598">0xff</span><span class="op" id="8255602">,</span>&nbsp;<span class="num" id="8255604">0xff</span><span class="op" id="8255608">,</span>&nbsp;<span class="num" id="8255610">0xff</span><span class="op" id="8255614">,</span>&nbsp;<span class="num" id="8255616">0xff</span><span class="op" id="8255620">,</span>&nbsp;<span class="num" id="8255622">0</span><span class="op" id="8255623">,</span>&nbsp;<span class="num" id="8255625">0</span><span class="op" id="8255626">,</span>&nbsp;<span class="num" id="8255628">0</span><span class="op" id="8255629">,</span>&nbsp;<span class="num" id="8255631">0</span><span class="op" id="8255632">,</span>&nbsp;<span class="num" id="8255634">0</span><span class="op" id="8255635">,</span>&nbsp;<span class="num" id="8255637">0</span><span class="op" id="8255638">,</span>&nbsp;<span class="num" id="8255640">0</span><span class="op" id="8255641">,</span>&nbsp;<span class="num" id="8255643">0</span><span class="op" id="8255644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255647">badaddr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8255662">=</span>&nbsp;<span class="ident" id="8255664">IP</span><span class="op" id="8255666">{</span><span class="num" id="8255667">192</span><span class="op" id="8255670">,</span>&nbsp;<span class="num" id="8255672">168</span><span class="op" id="8255675">,</span>&nbsp;<span class="num" id="8255677">0</span><span class="op" id="8255678">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255681">badmask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8255696">=</span>&nbsp;<span class="ident" id="8255698">IPMask</span><span class="op" id="8255704">{</span><span class="num" id="8255705">255</span><span class="op" id="8255708">,</span>&nbsp;<span class="num" id="8255710">255</span><span class="op" id="8255713">,</span>&nbsp;<span class="num" id="8255715">0</span><span class="op" id="8255716">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255719">v4maskzero</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8255734">=</span>&nbsp;<span class="ident" id="8255736">IPMask</span><span class="op" id="8255742">{</span><span class="num" id="8255743">0</span><span class="op" id="8255744">,</span>&nbsp;<span class="num" id="8255746">0</span><span class="op" id="8255747">,</span>&nbsp;<span class="num" id="8255749">0</span><span class="op" id="8255750">,</span>&nbsp;<span class="num" id="8255752">0</span><span class="op" id="8255753">}</span><br>
<span class="lineno"></span><span class="op" id="8255755">)</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="8255758">var</span>&nbsp;<span class="ident" id="8255762">networkNumberAndMaskTests</span>&nbsp;<span class="op" id="8255788">=</span>&nbsp;<span class="op" id="8255790">[</span><span class="op" id="8255791">]</span><span class="keyword" id="8255792">struct</span>&nbsp;<span class="op" id="8255799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255802">in</span>&nbsp;&nbsp;<span class="ident" id="8255806">IPNet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8255813">out</span>&nbsp;<span class="ident" id="8255817">IPNet</span><br>
<span class="lineno"></span><span class="op" id="8255823">}</span><span class="op" id="8255824">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255827">{</span><span class="ident" id="8255828">IPNet</span><span class="op" id="8255833">{</span><span class="ident" id="8255834">IP</span><span class="op" id="8255836">:</span>&nbsp;<span class="ident" id="8255838">v4addr</span><span class="op" id="8255844">,</span>&nbsp;<span class="ident" id="8255846">Mask</span><span class="op" id="8255850">:</span>&nbsp;<span class="ident" id="8255852">v4mask</span><span class="op" id="8255858">}</span><span class="op" id="8255859">,</span>&nbsp;<span class="ident" id="8255861">IPNet</span><span class="op" id="8255866">{</span><span class="ident" id="8255867">IP</span><span class="op" id="8255869">:</span>&nbsp;<span class="ident" id="8255871">v4addr</span><span class="op" id="8255877">,</span>&nbsp;<span class="ident" id="8255879">Mask</span><span class="op" id="8255883">:</span>&nbsp;<span class="ident" id="8255885">v4mask</span><span class="op" id="8255891">}</span><span class="op" id="8255892">}</span><span class="op" id="8255893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255896">{</span><span class="ident" id="8255897">IPNet</span><span class="op" id="8255902">{</span><span class="ident" id="8255903">IP</span><span class="op" id="8255905">:</span>&nbsp;<span class="ident" id="8255907">v4addr</span><span class="op" id="8255913">,</span>&nbsp;<span class="ident" id="8255915">Mask</span><span class="op" id="8255919">:</span>&nbsp;<span class="ident" id="8255921">v4mappedv6mask</span><span class="op" id="8255935">}</span><span class="op" id="8255936">,</span>&nbsp;<span class="ident" id="8255938">IPNet</span><span class="op" id="8255943">{</span><span class="ident" id="8255944">IP</span><span class="op" id="8255946">:</span>&nbsp;<span class="ident" id="8255948">v4addr</span><span class="op" id="8255954">,</span>&nbsp;<span class="ident" id="8255956">Mask</span><span class="op" id="8255960">:</span>&nbsp;<span class="ident" id="8255962">v4mask</span><span class="op" id="8255968">}</span><span class="op" id="8255969">}</span><span class="op" id="8255970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8255973">{</span><span class="ident" id="8255974">IPNet</span><span class="op" id="8255979">{</span><span class="ident" id="8255980">IP</span><span class="op" id="8255982">:</span>&nbsp;<span class="ident" id="8255984">v4mappedv6addr</span><span class="op" id="8255998">,</span>&nbsp;<span class="ident" id="8256000">Mask</span><span class="op" id="8256004">:</span>&nbsp;<span class="ident" id="8256006">v4mappedv6mask</span><span class="op" id="8256020">}</span><span class="op" id="8256021">,</span>&nbsp;<span class="ident" id="8256023">IPNet</span><span class="op" id="8256028">{</span><span class="ident" id="8256029">IP</span><span class="op" id="8256031">:</span>&nbsp;<span class="ident" id="8256033">v4addr</span><span class="op" id="8256039">,</span>&nbsp;<span class="ident" id="8256041">Mask</span><span class="op" id="8256045">:</span>&nbsp;<span class="ident" id="8256047">v4mask</span><span class="op" id="8256053">}</span><span class="op" id="8256054">}</span><span class="op" id="8256055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256058">{</span><span class="ident" id="8256059">IPNet</span><span class="op" id="8256064">{</span><span class="ident" id="8256065">IP</span><span class="op" id="8256067">:</span>&nbsp;<span class="ident" id="8256069">v4mappedv6addr</span><span class="op" id="8256083">,</span>&nbsp;<span class="ident" id="8256085">Mask</span><span class="op" id="8256089">:</span>&nbsp;<span class="ident" id="8256091">v6mask</span><span class="op" id="8256097">}</span><span class="op" id="8256098">,</span>&nbsp;<span class="ident" id="8256100">IPNet</span><span class="op" id="8256105">{</span><span class="ident" id="8256106">IP</span><span class="op" id="8256108">:</span>&nbsp;<span class="ident" id="8256110">v4addr</span><span class="op" id="8256116">,</span>&nbsp;<span class="ident" id="8256118">Mask</span><span class="op" id="8256122">:</span>&nbsp;<span class="ident" id="8256124">v4maskzero</span><span class="op" id="8256134">}</span><span class="op" id="8256135">}</span><span class="op" id="8256136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256139">{</span><span class="ident" id="8256140">IPNet</span><span class="op" id="8256145">{</span><span class="ident" id="8256146">IP</span><span class="op" id="8256148">:</span>&nbsp;<span class="ident" id="8256150">v4addr</span><span class="op" id="8256156">,</span>&nbsp;<span class="ident" id="8256158">Mask</span><span class="op" id="8256162">:</span>&nbsp;<span class="ident" id="8256164">v6mask</span><span class="op" id="8256170">}</span><span class="op" id="8256171">,</span>&nbsp;<span class="ident" id="8256173">IPNet</span><span class="op" id="8256178">{</span><span class="ident" id="8256179">IP</span><span class="op" id="8256181">:</span>&nbsp;<span class="ident" id="8256183">v4addr</span><span class="op" id="8256189">,</span>&nbsp;<span class="ident" id="8256191">Mask</span><span class="op" id="8256195">:</span>&nbsp;<span class="ident" id="8256197">v4maskzero</span><span class="op" id="8256207">}</span><span class="op" id="8256208">}</span><span class="op" id="8256209">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256212">{</span><span class="ident" id="8256213">IPNet</span><span class="op" id="8256218">{</span><span class="ident" id="8256219">IP</span><span class="op" id="8256221">:</span>&nbsp;<span class="ident" id="8256223">v6addr</span><span class="op" id="8256229">,</span>&nbsp;<span class="ident" id="8256231">Mask</span><span class="op" id="8256235">:</span>&nbsp;<span class="ident" id="8256237">v6mask</span><span class="op" id="8256243">}</span><span class="op" id="8256244">,</span>&nbsp;<span class="ident" id="8256246">IPNet</span><span class="op" id="8256251">{</span><span class="ident" id="8256252">IP</span><span class="op" id="8256254">:</span>&nbsp;<span class="ident" id="8256256">v6addr</span><span class="op" id="8256262">,</span>&nbsp;<span class="ident" id="8256264">Mask</span><span class="op" id="8256268">:</span>&nbsp;<span class="ident" id="8256270">v6mask</span><span class="op" id="8256276">}</span><span class="op" id="8256277">}</span><span class="op" id="8256278">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256281">{</span><span class="ident" id="8256282">IPNet</span><span class="op" id="8256287">{</span><span class="ident" id="8256288">IP</span><span class="op" id="8256290">:</span>&nbsp;<span class="ident" id="8256292">v6addr</span><span class="op" id="8256298">,</span>&nbsp;<span class="ident" id="8256300">Mask</span><span class="op" id="8256304">:</span>&nbsp;<span class="ident" id="8256306">v4mappedv6mask</span><span class="op" id="8256320">}</span><span class="op" id="8256321">,</span>&nbsp;<span class="ident" id="8256323">IPNet</span><span class="op" id="8256328">{</span><span class="ident" id="8256329">IP</span><span class="op" id="8256331">:</span>&nbsp;<span class="ident" id="8256333">v6addr</span><span class="op" id="8256339">,</span>&nbsp;<span class="ident" id="8256341">Mask</span><span class="op" id="8256345">:</span>&nbsp;<span class="ident" id="8256347">v4mappedv6mask</span><span class="op" id="8256361">}</span><span class="op" id="8256362">}</span><span class="op" id="8256363">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256366">{</span><span class="ident" id="8256367">in</span><span class="op" id="8256369">:</span>&nbsp;<span class="ident" id="8256371">IPNet</span><span class="op" id="8256376">{</span><span class="ident" id="8256377">IP</span><span class="op" id="8256379">:</span>&nbsp;<span class="ident" id="8256381">v6addr</span><span class="op" id="8256387">,</span>&nbsp;<span class="ident" id="8256389">Mask</span><span class="op" id="8256393">:</span>&nbsp;<span class="ident" id="8256395">v4mask</span><span class="op" id="8256401">}</span><span class="op" id="8256402">}</span><span class="op" id="8256403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256406">{</span><span class="ident" id="8256407">in</span><span class="op" id="8256409">:</span>&nbsp;<span class="ident" id="8256411">IPNet</span><span class="op" id="8256416">{</span><span class="ident" id="8256417">IP</span><span class="op" id="8256419">:</span>&nbsp;<span class="ident" id="8256421">v4addr</span><span class="op" id="8256427">,</span>&nbsp;<span class="ident" id="8256429">Mask</span><span class="op" id="8256433">:</span>&nbsp;<span class="ident" id="8256435">badmask</span><span class="op" id="8256442">}</span><span class="op" id="8256443">}</span><span class="op" id="8256444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256447">{</span><span class="ident" id="8256448">in</span><span class="op" id="8256450">:</span>&nbsp;<span class="ident" id="8256452">IPNet</span><span class="op" id="8256457">{</span><span class="ident" id="8256458">IP</span><span class="op" id="8256460">:</span>&nbsp;<span class="ident" id="8256462">v4mappedv6addr</span><span class="op" id="8256476">,</span>&nbsp;<span class="ident" id="8256478">Mask</span><span class="op" id="8256482">:</span>&nbsp;<span class="ident" id="8256484">badmask</span><span class="op" id="8256491">}</span><span class="op" id="8256492">}</span><span class="op" id="8256493">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256496">{</span><span class="ident" id="8256497">in</span><span class="op" id="8256499">:</span>&nbsp;<span class="ident" id="8256501">IPNet</span><span class="op" id="8256506">{</span><span class="ident" id="8256507">IP</span><span class="op" id="8256509">:</span>&nbsp;<span class="ident" id="8256511">v6addr</span><span class="op" id="8256517">,</span>&nbsp;<span class="ident" id="8256519">Mask</span><span class="op" id="8256523">:</span>&nbsp;<span class="ident" id="8256525">badmask</span><span class="op" id="8256532">}</span><span class="op" id="8256533">}</span><span class="op" id="8256534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256537">{</span><span class="ident" id="8256538">in</span><span class="op" id="8256540">:</span>&nbsp;<span class="ident" id="8256542">IPNet</span><span class="op" id="8256547">{</span><span class="ident" id="8256548">IP</span><span class="op" id="8256550">:</span>&nbsp;<span class="ident" id="8256552">badaddr</span><span class="op" id="8256559">,</span>&nbsp;<span class="ident" id="8256561">Mask</span><span class="op" id="8256565">:</span>&nbsp;<span class="ident" id="8256567">v4mask</span><span class="op" id="8256573">}</span><span class="op" id="8256574">}</span><span class="op" id="8256575">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256578">{</span><span class="ident" id="8256579">in</span><span class="op" id="8256581">:</span>&nbsp;<span class="ident" id="8256583">IPNet</span><span class="op" id="8256588">{</span><span class="ident" id="8256589">IP</span><span class="op" id="8256591">:</span>&nbsp;<span class="ident" id="8256593">badaddr</span><span class="op" id="8256600">,</span>&nbsp;<span class="ident" id="8256602">Mask</span><span class="op" id="8256606">:</span>&nbsp;<span class="ident" id="8256608">v4mappedv6mask</span><span class="op" id="8256622">}</span><span class="op" id="8256623">}</span><span class="op" id="8256624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256627">{</span><span class="ident" id="8256628">in</span><span class="op" id="8256630">:</span>&nbsp;<span class="ident" id="8256632">IPNet</span><span class="op" id="8256637">{</span><span class="ident" id="8256638">IP</span><span class="op" id="8256640">:</span>&nbsp;<span class="ident" id="8256642">badaddr</span><span class="op" id="8256649">,</span>&nbsp;<span class="ident" id="8256651">Mask</span><span class="op" id="8256655">:</span>&nbsp;<span class="ident" id="8256657">v6mask</span><span class="op" id="8256663">}</span><span class="op" id="8256664">}</span><span class="op" id="8256665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256668">{</span><span class="ident" id="8256669">in</span><span class="op" id="8256671">:</span>&nbsp;<span class="ident" id="8256673">IPNet</span><span class="op" id="8256678">{</span><span class="ident" id="8256679">IP</span><span class="op" id="8256681">:</span>&nbsp;<span class="ident" id="8256683">badaddr</span><span class="op" id="8256690">,</span>&nbsp;<span class="ident" id="8256692">Mask</span><span class="op" id="8256696">:</span>&nbsp;<span class="ident" id="8256698">badmask</span><span class="op" id="8256705">}</span><span class="op" id="8256706">}</span><span class="op" id="8256707">,</span><br>
<span class="lineno">300</span><span class="op" id="8256709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8256712">func</span>&nbsp;<span class="ident" id="8256717">TestNetworkNumberAndMask</span><span class="op" id="8256741">(</span><span class="ident" id="8256742">t</span>&nbsp;<span class="op" id="8256744">*</span><span class="ident" id="8256745">testing</span><span class="op" id="8256752">.</span><span class="ident" id="8256753">T</span><span class="op" id="8256754">)</span>&nbsp;<span class="op" id="8256756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256759">for</span>&nbsp;<span class="ident" id="8256763">_</span><span class="op" id="8256764">,</span>&nbsp;<span class="ident" id="8256766">tt</span>&nbsp;<span class="op" id="8256769">:=</span>&nbsp;<span class="keyword" id="8256772">range</span>&nbsp;<span class="ident" id="8256778">networkNumberAndMaskTests</span>&nbsp;<span class="op" id="8256804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256808">ip</span><span class="op" id="8256810">,</span>&nbsp;<span class="ident" id="8256812">m</span>&nbsp;<span class="op" id="8256814">:=</span>&nbsp;<span class="ident" id="8256817">networkNumberAndMask</span><span class="op" id="8256837">(</span><span class="op" id="8256838">&amp;</span><span class="ident" id="8256839">tt</span><span class="op" id="8256841">.</span><span class="ident" id="8256842">in</span><span class="op" id="8256844">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256848">out</span>&nbsp;<span class="op" id="8256852">:=</span>&nbsp;<span class="op" id="8256855">&amp;</span><span class="ident" id="8256856">IPNet</span><span class="op" id="8256861">{</span><span class="ident" id="8256862">IP</span><span class="op" id="8256864">:</span>&nbsp;<span class="ident" id="8256866">ip</span><span class="op" id="8256868">,</span>&nbsp;<span class="ident" id="8256870">Mask</span><span class="op" id="8256874">:</span>&nbsp;<span class="ident" id="8256876">m</span><span class="op" id="8256877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8256881">if</span>&nbsp;<span class="op" id="8256884">!</span><span class="ident" id="8256885">reflect</span><span class="op" id="8256892">.</span><span class="ident" id="8256893">DeepEqual</span><span class="op" id="8256902">(</span><span class="op" id="8256903">&amp;</span><span class="ident" id="8256904">tt</span><span class="op" id="8256906">.</span><span class="ident" id="8256907">out</span><span class="op" id="8256910">,</span>&nbsp;<span class="ident" id="8256912">out</span><span class="op" id="8256915">)</span>&nbsp;<span class="op" id="8256917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8256922">t</span><span class="op" id="8256923">.</span><span class="ident" id="8256924">Errorf</span><span class="op" id="8256930">(</span><span class="string" id="8256931">&#34;networkNumberAndMask(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8256971">,</span>&nbsp;<span class="ident" id="8256973">tt</span><span class="op" id="8256975">.</span><span class="ident" id="8256976">in</span><span class="op" id="8256978">,</span>&nbsp;<span class="ident" id="8256980">out</span><span class="op" id="8256983">,</span>&nbsp;<span class="op" id="8256985">&amp;</span><span class="ident" id="8256986">tt</span><span class="op" id="8256988">.</span><span class="ident" id="8256989">out</span><span class="op" id="8256992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256996">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8256999">}</span><br>
<span class="lineno">310</span><span class="op" id="8257001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8257004">var</span>&nbsp;<span class="ident" id="8257008">splitJoinTests</span>&nbsp;<span class="op" id="8257023">=</span>&nbsp;<span class="op" id="8257025">[</span><span class="op" id="8257026">]</span><span class="keyword" id="8257027">struct</span>&nbsp;<span class="op" id="8257034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257037">host</span>&nbsp;<span class="builtintype" id="8257042">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257050">port</span>&nbsp;<span class="builtintype" id="8257055">string</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257063">join</span>&nbsp;<span class="builtintype" id="8257068">string</span><br>
<span class="lineno"></span><span class="op" id="8257075">}</span><span class="op" id="8257076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257079">{</span><span class="string" id="8257080">&#34;www.google.com&#34;</span><span class="op" id="8257096">,</span>&nbsp;<span class="string" id="8257098">&#34;80&#34;</span><span class="op" id="8257102">,</span>&nbsp;<span class="string" id="8257104">&#34;www.google.com:80&#34;</span><span class="op" id="8257123">}</span><span class="op" id="8257124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257127">{</span><span class="string" id="8257128">&#34;127.0.0.1&#34;</span><span class="op" id="8257139">,</span>&nbsp;<span class="string" id="8257141">&#34;1234&#34;</span><span class="op" id="8257147">,</span>&nbsp;<span class="string" id="8257149">&#34;127.0.0.1:1234&#34;</span><span class="op" id="8257165">}</span><span class="op" id="8257166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257169">{</span><span class="string" id="8257170">&#34;::1&#34;</span><span class="op" id="8257175">,</span>&nbsp;<span class="string" id="8257177">&#34;80&#34;</span><span class="op" id="8257181">,</span>&nbsp;<span class="string" id="8257183">&#34;[::1]:80&#34;</span><span class="op" id="8257193">}</span><span class="op" id="8257194">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257197">{</span><span class="string" id="8257198">&#34;fe80::1%lo0&#34;</span><span class="op" id="8257211">,</span>&nbsp;<span class="string" id="8257213">&#34;80&#34;</span><span class="op" id="8257217">,</span>&nbsp;<span class="string" id="8257219">&#34;[fe80::1%lo0]:80&#34;</span><span class="op" id="8257237">}</span><span class="op" id="8257238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257241">{</span><span class="string" id="8257242">&#34;localhost%lo0&#34;</span><span class="op" id="8257257">,</span>&nbsp;<span class="string" id="8257259">&#34;80&#34;</span><span class="op" id="8257263">,</span>&nbsp;<span class="string" id="8257265">&#34;[localhost%lo0]:80&#34;</span><span class="op" id="8257285">}</span><span class="op" id="8257286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257289">{</span><span class="string" id="8257290">&#34;&#34;</span><span class="op" id="8257292">,</span>&nbsp;<span class="string" id="8257294">&#34;0&#34;</span><span class="op" id="8257297">,</span>&nbsp;<span class="string" id="8257299">&#34;:0&#34;</span><span class="op" id="8257303">}</span><span class="op" id="8257304">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257308">{</span><span class="string" id="8257309">&#34;google.com&#34;</span><span class="op" id="8257321">,</span>&nbsp;<span class="string" id="8257323">&#34;https%foo&#34;</span><span class="op" id="8257334">,</span>&nbsp;<span class="string" id="8257336">&#34;google.com:https%foo&#34;</span><span class="op" id="8257358">}</span><span class="op" id="8257359">,</span>&nbsp;<span class="comment" id="8257361">//&nbsp;Go&nbsp;1.0&nbsp;behavior</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257381">{</span><span class="string" id="8257382">&#34;127.0.0.1&#34;</span><span class="op" id="8257393">,</span>&nbsp;<span class="string" id="8257395">&#34;&#34;</span><span class="op" id="8257397">,</span>&nbsp;<span class="string" id="8257399">&#34;127.0.0.1:&#34;</span><span class="op" id="8257411">}</span><span class="op" id="8257412">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8257434">//&nbsp;Go&nbsp;1.0&nbsp;behaviour</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257455">{</span><span class="string" id="8257456">&#34;www.google.com&#34;</span><span class="op" id="8257472">,</span>&nbsp;<span class="string" id="8257474">&#34;&#34;</span><span class="op" id="8257476">,</span>&nbsp;<span class="string" id="8257478">&#34;www.google.com:&#34;</span><span class="op" id="8257495">}</span><span class="op" id="8257496">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8257508">//&nbsp;Go&nbsp;1.0&nbsp;behaviour</span><br>
<span class="lineno"></span><span class="op" id="8257528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8257531">var</span>&nbsp;<span class="ident" id="8257535">splitFailureTests</span>&nbsp;<span class="op" id="8257553">=</span>&nbsp;<span class="op" id="8257555">[</span><span class="op" id="8257556">]</span><span class="keyword" id="8257557">struct</span>&nbsp;<span class="op" id="8257564">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257567">hostPort</span>&nbsp;<span class="builtintype" id="8257576">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8257584">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8257593">string</span><br>
<span class="lineno"></span><span class="op" id="8257600">}</span><span class="op" id="8257601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257604">{</span><span class="string" id="8257605">&#34;www.google.com&#34;</span><span class="op" id="8257621">,</span>&nbsp;<span class="string" id="8257623">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="8257648">}</span><span class="op" id="8257649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257652">{</span><span class="string" id="8257653">&#34;127.0.0.1&#34;</span><span class="op" id="8257664">,</span>&nbsp;<span class="string" id="8257666">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="8257691">}</span><span class="op" id="8257692">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257695">{</span><span class="string" id="8257696">&#34;[::1]&#34;</span><span class="op" id="8257703">,</span>&nbsp;<span class="string" id="8257705">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="8257730">}</span><span class="op" id="8257731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257734">{</span><span class="string" id="8257735">&#34;[fe80::1%lo0]&#34;</span><span class="op" id="8257750">,</span>&nbsp;<span class="string" id="8257752">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="8257777">}</span><span class="op" id="8257778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257781">{</span><span class="string" id="8257782">&#34;[localhost%lo0]&#34;</span><span class="op" id="8257799">,</span>&nbsp;<span class="string" id="8257801">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="8257826">}</span><span class="op" id="8257827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257830">{</span><span class="string" id="8257831">&#34;localhost%lo0&#34;</span><span class="op" id="8257846">,</span>&nbsp;<span class="string" id="8257848">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="8257873">}</span><span class="op" id="8257874">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257878">{</span><span class="string" id="8257879">&#34;::1&#34;</span><span class="op" id="8257884">,</span>&nbsp;<span class="string" id="8257886">&#34;too&nbsp;many&nbsp;colons&nbsp;in&nbsp;address&#34;</span><span class="op" id="8257914">}</span><span class="op" id="8257915">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257918">{</span><span class="string" id="8257919">&#34;fe80::1%lo0&#34;</span><span class="op" id="8257932">,</span>&nbsp;<span class="string" id="8257934">&#34;too&nbsp;many&nbsp;colons&nbsp;in&nbsp;address&#34;</span><span class="op" id="8257962">}</span><span class="op" id="8257963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8257966">{</span><span class="string" id="8257967">&#34;fe80::1%lo0:80&#34;</span><span class="op" id="8257983">,</span>&nbsp;<span class="string" id="8257985">&#34;too&nbsp;many&nbsp;colons&nbsp;in&nbsp;address&#34;</span><span class="op" id="8258013">}</span><span class="op" id="8258014">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258018">{</span><span class="string" id="8258019">&#34;localhost%lo0:80&#34;</span><span class="op" id="8258037">,</span>&nbsp;<span class="string" id="8258039">&#34;missing&nbsp;brackets&nbsp;in&nbsp;address&#34;</span><span class="op" id="8258068">}</span><span class="op" id="8258069">,</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8258073">//&nbsp;Test&nbsp;cases&nbsp;that&nbsp;didn&#39;t&nbsp;fail&nbsp;in&nbsp;Go&nbsp;1.0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258116">{</span><span class="string" id="8258117">&#34;[foo:bar]&#34;</span><span class="op" id="8258128">,</span>&nbsp;<span class="string" id="8258130">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="8258155">}</span><span class="op" id="8258156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258159">{</span><span class="string" id="8258160">&#34;[foo:bar]baz&#34;</span><span class="op" id="8258174">,</span>&nbsp;<span class="string" id="8258176">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="8258201">}</span><span class="op" id="8258202">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258205">{</span><span class="string" id="8258206">&#34;[foo]bar:baz&#34;</span><span class="op" id="8258220">,</span>&nbsp;<span class="string" id="8258222">&#34;missing&nbsp;port&nbsp;in&nbsp;address&#34;</span><span class="op" id="8258247">}</span><span class="op" id="8258248">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258252">{</span><span class="string" id="8258253">&#34;[foo]:[bar]:baz&#34;</span><span class="op" id="8258270">,</span>&nbsp;<span class="string" id="8258272">&#34;too&nbsp;many&nbsp;colons&nbsp;in&nbsp;address&#34;</span><span class="op" id="8258300">}</span><span class="op" id="8258301">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258305">{</span><span class="string" id="8258306">&#34;[foo]:[bar]baz&#34;</span><span class="op" id="8258322">,</span>&nbsp;<span class="string" id="8258324">&#34;unexpected&nbsp;&#39;[&#39;&nbsp;in&nbsp;address&#34;</span><span class="op" id="8258351">}</span><span class="op" id="8258352">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258355">{</span><span class="string" id="8258356">&#34;foo[bar]:baz&#34;</span><span class="op" id="8258370">,</span>&nbsp;<span class="string" id="8258372">&#34;unexpected&nbsp;&#39;[&#39;&nbsp;in&nbsp;address&#34;</span><span class="op" id="8258399">}</span><span class="op" id="8258400">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258404">{</span><span class="string" id="8258405">&#34;foo]bar:baz&#34;</span><span class="op" id="8258418">,</span>&nbsp;<span class="string" id="8258420">&#34;unexpected&nbsp;&#39;]&#39;&nbsp;in&nbsp;address&#34;</span><span class="op" id="8258447">}</span><span class="op" id="8258448">,</span><br>
<span class="lineno"></span><span class="op" id="8258450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="keyword" id="8258453">func</span>&nbsp;<span class="ident" id="8258458">TestSplitHostPort</span><span class="op" id="8258475">(</span><span class="ident" id="8258476">t</span>&nbsp;<span class="op" id="8258478">*</span><span class="ident" id="8258479">testing</span><span class="op" id="8258486">.</span><span class="ident" id="8258487">T</span><span class="op" id="8258488">)</span>&nbsp;<span class="op" id="8258490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258493">for</span>&nbsp;<span class="ident" id="8258497">_</span><span class="op" id="8258498">,</span>&nbsp;<span class="ident" id="8258500">tt</span>&nbsp;<span class="op" id="8258503">:=</span>&nbsp;<span class="keyword" id="8258506">range</span>&nbsp;<span class="ident" id="8258512">splitJoinTests</span>&nbsp;<span class="op" id="8258527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258531">if</span>&nbsp;<span class="ident" id="8258534">host</span><span class="op" id="8258538">,</span>&nbsp;<span class="ident" id="8258540">port</span><span class="op" id="8258544">,</span>&nbsp;<span class="ident" id="8258546">err</span>&nbsp;<span class="op" id="8258550">:=</span>&nbsp;<span class="ident" id="8258553">SplitHostPort</span><span class="op" id="8258566">(</span><span class="ident" id="8258567">tt</span><span class="op" id="8258569">.</span><span class="ident" id="8258570">join</span><span class="op" id="8258574">)</span><span class="op" id="8258575">;</span>&nbsp;<span class="ident" id="8258577">host</span>&nbsp;<span class="op" id="8258582">!=</span>&nbsp;<span class="ident" id="8258585">tt</span><span class="op" id="8258587">.</span><span class="ident" id="8258588">host</span>&nbsp;<span class="op" id="8258593">||</span>&nbsp;<span class="ident" id="8258596">port</span>&nbsp;<span class="op" id="8258601">!=</span>&nbsp;<span class="ident" id="8258604">tt</span><span class="op" id="8258606">.</span><span class="ident" id="8258607">port</span>&nbsp;<span class="op" id="8258612">||</span>&nbsp;<span class="ident" id="8258615">err</span>&nbsp;<span class="op" id="8258619">!=</span>&nbsp;<span class="ident" id="8258622">nil</span>&nbsp;<span class="op" id="8258626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258631">t</span><span class="op" id="8258632">.</span><span class="ident" id="8258633">Errorf</span><span class="op" id="8258639">(</span><span class="string" id="8258640">&#34;SplitHostPort(%q)&nbsp;=&nbsp;%q,&nbsp;%q,&nbsp;%v;&nbsp;want&nbsp;%q,&nbsp;%q,&nbsp;nil&#34;</span><span class="op" id="8258690">,</span>&nbsp;<span class="ident" id="8258692">tt</span><span class="op" id="8258694">.</span><span class="ident" id="8258695">join</span><span class="op" id="8258699">,</span>&nbsp;<span class="ident" id="8258701">host</span><span class="op" id="8258705">,</span>&nbsp;<span class="ident" id="8258707">port</span><span class="op" id="8258711">,</span>&nbsp;<span class="ident" id="8258713">err</span><span class="op" id="8258716">,</span>&nbsp;<span class="ident" id="8258718">tt</span><span class="op" id="8258720">.</span><span class="ident" id="8258721">host</span><span class="op" id="8258725">,</span>&nbsp;<span class="ident" id="8258727">tt</span><span class="op" id="8258729">.</span><span class="ident" id="8258730">port</span><span class="op" id="8258734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258738">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258744">for</span>&nbsp;<span class="ident" id="8258748">_</span><span class="op" id="8258749">,</span>&nbsp;<span class="ident" id="8258751">tt</span>&nbsp;<span class="op" id="8258754">:=</span>&nbsp;<span class="keyword" id="8258757">range</span>&nbsp;<span class="ident" id="8258763">splitFailureTests</span>&nbsp;<span class="op" id="8258781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258785">if</span>&nbsp;<span class="ident" id="8258788">_</span><span class="op" id="8258789">,</span>&nbsp;<span class="ident" id="8258791">_</span><span class="op" id="8258792">,</span>&nbsp;<span class="ident" id="8258794">err</span>&nbsp;<span class="op" id="8258798">:=</span>&nbsp;<span class="ident" id="8258801">SplitHostPort</span><span class="op" id="8258814">(</span><span class="ident" id="8258815">tt</span><span class="op" id="8258817">.</span><span class="ident" id="8258818">hostPort</span><span class="op" id="8258826">)</span><span class="op" id="8258827">;</span>&nbsp;<span class="ident" id="8258829">err</span>&nbsp;<span class="op" id="8258833">==</span>&nbsp;<span class="ident" id="8258836">nil</span>&nbsp;<span class="op" id="8258840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258845">t</span><span class="op" id="8258846">.</span><span class="ident" id="8258847">Errorf</span><span class="op" id="8258853">(</span><span class="string" id="8258854">&#34;SplitHostPort(%q)&nbsp;should&nbsp;have&nbsp;failed&#34;</span><span class="op" id="8258892">,</span>&nbsp;<span class="ident" id="8258894">tt</span><span class="op" id="8258896">.</span><span class="ident" id="8258897">hostPort</span><span class="op" id="8258905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8258909">}</span>&nbsp;<span class="keyword" id="8258911">else</span>&nbsp;<span class="op" id="8258916">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258921">e</span>&nbsp;<span class="op" id="8258923">:=</span>&nbsp;<span class="ident" id="8258926">err</span><span class="op" id="8258929">.</span><span class="op" id="8258930">(</span><span class="op" id="8258931">*</span><span class="ident" id="8258932">AddrError</span><span class="op" id="8258941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8258946">if</span>&nbsp;<span class="ident" id="8258949">e</span><span class="op" id="8258950">.</span><span class="ident" id="8258951">Err</span>&nbsp;<span class="op" id="8258955">!=</span>&nbsp;<span class="ident" id="8258958">tt</span><span class="op" id="8258960">.</span><span class="ident" id="8258961">err</span>&nbsp;<span class="op" id="8258965">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8258971">t</span><span class="op" id="8258972">.</span><span class="ident" id="8258973">Errorf</span><span class="op" id="8258979">(</span><span class="string" id="8258980">&#34;SplitHostPort(%q)&nbsp;=&nbsp;_,&nbsp;_,&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8259019">,</span>&nbsp;<span class="ident" id="8259021">tt</span><span class="op" id="8259023">.</span><span class="ident" id="8259024">hostPort</span><span class="op" id="8259032">,</span>&nbsp;<span class="ident" id="8259034">e</span><span class="op" id="8259035">.</span><span class="ident" id="8259036">Err</span><span class="op" id="8259039">,</span>&nbsp;<span class="ident" id="8259041">tt</span><span class="op" id="8259043">.</span><span class="ident" id="8259044">err</span><span class="op" id="8259047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259056">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259059">}</span><br>
<span class="lineno"></span><span class="op" id="8259061">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8259064">func</span>&nbsp;<span class="ident" id="8259069">TestJoinHostPort</span><span class="op" id="8259085">(</span><span class="ident" id="8259086">t</span>&nbsp;<span class="op" id="8259088">*</span><span class="ident" id="8259089">testing</span><span class="op" id="8259096">.</span><span class="ident" id="8259097">T</span><span class="op" id="8259098">)</span>&nbsp;<span class="op" id="8259100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259103">for</span>&nbsp;<span class="ident" id="8259107">_</span><span class="op" id="8259108">,</span>&nbsp;<span class="ident" id="8259110">tt</span>&nbsp;<span class="op" id="8259113">:=</span>&nbsp;<span class="keyword" id="8259116">range</span>&nbsp;<span class="ident" id="8259122">splitJoinTests</span>&nbsp;<span class="op" id="8259137">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259141">if</span>&nbsp;<span class="ident" id="8259144">join</span>&nbsp;<span class="op" id="8259149">:=</span>&nbsp;<span class="ident" id="8259152">JoinHostPort</span><span class="op" id="8259164">(</span><span class="ident" id="8259165">tt</span><span class="op" id="8259167">.</span><span class="ident" id="8259168">host</span><span class="op" id="8259172">,</span>&nbsp;<span class="ident" id="8259174">tt</span><span class="op" id="8259176">.</span><span class="ident" id="8259177">port</span><span class="op" id="8259181">)</span><span class="op" id="8259182">;</span>&nbsp;<span class="ident" id="8259184">join</span>&nbsp;<span class="op" id="8259189">!=</span>&nbsp;<span class="ident" id="8259192">tt</span><span class="op" id="8259194">.</span><span class="ident" id="8259195">join</span>&nbsp;<span class="op" id="8259200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259205">t</span><span class="op" id="8259206">.</span><span class="ident" id="8259207">Errorf</span><span class="op" id="8259213">(</span><span class="string" id="8259214">&#34;JoinHostPort(%q,&nbsp;%q)&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8259250">,</span>&nbsp;<span class="ident" id="8259252">tt</span><span class="op" id="8259254">.</span><span class="ident" id="8259255">host</span><span class="op" id="8259259">,</span>&nbsp;<span class="ident" id="8259261">tt</span><span class="op" id="8259263">.</span><span class="ident" id="8259264">port</span><span class="op" id="8259268">,</span>&nbsp;<span class="ident" id="8259270">join</span><span class="op" id="8259274">,</span>&nbsp;<span class="ident" id="8259276">tt</span><span class="op" id="8259278">.</span><span class="ident" id="8259279">join</span><span class="op" id="8259283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259290">}</span><br>
<span class="lineno"></span><span class="op" id="8259292">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span><span class="keyword" id="8259295">var</span>&nbsp;<span class="ident" id="8259299">ipAddrFamilyTests</span>&nbsp;<span class="op" id="8259317">=</span>&nbsp;<span class="op" id="8259319">[</span><span class="op" id="8259320">]</span><span class="keyword" id="8259321">struct</span>&nbsp;<span class="op" id="8259328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259331">in</span>&nbsp;&nbsp;<span class="ident" id="8259335">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259339">af4</span>&nbsp;<span class="builtintype" id="8259343">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8259349">af6</span>&nbsp;<span class="builtintype" id="8259353">bool</span><br>
<span class="lineno">390</span><span class="op" id="8259358">}</span><span class="op" id="8259359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259362">{</span><span class="ident" id="8259363">IPv4bcast</span><span class="op" id="8259372">,</span>&nbsp;<span class="builtintype" id="8259374">true</span><span class="op" id="8259378">,</span>&nbsp;<span class="builtintype" id="8259380">false</span><span class="op" id="8259385">}</span><span class="op" id="8259386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259389">{</span><span class="ident" id="8259390">IPv4allsys</span><span class="op" id="8259400">,</span>&nbsp;<span class="builtintype" id="8259402">true</span><span class="op" id="8259406">,</span>&nbsp;<span class="builtintype" id="8259408">false</span><span class="op" id="8259413">}</span><span class="op" id="8259414">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259417">{</span><span class="ident" id="8259418">IPv4allrouter</span><span class="op" id="8259431">,</span>&nbsp;<span class="builtintype" id="8259433">true</span><span class="op" id="8259437">,</span>&nbsp;<span class="builtintype" id="8259439">false</span><span class="op" id="8259444">}</span><span class="op" id="8259445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259448">{</span><span class="ident" id="8259449">IPv4zero</span><span class="op" id="8259457">,</span>&nbsp;<span class="builtintype" id="8259459">true</span><span class="op" id="8259463">,</span>&nbsp;<span class="builtintype" id="8259465">false</span><span class="op" id="8259470">}</span><span class="op" id="8259471">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259474">{</span><span class="ident" id="8259475">IPv4</span><span class="op" id="8259479">(</span><span class="num" id="8259480">224</span><span class="op" id="8259483">,</span>&nbsp;<span class="num" id="8259485">0</span><span class="op" id="8259486">,</span>&nbsp;<span class="num" id="8259488">0</span><span class="op" id="8259489">,</span>&nbsp;<span class="num" id="8259491">1</span><span class="op" id="8259492">)</span><span class="op" id="8259493">,</span>&nbsp;<span class="builtintype" id="8259495">true</span><span class="op" id="8259499">,</span>&nbsp;<span class="builtintype" id="8259501">false</span><span class="op" id="8259506">}</span><span class="op" id="8259507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259510">{</span><span class="ident" id="8259511">IPv4</span><span class="op" id="8259515">(</span><span class="num" id="8259516">127</span><span class="op" id="8259519">,</span>&nbsp;<span class="num" id="8259521">0</span><span class="op" id="8259522">,</span>&nbsp;<span class="num" id="8259524">0</span><span class="op" id="8259525">,</span>&nbsp;<span class="num" id="8259527">1</span><span class="op" id="8259528">)</span><span class="op" id="8259529">,</span>&nbsp;<span class="builtintype" id="8259531">true</span><span class="op" id="8259535">,</span>&nbsp;<span class="builtintype" id="8259537">false</span><span class="op" id="8259542">}</span><span class="op" id="8259543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259546">{</span><span class="ident" id="8259547">IPv4</span><span class="op" id="8259551">(</span><span class="num" id="8259552">240</span><span class="op" id="8259555">,</span>&nbsp;<span class="num" id="8259557">0</span><span class="op" id="8259558">,</span>&nbsp;<span class="num" id="8259560">0</span><span class="op" id="8259561">,</span>&nbsp;<span class="num" id="8259563">1</span><span class="op" id="8259564">)</span><span class="op" id="8259565">,</span>&nbsp;<span class="builtintype" id="8259567">true</span><span class="op" id="8259571">,</span>&nbsp;<span class="builtintype" id="8259573">false</span><span class="op" id="8259578">}</span><span class="op" id="8259579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259582">{</span><span class="ident" id="8259583">IPv6unspecified</span><span class="op" id="8259598">,</span>&nbsp;<span class="builtintype" id="8259600">false</span><span class="op" id="8259605">,</span>&nbsp;<span class="builtintype" id="8259607">true</span><span class="op" id="8259611">}</span><span class="op" id="8259612">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259615">{</span><span class="ident" id="8259616">IPv6loopback</span><span class="op" id="8259628">,</span>&nbsp;<span class="builtintype" id="8259630">false</span><span class="op" id="8259635">,</span>&nbsp;<span class="builtintype" id="8259637">true</span><span class="op" id="8259641">}</span><span class="op" id="8259642">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259645">{</span><span class="ident" id="8259646">IPv6interfacelocalallnodes</span><span class="op" id="8259672">,</span>&nbsp;<span class="builtintype" id="8259674">false</span><span class="op" id="8259679">,</span>&nbsp;<span class="builtintype" id="8259681">true</span><span class="op" id="8259685">}</span><span class="op" id="8259686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259689">{</span><span class="ident" id="8259690">IPv6linklocalallnodes</span><span class="op" id="8259711">,</span>&nbsp;<span class="builtintype" id="8259713">false</span><span class="op" id="8259718">,</span>&nbsp;<span class="builtintype" id="8259720">true</span><span class="op" id="8259724">}</span><span class="op" id="8259725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259728">{</span><span class="ident" id="8259729">IPv6linklocalallrouters</span><span class="op" id="8259752">,</span>&nbsp;<span class="builtintype" id="8259754">false</span><span class="op" id="8259759">,</span>&nbsp;<span class="builtintype" id="8259761">true</span><span class="op" id="8259765">}</span><span class="op" id="8259766">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259769">{</span><span class="ident" id="8259770">ParseIP</span><span class="op" id="8259777">(</span><span class="string" id="8259778">&#34;ff05::a:b:c:d&#34;</span><span class="op" id="8259793">)</span><span class="op" id="8259794">,</span>&nbsp;<span class="builtintype" id="8259796">false</span><span class="op" id="8259801">,</span>&nbsp;<span class="builtintype" id="8259803">true</span><span class="op" id="8259807">}</span><span class="op" id="8259808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259811">{</span><span class="ident" id="8259812">ParseIP</span><span class="op" id="8259819">(</span><span class="string" id="8259820">&#34;fe80::1:2:3:4&#34;</span><span class="op" id="8259835">)</span><span class="op" id="8259836">,</span>&nbsp;<span class="builtintype" id="8259838">false</span><span class="op" id="8259843">,</span>&nbsp;<span class="builtintype" id="8259845">true</span><span class="op" id="8259849">}</span><span class="op" id="8259850">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8259853">{</span><span class="ident" id="8259854">ParseIP</span><span class="op" id="8259861">(</span><span class="string" id="8259862">&#34;2001:db8::123:12:1&#34;</span><span class="op" id="8259882">)</span><span class="op" id="8259883">,</span>&nbsp;<span class="builtintype" id="8259885">false</span><span class="op" id="8259890">,</span>&nbsp;<span class="builtintype" id="8259892">true</span><span class="op" id="8259896">}</span><span class="op" id="8259897">,</span><br>
<span class="lineno"></span><span class="op" id="8259899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8259902">func</span>&nbsp;<span class="ident" id="8259907">TestIPAddrFamily</span><span class="op" id="8259923">(</span><span class="ident" id="8259924">t</span>&nbsp;<span class="op" id="8259926">*</span><span class="ident" id="8259927">testing</span><span class="op" id="8259934">.</span><span class="ident" id="8259935">T</span><span class="op" id="8259936">)</span>&nbsp;<span class="op" id="8259938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259941">for</span>&nbsp;<span class="ident" id="8259945">_</span><span class="op" id="8259946">,</span>&nbsp;<span class="ident" id="8259948">tt</span>&nbsp;<span class="op" id="8259951">:=</span>&nbsp;<span class="keyword" id="8259954">range</span>&nbsp;<span class="ident" id="8259960">ipAddrFamilyTests</span>&nbsp;<span class="op" id="8259978">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8259982">if</span>&nbsp;<span class="ident" id="8259985">af</span>&nbsp;<span class="op" id="8259988">:=</span>&nbsp;<span class="ident" id="8259991">tt</span><span class="op" id="8259993">.</span><span class="ident" id="8259994">in</span><span class="op" id="8259996">.</span><span class="ident" id="8259997">To4</span><span class="op" id="8260000">(</span><span class="op" id="8260001">)</span>&nbsp;<span class="op" id="8260003">!=</span>&nbsp;<span class="ident" id="8260006">nil</span><span class="op" id="8260009">;</span>&nbsp;<span class="ident" id="8260011">af</span>&nbsp;<span class="op" id="8260014">!=</span>&nbsp;<span class="ident" id="8260017">tt</span><span class="op" id="8260019">.</span><span class="ident" id="8260020">af4</span>&nbsp;<span class="op" id="8260024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260029">t</span><span class="op" id="8260030">.</span><span class="ident" id="8260031">Errorf</span><span class="op" id="8260037">(</span><span class="string" id="8260038">&#34;verifying&nbsp;IPv4&nbsp;address&nbsp;family&nbsp;for&nbsp;%q&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8260090">,</span>&nbsp;<span class="ident" id="8260092">tt</span><span class="op" id="8260094">.</span><span class="ident" id="8260095">in</span><span class="op" id="8260097">,</span>&nbsp;<span class="ident" id="8260099">af</span><span class="op" id="8260101">,</span>&nbsp;<span class="ident" id="8260103">tt</span><span class="op" id="8260105">.</span><span class="ident" id="8260106">af4</span><span class="op" id="8260109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260113">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8260117">if</span>&nbsp;<span class="ident" id="8260120">af</span>&nbsp;<span class="op" id="8260123">:=</span>&nbsp;<span class="builtinfunc" id="8260126">len</span><span class="op" id="8260129">(</span><span class="ident" id="8260130">tt</span><span class="op" id="8260132">.</span><span class="ident" id="8260133">in</span><span class="op" id="8260135">)</span>&nbsp;<span class="op" id="8260137">==</span>&nbsp;<span class="ident" id="8260140">IPv6len</span>&nbsp;<span class="op" id="8260148">&amp;&amp;</span>&nbsp;<span class="ident" id="8260151">tt</span><span class="op" id="8260153">.</span><span class="ident" id="8260154">in</span><span class="op" id="8260156">.</span><span class="ident" id="8260157">To4</span><span class="op" id="8260160">(</span><span class="op" id="8260161">)</span>&nbsp;<span class="op" id="8260163">==</span>&nbsp;<span class="ident" id="8260166">nil</span><span class="op" id="8260169">;</span>&nbsp;<span class="ident" id="8260171">af</span>&nbsp;<span class="op" id="8260174">!=</span>&nbsp;<span class="ident" id="8260177">tt</span><span class="op" id="8260179">.</span><span class="ident" id="8260180">af6</span>&nbsp;<span class="op" id="8260184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260189">t</span><span class="op" id="8260190">.</span><span class="ident" id="8260191">Errorf</span><span class="op" id="8260197">(</span><span class="string" id="8260198">&#34;verifying&nbsp;IPv6&nbsp;address&nbsp;family&nbsp;for&nbsp;%q&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8260250">,</span>&nbsp;<span class="ident" id="8260252">tt</span><span class="op" id="8260254">.</span><span class="ident" id="8260255">in</span><span class="op" id="8260257">,</span>&nbsp;<span class="ident" id="8260259">af</span><span class="op" id="8260261">,</span>&nbsp;<span class="ident" id="8260263">tt</span><span class="op" id="8260265">.</span><span class="ident" id="8260266">af6</span><span class="op" id="8260269">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260276">}</span><br>
<span class="lineno"></span><span class="op" id="8260278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8260281">var</span>&nbsp;<span class="ident" id="8260285">ipAddrScopeTests</span>&nbsp;<span class="op" id="8260302">=</span>&nbsp;<span class="op" id="8260304">[</span><span class="op" id="8260305">]</span><span class="keyword" id="8260306">struct</span>&nbsp;<span class="op" id="8260313">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260316">scope</span>&nbsp;<span class="keyword" id="8260322">func</span><span class="op" id="8260326">(</span><span class="ident" id="8260327">IP</span><span class="op" id="8260329">)</span>&nbsp;<span class="builtintype" id="8260331">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260337">in</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8260343">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8260347">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8260353">bool</span><br>
<span class="lineno"></span><span class="op" id="8260358">}</span><span class="op" id="8260359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260362">{</span><span class="ident" id="8260363">IP</span><span class="op" id="8260365">.</span><span class="ident" id="8260366">IsUnspecified</span><span class="op" id="8260379">,</span>&nbsp;<span class="ident" id="8260381">IPv4zero</span><span class="op" id="8260389">,</span>&nbsp;<span class="builtintype" id="8260391">true</span><span class="op" id="8260395">}</span><span class="op" id="8260396">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260399">{</span><span class="ident" id="8260400">IP</span><span class="op" id="8260402">.</span><span class="ident" id="8260403">IsUnspecified</span><span class="op" id="8260416">,</span>&nbsp;<span class="ident" id="8260418">IPv4</span><span class="op" id="8260422">(</span><span class="num" id="8260423">127</span><span class="op" id="8260426">,</span>&nbsp;<span class="num" id="8260428">0</span><span class="op" id="8260429">,</span>&nbsp;<span class="num" id="8260431">0</span><span class="op" id="8260432">,</span>&nbsp;<span class="num" id="8260434">1</span><span class="op" id="8260435">)</span><span class="op" id="8260436">,</span>&nbsp;<span class="builtintype" id="8260438">false</span><span class="op" id="8260443">}</span><span class="op" id="8260444">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260447">{</span><span class="ident" id="8260448">IP</span><span class="op" id="8260450">.</span><span class="ident" id="8260451">IsUnspecified</span><span class="op" id="8260464">,</span>&nbsp;<span class="ident" id="8260466">IPv6unspecified</span><span class="op" id="8260481">,</span>&nbsp;<span class="builtintype" id="8260483">true</span><span class="op" id="8260487">}</span><span class="op" id="8260488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260491">{</span><span class="ident" id="8260492">IP</span><span class="op" id="8260494">.</span><span class="ident" id="8260495">IsUnspecified</span><span class="op" id="8260508">,</span>&nbsp;<span class="ident" id="8260510">IPv6interfacelocalallnodes</span><span class="op" id="8260536">,</span>&nbsp;<span class="builtintype" id="8260538">false</span><span class="op" id="8260543">}</span><span class="op" id="8260544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260547">{</span><span class="ident" id="8260548">IP</span><span class="op" id="8260550">.</span><span class="ident" id="8260551">IsLoopback</span><span class="op" id="8260561">,</span>&nbsp;<span class="ident" id="8260563">IPv4</span><span class="op" id="8260567">(</span><span class="num" id="8260568">127</span><span class="op" id="8260571">,</span>&nbsp;<span class="num" id="8260573">0</span><span class="op" id="8260574">,</span>&nbsp;<span class="num" id="8260576">0</span><span class="op" id="8260577">,</span>&nbsp;<span class="num" id="8260579">1</span><span class="op" id="8260580">)</span><span class="op" id="8260581">,</span>&nbsp;<span class="builtintype" id="8260583">true</span><span class="op" id="8260587">}</span><span class="op" id="8260588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260591">{</span><span class="ident" id="8260592">IP</span><span class="op" id="8260594">.</span><span class="ident" id="8260595">IsLoopback</span><span class="op" id="8260605">,</span>&nbsp;<span class="ident" id="8260607">IPv4</span><span class="op" id="8260611">(</span><span class="num" id="8260612">127</span><span class="op" id="8260615">,</span>&nbsp;<span class="num" id="8260617">255</span><span class="op" id="8260620">,</span>&nbsp;<span class="num" id="8260622">255</span><span class="op" id="8260625">,</span>&nbsp;<span class="num" id="8260627">254</span><span class="op" id="8260630">)</span><span class="op" id="8260631">,</span>&nbsp;<span class="builtintype" id="8260633">true</span><span class="op" id="8260637">}</span><span class="op" id="8260638">,</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260641">{</span><span class="ident" id="8260642">IP</span><span class="op" id="8260644">.</span><span class="ident" id="8260645">IsLoopback</span><span class="op" id="8260655">,</span>&nbsp;<span class="ident" id="8260657">IPv4</span><span class="op" id="8260661">(</span><span class="num" id="8260662">128</span><span class="op" id="8260665">,</span>&nbsp;<span class="num" id="8260667">1</span><span class="op" id="8260668">,</span>&nbsp;<span class="num" id="8260670">2</span><span class="op" id="8260671">,</span>&nbsp;<span class="num" id="8260673">3</span><span class="op" id="8260674">)</span><span class="op" id="8260675">,</span>&nbsp;<span class="builtintype" id="8260677">false</span><span class="op" id="8260682">}</span><span class="op" id="8260683">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260686">{</span><span class="ident" id="8260687">IP</span><span class="op" id="8260689">.</span><span class="ident" id="8260690">IsLoopback</span><span class="op" id="8260700">,</span>&nbsp;<span class="ident" id="8260702">IPv6loopback</span><span class="op" id="8260714">,</span>&nbsp;<span class="builtintype" id="8260716">true</span><span class="op" id="8260720">}</span><span class="op" id="8260721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260724">{</span><span class="ident" id="8260725">IP</span><span class="op" id="8260727">.</span><span class="ident" id="8260728">IsLoopback</span><span class="op" id="8260738">,</span>&nbsp;<span class="ident" id="8260740">IPv6linklocalallrouters</span><span class="op" id="8260763">,</span>&nbsp;<span class="builtintype" id="8260765">false</span><span class="op" id="8260770">}</span><span class="op" id="8260771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260774">{</span><span class="ident" id="8260775">IP</span><span class="op" id="8260777">.</span><span class="ident" id="8260778">IsMulticast</span><span class="op" id="8260789">,</span>&nbsp;<span class="ident" id="8260791">IPv4</span><span class="op" id="8260795">(</span><span class="num" id="8260796">224</span><span class="op" id="8260799">,</span>&nbsp;<span class="num" id="8260801">0</span><span class="op" id="8260802">,</span>&nbsp;<span class="num" id="8260804">0</span><span class="op" id="8260805">,</span>&nbsp;<span class="num" id="8260807">0</span><span class="op" id="8260808">)</span><span class="op" id="8260809">,</span>&nbsp;<span class="builtintype" id="8260811">true</span><span class="op" id="8260815">}</span><span class="op" id="8260816">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260819">{</span><span class="ident" id="8260820">IP</span><span class="op" id="8260822">.</span><span class="ident" id="8260823">IsMulticast</span><span class="op" id="8260834">,</span>&nbsp;<span class="ident" id="8260836">IPv4</span><span class="op" id="8260840">(</span><span class="num" id="8260841">239</span><span class="op" id="8260844">,</span>&nbsp;<span class="num" id="8260846">0</span><span class="op" id="8260847">,</span>&nbsp;<span class="num" id="8260849">0</span><span class="op" id="8260850">,</span>&nbsp;<span class="num" id="8260852">0</span><span class="op" id="8260853">)</span><span class="op" id="8260854">,</span>&nbsp;<span class="builtintype" id="8260856">true</span><span class="op" id="8260860">}</span><span class="op" id="8260861">,</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260864">{</span><span class="ident" id="8260865">IP</span><span class="op" id="8260867">.</span><span class="ident" id="8260868">IsMulticast</span><span class="op" id="8260879">,</span>&nbsp;<span class="ident" id="8260881">IPv4</span><span class="op" id="8260885">(</span><span class="num" id="8260886">240</span><span class="op" id="8260889">,</span>&nbsp;<span class="num" id="8260891">0</span><span class="op" id="8260892">,</span>&nbsp;<span class="num" id="8260894">0</span><span class="op" id="8260895">,</span>&nbsp;<span class="num" id="8260897">0</span><span class="op" id="8260898">)</span><span class="op" id="8260899">,</span>&nbsp;<span class="builtintype" id="8260901">false</span><span class="op" id="8260906">}</span><span class="op" id="8260907">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260910">{</span><span class="ident" id="8260911">IP</span><span class="op" id="8260913">.</span><span class="ident" id="8260914">IsMulticast</span><span class="op" id="8260925">,</span>&nbsp;<span class="ident" id="8260927">IPv6linklocalallnodes</span><span class="op" id="8260948">,</span>&nbsp;<span class="builtintype" id="8260950">true</span><span class="op" id="8260954">}</span><span class="op" id="8260955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8260958">{</span><span class="ident" id="8260959">IP</span><span class="op" id="8260961">.</span><span class="ident" id="8260962">IsMulticast</span><span class="op" id="8260973">,</span>&nbsp;<span class="ident" id="8260975">IP</span><span class="op" id="8260977">{</span><span class="num" id="8260978">0xff</span><span class="op" id="8260982">,</span>&nbsp;<span class="num" id="8260984">0x05</span><span class="op" id="8260988">,</span>&nbsp;<span class="num" id="8260990">0</span><span class="op" id="8260991">,</span>&nbsp;<span class="num" id="8260993">0</span><span class="op" id="8260994">,</span>&nbsp;<span class="num" id="8260996">0</span><span class="op" id="8260997">,</span>&nbsp;<span class="num" id="8260999">0</span><span class="op" id="8261000">,</span>&nbsp;<span class="num" id="8261002">0</span><span class="op" id="8261003">,</span>&nbsp;<span class="num" id="8261005">0</span><span class="op" id="8261006">,</span>&nbsp;<span class="num" id="8261008">0</span><span class="op" id="8261009">,</span>&nbsp;<span class="num" id="8261011">0</span><span class="op" id="8261012">,</span>&nbsp;<span class="num" id="8261014">0</span><span class="op" id="8261015">,</span>&nbsp;<span class="num" id="8261017">0</span><span class="op" id="8261018">,</span>&nbsp;<span class="num" id="8261020">0</span><span class="op" id="8261021">,</span>&nbsp;<span class="num" id="8261023">0</span><span class="op" id="8261024">,</span>&nbsp;<span class="num" id="8261026">0</span><span class="op" id="8261027">,</span>&nbsp;<span class="num" id="8261029">0</span><span class="op" id="8261030">}</span><span class="op" id="8261031">,</span>&nbsp;<span class="builtintype" id="8261033">true</span><span class="op" id="8261037">}</span><span class="op" id="8261038">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261041">{</span><span class="ident" id="8261042">IP</span><span class="op" id="8261044">.</span><span class="ident" id="8261045">IsMulticast</span><span class="op" id="8261056">,</span>&nbsp;<span class="ident" id="8261058">IP</span><span class="op" id="8261060">{</span><span class="num" id="8261061">0xfe</span><span class="op" id="8261065">,</span>&nbsp;<span class="num" id="8261067">0x80</span><span class="op" id="8261071">,</span>&nbsp;<span class="num" id="8261073">0</span><span class="op" id="8261074">,</span>&nbsp;<span class="num" id="8261076">0</span><span class="op" id="8261077">,</span>&nbsp;<span class="num" id="8261079">0</span><span class="op" id="8261080">,</span>&nbsp;<span class="num" id="8261082">0</span><span class="op" id="8261083">,</span>&nbsp;<span class="num" id="8261085">0</span><span class="op" id="8261086">,</span>&nbsp;<span class="num" id="8261088">0</span><span class="op" id="8261089">,</span>&nbsp;<span class="num" id="8261091">0</span><span class="op" id="8261092">,</span>&nbsp;<span class="num" id="8261094">0</span><span class="op" id="8261095">,</span>&nbsp;<span class="num" id="8261097">0</span><span class="op" id="8261098">,</span>&nbsp;<span class="num" id="8261100">0</span><span class="op" id="8261101">,</span>&nbsp;<span class="num" id="8261103">0</span><span class="op" id="8261104">,</span>&nbsp;<span class="num" id="8261106">0</span><span class="op" id="8261107">,</span>&nbsp;<span class="num" id="8261109">0</span><span class="op" id="8261110">,</span>&nbsp;<span class="num" id="8261112">0</span><span class="op" id="8261113">}</span><span class="op" id="8261114">,</span>&nbsp;<span class="builtintype" id="8261116">false</span><span class="op" id="8261121">}</span><span class="op" id="8261122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261125">{</span><span class="ident" id="8261126">IP</span><span class="op" id="8261128">.</span><span class="ident" id="8261129">IsLinkLocalMulticast</span><span class="op" id="8261149">,</span>&nbsp;<span class="ident" id="8261151">IPv4</span><span class="op" id="8261155">(</span><span class="num" id="8261156">224</span><span class="op" id="8261159">,</span>&nbsp;<span class="num" id="8261161">0</span><span class="op" id="8261162">,</span>&nbsp;<span class="num" id="8261164">0</span><span class="op" id="8261165">,</span>&nbsp;<span class="num" id="8261167">0</span><span class="op" id="8261168">)</span><span class="op" id="8261169">,</span>&nbsp;<span class="builtintype" id="8261171">true</span><span class="op" id="8261175">}</span><span class="op" id="8261176">,</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261179">{</span><span class="ident" id="8261180">IP</span><span class="op" id="8261182">.</span><span class="ident" id="8261183">IsLinkLocalMulticast</span><span class="op" id="8261203">,</span>&nbsp;<span class="ident" id="8261205">IPv4</span><span class="op" id="8261209">(</span><span class="num" id="8261210">239</span><span class="op" id="8261213">,</span>&nbsp;<span class="num" id="8261215">0</span><span class="op" id="8261216">,</span>&nbsp;<span class="num" id="8261218">0</span><span class="op" id="8261219">,</span>&nbsp;<span class="num" id="8261221">0</span><span class="op" id="8261222">)</span><span class="op" id="8261223">,</span>&nbsp;<span class="builtintype" id="8261225">false</span><span class="op" id="8261230">}</span><span class="op" id="8261231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261234">{</span><span class="ident" id="8261235">IP</span><span class="op" id="8261237">.</span><span class="ident" id="8261238">IsLinkLocalMulticast</span><span class="op" id="8261258">,</span>&nbsp;<span class="ident" id="8261260">IPv6linklocalallrouters</span><span class="op" id="8261283">,</span>&nbsp;<span class="builtintype" id="8261285">true</span><span class="op" id="8261289">}</span><span class="op" id="8261290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261293">{</span><span class="ident" id="8261294">IP</span><span class="op" id="8261296">.</span><span class="ident" id="8261297">IsLinkLocalMulticast</span><span class="op" id="8261317">,</span>&nbsp;<span class="ident" id="8261319">IP</span><span class="op" id="8261321">{</span><span class="num" id="8261322">0xff</span><span class="op" id="8261326">,</span>&nbsp;<span class="num" id="8261328">0x05</span><span class="op" id="8261332">,</span>&nbsp;<span class="num" id="8261334">0</span><span class="op" id="8261335">,</span>&nbsp;<span class="num" id="8261337">0</span><span class="op" id="8261338">,</span>&nbsp;<span class="num" id="8261340">0</span><span class="op" id="8261341">,</span>&nbsp;<span class="num" id="8261343">0</span><span class="op" id="8261344">,</span>&nbsp;<span class="num" id="8261346">0</span><span class="op" id="8261347">,</span>&nbsp;<span class="num" id="8261349">0</span><span class="op" id="8261350">,</span>&nbsp;<span class="num" id="8261352">0</span><span class="op" id="8261353">,</span>&nbsp;<span class="num" id="8261355">0</span><span class="op" id="8261356">,</span>&nbsp;<span class="num" id="8261358">0</span><span class="op" id="8261359">,</span>&nbsp;<span class="num" id="8261361">0</span><span class="op" id="8261362">,</span>&nbsp;<span class="num" id="8261364">0</span><span class="op" id="8261365">,</span>&nbsp;<span class="num" id="8261367">0</span><span class="op" id="8261368">,</span>&nbsp;<span class="num" id="8261370">0</span><span class="op" id="8261371">,</span>&nbsp;<span class="num" id="8261373">0</span><span class="op" id="8261374">}</span><span class="op" id="8261375">,</span>&nbsp;<span class="builtintype" id="8261377">false</span><span class="op" id="8261382">}</span><span class="op" id="8261383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261386">{</span><span class="ident" id="8261387">IP</span><span class="op" id="8261389">.</span><span class="ident" id="8261390">IsLinkLocalUnicast</span><span class="op" id="8261408">,</span>&nbsp;<span class="ident" id="8261410">IPv4</span><span class="op" id="8261414">(</span><span class="num" id="8261415">169</span><span class="op" id="8261418">,</span>&nbsp;<span class="num" id="8261420">254</span><span class="op" id="8261423">,</span>&nbsp;<span class="num" id="8261425">0</span><span class="op" id="8261426">,</span>&nbsp;<span class="num" id="8261428">0</span><span class="op" id="8261429">)</span><span class="op" id="8261430">,</span>&nbsp;<span class="builtintype" id="8261432">true</span><span class="op" id="8261436">}</span><span class="op" id="8261437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261440">{</span><span class="ident" id="8261441">IP</span><span class="op" id="8261443">.</span><span class="ident" id="8261444">IsLinkLocalUnicast</span><span class="op" id="8261462">,</span>&nbsp;<span class="ident" id="8261464">IPv4</span><span class="op" id="8261468">(</span><span class="num" id="8261469">169</span><span class="op" id="8261472">,</span>&nbsp;<span class="num" id="8261474">255</span><span class="op" id="8261477">,</span>&nbsp;<span class="num" id="8261479">0</span><span class="op" id="8261480">,</span>&nbsp;<span class="num" id="8261482">0</span><span class="op" id="8261483">)</span><span class="op" id="8261484">,</span>&nbsp;<span class="builtintype" id="8261486">false</span><span class="op" id="8261491">}</span><span class="op" id="8261492">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261495">{</span><span class="ident" id="8261496">IP</span><span class="op" id="8261498">.</span><span class="ident" id="8261499">IsLinkLocalUnicast</span><span class="op" id="8261517">,</span>&nbsp;<span class="ident" id="8261519">IP</span><span class="op" id="8261521">{</span><span class="num" id="8261522">0xfe</span><span class="op" id="8261526">,</span>&nbsp;<span class="num" id="8261528">0x80</span><span class="op" id="8261532">,</span>&nbsp;<span class="num" id="8261534">0</span><span class="op" id="8261535">,</span>&nbsp;<span class="num" id="8261537">0</span><span class="op" id="8261538">,</span>&nbsp;<span class="num" id="8261540">0</span><span class="op" id="8261541">,</span>&nbsp;<span class="num" id="8261543">0</span><span class="op" id="8261544">,</span>&nbsp;<span class="num" id="8261546">0</span><span class="op" id="8261547">,</span>&nbsp;<span class="num" id="8261549">0</span><span class="op" id="8261550">,</span>&nbsp;<span class="num" id="8261552">0</span><span class="op" id="8261553">,</span>&nbsp;<span class="num" id="8261555">0</span><span class="op" id="8261556">,</span>&nbsp;<span class="num" id="8261558">0</span><span class="op" id="8261559">,</span>&nbsp;<span class="num" id="8261561">0</span><span class="op" id="8261562">,</span>&nbsp;<span class="num" id="8261564">0</span><span class="op" id="8261565">,</span>&nbsp;<span class="num" id="8261567">0</span><span class="op" id="8261568">,</span>&nbsp;<span class="num" id="8261570">0</span><span class="op" id="8261571">,</span>&nbsp;<span class="num" id="8261573">0</span><span class="op" id="8261574">}</span><span class="op" id="8261575">,</span>&nbsp;<span class="builtintype" id="8261577">true</span><span class="op" id="8261581">}</span><span class="op" id="8261582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261585">{</span><span class="ident" id="8261586">IP</span><span class="op" id="8261588">.</span><span class="ident" id="8261589">IsLinkLocalUnicast</span><span class="op" id="8261607">,</span>&nbsp;<span class="ident" id="8261609">IP</span><span class="op" id="8261611">{</span><span class="num" id="8261612">0xfe</span><span class="op" id="8261616">,</span>&nbsp;<span class="num" id="8261618">0xc0</span><span class="op" id="8261622">,</span>&nbsp;<span class="num" id="8261624">0</span><span class="op" id="8261625">,</span>&nbsp;<span class="num" id="8261627">0</span><span class="op" id="8261628">,</span>&nbsp;<span class="num" id="8261630">0</span><span class="op" id="8261631">,</span>&nbsp;<span class="num" id="8261633">0</span><span class="op" id="8261634">,</span>&nbsp;<span class="num" id="8261636">0</span><span class="op" id="8261637">,</span>&nbsp;<span class="num" id="8261639">0</span><span class="op" id="8261640">,</span>&nbsp;<span class="num" id="8261642">0</span><span class="op" id="8261643">,</span>&nbsp;<span class="num" id="8261645">0</span><span class="op" id="8261646">,</span>&nbsp;<span class="num" id="8261648">0</span><span class="op" id="8261649">,</span>&nbsp;<span class="num" id="8261651">0</span><span class="op" id="8261652">,</span>&nbsp;<span class="num" id="8261654">0</span><span class="op" id="8261655">,</span>&nbsp;<span class="num" id="8261657">0</span><span class="op" id="8261658">,</span>&nbsp;<span class="num" id="8261660">0</span><span class="op" id="8261661">,</span>&nbsp;<span class="num" id="8261663">0</span><span class="op" id="8261664">}</span><span class="op" id="8261665">,</span>&nbsp;<span class="builtintype" id="8261667">false</span><span class="op" id="8261672">}</span><span class="op" id="8261673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261676">{</span><span class="ident" id="8261677">IP</span><span class="op" id="8261679">.</span><span class="ident" id="8261680">IsGlobalUnicast</span><span class="op" id="8261695">,</span>&nbsp;<span class="ident" id="8261697">IPv4</span><span class="op" id="8261701">(</span><span class="num" id="8261702">240</span><span class="op" id="8261705">,</span>&nbsp;<span class="num" id="8261707">0</span><span class="op" id="8261708">,</span>&nbsp;<span class="num" id="8261710">0</span><span class="op" id="8261711">,</span>&nbsp;<span class="num" id="8261713">0</span><span class="op" id="8261714">)</span><span class="op" id="8261715">,</span>&nbsp;<span class="builtintype" id="8261717">true</span><span class="op" id="8261721">}</span><span class="op" id="8261722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261725">{</span><span class="ident" id="8261726">IP</span><span class="op" id="8261728">.</span><span class="ident" id="8261729">IsGlobalUnicast</span><span class="op" id="8261744">,</span>&nbsp;<span class="ident" id="8261746">IPv4</span><span class="op" id="8261750">(</span><span class="num" id="8261751">232</span><span class="op" id="8261754">,</span>&nbsp;<span class="num" id="8261756">0</span><span class="op" id="8261757">,</span>&nbsp;<span class="num" id="8261759">0</span><span class="op" id="8261760">,</span>&nbsp;<span class="num" id="8261762">0</span><span class="op" id="8261763">)</span><span class="op" id="8261764">,</span>&nbsp;<span class="builtintype" id="8261766">false</span><span class="op" id="8261771">}</span><span class="op" id="8261772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261775">{</span><span class="ident" id="8261776">IP</span><span class="op" id="8261778">.</span><span class="ident" id="8261779">IsGlobalUnicast</span><span class="op" id="8261794">,</span>&nbsp;<span class="ident" id="8261796">IPv4</span><span class="op" id="8261800">(</span><span class="num" id="8261801">169</span><span class="op" id="8261804">,</span>&nbsp;<span class="num" id="8261806">254</span><span class="op" id="8261809">,</span>&nbsp;<span class="num" id="8261811">0</span><span class="op" id="8261812">,</span>&nbsp;<span class="num" id="8261814">0</span><span class="op" id="8261815">)</span><span class="op" id="8261816">,</span>&nbsp;<span class="builtintype" id="8261818">false</span><span class="op" id="8261823">}</span><span class="op" id="8261824">,</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261827">{</span><span class="ident" id="8261828">IP</span><span class="op" id="8261830">.</span><span class="ident" id="8261831">IsGlobalUnicast</span><span class="op" id="8261846">,</span>&nbsp;<span class="ident" id="8261848">IP</span><span class="op" id="8261850">{</span><span class="num" id="8261851">0x20</span><span class="op" id="8261855">,</span>&nbsp;<span class="num" id="8261857">0x1</span><span class="op" id="8261860">,</span>&nbsp;<span class="num" id="8261862">0xd</span><span class="op" id="8261865">,</span>&nbsp;<span class="num" id="8261867">0xb8</span><span class="op" id="8261871">,</span>&nbsp;<span class="num" id="8261873">0</span><span class="op" id="8261874">,</span>&nbsp;<span class="num" id="8261876">0</span><span class="op" id="8261877">,</span>&nbsp;<span class="num" id="8261879">0</span><span class="op" id="8261880">,</span>&nbsp;<span class="num" id="8261882">0</span><span class="op" id="8261883">,</span>&nbsp;<span class="num" id="8261885">0</span><span class="op" id="8261886">,</span>&nbsp;<span class="num" id="8261888">0</span><span class="op" id="8261889">,</span>&nbsp;<span class="num" id="8261891">0x1</span><span class="op" id="8261894">,</span>&nbsp;<span class="num" id="8261896">0x23</span><span class="op" id="8261900">,</span>&nbsp;<span class="num" id="8261902">0</span><span class="op" id="8261903">,</span>&nbsp;<span class="num" id="8261905">0x12</span><span class="op" id="8261909">,</span>&nbsp;<span class="num" id="8261911">0</span><span class="op" id="8261912">,</span>&nbsp;<span class="num" id="8261914">0x1</span><span class="op" id="8261917">}</span><span class="op" id="8261918">,</span>&nbsp;<span class="builtintype" id="8261920">true</span><span class="op" id="8261924">}</span><span class="op" id="8261925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8261928">{</span><span class="ident" id="8261929">IP</span><span class="op" id="8261931">.</span><span class="ident" id="8261932">IsGlobalUnicast</span><span class="op" id="8261947">,</span>&nbsp;<span class="ident" id="8261949">IP</span><span class="op" id="8261951">{</span><span class="num" id="8261952">0xfe</span><span class="op" id="8261956">,</span>&nbsp;<span class="num" id="8261958">0x80</span><span class="op" id="8261962">,</span>&nbsp;<span class="num" id="8261964">0</span><span class="op" id="8261965">,</span>&nbsp;<span class="num" id="8261967">0</span><span class="op" id="8261968">,</span>&nbsp;<span class="num" id="8261970">0</span><span class="op" id="8261971">,</span>&nbsp;<span class="num" id="8261973">0</span><span class="op" id="8261974">,</span>&nbsp;<span class="num" id="8261976">0</span><span class="op" id="8261977">,</span>&nbsp;<span class="num" id="8261979">0</span><span class="op" id="8261980">,</span>&nbsp;<span class="num" id="8261982">0</span><span class="op" id="8261983">,</span>&nbsp;<span class="num" id="8261985">0</span><span class="op" id="8261986">,</span>&nbsp;<span class="num" id="8261988">0</span><span class="op" id="8261989">,</span>&nbsp;<span class="num" id="8261991">0</span><span class="op" id="8261992">,</span>&nbsp;<span class="num" id="8261994">0</span><span class="op" id="8261995">,</span>&nbsp;<span class="num" id="8261997">0</span><span class="op" id="8261998">,</span>&nbsp;<span class="num" id="8262000">0</span><span class="op" id="8262001">,</span>&nbsp;<span class="num" id="8262003">0</span><span class="op" id="8262004">}</span><span class="op" id="8262005">,</span>&nbsp;<span class="builtintype" id="8262007">false</span><span class="op" id="8262012">}</span><span class="op" id="8262013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262016">{</span><span class="ident" id="8262017">IP</span><span class="op" id="8262019">.</span><span class="ident" id="8262020">IsGlobalUnicast</span><span class="op" id="8262035">,</span>&nbsp;<span class="ident" id="8262037">IP</span><span class="op" id="8262039">{</span><span class="num" id="8262040">0xff</span><span class="op" id="8262044">,</span>&nbsp;<span class="num" id="8262046">0x05</span><span class="op" id="8262050">,</span>&nbsp;<span class="num" id="8262052">0</span><span class="op" id="8262053">,</span>&nbsp;<span class="num" id="8262055">0</span><span class="op" id="8262056">,</span>&nbsp;<span class="num" id="8262058">0</span><span class="op" id="8262059">,</span>&nbsp;<span class="num" id="8262061">0</span><span class="op" id="8262062">,</span>&nbsp;<span class="num" id="8262064">0</span><span class="op" id="8262065">,</span>&nbsp;<span class="num" id="8262067">0</span><span class="op" id="8262068">,</span>&nbsp;<span class="num" id="8262070">0</span><span class="op" id="8262071">,</span>&nbsp;<span class="num" id="8262073">0</span><span class="op" id="8262074">,</span>&nbsp;<span class="num" id="8262076">0</span><span class="op" id="8262077">,</span>&nbsp;<span class="num" id="8262079">0</span><span class="op" id="8262080">,</span>&nbsp;<span class="num" id="8262082">0</span><span class="op" id="8262083">,</span>&nbsp;<span class="num" id="8262085">0</span><span class="op" id="8262086">,</span>&nbsp;<span class="num" id="8262088">0</span><span class="op" id="8262089">,</span>&nbsp;<span class="num" id="8262091">0</span><span class="op" id="8262092">}</span><span class="op" id="8262093">,</span>&nbsp;<span class="builtintype" id="8262095">false</span><span class="op" id="8262100">}</span><span class="op" id="8262101">,</span><br>
<span class="lineno"></span><span class="op" id="8262103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">455</span><span class="keyword" id="8262106">func</span>&nbsp;<span class="ident" id="8262111">name</span><span class="op" id="8262115">(</span><span class="ident" id="8262116">f</span>&nbsp;<span class="keyword" id="8262118">interface</span><span class="op" id="8262127">{</span><span class="op" id="8262128">}</span><span class="op" id="8262129">)</span>&nbsp;<span class="builtintype" id="8262131">string</span>&nbsp;<span class="op" id="8262138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262141">return</span>&nbsp;<span class="ident" id="8262148">runtime</span><span class="op" id="8262155">.</span><span class="ident" id="8262156">FuncForPC</span><span class="op" id="8262165">(</span><span class="ident" id="8262166">reflect</span><span class="op" id="8262173">.</span><span class="ident" id="8262174">ValueOf</span><span class="op" id="8262181">(</span><span class="ident" id="8262182">f</span><span class="op" id="8262183">)</span><span class="op" id="8262184">.</span><span class="ident" id="8262185">Pointer</span><span class="op" id="8262192">(</span><span class="op" id="8262193">)</span><span class="op" id="8262194">)</span><span class="op" id="8262195">.</span><span class="ident" id="8262196">Name</span><span class="op" id="8262200">(</span><span class="op" id="8262201">)</span><br>
<span class="lineno"></span><span class="op" id="8262203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8262206">func</span>&nbsp;<span class="ident" id="8262211">TestIPAddrScope</span><span class="op" id="8262226">(</span><span class="ident" id="8262227">t</span>&nbsp;<span class="op" id="8262229">*</span><span class="ident" id="8262230">testing</span><span class="op" id="8262237">.</span><span class="ident" id="8262238">T</span><span class="op" id="8262239">)</span>&nbsp;<span class="op" id="8262241">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262244">for</span>&nbsp;<span class="ident" id="8262248">_</span><span class="op" id="8262249">,</span>&nbsp;<span class="ident" id="8262251">tt</span>&nbsp;<span class="op" id="8262254">:=</span>&nbsp;<span class="keyword" id="8262257">range</span>&nbsp;<span class="ident" id="8262263">ipAddrScopeTests</span>&nbsp;<span class="op" id="8262280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8262284">if</span>&nbsp;<span class="ident" id="8262287">ok</span>&nbsp;<span class="op" id="8262290">:=</span>&nbsp;<span class="ident" id="8262293">tt</span><span class="op" id="8262295">.</span><span class="ident" id="8262296">scope</span><span class="op" id="8262301">(</span><span class="ident" id="8262302">tt</span><span class="op" id="8262304">.</span><span class="ident" id="8262305">in</span><span class="op" id="8262307">)</span><span class="op" id="8262308">;</span>&nbsp;<span class="ident" id="8262310">ok</span>&nbsp;<span class="op" id="8262313">!=</span>&nbsp;<span class="ident" id="8262316">tt</span><span class="op" id="8262318">.</span><span class="ident" id="8262319">ok</span>&nbsp;<span class="op" id="8262322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8262327">t</span><span class="op" id="8262328">.</span><span class="ident" id="8262329">Errorf</span><span class="op" id="8262335">(</span><span class="string" id="8262336">&#34;%s(%q)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8262358">,</span>&nbsp;<span class="ident" id="8262360">name</span><span class="op" id="8262364">(</span><span class="ident" id="8262365">tt</span><span class="op" id="8262367">.</span><span class="ident" id="8262368">scope</span><span class="op" id="8262373">)</span><span class="op" id="8262374">,</span>&nbsp;<span class="ident" id="8262376">tt</span><span class="op" id="8262378">.</span><span class="ident" id="8262379">in</span><span class="op" id="8262381">,</span>&nbsp;<span class="ident" id="8262383">ok</span><span class="op" id="8262385">,</span>&nbsp;<span class="ident" id="8262387">tt</span><span class="op" id="8262389">.</span><span class="ident" id="8262390">ok</span><span class="op" id="8262392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8262399">}</span><br>
<span class="lineno">465</span><span class="op" id="8262401">}</span>
</div>
</body>
</html>
