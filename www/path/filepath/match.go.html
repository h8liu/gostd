<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3037804">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3037859">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3037913">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3037964">package</span>&nbsp;<span class="ident" id="3037972">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3037982">import</span>&nbsp;<span class="op" id="3037989">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3037992">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3038002">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3038008">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3038019">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3038027">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3038038">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3038053">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="3038056">//&nbsp;ErrBadPattern&nbsp;indicates&nbsp;a&nbsp;globbing&nbsp;pattern&nbsp;was&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3038117">var</span>&nbsp;<span class="ident" id="3038121">ErrBadPattern</span>&nbsp;<span class="op" id="3038135">=</span>&nbsp;<span class="ident" id="3038137">errors</span><span class="op" id="3038143">.</span><span class="ident" id="3038144">New</span><span class="op" id="3038147">(</span><span class="string" id="3038148">&#34;syntax&nbsp;error&nbsp;in&nbsp;pattern&#34;</span><span class="op" id="3038173">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3038176">//&nbsp;Match&nbsp;returns&nbsp;true&nbsp;if&nbsp;name&nbsp;matches&nbsp;the&nbsp;shell&nbsp;file&nbsp;name&nbsp;pattern.</span><br>
<span class="lineno">20</span><span class="comment" id="3038243">//&nbsp;The&nbsp;pattern&nbsp;syntax&nbsp;is:</span><br>
<span class="lineno"></span><span class="comment" id="3038269">//</span><br>
<span class="lineno"></span><span class="comment" id="3038272">//&nbsp;&nbsp;&nbsp;&nbsppattern:</span><br>
<span class="lineno"></span><span class="comment" id="3038284">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp{&nbsp;term&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="3038297">//&nbsp;&nbsp;&nbsp;&nbspterm:</span><br>
<span class="lineno">25</span><span class="comment" id="3038306">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;*&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;sequence&nbsp;of&nbsp;non-Separator&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="3038371">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;?&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;any&nbsp;single&nbsp;non-Separator&nbsp;character</span><br>
<span class="lineno"></span><span class="comment" id="3038430">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;[&#39;&nbsp;[&nbsp;&#39;^&#39;&nbsp;]&nbsp;{&nbsp;character-range&nbsp;}&nbsp;&#39;]&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3038470">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;character&nbsp;class&nbsp;(must&nbsp;be&nbsp;non-empty)</span><br>
<span class="lineno"></span><span class="comment" id="3038522">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;*&#39;,&nbsp;&#39;?&#39;,&nbsp;&#39;\\&#39;,&nbsp;&#39;[&#39;)</span><br>
<span class="lineno">30</span><span class="comment" id="3038585">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno"></span><span class="comment" id="3038621">//</span><br>
<span class="lineno"></span><span class="comment" id="3038624">//&nbsp;&nbsp;&nbsp;&nbspcharacter-range:</span><br>
<span class="lineno"></span><span class="comment" id="3038644">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbspc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;(c&nbsp;!=&nbsp;&#39;\\&#39;,&nbsp;&#39;-&#39;,&nbsp;&#39;]&#39;)</span><br>
<span class="lineno"></span><span class="comment" id="3038702">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#39;\\&#39;&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c</span><br>
<span class="lineno">35</span><span class="comment" id="3038738">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsplo&nbsp;&#39;-&#39;&nbsp;hi&nbsp;&nbsp;&nbsp;matches&nbsp;character&nbsp;c&nbsp;for&nbsp;lo&nbsp;&lt;=&nbsp;c&nbsp;&lt;=&nbsp;hi</span><br>
<span class="lineno"></span><span class="comment" id="3038792">//</span><br>
<span class="lineno"></span><span class="comment" id="3038795">//&nbsp;Match&nbsp;requires&nbsp;pattern&nbsp;to&nbsp;match&nbsp;all&nbsp;of&nbsp;name,&nbsp;not&nbsp;just&nbsp;a&nbsp;substring.</span><br>
<span class="lineno"></span><span class="comment" id="3038865">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3038932">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno">40</span><span class="comment" id="3038949">//</span><br>
<span class="lineno"></span><span class="comment" id="3038952">//&nbsp;On&nbsp;Windows,&nbsp;escaping&nbsp;is&nbsp;disabled.&nbsp;Instead,&nbsp;&#39;\\&#39;&nbsp;is&nbsp;treated&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3039017">//&nbsp;path&nbsp;separator.</span><br>
<span class="lineno"></span><span class="comment" id="3039036">//</span><br>
<span class="lineno"></span><span class="keyword" id="3039039">func</span>&nbsp;<span class="ident" id="3039044">Match</span><span class="op" id="3039049">(</span><span class="ident" id="3039050">pattern</span><span class="op" id="3039057">,</span>&nbsp;<span class="ident" id="3039059">name</span>&nbsp;<span class="builtintype" id="3039064">string</span><span class="op" id="3039070">)</span>&nbsp;<span class="op" id="3039072">(</span><span class="ident" id="3039073">matched</span>&nbsp;<span class="builtintype" id="3039081">bool</span><span class="op" id="3039085">,</span>&nbsp;<span class="ident" id="3039087">err</span>&nbsp;<span class="builtintype" id="3039091">error</span><span class="op" id="3039096">)</span>&nbsp;<span class="op" id="3039098">{</span><br>
<span class="lineno">45</span><span class="ident" id="3039100">Pattern</span><span class="op" id="3039107">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039110">for</span>&nbsp;<span class="builtinfunc" id="3039114">len</span><span class="op" id="3039117">(</span><span class="ident" id="3039118">pattern</span><span class="op" id="3039125">)</span>&nbsp;<span class="op" id="3039127">&gt;</span>&nbsp;<span class="num" id="3039129">0</span>&nbsp;<span class="op" id="3039131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039135">var</span>&nbsp;<span class="ident" id="3039139">star</span>&nbsp;<span class="builtintype" id="3039144">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039151">var</span>&nbsp;<span class="ident" id="3039155">chunk</span>&nbsp;<span class="builtintype" id="3039161">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039170">star</span><span class="op" id="3039174">,</span>&nbsp;<span class="ident" id="3039176">chunk</span><span class="op" id="3039181">,</span>&nbsp;<span class="ident" id="3039183">pattern</span>&nbsp;<span class="op" id="3039191">=</span>&nbsp;<span class="ident" id="3039193">scanChunk</span><span class="op" id="3039202">(</span><span class="ident" id="3039203">pattern</span><span class="op" id="3039210">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039214">if</span>&nbsp;<span class="ident" id="3039217">star</span>&nbsp;<span class="op" id="3039222">&amp;&amp;</span>&nbsp;<span class="ident" id="3039225">chunk</span>&nbsp;<span class="op" id="3039231">==</span>&nbsp;<span class="string" id="3039234">&#34;&#34;</span>&nbsp;<span class="op" id="3039237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039242">//&nbsp;Trailing&nbsp;*&nbsp;matches&nbsp;rest&nbsp;of&nbsp;string&nbsp;unless&nbsp;it&nbsp;has&nbsp;a&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039301">return</span>&nbsp;<span class="ident" id="3039308">strings</span><span class="op" id="3039315">.</span><span class="ident" id="3039316">Index</span><span class="op" id="3039321">(</span><span class="ident" id="3039322">name</span><span class="op" id="3039326">,</span>&nbsp;<span class="builtintype" id="3039328">string</span><span class="op" id="3039334">(</span><span class="ident" id="3039335">Separator</span><span class="op" id="3039344">)</span><span class="op" id="3039345">)</span>&nbsp;<span class="op" id="3039347">&lt;</span>&nbsp;<span class="num" id="3039349">0</span><span class="op" id="3039350">,</span>&nbsp;<span class="ident" id="3039352">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3039358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039362">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;at&nbsp;current&nbsp;position.</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039403">t</span><span class="op" id="3039404">,</span>&nbsp;<span class="ident" id="3039406">ok</span><span class="op" id="3039408">,</span>&nbsp;<span class="ident" id="3039410">err</span>&nbsp;<span class="op" id="3039414">:=</span>&nbsp;<span class="ident" id="3039417">matchChunk</span><span class="op" id="3039427">(</span><span class="ident" id="3039428">chunk</span><span class="op" id="3039433">,</span>&nbsp;<span class="ident" id="3039435">name</span><span class="op" id="3039439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039443">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&#39;ve&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039508">//&nbsp;otherwise&nbsp;we&#39;ll&nbsp;give&nbsp;a&nbsp;false&nbsp;result&nbsp;even&nbsp;if&nbsp;we&nbsp;could&nbsp;still&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039578">//&nbsp;using&nbsp;the&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039598">if</span>&nbsp;<span class="ident" id="3039601">ok</span>&nbsp;<span class="op" id="3039604">&amp;&amp;</span>&nbsp;<span class="op" id="3039607">(</span><span class="builtinfunc" id="3039608">len</span><span class="op" id="3039611">(</span><span class="ident" id="3039612">t</span><span class="op" id="3039613">)</span>&nbsp;<span class="op" id="3039615">==</span>&nbsp;<span class="num" id="3039618">0</span>&nbsp;<span class="op" id="3039620">||</span>&nbsp;<span class="builtinfunc" id="3039623">len</span><span class="op" id="3039626">(</span><span class="ident" id="3039627">pattern</span><span class="op" id="3039634">)</span>&nbsp;<span class="op" id="3039636">&gt;</span>&nbsp;<span class="num" id="3039638">0</span><span class="op" id="3039639">)</span>&nbsp;<span class="op" id="3039641">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039646">name</span>&nbsp;<span class="op" id="3039651">=</span>&nbsp;<span class="ident" id="3039653">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039658">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3039669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039673">if</span>&nbsp;<span class="ident" id="3039676">err</span>&nbsp;<span class="op" id="3039680">!=</span>&nbsp;<span class="ident" id="3039683">nil</span>&nbsp;<span class="op" id="3039687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039692">return</span>&nbsp;<span class="ident" id="3039699">false</span><span class="op" id="3039704">,</span>&nbsp;<span class="ident" id="3039706">err</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3039712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039716">if</span>&nbsp;<span class="ident" id="3039719">star</span>&nbsp;<span class="op" id="3039724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039729">//&nbsp;Look&nbsp;for&nbsp;match&nbsp;skipping&nbsp;i+1&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039770">//&nbsp;Cannot&nbsp;skip&nbsp;/.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039791">for</span>&nbsp;<span class="ident" id="3039795">i</span>&nbsp;<span class="op" id="3039797">:=</span>&nbsp;<span class="num" id="3039800">0</span><span class="op" id="3039801">;</span>&nbsp;<span class="ident" id="3039803">i</span>&nbsp;<span class="op" id="3039805">&lt;</span>&nbsp;<span class="builtinfunc" id="3039807">len</span><span class="op" id="3039810">(</span><span class="ident" id="3039811">name</span><span class="op" id="3039815">)</span>&nbsp;<span class="op" id="3039817">&amp;&amp;</span>&nbsp;<span class="ident" id="3039820">name</span><span class="op" id="3039824">[</span><span class="ident" id="3039825">i</span><span class="op" id="3039826">]</span>&nbsp;<span class="op" id="3039828">!=</span>&nbsp;<span class="ident" id="3039831">Separator</span><span class="op" id="3039840">;</span>&nbsp;<span class="ident" id="3039842">i</span><span class="op" id="3039843">++</span>&nbsp;<span class="op" id="3039846">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039852">t</span><span class="op" id="3039853">,</span>&nbsp;<span class="ident" id="3039855">ok</span><span class="op" id="3039857">,</span>&nbsp;<span class="ident" id="3039859">err</span>&nbsp;<span class="op" id="3039863">:=</span>&nbsp;<span class="ident" id="3039866">matchChunk</span><span class="op" id="3039876">(</span><span class="ident" id="3039877">chunk</span><span class="op" id="3039882">,</span>&nbsp;<span class="ident" id="3039884">name</span><span class="op" id="3039888">[</span><span class="ident" id="3039889">i</span><span class="op" id="3039890">+</span><span class="num" id="3039891">1</span><span class="op" id="3039892">:</span><span class="op" id="3039893">]</span><span class="op" id="3039894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039900">if</span>&nbsp;<span class="ident" id="3039903">ok</span>&nbsp;<span class="op" id="3039906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039913">//&nbsp;if&nbsp;we&#39;re&nbsp;the&nbsp;last&nbsp;chunk,&nbsp;make&nbsp;sure&nbsp;we&nbsp;exhausted&nbsp;the&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039978">if</span>&nbsp;<span class="builtinfunc" id="3039981">len</span><span class="op" id="3039984">(</span><span class="ident" id="3039985">pattern</span><span class="op" id="3039992">)</span>&nbsp;<span class="op" id="3039994">==</span>&nbsp;<span class="num" id="3039997">0</span>&nbsp;<span class="op" id="3039999">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3040002">len</span><span class="op" id="3040005">(</span><span class="ident" id="3040006">t</span><span class="op" id="3040007">)</span>&nbsp;<span class="op" id="3040009">&gt;</span>&nbsp;<span class="num" id="3040011">0</span>&nbsp;<span class="op" id="3040013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040021">continue</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040042">name</span>&nbsp;<span class="op" id="3040047">=</span>&nbsp;<span class="ident" id="3040049">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040056">continue</span>&nbsp;<span class="ident" id="3040065">Pattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040083">if</span>&nbsp;<span class="ident" id="3040086">err</span>&nbsp;<span class="op" id="3040090">!=</span>&nbsp;<span class="ident" id="3040093">nil</span>&nbsp;<span class="op" id="3040097">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040104">return</span>&nbsp;<span class="ident" id="3040111">false</span><span class="op" id="3040116">,</span>&nbsp;<span class="ident" id="3040118">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040139">return</span>&nbsp;<span class="ident" id="3040146">false</span><span class="op" id="3040151">,</span>&nbsp;<span class="ident" id="3040153">nil</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040161">return</span>&nbsp;<span class="builtinfunc" id="3040168">len</span><span class="op" id="3040171">(</span><span class="ident" id="3040172">name</span><span class="op" id="3040176">)</span>&nbsp;<span class="op" id="3040178">==</span>&nbsp;<span class="num" id="3040181">0</span><span class="op" id="3040182">,</span>&nbsp;<span class="ident" id="3040184">nil</span><br>
<span class="lineno"></span><span class="op" id="3040188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3040191">//&nbsp;scanChunk&nbsp;gets&nbsp;the&nbsp;next&nbsp;segment&nbsp;of&nbsp;pattern,&nbsp;which&nbsp;is&nbsp;a&nbsp;non-star&nbsp;string</span><br>
<span class="lineno">90</span><span class="comment" id="3040265">//&nbsp;possibly&nbsp;preceded&nbsp;by&nbsp;a&nbsp;star.</span><br>
<span class="lineno"></span><span class="keyword" id="3040297">func</span>&nbsp;<span class="ident" id="3040302">scanChunk</span><span class="op" id="3040311">(</span><span class="ident" id="3040312">pattern</span>&nbsp;<span class="builtintype" id="3040320">string</span><span class="op" id="3040326">)</span>&nbsp;<span class="op" id="3040328">(</span><span class="ident" id="3040329">star</span>&nbsp;<span class="builtintype" id="3040334">bool</span><span class="op" id="3040338">,</span>&nbsp;<span class="ident" id="3040340">chunk</span><span class="op" id="3040345">,</span>&nbsp;<span class="ident" id="3040347">rest</span>&nbsp;<span class="builtintype" id="3040352">string</span><span class="op" id="3040358">)</span>&nbsp;<span class="op" id="3040360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040363">for</span>&nbsp;<span class="builtinfunc" id="3040367">len</span><span class="op" id="3040370">(</span><span class="ident" id="3040371">pattern</span><span class="op" id="3040378">)</span>&nbsp;<span class="op" id="3040380">&gt;</span>&nbsp;<span class="num" id="3040382">0</span>&nbsp;<span class="op" id="3040384">&amp;&amp;</span>&nbsp;<span class="ident" id="3040387">pattern</span><span class="op" id="3040394">[</span><span class="num" id="3040395">0</span><span class="op" id="3040396">]</span>&nbsp;<span class="op" id="3040398">==</span>&nbsp;<span class="string" id="3040401">&#39;*&#39;</span>&nbsp;<span class="op" id="3040405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040409">pattern</span>&nbsp;<span class="op" id="3040417">=</span>&nbsp;<span class="ident" id="3040419">pattern</span><span class="op" id="3040426">[</span><span class="num" id="3040427">1</span><span class="op" id="3040428">:</span><span class="op" id="3040429">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040433">star</span>&nbsp;<span class="op" id="3040438">=</span>&nbsp;<span class="ident" id="3040440">true</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040449">inrange</span>&nbsp;<span class="op" id="3040457">:=</span>&nbsp;<span class="ident" id="3040460">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040467">var</span>&nbsp;<span class="ident" id="3040471">i</span>&nbsp;<span class="builtintype" id="3040473">int</span><br>
<span class="lineno"></span><span class="ident" id="3040477">Scan</span><span class="op" id="3040481">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040484">for</span>&nbsp;<span class="ident" id="3040488">i</span>&nbsp;<span class="op" id="3040490">=</span>&nbsp;<span class="num" id="3040492">0</span><span class="op" id="3040493">;</span>&nbsp;<span class="ident" id="3040495">i</span>&nbsp;<span class="op" id="3040497">&lt;</span>&nbsp;<span class="builtinfunc" id="3040499">len</span><span class="op" id="3040502">(</span><span class="ident" id="3040503">pattern</span><span class="op" id="3040510">)</span><span class="op" id="3040511">;</span>&nbsp;<span class="ident" id="3040513">i</span><span class="op" id="3040514">++</span>&nbsp;<span class="op" id="3040517">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040521">switch</span>&nbsp;<span class="ident" id="3040528">pattern</span><span class="op" id="3040535">[</span><span class="ident" id="3040536">i</span><span class="op" id="3040537">]</span>&nbsp;<span class="op" id="3040539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040543">case</span>&nbsp;<span class="string" id="3040548">&#39;\\&#39;</span><span class="op" id="3040552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040557">if</span>&nbsp;<span class="ident" id="3040560">runtime</span><span class="op" id="3040567">.</span><span class="ident" id="3040568">GOOS</span>&nbsp;<span class="op" id="3040573">!=</span>&nbsp;<span class="string" id="3040576">&#34;windows&#34;</span>&nbsp;<span class="op" id="3040586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3040592">//&nbsp;error&nbsp;check&nbsp;handled&nbsp;in&nbsp;matchChunk:&nbsp;bad&nbsp;pattern.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040647">if</span>&nbsp;<span class="ident" id="3040650">i</span><span class="op" id="3040651">+</span><span class="num" id="3040652">1</span>&nbsp;<span class="op" id="3040654">&lt;</span>&nbsp;<span class="builtinfunc" id="3040656">len</span><span class="op" id="3040659">(</span><span class="ident" id="3040660">pattern</span><span class="op" id="3040667">)</span>&nbsp;<span class="op" id="3040669">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040676">i</span><span class="op" id="3040677">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040693">case</span>&nbsp;<span class="string" id="3040698">&#39;[&#39;</span><span class="op" id="3040701">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040706">inrange</span>&nbsp;<span class="op" id="3040714">=</span>&nbsp;<span class="ident" id="3040716">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040723">case</span>&nbsp;<span class="string" id="3040728">&#39;]&#39;</span><span class="op" id="3040731">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040736">inrange</span>&nbsp;<span class="op" id="3040744">=</span>&nbsp;<span class="ident" id="3040746">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040754">case</span>&nbsp;<span class="string" id="3040759">&#39;*&#39;</span><span class="op" id="3040762">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040767">if</span>&nbsp;<span class="op" id="3040770">!</span><span class="ident" id="3040771">inrange</span>&nbsp;<span class="op" id="3040779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040785">break</span>&nbsp;<span class="ident" id="3040791">Scan</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040809">return</span>&nbsp;<span class="ident" id="3040816">star</span><span class="op" id="3040820">,</span>&nbsp;<span class="ident" id="3040822">pattern</span><span class="op" id="3040829">[</span><span class="num" id="3040830">0</span><span class="op" id="3040831">:</span><span class="ident" id="3040832">i</span><span class="op" id="3040833">]</span><span class="op" id="3040834">,</span>&nbsp;<span class="ident" id="3040836">pattern</span><span class="op" id="3040843">[</span><span class="ident" id="3040844">i</span><span class="op" id="3040845">:</span><span class="op" id="3040846">]</span><br>
<span class="lineno"></span><span class="op" id="3040848">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="3040851">//&nbsp;matchChunk&nbsp;checks&nbsp;whether&nbsp;chunk&nbsp;matches&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s.</span><br>
<span class="lineno"></span><span class="comment" id="3040914">//&nbsp;If&nbsp;so,&nbsp;it&nbsp;returns&nbsp;the&nbsp;remainder&nbsp;of&nbsp;s&nbsp;(after&nbsp;the&nbsp;match).</span><br>
<span class="lineno"></span><span class="comment" id="3040973">//&nbsp;Chunk&nbsp;is&nbsp;all&nbsp;single-character&nbsp;operators:&nbsp;literals,&nbsp;char&nbsp;classes,&nbsp;and&nbsp;?.</span><br>
<span class="lineno"></span><span class="keyword" id="3041048">func</span>&nbsp;<span class="ident" id="3041053">matchChunk</span><span class="op" id="3041063">(</span><span class="ident" id="3041064">chunk</span><span class="op" id="3041069">,</span>&nbsp;<span class="ident" id="3041071">s</span>&nbsp;<span class="builtintype" id="3041073">string</span><span class="op" id="3041079">)</span>&nbsp;<span class="op" id="3041081">(</span><span class="ident" id="3041082">rest</span>&nbsp;<span class="builtintype" id="3041087">string</span><span class="op" id="3041093">,</span>&nbsp;<span class="ident" id="3041095">ok</span>&nbsp;<span class="builtintype" id="3041098">bool</span><span class="op" id="3041102">,</span>&nbsp;<span class="ident" id="3041104">err</span>&nbsp;<span class="builtintype" id="3041108">error</span><span class="op" id="3041113">)</span>&nbsp;<span class="op" id="3041115">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041118">for</span>&nbsp;<span class="builtinfunc" id="3041122">len</span><span class="op" id="3041125">(</span><span class="ident" id="3041126">chunk</span><span class="op" id="3041131">)</span>&nbsp;<span class="op" id="3041133">&gt;</span>&nbsp;<span class="num" id="3041135">0</span>&nbsp;<span class="op" id="3041137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041141">if</span>&nbsp;<span class="builtinfunc" id="3041144">len</span><span class="op" id="3041147">(</span><span class="ident" id="3041148">s</span><span class="op" id="3041149">)</span>&nbsp;<span class="op" id="3041151">==</span>&nbsp;<span class="num" id="3041154">0</span>&nbsp;<span class="op" id="3041156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041161">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041174">switch</span>&nbsp;<span class="ident" id="3041181">chunk</span><span class="op" id="3041186">[</span><span class="num" id="3041187">0</span><span class="op" id="3041188">]</span>&nbsp;<span class="op" id="3041190">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041194">case</span>&nbsp;<span class="string" id="3041199">&#39;[&#39;</span><span class="op" id="3041202">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041207">//&nbsp;character&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041229">r</span><span class="op" id="3041230">,</span>&nbsp;<span class="ident" id="3041232">n</span>&nbsp;<span class="op" id="3041234">:=</span>&nbsp;<span class="ident" id="3041237">utf8</span><span class="op" id="3041241">.</span><span class="ident" id="3041242">DecodeRuneInString</span><span class="op" id="3041260">(</span><span class="ident" id="3041261">s</span><span class="op" id="3041262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041267">s</span>&nbsp;<span class="op" id="3041269">=</span>&nbsp;<span class="ident" id="3041271">s</span><span class="op" id="3041272">[</span><span class="ident" id="3041273">n</span><span class="op" id="3041274">:</span><span class="op" id="3041275">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041280">chunk</span>&nbsp;<span class="op" id="3041286">=</span>&nbsp;<span class="ident" id="3041288">chunk</span><span class="op" id="3041293">[</span><span class="num" id="3041294">1</span><span class="op" id="3041295">:</span><span class="op" id="3041296">]</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041301">//&nbsp;We&nbsp;can&#39;t&nbsp;end&nbsp;right&nbsp;after&nbsp;&#39;[&#39;,&nbsp;we&#39;re&nbsp;expecting&nbsp;at&nbsp;least</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041362">//&nbsp;a&nbsp;closing&nbsp;bracket&nbsp;and&nbsp;possibly&nbsp;a&nbsp;caret.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041408">if</span>&nbsp;<span class="builtinfunc" id="3041411">len</span><span class="op" id="3041414">(</span><span class="ident" id="3041415">chunk</span><span class="op" id="3041420">)</span>&nbsp;<span class="op" id="3041422">==</span>&nbsp;<span class="num" id="3041425">0</span>&nbsp;<span class="op" id="3041427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041433">err</span>&nbsp;<span class="op" id="3041437">=</span>&nbsp;<span class="ident" id="3041439">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041457">return</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041472">//&nbsp;possibly&nbsp;negated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041495">negated</span>&nbsp;<span class="op" id="3041503">:=</span>&nbsp;<span class="ident" id="3041506">chunk</span><span class="op" id="3041511">[</span><span class="num" id="3041512">0</span><span class="op" id="3041513">]</span>&nbsp;<span class="op" id="3041515">==</span>&nbsp;<span class="string" id="3041518">&#39;^&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041525">if</span>&nbsp;<span class="ident" id="3041528">negated</span>&nbsp;<span class="op" id="3041536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041542">chunk</span>&nbsp;<span class="op" id="3041548">=</span>&nbsp;<span class="ident" id="3041550">chunk</span><span class="op" id="3041555">[</span><span class="num" id="3041556">1</span><span class="op" id="3041557">:</span><span class="op" id="3041558">]</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041568">//&nbsp;parse&nbsp;all&nbsp;ranges</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041591">match</span>&nbsp;<span class="op" id="3041597">:=</span>&nbsp;<span class="ident" id="3041600">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041609">nrange</span>&nbsp;<span class="op" id="3041616">:=</span>&nbsp;<span class="num" id="3041619">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041624">for</span>&nbsp;<span class="op" id="3041628">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041634">if</span>&nbsp;<span class="builtinfunc" id="3041637">len</span><span class="op" id="3041640">(</span><span class="ident" id="3041641">chunk</span><span class="op" id="3041646">)</span>&nbsp;<span class="op" id="3041648">&gt;</span>&nbsp;<span class="num" id="3041650">0</span>&nbsp;<span class="op" id="3041652">&amp;&amp;</span>&nbsp;<span class="ident" id="3041655">chunk</span><span class="op" id="3041660">[</span><span class="num" id="3041661">0</span><span class="op" id="3041662">]</span>&nbsp;<span class="op" id="3041664">==</span>&nbsp;<span class="string" id="3041667">&#39;]&#39;</span>&nbsp;<span class="op" id="3041671">&amp;&amp;</span>&nbsp;<span class="ident" id="3041674">nrange</span>&nbsp;<span class="op" id="3041681">&gt;</span>&nbsp;<span class="num" id="3041683">0</span>&nbsp;<span class="op" id="3041685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041692">chunk</span>&nbsp;<span class="op" id="3041698">=</span>&nbsp;<span class="ident" id="3041700">chunk</span><span class="op" id="3041705">[</span><span class="num" id="3041706">1</span><span class="op" id="3041707">:</span><span class="op" id="3041708">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041715">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041731">var</span>&nbsp;<span class="ident" id="3041735">lo</span><span class="op" id="3041737">,</span>&nbsp;<span class="ident" id="3041739">hi</span>&nbsp;<span class="builtintype" id="3041742">rune</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041751">if</span>&nbsp;<span class="ident" id="3041754">lo</span><span class="op" id="3041756">,</span>&nbsp;<span class="ident" id="3041758">chunk</span><span class="op" id="3041763">,</span>&nbsp;<span class="ident" id="3041765">err</span>&nbsp;<span class="op" id="3041769">=</span>&nbsp;<span class="ident" id="3041771">getEsc</span><span class="op" id="3041777">(</span><span class="ident" id="3041778">chunk</span><span class="op" id="3041783">)</span><span class="op" id="3041784">;</span>&nbsp;<span class="ident" id="3041786">err</span>&nbsp;<span class="op" id="3041790">!=</span>&nbsp;<span class="ident" id="3041793">nil</span>&nbsp;<span class="op" id="3041797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041804">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041821">hi</span>&nbsp;<span class="op" id="3041824">=</span>&nbsp;<span class="ident" id="3041826">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041833">if</span>&nbsp;<span class="ident" id="3041836">chunk</span><span class="op" id="3041841">[</span><span class="num" id="3041842">0</span><span class="op" id="3041843">]</span>&nbsp;<span class="op" id="3041845">==</span>&nbsp;<span class="string" id="3041848">&#39;-&#39;</span>&nbsp;<span class="op" id="3041852">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041859">if</span>&nbsp;<span class="ident" id="3041862">hi</span><span class="op" id="3041864">,</span>&nbsp;<span class="ident" id="3041866">chunk</span><span class="op" id="3041871">,</span>&nbsp;<span class="ident" id="3041873">err</span>&nbsp;<span class="op" id="3041877">=</span>&nbsp;<span class="ident" id="3041879">getEsc</span><span class="op" id="3041885">(</span><span class="ident" id="3041886">chunk</span><span class="op" id="3041891">[</span><span class="num" id="3041892">1</span><span class="op" id="3041893">:</span><span class="op" id="3041894">]</span><span class="op" id="3041895">)</span><span class="op" id="3041896">;</span>&nbsp;<span class="ident" id="3041898">err</span>&nbsp;<span class="op" id="3041902">!=</span>&nbsp;<span class="ident" id="3041905">nil</span>&nbsp;<span class="op" id="3041909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041917">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041941">if</span>&nbsp;<span class="ident" id="3041944">lo</span>&nbsp;<span class="op" id="3041947">&lt;=</span>&nbsp;<span class="ident" id="3041950">r</span>&nbsp;<span class="op" id="3041952">&amp;&amp;</span>&nbsp;<span class="ident" id="3041955">r</span>&nbsp;<span class="op" id="3041957">&lt;=</span>&nbsp;<span class="ident" id="3041960">hi</span>&nbsp;<span class="op" id="3041963">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041970">match</span>&nbsp;<span class="op" id="3041976">=</span>&nbsp;<span class="ident" id="3041978">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041993">nrange</span><span class="op" id="3041999">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042010">if</span>&nbsp;<span class="ident" id="3042013">match</span>&nbsp;<span class="op" id="3042019">==</span>&nbsp;<span class="ident" id="3042022">negated</span>&nbsp;<span class="op" id="3042030">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042036">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042051">case</span>&nbsp;<span class="string" id="3042056">&#39;?&#39;</span><span class="op" id="3042059">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042064">if</span>&nbsp;<span class="ident" id="3042067">s</span><span class="op" id="3042068">[</span><span class="num" id="3042069">0</span><span class="op" id="3042070">]</span>&nbsp;<span class="op" id="3042072">==</span>&nbsp;<span class="ident" id="3042075">Separator</span>&nbsp;<span class="op" id="3042085">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042091">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042106">_</span><span class="op" id="3042107">,</span>&nbsp;<span class="ident" id="3042109">n</span>&nbsp;<span class="op" id="3042111">:=</span>&nbsp;<span class="ident" id="3042114">utf8</span><span class="op" id="3042118">.</span><span class="ident" id="3042119">DecodeRuneInString</span><span class="op" id="3042137">(</span><span class="ident" id="3042138">s</span><span class="op" id="3042139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042144">s</span>&nbsp;<span class="op" id="3042146">=</span>&nbsp;<span class="ident" id="3042148">s</span><span class="op" id="3042149">[</span><span class="ident" id="3042150">n</span><span class="op" id="3042151">:</span><span class="op" id="3042152">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042157">chunk</span>&nbsp;<span class="op" id="3042163">=</span>&nbsp;<span class="ident" id="3042165">chunk</span><span class="op" id="3042170">[</span><span class="num" id="3042171">1</span><span class="op" id="3042172">:</span><span class="op" id="3042173">]</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042178">case</span>&nbsp;<span class="string" id="3042183">&#39;\\&#39;</span><span class="op" id="3042187">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042192">if</span>&nbsp;<span class="ident" id="3042195">runtime</span><span class="op" id="3042202">.</span><span class="ident" id="3042203">GOOS</span>&nbsp;<span class="op" id="3042208">!=</span>&nbsp;<span class="string" id="3042211">&#34;windows&#34;</span>&nbsp;<span class="op" id="3042221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042227">chunk</span>&nbsp;<span class="op" id="3042233">=</span>&nbsp;<span class="ident" id="3042235">chunk</span><span class="op" id="3042240">[</span><span class="num" id="3042241">1</span><span class="op" id="3042242">:</span><span class="op" id="3042243">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042249">if</span>&nbsp;<span class="builtinfunc" id="3042252">len</span><span class="op" id="3042255">(</span><span class="ident" id="3042256">chunk</span><span class="op" id="3042261">)</span>&nbsp;<span class="op" id="3042263">==</span>&nbsp;<span class="num" id="3042266">0</span>&nbsp;<span class="op" id="3042268">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042275">err</span>&nbsp;<span class="op" id="3042279">=</span>&nbsp;<span class="ident" id="3042281">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042300">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042316">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042321">fallthrough</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042336">default</span><span class="op" id="3042343">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042348">if</span>&nbsp;<span class="ident" id="3042351">chunk</span><span class="op" id="3042356">[</span><span class="num" id="3042357">0</span><span class="op" id="3042358">]</span>&nbsp;<span class="op" id="3042360">!=</span>&nbsp;<span class="ident" id="3042363">s</span><span class="op" id="3042364">[</span><span class="num" id="3042365">0</span><span class="op" id="3042366">]</span>&nbsp;<span class="op" id="3042368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042374">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042384">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042389">s</span>&nbsp;<span class="op" id="3042391">=</span>&nbsp;<span class="ident" id="3042393">s</span><span class="op" id="3042394">[</span><span class="num" id="3042395">1</span><span class="op" id="3042396">:</span><span class="op" id="3042397">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042402">chunk</span>&nbsp;<span class="op" id="3042408">=</span>&nbsp;<span class="ident" id="3042410">chunk</span><span class="op" id="3042415">[</span><span class="num" id="3042416">1</span><span class="op" id="3042417">:</span><span class="op" id="3042418">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042428">return</span>&nbsp;<span class="ident" id="3042435">s</span><span class="op" id="3042436">,</span>&nbsp;<span class="ident" id="3042438">true</span><span class="op" id="3042442">,</span>&nbsp;<span class="ident" id="3042444">nil</span><br>
<span class="lineno">200</span><span class="op" id="3042448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3042451">//&nbsp;getEsc&nbsp;gets&nbsp;a&nbsp;possibly-escaped&nbsp;character&nbsp;from&nbsp;chunk,&nbsp;for&nbsp;a&nbsp;character&nbsp;class.</span><br>
<span class="lineno"></span><span class="keyword" id="3042530">func</span>&nbsp;<span class="ident" id="3042535">getEsc</span><span class="op" id="3042541">(</span><span class="ident" id="3042542">chunk</span>&nbsp;<span class="builtintype" id="3042548">string</span><span class="op" id="3042554">)</span>&nbsp;<span class="op" id="3042556">(</span><span class="ident" id="3042557">r</span>&nbsp;<span class="builtintype" id="3042559">rune</span><span class="op" id="3042563">,</span>&nbsp;<span class="ident" id="3042565">nchunk</span>&nbsp;<span class="builtintype" id="3042572">string</span><span class="op" id="3042578">,</span>&nbsp;<span class="ident" id="3042580">err</span>&nbsp;<span class="builtintype" id="3042584">error</span><span class="op" id="3042589">)</span>&nbsp;<span class="op" id="3042591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042594">if</span>&nbsp;<span class="builtinfunc" id="3042597">len</span><span class="op" id="3042600">(</span><span class="ident" id="3042601">chunk</span><span class="op" id="3042606">)</span>&nbsp;<span class="op" id="3042608">==</span>&nbsp;<span class="num" id="3042611">0</span>&nbsp;<span class="op" id="3042613">||</span>&nbsp;<span class="ident" id="3042616">chunk</span><span class="op" id="3042621">[</span><span class="num" id="3042622">0</span><span class="op" id="3042623">]</span>&nbsp;<span class="op" id="3042625">==</span>&nbsp;<span class="string" id="3042628">&#39;-&#39;</span>&nbsp;<span class="op" id="3042632">||</span>&nbsp;<span class="ident" id="3042635">chunk</span><span class="op" id="3042640">[</span><span class="num" id="3042641">0</span><span class="op" id="3042642">]</span>&nbsp;<span class="op" id="3042644">==</span>&nbsp;<span class="string" id="3042647">&#39;]&#39;</span>&nbsp;<span class="op" id="3042651">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042655">err</span>&nbsp;<span class="op" id="3042659">=</span>&nbsp;<span class="ident" id="3042661">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042677">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042688">if</span>&nbsp;<span class="ident" id="3042691">chunk</span><span class="op" id="3042696">[</span><span class="num" id="3042697">0</span><span class="op" id="3042698">]</span>&nbsp;<span class="op" id="3042700">==</span>&nbsp;<span class="string" id="3042703">&#39;\\&#39;</span>&nbsp;<span class="op" id="3042708">&amp;&amp;</span>&nbsp;<span class="ident" id="3042711">runtime</span><span class="op" id="3042718">.</span><span class="ident" id="3042719">GOOS</span>&nbsp;<span class="op" id="3042724">!=</span>&nbsp;<span class="string" id="3042727">&#34;windows&#34;</span>&nbsp;<span class="op" id="3042737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042741">chunk</span>&nbsp;<span class="op" id="3042747">=</span>&nbsp;<span class="ident" id="3042749">chunk</span><span class="op" id="3042754">[</span><span class="num" id="3042755">1</span><span class="op" id="3042756">:</span><span class="op" id="3042757">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042761">if</span>&nbsp;<span class="builtinfunc" id="3042764">len</span><span class="op" id="3042767">(</span><span class="ident" id="3042768">chunk</span><span class="op" id="3042773">)</span>&nbsp;<span class="op" id="3042775">==</span>&nbsp;<span class="num" id="3042778">0</span>&nbsp;<span class="op" id="3042780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042785">err</span>&nbsp;<span class="op" id="3042789">=</span>&nbsp;<span class="ident" id="3042791">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042808">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042820">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042823">r</span><span class="op" id="3042824">,</span>&nbsp;<span class="ident" id="3042826">n</span>&nbsp;<span class="op" id="3042828">:=</span>&nbsp;<span class="ident" id="3042831">utf8</span><span class="op" id="3042835">.</span><span class="ident" id="3042836">DecodeRuneInString</span><span class="op" id="3042854">(</span><span class="ident" id="3042855">chunk</span><span class="op" id="3042860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042863">if</span>&nbsp;<span class="ident" id="3042866">r</span>&nbsp;<span class="op" id="3042868">==</span>&nbsp;<span class="ident" id="3042871">utf8</span><span class="op" id="3042875">.</span><span class="ident" id="3042876">RuneError</span>&nbsp;<span class="op" id="3042886">&amp;&amp;</span>&nbsp;<span class="ident" id="3042889">n</span>&nbsp;<span class="op" id="3042891">==</span>&nbsp;<span class="num" id="3042894">1</span>&nbsp;<span class="op" id="3042896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042900">err</span>&nbsp;<span class="op" id="3042904">=</span>&nbsp;<span class="ident" id="3042906">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042924">nchunk</span>&nbsp;<span class="op" id="3042931">=</span>&nbsp;<span class="ident" id="3042933">chunk</span><span class="op" id="3042938">[</span><span class="ident" id="3042939">n</span><span class="op" id="3042940">:</span><span class="op" id="3042941">]</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042944">if</span>&nbsp;<span class="builtinfunc" id="3042947">len</span><span class="op" id="3042950">(</span><span class="ident" id="3042951">nchunk</span><span class="op" id="3042957">)</span>&nbsp;<span class="op" id="3042959">==</span>&nbsp;<span class="num" id="3042962">0</span>&nbsp;<span class="op" id="3042964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042968">err</span>&nbsp;<span class="op" id="3042972">=</span>&nbsp;<span class="ident" id="3042974">ErrBadPattern</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042992">return</span><br>
<span class="lineno"></span><span class="op" id="3042999">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3043002">//&nbsp;Glob&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3043065">//&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;matching&nbsp;file.&nbsp;The&nbsp;syntax&nbsp;of&nbsp;patterns&nbsp;is&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="3043133">//&nbsp;as&nbsp;in&nbsp;Match.&nbsp;The&nbsp;pattern&nbsp;may&nbsp;describe&nbsp;hierarchical&nbsp;names&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="3043201">//&nbsp;/usr/*/bin/ed&nbsp;(assuming&nbsp;the&nbsp;Separator&nbsp;is&nbsp;&#39;/&#39;).</span><br>
<span class="lineno">230</span><span class="comment" id="3043251">//</span><br>
<span class="lineno"></span><span class="comment" id="3043254">//&nbsp;Glob&nbsp;ignores&nbsp;file&nbsp;system&nbsp;errors&nbsp;such&nbsp;as&nbsp;I/O&nbsp;errors&nbsp;reading&nbsp;directories.</span><br>
<span class="lineno"></span><span class="comment" id="3043329">//&nbsp;The&nbsp;only&nbsp;possible&nbsp;returned&nbsp;error&nbsp;is&nbsp;ErrBadPattern,&nbsp;when&nbsp;pattern</span><br>
<span class="lineno"></span><span class="comment" id="3043396">//&nbsp;is&nbsp;malformed.</span><br>
<span class="lineno"></span><span class="keyword" id="3043413">func</span>&nbsp;<span class="ident" id="3043418">Glob</span><span class="op" id="3043422">(</span><span class="ident" id="3043423">pattern</span>&nbsp;<span class="builtintype" id="3043431">string</span><span class="op" id="3043437">)</span>&nbsp;<span class="op" id="3043439">(</span><span class="ident" id="3043440">matches</span>&nbsp;<span class="op" id="3043448">[</span><span class="op" id="3043449">]</span><span class="builtintype" id="3043450">string</span><span class="op" id="3043456">,</span>&nbsp;<span class="ident" id="3043458">err</span>&nbsp;<span class="builtintype" id="3043462">error</span><span class="op" id="3043467">)</span>&nbsp;<span class="op" id="3043469">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043472">if</span>&nbsp;<span class="op" id="3043475">!</span><span class="ident" id="3043476">hasMeta</span><span class="op" id="3043483">(</span><span class="ident" id="3043484">pattern</span><span class="op" id="3043491">)</span>&nbsp;<span class="op" id="3043493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043497">if</span>&nbsp;<span class="ident" id="3043500">_</span><span class="op" id="3043501">,</span>&nbsp;<span class="ident" id="3043503">err</span>&nbsp;<span class="op" id="3043507">=</span>&nbsp;<span class="ident" id="3043509">os</span><span class="op" id="3043511">.</span><span class="ident" id="3043512">Lstat</span><span class="op" id="3043517">(</span><span class="ident" id="3043518">pattern</span><span class="op" id="3043525">)</span><span class="op" id="3043526">;</span>&nbsp;<span class="ident" id="3043528">err</span>&nbsp;<span class="op" id="3043532">!=</span>&nbsp;<span class="ident" id="3043535">nil</span>&nbsp;<span class="op" id="3043539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043544">return</span>&nbsp;<span class="ident" id="3043551">nil</span><span class="op" id="3043554">,</span>&nbsp;<span class="ident" id="3043556">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043562">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043566">return</span>&nbsp;<span class="op" id="3043573">[</span><span class="op" id="3043574">]</span><span class="builtintype" id="3043575">string</span><span class="op" id="3043581">{</span><span class="ident" id="3043582">pattern</span><span class="op" id="3043589">}</span><span class="op" id="3043590">,</span>&nbsp;<span class="ident" id="3043592">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043597">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043601">dir</span><span class="op" id="3043604">,</span>&nbsp;<span class="ident" id="3043606">file</span>&nbsp;<span class="op" id="3043611">:=</span>&nbsp;<span class="ident" id="3043614">Split</span><span class="op" id="3043619">(</span><span class="ident" id="3043620">pattern</span><span class="op" id="3043627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043630">switch</span>&nbsp;<span class="ident" id="3043637">dir</span>&nbsp;<span class="op" id="3043641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043644">case</span>&nbsp;<span class="string" id="3043649">&#34;&#34;</span><span class="op" id="3043651">:</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043655">dir</span>&nbsp;<span class="op" id="3043659">=</span>&nbsp;<span class="string" id="3043661">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043666">case</span>&nbsp;<span class="builtintype" id="3043671">string</span><span class="op" id="3043677">(</span><span class="ident" id="3043678">Separator</span><span class="op" id="3043687">)</span><span class="op" id="3043688">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3043692">//&nbsp;nothing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043704">default</span><span class="op" id="3043711">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043715">dir</span>&nbsp;<span class="op" id="3043719">=</span>&nbsp;<span class="ident" id="3043721">dir</span><span class="op" id="3043724">[</span><span class="num" id="3043725">0</span>&nbsp;<span class="op" id="3043727">:</span>&nbsp;<span class="builtinfunc" id="3043729">len</span><span class="op" id="3043732">(</span><span class="ident" id="3043733">dir</span><span class="op" id="3043736">)</span><span class="op" id="3043737">-</span><span class="num" id="3043738">1</span><span class="op" id="3043739">]</span>&nbsp;<span class="comment" id="3043741">//&nbsp;chop&nbsp;off&nbsp;trailing&nbsp;separator</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043777">if</span>&nbsp;<span class="op" id="3043780">!</span><span class="ident" id="3043781">hasMeta</span><span class="op" id="3043788">(</span><span class="ident" id="3043789">dir</span><span class="op" id="3043792">)</span>&nbsp;<span class="op" id="3043794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043798">return</span>&nbsp;<span class="ident" id="3043805">glob</span><span class="op" id="3043809">(</span><span class="ident" id="3043810">dir</span><span class="op" id="3043813">,</span>&nbsp;<span class="ident" id="3043815">file</span><span class="op" id="3043819">,</span>&nbsp;<span class="ident" id="3043821">nil</span><span class="op" id="3043824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043827">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043831">var</span>&nbsp;<span class="ident" id="3043835">m</span>&nbsp;<span class="op" id="3043837">[</span><span class="op" id="3043838">]</span><span class="builtintype" id="3043839">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043847">m</span><span class="op" id="3043848">,</span>&nbsp;<span class="ident" id="3043850">err</span>&nbsp;<span class="op" id="3043854">=</span>&nbsp;<span class="ident" id="3043856">Glob</span><span class="op" id="3043860">(</span><span class="ident" id="3043861">dir</span><span class="op" id="3043864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043867">if</span>&nbsp;<span class="ident" id="3043870">err</span>&nbsp;<span class="op" id="3043874">!=</span>&nbsp;<span class="ident" id="3043877">nil</span>&nbsp;<span class="op" id="3043881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043885">return</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043896">for</span>&nbsp;<span class="ident" id="3043900">_</span><span class="op" id="3043901">,</span>&nbsp;<span class="ident" id="3043903">d</span>&nbsp;<span class="op" id="3043905">:=</span>&nbsp;<span class="keyword" id="3043908">range</span>&nbsp;<span class="ident" id="3043914">m</span>&nbsp;<span class="op" id="3043916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043920">matches</span><span class="op" id="3043927">,</span>&nbsp;<span class="ident" id="3043929">err</span>&nbsp;<span class="op" id="3043933">=</span>&nbsp;<span class="ident" id="3043935">glob</span><span class="op" id="3043939">(</span><span class="ident" id="3043940">d</span><span class="op" id="3043941">,</span>&nbsp;<span class="ident" id="3043943">file</span><span class="op" id="3043947">,</span>&nbsp;<span class="ident" id="3043949">matches</span><span class="op" id="3043956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043960">if</span>&nbsp;<span class="ident" id="3043963">err</span>&nbsp;<span class="op" id="3043967">!=</span>&nbsp;<span class="ident" id="3043970">nil</span>&nbsp;<span class="op" id="3043974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043979">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043994">return</span><br>
<span class="lineno"></span><span class="op" id="3044001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="comment" id="3044004">//&nbsp;glob&nbsp;searches&nbsp;for&nbsp;files&nbsp;matching&nbsp;pattern&nbsp;in&nbsp;the&nbsp;directory&nbsp;dir</span><br>
<span class="lineno"></span><span class="comment" id="3044069">//&nbsp;and&nbsp;appends&nbsp;them&nbsp;to&nbsp;matches.&nbsp;If&nbsp;the&nbsp;directory&nbsp;cannot&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3044128">//&nbsp;opened,&nbsp;it&nbsp;returns&nbsp;the&nbsp;existing&nbsp;matches.&nbsp;New&nbsp;matches&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="3044188">//&nbsp;added&nbsp;in&nbsp;lexicographical&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="3044223">func</span>&nbsp;<span class="ident" id="3044228">glob</span><span class="op" id="3044232">(</span><span class="ident" id="3044233">dir</span><span class="op" id="3044236">,</span>&nbsp;<span class="ident" id="3044238">pattern</span>&nbsp;<span class="builtintype" id="3044246">string</span><span class="op" id="3044252">,</span>&nbsp;<span class="ident" id="3044254">matches</span>&nbsp;<span class="op" id="3044262">[</span><span class="op" id="3044263">]</span><span class="builtintype" id="3044264">string</span><span class="op" id="3044270">)</span>&nbsp;<span class="op" id="3044272">(</span><span class="ident" id="3044273">m</span>&nbsp;<span class="op" id="3044275">[</span><span class="op" id="3044276">]</span><span class="builtintype" id="3044277">string</span><span class="op" id="3044283">,</span>&nbsp;<span class="ident" id="3044285">e</span>&nbsp;<span class="builtintype" id="3044287">error</span><span class="op" id="3044292">)</span>&nbsp;<span class="op" id="3044294">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044297">m</span>&nbsp;<span class="op" id="3044299">=</span>&nbsp;<span class="ident" id="3044301">matches</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044310">fi</span><span class="op" id="3044312">,</span>&nbsp;<span class="ident" id="3044314">err</span>&nbsp;<span class="op" id="3044318">:=</span>&nbsp;<span class="ident" id="3044321">os</span><span class="op" id="3044323">.</span><span class="ident" id="3044324">Stat</span><span class="op" id="3044328">(</span><span class="ident" id="3044329">dir</span><span class="op" id="3044332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044335">if</span>&nbsp;<span class="ident" id="3044338">err</span>&nbsp;<span class="op" id="3044342">!=</span>&nbsp;<span class="ident" id="3044345">nil</span>&nbsp;<span class="op" id="3044349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044353">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3044361">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044364">if</span>&nbsp;<span class="op" id="3044367">!</span><span class="ident" id="3044368">fi</span><span class="op" id="3044370">.</span><span class="ident" id="3044371">IsDir</span><span class="op" id="3044376">(</span><span class="op" id="3044377">)</span>&nbsp;<span class="op" id="3044379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044383">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3044391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044394">d</span><span class="op" id="3044395">,</span>&nbsp;<span class="ident" id="3044397">err</span>&nbsp;<span class="op" id="3044401">:=</span>&nbsp;<span class="ident" id="3044404">os</span><span class="op" id="3044406">.</span><span class="ident" id="3044407">Open</span><span class="op" id="3044411">(</span><span class="ident" id="3044412">dir</span><span class="op" id="3044415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044418">if</span>&nbsp;<span class="ident" id="3044421">err</span>&nbsp;<span class="op" id="3044425">!=</span>&nbsp;<span class="ident" id="3044428">nil</span>&nbsp;<span class="op" id="3044432">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044436">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3044444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044447">defer</span>&nbsp;<span class="ident" id="3044453">d</span><span class="op" id="3044454">.</span><span class="ident" id="3044455">Close</span><span class="op" id="3044460">(</span><span class="op" id="3044461">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044465">names</span><span class="op" id="3044470">,</span>&nbsp;<span class="ident" id="3044472">_</span>&nbsp;<span class="op" id="3044474">:=</span>&nbsp;<span class="ident" id="3044477">d</span><span class="op" id="3044478">.</span><span class="ident" id="3044479">Readdirnames</span><span class="op" id="3044491">(</span><span class="op" id="3044492">-</span><span class="num" id="3044493">1</span><span class="op" id="3044494">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044497">sort</span><span class="op" id="3044501">.</span><span class="ident" id="3044502">Strings</span><span class="op" id="3044509">(</span><span class="ident" id="3044510">names</span><span class="op" id="3044515">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044519">for</span>&nbsp;<span class="ident" id="3044523">_</span><span class="op" id="3044524">,</span>&nbsp;<span class="ident" id="3044526">n</span>&nbsp;<span class="op" id="3044528">:=</span>&nbsp;<span class="keyword" id="3044531">range</span>&nbsp;<span class="ident" id="3044537">names</span>&nbsp;<span class="op" id="3044543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044547">matched</span><span class="op" id="3044554">,</span>&nbsp;<span class="ident" id="3044556">err</span>&nbsp;<span class="op" id="3044560">:=</span>&nbsp;<span class="ident" id="3044563">Match</span><span class="op" id="3044568">(</span><span class="ident" id="3044569">pattern</span><span class="op" id="3044576">,</span>&nbsp;<span class="ident" id="3044578">n</span><span class="op" id="3044579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044583">if</span>&nbsp;<span class="ident" id="3044586">err</span>&nbsp;<span class="op" id="3044590">!=</span>&nbsp;<span class="ident" id="3044593">nil</span>&nbsp;<span class="op" id="3044597">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044602">return</span>&nbsp;<span class="ident" id="3044609">m</span><span class="op" id="3044610">,</span>&nbsp;<span class="ident" id="3044612">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3044618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044622">if</span>&nbsp;<span class="ident" id="3044625">matched</span>&nbsp;<span class="op" id="3044633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044638">m</span>&nbsp;<span class="op" id="3044640">=</span>&nbsp;<span class="builtinfunc" id="3044642">append</span><span class="op" id="3044648">(</span><span class="ident" id="3044649">m</span><span class="op" id="3044650">,</span>&nbsp;<span class="ident" id="3044652">Join</span><span class="op" id="3044656">(</span><span class="ident" id="3044657">dir</span><span class="op" id="3044660">,</span>&nbsp;<span class="ident" id="3044662">n</span><span class="op" id="3044663">)</span><span class="op" id="3044664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3044668">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3044671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044674">return</span><br>
<span class="lineno"></span><span class="op" id="3044681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3044684">//&nbsp;hasMeta&nbsp;returns&nbsp;true&nbsp;if&nbsp;path&nbsp;contains&nbsp;any&nbsp;of&nbsp;the&nbsp;magic&nbsp;characters</span><br>
<span class="lineno">305</span><span class="comment" id="3044753">//&nbsp;recognized&nbsp;by&nbsp;Match.</span><br>
<span class="lineno"></span><span class="keyword" id="3044777">func</span>&nbsp;<span class="ident" id="3044782">hasMeta</span><span class="op" id="3044789">(</span><span class="ident" id="3044790">path</span>&nbsp;<span class="builtintype" id="3044795">string</span><span class="op" id="3044801">)</span>&nbsp;<span class="builtintype" id="3044803">bool</span>&nbsp;<span class="op" id="3044808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3044811">//&nbsp;TODO(niemeyer):&nbsp;Should&nbsp;other&nbsp;magic&nbsp;characters&nbsp;be&nbsp;added&nbsp;here?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044876">return</span>&nbsp;<span class="ident" id="3044883">strings</span><span class="op" id="3044890">.</span><span class="ident" id="3044891">IndexAny</span><span class="op" id="3044899">(</span><span class="ident" id="3044900">path</span><span class="op" id="3044904">,</span>&nbsp;<span class="string" id="3044906">&#34;*?[&#34;</span><span class="op" id="3044911">)</span>&nbsp;<span class="op" id="3044913">&gt;=</span>&nbsp;<span class="num" id="3044916">0</span><br>
<span class="lineno"></span><span class="op" id="3044918">}</span>
</div>
</body>
</html>
