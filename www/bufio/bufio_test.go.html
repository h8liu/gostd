<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3198">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3253">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3307">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3358">package</span>&nbsp;<span class="ident" id="3366">bufio_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3378">import</span>&nbsp;<span class="op" id="3385">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3388">.</span>&nbsp;<span class="string" id="3390">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3399">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3408">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3418">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3425">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3431">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3444">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3455">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3466">&#34;testing/iotest&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3484">&#34;time&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3492">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3507">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="3510">//&nbsp;Reads&nbsp;from&nbsp;a&nbsp;reader&nbsp;and&nbsp;rot13s&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span><span class="keyword" id="3556">type</span>&nbsp;<span class="ident" id="3561">rot13Reader</span>&nbsp;<span class="keyword" id="3573">struct</span>&nbsp;<span class="op" id="3580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3583">r</span>&nbsp;<span class="ident" id="3585"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="3587">.</span><span class="ident" id="3588">Reader</span><br>
<span class="lineno"></span><span class="op" id="3595">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3598">func</span>&nbsp;<span class="ident" id="3603">newRot13Reader</span><span class="op" id="3617">(</span><span class="ident" id="3618">r</span>&nbsp;<span class="ident" id="3620"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="3622">.</span><span class="ident" id="3623">Reader</span><span class="op" id="3629">)</span>&nbsp;<span class="op" id="3631">*</span><span class="ident" id="3632"><a href="/bufio/bufio_test.go.html#3561">rot13Reader</a></span>&nbsp;<span class="op" id="3644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3647">r13</span>&nbsp;<span class="op" id="3651">:=</span>&nbsp;<span class="builtinfunc" id="3654">new</span><span class="op" id="3657">(</span><span class="ident" id="3658"><a href="/bufio/bufio_test.go.html#3561">rot13Reader</a></span><span class="op" id="3669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3672"><a href="/bufio/bufio_test.go.html#3647">r13</a></span><span class="op" id="3675">.</span><span class="ident" id="3676">r</span>&nbsp;<span class="op" id="3678">=</span>&nbsp;<span class="ident" id="3680"><a href="/bufio/bufio_test.go.html#3618">r</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3683">return</span>&nbsp;<span class="ident" id="3690"><a href="/bufio/bufio_test.go.html#3647">r13</a></span><br>
<span class="lineno">30</span><span class="op" id="3694">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3697">func</span>&nbsp;<span class="op" id="3702">(</span><span class="ident" id="3703">r13</span>&nbsp;<span class="op" id="3707">*</span><span class="ident" id="3708"><a href="/bufio/bufio_test.go.html#3561">rot13Reader</a></span><span class="op" id="3719">)</span>&nbsp;<span class="ident" id="3721">Read</span><span class="op" id="3725">(</span><span class="ident" id="3726">p</span>&nbsp;<span class="op" id="3728">[</span><span class="op" id="3729">]</span><span class="builtintype" id="3730">byte</span><span class="op" id="3734">)</span>&nbsp;<span class="op" id="3736">(</span><span class="builtintype" id="3737">int</span><span class="op" id="3740">,</span>&nbsp;<span class="builtintype" id="3742">error</span><span class="op" id="3747">)</span>&nbsp;<span class="op" id="3749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752">n</span><span class="op" id="3753">,</span>&nbsp;<span class="ident" id="3755">err</span>&nbsp;<span class="op" id="3759">:=</span>&nbsp;<span class="ident" id="3762"><a href="/bufio/bufio_test.go.html#3703">r13</a></span><span class="op" id="3765">.</span><span class="ident" id="3766">r</span><span class="op" id="3767">.</span><span class="ident" id="3768">Read</span><span class="op" id="3772">(</span><span class="ident" id="3773"><a href="/bufio/bufio_test.go.html#3726">p</a></span><span class="op" id="3774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3777">for</span>&nbsp;<span class="ident" id="3781">i</span>&nbsp;<span class="op" id="3783">:=</span>&nbsp;<span class="num" id="3786">0</span><span class="op" id="3787">;</span>&nbsp;<span class="ident" id="3789"><a href="/bufio/bufio_test.go.html#3781">i</a></span>&nbsp;<span class="op" id="3791">&lt;</span>&nbsp;<span class="ident" id="3793"><a href="/bufio/bufio_test.go.html#3752">n</a></span><span class="op" id="3794">;</span>&nbsp;<span class="ident" id="3796"><a href="/bufio/bufio_test.go.html#3781">i</a></span><span class="op" id="3797">++</span>&nbsp;<span class="op" id="3800">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3804">c</span>&nbsp;<span class="op" id="3806">:=</span>&nbsp;<span class="ident" id="3809"><a href="/bufio/bufio_test.go.html#3726">p</a></span><span class="op" id="3810">[</span><span class="ident" id="3811"><a href="/bufio/bufio_test.go.html#3781">i</a></span><span class="op" id="3812">]</span>&nbsp;<span class="op" id="3814">|</span>&nbsp;<span class="num" id="3816">0x20</span>&nbsp;<span class="comment" id="3821">//&nbsp;lowercase&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3841">if</span>&nbsp;<span class="string" id="3844">&#39;a&#39;</span>&nbsp;<span class="op" id="3848">&lt;=</span>&nbsp;<span class="ident" id="3851"><a href="/bufio/bufio_test.go.html#3804">c</a></span>&nbsp;<span class="op" id="3853">&amp;&amp;</span>&nbsp;<span class="ident" id="3856"><a href="/bufio/bufio_test.go.html#3804">c</a></span>&nbsp;<span class="op" id="3858">&lt;=</span>&nbsp;<span class="string" id="3861">&#39;m&#39;</span>&nbsp;<span class="op" id="3865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3870"><a href="/bufio/bufio_test.go.html#3726">p</a></span><span class="op" id="3871">[</span><span class="ident" id="3872"><a href="/bufio/bufio_test.go.html#3781">i</a></span><span class="op" id="3873">]</span>&nbsp;<span class="op" id="3875">+=</span>&nbsp;<span class="num" id="3878">13</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3883">}</span>&nbsp;<span class="keyword" id="3885">else</span>&nbsp;<span class="keyword" id="3890">if</span>&nbsp;<span class="string" id="3893">&#39;n&#39;</span>&nbsp;<span class="op" id="3897">&lt;=</span>&nbsp;<span class="ident" id="3900"><a href="/bufio/bufio_test.go.html#3804">c</a></span>&nbsp;<span class="op" id="3902">&amp;&amp;</span>&nbsp;<span class="ident" id="3905"><a href="/bufio/bufio_test.go.html#3804">c</a></span>&nbsp;<span class="op" id="3907">&lt;=</span>&nbsp;<span class="string" id="3910">&#39;z&#39;</span>&nbsp;<span class="op" id="3914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3919"><a href="/bufio/bufio_test.go.html#3726">p</a></span><span class="op" id="3920">[</span><span class="ident" id="3921"><a href="/bufio/bufio_test.go.html#3781">i</a></span><span class="op" id="3922">]</span>&nbsp;<span class="op" id="3924">-=</span>&nbsp;<span class="num" id="3927">13</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3935">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3938">return</span>&nbsp;<span class="ident" id="3945"><a href="/bufio/bufio_test.go.html#3752">n</a></span><span class="op" id="3946">,</span>&nbsp;<span class="ident" id="3948"><a href="/bufio/bufio_test.go.html#3755">err</a></span><br>
<span class="lineno"></span><span class="op" id="3952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="3955">//&nbsp;Call&nbsp;ReadByte&nbsp;to&nbsp;accumulate&nbsp;the&nbsp;text&nbsp;of&nbsp;a&nbsp;file</span><br>
<span class="lineno"></span><span class="keyword" id="4005">func</span>&nbsp;<span class="ident" id="4010">readBytes</span><span class="op" id="4019">(</span><span class="ident" id="4020">buf</span>&nbsp;<span class="op" id="4024">*</span><span class="ident" id="4025"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="4031">)</span>&nbsp;<span class="builtintype" id="4033">string</span>&nbsp;<span class="op" id="4040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4043">var</span>&nbsp;<span class="ident" id="4047">b</span>&nbsp;<span class="op" id="4049">[</span><span class="num" id="4050">1000</span><span class="op" id="4054">]</span><span class="builtintype" id="4055">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4061">nb</span>&nbsp;<span class="op" id="4064">:=</span>&nbsp;<span class="num" id="4067">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4070">for</span>&nbsp;<span class="op" id="4074">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4078">c</span><span class="op" id="4079">,</span>&nbsp;<span class="ident" id="4081">err</span>&nbsp;<span class="op" id="4085">:=</span>&nbsp;<span class="ident" id="4088"><a href="/bufio/bufio_test.go.html#4020">buf</a></span><span class="op" id="4091">.</span><span class="ident" id="4092">ReadByte</span><span class="op" id="4100">(</span><span class="op" id="4101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4105">if</span>&nbsp;<span class="ident" id="4108"><a href="/bufio/bufio_test.go.html#4081">err</a></span>&nbsp;<span class="op" id="4112">==</span>&nbsp;<span class="ident" id="4115"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="4117">.</span><span class="ident" id="4118">EOF</span>&nbsp;<span class="op" id="4122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4127">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4139">if</span>&nbsp;<span class="ident" id="4142"><a href="/bufio/bufio_test.go.html#4081">err</a></span>&nbsp;<span class="op" id="4146">==</span>&nbsp;<span class="ident" id="4149">nil</span>&nbsp;<span class="op" id="4153">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4158"><a href="/bufio/bufio_test.go.html#4047">b</a></span><span class="op" id="4159">[</span><span class="ident" id="4160"><a href="/bufio/bufio_test.go.html#4061">nb</a></span><span class="op" id="4162">]</span>&nbsp;<span class="op" id="4164">=</span>&nbsp;<span class="ident" id="4166"><a href="/bufio/bufio_test.go.html#4078">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4171"><a href="/bufio/bufio_test.go.html#4061">nb</a></span><span class="op" id="4173">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4178">}</span>&nbsp;<span class="keyword" id="4180">else</span>&nbsp;<span class="keyword" id="4185">if</span>&nbsp;<span class="ident" id="4188"><a href="/bufio/bufio_test.go.html#4081">err</a></span>&nbsp;<span class="op" id="4192">!=</span>&nbsp;<span class="ident" id="4195"><a href="/bufio/bufio_test.go.html#3466">iotest</a></span><span class="op" id="4201">.</span><span class="ident" id="4202">ErrTimeout</span>&nbsp;<span class="op" id="4213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4218">panic</span><span class="op" id="4223">(</span><span class="string" id="4224">&#34;Data:&nbsp;&#34;</span>&nbsp;<span class="op" id="4233">+</span>&nbsp;<span class="ident" id="4235"><a href="/bufio/bufio_test.go.html#4081">err</a></span><span class="op" id="4238">.</span><span class="ident" id="4239">Error</span><span class="op" id="4244">(</span><span class="op" id="4245">)</span><span class="op" id="4246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4250">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4256">return</span>&nbsp;<span class="builtintype" id="4263">string</span><span class="op" id="4269">(</span><span class="ident" id="4270"><a href="/bufio/bufio_test.go.html#4047">b</a></span><span class="op" id="4271">[</span><span class="num" id="4272">0</span><span class="op" id="4273">:</span><span class="ident" id="4274"><a href="/bufio/bufio_test.go.html#4061">nb</a></span><span class="op" id="4276">]</span><span class="op" id="4277">)</span><br>
<span class="lineno"></span><span class="op" id="4279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4282">func</span>&nbsp;<span class="ident" id="4287">TestReaderSimple</span><span class="op" id="4303">(</span><span class="ident" id="4304">t</span>&nbsp;<span class="op" id="4306">*</span><span class="ident" id="4307"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="4314">.</span><span class="ident" id="4315">T</span><span class="op" id="4316">)</span>&nbsp;<span class="op" id="4318">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4321">data</span>&nbsp;<span class="op" id="4326">:=</span>&nbsp;<span class="string" id="4329">&#34;hello&nbsp;world&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4344">b</span>&nbsp;<span class="op" id="4346">:=</span>&nbsp;<span class="ident" id="4349"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="4358">(</span><span class="ident" id="4359"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="4366">.</span><span class="ident" id="4367">NewReader</span><span class="op" id="4376">(</span><span class="ident" id="4377"><a href="/bufio/bufio_test.go.html#4321">data</a></span><span class="op" id="4381">)</span><span class="op" id="4382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4385">if</span>&nbsp;<span class="ident" id="4388">s</span>&nbsp;<span class="op" id="4390">:=</span>&nbsp;<span class="ident" id="4393"><a href="/bufio/bufio_test.go.html#4010">readBytes</a></span><span class="op" id="4402">(</span><span class="ident" id="4403"><a href="/bufio/bufio_test.go.html#4344">b</a></span><span class="op" id="4404">)</span><span class="op" id="4405">;</span>&nbsp;<span class="ident" id="4407"><a href="/bufio/bufio_test.go.html#4388">s</a></span>&nbsp;<span class="op" id="4409">!=</span>&nbsp;<span class="string" id="4412">&#34;hello&nbsp;world&#34;</span>&nbsp;<span class="op" id="4426">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4430"><a href="/bufio/bufio_test.go.html#4304">t</a></span><span class="op" id="4431">.</span><span class="ident" id="4432">Errorf</span><span class="op" id="4438">(</span><span class="string" id="4439">&#34;simple&nbsp;hello&nbsp;world&nbsp;test&nbsp;failed:&nbsp;got&nbsp;%q&#34;</span><span class="op" id="4479">,</span>&nbsp;<span class="ident" id="4481"><a href="/bufio/bufio_test.go.html#4388">s</a></span><span class="op" id="4482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4485">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4489"><a href="/bufio/bufio_test.go.html#4344">b</a></span>&nbsp;<span class="op" id="4491">=</span>&nbsp;<span class="ident" id="4493"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="4502">(</span><span class="ident" id="4503"><a href="/bufio/bufio_test.go.html#3603">newRot13Reader</a></span><span class="op" id="4517">(</span><span class="ident" id="4518"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="4525">.</span><span class="ident" id="4526">NewReader</span><span class="op" id="4535">(</span><span class="ident" id="4536"><a href="/bufio/bufio_test.go.html#4321">data</a></span><span class="op" id="4540">)</span><span class="op" id="4541">)</span><span class="op" id="4542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4545">if</span>&nbsp;<span class="ident" id="4548">s</span>&nbsp;<span class="op" id="4550">:=</span>&nbsp;<span class="ident" id="4553"><a href="/bufio/bufio_test.go.html#4010">readBytes</a></span><span class="op" id="4562">(</span><span class="ident" id="4563"><a href="/bufio/bufio_test.go.html#4344">b</a></span><span class="op" id="4564">)</span><span class="op" id="4565">;</span>&nbsp;<span class="ident" id="4567"><a href="/bufio/bufio_test.go.html#4548">s</a></span>&nbsp;<span class="op" id="4569">!=</span>&nbsp;<span class="string" id="4572">&#34;uryyb&nbsp;jbeyq&#34;</span>&nbsp;<span class="op" id="4586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4590"><a href="/bufio/bufio_test.go.html#4304">t</a></span><span class="op" id="4591">.</span><span class="ident" id="4592">Errorf</span><span class="op" id="4598">(</span><span class="string" id="4599">&#34;rot13&nbsp;hello&nbsp;world&nbsp;test&nbsp;failed:&nbsp;got&nbsp;%q&#34;</span><span class="op" id="4638">,</span>&nbsp;<span class="ident" id="4640"><a href="/bufio/bufio_test.go.html#4548">s</a></span><span class="op" id="4641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4644">}</span><br>
<span class="lineno">75</span><span class="op" id="4646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4649">type</span>&nbsp;<span class="ident" id="4654">readMaker</span>&nbsp;<span class="keyword" id="4664">struct</span>&nbsp;<span class="op" id="4671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4674">name</span>&nbsp;<span class="builtintype" id="4679">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4687">fn</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="4692">func</span><span class="op" id="4696">(</span><span class="ident" id="4697"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="4699">.</span><span class="ident" id="4700">Reader</span><span class="op" id="4706">)</span>&nbsp;<span class="ident" id="4708"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="4710">.</span><span class="ident" id="4711">Reader</span><br>
<span class="lineno">80</span><span class="op" id="4718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4721">var</span>&nbsp;<span class="ident" id="4725">readMakers</span>&nbsp;<span class="op" id="4736">=</span>&nbsp;<span class="op" id="4738">[</span><span class="op" id="4739">]</span><span class="ident" id="4740"><a href="/bufio/bufio_test.go.html#4654">readMaker</a></span><span class="op" id="4749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4752">{</span><span class="string" id="4753">&#34;full&#34;</span><span class="op" id="4759">,</span>&nbsp;<span class="keyword" id="4761">func</span><span class="op" id="4765">(</span><span class="ident" id="4766">r</span>&nbsp;<span class="ident" id="4768"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="4770">.</span><span class="ident" id="4771">Reader</span><span class="op" id="4777">)</span>&nbsp;<span class="ident" id="4779"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="4781">.</span><span class="ident" id="4782">Reader</span>&nbsp;<span class="op" id="4789">{</span>&nbsp;<span class="keyword" id="4791">return</span>&nbsp;<span class="ident" id="4798"><a href="/bufio/bufio_test.go.html#4766">r</a></span>&nbsp;<span class="op" id="4800">}</span><span class="op" id="4801">}</span><span class="op" id="4802">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4805">{</span><span class="string" id="4806">&#34;byte&#34;</span><span class="op" id="4812">,</span>&nbsp;<span class="ident" id="4814"><a href="/bufio/bufio_test.go.html#3466">iotest</a></span><span class="op" id="4820">.</span><span class="ident" id="4821">OneByteReader</span><span class="op" id="4834">}</span><span class="op" id="4835">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4838">{</span><span class="string" id="4839">&#34;half&#34;</span><span class="op" id="4845">,</span>&nbsp;<span class="ident" id="4847"><a href="/bufio/bufio_test.go.html#3466">iotest</a></span><span class="op" id="4853">.</span><span class="ident" id="4854">HalfReader</span><span class="op" id="4864">}</span><span class="op" id="4865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4868">{</span><span class="string" id="4869">&#34;data+err&#34;</span><span class="op" id="4879">,</span>&nbsp;<span class="ident" id="4881"><a href="/bufio/bufio_test.go.html#3466">iotest</a></span><span class="op" id="4887">.</span><span class="ident" id="4888">DataErrReader</span><span class="op" id="4901">}</span><span class="op" id="4902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4905">{</span><span class="string" id="4906">&#34;timeout&#34;</span><span class="op" id="4915">,</span>&nbsp;<span class="ident" id="4917"><a href="/bufio/bufio_test.go.html#3466">iotest</a></span><span class="op" id="4923">.</span><span class="ident" id="4924">TimeoutReader</span><span class="op" id="4937">}</span><span class="op" id="4938">,</span><br>
<span class="lineno"></span><span class="op" id="4940">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="4943">//&nbsp;Call&nbsp;ReadString&nbsp;(which&nbsp;ends&nbsp;up&nbsp;calling&nbsp;everything&nbsp;else)</span><br>
<span class="lineno"></span><span class="comment" id="5002">//&nbsp;to&nbsp;accumulate&nbsp;the&nbsp;text&nbsp;of&nbsp;a&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5039">func</span>&nbsp;<span class="ident" id="5044">readLines</span><span class="op" id="5053">(</span><span class="ident" id="5054">b</span>&nbsp;<span class="op" id="5056">*</span><span class="ident" id="5057"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="5063">)</span>&nbsp;<span class="builtintype" id="5065">string</span>&nbsp;<span class="op" id="5072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5075">s</span>&nbsp;<span class="op" id="5077">:=</span>&nbsp;<span class="string" id="5080">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5084">for</span>&nbsp;<span class="op" id="5088">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5092">s1</span><span class="op" id="5094">,</span>&nbsp;<span class="ident" id="5096">err</span>&nbsp;<span class="op" id="5100">:=</span>&nbsp;<span class="ident" id="5103"><a href="/bufio/bufio_test.go.html#5054">b</a></span><span class="op" id="5104">.</span><span class="ident" id="5105">ReadString</span><span class="op" id="5115">(</span><span class="string" id="5116">&#39;\n&#39;</span><span class="op" id="5120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5124">if</span>&nbsp;<span class="ident" id="5127"><a href="/bufio/bufio_test.go.html#5096">err</a></span>&nbsp;<span class="op" id="5131">==</span>&nbsp;<span class="ident" id="5134"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="5136">.</span><span class="ident" id="5137">EOF</span>&nbsp;<span class="op" id="5141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5146">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5154">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5158">if</span>&nbsp;<span class="ident" id="5161"><a href="/bufio/bufio_test.go.html#5096">err</a></span>&nbsp;<span class="op" id="5165">!=</span>&nbsp;<span class="ident" id="5168">nil</span>&nbsp;<span class="op" id="5172">&amp;&amp;</span>&nbsp;<span class="ident" id="5175"><a href="/bufio/bufio_test.go.html#5096">err</a></span>&nbsp;<span class="op" id="5179">!=</span>&nbsp;<span class="ident" id="5182"><a href="/bufio/bufio_test.go.html#3466">iotest</a></span><span class="op" id="5188">.</span><span class="ident" id="5189">ErrTimeout</span>&nbsp;<span class="op" id="5200">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5205">panic</span><span class="op" id="5210">(</span><span class="string" id="5211">&#34;GetLines:&nbsp;&#34;</span>&nbsp;<span class="op" id="5224">+</span>&nbsp;<span class="ident" id="5226"><a href="/bufio/bufio_test.go.html#5096">err</a></span><span class="op" id="5229">.</span><span class="ident" id="5230">Error</span><span class="op" id="5235">(</span><span class="op" id="5236">)</span><span class="op" id="5237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5245"><a href="/bufio/bufio_test.go.html#5075">s</a></span>&nbsp;<span class="op" id="5247">+=</span>&nbsp;<span class="ident" id="5250"><a href="/bufio/bufio_test.go.html#5092">s1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5257">return</span>&nbsp;<span class="ident" id="5264"><a href="/bufio/bufio_test.go.html#5075">s</a></span><br>
<span class="lineno">105</span><span class="op" id="5266">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5269">//&nbsp;Call&nbsp;Read&nbsp;to&nbsp;accumulate&nbsp;the&nbsp;text&nbsp;of&nbsp;a&nbsp;file</span><br>
<span class="lineno"></span><span class="keyword" id="5315">func</span>&nbsp;<span class="ident" id="5320">reads</span><span class="op" id="5325">(</span><span class="ident" id="5326">buf</span>&nbsp;<span class="op" id="5330">*</span><span class="ident" id="5331"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="5337">,</span>&nbsp;<span class="ident" id="5339">m</span>&nbsp;<span class="builtintype" id="5341">int</span><span class="op" id="5344">)</span>&nbsp;<span class="builtintype" id="5346">string</span>&nbsp;<span class="op" id="5353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5356">var</span>&nbsp;<span class="ident" id="5360">b</span>&nbsp;<span class="op" id="5362">[</span><span class="num" id="5363">1000</span><span class="op" id="5367">]</span><span class="builtintype" id="5368">byte</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5374">nb</span>&nbsp;<span class="op" id="5377">:=</span>&nbsp;<span class="num" id="5380">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5383">for</span>&nbsp;<span class="op" id="5387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5391">n</span><span class="op" id="5392">,</span>&nbsp;<span class="ident" id="5394">err</span>&nbsp;<span class="op" id="5398">:=</span>&nbsp;<span class="ident" id="5401"><a href="/bufio/bufio_test.go.html#5326">buf</a></span><span class="op" id="5404">.</span><span class="ident" id="5405">Read</span><span class="op" id="5409">(</span><span class="ident" id="5410"><a href="/bufio/bufio_test.go.html#5360">b</a></span><span class="op" id="5411">[</span><span class="ident" id="5412"><a href="/bufio/bufio_test.go.html#5374">nb</a></span>&nbsp;<span class="op" id="5415">:</span>&nbsp;<span class="ident" id="5417"><a href="/bufio/bufio_test.go.html#5374">nb</a></span><span class="op" id="5419">+</span><span class="ident" id="5420"><a href="/bufio/bufio_test.go.html#5339">m</a></span><span class="op" id="5421">]</span><span class="op" id="5422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5426"><a href="/bufio/bufio_test.go.html#5374">nb</a></span>&nbsp;<span class="op" id="5429">+=</span>&nbsp;<span class="ident" id="5432"><a href="/bufio/bufio_test.go.html#5391">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5436">if</span>&nbsp;<span class="ident" id="5439"><a href="/bufio/bufio_test.go.html#5394">err</a></span>&nbsp;<span class="op" id="5443">==</span>&nbsp;<span class="ident" id="5446"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="5448">.</span><span class="ident" id="5449">EOF</span>&nbsp;<span class="op" id="5453">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5458">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5466">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5472">return</span>&nbsp;<span class="builtintype" id="5479">string</span><span class="op" id="5485">(</span><span class="ident" id="5486"><a href="/bufio/bufio_test.go.html#5360">b</a></span><span class="op" id="5487">[</span><span class="num" id="5488">0</span><span class="op" id="5489">:</span><span class="ident" id="5490"><a href="/bufio/bufio_test.go.html#5374">nb</a></span><span class="op" id="5492">]</span><span class="op" id="5493">)</span><br>
<span class="lineno"></span><span class="op" id="5495">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="keyword" id="5498">type</span>&nbsp;<span class="ident" id="5503">bufReader</span>&nbsp;<span class="keyword" id="5513">struct</span>&nbsp;<span class="op" id="5520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5523">name</span>&nbsp;<span class="builtintype" id="5528">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5536">fn</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="5541">func</span><span class="op" id="5545">(</span><span class="op" id="5546">*</span><span class="ident" id="5547"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="5553">)</span>&nbsp;<span class="builtintype" id="5555">string</span><br>
<span class="lineno"></span><span class="op" id="5562">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="5565">var</span>&nbsp;<span class="ident" id="5569">bufreaders</span>&nbsp;<span class="op" id="5580">=</span>&nbsp;<span class="op" id="5582">[</span><span class="op" id="5583">]</span><span class="ident" id="5584"><a href="/bufio/bufio_test.go.html#5503">bufReader</a></span><span class="op" id="5593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5596">{</span><span class="string" id="5597">&#34;1&#34;</span><span class="op" id="5600">,</span>&nbsp;<span class="keyword" id="5602">func</span><span class="op" id="5606">(</span><span class="ident" id="5607">b</span>&nbsp;<span class="op" id="5609">*</span><span class="ident" id="5610"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="5616">)</span>&nbsp;<span class="builtintype" id="5618">string</span>&nbsp;<span class="op" id="5625">{</span>&nbsp;<span class="keyword" id="5627">return</span>&nbsp;<span class="ident" id="5634"><a href="/bufio/bufio_test.go.html#5320">reads</a></span><span class="op" id="5639">(</span><span class="ident" id="5640"><a href="/bufio/bufio_test.go.html#5607">b</a></span><span class="op" id="5641">,</span>&nbsp;<span class="num" id="5643">1</span><span class="op" id="5644">)</span>&nbsp;<span class="op" id="5646">}</span><span class="op" id="5647">}</span><span class="op" id="5648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5651">{</span><span class="string" id="5652">&#34;2&#34;</span><span class="op" id="5655">,</span>&nbsp;<span class="keyword" id="5657">func</span><span class="op" id="5661">(</span><span class="ident" id="5662">b</span>&nbsp;<span class="op" id="5664">*</span><span class="ident" id="5665"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="5671">)</span>&nbsp;<span class="builtintype" id="5673">string</span>&nbsp;<span class="op" id="5680">{</span>&nbsp;<span class="keyword" id="5682">return</span>&nbsp;<span class="ident" id="5689"><a href="/bufio/bufio_test.go.html#5320">reads</a></span><span class="op" id="5694">(</span><span class="ident" id="5695"><a href="/bufio/bufio_test.go.html#5662">b</a></span><span class="op" id="5696">,</span>&nbsp;<span class="num" id="5698">2</span><span class="op" id="5699">)</span>&nbsp;<span class="op" id="5701">}</span><span class="op" id="5702">}</span><span class="op" id="5703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5706">{</span><span class="string" id="5707">&#34;3&#34;</span><span class="op" id="5710">,</span>&nbsp;<span class="keyword" id="5712">func</span><span class="op" id="5716">(</span><span class="ident" id="5717">b</span>&nbsp;<span class="op" id="5719">*</span><span class="ident" id="5720"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="5726">)</span>&nbsp;<span class="builtintype" id="5728">string</span>&nbsp;<span class="op" id="5735">{</span>&nbsp;<span class="keyword" id="5737">return</span>&nbsp;<span class="ident" id="5744"><a href="/bufio/bufio_test.go.html#5320">reads</a></span><span class="op" id="5749">(</span><span class="ident" id="5750"><a href="/bufio/bufio_test.go.html#5717">b</a></span><span class="op" id="5751">,</span>&nbsp;<span class="num" id="5753">3</span><span class="op" id="5754">)</span>&nbsp;<span class="op" id="5756">}</span><span class="op" id="5757">}</span><span class="op" id="5758">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5761">{</span><span class="string" id="5762">&#34;4&#34;</span><span class="op" id="5765">,</span>&nbsp;<span class="keyword" id="5767">func</span><span class="op" id="5771">(</span><span class="ident" id="5772">b</span>&nbsp;<span class="op" id="5774">*</span><span class="ident" id="5775"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="5781">)</span>&nbsp;<span class="builtintype" id="5783">string</span>&nbsp;<span class="op" id="5790">{</span>&nbsp;<span class="keyword" id="5792">return</span>&nbsp;<span class="ident" id="5799"><a href="/bufio/bufio_test.go.html#5320">reads</a></span><span class="op" id="5804">(</span><span class="ident" id="5805"><a href="/bufio/bufio_test.go.html#5772">b</a></span><span class="op" id="5806">,</span>&nbsp;<span class="num" id="5808">4</span><span class="op" id="5809">)</span>&nbsp;<span class="op" id="5811">}</span><span class="op" id="5812">}</span><span class="op" id="5813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5816">{</span><span class="string" id="5817">&#34;5&#34;</span><span class="op" id="5820">,</span>&nbsp;<span class="keyword" id="5822">func</span><span class="op" id="5826">(</span><span class="ident" id="5827">b</span>&nbsp;<span class="op" id="5829">*</span><span class="ident" id="5830"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="5836">)</span>&nbsp;<span class="builtintype" id="5838">string</span>&nbsp;<span class="op" id="5845">{</span>&nbsp;<span class="keyword" id="5847">return</span>&nbsp;<span class="ident" id="5854"><a href="/bufio/bufio_test.go.html#5320">reads</a></span><span class="op" id="5859">(</span><span class="ident" id="5860"><a href="/bufio/bufio_test.go.html#5827">b</a></span><span class="op" id="5861">,</span>&nbsp;<span class="num" id="5863">5</span><span class="op" id="5864">)</span>&nbsp;<span class="op" id="5866">}</span><span class="op" id="5867">}</span><span class="op" id="5868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5871">{</span><span class="string" id="5872">&#34;7&#34;</span><span class="op" id="5875">,</span>&nbsp;<span class="keyword" id="5877">func</span><span class="op" id="5881">(</span><span class="ident" id="5882">b</span>&nbsp;<span class="op" id="5884">*</span><span class="ident" id="5885"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="5891">)</span>&nbsp;<span class="builtintype" id="5893">string</span>&nbsp;<span class="op" id="5900">{</span>&nbsp;<span class="keyword" id="5902">return</span>&nbsp;<span class="ident" id="5909"><a href="/bufio/bufio_test.go.html#5320">reads</a></span><span class="op" id="5914">(</span><span class="ident" id="5915"><a href="/bufio/bufio_test.go.html#5882">b</a></span><span class="op" id="5916">,</span>&nbsp;<span class="num" id="5918">7</span><span class="op" id="5919">)</span>&nbsp;<span class="op" id="5921">}</span><span class="op" id="5922">}</span><span class="op" id="5923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5926">{</span><span class="string" id="5927">&#34;bytes&#34;</span><span class="op" id="5934">,</span>&nbsp;<span class="ident" id="5936"><a href="/bufio/bufio_test.go.html#4010">readBytes</a></span><span class="op" id="5945">}</span><span class="op" id="5946">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5949">{</span><span class="string" id="5950">&#34;lines&#34;</span><span class="op" id="5957">,</span>&nbsp;<span class="ident" id="5959"><a href="/bufio/bufio_test.go.html#5044">readLines</a></span><span class="op" id="5968">}</span><span class="op" id="5969">,</span><br>
<span class="lineno">135</span><span class="op" id="5971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5974">const</span>&nbsp;<span class="ident" id="5980">minReadBufferSize</span>&nbsp;<span class="op" id="5998">=</span>&nbsp;<span class="num" id="6000">16</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6004">var</span>&nbsp;<span class="ident" id="6008">bufsizes</span>&nbsp;<span class="op" id="6017">=</span>&nbsp;<span class="op" id="6019">[</span><span class="op" id="6020">]</span><span class="builtintype" id="6021">int</span><span class="op" id="6024">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="6027">0</span><span class="op" id="6028">,</span>&nbsp;<span class="ident" id="6030"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="6047">,</span>&nbsp;<span class="num" id="6049">23</span><span class="op" id="6051">,</span>&nbsp;<span class="num" id="6053">32</span><span class="op" id="6055">,</span>&nbsp;<span class="num" id="6057">46</span><span class="op" id="6059">,</span>&nbsp;<span class="num" id="6061">64</span><span class="op" id="6063">,</span>&nbsp;<span class="num" id="6065">93</span><span class="op" id="6067">,</span>&nbsp;<span class="num" id="6069">128</span><span class="op" id="6072">,</span>&nbsp;<span class="num" id="6074">1024</span><span class="op" id="6078">,</span>&nbsp;<span class="num" id="6080">4096</span><span class="op" id="6084">,</span><br>
<span class="lineno"></span><span class="op" id="6086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6089">func</span>&nbsp;<span class="ident" id="6094">TestReader</span><span class="op" id="6104">(</span><span class="ident" id="6105">t</span>&nbsp;<span class="op" id="6107">*</span><span class="ident" id="6108"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="6115">.</span><span class="ident" id="6116">T</span><span class="op" id="6117">)</span>&nbsp;<span class="op" id="6119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6122">var</span>&nbsp;<span class="ident" id="6126">texts</span>&nbsp;<span class="op" id="6132">[</span><span class="num" id="6133">31</span><span class="op" id="6135">]</span><span class="builtintype" id="6136">string</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6144">str</span>&nbsp;<span class="op" id="6148">:=</span>&nbsp;<span class="string" id="6151">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6155">all</span>&nbsp;<span class="op" id="6159">:=</span>&nbsp;<span class="string" id="6162">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6166">for</span>&nbsp;<span class="ident" id="6170">i</span>&nbsp;<span class="op" id="6172">:=</span>&nbsp;<span class="num" id="6175">0</span><span class="op" id="6176">;</span>&nbsp;<span class="ident" id="6178"><a href="/bufio/bufio_test.go.html#6170">i</a></span>&nbsp;<span class="op" id="6180">&lt;</span>&nbsp;<span class="builtinfunc" id="6182">len</span><span class="op" id="6185">(</span><span class="ident" id="6186"><a href="/bufio/bufio_test.go.html#6126">texts</a></span><span class="op" id="6191">)</span><span class="op" id="6192">-</span><span class="num" id="6193">1</span><span class="op" id="6194">;</span>&nbsp;<span class="ident" id="6196"><a href="/bufio/bufio_test.go.html#6170">i</a></span><span class="op" id="6197">++</span>&nbsp;<span class="op" id="6200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204"><a href="/bufio/bufio_test.go.html#6126">texts</a></span><span class="op" id="6209">[</span><span class="ident" id="6210"><a href="/bufio/bufio_test.go.html#6170">i</a></span><span class="op" id="6211">]</span>&nbsp;<span class="op" id="6213">=</span>&nbsp;<span class="ident" id="6215"><a href="/bufio/bufio_test.go.html#6144">str</a></span>&nbsp;<span class="op" id="6219">+</span>&nbsp;<span class="string" id="6221">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6228"><a href="/bufio/bufio_test.go.html#6155">all</a></span>&nbsp;<span class="op" id="6232">+=</span>&nbsp;<span class="ident" id="6235"><a href="/bufio/bufio_test.go.html#6126">texts</a></span><span class="op" id="6240">[</span><span class="ident" id="6241"><a href="/bufio/bufio_test.go.html#6170">i</a></span><span class="op" id="6242">]</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6246"><a href="/bufio/bufio_test.go.html#6144">str</a></span>&nbsp;<span class="op" id="6250">+=</span>&nbsp;<span class="builtintype" id="6253">string</span><span class="op" id="6259">(</span><span class="ident" id="6260"><a href="/bufio/bufio_test.go.html#6170">i</a></span><span class="op" id="6261">%</span><span class="num" id="6262">26</span>&nbsp;<span class="op" id="6265">+</span>&nbsp;<span class="string" id="6267">&#39;a&#39;</span><span class="op" id="6270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6276"><a href="/bufio/bufio_test.go.html#6126">texts</a></span><span class="op" id="6281">[</span><span class="builtinfunc" id="6282">len</span><span class="op" id="6285">(</span><span class="ident" id="6286"><a href="/bufio/bufio_test.go.html#6126">texts</a></span><span class="op" id="6291">)</span><span class="op" id="6292">-</span><span class="num" id="6293">1</span><span class="op" id="6294">]</span>&nbsp;<span class="op" id="6296">=</span>&nbsp;<span class="ident" id="6298"><a href="/bufio/bufio_test.go.html#6155">all</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6304">for</span>&nbsp;<span class="ident" id="6308">h</span>&nbsp;<span class="op" id="6310">:=</span>&nbsp;<span class="num" id="6313">0</span><span class="op" id="6314">;</span>&nbsp;<span class="ident" id="6316"><a href="/bufio/bufio_test.go.html#6308">h</a></span>&nbsp;<span class="op" id="6318">&lt;</span>&nbsp;<span class="builtinfunc" id="6320">len</span><span class="op" id="6323">(</span><span class="ident" id="6324"><a href="/bufio/bufio_test.go.html#6126">texts</a></span><span class="op" id="6329">)</span><span class="op" id="6330">;</span>&nbsp;<span class="ident" id="6332"><a href="/bufio/bufio_test.go.html#6308">h</a></span><span class="op" id="6333">++</span>&nbsp;<span class="op" id="6336">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6340">text</span>&nbsp;<span class="op" id="6345">:=</span>&nbsp;<span class="ident" id="6348"><a href="/bufio/bufio_test.go.html#6126">texts</a></span><span class="op" id="6353">[</span><span class="ident" id="6354"><a href="/bufio/bufio_test.go.html#6308">h</a></span><span class="op" id="6355">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6359">for</span>&nbsp;<span class="ident" id="6363">i</span>&nbsp;<span class="op" id="6365">:=</span>&nbsp;<span class="num" id="6368">0</span><span class="op" id="6369">;</span>&nbsp;<span class="ident" id="6371"><a href="/bufio/bufio_test.go.html#6363">i</a></span>&nbsp;<span class="op" id="6373">&lt;</span>&nbsp;<span class="builtinfunc" id="6375">len</span><span class="op" id="6378">(</span><span class="ident" id="6379"><a href="/bufio/bufio_test.go.html#4725">readMakers</a></span><span class="op" id="6389">)</span><span class="op" id="6390">;</span>&nbsp;<span class="ident" id="6392"><a href="/bufio/bufio_test.go.html#6363">i</a></span><span class="op" id="6393">++</span>&nbsp;<span class="op" id="6396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6401">for</span>&nbsp;<span class="ident" id="6405">j</span>&nbsp;<span class="op" id="6407">:=</span>&nbsp;<span class="num" id="6410">0</span><span class="op" id="6411">;</span>&nbsp;<span class="ident" id="6413"><a href="/bufio/bufio_test.go.html#6405">j</a></span>&nbsp;<span class="op" id="6415">&lt;</span>&nbsp;<span class="builtinfunc" id="6417">len</span><span class="op" id="6420">(</span><span class="ident" id="6421"><a href="/bufio/bufio_test.go.html#5569">bufreaders</a></span><span class="op" id="6431">)</span><span class="op" id="6432">;</span>&nbsp;<span class="ident" id="6434"><a href="/bufio/bufio_test.go.html#6405">j</a></span><span class="op" id="6435">++</span>&nbsp;<span class="op" id="6438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6444">for</span>&nbsp;<span class="ident" id="6448">k</span>&nbsp;<span class="op" id="6450">:=</span>&nbsp;<span class="num" id="6453">0</span><span class="op" id="6454">;</span>&nbsp;<span class="ident" id="6456"><a href="/bufio/bufio_test.go.html#6448">k</a></span>&nbsp;<span class="op" id="6458">&lt;</span>&nbsp;<span class="builtinfunc" id="6460">len</span><span class="op" id="6463">(</span><span class="ident" id="6464"><a href="/bufio/bufio_test.go.html#6008">bufsizes</a></span><span class="op" id="6472">)</span><span class="op" id="6473">;</span>&nbsp;<span class="ident" id="6475"><a href="/bufio/bufio_test.go.html#6448">k</a></span><span class="op" id="6476">++</span>&nbsp;<span class="op" id="6479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6486">readmaker</span>&nbsp;<span class="op" id="6496">:=</span>&nbsp;<span class="ident" id="6499"><a href="/bufio/bufio_test.go.html#4725">readMakers</a></span><span class="op" id="6509">[</span><span class="ident" id="6510"><a href="/bufio/bufio_test.go.html#6363">i</a></span><span class="op" id="6511">]</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518">bufreader</span>&nbsp;<span class="op" id="6528">:=</span>&nbsp;<span class="ident" id="6531"><a href="/bufio/bufio_test.go.html#5569">bufreaders</a></span><span class="op" id="6541">[</span><span class="ident" id="6542"><a href="/bufio/bufio_test.go.html#6405">j</a></span><span class="op" id="6543">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6550">bufsize</span>&nbsp;<span class="op" id="6558">:=</span>&nbsp;<span class="ident" id="6561"><a href="/bufio/bufio_test.go.html#6008">bufsizes</a></span><span class="op" id="6569">[</span><span class="ident" id="6570"><a href="/bufio/bufio_test.go.html#6448">k</a></span><span class="op" id="6571">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6578">read</span>&nbsp;<span class="op" id="6583">:=</span>&nbsp;<span class="ident" id="6586"><a href="/bufio/bufio_test.go.html#6486">readmaker</a></span><span class="op" id="6595">.</span><span class="ident" id="6596">fn</span><span class="op" id="6598">(</span><span class="ident" id="6599"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="6606">.</span><span class="ident" id="6607">NewReader</span><span class="op" id="6616">(</span><span class="ident" id="6617"><a href="/bufio/bufio_test.go.html#6340">text</a></span><span class="op" id="6621">)</span><span class="op" id="6622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6629">buf</span>&nbsp;<span class="op" id="6633">:=</span>&nbsp;<span class="ident" id="6636"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="6649">(</span><span class="ident" id="6650"><a href="/bufio/bufio_test.go.html#6578">read</a></span><span class="op" id="6654">,</span>&nbsp;<span class="ident" id="6656"><a href="/bufio/bufio_test.go.html#6550">bufsize</a></span><span class="op" id="6663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6670">s</span>&nbsp;<span class="op" id="6672">:=</span>&nbsp;<span class="ident" id="6675"><a href="/bufio/bufio_test.go.html#6518">bufreader</a></span><span class="op" id="6684">.</span><span class="ident" id="6685">fn</span><span class="op" id="6687">(</span><span class="ident" id="6688"><a href="/bufio/bufio_test.go.html#6629">buf</a></span><span class="op" id="6691">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6698">if</span>&nbsp;<span class="ident" id="6701"><a href="/bufio/bufio_test.go.html#6670">s</a></span>&nbsp;<span class="op" id="6703">!=</span>&nbsp;<span class="ident" id="6706"><a href="/bufio/bufio_test.go.html#6340">text</a></span>&nbsp;<span class="op" id="6711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6719"><a href="/bufio/bufio_test.go.html#6105">t</a></span><span class="op" id="6720">.</span><span class="ident" id="6721">Errorf</span><span class="op" id="6727">(</span><span class="string" id="6728">&#34;reader=%s&nbsp;fn=%s&nbsp;bufsize=%d&nbsp;want=%q&nbsp;got=%q&#34;</span><span class="op" id="6771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6780"><a href="/bufio/bufio_test.go.html#6486">readmaker</a></span><span class="op" id="6789">.</span><span class="ident" id="6790">name</span><span class="op" id="6794">,</span>&nbsp;<span class="ident" id="6796"><a href="/bufio/bufio_test.go.html#6518">bufreader</a></span><span class="op" id="6805">.</span><span class="ident" id="6806">name</span><span class="op" id="6810">,</span>&nbsp;<span class="ident" id="6812"><a href="/bufio/bufio_test.go.html#6550">bufsize</a></span><span class="op" id="6819">,</span>&nbsp;<span class="ident" id="6821"><a href="/bufio/bufio_test.go.html#6340">text</a></span><span class="op" id="6825">,</span>&nbsp;<span class="ident" id="6827"><a href="/bufio/bufio_test.go.html#6670">s</a></span><span class="op" id="6828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6841">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6853">}</span><br>
<span class="lineno"></span><span class="op" id="6855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="6858">type</span>&nbsp;<span class="ident" id="6863">zeroReader</span>&nbsp;<span class="keyword" id="6874">struct</span><span class="op" id="6880">{</span><span class="op" id="6881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6884">func</span>&nbsp;<span class="op" id="6889">(</span><span class="ident" id="6890"><a href="/bufio/bufio_test.go.html#6863">zeroReader</a></span><span class="op" id="6900">)</span>&nbsp;<span class="ident" id="6902">Read</span><span class="op" id="6906">(</span><span class="ident" id="6907">p</span>&nbsp;<span class="op" id="6909">[</span><span class="op" id="6910">]</span><span class="builtintype" id="6911">byte</span><span class="op" id="6915">)</span>&nbsp;<span class="op" id="6917">(</span><span class="builtintype" id="6918">int</span><span class="op" id="6921">,</span>&nbsp;<span class="builtintype" id="6923">error</span><span class="op" id="6928">)</span>&nbsp;<span class="op" id="6930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6933">return</span>&nbsp;<span class="num" id="6940">0</span><span class="op" id="6941">,</span>&nbsp;<span class="ident" id="6943">nil</span><br>
<span class="lineno"></span><span class="op" id="6947">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="6950">func</span>&nbsp;<span class="ident" id="6955">TestZeroReader</span><span class="op" id="6969">(</span><span class="ident" id="6970">t</span>&nbsp;<span class="op" id="6972">*</span><span class="ident" id="6973"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="6980">.</span><span class="ident" id="6981">T</span><span class="op" id="6982">)</span>&nbsp;<span class="op" id="6984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6987">var</span>&nbsp;<span class="ident" id="6991">z</span>&nbsp;<span class="ident" id="6993"><a href="/bufio/bufio_test.go.html#6863">zeroReader</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7005">r</span>&nbsp;<span class="op" id="7007">:=</span>&nbsp;<span class="ident" id="7010"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="7019">(</span><span class="ident" id="7020"><a href="/bufio/bufio_test.go.html#6991">z</a></span><span class="op" id="7021">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7025">c</span>&nbsp;<span class="op" id="7027">:=</span>&nbsp;<span class="builtinfunc" id="7030">make</span><span class="op" id="7034">(</span><span class="keyword" id="7035">chan</span>&nbsp;<span class="builtintype" id="7040">error</span><span class="op" id="7045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7048">go</span>&nbsp;<span class="keyword" id="7051">func</span><span class="op" id="7055">(</span><span class="op" id="7056">)</span>&nbsp;<span class="op" id="7058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7062">_</span><span class="op" id="7063">,</span>&nbsp;<span class="ident" id="7065">err</span>&nbsp;<span class="op" id="7069">:=</span>&nbsp;<span class="ident" id="7072"><a href="/bufio/bufio_test.go.html#7005">r</a></span><span class="op" id="7073">.</span><span class="ident" id="7074">ReadByte</span><span class="op" id="7082">(</span><span class="op" id="7083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7087"><a href="/bufio/bufio_test.go.html#7025">c</a></span>&nbsp;<span class="op" id="7089">&lt;-</span>&nbsp;<span class="ident" id="7092"><a href="/bufio/bufio_test.go.html#7065">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7097">}</span><span class="op" id="7098">(</span><span class="op" id="7099">)</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7103">select</span>&nbsp;<span class="op" id="7110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7113">case</span>&nbsp;<span class="ident" id="7118">err</span>&nbsp;<span class="op" id="7122">:=</span>&nbsp;<span class="op" id="7125">&lt;-</span><span class="ident" id="7127"><a href="/bufio/bufio_test.go.html#7025">c</a></span><span class="op" id="7128">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7132">if</span>&nbsp;<span class="ident" id="7135"><a href="/bufio/bufio_test.go.html#7118">err</a></span>&nbsp;<span class="op" id="7139">==</span>&nbsp;<span class="ident" id="7142">nil</span>&nbsp;<span class="op" id="7146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7151"><a href="/bufio/bufio_test.go.html#6970">t</a></span><span class="op" id="7152">.</span><span class="ident" id="7153">Error</span><span class="op" id="7158">(</span><span class="string" id="7159">&#34;error&nbsp;expected&#34;</span><span class="op" id="7175">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7179">}</span>&nbsp;<span class="keyword" id="7181">else</span>&nbsp;<span class="keyword" id="7186">if</span>&nbsp;<span class="ident" id="7189"><a href="/bufio/bufio_test.go.html#7118">err</a></span>&nbsp;<span class="op" id="7193">!=</span>&nbsp;<span class="ident" id="7196"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="7198">.</span><span class="ident" id="7199">ErrNoProgress</span>&nbsp;<span class="op" id="7213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7218"><a href="/bufio/bufio_test.go.html#6970">t</a></span><span class="op" id="7219">.</span><span class="ident" id="7220">Error</span><span class="op" id="7225">(</span><span class="string" id="7226">&#34;unexpected&nbsp;error:&#34;</span><span class="op" id="7245">,</span>&nbsp;<span class="ident" id="7247"><a href="/bufio/bufio_test.go.html#7118">err</a></span><span class="op" id="7250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7257">case</span>&nbsp;<span class="op" id="7262">&lt;-</span><span class="ident" id="7264"><a href="/bufio/bufio_test.go.html#3484">time</a></span><span class="op" id="7268">.</span><span class="ident" id="7269">After</span><span class="op" id="7274">(</span><span class="ident" id="7275"><a href="/bufio/bufio_test.go.html#3484">time</a></span><span class="op" id="7279">.</span><span class="ident" id="7280">Second</span><span class="op" id="7286">)</span><span class="op" id="7287">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7291"><a href="/bufio/bufio_test.go.html#6970">t</a></span><span class="op" id="7292">.</span><span class="ident" id="7293">Error</span><span class="op" id="7298">(</span><span class="string" id="7299">&#34;test&nbsp;timed&nbsp;out&nbsp;(endless&nbsp;loop&nbsp;in&nbsp;ReadByte?)&#34;</span><span class="op" id="7343">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7346">}</span><br>
<span class="lineno"></span><span class="op" id="7348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7351">//&nbsp;A&nbsp;StringReader&nbsp;delivers&nbsp;its&nbsp;data&nbsp;one&nbsp;string&nbsp;segment&nbsp;at&nbsp;a&nbsp;time&nbsp;via&nbsp;Read.</span><br>
<span class="lineno"></span><span class="keyword" id="7426">type</span>&nbsp;<span class="ident" id="7431">StringReader</span>&nbsp;<span class="keyword" id="7444">struct</span>&nbsp;<span class="op" id="7451">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7454">data</span>&nbsp;<span class="op" id="7459">[</span><span class="op" id="7460">]</span><span class="builtintype" id="7461">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7469">step</span>&nbsp;<span class="builtintype" id="7474">int</span><br>
<span class="lineno"></span><span class="op" id="7478">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7481">func</span>&nbsp;<span class="op" id="7486">(</span><span class="ident" id="7487">r</span>&nbsp;<span class="op" id="7489">*</span><span class="ident" id="7490"><a href="/bufio/bufio_test.go.html#7431">StringReader</a></span><span class="op" id="7502">)</span>&nbsp;<span class="ident" id="7504">Read</span><span class="op" id="7508">(</span><span class="ident" id="7509">p</span>&nbsp;<span class="op" id="7511">[</span><span class="op" id="7512">]</span><span class="builtintype" id="7513">byte</span><span class="op" id="7517">)</span>&nbsp;<span class="op" id="7519">(</span><span class="ident" id="7520">n</span>&nbsp;<span class="builtintype" id="7522">int</span><span class="op" id="7525">,</span>&nbsp;<span class="ident" id="7527">err</span>&nbsp;<span class="builtintype" id="7531">error</span><span class="op" id="7536">)</span>&nbsp;<span class="op" id="7538">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7541">if</span>&nbsp;<span class="ident" id="7544"><a href="/bufio/bufio_test.go.html#7487">r</a></span><span class="op" id="7545">.</span><span class="ident" id="7546">step</span>&nbsp;<span class="op" id="7551">&lt;</span>&nbsp;<span class="builtinfunc" id="7553">len</span><span class="op" id="7556">(</span><span class="ident" id="7557"><a href="/bufio/bufio_test.go.html#7487">r</a></span><span class="op" id="7558">.</span><span class="ident" id="7559">data</span><span class="op" id="7563">)</span>&nbsp;<span class="op" id="7565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7569">s</span>&nbsp;<span class="op" id="7571">:=</span>&nbsp;<span class="ident" id="7574"><a href="/bufio/bufio_test.go.html#7487">r</a></span><span class="op" id="7575">.</span><span class="ident" id="7576">data</span><span class="op" id="7580">[</span><span class="ident" id="7581"><a href="/bufio/bufio_test.go.html#7487">r</a></span><span class="op" id="7582">.</span><span class="ident" id="7583">step</span><span class="op" id="7587">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7591"><a href="/bufio/bufio_test.go.html#7520">n</a></span>&nbsp;<span class="op" id="7593">=</span>&nbsp;<span class="builtinfunc" id="7595">copy</span><span class="op" id="7599">(</span><span class="ident" id="7600"><a href="/bufio/bufio_test.go.html#7509">p</a></span><span class="op" id="7601">,</span>&nbsp;<span class="ident" id="7603"><a href="/bufio/bufio_test.go.html#7569">s</a></span><span class="op" id="7604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7608"><a href="/bufio/bufio_test.go.html#7487">r</a></span><span class="op" id="7609">.</span><span class="ident" id="7610">step</span><span class="op" id="7614">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618">}</span>&nbsp;<span class="keyword" id="7620">else</span>&nbsp;<span class="op" id="7625">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7629"><a href="/bufio/bufio_test.go.html#7527">err</a></span>&nbsp;<span class="op" id="7633">=</span>&nbsp;<span class="ident" id="7635"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="7637">.</span><span class="ident" id="7638">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7646">return</span><br>
<span class="lineno"></span><span class="op" id="7653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="7656">func</span>&nbsp;<span class="ident" id="7661">readRuneSegments</span><span class="op" id="7677">(</span><span class="ident" id="7678">t</span>&nbsp;<span class="op" id="7680">*</span><span class="ident" id="7681"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="7688">.</span><span class="ident" id="7689">T</span><span class="op" id="7690">,</span>&nbsp;<span class="ident" id="7692">segments</span>&nbsp;<span class="op" id="7701">[</span><span class="op" id="7702">]</span><span class="builtintype" id="7703">string</span><span class="op" id="7709">)</span>&nbsp;<span class="op" id="7711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714">got</span>&nbsp;<span class="op" id="7718">:=</span>&nbsp;<span class="string" id="7721">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725">want</span>&nbsp;<span class="op" id="7730">:=</span>&nbsp;<span class="ident" id="7733"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="7740">.</span><span class="ident" id="7741">Join</span><span class="op" id="7745">(</span><span class="ident" id="7746"><a href="/bufio/bufio_test.go.html#7692">segments</a></span><span class="op" id="7754">,</span>&nbsp;<span class="string" id="7756">&#34;&#34;</span><span class="op" id="7758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7761">r</span>&nbsp;<span class="op" id="7763">:=</span>&nbsp;<span class="ident" id="7766"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="7775">(</span><span class="op" id="7776">&amp;</span><span class="ident" id="7777"><a href="/bufio/bufio_test.go.html#7431">StringReader</a></span><span class="op" id="7789">{</span><span class="ident" id="7790">data</span><span class="op" id="7794">:</span>&nbsp;<span class="ident" id="7796"><a href="/bufio/bufio_test.go.html#7692">segments</a></span><span class="op" id="7804">}</span><span class="op" id="7805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7808">for</span>&nbsp;<span class="op" id="7812">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7816">r</span><span class="op" id="7817">,</span>&nbsp;<span class="ident" id="7819">_</span><span class="op" id="7820">,</span>&nbsp;<span class="ident" id="7822">err</span>&nbsp;<span class="op" id="7826">:=</span>&nbsp;<span class="ident" id="7829"><a href="/bufio/bufio_test.go.html#7761">r</a></span><span class="op" id="7830">.</span><span class="ident" id="7831">ReadRune</span><span class="op" id="7839">(</span><span class="op" id="7840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7844">if</span>&nbsp;<span class="ident" id="7847"><a href="/bufio/bufio_test.go.html#7822">err</a></span>&nbsp;<span class="op" id="7851">!=</span>&nbsp;<span class="ident" id="7854">nil</span>&nbsp;<span class="op" id="7858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7863">if</span>&nbsp;<span class="ident" id="7866"><a href="/bufio/bufio_test.go.html#7822">err</a></span>&nbsp;<span class="op" id="7870">!=</span>&nbsp;<span class="ident" id="7873"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="7875">.</span><span class="ident" id="7876">EOF</span>&nbsp;<span class="op" id="7880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7886">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7896">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7901">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913"><a href="/bufio/bufio_test.go.html#7714">got</a></span>&nbsp;<span class="op" id="7917">+=</span>&nbsp;<span class="builtintype" id="7920">string</span><span class="op" id="7926">(</span><span class="ident" id="7927"><a href="/bufio/bufio_test.go.html#7816">r</a></span><span class="op" id="7928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7931">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7934">if</span>&nbsp;<span class="ident" id="7937"><a href="/bufio/bufio_test.go.html#7714">got</a></span>&nbsp;<span class="op" id="7941">!=</span>&nbsp;<span class="ident" id="7944"><a href="/bufio/bufio_test.go.html#7725">want</a></span>&nbsp;<span class="op" id="7949">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7953"><a href="/bufio/bufio_test.go.html#7678">t</a></span><span class="op" id="7954">.</span><span class="ident" id="7955">Errorf</span><span class="op" id="7961">(</span><span class="string" id="7962">&#34;segments=%v&nbsp;got=%s&nbsp;want=%s&#34;</span><span class="op" id="7990">,</span>&nbsp;<span class="ident" id="7992"><a href="/bufio/bufio_test.go.html#7692">segments</a></span><span class="op" id="8000">,</span>&nbsp;<span class="ident" id="8002"><a href="/bufio/bufio_test.go.html#7714">got</a></span><span class="op" id="8005">,</span>&nbsp;<span class="ident" id="8007"><a href="/bufio/bufio_test.go.html#7725">want</a></span><span class="op" id="8011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8014">}</span><br>
<span class="lineno"></span><span class="op" id="8016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8019">var</span>&nbsp;<span class="ident" id="8023">segmentList</span>&nbsp;<span class="op" id="8035">=</span>&nbsp;<span class="op" id="8037">[</span><span class="op" id="8038">]</span><span class="op" id="8039">[</span><span class="op" id="8040">]</span><span class="builtintype" id="8041">string</span><span class="op" id="8047">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8050">{</span><span class="op" id="8051">}</span><span class="op" id="8052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8055">{</span><span class="string" id="8056">&#34;&#34;</span><span class="op" id="8058">}</span><span class="op" id="8059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8062">{</span><span class="string" id="8063">&#34;日&#34;</span><span class="op" id="8068">,</span>&nbsp;<span class="string" id="8070">&#34;本語&#34;</span><span class="op" id="8078">}</span><span class="op" id="8079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8082">{</span><span class="string" id="8083">&#34;\u65e5&#34;</span><span class="op" id="8091">,</span>&nbsp;<span class="string" id="8093">&#34;\u672c&#34;</span><span class="op" id="8101">,</span>&nbsp;<span class="string" id="8103">&#34;\u8a9e&#34;</span><span class="op" id="8111">}</span><span class="op" id="8112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8115">{</span><span class="string" id="8116">&#34;\U000065e5&#34;</span><span class="op" id="8128">,</span>&nbsp;<span class="string" id="8130">&#34;\U0000672c&#34;</span><span class="op" id="8142">,</span>&nbsp;<span class="string" id="8144">&#34;\U00008a9e&#34;</span><span class="op" id="8156">}</span><span class="op" id="8157">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8160">{</span><span class="string" id="8161">&#34;\xe6&#34;</span><span class="op" id="8167">,</span>&nbsp;<span class="string" id="8169">&#34;\x97\xa5\xe6&#34;</span><span class="op" id="8183">,</span>&nbsp;<span class="string" id="8185">&#34;\x9c\xac\xe8\xaa\x9e&#34;</span><span class="op" id="8207">}</span><span class="op" id="8208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8211">{</span><span class="string" id="8212">&#34;Hello&#34;</span><span class="op" id="8219">,</span>&nbsp;<span class="string" id="8221">&#34;,&nbsp;&#34;</span><span class="op" id="8225">,</span>&nbsp;<span class="string" id="8227">&#34;World&#34;</span><span class="op" id="8234">,</span>&nbsp;<span class="string" id="8236">&#34;!&#34;</span><span class="op" id="8239">}</span><span class="op" id="8240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8243">{</span><span class="string" id="8244">&#34;Hello&#34;</span><span class="op" id="8251">,</span>&nbsp;<span class="string" id="8253">&#34;,&nbsp;&#34;</span><span class="op" id="8257">,</span>&nbsp;<span class="string" id="8259">&#34;&#34;</span><span class="op" id="8261">,</span>&nbsp;<span class="string" id="8263">&#34;World&#34;</span><span class="op" id="8270">,</span>&nbsp;<span class="string" id="8272">&#34;!&#34;</span><span class="op" id="8275">}</span><span class="op" id="8276">,</span><br>
<span class="lineno"></span><span class="op" id="8278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">250</span><span class="keyword" id="8281">func</span>&nbsp;<span class="ident" id="8286">TestReadRune</span><span class="op" id="8298">(</span><span class="ident" id="8299">t</span>&nbsp;<span class="op" id="8301">*</span><span class="ident" id="8302"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="8309">.</span><span class="ident" id="8310">T</span><span class="op" id="8311">)</span>&nbsp;<span class="op" id="8313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8316">for</span>&nbsp;<span class="ident" id="8320">_</span><span class="op" id="8321">,</span>&nbsp;<span class="ident" id="8323">s</span>&nbsp;<span class="op" id="8325">:=</span>&nbsp;<span class="keyword" id="8328">range</span>&nbsp;<span class="ident" id="8334"><a href="/bufio/bufio_test.go.html#8023">segmentList</a></span>&nbsp;<span class="op" id="8346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8350"><a href="/bufio/bufio_test.go.html#7661">readRuneSegments</a></span><span class="op" id="8366">(</span><span class="ident" id="8367"><a href="/bufio/bufio_test.go.html#8299">t</a></span><span class="op" id="8368">,</span>&nbsp;<span class="ident" id="8370"><a href="/bufio/bufio_test.go.html#8323">s</a></span><span class="op" id="8371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8374">}</span><br>
<span class="lineno"></span><span class="op" id="8376">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span><span class="keyword" id="8379">func</span>&nbsp;<span class="ident" id="8384">TestUnreadRune</span><span class="op" id="8398">(</span><span class="ident" id="8399">t</span>&nbsp;<span class="op" id="8401">*</span><span class="ident" id="8402"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="8409">.</span><span class="ident" id="8410">T</span><span class="op" id="8411">)</span>&nbsp;<span class="op" id="8413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8416">segments</span>&nbsp;<span class="op" id="8425">:=</span>&nbsp;<span class="op" id="8428">[</span><span class="op" id="8429">]</span><span class="builtintype" id="8430">string</span><span class="op" id="8436">{</span><span class="string" id="8437">&#34;Hello,&nbsp;world:&#34;</span><span class="op" id="8452">,</span>&nbsp;<span class="string" id="8454">&#34;日本語&#34;</span><span class="op" id="8465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8468">r</span>&nbsp;<span class="op" id="8470">:=</span>&nbsp;<span class="ident" id="8473"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="8482">(</span><span class="op" id="8483">&amp;</span><span class="ident" id="8484"><a href="/bufio/bufio_test.go.html#7431">StringReader</a></span><span class="op" id="8496">{</span><span class="ident" id="8497">data</span><span class="op" id="8501">:</span>&nbsp;<span class="ident" id="8503"><a href="/bufio/bufio_test.go.html#8416">segments</a></span><span class="op" id="8511">}</span><span class="op" id="8512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8515">got</span>&nbsp;<span class="op" id="8519">:=</span>&nbsp;<span class="string" id="8522">&#34;&#34;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8526">want</span>&nbsp;<span class="op" id="8531">:=</span>&nbsp;<span class="ident" id="8534"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="8541">.</span><span class="ident" id="8542">Join</span><span class="op" id="8546">(</span><span class="ident" id="8547"><a href="/bufio/bufio_test.go.html#8416">segments</a></span><span class="op" id="8555">,</span>&nbsp;<span class="string" id="8557">&#34;&#34;</span><span class="op" id="8559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8562">//&nbsp;Normal&nbsp;execution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8584">for</span>&nbsp;<span class="op" id="8588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8592">r1</span><span class="op" id="8594">,</span>&nbsp;<span class="ident" id="8596">_</span><span class="op" id="8597">,</span>&nbsp;<span class="ident" id="8599">err</span>&nbsp;<span class="op" id="8603">:=</span>&nbsp;<span class="ident" id="8606"><a href="/bufio/bufio_test.go.html#8468">r</a></span><span class="op" id="8607">.</span><span class="ident" id="8608">ReadRune</span><span class="op" id="8616">(</span><span class="op" id="8617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8621">if</span>&nbsp;<span class="ident" id="8624"><a href="/bufio/bufio_test.go.html#8599">err</a></span>&nbsp;<span class="op" id="8628">!=</span>&nbsp;<span class="ident" id="8631">nil</span>&nbsp;<span class="op" id="8635">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8640">if</span>&nbsp;<span class="ident" id="8643"><a href="/bufio/bufio_test.go.html#8599">err</a></span>&nbsp;<span class="op" id="8647">!=</span>&nbsp;<span class="ident" id="8650"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="8652">.</span><span class="ident" id="8653">EOF</span>&nbsp;<span class="op" id="8657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8663"><a href="/bufio/bufio_test.go.html#8399">t</a></span><span class="op" id="8664">.</span><span class="ident" id="8665">Error</span><span class="op" id="8670">(</span><span class="string" id="8671">&#34;unexpected&nbsp;error&nbsp;on&nbsp;ReadRune:&#34;</span><span class="op" id="8702">,</span>&nbsp;<span class="ident" id="8704"><a href="/bufio/bufio_test.go.html#8599">err</a></span><span class="op" id="8707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8712">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8717">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8725">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8729"><a href="/bufio/bufio_test.go.html#8515">got</a></span>&nbsp;<span class="op" id="8733">+=</span>&nbsp;<span class="builtintype" id="8736">string</span><span class="op" id="8742">(</span><span class="ident" id="8743"><a href="/bufio/bufio_test.go.html#8592">r1</a></span><span class="op" id="8745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8749">//&nbsp;Put&nbsp;it&nbsp;back&nbsp;and&nbsp;read&nbsp;it&nbsp;again.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8785">if</span>&nbsp;<span class="ident" id="8788"><a href="/bufio/bufio_test.go.html#8599">err</a></span>&nbsp;<span class="op" id="8792">=</span>&nbsp;<span class="ident" id="8794"><a href="/bufio/bufio_test.go.html#8468">r</a></span><span class="op" id="8795">.</span><span class="ident" id="8796">UnreadRune</span><span class="op" id="8806">(</span><span class="op" id="8807">)</span><span class="op" id="8808">;</span>&nbsp;<span class="ident" id="8810"><a href="/bufio/bufio_test.go.html#8599">err</a></span>&nbsp;<span class="op" id="8814">!=</span>&nbsp;<span class="ident" id="8817">nil</span>&nbsp;<span class="op" id="8821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8826"><a href="/bufio/bufio_test.go.html#8399">t</a></span><span class="op" id="8827">.</span><span class="ident" id="8828">Fatal</span><span class="op" id="8833">(</span><span class="string" id="8834">&#34;unexpected&nbsp;error&nbsp;on&nbsp;UnreadRune:&#34;</span><span class="op" id="8867">,</span>&nbsp;<span class="ident" id="8869"><a href="/bufio/bufio_test.go.html#8599">err</a></span><span class="op" id="8872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8876">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8880">r2</span><span class="op" id="8882">,</span>&nbsp;<span class="ident" id="8884">_</span><span class="op" id="8885">,</span>&nbsp;<span class="ident" id="8887"><a href="/bufio/bufio_test.go.html#8599">err</a></span>&nbsp;<span class="op" id="8891">:=</span>&nbsp;<span class="ident" id="8894"><a href="/bufio/bufio_test.go.html#8468">r</a></span><span class="op" id="8895">.</span><span class="ident" id="8896">ReadRune</span><span class="op" id="8904">(</span><span class="op" id="8905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8909">if</span>&nbsp;<span class="ident" id="8912"><a href="/bufio/bufio_test.go.html#8599">err</a></span>&nbsp;<span class="op" id="8916">!=</span>&nbsp;<span class="ident" id="8919">nil</span>&nbsp;<span class="op" id="8923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8928"><a href="/bufio/bufio_test.go.html#8399">t</a></span><span class="op" id="8929">.</span><span class="ident" id="8930">Fatal</span><span class="op" id="8935">(</span><span class="string" id="8936">&#34;unexpected&nbsp;error&nbsp;reading&nbsp;after&nbsp;unreading:&#34;</span><span class="op" id="8979">,</span>&nbsp;<span class="ident" id="8981"><a href="/bufio/bufio_test.go.html#8599">err</a></span><span class="op" id="8984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8992">if</span>&nbsp;<span class="ident" id="8995"><a href="/bufio/bufio_test.go.html#8592">r1</a></span>&nbsp;<span class="op" id="8998">!=</span>&nbsp;<span class="ident" id="9001"><a href="/bufio/bufio_test.go.html#8880">r2</a></span>&nbsp;<span class="op" id="9004">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9009"><a href="/bufio/bufio_test.go.html#8399">t</a></span><span class="op" id="9010">.</span><span class="ident" id="9011">Fatalf</span><span class="op" id="9017">(</span><span class="string" id="9018">&#34;incorrect&nbsp;rune&nbsp;after&nbsp;unread:&nbsp;got&nbsp;%c,&nbsp;want&nbsp;%c&#34;</span><span class="op" id="9064">,</span>&nbsp;<span class="ident" id="9066"><a href="/bufio/bufio_test.go.html#8592">r1</a></span><span class="op" id="9068">,</span>&nbsp;<span class="ident" id="9070"><a href="/bufio/bufio_test.go.html#8880">r2</a></span><span class="op" id="9072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="9076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="9079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="9082">if</span>&nbsp;<span class="ident" id="9085"><a href="/bufio/bufio_test.go.html#8515">got</a></span>&nbsp;<span class="op" id="9089">!=</span>&nbsp;<span class="ident" id="9092"><a href="/bufio/bufio_test.go.html#8526">want</a></span>&nbsp;<span class="op" id="9097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9101"><a href="/bufio/bufio_test.go.html#8399">t</a></span><span class="op" id="9102">.</span><span class="ident" id="9103">Errorf</span><span class="op" id="9109">(</span><span class="string" id="9110">&#34;got&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="9127">,</span>&nbsp;<span class="ident" id="9129"><a href="/bufio/bufio_test.go.html#8515">got</a></span><span class="op" id="9132">,</span>&nbsp;<span class="ident" id="9134"><a href="/bufio/bufio_test.go.html#8526">want</a></span><span class="op" id="9138">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="9141">}</span><br>
<span class="lineno"></span><span class="op" id="9143">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="9146">func</span>&nbsp;<span class="ident" id="9151">TestUnreadByte</span><span class="op" id="9165">(</span><span class="ident" id="9166">t</span>&nbsp;<span class="op" id="9168">*</span><span class="ident" id="9169"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="9176">.</span><span class="ident" id="9177">T</span><span class="op" id="9178">)</span>&nbsp;<span class="op" id="9180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9183">segments</span>&nbsp;<span class="op" id="9192">:=</span>&nbsp;<span class="op" id="9195">[</span><span class="op" id="9196">]</span><span class="builtintype" id="9197">string</span><span class="op" id="9203">{</span><span class="string" id="9204">&#34;Hello,&nbsp;&#34;</span><span class="op" id="9213">,</span>&nbsp;<span class="string" id="9215">&#34;world&#34;</span><span class="op" id="9222">}</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9225">r</span>&nbsp;<span class="op" id="9227">:=</span>&nbsp;<span class="ident" id="9230"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="9239">(</span><span class="op" id="9240">&amp;</span><span class="ident" id="9241"><a href="/bufio/bufio_test.go.html#7431">StringReader</a></span><span class="op" id="9253">{</span><span class="ident" id="9254">data</span><span class="op" id="9258">:</span>&nbsp;<span class="ident" id="9260"><a href="/bufio/bufio_test.go.html#9183">segments</a></span><span class="op" id="9268">}</span><span class="op" id="9269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9272">got</span>&nbsp;<span class="op" id="9276">:=</span>&nbsp;<span class="string" id="9279">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9283">want</span>&nbsp;<span class="op" id="9288">:=</span>&nbsp;<span class="ident" id="9291"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="9298">.</span><span class="ident" id="9299">Join</span><span class="op" id="9303">(</span><span class="ident" id="9304"><a href="/bufio/bufio_test.go.html#9183">segments</a></span><span class="op" id="9312">,</span>&nbsp;<span class="string" id="9314">&#34;&#34;</span><span class="op" id="9316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="9319">//&nbsp;Normal&nbsp;execution.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="9341">for</span>&nbsp;<span class="op" id="9345">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9349">b1</span><span class="op" id="9351">,</span>&nbsp;<span class="ident" id="9353">err</span>&nbsp;<span class="op" id="9357">:=</span>&nbsp;<span class="ident" id="9360"><a href="/bufio/bufio_test.go.html#9225">r</a></span><span class="op" id="9361">.</span><span class="ident" id="9362">ReadByte</span><span class="op" id="9370">(</span><span class="op" id="9371">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="9375">if</span>&nbsp;<span class="ident" id="9378"><a href="/bufio/bufio_test.go.html#9353">err</a></span>&nbsp;<span class="op" id="9382">!=</span>&nbsp;<span class="ident" id="9385">nil</span>&nbsp;<span class="op" id="9389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="9394">if</span>&nbsp;<span class="ident" id="9397"><a href="/bufio/bufio_test.go.html#9353">err</a></span>&nbsp;<span class="op" id="9401">!=</span>&nbsp;<span class="ident" id="9404"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="9406">.</span><span class="ident" id="9407">EOF</span>&nbsp;<span class="op" id="9411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9417"><a href="/bufio/bufio_test.go.html#9166">t</a></span><span class="op" id="9418">.</span><span class="ident" id="9419">Error</span><span class="op" id="9424">(</span><span class="string" id="9425">&#34;unexpected&nbsp;error&nbsp;on&nbsp;ReadByte:&#34;</span><span class="op" id="9456">,</span>&nbsp;<span class="ident" id="9458"><a href="/bufio/bufio_test.go.html#9353">err</a></span><span class="op" id="9461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="9466">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="9471">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="9479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9483"><a href="/bufio/bufio_test.go.html#9272">got</a></span>&nbsp;<span class="op" id="9487">+=</span>&nbsp;<span class="builtintype" id="9490">string</span><span class="op" id="9496">(</span><span class="ident" id="9497"><a href="/bufio/bufio_test.go.html#9349">b1</a></span><span class="op" id="9499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="9503">//&nbsp;Put&nbsp;it&nbsp;back&nbsp;and&nbsp;read&nbsp;it&nbsp;again.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="9539">if</span>&nbsp;<span class="ident" id="9542"><a href="/bufio/bufio_test.go.html#9353">err</a></span>&nbsp;<span class="op" id="9546">=</span>&nbsp;<span class="ident" id="9548"><a href="/bufio/bufio_test.go.html#9225">r</a></span><span class="op" id="9549">.</span><span class="ident" id="9550">UnreadByte</span><span class="op" id="9560">(</span><span class="op" id="9561">)</span><span class="op" id="9562">;</span>&nbsp;<span class="ident" id="9564"><a href="/bufio/bufio_test.go.html#9353">err</a></span>&nbsp;<span class="op" id="9568">!=</span>&nbsp;<span class="ident" id="9571">nil</span>&nbsp;<span class="op" id="9575">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9580"><a href="/bufio/bufio_test.go.html#9166">t</a></span><span class="op" id="9581">.</span><span class="ident" id="9582">Fatal</span><span class="op" id="9587">(</span><span class="string" id="9588">&#34;unexpected&nbsp;error&nbsp;on&nbsp;UnreadByte:&#34;</span><span class="op" id="9621">,</span>&nbsp;<span class="ident" id="9623"><a href="/bufio/bufio_test.go.html#9353">err</a></span><span class="op" id="9626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="9630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9634">b2</span><span class="op" id="9636">,</span>&nbsp;<span class="ident" id="9638"><a href="/bufio/bufio_test.go.html#9353">err</a></span>&nbsp;<span class="op" id="9642">:=</span>&nbsp;<span class="ident" id="9645"><a href="/bufio/bufio_test.go.html#9225">r</a></span><span class="op" id="9646">.</span><span class="ident" id="9647">ReadByte</span><span class="op" id="9655">(</span><span class="op" id="9656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="9660">if</span>&nbsp;<span class="ident" id="9663"><a href="/bufio/bufio_test.go.html#9353">err</a></span>&nbsp;<span class="op" id="9667">!=</span>&nbsp;<span class="ident" id="9670">nil</span>&nbsp;<span class="op" id="9674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9679"><a href="/bufio/bufio_test.go.html#9166">t</a></span><span class="op" id="9680">.</span><span class="ident" id="9681">Fatal</span><span class="op" id="9686">(</span><span class="string" id="9687">&#34;unexpected&nbsp;error&nbsp;reading&nbsp;after&nbsp;unreading:&#34;</span><span class="op" id="9730">,</span>&nbsp;<span class="ident" id="9732"><a href="/bufio/bufio_test.go.html#9353">err</a></span><span class="op" id="9735">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="9739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="9743">if</span>&nbsp;<span class="ident" id="9746"><a href="/bufio/bufio_test.go.html#9349">b1</a></span>&nbsp;<span class="op" id="9749">!=</span>&nbsp;<span class="ident" id="9752"><a href="/bufio/bufio_test.go.html#9634">b2</a></span>&nbsp;<span class="op" id="9755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9760"><a href="/bufio/bufio_test.go.html#9166">t</a></span><span class="op" id="9761">.</span><span class="ident" id="9762">Fatalf</span><span class="op" id="9768">(</span><span class="string" id="9769">&#34;incorrect&nbsp;byte&nbsp;after&nbsp;unread:&nbsp;got&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="9815">,</span>&nbsp;<span class="ident" id="9817"><a href="/bufio/bufio_test.go.html#9349">b1</a></span><span class="op" id="9819">,</span>&nbsp;<span class="ident" id="9821"><a href="/bufio/bufio_test.go.html#9634">b2</a></span><span class="op" id="9823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="9827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="9830">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="9833">if</span>&nbsp;<span class="ident" id="9836"><a href="/bufio/bufio_test.go.html#9272">got</a></span>&nbsp;<span class="op" id="9840">!=</span>&nbsp;<span class="ident" id="9843"><a href="/bufio/bufio_test.go.html#9283">want</a></span>&nbsp;<span class="op" id="9848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9852"><a href="/bufio/bufio_test.go.html#9166">t</a></span><span class="op" id="9853">.</span><span class="ident" id="9854">Errorf</span><span class="op" id="9860">(</span><span class="string" id="9861">&#34;got&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="9878">,</span>&nbsp;<span class="ident" id="9880"><a href="/bufio/bufio_test.go.html#9272">got</a></span><span class="op" id="9883">,</span>&nbsp;<span class="ident" id="9885"><a href="/bufio/bufio_test.go.html#9283">want</a></span><span class="op" id="9889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="9892">}</span><br>
<span class="lineno"></span><span class="op" id="9894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="keyword" id="9897">func</span>&nbsp;<span class="ident" id="9902">TestUnreadByteMultiple</span><span class="op" id="9924">(</span><span class="ident" id="9925">t</span>&nbsp;<span class="op" id="9927">*</span><span class="ident" id="9928"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="9935">.</span><span class="ident" id="9936">T</span><span class="op" id="9937">)</span>&nbsp;<span class="op" id="9939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9942">segments</span>&nbsp;<span class="op" id="9951">:=</span>&nbsp;<span class="op" id="9954">[</span><span class="op" id="9955">]</span><span class="builtintype" id="9956">string</span><span class="op" id="9962">{</span><span class="string" id="9963">&#34;Hello,&nbsp;&#34;</span><span class="op" id="9972">,</span>&nbsp;<span class="string" id="9974">&#34;world&#34;</span><span class="op" id="9981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="9984">data</span>&nbsp;<span class="op" id="9989">:=</span>&nbsp;<span class="ident" id="9992"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="9999">.</span><span class="ident" id="10000">Join</span><span class="op" id="10004">(</span><span class="ident" id="10005"><a href="/bufio/bufio_test.go.html#9942">segments</a></span><span class="op" id="10013">,</span>&nbsp;<span class="string" id="10015">&#34;&#34;</span><span class="op" id="10017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="10020">for</span>&nbsp;<span class="ident" id="10024">n</span>&nbsp;<span class="op" id="10026">:=</span>&nbsp;<span class="num" id="10029">0</span><span class="op" id="10030">;</span>&nbsp;<span class="ident" id="10032"><a href="/bufio/bufio_test.go.html#10024">n</a></span>&nbsp;<span class="op" id="10034">&lt;=</span>&nbsp;<span class="builtinfunc" id="10037">len</span><span class="op" id="10040">(</span><span class="ident" id="10041"><a href="/bufio/bufio_test.go.html#9984">data</a></span><span class="op" id="10045">)</span><span class="op" id="10046">;</span>&nbsp;<span class="ident" id="10048"><a href="/bufio/bufio_test.go.html#10024">n</a></span><span class="op" id="10049">++</span>&nbsp;<span class="op" id="10052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="10056">r</span>&nbsp;<span class="op" id="10058">:=</span>&nbsp;<span class="ident" id="10061"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="10070">(</span><span class="op" id="10071">&amp;</span><span class="ident" id="10072"><a href="/bufio/bufio_test.go.html#7431">StringReader</a></span><span class="op" id="10084">{</span><span class="ident" id="10085">data</span><span class="op" id="10089">:</span>&nbsp;<span class="ident" id="10091"><a href="/bufio/bufio_test.go.html#9942">segments</a></span><span class="op" id="10099">}</span><span class="op" id="10100">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="10104">//&nbsp;Read&nbsp;n&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="10123">for</span>&nbsp;<span class="ident" id="10127">i</span>&nbsp;<span class="op" id="10129">:=</span>&nbsp;<span class="num" id="10132">0</span><span class="op" id="10133">;</span>&nbsp;<span class="ident" id="10135"><a href="/bufio/bufio_test.go.html#10127">i</a></span>&nbsp;<span class="op" id="10137">&lt;</span>&nbsp;<span class="ident" id="10139"><a href="/bufio/bufio_test.go.html#10024">n</a></span><span class="op" id="10140">;</span>&nbsp;<span class="ident" id="10142"><a href="/bufio/bufio_test.go.html#10127">i</a></span><span class="op" id="10143">++</span>&nbsp;<span class="op" id="10146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="10151">b</span><span class="op" id="10152">,</span>&nbsp;<span class="ident" id="10154">err</span>&nbsp;<span class="op" id="10158">:=</span>&nbsp;<span class="ident" id="10161"><a href="/bufio/bufio_test.go.html#10056">r</a></span><span class="op" id="10162">.</span><span class="ident" id="10163">ReadByte</span><span class="op" id="10171">(</span><span class="op" id="10172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="10177">if</span>&nbsp;<span class="ident" id="10180"><a href="/bufio/bufio_test.go.html#10154">err</a></span>&nbsp;<span class="op" id="10184">!=</span>&nbsp;<span class="ident" id="10187">nil</span>&nbsp;<span class="op" id="10191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="10197"><a href="/bufio/bufio_test.go.html#9925">t</a></span><span class="op" id="10198">.</span><span class="ident" id="10199">Fatalf</span><span class="op" id="10205">(</span><span class="string" id="10206">&#34;n&nbsp;=&nbsp;%d:&nbsp;unexpected&nbsp;error&nbsp;on&nbsp;ReadByte:&nbsp;%v&#34;</span><span class="op" id="10248">,</span>&nbsp;<span class="ident" id="10250"><a href="/bufio/bufio_test.go.html#10024">n</a></span><span class="op" id="10251">,</span>&nbsp;<span class="ident" id="10253"><a href="/bufio/bufio_test.go.html#10154">err</a></span><span class="op" id="10256">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="10261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="10266">if</span>&nbsp;<span class="ident" id="10269"><a href="/bufio/bufio_test.go.html#10151">b</a></span>&nbsp;<span class="op" id="10271">!=</span>&nbsp;<span class="ident" id="10274"><a href="/bufio/bufio_test.go.html#9984">data</a></span><span class="op" id="10278">[</span><span class="ident" id="10279"><a href="/bufio/bufio_test.go.html#10127">i</a></span><span class="op" id="10280">]</span>&nbsp;<span class="op" id="10282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="10288"><a href="/bufio/bufio_test.go.html#9925">t</a></span><span class="op" id="10289">.</span><span class="ident" id="10290">Fatalf</span><span class="op" id="10296">(</span><span class="string" id="10297">&#34;n&nbsp;=&nbsp;%d:&nbsp;incorrect&nbsp;byte&nbsp;returned&nbsp;from&nbsp;ReadByte:&nbsp;got&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="10361">,</span>&nbsp;<span class="ident" id="10363"><a href="/bufio/bufio_test.go.html#10024">n</a></span><span class="op" id="10364">,</span>&nbsp;<span class="ident" id="10366"><a href="/bufio/bufio_test.go.html#10151">b</a></span><span class="op" id="10367">,</span>&nbsp;<span class="ident" id="10369"><a href="/bufio/bufio_test.go.html#9984">data</a></span><span class="op" id="10373">[</span><span class="ident" id="10374"><a href="/bufio/bufio_test.go.html#10127">i</a></span><span class="op" id="10375">]</span><span class="op" id="10376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="10381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="10385">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="10389">//&nbsp;Unread&nbsp;one&nbsp;byte&nbsp;if&nbsp;there&nbsp;is&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="10427">if</span>&nbsp;<span class="ident" id="10430"><a href="/bufio/bufio_test.go.html#10024">n</a></span>&nbsp;<span class="op" id="10432">&gt;</span>&nbsp;<span class="num" id="10434">0</span>&nbsp;<span class="op" id="10436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="10441">if</span>&nbsp;<span class="ident" id="10444">err</span>&nbsp;<span class="op" id="10448">:=</span>&nbsp;<span class="ident" id="10451"><a href="/bufio/bufio_test.go.html#10056">r</a></span><span class="op" id="10452">.</span><span class="ident" id="10453">UnreadByte</span><span class="op" id="10463">(</span><span class="op" id="10464">)</span><span class="op" id="10465">;</span>&nbsp;<span class="ident" id="10467"><a href="/bufio/bufio_test.go.html#10444">err</a></span>&nbsp;<span class="op" id="10471">!=</span>&nbsp;<span class="ident" id="10474">nil</span>&nbsp;<span class="op" id="10478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="10484"><a href="/bufio/bufio_test.go.html#9925">t</a></span><span class="op" id="10485">.</span><span class="ident" id="10486">Errorf</span><span class="op" id="10492">(</span><span class="string" id="10493">&#34;n&nbsp;=&nbsp;%d:&nbsp;unexpected&nbsp;error&nbsp;on&nbsp;UnreadByte:&nbsp;%v&#34;</span><span class="op" id="10537">,</span>&nbsp;<span class="ident" id="10539"><a href="/bufio/bufio_test.go.html#10024">n</a></span><span class="op" id="10540">,</span>&nbsp;<span class="ident" id="10542"><a href="/bufio/bufio_test.go.html#10444">err</a></span><span class="op" id="10545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="10550">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="10554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="10558">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;cannot&nbsp;unread&nbsp;any&nbsp;further.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="10603">if</span>&nbsp;<span class="ident" id="10606">err</span>&nbsp;<span class="op" id="10610">:=</span>&nbsp;<span class="ident" id="10613"><a href="/bufio/bufio_test.go.html#10056">r</a></span><span class="op" id="10614">.</span><span class="ident" id="10615">UnreadByte</span><span class="op" id="10625">(</span><span class="op" id="10626">)</span><span class="op" id="10627">;</span>&nbsp;<span class="ident" id="10629"><a href="/bufio/bufio_test.go.html#10606">err</a></span>&nbsp;<span class="op" id="10633">==</span>&nbsp;<span class="ident" id="10636">nil</span>&nbsp;<span class="op" id="10640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="10645"><a href="/bufio/bufio_test.go.html#9925">t</a></span><span class="op" id="10646">.</span><span class="ident" id="10647">Errorf</span><span class="op" id="10653">(</span><span class="string" id="10654">&#34;n&nbsp;=&nbsp;%d:&nbsp;expected&nbsp;error&nbsp;on&nbsp;UnreadByte&#34;</span><span class="op" id="10692">,</span>&nbsp;<span class="ident" id="10694"><a href="/bufio/bufio_test.go.html#10024">n</a></span><span class="op" id="10695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="10699">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="10702">}</span><br>
<span class="lineno"></span><span class="op" id="10704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="10707">func</span>&nbsp;<span class="ident" id="10712">TestUnreadByteOthers</span><span class="op" id="10732">(</span><span class="ident" id="10733">t</span>&nbsp;<span class="op" id="10735">*</span><span class="ident" id="10736"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="10743">.</span><span class="ident" id="10744">T</span><span class="op" id="10745">)</span>&nbsp;<span class="op" id="10747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="10750">//&nbsp;A&nbsp;list&nbsp;of&nbsp;readers&nbsp;to&nbsp;use&nbsp;in&nbsp;conjunction&nbsp;with&nbsp;UnreadByte.</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="10811">var</span>&nbsp;<span class="ident" id="10815">readers</span>&nbsp;<span class="op" id="10823">=</span>&nbsp;<span class="op" id="10825">[</span><span class="op" id="10826">]</span><span class="keyword" id="10827">func</span><span class="op" id="10831">(</span><span class="op" id="10832">*</span><span class="ident" id="10833"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="10839">,</span>&nbsp;<span class="builtintype" id="10841">byte</span><span class="op" id="10845">)</span>&nbsp;<span class="op" id="10847">(</span><span class="op" id="10848">[</span><span class="op" id="10849">]</span><span class="builtintype" id="10850">byte</span><span class="op" id="10854">,</span>&nbsp;<span class="builtintype" id="10856">error</span><span class="op" id="10861">)</span><span class="op" id="10862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="10866">(</span><span class="op" id="10867">*</span><span class="ident" id="10868"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="10874">)</span><span class="op" id="10875">.</span><span class="ident" id="10876">ReadBytes</span><span class="op" id="10885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="10889">(</span><span class="op" id="10890">*</span><span class="ident" id="10891"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="10897">)</span><span class="op" id="10898">.</span><span class="ident" id="10899">ReadSlice</span><span class="op" id="10908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="10912">func</span><span class="op" id="10916">(</span><span class="ident" id="10917">r</span>&nbsp;<span class="op" id="10919">*</span><span class="ident" id="10920"><a href="/bufio/bufio.go.html#3218049">Reader</a></span><span class="op" id="10926">,</span>&nbsp;<span class="ident" id="10928">delim</span>&nbsp;<span class="builtintype" id="10934">byte</span><span class="op" id="10938">)</span>&nbsp;<span class="op" id="10940">(</span><span class="op" id="10941">[</span><span class="op" id="10942">]</span><span class="builtintype" id="10943">byte</span><span class="op" id="10947">,</span>&nbsp;<span class="builtintype" id="10949">error</span><span class="op" id="10954">)</span>&nbsp;<span class="op" id="10956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="10961">data</span><span class="op" id="10965">,</span>&nbsp;<span class="ident" id="10967">err</span>&nbsp;<span class="op" id="10971">:=</span>&nbsp;<span class="ident" id="10974"><a href="/bufio/bufio_test.go.html#10917">r</a></span><span class="op" id="10975">.</span><span class="ident" id="10976">ReadString</span><span class="op" id="10986">(</span><span class="ident" id="10987"><a href="/bufio/bufio_test.go.html#10928">delim</a></span><span class="op" id="10992">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="10997">return</span>&nbsp;<span class="op" id="11004">[</span><span class="op" id="11005">]</span><span class="builtintype" id="11006">byte</span><span class="op" id="11010">(</span><span class="ident" id="11011"><a href="/bufio/bufio_test.go.html#10961">data</a></span><span class="op" id="11015">)</span><span class="op" id="11016">,</span>&nbsp;<span class="ident" id="11018"><a href="/bufio/bufio_test.go.html#10967">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="11024">}</span><span class="op" id="11025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="11029">//&nbsp;ReadLine&nbsp;doesn&#39;t&nbsp;fit&nbsp;the&nbsp;data/pattern&nbsp;easily</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="11079">//&nbsp;so&nbsp;we&nbsp;leave&nbsp;it&nbsp;out.&nbsp;It&nbsp;should&nbsp;be&nbsp;covered&nbsp;via</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="11129">//&nbsp;the&nbsp;ReadSlice&nbsp;test&nbsp;since&nbsp;ReadLine&nbsp;simply&nbsp;calls</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="11181">//&nbsp;ReadSlice,&nbsp;and&nbsp;it&#39;s&nbsp;that&nbsp;function&nbsp;that&nbsp;handles</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="11233">//&nbsp;the&nbsp;last&nbsp;byte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="11252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="11256">//&nbsp;Try&nbsp;all&nbsp;readers&nbsp;with&nbsp;UnreadByte.</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="11293">for</span>&nbsp;<span class="ident" id="11297">rno</span><span class="op" id="11300">,</span>&nbsp;<span class="ident" id="11302">read</span>&nbsp;<span class="op" id="11307">:=</span>&nbsp;<span class="keyword" id="11310">range</span>&nbsp;<span class="ident" id="11316"><a href="/bufio/bufio_test.go.html#10815">readers</a></span>&nbsp;<span class="op" id="11324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="11328">//&nbsp;Some&nbsp;input&nbsp;data&nbsp;that&nbsp;is&nbsp;longer&nbsp;than&nbsp;the&nbsp;minimum&nbsp;reader&nbsp;buffer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="11401">const</span>&nbsp;<span class="ident" id="11407">n</span>&nbsp;<span class="op" id="11409">=</span>&nbsp;<span class="num" id="11411">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="11416">var</span>&nbsp;<span class="ident" id="11420">buf</span>&nbsp;<span class="ident" id="11424"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="11429">.</span><span class="ident" id="11430">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="11439">for</span>&nbsp;<span class="ident" id="11443">i</span>&nbsp;<span class="op" id="11445">:=</span>&nbsp;<span class="num" id="11448">0</span><span class="op" id="11449">;</span>&nbsp;<span class="ident" id="11451"><a href="/bufio/bufio_test.go.html#11443">i</a></span>&nbsp;<span class="op" id="11453">&lt;</span>&nbsp;<span class="ident" id="11455"><a href="/bufio/bufio_test.go.html#11407">n</a></span><span class="op" id="11456">;</span>&nbsp;<span class="ident" id="11458"><a href="/bufio/bufio_test.go.html#11443">i</a></span><span class="op" id="11459">++</span>&nbsp;<span class="op" id="11462">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="11467"><a href="/bufio/bufio_test.go.html#11420">buf</a></span><span class="op" id="11470">.</span><span class="ident" id="11471">WriteString</span><span class="op" id="11482">(</span><span class="string" id="11483">&#34;abcdefg&#34;</span><span class="op" id="11492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="11496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="11501">r</span>&nbsp;<span class="op" id="11503">:=</span>&nbsp;<span class="ident" id="11506"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="11519">(</span><span class="op" id="11520">&amp;</span><span class="ident" id="11521"><a href="/bufio/bufio_test.go.html#11420">buf</a></span><span class="op" id="11524">,</span>&nbsp;<span class="ident" id="11526"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="11543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="11547">readTo</span>&nbsp;<span class="op" id="11554">:=</span>&nbsp;<span class="keyword" id="11557">func</span><span class="op" id="11561">(</span><span class="ident" id="11562">delim</span>&nbsp;<span class="builtintype" id="11568">byte</span><span class="op" id="11572">,</span>&nbsp;<span class="ident" id="11574">want</span>&nbsp;<span class="builtintype" id="11579">string</span><span class="op" id="11585">)</span>&nbsp;<span class="op" id="11587">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="11592">data</span><span class="op" id="11596">,</span>&nbsp;<span class="ident" id="11598">err</span>&nbsp;<span class="op" id="11602">:=</span>&nbsp;<span class="ident" id="11605"><a href="/bufio/bufio_test.go.html#11302">read</a></span><span class="op" id="11609">(</span><span class="ident" id="11610"><a href="/bufio/bufio_test.go.html#11501">r</a></span><span class="op" id="11611">,</span>&nbsp;<span class="ident" id="11613"><a href="/bufio/bufio_test.go.html#11562">delim</a></span><span class="op" id="11618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="11623">if</span>&nbsp;<span class="ident" id="11626"><a href="/bufio/bufio_test.go.html#11598">err</a></span>&nbsp;<span class="op" id="11630">!=</span>&nbsp;<span class="ident" id="11633">nil</span>&nbsp;<span class="op" id="11637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="11643"><a href="/bufio/bufio_test.go.html#10733">t</a></span><span class="op" id="11644">.</span><span class="ident" id="11645">Fatalf</span><span class="op" id="11651">(</span><span class="string" id="11652">&#34;#%d:&nbsp;unexpected&nbsp;error&nbsp;reading&nbsp;to&nbsp;%c:&nbsp;%v&#34;</span><span class="op" id="11693">,</span>&nbsp;<span class="ident" id="11695"><a href="/bufio/bufio_test.go.html#11297">rno</a></span><span class="op" id="11698">,</span>&nbsp;<span class="ident" id="11700"><a href="/bufio/bufio_test.go.html#11562">delim</a></span><span class="op" id="11705">,</span>&nbsp;<span class="ident" id="11707"><a href="/bufio/bufio_test.go.html#11598">err</a></span><span class="op" id="11710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="11715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="11720">if</span>&nbsp;<span class="ident" id="11723">got</span>&nbsp;<span class="op" id="11727">:=</span>&nbsp;<span class="builtintype" id="11730">string</span><span class="op" id="11736">(</span><span class="ident" id="11737"><a href="/bufio/bufio_test.go.html#11592">data</a></span><span class="op" id="11741">)</span><span class="op" id="11742">;</span>&nbsp;<span class="ident" id="11744"><a href="/bufio/bufio_test.go.html#11723">got</a></span>&nbsp;<span class="op" id="11748">!=</span>&nbsp;<span class="ident" id="11751"><a href="/bufio/bufio_test.go.html#11574">want</a></span>&nbsp;<span class="op" id="11756">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="11762"><a href="/bufio/bufio_test.go.html#10733">t</a></span><span class="op" id="11763">.</span><span class="ident" id="11764">Fatalf</span><span class="op" id="11770">(</span><span class="string" id="11771">&#34;#%d:&nbsp;got&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="11793">,</span>&nbsp;<span class="ident" id="11795"><a href="/bufio/bufio_test.go.html#11297">rno</a></span><span class="op" id="11798">,</span>&nbsp;<span class="ident" id="11800"><a href="/bufio/bufio_test.go.html#11723">got</a></span><span class="op" id="11803">,</span>&nbsp;<span class="ident" id="11805"><a href="/bufio/bufio_test.go.html#11574">want</a></span><span class="op" id="11809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="11814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="11818">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="11823">//&nbsp;Read&nbsp;the&nbsp;data&nbsp;with&nbsp;occasional&nbsp;UnreadByte&nbsp;calls.</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="11876">for</span>&nbsp;<span class="ident" id="11880">i</span>&nbsp;<span class="op" id="11882">:=</span>&nbsp;<span class="num" id="11885">0</span><span class="op" id="11886">;</span>&nbsp;<span class="ident" id="11888"><a href="/bufio/bufio_test.go.html#11880">i</a></span>&nbsp;<span class="op" id="11890">&lt;</span>&nbsp;<span class="ident" id="11892"><a href="/bufio/bufio_test.go.html#11407">n</a></span><span class="op" id="11893">;</span>&nbsp;<span class="ident" id="11895"><a href="/bufio/bufio_test.go.html#11880">i</a></span><span class="op" id="11896">++</span>&nbsp;<span class="op" id="11899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="11904"><a href="/bufio/bufio_test.go.html#11547">readTo</a></span><span class="op" id="11910">(</span><span class="string" id="11911">&#39;d&#39;</span><span class="op" id="11914">,</span>&nbsp;<span class="string" id="11916">&#34;abcd&#34;</span><span class="op" id="11922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="11927">for</span>&nbsp;<span class="ident" id="11931">j</span>&nbsp;<span class="op" id="11933">:=</span>&nbsp;<span class="num" id="11936">0</span><span class="op" id="11937">;</span>&nbsp;<span class="ident" id="11939"><a href="/bufio/bufio_test.go.html#11931">j</a></span>&nbsp;<span class="op" id="11941">&lt;</span>&nbsp;<span class="num" id="11943">3</span><span class="op" id="11944">;</span>&nbsp;<span class="ident" id="11946"><a href="/bufio/bufio_test.go.html#11931">j</a></span><span class="op" id="11947">++</span>&nbsp;<span class="op" id="11950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="11956">if</span>&nbsp;<span class="ident" id="11959">err</span>&nbsp;<span class="op" id="11963">:=</span>&nbsp;<span class="ident" id="11966"><a href="/bufio/bufio_test.go.html#11501">r</a></span><span class="op" id="11967">.</span><span class="ident" id="11968">UnreadByte</span><span class="op" id="11978">(</span><span class="op" id="11979">)</span><span class="op" id="11980">;</span>&nbsp;<span class="ident" id="11982"><a href="/bufio/bufio_test.go.html#11959">err</a></span>&nbsp;<span class="op" id="11986">!=</span>&nbsp;<span class="ident" id="11989">nil</span>&nbsp;<span class="op" id="11993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12000"><a href="/bufio/bufio_test.go.html#10733">t</a></span><span class="op" id="12001">.</span><span class="ident" id="12002">Fatalf</span><span class="op" id="12008">(</span><span class="string" id="12009">&#34;#%d:&nbsp;unexpected&nbsp;error&nbsp;on&nbsp;UnreadByte:&nbsp;%v&#34;</span><span class="op" id="12050">,</span>&nbsp;<span class="ident" id="12052"><a href="/bufio/bufio_test.go.html#11297">rno</a></span><span class="op" id="12055">,</span>&nbsp;<span class="ident" id="12057"><a href="/bufio/bufio_test.go.html#11959">err</a></span><span class="op" id="12060">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="12066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12072"><a href="/bufio/bufio_test.go.html#11547">readTo</a></span><span class="op" id="12078">(</span><span class="string" id="12079">&#39;d&#39;</span><span class="op" id="12082">,</span>&nbsp;<span class="string" id="12084">&#34;d&#34;</span><span class="op" id="12087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="12092">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12097"><a href="/bufio/bufio_test.go.html#11547">readTo</a></span><span class="op" id="12103">(</span><span class="string" id="12104">&#39;g&#39;</span><span class="op" id="12107">,</span>&nbsp;<span class="string" id="12109">&#34;efg&#34;</span><span class="op" id="12114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="12118">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="12123">//&nbsp;All&nbsp;data&nbsp;should&nbsp;have&nbsp;been&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12160">_</span><span class="op" id="12161">,</span>&nbsp;<span class="ident" id="12163">err</span>&nbsp;<span class="op" id="12167">:=</span>&nbsp;<span class="ident" id="12170"><a href="/bufio/bufio_test.go.html#11501">r</a></span><span class="op" id="12171">.</span><span class="ident" id="12172">ReadByte</span><span class="op" id="12180">(</span><span class="op" id="12181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="12185">if</span>&nbsp;<span class="ident" id="12188"><a href="/bufio/bufio_test.go.html#12163">err</a></span>&nbsp;<span class="op" id="12192">!=</span>&nbsp;<span class="ident" id="12195"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="12197">.</span><span class="ident" id="12198">EOF</span>&nbsp;<span class="op" id="12202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12207"><a href="/bufio/bufio_test.go.html#10733">t</a></span><span class="op" id="12208">.</span><span class="ident" id="12209">Errorf</span><span class="op" id="12215">(</span><span class="string" id="12216">&#34;#%d:&nbsp;got&nbsp;error&nbsp;%v;&nbsp;want&nbsp;EOF&#34;</span><span class="op" id="12245">,</span>&nbsp;<span class="ident" id="12247"><a href="/bufio/bufio_test.go.html#11297">rno</a></span><span class="op" id="12250">,</span>&nbsp;<span class="ident" id="12252"><a href="/bufio/bufio_test.go.html#12163">err</a></span><span class="op" id="12255">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="12259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="12262">}</span><br>
<span class="lineno"></span><span class="op" id="12264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="12267">//&nbsp;Test&nbsp;that&nbsp;UnreadRune&nbsp;fails&nbsp;if&nbsp;the&nbsp;preceding&nbsp;operation&nbsp;was&nbsp;not&nbsp;a&nbsp;ReadRune.</span><br>
<span class="lineno">405</span><span class="keyword" id="12344">func</span>&nbsp;<span class="ident" id="12349">TestUnreadRuneError</span><span class="op" id="12368">(</span><span class="ident" id="12369">t</span>&nbsp;<span class="op" id="12371">*</span><span class="ident" id="12372"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="12379">.</span><span class="ident" id="12380">T</span><span class="op" id="12381">)</span>&nbsp;<span class="op" id="12383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12386">buf</span>&nbsp;<span class="op" id="12390">:=</span>&nbsp;<span class="builtinfunc" id="12393">make</span><span class="op" id="12397">(</span><span class="op" id="12398">[</span><span class="op" id="12399">]</span><span class="builtintype" id="12400">byte</span><span class="op" id="12404">,</span>&nbsp;<span class="num" id="12406">3</span><span class="op" id="12407">)</span>&nbsp;<span class="comment" id="12409">//&nbsp;All&nbsp;runes&nbsp;in&nbsp;this&nbsp;test&nbsp;are&nbsp;3&nbsp;bytes&nbsp;long</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12453">r</span>&nbsp;<span class="op" id="12455">:=</span>&nbsp;<span class="ident" id="12458"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="12467">(</span><span class="op" id="12468">&amp;</span><span class="ident" id="12469"><a href="/bufio/bufio_test.go.html#7431">StringReader</a></span><span class="op" id="12481">{</span><span class="ident" id="12482">data</span><span class="op" id="12486">:</span>&nbsp;<span class="op" id="12488">[</span><span class="op" id="12489">]</span><span class="builtintype" id="12490">string</span><span class="op" id="12496">{</span><span class="string" id="12497">&#34;日本語日本語日本語&#34;</span><span class="op" id="12526">}</span><span class="op" id="12527">}</span><span class="op" id="12528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="12531">if</span>&nbsp;<span class="ident" id="12534"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="12535">.</span><span class="ident" id="12536">UnreadRune</span><span class="op" id="12546">(</span><span class="op" id="12547">)</span>&nbsp;<span class="op" id="12549">==</span>&nbsp;<span class="ident" id="12552">nil</span>&nbsp;<span class="op" id="12556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12560"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="12561">.</span><span class="ident" id="12562">Error</span><span class="op" id="12567">(</span><span class="string" id="12568">&#34;expected&nbsp;error&nbsp;on&nbsp;UnreadRune&nbsp;from&nbsp;fresh&nbsp;buffer&#34;</span><span class="op" id="12616">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="12619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12622">_</span><span class="op" id="12623">,</span>&nbsp;<span class="ident" id="12625">_</span><span class="op" id="12626">,</span>&nbsp;<span class="ident" id="12628">err</span>&nbsp;<span class="op" id="12632">:=</span>&nbsp;<span class="ident" id="12635"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="12636">.</span><span class="ident" id="12637">ReadRune</span><span class="op" id="12645">(</span><span class="op" id="12646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="12649">if</span>&nbsp;<span class="ident" id="12652"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="12656">!=</span>&nbsp;<span class="ident" id="12659">nil</span>&nbsp;<span class="op" id="12663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12667"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="12668">.</span><span class="ident" id="12669">Error</span><span class="op" id="12674">(</span><span class="string" id="12675">&#34;unexpected&nbsp;error&nbsp;on&nbsp;ReadRune&nbsp;(1):&#34;</span><span class="op" id="12710">,</span>&nbsp;<span class="ident" id="12712"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="12715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="12718">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="12721">if</span>&nbsp;<span class="ident" id="12724"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="12728">=</span>&nbsp;<span class="ident" id="12730"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="12731">.</span><span class="ident" id="12732">UnreadRune</span><span class="op" id="12742">(</span><span class="op" id="12743">)</span><span class="op" id="12744">;</span>&nbsp;<span class="ident" id="12746"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="12750">!=</span>&nbsp;<span class="ident" id="12753">nil</span>&nbsp;<span class="op" id="12757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12761"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="12762">.</span><span class="ident" id="12763">Error</span><span class="op" id="12768">(</span><span class="string" id="12769">&#34;unexpected&nbsp;error&nbsp;on&nbsp;UnreadRune&nbsp;(1):&#34;</span><span class="op" id="12806">,</span>&nbsp;<span class="ident" id="12808"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="12811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="12814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="12817">if</span>&nbsp;<span class="ident" id="12820"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="12821">.</span><span class="ident" id="12822">UnreadRune</span><span class="op" id="12832">(</span><span class="op" id="12833">)</span>&nbsp;<span class="op" id="12835">==</span>&nbsp;<span class="ident" id="12838">nil</span>&nbsp;<span class="op" id="12842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12846"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="12847">.</span><span class="ident" id="12848">Error</span><span class="op" id="12853">(</span><span class="string" id="12854">&#34;expected&nbsp;error&nbsp;after&nbsp;UnreadRune&nbsp;(1)&#34;</span><span class="op" id="12891">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="12894">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="12897">//&nbsp;Test&nbsp;error&nbsp;after&nbsp;Read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12924">_</span><span class="op" id="12925">,</span>&nbsp;<span class="ident" id="12927">_</span><span class="op" id="12928">,</span>&nbsp;<span class="ident" id="12930"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="12934">=</span>&nbsp;<span class="ident" id="12936"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="12937">.</span><span class="ident" id="12938">ReadRune</span><span class="op" id="12946">(</span><span class="op" id="12947">)</span>&nbsp;<span class="comment" id="12949">//&nbsp;reset&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="12965">if</span>&nbsp;<span class="ident" id="12968"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="12972">!=</span>&nbsp;<span class="ident" id="12975">nil</span>&nbsp;<span class="op" id="12979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="12983"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="12984">.</span><span class="ident" id="12985">Error</span><span class="op" id="12990">(</span><span class="string" id="12991">&#34;unexpected&nbsp;error&nbsp;on&nbsp;ReadRune&nbsp;(2):&#34;</span><span class="op" id="13026">,</span>&nbsp;<span class="ident" id="13028"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="13031">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13034">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13037">_</span><span class="op" id="13038">,</span>&nbsp;<span class="ident" id="13040"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13044">=</span>&nbsp;<span class="ident" id="13046"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="13047">.</span><span class="ident" id="13048">Read</span><span class="op" id="13052">(</span><span class="ident" id="13053"><a href="/bufio/bufio_test.go.html#12386">buf</a></span><span class="op" id="13056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="13059">if</span>&nbsp;<span class="ident" id="13062"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13066">!=</span>&nbsp;<span class="ident" id="13069">nil</span>&nbsp;<span class="op" id="13073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13077"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="13078">.</span><span class="ident" id="13079">Error</span><span class="op" id="13084">(</span><span class="string" id="13085">&#34;unexpected&nbsp;error&nbsp;on&nbsp;Read&nbsp;(2):&#34;</span><span class="op" id="13116">,</span>&nbsp;<span class="ident" id="13118"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="13121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13124">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="13127">if</span>&nbsp;<span class="ident" id="13130"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="13131">.</span><span class="ident" id="13132">UnreadRune</span><span class="op" id="13142">(</span><span class="op" id="13143">)</span>&nbsp;<span class="op" id="13145">==</span>&nbsp;<span class="ident" id="13148">nil</span>&nbsp;<span class="op" id="13152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13156"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="13157">.</span><span class="ident" id="13158">Error</span><span class="op" id="13163">(</span><span class="string" id="13164">&#34;expected&nbsp;error&nbsp;after&nbsp;Read&nbsp;(2)&#34;</span><span class="op" id="13195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="13201">//&nbsp;Test&nbsp;error&nbsp;after&nbsp;ReadByte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13232">_</span><span class="op" id="13233">,</span>&nbsp;<span class="ident" id="13235">_</span><span class="op" id="13236">,</span>&nbsp;<span class="ident" id="13238"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13242">=</span>&nbsp;<span class="ident" id="13244"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="13245">.</span><span class="ident" id="13246">ReadRune</span><span class="op" id="13254">(</span><span class="op" id="13255">)</span>&nbsp;<span class="comment" id="13257">//&nbsp;reset&nbsp;state</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="13273">if</span>&nbsp;<span class="ident" id="13276"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13280">!=</span>&nbsp;<span class="ident" id="13283">nil</span>&nbsp;<span class="op" id="13287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13291"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="13292">.</span><span class="ident" id="13293">Error</span><span class="op" id="13298">(</span><span class="string" id="13299">&#34;unexpected&nbsp;error&nbsp;on&nbsp;ReadRune&nbsp;(2):&#34;</span><span class="op" id="13334">,</span>&nbsp;<span class="ident" id="13336"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="13339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="13345">for</span>&nbsp;<span class="keyword" id="13349">range</span>&nbsp;<span class="ident" id="13355"><a href="/bufio/bufio_test.go.html#12386">buf</a></span>&nbsp;<span class="op" id="13359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13363">_</span><span class="op" id="13364">,</span>&nbsp;<span class="ident" id="13366"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13370">=</span>&nbsp;<span class="ident" id="13372"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="13373">.</span><span class="ident" id="13374">ReadByte</span><span class="op" id="13382">(</span><span class="op" id="13383">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="13387">if</span>&nbsp;<span class="ident" id="13390"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13394">!=</span>&nbsp;<span class="ident" id="13397">nil</span>&nbsp;<span class="op" id="13401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13406"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="13407">.</span><span class="ident" id="13408">Error</span><span class="op" id="13413">(</span><span class="string" id="13414">&#34;unexpected&nbsp;error&nbsp;on&nbsp;ReadByte&nbsp;(2):&#34;</span><span class="op" id="13449">,</span>&nbsp;<span class="ident" id="13451"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="13454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="13464">if</span>&nbsp;<span class="ident" id="13467"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="13468">.</span><span class="ident" id="13469">UnreadRune</span><span class="op" id="13479">(</span><span class="op" id="13480">)</span>&nbsp;<span class="op" id="13482">==</span>&nbsp;<span class="ident" id="13485">nil</span>&nbsp;<span class="op" id="13489">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13493"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="13494">.</span><span class="ident" id="13495">Error</span><span class="op" id="13500">(</span><span class="string" id="13501">&#34;expected&nbsp;error&nbsp;after&nbsp;ReadByte&#34;</span><span class="op" id="13532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="13538">//&nbsp;Test&nbsp;error&nbsp;after&nbsp;UnreadByte.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13571">_</span><span class="op" id="13572">,</span>&nbsp;<span class="ident" id="13574">_</span><span class="op" id="13575">,</span>&nbsp;<span class="ident" id="13577"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13581">=</span>&nbsp;<span class="ident" id="13583"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="13584">.</span><span class="ident" id="13585">ReadRune</span><span class="op" id="13593">(</span><span class="op" id="13594">)</span>&nbsp;<span class="comment" id="13596">//&nbsp;reset&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="13612">if</span>&nbsp;<span class="ident" id="13615"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13619">!=</span>&nbsp;<span class="ident" id="13622">nil</span>&nbsp;<span class="op" id="13626">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13630"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="13631">.</span><span class="ident" id="13632">Error</span><span class="op" id="13637">(</span><span class="string" id="13638">&#34;unexpected&nbsp;error&nbsp;on&nbsp;ReadRune&nbsp;(3):&#34;</span><span class="op" id="13673">,</span>&nbsp;<span class="ident" id="13675"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="13678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13684">_</span><span class="op" id="13685">,</span>&nbsp;<span class="ident" id="13687"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13691">=</span>&nbsp;<span class="ident" id="13693"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="13694">.</span><span class="ident" id="13695">ReadByte</span><span class="op" id="13703">(</span><span class="op" id="13704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="13707">if</span>&nbsp;<span class="ident" id="13710"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13714">!=</span>&nbsp;<span class="ident" id="13717">nil</span>&nbsp;<span class="op" id="13721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13725"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="13726">.</span><span class="ident" id="13727">Error</span><span class="op" id="13732">(</span><span class="string" id="13733">&#34;unexpected&nbsp;error&nbsp;on&nbsp;ReadByte&nbsp;(3):&#34;</span><span class="op" id="13768">,</span>&nbsp;<span class="ident" id="13770"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="13773">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13779"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13783">=</span>&nbsp;<span class="ident" id="13785"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="13786">.</span><span class="ident" id="13787">UnreadByte</span><span class="op" id="13797">(</span><span class="op" id="13798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="13801">if</span>&nbsp;<span class="ident" id="13804"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13808">!=</span>&nbsp;<span class="ident" id="13811">nil</span>&nbsp;<span class="op" id="13815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13819"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="13820">.</span><span class="ident" id="13821">Error</span><span class="op" id="13826">(</span><span class="string" id="13827">&#34;unexpected&nbsp;error&nbsp;on&nbsp;UnreadByte&nbsp;(3):&#34;</span><span class="op" id="13864">,</span>&nbsp;<span class="ident" id="13866"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="13869">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13872">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="13875">if</span>&nbsp;<span class="ident" id="13878"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="13879">.</span><span class="ident" id="13880">UnreadRune</span><span class="op" id="13890">(</span><span class="op" id="13891">)</span>&nbsp;<span class="op" id="13893">==</span>&nbsp;<span class="ident" id="13896">nil</span>&nbsp;<span class="op" id="13900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13904"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="13905">.</span><span class="ident" id="13906">Error</span><span class="op" id="13911">(</span><span class="string" id="13912">&#34;expected&nbsp;error&nbsp;after&nbsp;UnreadByte&nbsp;(3)&#34;</span><span class="op" id="13949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="13952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="13955">//&nbsp;Test&nbsp;error&nbsp;after&nbsp;ReadSlice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="13987">_</span><span class="op" id="13988">,</span>&nbsp;<span class="ident" id="13990">_</span><span class="op" id="13991">,</span>&nbsp;<span class="ident" id="13993"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="13997">=</span>&nbsp;<span class="ident" id="13999"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="14000">.</span><span class="ident" id="14001">ReadRune</span><span class="op" id="14009">(</span><span class="op" id="14010">)</span>&nbsp;<span class="comment" id="14012">//&nbsp;reset&nbsp;state</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="14028">if</span>&nbsp;<span class="ident" id="14031"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="14035">!=</span>&nbsp;<span class="ident" id="14038">nil</span>&nbsp;<span class="op" id="14042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14046"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="14047">.</span><span class="ident" id="14048">Error</span><span class="op" id="14053">(</span><span class="string" id="14054">&#34;unexpected&nbsp;error&nbsp;on&nbsp;ReadRune&nbsp;(4):&#34;</span><span class="op" id="14089">,</span>&nbsp;<span class="ident" id="14091"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="14094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="14097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14100">_</span><span class="op" id="14101">,</span>&nbsp;<span class="ident" id="14103"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="14107">=</span>&nbsp;<span class="ident" id="14109"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="14110">.</span><span class="ident" id="14111">ReadSlice</span><span class="op" id="14120">(</span><span class="num" id="14121">0</span><span class="op" id="14122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="14125">if</span>&nbsp;<span class="ident" id="14128"><a href="/bufio/bufio_test.go.html#12628">err</a></span>&nbsp;<span class="op" id="14132">!=</span>&nbsp;<span class="ident" id="14135"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="14137">.</span><span class="ident" id="14138">EOF</span>&nbsp;<span class="op" id="14142">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14146"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="14147">.</span><span class="ident" id="14148">Error</span><span class="op" id="14153">(</span><span class="string" id="14154">&#34;unexpected&nbsp;error&nbsp;on&nbsp;ReadSlice&nbsp;(4):&#34;</span><span class="op" id="14190">,</span>&nbsp;<span class="ident" id="14192"><a href="/bufio/bufio_test.go.html#12628">err</a></span><span class="op" id="14195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="14198">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="14201">if</span>&nbsp;<span class="ident" id="14204"><a href="/bufio/bufio_test.go.html#12453">r</a></span><span class="op" id="14205">.</span><span class="ident" id="14206">UnreadRune</span><span class="op" id="14216">(</span><span class="op" id="14217">)</span>&nbsp;<span class="op" id="14219">==</span>&nbsp;<span class="ident" id="14222">nil</span>&nbsp;<span class="op" id="14226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14230"><a href="/bufio/bufio_test.go.html#12369">t</a></span><span class="op" id="14231">.</span><span class="ident" id="14232">Error</span><span class="op" id="14237">(</span><span class="string" id="14238">&#34;expected&nbsp;error&nbsp;after&nbsp;ReadSlice&nbsp;(4)&#34;</span><span class="op" id="14274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="14277">}</span><br>
<span class="lineno">475</span><span class="op" id="14279">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="14282">func</span>&nbsp;<span class="ident" id="14287">TestUnreadRuneAtEOF</span><span class="op" id="14306">(</span><span class="ident" id="14307">t</span>&nbsp;<span class="op" id="14309">*</span><span class="ident" id="14310"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="14317">.</span><span class="ident" id="14318">T</span><span class="op" id="14319">)</span>&nbsp;<span class="op" id="14321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="14324">//&nbsp;UnreadRune/ReadRune&nbsp;should&nbsp;error&nbsp;at&nbsp;EOF&nbsp;(was&nbsp;a&nbsp;bug;&nbsp;used&nbsp;to&nbsp;panic)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14395">r</span>&nbsp;<span class="op" id="14397">:=</span>&nbsp;<span class="ident" id="14400"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="14409">(</span><span class="ident" id="14410"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="14417">.</span><span class="ident" id="14418">NewReader</span><span class="op" id="14427">(</span><span class="string" id="14428">&#34;x&#34;</span><span class="op" id="14431">)</span><span class="op" id="14432">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14435"><a href="/bufio/bufio_test.go.html#14395">r</a></span><span class="op" id="14436">.</span><span class="ident" id="14437">ReadRune</span><span class="op" id="14445">(</span><span class="op" id="14446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14449"><a href="/bufio/bufio_test.go.html#14395">r</a></span><span class="op" id="14450">.</span><span class="ident" id="14451">ReadRune</span><span class="op" id="14459">(</span><span class="op" id="14460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14463"><a href="/bufio/bufio_test.go.html#14395">r</a></span><span class="op" id="14464">.</span><span class="ident" id="14465">UnreadRune</span><span class="op" id="14475">(</span><span class="op" id="14476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14479">_</span><span class="op" id="14480">,</span>&nbsp;<span class="ident" id="14482">_</span><span class="op" id="14483">,</span>&nbsp;<span class="ident" id="14485">err</span>&nbsp;<span class="op" id="14489">:=</span>&nbsp;<span class="ident" id="14492"><a href="/bufio/bufio_test.go.html#14395">r</a></span><span class="op" id="14493">.</span><span class="ident" id="14494">ReadRune</span><span class="op" id="14502">(</span><span class="op" id="14503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="14506">if</span>&nbsp;<span class="ident" id="14509"><a href="/bufio/bufio_test.go.html#14485">err</a></span>&nbsp;<span class="op" id="14513">==</span>&nbsp;<span class="ident" id="14516">nil</span>&nbsp;<span class="op" id="14520">{</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14524"><a href="/bufio/bufio_test.go.html#14307">t</a></span><span class="op" id="14525">.</span><span class="ident" id="14526">Error</span><span class="op" id="14531">(</span><span class="string" id="14532">&#34;expected&nbsp;error&nbsp;at&nbsp;EOF&#34;</span><span class="op" id="14555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="14558">}</span>&nbsp;<span class="keyword" id="14560">else</span>&nbsp;<span class="keyword" id="14565">if</span>&nbsp;<span class="ident" id="14568"><a href="/bufio/bufio_test.go.html#14485">err</a></span>&nbsp;<span class="op" id="14572">!=</span>&nbsp;<span class="ident" id="14575"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="14577">.</span><span class="ident" id="14578">EOF</span>&nbsp;<span class="op" id="14582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14586"><a href="/bufio/bufio_test.go.html#14307">t</a></span><span class="op" id="14587">.</span><span class="ident" id="14588">Error</span><span class="op" id="14593">(</span><span class="string" id="14594">&#34;expected&nbsp;EOF;&nbsp;got&#34;</span><span class="op" id="14613">,</span>&nbsp;<span class="ident" id="14615"><a href="/bufio/bufio_test.go.html#14485">err</a></span><span class="op" id="14618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="14621">}</span><br>
<span class="lineno"></span><span class="op" id="14623">}</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span><span class="keyword" id="14626">func</span>&nbsp;<span class="ident" id="14631">TestReadWriteRune</span><span class="op" id="14648">(</span><span class="ident" id="14649">t</span>&nbsp;<span class="op" id="14651">*</span><span class="ident" id="14652"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="14659">.</span><span class="ident" id="14660">T</span><span class="op" id="14661">)</span>&nbsp;<span class="op" id="14663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="14666">const</span>&nbsp;<span class="ident" id="14672">NRune</span>&nbsp;<span class="op" id="14678">=</span>&nbsp;<span class="num" id="14680">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14686">byteBuf</span>&nbsp;<span class="op" id="14694">:=</span>&nbsp;<span class="builtinfunc" id="14697">new</span><span class="op" id="14700">(</span><span class="ident" id="14701"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="14706">.</span><span class="ident" id="14707">Buffer</span><span class="op" id="14713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14716">w</span>&nbsp;<span class="op" id="14718">:=</span>&nbsp;<span class="ident" id="14721"><a href="/bufio/bufio.go.html#3230224">NewWriter</a></span><span class="op" id="14730">(</span><span class="ident" id="14731"><a href="/bufio/bufio_test.go.html#14686">byteBuf</a></span><span class="op" id="14738">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="14741">//&nbsp;Write&nbsp;the&nbsp;runes&nbsp;out&nbsp;using&nbsp;WriteRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14781">buf</span>&nbsp;<span class="op" id="14785">:=</span>&nbsp;<span class="builtinfunc" id="14788">make</span><span class="op" id="14792">(</span><span class="op" id="14793">[</span><span class="op" id="14794">]</span><span class="builtintype" id="14795">byte</span><span class="op" id="14799">,</span>&nbsp;<span class="ident" id="14801"><a href="/bufio/bufio_test.go.html#3492">utf8</a></span><span class="op" id="14805">.</span><span class="ident" id="14806">UTFMax</span><span class="op" id="14812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="14815">for</span>&nbsp;<span class="ident" id="14819">r</span>&nbsp;<span class="op" id="14821">:=</span>&nbsp;<span class="builtintype" id="14824">rune</span><span class="op" id="14828">(</span><span class="num" id="14829">0</span><span class="op" id="14830">)</span><span class="op" id="14831">;</span>&nbsp;<span class="ident" id="14833"><a href="/bufio/bufio_test.go.html#14819">r</a></span>&nbsp;<span class="op" id="14835">&lt;</span>&nbsp;<span class="ident" id="14837"><a href="/bufio/bufio_test.go.html#14672">NRune</a></span><span class="op" id="14842">;</span>&nbsp;<span class="ident" id="14844"><a href="/bufio/bufio_test.go.html#14819">r</a></span><span class="op" id="14845">++</span>&nbsp;<span class="op" id="14848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14852">size</span>&nbsp;<span class="op" id="14857">:=</span>&nbsp;<span class="ident" id="14860"><a href="/bufio/bufio_test.go.html#3492">utf8</a></span><span class="op" id="14864">.</span><span class="ident" id="14865">EncodeRune</span><span class="op" id="14875">(</span><span class="ident" id="14876"><a href="/bufio/bufio_test.go.html#14781">buf</a></span><span class="op" id="14879">,</span>&nbsp;<span class="ident" id="14881"><a href="/bufio/bufio_test.go.html#14819">r</a></span><span class="op" id="14882">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14886">nbytes</span><span class="op" id="14892">,</span>&nbsp;<span class="ident" id="14894">err</span>&nbsp;<span class="op" id="14898">:=</span>&nbsp;<span class="ident" id="14901"><a href="/bufio/bufio_test.go.html#14716">w</a></span><span class="op" id="14902">.</span><span class="ident" id="14903">WriteRune</span><span class="op" id="14912">(</span><span class="ident" id="14913"><a href="/bufio/bufio_test.go.html#14819">r</a></span><span class="op" id="14914">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="14918">if</span>&nbsp;<span class="ident" id="14921"><a href="/bufio/bufio_test.go.html#14894">err</a></span>&nbsp;<span class="op" id="14925">!=</span>&nbsp;<span class="ident" id="14928">nil</span>&nbsp;<span class="op" id="14932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="14937"><a href="/bufio/bufio_test.go.html#14649">t</a></span><span class="op" id="14938">.</span><span class="ident" id="14939">Fatalf</span><span class="op" id="14945">(</span><span class="string" id="14946">&#34;WriteRune(0x%x)&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="14973">,</span>&nbsp;<span class="ident" id="14975"><a href="/bufio/bufio_test.go.html#14819">r</a></span><span class="op" id="14976">,</span>&nbsp;<span class="ident" id="14978"><a href="/bufio/bufio_test.go.html#14894">err</a></span><span class="op" id="14981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="14985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="14989">if</span>&nbsp;<span class="ident" id="14992"><a href="/bufio/bufio_test.go.html#14886">nbytes</a></span>&nbsp;<span class="op" id="14999">!=</span>&nbsp;<span class="ident" id="15002"><a href="/bufio/bufio_test.go.html#14852">size</a></span>&nbsp;<span class="op" id="15007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15012"><a href="/bufio/bufio_test.go.html#14649">t</a></span><span class="op" id="15013">.</span><span class="ident" id="15014">Fatalf</span><span class="op" id="15020">(</span><span class="string" id="15021">&#34;WriteRune(0x%x)&nbsp;expected&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="15058">,</span>&nbsp;<span class="ident" id="15060"><a href="/bufio/bufio_test.go.html#14819">r</a></span><span class="op" id="15061">,</span>&nbsp;<span class="ident" id="15063"><a href="/bufio/bufio_test.go.html#14852">size</a></span><span class="op" id="15067">,</span>&nbsp;<span class="ident" id="15069"><a href="/bufio/bufio_test.go.html#14886">nbytes</a></span><span class="op" id="15075">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="15079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="15082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15085"><a href="/bufio/bufio_test.go.html#14716">w</a></span><span class="op" id="15086">.</span><span class="ident" id="15087">Flush</span><span class="op" id="15092">(</span><span class="op" id="15093">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15097">r</span>&nbsp;<span class="op" id="15099">:=</span>&nbsp;<span class="ident" id="15102"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="15111">(</span><span class="ident" id="15112"><a href="/bufio/bufio_test.go.html#14686">byteBuf</a></span><span class="op" id="15119">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="15122">//&nbsp;Read&nbsp;them&nbsp;back&nbsp;with&nbsp;ReadRune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="15155">for</span>&nbsp;<span class="ident" id="15159">r1</span>&nbsp;<span class="op" id="15162">:=</span>&nbsp;<span class="builtintype" id="15165">rune</span><span class="op" id="15169">(</span><span class="num" id="15170">0</span><span class="op" id="15171">)</span><span class="op" id="15172">;</span>&nbsp;<span class="ident" id="15174"><a href="/bufio/bufio_test.go.html#15159">r1</a></span>&nbsp;<span class="op" id="15177">&lt;</span>&nbsp;<span class="ident" id="15179"><a href="/bufio/bufio_test.go.html#14672">NRune</a></span><span class="op" id="15184">;</span>&nbsp;<span class="ident" id="15186"><a href="/bufio/bufio_test.go.html#15159">r1</a></span><span class="op" id="15188">++</span>&nbsp;<span class="op" id="15191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15195">size</span>&nbsp;<span class="op" id="15200">:=</span>&nbsp;<span class="ident" id="15203"><a href="/bufio/bufio_test.go.html#3492">utf8</a></span><span class="op" id="15207">.</span><span class="ident" id="15208">EncodeRune</span><span class="op" id="15218">(</span><span class="ident" id="15219"><a href="/bufio/bufio_test.go.html#14781">buf</a></span><span class="op" id="15222">,</span>&nbsp;<span class="ident" id="15224"><a href="/bufio/bufio_test.go.html#15159">r1</a></span><span class="op" id="15226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15230">nr</span><span class="op" id="15232">,</span>&nbsp;<span class="ident" id="15234">nbytes</span><span class="op" id="15240">,</span>&nbsp;<span class="ident" id="15242">err</span>&nbsp;<span class="op" id="15246">:=</span>&nbsp;<span class="ident" id="15249"><a href="/bufio/bufio_test.go.html#15097">r</a></span><span class="op" id="15250">.</span><span class="ident" id="15251">ReadRune</span><span class="op" id="15259">(</span><span class="op" id="15260">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="15264">if</span>&nbsp;<span class="ident" id="15267"><a href="/bufio/bufio_test.go.html#15230">nr</a></span>&nbsp;<span class="op" id="15270">!=</span>&nbsp;<span class="ident" id="15273"><a href="/bufio/bufio_test.go.html#15159">r1</a></span>&nbsp;<span class="op" id="15276">||</span>&nbsp;<span class="ident" id="15279"><a href="/bufio/bufio_test.go.html#15234">nbytes</a></span>&nbsp;<span class="op" id="15286">!=</span>&nbsp;<span class="ident" id="15289"><a href="/bufio/bufio_test.go.html#15195">size</a></span>&nbsp;<span class="op" id="15294">||</span>&nbsp;<span class="ident" id="15297"><a href="/bufio/bufio_test.go.html#15242">err</a></span>&nbsp;<span class="op" id="15301">!=</span>&nbsp;<span class="ident" id="15304">nil</span>&nbsp;<span class="op" id="15308">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15313"><a href="/bufio/bufio_test.go.html#14649">t</a></span><span class="op" id="15314">.</span><span class="ident" id="15315">Fatalf</span><span class="op" id="15321">(</span><span class="string" id="15322">&#34;ReadRune(0x%x)&nbsp;got&nbsp;0x%x,%d&nbsp;not&nbsp;0x%x,%d&nbsp;(err=%s)&#34;</span><span class="op" id="15371">,</span>&nbsp;<span class="ident" id="15373"><a href="/bufio/bufio_test.go.html#15159">r1</a></span><span class="op" id="15375">,</span>&nbsp;<span class="ident" id="15377"><a href="/bufio/bufio_test.go.html#15230">nr</a></span><span class="op" id="15379">,</span>&nbsp;<span class="ident" id="15381"><a href="/bufio/bufio_test.go.html#15234">nbytes</a></span><span class="op" id="15387">,</span>&nbsp;<span class="ident" id="15389"><a href="/bufio/bufio_test.go.html#15159">r1</a></span><span class="op" id="15391">,</span>&nbsp;<span class="ident" id="15393"><a href="/bufio/bufio_test.go.html#15195">size</a></span><span class="op" id="15397">,</span>&nbsp;<span class="ident" id="15399"><a href="/bufio/bufio_test.go.html#15242">err</a></span><span class="op" id="15402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="15406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="15409">}</span><br>
<span class="lineno"></span><span class="op" id="15411">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span><span class="keyword" id="15414">func</span>&nbsp;<span class="ident" id="15419">TestWriter</span><span class="op" id="15429">(</span><span class="ident" id="15430">t</span>&nbsp;<span class="op" id="15432">*</span><span class="ident" id="15433"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="15440">.</span><span class="ident" id="15441">T</span><span class="op" id="15442">)</span>&nbsp;<span class="op" id="15444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="15447">var</span>&nbsp;<span class="ident" id="15451">data</span>&nbsp;<span class="op" id="15456">[</span><span class="num" id="15457">8192</span><span class="op" id="15461">]</span><span class="builtintype" id="15462">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="15469">for</span>&nbsp;<span class="ident" id="15473">i</span>&nbsp;<span class="op" id="15475">:=</span>&nbsp;<span class="num" id="15478">0</span><span class="op" id="15479">;</span>&nbsp;<span class="ident" id="15481"><a href="/bufio/bufio_test.go.html#15473">i</a></span>&nbsp;<span class="op" id="15483">&lt;</span>&nbsp;<span class="builtinfunc" id="15485">len</span><span class="op" id="15488">(</span><span class="ident" id="15489"><a href="/bufio/bufio_test.go.html#15451">data</a></span><span class="op" id="15493">)</span><span class="op" id="15494">;</span>&nbsp;<span class="ident" id="15496"><a href="/bufio/bufio_test.go.html#15473">i</a></span><span class="op" id="15497">++</span>&nbsp;<span class="op" id="15500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15504"><a href="/bufio/bufio_test.go.html#15451">data</a></span><span class="op" id="15508">[</span><span class="ident" id="15509"><a href="/bufio/bufio_test.go.html#15473">i</a></span><span class="op" id="15510">]</span>&nbsp;<span class="op" id="15512">=</span>&nbsp;<span class="builtintype" id="15514">byte</span><span class="op" id="15518">(</span><span class="string" id="15519">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="15523">+</span>&nbsp;<span class="ident" id="15525"><a href="/bufio/bufio_test.go.html#15473">i</a></span><span class="op" id="15526">%</span><span class="op" id="15527">(</span><span class="string" id="15528">&#39;~&#39;</span><span class="op" id="15531">-</span><span class="string" id="15532">&#39;&nbsp;&#39;</span><span class="op" id="15535">)</span><span class="op" id="15536">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="15539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15542">w</span>&nbsp;<span class="op" id="15544">:=</span>&nbsp;<span class="builtinfunc" id="15547">new</span><span class="op" id="15550">(</span><span class="ident" id="15551"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="15556">.</span><span class="ident" id="15557">Buffer</span><span class="op" id="15563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="15566">for</span>&nbsp;<span class="ident" id="15570">i</span>&nbsp;<span class="op" id="15572">:=</span>&nbsp;<span class="num" id="15575">0</span><span class="op" id="15576">;</span>&nbsp;<span class="ident" id="15578"><a href="/bufio/bufio_test.go.html#15570">i</a></span>&nbsp;<span class="op" id="15580">&lt;</span>&nbsp;<span class="builtinfunc" id="15582">len</span><span class="op" id="15585">(</span><span class="ident" id="15586"><a href="/bufio/bufio_test.go.html#6008">bufsizes</a></span><span class="op" id="15594">)</span><span class="op" id="15595">;</span>&nbsp;<span class="ident" id="15597"><a href="/bufio/bufio_test.go.html#15570">i</a></span><span class="op" id="15598">++</span>&nbsp;<span class="op" id="15601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="15605">for</span>&nbsp;<span class="ident" id="15609">j</span>&nbsp;<span class="op" id="15611">:=</span>&nbsp;<span class="num" id="15614">0</span><span class="op" id="15615">;</span>&nbsp;<span class="ident" id="15617"><a href="/bufio/bufio_test.go.html#15609">j</a></span>&nbsp;<span class="op" id="15619">&lt;</span>&nbsp;<span class="builtinfunc" id="15621">len</span><span class="op" id="15624">(</span><span class="ident" id="15625"><a href="/bufio/bufio_test.go.html#6008">bufsizes</a></span><span class="op" id="15633">)</span><span class="op" id="15634">;</span>&nbsp;<span class="ident" id="15636"><a href="/bufio/bufio_test.go.html#15609">j</a></span><span class="op" id="15637">++</span>&nbsp;<span class="op" id="15640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15645">nwrite</span>&nbsp;<span class="op" id="15652">:=</span>&nbsp;<span class="ident" id="15655"><a href="/bufio/bufio_test.go.html#6008">bufsizes</a></span><span class="op" id="15663">[</span><span class="ident" id="15664"><a href="/bufio/bufio_test.go.html#15570">i</a></span><span class="op" id="15665">]</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15670">bs</span>&nbsp;<span class="op" id="15673">:=</span>&nbsp;<span class="ident" id="15676"><a href="/bufio/bufio_test.go.html#6008">bufsizes</a></span><span class="op" id="15684">[</span><span class="ident" id="15685"><a href="/bufio/bufio_test.go.html#15609">j</a></span><span class="op" id="15686">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="15692">//&nbsp;Write&nbsp;nwrite&nbsp;bytes&nbsp;using&nbsp;buffer&nbsp;size&nbsp;bs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="15739">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;right&nbsp;amount&nbsp;makes&nbsp;it&nbsp;out</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="15786">//&nbsp;and&nbsp;that&nbsp;the&nbsp;data&nbsp;is&nbsp;correct.</span><br>
<span class="lineno">535</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15823"><a href="/bufio/bufio_test.go.html#15542">w</a></span><span class="op" id="15824">.</span><span class="ident" id="15825">Reset</span><span class="op" id="15830">(</span><span class="op" id="15831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15836">buf</span>&nbsp;<span class="op" id="15840">:=</span>&nbsp;<span class="ident" id="15843"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="15856">(</span><span class="ident" id="15857"><a href="/bufio/bufio_test.go.html#15542">w</a></span><span class="op" id="15858">,</span>&nbsp;<span class="ident" id="15860"><a href="/bufio/bufio_test.go.html#15670">bs</a></span><span class="op" id="15862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15867">context</span>&nbsp;<span class="op" id="15875">:=</span>&nbsp;<span class="ident" id="15878"><a href="/bufio/bufio_test.go.html#3418">fmt</a></span><span class="op" id="15881">.</span><span class="ident" id="15882">Sprintf</span><span class="op" id="15889">(</span><span class="string" id="15890">&#34;nwrite=%d&nbsp;bufsize=%d&#34;</span><span class="op" id="15912">,</span>&nbsp;<span class="ident" id="15914"><a href="/bufio/bufio_test.go.html#15645">nwrite</a></span><span class="op" id="15920">,</span>&nbsp;<span class="ident" id="15922"><a href="/bufio/bufio_test.go.html#15670">bs</a></span><span class="op" id="15924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="15929">n</span><span class="op" id="15930">,</span>&nbsp;<span class="ident" id="15932">e1</span>&nbsp;<span class="op" id="15935">:=</span>&nbsp;<span class="ident" id="15938"><a href="/bufio/bufio_test.go.html#15836">buf</a></span><span class="op" id="15941">.</span><span class="ident" id="15942">Write</span><span class="op" id="15947">(</span><span class="ident" id="15948"><a href="/bufio/bufio_test.go.html#15451">data</a></span><span class="op" id="15952">[</span><span class="num" id="15953">0</span><span class="op" id="15954">:</span><span class="ident" id="15955"><a href="/bufio/bufio_test.go.html#15645">nwrite</a></span><span class="op" id="15961">]</span><span class="op" id="15962">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="15967">if</span>&nbsp;<span class="ident" id="15970"><a href="/bufio/bufio_test.go.html#15932">e1</a></span>&nbsp;<span class="op" id="15973">!=</span>&nbsp;<span class="ident" id="15976">nil</span>&nbsp;<span class="op" id="15980">||</span>&nbsp;<span class="ident" id="15983"><a href="/bufio/bufio_test.go.html#15929">n</a></span>&nbsp;<span class="op" id="15985">!=</span>&nbsp;<span class="ident" id="15988"><a href="/bufio/bufio_test.go.html#15645">nwrite</a></span>&nbsp;<span class="op" id="15995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="16001"><a href="/bufio/bufio_test.go.html#15430">t</a></span><span class="op" id="16002">.</span><span class="ident" id="16003">Errorf</span><span class="op" id="16009">(</span><span class="string" id="16010">&#34;%s:&nbsp;buf.Write&nbsp;%d&nbsp;=&nbsp;%d,&nbsp;%v&#34;</span><span class="op" id="16037">,</span>&nbsp;<span class="ident" id="16039"><a href="/bufio/bufio_test.go.html#15867">context</a></span><span class="op" id="16046">,</span>&nbsp;<span class="ident" id="16048"><a href="/bufio/bufio_test.go.html#15645">nwrite</a></span><span class="op" id="16054">,</span>&nbsp;<span class="ident" id="16056"><a href="/bufio/bufio_test.go.html#15929">n</a></span><span class="op" id="16057">,</span>&nbsp;<span class="ident" id="16059"><a href="/bufio/bufio_test.go.html#15932">e1</a></span><span class="op" id="16061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="16067">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="16084">if</span>&nbsp;<span class="ident" id="16087">e</span>&nbsp;<span class="op" id="16089">:=</span>&nbsp;<span class="ident" id="16092"><a href="/bufio/bufio_test.go.html#15836">buf</a></span><span class="op" id="16095">.</span><span class="ident" id="16096">Flush</span><span class="op" id="16101">(</span><span class="op" id="16102">)</span><span class="op" id="16103">;</span>&nbsp;<span class="ident" id="16105"><a href="/bufio/bufio_test.go.html#16087">e</a></span>&nbsp;<span class="op" id="16107">!=</span>&nbsp;<span class="ident" id="16110">nil</span>&nbsp;<span class="op" id="16114">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="16120"><a href="/bufio/bufio_test.go.html#15430">t</a></span><span class="op" id="16121">.</span><span class="ident" id="16122">Errorf</span><span class="op" id="16128">(</span><span class="string" id="16129">&#34;%s:&nbsp;buf.Flush&nbsp;=&nbsp;%v&#34;</span><span class="op" id="16149">,</span>&nbsp;<span class="ident" id="16151"><a href="/bufio/bufio_test.go.html#15867">context</a></span><span class="op" id="16158">,</span>&nbsp;<span class="ident" id="16160"><a href="/bufio/bufio_test.go.html#16087">e</a></span><span class="op" id="16161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16166">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="16172">written</span>&nbsp;<span class="op" id="16180">:=</span>&nbsp;<span class="ident" id="16183"><a href="/bufio/bufio_test.go.html#15542">w</a></span><span class="op" id="16184">.</span><span class="ident" id="16185">Bytes</span><span class="op" id="16190">(</span><span class="op" id="16191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="16196">if</span>&nbsp;<span class="builtinfunc" id="16199">len</span><span class="op" id="16202">(</span><span class="ident" id="16203"><a href="/bufio/bufio_test.go.html#16172">written</a></span><span class="op" id="16210">)</span>&nbsp;<span class="op" id="16212">!=</span>&nbsp;<span class="ident" id="16215"><a href="/bufio/bufio_test.go.html#15645">nwrite</a></span>&nbsp;<span class="op" id="16222">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="16228"><a href="/bufio/bufio_test.go.html#15430">t</a></span><span class="op" id="16229">.</span><span class="ident" id="16230">Errorf</span><span class="op" id="16236">(</span><span class="string" id="16237">&#34;%s:&nbsp;%d&nbsp;bytes&nbsp;written&#34;</span><span class="op" id="16259">,</span>&nbsp;<span class="ident" id="16261"><a href="/bufio/bufio_test.go.html#15867">context</a></span><span class="op" id="16268">,</span>&nbsp;<span class="builtinfunc" id="16270">len</span><span class="op" id="16273">(</span><span class="ident" id="16274"><a href="/bufio/bufio_test.go.html#16172">written</a></span><span class="op" id="16281">)</span><span class="op" id="16282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="16292">for</span>&nbsp;<span class="ident" id="16296">l</span>&nbsp;<span class="op" id="16298">:=</span>&nbsp;<span class="num" id="16301">0</span><span class="op" id="16302">;</span>&nbsp;<span class="ident" id="16304"><a href="/bufio/bufio_test.go.html#16296">l</a></span>&nbsp;<span class="op" id="16306">&lt;</span>&nbsp;<span class="builtinfunc" id="16308">len</span><span class="op" id="16311">(</span><span class="ident" id="16312"><a href="/bufio/bufio_test.go.html#16172">written</a></span><span class="op" id="16319">)</span><span class="op" id="16320">;</span>&nbsp;<span class="ident" id="16322"><a href="/bufio/bufio_test.go.html#16296">l</a></span><span class="op" id="16323">++</span>&nbsp;<span class="op" id="16326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="16332">if</span>&nbsp;<span class="ident" id="16335"><a href="/bufio/bufio_test.go.html#16172">written</a></span><span class="op" id="16342">[</span><span class="ident" id="16343"><a href="/bufio/bufio_test.go.html#15570">i</a></span><span class="op" id="16344">]</span>&nbsp;<span class="op" id="16346">!=</span>&nbsp;<span class="ident" id="16349"><a href="/bufio/bufio_test.go.html#15451">data</a></span><span class="op" id="16353">[</span><span class="ident" id="16354"><a href="/bufio/bufio_test.go.html#15570">i</a></span><span class="op" id="16355">]</span>&nbsp;<span class="op" id="16357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="16364"><a href="/bufio/bufio_test.go.html#15430">t</a></span><span class="op" id="16365">.</span><span class="ident" id="16366">Errorf</span><span class="op" id="16372">(</span><span class="string" id="16373">&#34;wrong&nbsp;bytes&nbsp;written&#34;</span><span class="op" id="16394">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="16401"><a href="/bufio/bufio_test.go.html#15430">t</a></span><span class="op" id="16402">.</span><span class="ident" id="16403">Errorf</span><span class="op" id="16409">(</span><span class="string" id="16410">&#34;want=%q&#34;</span><span class="op" id="16419">,</span>&nbsp;<span class="ident" id="16421"><a href="/bufio/bufio_test.go.html#15451">data</a></span><span class="op" id="16425">[</span><span class="num" id="16426">0</span><span class="op" id="16427">:</span><span class="builtinfunc" id="16428">len</span><span class="op" id="16431">(</span><span class="ident" id="16432"><a href="/bufio/bufio_test.go.html#16172">written</a></span><span class="op" id="16439">)</span><span class="op" id="16440">]</span><span class="op" id="16441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="16448"><a href="/bufio/bufio_test.go.html#15430">t</a></span><span class="op" id="16449">.</span><span class="ident" id="16450">Errorf</span><span class="op" id="16456">(</span><span class="string" id="16457">&#34;have=%q&#34;</span><span class="op" id="16466">,</span>&nbsp;<span class="ident" id="16468"><a href="/bufio/bufio_test.go.html#16172">written</a></span><span class="op" id="16475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16490">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16493">}</span><br>
<span class="lineno"></span><span class="op" id="16495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="16498">//&nbsp;Check&nbsp;that&nbsp;write&nbsp;errors&nbsp;are&nbsp;returned&nbsp;properly.</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="16549">type</span>&nbsp;<span class="ident" id="16554">errorWriterTest</span>&nbsp;<span class="keyword" id="16570">struct</span>&nbsp;<span class="op" id="16577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="16580">n</span><span class="op" id="16581">,</span>&nbsp;<span class="ident" id="16583">m</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="16587">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="16592">err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="16599">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="16606">expect</span>&nbsp;<span class="builtintype" id="16613">error</span><br>
<span class="lineno"></span><span class="op" id="16619">}</span><br>
<span class="lineno">570</span><br>
<span class="lineno"></span><span class="keyword" id="16622">func</span>&nbsp;<span class="op" id="16627">(</span><span class="ident" id="16628">w</span>&nbsp;<span class="ident" id="16630"><a href="/bufio/bufio_test.go.html#16554">errorWriterTest</a></span><span class="op" id="16645">)</span>&nbsp;<span class="ident" id="16647">Write</span><span class="op" id="16652">(</span><span class="ident" id="16653">p</span>&nbsp;<span class="op" id="16655">[</span><span class="op" id="16656">]</span><span class="builtintype" id="16657">byte</span><span class="op" id="16661">)</span>&nbsp;<span class="op" id="16663">(</span><span class="builtintype" id="16664">int</span><span class="op" id="16667">,</span>&nbsp;<span class="builtintype" id="16669">error</span><span class="op" id="16674">)</span>&nbsp;<span class="op" id="16676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="16679">return</span>&nbsp;<span class="builtinfunc" id="16686">len</span><span class="op" id="16689">(</span><span class="ident" id="16690"><a href="/bufio/bufio_test.go.html#16653">p</a></span><span class="op" id="16691">)</span>&nbsp;<span class="op" id="16693">*</span>&nbsp;<span class="ident" id="16695"><a href="/bufio/bufio_test.go.html#16628">w</a></span><span class="op" id="16696">.</span><span class="ident" id="16697">n</span>&nbsp;<span class="op" id="16699">/</span>&nbsp;<span class="ident" id="16701"><a href="/bufio/bufio_test.go.html#16628">w</a></span><span class="op" id="16702">.</span><span class="ident" id="16703">m</span><span class="op" id="16704">,</span>&nbsp;<span class="ident" id="16706"><a href="/bufio/bufio_test.go.html#16628">w</a></span><span class="op" id="16707">.</span><span class="ident" id="16708">err</span><br>
<span class="lineno"></span><span class="op" id="16712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">575</span><span class="keyword" id="16715">var</span>&nbsp;<span class="ident" id="16719">errorWriterTests</span>&nbsp;<span class="op" id="16736">=</span>&nbsp;<span class="op" id="16738">[</span><span class="op" id="16739">]</span><span class="ident" id="16740"><a href="/bufio/bufio_test.go.html#16554">errorWriterTest</a></span><span class="op" id="16755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16758">{</span><span class="num" id="16759">0</span><span class="op" id="16760">,</span>&nbsp;<span class="num" id="16762">1</span><span class="op" id="16763">,</span>&nbsp;<span class="ident" id="16765">nil</span><span class="op" id="16768">,</span>&nbsp;<span class="ident" id="16770"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="16772">.</span><span class="ident" id="16773">ErrShortWrite</span><span class="op" id="16786">}</span><span class="op" id="16787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16790">{</span><span class="num" id="16791">1</span><span class="op" id="16792">,</span>&nbsp;<span class="num" id="16794">2</span><span class="op" id="16795">,</span>&nbsp;<span class="ident" id="16797">nil</span><span class="op" id="16800">,</span>&nbsp;<span class="ident" id="16802"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="16804">.</span><span class="ident" id="16805">ErrShortWrite</span><span class="op" id="16818">}</span><span class="op" id="16819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16822">{</span><span class="num" id="16823">1</span><span class="op" id="16824">,</span>&nbsp;<span class="num" id="16826">1</span><span class="op" id="16827">,</span>&nbsp;<span class="ident" id="16829">nil</span><span class="op" id="16832">,</span>&nbsp;<span class="ident" id="16834">nil</span><span class="op" id="16837">}</span><span class="op" id="16838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16841">{</span><span class="num" id="16842">0</span><span class="op" id="16843">,</span>&nbsp;<span class="num" id="16845">1</span><span class="op" id="16846">,</span>&nbsp;<span class="ident" id="16848"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="16850">.</span><span class="ident" id="16851">ErrClosedPipe</span><span class="op" id="16864">,</span>&nbsp;<span class="ident" id="16866"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="16868">.</span><span class="ident" id="16869">ErrClosedPipe</span><span class="op" id="16882">}</span><span class="op" id="16883">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16886">{</span><span class="num" id="16887">1</span><span class="op" id="16888">,</span>&nbsp;<span class="num" id="16890">2</span><span class="op" id="16891">,</span>&nbsp;<span class="ident" id="16893"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="16895">.</span><span class="ident" id="16896">ErrClosedPipe</span><span class="op" id="16909">,</span>&nbsp;<span class="ident" id="16911"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="16913">.</span><span class="ident" id="16914">ErrClosedPipe</span><span class="op" id="16927">}</span><span class="op" id="16928">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="16931">{</span><span class="num" id="16932">1</span><span class="op" id="16933">,</span>&nbsp;<span class="num" id="16935">1</span><span class="op" id="16936">,</span>&nbsp;<span class="ident" id="16938"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="16940">.</span><span class="ident" id="16941">ErrClosedPipe</span><span class="op" id="16954">,</span>&nbsp;<span class="ident" id="16956"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="16958">.</span><span class="ident" id="16959">ErrClosedPipe</span><span class="op" id="16972">}</span><span class="op" id="16973">,</span><br>
<span class="lineno"></span><span class="op" id="16975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="16978">func</span>&nbsp;<span class="ident" id="16983">TestWriteErrors</span><span class="op" id="16998">(</span><span class="ident" id="16999">t</span>&nbsp;<span class="op" id="17001">*</span><span class="ident" id="17002"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="17009">.</span><span class="ident" id="17010">T</span><span class="op" id="17011">)</span>&nbsp;<span class="op" id="17013">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="17016">for</span>&nbsp;<span class="ident" id="17020">_</span><span class="op" id="17021">,</span>&nbsp;<span class="ident" id="17023">w</span>&nbsp;<span class="op" id="17025">:=</span>&nbsp;<span class="keyword" id="17028">range</span>&nbsp;<span class="ident" id="17034"><a href="/bufio/bufio_test.go.html#16719">errorWriterTests</a></span>&nbsp;<span class="op" id="17051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17055">buf</span>&nbsp;<span class="op" id="17059">:=</span>&nbsp;<span class="ident" id="17062"><a href="/bufio/bufio.go.html#3230224">NewWriter</a></span><span class="op" id="17071">(</span><span class="ident" id="17072"><a href="/bufio/bufio_test.go.html#17023">w</a></span><span class="op" id="17073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17077">_</span><span class="op" id="17078">,</span>&nbsp;<span class="ident" id="17080">e</span>&nbsp;<span class="op" id="17082">:=</span>&nbsp;<span class="ident" id="17085"><a href="/bufio/bufio_test.go.html#17055">buf</a></span><span class="op" id="17088">.</span><span class="ident" id="17089">Write</span><span class="op" id="17094">(</span><span class="op" id="17095">[</span><span class="op" id="17096">]</span><span class="builtintype" id="17097">byte</span><span class="op" id="17101">(</span><span class="string" id="17102">&#34;hello&nbsp;world&#34;</span><span class="op" id="17115">)</span><span class="op" id="17116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="17120">if</span>&nbsp;<span class="ident" id="17123"><a href="/bufio/bufio_test.go.html#17080">e</a></span>&nbsp;<span class="op" id="17125">!=</span>&nbsp;<span class="ident" id="17128">nil</span>&nbsp;<span class="op" id="17132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17137"><a href="/bufio/bufio_test.go.html#16999">t</a></span><span class="op" id="17138">.</span><span class="ident" id="17139">Errorf</span><span class="op" id="17145">(</span><span class="string" id="17146">&#34;Write&nbsp;hello&nbsp;to&nbsp;%v:&nbsp;%v&#34;</span><span class="op" id="17169">,</span>&nbsp;<span class="ident" id="17171"><a href="/bufio/bufio_test.go.html#17023">w</a></span><span class="op" id="17172">,</span>&nbsp;<span class="ident" id="17174"><a href="/bufio/bufio_test.go.html#17080">e</a></span><span class="op" id="17175">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="17180">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="17191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="17195">//&nbsp;Two&nbsp;flushes,&nbsp;to&nbsp;verify&nbsp;the&nbsp;error&nbsp;is&nbsp;sticky.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="17244">for</span>&nbsp;<span class="ident" id="17248">i</span>&nbsp;<span class="op" id="17250">:=</span>&nbsp;<span class="num" id="17253">0</span><span class="op" id="17254">;</span>&nbsp;<span class="ident" id="17256"><a href="/bufio/bufio_test.go.html#17248">i</a></span>&nbsp;<span class="op" id="17258">&lt;</span>&nbsp;<span class="num" id="17260">2</span><span class="op" id="17261">;</span>&nbsp;<span class="ident" id="17263"><a href="/bufio/bufio_test.go.html#17248">i</a></span><span class="op" id="17264">++</span>&nbsp;<span class="op" id="17267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17272"><a href="/bufio/bufio_test.go.html#17080">e</a></span>&nbsp;<span class="op" id="17274">=</span>&nbsp;<span class="ident" id="17276"><a href="/bufio/bufio_test.go.html#17055">buf</a></span><span class="op" id="17279">.</span><span class="ident" id="17280">Flush</span><span class="op" id="17285">(</span><span class="op" id="17286">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="17291">if</span>&nbsp;<span class="ident" id="17294"><a href="/bufio/bufio_test.go.html#17080">e</a></span>&nbsp;<span class="op" id="17296">!=</span>&nbsp;<span class="ident" id="17299"><a href="/bufio/bufio_test.go.html#17023">w</a></span><span class="op" id="17300">.</span><span class="ident" id="17301">expect</span>&nbsp;<span class="op" id="17308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17314"><a href="/bufio/bufio_test.go.html#16999">t</a></span><span class="op" id="17315">.</span><span class="ident" id="17316">Errorf</span><span class="op" id="17322">(</span><span class="string" id="17323">&#34;Flush&nbsp;%d/2&nbsp;%v:&nbsp;got&nbsp;%v,&nbsp;wanted&nbsp;%v&#34;</span><span class="op" id="17357">,</span>&nbsp;<span class="ident" id="17359"><a href="/bufio/bufio_test.go.html#17248">i</a></span><span class="op" id="17360">+</span><span class="num" id="17361">1</span><span class="op" id="17362">,</span>&nbsp;<span class="ident" id="17364"><a href="/bufio/bufio_test.go.html#17023">w</a></span><span class="op" id="17365">,</span>&nbsp;<span class="ident" id="17367"><a href="/bufio/bufio_test.go.html#17080">e</a></span><span class="op" id="17368">,</span>&nbsp;<span class="ident" id="17370"><a href="/bufio/bufio_test.go.html#17023">w</a></span><span class="op" id="17371">.</span><span class="ident" id="17372">expect</span><span class="op" id="17378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="17383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="17387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="17390">}</span><br>
<span class="lineno">600</span><span class="op" id="17392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="17395">func</span>&nbsp;<span class="ident" id="17400">TestNewReaderSizeIdempotent</span><span class="op" id="17427">(</span><span class="ident" id="17428">t</span>&nbsp;<span class="op" id="17430">*</span><span class="ident" id="17431"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="17438">.</span><span class="ident" id="17439">T</span><span class="op" id="17440">)</span>&nbsp;<span class="op" id="17442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="17445">const</span>&nbsp;<span class="ident" id="17451">BufSize</span>&nbsp;<span class="op" id="17459">=</span>&nbsp;<span class="num" id="17461">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17467">b</span>&nbsp;<span class="op" id="17469">:=</span>&nbsp;<span class="ident" id="17472"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="17485">(</span><span class="ident" id="17486"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="17493">.</span><span class="ident" id="17494">NewReader</span><span class="op" id="17503">(</span><span class="string" id="17504">&#34;hello&nbsp;world&#34;</span><span class="op" id="17517">)</span><span class="op" id="17518">,</span>&nbsp;<span class="ident" id="17520"><a href="/bufio/bufio_test.go.html#17451">BufSize</a></span><span class="op" id="17527">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="17530">//&nbsp;Does&nbsp;it&nbsp;recognize&nbsp;itself?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17560">b1</span>&nbsp;<span class="op" id="17563">:=</span>&nbsp;<span class="ident" id="17566"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="17579">(</span><span class="ident" id="17580"><a href="/bufio/bufio_test.go.html#17467">b</a></span><span class="op" id="17581">,</span>&nbsp;<span class="ident" id="17583"><a href="/bufio/bufio_test.go.html#17451">BufSize</a></span><span class="op" id="17590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="17593">if</span>&nbsp;<span class="ident" id="17596"><a href="/bufio/bufio_test.go.html#17560">b1</a></span>&nbsp;<span class="op" id="17599">!=</span>&nbsp;<span class="ident" id="17602"><a href="/bufio/bufio_test.go.html#17467">b</a></span>&nbsp;<span class="op" id="17604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17608"><a href="/bufio/bufio_test.go.html#17428">t</a></span><span class="op" id="17609">.</span><span class="ident" id="17610">Error</span><span class="op" id="17615">(</span><span class="string" id="17616">&#34;NewReaderSize&nbsp;did&nbsp;not&nbsp;detect&nbsp;underlying&nbsp;Reader&#34;</span><span class="op" id="17664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="17667">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="17670">//&nbsp;Does&nbsp;it&nbsp;wrap&nbsp;if&nbsp;existing&nbsp;buffer&nbsp;is&nbsp;too&nbsp;small?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17720">b2</span>&nbsp;<span class="op" id="17723">:=</span>&nbsp;<span class="ident" id="17726"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="17739">(</span><span class="ident" id="17740"><a href="/bufio/bufio_test.go.html#17467">b</a></span><span class="op" id="17741">,</span>&nbsp;<span class="num" id="17743">2</span><span class="op" id="17744">*</span><span class="ident" id="17745"><a href="/bufio/bufio_test.go.html#17451">BufSize</a></span><span class="op" id="17752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="17755">if</span>&nbsp;<span class="ident" id="17758"><a href="/bufio/bufio_test.go.html#17720">b2</a></span>&nbsp;<span class="op" id="17761">==</span>&nbsp;<span class="ident" id="17764"><a href="/bufio/bufio_test.go.html#17467">b</a></span>&nbsp;<span class="op" id="17766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17770"><a href="/bufio/bufio_test.go.html#17428">t</a></span><span class="op" id="17771">.</span><span class="ident" id="17772">Error</span><span class="op" id="17777">(</span><span class="string" id="17778">&#34;NewReaderSize&nbsp;did&nbsp;not&nbsp;enlarge&nbsp;buffer&#34;</span><span class="op" id="17816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="17819">}</span><br>
<span class="lineno">615</span><span class="op" id="17821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="17824">func</span>&nbsp;<span class="ident" id="17829">TestNewWriterSizeIdempotent</span><span class="op" id="17856">(</span><span class="ident" id="17857">t</span>&nbsp;<span class="op" id="17859">*</span><span class="ident" id="17860"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="17867">.</span><span class="ident" id="17868">T</span><span class="op" id="17869">)</span>&nbsp;<span class="op" id="17871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="17874">const</span>&nbsp;<span class="ident" id="17880">BufSize</span>&nbsp;<span class="op" id="17888">=</span>&nbsp;<span class="num" id="17890">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17896">b</span>&nbsp;<span class="op" id="17898">:=</span>&nbsp;<span class="ident" id="17901"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="17914">(</span><span class="builtinfunc" id="17915">new</span><span class="op" id="17918">(</span><span class="ident" id="17919"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="17924">.</span><span class="ident" id="17925">Buffer</span><span class="op" id="17931">)</span><span class="op" id="17932">,</span>&nbsp;<span class="ident" id="17934"><a href="/bufio/bufio_test.go.html#17880">BufSize</a></span><span class="op" id="17941">)</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="17944">//&nbsp;Does&nbsp;it&nbsp;recognize&nbsp;itself?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="17974">b1</span>&nbsp;<span class="op" id="17977">:=</span>&nbsp;<span class="ident" id="17980"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="17993">(</span><span class="ident" id="17994"><a href="/bufio/bufio_test.go.html#17896">b</a></span><span class="op" id="17995">,</span>&nbsp;<span class="ident" id="17997"><a href="/bufio/bufio_test.go.html#17880">BufSize</a></span><span class="op" id="18004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="18007">if</span>&nbsp;<span class="ident" id="18010"><a href="/bufio/bufio_test.go.html#17974">b1</a></span>&nbsp;<span class="op" id="18013">!=</span>&nbsp;<span class="ident" id="18016"><a href="/bufio/bufio_test.go.html#17896">b</a></span>&nbsp;<span class="op" id="18018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18022"><a href="/bufio/bufio_test.go.html#17857">t</a></span><span class="op" id="18023">.</span><span class="ident" id="18024">Error</span><span class="op" id="18029">(</span><span class="string" id="18030">&#34;NewWriterSize&nbsp;did&nbsp;not&nbsp;detect&nbsp;underlying&nbsp;Writer&#34;</span><span class="op" id="18078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="18081">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="18084">//&nbsp;Does&nbsp;it&nbsp;wrap&nbsp;if&nbsp;existing&nbsp;buffer&nbsp;is&nbsp;too&nbsp;small?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18134">b2</span>&nbsp;<span class="op" id="18137">:=</span>&nbsp;<span class="ident" id="18140"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="18153">(</span><span class="ident" id="18154"><a href="/bufio/bufio_test.go.html#17896">b</a></span><span class="op" id="18155">,</span>&nbsp;<span class="num" id="18157">2</span><span class="op" id="18158">*</span><span class="ident" id="18159"><a href="/bufio/bufio_test.go.html#17880">BufSize</a></span><span class="op" id="18166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="18169">if</span>&nbsp;<span class="ident" id="18172"><a href="/bufio/bufio_test.go.html#18134">b2</a></span>&nbsp;<span class="op" id="18175">==</span>&nbsp;<span class="ident" id="18178"><a href="/bufio/bufio_test.go.html#17896">b</a></span>&nbsp;<span class="op" id="18180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18184"><a href="/bufio/bufio_test.go.html#17857">t</a></span><span class="op" id="18185">.</span><span class="ident" id="18186">Error</span><span class="op" id="18191">(</span><span class="string" id="18192">&#34;NewWriterSize&nbsp;did&nbsp;not&nbsp;enlarge&nbsp;buffer&#34;</span><span class="op" id="18230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="18233">}</span><br>
<span class="lineno">630</span><span class="op" id="18235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="18238">func</span>&nbsp;<span class="ident" id="18243">TestWriteString</span><span class="op" id="18258">(</span><span class="ident" id="18259">t</span>&nbsp;<span class="op" id="18261">*</span><span class="ident" id="18262"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="18269">.</span><span class="ident" id="18270">T</span><span class="op" id="18271">)</span>&nbsp;<span class="op" id="18273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="18276">const</span>&nbsp;<span class="ident" id="18282">BufSize</span>&nbsp;<span class="op" id="18290">=</span>&nbsp;<span class="num" id="18292">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18295">buf</span>&nbsp;<span class="op" id="18299">:=</span>&nbsp;<span class="builtinfunc" id="18302">new</span><span class="op" id="18305">(</span><span class="ident" id="18306"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="18311">.</span><span class="ident" id="18312">Buffer</span><span class="op" id="18318">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18321">b</span>&nbsp;<span class="op" id="18323">:=</span>&nbsp;<span class="ident" id="18326"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="18339">(</span><span class="ident" id="18340"><a href="/bufio/bufio_test.go.html#18295">buf</a></span><span class="op" id="18343">,</span>&nbsp;<span class="ident" id="18345"><a href="/bufio/bufio_test.go.html#18282">BufSize</a></span><span class="op" id="18352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18355"><a href="/bufio/bufio_test.go.html#18321">b</a></span><span class="op" id="18356">.</span><span class="ident" id="18357">WriteString</span><span class="op" id="18368">(</span><span class="string" id="18369">&#34;0&#34;</span><span class="op" id="18372">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="18398">//&nbsp;easy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18407"><a href="/bufio/bufio_test.go.html#18321">b</a></span><span class="op" id="18408">.</span><span class="ident" id="18409">WriteString</span><span class="op" id="18420">(</span><span class="string" id="18421">&#34;123456&#34;</span><span class="op" id="18429">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="18450">//&nbsp;still&nbsp;easy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18465"><a href="/bufio/bufio_test.go.html#18321">b</a></span><span class="op" id="18466">.</span><span class="ident" id="18467">WriteString</span><span class="op" id="18478">(</span><span class="string" id="18479">&#34;7890&#34;</span><span class="op" id="18485">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="18508">//&nbsp;easy&nbsp;after&nbsp;flush</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18529"><a href="/bufio/bufio_test.go.html#18321">b</a></span><span class="op" id="18530">.</span><span class="ident" id="18531">WriteString</span><span class="op" id="18542">(</span><span class="string" id="18543">&#34;abcdefghijklmnopqrstuvwxy&#34;</span><span class="op" id="18570">)</span>&nbsp;<span class="comment" id="18572">//&nbsp;hard</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18581"><a href="/bufio/bufio_test.go.html#18321">b</a></span><span class="op" id="18582">.</span><span class="ident" id="18583">WriteString</span><span class="op" id="18594">(</span><span class="string" id="18595">&#34;z&#34;</span><span class="op" id="18598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="18601">if</span>&nbsp;<span class="ident" id="18604">err</span>&nbsp;<span class="op" id="18608">:=</span>&nbsp;<span class="ident" id="18611"><a href="/bufio/bufio_test.go.html#18321">b</a></span><span class="op" id="18612">.</span><span class="ident" id="18613">Flush</span><span class="op" id="18618">(</span><span class="op" id="18619">)</span><span class="op" id="18620">;</span>&nbsp;<span class="ident" id="18622"><a href="/bufio/bufio_test.go.html#18604">err</a></span>&nbsp;<span class="op" id="18626">!=</span>&nbsp;<span class="ident" id="18629">nil</span>&nbsp;<span class="op" id="18633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18637"><a href="/bufio/bufio_test.go.html#18259">t</a></span><span class="op" id="18638">.</span><span class="ident" id="18639">Error</span><span class="op" id="18644">(</span><span class="string" id="18645">&#34;WriteString&#34;</span><span class="op" id="18658">,</span>&nbsp;<span class="ident" id="18660"><a href="/bufio/bufio_test.go.html#18604">err</a></span><span class="op" id="18663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="18666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18669">s</span>&nbsp;<span class="op" id="18671">:=</span>&nbsp;<span class="string" id="18674">&#34;01234567890abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="18715">if</span>&nbsp;<span class="builtintype" id="18718">string</span><span class="op" id="18724">(</span><span class="ident" id="18725"><a href="/bufio/bufio_test.go.html#18295">buf</a></span><span class="op" id="18728">.</span><span class="ident" id="18729">Bytes</span><span class="op" id="18734">(</span><span class="op" id="18735">)</span><span class="op" id="18736">)</span>&nbsp;<span class="op" id="18738">!=</span>&nbsp;<span class="ident" id="18741"><a href="/bufio/bufio_test.go.html#18669">s</a></span>&nbsp;<span class="op" id="18743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18747"><a href="/bufio/bufio_test.go.html#18259">t</a></span><span class="op" id="18748">.</span><span class="ident" id="18749">Errorf</span><span class="op" id="18755">(</span><span class="string" id="18756">&#34;WriteString&nbsp;wants&nbsp;%q&nbsp;gets&nbsp;%q&#34;</span><span class="op" id="18786">,</span>&nbsp;<span class="ident" id="18788"><a href="/bufio/bufio_test.go.html#18669">s</a></span><span class="op" id="18789">,</span>&nbsp;<span class="builtintype" id="18791">string</span><span class="op" id="18797">(</span><span class="ident" id="18798"><a href="/bufio/bufio_test.go.html#18295">buf</a></span><span class="op" id="18801">.</span><span class="ident" id="18802">Bytes</span><span class="op" id="18807">(</span><span class="op" id="18808">)</span><span class="op" id="18809">)</span><span class="op" id="18810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="18813">}</span><br>
<span class="lineno"></span><span class="op" id="18815">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">650</span><span class="keyword" id="18818">func</span>&nbsp;<span class="ident" id="18823">TestBufferFull</span><span class="op" id="18837">(</span><span class="ident" id="18838">t</span>&nbsp;<span class="op" id="18840">*</span><span class="ident" id="18841"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="18848">.</span><span class="ident" id="18849">T</span><span class="op" id="18850">)</span>&nbsp;<span class="op" id="18852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="18855">const</span>&nbsp;<span class="ident" id="18861">longString</span>&nbsp;<span class="op" id="18872">=</span>&nbsp;<span class="string" id="18874">&#34;And&nbsp;now,&nbsp;hello,&nbsp;world!&nbsp;It&nbsp;is&nbsp;the&nbsp;time&nbsp;for&nbsp;all&nbsp;good&nbsp;men&nbsp;to&nbsp;come&nbsp;to&nbsp;the&nbsp;aid&nbsp;of&nbsp;their&nbsp;party&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="18966">buf</span>&nbsp;<span class="op" id="18970">:=</span>&nbsp;<span class="ident" id="18973"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="18986">(</span><span class="ident" id="18987"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="18994">.</span><span class="ident" id="18995">NewReader</span><span class="op" id="19004">(</span><span class="ident" id="19005"><a href="/bufio/bufio_test.go.html#18861">longString</a></span><span class="op" id="19015">)</span><span class="op" id="19016">,</span>&nbsp;<span class="ident" id="19018"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="19035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="19038">line</span><span class="op" id="19042">,</span>&nbsp;<span class="ident" id="19044">err</span>&nbsp;<span class="op" id="19048">:=</span>&nbsp;<span class="ident" id="19051"><a href="/bufio/bufio_test.go.html#18966">buf</a></span><span class="op" id="19054">.</span><span class="ident" id="19055">ReadSlice</span><span class="op" id="19064">(</span><span class="string" id="19065">&#39;!&#39;</span><span class="op" id="19068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="19071">if</span>&nbsp;<span class="builtintype" id="19074">string</span><span class="op" id="19080">(</span><span class="ident" id="19081"><a href="/bufio/bufio_test.go.html#19038">line</a></span><span class="op" id="19085">)</span>&nbsp;<span class="op" id="19087">!=</span>&nbsp;<span class="string" id="19090">&#34;And&nbsp;now,&nbsp;hello,&nbsp;&#34;</span>&nbsp;<span class="op" id="19109">||</span>&nbsp;<span class="ident" id="19112"><a href="/bufio/bufio_test.go.html#19044">err</a></span>&nbsp;<span class="op" id="19116">!=</span>&nbsp;<span class="ident" id="19119"><a href="/bufio/bufio.go.html#3217849">ErrBufferFull</a></span>&nbsp;<span class="op" id="19133">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="19137"><a href="/bufio/bufio_test.go.html#18838">t</a></span><span class="op" id="19138">.</span><span class="ident" id="19139">Errorf</span><span class="op" id="19145">(</span><span class="string" id="19146">&#34;first&nbsp;ReadSlice(,)&nbsp;=&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="19175">,</span>&nbsp;<span class="ident" id="19177"><a href="/bufio/bufio_test.go.html#19038">line</a></span><span class="op" id="19181">,</span>&nbsp;<span class="ident" id="19183"><a href="/bufio/bufio_test.go.html#19044">err</a></span><span class="op" id="19186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="19189">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="19192"><a href="/bufio/bufio_test.go.html#19038">line</a></span><span class="op" id="19196">,</span>&nbsp;<span class="ident" id="19198"><a href="/bufio/bufio_test.go.html#19044">err</a></span>&nbsp;<span class="op" id="19202">=</span>&nbsp;<span class="ident" id="19204"><a href="/bufio/bufio_test.go.html#18966">buf</a></span><span class="op" id="19207">.</span><span class="ident" id="19208">ReadSlice</span><span class="op" id="19217">(</span><span class="string" id="19218">&#39;!&#39;</span><span class="op" id="19221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="19224">if</span>&nbsp;<span class="builtintype" id="19227">string</span><span class="op" id="19233">(</span><span class="ident" id="19234"><a href="/bufio/bufio_test.go.html#19038">line</a></span><span class="op" id="19238">)</span>&nbsp;<span class="op" id="19240">!=</span>&nbsp;<span class="string" id="19243">&#34;world!&#34;</span>&nbsp;<span class="op" id="19252">||</span>&nbsp;<span class="ident" id="19255"><a href="/bufio/bufio_test.go.html#19044">err</a></span>&nbsp;<span class="op" id="19259">!=</span>&nbsp;<span class="ident" id="19262">nil</span>&nbsp;<span class="op" id="19266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="19270"><a href="/bufio/bufio_test.go.html#18838">t</a></span><span class="op" id="19271">.</span><span class="ident" id="19272">Errorf</span><span class="op" id="19278">(</span><span class="string" id="19279">&#34;second&nbsp;ReadSlice(,)&nbsp;=&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="19309">,</span>&nbsp;<span class="ident" id="19311"><a href="/bufio/bufio_test.go.html#19038">line</a></span><span class="op" id="19315">,</span>&nbsp;<span class="ident" id="19317"><a href="/bufio/bufio_test.go.html#19044">err</a></span><span class="op" id="19320">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="19323">}</span><br>
<span class="lineno"></span><span class="op" id="19325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="19328">func</span>&nbsp;<span class="ident" id="19333">TestPeek</span><span class="op" id="19341">(</span><span class="ident" id="19342">t</span>&nbsp;<span class="op" id="19344">*</span><span class="ident" id="19345"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="19352">.</span><span class="ident" id="19353">T</span><span class="op" id="19354">)</span>&nbsp;<span class="op" id="19356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="19359">p</span>&nbsp;<span class="op" id="19361">:=</span>&nbsp;<span class="builtinfunc" id="19364">make</span><span class="op" id="19368">(</span><span class="op" id="19369">[</span><span class="op" id="19370">]</span><span class="builtintype" id="19371">byte</span><span class="op" id="19375">,</span>&nbsp;<span class="num" id="19377">10</span><span class="op" id="19379">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="19382">//&nbsp;string&nbsp;is&nbsp;16&nbsp;(minReadBufferSize)&nbsp;long.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="19425">buf</span>&nbsp;<span class="op" id="19429">:=</span>&nbsp;<span class="ident" id="19432"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="19445">(</span><span class="ident" id="19446"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="19453">.</span><span class="ident" id="19454">NewReader</span><span class="op" id="19463">(</span><span class="string" id="19464">&#34;abcdefghijklmnop&#34;</span><span class="op" id="19482">)</span><span class="op" id="19483">,</span>&nbsp;<span class="ident" id="19485"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="19502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="19505">if</span>&nbsp;<span class="ident" id="19508">s</span><span class="op" id="19509">,</span>&nbsp;<span class="ident" id="19511">err</span>&nbsp;<span class="op" id="19515">:=</span>&nbsp;<span class="ident" id="19518"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="19521">.</span><span class="ident" id="19522">Peek</span><span class="op" id="19526">(</span><span class="num" id="19527">1</span><span class="op" id="19528">)</span><span class="op" id="19529">;</span>&nbsp;<span class="builtintype" id="19531">string</span><span class="op" id="19537">(</span><span class="ident" id="19538"><a href="/bufio/bufio_test.go.html#19508">s</a></span><span class="op" id="19539">)</span>&nbsp;<span class="op" id="19541">!=</span>&nbsp;<span class="string" id="19544">&#34;a&#34;</span>&nbsp;<span class="op" id="19548">||</span>&nbsp;<span class="ident" id="19551"><a href="/bufio/bufio_test.go.html#19511">err</a></span>&nbsp;<span class="op" id="19555">!=</span>&nbsp;<span class="ident" id="19558">nil</span>&nbsp;<span class="op" id="19562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="19566"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="19567">.</span><span class="ident" id="19568">Fatalf</span><span class="op" id="19574">(</span><span class="string" id="19575">&#34;want&nbsp;%q&nbsp;got&nbsp;%q,&nbsp;err=%v&#34;</span><span class="op" id="19599">,</span>&nbsp;<span class="string" id="19601">&#34;a&#34;</span><span class="op" id="19604">,</span>&nbsp;<span class="builtintype" id="19606">string</span><span class="op" id="19612">(</span><span class="ident" id="19613"><a href="/bufio/bufio_test.go.html#19508">s</a></span><span class="op" id="19614">)</span><span class="op" id="19615">,</span>&nbsp;<span class="ident" id="19617"><a href="/bufio/bufio_test.go.html#19511">err</a></span><span class="op" id="19620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="19623">}</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="19626">if</span>&nbsp;<span class="ident" id="19629">s</span><span class="op" id="19630">,</span>&nbsp;<span class="ident" id="19632">err</span>&nbsp;<span class="op" id="19636">:=</span>&nbsp;<span class="ident" id="19639"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="19642">.</span><span class="ident" id="19643">Peek</span><span class="op" id="19647">(</span><span class="num" id="19648">4</span><span class="op" id="19649">)</span><span class="op" id="19650">;</span>&nbsp;<span class="builtintype" id="19652">string</span><span class="op" id="19658">(</span><span class="ident" id="19659"><a href="/bufio/bufio_test.go.html#19629">s</a></span><span class="op" id="19660">)</span>&nbsp;<span class="op" id="19662">!=</span>&nbsp;<span class="string" id="19665">&#34;abcd&#34;</span>&nbsp;<span class="op" id="19672">||</span>&nbsp;<span class="ident" id="19675"><a href="/bufio/bufio_test.go.html#19632">err</a></span>&nbsp;<span class="op" id="19679">!=</span>&nbsp;<span class="ident" id="19682">nil</span>&nbsp;<span class="op" id="19686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="19690"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="19691">.</span><span class="ident" id="19692">Fatalf</span><span class="op" id="19698">(</span><span class="string" id="19699">&#34;want&nbsp;%q&nbsp;got&nbsp;%q,&nbsp;err=%v&#34;</span><span class="op" id="19723">,</span>&nbsp;<span class="string" id="19725">&#34;abcd&#34;</span><span class="op" id="19731">,</span>&nbsp;<span class="builtintype" id="19733">string</span><span class="op" id="19739">(</span><span class="ident" id="19740"><a href="/bufio/bufio_test.go.html#19629">s</a></span><span class="op" id="19741">)</span><span class="op" id="19742">,</span>&nbsp;<span class="ident" id="19744"><a href="/bufio/bufio_test.go.html#19632">err</a></span><span class="op" id="19747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="19750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="19753">if</span>&nbsp;<span class="ident" id="19756">_</span><span class="op" id="19757">,</span>&nbsp;<span class="ident" id="19759">err</span>&nbsp;<span class="op" id="19763">:=</span>&nbsp;<span class="ident" id="19766"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="19769">.</span><span class="ident" id="19770">Peek</span><span class="op" id="19774">(</span><span class="op" id="19775">-</span><span class="num" id="19776">1</span><span class="op" id="19777">)</span><span class="op" id="19778">;</span>&nbsp;<span class="ident" id="19780"><a href="/bufio/bufio_test.go.html#19759">err</a></span>&nbsp;<span class="op" id="19784">!=</span>&nbsp;<span class="ident" id="19787"><a href="/bufio/bufio.go.html#3217906">ErrNegativeCount</a></span>&nbsp;<span class="op" id="19804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="19808"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="19809">.</span><span class="ident" id="19810">Fatalf</span><span class="op" id="19816">(</span><span class="string" id="19817">&#34;want&nbsp;ErrNegativeCount&nbsp;got&nbsp;%v&#34;</span><span class="op" id="19847">,</span>&nbsp;<span class="ident" id="19849"><a href="/bufio/bufio_test.go.html#19759">err</a></span><span class="op" id="19852">)</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="19855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="19858">if</span>&nbsp;<span class="ident" id="19861">_</span><span class="op" id="19862">,</span>&nbsp;<span class="ident" id="19864">err</span>&nbsp;<span class="op" id="19868">:=</span>&nbsp;<span class="ident" id="19871"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="19874">.</span><span class="ident" id="19875">Peek</span><span class="op" id="19879">(</span><span class="num" id="19880">32</span><span class="op" id="19882">)</span><span class="op" id="19883">;</span>&nbsp;<span class="ident" id="19885"><a href="/bufio/bufio_test.go.html#19864">err</a></span>&nbsp;<span class="op" id="19889">!=</span>&nbsp;<span class="ident" id="19892"><a href="/bufio/bufio.go.html#3217849">ErrBufferFull</a></span>&nbsp;<span class="op" id="19906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="19910"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="19911">.</span><span class="ident" id="19912">Fatalf</span><span class="op" id="19918">(</span><span class="string" id="19919">&#34;want&nbsp;ErrBufFull&nbsp;got&nbsp;%v&#34;</span><span class="op" id="19943">,</span>&nbsp;<span class="ident" id="19945"><a href="/bufio/bufio_test.go.html#19864">err</a></span><span class="op" id="19948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="19951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="19954">if</span>&nbsp;<span class="ident" id="19957">_</span><span class="op" id="19958">,</span>&nbsp;<span class="ident" id="19960">err</span>&nbsp;<span class="op" id="19964">:=</span>&nbsp;<span class="ident" id="19967"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="19970">.</span><span class="ident" id="19971">Read</span><span class="op" id="19975">(</span><span class="ident" id="19976"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="19977">[</span><span class="num" id="19978">0</span><span class="op" id="19979">:</span><span class="num" id="19980">3</span><span class="op" id="19981">]</span><span class="op" id="19982">)</span><span class="op" id="19983">;</span>&nbsp;<span class="builtintype" id="19985">string</span><span class="op" id="19991">(</span><span class="ident" id="19992"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="19993">[</span><span class="num" id="19994">0</span><span class="op" id="19995">:</span><span class="num" id="19996">3</span><span class="op" id="19997">]</span><span class="op" id="19998">)</span>&nbsp;<span class="op" id="20000">!=</span>&nbsp;<span class="string" id="20003">&#34;abc&#34;</span>&nbsp;<span class="op" id="20009">||</span>&nbsp;<span class="ident" id="20012"><a href="/bufio/bufio_test.go.html#19960">err</a></span>&nbsp;<span class="op" id="20016">!=</span>&nbsp;<span class="ident" id="20019">nil</span>&nbsp;<span class="op" id="20023">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="20027"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="20028">.</span><span class="ident" id="20029">Fatalf</span><span class="op" id="20035">(</span><span class="string" id="20036">&#34;want&nbsp;%q&nbsp;got&nbsp;%q,&nbsp;err=%v&#34;</span><span class="op" id="20060">,</span>&nbsp;<span class="string" id="20062">&#34;abc&#34;</span><span class="op" id="20067">,</span>&nbsp;<span class="builtintype" id="20069">string</span><span class="op" id="20075">(</span><span class="ident" id="20076"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="20077">[</span><span class="num" id="20078">0</span><span class="op" id="20079">:</span><span class="num" id="20080">3</span><span class="op" id="20081">]</span><span class="op" id="20082">)</span><span class="op" id="20083">,</span>&nbsp;<span class="ident" id="20085"><a href="/bufio/bufio_test.go.html#19960">err</a></span><span class="op" id="20088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="20091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="20094">if</span>&nbsp;<span class="ident" id="20097">s</span><span class="op" id="20098">,</span>&nbsp;<span class="ident" id="20100">err</span>&nbsp;<span class="op" id="20104">:=</span>&nbsp;<span class="ident" id="20107"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="20110">.</span><span class="ident" id="20111">Peek</span><span class="op" id="20115">(</span><span class="num" id="20116">1</span><span class="op" id="20117">)</span><span class="op" id="20118">;</span>&nbsp;<span class="builtintype" id="20120">string</span><span class="op" id="20126">(</span><span class="ident" id="20127"><a href="/bufio/bufio_test.go.html#20097">s</a></span><span class="op" id="20128">)</span>&nbsp;<span class="op" id="20130">!=</span>&nbsp;<span class="string" id="20133">&#34;d&#34;</span>&nbsp;<span class="op" id="20137">||</span>&nbsp;<span class="ident" id="20140"><a href="/bufio/bufio_test.go.html#20100">err</a></span>&nbsp;<span class="op" id="20144">!=</span>&nbsp;<span class="ident" id="20147">nil</span>&nbsp;<span class="op" id="20151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="20155"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="20156">.</span><span class="ident" id="20157">Fatalf</span><span class="op" id="20163">(</span><span class="string" id="20164">&#34;want&nbsp;%q&nbsp;got&nbsp;%q,&nbsp;err=%v&#34;</span><span class="op" id="20188">,</span>&nbsp;<span class="string" id="20190">&#34;d&#34;</span><span class="op" id="20193">,</span>&nbsp;<span class="builtintype" id="20195">string</span><span class="op" id="20201">(</span><span class="ident" id="20202"><a href="/bufio/bufio_test.go.html#20097">s</a></span><span class="op" id="20203">)</span><span class="op" id="20204">,</span>&nbsp;<span class="ident" id="20206"><a href="/bufio/bufio_test.go.html#20100">err</a></span><span class="op" id="20209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="20212">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="20215">if</span>&nbsp;<span class="ident" id="20218">s</span><span class="op" id="20219">,</span>&nbsp;<span class="ident" id="20221">err</span>&nbsp;<span class="op" id="20225">:=</span>&nbsp;<span class="ident" id="20228"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="20231">.</span><span class="ident" id="20232">Peek</span><span class="op" id="20236">(</span><span class="num" id="20237">2</span><span class="op" id="20238">)</span><span class="op" id="20239">;</span>&nbsp;<span class="builtintype" id="20241">string</span><span class="op" id="20247">(</span><span class="ident" id="20248"><a href="/bufio/bufio_test.go.html#20218">s</a></span><span class="op" id="20249">)</span>&nbsp;<span class="op" id="20251">!=</span>&nbsp;<span class="string" id="20254">&#34;de&#34;</span>&nbsp;<span class="op" id="20259">||</span>&nbsp;<span class="ident" id="20262"><a href="/bufio/bufio_test.go.html#20221">err</a></span>&nbsp;<span class="op" id="20266">!=</span>&nbsp;<span class="ident" id="20269">nil</span>&nbsp;<span class="op" id="20273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="20277"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="20278">.</span><span class="ident" id="20279">Fatalf</span><span class="op" id="20285">(</span><span class="string" id="20286">&#34;want&nbsp;%q&nbsp;got&nbsp;%q,&nbsp;err=%v&#34;</span><span class="op" id="20310">,</span>&nbsp;<span class="string" id="20312">&#34;de&#34;</span><span class="op" id="20316">,</span>&nbsp;<span class="builtintype" id="20318">string</span><span class="op" id="20324">(</span><span class="ident" id="20325"><a href="/bufio/bufio_test.go.html#20218">s</a></span><span class="op" id="20326">)</span><span class="op" id="20327">,</span>&nbsp;<span class="ident" id="20329"><a href="/bufio/bufio_test.go.html#20221">err</a></span><span class="op" id="20332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="20335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="20338">if</span>&nbsp;<span class="ident" id="20341">_</span><span class="op" id="20342">,</span>&nbsp;<span class="ident" id="20344">err</span>&nbsp;<span class="op" id="20348">:=</span>&nbsp;<span class="ident" id="20351"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="20354">.</span><span class="ident" id="20355">Read</span><span class="op" id="20359">(</span><span class="ident" id="20360"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="20361">[</span><span class="num" id="20362">0</span><span class="op" id="20363">:</span><span class="num" id="20364">3</span><span class="op" id="20365">]</span><span class="op" id="20366">)</span><span class="op" id="20367">;</span>&nbsp;<span class="builtintype" id="20369">string</span><span class="op" id="20375">(</span><span class="ident" id="20376"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="20377">[</span><span class="num" id="20378">0</span><span class="op" id="20379">:</span><span class="num" id="20380">3</span><span class="op" id="20381">]</span><span class="op" id="20382">)</span>&nbsp;<span class="op" id="20384">!=</span>&nbsp;<span class="string" id="20387">&#34;def&#34;</span>&nbsp;<span class="op" id="20393">||</span>&nbsp;<span class="ident" id="20396"><a href="/bufio/bufio_test.go.html#20344">err</a></span>&nbsp;<span class="op" id="20400">!=</span>&nbsp;<span class="ident" id="20403">nil</span>&nbsp;<span class="op" id="20407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="20411"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="20412">.</span><span class="ident" id="20413">Fatalf</span><span class="op" id="20419">(</span><span class="string" id="20420">&#34;want&nbsp;%q&nbsp;got&nbsp;%q,&nbsp;err=%v&#34;</span><span class="op" id="20444">,</span>&nbsp;<span class="string" id="20446">&#34;def&#34;</span><span class="op" id="20451">,</span>&nbsp;<span class="builtintype" id="20453">string</span><span class="op" id="20459">(</span><span class="ident" id="20460"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="20461">[</span><span class="num" id="20462">0</span><span class="op" id="20463">:</span><span class="num" id="20464">3</span><span class="op" id="20465">]</span><span class="op" id="20466">)</span><span class="op" id="20467">,</span>&nbsp;<span class="ident" id="20469"><a href="/bufio/bufio_test.go.html#20344">err</a></span><span class="op" id="20472">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="20475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="20478">if</span>&nbsp;<span class="ident" id="20481">s</span><span class="op" id="20482">,</span>&nbsp;<span class="ident" id="20484">err</span>&nbsp;<span class="op" id="20488">:=</span>&nbsp;<span class="ident" id="20491"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="20494">.</span><span class="ident" id="20495">Peek</span><span class="op" id="20499">(</span><span class="num" id="20500">4</span><span class="op" id="20501">)</span><span class="op" id="20502">;</span>&nbsp;<span class="builtintype" id="20504">string</span><span class="op" id="20510">(</span><span class="ident" id="20511"><a href="/bufio/bufio_test.go.html#20481">s</a></span><span class="op" id="20512">)</span>&nbsp;<span class="op" id="20514">!=</span>&nbsp;<span class="string" id="20517">&#34;ghij&#34;</span>&nbsp;<span class="op" id="20524">||</span>&nbsp;<span class="ident" id="20527"><a href="/bufio/bufio_test.go.html#20484">err</a></span>&nbsp;<span class="op" id="20531">!=</span>&nbsp;<span class="ident" id="20534">nil</span>&nbsp;<span class="op" id="20538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="20542"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="20543">.</span><span class="ident" id="20544">Fatalf</span><span class="op" id="20550">(</span><span class="string" id="20551">&#34;want&nbsp;%q&nbsp;got&nbsp;%q,&nbsp;err=%v&#34;</span><span class="op" id="20575">,</span>&nbsp;<span class="string" id="20577">&#34;ghij&#34;</span><span class="op" id="20583">,</span>&nbsp;<span class="builtintype" id="20585">string</span><span class="op" id="20591">(</span><span class="ident" id="20592"><a href="/bufio/bufio_test.go.html#20481">s</a></span><span class="op" id="20593">)</span><span class="op" id="20594">,</span>&nbsp;<span class="ident" id="20596"><a href="/bufio/bufio_test.go.html#20484">err</a></span><span class="op" id="20599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="20602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="20605">if</span>&nbsp;<span class="ident" id="20608">_</span><span class="op" id="20609">,</span>&nbsp;<span class="ident" id="20611">err</span>&nbsp;<span class="op" id="20615">:=</span>&nbsp;<span class="ident" id="20618"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="20621">.</span><span class="ident" id="20622">Read</span><span class="op" id="20626">(</span><span class="ident" id="20627"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="20628">[</span><span class="num" id="20629">0</span><span class="op" id="20630">:</span><span class="op" id="20631">]</span><span class="op" id="20632">)</span><span class="op" id="20633">;</span>&nbsp;<span class="builtintype" id="20635">string</span><span class="op" id="20641">(</span><span class="ident" id="20642"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="20643">[</span><span class="num" id="20644">0</span><span class="op" id="20645">:</span><span class="op" id="20646">]</span><span class="op" id="20647">)</span>&nbsp;<span class="op" id="20649">!=</span>&nbsp;<span class="string" id="20652">&#34;ghijklmnop&#34;</span>&nbsp;<span class="op" id="20665">||</span>&nbsp;<span class="ident" id="20668"><a href="/bufio/bufio_test.go.html#20611">err</a></span>&nbsp;<span class="op" id="20672">!=</span>&nbsp;<span class="ident" id="20675">nil</span>&nbsp;<span class="op" id="20679">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="20683"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="20684">.</span><span class="ident" id="20685">Fatalf</span><span class="op" id="20691">(</span><span class="string" id="20692">&#34;want&nbsp;%q&nbsp;got&nbsp;%q,&nbsp;err=%v&#34;</span><span class="op" id="20716">,</span>&nbsp;<span class="string" id="20718">&#34;ghijklmnop&#34;</span><span class="op" id="20730">,</span>&nbsp;<span class="builtintype" id="20732">string</span><span class="op" id="20738">(</span><span class="ident" id="20739"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="20740">[</span><span class="num" id="20741">0</span><span class="op" id="20742">:</span><span class="ident" id="20743"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="20760">]</span><span class="op" id="20761">)</span><span class="op" id="20762">,</span>&nbsp;<span class="ident" id="20764"><a href="/bufio/bufio_test.go.html#20611">err</a></span><span class="op" id="20767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="20770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="20773">if</span>&nbsp;<span class="ident" id="20776">s</span><span class="op" id="20777">,</span>&nbsp;<span class="ident" id="20779">err</span>&nbsp;<span class="op" id="20783">:=</span>&nbsp;<span class="ident" id="20786"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="20789">.</span><span class="ident" id="20790">Peek</span><span class="op" id="20794">(</span><span class="num" id="20795">0</span><span class="op" id="20796">)</span><span class="op" id="20797">;</span>&nbsp;<span class="builtintype" id="20799">string</span><span class="op" id="20805">(</span><span class="ident" id="20806"><a href="/bufio/bufio_test.go.html#20776">s</a></span><span class="op" id="20807">)</span>&nbsp;<span class="op" id="20809">!=</span>&nbsp;<span class="string" id="20812">&#34;&#34;</span>&nbsp;<span class="op" id="20815">||</span>&nbsp;<span class="ident" id="20818"><a href="/bufio/bufio_test.go.html#20779">err</a></span>&nbsp;<span class="op" id="20822">!=</span>&nbsp;<span class="ident" id="20825">nil</span>&nbsp;<span class="op" id="20829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="20833"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="20834">.</span><span class="ident" id="20835">Fatalf</span><span class="op" id="20841">(</span><span class="string" id="20842">&#34;want&nbsp;%q&nbsp;got&nbsp;%q,&nbsp;err=%v&#34;</span><span class="op" id="20866">,</span>&nbsp;<span class="string" id="20868">&#34;&#34;</span><span class="op" id="20870">,</span>&nbsp;<span class="builtintype" id="20872">string</span><span class="op" id="20878">(</span><span class="ident" id="20879"><a href="/bufio/bufio_test.go.html#20776">s</a></span><span class="op" id="20880">)</span><span class="op" id="20881">,</span>&nbsp;<span class="ident" id="20883"><a href="/bufio/bufio_test.go.html#20779">err</a></span><span class="op" id="20886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="20889">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="20892">if</span>&nbsp;<span class="ident" id="20895">_</span><span class="op" id="20896">,</span>&nbsp;<span class="ident" id="20898">err</span>&nbsp;<span class="op" id="20902">:=</span>&nbsp;<span class="ident" id="20905"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="20908">.</span><span class="ident" id="20909">Peek</span><span class="op" id="20913">(</span><span class="num" id="20914">1</span><span class="op" id="20915">)</span><span class="op" id="20916">;</span>&nbsp;<span class="ident" id="20918"><a href="/bufio/bufio_test.go.html#20898">err</a></span>&nbsp;<span class="op" id="20922">!=</span>&nbsp;<span class="ident" id="20925"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="20927">.</span><span class="ident" id="20928">EOF</span>&nbsp;<span class="op" id="20932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="20936"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="20937">.</span><span class="ident" id="20938">Fatalf</span><span class="op" id="20944">(</span><span class="string" id="20945">&#34;want&nbsp;EOF&nbsp;got&nbsp;%v&#34;</span><span class="op" id="20962">,</span>&nbsp;<span class="ident" id="20964"><a href="/bufio/bufio_test.go.html#20898">err</a></span><span class="op" id="20967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="20970">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="20974">//&nbsp;Test&nbsp;for&nbsp;issue&nbsp;3022,&nbsp;not&nbsp;exposing&nbsp;a&nbsp;reader&#39;s&nbsp;error&nbsp;on&nbsp;a&nbsp;successful&nbsp;Peek.</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="21051"><a href="/bufio/bufio_test.go.html#19425">buf</a></span>&nbsp;<span class="op" id="21055">=</span>&nbsp;<span class="ident" id="21057"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="21070">(</span><span class="ident" id="21071"><a href="/bufio/bufio_test.go.html#21689">dataAndEOFReader</a></span><span class="op" id="21087">(</span><span class="string" id="21088">&#34;abcd&#34;</span><span class="op" id="21094">)</span><span class="op" id="21095">,</span>&nbsp;<span class="num" id="21097">32</span><span class="op" id="21099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="21102">if</span>&nbsp;<span class="ident" id="21105">s</span><span class="op" id="21106">,</span>&nbsp;<span class="ident" id="21108">err</span>&nbsp;<span class="op" id="21112">:=</span>&nbsp;<span class="ident" id="21115"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="21118">.</span><span class="ident" id="21119">Peek</span><span class="op" id="21123">(</span><span class="num" id="21124">2</span><span class="op" id="21125">)</span><span class="op" id="21126">;</span>&nbsp;<span class="builtintype" id="21128">string</span><span class="op" id="21134">(</span><span class="ident" id="21135"><a href="/bufio/bufio_test.go.html#21105">s</a></span><span class="op" id="21136">)</span>&nbsp;<span class="op" id="21138">!=</span>&nbsp;<span class="string" id="21141">&#34;ab&#34;</span>&nbsp;<span class="op" id="21146">||</span>&nbsp;<span class="ident" id="21149"><a href="/bufio/bufio_test.go.html#21108">err</a></span>&nbsp;<span class="op" id="21153">!=</span>&nbsp;<span class="ident" id="21156">nil</span>&nbsp;<span class="op" id="21160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="21164"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="21165">.</span><span class="ident" id="21166">Errorf</span><span class="op" id="21172">(</span><span class="string" id="21173">`Peek(2)&nbsp;on&nbsp;&#34;abcd&#34;,&nbsp;EOF&nbsp;=&nbsp;%q,&nbsp;%v;&nbsp;want&nbsp;&#34;ab&#34;,&nbsp;nil`</span><span class="op" id="21222">,</span>&nbsp;<span class="builtintype" id="21224">string</span><span class="op" id="21230">(</span><span class="ident" id="21231"><a href="/bufio/bufio_test.go.html#21105">s</a></span><span class="op" id="21232">)</span><span class="op" id="21233">,</span>&nbsp;<span class="ident" id="21235"><a href="/bufio/bufio_test.go.html#21108">err</a></span><span class="op" id="21238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="21241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="21244">if</span>&nbsp;<span class="ident" id="21247">s</span><span class="op" id="21248">,</span>&nbsp;<span class="ident" id="21250">err</span>&nbsp;<span class="op" id="21254">:=</span>&nbsp;<span class="ident" id="21257"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="21260">.</span><span class="ident" id="21261">Peek</span><span class="op" id="21265">(</span><span class="num" id="21266">4</span><span class="op" id="21267">)</span><span class="op" id="21268">;</span>&nbsp;<span class="builtintype" id="21270">string</span><span class="op" id="21276">(</span><span class="ident" id="21277"><a href="/bufio/bufio_test.go.html#21247">s</a></span><span class="op" id="21278">)</span>&nbsp;<span class="op" id="21280">!=</span>&nbsp;<span class="string" id="21283">&#34;abcd&#34;</span>&nbsp;<span class="op" id="21290">||</span>&nbsp;<span class="ident" id="21293"><a href="/bufio/bufio_test.go.html#21250">err</a></span>&nbsp;<span class="op" id="21297">!=</span>&nbsp;<span class="ident" id="21300">nil</span>&nbsp;<span class="op" id="21304">{</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="21308"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="21309">.</span><span class="ident" id="21310">Errorf</span><span class="op" id="21316">(</span><span class="string" id="21317">`Peek(4)&nbsp;on&nbsp;&#34;abcd&#34;,&nbsp;EOF&nbsp;=&nbsp;%q,&nbsp;%v;&nbsp;want&nbsp;&#34;abcd&#34;,&nbsp;nil`</span><span class="op" id="21368">,</span>&nbsp;<span class="builtintype" id="21370">string</span><span class="op" id="21376">(</span><span class="ident" id="21377"><a href="/bufio/bufio_test.go.html#21247">s</a></span><span class="op" id="21378">)</span><span class="op" id="21379">,</span>&nbsp;<span class="ident" id="21381"><a href="/bufio/bufio_test.go.html#21250">err</a></span><span class="op" id="21384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="21387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="21390">if</span>&nbsp;<span class="ident" id="21393">n</span><span class="op" id="21394">,</span>&nbsp;<span class="ident" id="21396">err</span>&nbsp;<span class="op" id="21400">:=</span>&nbsp;<span class="ident" id="21403"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="21406">.</span><span class="ident" id="21407">Read</span><span class="op" id="21411">(</span><span class="ident" id="21412"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="21413">[</span><span class="num" id="21414">0</span><span class="op" id="21415">:</span><span class="num" id="21416">5</span><span class="op" id="21417">]</span><span class="op" id="21418">)</span><span class="op" id="21419">;</span>&nbsp;<span class="builtintype" id="21421">string</span><span class="op" id="21427">(</span><span class="ident" id="21428"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="21429">[</span><span class="num" id="21430">0</span><span class="op" id="21431">:</span><span class="ident" id="21432"><a href="/bufio/bufio_test.go.html#21393">n</a></span><span class="op" id="21433">]</span><span class="op" id="21434">)</span>&nbsp;<span class="op" id="21436">!=</span>&nbsp;<span class="string" id="21439">&#34;abcd&#34;</span>&nbsp;<span class="op" id="21446">||</span>&nbsp;<span class="ident" id="21449"><a href="/bufio/bufio_test.go.html#21396">err</a></span>&nbsp;<span class="op" id="21453">!=</span>&nbsp;<span class="ident" id="21456">nil</span>&nbsp;<span class="op" id="21460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="21464"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="21465">.</span><span class="ident" id="21466">Fatalf</span><span class="op" id="21472">(</span><span class="string" id="21473">&#34;Read&nbsp;after&nbsp;peek&nbsp;=&nbsp;%q,&nbsp;%v;&nbsp;want&nbsp;abcd,&nbsp;EOF&#34;</span><span class="op" id="21515">,</span>&nbsp;<span class="ident" id="21517"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="21518">[</span><span class="num" id="21519">0</span><span class="op" id="21520">:</span><span class="ident" id="21521"><a href="/bufio/bufio_test.go.html#21393">n</a></span><span class="op" id="21522">]</span><span class="op" id="21523">,</span>&nbsp;<span class="ident" id="21525"><a href="/bufio/bufio_test.go.html#21396">err</a></span><span class="op" id="21528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="21531">}</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="21534">if</span>&nbsp;<span class="ident" id="21537">n</span><span class="op" id="21538">,</span>&nbsp;<span class="ident" id="21540">err</span>&nbsp;<span class="op" id="21544">:=</span>&nbsp;<span class="ident" id="21547"><a href="/bufio/bufio_test.go.html#19425">buf</a></span><span class="op" id="21550">.</span><span class="ident" id="21551">Read</span><span class="op" id="21555">(</span><span class="ident" id="21556"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="21557">[</span><span class="num" id="21558">0</span><span class="op" id="21559">:</span><span class="num" id="21560">1</span><span class="op" id="21561">]</span><span class="op" id="21562">)</span><span class="op" id="21563">;</span>&nbsp;<span class="builtintype" id="21565">string</span><span class="op" id="21571">(</span><span class="ident" id="21572"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="21573">[</span><span class="num" id="21574">0</span><span class="op" id="21575">:</span><span class="ident" id="21576"><a href="/bufio/bufio_test.go.html#21537">n</a></span><span class="op" id="21577">]</span><span class="op" id="21578">)</span>&nbsp;<span class="op" id="21580">!=</span>&nbsp;<span class="string" id="21583">&#34;&#34;</span>&nbsp;<span class="op" id="21586">||</span>&nbsp;<span class="ident" id="21589"><a href="/bufio/bufio_test.go.html#21540">err</a></span>&nbsp;<span class="op" id="21593">!=</span>&nbsp;<span class="ident" id="21596"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="21598">.</span><span class="ident" id="21599">EOF</span>&nbsp;<span class="op" id="21603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="21607"><a href="/bufio/bufio_test.go.html#19342">t</a></span><span class="op" id="21608">.</span><span class="ident" id="21609">Fatalf</span><span class="op" id="21615">(</span><span class="string" id="21616">`second&nbsp;Read&nbsp;after&nbsp;peek&nbsp;=&nbsp;%q,&nbsp;%v;&nbsp;want&nbsp;&#34;&#34;,&nbsp;EOF`</span><span class="op" id="21663">,</span>&nbsp;<span class="ident" id="21665"><a href="/bufio/bufio_test.go.html#19359">p</a></span><span class="op" id="21666">[</span><span class="num" id="21667">0</span><span class="op" id="21668">:</span><span class="ident" id="21669"><a href="/bufio/bufio_test.go.html#21537">n</a></span><span class="op" id="21670">]</span><span class="op" id="21671">,</span>&nbsp;<span class="ident" id="21673"><a href="/bufio/bufio_test.go.html#21540">err</a></span><span class="op" id="21676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="21679">}</span><br>
<span class="lineno"></span><span class="op" id="21681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">720</span><span class="keyword" id="21684">type</span>&nbsp;<span class="ident" id="21689">dataAndEOFReader</span>&nbsp;<span class="builtintype" id="21706">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="21714">func</span>&nbsp;<span class="op" id="21719">(</span><span class="ident" id="21720">r</span>&nbsp;<span class="ident" id="21722"><a href="/bufio/bufio_test.go.html#21689">dataAndEOFReader</a></span><span class="op" id="21738">)</span>&nbsp;<span class="ident" id="21740">Read</span><span class="op" id="21744">(</span><span class="ident" id="21745">p</span>&nbsp;<span class="op" id="21747">[</span><span class="op" id="21748">]</span><span class="builtintype" id="21749">byte</span><span class="op" id="21753">)</span>&nbsp;<span class="op" id="21755">(</span><span class="builtintype" id="21756">int</span><span class="op" id="21759">,</span>&nbsp;<span class="builtintype" id="21761">error</span><span class="op" id="21766">)</span>&nbsp;<span class="op" id="21768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="21771">return</span>&nbsp;<span class="builtinfunc" id="21778">copy</span><span class="op" id="21782">(</span><span class="ident" id="21783"><a href="/bufio/bufio_test.go.html#21745">p</a></span><span class="op" id="21784">,</span>&nbsp;<span class="ident" id="21786"><a href="/bufio/bufio_test.go.html#21720">r</a></span><span class="op" id="21787">)</span><span class="op" id="21788">,</span>&nbsp;<span class="ident" id="21790"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="21792">.</span><span class="ident" id="21793">EOF</span><br>
<span class="lineno"></span><span class="op" id="21797">}</span><br>
<span class="lineno">725</span><br>
<span class="lineno"></span><span class="keyword" id="21800">func</span>&nbsp;<span class="ident" id="21805">TestPeekThenUnreadRune</span><span class="op" id="21827">(</span><span class="ident" id="21828">t</span>&nbsp;<span class="op" id="21830">*</span><span class="ident" id="21831"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="21838">.</span><span class="ident" id="21839">T</span><span class="op" id="21840">)</span>&nbsp;<span class="op" id="21842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="21845">//&nbsp;This&nbsp;sequence&nbsp;used&nbsp;to&nbsp;cause&nbsp;a&nbsp;crash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="21886">r</span>&nbsp;<span class="op" id="21888">:=</span>&nbsp;<span class="ident" id="21891"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="21900">(</span><span class="ident" id="21901"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="21908">.</span><span class="ident" id="21909">NewReader</span><span class="op" id="21918">(</span><span class="string" id="21919">&#34;x&#34;</span><span class="op" id="21922">)</span><span class="op" id="21923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="21926"><a href="/bufio/bufio_test.go.html#21886">r</a></span><span class="op" id="21927">.</span><span class="ident" id="21928">ReadRune</span><span class="op" id="21936">(</span><span class="op" id="21937">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="21940"><a href="/bufio/bufio_test.go.html#21886">r</a></span><span class="op" id="21941">.</span><span class="ident" id="21942">Peek</span><span class="op" id="21946">(</span><span class="num" id="21947">1</span><span class="op" id="21948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="21951"><a href="/bufio/bufio_test.go.html#21886">r</a></span><span class="op" id="21952">.</span><span class="ident" id="21953">UnreadRune</span><span class="op" id="21963">(</span><span class="op" id="21964">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="21967"><a href="/bufio/bufio_test.go.html#21886">r</a></span><span class="op" id="21968">.</span><span class="ident" id="21969">ReadRune</span><span class="op" id="21977">(</span><span class="op" id="21978">)</span>&nbsp;<span class="comment" id="21980">//&nbsp;Used&nbsp;to&nbsp;panic&nbsp;here</span><br>
<span class="lineno"></span><span class="op" id="22002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">735</span><span class="keyword" id="22005">var</span>&nbsp;<span class="ident" id="22009">testOutput</span>&nbsp;<span class="op" id="22020">=</span>&nbsp;<span class="op" id="22022">[</span><span class="op" id="22023">]</span><span class="builtintype" id="22024">byte</span><span class="op" id="22028">(</span><span class="string" id="22029">&#34;0123456789abcdefghijklmnopqrstuvwxy&#34;</span><span class="op" id="22066">)</span><br>
<span class="lineno"></span><span class="keyword" id="22068">var</span>&nbsp;<span class="ident" id="22072">testInput</span>&nbsp;<span class="op" id="22082">=</span>&nbsp;<span class="op" id="22084">[</span><span class="op" id="22085">]</span><span class="builtintype" id="22086">byte</span><span class="op" id="22090">(</span><span class="string" id="22091">&#34;012\n345\n678\n9ab\ncde\nfgh\nijk\nlmn\nopq\nrst\nuvw\nxy&#34;</span><span class="op" id="22150">)</span><br>
<span class="lineno"></span><span class="keyword" id="22152">var</span>&nbsp;<span class="ident" id="22156">testInputrn</span>&nbsp;<span class="op" id="22168">=</span>&nbsp;<span class="op" id="22170">[</span><span class="op" id="22171">]</span><span class="builtintype" id="22172">byte</span><span class="op" id="22176">(</span><span class="string" id="22177">&#34;012\r\n345\r\n678\r\n9ab\r\ncde\r\nfgh\r\nijk\r\nlmn\r\nopq\r\nrst\r\nuvw\r\nxy\r\n\n\r\n&#34;</span><span class="op" id="22268">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="22271">//&nbsp;TestReader&nbsp;wraps&nbsp;a&nbsp;[]byte&nbsp;and&nbsp;returns&nbsp;reads&nbsp;of&nbsp;a&nbsp;specific&nbsp;length.</span><br>
<span class="lineno">740</span><span class="keyword" id="22340">type</span>&nbsp;<span class="ident" id="22345">testReader</span>&nbsp;<span class="keyword" id="22356">struct</span>&nbsp;<span class="op" id="22363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22366">data</span>&nbsp;&nbsp;&nbsp;<span class="op" id="22373">[</span><span class="op" id="22374">]</span><span class="builtintype" id="22375">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22381">stride</span>&nbsp;<span class="builtintype" id="22388">int</span><br>
<span class="lineno"></span><span class="op" id="22392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span><span class="keyword" id="22395">func</span>&nbsp;<span class="op" id="22400">(</span><span class="ident" id="22401">t</span>&nbsp;<span class="op" id="22403">*</span><span class="ident" id="22404"><a href="/bufio/bufio_test.go.html#22345">testReader</a></span><span class="op" id="22414">)</span>&nbsp;<span class="ident" id="22416">Read</span><span class="op" id="22420">(</span><span class="ident" id="22421">buf</span>&nbsp;<span class="op" id="22425">[</span><span class="op" id="22426">]</span><span class="builtintype" id="22427">byte</span><span class="op" id="22431">)</span>&nbsp;<span class="op" id="22433">(</span><span class="ident" id="22434">n</span>&nbsp;<span class="builtintype" id="22436">int</span><span class="op" id="22439">,</span>&nbsp;<span class="ident" id="22441">err</span>&nbsp;<span class="builtintype" id="22445">error</span><span class="op" id="22450">)</span>&nbsp;<span class="op" id="22452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22455"><a href="/bufio/bufio_test.go.html#22434">n</a></span>&nbsp;<span class="op" id="22457">=</span>&nbsp;<span class="ident" id="22459"><a href="/bufio/bufio_test.go.html#22401">t</a></span><span class="op" id="22460">.</span><span class="ident" id="22461">stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="22469">if</span>&nbsp;<span class="ident" id="22472"><a href="/bufio/bufio_test.go.html#22434">n</a></span>&nbsp;<span class="op" id="22474">&gt;</span>&nbsp;<span class="builtinfunc" id="22476">len</span><span class="op" id="22479">(</span><span class="ident" id="22480"><a href="/bufio/bufio_test.go.html#22401">t</a></span><span class="op" id="22481">.</span><span class="ident" id="22482">data</span><span class="op" id="22486">)</span>&nbsp;<span class="op" id="22488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22492"><a href="/bufio/bufio_test.go.html#22434">n</a></span>&nbsp;<span class="op" id="22494">=</span>&nbsp;<span class="builtinfunc" id="22496">len</span><span class="op" id="22499">(</span><span class="ident" id="22500"><a href="/bufio/bufio_test.go.html#22401">t</a></span><span class="op" id="22501">.</span><span class="ident" id="22502">data</span><span class="op" id="22506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="22509">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="22512">if</span>&nbsp;<span class="ident" id="22515"><a href="/bufio/bufio_test.go.html#22434">n</a></span>&nbsp;<span class="op" id="22517">&gt;</span>&nbsp;<span class="builtinfunc" id="22519">len</span><span class="op" id="22522">(</span><span class="ident" id="22523"><a href="/bufio/bufio_test.go.html#22421">buf</a></span><span class="op" id="22526">)</span>&nbsp;<span class="op" id="22528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22532"><a href="/bufio/bufio_test.go.html#22434">n</a></span>&nbsp;<span class="op" id="22534">=</span>&nbsp;<span class="builtinfunc" id="22536">len</span><span class="op" id="22539">(</span><span class="ident" id="22540"><a href="/bufio/bufio_test.go.html#22421">buf</a></span><span class="op" id="22543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="22546">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="22549">copy</span><span class="op" id="22553">(</span><span class="ident" id="22554"><a href="/bufio/bufio_test.go.html#22421">buf</a></span><span class="op" id="22557">,</span>&nbsp;<span class="ident" id="22559"><a href="/bufio/bufio_test.go.html#22401">t</a></span><span class="op" id="22560">.</span><span class="ident" id="22561">data</span><span class="op" id="22565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22568"><a href="/bufio/bufio_test.go.html#22401">t</a></span><span class="op" id="22569">.</span><span class="ident" id="22570">data</span>&nbsp;<span class="op" id="22575">=</span>&nbsp;<span class="ident" id="22577"><a href="/bufio/bufio_test.go.html#22401">t</a></span><span class="op" id="22578">.</span><span class="ident" id="22579">data</span><span class="op" id="22583">[</span><span class="ident" id="22584"><a href="/bufio/bufio_test.go.html#22434">n</a></span><span class="op" id="22585">:</span><span class="op" id="22586">]</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="22589">if</span>&nbsp;<span class="builtinfunc" id="22592">len</span><span class="op" id="22595">(</span><span class="ident" id="22596"><a href="/bufio/bufio_test.go.html#22401">t</a></span><span class="op" id="22597">.</span><span class="ident" id="22598">data</span><span class="op" id="22602">)</span>&nbsp;<span class="op" id="22604">==</span>&nbsp;<span class="num" id="22607">0</span>&nbsp;<span class="op" id="22609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22613"><a href="/bufio/bufio_test.go.html#22441">err</a></span>&nbsp;<span class="op" id="22617">=</span>&nbsp;<span class="ident" id="22619"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="22621">.</span><span class="ident" id="22622">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="22627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="22630">return</span><br>
<span class="lineno"></span><span class="op" id="22637">}</span><br>
<span class="lineno">760</span><br>
<span class="lineno"></span><span class="keyword" id="22640">func</span>&nbsp;<span class="ident" id="22645">testReadLine</span><span class="op" id="22657">(</span><span class="ident" id="22658">t</span>&nbsp;<span class="op" id="22660">*</span><span class="ident" id="22661"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="22668">.</span><span class="ident" id="22669">T</span><span class="op" id="22670">,</span>&nbsp;<span class="ident" id="22672">input</span>&nbsp;<span class="op" id="22678">[</span><span class="op" id="22679">]</span><span class="builtintype" id="22680">byte</span><span class="op" id="22684">)</span>&nbsp;<span class="op" id="22686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="22689">//for&nbsp;stride&nbsp;:=&nbsp;1;&nbsp;stride&nbsp;&lt;&nbsp;len(input);&nbsp;stride++&nbsp;{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="22741">for</span>&nbsp;<span class="ident" id="22745">stride</span>&nbsp;<span class="op" id="22752">:=</span>&nbsp;<span class="num" id="22755">1</span><span class="op" id="22756">;</span>&nbsp;<span class="ident" id="22758"><a href="/bufio/bufio_test.go.html#22745">stride</a></span>&nbsp;<span class="op" id="22765">&lt;</span>&nbsp;<span class="num" id="22767">2</span><span class="op" id="22768">;</span>&nbsp;<span class="ident" id="22770"><a href="/bufio/bufio_test.go.html#22745">stride</a></span><span class="op" id="22776">++</span>&nbsp;<span class="op" id="22779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22783">done</span>&nbsp;<span class="op" id="22788">:=</span>&nbsp;<span class="num" id="22791">0</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22795">reader</span>&nbsp;<span class="op" id="22802">:=</span>&nbsp;<span class="ident" id="22805"><a href="/bufio/bufio_test.go.html#22345">testReader</a></span><span class="op" id="22815">{</span><span class="ident" id="22816"><a href="/bufio/bufio_test.go.html#22672">input</a></span><span class="op" id="22821">,</span>&nbsp;<span class="ident" id="22823"><a href="/bufio/bufio_test.go.html#22745">stride</a></span><span class="op" id="22829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22833">l</span>&nbsp;<span class="op" id="22835">:=</span>&nbsp;<span class="ident" id="22838"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="22851">(</span><span class="op" id="22852">&amp;</span><span class="ident" id="22853"><a href="/bufio/bufio_test.go.html#22795">reader</a></span><span class="op" id="22859">,</span>&nbsp;<span class="builtinfunc" id="22861">len</span><span class="op" id="22864">(</span><span class="ident" id="22865"><a href="/bufio/bufio_test.go.html#22672">input</a></span><span class="op" id="22870">)</span><span class="op" id="22871">+</span><span class="num" id="22872">1</span><span class="op" id="22873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="22877">for</span>&nbsp;<span class="op" id="22881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22886">line</span><span class="op" id="22890">,</span>&nbsp;<span class="ident" id="22892">isPrefix</span><span class="op" id="22900">,</span>&nbsp;<span class="ident" id="22902">err</span>&nbsp;<span class="op" id="22906">:=</span>&nbsp;<span class="ident" id="22909"><a href="/bufio/bufio_test.go.html#22833">l</a></span><span class="op" id="22910">.</span><span class="ident" id="22911">ReadLine</span><span class="op" id="22919">(</span><span class="op" id="22920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="22925">if</span>&nbsp;<span class="builtinfunc" id="22928">len</span><span class="op" id="22931">(</span><span class="ident" id="22932"><a href="/bufio/bufio_test.go.html#22886">line</a></span><span class="op" id="22936">)</span>&nbsp;<span class="op" id="22938">&gt;</span>&nbsp;<span class="num" id="22940">0</span>&nbsp;<span class="op" id="22942">&amp;&amp;</span>&nbsp;<span class="ident" id="22945"><a href="/bufio/bufio_test.go.html#22902">err</a></span>&nbsp;<span class="op" id="22949">!=</span>&nbsp;<span class="ident" id="22952">nil</span>&nbsp;<span class="op" id="22956">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="22962"><a href="/bufio/bufio_test.go.html#22658">t</a></span><span class="op" id="22963">.</span><span class="ident" id="22964">Errorf</span><span class="op" id="22970">(</span><span class="string" id="22971">&#34;ReadLine&nbsp;returned&nbsp;both&nbsp;data&nbsp;and&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="23014">,</span>&nbsp;<span class="ident" id="23016"><a href="/bufio/bufio_test.go.html#22902">err</a></span><span class="op" id="23019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="23024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="23029">if</span>&nbsp;<span class="ident" id="23032"><a href="/bufio/bufio_test.go.html#22892">isPrefix</a></span>&nbsp;<span class="op" id="23041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23047"><a href="/bufio/bufio_test.go.html#22658">t</a></span><span class="op" id="23048">.</span><span class="ident" id="23049">Errorf</span><span class="op" id="23055">(</span><span class="string" id="23056">&#34;ReadLine&nbsp;returned&nbsp;prefix&#34;</span><span class="op" id="23082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="23087">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="23092">if</span>&nbsp;<span class="ident" id="23095"><a href="/bufio/bufio_test.go.html#22902">err</a></span>&nbsp;<span class="op" id="23099">!=</span>&nbsp;<span class="ident" id="23102">nil</span>&nbsp;<span class="op" id="23106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="23112">if</span>&nbsp;<span class="ident" id="23115"><a href="/bufio/bufio_test.go.html#22902">err</a></span>&nbsp;<span class="op" id="23119">!=</span>&nbsp;<span class="ident" id="23122"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="23124">.</span><span class="ident" id="23125">EOF</span>&nbsp;<span class="op" id="23129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23136"><a href="/bufio/bufio_test.go.html#22658">t</a></span><span class="op" id="23137">.</span><span class="ident" id="23138">Fatalf</span><span class="op" id="23144">(</span><span class="string" id="23145">&#34;Got&nbsp;unknown&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="23168">,</span>&nbsp;<span class="ident" id="23170"><a href="/bufio/bufio_test.go.html#22902">err</a></span><span class="op" id="23173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="23179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="23185">break</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="23194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="23199">if</span>&nbsp;<span class="ident" id="23202">want</span>&nbsp;<span class="op" id="23207">:=</span>&nbsp;<span class="ident" id="23210"><a href="/bufio/bufio_test.go.html#22009">testOutput</a></span><span class="op" id="23220">[</span><span class="ident" id="23221"><a href="/bufio/bufio_test.go.html#22783">done</a></span>&nbsp;<span class="op" id="23226">:</span>&nbsp;<span class="ident" id="23228"><a href="/bufio/bufio_test.go.html#22783">done</a></span><span class="op" id="23232">+</span><span class="builtinfunc" id="23233">len</span><span class="op" id="23236">(</span><span class="ident" id="23237"><a href="/bufio/bufio_test.go.html#22886">line</a></span><span class="op" id="23241">)</span><span class="op" id="23242">]</span><span class="op" id="23243">;</span>&nbsp;<span class="op" id="23245">!</span><span class="ident" id="23246"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="23251">.</span><span class="ident" id="23252">Equal</span><span class="op" id="23257">(</span><span class="ident" id="23258"><a href="/bufio/bufio_test.go.html#23202">want</a></span><span class="op" id="23262">,</span>&nbsp;<span class="ident" id="23264"><a href="/bufio/bufio_test.go.html#22886">line</a></span><span class="op" id="23268">)</span>&nbsp;<span class="op" id="23270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23276"><a href="/bufio/bufio_test.go.html#22658">t</a></span><span class="op" id="23277">.</span><span class="ident" id="23278">Errorf</span><span class="op" id="23284">(</span><span class="string" id="23285">&#34;Bad&nbsp;line&nbsp;at&nbsp;stride&nbsp;%d:&nbsp;want:&nbsp;%x&nbsp;got:&nbsp;%x&#34;</span><span class="op" id="23326">,</span>&nbsp;<span class="ident" id="23328"><a href="/bufio/bufio_test.go.html#22745">stride</a></span><span class="op" id="23334">,</span>&nbsp;<span class="ident" id="23336"><a href="/bufio/bufio_test.go.html#23202">want</a></span><span class="op" id="23340">,</span>&nbsp;<span class="ident" id="23342"><a href="/bufio/bufio_test.go.html#22886">line</a></span><span class="op" id="23346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="23351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23356"><a href="/bufio/bufio_test.go.html#22783">done</a></span>&nbsp;<span class="op" id="23361">+=</span>&nbsp;<span class="builtinfunc" id="23364">len</span><span class="op" id="23367">(</span><span class="ident" id="23368"><a href="/bufio/bufio_test.go.html#22886">line</a></span><span class="op" id="23372">)</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="23376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="23380">if</span>&nbsp;<span class="ident" id="23383"><a href="/bufio/bufio_test.go.html#22783">done</a></span>&nbsp;<span class="op" id="23388">!=</span>&nbsp;<span class="builtinfunc" id="23391">len</span><span class="op" id="23394">(</span><span class="ident" id="23395"><a href="/bufio/bufio_test.go.html#22009">testOutput</a></span><span class="op" id="23405">)</span>&nbsp;<span class="op" id="23407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23412"><a href="/bufio/bufio_test.go.html#22658">t</a></span><span class="op" id="23413">.</span><span class="ident" id="23414">Errorf</span><span class="op" id="23420">(</span><span class="string" id="23421">&#34;ReadLine&nbsp;didn&#39;t&nbsp;return&nbsp;everything:&nbsp;got:&nbsp;%d,&nbsp;want:&nbsp;%d&nbsp;(stride:&nbsp;%d)&#34;</span><span class="op" id="23488">,</span>&nbsp;<span class="ident" id="23490"><a href="/bufio/bufio_test.go.html#22783">done</a></span><span class="op" id="23494">,</span>&nbsp;<span class="builtinfunc" id="23496">len</span><span class="op" id="23499">(</span><span class="ident" id="23500"><a href="/bufio/bufio_test.go.html#22009">testOutput</a></span><span class="op" id="23510">)</span><span class="op" id="23511">,</span>&nbsp;<span class="ident" id="23513"><a href="/bufio/bufio_test.go.html#22745">stride</a></span><span class="op" id="23519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="23523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="23526">}</span><br>
<span class="lineno">790</span><span class="op" id="23528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="23531">func</span>&nbsp;<span class="ident" id="23536">TestReadLine</span><span class="op" id="23548">(</span><span class="ident" id="23549">t</span>&nbsp;<span class="op" id="23551">*</span><span class="ident" id="23552"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="23559">.</span><span class="ident" id="23560">T</span><span class="op" id="23561">)</span>&nbsp;<span class="op" id="23563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23566"><a href="/bufio/bufio_test.go.html#22645">testReadLine</a></span><span class="op" id="23578">(</span><span class="ident" id="23579"><a href="/bufio/bufio_test.go.html#23549">t</a></span><span class="op" id="23580">,</span>&nbsp;<span class="ident" id="23582"><a href="/bufio/bufio_test.go.html#22072">testInput</a></span><span class="op" id="23591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23594"><a href="/bufio/bufio_test.go.html#22645">testReadLine</a></span><span class="op" id="23606">(</span><span class="ident" id="23607"><a href="/bufio/bufio_test.go.html#23549">t</a></span><span class="op" id="23608">,</span>&nbsp;<span class="ident" id="23610"><a href="/bufio/bufio_test.go.html#22156">testInputrn</a></span><span class="op" id="23621">)</span><br>
<span class="lineno">795</span><span class="op" id="23623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="23626">func</span>&nbsp;<span class="ident" id="23631">TestLineTooLong</span><span class="op" id="23646">(</span><span class="ident" id="23647">t</span>&nbsp;<span class="op" id="23649">*</span><span class="ident" id="23650"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="23657">.</span><span class="ident" id="23658">T</span><span class="op" id="23659">)</span>&nbsp;<span class="op" id="23661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23664">data</span>&nbsp;<span class="op" id="23669">:=</span>&nbsp;<span class="builtinfunc" id="23672">make</span><span class="op" id="23676">(</span><span class="op" id="23677">[</span><span class="op" id="23678">]</span><span class="builtintype" id="23679">byte</span><span class="op" id="23683">,</span>&nbsp;<span class="num" id="23685">0</span><span class="op" id="23686">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="23689">for</span>&nbsp;<span class="ident" id="23693">i</span>&nbsp;<span class="op" id="23695">:=</span>&nbsp;<span class="num" id="23698">0</span><span class="op" id="23699">;</span>&nbsp;<span class="ident" id="23701"><a href="/bufio/bufio_test.go.html#23693">i</a></span>&nbsp;<span class="op" id="23703">&lt;</span>&nbsp;<span class="ident" id="23705"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="23722">*</span><span class="num" id="23723">5</span><span class="op" id="23724">/</span><span class="num" id="23725">2</span><span class="op" id="23726">;</span>&nbsp;<span class="ident" id="23728"><a href="/bufio/bufio_test.go.html#23693">i</a></span><span class="op" id="23729">++</span>&nbsp;<span class="op" id="23732">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23736"><a href="/bufio/bufio_test.go.html#23664">data</a></span>&nbsp;<span class="op" id="23741">=</span>&nbsp;<span class="builtinfunc" id="23743">append</span><span class="op" id="23749">(</span><span class="ident" id="23750"><a href="/bufio/bufio_test.go.html#23664">data</a></span><span class="op" id="23754">,</span>&nbsp;<span class="string" id="23756">&#39;0&#39;</span><span class="op" id="23759">+</span><span class="builtintype" id="23760">byte</span><span class="op" id="23764">(</span><span class="ident" id="23765"><a href="/bufio/bufio_test.go.html#23693">i</a></span><span class="op" id="23766">%</span><span class="num" id="23767">10</span><span class="op" id="23769">)</span><span class="op" id="23770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="23773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23776">buf</span>&nbsp;<span class="op" id="23780">:=</span>&nbsp;<span class="ident" id="23783"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="23788">.</span><span class="ident" id="23789">NewReader</span><span class="op" id="23798">(</span><span class="ident" id="23799"><a href="/bufio/bufio_test.go.html#23664">data</a></span><span class="op" id="23803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23806">l</span>&nbsp;<span class="op" id="23808">:=</span>&nbsp;<span class="ident" id="23811"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="23824">(</span><span class="ident" id="23825"><a href="/bufio/bufio_test.go.html#23776">buf</a></span><span class="op" id="23828">,</span>&nbsp;<span class="ident" id="23830"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="23847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23850">line</span><span class="op" id="23854">,</span>&nbsp;<span class="ident" id="23856">isPrefix</span><span class="op" id="23864">,</span>&nbsp;<span class="ident" id="23866">err</span>&nbsp;<span class="op" id="23870">:=</span>&nbsp;<span class="ident" id="23873"><a href="/bufio/bufio_test.go.html#23806">l</a></span><span class="op" id="23874">.</span><span class="ident" id="23875">ReadLine</span><span class="op" id="23883">(</span><span class="op" id="23884">)</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="23887">if</span>&nbsp;<span class="op" id="23890">!</span><span class="ident" id="23891"><a href="/bufio/bufio_test.go.html#23856">isPrefix</a></span>&nbsp;<span class="op" id="23900">||</span>&nbsp;<span class="op" id="23903">!</span><span class="ident" id="23904"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="23909">.</span><span class="ident" id="23910">Equal</span><span class="op" id="23915">(</span><span class="ident" id="23916"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="23920">,</span>&nbsp;<span class="ident" id="23922"><a href="/bufio/bufio_test.go.html#23664">data</a></span><span class="op" id="23926">[</span><span class="op" id="23927">:</span><span class="ident" id="23928"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="23945">]</span><span class="op" id="23946">)</span>&nbsp;<span class="op" id="23948">||</span>&nbsp;<span class="ident" id="23951"><a href="/bufio/bufio_test.go.html#23866">err</a></span>&nbsp;<span class="op" id="23955">!=</span>&nbsp;<span class="ident" id="23958">nil</span>&nbsp;<span class="op" id="23962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="23966"><a href="/bufio/bufio_test.go.html#23647">t</a></span><span class="op" id="23967">.</span><span class="ident" id="23968">Errorf</span><span class="op" id="23974">(</span><span class="string" id="23975">&#34;bad&nbsp;result&nbsp;for&nbsp;first&nbsp;line:&nbsp;got&nbsp;%q&nbsp;want&nbsp;%q&nbsp;%v&#34;</span><span class="op" id="24021">,</span>&nbsp;<span class="ident" id="24023"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24027">,</span>&nbsp;<span class="ident" id="24029"><a href="/bufio/bufio_test.go.html#23664">data</a></span><span class="op" id="24033">[</span><span class="op" id="24034">:</span><span class="ident" id="24035"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="24052">]</span><span class="op" id="24053">,</span>&nbsp;<span class="ident" id="24055"><a href="/bufio/bufio_test.go.html#23866">err</a></span><span class="op" id="24058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="24061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24064"><a href="/bufio/bufio_test.go.html#23664">data</a></span>&nbsp;<span class="op" id="24069">=</span>&nbsp;<span class="ident" id="24071"><a href="/bufio/bufio_test.go.html#23664">data</a></span><span class="op" id="24075">[</span><span class="builtinfunc" id="24076">len</span><span class="op" id="24079">(</span><span class="ident" id="24080"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24084">)</span><span class="op" id="24085">:</span><span class="op" id="24086">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24089"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24093">,</span>&nbsp;<span class="ident" id="24095"><a href="/bufio/bufio_test.go.html#23856">isPrefix</a></span><span class="op" id="24103">,</span>&nbsp;<span class="ident" id="24105"><a href="/bufio/bufio_test.go.html#23866">err</a></span>&nbsp;<span class="op" id="24109">=</span>&nbsp;<span class="ident" id="24111"><a href="/bufio/bufio_test.go.html#23806">l</a></span><span class="op" id="24112">.</span><span class="ident" id="24113">ReadLine</span><span class="op" id="24121">(</span><span class="op" id="24122">)</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="24125">if</span>&nbsp;<span class="op" id="24128">!</span><span class="ident" id="24129"><a href="/bufio/bufio_test.go.html#23856">isPrefix</a></span>&nbsp;<span class="op" id="24138">||</span>&nbsp;<span class="op" id="24141">!</span><span class="ident" id="24142"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="24147">.</span><span class="ident" id="24148">Equal</span><span class="op" id="24153">(</span><span class="ident" id="24154"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24158">,</span>&nbsp;<span class="ident" id="24160"><a href="/bufio/bufio_test.go.html#23664">data</a></span><span class="op" id="24164">[</span><span class="op" id="24165">:</span><span class="ident" id="24166"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="24183">]</span><span class="op" id="24184">)</span>&nbsp;<span class="op" id="24186">||</span>&nbsp;<span class="ident" id="24189"><a href="/bufio/bufio_test.go.html#23866">err</a></span>&nbsp;<span class="op" id="24193">!=</span>&nbsp;<span class="ident" id="24196">nil</span>&nbsp;<span class="op" id="24200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24204"><a href="/bufio/bufio_test.go.html#23647">t</a></span><span class="op" id="24205">.</span><span class="ident" id="24206">Errorf</span><span class="op" id="24212">(</span><span class="string" id="24213">&#34;bad&nbsp;result&nbsp;for&nbsp;second&nbsp;line:&nbsp;got&nbsp;%q&nbsp;want&nbsp;%q&nbsp;%v&#34;</span><span class="op" id="24260">,</span>&nbsp;<span class="ident" id="24262"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24266">,</span>&nbsp;<span class="ident" id="24268"><a href="/bufio/bufio_test.go.html#23664">data</a></span><span class="op" id="24272">[</span><span class="op" id="24273">:</span><span class="ident" id="24274"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="24291">]</span><span class="op" id="24292">,</span>&nbsp;<span class="ident" id="24294"><a href="/bufio/bufio_test.go.html#23866">err</a></span><span class="op" id="24297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="24300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24303"><a href="/bufio/bufio_test.go.html#23664">data</a></span>&nbsp;<span class="op" id="24308">=</span>&nbsp;<span class="ident" id="24310"><a href="/bufio/bufio_test.go.html#23664">data</a></span><span class="op" id="24314">[</span><span class="builtinfunc" id="24315">len</span><span class="op" id="24318">(</span><span class="ident" id="24319"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24323">)</span><span class="op" id="24324">:</span><span class="op" id="24325">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24328"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24332">,</span>&nbsp;<span class="ident" id="24334"><a href="/bufio/bufio_test.go.html#23856">isPrefix</a></span><span class="op" id="24342">,</span>&nbsp;<span class="ident" id="24344"><a href="/bufio/bufio_test.go.html#23866">err</a></span>&nbsp;<span class="op" id="24348">=</span>&nbsp;<span class="ident" id="24350"><a href="/bufio/bufio_test.go.html#23806">l</a></span><span class="op" id="24351">.</span><span class="ident" id="24352">ReadLine</span><span class="op" id="24360">(</span><span class="op" id="24361">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="24364">if</span>&nbsp;<span class="ident" id="24367"><a href="/bufio/bufio_test.go.html#23856">isPrefix</a></span>&nbsp;<span class="op" id="24376">||</span>&nbsp;<span class="op" id="24379">!</span><span class="ident" id="24380"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="24385">.</span><span class="ident" id="24386">Equal</span><span class="op" id="24391">(</span><span class="ident" id="24392"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24396">,</span>&nbsp;<span class="ident" id="24398"><a href="/bufio/bufio_test.go.html#23664">data</a></span><span class="op" id="24402">[</span><span class="op" id="24403">:</span><span class="ident" id="24404"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="24421">/</span><span class="num" id="24422">2</span><span class="op" id="24423">]</span><span class="op" id="24424">)</span>&nbsp;<span class="op" id="24426">||</span>&nbsp;<span class="ident" id="24429"><a href="/bufio/bufio_test.go.html#23866">err</a></span>&nbsp;<span class="op" id="24433">!=</span>&nbsp;<span class="ident" id="24436">nil</span>&nbsp;<span class="op" id="24440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24444"><a href="/bufio/bufio_test.go.html#23647">t</a></span><span class="op" id="24445">.</span><span class="ident" id="24446">Errorf</span><span class="op" id="24452">(</span><span class="string" id="24453">&#34;bad&nbsp;result&nbsp;for&nbsp;third&nbsp;line:&nbsp;got&nbsp;%q&nbsp;want&nbsp;%q&nbsp;%v&#34;</span><span class="op" id="24499">,</span>&nbsp;<span class="ident" id="24501"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24505">,</span>&nbsp;<span class="ident" id="24507"><a href="/bufio/bufio_test.go.html#23664">data</a></span><span class="op" id="24511">[</span><span class="op" id="24512">:</span><span class="ident" id="24513"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="24530">/</span><span class="num" id="24531">2</span><span class="op" id="24532">]</span><span class="op" id="24533">,</span>&nbsp;<span class="ident" id="24535"><a href="/bufio/bufio_test.go.html#23866">err</a></span><span class="op" id="24538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="24541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24544"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24548">,</span>&nbsp;<span class="ident" id="24550"><a href="/bufio/bufio_test.go.html#23856">isPrefix</a></span><span class="op" id="24558">,</span>&nbsp;<span class="ident" id="24560"><a href="/bufio/bufio_test.go.html#23866">err</a></span>&nbsp;<span class="op" id="24564">=</span>&nbsp;<span class="ident" id="24566"><a href="/bufio/bufio_test.go.html#23806">l</a></span><span class="op" id="24567">.</span><span class="ident" id="24568">ReadLine</span><span class="op" id="24576">(</span><span class="op" id="24577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="24580">if</span>&nbsp;<span class="ident" id="24583"><a href="/bufio/bufio_test.go.html#23856">isPrefix</a></span>&nbsp;<span class="op" id="24592">||</span>&nbsp;<span class="ident" id="24595"><a href="/bufio/bufio_test.go.html#23866">err</a></span>&nbsp;<span class="op" id="24599">==</span>&nbsp;<span class="ident" id="24602">nil</span>&nbsp;<span class="op" id="24606">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24610"><a href="/bufio/bufio_test.go.html#23647">t</a></span><span class="op" id="24611">.</span><span class="ident" id="24612">Errorf</span><span class="op" id="24618">(</span><span class="string" id="24619">&#34;expected&nbsp;no&nbsp;more&nbsp;lines:&nbsp;%x&nbsp;%s&#34;</span><span class="op" id="24650">,</span>&nbsp;<span class="ident" id="24652"><a href="/bufio/bufio_test.go.html#23850">line</a></span><span class="op" id="24656">,</span>&nbsp;<span class="ident" id="24658"><a href="/bufio/bufio_test.go.html#23866">err</a></span><span class="op" id="24661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="24664">}</span><br>
<span class="lineno"></span><span class="op" id="24666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="24669">func</span>&nbsp;<span class="ident" id="24674">TestReadAfterLines</span><span class="op" id="24692">(</span><span class="ident" id="24693">t</span>&nbsp;<span class="op" id="24695">*</span><span class="ident" id="24696"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="24703">.</span><span class="ident" id="24704">T</span><span class="op" id="24705">)</span>&nbsp;<span class="op" id="24707">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24710">line1</span>&nbsp;<span class="op" id="24716">:=</span>&nbsp;<span class="string" id="24719">&#34;this&nbsp;is&nbsp;line1&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24736">restData</span>&nbsp;<span class="op" id="24745">:=</span>&nbsp;<span class="string" id="24748">&#34;this&nbsp;is&nbsp;line2\nthis&nbsp;is&nbsp;line&nbsp;3\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24783">inbuf</span>&nbsp;<span class="op" id="24789">:=</span>&nbsp;<span class="ident" id="24792"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="24797">.</span><span class="ident" id="24798">NewReader</span><span class="op" id="24807">(</span><span class="op" id="24808">[</span><span class="op" id="24809">]</span><span class="builtintype" id="24810">byte</span><span class="op" id="24814">(</span><span class="ident" id="24815"><a href="/bufio/bufio_test.go.html#24710">line1</a></span>&nbsp;<span class="op" id="24821">+</span>&nbsp;<span class="string" id="24823">&#34;\n&#34;</span>&nbsp;<span class="op" id="24828">+</span>&nbsp;<span class="ident" id="24830"><a href="/bufio/bufio_test.go.html#24736">restData</a></span><span class="op" id="24838">)</span><span class="op" id="24839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24842">outbuf</span>&nbsp;<span class="op" id="24849">:=</span>&nbsp;<span class="builtinfunc" id="24852">new</span><span class="op" id="24855">(</span><span class="ident" id="24856"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="24861">.</span><span class="ident" id="24862">Buffer</span><span class="op" id="24868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24871">maxLineLength</span>&nbsp;<span class="op" id="24885">:=</span>&nbsp;<span class="builtinfunc" id="24888">len</span><span class="op" id="24891">(</span><span class="ident" id="24892"><a href="/bufio/bufio_test.go.html#24710">line1</a></span><span class="op" id="24897">)</span>&nbsp;<span class="op" id="24899">+</span>&nbsp;<span class="builtinfunc" id="24901">len</span><span class="op" id="24904">(</span><span class="ident" id="24905"><a href="/bufio/bufio_test.go.html#24736">restData</a></span><span class="op" id="24913">)</span><span class="op" id="24914">/</span><span class="num" id="24915">2</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24918">l</span>&nbsp;<span class="op" id="24920">:=</span>&nbsp;<span class="ident" id="24923"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="24936">(</span><span class="ident" id="24937"><a href="/bufio/bufio_test.go.html#24783">inbuf</a></span><span class="op" id="24942">,</span>&nbsp;<span class="ident" id="24944"><a href="/bufio/bufio_test.go.html#24871">maxLineLength</a></span><span class="op" id="24957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="24960">line</span><span class="op" id="24964">,</span>&nbsp;<span class="ident" id="24966">isPrefix</span><span class="op" id="24974">,</span>&nbsp;<span class="ident" id="24976">err</span>&nbsp;<span class="op" id="24980">:=</span>&nbsp;<span class="ident" id="24983"><a href="/bufio/bufio_test.go.html#24918">l</a></span><span class="op" id="24984">.</span><span class="ident" id="24985">ReadLine</span><span class="op" id="24993">(</span><span class="op" id="24994">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="24997">if</span>&nbsp;<span class="ident" id="25000"><a href="/bufio/bufio_test.go.html#24966">isPrefix</a></span>&nbsp;<span class="op" id="25009">||</span>&nbsp;<span class="ident" id="25012"><a href="/bufio/bufio_test.go.html#24976">err</a></span>&nbsp;<span class="op" id="25016">!=</span>&nbsp;<span class="ident" id="25019">nil</span>&nbsp;<span class="op" id="25023">||</span>&nbsp;<span class="builtintype" id="25026">string</span><span class="op" id="25032">(</span><span class="ident" id="25033"><a href="/bufio/bufio_test.go.html#24960">line</a></span><span class="op" id="25037">)</span>&nbsp;<span class="op" id="25039">!=</span>&nbsp;<span class="ident" id="25042"><a href="/bufio/bufio_test.go.html#24710">line1</a></span>&nbsp;<span class="op" id="25048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25052"><a href="/bufio/bufio_test.go.html#24693">t</a></span><span class="op" id="25053">.</span><span class="ident" id="25054">Errorf</span><span class="op" id="25060">(</span><span class="string" id="25061">&#34;bad&nbsp;result&nbsp;for&nbsp;first&nbsp;line:&nbsp;isPrefix=%v&nbsp;err=%v&nbsp;line=%q&#34;</span><span class="op" id="25116">,</span>&nbsp;<span class="ident" id="25118"><a href="/bufio/bufio_test.go.html#24966">isPrefix</a></span><span class="op" id="25126">,</span>&nbsp;<span class="ident" id="25128"><a href="/bufio/bufio_test.go.html#24976">err</a></span><span class="op" id="25131">,</span>&nbsp;<span class="builtintype" id="25133">string</span><span class="op" id="25139">(</span><span class="ident" id="25140"><a href="/bufio/bufio_test.go.html#24960">line</a></span><span class="op" id="25144">)</span><span class="op" id="25145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="25148">}</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25151">n</span><span class="op" id="25152">,</span>&nbsp;<span class="ident" id="25154"><a href="/bufio/bufio_test.go.html#24976">err</a></span>&nbsp;<span class="op" id="25158">:=</span>&nbsp;<span class="ident" id="25161"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="25163">.</span><span class="ident" id="25164">Copy</span><span class="op" id="25168">(</span><span class="ident" id="25169"><a href="/bufio/bufio_test.go.html#24842">outbuf</a></span><span class="op" id="25175">,</span>&nbsp;<span class="ident" id="25177"><a href="/bufio/bufio_test.go.html#24918">l</a></span><span class="op" id="25178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="25181">if</span>&nbsp;<span class="builtintype" id="25184">int</span><span class="op" id="25187">(</span><span class="ident" id="25188"><a href="/bufio/bufio_test.go.html#25151">n</a></span><span class="op" id="25189">)</span>&nbsp;<span class="op" id="25191">!=</span>&nbsp;<span class="builtinfunc" id="25194">len</span><span class="op" id="25197">(</span><span class="ident" id="25198"><a href="/bufio/bufio_test.go.html#24736">restData</a></span><span class="op" id="25206">)</span>&nbsp;<span class="op" id="25208">||</span>&nbsp;<span class="ident" id="25211"><a href="/bufio/bufio_test.go.html#24976">err</a></span>&nbsp;<span class="op" id="25215">!=</span>&nbsp;<span class="ident" id="25218">nil</span>&nbsp;<span class="op" id="25222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25226"><a href="/bufio/bufio_test.go.html#24693">t</a></span><span class="op" id="25227">.</span><span class="ident" id="25228">Errorf</span><span class="op" id="25234">(</span><span class="string" id="25235">&#34;bad&nbsp;result&nbsp;for&nbsp;Read:&nbsp;n=%d&nbsp;err=%v&#34;</span><span class="op" id="25269">,</span>&nbsp;<span class="ident" id="25271"><a href="/bufio/bufio_test.go.html#25151">n</a></span><span class="op" id="25272">,</span>&nbsp;<span class="ident" id="25274"><a href="/bufio/bufio_test.go.html#24976">err</a></span><span class="op" id="25277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="25280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="25283">if</span>&nbsp;<span class="ident" id="25286"><a href="/bufio/bufio_test.go.html#24842">outbuf</a></span><span class="op" id="25292">.</span><span class="ident" id="25293">String</span><span class="op" id="25299">(</span><span class="op" id="25300">)</span>&nbsp;<span class="op" id="25302">!=</span>&nbsp;<span class="ident" id="25305"><a href="/bufio/bufio_test.go.html#24736">restData</a></span>&nbsp;<span class="op" id="25314">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25318"><a href="/bufio/bufio_test.go.html#24693">t</a></span><span class="op" id="25319">.</span><span class="ident" id="25320">Errorf</span><span class="op" id="25326">(</span><span class="string" id="25327">&#34;bad&nbsp;result&nbsp;for&nbsp;Read:&nbsp;got&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="25369">,</span>&nbsp;<span class="ident" id="25371"><a href="/bufio/bufio_test.go.html#24842">outbuf</a></span><span class="op" id="25377">.</span><span class="ident" id="25378">String</span><span class="op" id="25384">(</span><span class="op" id="25385">)</span><span class="op" id="25386">,</span>&nbsp;<span class="ident" id="25388"><a href="/bufio/bufio_test.go.html#24736">restData</a></span><span class="op" id="25396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="25399">}</span><br>
<span class="lineno"></span><span class="op" id="25401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="25404">func</span>&nbsp;<span class="ident" id="25409">TestReadEmptyBuffer</span><span class="op" id="25428">(</span><span class="ident" id="25429">t</span>&nbsp;<span class="op" id="25431">*</span><span class="ident" id="25432"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="25439">.</span><span class="ident" id="25440">T</span><span class="op" id="25441">)</span>&nbsp;<span class="op" id="25443">{</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25446">l</span>&nbsp;<span class="op" id="25448">:=</span>&nbsp;<span class="ident" id="25451"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="25464">(</span><span class="builtinfunc" id="25465">new</span><span class="op" id="25468">(</span><span class="ident" id="25469"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="25474">.</span><span class="ident" id="25475">Buffer</span><span class="op" id="25481">)</span><span class="op" id="25482">,</span>&nbsp;<span class="ident" id="25484"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="25501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25504">line</span><span class="op" id="25508">,</span>&nbsp;<span class="ident" id="25510">isPrefix</span><span class="op" id="25518">,</span>&nbsp;<span class="ident" id="25520">err</span>&nbsp;<span class="op" id="25524">:=</span>&nbsp;<span class="ident" id="25527"><a href="/bufio/bufio_test.go.html#25446">l</a></span><span class="op" id="25528">.</span><span class="ident" id="25529">ReadLine</span><span class="op" id="25537">(</span><span class="op" id="25538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="25541">if</span>&nbsp;<span class="ident" id="25544"><a href="/bufio/bufio_test.go.html#25520">err</a></span>&nbsp;<span class="op" id="25548">!=</span>&nbsp;<span class="ident" id="25551"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="25553">.</span><span class="ident" id="25554">EOF</span>&nbsp;<span class="op" id="25558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25562"><a href="/bufio/bufio_test.go.html#25429">t</a></span><span class="op" id="25563">.</span><span class="ident" id="25564">Errorf</span><span class="op" id="25570">(</span><span class="string" id="25571">&#34;expected&nbsp;EOF&nbsp;from&nbsp;ReadLine,&nbsp;got&nbsp;&#39;%s&#39;&nbsp;%t&nbsp;%s&#34;</span><span class="op" id="25615">,</span>&nbsp;<span class="ident" id="25617"><a href="/bufio/bufio_test.go.html#25504">line</a></span><span class="op" id="25621">,</span>&nbsp;<span class="ident" id="25623"><a href="/bufio/bufio_test.go.html#25510">isPrefix</a></span><span class="op" id="25631">,</span>&nbsp;<span class="ident" id="25633"><a href="/bufio/bufio_test.go.html#25520">err</a></span><span class="op" id="25636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="25639">}</span><br>
<span class="lineno">850</span><span class="op" id="25641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="25644">func</span>&nbsp;<span class="ident" id="25649">TestLinesAfterRead</span><span class="op" id="25667">(</span><span class="ident" id="25668">t</span>&nbsp;<span class="op" id="25670">*</span><span class="ident" id="25671"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="25678">.</span><span class="ident" id="25679">T</span><span class="op" id="25680">)</span>&nbsp;<span class="op" id="25682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25685">l</span>&nbsp;<span class="op" id="25687">:=</span>&nbsp;<span class="ident" id="25690"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="25703">(</span><span class="ident" id="25704"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="25709">.</span><span class="ident" id="25710">NewReader</span><span class="op" id="25719">(</span><span class="op" id="25720">[</span><span class="op" id="25721">]</span><span class="builtintype" id="25722">byte</span><span class="op" id="25726">(</span><span class="string" id="25727">&#34;foo&#34;</span><span class="op" id="25732">)</span><span class="op" id="25733">)</span><span class="op" id="25734">,</span>&nbsp;<span class="ident" id="25736"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="25753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25756">_</span><span class="op" id="25757">,</span>&nbsp;<span class="ident" id="25759">err</span>&nbsp;<span class="op" id="25763">:=</span>&nbsp;<span class="ident" id="25766"><a href="/bufio/bufio_test.go.html#3431">ioutil</a></span><span class="op" id="25772">.</span><span class="ident" id="25773">ReadAll</span><span class="op" id="25780">(</span><span class="ident" id="25781"><a href="/bufio/bufio_test.go.html#25685">l</a></span><span class="op" id="25782">)</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="25785">if</span>&nbsp;<span class="ident" id="25788"><a href="/bufio/bufio_test.go.html#25759">err</a></span>&nbsp;<span class="op" id="25792">!=</span>&nbsp;<span class="ident" id="25795">nil</span>&nbsp;<span class="op" id="25799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25803"><a href="/bufio/bufio_test.go.html#25668">t</a></span><span class="op" id="25804">.</span><span class="ident" id="25805">Error</span><span class="op" id="25810">(</span><span class="ident" id="25811"><a href="/bufio/bufio_test.go.html#25759">err</a></span><span class="op" id="25814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="25818">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="25826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25830">line</span><span class="op" id="25834">,</span>&nbsp;<span class="ident" id="25836">isPrefix</span><span class="op" id="25844">,</span>&nbsp;<span class="ident" id="25846"><a href="/bufio/bufio_test.go.html#25759">err</a></span>&nbsp;<span class="op" id="25850">:=</span>&nbsp;<span class="ident" id="25853"><a href="/bufio/bufio_test.go.html#25685">l</a></span><span class="op" id="25854">.</span><span class="ident" id="25855">ReadLine</span><span class="op" id="25863">(</span><span class="op" id="25864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="25867">if</span>&nbsp;<span class="ident" id="25870"><a href="/bufio/bufio_test.go.html#25759">err</a></span>&nbsp;<span class="op" id="25874">!=</span>&nbsp;<span class="ident" id="25877"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="25879">.</span><span class="ident" id="25880">EOF</span>&nbsp;<span class="op" id="25884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="25888"><a href="/bufio/bufio_test.go.html#25668">t</a></span><span class="op" id="25889">.</span><span class="ident" id="25890">Errorf</span><span class="op" id="25896">(</span><span class="string" id="25897">&#34;expected&nbsp;EOF&nbsp;from&nbsp;ReadLine,&nbsp;got&nbsp;&#39;%s&#39;&nbsp;%t&nbsp;%s&#34;</span><span class="op" id="25941">,</span>&nbsp;<span class="ident" id="25943"><a href="/bufio/bufio_test.go.html#25830">line</a></span><span class="op" id="25947">,</span>&nbsp;<span class="ident" id="25949"><a href="/bufio/bufio_test.go.html#25836">isPrefix</a></span><span class="op" id="25957">,</span>&nbsp;<span class="ident" id="25959"><a href="/bufio/bufio_test.go.html#25759">err</a></span><span class="op" id="25962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="25965">}</span><br>
<span class="lineno"></span><span class="op" id="25967">}</span><br>
<span class="lineno">865</span><br>
<span class="lineno"></span><span class="keyword" id="25970">func</span>&nbsp;<span class="ident" id="25975">TestReadLineNonNilLineOrError</span><span class="op" id="26004">(</span><span class="ident" id="26005">t</span>&nbsp;<span class="op" id="26007">*</span><span class="ident" id="26008"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="26015">.</span><span class="ident" id="26016">T</span><span class="op" id="26017">)</span>&nbsp;<span class="op" id="26019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="26022">r</span>&nbsp;<span class="op" id="26024">:=</span>&nbsp;<span class="ident" id="26027"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="26036">(</span><span class="ident" id="26037"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="26044">.</span><span class="ident" id="26045">NewReader</span><span class="op" id="26054">(</span><span class="string" id="26055">&#34;line&nbsp;1\n&#34;</span><span class="op" id="26065">)</span><span class="op" id="26066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="26069">for</span>&nbsp;<span class="ident" id="26073">i</span>&nbsp;<span class="op" id="26075">:=</span>&nbsp;<span class="num" id="26078">0</span><span class="op" id="26079">;</span>&nbsp;<span class="ident" id="26081"><a href="/bufio/bufio_test.go.html#26073">i</a></span>&nbsp;<span class="op" id="26083">&lt;</span>&nbsp;<span class="num" id="26085">2</span><span class="op" id="26086">;</span>&nbsp;<span class="ident" id="26088"><a href="/bufio/bufio_test.go.html#26073">i</a></span><span class="op" id="26089">++</span>&nbsp;<span class="op" id="26092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="26096">l</span><span class="op" id="26097">,</span>&nbsp;<span class="ident" id="26099">_</span><span class="op" id="26100">,</span>&nbsp;<span class="ident" id="26102">err</span>&nbsp;<span class="op" id="26106">:=</span>&nbsp;<span class="ident" id="26109"><a href="/bufio/bufio_test.go.html#26022">r</a></span><span class="op" id="26110">.</span><span class="ident" id="26111">ReadLine</span><span class="op" id="26119">(</span><span class="op" id="26120">)</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="26124">if</span>&nbsp;<span class="ident" id="26127"><a href="/bufio/bufio_test.go.html#26096">l</a></span>&nbsp;<span class="op" id="26129">!=</span>&nbsp;<span class="ident" id="26132">nil</span>&nbsp;<span class="op" id="26136">&amp;&amp;</span>&nbsp;<span class="ident" id="26139"><a href="/bufio/bufio_test.go.html#26102">err</a></span>&nbsp;<span class="op" id="26143">!=</span>&nbsp;<span class="ident" id="26146">nil</span>&nbsp;<span class="op" id="26150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="26155"><a href="/bufio/bufio_test.go.html#26005">t</a></span><span class="op" id="26156">.</span><span class="ident" id="26157">Fatalf</span><span class="op" id="26163">(</span><span class="string" id="26164">&#34;on&nbsp;line&nbsp;%d/2;&nbsp;ReadLine=%#v,&nbsp;%v;&nbsp;want&nbsp;non-nil&nbsp;line&nbsp;or&nbsp;Error,&nbsp;but&nbsp;not&nbsp;both&#34;</span><span class="op" id="26238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="26244"><a href="/bufio/bufio_test.go.html#26073">i</a></span><span class="op" id="26245">+</span><span class="num" id="26246">1</span><span class="op" id="26247">,</span>&nbsp;<span class="ident" id="26249"><a href="/bufio/bufio_test.go.html#26096">l</a></span><span class="op" id="26250">,</span>&nbsp;<span class="ident" id="26252"><a href="/bufio/bufio_test.go.html#26102">err</a></span><span class="op" id="26255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26262">}</span><br>
<span class="lineno">875</span><span class="op" id="26264">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="26267">type</span>&nbsp;<span class="ident" id="26272">readLineResult</span>&nbsp;<span class="keyword" id="26287">struct</span>&nbsp;<span class="op" id="26294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="26297">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="26306">[</span><span class="op" id="26307">]</span><span class="builtintype" id="26308">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="26314">isPrefix</span>&nbsp;<span class="builtintype" id="26323">bool</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="26329">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="26338">error</span><br>
<span class="lineno"></span><span class="op" id="26344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="26347">var</span>&nbsp;<span class="ident" id="26351">readLineNewlinesTests</span>&nbsp;<span class="op" id="26373">=</span>&nbsp;<span class="op" id="26375">[</span><span class="op" id="26376">]</span><span class="keyword" id="26377">struct</span>&nbsp;<span class="op" id="26384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="26387">input</span>&nbsp;&nbsp;<span class="builtintype" id="26394">string</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="26402">expect</span>&nbsp;<span class="op" id="26409">[</span><span class="op" id="26410">]</span><span class="ident" id="26411"><a href="/bufio/bufio_test.go.html#26272">readLineResult</a></span><br>
<span class="lineno"></span><span class="op" id="26426">}</span><span class="op" id="26427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26430">{</span><span class="string" id="26431">&#34;012345678901234\r\n012345678901234\r\n&#34;</span><span class="op" id="26471">,</span>&nbsp;<span class="op" id="26473">[</span><span class="op" id="26474">]</span><span class="ident" id="26475"><a href="/bufio/bufio_test.go.html#26272">readLineResult</a></span><span class="op" id="26489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26493">{</span><span class="op" id="26494">[</span><span class="op" id="26495">]</span><span class="builtintype" id="26496">byte</span><span class="op" id="26500">(</span><span class="string" id="26501">&#34;012345678901234&#34;</span><span class="op" id="26518">)</span><span class="op" id="26519">,</span>&nbsp;<span class="ident" id="26521">true</span><span class="op" id="26525">,</span>&nbsp;<span class="ident" id="26527">nil</span><span class="op" id="26530">}</span><span class="op" id="26531">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26535">{</span><span class="ident" id="26536">nil</span><span class="op" id="26539">,</span>&nbsp;<span class="ident" id="26541">false</span><span class="op" id="26546">,</span>&nbsp;<span class="ident" id="26548">nil</span><span class="op" id="26551">}</span><span class="op" id="26552">,</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26556">{</span><span class="op" id="26557">[</span><span class="op" id="26558">]</span><span class="builtintype" id="26559">byte</span><span class="op" id="26563">(</span><span class="string" id="26564">&#34;012345678901234&#34;</span><span class="op" id="26581">)</span><span class="op" id="26582">,</span>&nbsp;<span class="ident" id="26584">true</span><span class="op" id="26588">,</span>&nbsp;<span class="ident" id="26590">nil</span><span class="op" id="26593">}</span><span class="op" id="26594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26598">{</span><span class="ident" id="26599">nil</span><span class="op" id="26602">,</span>&nbsp;<span class="ident" id="26604">false</span><span class="op" id="26609">,</span>&nbsp;<span class="ident" id="26611">nil</span><span class="op" id="26614">}</span><span class="op" id="26615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26619">{</span><span class="ident" id="26620">nil</span><span class="op" id="26623">,</span>&nbsp;<span class="ident" id="26625">false</span><span class="op" id="26630">,</span>&nbsp;<span class="ident" id="26632"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="26634">.</span><span class="ident" id="26635">EOF</span><span class="op" id="26638">}</span><span class="op" id="26639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26642">}</span><span class="op" id="26643">}</span><span class="op" id="26644">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26647">{</span><span class="string" id="26648">&#34;0123456789012345\r012345678901234\r&#34;</span><span class="op" id="26685">,</span>&nbsp;<span class="op" id="26687">[</span><span class="op" id="26688">]</span><span class="ident" id="26689"><a href="/bufio/bufio_test.go.html#26272">readLineResult</a></span><span class="op" id="26703">{</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26707">{</span><span class="op" id="26708">[</span><span class="op" id="26709">]</span><span class="builtintype" id="26710">byte</span><span class="op" id="26714">(</span><span class="string" id="26715">&#34;0123456789012345&#34;</span><span class="op" id="26733">)</span><span class="op" id="26734">,</span>&nbsp;<span class="ident" id="26736">true</span><span class="op" id="26740">,</span>&nbsp;<span class="ident" id="26742">nil</span><span class="op" id="26745">}</span><span class="op" id="26746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26750">{</span><span class="op" id="26751">[</span><span class="op" id="26752">]</span><span class="builtintype" id="26753">byte</span><span class="op" id="26757">(</span><span class="string" id="26758">&#34;\r012345678901234&#34;</span><span class="op" id="26777">)</span><span class="op" id="26778">,</span>&nbsp;<span class="ident" id="26780">true</span><span class="op" id="26784">,</span>&nbsp;<span class="ident" id="26786">nil</span><span class="op" id="26789">}</span><span class="op" id="26790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26794">{</span><span class="op" id="26795">[</span><span class="op" id="26796">]</span><span class="builtintype" id="26797">byte</span><span class="op" id="26801">(</span><span class="string" id="26802">&#34;\r&#34;</span><span class="op" id="26806">)</span><span class="op" id="26807">,</span>&nbsp;<span class="ident" id="26809">false</span><span class="op" id="26814">,</span>&nbsp;<span class="ident" id="26816">nil</span><span class="op" id="26819">}</span><span class="op" id="26820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26824">{</span><span class="ident" id="26825">nil</span><span class="op" id="26828">,</span>&nbsp;<span class="ident" id="26830">false</span><span class="op" id="26835">,</span>&nbsp;<span class="ident" id="26837"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="26839">.</span><span class="ident" id="26840">EOF</span><span class="op" id="26843">}</span><span class="op" id="26844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26847">}</span><span class="op" id="26848">}</span><span class="op" id="26849">,</span><br>
<span class="lineno">900</span><span class="op" id="26851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="26854">func</span>&nbsp;<span class="ident" id="26859">TestReadLineNewlines</span><span class="op" id="26879">(</span><span class="ident" id="26880">t</span>&nbsp;<span class="op" id="26882">*</span><span class="ident" id="26883"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="26890">.</span><span class="ident" id="26891">T</span><span class="op" id="26892">)</span>&nbsp;<span class="op" id="26894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="26897">for</span>&nbsp;<span class="ident" id="26901">_</span><span class="op" id="26902">,</span>&nbsp;<span class="ident" id="26904">e</span>&nbsp;<span class="op" id="26906">:=</span>&nbsp;<span class="keyword" id="26909">range</span>&nbsp;<span class="ident" id="26915"><a href="/bufio/bufio_test.go.html#26351">readLineNewlinesTests</a></span>&nbsp;<span class="op" id="26937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="26941"><a href="/bufio/bufio_test.go.html#26995">testReadLineNewlines</a></span><span class="op" id="26961">(</span><span class="ident" id="26962"><a href="/bufio/bufio_test.go.html#26880">t</a></span><span class="op" id="26963">,</span>&nbsp;<span class="ident" id="26965"><a href="/bufio/bufio_test.go.html#26904">e</a></span><span class="op" id="26966">.</span><span class="ident" id="26967">input</span><span class="op" id="26972">,</span>&nbsp;<span class="ident" id="26974"><a href="/bufio/bufio_test.go.html#26904">e</a></span><span class="op" id="26975">.</span><span class="ident" id="26976">expect</span><span class="op" id="26982">)</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="26985">}</span><br>
<span class="lineno"></span><span class="op" id="26987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="26990">func</span>&nbsp;<span class="ident" id="26995">testReadLineNewlines</span><span class="op" id="27015">(</span><span class="ident" id="27016">t</span>&nbsp;<span class="op" id="27018">*</span><span class="ident" id="27019"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="27026">.</span><span class="ident" id="27027">T</span><span class="op" id="27028">,</span>&nbsp;<span class="ident" id="27030">input</span>&nbsp;<span class="builtintype" id="27036">string</span><span class="op" id="27042">,</span>&nbsp;<span class="ident" id="27044">expect</span>&nbsp;<span class="op" id="27051">[</span><span class="op" id="27052">]</span><span class="ident" id="27053"><a href="/bufio/bufio_test.go.html#26272">readLineResult</a></span><span class="op" id="27067">)</span>&nbsp;<span class="op" id="27069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27072">b</span>&nbsp;<span class="op" id="27074">:=</span>&nbsp;<span class="ident" id="27077"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="27090">(</span><span class="ident" id="27091"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="27098">.</span><span class="ident" id="27099">NewReader</span><span class="op" id="27108">(</span><span class="ident" id="27109"><a href="/bufio/bufio_test.go.html#27030">input</a></span><span class="op" id="27114">)</span><span class="op" id="27115">,</span>&nbsp;<span class="ident" id="27117"><a href="/bufio/bufio_test.go.html#5980">minReadBufferSize</a></span><span class="op" id="27134">)</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="27137">for</span>&nbsp;<span class="ident" id="27141">i</span><span class="op" id="27142">,</span>&nbsp;<span class="ident" id="27144">e</span>&nbsp;<span class="op" id="27146">:=</span>&nbsp;<span class="keyword" id="27149">range</span>&nbsp;<span class="ident" id="27155"><a href="/bufio/bufio_test.go.html#27044">expect</a></span>&nbsp;<span class="op" id="27162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27166">line</span><span class="op" id="27170">,</span>&nbsp;<span class="ident" id="27172">isPrefix</span><span class="op" id="27180">,</span>&nbsp;<span class="ident" id="27182">err</span>&nbsp;<span class="op" id="27186">:=</span>&nbsp;<span class="ident" id="27189"><a href="/bufio/bufio_test.go.html#27072">b</a></span><span class="op" id="27190">.</span><span class="ident" id="27191">ReadLine</span><span class="op" id="27199">(</span><span class="op" id="27200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="27204">if</span>&nbsp;<span class="op" id="27207">!</span><span class="ident" id="27208"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="27213">.</span><span class="ident" id="27214">Equal</span><span class="op" id="27219">(</span><span class="ident" id="27220"><a href="/bufio/bufio_test.go.html#27166">line</a></span><span class="op" id="27224">,</span>&nbsp;<span class="ident" id="27226"><a href="/bufio/bufio_test.go.html#27144">e</a></span><span class="op" id="27227">.</span><span class="ident" id="27228">line</span><span class="op" id="27232">)</span>&nbsp;<span class="op" id="27234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27239"><a href="/bufio/bufio_test.go.html#27016">t</a></span><span class="op" id="27240">.</span><span class="ident" id="27241">Errorf</span><span class="op" id="27247">(</span><span class="string" id="27248">&#34;%q&nbsp;call&nbsp;%d,&nbsp;line&nbsp;==&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="27281">,</span>&nbsp;<span class="ident" id="27283"><a href="/bufio/bufio_test.go.html#27030">input</a></span><span class="op" id="27288">,</span>&nbsp;<span class="ident" id="27290"><a href="/bufio/bufio_test.go.html#27141">i</a></span><span class="op" id="27291">,</span>&nbsp;<span class="ident" id="27293"><a href="/bufio/bufio_test.go.html#27166">line</a></span><span class="op" id="27297">,</span>&nbsp;<span class="ident" id="27299"><a href="/bufio/bufio_test.go.html#27144">e</a></span><span class="op" id="27300">.</span><span class="ident" id="27301">line</span><span class="op" id="27305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="27310">return</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="27319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="27323">if</span>&nbsp;<span class="ident" id="27326"><a href="/bufio/bufio_test.go.html#27172">isPrefix</a></span>&nbsp;<span class="op" id="27335">!=</span>&nbsp;<span class="ident" id="27338"><a href="/bufio/bufio_test.go.html#27144">e</a></span><span class="op" id="27339">.</span><span class="ident" id="27340">isPrefix</span>&nbsp;<span class="op" id="27349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27354"><a href="/bufio/bufio_test.go.html#27016">t</a></span><span class="op" id="27355">.</span><span class="ident" id="27356">Errorf</span><span class="op" id="27362">(</span><span class="string" id="27363">&#34;%q&nbsp;call&nbsp;%d,&nbsp;isPrefix&nbsp;==&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="27400">,</span>&nbsp;<span class="ident" id="27402"><a href="/bufio/bufio_test.go.html#27030">input</a></span><span class="op" id="27407">,</span>&nbsp;<span class="ident" id="27409"><a href="/bufio/bufio_test.go.html#27141">i</a></span><span class="op" id="27410">,</span>&nbsp;<span class="ident" id="27412"><a href="/bufio/bufio_test.go.html#27172">isPrefix</a></span><span class="op" id="27420">,</span>&nbsp;<span class="ident" id="27422"><a href="/bufio/bufio_test.go.html#27144">e</a></span><span class="op" id="27423">.</span><span class="ident" id="27424">isPrefix</span><span class="op" id="27432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="27437">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="27446">}</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="27450">if</span>&nbsp;<span class="ident" id="27453"><a href="/bufio/bufio_test.go.html#27182">err</a></span>&nbsp;<span class="op" id="27457">!=</span>&nbsp;<span class="ident" id="27460"><a href="/bufio/bufio_test.go.html#27144">e</a></span><span class="op" id="27461">.</span><span class="ident" id="27462">err</span>&nbsp;<span class="op" id="27466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27471"><a href="/bufio/bufio_test.go.html#27016">t</a></span><span class="op" id="27472">.</span><span class="ident" id="27473">Errorf</span><span class="op" id="27479">(</span><span class="string" id="27480">&#34;%q&nbsp;call&nbsp;%d,&nbsp;err&nbsp;==&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="27512">,</span>&nbsp;<span class="ident" id="27514"><a href="/bufio/bufio_test.go.html#27030">input</a></span><span class="op" id="27519">,</span>&nbsp;<span class="ident" id="27521"><a href="/bufio/bufio_test.go.html#27141">i</a></span><span class="op" id="27522">,</span>&nbsp;<span class="ident" id="27524"><a href="/bufio/bufio_test.go.html#27182">err</a></span><span class="op" id="27527">,</span>&nbsp;<span class="ident" id="27529"><a href="/bufio/bufio_test.go.html#27144">e</a></span><span class="op" id="27530">.</span><span class="ident" id="27531">err</span><span class="op" id="27534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="27539">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="27548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="27551">}</span><br>
<span class="lineno">925</span><span class="op" id="27553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="27556">func</span>&nbsp;<span class="ident" id="27561">createTestInput</span><span class="op" id="27576">(</span><span class="ident" id="27577">n</span>&nbsp;<span class="builtintype" id="27579">int</span><span class="op" id="27582">)</span>&nbsp;<span class="op" id="27584">[</span><span class="op" id="27585">]</span><span class="builtintype" id="27586">byte</span>&nbsp;<span class="op" id="27591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27594">input</span>&nbsp;<span class="op" id="27600">:=</span>&nbsp;<span class="builtinfunc" id="27603">make</span><span class="op" id="27607">(</span><span class="op" id="27608">[</span><span class="op" id="27609">]</span><span class="builtintype" id="27610">byte</span><span class="op" id="27614">,</span>&nbsp;<span class="ident" id="27616"><a href="/bufio/bufio_test.go.html#27577">n</a></span><span class="op" id="27617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="27620">for</span>&nbsp;<span class="ident" id="27624">i</span>&nbsp;<span class="op" id="27626">:=</span>&nbsp;<span class="keyword" id="27629">range</span>&nbsp;<span class="ident" id="27635"><a href="/bufio/bufio_test.go.html#27594">input</a></span>&nbsp;<span class="op" id="27641">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="27645">//&nbsp;101&nbsp;and&nbsp;251&nbsp;are&nbsp;arbitrary&nbsp;prime&nbsp;numbers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="27691">//&nbsp;The&nbsp;idea&nbsp;is&nbsp;to&nbsp;create&nbsp;an&nbsp;input&nbsp;sequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="27736">//&nbsp;which&nbsp;doesn&#39;t&nbsp;repeat&nbsp;too&nbsp;frequently.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27778"><a href="/bufio/bufio_test.go.html#27594">input</a></span><span class="op" id="27783">[</span><span class="ident" id="27784"><a href="/bufio/bufio_test.go.html#27624">i</a></span><span class="op" id="27785">]</span>&nbsp;<span class="op" id="27787">=</span>&nbsp;<span class="builtintype" id="27789">byte</span><span class="op" id="27793">(</span><span class="ident" id="27794"><a href="/bufio/bufio_test.go.html#27624">i</a></span>&nbsp;<span class="op" id="27796">%</span>&nbsp;<span class="num" id="27798">251</span><span class="op" id="27801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="27805">if</span>&nbsp;<span class="ident" id="27808"><a href="/bufio/bufio_test.go.html#27624">i</a></span><span class="op" id="27809">%</span><span class="num" id="27810">101</span>&nbsp;<span class="op" id="27814">==</span>&nbsp;<span class="num" id="27817">0</span>&nbsp;<span class="op" id="27819">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27824"><a href="/bufio/bufio_test.go.html#27594">input</a></span><span class="op" id="27829">[</span><span class="ident" id="27830"><a href="/bufio/bufio_test.go.html#27624">i</a></span><span class="op" id="27831">]</span>&nbsp;<span class="op" id="27833">^=</span>&nbsp;<span class="builtintype" id="27836">byte</span><span class="op" id="27840">(</span><span class="ident" id="27841"><a href="/bufio/bufio_test.go.html#27624">i</a></span>&nbsp;<span class="op" id="27843">/</span>&nbsp;<span class="num" id="27845">101</span><span class="op" id="27848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="27852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="27855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="27858">return</span>&nbsp;<span class="ident" id="27865"><a href="/bufio/bufio_test.go.html#27594">input</a></span><br>
<span class="lineno"></span><span class="op" id="27871">}</span><br>
<span class="lineno">940</span><br>
<span class="lineno"></span><span class="keyword" id="27874">func</span>&nbsp;<span class="ident" id="27879">TestReaderWriteTo</span><span class="op" id="27896">(</span><span class="ident" id="27897">t</span>&nbsp;<span class="op" id="27899">*</span><span class="ident" id="27900"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="27907">.</span><span class="ident" id="27908">T</span><span class="op" id="27909">)</span>&nbsp;<span class="op" id="27911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27914">input</span>&nbsp;<span class="op" id="27920">:=</span>&nbsp;<span class="ident" id="27923"><a href="/bufio/bufio_test.go.html#27561">createTestInput</a></span><span class="op" id="27938">(</span><span class="num" id="27939">8192</span><span class="op" id="27943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27946">r</span>&nbsp;<span class="op" id="27948">:=</span>&nbsp;<span class="ident" id="27951"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="27960">(</span><span class="ident" id="27961"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="27971">{</span><span class="ident" id="27972"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="27977">.</span><span class="ident" id="27978">NewReader</span><span class="op" id="27987">(</span><span class="ident" id="27988"><a href="/bufio/bufio_test.go.html#27914">input</a></span><span class="op" id="27993">)</span><span class="op" id="27994">}</span><span class="op" id="27995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="27998">w</span>&nbsp;<span class="op" id="28000">:=</span>&nbsp;<span class="builtinfunc" id="28003">new</span><span class="op" id="28006">(</span><span class="ident" id="28007"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="28012">.</span><span class="ident" id="28013">Buffer</span><span class="op" id="28019">)</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="28022">if</span>&nbsp;<span class="ident" id="28025">n</span><span class="op" id="28026">,</span>&nbsp;<span class="ident" id="28028">err</span>&nbsp;<span class="op" id="28032">:=</span>&nbsp;<span class="ident" id="28035"><a href="/bufio/bufio_test.go.html#27946">r</a></span><span class="op" id="28036">.</span><span class="ident" id="28037">WriteTo</span><span class="op" id="28044">(</span><span class="ident" id="28045"><a href="/bufio/bufio_test.go.html#27998">w</a></span><span class="op" id="28046">)</span><span class="op" id="28047">;</span>&nbsp;<span class="ident" id="28049"><a href="/bufio/bufio_test.go.html#28028">err</a></span>&nbsp;<span class="op" id="28053">!=</span>&nbsp;<span class="ident" id="28056">nil</span>&nbsp;<span class="op" id="28060">||</span>&nbsp;<span class="ident" id="28063"><a href="/bufio/bufio_test.go.html#28025">n</a></span>&nbsp;<span class="op" id="28065">!=</span>&nbsp;<span class="ident" id="28068">int64</span><span class="op" id="28073">(</span><span class="builtinfunc" id="28074">len</span><span class="op" id="28077">(</span><span class="ident" id="28078"><a href="/bufio/bufio_test.go.html#27914">input</a></span><span class="op" id="28083">)</span><span class="op" id="28084">)</span>&nbsp;<span class="op" id="28086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="28090"><a href="/bufio/bufio_test.go.html#27897">t</a></span><span class="op" id="28091">.</span><span class="ident" id="28092">Fatalf</span><span class="op" id="28098">(</span><span class="string" id="28099">&#34;r.WriteTo(w)&nbsp;=&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;%d,&nbsp;nil&#34;</span><span class="op" id="28136">,</span>&nbsp;<span class="ident" id="28138"><a href="/bufio/bufio_test.go.html#28025">n</a></span><span class="op" id="28139">,</span>&nbsp;<span class="ident" id="28141"><a href="/bufio/bufio_test.go.html#28028">err</a></span><span class="op" id="28144">,</span>&nbsp;<span class="builtinfunc" id="28146">len</span><span class="op" id="28149">(</span><span class="ident" id="28150"><a href="/bufio/bufio_test.go.html#27914">input</a></span><span class="op" id="28155">)</span><span class="op" id="28156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="28159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="28163">for</span>&nbsp;<span class="ident" id="28167">i</span><span class="op" id="28168">,</span>&nbsp;<span class="ident" id="28170">val</span>&nbsp;<span class="op" id="28174">:=</span>&nbsp;<span class="keyword" id="28177">range</span>&nbsp;<span class="ident" id="28183"><a href="/bufio/bufio_test.go.html#27998">w</a></span><span class="op" id="28184">.</span><span class="ident" id="28185">Bytes</span><span class="op" id="28190">(</span><span class="op" id="28191">)</span>&nbsp;<span class="op" id="28193">{</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="28197">if</span>&nbsp;<span class="ident" id="28200"><a href="/bufio/bufio_test.go.html#28170">val</a></span>&nbsp;<span class="op" id="28204">!=</span>&nbsp;<span class="ident" id="28207"><a href="/bufio/bufio_test.go.html#27914">input</a></span><span class="op" id="28212">[</span><span class="ident" id="28213"><a href="/bufio/bufio_test.go.html#28167">i</a></span><span class="op" id="28214">]</span>&nbsp;<span class="op" id="28216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="28221"><a href="/bufio/bufio_test.go.html#27897">t</a></span><span class="op" id="28222">.</span><span class="ident" id="28223">Errorf</span><span class="op" id="28229">(</span><span class="string" id="28230">&#34;after&nbsp;write:&nbsp;out[%d]&nbsp;=&nbsp;%#x,&nbsp;want&nbsp;%#x&#34;</span><span class="op" id="28268">,</span>&nbsp;<span class="ident" id="28270"><a href="/bufio/bufio_test.go.html#28167">i</a></span><span class="op" id="28271">,</span>&nbsp;<span class="ident" id="28273"><a href="/bufio/bufio_test.go.html#28170">val</a></span><span class="op" id="28276">,</span>&nbsp;<span class="ident" id="28278"><a href="/bufio/bufio_test.go.html#27914">input</a></span><span class="op" id="28283">[</span><span class="ident" id="28284"><a href="/bufio/bufio_test.go.html#28167">i</a></span><span class="op" id="28285">]</span><span class="op" id="28286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="28290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="28293">}</span><br>
<span class="lineno"></span><span class="op" id="28295">}</span><br>
<span class="lineno">955</span><br>
<span class="lineno"></span><span class="keyword" id="28298">type</span>&nbsp;<span class="ident" id="28303">errorWriterToTest</span>&nbsp;<span class="keyword" id="28321">struct</span>&nbsp;<span class="op" id="28328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="28331">rn</span><span class="op" id="28333">,</span>&nbsp;<span class="ident" id="28335">wn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="28342">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="28347">rerr</span><span class="op" id="28351">,</span>&nbsp;<span class="ident" id="28353">werr</span>&nbsp;<span class="builtintype" id="28358">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="28365">expected</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="28376">error</span><br>
<span class="lineno">960</span><span class="op" id="28382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="28385">func</span>&nbsp;<span class="op" id="28390">(</span><span class="ident" id="28391">r</span>&nbsp;<span class="ident" id="28393"><a href="/bufio/bufio_test.go.html#28303">errorWriterToTest</a></span><span class="op" id="28410">)</span>&nbsp;<span class="ident" id="28412">Read</span><span class="op" id="28416">(</span><span class="ident" id="28417">p</span>&nbsp;<span class="op" id="28419">[</span><span class="op" id="28420">]</span><span class="builtintype" id="28421">byte</span><span class="op" id="28425">)</span>&nbsp;<span class="op" id="28427">(</span><span class="builtintype" id="28428">int</span><span class="op" id="28431">,</span>&nbsp;<span class="builtintype" id="28433">error</span><span class="op" id="28438">)</span>&nbsp;<span class="op" id="28440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="28443">return</span>&nbsp;<span class="builtinfunc" id="28450">len</span><span class="op" id="28453">(</span><span class="ident" id="28454"><a href="/bufio/bufio_test.go.html#28417">p</a></span><span class="op" id="28455">)</span>&nbsp;<span class="op" id="28457">*</span>&nbsp;<span class="ident" id="28459"><a href="/bufio/bufio_test.go.html#28391">r</a></span><span class="op" id="28460">.</span><span class="ident" id="28461">rn</span><span class="op" id="28463">,</span>&nbsp;<span class="ident" id="28465"><a href="/bufio/bufio_test.go.html#28391">r</a></span><span class="op" id="28466">.</span><span class="ident" id="28467">rerr</span><br>
<span class="lineno"></span><span class="op" id="28472">}</span><br>
<span class="lineno">965</span><br>
<span class="lineno"></span><span class="keyword" id="28475">func</span>&nbsp;<span class="op" id="28480">(</span><span class="ident" id="28481">w</span>&nbsp;<span class="ident" id="28483"><a href="/bufio/bufio_test.go.html#28303">errorWriterToTest</a></span><span class="op" id="28500">)</span>&nbsp;<span class="ident" id="28502">Write</span><span class="op" id="28507">(</span><span class="ident" id="28508">p</span>&nbsp;<span class="op" id="28510">[</span><span class="op" id="28511">]</span><span class="builtintype" id="28512">byte</span><span class="op" id="28516">)</span>&nbsp;<span class="op" id="28518">(</span><span class="builtintype" id="28519">int</span><span class="op" id="28522">,</span>&nbsp;<span class="builtintype" id="28524">error</span><span class="op" id="28529">)</span>&nbsp;<span class="op" id="28531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="28534">return</span>&nbsp;<span class="builtinfunc" id="28541">len</span><span class="op" id="28544">(</span><span class="ident" id="28545"><a href="/bufio/bufio_test.go.html#28508">p</a></span><span class="op" id="28546">)</span>&nbsp;<span class="op" id="28548">*</span>&nbsp;<span class="ident" id="28550"><a href="/bufio/bufio_test.go.html#28481">w</a></span><span class="op" id="28551">.</span><span class="ident" id="28552">wn</span><span class="op" id="28554">,</span>&nbsp;<span class="ident" id="28556"><a href="/bufio/bufio_test.go.html#28481">w</a></span><span class="op" id="28557">.</span><span class="ident" id="28558">werr</span><br>
<span class="lineno"></span><span class="op" id="28563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">970</span><span class="keyword" id="28566">var</span>&nbsp;<span class="ident" id="28570">errorWriterToTests</span>&nbsp;<span class="op" id="28589">=</span>&nbsp;<span class="op" id="28591">[</span><span class="op" id="28592">]</span><span class="ident" id="28593"><a href="/bufio/bufio_test.go.html#28303">errorWriterToTest</a></span><span class="op" id="28610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="28613">{</span><span class="num" id="28614">1</span><span class="op" id="28615">,</span>&nbsp;<span class="num" id="28617">0</span><span class="op" id="28618">,</span>&nbsp;<span class="ident" id="28620">nil</span><span class="op" id="28623">,</span>&nbsp;<span class="ident" id="28625"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="28627">.</span><span class="ident" id="28628">ErrClosedPipe</span><span class="op" id="28641">,</span>&nbsp;<span class="ident" id="28643"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="28645">.</span><span class="ident" id="28646">ErrClosedPipe</span><span class="op" id="28659">}</span><span class="op" id="28660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="28663">{</span><span class="num" id="28664">0</span><span class="op" id="28665">,</span>&nbsp;<span class="num" id="28667">1</span><span class="op" id="28668">,</span>&nbsp;<span class="ident" id="28670"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="28672">.</span><span class="ident" id="28673">ErrClosedPipe</span><span class="op" id="28686">,</span>&nbsp;<span class="ident" id="28688">nil</span><span class="op" id="28691">,</span>&nbsp;<span class="ident" id="28693"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="28695">.</span><span class="ident" id="28696">ErrClosedPipe</span><span class="op" id="28709">}</span><span class="op" id="28710">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="28713">{</span><span class="num" id="28714">0</span><span class="op" id="28715">,</span>&nbsp;<span class="num" id="28717">0</span><span class="op" id="28718">,</span>&nbsp;<span class="ident" id="28720"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="28722">.</span><span class="ident" id="28723">ErrUnexpectedEOF</span><span class="op" id="28739">,</span>&nbsp;<span class="ident" id="28741"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="28743">.</span><span class="ident" id="28744">ErrClosedPipe</span><span class="op" id="28757">,</span>&nbsp;<span class="ident" id="28759"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="28761">.</span><span class="ident" id="28762">ErrClosedPipe</span><span class="op" id="28775">}</span><span class="op" id="28776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="28779">{</span><span class="num" id="28780">0</span><span class="op" id="28781">,</span>&nbsp;<span class="num" id="28783">1</span><span class="op" id="28784">,</span>&nbsp;<span class="ident" id="28786"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="28788">.</span><span class="ident" id="28789">EOF</span><span class="op" id="28792">,</span>&nbsp;<span class="ident" id="28794">nil</span><span class="op" id="28797">,</span>&nbsp;<span class="ident" id="28799">nil</span><span class="op" id="28802">}</span><span class="op" id="28803">,</span><br>
<span class="lineno">975</span><span class="op" id="28805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="28808">func</span>&nbsp;<span class="ident" id="28813">TestReaderWriteToErrors</span><span class="op" id="28836">(</span><span class="ident" id="28837">t</span>&nbsp;<span class="op" id="28839">*</span><span class="ident" id="28840"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="28847">.</span><span class="ident" id="28848">T</span><span class="op" id="28849">)</span>&nbsp;<span class="op" id="28851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="28854">for</span>&nbsp;<span class="ident" id="28858">i</span><span class="op" id="28859">,</span>&nbsp;<span class="ident" id="28861">rw</span>&nbsp;<span class="op" id="28864">:=</span>&nbsp;<span class="keyword" id="28867">range</span>&nbsp;<span class="ident" id="28873"><a href="/bufio/bufio_test.go.html#28570">errorWriterToTests</a></span>&nbsp;<span class="op" id="28892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="28896">r</span>&nbsp;<span class="op" id="28898">:=</span>&nbsp;<span class="ident" id="28901"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="28910">(</span><span class="ident" id="28911"><a href="/bufio/bufio_test.go.html#28861">rw</a></span><span class="op" id="28913">)</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="28917">if</span>&nbsp;<span class="ident" id="28920">_</span><span class="op" id="28921">,</span>&nbsp;<span class="ident" id="28923">err</span>&nbsp;<span class="op" id="28927">:=</span>&nbsp;<span class="ident" id="28930"><a href="/bufio/bufio_test.go.html#28896">r</a></span><span class="op" id="28931">.</span><span class="ident" id="28932">WriteTo</span><span class="op" id="28939">(</span><span class="ident" id="28940"><a href="/bufio/bufio_test.go.html#28861">rw</a></span><span class="op" id="28942">)</span><span class="op" id="28943">;</span>&nbsp;<span class="ident" id="28945"><a href="/bufio/bufio_test.go.html#28923">err</a></span>&nbsp;<span class="op" id="28949">!=</span>&nbsp;<span class="ident" id="28952"><a href="/bufio/bufio_test.go.html#28861">rw</a></span><span class="op" id="28954">.</span><span class="ident" id="28955">expected</span>&nbsp;<span class="op" id="28964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="28969"><a href="/bufio/bufio_test.go.html#28837">t</a></span><span class="op" id="28970">.</span><span class="ident" id="28971">Errorf</span><span class="op" id="28977">(</span><span class="string" id="28978">&#34;r.WriteTo(errorWriterToTests[%d])&nbsp;=&nbsp;_,&nbsp;%v,&nbsp;want&nbsp;_,%v&#34;</span><span class="op" id="29032">,</span>&nbsp;<span class="ident" id="29034"><a href="/bufio/bufio_test.go.html#28858">i</a></span><span class="op" id="29035">,</span>&nbsp;<span class="ident" id="29037"><a href="/bufio/bufio_test.go.html#28923">err</a></span><span class="op" id="29040">,</span>&nbsp;<span class="ident" id="29042"><a href="/bufio/bufio_test.go.html#28861">rw</a></span><span class="op" id="29044">.</span><span class="ident" id="29045">expected</span><span class="op" id="29053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="29057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="29060">}</span><br>
<span class="lineno"></span><span class="op" id="29062">}</span><br>
<span class="lineno">985</span><br>
<span class="lineno"></span><span class="keyword" id="29065">func</span>&nbsp;<span class="ident" id="29070">TestWriterReadFrom</span><span class="op" id="29088">(</span><span class="ident" id="29089">t</span>&nbsp;<span class="op" id="29091">*</span><span class="ident" id="29092"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="29099">.</span><span class="ident" id="29100">T</span><span class="op" id="29101">)</span>&nbsp;<span class="op" id="29103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29106">ws</span>&nbsp;<span class="op" id="29109">:=</span>&nbsp;<span class="op" id="29112">[</span><span class="op" id="29113">]</span><span class="keyword" id="29114">func</span><span class="op" id="29118">(</span><span class="ident" id="29119"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="29121">.</span><span class="ident" id="29122">Writer</span><span class="op" id="29128">)</span>&nbsp;<span class="ident" id="29130"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="29132">.</span><span class="ident" id="29133">Writer</span><span class="op" id="29139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="29143">func</span><span class="op" id="29147">(</span><span class="ident" id="29148">w</span>&nbsp;<span class="ident" id="29150"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="29152">.</span><span class="ident" id="29153">Writer</span><span class="op" id="29159">)</span>&nbsp;<span class="ident" id="29161"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="29163">.</span><span class="ident" id="29164">Writer</span>&nbsp;<span class="op" id="29171">{</span>&nbsp;<span class="keyword" id="29173">return</span>&nbsp;<span class="ident" id="29180"><a href="/bufio/bufio_test.go.html#36864">onlyWriter</a></span><span class="op" id="29190">{</span><span class="ident" id="29191"><a href="/bufio/bufio_test.go.html#29148">w</a></span><span class="op" id="29192">}</span>&nbsp;<span class="op" id="29194">}</span><span class="op" id="29195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="29199">func</span><span class="op" id="29203">(</span><span class="ident" id="29204">w</span>&nbsp;<span class="ident" id="29206"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="29208">.</span><span class="ident" id="29209">Writer</span><span class="op" id="29215">)</span>&nbsp;<span class="ident" id="29217"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="29219">.</span><span class="ident" id="29220">Writer</span>&nbsp;<span class="op" id="29227">{</span>&nbsp;<span class="keyword" id="29229">return</span>&nbsp;<span class="ident" id="29236"><a href="/bufio/bufio_test.go.html#29204">w</a></span>&nbsp;<span class="op" id="29238">}</span><span class="op" id="29239">,</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="29242">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29246">rs</span>&nbsp;<span class="op" id="29249">:=</span>&nbsp;<span class="op" id="29252">[</span><span class="op" id="29253">]</span><span class="keyword" id="29254">func</span><span class="op" id="29258">(</span><span class="ident" id="29259"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="29261">.</span><span class="ident" id="29262">Reader</span><span class="op" id="29268">)</span>&nbsp;<span class="ident" id="29270"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="29272">.</span><span class="ident" id="29273">Reader</span><span class="op" id="29279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29283"><a href="/bufio/bufio_test.go.html#3466">iotest</a></span><span class="op" id="29289">.</span><span class="ident" id="29290">DataErrReader</span><span class="op" id="29303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="29307">func</span><span class="op" id="29311">(</span><span class="ident" id="29312">r</span>&nbsp;<span class="ident" id="29314"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="29316">.</span><span class="ident" id="29317">Reader</span><span class="op" id="29323">)</span>&nbsp;<span class="ident" id="29325"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="29327">.</span><span class="ident" id="29328">Reader</span>&nbsp;<span class="op" id="29335">{</span>&nbsp;<span class="keyword" id="29337">return</span>&nbsp;<span class="ident" id="29344"><a href="/bufio/bufio_test.go.html#29312">r</a></span>&nbsp;<span class="op" id="29346">}</span><span class="op" id="29347">,</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="29350">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="29354">for</span>&nbsp;<span class="ident" id="29358">ri</span><span class="op" id="29360">,</span>&nbsp;<span class="ident" id="29362">rfunc</span>&nbsp;<span class="op" id="29368">:=</span>&nbsp;<span class="keyword" id="29371">range</span>&nbsp;<span class="ident" id="29377"><a href="/bufio/bufio_test.go.html#29246">rs</a></span>&nbsp;<span class="op" id="29380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="29384">for</span>&nbsp;<span class="ident" id="29388">wi</span><span class="op" id="29390">,</span>&nbsp;<span class="ident" id="29392">wfunc</span>&nbsp;<span class="op" id="29398">:=</span>&nbsp;<span class="keyword" id="29401">range</span>&nbsp;<span class="ident" id="29407"><a href="/bufio/bufio_test.go.html#29106">ws</a></span>&nbsp;<span class="op" id="29410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29415">input</span>&nbsp;<span class="op" id="29421">:=</span>&nbsp;<span class="ident" id="29424"><a href="/bufio/bufio_test.go.html#27561">createTestInput</a></span><span class="op" id="29439">(</span><span class="num" id="29440">8192</span><span class="op" id="29444">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29449">b</span>&nbsp;<span class="op" id="29451">:=</span>&nbsp;<span class="builtinfunc" id="29454">new</span><span class="op" id="29457">(</span><span class="ident" id="29458"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="29463">.</span><span class="ident" id="29464">Buffer</span><span class="op" id="29470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29475">w</span>&nbsp;<span class="op" id="29477">:=</span>&nbsp;<span class="ident" id="29480"><a href="/bufio/bufio.go.html#3230224">NewWriter</a></span><span class="op" id="29489">(</span><span class="ident" id="29490"><a href="/bufio/bufio_test.go.html#29392">wfunc</a></span><span class="op" id="29495">(</span><span class="ident" id="29496"><a href="/bufio/bufio_test.go.html#29449">b</a></span><span class="op" id="29497">)</span><span class="op" id="29498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29503">r</span>&nbsp;<span class="op" id="29505">:=</span>&nbsp;<span class="ident" id="29508"><a href="/bufio/bufio_test.go.html#29362">rfunc</a></span><span class="op" id="29513">(</span><span class="ident" id="29514"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="29519">.</span><span class="ident" id="29520">NewReader</span><span class="op" id="29529">(</span><span class="ident" id="29530"><a href="/bufio/bufio_test.go.html#29415">input</a></span><span class="op" id="29535">)</span><span class="op" id="29536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="29541">if</span>&nbsp;<span class="ident" id="29544">n</span><span class="op" id="29545">,</span>&nbsp;<span class="ident" id="29547">err</span>&nbsp;<span class="op" id="29551">:=</span>&nbsp;<span class="ident" id="29554"><a href="/bufio/bufio_test.go.html#29475">w</a></span><span class="op" id="29555">.</span><span class="ident" id="29556">ReadFrom</span><span class="op" id="29564">(</span><span class="ident" id="29565"><a href="/bufio/bufio_test.go.html#29503">r</a></span><span class="op" id="29566">)</span><span class="op" id="29567">;</span>&nbsp;<span class="ident" id="29569"><a href="/bufio/bufio_test.go.html#29547">err</a></span>&nbsp;<span class="op" id="29573">!=</span>&nbsp;<span class="ident" id="29576">nil</span>&nbsp;<span class="op" id="29580">||</span>&nbsp;<span class="ident" id="29583"><a href="/bufio/bufio_test.go.html#29544">n</a></span>&nbsp;<span class="op" id="29585">!=</span>&nbsp;<span class="ident" id="29588">int64</span><span class="op" id="29593">(</span><span class="builtinfunc" id="29594">len</span><span class="op" id="29597">(</span><span class="ident" id="29598"><a href="/bufio/bufio_test.go.html#29415">input</a></span><span class="op" id="29603">)</span><span class="op" id="29604">)</span>&nbsp;<span class="op" id="29606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29612"><a href="/bufio/bufio_test.go.html#29089">t</a></span><span class="op" id="29613">.</span><span class="ident" id="29614">Errorf</span><span class="op" id="29620">(</span><span class="string" id="29621">&#34;ws[%d],rs[%d]:&nbsp;w.ReadFrom(r)&nbsp;=&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;%d,&nbsp;nil&#34;</span><span class="op" id="29674">,</span>&nbsp;<span class="ident" id="29676"><a href="/bufio/bufio_test.go.html#29388">wi</a></span><span class="op" id="29678">,</span>&nbsp;<span class="ident" id="29680"><a href="/bufio/bufio_test.go.html#29358">ri</a></span><span class="op" id="29682">,</span>&nbsp;<span class="ident" id="29684"><a href="/bufio/bufio_test.go.html#29544">n</a></span><span class="op" id="29685">,</span>&nbsp;<span class="ident" id="29687"><a href="/bufio/bufio_test.go.html#29547">err</a></span><span class="op" id="29690">,</span>&nbsp;<span class="builtinfunc" id="29692">len</span><span class="op" id="29695">(</span><span class="ident" id="29696"><a href="/bufio/bufio_test.go.html#29415">input</a></span><span class="op" id="29701">)</span><span class="op" id="29702">)</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="29708">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="29720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="29725">if</span>&nbsp;<span class="ident" id="29728">err</span>&nbsp;<span class="op" id="29732">:=</span>&nbsp;<span class="ident" id="29735"><a href="/bufio/bufio_test.go.html#29475">w</a></span><span class="op" id="29736">.</span><span class="ident" id="29737">Flush</span><span class="op" id="29742">(</span><span class="op" id="29743">)</span><span class="op" id="29744">;</span>&nbsp;<span class="ident" id="29746"><a href="/bufio/bufio_test.go.html#29728">err</a></span>&nbsp;<span class="op" id="29750">!=</span>&nbsp;<span class="ident" id="29753">nil</span>&nbsp;<span class="op" id="29757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29763"><a href="/bufio/bufio_test.go.html#29089">t</a></span><span class="op" id="29764">.</span><span class="ident" id="29765">Errorf</span><span class="op" id="29771">(</span><span class="string" id="29772">&#34;Flush&nbsp;returned&nbsp;%v&#34;</span><span class="op" id="29791">,</span>&nbsp;<span class="ident" id="29793"><a href="/bufio/bufio_test.go.html#29728">err</a></span><span class="op" id="29796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="29802">continue</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="29814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="29819">if</span>&nbsp;<span class="ident" id="29822">got</span><span class="op" id="29825">,</span>&nbsp;<span class="ident" id="29827">want</span>&nbsp;<span class="op" id="29832">:=</span>&nbsp;<span class="ident" id="29835"><a href="/bufio/bufio_test.go.html#29449">b</a></span><span class="op" id="29836">.</span><span class="ident" id="29837">String</span><span class="op" id="29843">(</span><span class="op" id="29844">)</span><span class="op" id="29845">,</span>&nbsp;<span class="builtintype" id="29847">string</span><span class="op" id="29853">(</span><span class="ident" id="29854"><a href="/bufio/bufio_test.go.html#29415">input</a></span><span class="op" id="29859">)</span><span class="op" id="29860">;</span>&nbsp;<span class="ident" id="29862"><a href="/bufio/bufio_test.go.html#29822">got</a></span>&nbsp;<span class="op" id="29866">!=</span>&nbsp;<span class="ident" id="29869"><a href="/bufio/bufio_test.go.html#29827">want</a></span>&nbsp;<span class="op" id="29874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29880"><a href="/bufio/bufio_test.go.html#29089">t</a></span><span class="op" id="29881">.</span><span class="ident" id="29882">Errorf</span><span class="op" id="29888">(</span><span class="string" id="29889">&#34;ws[%d],&nbsp;rs[%d]:\ngot&nbsp;&nbsp;%q\nwant&nbsp;%q\n&#34;</span><span class="op" id="29926">,</span>&nbsp;<span class="ident" id="29928"><a href="/bufio/bufio_test.go.html#29388">wi</a></span><span class="op" id="29930">,</span>&nbsp;<span class="ident" id="29932"><a href="/bufio/bufio_test.go.html#29358">ri</a></span><span class="op" id="29934">,</span>&nbsp;<span class="ident" id="29936"><a href="/bufio/bufio_test.go.html#29822">got</a></span><span class="op" id="29939">,</span>&nbsp;<span class="ident" id="29941"><a href="/bufio/bufio_test.go.html#29827">want</a></span><span class="op" id="29945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="29950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="29954">}</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="29957">}</span><br>
<span class="lineno"></span><span class="op" id="29959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="29962">type</span>&nbsp;<span class="ident" id="29967">errorReaderFromTest</span>&nbsp;<span class="keyword" id="29987">struct</span>&nbsp;<span class="op" id="29994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="29997">rn</span><span class="op" id="29999">,</span>&nbsp;<span class="ident" id="30001">wn</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="30008">int</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="30013">rerr</span><span class="op" id="30017">,</span>&nbsp;<span class="ident" id="30019">werr</span>&nbsp;<span class="builtintype" id="30024">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="30031">expected</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="30042">error</span><br>
<span class="lineno"></span><span class="op" id="30048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="30051">func</span>&nbsp;<span class="op" id="30056">(</span><span class="ident" id="30057">r</span>&nbsp;<span class="ident" id="30059"><a href="/bufio/bufio_test.go.html#29967">errorReaderFromTest</a></span><span class="op" id="30078">)</span>&nbsp;<span class="ident" id="30080">Read</span><span class="op" id="30084">(</span><span class="ident" id="30085">p</span>&nbsp;<span class="op" id="30087">[</span><span class="op" id="30088">]</span><span class="builtintype" id="30089">byte</span><span class="op" id="30093">)</span>&nbsp;<span class="op" id="30095">(</span><span class="builtintype" id="30096">int</span><span class="op" id="30099">,</span>&nbsp;<span class="builtintype" id="30101">error</span><span class="op" id="30106">)</span>&nbsp;<span class="op" id="30108">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="30111">return</span>&nbsp;<span class="builtinfunc" id="30118">len</span><span class="op" id="30121">(</span><span class="ident" id="30122"><a href="/bufio/bufio_test.go.html#30085">p</a></span><span class="op" id="30123">)</span>&nbsp;<span class="op" id="30125">*</span>&nbsp;<span class="ident" id="30127"><a href="/bufio/bufio_test.go.html#30057">r</a></span><span class="op" id="30128">.</span><span class="ident" id="30129">rn</span><span class="op" id="30131">,</span>&nbsp;<span class="ident" id="30133"><a href="/bufio/bufio_test.go.html#30057">r</a></span><span class="op" id="30134">.</span><span class="ident" id="30135">rerr</span><br>
<span class="lineno"></span><span class="op" id="30140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="30143">func</span>&nbsp;<span class="op" id="30148">(</span><span class="ident" id="30149">w</span>&nbsp;<span class="ident" id="30151"><a href="/bufio/bufio_test.go.html#29967">errorReaderFromTest</a></span><span class="op" id="30170">)</span>&nbsp;<span class="ident" id="30172">Write</span><span class="op" id="30177">(</span><span class="ident" id="30178">p</span>&nbsp;<span class="op" id="30180">[</span><span class="op" id="30181">]</span><span class="builtintype" id="30182">byte</span><span class="op" id="30186">)</span>&nbsp;<span class="op" id="30188">(</span><span class="builtintype" id="30189">int</span><span class="op" id="30192">,</span>&nbsp;<span class="builtintype" id="30194">error</span><span class="op" id="30199">)</span>&nbsp;<span class="op" id="30201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="30204">return</span>&nbsp;<span class="builtinfunc" id="30211">len</span><span class="op" id="30214">(</span><span class="ident" id="30215"><a href="/bufio/bufio_test.go.html#30178">p</a></span><span class="op" id="30216">)</span>&nbsp;<span class="op" id="30218">*</span>&nbsp;<span class="ident" id="30220"><a href="/bufio/bufio_test.go.html#30149">w</a></span><span class="op" id="30221">.</span><span class="ident" id="30222">wn</span><span class="op" id="30224">,</span>&nbsp;<span class="ident" id="30226"><a href="/bufio/bufio_test.go.html#30149">w</a></span><span class="op" id="30227">.</span><span class="ident" id="30228">werr</span><br>
<span class="lineno">1030</span><span class="op" id="30233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="30236">var</span>&nbsp;<span class="ident" id="30240">errorReaderFromTests</span>&nbsp;<span class="op" id="30261">=</span>&nbsp;<span class="op" id="30263">[</span><span class="op" id="30264">]</span><span class="ident" id="30265"><a href="/bufio/bufio_test.go.html#29967">errorReaderFromTest</a></span><span class="op" id="30284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="30287">{</span><span class="num" id="30288">0</span><span class="op" id="30289">,</span>&nbsp;<span class="num" id="30291">1</span><span class="op" id="30292">,</span>&nbsp;<span class="ident" id="30294"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="30296">.</span><span class="ident" id="30297">EOF</span><span class="op" id="30300">,</span>&nbsp;<span class="ident" id="30302">nil</span><span class="op" id="30305">,</span>&nbsp;<span class="ident" id="30307">nil</span><span class="op" id="30310">}</span><span class="op" id="30311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="30314">{</span><span class="num" id="30315">1</span><span class="op" id="30316">,</span>&nbsp;<span class="num" id="30318">1</span><span class="op" id="30319">,</span>&nbsp;<span class="ident" id="30321"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="30323">.</span><span class="ident" id="30324">EOF</span><span class="op" id="30327">,</span>&nbsp;<span class="ident" id="30329">nil</span><span class="op" id="30332">,</span>&nbsp;<span class="ident" id="30334">nil</span><span class="op" id="30337">}</span><span class="op" id="30338">,</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="30341">{</span><span class="num" id="30342">0</span><span class="op" id="30343">,</span>&nbsp;<span class="num" id="30345">1</span><span class="op" id="30346">,</span>&nbsp;<span class="ident" id="30348"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="30350">.</span><span class="ident" id="30351">ErrClosedPipe</span><span class="op" id="30364">,</span>&nbsp;<span class="ident" id="30366">nil</span><span class="op" id="30369">,</span>&nbsp;<span class="ident" id="30371"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="30373">.</span><span class="ident" id="30374">ErrClosedPipe</span><span class="op" id="30387">}</span><span class="op" id="30388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="30391">{</span><span class="num" id="30392">0</span><span class="op" id="30393">,</span>&nbsp;<span class="num" id="30395">0</span><span class="op" id="30396">,</span>&nbsp;<span class="ident" id="30398"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="30400">.</span><span class="ident" id="30401">ErrClosedPipe</span><span class="op" id="30414">,</span>&nbsp;<span class="ident" id="30416"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="30418">.</span><span class="ident" id="30419">ErrShortWrite</span><span class="op" id="30432">,</span>&nbsp;<span class="ident" id="30434"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="30436">.</span><span class="ident" id="30437">ErrClosedPipe</span><span class="op" id="30450">}</span><span class="op" id="30451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="30454">{</span><span class="num" id="30455">1</span><span class="op" id="30456">,</span>&nbsp;<span class="num" id="30458">0</span><span class="op" id="30459">,</span>&nbsp;<span class="ident" id="30461">nil</span><span class="op" id="30464">,</span>&nbsp;<span class="ident" id="30466"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="30468">.</span><span class="ident" id="30469">ErrShortWrite</span><span class="op" id="30482">,</span>&nbsp;<span class="ident" id="30484"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="30486">.</span><span class="ident" id="30487">ErrShortWrite</span><span class="op" id="30500">}</span><span class="op" id="30501">,</span><br>
<span class="lineno"></span><span class="op" id="30503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1040</span><span class="keyword" id="30506">func</span>&nbsp;<span class="ident" id="30511">TestWriterReadFromErrors</span><span class="op" id="30535">(</span><span class="ident" id="30536">t</span>&nbsp;<span class="op" id="30538">*</span><span class="ident" id="30539"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="30546">.</span><span class="ident" id="30547">T</span><span class="op" id="30548">)</span>&nbsp;<span class="op" id="30550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="30553">for</span>&nbsp;<span class="ident" id="30557">i</span><span class="op" id="30558">,</span>&nbsp;<span class="ident" id="30560">rw</span>&nbsp;<span class="op" id="30563">:=</span>&nbsp;<span class="keyword" id="30566">range</span>&nbsp;<span class="ident" id="30572"><a href="/bufio/bufio_test.go.html#30240">errorReaderFromTests</a></span>&nbsp;<span class="op" id="30593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="30597">w</span>&nbsp;<span class="op" id="30599">:=</span>&nbsp;<span class="ident" id="30602"><a href="/bufio/bufio.go.html#3230224">NewWriter</a></span><span class="op" id="30611">(</span><span class="ident" id="30612"><a href="/bufio/bufio_test.go.html#30560">rw</a></span><span class="op" id="30614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="30618">if</span>&nbsp;<span class="ident" id="30621">_</span><span class="op" id="30622">,</span>&nbsp;<span class="ident" id="30624">err</span>&nbsp;<span class="op" id="30628">:=</span>&nbsp;<span class="ident" id="30631"><a href="/bufio/bufio_test.go.html#30597">w</a></span><span class="op" id="30632">.</span><span class="ident" id="30633">ReadFrom</span><span class="op" id="30641">(</span><span class="ident" id="30642"><a href="/bufio/bufio_test.go.html#30560">rw</a></span><span class="op" id="30644">)</span><span class="op" id="30645">;</span>&nbsp;<span class="ident" id="30647"><a href="/bufio/bufio_test.go.html#30624">err</a></span>&nbsp;<span class="op" id="30651">!=</span>&nbsp;<span class="ident" id="30654"><a href="/bufio/bufio_test.go.html#30560">rw</a></span><span class="op" id="30656">.</span><span class="ident" id="30657">expected</span>&nbsp;<span class="op" id="30666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="30671"><a href="/bufio/bufio_test.go.html#30536">t</a></span><span class="op" id="30672">.</span><span class="ident" id="30673">Errorf</span><span class="op" id="30679">(</span><span class="string" id="30680">&#34;w.ReadFrom(errorReaderFromTests[%d])&nbsp;=&nbsp;_,&nbsp;%v,&nbsp;want&nbsp;_,%v&#34;</span><span class="op" id="30737">,</span>&nbsp;<span class="ident" id="30739"><a href="/bufio/bufio_test.go.html#30557">i</a></span><span class="op" id="30740">,</span>&nbsp;<span class="ident" id="30742"><a href="/bufio/bufio_test.go.html#30624">err</a></span><span class="op" id="30745">,</span>&nbsp;<span class="ident" id="30747"><a href="/bufio/bufio_test.go.html#30560">rw</a></span><span class="op" id="30749">.</span><span class="ident" id="30750">expected</span><span class="op" id="30758">)</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="30762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="30765">}</span><br>
<span class="lineno"></span><span class="op" id="30767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="30770">//&nbsp;TestWriterReadFromCounts&nbsp;tests&nbsp;that&nbsp;using&nbsp;io.Copy&nbsp;to&nbsp;copy&nbsp;into&nbsp;a</span><br>
<span class="lineno">1050</span><span class="comment" id="30838">//&nbsp;bufio.Writer&nbsp;does&nbsp;not&nbsp;prematurely&nbsp;flush&nbsp;the&nbsp;buffer.&nbsp;For&nbsp;example,&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="30911">//&nbsp;buffering&nbsp;writes&nbsp;to&nbsp;a&nbsp;network&nbsp;socket,&nbsp;excessive&nbsp;network&nbsp;writes&nbsp;should&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="30987">//&nbsp;avoided.</span><br>
<span class="lineno"></span><span class="keyword" id="30999">func</span>&nbsp;<span class="ident" id="31004">TestWriterReadFromCounts</span><span class="op" id="31028">(</span><span class="ident" id="31029">t</span>&nbsp;<span class="op" id="31031">*</span><span class="ident" id="31032"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="31039">.</span><span class="ident" id="31040">T</span><span class="op" id="31041">)</span>&nbsp;<span class="op" id="31043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="31046">var</span>&nbsp;<span class="ident" id="31050">w0</span>&nbsp;<span class="ident" id="31053"><a href="/bufio/bufio_test.go.html#32443">writeCountingDiscard</a></span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31075">b0</span>&nbsp;<span class="op" id="31078">:=</span>&nbsp;<span class="ident" id="31081"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="31094">(</span><span class="op" id="31095">&amp;</span><span class="ident" id="31096"><a href="/bufio/bufio_test.go.html#31050">w0</a></span><span class="op" id="31098">,</span>&nbsp;<span class="num" id="31100">1234</span><span class="op" id="31104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31107"><a href="/bufio/bufio_test.go.html#31075">b0</a></span><span class="op" id="31109">.</span><span class="ident" id="31110">WriteString</span><span class="op" id="31121">(</span><span class="ident" id="31122"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="31129">.</span><span class="ident" id="31130">Repeat</span><span class="op" id="31136">(</span><span class="string" id="31137">&#34;x&#34;</span><span class="op" id="31140">,</span>&nbsp;<span class="num" id="31142">1000</span><span class="op" id="31146">)</span><span class="op" id="31147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="31150">if</span>&nbsp;<span class="ident" id="31153"><a href="/bufio/bufio_test.go.html#31050">w0</a></span>&nbsp;<span class="op" id="31156">!=</span>&nbsp;<span class="num" id="31159">0</span>&nbsp;<span class="op" id="31161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31165"><a href="/bufio/bufio_test.go.html#31029">t</a></span><span class="op" id="31166">.</span><span class="ident" id="31167">Fatalf</span><span class="op" id="31173">(</span><span class="string" id="31174">&#34;write&nbsp;1000&nbsp;&#39;x&#39;s:&nbsp;got&nbsp;%d&nbsp;writes,&nbsp;want&nbsp;0&#34;</span><span class="op" id="31214">,</span>&nbsp;<span class="ident" id="31216"><a href="/bufio/bufio_test.go.html#31050">w0</a></span><span class="op" id="31218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="31221">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31224"><a href="/bufio/bufio_test.go.html#31075">b0</a></span><span class="op" id="31226">.</span><span class="ident" id="31227">WriteString</span><span class="op" id="31238">(</span><span class="ident" id="31239"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="31246">.</span><span class="ident" id="31247">Repeat</span><span class="op" id="31253">(</span><span class="string" id="31254">&#34;x&#34;</span><span class="op" id="31257">,</span>&nbsp;<span class="num" id="31259">200</span><span class="op" id="31262">)</span><span class="op" id="31263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="31266">if</span>&nbsp;<span class="ident" id="31269"><a href="/bufio/bufio_test.go.html#31050">w0</a></span>&nbsp;<span class="op" id="31272">!=</span>&nbsp;<span class="num" id="31275">0</span>&nbsp;<span class="op" id="31277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31281"><a href="/bufio/bufio_test.go.html#31029">t</a></span><span class="op" id="31282">.</span><span class="ident" id="31283">Fatalf</span><span class="op" id="31289">(</span><span class="string" id="31290">&#34;write&nbsp;1200&nbsp;&#39;x&#39;s:&nbsp;got&nbsp;%d&nbsp;writes,&nbsp;want&nbsp;0&#34;</span><span class="op" id="31330">,</span>&nbsp;<span class="ident" id="31332"><a href="/bufio/bufio_test.go.html#31050">w0</a></span><span class="op" id="31334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="31337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31340"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="31342">.</span><span class="ident" id="31343">Copy</span><span class="op" id="31347">(</span><span class="ident" id="31348"><a href="/bufio/bufio_test.go.html#31075">b0</a></span><span class="op" id="31350">,</span>&nbsp;<span class="ident" id="31352"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="31362">{</span><span class="ident" id="31363"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="31370">.</span><span class="ident" id="31371">NewReader</span><span class="op" id="31380">(</span><span class="ident" id="31381"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="31388">.</span><span class="ident" id="31389">Repeat</span><span class="op" id="31395">(</span><span class="string" id="31396">&#34;x&#34;</span><span class="op" id="31399">,</span>&nbsp;<span class="num" id="31401">30</span><span class="op" id="31403">)</span><span class="op" id="31404">)</span><span class="op" id="31405">}</span><span class="op" id="31406">)</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="31409">if</span>&nbsp;<span class="ident" id="31412"><a href="/bufio/bufio_test.go.html#31050">w0</a></span>&nbsp;<span class="op" id="31415">!=</span>&nbsp;<span class="num" id="31418">0</span>&nbsp;<span class="op" id="31420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31424"><a href="/bufio/bufio_test.go.html#31029">t</a></span><span class="op" id="31425">.</span><span class="ident" id="31426">Fatalf</span><span class="op" id="31432">(</span><span class="string" id="31433">&#34;write&nbsp;1230&nbsp;&#39;x&#39;s:&nbsp;got&nbsp;%d&nbsp;writes,&nbsp;want&nbsp;0&#34;</span><span class="op" id="31473">,</span>&nbsp;<span class="ident" id="31475"><a href="/bufio/bufio_test.go.html#31050">w0</a></span><span class="op" id="31477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="31480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31483"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="31485">.</span><span class="ident" id="31486">Copy</span><span class="op" id="31490">(</span><span class="ident" id="31491"><a href="/bufio/bufio_test.go.html#31075">b0</a></span><span class="op" id="31493">,</span>&nbsp;<span class="ident" id="31495"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="31505">{</span><span class="ident" id="31506"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="31513">.</span><span class="ident" id="31514">NewReader</span><span class="op" id="31523">(</span><span class="ident" id="31524"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="31531">.</span><span class="ident" id="31532">Repeat</span><span class="op" id="31538">(</span><span class="string" id="31539">&#34;x&#34;</span><span class="op" id="31542">,</span>&nbsp;<span class="num" id="31544">9</span><span class="op" id="31545">)</span><span class="op" id="31546">)</span><span class="op" id="31547">}</span><span class="op" id="31548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="31551">if</span>&nbsp;<span class="ident" id="31554"><a href="/bufio/bufio_test.go.html#31050">w0</a></span>&nbsp;<span class="op" id="31557">!=</span>&nbsp;<span class="num" id="31560">1</span>&nbsp;<span class="op" id="31562">{</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31566"><a href="/bufio/bufio_test.go.html#31029">t</a></span><span class="op" id="31567">.</span><span class="ident" id="31568">Fatalf</span><span class="op" id="31574">(</span><span class="string" id="31575">&#34;write&nbsp;1239&nbsp;&#39;x&#39;s:&nbsp;got&nbsp;%d&nbsp;writes,&nbsp;want&nbsp;1&#34;</span><span class="op" id="31615">,</span>&nbsp;<span class="ident" id="31617"><a href="/bufio/bufio_test.go.html#31050">w0</a></span><span class="op" id="31619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="31622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="31626">var</span>&nbsp;<span class="ident" id="31630">w1</span>&nbsp;<span class="ident" id="31633"><a href="/bufio/bufio_test.go.html#32443">writeCountingDiscard</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31655">b1</span>&nbsp;<span class="op" id="31658">:=</span>&nbsp;<span class="ident" id="31661"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="31674">(</span><span class="op" id="31675">&amp;</span><span class="ident" id="31676"><a href="/bufio/bufio_test.go.html#31630">w1</a></span><span class="op" id="31678">,</span>&nbsp;<span class="num" id="31680">1234</span><span class="op" id="31684">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31687"><a href="/bufio/bufio_test.go.html#31655">b1</a></span><span class="op" id="31689">.</span><span class="ident" id="31690">WriteString</span><span class="op" id="31701">(</span><span class="ident" id="31702"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="31709">.</span><span class="ident" id="31710">Repeat</span><span class="op" id="31716">(</span><span class="string" id="31717">&#34;x&#34;</span><span class="op" id="31720">,</span>&nbsp;<span class="num" id="31722">1200</span><span class="op" id="31726">)</span><span class="op" id="31727">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31730"><a href="/bufio/bufio_test.go.html#31655">b1</a></span><span class="op" id="31732">.</span><span class="ident" id="31733">Flush</span><span class="op" id="31738">(</span><span class="op" id="31739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="31742">if</span>&nbsp;<span class="ident" id="31745"><a href="/bufio/bufio_test.go.html#31630">w1</a></span>&nbsp;<span class="op" id="31748">!=</span>&nbsp;<span class="num" id="31751">1</span>&nbsp;<span class="op" id="31753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31757"><a href="/bufio/bufio_test.go.html#31029">t</a></span><span class="op" id="31758">.</span><span class="ident" id="31759">Fatalf</span><span class="op" id="31765">(</span><span class="string" id="31766">&#34;flush&nbsp;1200&nbsp;&#39;x&#39;s:&nbsp;got&nbsp;%d&nbsp;writes,&nbsp;want&nbsp;1&#34;</span><span class="op" id="31806">,</span>&nbsp;<span class="ident" id="31808"><a href="/bufio/bufio_test.go.html#31630">w1</a></span><span class="op" id="31810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="31813">}</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31816"><a href="/bufio/bufio_test.go.html#31655">b1</a></span><span class="op" id="31818">.</span><span class="ident" id="31819">WriteString</span><span class="op" id="31830">(</span><span class="ident" id="31831"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="31838">.</span><span class="ident" id="31839">Repeat</span><span class="op" id="31845">(</span><span class="string" id="31846">&#34;x&#34;</span><span class="op" id="31849">,</span>&nbsp;<span class="num" id="31851">89</span><span class="op" id="31853">)</span><span class="op" id="31854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="31857">if</span>&nbsp;<span class="ident" id="31860"><a href="/bufio/bufio_test.go.html#31630">w1</a></span>&nbsp;<span class="op" id="31863">!=</span>&nbsp;<span class="num" id="31866">1</span>&nbsp;<span class="op" id="31868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31872"><a href="/bufio/bufio_test.go.html#31029">t</a></span><span class="op" id="31873">.</span><span class="ident" id="31874">Fatalf</span><span class="op" id="31880">(</span><span class="string" id="31881">&#34;write&nbsp;1200&nbsp;+&nbsp;89&nbsp;&#39;x&#39;s:&nbsp;got&nbsp;%d&nbsp;writes,&nbsp;want&nbsp;1&#34;</span><span class="op" id="31926">,</span>&nbsp;<span class="ident" id="31928"><a href="/bufio/bufio_test.go.html#31630">w1</a></span><span class="op" id="31930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="31933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="31936"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="31938">.</span><span class="ident" id="31939">Copy</span><span class="op" id="31943">(</span><span class="ident" id="31944"><a href="/bufio/bufio_test.go.html#31655">b1</a></span><span class="op" id="31946">,</span>&nbsp;<span class="ident" id="31948"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="31958">{</span><span class="ident" id="31959"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="31966">.</span><span class="ident" id="31967">NewReader</span><span class="op" id="31976">(</span><span class="ident" id="31977"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="31984">.</span><span class="ident" id="31985">Repeat</span><span class="op" id="31991">(</span><span class="string" id="31992">&#34;x&#34;</span><span class="op" id="31995">,</span>&nbsp;<span class="num" id="31997">700</span><span class="op" id="32000">)</span><span class="op" id="32001">)</span><span class="op" id="32002">}</span><span class="op" id="32003">)</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="32006">if</span>&nbsp;<span class="ident" id="32009"><a href="/bufio/bufio_test.go.html#31630">w1</a></span>&nbsp;<span class="op" id="32012">!=</span>&nbsp;<span class="num" id="32015">1</span>&nbsp;<span class="op" id="32017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="32021"><a href="/bufio/bufio_test.go.html#31029">t</a></span><span class="op" id="32022">.</span><span class="ident" id="32023">Fatalf</span><span class="op" id="32029">(</span><span class="string" id="32030">&#34;write&nbsp;1200&nbsp;+&nbsp;789&nbsp;&#39;x&#39;s:&nbsp;got&nbsp;%d&nbsp;writes,&nbsp;want&nbsp;1&#34;</span><span class="op" id="32076">,</span>&nbsp;<span class="ident" id="32078"><a href="/bufio/bufio_test.go.html#31630">w1</a></span><span class="op" id="32080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="32083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="32086"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="32088">.</span><span class="ident" id="32089">Copy</span><span class="op" id="32093">(</span><span class="ident" id="32094"><a href="/bufio/bufio_test.go.html#31655">b1</a></span><span class="op" id="32096">,</span>&nbsp;<span class="ident" id="32098"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="32108">{</span><span class="ident" id="32109"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="32116">.</span><span class="ident" id="32117">NewReader</span><span class="op" id="32126">(</span><span class="ident" id="32127"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="32134">.</span><span class="ident" id="32135">Repeat</span><span class="op" id="32141">(</span><span class="string" id="32142">&#34;x&#34;</span><span class="op" id="32145">,</span>&nbsp;<span class="num" id="32147">600</span><span class="op" id="32150">)</span><span class="op" id="32151">)</span><span class="op" id="32152">}</span><span class="op" id="32153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="32156">if</span>&nbsp;<span class="ident" id="32159"><a href="/bufio/bufio_test.go.html#31630">w1</a></span>&nbsp;<span class="op" id="32162">!=</span>&nbsp;<span class="num" id="32165">2</span>&nbsp;<span class="op" id="32167">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="32171"><a href="/bufio/bufio_test.go.html#31029">t</a></span><span class="op" id="32172">.</span><span class="ident" id="32173">Fatalf</span><span class="op" id="32179">(</span><span class="string" id="32180">&#34;write&nbsp;1200&nbsp;+&nbsp;1389&nbsp;&#39;x&#39;s:&nbsp;got&nbsp;%d&nbsp;writes,&nbsp;want&nbsp;2&#34;</span><span class="op" id="32227">,</span>&nbsp;<span class="ident" id="32229"><a href="/bufio/bufio_test.go.html#31630">w1</a></span><span class="op" id="32231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="32234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="32237"><a href="/bufio/bufio_test.go.html#31655">b1</a></span><span class="op" id="32239">.</span><span class="ident" id="32240">Flush</span><span class="op" id="32245">(</span><span class="op" id="32246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="32249">if</span>&nbsp;<span class="ident" id="32252"><a href="/bufio/bufio_test.go.html#31630">w1</a></span>&nbsp;<span class="op" id="32255">!=</span>&nbsp;<span class="num" id="32258">3</span>&nbsp;<span class="op" id="32260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="32264"><a href="/bufio/bufio_test.go.html#31029">t</a></span><span class="op" id="32265">.</span><span class="ident" id="32266">Fatalf</span><span class="op" id="32272">(</span><span class="string" id="32273">&#34;flush&nbsp;1200&nbsp;+&nbsp;1389&nbsp;&#39;x&#39;s:&nbsp;got&nbsp;%d&nbsp;writes,&nbsp;want&nbsp;3&#34;</span><span class="op" id="32320">,</span>&nbsp;<span class="ident" id="32322"><a href="/bufio/bufio_test.go.html#31630">w1</a></span><span class="op" id="32324">)</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="32327">}</span><br>
<span class="lineno"></span><span class="op" id="32329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="32332">//&nbsp;A&nbsp;writeCountingDiscard&nbsp;is&nbsp;like&nbsp;ioutil.Discard&nbsp;and&nbsp;counts&nbsp;the&nbsp;number&nbsp;of&nbsp;times</span><br>
<span class="lineno"></span><span class="comment" id="32412">//&nbsp;Write&nbsp;is&nbsp;called&nbsp;on&nbsp;it.</span><br>
<span class="lineno">1100</span><span class="keyword" id="32438">type</span>&nbsp;<span class="ident" id="32443">writeCountingDiscard</span>&nbsp;<span class="builtintype" id="32464">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="32469">func</span>&nbsp;<span class="op" id="32474">(</span><span class="ident" id="32475">w</span>&nbsp;<span class="op" id="32477">*</span><span class="ident" id="32478"><a href="/bufio/bufio_test.go.html#32443">writeCountingDiscard</a></span><span class="op" id="32498">)</span>&nbsp;<span class="ident" id="32500">Write</span><span class="op" id="32505">(</span><span class="ident" id="32506">p</span>&nbsp;<span class="op" id="32508">[</span><span class="op" id="32509">]</span><span class="builtintype" id="32510">byte</span><span class="op" id="32514">)</span>&nbsp;<span class="op" id="32516">(</span><span class="builtintype" id="32517">int</span><span class="op" id="32520">,</span>&nbsp;<span class="builtintype" id="32522">error</span><span class="op" id="32527">)</span>&nbsp;<span class="op" id="32529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="32532">*</span><span class="ident" id="32533"><a href="/bufio/bufio_test.go.html#32475">w</a></span><span class="op" id="32534">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="32538">return</span>&nbsp;<span class="builtinfunc" id="32545">len</span><span class="op" id="32548">(</span><span class="ident" id="32549"><a href="/bufio/bufio_test.go.html#32506">p</a></span><span class="op" id="32550">)</span><span class="op" id="32551">,</span>&nbsp;<span class="ident" id="32553">nil</span><br>
<span class="lineno">1105</span><span class="op" id="32557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="32560">type</span>&nbsp;<span class="ident" id="32565">negativeReader</span>&nbsp;<span class="builtintype" id="32580">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="32585">func</span>&nbsp;<span class="op" id="32590">(</span><span class="ident" id="32591">r</span>&nbsp;<span class="op" id="32593">*</span><span class="ident" id="32594"><a href="/bufio/bufio_test.go.html#32565">negativeReader</a></span><span class="op" id="32608">)</span>&nbsp;<span class="ident" id="32610">Read</span><span class="op" id="32614">(</span><span class="op" id="32615">[</span><span class="op" id="32616">]</span><span class="builtintype" id="32617">byte</span><span class="op" id="32621">)</span>&nbsp;<span class="op" id="32623">(</span><span class="builtintype" id="32624">int</span><span class="op" id="32627">,</span>&nbsp;<span class="builtintype" id="32629">error</span><span class="op" id="32634">)</span>&nbsp;<span class="op" id="32636">{</span>&nbsp;<span class="keyword" id="32638">return</span>&nbsp;<span class="op" id="32645">-</span><span class="num" id="32646">1</span><span class="op" id="32647">,</span>&nbsp;<span class="ident" id="32649">nil</span>&nbsp;<span class="op" id="32653">}</span><br>
<span class="lineno">1110</span><br>
<span class="lineno"></span><span class="keyword" id="32656">func</span>&nbsp;<span class="ident" id="32661">TestNegativeRead</span><span class="op" id="32677">(</span><span class="ident" id="32678">t</span>&nbsp;<span class="op" id="32680">*</span><span class="ident" id="32681"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="32688">.</span><span class="ident" id="32689">T</span><span class="op" id="32690">)</span>&nbsp;<span class="op" id="32692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="32695">//&nbsp;should&nbsp;panic&nbsp;with&nbsp;a&nbsp;description&nbsp;pointing&nbsp;at&nbsp;the&nbsp;reader,&nbsp;not&nbsp;at&nbsp;itself.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="32770">//&nbsp;(should&nbsp;NOT&nbsp;panic&nbsp;with&nbsp;slice&nbsp;index&nbsp;error,&nbsp;for&nbsp;example.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="32830">b</span>&nbsp;<span class="op" id="32832">:=</span>&nbsp;<span class="ident" id="32835"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="32844">(</span><span class="builtinfunc" id="32845">new</span><span class="op" id="32848">(</span><span class="ident" id="32849"><a href="/bufio/bufio_test.go.html#32565">negativeReader</a></span><span class="op" id="32863">)</span><span class="op" id="32864">)</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="32867">defer</span>&nbsp;<span class="keyword" id="32873">func</span><span class="op" id="32877">(</span><span class="op" id="32878">)</span>&nbsp;<span class="op" id="32880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="32884">switch</span>&nbsp;<span class="ident" id="32891">err</span>&nbsp;<span class="op" id="32895">:=</span>&nbsp;<span class="builtinfunc" id="32898">recover</span><span class="op" id="32905">(</span><span class="op" id="32906">)</span><span class="op" id="32907">.</span><span class="op" id="32908">(</span><span class="keyword" id="32909">type</span><span class="op" id="32913">)</span>&nbsp;<span class="op" id="32915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="32919">case</span>&nbsp;<span class="ident" id="32924">nil</span><span class="op" id="32927">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="32932"><a href="/bufio/bufio_test.go.html#32678">t</a></span><span class="op" id="32933">.</span><span class="ident" id="32934">Fatal</span><span class="op" id="32939">(</span><span class="string" id="32940">&#34;read&nbsp;did&nbsp;not&nbsp;panic&#34;</span><span class="op" id="32960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="32964">case</span>&nbsp;<span class="builtintype" id="32969">error</span><span class="op" id="32974">:</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="32979">if</span>&nbsp;<span class="op" id="32982">!</span><span class="ident" id="32983"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="32990">.</span><span class="ident" id="32991">Contains</span><span class="op" id="32999">(</span><span class="ident" id="33000"><a href="/bufio/bufio_test.go.html#32891">err</a></span><span class="op" id="33003">.</span><span class="ident" id="33004">Error</span><span class="op" id="33009">(</span><span class="op" id="33010">)</span><span class="op" id="33011">,</span>&nbsp;<span class="string" id="33013">&#34;reader&nbsp;returned&nbsp;negative&nbsp;count&nbsp;from&nbsp;Read&#34;</span><span class="op" id="33055">)</span>&nbsp;<span class="op" id="33057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33063"><a href="/bufio/bufio_test.go.html#32678">t</a></span><span class="op" id="33064">.</span><span class="ident" id="33065">Fatalf</span><span class="op" id="33071">(</span><span class="string" id="33072">&#34;wrong&nbsp;panic:&nbsp;%v&#34;</span><span class="op" id="33089">,</span>&nbsp;<span class="ident" id="33091"><a href="/bufio/bufio_test.go.html#32891">err</a></span><span class="op" id="33094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="33099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="33103">default</span><span class="op" id="33110">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33115"><a href="/bufio/bufio_test.go.html#32678">t</a></span><span class="op" id="33116">.</span><span class="ident" id="33117">Fatalf</span><span class="op" id="33123">(</span><span class="string" id="33124">&#34;unexpected&nbsp;panic&nbsp;value:&nbsp;%T(%v)&#34;</span><span class="op" id="33156">,</span>&nbsp;<span class="ident" id="33158"><a href="/bufio/bufio_test.go.html#32891">err</a></span><span class="op" id="33161">,</span>&nbsp;<span class="ident" id="33163"><a href="/bufio/bufio_test.go.html#32891">err</a></span><span class="op" id="33166">)</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="33170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="33173">}</span><span class="op" id="33174">(</span><span class="op" id="33175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33178"><a href="/bufio/bufio_test.go.html#32830">b</a></span><span class="op" id="33179">.</span><span class="ident" id="33180">Read</span><span class="op" id="33184">(</span><span class="builtinfunc" id="33185">make</span><span class="op" id="33189">(</span><span class="op" id="33190">[</span><span class="op" id="33191">]</span><span class="builtintype" id="33192">byte</span><span class="op" id="33196">,</span>&nbsp;<span class="num" id="33198">100</span><span class="op" id="33201">)</span><span class="op" id="33202">)</span><br>
<span class="lineno"></span><span class="op" id="33204">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1130</span><span class="keyword" id="33207">var</span>&nbsp;<span class="ident" id="33211">errFake</span>&nbsp;<span class="op" id="33219">=</span>&nbsp;<span class="ident" id="33221"><a href="/bufio/bufio_test.go.html#3408">errors</a></span><span class="op" id="33227">.</span><span class="ident" id="33228">New</span><span class="op" id="33231">(</span><span class="string" id="33232">&#34;fake&nbsp;error&#34;</span><span class="op" id="33244">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="33247">type</span>&nbsp;<span class="ident" id="33252">errorThenGoodReader</span>&nbsp;<span class="keyword" id="33272">struct</span>&nbsp;<span class="op" id="33279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33282">didErr</span>&nbsp;<span class="builtintype" id="33289">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33295">nread</span>&nbsp;&nbsp;<span class="builtintype" id="33302">int</span><br>
<span class="lineno">1135</span><span class="op" id="33306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="33309">func</span>&nbsp;<span class="op" id="33314">(</span><span class="ident" id="33315">r</span>&nbsp;<span class="op" id="33317">*</span><span class="ident" id="33318"><a href="/bufio/bufio_test.go.html#33252">errorThenGoodReader</a></span><span class="op" id="33337">)</span>&nbsp;<span class="ident" id="33339">Read</span><span class="op" id="33343">(</span><span class="ident" id="33344">p</span>&nbsp;<span class="op" id="33346">[</span><span class="op" id="33347">]</span><span class="builtintype" id="33348">byte</span><span class="op" id="33352">)</span>&nbsp;<span class="op" id="33354">(</span><span class="builtintype" id="33355">int</span><span class="op" id="33358">,</span>&nbsp;<span class="builtintype" id="33360">error</span><span class="op" id="33365">)</span>&nbsp;<span class="op" id="33367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33370"><a href="/bufio/bufio_test.go.html#33315">r</a></span><span class="op" id="33371">.</span><span class="ident" id="33372">nread</span><span class="op" id="33377">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="33381">if</span>&nbsp;<span class="op" id="33384">!</span><span class="ident" id="33385"><a href="/bufio/bufio_test.go.html#33315">r</a></span><span class="op" id="33386">.</span><span class="ident" id="33387">didErr</span>&nbsp;<span class="op" id="33394">{</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33398"><a href="/bufio/bufio_test.go.html#33315">r</a></span><span class="op" id="33399">.</span><span class="ident" id="33400">didErr</span>&nbsp;<span class="op" id="33407">=</span>&nbsp;<span class="ident" id="33409">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="33416">return</span>&nbsp;<span class="num" id="33423">0</span><span class="op" id="33424">,</span>&nbsp;<span class="ident" id="33426"><a href="/bufio/bufio_test.go.html#33211">errFake</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="33435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="33438">return</span>&nbsp;<span class="builtinfunc" id="33445">len</span><span class="op" id="33448">(</span><span class="ident" id="33449"><a href="/bufio/bufio_test.go.html#33344">p</a></span><span class="op" id="33450">)</span><span class="op" id="33451">,</span>&nbsp;<span class="ident" id="33453">nil</span><br>
<span class="lineno"></span><span class="op" id="33457">}</span><br>
<span class="lineno">1145</span><br>
<span class="lineno"></span><span class="keyword" id="33460">func</span>&nbsp;<span class="ident" id="33465">TestReaderClearError</span><span class="op" id="33485">(</span><span class="ident" id="33486">t</span>&nbsp;<span class="op" id="33488">*</span><span class="ident" id="33489"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="33496">.</span><span class="ident" id="33497">T</span><span class="op" id="33498">)</span>&nbsp;<span class="op" id="33500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33503">r</span>&nbsp;<span class="op" id="33505">:=</span>&nbsp;<span class="op" id="33508">&amp;</span><span class="ident" id="33509"><a href="/bufio/bufio_test.go.html#33252">errorThenGoodReader</a></span><span class="op" id="33528">{</span><span class="op" id="33529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33532">b</span>&nbsp;<span class="op" id="33534">:=</span>&nbsp;<span class="ident" id="33537"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="33546">(</span><span class="ident" id="33547"><a href="/bufio/bufio_test.go.html#33503">r</a></span><span class="op" id="33548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33551">buf</span>&nbsp;<span class="op" id="33555">:=</span>&nbsp;<span class="builtinfunc" id="33558">make</span><span class="op" id="33562">(</span><span class="op" id="33563">[</span><span class="op" id="33564">]</span><span class="builtintype" id="33565">byte</span><span class="op" id="33569">,</span>&nbsp;<span class="num" id="33571">1</span><span class="op" id="33572">)</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="33575">if</span>&nbsp;<span class="ident" id="33578">_</span><span class="op" id="33579">,</span>&nbsp;<span class="ident" id="33581">err</span>&nbsp;<span class="op" id="33585">:=</span>&nbsp;<span class="ident" id="33588"><a href="/bufio/bufio_test.go.html#33532">b</a></span><span class="op" id="33589">.</span><span class="ident" id="33590">Read</span><span class="op" id="33594">(</span><span class="ident" id="33595">nil</span><span class="op" id="33598">)</span><span class="op" id="33599">;</span>&nbsp;<span class="ident" id="33601"><a href="/bufio/bufio_test.go.html#33581">err</a></span>&nbsp;<span class="op" id="33605">!=</span>&nbsp;<span class="ident" id="33608">nil</span>&nbsp;<span class="op" id="33612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33616"><a href="/bufio/bufio_test.go.html#33486">t</a></span><span class="op" id="33617">.</span><span class="ident" id="33618">Fatalf</span><span class="op" id="33624">(</span><span class="string" id="33625">&#34;1st&nbsp;nil&nbsp;Read&nbsp;=&nbsp;%v;&nbsp;want&nbsp;nil&#34;</span><span class="op" id="33654">,</span>&nbsp;<span class="ident" id="33656"><a href="/bufio/bufio_test.go.html#33581">err</a></span><span class="op" id="33659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="33662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="33665">if</span>&nbsp;<span class="ident" id="33668">_</span><span class="op" id="33669">,</span>&nbsp;<span class="ident" id="33671">err</span>&nbsp;<span class="op" id="33675">:=</span>&nbsp;<span class="ident" id="33678"><a href="/bufio/bufio_test.go.html#33532">b</a></span><span class="op" id="33679">.</span><span class="ident" id="33680">Read</span><span class="op" id="33684">(</span><span class="ident" id="33685"><a href="/bufio/bufio_test.go.html#33551">buf</a></span><span class="op" id="33688">)</span><span class="op" id="33689">;</span>&nbsp;<span class="ident" id="33691"><a href="/bufio/bufio_test.go.html#33671">err</a></span>&nbsp;<span class="op" id="33695">!=</span>&nbsp;<span class="ident" id="33698"><a href="/bufio/bufio_test.go.html#33211">errFake</a></span>&nbsp;<span class="op" id="33706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33710"><a href="/bufio/bufio_test.go.html#33486">t</a></span><span class="op" id="33711">.</span><span class="ident" id="33712">Fatalf</span><span class="op" id="33718">(</span><span class="string" id="33719">&#34;1st&nbsp;Read&nbsp;=&nbsp;%v;&nbsp;want&nbsp;errFake&#34;</span><span class="op" id="33748">,</span>&nbsp;<span class="ident" id="33750"><a href="/bufio/bufio_test.go.html#33671">err</a></span><span class="op" id="33753">)</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="33756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="33759">if</span>&nbsp;<span class="ident" id="33762">_</span><span class="op" id="33763">,</span>&nbsp;<span class="ident" id="33765">err</span>&nbsp;<span class="op" id="33769">:=</span>&nbsp;<span class="ident" id="33772"><a href="/bufio/bufio_test.go.html#33532">b</a></span><span class="op" id="33773">.</span><span class="ident" id="33774">Read</span><span class="op" id="33778">(</span><span class="ident" id="33779">nil</span><span class="op" id="33782">)</span><span class="op" id="33783">;</span>&nbsp;<span class="ident" id="33785"><a href="/bufio/bufio_test.go.html#33765">err</a></span>&nbsp;<span class="op" id="33789">!=</span>&nbsp;<span class="ident" id="33792">nil</span>&nbsp;<span class="op" id="33796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33800"><a href="/bufio/bufio_test.go.html#33486">t</a></span><span class="op" id="33801">.</span><span class="ident" id="33802">Fatalf</span><span class="op" id="33808">(</span><span class="string" id="33809">&#34;2nd&nbsp;nil&nbsp;Read&nbsp;=&nbsp;%v;&nbsp;want&nbsp;nil&#34;</span><span class="op" id="33838">,</span>&nbsp;<span class="ident" id="33840"><a href="/bufio/bufio_test.go.html#33765">err</a></span><span class="op" id="33843">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="33846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="33849">if</span>&nbsp;<span class="ident" id="33852">_</span><span class="op" id="33853">,</span>&nbsp;<span class="ident" id="33855">err</span>&nbsp;<span class="op" id="33859">:=</span>&nbsp;<span class="ident" id="33862"><a href="/bufio/bufio_test.go.html#33532">b</a></span><span class="op" id="33863">.</span><span class="ident" id="33864">Read</span><span class="op" id="33868">(</span><span class="ident" id="33869"><a href="/bufio/bufio_test.go.html#33551">buf</a></span><span class="op" id="33872">)</span><span class="op" id="33873">;</span>&nbsp;<span class="ident" id="33875"><a href="/bufio/bufio_test.go.html#33855">err</a></span>&nbsp;<span class="op" id="33879">!=</span>&nbsp;<span class="ident" id="33882">nil</span>&nbsp;<span class="op" id="33886">{</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33890"><a href="/bufio/bufio_test.go.html#33486">t</a></span><span class="op" id="33891">.</span><span class="ident" id="33892">Fatalf</span><span class="op" id="33898">(</span><span class="string" id="33899">&#34;3rd&nbsp;Read&nbsp;with&nbsp;buffer&nbsp;=&nbsp;%v;&nbsp;want&nbsp;nil&#34;</span><span class="op" id="33936">,</span>&nbsp;<span class="ident" id="33938"><a href="/bufio/bufio_test.go.html#33855">err</a></span><span class="op" id="33941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="33944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="33947">if</span>&nbsp;<span class="ident" id="33950"><a href="/bufio/bufio_test.go.html#33503">r</a></span><span class="op" id="33951">.</span><span class="ident" id="33952">nread</span>&nbsp;<span class="op" id="33958">!=</span>&nbsp;<span class="num" id="33961">2</span>&nbsp;<span class="op" id="33963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="33967"><a href="/bufio/bufio_test.go.html#33486">t</a></span><span class="op" id="33968">.</span><span class="ident" id="33969">Errorf</span><span class="op" id="33975">(</span><span class="string" id="33976">&#34;num&nbsp;reads&nbsp;=&nbsp;%d;&nbsp;want&nbsp;2&#34;</span><span class="op" id="34000">,</span>&nbsp;<span class="ident" id="34002"><a href="/bufio/bufio_test.go.html#33503">r</a></span><span class="op" id="34003">.</span><span class="ident" id="34004">nread</span><span class="op" id="34009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="34012">}</span><br>
<span class="lineno">1165</span><span class="op" id="34014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="34017">//&nbsp;Test&nbsp;for&nbsp;golang.org/issue/5947</span><br>
<span class="lineno"></span><span class="keyword" id="34051">func</span>&nbsp;<span class="ident" id="34056">TestWriterReadFromWhileFull</span><span class="op" id="34083">(</span><span class="ident" id="34084">t</span>&nbsp;<span class="op" id="34086">*</span><span class="ident" id="34087"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="34094">.</span><span class="ident" id="34095">T</span><span class="op" id="34096">)</span>&nbsp;<span class="op" id="34098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34101">buf</span>&nbsp;<span class="op" id="34105">:=</span>&nbsp;<span class="builtinfunc" id="34108">new</span><span class="op" id="34111">(</span><span class="ident" id="34112"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="34117">.</span><span class="ident" id="34118">Buffer</span><span class="op" id="34124">)</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34127">w</span>&nbsp;<span class="op" id="34129">:=</span>&nbsp;<span class="ident" id="34132"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="34145">(</span><span class="ident" id="34146"><a href="/bufio/bufio_test.go.html#34101">buf</a></span><span class="op" id="34149">,</span>&nbsp;<span class="num" id="34151">10</span><span class="op" id="34153">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="34157">//&nbsp;Fill&nbsp;buffer&nbsp;exactly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34182">n</span><span class="op" id="34183">,</span>&nbsp;<span class="ident" id="34185">err</span>&nbsp;<span class="op" id="34189">:=</span>&nbsp;<span class="ident" id="34192"><a href="/bufio/bufio_test.go.html#34127">w</a></span><span class="op" id="34193">.</span><span class="ident" id="34194">Write</span><span class="op" id="34199">(</span><span class="op" id="34200">[</span><span class="op" id="34201">]</span><span class="builtintype" id="34202">byte</span><span class="op" id="34206">(</span><span class="string" id="34207">&#34;0123456789&#34;</span><span class="op" id="34219">)</span><span class="op" id="34220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="34223">if</span>&nbsp;<span class="ident" id="34226"><a href="/bufio/bufio_test.go.html#34182">n</a></span>&nbsp;<span class="op" id="34228">!=</span>&nbsp;<span class="num" id="34231">10</span>&nbsp;<span class="op" id="34234">||</span>&nbsp;<span class="ident" id="34237"><a href="/bufio/bufio_test.go.html#34185">err</a></span>&nbsp;<span class="op" id="34241">!=</span>&nbsp;<span class="ident" id="34244">nil</span>&nbsp;<span class="op" id="34248">{</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34252"><a href="/bufio/bufio_test.go.html#34084">t</a></span><span class="op" id="34253">.</span><span class="ident" id="34254">Fatalf</span><span class="op" id="34260">(</span><span class="string" id="34261">&#34;Write&nbsp;returned&nbsp;(%v,&nbsp;%v),&nbsp;want&nbsp;(10,&nbsp;nil)&#34;</span><span class="op" id="34302">,</span>&nbsp;<span class="ident" id="34304"><a href="/bufio/bufio_test.go.html#34182">n</a></span><span class="op" id="34305">,</span>&nbsp;<span class="ident" id="34307"><a href="/bufio/bufio_test.go.html#34185">err</a></span><span class="op" id="34310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="34313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="34317">//&nbsp;Use&nbsp;ReadFrom&nbsp;to&nbsp;read&nbsp;in&nbsp;some&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34356">n2</span><span class="op" id="34358">,</span>&nbsp;<span class="ident" id="34360"><a href="/bufio/bufio_test.go.html#34185">err</a></span>&nbsp;<span class="op" id="34364">:=</span>&nbsp;<span class="ident" id="34367"><a href="/bufio/bufio_test.go.html#34127">w</a></span><span class="op" id="34368">.</span><span class="ident" id="34369">ReadFrom</span><span class="op" id="34377">(</span><span class="ident" id="34378"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="34385">.</span><span class="ident" id="34386">NewReader</span><span class="op" id="34395">(</span><span class="string" id="34396">&#34;abcdef&#34;</span><span class="op" id="34404">)</span><span class="op" id="34405">)</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="34408">if</span>&nbsp;<span class="ident" id="34411"><a href="/bufio/bufio_test.go.html#34356">n2</a></span>&nbsp;<span class="op" id="34414">!=</span>&nbsp;<span class="num" id="34417">6</span>&nbsp;<span class="op" id="34419">||</span>&nbsp;<span class="ident" id="34422"><a href="/bufio/bufio_test.go.html#34185">err</a></span>&nbsp;<span class="op" id="34426">!=</span>&nbsp;<span class="ident" id="34429">nil</span>&nbsp;<span class="op" id="34433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34437"><a href="/bufio/bufio_test.go.html#34084">t</a></span><span class="op" id="34438">.</span><span class="ident" id="34439">Fatalf</span><span class="op" id="34445">(</span><span class="string" id="34446">&#34;ReadFrom&nbsp;returned&nbsp;(%v,&nbsp;%v),&nbsp;want&nbsp;(6,&nbsp;nil)&#34;</span><span class="op" id="34489">,</span>&nbsp;<span class="ident" id="34491"><a href="/bufio/bufio_test.go.html#34356">n2</a></span><span class="op" id="34493">,</span>&nbsp;<span class="ident" id="34495"><a href="/bufio/bufio_test.go.html#34185">err</a></span><span class="op" id="34498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="34501">}</span><br>
<span class="lineno"></span><span class="op" id="34503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1185</span><span class="keyword" id="34506">type</span>&nbsp;<span class="ident" id="34511">emptyThenNonEmptyReader</span>&nbsp;<span class="keyword" id="34535">struct</span>&nbsp;<span class="op" id="34542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34545">r</span>&nbsp;<span class="ident" id="34547"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="34549">.</span><span class="ident" id="34550">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34558">n</span>&nbsp;<span class="builtintype" id="34560">int</span><br>
<span class="lineno"></span><span class="op" id="34564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1190</span><span class="keyword" id="34567">func</span>&nbsp;<span class="op" id="34572">(</span><span class="ident" id="34573">r</span>&nbsp;<span class="op" id="34575">*</span><span class="ident" id="34576"><a href="/bufio/bufio_test.go.html#34511">emptyThenNonEmptyReader</a></span><span class="op" id="34599">)</span>&nbsp;<span class="ident" id="34601">Read</span><span class="op" id="34605">(</span><span class="ident" id="34606">p</span>&nbsp;<span class="op" id="34608">[</span><span class="op" id="34609">]</span><span class="builtintype" id="34610">byte</span><span class="op" id="34614">)</span>&nbsp;<span class="op" id="34616">(</span><span class="builtintype" id="34617">int</span><span class="op" id="34620">,</span>&nbsp;<span class="builtintype" id="34622">error</span><span class="op" id="34627">)</span>&nbsp;<span class="op" id="34629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="34632">if</span>&nbsp;<span class="ident" id="34635"><a href="/bufio/bufio_test.go.html#34573">r</a></span><span class="op" id="34636">.</span><span class="ident" id="34637">n</span>&nbsp;<span class="op" id="34639">&lt;=</span>&nbsp;<span class="num" id="34642">0</span>&nbsp;<span class="op" id="34644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="34648">return</span>&nbsp;<span class="ident" id="34655"><a href="/bufio/bufio_test.go.html#34573">r</a></span><span class="op" id="34656">.</span><span class="ident" id="34657">r</span><span class="op" id="34658">.</span><span class="ident" id="34659">Read</span><span class="op" id="34663">(</span><span class="ident" id="34664"><a href="/bufio/bufio_test.go.html#34606">p</a></span><span class="op" id="34665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="34668">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34671"><a href="/bufio/bufio_test.go.html#34573">r</a></span><span class="op" id="34672">.</span><span class="ident" id="34673">n</span><span class="op" id="34674">--</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="34678">return</span>&nbsp;<span class="num" id="34685">0</span><span class="op" id="34686">,</span>&nbsp;<span class="ident" id="34688">nil</span><br>
<span class="lineno"></span><span class="op" id="34692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="34695">//&nbsp;Test&nbsp;for&nbsp;golang.org/issue/7611</span><br>
<span class="lineno"></span><span class="keyword" id="34729">func</span>&nbsp;<span class="ident" id="34734">TestWriterReadFromUntilEOF</span><span class="op" id="34760">(</span><span class="ident" id="34761">t</span>&nbsp;<span class="op" id="34763">*</span><span class="ident" id="34764"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="34771">.</span><span class="ident" id="34772">T</span><span class="op" id="34773">)</span>&nbsp;<span class="op" id="34775">{</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34778">buf</span>&nbsp;<span class="op" id="34782">:=</span>&nbsp;<span class="builtinfunc" id="34785">new</span><span class="op" id="34788">(</span><span class="ident" id="34789"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="34794">.</span><span class="ident" id="34795">Buffer</span><span class="op" id="34801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34804">w</span>&nbsp;<span class="op" id="34806">:=</span>&nbsp;<span class="ident" id="34809"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="34822">(</span><span class="ident" id="34823"><a href="/bufio/bufio_test.go.html#34778">buf</a></span><span class="op" id="34826">,</span>&nbsp;<span class="num" id="34828">5</span><span class="op" id="34829">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="34833">//&nbsp;Partially&nbsp;fill&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34859">n</span><span class="op" id="34860">,</span>&nbsp;<span class="ident" id="34862">err</span>&nbsp;<span class="op" id="34866">:=</span>&nbsp;<span class="ident" id="34869"><a href="/bufio/bufio_test.go.html#34804">w</a></span><span class="op" id="34870">.</span><span class="ident" id="34871">Write</span><span class="op" id="34876">(</span><span class="op" id="34877">[</span><span class="op" id="34878">]</span><span class="builtintype" id="34879">byte</span><span class="op" id="34883">(</span><span class="string" id="34884">&#34;0123&#34;</span><span class="op" id="34890">)</span><span class="op" id="34891">)</span><br>
<span class="lineno">1205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="34894">if</span>&nbsp;<span class="ident" id="34897"><a href="/bufio/bufio_test.go.html#34859">n</a></span>&nbsp;<span class="op" id="34899">!=</span>&nbsp;<span class="num" id="34902">4</span>&nbsp;<span class="op" id="34904">||</span>&nbsp;<span class="ident" id="34907"><a href="/bufio/bufio_test.go.html#34862">err</a></span>&nbsp;<span class="op" id="34911">!=</span>&nbsp;<span class="ident" id="34914">nil</span>&nbsp;<span class="op" id="34918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="34922"><a href="/bufio/bufio_test.go.html#34761">t</a></span><span class="op" id="34923">.</span><span class="ident" id="34924">Fatalf</span><span class="op" id="34930">(</span><span class="string" id="34931">&#34;Write&nbsp;returned&nbsp;(%v,&nbsp;%v),&nbsp;want&nbsp;(4,&nbsp;nil)&#34;</span><span class="op" id="34971">,</span>&nbsp;<span class="ident" id="34973"><a href="/bufio/bufio_test.go.html#34859">n</a></span><span class="op" id="34974">,</span>&nbsp;<span class="ident" id="34976"><a href="/bufio/bufio_test.go.html#34862">err</a></span><span class="op" id="34979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="34982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="34986">//&nbsp;Use&nbsp;ReadFrom&nbsp;to&nbsp;read&nbsp;in&nbsp;some&nbsp;data.</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35025">r</span>&nbsp;<span class="op" id="35027">:=</span>&nbsp;<span class="op" id="35030">&amp;</span><span class="ident" id="35031"><a href="/bufio/bufio_test.go.html#34511">emptyThenNonEmptyReader</a></span><span class="op" id="35054">{</span><span class="ident" id="35055">r</span><span class="op" id="35056">:</span>&nbsp;<span class="ident" id="35058"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="35065">.</span><span class="ident" id="35066">NewReader</span><span class="op" id="35075">(</span><span class="string" id="35076">&#34;abcd&#34;</span><span class="op" id="35082">)</span><span class="op" id="35083">,</span>&nbsp;<span class="ident" id="35085">n</span><span class="op" id="35086">:</span>&nbsp;<span class="num" id="35088">3</span><span class="op" id="35089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35092">n2</span><span class="op" id="35094">,</span>&nbsp;<span class="ident" id="35096"><a href="/bufio/bufio_test.go.html#34862">err</a></span>&nbsp;<span class="op" id="35100">:=</span>&nbsp;<span class="ident" id="35103"><a href="/bufio/bufio_test.go.html#34804">w</a></span><span class="op" id="35104">.</span><span class="ident" id="35105">ReadFrom</span><span class="op" id="35113">(</span><span class="ident" id="35114"><a href="/bufio/bufio_test.go.html#35025">r</a></span><span class="op" id="35115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="35118">if</span>&nbsp;<span class="ident" id="35121"><a href="/bufio/bufio_test.go.html#35092">n2</a></span>&nbsp;<span class="op" id="35124">!=</span>&nbsp;<span class="num" id="35127">4</span>&nbsp;<span class="op" id="35129">||</span>&nbsp;<span class="ident" id="35132"><a href="/bufio/bufio_test.go.html#34862">err</a></span>&nbsp;<span class="op" id="35136">!=</span>&nbsp;<span class="ident" id="35139">nil</span>&nbsp;<span class="op" id="35143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35147"><a href="/bufio/bufio_test.go.html#34761">t</a></span><span class="op" id="35148">.</span><span class="ident" id="35149">Fatalf</span><span class="op" id="35155">(</span><span class="string" id="35156">&#34;ReadFrom&nbsp;returned&nbsp;(%v,&nbsp;%v),&nbsp;want&nbsp;(4,&nbsp;nil)&#34;</span><span class="op" id="35199">,</span>&nbsp;<span class="ident" id="35201"><a href="/bufio/bufio_test.go.html#35092">n2</a></span><span class="op" id="35203">,</span>&nbsp;<span class="ident" id="35205"><a href="/bufio/bufio_test.go.html#34862">err</a></span><span class="op" id="35208">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="35211">}</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35214"><a href="/bufio/bufio_test.go.html#34804">w</a></span><span class="op" id="35215">.</span><span class="ident" id="35216">Flush</span><span class="op" id="35221">(</span><span class="op" id="35222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="35225">if</span>&nbsp;<span class="ident" id="35228">got</span><span class="op" id="35231">,</span>&nbsp;<span class="ident" id="35233">want</span>&nbsp;<span class="op" id="35238">:=</span>&nbsp;<span class="builtintype" id="35241">string</span><span class="op" id="35247">(</span><span class="ident" id="35248"><a href="/bufio/bufio_test.go.html#34778">buf</a></span><span class="op" id="35251">.</span><span class="ident" id="35252">Bytes</span><span class="op" id="35257">(</span><span class="op" id="35258">)</span><span class="op" id="35259">)</span><span class="op" id="35260">,</span>&nbsp;<span class="string" id="35262">&#34;0123abcd&#34;</span><span class="op" id="35272">;</span>&nbsp;<span class="ident" id="35274"><a href="/bufio/bufio_test.go.html#35228">got</a></span>&nbsp;<span class="op" id="35278">!=</span>&nbsp;<span class="ident" id="35281"><a href="/bufio/bufio_test.go.html#35233">want</a></span>&nbsp;<span class="op" id="35286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35290"><a href="/bufio/bufio_test.go.html#34761">t</a></span><span class="op" id="35291">.</span><span class="ident" id="35292">Fatalf</span><span class="op" id="35298">(</span><span class="string" id="35299">&#34;buf.Bytes()&nbsp;returned&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="35333">,</span>&nbsp;<span class="ident" id="35335"><a href="/bufio/bufio_test.go.html#35228">got</a></span><span class="op" id="35338">,</span>&nbsp;<span class="ident" id="35340"><a href="/bufio/bufio_test.go.html#35233">want</a></span><span class="op" id="35344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="35347">}</span><br>
<span class="lineno"></span><span class="op" id="35349">}</span><br>
<span class="lineno">1220</span><br>
<span class="lineno"></span><span class="keyword" id="35352">func</span>&nbsp;<span class="ident" id="35357">TestWriterReadFromErrNoProgress</span><span class="op" id="35388">(</span><span class="ident" id="35389">t</span>&nbsp;<span class="op" id="35391">*</span><span class="ident" id="35392"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="35399">.</span><span class="ident" id="35400">T</span><span class="op" id="35401">)</span>&nbsp;<span class="op" id="35403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35406">buf</span>&nbsp;<span class="op" id="35410">:=</span>&nbsp;<span class="builtinfunc" id="35413">new</span><span class="op" id="35416">(</span><span class="ident" id="35417"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="35422">.</span><span class="ident" id="35423">Buffer</span><span class="op" id="35429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35432">w</span>&nbsp;<span class="op" id="35434">:=</span>&nbsp;<span class="ident" id="35437"><a href="/bufio/bufio.go.html#3229905">NewWriterSize</a></span><span class="op" id="35450">(</span><span class="ident" id="35451"><a href="/bufio/bufio_test.go.html#35406">buf</a></span><span class="op" id="35454">,</span>&nbsp;<span class="num" id="35456">5</span><span class="op" id="35457">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="35461">//&nbsp;Partially&nbsp;fill&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35487">n</span><span class="op" id="35488">,</span>&nbsp;<span class="ident" id="35490">err</span>&nbsp;<span class="op" id="35494">:=</span>&nbsp;<span class="ident" id="35497"><a href="/bufio/bufio_test.go.html#35432">w</a></span><span class="op" id="35498">.</span><span class="ident" id="35499">Write</span><span class="op" id="35504">(</span><span class="op" id="35505">[</span><span class="op" id="35506">]</span><span class="builtintype" id="35507">byte</span><span class="op" id="35511">(</span><span class="string" id="35512">&#34;0123&#34;</span><span class="op" id="35518">)</span><span class="op" id="35519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="35522">if</span>&nbsp;<span class="ident" id="35525"><a href="/bufio/bufio_test.go.html#35487">n</a></span>&nbsp;<span class="op" id="35527">!=</span>&nbsp;<span class="num" id="35530">4</span>&nbsp;<span class="op" id="35532">||</span>&nbsp;<span class="ident" id="35535"><a href="/bufio/bufio_test.go.html#35490">err</a></span>&nbsp;<span class="op" id="35539">!=</span>&nbsp;<span class="ident" id="35542">nil</span>&nbsp;<span class="op" id="35546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35550"><a href="/bufio/bufio_test.go.html#35389">t</a></span><span class="op" id="35551">.</span><span class="ident" id="35552">Fatalf</span><span class="op" id="35558">(</span><span class="string" id="35559">&#34;Write&nbsp;returned&nbsp;(%v,&nbsp;%v),&nbsp;want&nbsp;(4,&nbsp;nil)&#34;</span><span class="op" id="35599">,</span>&nbsp;<span class="ident" id="35601"><a href="/bufio/bufio_test.go.html#35487">n</a></span><span class="op" id="35602">,</span>&nbsp;<span class="ident" id="35604"><a href="/bufio/bufio_test.go.html#35490">err</a></span><span class="op" id="35607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="35610">}</span><br>
<span class="lineno">1230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="35614">//&nbsp;Use&nbsp;ReadFrom&nbsp;to&nbsp;read&nbsp;in&nbsp;some&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35653">r</span>&nbsp;<span class="op" id="35655">:=</span>&nbsp;<span class="op" id="35658">&amp;</span><span class="ident" id="35659"><a href="/bufio/bufio_test.go.html#34511">emptyThenNonEmptyReader</a></span><span class="op" id="35682">{</span><span class="ident" id="35683">r</span><span class="op" id="35684">:</span>&nbsp;<span class="ident" id="35686"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="35693">.</span><span class="ident" id="35694">NewReader</span><span class="op" id="35703">(</span><span class="string" id="35704">&#34;abcd&#34;</span><span class="op" id="35710">)</span><span class="op" id="35711">,</span>&nbsp;<span class="ident" id="35713">n</span><span class="op" id="35714">:</span>&nbsp;<span class="num" id="35716">100</span><span class="op" id="35719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35722">n2</span><span class="op" id="35724">,</span>&nbsp;<span class="ident" id="35726"><a href="/bufio/bufio_test.go.html#35490">err</a></span>&nbsp;<span class="op" id="35730">:=</span>&nbsp;<span class="ident" id="35733"><a href="/bufio/bufio_test.go.html#35432">w</a></span><span class="op" id="35734">.</span><span class="ident" id="35735">ReadFrom</span><span class="op" id="35743">(</span><span class="ident" id="35744"><a href="/bufio/bufio_test.go.html#35653">r</a></span><span class="op" id="35745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="35748">if</span>&nbsp;<span class="ident" id="35751"><a href="/bufio/bufio_test.go.html#35722">n2</a></span>&nbsp;<span class="op" id="35754">!=</span>&nbsp;<span class="num" id="35757">0</span>&nbsp;<span class="op" id="35759">||</span>&nbsp;<span class="ident" id="35762"><a href="/bufio/bufio_test.go.html#35490">err</a></span>&nbsp;<span class="op" id="35766">!=</span>&nbsp;<span class="ident" id="35769"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="35771">.</span><span class="ident" id="35772">ErrNoProgress</span>&nbsp;<span class="op" id="35786">{</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35790"><a href="/bufio/bufio_test.go.html#35389">t</a></span><span class="op" id="35791">.</span><span class="ident" id="35792">Fatalf</span><span class="op" id="35798">(</span><span class="string" id="35799">&#34;buf.Bytes()&nbsp;returned&nbsp;(%v,&nbsp;%v),&nbsp;want&nbsp;(0,&nbsp;io.ErrNoProgress)&#34;</span><span class="op" id="35858">,</span>&nbsp;<span class="ident" id="35860"><a href="/bufio/bufio_test.go.html#35722">n2</a></span><span class="op" id="35862">,</span>&nbsp;<span class="ident" id="35864"><a href="/bufio/bufio_test.go.html#35490">err</a></span><span class="op" id="35867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="35870">}</span><br>
<span class="lineno"></span><span class="op" id="35872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="35875">func</span>&nbsp;<span class="ident" id="35880">TestReaderReset</span><span class="op" id="35895">(</span><span class="ident" id="35896">t</span>&nbsp;<span class="op" id="35898">*</span><span class="ident" id="35899"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="35906">.</span><span class="ident" id="35907">T</span><span class="op" id="35908">)</span>&nbsp;<span class="op" id="35910">{</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35913">r</span>&nbsp;<span class="op" id="35915">:=</span>&nbsp;<span class="ident" id="35918"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="35927">(</span><span class="ident" id="35928"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="35935">.</span><span class="ident" id="35936">NewReader</span><span class="op" id="35945">(</span><span class="string" id="35946">&#34;foo&nbsp;foo&#34;</span><span class="op" id="35955">)</span><span class="op" id="35956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35959">buf</span>&nbsp;<span class="op" id="35963">:=</span>&nbsp;<span class="builtinfunc" id="35966">make</span><span class="op" id="35970">(</span><span class="op" id="35971">[</span><span class="op" id="35972">]</span><span class="builtintype" id="35973">byte</span><span class="op" id="35977">,</span>&nbsp;<span class="num" id="35979">3</span><span class="op" id="35980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="35983"><a href="/bufio/bufio_test.go.html#35913">r</a></span><span class="op" id="35984">.</span><span class="ident" id="35985">Read</span><span class="op" id="35989">(</span><span class="ident" id="35990"><a href="/bufio/bufio_test.go.html#35959">buf</a></span><span class="op" id="35993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="35996">if</span>&nbsp;<span class="builtintype" id="35999">string</span><span class="op" id="36005">(</span><span class="ident" id="36006"><a href="/bufio/bufio_test.go.html#35959">buf</a></span><span class="op" id="36009">)</span>&nbsp;<span class="op" id="36011">!=</span>&nbsp;<span class="string" id="36014">&#34;foo&#34;</span>&nbsp;<span class="op" id="36020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36024"><a href="/bufio/bufio_test.go.html#35896">t</a></span><span class="op" id="36025">.</span><span class="ident" id="36026">Errorf</span><span class="op" id="36032">(</span><span class="string" id="36033">&#34;buf&nbsp;=&nbsp;%q;&nbsp;want&nbsp;foo&#34;</span><span class="op" id="36053">,</span>&nbsp;<span class="ident" id="36055"><a href="/bufio/bufio_test.go.html#35959">buf</a></span><span class="op" id="36058">)</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="36061">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36064"><a href="/bufio/bufio_test.go.html#35913">r</a></span><span class="op" id="36065">.</span><span class="ident" id="36066">Reset</span><span class="op" id="36071">(</span><span class="ident" id="36072"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="36079">.</span><span class="ident" id="36080">NewReader</span><span class="op" id="36089">(</span><span class="string" id="36090">&#34;bar&nbsp;bar&#34;</span><span class="op" id="36099">)</span><span class="op" id="36100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36103">all</span><span class="op" id="36106">,</span>&nbsp;<span class="ident" id="36108">err</span>&nbsp;<span class="op" id="36112">:=</span>&nbsp;<span class="ident" id="36115"><a href="/bufio/bufio_test.go.html#3431">ioutil</a></span><span class="op" id="36121">.</span><span class="ident" id="36122">ReadAll</span><span class="op" id="36129">(</span><span class="ident" id="36130"><a href="/bufio/bufio_test.go.html#35913">r</a></span><span class="op" id="36131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="36134">if</span>&nbsp;<span class="ident" id="36137"><a href="/bufio/bufio_test.go.html#36108">err</a></span>&nbsp;<span class="op" id="36141">!=</span>&nbsp;<span class="ident" id="36144">nil</span>&nbsp;<span class="op" id="36148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36152"><a href="/bufio/bufio_test.go.html#35896">t</a></span><span class="op" id="36153">.</span><span class="ident" id="36154">Fatal</span><span class="op" id="36159">(</span><span class="ident" id="36160"><a href="/bufio/bufio_test.go.html#36108">err</a></span><span class="op" id="36163">)</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="36166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="36169">if</span>&nbsp;<span class="builtintype" id="36172">string</span><span class="op" id="36178">(</span><span class="ident" id="36179"><a href="/bufio/bufio_test.go.html#36103">all</a></span><span class="op" id="36182">)</span>&nbsp;<span class="op" id="36184">!=</span>&nbsp;<span class="string" id="36187">&#34;bar&nbsp;bar&#34;</span>&nbsp;<span class="op" id="36197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36201"><a href="/bufio/bufio_test.go.html#35896">t</a></span><span class="op" id="36202">.</span><span class="ident" id="36203">Errorf</span><span class="op" id="36209">(</span><span class="string" id="36210">&#34;ReadAll&nbsp;=&nbsp;%q;&nbsp;want&nbsp;bar&nbsp;bar&#34;</span><span class="op" id="36238">,</span>&nbsp;<span class="ident" id="36240"><a href="/bufio/bufio_test.go.html#36103">all</a></span><span class="op" id="36243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="36246">}</span><br>
<span class="lineno"></span><span class="op" id="36248">}</span><br>
<span class="lineno">1255</span><br>
<span class="lineno"></span><span class="keyword" id="36251">func</span>&nbsp;<span class="ident" id="36256">TestWriterReset</span><span class="op" id="36271">(</span><span class="ident" id="36272">t</span>&nbsp;<span class="op" id="36274">*</span><span class="ident" id="36275"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="36282">.</span><span class="ident" id="36283">T</span><span class="op" id="36284">)</span>&nbsp;<span class="op" id="36286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="36289">var</span>&nbsp;<span class="ident" id="36293">buf1</span><span class="op" id="36297">,</span>&nbsp;<span class="ident" id="36299">buf2</span>&nbsp;<span class="ident" id="36304"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="36309">.</span><span class="ident" id="36310">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36318">w</span>&nbsp;<span class="op" id="36320">:=</span>&nbsp;<span class="ident" id="36323"><a href="/bufio/bufio.go.html#3230224">NewWriter</a></span><span class="op" id="36332">(</span><span class="op" id="36333">&amp;</span><span class="ident" id="36334"><a href="/bufio/bufio_test.go.html#36293">buf1</a></span><span class="op" id="36338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36341"><a href="/bufio/bufio_test.go.html#36318">w</a></span><span class="op" id="36342">.</span><span class="ident" id="36343">WriteString</span><span class="op" id="36354">(</span><span class="string" id="36355">&#34;foo&#34;</span><span class="op" id="36360">)</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36363"><a href="/bufio/bufio_test.go.html#36318">w</a></span><span class="op" id="36364">.</span><span class="ident" id="36365">Reset</span><span class="op" id="36370">(</span><span class="op" id="36371">&amp;</span><span class="ident" id="36372"><a href="/bufio/bufio_test.go.html#36299">buf2</a></span><span class="op" id="36376">)</span>&nbsp;<span class="comment" id="36378">//&nbsp;and&nbsp;not&nbsp;flushed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36398"><a href="/bufio/bufio_test.go.html#36318">w</a></span><span class="op" id="36399">.</span><span class="ident" id="36400">WriteString</span><span class="op" id="36411">(</span><span class="string" id="36412">&#34;bar&#34;</span><span class="op" id="36417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36420"><a href="/bufio/bufio_test.go.html#36318">w</a></span><span class="op" id="36421">.</span><span class="ident" id="36422">Flush</span><span class="op" id="36427">(</span><span class="op" id="36428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="36431">if</span>&nbsp;<span class="ident" id="36434"><a href="/bufio/bufio_test.go.html#36293">buf1</a></span><span class="op" id="36438">.</span><span class="ident" id="36439">String</span><span class="op" id="36445">(</span><span class="op" id="36446">)</span>&nbsp;<span class="op" id="36448">!=</span>&nbsp;<span class="string" id="36451">&#34;&#34;</span>&nbsp;<span class="op" id="36454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36458"><a href="/bufio/bufio_test.go.html#36272">t</a></span><span class="op" id="36459">.</span><span class="ident" id="36460">Errorf</span><span class="op" id="36466">(</span><span class="string" id="36467">&#34;buf1&nbsp;=&nbsp;%q;&nbsp;want&nbsp;empty&#34;</span><span class="op" id="36490">,</span>&nbsp;<span class="ident" id="36492"><a href="/bufio/bufio_test.go.html#36293">buf1</a></span><span class="op" id="36496">.</span><span class="ident" id="36497">String</span><span class="op" id="36503">(</span><span class="op" id="36504">)</span><span class="op" id="36505">)</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="36508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="36511">if</span>&nbsp;<span class="ident" id="36514"><a href="/bufio/bufio_test.go.html#36299">buf2</a></span><span class="op" id="36518">.</span><span class="ident" id="36519">String</span><span class="op" id="36525">(</span><span class="op" id="36526">)</span>&nbsp;<span class="op" id="36528">!=</span>&nbsp;<span class="string" id="36531">&#34;bar&#34;</span>&nbsp;<span class="op" id="36537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36541"><a href="/bufio/bufio_test.go.html#36272">t</a></span><span class="op" id="36542">.</span><span class="ident" id="36543">Errorf</span><span class="op" id="36549">(</span><span class="string" id="36550">&#34;buf2&nbsp;=&nbsp;%q;&nbsp;want&nbsp;bar&#34;</span><span class="op" id="36571">,</span>&nbsp;<span class="ident" id="36573"><a href="/bufio/bufio_test.go.html#36299">buf2</a></span><span class="op" id="36577">.</span><span class="ident" id="36578">String</span><span class="op" id="36584">(</span><span class="op" id="36585">)</span><span class="op" id="36586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="36589">}</span><br>
<span class="lineno"></span><span class="op" id="36591">}</span><br>
<span class="lineno">1270</span><br>
<span class="lineno"></span><span class="comment" id="36594">//&nbsp;An&nbsp;onlyReader&nbsp;only&nbsp;implements&nbsp;io.Reader,&nbsp;no&nbsp;matter&nbsp;what&nbsp;other&nbsp;methods&nbsp;the&nbsp;underlying&nbsp;implementation&nbsp;may&nbsp;have.</span><br>
<span class="lineno"></span><span class="keyword" id="36707">type</span>&nbsp;<span class="ident" id="36712">onlyReader</span>&nbsp;<span class="keyword" id="36723">struct</span>&nbsp;<span class="op" id="36730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36733"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="36735">.</span><span class="ident" id="36736">Reader</span><br>
<span class="lineno"></span><span class="op" id="36743">}</span><br>
<span class="lineno">1275</span><br>
<span class="lineno"></span><span class="comment" id="36746">//&nbsp;An&nbsp;onlyWriter&nbsp;only&nbsp;implements&nbsp;io.Writer,&nbsp;no&nbsp;matter&nbsp;what&nbsp;other&nbsp;methods&nbsp;the&nbsp;underlying&nbsp;implementation&nbsp;may&nbsp;have.</span><br>
<span class="lineno"></span><span class="keyword" id="36859">type</span>&nbsp;<span class="ident" id="36864">onlyWriter</span>&nbsp;<span class="keyword" id="36875">struct</span>&nbsp;<span class="op" id="36882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="36885"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="36887">.</span><span class="ident" id="36888">Writer</span><br>
<span class="lineno"></span><span class="op" id="36895">}</span><br>
<span class="lineno">1280</span><br>
<span class="lineno"></span><span class="keyword" id="36898">func</span>&nbsp;<span class="ident" id="36903">BenchmarkReaderCopyOptimal</span><span class="op" id="36929">(</span><span class="ident" id="36930">b</span>&nbsp;<span class="op" id="36932">*</span><span class="ident" id="36933"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="36940">.</span><span class="ident" id="36941">B</span><span class="op" id="36942">)</span>&nbsp;<span class="op" id="36944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="36947">//&nbsp;Optimal&nbsp;case&nbsp;is&nbsp;where&nbsp;the&nbsp;underlying&nbsp;reader&nbsp;implements&nbsp;io.WriterTo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37018">srcBuf</span>&nbsp;<span class="op" id="37025">:=</span>&nbsp;<span class="ident" id="37028"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="37033">.</span><span class="ident" id="37034">NewBuffer</span><span class="op" id="37043">(</span><span class="builtinfunc" id="37044">make</span><span class="op" id="37048">(</span><span class="op" id="37049">[</span><span class="op" id="37050">]</span><span class="builtintype" id="37051">byte</span><span class="op" id="37055">,</span>&nbsp;<span class="num" id="37057">8192</span><span class="op" id="37061">)</span><span class="op" id="37062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37065">src</span>&nbsp;<span class="op" id="37069">:=</span>&nbsp;<span class="ident" id="37072"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="37081">(</span><span class="ident" id="37082"><a href="/bufio/bufio_test.go.html#37018">srcBuf</a></span><span class="op" id="37088">)</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37091">dstBuf</span>&nbsp;<span class="op" id="37098">:=</span>&nbsp;<span class="builtinfunc" id="37101">new</span><span class="op" id="37104">(</span><span class="ident" id="37105"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="37110">.</span><span class="ident" id="37111">Buffer</span><span class="op" id="37117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37120">dst</span>&nbsp;<span class="op" id="37124">:=</span>&nbsp;<span class="ident" id="37127"><a href="/bufio/bufio_test.go.html#36864">onlyWriter</a></span><span class="op" id="37137">{</span><span class="ident" id="37138"><a href="/bufio/bufio_test.go.html#37091">dstBuf</a></span><span class="op" id="37144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="37147">for</span>&nbsp;<span class="ident" id="37151">i</span>&nbsp;<span class="op" id="37153">:=</span>&nbsp;<span class="num" id="37156">0</span><span class="op" id="37157">;</span>&nbsp;<span class="ident" id="37159"><a href="/bufio/bufio_test.go.html#37151">i</a></span>&nbsp;<span class="op" id="37161">&lt;</span>&nbsp;<span class="ident" id="37163"><a href="/bufio/bufio_test.go.html#36930">b</a></span><span class="op" id="37164">.</span><span class="ident" id="37165">N</span><span class="op" id="37166">;</span>&nbsp;<span class="ident" id="37168"><a href="/bufio/bufio_test.go.html#37151">i</a></span><span class="op" id="37169">++</span>&nbsp;<span class="op" id="37172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37176"><a href="/bufio/bufio_test.go.html#37018">srcBuf</a></span><span class="op" id="37182">.</span><span class="ident" id="37183">Reset</span><span class="op" id="37188">(</span><span class="op" id="37189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37193"><a href="/bufio/bufio_test.go.html#37065">src</a></span><span class="op" id="37196">.</span><span class="ident" id="37197">Reset</span><span class="op" id="37202">(</span><span class="ident" id="37203"><a href="/bufio/bufio_test.go.html#37018">srcBuf</a></span><span class="op" id="37209">)</span><br>
<span class="lineno">1290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37213"><a href="/bufio/bufio_test.go.html#37091">dstBuf</a></span><span class="op" id="37219">.</span><span class="ident" id="37220">Reset</span><span class="op" id="37225">(</span><span class="op" id="37226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37230"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="37232">.</span><span class="ident" id="37233">Copy</span><span class="op" id="37237">(</span><span class="ident" id="37238"><a href="/bufio/bufio_test.go.html#37120">dst</a></span><span class="op" id="37241">,</span>&nbsp;<span class="ident" id="37243"><a href="/bufio/bufio_test.go.html#37065">src</a></span><span class="op" id="37246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="37249">}</span><br>
<span class="lineno"></span><span class="op" id="37251">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1295</span><span class="keyword" id="37254">func</span>&nbsp;<span class="ident" id="37259">BenchmarkReaderCopyUnoptimal</span><span class="op" id="37287">(</span><span class="ident" id="37288">b</span>&nbsp;<span class="op" id="37290">*</span><span class="ident" id="37291"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="37298">.</span><span class="ident" id="37299">B</span><span class="op" id="37300">)</span>&nbsp;<span class="op" id="37302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="37305">//&nbsp;Unoptimal&nbsp;case&nbsp;is&nbsp;where&nbsp;the&nbsp;underlying&nbsp;reader&nbsp;doesn&#39;t&nbsp;implement&nbsp;io.WriterTo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37385">srcBuf</span>&nbsp;<span class="op" id="37392">:=</span>&nbsp;<span class="ident" id="37395"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="37400">.</span><span class="ident" id="37401">NewBuffer</span><span class="op" id="37410">(</span><span class="builtinfunc" id="37411">make</span><span class="op" id="37415">(</span><span class="op" id="37416">[</span><span class="op" id="37417">]</span><span class="builtintype" id="37418">byte</span><span class="op" id="37422">,</span>&nbsp;<span class="num" id="37424">8192</span><span class="op" id="37428">)</span><span class="op" id="37429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37432">src</span>&nbsp;<span class="op" id="37436">:=</span>&nbsp;<span class="ident" id="37439"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="37448">(</span><span class="ident" id="37449"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="37459">{</span><span class="ident" id="37460"><a href="/bufio/bufio_test.go.html#37385">srcBuf</a></span><span class="op" id="37466">}</span><span class="op" id="37467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37470">dstBuf</span>&nbsp;<span class="op" id="37477">:=</span>&nbsp;<span class="builtinfunc" id="37480">new</span><span class="op" id="37483">(</span><span class="ident" id="37484"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="37489">.</span><span class="ident" id="37490">Buffer</span><span class="op" id="37496">)</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37499">dst</span>&nbsp;<span class="op" id="37503">:=</span>&nbsp;<span class="ident" id="37506"><a href="/bufio/bufio_test.go.html#36864">onlyWriter</a></span><span class="op" id="37516">{</span><span class="ident" id="37517"><a href="/bufio/bufio_test.go.html#37470">dstBuf</a></span><span class="op" id="37523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="37526">for</span>&nbsp;<span class="ident" id="37530">i</span>&nbsp;<span class="op" id="37532">:=</span>&nbsp;<span class="num" id="37535">0</span><span class="op" id="37536">;</span>&nbsp;<span class="ident" id="37538"><a href="/bufio/bufio_test.go.html#37530">i</a></span>&nbsp;<span class="op" id="37540">&lt;</span>&nbsp;<span class="ident" id="37542"><a href="/bufio/bufio_test.go.html#37288">b</a></span><span class="op" id="37543">.</span><span class="ident" id="37544">N</span><span class="op" id="37545">;</span>&nbsp;<span class="ident" id="37547"><a href="/bufio/bufio_test.go.html#37530">i</a></span><span class="op" id="37548">++</span>&nbsp;<span class="op" id="37551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37555"><a href="/bufio/bufio_test.go.html#37385">srcBuf</a></span><span class="op" id="37561">.</span><span class="ident" id="37562">Reset</span><span class="op" id="37567">(</span><span class="op" id="37568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37572"><a href="/bufio/bufio_test.go.html#37432">src</a></span><span class="op" id="37575">.</span><span class="ident" id="37576">Reset</span><span class="op" id="37581">(</span><span class="ident" id="37582"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="37592">{</span><span class="ident" id="37593"><a href="/bufio/bufio_test.go.html#37385">srcBuf</a></span><span class="op" id="37599">}</span><span class="op" id="37600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37604"><a href="/bufio/bufio_test.go.html#37470">dstBuf</a></span><span class="op" id="37610">.</span><span class="ident" id="37611">Reset</span><span class="op" id="37616">(</span><span class="op" id="37617">)</span><br>
<span class="lineno">1305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37621"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="37623">.</span><span class="ident" id="37624">Copy</span><span class="op" id="37628">(</span><span class="ident" id="37629"><a href="/bufio/bufio_test.go.html#37499">dst</a></span><span class="op" id="37632">,</span>&nbsp;<span class="ident" id="37634"><a href="/bufio/bufio_test.go.html#37432">src</a></span><span class="op" id="37637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="37640">}</span><br>
<span class="lineno"></span><span class="op" id="37642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="37645">func</span>&nbsp;<span class="ident" id="37650">BenchmarkReaderCopyNoWriteTo</span><span class="op" id="37678">(</span><span class="ident" id="37679">b</span>&nbsp;<span class="op" id="37681">*</span><span class="ident" id="37682"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="37689">.</span><span class="ident" id="37690">B</span><span class="op" id="37691">)</span>&nbsp;<span class="op" id="37693">{</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37696">srcBuf</span>&nbsp;<span class="op" id="37703">:=</span>&nbsp;<span class="ident" id="37706"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="37711">.</span><span class="ident" id="37712">NewBuffer</span><span class="op" id="37721">(</span><span class="builtinfunc" id="37722">make</span><span class="op" id="37726">(</span><span class="op" id="37727">[</span><span class="op" id="37728">]</span><span class="builtintype" id="37729">byte</span><span class="op" id="37733">,</span>&nbsp;<span class="num" id="37735">8192</span><span class="op" id="37739">)</span><span class="op" id="37740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37743">srcReader</span>&nbsp;<span class="op" id="37753">:=</span>&nbsp;<span class="ident" id="37756"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="37765">(</span><span class="ident" id="37766"><a href="/bufio/bufio_test.go.html#37696">srcBuf</a></span><span class="op" id="37772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37775">src</span>&nbsp;<span class="op" id="37779">:=</span>&nbsp;<span class="ident" id="37782"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="37792">{</span><span class="ident" id="37793"><a href="/bufio/bufio_test.go.html#37743">srcReader</a></span><span class="op" id="37802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37805">dstBuf</span>&nbsp;<span class="op" id="37812">:=</span>&nbsp;<span class="builtinfunc" id="37815">new</span><span class="op" id="37818">(</span><span class="ident" id="37819"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="37824">.</span><span class="ident" id="37825">Buffer</span><span class="op" id="37831">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37834">dst</span>&nbsp;<span class="op" id="37838">:=</span>&nbsp;<span class="ident" id="37841"><a href="/bufio/bufio_test.go.html#36864">onlyWriter</a></span><span class="op" id="37851">{</span><span class="ident" id="37852"><a href="/bufio/bufio_test.go.html#37805">dstBuf</a></span><span class="op" id="37858">}</span><br>
<span class="lineno">1315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="37861">for</span>&nbsp;<span class="ident" id="37865">i</span>&nbsp;<span class="op" id="37867">:=</span>&nbsp;<span class="num" id="37870">0</span><span class="op" id="37871">;</span>&nbsp;<span class="ident" id="37873"><a href="/bufio/bufio_test.go.html#37865">i</a></span>&nbsp;<span class="op" id="37875">&lt;</span>&nbsp;<span class="ident" id="37877"><a href="/bufio/bufio_test.go.html#37679">b</a></span><span class="op" id="37878">.</span><span class="ident" id="37879">N</span><span class="op" id="37880">;</span>&nbsp;<span class="ident" id="37882"><a href="/bufio/bufio_test.go.html#37865">i</a></span><span class="op" id="37883">++</span>&nbsp;<span class="op" id="37886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37890"><a href="/bufio/bufio_test.go.html#37696">srcBuf</a></span><span class="op" id="37896">.</span><span class="ident" id="37897">Reset</span><span class="op" id="37902">(</span><span class="op" id="37903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37907"><a href="/bufio/bufio_test.go.html#37743">srcReader</a></span><span class="op" id="37916">.</span><span class="ident" id="37917">Reset</span><span class="op" id="37922">(</span><span class="ident" id="37923"><a href="/bufio/bufio_test.go.html#37696">srcBuf</a></span><span class="op" id="37929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37933"><a href="/bufio/bufio_test.go.html#37805">dstBuf</a></span><span class="op" id="37939">.</span><span class="ident" id="37940">Reset</span><span class="op" id="37945">(</span><span class="op" id="37946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="37950"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="37952">.</span><span class="ident" id="37953">Copy</span><span class="op" id="37957">(</span><span class="ident" id="37958"><a href="/bufio/bufio_test.go.html#37834">dst</a></span><span class="op" id="37961">,</span>&nbsp;<span class="ident" id="37963"><a href="/bufio/bufio_test.go.html#37775">src</a></span><span class="op" id="37966">)</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="37969">}</span><br>
<span class="lineno"></span><span class="op" id="37971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="37974">func</span>&nbsp;<span class="ident" id="37979">BenchmarkReaderWriteToOptimal</span><span class="op" id="38008">(</span><span class="ident" id="38009">b</span>&nbsp;<span class="op" id="38011">*</span><span class="ident" id="38012"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="38019">.</span><span class="ident" id="38020">B</span><span class="op" id="38021">)</span>&nbsp;<span class="op" id="38023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="38026">const</span>&nbsp;<span class="ident" id="38032">bufSize</span>&nbsp;<span class="op" id="38040">=</span>&nbsp;<span class="num" id="38042">16</span>&nbsp;<span class="op" id="38045">&lt;&lt;</span>&nbsp;<span class="num" id="38048">10</span><br>
<span class="lineno">1325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38052">buf</span>&nbsp;<span class="op" id="38056">:=</span>&nbsp;<span class="builtinfunc" id="38059">make</span><span class="op" id="38063">(</span><span class="op" id="38064">[</span><span class="op" id="38065">]</span><span class="builtintype" id="38066">byte</span><span class="op" id="38070">,</span>&nbsp;<span class="ident" id="38072"><a href="/bufio/bufio_test.go.html#38032">bufSize</a></span><span class="op" id="38079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38082">r</span>&nbsp;<span class="op" id="38084">:=</span>&nbsp;<span class="ident" id="38087"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="38092">.</span><span class="ident" id="38093">NewReader</span><span class="op" id="38102">(</span><span class="ident" id="38103"><a href="/bufio/bufio_test.go.html#38052">buf</a></span><span class="op" id="38106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38109">srcReader</span>&nbsp;<span class="op" id="38119">:=</span>&nbsp;<span class="ident" id="38122"><a href="/bufio/bufio.go.html#3218524">NewReaderSize</a></span><span class="op" id="38135">(</span><span class="ident" id="38136"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="38146">{</span><span class="ident" id="38147"><a href="/bufio/bufio_test.go.html#38082">r</a></span><span class="op" id="38148">}</span><span class="op" id="38149">,</span>&nbsp;<span class="num" id="38151">1</span><span class="op" id="38152">&lt;&lt;</span><span class="num" id="38154">10</span><span class="op" id="38156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="38159">if</span>&nbsp;<span class="ident" id="38162">_</span><span class="op" id="38163">,</span>&nbsp;<span class="ident" id="38165">ok</span>&nbsp;<span class="op" id="38168">:=</span>&nbsp;<span class="ident" id="38171"><a href="/bufio/bufio_test.go.html#3431">ioutil</a></span><span class="op" id="38177">.</span><span class="ident" id="38178">Discard</span><span class="op" id="38185">.</span><span class="op" id="38186">(</span><span class="ident" id="38187"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="38189">.</span><span class="ident" id="38190">ReaderFrom</span><span class="op" id="38200">)</span><span class="op" id="38201">;</span>&nbsp;<span class="op" id="38203">!</span><span class="ident" id="38204"><a href="/bufio/bufio_test.go.html#38165">ok</a></span>&nbsp;<span class="op" id="38207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38211"><a href="/bufio/bufio_test.go.html#38009">b</a></span><span class="op" id="38212">.</span><span class="ident" id="38213">Fatal</span><span class="op" id="38218">(</span><span class="string" id="38219">&#34;ioutil.Discard&nbsp;doesn&#39;t&nbsp;support&nbsp;ReaderFrom&#34;</span><span class="op" id="38262">)</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="38265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="38268">for</span>&nbsp;<span class="ident" id="38272">i</span>&nbsp;<span class="op" id="38274">:=</span>&nbsp;<span class="num" id="38277">0</span><span class="op" id="38278">;</span>&nbsp;<span class="ident" id="38280"><a href="/bufio/bufio_test.go.html#38272">i</a></span>&nbsp;<span class="op" id="38282">&lt;</span>&nbsp;<span class="ident" id="38284"><a href="/bufio/bufio_test.go.html#38009">b</a></span><span class="op" id="38285">.</span><span class="ident" id="38286">N</span><span class="op" id="38287">;</span>&nbsp;<span class="ident" id="38289"><a href="/bufio/bufio_test.go.html#38272">i</a></span><span class="op" id="38290">++</span>&nbsp;<span class="op" id="38293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38297"><a href="/bufio/bufio_test.go.html#38082">r</a></span><span class="op" id="38298">.</span><span class="ident" id="38299">Seek</span><span class="op" id="38303">(</span><span class="num" id="38304">0</span><span class="op" id="38305">,</span>&nbsp;<span class="num" id="38307">0</span><span class="op" id="38308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38312"><a href="/bufio/bufio_test.go.html#38109">srcReader</a></span><span class="op" id="38321">.</span><span class="ident" id="38322">Reset</span><span class="op" id="38327">(</span><span class="ident" id="38328"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="38338">{</span><span class="ident" id="38339"><a href="/bufio/bufio_test.go.html#38082">r</a></span><span class="op" id="38340">}</span><span class="op" id="38341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38345">n</span><span class="op" id="38346">,</span>&nbsp;<span class="ident" id="38348">err</span>&nbsp;<span class="op" id="38352">:=</span>&nbsp;<span class="ident" id="38355"><a href="/bufio/bufio_test.go.html#38109">srcReader</a></span><span class="op" id="38364">.</span><span class="ident" id="38365">WriteTo</span><span class="op" id="38372">(</span><span class="ident" id="38373"><a href="/bufio/bufio_test.go.html#3431">ioutil</a></span><span class="op" id="38379">.</span><span class="ident" id="38380">Discard</span><span class="op" id="38387">)</span><br>
<span class="lineno">1335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="38391">if</span>&nbsp;<span class="ident" id="38394"><a href="/bufio/bufio_test.go.html#38348">err</a></span>&nbsp;<span class="op" id="38398">!=</span>&nbsp;<span class="ident" id="38401">nil</span>&nbsp;<span class="op" id="38405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38410"><a href="/bufio/bufio_test.go.html#38009">b</a></span><span class="op" id="38411">.</span><span class="ident" id="38412">Fatal</span><span class="op" id="38417">(</span><span class="ident" id="38418"><a href="/bufio/bufio_test.go.html#38348">err</a></span><span class="op" id="38421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="38425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="38429">if</span>&nbsp;<span class="ident" id="38432"><a href="/bufio/bufio_test.go.html#38345">n</a></span>&nbsp;<span class="op" id="38434">!=</span>&nbsp;<span class="ident" id="38437"><a href="/bufio/bufio_test.go.html#38032">bufSize</a></span>&nbsp;<span class="op" id="38445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38450"><a href="/bufio/bufio_test.go.html#38009">b</a></span><span class="op" id="38451">.</span><span class="ident" id="38452">Fatalf</span><span class="op" id="38458">(</span><span class="string" id="38459">&#34;n&nbsp;=&nbsp;%d;&nbsp;want&nbsp;%d&#34;</span><span class="op" id="38476">,</span>&nbsp;<span class="ident" id="38478"><a href="/bufio/bufio_test.go.html#38345">n</a></span><span class="op" id="38479">,</span>&nbsp;<span class="ident" id="38481"><a href="/bufio/bufio_test.go.html#38032">bufSize</a></span><span class="op" id="38488">)</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="38492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="38495">}</span><br>
<span class="lineno"></span><span class="op" id="38497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="38500">func</span>&nbsp;<span class="ident" id="38505">BenchmarkWriterCopyOptimal</span><span class="op" id="38531">(</span><span class="ident" id="38532">b</span>&nbsp;<span class="op" id="38534">*</span><span class="ident" id="38535"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="38542">.</span><span class="ident" id="38543">B</span><span class="op" id="38544">)</span>&nbsp;<span class="op" id="38546">{</span><br>
<span class="lineno">1345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="38549">//&nbsp;Optimal&nbsp;case&nbsp;is&nbsp;where&nbsp;the&nbsp;underlying&nbsp;writer&nbsp;implements&nbsp;io.ReaderFrom</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38622">srcBuf</span>&nbsp;<span class="op" id="38629">:=</span>&nbsp;<span class="ident" id="38632"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="38637">.</span><span class="ident" id="38638">NewBuffer</span><span class="op" id="38647">(</span><span class="builtinfunc" id="38648">make</span><span class="op" id="38652">(</span><span class="op" id="38653">[</span><span class="op" id="38654">]</span><span class="builtintype" id="38655">byte</span><span class="op" id="38659">,</span>&nbsp;<span class="num" id="38661">8192</span><span class="op" id="38665">)</span><span class="op" id="38666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38669">src</span>&nbsp;<span class="op" id="38673">:=</span>&nbsp;<span class="ident" id="38676"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="38686">{</span><span class="ident" id="38687"><a href="/bufio/bufio_test.go.html#38622">srcBuf</a></span><span class="op" id="38693">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38696">dstBuf</span>&nbsp;<span class="op" id="38703">:=</span>&nbsp;<span class="builtinfunc" id="38706">new</span><span class="op" id="38709">(</span><span class="ident" id="38710"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="38715">.</span><span class="ident" id="38716">Buffer</span><span class="op" id="38722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38725">dst</span>&nbsp;<span class="op" id="38729">:=</span>&nbsp;<span class="ident" id="38732"><a href="/bufio/bufio.go.html#3230224">NewWriter</a></span><span class="op" id="38741">(</span><span class="ident" id="38742"><a href="/bufio/bufio_test.go.html#38696">dstBuf</a></span><span class="op" id="38748">)</span><br>
<span class="lineno">1350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="38751">for</span>&nbsp;<span class="ident" id="38755">i</span>&nbsp;<span class="op" id="38757">:=</span>&nbsp;<span class="num" id="38760">0</span><span class="op" id="38761">;</span>&nbsp;<span class="ident" id="38763"><a href="/bufio/bufio_test.go.html#38755">i</a></span>&nbsp;<span class="op" id="38765">&lt;</span>&nbsp;<span class="ident" id="38767"><a href="/bufio/bufio_test.go.html#38532">b</a></span><span class="op" id="38768">.</span><span class="ident" id="38769">N</span><span class="op" id="38770">;</span>&nbsp;<span class="ident" id="38772"><a href="/bufio/bufio_test.go.html#38755">i</a></span><span class="op" id="38773">++</span>&nbsp;<span class="op" id="38776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38780"><a href="/bufio/bufio_test.go.html#38622">srcBuf</a></span><span class="op" id="38786">.</span><span class="ident" id="38787">Reset</span><span class="op" id="38792">(</span><span class="op" id="38793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38797"><a href="/bufio/bufio_test.go.html#38696">dstBuf</a></span><span class="op" id="38803">.</span><span class="ident" id="38804">Reset</span><span class="op" id="38809">(</span><span class="op" id="38810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38814"><a href="/bufio/bufio_test.go.html#38725">dst</a></span><span class="op" id="38817">.</span><span class="ident" id="38818">Reset</span><span class="op" id="38823">(</span><span class="ident" id="38824"><a href="/bufio/bufio_test.go.html#38696">dstBuf</a></span><span class="op" id="38830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38834"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="38836">.</span><span class="ident" id="38837">Copy</span><span class="op" id="38841">(</span><span class="ident" id="38842"><a href="/bufio/bufio_test.go.html#38725">dst</a></span><span class="op" id="38845">,</span>&nbsp;<span class="ident" id="38847"><a href="/bufio/bufio_test.go.html#38669">src</a></span><span class="op" id="38850">)</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="38853">}</span><br>
<span class="lineno"></span><span class="op" id="38855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="38858">func</span>&nbsp;<span class="ident" id="38863">BenchmarkWriterCopyUnoptimal</span><span class="op" id="38891">(</span><span class="ident" id="38892">b</span>&nbsp;<span class="op" id="38894">*</span><span class="ident" id="38895"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="38902">.</span><span class="ident" id="38903">B</span><span class="op" id="38904">)</span>&nbsp;<span class="op" id="38906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38909">srcBuf</span>&nbsp;<span class="op" id="38916">:=</span>&nbsp;<span class="ident" id="38919"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="38924">.</span><span class="ident" id="38925">NewBuffer</span><span class="op" id="38934">(</span><span class="builtinfunc" id="38935">make</span><span class="op" id="38939">(</span><span class="op" id="38940">[</span><span class="op" id="38941">]</span><span class="builtintype" id="38942">byte</span><span class="op" id="38946">,</span>&nbsp;<span class="num" id="38948">8192</span><span class="op" id="38952">)</span><span class="op" id="38953">)</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38956">src</span>&nbsp;<span class="op" id="38960">:=</span>&nbsp;<span class="ident" id="38963"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="38973">{</span><span class="ident" id="38974"><a href="/bufio/bufio_test.go.html#38909">srcBuf</a></span><span class="op" id="38980">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="38983">dstBuf</span>&nbsp;<span class="op" id="38990">:=</span>&nbsp;<span class="builtinfunc" id="38993">new</span><span class="op" id="38996">(</span><span class="ident" id="38997"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="39002">.</span><span class="ident" id="39003">Buffer</span><span class="op" id="39009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39012">dst</span>&nbsp;<span class="op" id="39016">:=</span>&nbsp;<span class="ident" id="39019"><a href="/bufio/bufio.go.html#3230224">NewWriter</a></span><span class="op" id="39028">(</span><span class="ident" id="39029"><a href="/bufio/bufio_test.go.html#36864">onlyWriter</a></span><span class="op" id="39039">{</span><span class="ident" id="39040"><a href="/bufio/bufio_test.go.html#38983">dstBuf</a></span><span class="op" id="39046">}</span><span class="op" id="39047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="39050">for</span>&nbsp;<span class="ident" id="39054">i</span>&nbsp;<span class="op" id="39056">:=</span>&nbsp;<span class="num" id="39059">0</span><span class="op" id="39060">;</span>&nbsp;<span class="ident" id="39062"><a href="/bufio/bufio_test.go.html#39054">i</a></span>&nbsp;<span class="op" id="39064">&lt;</span>&nbsp;<span class="ident" id="39066"><a href="/bufio/bufio_test.go.html#38892">b</a></span><span class="op" id="39067">.</span><span class="ident" id="39068">N</span><span class="op" id="39069">;</span>&nbsp;<span class="ident" id="39071"><a href="/bufio/bufio_test.go.html#39054">i</a></span><span class="op" id="39072">++</span>&nbsp;<span class="op" id="39075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39079"><a href="/bufio/bufio_test.go.html#38909">srcBuf</a></span><span class="op" id="39085">.</span><span class="ident" id="39086">Reset</span><span class="op" id="39091">(</span><span class="op" id="39092">)</span><br>
<span class="lineno">1365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39096"><a href="/bufio/bufio_test.go.html#38983">dstBuf</a></span><span class="op" id="39102">.</span><span class="ident" id="39103">Reset</span><span class="op" id="39108">(</span><span class="op" id="39109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39113"><a href="/bufio/bufio_test.go.html#39012">dst</a></span><span class="op" id="39116">.</span><span class="ident" id="39117">Reset</span><span class="op" id="39122">(</span><span class="ident" id="39123"><a href="/bufio/bufio_test.go.html#36864">onlyWriter</a></span><span class="op" id="39133">{</span><span class="ident" id="39134"><a href="/bufio/bufio_test.go.html#38983">dstBuf</a></span><span class="op" id="39140">}</span><span class="op" id="39141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39145"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="39147">.</span><span class="ident" id="39148">Copy</span><span class="op" id="39152">(</span><span class="ident" id="39153"><a href="/bufio/bufio_test.go.html#39012">dst</a></span><span class="op" id="39156">,</span>&nbsp;<span class="ident" id="39158"><a href="/bufio/bufio_test.go.html#38956">src</a></span><span class="op" id="39161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="39164">}</span><br>
<span class="lineno"></span><span class="op" id="39166">}</span><br>
<span class="lineno">1370</span><br>
<span class="lineno"></span><span class="keyword" id="39169">func</span>&nbsp;<span class="ident" id="39174">BenchmarkWriterCopyNoReadFrom</span><span class="op" id="39203">(</span><span class="ident" id="39204">b</span>&nbsp;<span class="op" id="39206">*</span><span class="ident" id="39207"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="39214">.</span><span class="ident" id="39215">B</span><span class="op" id="39216">)</span>&nbsp;<span class="op" id="39218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39221">srcBuf</span>&nbsp;<span class="op" id="39228">:=</span>&nbsp;<span class="ident" id="39231"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="39236">.</span><span class="ident" id="39237">NewBuffer</span><span class="op" id="39246">(</span><span class="builtinfunc" id="39247">make</span><span class="op" id="39251">(</span><span class="op" id="39252">[</span><span class="op" id="39253">]</span><span class="builtintype" id="39254">byte</span><span class="op" id="39258">,</span>&nbsp;<span class="num" id="39260">8192</span><span class="op" id="39264">)</span><span class="op" id="39265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39268">src</span>&nbsp;<span class="op" id="39272">:=</span>&nbsp;<span class="ident" id="39275"><a href="/bufio/bufio_test.go.html#36712">onlyReader</a></span><span class="op" id="39285">{</span><span class="ident" id="39286"><a href="/bufio/bufio_test.go.html#39221">srcBuf</a></span><span class="op" id="39292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39295">dstBuf</span>&nbsp;<span class="op" id="39302">:=</span>&nbsp;<span class="builtinfunc" id="39305">new</span><span class="op" id="39308">(</span><span class="ident" id="39309"><a href="/bufio/bufio_test.go.html#3399">bytes</a></span><span class="op" id="39314">.</span><span class="ident" id="39315">Buffer</span><span class="op" id="39321">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39324">dstWriter</span>&nbsp;<span class="op" id="39334">:=</span>&nbsp;<span class="ident" id="39337"><a href="/bufio/bufio.go.html#3230224">NewWriter</a></span><span class="op" id="39346">(</span><span class="ident" id="39347"><a href="/bufio/bufio_test.go.html#39295">dstBuf</a></span><span class="op" id="39353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39356">dst</span>&nbsp;<span class="op" id="39360">:=</span>&nbsp;<span class="ident" id="39363"><a href="/bufio/bufio_test.go.html#36864">onlyWriter</a></span><span class="op" id="39373">{</span><span class="ident" id="39374"><a href="/bufio/bufio_test.go.html#39324">dstWriter</a></span><span class="op" id="39383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="39386">for</span>&nbsp;<span class="ident" id="39390">i</span>&nbsp;<span class="op" id="39392">:=</span>&nbsp;<span class="num" id="39395">0</span><span class="op" id="39396">;</span>&nbsp;<span class="ident" id="39398"><a href="/bufio/bufio_test.go.html#39390">i</a></span>&nbsp;<span class="op" id="39400">&lt;</span>&nbsp;<span class="ident" id="39402"><a href="/bufio/bufio_test.go.html#39204">b</a></span><span class="op" id="39403">.</span><span class="ident" id="39404">N</span><span class="op" id="39405">;</span>&nbsp;<span class="ident" id="39407"><a href="/bufio/bufio_test.go.html#39390">i</a></span><span class="op" id="39408">++</span>&nbsp;<span class="op" id="39411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39415"><a href="/bufio/bufio_test.go.html#39221">srcBuf</a></span><span class="op" id="39421">.</span><span class="ident" id="39422">Reset</span><span class="op" id="39427">(</span><span class="op" id="39428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39432"><a href="/bufio/bufio_test.go.html#39295">dstBuf</a></span><span class="op" id="39438">.</span><span class="ident" id="39439">Reset</span><span class="op" id="39444">(</span><span class="op" id="39445">)</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39449"><a href="/bufio/bufio_test.go.html#39324">dstWriter</a></span><span class="op" id="39458">.</span><span class="ident" id="39459">Reset</span><span class="op" id="39464">(</span><span class="ident" id="39465"><a href="/bufio/bufio_test.go.html#39295">dstBuf</a></span><span class="op" id="39471">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39475"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="39477">.</span><span class="ident" id="39478">Copy</span><span class="op" id="39482">(</span><span class="ident" id="39483"><a href="/bufio/bufio_test.go.html#39356">dst</a></span><span class="op" id="39486">,</span>&nbsp;<span class="ident" id="39488"><a href="/bufio/bufio_test.go.html#39268">src</a></span><span class="op" id="39491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="39494">}</span><br>
<span class="lineno"></span><span class="op" id="39496">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1385</span><span class="keyword" id="39499">func</span>&nbsp;<span class="ident" id="39504">BenchmarkReaderEmpty</span><span class="op" id="39524">(</span><span class="ident" id="39525">b</span>&nbsp;<span class="op" id="39527">*</span><span class="ident" id="39528"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="39535">.</span><span class="ident" id="39536">B</span><span class="op" id="39537">)</span>&nbsp;<span class="op" id="39539">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39542"><a href="/bufio/bufio_test.go.html#39525">b</a></span><span class="op" id="39543">.</span><span class="ident" id="39544">ReportAllocs</span><span class="op" id="39556">(</span><span class="op" id="39557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39560">str</span>&nbsp;<span class="op" id="39564">:=</span>&nbsp;<span class="ident" id="39567"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="39574">.</span><span class="ident" id="39575">Repeat</span><span class="op" id="39581">(</span><span class="string" id="39582">&#34;x&#34;</span><span class="op" id="39585">,</span>&nbsp;<span class="num" id="39587">16</span><span class="op" id="39589">&lt;&lt;</span><span class="num" id="39591">10</span><span class="op" id="39593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="39596">for</span>&nbsp;<span class="ident" id="39600">i</span>&nbsp;<span class="op" id="39602">:=</span>&nbsp;<span class="num" id="39605">0</span><span class="op" id="39606">;</span>&nbsp;<span class="ident" id="39608"><a href="/bufio/bufio_test.go.html#39600">i</a></span>&nbsp;<span class="op" id="39610">&lt;</span>&nbsp;<span class="ident" id="39612"><a href="/bufio/bufio_test.go.html#39525">b</a></span><span class="op" id="39613">.</span><span class="ident" id="39614">N</span><span class="op" id="39615">;</span>&nbsp;<span class="ident" id="39617"><a href="/bufio/bufio_test.go.html#39600">i</a></span><span class="op" id="39618">++</span>&nbsp;<span class="op" id="39621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39625">br</span>&nbsp;<span class="op" id="39628">:=</span>&nbsp;<span class="ident" id="39631"><a href="/bufio/bufio.go.html#3218867">NewReader</a></span><span class="op" id="39640">(</span><span class="ident" id="39641"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="39648">.</span><span class="ident" id="39649">NewReader</span><span class="op" id="39658">(</span><span class="ident" id="39659"><a href="/bufio/bufio_test.go.html#39560">str</a></span><span class="op" id="39662">)</span><span class="op" id="39663">)</span><br>
<span class="lineno">1390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39667">n</span><span class="op" id="39668">,</span>&nbsp;<span class="ident" id="39670">err</span>&nbsp;<span class="op" id="39674">:=</span>&nbsp;<span class="ident" id="39677"><a href="/bufio/bufio_test.go.html#3425">io</a></span><span class="op" id="39679">.</span><span class="ident" id="39680">Copy</span><span class="op" id="39684">(</span><span class="ident" id="39685"><a href="/bufio/bufio_test.go.html#3431">ioutil</a></span><span class="op" id="39691">.</span><span class="ident" id="39692">Discard</span><span class="op" id="39699">,</span>&nbsp;<span class="ident" id="39701"><a href="/bufio/bufio_test.go.html#39625">br</a></span><span class="op" id="39703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="39707">if</span>&nbsp;<span class="ident" id="39710"><a href="/bufio/bufio_test.go.html#39670">err</a></span>&nbsp;<span class="op" id="39714">!=</span>&nbsp;<span class="ident" id="39717">nil</span>&nbsp;<span class="op" id="39721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39726"><a href="/bufio/bufio_test.go.html#39525">b</a></span><span class="op" id="39727">.</span><span class="ident" id="39728">Fatal</span><span class="op" id="39733">(</span><span class="ident" id="39734"><a href="/bufio/bufio_test.go.html#39670">err</a></span><span class="op" id="39737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="39741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="39745">if</span>&nbsp;<span class="ident" id="39748"><a href="/bufio/bufio_test.go.html#39667">n</a></span>&nbsp;<span class="op" id="39750">!=</span>&nbsp;<span class="ident" id="39753">int64</span><span class="op" id="39758">(</span><span class="builtinfunc" id="39759">len</span><span class="op" id="39762">(</span><span class="ident" id="39763"><a href="/bufio/bufio_test.go.html#39560">str</a></span><span class="op" id="39766">)</span><span class="op" id="39767">)</span>&nbsp;<span class="op" id="39769">{</span><br>
<span class="lineno">1395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39774"><a href="/bufio/bufio_test.go.html#39525">b</a></span><span class="op" id="39775">.</span><span class="ident" id="39776">Fatal</span><span class="op" id="39781">(</span><span class="string" id="39782">&#34;wrong&nbsp;length&#34;</span><span class="op" id="39796">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="39800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="39803">}</span><br>
<span class="lineno"></span><span class="op" id="39805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1400</span><span class="keyword" id="39808">func</span>&nbsp;<span class="ident" id="39813">BenchmarkWriterEmpty</span><span class="op" id="39833">(</span><span class="ident" id="39834">b</span>&nbsp;<span class="op" id="39836">*</span><span class="ident" id="39837"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="39844">.</span><span class="ident" id="39845">B</span><span class="op" id="39846">)</span>&nbsp;<span class="op" id="39848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39851"><a href="/bufio/bufio_test.go.html#39834">b</a></span><span class="op" id="39852">.</span><span class="ident" id="39853">ReportAllocs</span><span class="op" id="39865">(</span><span class="op" id="39866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39869">str</span>&nbsp;<span class="op" id="39873">:=</span>&nbsp;<span class="ident" id="39876"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="39883">.</span><span class="ident" id="39884">Repeat</span><span class="op" id="39890">(</span><span class="string" id="39891">&#34;x&#34;</span><span class="op" id="39894">,</span>&nbsp;<span class="num" id="39896">1</span><span class="op" id="39897">&lt;&lt;</span><span class="num" id="39899">10</span><span class="op" id="39901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39904">bs</span>&nbsp;<span class="op" id="39907">:=</span>&nbsp;<span class="op" id="39910">[</span><span class="op" id="39911">]</span><span class="builtintype" id="39912">byte</span><span class="op" id="39916">(</span><span class="ident" id="39917"><a href="/bufio/bufio_test.go.html#39869">str</a></span><span class="op" id="39920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="39923">for</span>&nbsp;<span class="ident" id="39927">i</span>&nbsp;<span class="op" id="39929">:=</span>&nbsp;<span class="num" id="39932">0</span><span class="op" id="39933">;</span>&nbsp;<span class="ident" id="39935"><a href="/bufio/bufio_test.go.html#39927">i</a></span>&nbsp;<span class="op" id="39937">&lt;</span>&nbsp;<span class="ident" id="39939"><a href="/bufio/bufio_test.go.html#39834">b</a></span><span class="op" id="39940">.</span><span class="ident" id="39941">N</span><span class="op" id="39942">;</span>&nbsp;<span class="ident" id="39944"><a href="/bufio/bufio_test.go.html#39927">i</a></span><span class="op" id="39945">++</span>&nbsp;<span class="op" id="39948">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39952">bw</span>&nbsp;<span class="op" id="39955">:=</span>&nbsp;<span class="ident" id="39958"><a href="/bufio/bufio.go.html#3230224">NewWriter</a></span><span class="op" id="39967">(</span><span class="ident" id="39968"><a href="/bufio/bufio_test.go.html#3431">ioutil</a></span><span class="op" id="39974">.</span><span class="ident" id="39975">Discard</span><span class="op" id="39982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39986"><a href="/bufio/bufio_test.go.html#39952">bw</a></span><span class="op" id="39988">.</span><span class="ident" id="39989">Flush</span><span class="op" id="39994">(</span><span class="op" id="39995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="39999"><a href="/bufio/bufio_test.go.html#39952">bw</a></span><span class="op" id="40001">.</span><span class="ident" id="40002">WriteByte</span><span class="op" id="40011">(</span><span class="string" id="40012">&#39;a&#39;</span><span class="op" id="40015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40019"><a href="/bufio/bufio_test.go.html#39952">bw</a></span><span class="op" id="40021">.</span><span class="ident" id="40022">Flush</span><span class="op" id="40027">(</span><span class="op" id="40028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40032"><a href="/bufio/bufio_test.go.html#39952">bw</a></span><span class="op" id="40034">.</span><span class="ident" id="40035">WriteRune</span><span class="op" id="40044">(</span><span class="string" id="40045">&#39;B&#39;</span><span class="op" id="40048">)</span><br>
<span class="lineno">1410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40052"><a href="/bufio/bufio_test.go.html#39952">bw</a></span><span class="op" id="40054">.</span><span class="ident" id="40055">Flush</span><span class="op" id="40060">(</span><span class="op" id="40061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40065"><a href="/bufio/bufio_test.go.html#39952">bw</a></span><span class="op" id="40067">.</span><span class="ident" id="40068">Write</span><span class="op" id="40073">(</span><span class="ident" id="40074"><a href="/bufio/bufio_test.go.html#39904">bs</a></span><span class="op" id="40076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40080"><a href="/bufio/bufio_test.go.html#39952">bw</a></span><span class="op" id="40082">.</span><span class="ident" id="40083">Flush</span><span class="op" id="40088">(</span><span class="op" id="40089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40093"><a href="/bufio/bufio_test.go.html#39952">bw</a></span><span class="op" id="40095">.</span><span class="ident" id="40096">WriteString</span><span class="op" id="40107">(</span><span class="ident" id="40108"><a href="/bufio/bufio_test.go.html#39869">str</a></span><span class="op" id="40111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40115"><a href="/bufio/bufio_test.go.html#39952">bw</a></span><span class="op" id="40117">.</span><span class="ident" id="40118">Flush</span><span class="op" id="40123">(</span><span class="op" id="40124">)</span><br>
<span class="lineno">1415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="40127">}</span><br>
<span class="lineno"></span><span class="op" id="40129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="40132">func</span>&nbsp;<span class="ident" id="40137">BenchmarkWriterFlush</span><span class="op" id="40157">(</span><span class="ident" id="40158">b</span>&nbsp;<span class="op" id="40160">*</span><span class="ident" id="40161"><a href="/bufio/bufio_test.go.html#3455">testing</a></span><span class="op" id="40168">.</span><span class="ident" id="40169">B</span><span class="op" id="40170">)</span>&nbsp;<span class="op" id="40172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40175"><a href="/bufio/bufio_test.go.html#40158">b</a></span><span class="op" id="40176">.</span><span class="ident" id="40177">ReportAllocs</span><span class="op" id="40189">(</span><span class="op" id="40190">)</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40193">bw</span>&nbsp;<span class="op" id="40196">:=</span>&nbsp;<span class="ident" id="40199"><a href="/bufio/bufio.go.html#3230224">NewWriter</a></span><span class="op" id="40208">(</span><span class="ident" id="40209"><a href="/bufio/bufio_test.go.html#3431">ioutil</a></span><span class="op" id="40215">.</span><span class="ident" id="40216">Discard</span><span class="op" id="40223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40226">str</span>&nbsp;<span class="op" id="40230">:=</span>&nbsp;<span class="ident" id="40233"><a href="/bufio/bufio_test.go.html#3444">strings</a></span><span class="op" id="40240">.</span><span class="ident" id="40241">Repeat</span><span class="op" id="40247">(</span><span class="string" id="40248">&#34;x&#34;</span><span class="op" id="40251">,</span>&nbsp;<span class="num" id="40253">50</span><span class="op" id="40255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="40258">for</span>&nbsp;<span class="ident" id="40262">i</span>&nbsp;<span class="op" id="40264">:=</span>&nbsp;<span class="num" id="40267">0</span><span class="op" id="40268">;</span>&nbsp;<span class="ident" id="40270"><a href="/bufio/bufio_test.go.html#40262">i</a></span>&nbsp;<span class="op" id="40272">&lt;</span>&nbsp;<span class="ident" id="40274"><a href="/bufio/bufio_test.go.html#40158">b</a></span><span class="op" id="40275">.</span><span class="ident" id="40276">N</span><span class="op" id="40277">;</span>&nbsp;<span class="ident" id="40279"><a href="/bufio/bufio_test.go.html#40262">i</a></span><span class="op" id="40280">++</span>&nbsp;<span class="op" id="40283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40287"><a href="/bufio/bufio_test.go.html#40193">bw</a></span><span class="op" id="40289">.</span><span class="ident" id="40290">WriteString</span><span class="op" id="40301">(</span><span class="ident" id="40302"><a href="/bufio/bufio_test.go.html#40226">str</a></span><span class="op" id="40305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="40309"><a href="/bufio/bufio_test.go.html#40193">bw</a></span><span class="op" id="40311">.</span><span class="ident" id="40312">Flush</span><span class="op" id="40317">(</span><span class="op" id="40318">)</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="40321">}</span><br>
<span class="lineno"></span><span class="op" id="40323">}</span>
</div>
</body>
</html>
