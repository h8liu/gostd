<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/asn1</h2>
<ul>
<li><a href="/gostd/encoding/asn1/asn1.go.html">asn1.go</a></li>
<li><a href="/gostd/encoding/asn1/asn1_test.go.html">asn1_test.go</a></li>
<li><a href="/gostd/encoding/asn1/common.go.html">common.go</a></li>
<li><a href="/gostd/encoding/asn1/marshal.go.html" class="current">marshal.go</a></li>
<li><a href="/gostd/encoding/asn1/marshal_test.go.html">marshal_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4637946">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4638001">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4638055">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4638106">package</span>&nbsp;<span class="ident" id="4638114">asn1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4638120">import</span>&nbsp;<span class="op" id="4638127">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4638130">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4638139">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4638149">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4638156">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4638162">&#34;math/big&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4638174">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4638185">&#34;time&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4638193">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="4638208">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4638211">//&nbsp;A&nbsp;forkableWriter&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;buffer&nbsp;that&nbsp;can&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="4638266">//&nbsp;&#39;forked&#39;&nbsp;to&nbsp;create&nbsp;new&nbsp;forkableWriters&nbsp;that&nbsp;bracket&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="4638325">//&nbsp;original.&nbsp;&nbsp;After</span><br>
<span class="lineno"></span><span class="comment" id="4638345">//&nbsp;&nbsp;&nbsp;&nbsp;pre,&nbsp;post&nbsp;:=&nbsp;w.fork();</span><br>
<span class="lineno"></span><span class="comment" id="4638374">//&nbsp;the&nbsp;overall&nbsp;sequence&nbsp;of&nbsp;bytes&nbsp;represented&nbsp;is&nbsp;logically&nbsp;w+pre+post.</span><br>
<span class="lineno"></span><span class="keyword" id="4638444">type</span>&nbsp;<span class="ident" id="4638449">forkableWriter</span>&nbsp;<span class="keyword" id="4638464">struct</span>&nbsp;<span class="op" id="4638471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4638474">*</span><span class="ident" id="4638475">bytes</span><span class="op" id="4638480">.</span><span class="ident" id="4638481">Buffer</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4638489">pre</span><span class="op" id="4638492">,</span>&nbsp;<span class="ident" id="4638494">post</span>&nbsp;<span class="op" id="4638499">*</span><span class="ident" id="4638500">forkableWriter</span><br>
<span class="lineno"></span><span class="op" id="4638515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4638518">func</span>&nbsp;<span class="ident" id="4638523">newForkableWriter</span><span class="op" id="4638540">(</span><span class="op" id="4638541">)</span>&nbsp;<span class="op" id="4638543">*</span><span class="ident" id="4638544">forkableWriter</span>&nbsp;<span class="op" id="4638559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4638562">return</span>&nbsp;<span class="op" id="4638569">&amp;</span><span class="ident" id="4638570">forkableWriter</span><span class="op" id="4638584">{</span><span class="builtinfunc" id="4638585">new</span><span class="op" id="4638588">(</span><span class="ident" id="4638589">bytes</span><span class="op" id="4638594">.</span><span class="ident" id="4638595">Buffer</span><span class="op" id="4638601">)</span><span class="op" id="4638602">,</span>&nbsp;<span class="builtintype" id="4638604">nil</span><span class="op" id="4638607">,</span>&nbsp;<span class="builtintype" id="4638609">nil</span><span class="op" id="4638612">}</span><br>
<span class="lineno">30</span><span class="op" id="4638614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4638617">func</span>&nbsp;<span class="op" id="4638622">(</span><span class="ident" id="4638623">f</span>&nbsp;<span class="op" id="4638625">*</span><span class="ident" id="4638626">forkableWriter</span><span class="op" id="4638640">)</span>&nbsp;<span class="ident" id="4638642">fork</span><span class="op" id="4638646">(</span><span class="op" id="4638647">)</span>&nbsp;<span class="op" id="4638649">(</span><span class="ident" id="4638650">pre</span><span class="op" id="4638653">,</span>&nbsp;<span class="ident" id="4638655">post</span>&nbsp;<span class="op" id="4638660">*</span><span class="ident" id="4638661">forkableWriter</span><span class="op" id="4638675">)</span>&nbsp;<span class="op" id="4638677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4638680">if</span>&nbsp;<span class="ident" id="4638683">f</span><span class="op" id="4638684">.</span><span class="ident" id="4638685">pre</span>&nbsp;<span class="op" id="4638689">!=</span>&nbsp;<span class="builtintype" id="4638692">nil</span>&nbsp;<span class="op" id="4638696">||</span>&nbsp;<span class="ident" id="4638699">f</span><span class="op" id="4638700">.</span><span class="ident" id="4638701">post</span>&nbsp;<span class="op" id="4638706">!=</span>&nbsp;<span class="builtintype" id="4638709">nil</span>&nbsp;<span class="op" id="4638713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4638717">panic</span><span class="op" id="4638722">(</span><span class="string" id="4638723">&#34;have&nbsp;already&nbsp;forked&#34;</span><span class="op" id="4638744">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4638747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4638750">f</span><span class="op" id="4638751">.</span><span class="ident" id="4638752">pre</span>&nbsp;<span class="op" id="4638756">=</span>&nbsp;<span class="ident" id="4638758">newForkableWriter</span><span class="op" id="4638775">(</span><span class="op" id="4638776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4638779">f</span><span class="op" id="4638780">.</span><span class="ident" id="4638781">post</span>&nbsp;<span class="op" id="4638786">=</span>&nbsp;<span class="ident" id="4638788">newForkableWriter</span><span class="op" id="4638805">(</span><span class="op" id="4638806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4638809">return</span>&nbsp;<span class="ident" id="4638816">f</span><span class="op" id="4638817">.</span><span class="ident" id="4638818">pre</span><span class="op" id="4638821">,</span>&nbsp;<span class="ident" id="4638823">f</span><span class="op" id="4638824">.</span><span class="ident" id="4638825">post</span><br>
<span class="lineno"></span><span class="op" id="4638830">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="4638833">func</span>&nbsp;<span class="op" id="4638838">(</span><span class="ident" id="4638839">f</span>&nbsp;<span class="op" id="4638841">*</span><span class="ident" id="4638842">forkableWriter</span><span class="op" id="4638856">)</span>&nbsp;<span class="ident" id="4638858">Len</span><span class="op" id="4638861">(</span><span class="op" id="4638862">)</span>&nbsp;<span class="op" id="4638864">(</span><span class="ident" id="4638865">l</span>&nbsp;<span class="builtintype" id="4638867">int</span><span class="op" id="4638870">)</span>&nbsp;<span class="op" id="4638872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4638875">l</span>&nbsp;<span class="op" id="4638877">+=</span>&nbsp;<span class="ident" id="4638880">f</span><span class="op" id="4638881">.</span><span class="ident" id="4638882">Buffer</span><span class="op" id="4638888">.</span><span class="ident" id="4638889">Len</span><span class="op" id="4638892">(</span><span class="op" id="4638893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4638896">if</span>&nbsp;<span class="ident" id="4638899">f</span><span class="op" id="4638900">.</span><span class="ident" id="4638901">pre</span>&nbsp;<span class="op" id="4638905">!=</span>&nbsp;<span class="builtintype" id="4638908">nil</span>&nbsp;<span class="op" id="4638912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4638916">l</span>&nbsp;<span class="op" id="4638918">+=</span>&nbsp;<span class="ident" id="4638921">f</span><span class="op" id="4638922">.</span><span class="ident" id="4638923">pre</span><span class="op" id="4638926">.</span><span class="ident" id="4638927">Len</span><span class="op" id="4638930">(</span><span class="op" id="4638931">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4638934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4638937">if</span>&nbsp;<span class="ident" id="4638940">f</span><span class="op" id="4638941">.</span><span class="ident" id="4638942">post</span>&nbsp;<span class="op" id="4638947">!=</span>&nbsp;<span class="builtintype" id="4638950">nil</span>&nbsp;<span class="op" id="4638954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4638958">l</span>&nbsp;<span class="op" id="4638960">+=</span>&nbsp;<span class="ident" id="4638963">f</span><span class="op" id="4638964">.</span><span class="ident" id="4638965">post</span><span class="op" id="4638969">.</span><span class="ident" id="4638970">Len</span><span class="op" id="4638973">(</span><span class="op" id="4638974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4638977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4638980">return</span><br>
<span class="lineno">50</span><span class="op" id="4638987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4638990">func</span>&nbsp;<span class="op" id="4638995">(</span><span class="ident" id="4638996">f</span>&nbsp;<span class="op" id="4638998">*</span><span class="ident" id="4638999">forkableWriter</span><span class="op" id="4639013">)</span>&nbsp;<span class="ident" id="4639015">writeTo</span><span class="op" id="4639022">(</span><span class="ident" id="4639023">out</span>&nbsp;<span class="ident" id="4639027">io</span><span class="op" id="4639029">.</span><span class="ident" id="4639030">Writer</span><span class="op" id="4639036">)</span>&nbsp;<span class="op" id="4639038">(</span><span class="ident" id="4639039">n</span>&nbsp;<span class="builtintype" id="4639041">int</span><span class="op" id="4639044">,</span>&nbsp;<span class="ident" id="4639046">err</span>&nbsp;<span class="builtintype" id="4639050">error</span><span class="op" id="4639055">)</span>&nbsp;<span class="op" id="4639057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639060">n</span><span class="op" id="4639061">,</span>&nbsp;<span class="ident" id="4639063">err</span>&nbsp;<span class="op" id="4639067">=</span>&nbsp;<span class="ident" id="4639069">out</span><span class="op" id="4639072">.</span><span class="ident" id="4639073">Write</span><span class="op" id="4639078">(</span><span class="ident" id="4639079">f</span><span class="op" id="4639080">.</span><span class="ident" id="4639081">Bytes</span><span class="op" id="4639086">(</span><span class="op" id="4639087">)</span><span class="op" id="4639088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639091">if</span>&nbsp;<span class="ident" id="4639094">err</span>&nbsp;<span class="op" id="4639098">!=</span>&nbsp;<span class="builtintype" id="4639101">nil</span>&nbsp;<span class="op" id="4639105">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639109">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639121">var</span>&nbsp;<span class="ident" id="4639125">nn</span>&nbsp;<span class="builtintype" id="4639128">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639134">if</span>&nbsp;<span class="ident" id="4639137">f</span><span class="op" id="4639138">.</span><span class="ident" id="4639139">pre</span>&nbsp;<span class="op" id="4639143">!=</span>&nbsp;<span class="builtintype" id="4639146">nil</span>&nbsp;<span class="op" id="4639150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639154">nn</span><span class="op" id="4639156">,</span>&nbsp;<span class="ident" id="4639158">err</span>&nbsp;<span class="op" id="4639162">=</span>&nbsp;<span class="ident" id="4639164">f</span><span class="op" id="4639165">.</span><span class="ident" id="4639166">pre</span><span class="op" id="4639169">.</span><span class="ident" id="4639170">writeTo</span><span class="op" id="4639177">(</span><span class="ident" id="4639178">out</span><span class="op" id="4639181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639185">n</span>&nbsp;<span class="op" id="4639187">+=</span>&nbsp;<span class="ident" id="4639190">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639195">if</span>&nbsp;<span class="ident" id="4639198">err</span>&nbsp;<span class="op" id="4639202">!=</span>&nbsp;<span class="builtintype" id="4639205">nil</span>&nbsp;<span class="op" id="4639209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639214">return</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639230">if</span>&nbsp;<span class="ident" id="4639233">f</span><span class="op" id="4639234">.</span><span class="ident" id="4639235">post</span>&nbsp;<span class="op" id="4639240">!=</span>&nbsp;<span class="builtintype" id="4639243">nil</span>&nbsp;<span class="op" id="4639247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639251">nn</span><span class="op" id="4639253">,</span>&nbsp;<span class="ident" id="4639255">err</span>&nbsp;<span class="op" id="4639259">=</span>&nbsp;<span class="ident" id="4639261">f</span><span class="op" id="4639262">.</span><span class="ident" id="4639263">post</span><span class="op" id="4639267">.</span><span class="ident" id="4639268">writeTo</span><span class="op" id="4639275">(</span><span class="ident" id="4639276">out</span><span class="op" id="4639279">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639283">n</span>&nbsp;<span class="op" id="4639285">+=</span>&nbsp;<span class="ident" id="4639288">nn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639295">return</span><br>
<span class="lineno"></span><span class="op" id="4639302">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="4639305">func</span>&nbsp;<span class="ident" id="4639310">marshalBase128Int</span><span class="op" id="4639327">(</span><span class="ident" id="4639328">out</span>&nbsp;<span class="op" id="4639332">*</span><span class="ident" id="4639333">forkableWriter</span><span class="op" id="4639347">,</span>&nbsp;<span class="ident" id="4639349">n</span>&nbsp;<span class="ident" id="4639351">int64</span><span class="op" id="4639356">)</span>&nbsp;<span class="op" id="4639358">(</span><span class="ident" id="4639359">err</span>&nbsp;<span class="builtintype" id="4639363">error</span><span class="op" id="4639368">)</span>&nbsp;<span class="op" id="4639370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639373">if</span>&nbsp;<span class="ident" id="4639376">n</span>&nbsp;<span class="op" id="4639378">==</span>&nbsp;<span class="num" id="4639381">0</span>&nbsp;<span class="op" id="4639383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639387">err</span>&nbsp;<span class="op" id="4639391">=</span>&nbsp;<span class="ident" id="4639393">out</span><span class="op" id="4639396">.</span><span class="ident" id="4639397">WriteByte</span><span class="op" id="4639406">(</span><span class="num" id="4639407">0</span><span class="op" id="4639408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639412">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639420">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639424">l</span>&nbsp;<span class="op" id="4639426">:=</span>&nbsp;<span class="num" id="4639429">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639432">for</span>&nbsp;<span class="ident" id="4639436">i</span>&nbsp;<span class="op" id="4639438">:=</span>&nbsp;<span class="ident" id="4639441">n</span><span class="op" id="4639442">;</span>&nbsp;<span class="ident" id="4639444">i</span>&nbsp;<span class="op" id="4639446">&gt;</span>&nbsp;<span class="num" id="4639448">0</span><span class="op" id="4639449">;</span>&nbsp;<span class="ident" id="4639451">i</span>&nbsp;<span class="op" id="4639453">&gt;&gt;=</span>&nbsp;<span class="num" id="4639457">7</span>&nbsp;<span class="op" id="4639459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639463">l</span><span class="op" id="4639464">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639468">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639472">for</span>&nbsp;<span class="ident" id="4639476">i</span>&nbsp;<span class="op" id="4639478">:=</span>&nbsp;<span class="ident" id="4639481">l</span>&nbsp;<span class="op" id="4639483">-</span>&nbsp;<span class="num" id="4639485">1</span><span class="op" id="4639486">;</span>&nbsp;<span class="ident" id="4639488">i</span>&nbsp;<span class="op" id="4639490">&gt;=</span>&nbsp;<span class="num" id="4639493">0</span><span class="op" id="4639494">;</span>&nbsp;<span class="ident" id="4639496">i</span><span class="op" id="4639497">--</span>&nbsp;<span class="op" id="4639500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639504">o</span>&nbsp;<span class="op" id="4639506">:=</span>&nbsp;<span class="builtintype" id="4639509">byte</span><span class="op" id="4639513">(</span><span class="ident" id="4639514">n</span>&nbsp;<span class="op" id="4639516">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4639519">uint</span><span class="op" id="4639523">(</span><span class="ident" id="4639524">i</span><span class="op" id="4639525">*</span><span class="num" id="4639526">7</span><span class="op" id="4639527">)</span><span class="op" id="4639528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639532">o</span>&nbsp;<span class="op" id="4639534">&amp;=</span>&nbsp;<span class="num" id="4639537">0x7f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639544">if</span>&nbsp;<span class="ident" id="4639547">i</span>&nbsp;<span class="op" id="4639549">!=</span>&nbsp;<span class="num" id="4639552">0</span>&nbsp;<span class="op" id="4639554">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639559">o</span>&nbsp;<span class="op" id="4639561">|=</span>&nbsp;<span class="num" id="4639564">0x80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639575">err</span>&nbsp;<span class="op" id="4639579">=</span>&nbsp;<span class="ident" id="4639581">out</span><span class="op" id="4639584">.</span><span class="ident" id="4639585">WriteByte</span><span class="op" id="4639594">(</span><span class="ident" id="4639595">o</span><span class="op" id="4639596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639600">if</span>&nbsp;<span class="ident" id="4639603">err</span>&nbsp;<span class="op" id="4639607">!=</span>&nbsp;<span class="builtintype" id="4639610">nil</span>&nbsp;<span class="op" id="4639614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639619">return</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639635">return</span>&nbsp;<span class="builtintype" id="4639642">nil</span><br>
<span class="lineno"></span><span class="op" id="4639646">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="keyword" id="4639649">func</span>&nbsp;<span class="ident" id="4639654">marshalInt64</span><span class="op" id="4639666">(</span><span class="ident" id="4639667">out</span>&nbsp;<span class="op" id="4639671">*</span><span class="ident" id="4639672">forkableWriter</span><span class="op" id="4639686">,</span>&nbsp;<span class="ident" id="4639688">i</span>&nbsp;<span class="ident" id="4639690">int64</span><span class="op" id="4639695">)</span>&nbsp;<span class="op" id="4639697">(</span><span class="ident" id="4639698">err</span>&nbsp;<span class="builtintype" id="4639702">error</span><span class="op" id="4639707">)</span>&nbsp;<span class="op" id="4639709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639712">n</span>&nbsp;<span class="op" id="4639714">:=</span>&nbsp;<span class="ident" id="4639717">int64Length</span><span class="op" id="4639728">(</span><span class="ident" id="4639729">i</span><span class="op" id="4639730">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639734">for</span>&nbsp;<span class="op" id="4639738">;</span>&nbsp;<span class="ident" id="4639740">n</span>&nbsp;<span class="op" id="4639742">&gt;</span>&nbsp;<span class="num" id="4639744">0</span><span class="op" id="4639745">;</span>&nbsp;<span class="ident" id="4639747">n</span><span class="op" id="4639748">--</span>&nbsp;<span class="op" id="4639751">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639755">err</span>&nbsp;<span class="op" id="4639759">=</span>&nbsp;<span class="ident" id="4639761">out</span><span class="op" id="4639764">.</span><span class="ident" id="4639765">WriteByte</span><span class="op" id="4639774">(</span><span class="builtintype" id="4639775">byte</span><span class="op" id="4639779">(</span><span class="ident" id="4639780">i</span>&nbsp;<span class="op" id="4639782">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4639785">uint</span><span class="op" id="4639789">(</span><span class="op" id="4639790">(</span><span class="ident" id="4639791">n</span><span class="op" id="4639792">-</span><span class="num" id="4639793">1</span><span class="op" id="4639794">)</span><span class="op" id="4639795">*</span><span class="num" id="4639796">8</span><span class="op" id="4639797">)</span><span class="op" id="4639798">)</span><span class="op" id="4639799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639803">if</span>&nbsp;<span class="ident" id="4639806">err</span>&nbsp;<span class="op" id="4639810">!=</span>&nbsp;<span class="builtintype" id="4639813">nil</span>&nbsp;<span class="op" id="4639817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639822">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639834">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639838">return</span>&nbsp;<span class="builtintype" id="4639845">nil</span><br>
<span class="lineno"></span><span class="op" id="4639849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4639852">func</span>&nbsp;<span class="ident" id="4639857">int64Length</span><span class="op" id="4639868">(</span><span class="ident" id="4639869">i</span>&nbsp;<span class="ident" id="4639871">int64</span><span class="op" id="4639876">)</span>&nbsp;<span class="op" id="4639878">(</span><span class="ident" id="4639879">numBytes</span>&nbsp;<span class="builtintype" id="4639888">int</span><span class="op" id="4639891">)</span>&nbsp;<span class="op" id="4639893">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639896">numBytes</span>&nbsp;<span class="op" id="4639905">=</span>&nbsp;<span class="num" id="4639907">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639911">for</span>&nbsp;<span class="ident" id="4639915">i</span>&nbsp;<span class="op" id="4639917">&gt;</span>&nbsp;<span class="num" id="4639919">127</span>&nbsp;<span class="op" id="4639923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639927">numBytes</span><span class="op" id="4639935">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639940">i</span>&nbsp;<span class="op" id="4639942">&gt;&gt;=</span>&nbsp;<span class="num" id="4639946">8</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639953">for</span>&nbsp;<span class="ident" id="4639957">i</span>&nbsp;<span class="op" id="4639959">&lt;</span>&nbsp;<span class="op" id="4639961">-</span><span class="num" id="4639962">128</span>&nbsp;<span class="op" id="4639966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639970">numBytes</span><span class="op" id="4639978">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4639983">i</span>&nbsp;<span class="op" id="4639985">&gt;&gt;=</span>&nbsp;<span class="num" id="4639989">8</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4639992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4639996">return</span><br>
<span class="lineno"></span><span class="op" id="4640003">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="4640006">func</span>&nbsp;<span class="ident" id="4640011">marshalBigInt</span><span class="op" id="4640024">(</span><span class="ident" id="4640025">out</span>&nbsp;<span class="op" id="4640029">*</span><span class="ident" id="4640030">forkableWriter</span><span class="op" id="4640044">,</span>&nbsp;<span class="ident" id="4640046">n</span>&nbsp;<span class="op" id="4640048">*</span><span class="ident" id="4640049">big</span><span class="op" id="4640052">.</span><span class="ident" id="4640053">Int</span><span class="op" id="4640056">)</span>&nbsp;<span class="op" id="4640058">(</span><span class="ident" id="4640059">err</span>&nbsp;<span class="builtintype" id="4640063">error</span><span class="op" id="4640068">)</span>&nbsp;<span class="op" id="4640070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4640073">if</span>&nbsp;<span class="ident" id="4640076">n</span><span class="op" id="4640077">.</span><span class="ident" id="4640078">Sign</span><span class="op" id="4640082">(</span><span class="op" id="4640083">)</span>&nbsp;<span class="op" id="4640085">&lt;</span>&nbsp;<span class="num" id="4640087">0</span>&nbsp;<span class="op" id="4640089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4640093">//&nbsp;A&nbsp;negative&nbsp;number&nbsp;has&nbsp;to&nbsp;be&nbsp;converted&nbsp;to&nbsp;two&#39;s-complement</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4640156">//&nbsp;form.&nbsp;So&nbsp;we&#39;ll&nbsp;subtract&nbsp;1&nbsp;and&nbsp;invert.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4640206">//&nbsp;most-significant-bit&nbsp;isn&#39;t&nbsp;set&nbsp;then&nbsp;we&#39;ll&nbsp;need&nbsp;to&nbsp;pad&nbsp;the</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4640269">//&nbsp;beginning&nbsp;with&nbsp;0xff&nbsp;in&nbsp;order&nbsp;to&nbsp;keep&nbsp;the&nbsp;number&nbsp;negative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4640332">nMinus1</span>&nbsp;<span class="op" id="4640340">:=</span>&nbsp;<span class="builtinfunc" id="4640343">new</span><span class="op" id="4640346">(</span><span class="ident" id="4640347">big</span><span class="op" id="4640350">.</span><span class="ident" id="4640351">Int</span><span class="op" id="4640354">)</span><span class="op" id="4640355">.</span><span class="ident" id="4640356">Neg</span><span class="op" id="4640359">(</span><span class="ident" id="4640360">n</span><span class="op" id="4640361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4640365">nMinus1</span><span class="op" id="4640372">.</span><span class="ident" id="4640373">Sub</span><span class="op" id="4640376">(</span><span class="ident" id="4640377">nMinus1</span><span class="op" id="4640384">,</span>&nbsp;<span class="ident" id="4640386">bigOne</span><span class="op" id="4640392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4640396">bytes</span>&nbsp;<span class="op" id="4640402">:=</span>&nbsp;<span class="ident" id="4640405">nMinus1</span><span class="op" id="4640412">.</span><span class="ident" id="4640413">Bytes</span><span class="op" id="4640418">(</span><span class="op" id="4640419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4640423">for</span>&nbsp;<span class="ident" id="4640427">i</span>&nbsp;<span class="op" id="4640429">:=</span>&nbsp;<span class="keyword" id="4640432">range</span>&nbsp;<span class="ident" id="4640438">bytes</span>&nbsp;<span class="op" id="4640444">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4640449">bytes</span><span class="op" id="4640454">[</span><span class="ident" id="4640455">i</span><span class="op" id="4640456">]</span>&nbsp;<span class="op" id="4640458">^=</span>&nbsp;<span class="num" id="4640461">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4640468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4640472">if</span>&nbsp;<span class="builtinfunc" id="4640475">len</span><span class="op" id="4640478">(</span><span class="ident" id="4640479">bytes</span><span class="op" id="4640484">)</span>&nbsp;<span class="op" id="4640486">==</span>&nbsp;<span class="num" id="4640489">0</span>&nbsp;<span class="op" id="4640491">||</span>&nbsp;<span class="ident" id="4640494">bytes</span><span class="op" id="4640499">[</span><span class="num" id="4640500">0</span><span class="op" id="4640501">]</span><span class="op" id="4640502">&amp;</span><span class="num" id="4640503">0x80</span>&nbsp;<span class="op" id="4640508">==</span>&nbsp;<span class="num" id="4640511">0</span>&nbsp;<span class="op" id="4640513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4640518">err</span>&nbsp;<span class="op" id="4640522">=</span>&nbsp;<span class="ident" id="4640524">out</span><span class="op" id="4640527">.</span><span class="ident" id="4640528">WriteByte</span><span class="op" id="4640537">(</span><span class="num" id="4640538">0xff</span><span class="op" id="4640542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4640547">if</span>&nbsp;<span class="ident" id="4640550">err</span>&nbsp;<span class="op" id="4640554">!=</span>&nbsp;<span class="builtintype" id="4640557">nil</span>&nbsp;<span class="op" id="4640561">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4640567">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4640577">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4640581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4640585">_</span><span class="op" id="4640586">,</span>&nbsp;<span class="ident" id="4640588">err</span>&nbsp;<span class="op" id="4640592">=</span>&nbsp;<span class="ident" id="4640594">out</span><span class="op" id="4640597">.</span><span class="ident" id="4640598">Write</span><span class="op" id="4640603">(</span><span class="ident" id="4640604">bytes</span><span class="op" id="4640609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4640612">}</span>&nbsp;<span class="keyword" id="4640614">else</span>&nbsp;<span class="keyword" id="4640619">if</span>&nbsp;<span class="ident" id="4640622">n</span><span class="op" id="4640623">.</span><span class="ident" id="4640624">Sign</span><span class="op" id="4640628">(</span><span class="op" id="4640629">)</span>&nbsp;<span class="op" id="4640631">==</span>&nbsp;<span class="num" id="4640634">0</span>&nbsp;<span class="op" id="4640636">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4640640">//&nbsp;Zero&nbsp;is&nbsp;written&nbsp;as&nbsp;a&nbsp;single&nbsp;0&nbsp;zero&nbsp;rather&nbsp;than&nbsp;no&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4640702">err</span>&nbsp;<span class="op" id="4640706">=</span>&nbsp;<span class="ident" id="4640708">out</span><span class="op" id="4640711">.</span><span class="ident" id="4640712">WriteByte</span><span class="op" id="4640721">(</span><span class="num" id="4640722">0x00</span><span class="op" id="4640726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4640729">}</span>&nbsp;<span class="keyword" id="4640731">else</span>&nbsp;<span class="op" id="4640736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4640740">bytes</span>&nbsp;<span class="op" id="4640746">:=</span>&nbsp;<span class="ident" id="4640749">n</span><span class="op" id="4640750">.</span><span class="ident" id="4640751">Bytes</span><span class="op" id="4640756">(</span><span class="op" id="4640757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4640761">if</span>&nbsp;<span class="builtinfunc" id="4640764">len</span><span class="op" id="4640767">(</span><span class="ident" id="4640768">bytes</span><span class="op" id="4640773">)</span>&nbsp;<span class="op" id="4640775">&gt;</span>&nbsp;<span class="num" id="4640777">0</span>&nbsp;<span class="op" id="4640779">&amp;&amp;</span>&nbsp;<span class="ident" id="4640782">bytes</span><span class="op" id="4640787">[</span><span class="num" id="4640788">0</span><span class="op" id="4640789">]</span><span class="op" id="4640790">&amp;</span><span class="num" id="4640791">0x80</span>&nbsp;<span class="op" id="4640796">!=</span>&nbsp;<span class="num" id="4640799">0</span>&nbsp;<span class="op" id="4640801">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4640806">//&nbsp;We&#39;ll&nbsp;have&nbsp;to&nbsp;pad&nbsp;this&nbsp;with&nbsp;0x00&nbsp;in&nbsp;order&nbsp;to&nbsp;stop&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4640865">//&nbsp;looking&nbsp;like&nbsp;a&nbsp;negative&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4640903">err</span>&nbsp;<span class="op" id="4640907">=</span>&nbsp;<span class="ident" id="4640909">out</span><span class="op" id="4640912">.</span><span class="ident" id="4640913">WriteByte</span><span class="op" id="4640922">(</span><span class="num" id="4640923">0</span><span class="op" id="4640924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4640929">if</span>&nbsp;<span class="ident" id="4640932">err</span>&nbsp;<span class="op" id="4640936">!=</span>&nbsp;<span class="builtintype" id="4640939">nil</span>&nbsp;<span class="op" id="4640943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4640949">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4640959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4640963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4640967">_</span><span class="op" id="4640968">,</span>&nbsp;<span class="ident" id="4640970">err</span>&nbsp;<span class="op" id="4640974">=</span>&nbsp;<span class="ident" id="4640976">out</span><span class="op" id="4640979">.</span><span class="ident" id="4640980">Write</span><span class="op" id="4640985">(</span><span class="ident" id="4640986">bytes</span><span class="op" id="4640991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4640994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4640997">return</span><br>
<span class="lineno">165</span><span class="op" id="4641004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4641007">func</span>&nbsp;<span class="ident" id="4641012">marshalLength</span><span class="op" id="4641025">(</span><span class="ident" id="4641026">out</span>&nbsp;<span class="op" id="4641030">*</span><span class="ident" id="4641031">forkableWriter</span><span class="op" id="4641045">,</span>&nbsp;<span class="ident" id="4641047">i</span>&nbsp;<span class="builtintype" id="4641049">int</span><span class="op" id="4641052">)</span>&nbsp;<span class="op" id="4641054">(</span><span class="ident" id="4641055">err</span>&nbsp;<span class="builtintype" id="4641059">error</span><span class="op" id="4641064">)</span>&nbsp;<span class="op" id="4641066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641069">n</span>&nbsp;<span class="op" id="4641071">:=</span>&nbsp;<span class="ident" id="4641074">lengthLength</span><span class="op" id="4641086">(</span><span class="ident" id="4641087">i</span><span class="op" id="4641088">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641092">for</span>&nbsp;<span class="op" id="4641096">;</span>&nbsp;<span class="ident" id="4641098">n</span>&nbsp;<span class="op" id="4641100">&gt;</span>&nbsp;<span class="num" id="4641102">0</span><span class="op" id="4641103">;</span>&nbsp;<span class="ident" id="4641105">n</span><span class="op" id="4641106">--</span>&nbsp;<span class="op" id="4641109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641113">err</span>&nbsp;<span class="op" id="4641117">=</span>&nbsp;<span class="ident" id="4641119">out</span><span class="op" id="4641122">.</span><span class="ident" id="4641123">WriteByte</span><span class="op" id="4641132">(</span><span class="builtintype" id="4641133">byte</span><span class="op" id="4641137">(</span><span class="ident" id="4641138">i</span>&nbsp;<span class="op" id="4641140">&gt;&gt;</span>&nbsp;<span class="builtintype" id="4641143">uint</span><span class="op" id="4641147">(</span><span class="op" id="4641148">(</span><span class="ident" id="4641149">n</span><span class="op" id="4641150">-</span><span class="num" id="4641151">1</span><span class="op" id="4641152">)</span><span class="op" id="4641153">*</span><span class="num" id="4641154">8</span><span class="op" id="4641155">)</span><span class="op" id="4641156">)</span><span class="op" id="4641157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641161">if</span>&nbsp;<span class="ident" id="4641164">err</span>&nbsp;<span class="op" id="4641168">!=</span>&nbsp;<span class="builtintype" id="4641171">nil</span>&nbsp;<span class="op" id="4641175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641180">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641189">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641192">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641196">return</span>&nbsp;<span class="builtintype" id="4641203">nil</span><br>
<span class="lineno"></span><span class="op" id="4641207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="4641210">func</span>&nbsp;<span class="ident" id="4641215">lengthLength</span><span class="op" id="4641227">(</span><span class="ident" id="4641228">i</span>&nbsp;<span class="builtintype" id="4641230">int</span><span class="op" id="4641233">)</span>&nbsp;<span class="op" id="4641235">(</span><span class="ident" id="4641236">numBytes</span>&nbsp;<span class="builtintype" id="4641245">int</span><span class="op" id="4641248">)</span>&nbsp;<span class="op" id="4641250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641253">numBytes</span>&nbsp;<span class="op" id="4641262">=</span>&nbsp;<span class="num" id="4641264">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641267">for</span>&nbsp;<span class="ident" id="4641271">i</span>&nbsp;<span class="op" id="4641273">&gt;</span>&nbsp;<span class="num" id="4641275">255</span>&nbsp;<span class="op" id="4641279">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641283">numBytes</span><span class="op" id="4641291">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641296">i</span>&nbsp;<span class="op" id="4641298">&gt;&gt;=</span>&nbsp;<span class="num" id="4641302">8</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641308">return</span><br>
<span class="lineno"></span><span class="op" id="4641315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4641318">func</span>&nbsp;<span class="ident" id="4641323">marshalTagAndLength</span><span class="op" id="4641342">(</span><span class="ident" id="4641343">out</span>&nbsp;<span class="op" id="4641347">*</span><span class="ident" id="4641348">forkableWriter</span><span class="op" id="4641362">,</span>&nbsp;<span class="ident" id="4641364">t</span>&nbsp;<span class="ident" id="4641366">tagAndLength</span><span class="op" id="4641378">)</span>&nbsp;<span class="op" id="4641380">(</span><span class="ident" id="4641381">err</span>&nbsp;<span class="builtintype" id="4641385">error</span><span class="op" id="4641390">)</span>&nbsp;<span class="op" id="4641392">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641395">b</span>&nbsp;<span class="op" id="4641397">:=</span>&nbsp;<span class="builtintype" id="4641400">uint8</span><span class="op" id="4641405">(</span><span class="ident" id="4641406">t</span><span class="op" id="4641407">.</span><span class="ident" id="4641408">class</span><span class="op" id="4641413">)</span>&nbsp;<span class="op" id="4641415">&lt;&lt;</span>&nbsp;<span class="num" id="4641418">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641421">if</span>&nbsp;<span class="ident" id="4641424">t</span><span class="op" id="4641425">.</span><span class="ident" id="4641426">isCompound</span>&nbsp;<span class="op" id="4641437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641441">b</span>&nbsp;<span class="op" id="4641443">|=</span>&nbsp;<span class="num" id="4641446">0x20</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641455">if</span>&nbsp;<span class="ident" id="4641458">t</span><span class="op" id="4641459">.</span><span class="ident" id="4641460">tag</span>&nbsp;<span class="op" id="4641464">&gt;=</span>&nbsp;<span class="num" id="4641467">31</span>&nbsp;<span class="op" id="4641470">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641474">b</span>&nbsp;<span class="op" id="4641476">|=</span>&nbsp;<span class="num" id="4641479">0x1f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641486">err</span>&nbsp;<span class="op" id="4641490">=</span>&nbsp;<span class="ident" id="4641492">out</span><span class="op" id="4641495">.</span><span class="ident" id="4641496">WriteByte</span><span class="op" id="4641505">(</span><span class="ident" id="4641506">b</span><span class="op" id="4641507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641511">if</span>&nbsp;<span class="ident" id="4641514">err</span>&nbsp;<span class="op" id="4641518">!=</span>&nbsp;<span class="builtintype" id="4641521">nil</span>&nbsp;<span class="op" id="4641525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641530">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641539">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641543">err</span>&nbsp;<span class="op" id="4641547">=</span>&nbsp;<span class="ident" id="4641549">marshalBase128Int</span><span class="op" id="4641566">(</span><span class="ident" id="4641567">out</span><span class="op" id="4641570">,</span>&nbsp;<span class="ident" id="4641572">int64</span><span class="op" id="4641577">(</span><span class="ident" id="4641578">t</span><span class="op" id="4641579">.</span><span class="ident" id="4641580">tag</span><span class="op" id="4641583">)</span><span class="op" id="4641584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641588">if</span>&nbsp;<span class="ident" id="4641591">err</span>&nbsp;<span class="op" id="4641595">!=</span>&nbsp;<span class="builtintype" id="4641598">nil</span>&nbsp;<span class="op" id="4641602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641607">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641619">}</span>&nbsp;<span class="keyword" id="4641621">else</span>&nbsp;<span class="op" id="4641626">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641630">b</span>&nbsp;<span class="op" id="4641632">|=</span>&nbsp;<span class="builtintype" id="4641635">uint8</span><span class="op" id="4641640">(</span><span class="ident" id="4641641">t</span><span class="op" id="4641642">.</span><span class="ident" id="4641643">tag</span><span class="op" id="4641646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641650">err</span>&nbsp;<span class="op" id="4641654">=</span>&nbsp;<span class="ident" id="4641656">out</span><span class="op" id="4641659">.</span><span class="ident" id="4641660">WriteByte</span><span class="op" id="4641669">(</span><span class="ident" id="4641670">b</span><span class="op" id="4641671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641675">if</span>&nbsp;<span class="ident" id="4641678">err</span>&nbsp;<span class="op" id="4641682">!=</span>&nbsp;<span class="builtintype" id="4641685">nil</span>&nbsp;<span class="op" id="4641689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641694">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641703">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641710">if</span>&nbsp;<span class="ident" id="4641713">t</span><span class="op" id="4641714">.</span><span class="ident" id="4641715">length</span>&nbsp;<span class="op" id="4641722">&gt;=</span>&nbsp;<span class="num" id="4641725">128</span>&nbsp;<span class="op" id="4641729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641733">l</span>&nbsp;<span class="op" id="4641735">:=</span>&nbsp;<span class="ident" id="4641738">lengthLength</span><span class="op" id="4641750">(</span><span class="ident" id="4641751">t</span><span class="op" id="4641752">.</span><span class="ident" id="4641753">length</span><span class="op" id="4641759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641763">err</span>&nbsp;<span class="op" id="4641767">=</span>&nbsp;<span class="ident" id="4641769">out</span><span class="op" id="4641772">.</span><span class="ident" id="4641773">WriteByte</span><span class="op" id="4641782">(</span><span class="num" id="4641783">0x80</span>&nbsp;<span class="op" id="4641788">|</span>&nbsp;<span class="builtintype" id="4641790">byte</span><span class="op" id="4641794">(</span><span class="ident" id="4641795">l</span><span class="op" id="4641796">)</span><span class="op" id="4641797">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641801">if</span>&nbsp;<span class="ident" id="4641804">err</span>&nbsp;<span class="op" id="4641808">!=</span>&nbsp;<span class="builtintype" id="4641811">nil</span>&nbsp;<span class="op" id="4641815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641820">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641833">err</span>&nbsp;<span class="op" id="4641837">=</span>&nbsp;<span class="ident" id="4641839">marshalLength</span><span class="op" id="4641852">(</span><span class="ident" id="4641853">out</span><span class="op" id="4641856">,</span>&nbsp;<span class="ident" id="4641858">t</span><span class="op" id="4641859">.</span><span class="ident" id="4641860">length</span><span class="op" id="4641866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641870">if</span>&nbsp;<span class="ident" id="4641873">err</span>&nbsp;<span class="op" id="4641877">!=</span>&nbsp;<span class="builtintype" id="4641880">nil</span>&nbsp;<span class="op" id="4641884">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641889">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641901">}</span>&nbsp;<span class="keyword" id="4641903">else</span>&nbsp;<span class="op" id="4641908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4641912">err</span>&nbsp;<span class="op" id="4641916">=</span>&nbsp;<span class="ident" id="4641918">out</span><span class="op" id="4641921">.</span><span class="ident" id="4641922">WriteByte</span><span class="op" id="4641931">(</span><span class="builtintype" id="4641932">byte</span><span class="op" id="4641936">(</span><span class="ident" id="4641937">t</span><span class="op" id="4641938">.</span><span class="ident" id="4641939">length</span><span class="op" id="4641945">)</span><span class="op" id="4641946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641950">if</span>&nbsp;<span class="ident" id="4641953">err</span>&nbsp;<span class="op" id="4641957">!=</span>&nbsp;<span class="builtintype" id="4641960">nil</span>&nbsp;<span class="op" id="4641964">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641969">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4641981">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4641985">return</span>&nbsp;<span class="builtintype" id="4641992">nil</span><br>
<span class="lineno">230</span><span class="op" id="4641996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4641999">func</span>&nbsp;<span class="ident" id="4642004">marshalBitString</span><span class="op" id="4642020">(</span><span class="ident" id="4642021">out</span>&nbsp;<span class="op" id="4642025">*</span><span class="ident" id="4642026">forkableWriter</span><span class="op" id="4642040">,</span>&nbsp;<span class="ident" id="4642042">b</span>&nbsp;<span class="ident" id="4642044">BitString</span><span class="op" id="4642053">)</span>&nbsp;<span class="op" id="4642055">(</span><span class="ident" id="4642056">err</span>&nbsp;<span class="builtintype" id="4642060">error</span><span class="op" id="4642065">)</span>&nbsp;<span class="op" id="4642067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4642070">paddingBits</span>&nbsp;<span class="op" id="4642082">:=</span>&nbsp;<span class="builtintype" id="4642085">byte</span><span class="op" id="4642089">(</span><span class="op" id="4642090">(</span><span class="num" id="4642091">8</span>&nbsp;<span class="op" id="4642093">-</span>&nbsp;<span class="ident" id="4642095">b</span><span class="op" id="4642096">.</span><span class="ident" id="4642097">BitLength</span><span class="op" id="4642106">%</span><span class="num" id="4642107">8</span><span class="op" id="4642108">)</span>&nbsp;<span class="op" id="4642110">%</span>&nbsp;<span class="num" id="4642112">8</span><span class="op" id="4642113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4642116">err</span>&nbsp;<span class="op" id="4642120">=</span>&nbsp;<span class="ident" id="4642122">out</span><span class="op" id="4642125">.</span><span class="ident" id="4642126">WriteByte</span><span class="op" id="4642135">(</span><span class="ident" id="4642136">paddingBits</span><span class="op" id="4642147">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642150">if</span>&nbsp;<span class="ident" id="4642153">err</span>&nbsp;<span class="op" id="4642157">!=</span>&nbsp;<span class="builtintype" id="4642160">nil</span>&nbsp;<span class="op" id="4642164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642168">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4642176">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4642179">_</span><span class="op" id="4642180">,</span>&nbsp;<span class="ident" id="4642182">err</span>&nbsp;<span class="op" id="4642186">=</span>&nbsp;<span class="ident" id="4642188">out</span><span class="op" id="4642191">.</span><span class="ident" id="4642192">Write</span><span class="op" id="4642197">(</span><span class="ident" id="4642198">b</span><span class="op" id="4642199">.</span><span class="ident" id="4642200">Bytes</span><span class="op" id="4642205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642208">return</span><br>
<span class="lineno">240</span><span class="op" id="4642215">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4642218">func</span>&nbsp;<span class="ident" id="4642223">marshalObjectIdentifier</span><span class="op" id="4642246">(</span><span class="ident" id="4642247">out</span>&nbsp;<span class="op" id="4642251">*</span><span class="ident" id="4642252">forkableWriter</span><span class="op" id="4642266">,</span>&nbsp;<span class="ident" id="4642268">oid</span>&nbsp;<span class="op" id="4642272">[</span><span class="op" id="4642273">]</span><span class="builtintype" id="4642274">int</span><span class="op" id="4642277">)</span>&nbsp;<span class="op" id="4642279">(</span><span class="ident" id="4642280">err</span>&nbsp;<span class="builtintype" id="4642284">error</span><span class="op" id="4642289">)</span>&nbsp;<span class="op" id="4642291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642294">if</span>&nbsp;<span class="builtinfunc" id="4642297">len</span><span class="op" id="4642300">(</span><span class="ident" id="4642301">oid</span><span class="op" id="4642304">)</span>&nbsp;<span class="op" id="4642306">&lt;</span>&nbsp;<span class="num" id="4642308">2</span>&nbsp;<span class="op" id="4642310">||</span>&nbsp;<span class="ident" id="4642313">oid</span><span class="op" id="4642316">[</span><span class="num" id="4642317">0</span><span class="op" id="4642318">]</span>&nbsp;<span class="op" id="4642320">&gt;</span>&nbsp;<span class="num" id="4642322">2</span>&nbsp;<span class="op" id="4642324">||</span>&nbsp;<span class="op" id="4642327">(</span><span class="ident" id="4642328">oid</span><span class="op" id="4642331">[</span><span class="num" id="4642332">0</span><span class="op" id="4642333">]</span>&nbsp;<span class="op" id="4642335">&lt;</span>&nbsp;<span class="num" id="4642337">2</span>&nbsp;<span class="op" id="4642339">&amp;&amp;</span>&nbsp;<span class="ident" id="4642342">oid</span><span class="op" id="4642345">[</span><span class="num" id="4642346">1</span><span class="op" id="4642347">]</span>&nbsp;<span class="op" id="4642349">&gt;=</span>&nbsp;<span class="num" id="4642352">40</span><span class="op" id="4642354">)</span>&nbsp;<span class="op" id="4642356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642360">return</span>&nbsp;<span class="ident" id="4642367">StructuralError</span><span class="op" id="4642382">{</span><span class="string" id="4642383">&#34;invalid&nbsp;object&nbsp;identifier&#34;</span><span class="op" id="4642410">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4642413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4642417">err</span>&nbsp;<span class="op" id="4642421">=</span>&nbsp;<span class="ident" id="4642423">marshalBase128Int</span><span class="op" id="4642440">(</span><span class="ident" id="4642441">out</span><span class="op" id="4642444">,</span>&nbsp;<span class="ident" id="4642446">int64</span><span class="op" id="4642451">(</span><span class="ident" id="4642452">oid</span><span class="op" id="4642455">[</span><span class="num" id="4642456">0</span><span class="op" id="4642457">]</span><span class="op" id="4642458">*</span><span class="num" id="4642459">40</span><span class="op" id="4642461">+</span><span class="ident" id="4642462">oid</span><span class="op" id="4642465">[</span><span class="num" id="4642466">1</span><span class="op" id="4642467">]</span><span class="op" id="4642468">)</span><span class="op" id="4642469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642472">if</span>&nbsp;<span class="ident" id="4642475">err</span>&nbsp;<span class="op" id="4642479">!=</span>&nbsp;<span class="builtintype" id="4642482">nil</span>&nbsp;<span class="op" id="4642486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642490">return</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4642498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642501">for</span>&nbsp;<span class="ident" id="4642505">i</span>&nbsp;<span class="op" id="4642507">:=</span>&nbsp;<span class="num" id="4642510">2</span><span class="op" id="4642511">;</span>&nbsp;<span class="ident" id="4642513">i</span>&nbsp;<span class="op" id="4642515">&lt;</span>&nbsp;<span class="builtinfunc" id="4642517">len</span><span class="op" id="4642520">(</span><span class="ident" id="4642521">oid</span><span class="op" id="4642524">)</span><span class="op" id="4642525">;</span>&nbsp;<span class="ident" id="4642527">i</span><span class="op" id="4642528">++</span>&nbsp;<span class="op" id="4642531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4642535">err</span>&nbsp;<span class="op" id="4642539">=</span>&nbsp;<span class="ident" id="4642541">marshalBase128Int</span><span class="op" id="4642558">(</span><span class="ident" id="4642559">out</span><span class="op" id="4642562">,</span>&nbsp;<span class="ident" id="4642564">int64</span><span class="op" id="4642569">(</span><span class="ident" id="4642570">oid</span><span class="op" id="4642573">[</span><span class="ident" id="4642574">i</span><span class="op" id="4642575">]</span><span class="op" id="4642576">)</span><span class="op" id="4642577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642581">if</span>&nbsp;<span class="ident" id="4642584">err</span>&nbsp;<span class="op" id="4642588">!=</span>&nbsp;<span class="builtintype" id="4642591">nil</span>&nbsp;<span class="op" id="4642595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642600">return</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4642609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4642612">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642616">return</span><br>
<span class="lineno"></span><span class="op" id="4642623">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span><span class="keyword" id="4642626">func</span>&nbsp;<span class="ident" id="4642631">marshalPrintableString</span><span class="op" id="4642653">(</span><span class="ident" id="4642654">out</span>&nbsp;<span class="op" id="4642658">*</span><span class="ident" id="4642659">forkableWriter</span><span class="op" id="4642673">,</span>&nbsp;<span class="ident" id="4642675">s</span>&nbsp;<span class="builtintype" id="4642677">string</span><span class="op" id="4642683">)</span>&nbsp;<span class="op" id="4642685">(</span><span class="ident" id="4642686">err</span>&nbsp;<span class="builtintype" id="4642690">error</span><span class="op" id="4642695">)</span>&nbsp;<span class="op" id="4642697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4642700">b</span>&nbsp;<span class="op" id="4642702">:=</span>&nbsp;<span class="op" id="4642705">[</span><span class="op" id="4642706">]</span><span class="builtintype" id="4642707">byte</span><span class="op" id="4642711">(</span><span class="ident" id="4642712">s</span><span class="op" id="4642713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642716">for</span>&nbsp;<span class="ident" id="4642720">_</span><span class="op" id="4642721">,</span>&nbsp;<span class="ident" id="4642723">c</span>&nbsp;<span class="op" id="4642725">:=</span>&nbsp;<span class="keyword" id="4642728">range</span>&nbsp;<span class="ident" id="4642734">b</span>&nbsp;<span class="op" id="4642736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642740">if</span>&nbsp;<span class="op" id="4642743">!</span><span class="ident" id="4642744">isPrintable</span><span class="op" id="4642755">(</span><span class="ident" id="4642756">c</span><span class="op" id="4642757">)</span>&nbsp;<span class="op" id="4642759">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642764">return</span>&nbsp;<span class="ident" id="4642771">StructuralError</span><span class="op" id="4642786">{</span><span class="string" id="4642787">&#34;PrintableString&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4642831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4642835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4642838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4642842">_</span><span class="op" id="4642843">,</span>&nbsp;<span class="ident" id="4642845">err</span>&nbsp;<span class="op" id="4642849">=</span>&nbsp;<span class="ident" id="4642851">out</span><span class="op" id="4642854">.</span><span class="ident" id="4642855">Write</span><span class="op" id="4642860">(</span><span class="ident" id="4642861">b</span><span class="op" id="4642862">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642865">return</span><br>
<span class="lineno"></span><span class="op" id="4642872">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4642875">func</span>&nbsp;<span class="ident" id="4642880">marshalIA5String</span><span class="op" id="4642896">(</span><span class="ident" id="4642897">out</span>&nbsp;<span class="op" id="4642901">*</span><span class="ident" id="4642902">forkableWriter</span><span class="op" id="4642916">,</span>&nbsp;<span class="ident" id="4642918">s</span>&nbsp;<span class="builtintype" id="4642920">string</span><span class="op" id="4642926">)</span>&nbsp;<span class="op" id="4642928">(</span><span class="ident" id="4642929">err</span>&nbsp;<span class="builtintype" id="4642933">error</span><span class="op" id="4642938">)</span>&nbsp;<span class="op" id="4642940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4642943">b</span>&nbsp;<span class="op" id="4642945">:=</span>&nbsp;<span class="op" id="4642948">[</span><span class="op" id="4642949">]</span><span class="builtintype" id="4642950">byte</span><span class="op" id="4642954">(</span><span class="ident" id="4642955">s</span><span class="op" id="4642956">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642959">for</span>&nbsp;<span class="ident" id="4642963">_</span><span class="op" id="4642964">,</span>&nbsp;<span class="ident" id="4642966">c</span>&nbsp;<span class="op" id="4642968">:=</span>&nbsp;<span class="keyword" id="4642971">range</span>&nbsp;<span class="ident" id="4642977">b</span>&nbsp;<span class="op" id="4642979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642983">if</span>&nbsp;<span class="ident" id="4642986">c</span>&nbsp;<span class="op" id="4642988">&gt;</span>&nbsp;<span class="num" id="4642990">127</span>&nbsp;<span class="op" id="4642994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4642999">return</span>&nbsp;<span class="ident" id="4643006">StructuralError</span><span class="op" id="4643021">{</span><span class="string" id="4643022">&#34;IA5String&nbsp;contains&nbsp;invalid&nbsp;character&#34;</span><span class="op" id="4643060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4643064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4643067">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4643071">_</span><span class="op" id="4643072">,</span>&nbsp;<span class="ident" id="4643074">err</span>&nbsp;<span class="op" id="4643078">=</span>&nbsp;<span class="ident" id="4643080">out</span><span class="op" id="4643083">.</span><span class="ident" id="4643084">Write</span><span class="op" id="4643089">(</span><span class="ident" id="4643090">b</span><span class="op" id="4643091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643094">return</span><br>
<span class="lineno"></span><span class="op" id="4643101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="4643104">func</span>&nbsp;<span class="ident" id="4643109">marshalUTF8String</span><span class="op" id="4643126">(</span><span class="ident" id="4643127">out</span>&nbsp;<span class="op" id="4643131">*</span><span class="ident" id="4643132">forkableWriter</span><span class="op" id="4643146">,</span>&nbsp;<span class="ident" id="4643148">s</span>&nbsp;<span class="builtintype" id="4643150">string</span><span class="op" id="4643156">)</span>&nbsp;<span class="op" id="4643158">(</span><span class="ident" id="4643159">err</span>&nbsp;<span class="builtintype" id="4643163">error</span><span class="op" id="4643168">)</span>&nbsp;<span class="op" id="4643170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4643173">_</span><span class="op" id="4643174">,</span>&nbsp;<span class="ident" id="4643176">err</span>&nbsp;<span class="op" id="4643180">=</span>&nbsp;<span class="ident" id="4643182">out</span><span class="op" id="4643185">.</span><span class="ident" id="4643186">Write</span><span class="op" id="4643191">(</span><span class="op" id="4643192">[</span><span class="op" id="4643193">]</span><span class="builtintype" id="4643194">byte</span><span class="op" id="4643198">(</span><span class="ident" id="4643199">s</span><span class="op" id="4643200">)</span><span class="op" id="4643201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643204">return</span><br>
<span class="lineno"></span><span class="op" id="4643211">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span><span class="keyword" id="4643214">func</span>&nbsp;<span class="ident" id="4643219">marshalTwoDigits</span><span class="op" id="4643235">(</span><span class="ident" id="4643236">out</span>&nbsp;<span class="op" id="4643240">*</span><span class="ident" id="4643241">forkableWriter</span><span class="op" id="4643255">,</span>&nbsp;<span class="ident" id="4643257">v</span>&nbsp;<span class="builtintype" id="4643259">int</span><span class="op" id="4643262">)</span>&nbsp;<span class="op" id="4643264">(</span><span class="ident" id="4643265">err</span>&nbsp;<span class="builtintype" id="4643269">error</span><span class="op" id="4643274">)</span>&nbsp;<span class="op" id="4643276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4643279">err</span>&nbsp;<span class="op" id="4643283">=</span>&nbsp;<span class="ident" id="4643285">out</span><span class="op" id="4643288">.</span><span class="ident" id="4643289">WriteByte</span><span class="op" id="4643298">(</span><span class="builtintype" id="4643299">byte</span><span class="op" id="4643303">(</span><span class="string" id="4643304">&#39;0&#39;</span>&nbsp;<span class="op" id="4643308">+</span>&nbsp;<span class="op" id="4643310">(</span><span class="ident" id="4643311">v</span><span class="op" id="4643312">/</span><span class="num" id="4643313">10</span><span class="op" id="4643315">)</span><span class="op" id="4643316">%</span><span class="num" id="4643317">10</span><span class="op" id="4643319">)</span><span class="op" id="4643320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643323">if</span>&nbsp;<span class="ident" id="4643326">err</span>&nbsp;<span class="op" id="4643330">!=</span>&nbsp;<span class="builtintype" id="4643333">nil</span>&nbsp;<span class="op" id="4643337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643341">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4643349">}</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643352">return</span>&nbsp;<span class="ident" id="4643359">out</span><span class="op" id="4643362">.</span><span class="ident" id="4643363">WriteByte</span><span class="op" id="4643372">(</span><span class="builtintype" id="4643373">byte</span><span class="op" id="4643377">(</span><span class="string" id="4643378">&#39;0&#39;</span>&nbsp;<span class="op" id="4643382">+</span>&nbsp;<span class="ident" id="4643384">v</span><span class="op" id="4643385">%</span><span class="num" id="4643386">10</span><span class="op" id="4643388">)</span><span class="op" id="4643389">)</span><br>
<span class="lineno"></span><span class="op" id="4643391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4643394">func</span>&nbsp;<span class="ident" id="4643399">marshalFourDigits</span><span class="op" id="4643416">(</span><span class="ident" id="4643417">out</span>&nbsp;<span class="op" id="4643421">*</span><span class="ident" id="4643422">forkableWriter</span><span class="op" id="4643436">,</span>&nbsp;<span class="ident" id="4643438">v</span>&nbsp;<span class="builtintype" id="4643440">int</span><span class="op" id="4643443">)</span>&nbsp;<span class="op" id="4643445">(</span><span class="ident" id="4643446">err</span>&nbsp;<span class="builtintype" id="4643450">error</span><span class="op" id="4643455">)</span>&nbsp;<span class="op" id="4643457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643460">var</span>&nbsp;<span class="ident" id="4643464">bytes</span>&nbsp;<span class="op" id="4643470">[</span><span class="num" id="4643471">4</span><span class="op" id="4643472">]</span><span class="builtintype" id="4643473">byte</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643479">for</span>&nbsp;<span class="ident" id="4643483">i</span>&nbsp;<span class="op" id="4643485">:=</span>&nbsp;<span class="keyword" id="4643488">range</span>&nbsp;<span class="ident" id="4643494">bytes</span>&nbsp;<span class="op" id="4643500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4643504">bytes</span><span class="op" id="4643509">[</span><span class="num" id="4643510">3</span><span class="op" id="4643511">-</span><span class="ident" id="4643512">i</span><span class="op" id="4643513">]</span>&nbsp;<span class="op" id="4643515">=</span>&nbsp;<span class="string" id="4643517">&#39;0&#39;</span>&nbsp;<span class="op" id="4643521">+</span>&nbsp;<span class="builtintype" id="4643523">byte</span><span class="op" id="4643527">(</span><span class="ident" id="4643528">v</span><span class="op" id="4643529">%</span><span class="num" id="4643530">10</span><span class="op" id="4643532">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4643536">v</span>&nbsp;<span class="op" id="4643538">/=</span>&nbsp;<span class="num" id="4643541">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4643545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4643548">_</span><span class="op" id="4643549">,</span>&nbsp;<span class="ident" id="4643551">err</span>&nbsp;<span class="op" id="4643555">=</span>&nbsp;<span class="ident" id="4643557">out</span><span class="op" id="4643560">.</span><span class="ident" id="4643561">Write</span><span class="op" id="4643566">(</span><span class="ident" id="4643567">bytes</span><span class="op" id="4643572">[</span><span class="op" id="4643573">:</span><span class="op" id="4643574">]</span><span class="op" id="4643575">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643578">return</span><br>
<span class="lineno"></span><span class="op" id="4643585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4643588">func</span>&nbsp;<span class="ident" id="4643593">outsideUTCRange</span><span class="op" id="4643608">(</span><span class="ident" id="4643609">t</span>&nbsp;<span class="ident" id="4643611">time</span><span class="op" id="4643615">.</span><span class="ident" id="4643616">Time</span><span class="op" id="4643620">)</span>&nbsp;<span class="builtintype" id="4643622">bool</span>&nbsp;<span class="op" id="4643627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4643630">year</span>&nbsp;<span class="op" id="4643635">:=</span>&nbsp;<span class="ident" id="4643638">t</span><span class="op" id="4643639">.</span><span class="ident" id="4643640">Year</span><span class="op" id="4643644">(</span><span class="op" id="4643645">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643648">return</span>&nbsp;<span class="ident" id="4643655">year</span>&nbsp;<span class="op" id="4643660">&lt;</span>&nbsp;<span class="num" id="4643662">1950</span>&nbsp;<span class="op" id="4643667">||</span>&nbsp;<span class="ident" id="4643670">year</span>&nbsp;<span class="op" id="4643675">&gt;=</span>&nbsp;<span class="num" id="4643678">2050</span><br>
<span class="lineno"></span><span class="op" id="4643683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4643686">func</span>&nbsp;<span class="ident" id="4643691">marshalUTCTime</span><span class="op" id="4643705">(</span><span class="ident" id="4643706">out</span>&nbsp;<span class="op" id="4643710">*</span><span class="ident" id="4643711">forkableWriter</span><span class="op" id="4643725">,</span>&nbsp;<span class="ident" id="4643727">t</span>&nbsp;<span class="ident" id="4643729">time</span><span class="op" id="4643733">.</span><span class="ident" id="4643734">Time</span><span class="op" id="4643738">)</span>&nbsp;<span class="op" id="4643740">(</span><span class="ident" id="4643741">err</span>&nbsp;<span class="builtintype" id="4643745">error</span><span class="op" id="4643750">)</span>&nbsp;<span class="op" id="4643752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4643755">year</span>&nbsp;<span class="op" id="4643760">:=</span>&nbsp;<span class="ident" id="4643763">t</span><span class="op" id="4643764">.</span><span class="ident" id="4643765">Year</span><span class="op" id="4643769">(</span><span class="op" id="4643770">)</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643774">switch</span>&nbsp;<span class="op" id="4643781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643784">case</span>&nbsp;<span class="num" id="4643789">1950</span>&nbsp;<span class="op" id="4643794">&lt;=</span>&nbsp;<span class="ident" id="4643797">year</span>&nbsp;<span class="op" id="4643802">&amp;&amp;</span>&nbsp;<span class="ident" id="4643805">year</span>&nbsp;<span class="op" id="4643810">&lt;</span>&nbsp;<span class="num" id="4643812">2000</span><span class="op" id="4643816">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4643820">err</span>&nbsp;<span class="op" id="4643824">=</span>&nbsp;<span class="ident" id="4643826">marshalTwoDigits</span><span class="op" id="4643842">(</span><span class="ident" id="4643843">out</span><span class="op" id="4643846">,</span>&nbsp;<span class="builtintype" id="4643848">int</span><span class="op" id="4643851">(</span><span class="ident" id="4643852">year</span><span class="op" id="4643856">-</span><span class="num" id="4643857">1900</span><span class="op" id="4643861">)</span><span class="op" id="4643862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643865">case</span>&nbsp;<span class="num" id="4643870">2000</span>&nbsp;<span class="op" id="4643875">&lt;=</span>&nbsp;<span class="ident" id="4643878">year</span>&nbsp;<span class="op" id="4643883">&amp;&amp;</span>&nbsp;<span class="ident" id="4643886">year</span>&nbsp;<span class="op" id="4643891">&lt;</span>&nbsp;<span class="num" id="4643893">2050</span><span class="op" id="4643897">:</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4643901">err</span>&nbsp;<span class="op" id="4643905">=</span>&nbsp;<span class="ident" id="4643907">marshalTwoDigits</span><span class="op" id="4643923">(</span><span class="ident" id="4643924">out</span><span class="op" id="4643927">,</span>&nbsp;<span class="builtintype" id="4643929">int</span><span class="op" id="4643932">(</span><span class="ident" id="4643933">year</span><span class="op" id="4643937">-</span><span class="num" id="4643938">2000</span><span class="op" id="4643942">)</span><span class="op" id="4643943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643946">default</span><span class="op" id="4643953">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4643957">return</span>&nbsp;<span class="ident" id="4643964">StructuralError</span><span class="op" id="4643979">{</span><span class="string" id="4643980">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;UTCTime&#34;</span><span class="op" id="4644014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4644017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644020">if</span>&nbsp;<span class="ident" id="4644023">err</span>&nbsp;<span class="op" id="4644027">!=</span>&nbsp;<span class="builtintype" id="4644030">nil</span>&nbsp;<span class="op" id="4644034">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644038">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4644046">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644050">return</span>&nbsp;<span class="ident" id="4644057">marshalTimeCommon</span><span class="op" id="4644074">(</span><span class="ident" id="4644075">out</span><span class="op" id="4644078">,</span>&nbsp;<span class="ident" id="4644080">t</span><span class="op" id="4644081">)</span><br>
<span class="lineno"></span><span class="op" id="4644083">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="keyword" id="4644086">func</span>&nbsp;<span class="ident" id="4644091">marshalGeneralizedTime</span><span class="op" id="4644113">(</span><span class="ident" id="4644114">out</span>&nbsp;<span class="op" id="4644118">*</span><span class="ident" id="4644119">forkableWriter</span><span class="op" id="4644133">,</span>&nbsp;<span class="ident" id="4644135">t</span>&nbsp;<span class="ident" id="4644137">time</span><span class="op" id="4644141">.</span><span class="ident" id="4644142">Time</span><span class="op" id="4644146">)</span>&nbsp;<span class="op" id="4644148">(</span><span class="ident" id="4644149">err</span>&nbsp;<span class="builtintype" id="4644153">error</span><span class="op" id="4644158">)</span>&nbsp;<span class="op" id="4644160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644163">year</span>&nbsp;<span class="op" id="4644168">:=</span>&nbsp;<span class="ident" id="4644171">t</span><span class="op" id="4644172">.</span><span class="ident" id="4644173">Year</span><span class="op" id="4644177">(</span><span class="op" id="4644178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644181">if</span>&nbsp;<span class="ident" id="4644184">year</span>&nbsp;<span class="op" id="4644189">&lt;</span>&nbsp;<span class="num" id="4644191">0</span>&nbsp;<span class="op" id="4644193">||</span>&nbsp;<span class="ident" id="4644196">year</span>&nbsp;<span class="op" id="4644201">&gt;</span>&nbsp;<span class="num" id="4644203">9999</span>&nbsp;<span class="op" id="4644208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644212">return</span>&nbsp;<span class="ident" id="4644219">StructuralError</span><span class="op" id="4644234">{</span><span class="string" id="4644235">&#34;cannot&nbsp;represent&nbsp;time&nbsp;as&nbsp;GeneralizedTime&#34;</span><span class="op" id="4644277">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4644280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644283">if</span>&nbsp;<span class="ident" id="4644286">err</span>&nbsp;<span class="op" id="4644290">=</span>&nbsp;<span class="ident" id="4644292">marshalFourDigits</span><span class="op" id="4644309">(</span><span class="ident" id="4644310">out</span><span class="op" id="4644313">,</span>&nbsp;<span class="ident" id="4644315">year</span><span class="op" id="4644319">)</span><span class="op" id="4644320">;</span>&nbsp;<span class="ident" id="4644322">err</span>&nbsp;<span class="op" id="4644326">!=</span>&nbsp;<span class="builtintype" id="4644329">nil</span>&nbsp;<span class="op" id="4644333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644337">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4644345">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644349">return</span>&nbsp;<span class="ident" id="4644356">marshalTimeCommon</span><span class="op" id="4644373">(</span><span class="ident" id="4644374">out</span><span class="op" id="4644377">,</span>&nbsp;<span class="ident" id="4644379">t</span><span class="op" id="4644380">)</span><br>
<span class="lineno"></span><span class="op" id="4644382">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4644385">func</span>&nbsp;<span class="ident" id="4644390">marshalTimeCommon</span><span class="op" id="4644407">(</span><span class="ident" id="4644408">out</span>&nbsp;<span class="op" id="4644412">*</span><span class="ident" id="4644413">forkableWriter</span><span class="op" id="4644427">,</span>&nbsp;<span class="ident" id="4644429">t</span>&nbsp;<span class="ident" id="4644431">time</span><span class="op" id="4644435">.</span><span class="ident" id="4644436">Time</span><span class="op" id="4644440">)</span>&nbsp;<span class="op" id="4644442">(</span><span class="ident" id="4644443">err</span>&nbsp;<span class="builtintype" id="4644447">error</span><span class="op" id="4644452">)</span>&nbsp;<span class="op" id="4644454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644457">_</span><span class="op" id="4644458">,</span>&nbsp;<span class="ident" id="4644460">month</span><span class="op" id="4644465">,</span>&nbsp;<span class="ident" id="4644467">day</span>&nbsp;<span class="op" id="4644471">:=</span>&nbsp;<span class="ident" id="4644474">t</span><span class="op" id="4644475">.</span><span class="ident" id="4644476">Date</span><span class="op" id="4644480">(</span><span class="op" id="4644481">)</span><br>
<span class="lineno">345</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644485">err</span>&nbsp;<span class="op" id="4644489">=</span>&nbsp;<span class="ident" id="4644491">marshalTwoDigits</span><span class="op" id="4644507">(</span><span class="ident" id="4644508">out</span><span class="op" id="4644511">,</span>&nbsp;<span class="builtintype" id="4644513">int</span><span class="op" id="4644516">(</span><span class="ident" id="4644517">month</span><span class="op" id="4644522">)</span><span class="op" id="4644523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644526">if</span>&nbsp;<span class="ident" id="4644529">err</span>&nbsp;<span class="op" id="4644533">!=</span>&nbsp;<span class="builtintype" id="4644536">nil</span>&nbsp;<span class="op" id="4644540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644544">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4644552">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644556">err</span>&nbsp;<span class="op" id="4644560">=</span>&nbsp;<span class="ident" id="4644562">marshalTwoDigits</span><span class="op" id="4644578">(</span><span class="ident" id="4644579">out</span><span class="op" id="4644582">,</span>&nbsp;<span class="ident" id="4644584">day</span><span class="op" id="4644587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644590">if</span>&nbsp;<span class="ident" id="4644593">err</span>&nbsp;<span class="op" id="4644597">!=</span>&nbsp;<span class="builtintype" id="4644600">nil</span>&nbsp;<span class="op" id="4644604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644608">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4644616">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644620">hour</span><span class="op" id="4644624">,</span>&nbsp;<span class="ident" id="4644626">min</span><span class="op" id="4644629">,</span>&nbsp;<span class="ident" id="4644631">sec</span>&nbsp;<span class="op" id="4644635">:=</span>&nbsp;<span class="ident" id="4644638">t</span><span class="op" id="4644639">.</span><span class="ident" id="4644640">Clock</span><span class="op" id="4644645">(</span><span class="op" id="4644646">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644650">err</span>&nbsp;<span class="op" id="4644654">=</span>&nbsp;<span class="ident" id="4644656">marshalTwoDigits</span><span class="op" id="4644672">(</span><span class="ident" id="4644673">out</span><span class="op" id="4644676">,</span>&nbsp;<span class="ident" id="4644678">hour</span><span class="op" id="4644682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644685">if</span>&nbsp;<span class="ident" id="4644688">err</span>&nbsp;<span class="op" id="4644692">!=</span>&nbsp;<span class="builtintype" id="4644695">nil</span>&nbsp;<span class="op" id="4644699">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644703">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4644711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644715">err</span>&nbsp;<span class="op" id="4644719">=</span>&nbsp;<span class="ident" id="4644721">marshalTwoDigits</span><span class="op" id="4644737">(</span><span class="ident" id="4644738">out</span><span class="op" id="4644741">,</span>&nbsp;<span class="ident" id="4644743">min</span><span class="op" id="4644746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644749">if</span>&nbsp;<span class="ident" id="4644752">err</span>&nbsp;<span class="op" id="4644756">!=</span>&nbsp;<span class="builtintype" id="4644759">nil</span>&nbsp;<span class="op" id="4644763">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644767">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4644775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644779">err</span>&nbsp;<span class="op" id="4644783">=</span>&nbsp;<span class="ident" id="4644785">marshalTwoDigits</span><span class="op" id="4644801">(</span><span class="ident" id="4644802">out</span><span class="op" id="4644805">,</span>&nbsp;<span class="ident" id="4644807">sec</span><span class="op" id="4644810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644813">if</span>&nbsp;<span class="ident" id="4644816">err</span>&nbsp;<span class="op" id="4644820">!=</span>&nbsp;<span class="builtintype" id="4644823">nil</span>&nbsp;<span class="op" id="4644827">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644831">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4644839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644843">_</span><span class="op" id="4644844">,</span>&nbsp;<span class="ident" id="4644846">offset</span>&nbsp;<span class="op" id="4644853">:=</span>&nbsp;<span class="ident" id="4644856">t</span><span class="op" id="4644857">.</span><span class="ident" id="4644858">Zone</span><span class="op" id="4644862">(</span><span class="op" id="4644863">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644867">switch</span>&nbsp;<span class="op" id="4644874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644877">case</span>&nbsp;<span class="ident" id="4644882">offset</span><span class="op" id="4644888">/</span><span class="num" id="4644889">60</span>&nbsp;<span class="op" id="4644892">==</span>&nbsp;<span class="num" id="4644895">0</span><span class="op" id="4644896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644900">err</span>&nbsp;<span class="op" id="4644904">=</span>&nbsp;<span class="ident" id="4644906">out</span><span class="op" id="4644909">.</span><span class="ident" id="4644910">WriteByte</span><span class="op" id="4644919">(</span><span class="string" id="4644920">&#39;Z&#39;</span><span class="op" id="4644923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644927">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644935">case</span>&nbsp;<span class="ident" id="4644940">offset</span>&nbsp;<span class="op" id="4644947">&gt;</span>&nbsp;<span class="num" id="4644949">0</span><span class="op" id="4644950">:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644954">err</span>&nbsp;<span class="op" id="4644958">=</span>&nbsp;<span class="ident" id="4644960">out</span><span class="op" id="4644963">.</span><span class="ident" id="4644964">WriteByte</span><span class="op" id="4644973">(</span><span class="string" id="4644974">&#39;+&#39;</span><span class="op" id="4644977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4644980">case</span>&nbsp;<span class="ident" id="4644985">offset</span>&nbsp;<span class="op" id="4644992">&lt;</span>&nbsp;<span class="num" id="4644994">0</span><span class="op" id="4644995">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4644999">err</span>&nbsp;<span class="op" id="4645003">=</span>&nbsp;<span class="ident" id="4645005">out</span><span class="op" id="4645008">.</span><span class="ident" id="4645009">WriteByte</span><span class="op" id="4645018">(</span><span class="string" id="4645019">&#39;-&#39;</span><span class="op" id="4645022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4645025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645029">if</span>&nbsp;<span class="ident" id="4645032">err</span>&nbsp;<span class="op" id="4645036">!=</span>&nbsp;<span class="builtintype" id="4645039">nil</span>&nbsp;<span class="op" id="4645043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645047">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4645055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4645059">offsetMinutes</span>&nbsp;<span class="op" id="4645073">:=</span>&nbsp;<span class="ident" id="4645076">offset</span>&nbsp;<span class="op" id="4645083">/</span>&nbsp;<span class="num" id="4645085">60</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645089">if</span>&nbsp;<span class="ident" id="4645092">offsetMinutes</span>&nbsp;<span class="op" id="4645106">&lt;</span>&nbsp;<span class="num" id="4645108">0</span>&nbsp;<span class="op" id="4645110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4645114">offsetMinutes</span>&nbsp;<span class="op" id="4645128">=</span>&nbsp;<span class="op" id="4645130">-</span><span class="ident" id="4645131">offsetMinutes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4645146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4645150">err</span>&nbsp;<span class="op" id="4645154">=</span>&nbsp;<span class="ident" id="4645156">marshalTwoDigits</span><span class="op" id="4645172">(</span><span class="ident" id="4645173">out</span><span class="op" id="4645176">,</span>&nbsp;<span class="ident" id="4645178">offsetMinutes</span><span class="op" id="4645191">/</span><span class="num" id="4645192">60</span><span class="op" id="4645194">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645197">if</span>&nbsp;<span class="ident" id="4645200">err</span>&nbsp;<span class="op" id="4645204">!=</span>&nbsp;<span class="builtintype" id="4645207">nil</span>&nbsp;<span class="op" id="4645211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645215">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4645223">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4645227">err</span>&nbsp;<span class="op" id="4645231">=</span>&nbsp;<span class="ident" id="4645233">marshalTwoDigits</span><span class="op" id="4645249">(</span><span class="ident" id="4645250">out</span><span class="op" id="4645253">,</span>&nbsp;<span class="ident" id="4645255">offsetMinutes</span><span class="op" id="4645268">%</span><span class="num" id="4645269">60</span><span class="op" id="4645271">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645274">return</span><br>
<span class="lineno"></span><span class="op" id="4645281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4645284">func</span>&nbsp;<span class="ident" id="4645289">stripTagAndLength</span><span class="op" id="4645306">(</span><span class="ident" id="4645307">in</span>&nbsp;<span class="op" id="4645310">[</span><span class="op" id="4645311">]</span><span class="builtintype" id="4645312">byte</span><span class="op" id="4645316">)</span>&nbsp;<span class="op" id="4645318">[</span><span class="op" id="4645319">]</span><span class="builtintype" id="4645320">byte</span>&nbsp;<span class="op" id="4645325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4645328">_</span><span class="op" id="4645329">,</span>&nbsp;<span class="ident" id="4645331">offset</span><span class="op" id="4645337">,</span>&nbsp;<span class="ident" id="4645339">err</span>&nbsp;<span class="op" id="4645343">:=</span>&nbsp;<span class="ident" id="4645346">parseTagAndLength</span><span class="op" id="4645363">(</span><span class="ident" id="4645364">in</span><span class="op" id="4645366">,</span>&nbsp;<span class="num" id="4645368">0</span><span class="op" id="4645369">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645372">if</span>&nbsp;<span class="ident" id="4645375">err</span>&nbsp;<span class="op" id="4645379">!=</span>&nbsp;<span class="builtintype" id="4645382">nil</span>&nbsp;<span class="op" id="4645386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645390">return</span>&nbsp;<span class="ident" id="4645397">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4645401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645404">return</span>&nbsp;<span class="ident" id="4645411">in</span><span class="op" id="4645413">[</span><span class="ident" id="4645414">offset</span><span class="op" id="4645420">:</span><span class="op" id="4645421">]</span><br>
<span class="lineno"></span><span class="op" id="4645423">}</span><br>
<span class="lineno">410</span><br>
<span class="lineno"></span><span class="keyword" id="4645426">func</span>&nbsp;<span class="ident" id="4645431">marshalBody</span><span class="op" id="4645442">(</span><span class="ident" id="4645443">out</span>&nbsp;<span class="op" id="4645447">*</span><span class="ident" id="4645448">forkableWriter</span><span class="op" id="4645462">,</span>&nbsp;<span class="ident" id="4645464">value</span>&nbsp;<span class="ident" id="4645470">reflect</span><span class="op" id="4645477">.</span><span class="ident" id="4645478">Value</span><span class="op" id="4645483">,</span>&nbsp;<span class="ident" id="4645485">params</span>&nbsp;<span class="ident" id="4645492">fieldParameters</span><span class="op" id="4645507">)</span>&nbsp;<span class="op" id="4645509">(</span><span class="ident" id="4645510">err</span>&nbsp;<span class="builtintype" id="4645514">error</span><span class="op" id="4645519">)</span>&nbsp;<span class="op" id="4645521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645524">switch</span>&nbsp;<span class="ident" id="4645531">value</span><span class="op" id="4645536">.</span><span class="ident" id="4645537">Type</span><span class="op" id="4645541">(</span><span class="op" id="4645542">)</span>&nbsp;<span class="op" id="4645544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645547">case</span>&nbsp;<span class="ident" id="4645552">timeType</span><span class="op" id="4645560">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4645564">t</span>&nbsp;<span class="op" id="4645566">:=</span>&nbsp;<span class="ident" id="4645569">value</span><span class="op" id="4645574">.</span><span class="ident" id="4645575">Interface</span><span class="op" id="4645584">(</span><span class="op" id="4645585">)</span><span class="op" id="4645586">.</span><span class="op" id="4645587">(</span><span class="ident" id="4645588">time</span><span class="op" id="4645592">.</span><span class="ident" id="4645593">Time</span><span class="op" id="4645597">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645601">if</span>&nbsp;<span class="ident" id="4645604">outsideUTCRange</span><span class="op" id="4645619">(</span><span class="ident" id="4645620">t</span><span class="op" id="4645621">)</span>&nbsp;<span class="op" id="4645623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645628">return</span>&nbsp;<span class="ident" id="4645635">marshalGeneralizedTime</span><span class="op" id="4645657">(</span><span class="ident" id="4645658">out</span><span class="op" id="4645661">,</span>&nbsp;<span class="ident" id="4645663">t</span><span class="op" id="4645664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4645668">}</span>&nbsp;<span class="keyword" id="4645670">else</span>&nbsp;<span class="op" id="4645675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645680">return</span>&nbsp;<span class="ident" id="4645687">marshalUTCTime</span><span class="op" id="4645701">(</span><span class="ident" id="4645702">out</span><span class="op" id="4645705">,</span>&nbsp;<span class="ident" id="4645707">t</span><span class="op" id="4645708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4645712">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645715">case</span>&nbsp;<span class="ident" id="4645720">bitStringType</span><span class="op" id="4645733">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645737">return</span>&nbsp;<span class="ident" id="4645744">marshalBitString</span><span class="op" id="4645760">(</span><span class="ident" id="4645761">out</span><span class="op" id="4645764">,</span>&nbsp;<span class="ident" id="4645766">value</span><span class="op" id="4645771">.</span><span class="ident" id="4645772">Interface</span><span class="op" id="4645781">(</span><span class="op" id="4645782">)</span><span class="op" id="4645783">.</span><span class="op" id="4645784">(</span><span class="ident" id="4645785">BitString</span><span class="op" id="4645794">)</span><span class="op" id="4645795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645798">case</span>&nbsp;<span class="ident" id="4645803">objectIdentifierType</span><span class="op" id="4645823">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645827">return</span>&nbsp;<span class="ident" id="4645834">marshalObjectIdentifier</span><span class="op" id="4645857">(</span><span class="ident" id="4645858">out</span><span class="op" id="4645861">,</span>&nbsp;<span class="ident" id="4645863">value</span><span class="op" id="4645868">.</span><span class="ident" id="4645869">Interface</span><span class="op" id="4645878">(</span><span class="op" id="4645879">)</span><span class="op" id="4645880">.</span><span class="op" id="4645881">(</span><span class="ident" id="4645882">ObjectIdentifier</span><span class="op" id="4645898">)</span><span class="op" id="4645899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645902">case</span>&nbsp;<span class="ident" id="4645907">bigIntType</span><span class="op" id="4645917">:</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645921">return</span>&nbsp;<span class="ident" id="4645928">marshalBigInt</span><span class="op" id="4645941">(</span><span class="ident" id="4645942">out</span><span class="op" id="4645945">,</span>&nbsp;<span class="ident" id="4645947">value</span><span class="op" id="4645952">.</span><span class="ident" id="4645953">Interface</span><span class="op" id="4645962">(</span><span class="op" id="4645963">)</span><span class="op" id="4645964">.</span><span class="op" id="4645965">(</span><span class="op" id="4645966">*</span><span class="ident" id="4645967">big</span><span class="op" id="4645970">.</span><span class="ident" id="4645971">Int</span><span class="op" id="4645974">)</span><span class="op" id="4645975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4645978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4645982">switch</span>&nbsp;<span class="ident" id="4645989">v</span>&nbsp;<span class="op" id="4645991">:=</span>&nbsp;<span class="ident" id="4645994">value</span><span class="op" id="4645999">;</span>&nbsp;<span class="ident" id="4646001">v</span><span class="op" id="4646002">.</span><span class="ident" id="4646003">Kind</span><span class="op" id="4646007">(</span><span class="op" id="4646008">)</span>&nbsp;<span class="op" id="4646010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646013">case</span>&nbsp;<span class="ident" id="4646018">reflect</span><span class="op" id="4646025">.</span><span class="ident" id="4646026">Bool</span><span class="op" id="4646030">:</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646034">if</span>&nbsp;<span class="ident" id="4646037">v</span><span class="op" id="4646038">.</span><span class="ident" id="4646039">Bool</span><span class="op" id="4646043">(</span><span class="op" id="4646044">)</span>&nbsp;<span class="op" id="4646046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646051">return</span>&nbsp;<span class="ident" id="4646058">out</span><span class="op" id="4646061">.</span><span class="ident" id="4646062">WriteByte</span><span class="op" id="4646071">(</span><span class="num" id="4646072">255</span><span class="op" id="4646075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4646079">}</span>&nbsp;<span class="keyword" id="4646081">else</span>&nbsp;<span class="op" id="4646086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646091">return</span>&nbsp;<span class="ident" id="4646098">out</span><span class="op" id="4646101">.</span><span class="ident" id="4646102">WriteByte</span><span class="op" id="4646111">(</span><span class="num" id="4646112">0</span><span class="op" id="4646113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4646117">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646120">case</span>&nbsp;<span class="ident" id="4646125">reflect</span><span class="op" id="4646132">.</span><span class="ident" id="4646133">Int</span><span class="op" id="4646136">,</span>&nbsp;<span class="ident" id="4646138">reflect</span><span class="op" id="4646145">.</span><span class="ident" id="4646146">Int8</span><span class="op" id="4646150">,</span>&nbsp;<span class="ident" id="4646152">reflect</span><span class="op" id="4646159">.</span><span class="ident" id="4646160">Int16</span><span class="op" id="4646165">,</span>&nbsp;<span class="ident" id="4646167">reflect</span><span class="op" id="4646174">.</span><span class="ident" id="4646175">Int32</span><span class="op" id="4646180">,</span>&nbsp;<span class="ident" id="4646182">reflect</span><span class="op" id="4646189">.</span><span class="ident" id="4646190">Int64</span><span class="op" id="4646195">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646199">return</span>&nbsp;<span class="ident" id="4646206">marshalInt64</span><span class="op" id="4646218">(</span><span class="ident" id="4646219">out</span><span class="op" id="4646222">,</span>&nbsp;<span class="ident" id="4646224">int64</span><span class="op" id="4646229">(</span><span class="ident" id="4646230">v</span><span class="op" id="4646231">.</span><span class="ident" id="4646232">Int</span><span class="op" id="4646235">(</span><span class="op" id="4646236">)</span><span class="op" id="4646237">)</span><span class="op" id="4646238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646241">case</span>&nbsp;<span class="ident" id="4646246">reflect</span><span class="op" id="4646253">.</span><span class="ident" id="4646254">Struct</span><span class="op" id="4646260">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646264">t</span>&nbsp;<span class="op" id="4646266">:=</span>&nbsp;<span class="ident" id="4646269">v</span><span class="op" id="4646270">.</span><span class="ident" id="4646271">Type</span><span class="op" id="4646275">(</span><span class="op" id="4646276">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646281">startingField</span>&nbsp;<span class="op" id="4646295">:=</span>&nbsp;<span class="num" id="4646298">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646303">//&nbsp;If&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;the&nbsp;structure&nbsp;is&nbsp;a&nbsp;non-empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646361">//&nbsp;RawContents,&nbsp;then&nbsp;we&nbsp;don&#39;t&nbsp;bother&nbsp;serializing&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646422">if</span>&nbsp;<span class="ident" id="4646425">t</span><span class="op" id="4646426">.</span><span class="ident" id="4646427">NumField</span><span class="op" id="4646435">(</span><span class="op" id="4646436">)</span>&nbsp;<span class="op" id="4646438">&gt;</span>&nbsp;<span class="num" id="4646440">0</span>&nbsp;<span class="op" id="4646442">&amp;&amp;</span>&nbsp;<span class="ident" id="4646445">t</span><span class="op" id="4646446">.</span><span class="ident" id="4646447">Field</span><span class="op" id="4646452">(</span><span class="num" id="4646453">0</span><span class="op" id="4646454">)</span><span class="op" id="4646455">.</span><span class="ident" id="4646456">Type</span>&nbsp;<span class="op" id="4646461">==</span>&nbsp;<span class="ident" id="4646464">rawContentsType</span>&nbsp;<span class="op" id="4646480">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646485">s</span>&nbsp;<span class="op" id="4646487">:=</span>&nbsp;<span class="ident" id="4646490">v</span><span class="op" id="4646491">.</span><span class="ident" id="4646492">Field</span><span class="op" id="4646497">(</span><span class="num" id="4646498">0</span><span class="op" id="4646499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646504">if</span>&nbsp;<span class="ident" id="4646507">s</span><span class="op" id="4646508">.</span><span class="ident" id="4646509">Len</span><span class="op" id="4646512">(</span><span class="op" id="4646513">)</span>&nbsp;<span class="op" id="4646515">&gt;</span>&nbsp;<span class="num" id="4646517">0</span>&nbsp;<span class="op" id="4646519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646525">bytes</span>&nbsp;<span class="op" id="4646531">:=</span>&nbsp;<span class="builtinfunc" id="4646534">make</span><span class="op" id="4646538">(</span><span class="op" id="4646539">[</span><span class="op" id="4646540">]</span><span class="builtintype" id="4646541">byte</span><span class="op" id="4646545">,</span>&nbsp;<span class="ident" id="4646547">s</span><span class="op" id="4646548">.</span><span class="ident" id="4646549">Len</span><span class="op" id="4646552">(</span><span class="op" id="4646553">)</span><span class="op" id="4646554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646560">for</span>&nbsp;<span class="ident" id="4646564">i</span>&nbsp;<span class="op" id="4646566">:=</span>&nbsp;<span class="num" id="4646569">0</span><span class="op" id="4646570">;</span>&nbsp;<span class="ident" id="4646572">i</span>&nbsp;<span class="op" id="4646574">&lt;</span>&nbsp;<span class="ident" id="4646576">s</span><span class="op" id="4646577">.</span><span class="ident" id="4646578">Len</span><span class="op" id="4646581">(</span><span class="op" id="4646582">)</span><span class="op" id="4646583">;</span>&nbsp;<span class="ident" id="4646585">i</span><span class="op" id="4646586">++</span>&nbsp;<span class="op" id="4646589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646596">bytes</span><span class="op" id="4646601">[</span><span class="ident" id="4646602">i</span><span class="op" id="4646603">]</span>&nbsp;<span class="op" id="4646605">=</span>&nbsp;<span class="builtintype" id="4646607">uint8</span><span class="op" id="4646612">(</span><span class="ident" id="4646613">s</span><span class="op" id="4646614">.</span><span class="ident" id="4646615">Index</span><span class="op" id="4646620">(</span><span class="ident" id="4646621">i</span><span class="op" id="4646622">)</span><span class="op" id="4646623">.</span><span class="ident" id="4646624">Uint</span><span class="op" id="4646628">(</span><span class="op" id="4646629">)</span><span class="op" id="4646630">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4646636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4646642">/*&nbsp;The&nbsp;RawContents&nbsp;will&nbsp;contain&nbsp;the&nbsp;tag&nbsp;and<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;length&nbsp;fields&nbsp;but&nbsp;we&#39;ll&nbsp;also&nbsp;be&nbsp;writing<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;those&nbsp;ourselves,&nbsp;so&nbsp;we&nbsp;strip&nbsp;them&nbsp;out&nbsp;of<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;bytes&nbsp;*/</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646801">_</span><span class="op" id="4646802">,</span>&nbsp;<span class="ident" id="4646804">err</span>&nbsp;<span class="op" id="4646808">=</span>&nbsp;<span class="ident" id="4646810">out</span><span class="op" id="4646813">.</span><span class="ident" id="4646814">Write</span><span class="op" id="4646819">(</span><span class="ident" id="4646820">stripTagAndLength</span><span class="op" id="4646837">(</span><span class="ident" id="4646838">bytes</span><span class="op" id="4646843">)</span><span class="op" id="4646844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646850">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4646860">}</span>&nbsp;<span class="keyword" id="4646862">else</span>&nbsp;<span class="op" id="4646867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646873">startingField</span>&nbsp;<span class="op" id="4646887">=</span>&nbsp;<span class="num" id="4646889">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4646894">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4646898">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646903">for</span>&nbsp;<span class="ident" id="4646907">i</span>&nbsp;<span class="op" id="4646909">:=</span>&nbsp;<span class="ident" id="4646912">startingField</span><span class="op" id="4646925">;</span>&nbsp;<span class="ident" id="4646927">i</span>&nbsp;<span class="op" id="4646929">&lt;</span>&nbsp;<span class="ident" id="4646931">t</span><span class="op" id="4646932">.</span><span class="ident" id="4646933">NumField</span><span class="op" id="4646941">(</span><span class="op" id="4646942">)</span><span class="op" id="4646943">;</span>&nbsp;<span class="ident" id="4646945">i</span><span class="op" id="4646946">++</span>&nbsp;<span class="op" id="4646949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4646954">var</span>&nbsp;<span class="ident" id="4646958">pre</span>&nbsp;<span class="op" id="4646962">*</span><span class="ident" id="4646963">forkableWriter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4646981">pre</span><span class="op" id="4646984">,</span>&nbsp;<span class="ident" id="4646986">out</span>&nbsp;<span class="op" id="4646990">=</span>&nbsp;<span class="ident" id="4646992">out</span><span class="op" id="4646995">.</span><span class="ident" id="4646996">fork</span><span class="op" id="4647000">(</span><span class="op" id="4647001">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647006">err</span>&nbsp;<span class="op" id="4647010">=</span>&nbsp;<span class="ident" id="4647012">marshalField</span><span class="op" id="4647024">(</span><span class="ident" id="4647025">pre</span><span class="op" id="4647028">,</span>&nbsp;<span class="ident" id="4647030">v</span><span class="op" id="4647031">.</span><span class="ident" id="4647032">Field</span><span class="op" id="4647037">(</span><span class="ident" id="4647038">i</span><span class="op" id="4647039">)</span><span class="op" id="4647040">,</span>&nbsp;<span class="ident" id="4647042">parseFieldParameters</span><span class="op" id="4647062">(</span><span class="ident" id="4647063">t</span><span class="op" id="4647064">.</span><span class="ident" id="4647065">Field</span><span class="op" id="4647070">(</span><span class="ident" id="4647071">i</span><span class="op" id="4647072">)</span><span class="op" id="4647073">.</span><span class="ident" id="4647074">Tag</span><span class="op" id="4647077">.</span><span class="ident" id="4647078">Get</span><span class="op" id="4647081">(</span><span class="string" id="4647082">&#34;asn1&#34;</span><span class="op" id="4647088">)</span><span class="op" id="4647089">)</span><span class="op" id="4647090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647095">if</span>&nbsp;<span class="ident" id="4647098">err</span>&nbsp;<span class="op" id="4647102">!=</span>&nbsp;<span class="builtintype" id="4647105">nil</span>&nbsp;<span class="op" id="4647109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647115">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4647125">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4647129">}</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647133">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647141">case</span>&nbsp;<span class="ident" id="4647146">reflect</span><span class="op" id="4647153">.</span><span class="ident" id="4647154">Slice</span><span class="op" id="4647159">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647163">sliceType</span>&nbsp;<span class="op" id="4647173">:=</span>&nbsp;<span class="ident" id="4647176">v</span><span class="op" id="4647177">.</span><span class="ident" id="4647178">Type</span><span class="op" id="4647182">(</span><span class="op" id="4647183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647187">if</span>&nbsp;<span class="ident" id="4647190">sliceType</span><span class="op" id="4647199">.</span><span class="ident" id="4647200">Elem</span><span class="op" id="4647204">(</span><span class="op" id="4647205">)</span><span class="op" id="4647206">.</span><span class="ident" id="4647207">Kind</span><span class="op" id="4647211">(</span><span class="op" id="4647212">)</span>&nbsp;<span class="op" id="4647214">==</span>&nbsp;<span class="ident" id="4647217">reflect</span><span class="op" id="4647224">.</span><span class="ident" id="4647225">Uint8</span>&nbsp;<span class="op" id="4647231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647236">bytes</span>&nbsp;<span class="op" id="4647242">:=</span>&nbsp;<span class="builtinfunc" id="4647245">make</span><span class="op" id="4647249">(</span><span class="op" id="4647250">[</span><span class="op" id="4647251">]</span><span class="builtintype" id="4647252">byte</span><span class="op" id="4647256">,</span>&nbsp;<span class="ident" id="4647258">v</span><span class="op" id="4647259">.</span><span class="ident" id="4647260">Len</span><span class="op" id="4647263">(</span><span class="op" id="4647264">)</span><span class="op" id="4647265">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647270">for</span>&nbsp;<span class="ident" id="4647274">i</span>&nbsp;<span class="op" id="4647276">:=</span>&nbsp;<span class="num" id="4647279">0</span><span class="op" id="4647280">;</span>&nbsp;<span class="ident" id="4647282">i</span>&nbsp;<span class="op" id="4647284">&lt;</span>&nbsp;<span class="ident" id="4647286">v</span><span class="op" id="4647287">.</span><span class="ident" id="4647288">Len</span><span class="op" id="4647291">(</span><span class="op" id="4647292">)</span><span class="op" id="4647293">;</span>&nbsp;<span class="ident" id="4647295">i</span><span class="op" id="4647296">++</span>&nbsp;<span class="op" id="4647299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647305">bytes</span><span class="op" id="4647310">[</span><span class="ident" id="4647311">i</span><span class="op" id="4647312">]</span>&nbsp;<span class="op" id="4647314">=</span>&nbsp;<span class="builtintype" id="4647316">uint8</span><span class="op" id="4647321">(</span><span class="ident" id="4647322">v</span><span class="op" id="4647323">.</span><span class="ident" id="4647324">Index</span><span class="op" id="4647329">(</span><span class="ident" id="4647330">i</span><span class="op" id="4647331">)</span><span class="op" id="4647332">.</span><span class="ident" id="4647333">Uint</span><span class="op" id="4647337">(</span><span class="op" id="4647338">)</span><span class="op" id="4647339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4647344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647349">_</span><span class="op" id="4647350">,</span>&nbsp;<span class="ident" id="4647352">err</span>&nbsp;<span class="op" id="4647356">=</span>&nbsp;<span class="ident" id="4647358">out</span><span class="op" id="4647361">.</span><span class="ident" id="4647362">Write</span><span class="op" id="4647367">(</span><span class="ident" id="4647368">bytes</span><span class="op" id="4647373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647378">return</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4647387">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647392">var</span>&nbsp;<span class="ident" id="4647396">fp</span>&nbsp;<span class="ident" id="4647399">fieldParameters</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647417">for</span>&nbsp;<span class="ident" id="4647421">i</span>&nbsp;<span class="op" id="4647423">:=</span>&nbsp;<span class="num" id="4647426">0</span><span class="op" id="4647427">;</span>&nbsp;<span class="ident" id="4647429">i</span>&nbsp;<span class="op" id="4647431">&lt;</span>&nbsp;<span class="ident" id="4647433">v</span><span class="op" id="4647434">.</span><span class="ident" id="4647435">Len</span><span class="op" id="4647438">(</span><span class="op" id="4647439">)</span><span class="op" id="4647440">;</span>&nbsp;<span class="ident" id="4647442">i</span><span class="op" id="4647443">++</span>&nbsp;<span class="op" id="4647446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647451">var</span>&nbsp;<span class="ident" id="4647455">pre</span>&nbsp;<span class="op" id="4647459">*</span><span class="ident" id="4647460">forkableWriter</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647478">pre</span><span class="op" id="4647481">,</span>&nbsp;<span class="ident" id="4647483">out</span>&nbsp;<span class="op" id="4647487">=</span>&nbsp;<span class="ident" id="4647489">out</span><span class="op" id="4647492">.</span><span class="ident" id="4647493">fork</span><span class="op" id="4647497">(</span><span class="op" id="4647498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4647503">err</span>&nbsp;<span class="op" id="4647507">=</span>&nbsp;<span class="ident" id="4647509">marshalField</span><span class="op" id="4647521">(</span><span class="ident" id="4647522">pre</span><span class="op" id="4647525">,</span>&nbsp;<span class="ident" id="4647527">v</span><span class="op" id="4647528">.</span><span class="ident" id="4647529">Index</span><span class="op" id="4647534">(</span><span class="ident" id="4647535">i</span><span class="op" id="4647536">)</span><span class="op" id="4647537">,</span>&nbsp;<span class="ident" id="4647539">fp</span><span class="op" id="4647541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647546">if</span>&nbsp;<span class="ident" id="4647549">err</span>&nbsp;<span class="op" id="4647553">!=</span>&nbsp;<span class="builtintype" id="4647556">nil</span>&nbsp;<span class="op" id="4647560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647566">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4647576">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4647580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647584">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647592">case</span>&nbsp;<span class="ident" id="4647597">reflect</span><span class="op" id="4647604">.</span><span class="ident" id="4647605">String</span><span class="op" id="4647611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647615">switch</span>&nbsp;<span class="ident" id="4647622">params</span><span class="op" id="4647628">.</span><span class="ident" id="4647629">stringType</span>&nbsp;<span class="op" id="4647640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647644">case</span>&nbsp;<span class="ident" id="4647649">tagIA5String</span><span class="op" id="4647661">:</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647666">return</span>&nbsp;<span class="ident" id="4647673">marshalIA5String</span><span class="op" id="4647689">(</span><span class="ident" id="4647690">out</span><span class="op" id="4647693">,</span>&nbsp;<span class="ident" id="4647695">v</span><span class="op" id="4647696">.</span><span class="ident" id="4647697">String</span><span class="op" id="4647703">(</span><span class="op" id="4647704">)</span><span class="op" id="4647705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647709">case</span>&nbsp;<span class="ident" id="4647714">tagPrintableString</span><span class="op" id="4647732">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647737">return</span>&nbsp;<span class="ident" id="4647744">marshalPrintableString</span><span class="op" id="4647766">(</span><span class="ident" id="4647767">out</span><span class="op" id="4647770">,</span>&nbsp;<span class="ident" id="4647772">v</span><span class="op" id="4647773">.</span><span class="ident" id="4647774">String</span><span class="op" id="4647780">(</span><span class="op" id="4647781">)</span><span class="op" id="4647782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647786">default</span><span class="op" id="4647793">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647798">return</span>&nbsp;<span class="ident" id="4647805">marshalUTF8String</span><span class="op" id="4647822">(</span><span class="ident" id="4647823">out</span><span class="op" id="4647826">,</span>&nbsp;<span class="ident" id="4647828">v</span><span class="op" id="4647829">.</span><span class="ident" id="4647830">String</span><span class="op" id="4647836">(</span><span class="op" id="4647837">)</span><span class="op" id="4647838">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4647842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4647845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4647849">return</span>&nbsp;<span class="ident" id="4647856">StructuralError</span><span class="op" id="4647871">{</span><span class="string" id="4647872">&#34;unknown&nbsp;Go&nbsp;type&#34;</span><span class="op" id="4647889">}</span><br>
<span class="lineno"></span><span class="op" id="4647891">}</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span><span class="keyword" id="4647894">func</span>&nbsp;<span class="ident" id="4647899">marshalField</span><span class="op" id="4647911">(</span><span class="ident" id="4647912">out</span>&nbsp;<span class="op" id="4647916">*</span><span class="ident" id="4647917">forkableWriter</span><span class="op" id="4647931">,</span>&nbsp;<span class="ident" id="4647933">v</span>&nbsp;<span class="ident" id="4647935">reflect</span><span class="op" id="4647942">.</span><span class="ident" id="4647943">Value</span><span class="op" id="4647948">,</span>&nbsp;<span class="ident" id="4647950">params</span>&nbsp;<span class="ident" id="4647957">fieldParameters</span><span class="op" id="4647972">)</span>&nbsp;<span class="op" id="4647974">(</span><span class="ident" id="4647975">err</span>&nbsp;<span class="builtintype" id="4647979">error</span><span class="op" id="4647984">)</span>&nbsp;<span class="op" id="4647986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4647989">//&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;an&nbsp;interface{}&nbsp;then&nbsp;recurse&nbsp;into&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648046">if</span>&nbsp;<span class="ident" id="4648049">v</span><span class="op" id="4648050">.</span><span class="ident" id="4648051">Kind</span><span class="op" id="4648055">(</span><span class="op" id="4648056">)</span>&nbsp;<span class="op" id="4648058">==</span>&nbsp;<span class="ident" id="4648061">reflect</span><span class="op" id="4648068">.</span><span class="ident" id="4648069">Interface</span>&nbsp;<span class="op" id="4648079">&amp;&amp;</span>&nbsp;<span class="ident" id="4648082">v</span><span class="op" id="4648083">.</span><span class="ident" id="4648084">Type</span><span class="op" id="4648088">(</span><span class="op" id="4648089">)</span><span class="op" id="4648090">.</span><span class="ident" id="4648091">NumMethod</span><span class="op" id="4648100">(</span><span class="op" id="4648101">)</span>&nbsp;<span class="op" id="4648103">==</span>&nbsp;<span class="num" id="4648106">0</span>&nbsp;<span class="op" id="4648108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648112">return</span>&nbsp;<span class="ident" id="4648119">marshalField</span><span class="op" id="4648131">(</span><span class="ident" id="4648132">out</span><span class="op" id="4648135">,</span>&nbsp;<span class="ident" id="4648137">v</span><span class="op" id="4648138">.</span><span class="ident" id="4648139">Elem</span><span class="op" id="4648143">(</span><span class="op" id="4648144">)</span><span class="op" id="4648145">,</span>&nbsp;<span class="ident" id="4648147">params</span><span class="op" id="4648153">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4648156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648160">if</span>&nbsp;<span class="ident" id="4648163">v</span><span class="op" id="4648164">.</span><span class="ident" id="4648165">Kind</span><span class="op" id="4648169">(</span><span class="op" id="4648170">)</span>&nbsp;<span class="op" id="4648172">==</span>&nbsp;<span class="ident" id="4648175">reflect</span><span class="op" id="4648182">.</span><span class="ident" id="4648183">Slice</span>&nbsp;<span class="op" id="4648189">&amp;&amp;</span>&nbsp;<span class="ident" id="4648192">v</span><span class="op" id="4648193">.</span><span class="ident" id="4648194">Len</span><span class="op" id="4648197">(</span><span class="op" id="4648198">)</span>&nbsp;<span class="op" id="4648200">==</span>&nbsp;<span class="num" id="4648203">0</span>&nbsp;<span class="op" id="4648205">&amp;&amp;</span>&nbsp;<span class="ident" id="4648208">params</span><span class="op" id="4648214">.</span><span class="ident" id="4648215">omitEmpty</span>&nbsp;<span class="op" id="4648225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648229">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4648237">}</span><br>
<span class="lineno">515</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648241">if</span>&nbsp;<span class="ident" id="4648244">params</span><span class="op" id="4648250">.</span><span class="ident" id="4648251">optional</span>&nbsp;<span class="op" id="4648260">&amp;&amp;</span>&nbsp;<span class="ident" id="4648263">params</span><span class="op" id="4648269">.</span><span class="ident" id="4648270">defaultValue</span>&nbsp;<span class="op" id="4648283">!=</span>&nbsp;<span class="builtintype" id="4648286">nil</span>&nbsp;<span class="op" id="4648290">&amp;&amp;</span>&nbsp;<span class="ident" id="4648293">canHaveDefaultValue</span><span class="op" id="4648312">(</span><span class="ident" id="4648313">v</span><span class="op" id="4648314">.</span><span class="ident" id="4648315">Kind</span><span class="op" id="4648319">(</span><span class="op" id="4648320">)</span><span class="op" id="4648321">)</span>&nbsp;<span class="op" id="4648323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4648327">defaultValue</span>&nbsp;<span class="op" id="4648340">:=</span>&nbsp;<span class="ident" id="4648343">reflect</span><span class="op" id="4648350">.</span><span class="ident" id="4648351">New</span><span class="op" id="4648354">(</span><span class="ident" id="4648355">v</span><span class="op" id="4648356">.</span><span class="ident" id="4648357">Type</span><span class="op" id="4648361">(</span><span class="op" id="4648362">)</span><span class="op" id="4648363">)</span><span class="op" id="4648364">.</span><span class="ident" id="4648365">Elem</span><span class="op" id="4648369">(</span><span class="op" id="4648370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4648374">defaultValue</span><span class="op" id="4648386">.</span><span class="ident" id="4648387">SetInt</span><span class="op" id="4648393">(</span><span class="op" id="4648394">*</span><span class="ident" id="4648395">params</span><span class="op" id="4648401">.</span><span class="ident" id="4648402">defaultValue</span><span class="op" id="4648414">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648419">if</span>&nbsp;<span class="ident" id="4648422">reflect</span><span class="op" id="4648429">.</span><span class="ident" id="4648430">DeepEqual</span><span class="op" id="4648439">(</span><span class="ident" id="4648440">v</span><span class="op" id="4648441">.</span><span class="ident" id="4648442">Interface</span><span class="op" id="4648451">(</span><span class="op" id="4648452">)</span><span class="op" id="4648453">,</span>&nbsp;<span class="ident" id="4648455">defaultValue</span><span class="op" id="4648467">.</span><span class="ident" id="4648468">Interface</span><span class="op" id="4648477">(</span><span class="op" id="4648478">)</span><span class="op" id="4648479">)</span>&nbsp;<span class="op" id="4648481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648486">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4648495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4648498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4648502">//&nbsp;If&nbsp;no&nbsp;default&nbsp;value&nbsp;is&nbsp;given&nbsp;then&nbsp;the&nbsp;zero&nbsp;value&nbsp;for&nbsp;the&nbsp;type&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4648571">//&nbsp;assumed&nbsp;to&nbsp;be&nbsp;the&nbsp;default&nbsp;value.&nbsp;This&nbsp;isn&#39;t&nbsp;obviously&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4648641">//&nbsp;behaviour,&nbsp;but&nbsp;it&#39;s&nbsp;what&nbsp;Go&nbsp;has&nbsp;traditionally&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648697">if</span>&nbsp;<span class="ident" id="4648700">params</span><span class="op" id="4648706">.</span><span class="ident" id="4648707">optional</span>&nbsp;<span class="op" id="4648716">&amp;&amp;</span>&nbsp;<span class="ident" id="4648719">params</span><span class="op" id="4648725">.</span><span class="ident" id="4648726">defaultValue</span>&nbsp;<span class="op" id="4648739">==</span>&nbsp;<span class="builtintype" id="4648742">nil</span>&nbsp;<span class="op" id="4648746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648750">if</span>&nbsp;<span class="ident" id="4648753">reflect</span><span class="op" id="4648760">.</span><span class="ident" id="4648761">DeepEqual</span><span class="op" id="4648770">(</span><span class="ident" id="4648771">v</span><span class="op" id="4648772">.</span><span class="ident" id="4648773">Interface</span><span class="op" id="4648782">(</span><span class="op" id="4648783">)</span><span class="op" id="4648784">,</span>&nbsp;<span class="ident" id="4648786">reflect</span><span class="op" id="4648793">.</span><span class="ident" id="4648794">Zero</span><span class="op" id="4648798">(</span><span class="ident" id="4648799">v</span><span class="op" id="4648800">.</span><span class="ident" id="4648801">Type</span><span class="op" id="4648805">(</span><span class="op" id="4648806">)</span><span class="op" id="4648807">)</span><span class="op" id="4648808">.</span><span class="ident" id="4648809">Interface</span><span class="op" id="4648818">(</span><span class="op" id="4648819">)</span><span class="op" id="4648820">)</span>&nbsp;<span class="op" id="4648822">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648827">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4648836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4648839">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648843">if</span>&nbsp;<span class="ident" id="4648846">v</span><span class="op" id="4648847">.</span><span class="ident" id="4648848">Type</span><span class="op" id="4648852">(</span><span class="op" id="4648853">)</span>&nbsp;<span class="op" id="4648855">==</span>&nbsp;<span class="ident" id="4648858">rawValueType</span>&nbsp;<span class="op" id="4648871">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4648875">rv</span>&nbsp;<span class="op" id="4648878">:=</span>&nbsp;<span class="ident" id="4648881">v</span><span class="op" id="4648882">.</span><span class="ident" id="4648883">Interface</span><span class="op" id="4648892">(</span><span class="op" id="4648893">)</span><span class="op" id="4648894">.</span><span class="op" id="4648895">(</span><span class="ident" id="4648896">RawValue</span><span class="op" id="4648904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4648908">if</span>&nbsp;<span class="builtinfunc" id="4648911">len</span><span class="op" id="4648914">(</span><span class="ident" id="4648915">rv</span><span class="op" id="4648917">.</span><span class="ident" id="4648918">FullBytes</span><span class="op" id="4648927">)</span>&nbsp;<span class="op" id="4648929">!=</span>&nbsp;<span class="num" id="4648932">0</span>&nbsp;<span class="op" id="4648934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4648939">_</span><span class="op" id="4648940">,</span>&nbsp;<span class="ident" id="4648942">err</span>&nbsp;<span class="op" id="4648946">=</span>&nbsp;<span class="ident" id="4648948">out</span><span class="op" id="4648951">.</span><span class="ident" id="4648952">Write</span><span class="op" id="4648957">(</span><span class="ident" id="4648958">rv</span><span class="op" id="4648960">.</span><span class="ident" id="4648961">FullBytes</span><span class="op" id="4648970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4648974">}</span>&nbsp;<span class="keyword" id="4648976">else</span>&nbsp;<span class="op" id="4648981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4648986">err</span>&nbsp;<span class="op" id="4648990">=</span>&nbsp;<span class="ident" id="4648992">marshalTagAndLength</span><span class="op" id="4649011">(</span><span class="ident" id="4649012">out</span><span class="op" id="4649015">,</span>&nbsp;<span class="ident" id="4649017">tagAndLength</span><span class="op" id="4649029">{</span><span class="ident" id="4649030">rv</span><span class="op" id="4649032">.</span><span class="ident" id="4649033">Class</span><span class="op" id="4649038">,</span>&nbsp;<span class="ident" id="4649040">rv</span><span class="op" id="4649042">.</span><span class="ident" id="4649043">Tag</span><span class="op" id="4649046">,</span>&nbsp;<span class="builtinfunc" id="4649048">len</span><span class="op" id="4649051">(</span><span class="ident" id="4649052">rv</span><span class="op" id="4649054">.</span><span class="ident" id="4649055">Bytes</span><span class="op" id="4649060">)</span><span class="op" id="4649061">,</span>&nbsp;<span class="ident" id="4649063">rv</span><span class="op" id="4649065">.</span><span class="ident" id="4649066">IsCompound</span><span class="op" id="4649076">}</span><span class="op" id="4649077">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649082">if</span>&nbsp;<span class="ident" id="4649085">err</span>&nbsp;<span class="op" id="4649089">!=</span>&nbsp;<span class="builtintype" id="4649092">nil</span>&nbsp;<span class="op" id="4649096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649102">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4649112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4649117">_</span><span class="op" id="4649118">,</span>&nbsp;<span class="ident" id="4649120">err</span>&nbsp;<span class="op" id="4649124">=</span>&nbsp;<span class="ident" id="4649126">out</span><span class="op" id="4649129">.</span><span class="ident" id="4649130">Write</span><span class="op" id="4649135">(</span><span class="ident" id="4649136">rv</span><span class="op" id="4649138">.</span><span class="ident" id="4649139">Bytes</span><span class="op" id="4649144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4649148">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649152">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4649160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4649164">tag</span><span class="op" id="4649167">,</span>&nbsp;<span class="ident" id="4649169">isCompound</span><span class="op" id="4649179">,</span>&nbsp;<span class="ident" id="4649181">ok</span>&nbsp;<span class="op" id="4649184">:=</span>&nbsp;<span class="ident" id="4649187">getUniversalType</span><span class="op" id="4649203">(</span><span class="ident" id="4649204">v</span><span class="op" id="4649205">.</span><span class="ident" id="4649206">Type</span><span class="op" id="4649210">(</span><span class="op" id="4649211">)</span><span class="op" id="4649212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649215">if</span>&nbsp;<span class="op" id="4649218">!</span><span class="ident" id="4649219">ok</span>&nbsp;<span class="op" id="4649222">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4649226">err</span>&nbsp;<span class="op" id="4649230">=</span>&nbsp;<span class="ident" id="4649232">StructuralError</span><span class="op" id="4649247">{</span><span class="ident" id="4649248">fmt</span><span class="op" id="4649251">.</span><span class="ident" id="4649252">Sprintf</span><span class="op" id="4649259">(</span><span class="string" id="4649260">&#34;unknown&nbsp;Go&nbsp;type:&nbsp;%v&#34;</span><span class="op" id="4649281">,</span>&nbsp;<span class="ident" id="4649283">v</span><span class="op" id="4649284">.</span><span class="ident" id="4649285">Type</span><span class="op" id="4649289">(</span><span class="op" id="4649290">)</span><span class="op" id="4649291">)</span><span class="op" id="4649292">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649296">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4649304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4649307">class</span>&nbsp;<span class="op" id="4649313">:=</span>&nbsp;<span class="ident" id="4649316">classUniversal</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649333">if</span>&nbsp;<span class="ident" id="4649336">params</span><span class="op" id="4649342">.</span><span class="ident" id="4649343">stringType</span>&nbsp;<span class="op" id="4649354">!=</span>&nbsp;<span class="num" id="4649357">0</span>&nbsp;<span class="op" id="4649359">&amp;&amp;</span>&nbsp;<span class="ident" id="4649362">tag</span>&nbsp;<span class="op" id="4649366">!=</span>&nbsp;<span class="ident" id="4649369">tagPrintableString</span>&nbsp;<span class="op" id="4649388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649392">return</span>&nbsp;<span class="ident" id="4649399">StructuralError</span><span class="op" id="4649414">{</span><span class="string" id="4649415">&#34;explicit&nbsp;string&nbsp;type&nbsp;given&nbsp;to&nbsp;non-string&nbsp;member&#34;</span><span class="op" id="4649464">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4649467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649471">switch</span>&nbsp;<span class="ident" id="4649478">tag</span>&nbsp;<span class="op" id="4649482">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649485">case</span>&nbsp;<span class="ident" id="4649490">tagPrintableString</span><span class="op" id="4649508">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649512">if</span>&nbsp;<span class="ident" id="4649515">params</span><span class="op" id="4649521">.</span><span class="ident" id="4649522">stringType</span>&nbsp;<span class="op" id="4649533">==</span>&nbsp;<span class="num" id="4649536">0</span>&nbsp;<span class="op" id="4649538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4649543">//&nbsp;This&nbsp;is&nbsp;a&nbsp;string&nbsp;without&nbsp;an&nbsp;explicit&nbsp;string&nbsp;type.&nbsp;We&#39;ll&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4649609">//&nbsp;a&nbsp;PrintableString&nbsp;if&nbsp;the&nbsp;character&nbsp;set&nbsp;in&nbsp;the&nbsp;string&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4649671">//&nbsp;sufficiently&nbsp;limited,&nbsp;otherwise&nbsp;we&#39;ll&nbsp;use&nbsp;a&nbsp;UTF8String.</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649733">for</span>&nbsp;<span class="ident" id="4649737">_</span><span class="op" id="4649738">,</span>&nbsp;<span class="ident" id="4649740">r</span>&nbsp;<span class="op" id="4649742">:=</span>&nbsp;<span class="keyword" id="4649745">range</span>&nbsp;<span class="ident" id="4649751">v</span><span class="op" id="4649752">.</span><span class="ident" id="4649753">String</span><span class="op" id="4649759">(</span><span class="op" id="4649760">)</span>&nbsp;<span class="op" id="4649762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649768">if</span>&nbsp;<span class="ident" id="4649771">r</span>&nbsp;<span class="op" id="4649773">&gt;=</span>&nbsp;<span class="ident" id="4649776">utf8</span><span class="op" id="4649780">.</span><span class="ident" id="4649781">RuneSelf</span>&nbsp;<span class="op" id="4649790">||</span>&nbsp;<span class="op" id="4649793">!</span><span class="ident" id="4649794">isPrintable</span><span class="op" id="4649805">(</span><span class="builtintype" id="4649806">byte</span><span class="op" id="4649810">(</span><span class="ident" id="4649811">r</span><span class="op" id="4649812">)</span><span class="op" id="4649813">)</span>&nbsp;<span class="op" id="4649815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649822">if</span>&nbsp;<span class="op" id="4649825">!</span><span class="ident" id="4649826">utf8</span><span class="op" id="4649830">.</span><span class="ident" id="4649831">ValidString</span><span class="op" id="4649842">(</span><span class="ident" id="4649843">v</span><span class="op" id="4649844">.</span><span class="ident" id="4649845">String</span><span class="op" id="4649851">(</span><span class="op" id="4649852">)</span><span class="op" id="4649853">)</span>&nbsp;<span class="op" id="4649855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649863">return</span>&nbsp;<span class="ident" id="4649870">errors</span><span class="op" id="4649876">.</span><span class="ident" id="4649877">New</span><span class="op" id="4649880">(</span><span class="string" id="4649881">&#34;asn1:&nbsp;string&nbsp;not&nbsp;valid&nbsp;UTF-8&#34;</span><span class="op" id="4649911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4649918">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4649925">tag</span>&nbsp;<span class="op" id="4649929">=</span>&nbsp;<span class="ident" id="4649931">tagUTF8String</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4649950">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4649960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4649965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4649969">}</span>&nbsp;<span class="keyword" id="4649971">else</span>&nbsp;<span class="op" id="4649976">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4649981">tag</span>&nbsp;<span class="op" id="4649985">=</span>&nbsp;<span class="ident" id="4649987">params</span><span class="op" id="4649993">.</span><span class="ident" id="4649994">stringType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650010">case</span>&nbsp;<span class="ident" id="4650015">tagUTCTime</span><span class="op" id="4650025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650029">if</span>&nbsp;<span class="ident" id="4650032">outsideUTCRange</span><span class="op" id="4650047">(</span><span class="ident" id="4650048">v</span><span class="op" id="4650049">.</span><span class="ident" id="4650050">Interface</span><span class="op" id="4650059">(</span><span class="op" id="4650060">)</span><span class="op" id="4650061">.</span><span class="op" id="4650062">(</span><span class="ident" id="4650063">time</span><span class="op" id="4650067">.</span><span class="ident" id="4650068">Time</span><span class="op" id="4650072">)</span><span class="op" id="4650073">)</span>&nbsp;<span class="op" id="4650075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650080">tag</span>&nbsp;<span class="op" id="4650084">=</span>&nbsp;<span class="ident" id="4650086">tagGeneralizedTime</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650114">if</span>&nbsp;<span class="ident" id="4650117">params</span><span class="op" id="4650123">.</span><span class="ident" id="4650124">set</span>&nbsp;<span class="op" id="4650128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650132">if</span>&nbsp;<span class="ident" id="4650135">tag</span>&nbsp;<span class="op" id="4650139">!=</span>&nbsp;<span class="ident" id="4650142">tagSequence</span>&nbsp;<span class="op" id="4650154">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650159">return</span>&nbsp;<span class="ident" id="4650166">StructuralError</span><span class="op" id="4650181">{</span><span class="string" id="4650182">&#34;non&nbsp;sequence&nbsp;tagged&nbsp;as&nbsp;set&#34;</span><span class="op" id="4650210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650214">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650218">tag</span>&nbsp;<span class="op" id="4650222">=</span>&nbsp;<span class="ident" id="4650224">tagSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650236">tags</span><span class="op" id="4650240">,</span>&nbsp;<span class="ident" id="4650242">body</span>&nbsp;<span class="op" id="4650247">:=</span>&nbsp;<span class="ident" id="4650250">out</span><span class="op" id="4650253">.</span><span class="ident" id="4650254">fork</span><span class="op" id="4650258">(</span><span class="op" id="4650259">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650263">err</span>&nbsp;<span class="op" id="4650267">=</span>&nbsp;<span class="ident" id="4650269">marshalBody</span><span class="op" id="4650280">(</span><span class="ident" id="4650281">body</span><span class="op" id="4650285">,</span>&nbsp;<span class="ident" id="4650287">v</span><span class="op" id="4650288">,</span>&nbsp;<span class="ident" id="4650290">params</span><span class="op" id="4650296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650299">if</span>&nbsp;<span class="ident" id="4650302">err</span>&nbsp;<span class="op" id="4650306">!=</span>&nbsp;<span class="builtintype" id="4650309">nil</span>&nbsp;<span class="op" id="4650313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650317">return</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650329">bodyLen</span>&nbsp;<span class="op" id="4650337">:=</span>&nbsp;<span class="ident" id="4650340">body</span><span class="op" id="4650344">.</span><span class="ident" id="4650345">Len</span><span class="op" id="4650348">(</span><span class="op" id="4650349">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650353">var</span>&nbsp;<span class="ident" id="4650357">explicitTag</span>&nbsp;<span class="op" id="4650369">*</span><span class="ident" id="4650370">forkableWriter</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650386">if</span>&nbsp;<span class="ident" id="4650389">params</span><span class="op" id="4650395">.</span><span class="ident" id="4650396">explicit</span>&nbsp;<span class="op" id="4650405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650409">explicitTag</span><span class="op" id="4650420">,</span>&nbsp;<span class="ident" id="4650422">tags</span>&nbsp;<span class="op" id="4650427">=</span>&nbsp;<span class="ident" id="4650429">tags</span><span class="op" id="4650433">.</span><span class="ident" id="4650434">fork</span><span class="op" id="4650438">(</span><span class="op" id="4650439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650446">if</span>&nbsp;<span class="op" id="4650449">!</span><span class="ident" id="4650450">params</span><span class="op" id="4650456">.</span><span class="ident" id="4650457">explicit</span>&nbsp;<span class="op" id="4650466">&amp;&amp;</span>&nbsp;<span class="ident" id="4650469">params</span><span class="op" id="4650475">.</span><span class="ident" id="4650476">tag</span>&nbsp;<span class="op" id="4650480">!=</span>&nbsp;<span class="builtintype" id="4650483">nil</span>&nbsp;<span class="op" id="4650487">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4650491">//&nbsp;implicit&nbsp;tag.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650510">tag</span>&nbsp;<span class="op" id="4650514">=</span>&nbsp;<span class="op" id="4650516">*</span><span class="ident" id="4650517">params</span><span class="op" id="4650523">.</span><span class="ident" id="4650524">tag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650530">class</span>&nbsp;<span class="op" id="4650536">=</span>&nbsp;<span class="ident" id="4650538">classContextSpecific</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650564">err</span>&nbsp;<span class="op" id="4650568">=</span>&nbsp;<span class="ident" id="4650570">marshalTagAndLength</span><span class="op" id="4650589">(</span><span class="ident" id="4650590">tags</span><span class="op" id="4650594">,</span>&nbsp;<span class="ident" id="4650596">tagAndLength</span><span class="op" id="4650608">{</span><span class="ident" id="4650609">class</span><span class="op" id="4650614">,</span>&nbsp;<span class="ident" id="4650616">tag</span><span class="op" id="4650619">,</span>&nbsp;<span class="ident" id="4650621">bodyLen</span><span class="op" id="4650628">,</span>&nbsp;<span class="ident" id="4650630">isCompound</span><span class="op" id="4650640">}</span><span class="op" id="4650641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650644">if</span>&nbsp;<span class="ident" id="4650647">err</span>&nbsp;<span class="op" id="4650651">!=</span>&nbsp;<span class="builtintype" id="4650654">nil</span>&nbsp;<span class="op" id="4650658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650662">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650670">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650674">if</span>&nbsp;<span class="ident" id="4650677">params</span><span class="op" id="4650683">.</span><span class="ident" id="4650684">explicit</span>&nbsp;<span class="op" id="4650693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650697">err</span>&nbsp;<span class="op" id="4650701">=</span>&nbsp;<span class="ident" id="4650703">marshalTagAndLength</span><span class="op" id="4650722">(</span><span class="ident" id="4650723">explicitTag</span><span class="op" id="4650734">,</span>&nbsp;<span class="ident" id="4650736">tagAndLength</span><span class="op" id="4650748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650753">class</span><span class="op" id="4650758">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650765">classContextSpecific</span><span class="op" id="4650785">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650790">tag</span><span class="op" id="4650793">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650802">*</span><span class="ident" id="4650803">params</span><span class="op" id="4650809">.</span><span class="ident" id="4650810">tag</span><span class="op" id="4650813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650818">length</span><span class="op" id="4650824">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650830">bodyLen</span>&nbsp;<span class="op" id="4650838">+</span>&nbsp;<span class="ident" id="4650840">tags</span><span class="op" id="4650844">.</span><span class="ident" id="4650845">Len</span><span class="op" id="4650848">(</span><span class="op" id="4650849">)</span><span class="op" id="4650850">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4650855">isCompound</span><span class="op" id="4650865">:</span>&nbsp;<span class="builtintype" id="4650867">true</span><span class="op" id="4650871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650875">}</span><span class="op" id="4650876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4650879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4650883">return</span>&nbsp;<span class="builtintype" id="4650890">nil</span><br>
<span class="lineno">625</span><span class="op" id="4650894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4650897">//&nbsp;Marshal&nbsp;returns&nbsp;the&nbsp;ASN.1&nbsp;encoding&nbsp;of&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="4650943">//</span><br>
<span class="lineno"></span><span class="comment" id="4650946">//&nbsp;In&nbsp;addition&nbsp;to&nbsp;the&nbsp;struct&nbsp;tags&nbsp;recognised&nbsp;by&nbsp;Unmarshal,&nbsp;the&nbsp;following&nbsp;can&nbsp;be</span><br>
<span class="lineno">630</span><span class="comment" id="4651026">//&nbsp;used:</span><br>
<span class="lineno"></span><span class="comment" id="4651035">//</span><br>
<span class="lineno"></span><span class="comment" id="4651038">//&nbsp;&nbsp;&nbsp;&nbsp;ia5:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;IA5&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="4651100">//&nbsp;&nbsp;&nbsp;&nbsp;omitempty:&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;empty&nbsp;slices&nbsp;to&nbsp;be&nbsp;skipped</span><br>
<span class="lineno"></span><span class="comment" id="4651148">//&nbsp;&nbsp;&nbsp;&nbsp;printable:&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;PrintableString&nbsp;strings.</span><br>
<span class="lineno">635</span><span class="comment" id="4651228">//&nbsp;&nbsp;&nbsp;&nbsp;utf8:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;strings&nbsp;to&nbsp;be&nbsp;marshaled&nbsp;as&nbsp;ASN.1,&nbsp;UTF8&nbsp;strings</span><br>
<span class="lineno"></span><span class="keyword" id="4651292">func</span>&nbsp;<span class="ident" id="4651297">Marshal</span><span class="op" id="4651304">(</span><span class="ident" id="4651305">val</span>&nbsp;<span class="keyword" id="4651309">interface</span><span class="op" id="4651318">{</span><span class="op" id="4651319">}</span><span class="op" id="4651320">)</span>&nbsp;<span class="op" id="4651322">(</span><span class="op" id="4651323">[</span><span class="op" id="4651324">]</span><span class="builtintype" id="4651325">byte</span><span class="op" id="4651329">,</span>&nbsp;<span class="builtintype" id="4651331">error</span><span class="op" id="4651336">)</span>&nbsp;<span class="op" id="4651338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4651341">var</span>&nbsp;<span class="ident" id="4651345">out</span>&nbsp;<span class="ident" id="4651349">bytes</span><span class="op" id="4651354">.</span><span class="ident" id="4651355">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4651363">v</span>&nbsp;<span class="op" id="4651365">:=</span>&nbsp;<span class="ident" id="4651368">reflect</span><span class="op" id="4651375">.</span><span class="ident" id="4651376">ValueOf</span><span class="op" id="4651383">(</span><span class="ident" id="4651384">val</span><span class="op" id="4651387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4651390">f</span>&nbsp;<span class="op" id="4651392">:=</span>&nbsp;<span class="ident" id="4651395">newForkableWriter</span><span class="op" id="4651412">(</span><span class="op" id="4651413">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4651416">err</span>&nbsp;<span class="op" id="4651420">:=</span>&nbsp;<span class="ident" id="4651423">marshalField</span><span class="op" id="4651435">(</span><span class="ident" id="4651436">f</span><span class="op" id="4651437">,</span>&nbsp;<span class="ident" id="4651439">v</span><span class="op" id="4651440">,</span>&nbsp;<span class="ident" id="4651442">fieldParameters</span><span class="op" id="4651457">{</span><span class="op" id="4651458">}</span><span class="op" id="4651459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4651462">if</span>&nbsp;<span class="ident" id="4651465">err</span>&nbsp;<span class="op" id="4651469">!=</span>&nbsp;<span class="builtintype" id="4651472">nil</span>&nbsp;<span class="op" id="4651476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4651480">return</span>&nbsp;<span class="builtintype" id="4651487">nil</span><span class="op" id="4651490">,</span>&nbsp;<span class="ident" id="4651492">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4651497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4651500">_</span><span class="op" id="4651501">,</span>&nbsp;<span class="ident" id="4651503">err</span>&nbsp;<span class="op" id="4651507">=</span>&nbsp;<span class="ident" id="4651509">f</span><span class="op" id="4651510">.</span><span class="ident" id="4651511">writeTo</span><span class="op" id="4651518">(</span><span class="op" id="4651519">&amp;</span><span class="ident" id="4651520">out</span><span class="op" id="4651523">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4651526">return</span>&nbsp;<span class="ident" id="4651533">out</span><span class="op" id="4651536">.</span><span class="ident" id="4651537">Bytes</span><span class="op" id="4651542">(</span><span class="op" id="4651543">)</span><span class="op" id="4651544">,</span>&nbsp;<span class="builtintype" id="4651546">nil</span><br>
<span class="lineno"></span><span class="op" id="4651550">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
