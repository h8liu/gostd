<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/build</h2>
<ul>
<li><a href="/gostd/go/build/build.go.html">build.go</a></li>
<li><a href="/gostd/go/build/build_test.go.html">build_test.go</a></li>
<li><a href="/gostd/go/build/deps_test.go.html">deps_test.go</a></li>
<li><a href="/gostd/go/build/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/build/read.go.html">read.go</a></li>
<li><a href="/gostd/go/build/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/go/build/syslist.go.html">syslist.go</a></li>
<li><a href="/gostd/go/build/syslist_test.go.html">syslist_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7507659">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7507715">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7507769">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7507820">package</span>&nbsp;<span class="ident" id="7507828">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7507835">import</span>&nbsp;<span class="op" id="7507842">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7507845">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7507856">&#34;testing&#34;</span><br>
<span class="lineno">10</span><span class="op" id="7507866">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7507869">var</span>&nbsp;<span class="op" id="7507873">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507876">thisOS</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7507886">=</span>&nbsp;<span class="ident" id="7507888">runtime</span><span class="op" id="7507895">.</span><span class="ident" id="7507896">GOOS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507902">thisArch</span>&nbsp;&nbsp;<span class="op" id="7507912">=</span>&nbsp;<span class="ident" id="7507914">runtime</span><span class="op" id="7507921">.</span><span class="ident" id="7507922">GOARCH</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507930">otherOS</span>&nbsp;&nbsp;&nbsp;<span class="op" id="7507940">=</span>&nbsp;<span class="ident" id="7507942">anotherOS</span><span class="op" id="7507951">(</span><span class="op" id="7507952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7507955">otherArch</span>&nbsp;<span class="op" id="7507965">=</span>&nbsp;<span class="ident" id="7507967">anotherArch</span><span class="op" id="7507978">(</span><span class="op" id="7507979">)</span><br>
<span class="lineno"></span><span class="op" id="7507981">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7507984">func</span>&nbsp;<span class="ident" id="7507989">anotherOS</span><span class="op" id="7507998">(</span><span class="op" id="7507999">)</span>&nbsp;<span class="builtintype" id="7508001">string</span>&nbsp;<span class="op" id="7508008">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7508011">if</span>&nbsp;<span class="ident" id="7508014">thisOS</span>&nbsp;<span class="op" id="7508021">!=</span>&nbsp;<span class="string" id="7508024">&#34;darwin&#34;</span>&nbsp;<span class="op" id="7508033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7508037">return</span>&nbsp;<span class="string" id="7508044">&#34;darwin&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7508057">return</span>&nbsp;<span class="string" id="7508064">&#34;linux&#34;</span><br>
<span class="lineno"></span><span class="op" id="7508072">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7508075">func</span>&nbsp;<span class="ident" id="7508080">anotherArch</span><span class="op" id="7508091">(</span><span class="op" id="7508092">)</span>&nbsp;<span class="builtintype" id="7508094">string</span>&nbsp;<span class="op" id="7508101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7508104">if</span>&nbsp;<span class="ident" id="7508107">thisArch</span>&nbsp;<span class="op" id="7508116">!=</span>&nbsp;<span class="string" id="7508119">&#34;amd64&#34;</span>&nbsp;<span class="op" id="7508127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7508131">return</span>&nbsp;<span class="string" id="7508138">&#34;amd64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508147">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7508150">return</span>&nbsp;<span class="string" id="7508157">&#34;386&#34;</span><br>
<span class="lineno"></span><span class="op" id="7508163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7508166">type</span>&nbsp;<span class="ident" id="7508171">GoodFileTest</span>&nbsp;<span class="keyword" id="7508184">struct</span>&nbsp;<span class="op" id="7508191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508194">name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7508201">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508209">result</span>&nbsp;<span class="builtintype" id="7508216">bool</span><br>
<span class="lineno"></span><span class="op" id="7508221">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7508224">var</span>&nbsp;<span class="ident" id="7508228">tests</span>&nbsp;<span class="op" id="7508234">=</span>&nbsp;<span class="op" id="7508236">[</span><span class="op" id="7508237">]</span><span class="ident" id="7508238">GoodFileTest</span><span class="op" id="7508250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508253">{</span><span class="string" id="7508254">&#34;file.go&#34;</span><span class="op" id="7508263">,</span>&nbsp;<span class="builtintype" id="7508265">true</span><span class="op" id="7508269">}</span><span class="op" id="7508270">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508273">{</span><span class="string" id="7508274">&#34;file.c&#34;</span><span class="op" id="7508282">,</span>&nbsp;<span class="builtintype" id="7508284">true</span><span class="op" id="7508288">}</span><span class="op" id="7508289">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508292">{</span><span class="string" id="7508293">&#34;file_foo.go&#34;</span><span class="op" id="7508306">,</span>&nbsp;<span class="builtintype" id="7508308">true</span><span class="op" id="7508312">}</span><span class="op" id="7508313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508316">{</span><span class="string" id="7508317">&#34;file_&#34;</span>&nbsp;<span class="op" id="7508325">+</span>&nbsp;<span class="ident" id="7508327">thisArch</span>&nbsp;<span class="op" id="7508336">+</span>&nbsp;<span class="string" id="7508338">&#34;.go&#34;</span><span class="op" id="7508343">,</span>&nbsp;<span class="builtintype" id="7508345">true</span><span class="op" id="7508349">}</span><span class="op" id="7508350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508353">{</span><span class="string" id="7508354">&#34;file_&#34;</span>&nbsp;<span class="op" id="7508362">+</span>&nbsp;<span class="ident" id="7508364">otherArch</span>&nbsp;<span class="op" id="7508374">+</span>&nbsp;<span class="string" id="7508376">&#34;.go&#34;</span><span class="op" id="7508381">,</span>&nbsp;<span class="builtintype" id="7508383">false</span><span class="op" id="7508388">}</span><span class="op" id="7508389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508392">{</span><span class="string" id="7508393">&#34;file_&#34;</span>&nbsp;<span class="op" id="7508401">+</span>&nbsp;<span class="ident" id="7508403">thisOS</span>&nbsp;<span class="op" id="7508410">+</span>&nbsp;<span class="string" id="7508412">&#34;.go&#34;</span><span class="op" id="7508417">,</span>&nbsp;<span class="builtintype" id="7508419">true</span><span class="op" id="7508423">}</span><span class="op" id="7508424">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508427">{</span><span class="string" id="7508428">&#34;file_&#34;</span>&nbsp;<span class="op" id="7508436">+</span>&nbsp;<span class="ident" id="7508438">otherOS</span>&nbsp;<span class="op" id="7508446">+</span>&nbsp;<span class="string" id="7508448">&#34;.go&#34;</span><span class="op" id="7508453">,</span>&nbsp;<span class="builtintype" id="7508455">false</span><span class="op" id="7508460">}</span><span class="op" id="7508461">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508464">{</span><span class="string" id="7508465">&#34;file_&#34;</span>&nbsp;<span class="op" id="7508473">+</span>&nbsp;<span class="ident" id="7508475">thisOS</span>&nbsp;<span class="op" id="7508482">+</span>&nbsp;<span class="string" id="7508484">&#34;_&#34;</span>&nbsp;<span class="op" id="7508488">+</span>&nbsp;<span class="ident" id="7508490">thisArch</span>&nbsp;<span class="op" id="7508499">+</span>&nbsp;<span class="string" id="7508501">&#34;.go&#34;</span><span class="op" id="7508506">,</span>&nbsp;<span class="builtintype" id="7508508">true</span><span class="op" id="7508512">}</span><span class="op" id="7508513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508516">{</span><span class="string" id="7508517">&#34;file_&#34;</span>&nbsp;<span class="op" id="7508525">+</span>&nbsp;<span class="ident" id="7508527">otherOS</span>&nbsp;<span class="op" id="7508535">+</span>&nbsp;<span class="string" id="7508537">&#34;_&#34;</span>&nbsp;<span class="op" id="7508541">+</span>&nbsp;<span class="ident" id="7508543">thisArch</span>&nbsp;<span class="op" id="7508552">+</span>&nbsp;<span class="string" id="7508554">&#34;.go&#34;</span><span class="op" id="7508559">,</span>&nbsp;<span class="builtintype" id="7508561">false</span><span class="op" id="7508566">}</span><span class="op" id="7508567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508570">{</span><span class="string" id="7508571">&#34;file_&#34;</span>&nbsp;<span class="op" id="7508579">+</span>&nbsp;<span class="ident" id="7508581">thisOS</span>&nbsp;<span class="op" id="7508588">+</span>&nbsp;<span class="string" id="7508590">&#34;_&#34;</span>&nbsp;<span class="op" id="7508594">+</span>&nbsp;<span class="ident" id="7508596">otherArch</span>&nbsp;<span class="op" id="7508606">+</span>&nbsp;<span class="string" id="7508608">&#34;.go&#34;</span><span class="op" id="7508613">,</span>&nbsp;<span class="builtintype" id="7508615">false</span><span class="op" id="7508620">}</span><span class="op" id="7508621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508624">{</span><span class="string" id="7508625">&#34;file_&#34;</span>&nbsp;<span class="op" id="7508633">+</span>&nbsp;<span class="ident" id="7508635">otherOS</span>&nbsp;<span class="op" id="7508643">+</span>&nbsp;<span class="string" id="7508645">&#34;_&#34;</span>&nbsp;<span class="op" id="7508649">+</span>&nbsp;<span class="ident" id="7508651">otherArch</span>&nbsp;<span class="op" id="7508661">+</span>&nbsp;<span class="string" id="7508663">&#34;.go&#34;</span><span class="op" id="7508668">,</span>&nbsp;<span class="builtintype" id="7508670">false</span><span class="op" id="7508675">}</span><span class="op" id="7508676">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508679">{</span><span class="string" id="7508680">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7508692">+</span>&nbsp;<span class="ident" id="7508694">thisArch</span>&nbsp;<span class="op" id="7508703">+</span>&nbsp;<span class="string" id="7508705">&#34;.go&#34;</span><span class="op" id="7508710">,</span>&nbsp;<span class="builtintype" id="7508712">true</span><span class="op" id="7508716">}</span><span class="op" id="7508717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508720">{</span><span class="string" id="7508721">&#34;file_foo_&#34;</span>&nbsp;<span class="op" id="7508733">+</span>&nbsp;<span class="ident" id="7508735">otherArch</span>&nbsp;<span class="op" id="7508745">+</span>&nbsp;<span class="string" id="7508747">&#34;.go&#34;</span><span class="op" id="7508752">,</span>&nbsp;<span class="builtintype" id="7508754">false</span><span class="op" id="7508759">}</span><span class="op" id="7508760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508763">{</span><span class="string" id="7508764">&#34;file_&#34;</span>&nbsp;<span class="op" id="7508772">+</span>&nbsp;<span class="ident" id="7508774">thisOS</span>&nbsp;<span class="op" id="7508781">+</span>&nbsp;<span class="string" id="7508783">&#34;.c&#34;</span><span class="op" id="7508787">,</span>&nbsp;<span class="builtintype" id="7508789">true</span><span class="op" id="7508793">}</span><span class="op" id="7508794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7508797">{</span><span class="string" id="7508798">&#34;file_&#34;</span>&nbsp;<span class="op" id="7508806">+</span>&nbsp;<span class="ident" id="7508808">otherOS</span>&nbsp;<span class="op" id="7508816">+</span>&nbsp;<span class="string" id="7508818">&#34;.c&#34;</span><span class="op" id="7508822">,</span>&nbsp;<span class="builtintype" id="7508824">false</span><span class="op" id="7508829">}</span><span class="op" id="7508830">,</span><br>
<span class="lineno"></span><span class="op" id="7508832">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7508835">func</span>&nbsp;<span class="ident" id="7508840">TestGoodOSArch</span><span class="op" id="7508854">(</span><span class="ident" id="7508855">t</span>&nbsp;<span class="op" id="7508857">*</span><span class="ident" id="7508858">testing</span><span class="op" id="7508865">.</span><span class="ident" id="7508866">T</span><span class="op" id="7508867">)</span>&nbsp;<span class="op" id="7508869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7508872">for</span>&nbsp;<span class="ident" id="7508876">_</span><span class="op" id="7508877">,</span>&nbsp;<span class="ident" id="7508879">test</span>&nbsp;<span class="op" id="7508884">:=</span>&nbsp;<span class="keyword" id="7508887">range</span>&nbsp;<span class="ident" id="7508893">tests</span>&nbsp;<span class="op" id="7508899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7508903">if</span>&nbsp;<span class="ident" id="7508906">Default</span><span class="op" id="7508913">.</span><span class="ident" id="7508914">goodOSArchFile</span><span class="op" id="7508928">(</span><span class="ident" id="7508929">test</span><span class="op" id="7508933">.</span><span class="ident" id="7508934">name</span><span class="op" id="7508938">,</span>&nbsp;<span class="builtinfunc" id="7508940">make</span><span class="op" id="7508944">(</span><span class="keyword" id="7508945">map</span><span class="op" id="7508948">[</span><span class="builtintype" id="7508949">string</span><span class="op" id="7508955">]</span><span class="builtintype" id="7508956">bool</span><span class="op" id="7508960">)</span><span class="op" id="7508961">)</span>&nbsp;<span class="op" id="7508963">!=</span>&nbsp;<span class="ident" id="7508966">test</span><span class="op" id="7508970">.</span><span class="ident" id="7508971">result</span>&nbsp;<span class="op" id="7508978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7508983">t</span><span class="op" id="7508984">.</span><span class="ident" id="7508985">Fatalf</span><span class="op" id="7508991">(</span><span class="string" id="7508992">&#34;goodOSArchFile(%q)&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7509018">,</span>&nbsp;<span class="ident" id="7509020">test</span><span class="op" id="7509024">.</span><span class="ident" id="7509025">name</span><span class="op" id="7509029">,</span>&nbsp;<span class="ident" id="7509031">test</span><span class="op" id="7509035">.</span><span class="ident" id="7509036">result</span><span class="op" id="7509042">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7509049">}</span><br>
<span class="lineno"></span><span class="op" id="7509051">}</span>
</div>
</body>
</html>
