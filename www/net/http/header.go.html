<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3356294">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3356350">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3356404">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3356455">package</span>&nbsp;<span class="ident" id="3356463">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3356469">import</span>&nbsp;<span class="op" id="3356476">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3356479">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3356485">&#34;net/textproto&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3356502">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3356510">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3356521">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3356529">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="3356536">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="3356539">var</span>&nbsp;<span class="ident" id="3356543">raceEnabled</span>&nbsp;<span class="op" id="3356555">=</span>&nbsp;<span class="builtintype" id="3356557">false</span>&nbsp;<span class="comment" id="3356563">//&nbsp;set&nbsp;by&nbsp;race.go</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3356582">//&nbsp;A&nbsp;Header&nbsp;represents&nbsp;the&nbsp;key-value&nbsp;pairs&nbsp;in&nbsp;an&nbsp;HTTP&nbsp;header.</span><br>
<span class="lineno"></span><span class="keyword" id="3356644">type</span>&nbsp;<span class="ident" id="3356649">Header</span>&nbsp;<span class="keyword" id="3356656">map</span><span class="op" id="3356659">[</span><span class="builtintype" id="3356660">string</span><span class="op" id="3356666">]</span><span class="op" id="3356667">[</span><span class="op" id="3356668">]</span><span class="builtintype" id="3356669">string</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="3356677">//&nbsp;Add&nbsp;adds&nbsp;the&nbsp;key,&nbsp;value&nbsp;pair&nbsp;to&nbsp;the&nbsp;header.</span><br>
<span class="lineno"></span><span class="comment" id="3356724">//&nbsp;It&nbsp;appends&nbsp;to&nbsp;any&nbsp;existing&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3356782">func</span>&nbsp;<span class="op" id="3356787">(</span><span class="ident" id="3356788">h</span>&nbsp;<span class="ident" id="3356790"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="3356796">)</span>&nbsp;<span class="ident" id="3356798">Add</span><span class="op" id="3356801">(</span><span class="ident" id="3356802">key</span><span class="op" id="3356805">,</span>&nbsp;<span class="ident" id="3356807">value</span>&nbsp;<span class="builtintype" id="3356813">string</span><span class="op" id="3356819">)</span>&nbsp;<span class="op" id="3356821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3356824"><a href="/net/http/header.go.html#3356485">textproto</a></span><span class="op" id="3356833">.</span><span class="ident" id="3356834">MIMEHeader</span><span class="op" id="3356844">(</span><span class="ident" id="3356845"><a href="/net/http/header.go.html#3356788">h</a></span><span class="op" id="3356846">)</span><span class="op" id="3356847">.</span><span class="ident" id="3356848">Add</span><span class="op" id="3356851">(</span><span class="ident" id="3356852"><a href="/net/http/header.go.html#3356802">key</a></span><span class="op" id="3356855">,</span>&nbsp;<span class="ident" id="3356857"><a href="/net/http/header.go.html#3356807">value</a></span><span class="op" id="3356862">)</span><br>
<span class="lineno">25</span><span class="op" id="3356864">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3356867">//&nbsp;Set&nbsp;sets&nbsp;the&nbsp;header&nbsp;entries&nbsp;associated&nbsp;with&nbsp;key&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3356921">//&nbsp;the&nbsp;single&nbsp;element&nbsp;value.&nbsp;&nbsp;It&nbsp;replaces&nbsp;any&nbsp;existing</span><br>
<span class="lineno"></span><span class="comment" id="3356976">//&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno">30</span><span class="keyword" id="3357007">func</span>&nbsp;<span class="op" id="3357012">(</span><span class="ident" id="3357013">h</span>&nbsp;<span class="ident" id="3357015"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="3357021">)</span>&nbsp;<span class="ident" id="3357023">Set</span><span class="op" id="3357026">(</span><span class="ident" id="3357027">key</span><span class="op" id="3357030">,</span>&nbsp;<span class="ident" id="3357032">value</span>&nbsp;<span class="builtintype" id="3357038">string</span><span class="op" id="3357044">)</span>&nbsp;<span class="op" id="3357046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3357049"><a href="/net/http/header.go.html#3356485">textproto</a></span><span class="op" id="3357058">.</span><span class="ident" id="3357059">MIMEHeader</span><span class="op" id="3357069">(</span><span class="ident" id="3357070"><a href="/net/http/header.go.html#3357013">h</a></span><span class="op" id="3357071">)</span><span class="op" id="3357072">.</span><span class="ident" id="3357073">Set</span><span class="op" id="3357076">(</span><span class="ident" id="3357077"><a href="/net/http/header.go.html#3357027">key</a></span><span class="op" id="3357080">,</span>&nbsp;<span class="ident" id="3357082"><a href="/net/http/header.go.html#3357032">value</a></span><span class="op" id="3357087">)</span><br>
<span class="lineno"></span><span class="op" id="3357089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3357092">//&nbsp;Get&nbsp;gets&nbsp;the&nbsp;first&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;given&nbsp;key.</span><br>
<span class="lineno">35</span><span class="comment" id="3357151">//&nbsp;If&nbsp;there&nbsp;are&nbsp;no&nbsp;values&nbsp;associated&nbsp;with&nbsp;the&nbsp;key,&nbsp;Get&nbsp;returns&nbsp;&#34;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3357218">//&nbsp;To&nbsp;access&nbsp;multiple&nbsp;values&nbsp;of&nbsp;a&nbsp;key,&nbsp;access&nbsp;the&nbsp;map&nbsp;directly</span><br>
<span class="lineno"></span><span class="comment" id="3357281">//&nbsp;with&nbsp;CanonicalHeaderKey.</span><br>
<span class="lineno"></span><span class="keyword" id="3357309">func</span>&nbsp;<span class="op" id="3357314">(</span><span class="ident" id="3357315">h</span>&nbsp;<span class="ident" id="3357317"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="3357323">)</span>&nbsp;<span class="ident" id="3357325">Get</span><span class="op" id="3357328">(</span><span class="ident" id="3357329">key</span>&nbsp;<span class="builtintype" id="3357333">string</span><span class="op" id="3357339">)</span>&nbsp;<span class="builtintype" id="3357341">string</span>&nbsp;<span class="op" id="3357348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357351">return</span>&nbsp;<span class="ident" id="3357358"><a href="/net/http/header.go.html#3356485">textproto</a></span><span class="op" id="3357367">.</span><span class="ident" id="3357368">MIMEHeader</span><span class="op" id="3357378">(</span><span class="ident" id="3357379"><a href="/net/http/header.go.html#3357315">h</a></span><span class="op" id="3357380">)</span><span class="op" id="3357381">.</span><span class="ident" id="3357382">Get</span><span class="op" id="3357385">(</span><span class="ident" id="3357386"><a href="/net/http/header.go.html#3357329">key</a></span><span class="op" id="3357389">)</span><br>
<span class="lineno">40</span><span class="op" id="3357391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3357394">//&nbsp;get&nbsp;is&nbsp;like&nbsp;Get,&nbsp;but&nbsp;key&nbsp;must&nbsp;already&nbsp;be&nbsp;in&nbsp;CanonicalHeaderKey&nbsp;form.</span><br>
<span class="lineno"></span><span class="keyword" id="3357466">func</span>&nbsp;<span class="op" id="3357471">(</span><span class="ident" id="3357472">h</span>&nbsp;<span class="ident" id="3357474"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="3357480">)</span>&nbsp;<span class="ident" id="3357482">get</span><span class="op" id="3357485">(</span><span class="ident" id="3357486">key</span>&nbsp;<span class="builtintype" id="3357490">string</span><span class="op" id="3357496">)</span>&nbsp;<span class="builtintype" id="3357498">string</span>&nbsp;<span class="op" id="3357505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357508">if</span>&nbsp;<span class="ident" id="3357511">v</span>&nbsp;<span class="op" id="3357513">:=</span>&nbsp;<span class="ident" id="3357516"><a href="/net/http/header.go.html#3357472">h</a></span><span class="op" id="3357517">[</span><span class="ident" id="3357518"><a href="/net/http/header.go.html#3357486">key</a></span><span class="op" id="3357521">]</span><span class="op" id="3357522">;</span>&nbsp;<span class="builtinfunc" id="3357524">len</span><span class="op" id="3357527">(</span><span class="ident" id="3357528"><a href="/net/http/header.go.html#3357511">v</a></span><span class="op" id="3357529">)</span>&nbsp;<span class="op" id="3357531">&gt;</span>&nbsp;<span class="num" id="3357533">0</span>&nbsp;<span class="op" id="3357535">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357539">return</span>&nbsp;<span class="ident" id="3357546"><a href="/net/http/header.go.html#3357511">v</a></span><span class="op" id="3357547">[</span><span class="num" id="3357548">0</span><span class="op" id="3357549">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3357552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357555">return</span>&nbsp;<span class="string" id="3357562">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3357565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="3357568">//&nbsp;Del&nbsp;deletes&nbsp;the&nbsp;values&nbsp;associated&nbsp;with&nbsp;key.</span><br>
<span class="lineno"></span><span class="keyword" id="3357615">func</span>&nbsp;<span class="op" id="3357620">(</span><span class="ident" id="3357621">h</span>&nbsp;<span class="ident" id="3357623"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="3357629">)</span>&nbsp;<span class="ident" id="3357631">Del</span><span class="op" id="3357634">(</span><span class="ident" id="3357635">key</span>&nbsp;<span class="builtintype" id="3357639">string</span><span class="op" id="3357645">)</span>&nbsp;<span class="op" id="3357647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3357650"><a href="/net/http/header.go.html#3356485">textproto</a></span><span class="op" id="3357659">.</span><span class="ident" id="3357660">MIMEHeader</span><span class="op" id="3357670">(</span><span class="ident" id="3357671"><a href="/net/http/header.go.html#3357621">h</a></span><span class="op" id="3357672">)</span><span class="op" id="3357673">.</span><span class="ident" id="3357674">Del</span><span class="op" id="3357677">(</span><span class="ident" id="3357678"><a href="/net/http/header.go.html#3357635">key</a></span><span class="op" id="3357681">)</span><br>
<span class="lineno"></span><span class="op" id="3357683">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">55</span><span class="comment" id="3357686">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;header&nbsp;in&nbsp;wire&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="3357727">func</span>&nbsp;<span class="op" id="3357732">(</span><span class="ident" id="3357733">h</span>&nbsp;<span class="ident" id="3357735"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="3357741">)</span>&nbsp;<span class="ident" id="3357743">Write</span><span class="op" id="3357748">(</span><span class="ident" id="3357749">w</span>&nbsp;<span class="ident" id="3357751"><a href="/net/http/header.go.html#3356479">io</a></span><span class="op" id="3357753">.</span><span class="ident" id="3357754">Writer</span><span class="op" id="3357760">)</span>&nbsp;<span class="builtintype" id="3357762">error</span>&nbsp;<span class="op" id="3357768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357771">return</span>&nbsp;<span class="ident" id="3357778"><a href="/net/http/header.go.html#3357733">h</a></span><span class="op" id="3357779">.</span><span class="ident" id="3357780">WriteSubset</span><span class="op" id="3357791">(</span><span class="ident" id="3357792"><a href="/net/http/header.go.html#3357749">w</a></span><span class="op" id="3357793">,</span>&nbsp;<span class="ident" id="3357795">nil</span><span class="op" id="3357798">)</span><br>
<span class="lineno"></span><span class="op" id="3357800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="3357803">func</span>&nbsp;<span class="op" id="3357808">(</span><span class="ident" id="3357809">h</span>&nbsp;<span class="ident" id="3357811"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="3357817">)</span>&nbsp;<span class="ident" id="3357819">clone</span><span class="op" id="3357824">(</span><span class="op" id="3357825">)</span>&nbsp;<span class="ident" id="3357827"><a href="/net/http/header.go.html#3356649">Header</a></span>&nbsp;<span class="op" id="3357834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3357837">h2</span>&nbsp;<span class="op" id="3357840">:=</span>&nbsp;<span class="builtinfunc" id="3357843">make</span><span class="op" id="3357847">(</span><span class="ident" id="3357848"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="3357854">,</span>&nbsp;<span class="builtinfunc" id="3357856">len</span><span class="op" id="3357859">(</span><span class="ident" id="3357860"><a href="/net/http/header.go.html#3357809">h</a></span><span class="op" id="3357861">)</span><span class="op" id="3357862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357865">for</span>&nbsp;<span class="ident" id="3357869">k</span><span class="op" id="3357870">,</span>&nbsp;<span class="ident" id="3357872">vv</span>&nbsp;<span class="op" id="3357875">:=</span>&nbsp;<span class="keyword" id="3357878">range</span>&nbsp;<span class="ident" id="3357884"><a href="/net/http/header.go.html#3357809">h</a></span>&nbsp;<span class="op" id="3357886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3357890">vv2</span>&nbsp;<span class="op" id="3357894">:=</span>&nbsp;<span class="builtinfunc" id="3357897">make</span><span class="op" id="3357901">(</span><span class="op" id="3357902">[</span><span class="op" id="3357903">]</span><span class="builtintype" id="3357904">string</span><span class="op" id="3357910">,</span>&nbsp;<span class="builtinfunc" id="3357912">len</span><span class="op" id="3357915">(</span><span class="ident" id="3357916"><a href="/net/http/header.go.html#3357872">vv</a></span><span class="op" id="3357918">)</span><span class="op" id="3357919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3357923">copy</span><span class="op" id="3357927">(</span><span class="ident" id="3357928"><a href="/net/http/header.go.html#3357890">vv2</a></span><span class="op" id="3357931">,</span>&nbsp;<span class="ident" id="3357933"><a href="/net/http/header.go.html#3357872">vv</a></span><span class="op" id="3357935">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3357939"><a href="/net/http/header.go.html#3357837">h2</a></span><span class="op" id="3357941">[</span><span class="ident" id="3357942"><a href="/net/http/header.go.html#3357869">k</a></span><span class="op" id="3357943">]</span>&nbsp;<span class="op" id="3357945">=</span>&nbsp;<span class="ident" id="3357947"><a href="/net/http/header.go.html#3357890">vv2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3357952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3357955">return</span>&nbsp;<span class="ident" id="3357962"><a href="/net/http/header.go.html#3357837">h2</a></span><br>
<span class="lineno"></span><span class="op" id="3357965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">70</span><span class="keyword" id="3357968">var</span>&nbsp;<span class="ident" id="3357972">timeFormats</span>&nbsp;<span class="op" id="3357984">=</span>&nbsp;<span class="op" id="3357986">[</span><span class="op" id="3357987">]</span><span class="builtintype" id="3357988">string</span><span class="op" id="3357994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3357997"><a href="/net/http/server.go.html#3414785">TimeFormat</a></span><span class="op" id="3358007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3358010"><a href="/net/http/header.go.html#3356529">time</a></span><span class="op" id="3358014">.</span><span class="ident" id="3358015">RFC850</span><span class="op" id="3358021">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3358024"><a href="/net/http/header.go.html#3356529">time</a></span><span class="op" id="3358028">.</span><span class="ident" id="3358029">ANSIC</span><span class="op" id="3358034">,</span><br>
<span class="lineno"></span><span class="op" id="3358036">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="3358039">//&nbsp;ParseTime&nbsp;parses&nbsp;a&nbsp;time&nbsp;header&nbsp;(such&nbsp;as&nbsp;the&nbsp;Date:&nbsp;header),</span><br>
<span class="lineno"></span><span class="comment" id="3358101">//&nbsp;trying&nbsp;each&nbsp;of&nbsp;the&nbsp;three&nbsp;formats&nbsp;allowed&nbsp;by&nbsp;HTTP/1.1:</span><br>
<span class="lineno"></span><span class="comment" id="3358158">//&nbsp;TimeFormat,&nbsp;time.RFC850,&nbsp;and&nbsp;time.ANSIC.</span><br>
<span class="lineno"></span><span class="keyword" id="3358202">func</span>&nbsp;<span class="ident" id="3358207">ParseTime</span><span class="op" id="3358216">(</span><span class="ident" id="3358217">text</span>&nbsp;<span class="builtintype" id="3358222">string</span><span class="op" id="3358228">)</span>&nbsp;<span class="op" id="3358230">(</span><span class="ident" id="3358231">t</span>&nbsp;<span class="ident" id="3358233"><a href="/net/http/header.go.html#3356529">time</a></span><span class="op" id="3358237">.</span><span class="ident" id="3358238">Time</span><span class="op" id="3358242">,</span>&nbsp;<span class="ident" id="3358244">err</span>&nbsp;<span class="builtintype" id="3358248">error</span><span class="op" id="3358253">)</span>&nbsp;<span class="op" id="3358255">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3358258">for</span>&nbsp;<span class="ident" id="3358262">_</span><span class="op" id="3358263">,</span>&nbsp;<span class="ident" id="3358265">layout</span>&nbsp;<span class="op" id="3358272">:=</span>&nbsp;<span class="keyword" id="3358275">range</span>&nbsp;<span class="ident" id="3358281"><a href="/net/http/header.go.html#3357972">timeFormats</a></span>&nbsp;<span class="op" id="3358293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3358297"><a href="/net/http/header.go.html#3358231">t</a></span><span class="op" id="3358298">,</span>&nbsp;<span class="ident" id="3358300"><a href="/net/http/header.go.html#3358244">err</a></span>&nbsp;<span class="op" id="3358304">=</span>&nbsp;<span class="ident" id="3358306"><a href="/net/http/header.go.html#3356529">time</a></span><span class="op" id="3358310">.</span><span class="ident" id="3358311">Parse</span><span class="op" id="3358316">(</span><span class="ident" id="3358317"><a href="/net/http/header.go.html#3358265">layout</a></span><span class="op" id="3358323">,</span>&nbsp;<span class="ident" id="3358325"><a href="/net/http/header.go.html#3358217">text</a></span><span class="op" id="3358329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3358333">if</span>&nbsp;<span class="ident" id="3358336"><a href="/net/http/header.go.html#3358244">err</a></span>&nbsp;<span class="op" id="3358340">==</span>&nbsp;<span class="ident" id="3358343">nil</span>&nbsp;<span class="op" id="3358347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3358352">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3358361">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3358364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3358367">return</span><br>
<span class="lineno"></span><span class="op" id="3358374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3358377">var</span>&nbsp;<span class="ident" id="3358381">headerNewlineToSpace</span>&nbsp;<span class="op" id="3358402">=</span>&nbsp;<span class="ident" id="3358404"><a href="/net/http/header.go.html#3356510">strings</a></span><span class="op" id="3358411">.</span><span class="ident" id="3358412">NewReplacer</span><span class="op" id="3358423">(</span><span class="string" id="3358424">&#34;\n&#34;</span><span class="op" id="3358428">,</span>&nbsp;<span class="string" id="3358430">&#34;&nbsp;&#34;</span><span class="op" id="3358433">,</span>&nbsp;<span class="string" id="3358435">&#34;\r&#34;</span><span class="op" id="3358439">,</span>&nbsp;<span class="string" id="3358441">&#34;&nbsp;&#34;</span><span class="op" id="3358444">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="keyword" id="3358447">type</span>&nbsp;<span class="ident" id="3358452">writeStringer</span>&nbsp;<span class="keyword" id="3358466">interface</span>&nbsp;<span class="op" id="3358476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3358479">WriteString</span><span class="op" id="3358490">(</span><span class="builtintype" id="3358491">string</span><span class="op" id="3358497">)</span>&nbsp;<span class="op" id="3358499">(</span><span class="builtintype" id="3358500">int</span><span class="op" id="3358503">,</span>&nbsp;<span class="builtintype" id="3358505">error</span><span class="op" id="3358510">)</span><br>
<span class="lineno"></span><span class="op" id="3358512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="3358515">//&nbsp;stringWriter&nbsp;implements&nbsp;WriteString&nbsp;on&nbsp;a&nbsp;Writer.</span><br>
<span class="lineno"></span><span class="keyword" id="3358567">type</span>&nbsp;<span class="ident" id="3358572">stringWriter</span>&nbsp;<span class="keyword" id="3358585">struct</span>&nbsp;<span class="op" id="3358592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3358595">w</span>&nbsp;<span class="ident" id="3358597"><a href="/net/http/header.go.html#3356479">io</a></span><span class="op" id="3358599">.</span><span class="ident" id="3358600">Writer</span><br>
<span class="lineno"></span><span class="op" id="3358607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="3358610">func</span>&nbsp;<span class="op" id="3358615">(</span><span class="ident" id="3358616">w</span>&nbsp;<span class="ident" id="3358618"><a href="/net/http/header.go.html#3358572">stringWriter</a></span><span class="op" id="3358630">)</span>&nbsp;<span class="ident" id="3358632">WriteString</span><span class="op" id="3358643">(</span><span class="ident" id="3358644">s</span>&nbsp;<span class="builtintype" id="3358646">string</span><span class="op" id="3358652">)</span>&nbsp;<span class="op" id="3358654">(</span><span class="ident" id="3358655">n</span>&nbsp;<span class="builtintype" id="3358657">int</span><span class="op" id="3358660">,</span>&nbsp;<span class="ident" id="3358662">err</span>&nbsp;<span class="builtintype" id="3358666">error</span><span class="op" id="3358671">)</span>&nbsp;<span class="op" id="3358673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3358676">return</span>&nbsp;<span class="ident" id="3358683"><a href="/net/http/header.go.html#3358616">w</a></span><span class="op" id="3358684">.</span><span class="ident" id="3358685">w</span><span class="op" id="3358686">.</span><span class="ident" id="3358687">Write</span><span class="op" id="3358692">(</span><span class="op" id="3358693">[</span><span class="op" id="3358694">]</span><span class="builtintype" id="3358695">byte</span><span class="op" id="3358699">(</span><span class="ident" id="3358700"><a href="/net/http/header.go.html#3358644">s</a></span><span class="op" id="3358701">)</span><span class="op" id="3358702">)</span><br>
<span class="lineno"></span><span class="op" id="3358704">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3358707">type</span>&nbsp;<span class="ident" id="3358712">keyValues</span>&nbsp;<span class="keyword" id="3358722">struct</span>&nbsp;<span class="op" id="3358729">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3358732">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3358739">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3358747">values</span>&nbsp;<span class="op" id="3358754">[</span><span class="op" id="3358755">]</span><span class="builtintype" id="3358756">string</span><br>
<span class="lineno"></span><span class="op" id="3358763">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3358766">//&nbsp;A&nbsp;headerSorter&nbsp;implements&nbsp;sort.Interface&nbsp;by&nbsp;sorting&nbsp;a&nbsp;[]keyValues</span><br>
<span class="lineno">110</span><span class="comment" id="3358835">//&nbsp;by&nbsp;key.&nbsp;It&#39;s&nbsp;used&nbsp;as&nbsp;a&nbsp;pointer,&nbsp;so&nbsp;it&nbsp;can&nbsp;fit&nbsp;in&nbsp;a&nbsp;sort.Interface</span><br>
<span class="lineno"></span><span class="comment" id="3358904">//&nbsp;interface&nbsp;value&nbsp;without&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="3358943">type</span>&nbsp;<span class="ident" id="3358948">headerSorter</span>&nbsp;<span class="keyword" id="3358961">struct</span>&nbsp;<span class="op" id="3358968">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3358971">kvs</span>&nbsp;<span class="op" id="3358975">[</span><span class="op" id="3358976">]</span><span class="ident" id="3358977"><a href="/net/http/header.go.html#3358712">keyValues</a></span><br>
<span class="lineno"></span><span class="op" id="3358987">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="keyword" id="3358990">func</span>&nbsp;<span class="op" id="3358995">(</span><span class="ident" id="3358996">s</span>&nbsp;<span class="op" id="3358998">*</span><span class="ident" id="3358999"><a href="/net/http/header.go.html#3358948">headerSorter</a></span><span class="op" id="3359011">)</span>&nbsp;<span class="ident" id="3359013">Len</span><span class="op" id="3359016">(</span><span class="op" id="3359017">)</span>&nbsp;<span class="builtintype" id="3359019">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359033">{</span>&nbsp;<span class="keyword" id="3359035">return</span>&nbsp;<span class="builtinfunc" id="3359042">len</span><span class="op" id="3359045">(</span><span class="ident" id="3359046"><a href="/net/http/header.go.html#3358996">s</a></span><span class="op" id="3359047">.</span><span class="ident" id="3359048">kvs</span><span class="op" id="3359051">)</span>&nbsp;<span class="op" id="3359053">}</span><br>
<span class="lineno"></span><span class="keyword" id="3359055">func</span>&nbsp;<span class="op" id="3359060">(</span><span class="ident" id="3359061">s</span>&nbsp;<span class="op" id="3359063">*</span><span class="ident" id="3359064"><a href="/net/http/header.go.html#3358948">headerSorter</a></span><span class="op" id="3359076">)</span>&nbsp;<span class="ident" id="3359078">Swap</span><span class="op" id="3359082">(</span><span class="ident" id="3359083">i</span><span class="op" id="3359084">,</span>&nbsp;<span class="ident" id="3359086">j</span>&nbsp;<span class="builtintype" id="3359088">int</span><span class="op" id="3359091">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3359098">{</span>&nbsp;<span class="ident" id="3359100"><a href="/net/http/header.go.html#3359061">s</a></span><span class="op" id="3359101">.</span><span class="ident" id="3359102">kvs</span><span class="op" id="3359105">[</span><span class="ident" id="3359106"><a href="/net/http/header.go.html#3359083">i</a></span><span class="op" id="3359107">]</span><span class="op" id="3359108">,</span>&nbsp;<span class="ident" id="3359110"><a href="/net/http/header.go.html#3359061">s</a></span><span class="op" id="3359111">.</span><span class="ident" id="3359112">kvs</span><span class="op" id="3359115">[</span><span class="ident" id="3359116"><a href="/net/http/header.go.html#3359086">j</a></span><span class="op" id="3359117">]</span>&nbsp;<span class="op" id="3359119">=</span>&nbsp;<span class="ident" id="3359121"><a href="/net/http/header.go.html#3359061">s</a></span><span class="op" id="3359122">.</span><span class="ident" id="3359123">kvs</span><span class="op" id="3359126">[</span><span class="ident" id="3359127"><a href="/net/http/header.go.html#3359086">j</a></span><span class="op" id="3359128">]</span><span class="op" id="3359129">,</span>&nbsp;<span class="ident" id="3359131"><a href="/net/http/header.go.html#3359061">s</a></span><span class="op" id="3359132">.</span><span class="ident" id="3359133">kvs</span><span class="op" id="3359136">[</span><span class="ident" id="3359137"><a href="/net/http/header.go.html#3359083">i</a></span><span class="op" id="3359138">]</span>&nbsp;<span class="op" id="3359140">}</span><br>
<span class="lineno"></span><span class="keyword" id="3359142">func</span>&nbsp;<span class="op" id="3359147">(</span><span class="ident" id="3359148">s</span>&nbsp;<span class="op" id="3359150">*</span><span class="ident" id="3359151"><a href="/net/http/header.go.html#3358948">headerSorter</a></span><span class="op" id="3359163">)</span>&nbsp;<span class="ident" id="3359165">Less</span><span class="op" id="3359169">(</span><span class="ident" id="3359170">i</span><span class="op" id="3359171">,</span>&nbsp;<span class="ident" id="3359173">j</span>&nbsp;<span class="builtintype" id="3359175">int</span><span class="op" id="3359178">)</span>&nbsp;<span class="builtintype" id="3359180">bool</span>&nbsp;<span class="op" id="3359185">{</span>&nbsp;<span class="keyword" id="3359187">return</span>&nbsp;<span class="ident" id="3359194"><a href="/net/http/header.go.html#3359148">s</a></span><span class="op" id="3359195">.</span><span class="ident" id="3359196">kvs</span><span class="op" id="3359199">[</span><span class="ident" id="3359200"><a href="/net/http/header.go.html#3359170">i</a></span><span class="op" id="3359201">]</span><span class="op" id="3359202">.</span><span class="ident" id="3359203">key</span>&nbsp;<span class="op" id="3359207">&lt;</span>&nbsp;<span class="ident" id="3359209"><a href="/net/http/header.go.html#3359148">s</a></span><span class="op" id="3359210">.</span><span class="ident" id="3359211">kvs</span><span class="op" id="3359214">[</span><span class="ident" id="3359215"><a href="/net/http/header.go.html#3359173">j</a></span><span class="op" id="3359216">]</span><span class="op" id="3359217">.</span><span class="ident" id="3359218">key</span>&nbsp;<span class="op" id="3359222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="3359225">var</span>&nbsp;<span class="ident" id="3359229">headerSorterPool</span>&nbsp;<span class="op" id="3359246">=</span>&nbsp;<span class="ident" id="3359248"><a href="/net/http/header.go.html#3356521">sync</a></span><span class="op" id="3359252">.</span><span class="ident" id="3359253">Pool</span><span class="op" id="3359257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359260">New</span><span class="op" id="3359263">:</span>&nbsp;<span class="keyword" id="3359265">func</span><span class="op" id="3359269">(</span><span class="op" id="3359270">)</span>&nbsp;<span class="keyword" id="3359272">interface</span><span class="op" id="3359281">{</span><span class="op" id="3359282">}</span>&nbsp;<span class="op" id="3359284">{</span>&nbsp;<span class="keyword" id="3359286">return</span>&nbsp;<span class="builtinfunc" id="3359293">new</span><span class="op" id="3359296">(</span><span class="ident" id="3359297"><a href="/net/http/header.go.html#3358948">headerSorter</a></span><span class="op" id="3359309">)</span>&nbsp;<span class="op" id="3359311">}</span><span class="op" id="3359312">,</span><br>
<span class="lineno"></span><span class="op" id="3359314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3359317">//&nbsp;sortedKeyValues&nbsp;returns&nbsp;h&#39;s&nbsp;keys&nbsp;sorted&nbsp;in&nbsp;the&nbsp;returned&nbsp;kvs</span><br>
<span class="lineno">125</span><span class="comment" id="3359380">//&nbsp;slice.&nbsp;The&nbsp;headerSorter&nbsp;used&nbsp;to&nbsp;sort&nbsp;is&nbsp;also&nbsp;returned,&nbsp;for&nbsp;possible</span><br>
<span class="lineno"></span><span class="comment" id="3359451">//&nbsp;return&nbsp;to&nbsp;headerSorterCache.</span><br>
<span class="lineno"></span><span class="keyword" id="3359483">func</span>&nbsp;<span class="op" id="3359488">(</span><span class="ident" id="3359489">h</span>&nbsp;<span class="ident" id="3359491"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="3359497">)</span>&nbsp;<span class="ident" id="3359499">sortedKeyValues</span><span class="op" id="3359514">(</span><span class="ident" id="3359515">exclude</span>&nbsp;<span class="keyword" id="3359523">map</span><span class="op" id="3359526">[</span><span class="builtintype" id="3359527">string</span><span class="op" id="3359533">]</span><span class="builtintype" id="3359534">bool</span><span class="op" id="3359538">)</span>&nbsp;<span class="op" id="3359540">(</span><span class="ident" id="3359541">kvs</span>&nbsp;<span class="op" id="3359545">[</span><span class="op" id="3359546">]</span><span class="ident" id="3359547"><a href="/net/http/header.go.html#3358712">keyValues</a></span><span class="op" id="3359556">,</span>&nbsp;<span class="ident" id="3359558">hs</span>&nbsp;<span class="op" id="3359561">*</span><span class="ident" id="3359562"><a href="/net/http/header.go.html#3358948">headerSorter</a></span><span class="op" id="3359574">)</span>&nbsp;<span class="op" id="3359576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359579"><a href="/net/http/header.go.html#3359558">hs</a></span>&nbsp;<span class="op" id="3359582">=</span>&nbsp;<span class="ident" id="3359584"><a href="/net/http/header.go.html#3359229">headerSorterPool</a></span><span class="op" id="3359600">.</span><span class="ident" id="3359601">Get</span><span class="op" id="3359604">(</span><span class="op" id="3359605">)</span><span class="op" id="3359606">.</span><span class="op" id="3359607">(</span><span class="op" id="3359608">*</span><span class="ident" id="3359609"><a href="/net/http/header.go.html#3358948">headerSorter</a></span><span class="op" id="3359621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3359624">if</span>&nbsp;<span class="builtinfunc" id="3359627">cap</span><span class="op" id="3359630">(</span><span class="ident" id="3359631"><a href="/net/http/header.go.html#3359558">hs</a></span><span class="op" id="3359633">.</span><span class="ident" id="3359634">kvs</span><span class="op" id="3359637">)</span>&nbsp;<span class="op" id="3359639">&lt;</span>&nbsp;<span class="builtinfunc" id="3359641">len</span><span class="op" id="3359644">(</span><span class="ident" id="3359645"><a href="/net/http/header.go.html#3359489">h</a></span><span class="op" id="3359646">)</span>&nbsp;<span class="op" id="3359648">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359652"><a href="/net/http/header.go.html#3359558">hs</a></span><span class="op" id="3359654">.</span><span class="ident" id="3359655">kvs</span>&nbsp;<span class="op" id="3359659">=</span>&nbsp;<span class="builtinfunc" id="3359661">make</span><span class="op" id="3359665">(</span><span class="op" id="3359666">[</span><span class="op" id="3359667">]</span><span class="ident" id="3359668"><a href="/net/http/header.go.html#3358712">keyValues</a></span><span class="op" id="3359677">,</span>&nbsp;<span class="num" id="3359679">0</span><span class="op" id="3359680">,</span>&nbsp;<span class="builtinfunc" id="3359682">len</span><span class="op" id="3359685">(</span><span class="ident" id="3359686"><a href="/net/http/header.go.html#3359489">h</a></span><span class="op" id="3359687">)</span><span class="op" id="3359688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3359691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359694"><a href="/net/http/header.go.html#3359541">kvs</a></span>&nbsp;<span class="op" id="3359698">=</span>&nbsp;<span class="ident" id="3359700"><a href="/net/http/header.go.html#3359558">hs</a></span><span class="op" id="3359702">.</span><span class="ident" id="3359703">kvs</span><span class="op" id="3359706">[</span><span class="op" id="3359707">:</span><span class="num" id="3359708">0</span><span class="op" id="3359709">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3359712">for</span>&nbsp;<span class="ident" id="3359716">k</span><span class="op" id="3359717">,</span>&nbsp;<span class="ident" id="3359719">vv</span>&nbsp;<span class="op" id="3359722">:=</span>&nbsp;<span class="keyword" id="3359725">range</span>&nbsp;<span class="ident" id="3359731"><a href="/net/http/header.go.html#3359489">h</a></span>&nbsp;<span class="op" id="3359733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3359737">if</span>&nbsp;<span class="op" id="3359740">!</span><span class="ident" id="3359741"><a href="/net/http/header.go.html#3359515">exclude</a></span><span class="op" id="3359748">[</span><span class="ident" id="3359749"><a href="/net/http/header.go.html#3359716">k</a></span><span class="op" id="3359750">]</span>&nbsp;<span class="op" id="3359752">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359757"><a href="/net/http/header.go.html#3359541">kvs</a></span>&nbsp;<span class="op" id="3359761">=</span>&nbsp;<span class="builtinfunc" id="3359763">append</span><span class="op" id="3359769">(</span><span class="ident" id="3359770"><a href="/net/http/header.go.html#3359541">kvs</a></span><span class="op" id="3359773">,</span>&nbsp;<span class="ident" id="3359775"><a href="/net/http/header.go.html#3358712">keyValues</a></span><span class="op" id="3359784">{</span><span class="ident" id="3359785"><a href="/net/http/header.go.html#3359716">k</a></span><span class="op" id="3359786">,</span>&nbsp;<span class="ident" id="3359788"><a href="/net/http/header.go.html#3359719">vv</a></span><span class="op" id="3359790">}</span><span class="op" id="3359791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3359795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3359798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359801"><a href="/net/http/header.go.html#3359558">hs</a></span><span class="op" id="3359803">.</span><span class="ident" id="3359804">kvs</span>&nbsp;<span class="op" id="3359808">=</span>&nbsp;<span class="ident" id="3359810"><a href="/net/http/header.go.html#3359541">kvs</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3359815"><a href="/net/http/header.go.html#3356502">sort</a></span><span class="op" id="3359819">.</span><span class="ident" id="3359820">Sort</span><span class="op" id="3359824">(</span><span class="ident" id="3359825"><a href="/net/http/header.go.html#3359558">hs</a></span><span class="op" id="3359827">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3359830">return</span>&nbsp;<span class="ident" id="3359837"><a href="/net/http/header.go.html#3359541">kvs</a></span><span class="op" id="3359840">,</span>&nbsp;<span class="ident" id="3359842"><a href="/net/http/header.go.html#3359558">hs</a></span><br>
<span class="lineno"></span><span class="op" id="3359845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3359848">//&nbsp;WriteSubset&nbsp;writes&nbsp;a&nbsp;header&nbsp;in&nbsp;wire&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="3359895">//&nbsp;If&nbsp;exclude&nbsp;is&nbsp;not&nbsp;nil,&nbsp;keys&nbsp;where&nbsp;exclude[key]&nbsp;==&nbsp;true&nbsp;are&nbsp;not&nbsp;written.</span><br>
<span class="lineno">145</span><span class="keyword" id="3359970">func</span>&nbsp;<span class="op" id="3359975">(</span><span class="ident" id="3359976">h</span>&nbsp;<span class="ident" id="3359978"><a href="/net/http/header.go.html#3356649">Header</a></span><span class="op" id="3359984">)</span>&nbsp;<span class="ident" id="3359986">WriteSubset</span><span class="op" id="3359997">(</span><span class="ident" id="3359998">w</span>&nbsp;<span class="ident" id="3360000"><a href="/net/http/header.go.html#3356479">io</a></span><span class="op" id="3360002">.</span><span class="ident" id="3360003">Writer</span><span class="op" id="3360009">,</span>&nbsp;<span class="ident" id="3360011">exclude</span>&nbsp;<span class="keyword" id="3360019">map</span><span class="op" id="3360022">[</span><span class="builtintype" id="3360023">string</span><span class="op" id="3360029">]</span><span class="builtintype" id="3360030">bool</span><span class="op" id="3360034">)</span>&nbsp;<span class="builtintype" id="3360036">error</span>&nbsp;<span class="op" id="3360042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3360045">ws</span><span class="op" id="3360047">,</span>&nbsp;<span class="ident" id="3360049">ok</span>&nbsp;<span class="op" id="3360052">:=</span>&nbsp;<span class="ident" id="3360055"><a href="/net/http/header.go.html#3359998">w</a></span><span class="op" id="3360056">.</span><span class="op" id="3360057">(</span><span class="ident" id="3360058"><a href="/net/http/header.go.html#3358452">writeStringer</a></span><span class="op" id="3360071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3360074">if</span>&nbsp;<span class="op" id="3360077">!</span><span class="ident" id="3360078"><a href="/net/http/header.go.html#3360049">ok</a></span>&nbsp;<span class="op" id="3360081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3360085"><a href="/net/http/header.go.html#3360045">ws</a></span>&nbsp;<span class="op" id="3360088">=</span>&nbsp;<span class="ident" id="3360090"><a href="/net/http/header.go.html#3358572">stringWriter</a></span><span class="op" id="3360102">{</span><span class="ident" id="3360103"><a href="/net/http/header.go.html#3359998">w</a></span><span class="op" id="3360104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3360107">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3360110">kvs</span><span class="op" id="3360113">,</span>&nbsp;<span class="ident" id="3360115">sorter</span>&nbsp;<span class="op" id="3360122">:=</span>&nbsp;<span class="ident" id="3360125"><a href="/net/http/header.go.html#3359976">h</a></span><span class="op" id="3360126">.</span><span class="ident" id="3360127">sortedKeyValues</span><span class="op" id="3360142">(</span><span class="ident" id="3360143"><a href="/net/http/header.go.html#3360011">exclude</a></span><span class="op" id="3360150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3360153">for</span>&nbsp;<span class="ident" id="3360157">_</span><span class="op" id="3360158">,</span>&nbsp;<span class="ident" id="3360160">kv</span>&nbsp;<span class="op" id="3360163">:=</span>&nbsp;<span class="keyword" id="3360166">range</span>&nbsp;<span class="ident" id="3360172"><a href="/net/http/header.go.html#3360110">kvs</a></span>&nbsp;<span class="op" id="3360176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3360180">for</span>&nbsp;<span class="ident" id="3360184">_</span><span class="op" id="3360185">,</span>&nbsp;<span class="ident" id="3360187">v</span>&nbsp;<span class="op" id="3360189">:=</span>&nbsp;<span class="keyword" id="3360192">range</span>&nbsp;<span class="ident" id="3360198"><a href="/net/http/header.go.html#3360160">kv</a></span><span class="op" id="3360200">.</span><span class="ident" id="3360201">values</span>&nbsp;<span class="op" id="3360208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3360213"><a href="/net/http/header.go.html#3360187">v</a></span>&nbsp;<span class="op" id="3360215">=</span>&nbsp;<span class="ident" id="3360217"><a href="/net/http/header.go.html#3358381">headerNewlineToSpace</a></span><span class="op" id="3360237">.</span><span class="ident" id="3360238">Replace</span><span class="op" id="3360245">(</span><span class="ident" id="3360246"><a href="/net/http/header.go.html#3360187">v</a></span><span class="op" id="3360247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3360252"><a href="/net/http/header.go.html#3360187">v</a></span>&nbsp;<span class="op" id="3360254">=</span>&nbsp;<span class="ident" id="3360256"><a href="/net/http/header.go.html#3356485">textproto</a></span><span class="op" id="3360265">.</span><span class="ident" id="3360266">TrimString</span><span class="op" id="3360276">(</span><span class="ident" id="3360277"><a href="/net/http/header.go.html#3360187">v</a></span><span class="op" id="3360278">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3360283">for</span>&nbsp;<span class="ident" id="3360287">_</span><span class="op" id="3360288">,</span>&nbsp;<span class="ident" id="3360290">s</span>&nbsp;<span class="op" id="3360292">:=</span>&nbsp;<span class="keyword" id="3360295">range</span>&nbsp;<span class="op" id="3360301">[</span><span class="op" id="3360302">]</span><span class="builtintype" id="3360303">string</span><span class="op" id="3360309">{</span><span class="ident" id="3360310"><a href="/net/http/header.go.html#3360160">kv</a></span><span class="op" id="3360312">.</span><span class="ident" id="3360313">key</span><span class="op" id="3360316">,</span>&nbsp;<span class="string" id="3360318">&#34;:&nbsp;&#34;</span><span class="op" id="3360322">,</span>&nbsp;<span class="ident" id="3360324"><a href="/net/http/header.go.html#3360187">v</a></span><span class="op" id="3360325">,</span>&nbsp;<span class="string" id="3360327">&#34;\r\n&#34;</span><span class="op" id="3360333">}</span>&nbsp;<span class="op" id="3360335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3360341">if</span>&nbsp;<span class="ident" id="3360344">_</span><span class="op" id="3360345">,</span>&nbsp;<span class="ident" id="3360347">err</span>&nbsp;<span class="op" id="3360351">:=</span>&nbsp;<span class="ident" id="3360354"><a href="/net/http/header.go.html#3360045">ws</a></span><span class="op" id="3360356">.</span><span class="ident" id="3360357">WriteString</span><span class="op" id="3360368">(</span><span class="ident" id="3360369"><a href="/net/http/header.go.html#3360290">s</a></span><span class="op" id="3360370">)</span><span class="op" id="3360371">;</span>&nbsp;<span class="ident" id="3360373"><a href="/net/http/header.go.html#3360347">err</a></span>&nbsp;<span class="op" id="3360377">!=</span>&nbsp;<span class="ident" id="3360380">nil</span>&nbsp;<span class="op" id="3360384">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3360391">return</span>&nbsp;<span class="ident" id="3360398"><a href="/net/http/header.go.html#3360347">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3360406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3360411">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3360415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3360418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3360421"><a href="/net/http/header.go.html#3359229">headerSorterPool</a></span><span class="op" id="3360437">.</span><span class="ident" id="3360438">Put</span><span class="op" id="3360441">(</span><span class="ident" id="3360442"><a href="/net/http/header.go.html#3360115">sorter</a></span><span class="op" id="3360448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3360451">return</span>&nbsp;<span class="ident" id="3360458">nil</span><br>
<span class="lineno"></span><span class="op" id="3360462">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="comment" id="3360465">//&nbsp;CanonicalHeaderKey&nbsp;returns&nbsp;the&nbsp;canonical&nbsp;format&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3360523">//&nbsp;header&nbsp;key&nbsp;s.&nbsp;&nbsp;The&nbsp;canonicalization&nbsp;converts&nbsp;the&nbsp;first</span><br>
<span class="lineno"></span><span class="comment" id="3360581">//&nbsp;letter&nbsp;and&nbsp;any&nbsp;letter&nbsp;following&nbsp;a&nbsp;hyphen&nbsp;to&nbsp;upper&nbsp;case;</span><br>
<span class="lineno"></span><span class="comment" id="3360640">//&nbsp;the&nbsp;rest&nbsp;are&nbsp;converted&nbsp;to&nbsp;lowercase.&nbsp;&nbsp;For&nbsp;example,&nbsp;the</span><br>
<span class="lineno">170</span><span class="comment" id="3360698">//&nbsp;canonical&nbsp;key&nbsp;for&nbsp;&#34;accept-encoding&#34;&nbsp;is&nbsp;&#34;Accept-Encoding&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3360759">func</span>&nbsp;<span class="ident" id="3360764">CanonicalHeaderKey</span><span class="op" id="3360782">(</span><span class="ident" id="3360783">s</span>&nbsp;<span class="builtintype" id="3360785">string</span><span class="op" id="3360791">)</span>&nbsp;<span class="builtintype" id="3360793">string</span>&nbsp;<span class="op" id="3360800">{</span>&nbsp;<span class="keyword" id="3360802">return</span>&nbsp;<span class="ident" id="3360809"><a href="/net/http/header.go.html#3356485">textproto</a></span><span class="op" id="3360818">.</span><span class="ident" id="3360819">CanonicalMIMEHeaderKey</span><span class="op" id="3360841">(</span><span class="ident" id="3360842"><a href="/net/http/header.go.html#3360783">s</a></span><span class="op" id="3360843">)</span>&nbsp;<span class="op" id="3360845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3360848">//&nbsp;hasToken&nbsp;reports&nbsp;whether&nbsp;token&nbsp;appears&nbsp;with&nbsp;v,&nbsp;ASCII</span><br>
<span class="lineno"></span><span class="comment" id="3360904">//&nbsp;case-insensitive,&nbsp;with&nbsp;space&nbsp;or&nbsp;comma&nbsp;boundaries.</span><br>
<span class="lineno">175</span><span class="comment" id="3360957">//&nbsp;token&nbsp;must&nbsp;be&nbsp;all&nbsp;lowercase.</span><br>
<span class="lineno"></span><span class="comment" id="3360989">//&nbsp;v&nbsp;may&nbsp;contain&nbsp;mixed&nbsp;cased.</span><br>
<span class="lineno"></span><span class="keyword" id="3361019">func</span>&nbsp;<span class="ident" id="3361024">hasToken</span><span class="op" id="3361032">(</span><span class="ident" id="3361033">v</span><span class="op" id="3361034">,</span>&nbsp;<span class="ident" id="3361036">token</span>&nbsp;<span class="builtintype" id="3361042">string</span><span class="op" id="3361048">)</span>&nbsp;<span class="builtintype" id="3361050">bool</span>&nbsp;<span class="op" id="3361055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361058">if</span>&nbsp;<span class="builtinfunc" id="3361061">len</span><span class="op" id="3361064">(</span><span class="ident" id="3361065"><a href="/net/http/header.go.html#3361036">token</a></span><span class="op" id="3361070">)</span>&nbsp;<span class="op" id="3361072">&gt;</span>&nbsp;<span class="builtinfunc" id="3361074">len</span><span class="op" id="3361077">(</span><span class="ident" id="3361078"><a href="/net/http/header.go.html#3361033">v</a></span><span class="op" id="3361079">)</span>&nbsp;<span class="op" id="3361081">||</span>&nbsp;<span class="ident" id="3361084"><a href="/net/http/header.go.html#3361036">token</a></span>&nbsp;<span class="op" id="3361090">==</span>&nbsp;<span class="string" id="3361093">&#34;&#34;</span>&nbsp;<span class="op" id="3361096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361100">return</span>&nbsp;<span class="builtintype" id="3361107">false</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361117">if</span>&nbsp;<span class="ident" id="3361120"><a href="/net/http/header.go.html#3361033">v</a></span>&nbsp;<span class="op" id="3361122">==</span>&nbsp;<span class="ident" id="3361125"><a href="/net/http/header.go.html#3361036">token</a></span>&nbsp;<span class="op" id="3361131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361135">return</span>&nbsp;<span class="builtintype" id="3361142">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361151">for</span>&nbsp;<span class="ident" id="3361155">sp</span>&nbsp;<span class="op" id="3361158">:=</span>&nbsp;<span class="num" id="3361161">0</span><span class="op" id="3361162">;</span>&nbsp;<span class="ident" id="3361164"><a href="/net/http/header.go.html#3361155">sp</a></span>&nbsp;<span class="op" id="3361167">&lt;=</span>&nbsp;<span class="builtinfunc" id="3361170">len</span><span class="op" id="3361173">(</span><span class="ident" id="3361174"><a href="/net/http/header.go.html#3361033">v</a></span><span class="op" id="3361175">)</span><span class="op" id="3361176">-</span><span class="builtinfunc" id="3361177">len</span><span class="op" id="3361180">(</span><span class="ident" id="3361181"><a href="/net/http/header.go.html#3361036">token</a></span><span class="op" id="3361186">)</span><span class="op" id="3361187">;</span>&nbsp;<span class="ident" id="3361189"><a href="/net/http/header.go.html#3361155">sp</a></span><span class="op" id="3361191">++</span>&nbsp;<span class="op" id="3361194">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3361198">//&nbsp;Check&nbsp;that&nbsp;first&nbsp;character&nbsp;is&nbsp;good.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3361239">//&nbsp;The&nbsp;token&nbsp;is&nbsp;ASCII,&nbsp;so&nbsp;checking&nbsp;only&nbsp;a&nbsp;single&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3361295">//&nbsp;is&nbsp;sufficient.&nbsp;&nbsp;We&nbsp;skip&nbsp;this&nbsp;potential&nbsp;starting</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3361348">//&nbsp;position&nbsp;if&nbsp;both&nbsp;the&nbsp;first&nbsp;byte&nbsp;and&nbsp;its&nbsp;potential</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3361403">//&nbsp;ASCII&nbsp;uppercase&nbsp;equivalent&nbsp;(b|0x20)&nbsp;don&#39;t&nbsp;match.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3361457">//&nbsp;False&nbsp;positives&nbsp;(&#39;^&#39;&nbsp;=&gt;&nbsp;&#39;~&#39;)&nbsp;are&nbsp;caught&nbsp;by&nbsp;EqualFold.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361516">if</span>&nbsp;<span class="ident" id="3361519">b</span>&nbsp;<span class="op" id="3361521">:=</span>&nbsp;<span class="ident" id="3361524"><a href="/net/http/header.go.html#3361033">v</a></span><span class="op" id="3361525">[</span><span class="ident" id="3361526"><a href="/net/http/header.go.html#3361155">sp</a></span><span class="op" id="3361528">]</span><span class="op" id="3361529">;</span>&nbsp;<span class="ident" id="3361531"><a href="/net/http/header.go.html#3361519">b</a></span>&nbsp;<span class="op" id="3361533">!=</span>&nbsp;<span class="ident" id="3361536"><a href="/net/http/header.go.html#3361036">token</a></span><span class="op" id="3361541">[</span><span class="num" id="3361542">0</span><span class="op" id="3361543">]</span>&nbsp;<span class="op" id="3361545">&amp;&amp;</span>&nbsp;<span class="ident" id="3361548"><a href="/net/http/header.go.html#3361519">b</a></span><span class="op" id="3361549">|</span><span class="num" id="3361550">0x20</span>&nbsp;<span class="op" id="3361555">!=</span>&nbsp;<span class="ident" id="3361558"><a href="/net/http/header.go.html#3361036">token</a></span><span class="op" id="3361563">[</span><span class="num" id="3361564">0</span><span class="op" id="3361565">]</span>&nbsp;<span class="op" id="3361567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361572">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3361587">//&nbsp;Check&nbsp;that&nbsp;start&nbsp;pos&nbsp;is&nbsp;on&nbsp;a&nbsp;valid&nbsp;token&nbsp;boundary.</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361643">if</span>&nbsp;<span class="ident" id="3361646"><a href="/net/http/header.go.html#3361155">sp</a></span>&nbsp;<span class="op" id="3361649">&gt;</span>&nbsp;<span class="num" id="3361651">0</span>&nbsp;<span class="op" id="3361653">&amp;&amp;</span>&nbsp;<span class="op" id="3361656">!</span><span class="ident" id="3361657"><a href="/net/http/header.go.html#3361949">isTokenBoundary</a></span><span class="op" id="3361672">(</span><span class="ident" id="3361673"><a href="/net/http/header.go.html#3361033">v</a></span><span class="op" id="3361674">[</span><span class="ident" id="3361675"><a href="/net/http/header.go.html#3361155">sp</a></span><span class="op" id="3361677">-</span><span class="num" id="3361678">1</span><span class="op" id="3361679">]</span><span class="op" id="3361680">)</span>&nbsp;<span class="op" id="3361682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361687">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3361702">//&nbsp;Check&nbsp;that&nbsp;end&nbsp;pos&nbsp;is&nbsp;on&nbsp;a&nbsp;valid&nbsp;token&nbsp;boundary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361756">if</span>&nbsp;<span class="ident" id="3361759">endPos</span>&nbsp;<span class="op" id="3361766">:=</span>&nbsp;<span class="ident" id="3361769"><a href="/net/http/header.go.html#3361155">sp</a></span>&nbsp;<span class="op" id="3361772">+</span>&nbsp;<span class="builtinfunc" id="3361774">len</span><span class="op" id="3361777">(</span><span class="ident" id="3361778"><a href="/net/http/header.go.html#3361036">token</a></span><span class="op" id="3361783">)</span><span class="op" id="3361784">;</span>&nbsp;<span class="ident" id="3361786"><a href="/net/http/header.go.html#3361759">endPos</a></span>&nbsp;<span class="op" id="3361793">!=</span>&nbsp;<span class="builtinfunc" id="3361796">len</span><span class="op" id="3361799">(</span><span class="ident" id="3361800"><a href="/net/http/header.go.html#3361033">v</a></span><span class="op" id="3361801">)</span>&nbsp;<span class="op" id="3361803">&amp;&amp;</span>&nbsp;<span class="op" id="3361806">!</span><span class="ident" id="3361807"><a href="/net/http/header.go.html#3361949">isTokenBoundary</a></span><span class="op" id="3361822">(</span><span class="ident" id="3361823"><a href="/net/http/header.go.html#3361033">v</a></span><span class="op" id="3361824">[</span><span class="ident" id="3361825"><a href="/net/http/header.go.html#3361759">endPos</a></span><span class="op" id="3361831">]</span><span class="op" id="3361832">)</span>&nbsp;<span class="op" id="3361834">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361839">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361850">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361854">if</span>&nbsp;<span class="ident" id="3361857"><a href="/net/http/header.go.html#3356510">strings</a></span><span class="op" id="3361864">.</span><span class="ident" id="3361865">EqualFold</span><span class="op" id="3361874">(</span><span class="ident" id="3361875"><a href="/net/http/header.go.html#3361033">v</a></span><span class="op" id="3361876">[</span><span class="ident" id="3361877"><a href="/net/http/header.go.html#3361155">sp</a></span><span class="op" id="3361879">:</span><span class="ident" id="3361880"><a href="/net/http/header.go.html#3361155">sp</a></span><span class="op" id="3361882">+</span><span class="builtinfunc" id="3361883">len</span><span class="op" id="3361886">(</span><span class="ident" id="3361887"><a href="/net/http/header.go.html#3361036">token</a></span><span class="op" id="3361892">)</span><span class="op" id="3361893">]</span><span class="op" id="3361894">,</span>&nbsp;<span class="ident" id="3361896"><a href="/net/http/header.go.html#3361036">token</a></span><span class="op" id="3361901">)</span>&nbsp;<span class="op" id="3361903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361908">return</span>&nbsp;<span class="builtintype" id="3361915">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361922">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3361925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361928">return</span>&nbsp;<span class="builtintype" id="3361935">false</span><br>
<span class="lineno"></span><span class="op" id="3361941">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3361944">func</span>&nbsp;<span class="ident" id="3361949">isTokenBoundary</span><span class="op" id="3361964">(</span><span class="ident" id="3361965">b</span>&nbsp;<span class="builtintype" id="3361967">byte</span><span class="op" id="3361971">)</span>&nbsp;<span class="builtintype" id="3361973">bool</span>&nbsp;<span class="op" id="3361978">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3361981">return</span>&nbsp;<span class="ident" id="3361988"><a href="/net/http/header.go.html#3361965">b</a></span>&nbsp;<span class="op" id="3361990">==</span>&nbsp;<span class="string" id="3361993">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3361997">||</span>&nbsp;<span class="ident" id="3362000"><a href="/net/http/header.go.html#3361965">b</a></span>&nbsp;<span class="op" id="3362002">==</span>&nbsp;<span class="string" id="3362005">&#39;,&#39;</span>&nbsp;<span class="op" id="3362009">||</span>&nbsp;<span class="ident" id="3362012"><a href="/net/http/header.go.html#3361965">b</a></span>&nbsp;<span class="op" id="3362014">==</span>&nbsp;<span class="string" id="3362017">&#39;\t&#39;</span><br>
<span class="lineno"></span><span class="op" id="3362022">}</span>
</div>
</body>
</html>
