<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/textproto</h2>
<ul>
<li><a href="/gostd/net/textproto/header.go.html">header.go</a></li>
<li><a href="/gostd/net/textproto/pipeline.go.html">pipeline.go</a></li>
<li><a href="/gostd/net/textproto/reader.go.html">reader.go</a></li>
<li><a href="/gostd/net/textproto/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/net/textproto/textproto.go.html">textproto.go</a></li>
<li><a href="/gostd/net/textproto/writer.go.html">writer.go</a></li>
<li><a href="/gostd/net/textproto/writer_test.go.html" class="current">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7115273">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7115329">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7115383">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7115434">package</span>&nbsp;<span class="ident" id="7115442">textproto</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7115453">import</span>&nbsp;<span class="op" id="7115460">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7115463">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7115472">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7115481">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7115491">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7115494">func</span>&nbsp;<span class="ident" id="7115499">TestPrintfLine</span><span class="op" id="7115513">(</span><span class="ident" id="7115514">t</span>&nbsp;<span class="op" id="7115516">*</span><span class="ident" id="7115517">testing</span><span class="op" id="7115524">.</span><span class="ident" id="7115525">T</span><span class="op" id="7115526">)</span>&nbsp;<span class="op" id="7115528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115531">var</span>&nbsp;<span class="ident" id="7115535">buf</span>&nbsp;<span class="ident" id="7115539">bytes</span><span class="op" id="7115544">.</span><span class="ident" id="7115545">Buffer</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115553">w</span>&nbsp;<span class="op" id="7115555">:=</span>&nbsp;<span class="ident" id="7115558">NewWriter</span><span class="op" id="7115567">(</span><span class="ident" id="7115568">bufio</span><span class="op" id="7115573">.</span><span class="ident" id="7115574">NewWriter</span><span class="op" id="7115583">(</span><span class="op" id="7115584">&amp;</span><span class="ident" id="7115585">buf</span><span class="op" id="7115588">)</span><span class="op" id="7115589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115592">err</span>&nbsp;<span class="op" id="7115596">:=</span>&nbsp;<span class="ident" id="7115599">w</span><span class="op" id="7115600">.</span><span class="ident" id="7115601">PrintfLine</span><span class="op" id="7115611">(</span><span class="string" id="7115612">&#34;foo&nbsp;%d&#34;</span><span class="op" id="7115620">,</span>&nbsp;<span class="num" id="7115622">123</span><span class="op" id="7115625">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115628">if</span>&nbsp;<span class="ident" id="7115631">s</span>&nbsp;<span class="op" id="7115633">:=</span>&nbsp;<span class="ident" id="7115636">buf</span><span class="op" id="7115639">.</span><span class="ident" id="7115640">String</span><span class="op" id="7115646">(</span><span class="op" id="7115647">)</span><span class="op" id="7115648">;</span>&nbsp;<span class="ident" id="7115650">s</span>&nbsp;<span class="op" id="7115652">!=</span>&nbsp;<span class="string" id="7115655">&#34;foo&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="7115669">||</span>&nbsp;<span class="ident" id="7115672">err</span>&nbsp;<span class="op" id="7115676">!=</span>&nbsp;<span class="builtintype" id="7115679">nil</span>&nbsp;<span class="op" id="7115683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115687">t</span><span class="op" id="7115688">.</span><span class="ident" id="7115689">Fatalf</span><span class="op" id="7115695">(</span><span class="string" id="7115696">&#34;s=%q;&nbsp;err=%s&#34;</span><span class="op" id="7115710">,</span>&nbsp;<span class="ident" id="7115712">s</span><span class="op" id="7115713">,</span>&nbsp;<span class="ident" id="7115715">err</span><span class="op" id="7115718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7115721">}</span><br>
<span class="lineno">20</span><span class="op" id="7115723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7115726">func</span>&nbsp;<span class="ident" id="7115731">TestDotWriter</span><span class="op" id="7115744">(</span><span class="ident" id="7115745">t</span>&nbsp;<span class="op" id="7115747">*</span><span class="ident" id="7115748">testing</span><span class="op" id="7115755">.</span><span class="ident" id="7115756">T</span><span class="op" id="7115757">)</span>&nbsp;<span class="op" id="7115759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115762">var</span>&nbsp;<span class="ident" id="7115766">buf</span>&nbsp;<span class="ident" id="7115770">bytes</span><span class="op" id="7115775">.</span><span class="ident" id="7115776">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115784">w</span>&nbsp;<span class="op" id="7115786">:=</span>&nbsp;<span class="ident" id="7115789">NewWriter</span><span class="op" id="7115798">(</span><span class="ident" id="7115799">bufio</span><span class="op" id="7115804">.</span><span class="ident" id="7115805">NewWriter</span><span class="op" id="7115814">(</span><span class="op" id="7115815">&amp;</span><span class="ident" id="7115816">buf</span><span class="op" id="7115819">)</span><span class="op" id="7115820">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115823">d</span>&nbsp;<span class="op" id="7115825">:=</span>&nbsp;<span class="ident" id="7115828">w</span><span class="op" id="7115829">.</span><span class="ident" id="7115830">DotWriter</span><span class="op" id="7115839">(</span><span class="op" id="7115840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115843">n</span><span class="op" id="7115844">,</span>&nbsp;<span class="ident" id="7115846">err</span>&nbsp;<span class="op" id="7115850">:=</span>&nbsp;<span class="ident" id="7115853">d</span><span class="op" id="7115854">.</span><span class="ident" id="7115855">Write</span><span class="op" id="7115860">(</span><span class="op" id="7115861">[</span><span class="op" id="7115862">]</span><span class="builtintype" id="7115863">byte</span><span class="op" id="7115867">(</span><span class="string" id="7115868">&#34;abc\n.def\n..ghi\n.jkl\n.&#34;</span><span class="op" id="7115895">)</span><span class="op" id="7115896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7115899">if</span>&nbsp;<span class="ident" id="7115902">n</span>&nbsp;<span class="op" id="7115904">!=</span>&nbsp;<span class="num" id="7115907">21</span>&nbsp;<span class="op" id="7115910">||</span>&nbsp;<span class="ident" id="7115913">err</span>&nbsp;<span class="op" id="7115917">!=</span>&nbsp;<span class="builtintype" id="7115920">nil</span>&nbsp;<span class="op" id="7115924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115928">t</span><span class="op" id="7115929">.</span><span class="ident" id="7115930">Fatalf</span><span class="op" id="7115936">(</span><span class="string" id="7115937">&#34;Write:&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="7115952">,</span>&nbsp;<span class="ident" id="7115954">n</span><span class="op" id="7115955">,</span>&nbsp;<span class="ident" id="7115957">err</span><span class="op" id="7115960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7115963">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115966">d</span><span class="op" id="7115967">.</span><span class="ident" id="7115968">Close</span><span class="op" id="7115973">(</span><span class="op" id="7115974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7115977">want</span>&nbsp;<span class="op" id="7115982">:=</span>&nbsp;<span class="string" id="7115985">&#34;abc\r\n..def\r\n...ghi\r\n..jkl\r\n..\r\n.\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7116035">if</span>&nbsp;<span class="ident" id="7116038">s</span>&nbsp;<span class="op" id="7116040">:=</span>&nbsp;<span class="ident" id="7116043">buf</span><span class="op" id="7116046">.</span><span class="ident" id="7116047">String</span><span class="op" id="7116053">(</span><span class="op" id="7116054">)</span><span class="op" id="7116055">;</span>&nbsp;<span class="ident" id="7116057">s</span>&nbsp;<span class="op" id="7116059">!=</span>&nbsp;<span class="ident" id="7116062">want</span>&nbsp;<span class="op" id="7116067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7116071">t</span><span class="op" id="7116072">.</span><span class="ident" id="7116073">Fatalf</span><span class="op" id="7116079">(</span><span class="string" id="7116080">&#34;wrote&nbsp;%q&#34;</span><span class="op" id="7116090">,</span>&nbsp;<span class="ident" id="7116092">s</span><span class="op" id="7116093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7116096">}</span><br>
<span class="lineno">35</span><span class="op" id="7116098">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
